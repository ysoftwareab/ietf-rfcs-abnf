<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>LISP Map Server Reliable Transport</title>
<meta content="Johnson Leong" name="author">
<meta content="Darrel Lewis" name="author">
<meta content="Balaji Pitta" name="author">
<meta content="Chris Cassar" name="author">
<meta content="Isidor Kouvelas" name="author">
<meta content="Jesus Arango" name="author">
<meta content="
       The communication between LISP ETRs and Map-Servers is based on
      unreliable UDP message exchange coupled with periodic message
      transmission in order to maintain soft state. The drawback of periodic
      messaging is the constant load imposed on both the ETR and the
      Map-Server. New use cases for LISP have increased the amount of state
      that needs to be communicated with requirements that are not satisfied
      by the current mechanism. This document introduces the use of a reliable
      transport for ETR to Map-Server communication in order to eliminate the
      periodic messaging overhead, while providing reliability, flow-control
      and endpoint liveness detection. 
    " name="description">
<meta content="xml2rfc 3.12.0" name="generator">
<meta content="draft-kouvelas-lisp-map-server-reliable-transport-07" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-kouvelas-lisp-map-server-reliable-transport-07-16305iha.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">LISP Map Server Reliable Transport</td>
<td class="right">January 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Leong, et al.</td>
<td class="center">Expires 22 July 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-kouvelas-lisp-map-server-reliable-transport-07</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-01-18" class="published">18 January 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-07-22">22 July 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Leong</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">D. Lewis</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">B. Pitta</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">C. Cassar</div>
<div class="org">Tesla</div>
</div>
<div class="author">
      <div class="author-name">I. Kouvelas</div>
<div class="org">Arista Networks Inc.</div>
</div>
<div class="author">
      <div class="author-name">J. Arango</div>
<div class="org">Microsoft</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">LISP Map Server Reliable Transport</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The communication between LISP ETRs and Map-Servers is based on
      unreliable UDP message exchange coupled with periodic message
      transmission in order to maintain soft state. The drawback of periodic
      messaging is the constant load imposed on both the ETR and the
      Map-Server. New use cases for LISP have increased the amount of state
      that needs to be communicated with requirements that are not satisfied
      by the current mechanism. This document introduces the use of a reliable
      transport for ETR to Map-Server communication in order to eliminate the
      periodic messaging overhead, while providing reliability, flow-control
      and endpoint liveness detection.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 22 July 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-requirements-notation" class="xref">Requirements Notation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-message-format" class="xref">Message Format</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-session-establishment" class="xref">Session Establishment</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-error-notifications" class="xref">Error Notifications</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-eid-prefix-registration" class="xref">EID Prefix Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-reliable-mapping-registrati" class="xref">Reliable Mapping Registration Messages</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="xref">6.1.1</a>.  <a href="#name-registration-message" class="xref">Registration Message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="xref">6.1.2</a>.  <a href="#name-registration-acknowledgemen" class="xref">Registration Acknowledgement Message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.3">
                    <p id="section-toc.1-1.6.2.1.2.3.1"><a href="#section-6.1.3" class="xref">6.1.3</a>.  <a href="#name-registration-rejection-mess" class="xref">Registration Rejection Message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.4">
                    <p id="section-toc.1-1.6.2.1.2.4.1"><a href="#section-6.1.4" class="xref">6.1.4</a>.  <a href="#name-registration-refresh-messag" class="xref">Registration Refresh Message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.5">
                    <p id="section-toc.1-1.6.2.1.2.5.1"><a href="#section-6.1.5" class="xref">6.1.5</a>.  <a href="#name-mapping-notification-messag" class="xref">Mapping Notification Message</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-etr-behavior" class="xref">ETR Behavior</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-map-server-behavior" class="xref">Map-Server Behavior</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-lisp-reliable-transport-mes" class="xref">LISP Reliable Transport Message Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-transport-protocol-port-num" class="xref">Transport Protocol Port Numbers</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The communication channel between LISP ETRs and Map-Servers is based
      on unreliable UDP message exchange <span>[<a href="#I-D.ietf-lisp-rfc6833bis" class="xref">I-D.ietf-lisp-rfc6833bis</a>]</span>. Where required, reliability is
      pursued through periodic retransmissions that maintain soft state on the
      peer. Map-Register messages are retransmitted every minute by an ETR and
      the Map-Server times out its state if the state is not refreshed for
      three successive periods. When registering multiple EID-Prefixes, the
      ETR includes multiple mapping records in the Map-Register message.
      Packet size limitations provide an upper bound to the number of mapping
      records that can be placed in each Map-Register message. When the ETR
      has more EID-Prefixes to register than can be packed in a single
      Map-Register message, the mapping records for the EID-Prefixes are split
      across multiple Map-Register messages.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The drawback of the periodic registration is the constant load that
      it introduces on both the ETR and the Map-Server. The ETR uses resources
      to periodically build and transmit the Map-Register messages, and to
      process the resulting Map-Notify messages issued by the Map-Server. The
      Map-Server uses resources to process the received Map-Register messages,
      update the corresponding registration state, and build and transmit the
      matching Map-Notify messages. When the number of EID-Prefixes to be
      registered by an ETR is small, the resulting load imposed by periodic
      registrations may not be significant. The ETR will only transmit a
      single Map-Register message each period that contains a small number of
      mapping records.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">In some LISP deployments, a large set of EID-Prefixes must be
      registered by each ETR (e.g. mobility, database redistribution). Use
      cases with a large set of EID-Prefixes behind an ETR will result in a
      much higher load. An example is LISP mobility deployments where
      EID-Prefixes are limited to host entries. ETRs may have thousands of
      hosts to register resulting in hundreds of Map-Register and Map-Notify
      messages per registration period.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">A transport is required for the ETR to Map-Server communication that
      provides reliability, flow-control and endpoint liveness notifications.
      This document describes the use of TCP or SCTP as a LISP reliable
      transport. The initial application for the LISP reliable transport
      session is the support of scalable EID prefix registration. The reliable
      session mechanism is defined to be extensible so that it can support
      additional LISP communication requirements as they arise using a single
      reliable transport session between an ETR and a Map-Server. The use of
      the reliable transport session for EID prefix registration is an
      alternative and does not replace the existing UDP based mechanism.<a href="#section-1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-requirements-notation">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-requirements-notation" class="section-name selfRef">Requirements Notation</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-message-format">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-message-format" class="section-name selfRef">Message Format</a>
      </h2>
<p id="section-3-1">A single LISP reliable transport session may carry information for
      multiple LISP applications. One such application is the registration of
      EID to RLOC mappings that operates over a session between an ETR and a
      Map-Server. Communication over a session is based on the exchange of
      messages. This document defines a base set of messages to support
      session establishment and management. It also defines the messages for
      the EID to RLOC mapping registration application.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">To support protocol extensibility when new applications, or
      extensions to existing applications are introduced, the messages are
      based on a TLV format.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-3-4">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Type              |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Message Data                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-3-4" class="pilcrow">¶</a>
</div>
<p id="section-3-5" class="keepWithPrevious">Reliable transport message format<a href="#section-3-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-6.1">Type: 16 bit type field identifying the message type.<a href="#section-3-6.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.2">Length: 16 bit field that provides the total size of the message
          in octets including the length, type and end marker fields. The
          length allows the receiver to locate the next message in the TCP
          stream. The minimum value of the length field is 8.<a href="#section-3-6.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.3">ID: A 32-bit value that identifies the message. May be used by
          the receiver to identify the message in replies or notification
          messages.<a href="#section-3-6.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.4">Data: Type specific message contents.<a href="#section-3-6.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.5">End Marker: A 32-bit message end marker that must be set to
          0x9FACADE9. The End Marker is used by the receiver to validate that
          it has correctly parsed or skipped a message and provides a method
          to detect formatting errors. Note that message data may also contain
          this marker, and that the marker itself is not sufficient for
          parsing the message.<a href="#section-3-6.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-7">The base message format does not indicate how the peer should deal
      with the message in cases where the message type is not
      supported/understood. This is best dealt with by the application. For
      example, in case an error notification is returned, or an expected
      acknowledgement message is not received, the application might choose
      various courses of action; from simply logging that the feature is not
      supported, all the way to tearing the relationship with the peer down
      for the feature, or for all LISP features.<a href="#section-3-7" class="pilcrow">¶</a></p>
</section>
<section id="section-4">
      <h2 id="name-session-establishment">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-session-establishment" class="section-name selfRef">Session Establishment</a>
      </h2>
<p id="section-4-1">To ensure backwards compatibility, the map server and ETR MUST
      communicate via unreliable UDP messages until a TCP session between the
      two is successfully established.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The map server authenticates the ETR with the authentication data
      contained in the first UDP map-register message it receives from the
      ETR. Once the ETR is authenticated, the map server performs a passive
      open by listening on TCP port 4342, and does not qualify the remote
      port. As a security measure, the map server accepts TCP connections only
      from those ETRs that have been authenticated via UDP map-register
      messages.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">The ETR assumes the active role of the TCP session establishment by
      connecting to the map server once it has received a UDP map-notify
      message.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">When a TCP session goes down, UDP authentication must take place
      before a new TCP session is established. The map-server will not accept
      a connection from the ETR until a UDP map-register has been received.
      Similarly, the ETR will not attempt to establish a session with the map
      server until an UDP map-notify message has been received.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">A single reliable transport session is established between the map
      server and the ETR to cover all communication needs. For example, an ETR
      that has EID prefix registrations for multiple EID instances and EID
      address families will only establish a single session with the map
      server.<a href="#section-4-5" class="pilcrow">¶</a></p>
</section>
<section id="section-5">
      <h2 id="name-error-notifications">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-error-notifications" class="section-name selfRef">Error Notifications</a>
      </h2>
<p id="section-5-1">The error notification message is used to communicate base reliable
      transport session communication errors. LISP applications making use of
      the reliable transport session and having to communicate application
      specific errors must define their own messages to do so. An error
      notification is issued when the receiver of a message does not recognize
      the message type or cannot parse the message contents. The notification
      includes the offending message type and ID and as much of the offending
      message data as the notification sender wishes to.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-5-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type = 16           |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Error Code    |                   Reserved                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Offending Message Type     |    Offending Message Length   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Offending Message ID                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Offending Message Data                   ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-5-3" class="pilcrow">¶</a>
</div>
<p id="section-5-4" class="keepWithPrevious">Error Notification message format<a href="#section-5-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-5.1">
          <p id="section-5-5.1.1">Error Code: An 8 bit field identifying the type of error that
          occurred. Defined errors are:<a href="#section-5-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-5.1.2.1">Unrecognized message type.<a href="#section-5-5.1.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-5-5.1.2.2">Message format error.<a href="#section-5-5.1.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-5-5.2">Reserved: Set to zero by the sender and ignored by the
          receiver.<a href="#section-5-5.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-5.3">Offending Message Type: 16 bit type field identifying the message
          type of the offending message that triggered this error
          notification. This is copied from the Type field of the offending
          message.<a href="#section-5-5.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-5.4">Offending Message Length: 16 bit field that provides the total
          size of the offending message in octets. This is copied from the
          Length field of the offending message.<a href="#section-5-5.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-5.5">Offending Message ID: A 32-bit field that is set to the Message
          ID field of the offending message.<a href="#section-5-5.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-5.6">Offending Message Data: The Data from the offending message that
          triggered this error notification. The sender of the notification
          may include as much of the original data as is deemed necessary. The
          length of the Offending Message Data field is not provided by the
          Offending Message Length field and is determined by subtracting the
          size of the other fields in the message from the Length field. It is
          valid to not include any of the offending message data when sending
          an error notification.<a href="#section-5-5.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-5.7">End Marker: A 32-bit message end marker that must be set to
          0x9FACADE9. The End Marker is used by the receiver to validate that
          it has correctly parsed or skipped a message and provides a method
          to detect formatting errors. Note that message data may also contain
          this marker, and that the marker itself is not sufficient for
          parsing the message.<a href="#section-5-5.7" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-5-6">An error notification cannot be the offending message in another
      error notification and MUST NOT trigger such a message.<a href="#section-5-6" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-eid-prefix-registration">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-eid-prefix-registration" class="section-name selfRef">EID Prefix Registration</a>
      </h2>
<p id="section-6-1">EID prefix registration uses the reliable transport session between
      an ETR and a Map-Server to communicate the ETR local EID database EID to
      RLOC mappings to the Map-Server. In contrast to the UDP based periodic
      registration, mapping information over the reliable transport session is
      only sent when there is new information available for the Map-Server.
      The Map-Server does not maintain a timer to expire registrations
      communicated over the reliable transport session. Instead an explicit
      de-registration (a registration carrying a zero TTL) is needed to delete
      the state maintained by the Map-Server.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">The key used to identify registration mapping records in the ETR to
      Map-Server communication is the EID prefix. The prefix may be specified
      using an LCAF encoding that includes an EID instance ID.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">When the reliable transport session goes down, registration mappings
      learned by the Map-Server are treated as periodic UDP registrations and
      a timer is used to expire them after 3 minutes. During this period UDP
      based registrations or the re-establishment of the reliable transport
      session and subsequent communication of a new mapping can update the EID
      prefix mapping state.<a href="#section-6-3" class="pilcrow">¶</a></p>
<section id="section-6.1">
        <h3 id="name-reliable-mapping-registrati">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-reliable-mapping-registrati" class="section-name selfRef">Reliable Mapping Registration Messages</a>
        </h3>
<p id="section-6.1-1">This section defines the LISP reliable transport session messages
        used to communicate local EID database registrations between the ETR
        and the Map-Server.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<section id="section-6.1.1">
          <h4 id="name-registration-message">
<a href="#section-6.1.1" class="section-number selfRef">6.1.1. </a><a href="#name-registration-message" class="section-name selfRef">Registration Message</a>
          </h4>
<p id="section-6.1.1-1">The reliable transport registration message is used to
          communicate EID to RLOC mapping registrations from the ETR to the
          Map-Server. To increase code reuse, the "Message Data" field uses
          the same format as the UDP Map-Registers but without the IP and UDP
          headers. A reliable registration message MUST contain a single
          mapping-record. The map server MUST discard any reliable
          registration message that contains more than one mapping record.<a href="#section-6.1.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1.1-2">The reliable transport session is authenticated by means of the
          session establishment procedure. Thus, although the Map-Register
          MUST carry the authentication data, it is up to the map server to
          determine if each individual reliable registration message should be
          authenticated.<a href="#section-6.1.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1.1-3" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.1.1-4">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type = 17           |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Map-Register message                   ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
...                    Map-Register message                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6.1.1-4" class="pilcrow">¶</a>
</div>
<p id="section-6.1.1-5" class="keepWithPrevious">Registration message format<a href="#section-6.1.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-6.1.2">
          <h4 id="name-registration-acknowledgemen">
<a href="#section-6.1.2" class="section-number selfRef">6.1.2. </a><a href="#name-registration-acknowledgemen" class="section-name selfRef">Registration Acknowledgement Message</a>
          </h4>
<p id="section-6.1.2-1">The Acknowledgement message is sent from the Map-Server to the
          ETR to confirm successful registration of an EID prefix previously
          communicated by a reliable transport session Registration message.
          The Registration Acknowledgement message does not carry a mapping
          record (the map servers view of the mapping). This is accomplished
          by the LISP reliable transport Map Notification message.<a href="#section-6.1.2-1" class="pilcrow">¶</a></p>
<p id="section-6.1.2-2" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.1.2-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type = 18           |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Prefix-Length |       EID-Prefix-AFI          | EID-Prefix  ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6.1.2-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.2-4" class="keepWithPrevious">Registration Acknowledgement message
              format<a href="#section-6.1.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.2-5.1">Prefix-Length: Mask length for the EID prefix.<a href="#section-6.1.2-5.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.2-5.2">EID-Prefix AFI: Address family identifier for the EID prefix
              in the following field.<a href="#section-6.1.2-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.2-5.3">EID-Prefix: The EID prefix from the received
              Registration.<a href="#section-6.1.2-5.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-6.1.3">
          <h4 id="name-registration-rejection-mess">
<a href="#section-6.1.3" class="section-number selfRef">6.1.3. </a><a href="#name-registration-rejection-mess" class="section-name selfRef">Registration Rejection Message</a>
          </h4>
<p id="section-6.1.3-1">The Registration Rejection Message is sent by the map server to
          the ETR to indicate that the registration of a specific EID prefix
          is being rejected or withdrawn. A rejection refers to a
          recently-sent registration that is being immediately rejected. A
          withdrawal refers to a previously accepted registration that is no
          longer acceptable, perhaps due to a configuration change in the
          map-server. The ETR must keep track of rejected EID prefixes and be
          prepared to re-register their mappings when requested through a
          registration refresh message.<a href="#section-6.1.3-1" class="pilcrow">¶</a></p>
<p id="section-6.1.3-2" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.1.3-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type = 19           |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Reason    |           Reserved            | Prefix-Length |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        EID-Prefix-AFI         |          EID-Prefix         ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6.1.3-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.3-4" class="keepWithPrevious">Registration Rejection message format<a href="#section-6.1.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.3-5.1">
              <p id="section-6.1.3-5.1.1">Reason: Code identifying the reason for which the Map-Server
              rejected or withdrew the registration.<a href="#section-6.1.3-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.3-5.1.2.1">1 - Not a valid site EID prefix.<a href="#section-6.1.3-5.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.3-5.1.2.2">2 - Authentication failure.<a href="#section-6.1.3-5.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.3-5.1.2.3">3 - Locator set not allowed.<a href="#section-6.1.3-5.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.3-5.1.2.4">4 - Used to cover reason that's not defined.<a href="#section-6.1.3-5.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-6.1.3-5.2">Reserved: This field is reserved for future use. Set to zero
              by the sender and ignored by the receiver.<a href="#section-6.1.3-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.3-5.3">Prefix-Length: Mask length for the EID prefix.<a href="#section-6.1.3-5.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.3-5.4">EID-Prefix-AFI: Address family identifier for the EID prefix
              in the following field.<a href="#section-6.1.3-5.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.3-5.5">EID-Prefix: The EID prefix being rejected or withdrawn.<a href="#section-6.1.3-5.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-6.1.4">
          <h4 id="name-registration-refresh-messag">
<a href="#section-6.1.4" class="section-number selfRef">6.1.4. </a><a href="#name-registration-refresh-messag" class="section-name selfRef">Registration Refresh Message</a>
          </h4>
<p id="section-6.1.4-1">Sent by the Map-Server to the ETR to request the
          (re-)transmission of EID prefix database mapping Registration
          messages.<a href="#section-6.1.4-1" class="pilcrow">¶</a></p>
<p id="section-6.1.4-2" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type = 20           |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Scope    |R|          Reserved           | Prefix-Length |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        EID-Prefix-AFI         |          EID-Prefix         ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6.1.4-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.4-4" class="keepWithPrevious">Registration Refresh message format<a href="#section-6.1.4-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.4-5.1">
              <p id="section-6.1.4-5.1.1">Scope: Determines the set of registrations being refreshed.<a href="#section-6.1.4-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.4-5.1.2.1">0 - All prefixes under all address families under all EID
                  instances are being refreshed. When using this scope the
                  Prefix-Length, EID-Prefix-AFI, and EID-Prefix fields MUST be
                  omitted. That is, the Message End Marker follows immediately
                  after the Reserved field. The total length of the message
                  MUST be 15 bytes.<a href="#section-6.1.4-5.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.4-5.1.2.2">1 - All prefixes under all address families under a
                  single EID instance are being refreshed. The Prefix-Length
                  MUST be set to zero, EID-Prefix-AFI MUST be set to LCAF
                  type, the EID-Prefix encodes the LCAF Instance ID, the LCAF
                  address AFI MUST be set to UNSPECIFIED. The total length of
                  the message MUST be 30 bytes.<a href="#section-6.1.4-5.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.4-5.1.2.3">2 - All prefixes under a single address family under a
                  single EID instance are being refreshed. The Prefix-Length
                  MUST be set to zero, the EID-Prefix-AFI MUST be set to LCAF
                  type and the EID-Prefix MUST encode the Instance ID. The
                  LCAF address AFI MUST specify the address family to refresh,
                  the actual address SHOULD be set to zero.<a href="#section-6.1.4-5.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.4-5.1.2.4">3 - All prefixes covered by a specific EID prefix in a
                  single EID instance is being refreshed. The Prefix-Length,
                  EID-Prefix-AFI and EID prefix MUST be encoded
                  accordingly.<a href="#section-6.1.4-5.1.2.4" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6.1.4-5.1.2.5">4 - A specific EID prefix in a single EID instance is
                  being refreshed. The Prefix-Length, EID-Prefix-AFI and EID
                  prefix MUST be encoded accordingly.<a href="#section-6.1.4-5.1.2.5" class="pilcrow">¶</a>
</li>
              </ul>
<p id="section-6.1.4-5.1.3"> The map-server has the flexibility to control the
              granularity of the refresh by issuing refresh with different
              scopes. It can send a single refresh with a coarse scope or send
              individual refreshes with narrower scope. The ETR MUST be able
              to process all scopes to ensure the map-server registration
              states are synchronized with the ETR.<a href="#section-6.1.4-5.1.3" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-6.1.4-5.2">R: Request from the ETR to only refresh registrations that
              have been previously rejected by the Map-Server. If the R bit is
              set then the scope cannot have a value of 3 and the EID-Prefix
              and Prefix-Length fields must be omitted.<a href="#section-6.1.4-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.4-5.3">Reserved: This field is reserved for future use. Set to zero
              by the sender and ignored by the receiver.<a href="#section-6.1.4-5.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.4-5.4">Prefix-Length: Mask length for the EID prefix. Refer to scope
              for more details.<a href="#section-6.1.4-5.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.4-5.5">EID-Prefix-AFI: Address family identifier for the EID prefix
              in the following field. Refer to scope for more details.<a href="#section-6.1.4-5.5" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.4-5.6">EID-Prefix: The EID prefix being refreshed. Refer to scope
              for more details.<a href="#section-6.1.4-5.6" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-6.1.5">
          <h4 id="name-mapping-notification-messag">
<a href="#section-6.1.5" class="section-number selfRef">6.1.5. </a><a href="#name-mapping-notification-messag" class="section-name selfRef">Mapping Notification Message</a>
          </h4>
<p id="section-6.1.5-1">Mapping Notification messages communicate the Map-Server view of
          the mapping for an EID prefix and no longer serve as a registration
          acknowledgement. Mapping Notifications do not need message level
          authentication as they are received over a reliable transport
          session to a known Map-Server. Note that reliable transport Mapping
          Notification messages do not reuse the UDP Map-Notify message
          format.<a href="#section-6.1.5-1" class="pilcrow">¶</a></p>
<p id="section-6.1.5-2" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.1.5-3">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type = 21           |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Message ID                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       xTR-ID 128 bits                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       xTR-ID 128 bits                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       xTR-ID 128 bits                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       xTR-ID 128 bits                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       site-ID 64 bits                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       site-ID 64 bits                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Mapping Record                      ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
...                       Mapping Record                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Message End Marker                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6.1.5-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.5-4" class="keepWithPrevious">Mapping Notification message format<a href="#section-6.1.5-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.5-5.1">xTR-ID: xTR-ID taken from the last valid registration the
              map-server received for the EID-prefix conveyed in the mapping
              record.<a href="#section-6.1.5-5.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.5-5.2">site-ID: site-ID taken from the last valid registration the
              map-server received for the EID-prefix conveyed in the mapping
              record.<a href="#section-6.1.5-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.5-5.3">Mapping Record: Mapping record of the EID-prefix the
              map-server is conveying to the ETR.<a href="#section-6.1.5-5.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</section>
<section id="section-6.2">
        <h3 id="name-etr-behavior">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-etr-behavior" class="section-name selfRef">ETR Behavior</a>
        </h3>
<p id="section-6.2-1">The ETR operates the following per EID prefix, per MS state machine
        that defines the reliable transport EID prefix registration
        behavior.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">There are five states:<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-3.1">No state: The local EID database prefix does not exist.<a href="#section-6.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-3.2">Periodic: The local EID database prefix is being periodically
            registered through UDP Map-Register messages as specified in
            [].<a href="#section-6.2-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-3.3">Stable: From the ETR's perspective, no registrations are due to
            be sent to the peer. The session to the peer is up, and the peer
            has either acknowledged the registration, or is expected to
            request a refresh in the future.<a href="#section-6.2-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-3.4">AckWait: A Registration message for the prefix has been
            transmitted to the Map-Server and the ETR is waiting for either a
            Registration Acknowledge or Registration Rejected reply from the
            Map-Server.<a href="#section-6.2-3.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-3.5">Reject: The reliable transport registration for the local EID
            database prefix was rejected by the Map-Server. From the ETR's
            perspective, no registration is due to the peer AND the peer is
            known to have rejected the registration.<a href="#section-6.2-3.5" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.2-4">The following events drive the state transitions:<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-5.1">DB creation: The local EID database entry for the EID prefix is
            created.<a href="#section-6.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.2">DB deletion: The local EID database entry for the EID prefix is
            deleted.<a href="#section-6.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.3">DB change: The mapping contents or authentication information
            for the local EID database entry changes.<a href="#section-6.2-5.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.4">Session up: The reliable transport session to the Map-Server is
            established.<a href="#section-6.2-5.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.5">Session down: The reliable transport session the Map-Server
            goes down.<a href="#section-6.2-5.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.6">Recv Refresh: A Registration refresh message is received from
            the Map-Server.<a href="#section-6.2-5.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.7">Recv ACK: A Registration Acknowledge message is received from
            the Map-Server.<a href="#section-6.2-5.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.8">Recv Rejected: A Registration Rejected message is received from
            the Map-Server.<a href="#section-6.2-5.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-5.9">Periodic timer: The timer that drives generation of periodic
            UDP Map-Register messages fires.<a href="#section-6.2-5.9" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.2-6">The state machine is:<a href="#section-6.2-6" class="pilcrow">¶</a></p>
<p id="section-6.2-7" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.2-8">
<pre>
+--------------------+--------------------------------------+
|                    |              Prev State              |
|  Event             +-------------------+------------------+
|                    |   No state        |    Periodic      |
+--------------------+-------------------+------------------+
|  DB creation       |   -&gt; Periodic     |    N/A           |
|  [session down]    |   A1              |                  |
+--------------------+-------------------+------------------+
|  DB creation       |   -&gt; AckWait      |    N/A           |
|  [session up]      |   A2              |                  |
+--------------------+-------------------+------------------+
|  DB deletion       |   N/A             |    -&gt; No state   |
|                    |                   |    A3            |
+--------------------+-------------------+------------------+
|  DB change         |   N/A             |    -             |
|                    |                   |    A1            |
+--------------------+-------------------+------------------+
|  Session up        |   -               |    -&gt; Stable     |
|                    |                   |    A4            |
+--------------------+-------------------+------------------+
|  Session down      |   -               |    N/A           |
|                    |                   |                  |
+--------------------+-------------------+------------------+
|  Recv Refresh      |   -               |    N/A           |
|                    |                   |                  |
+--------------------+-------------------+------------------+
|  Recv Refresh      |   -               |    N/A           |
|  [rejected]        |                   |                  |
+--------------------+-------------------+------------------+
|  Recv ACK          |   -               |    N/A           |
|                    |                   |                  |
+--------------------+-------------------+------------------+
|  Recv Rejection    |   -               |    N/A           |
|                    |                   |                  |
+--------------------+-------------------+------------------+
|  Timer             |   N/A             |    -             |
|                    |                   |    A5            |
+--------------------+-------------------+------------------+
</pre><a href="#section-6.2-8" class="pilcrow">¶</a>
</div>
<p id="section-6.2-9" class="keepWithPrevious">xTR per EID prefix per MS state machine<a href="#section-6.2-9" class="pilcrow">¶</a></p>
<p id="section-6.2-10" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-6.2-11">
<pre>
+-----------------+-----------------------------------------------+
|                 |                   Prev State                  |
| Event           +---------------+---------------+---------------+
|                 |    Stable     |   AckWait     |   Rejected    |
+-----------------+---------------+---------------+---------------+
| DB creation     | N/A           | N/A           | N/A           |
|                 |               |               |               |
+-----------------+---------------+---------------+---------------+
| DB deletion     | -&gt; No state   | -&gt; No state   | -&gt; No state   |
|                 | A6            | A6            |               |
+-----------------+---------------+---------------+---------------+
| DB change       | -&gt; AckWait    | -             | -&gt; AckWait    |
|                 | A2            | A2            | A2            |
+-----------------+---------------+---------------+---------------+
| Session up      | N/A           | N/A           | N/A           |
|                 |               |               |               |
+-----------------+---------------+---------------+---------------+
| Session down    | -&gt; Periodic   | -&gt; Periodic   | -&gt; Periodic   |
|                 | A7            | A7            | A7            |
+-----------------+---------------+---------------+---------------+
| Recv Refresh    | -&gt; AckWait    | -             | -&gt; AckWait    |
|                 | A2            | A2            | A2            |
+-----------------+---------------+---------------+---------------+
| Recv Refresh    | -             | -             | -&gt; AckWait    |
| [rejected]      |               | A2            | A2            |
+-----------------+---------------+---------------+---------------+
| Recv ACK        | -             | -&gt; Stable     | -&gt; AckWait    |
|                 |               |               | A2            |
+-----------------+---------------+---------------+---------------+
| Recv Rejection  | -&gt; Rejected   | -&gt; Rejected   | -             |
|                 |               |               |               |
+-----------------+---------------+---------------+---------------+
| Timer           | N/A           | N/A           | N/A           |
|                 |               |               |               |
+-----------------+---------------+---------------+---------------+
</pre><a href="#section-6.2-11" class="pilcrow">¶</a>
</div>
<p id="section-6.2-12" class="keepWithPrevious">xTR per EID prefix per MS state machine<a href="#section-6.2-12" class="pilcrow">¶</a></p>
<p id="section-6.2-13">Action descriptions:<a href="#section-6.2-13" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-14.1">A1: Start periodic registration timer with zero delay.<a href="#section-6.2-14.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-14.2">A2: Send Registration over reliable transport session.<a href="#section-6.2-14.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-14.3">A3: Send UDP registration with zero TTL.<a href="#section-6.2-14.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-14.4">A4: Stop periodic registration timer.<a href="#section-6.2-14.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-14.5">A7: Send UDP registration and start periodic registration timer
            with registration period.<a href="#section-6.2-14.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-14.6">A6: Send Registration with TTL zero over reliable transport
            session.<a href="#section-6.2-14.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-14.7">A7: Start periodic registration timer with registration
            period.<a href="#section-6.2-14.7" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.2-15"> All timer start actions must be jittered.<a href="#section-6.2-15" class="pilcrow">¶</a></p>
<p id="section-6.2-16">When the reliable transport session is established the ETR moves
        the state machine into the Stable state without first registering the
        EID prefix over the reliable transport session. The map server will
        send a refresh message with a scope of 0 that will trigger the
        registration message to be sent. Because other applications may be
        using the reliable session, the refresh message signals the ETR that
        the map server supports reliable map registration messages. This model
        will also allow future optimizations where the Map-Server may retain
        registration state from a previous instantiation of the reliable
        transport session with the ETR and only request the refresh of EID
        prefix state beyond some negotiated session progress marker.<a href="#section-6.2-16" class="pilcrow">¶</a></p>
<p id="section-6.2-17">Aa Map-Server authentication key change is treated as a DB change
        event and will result in triggering a new Registration message to be
        transmitted.<a href="#section-6.2-17" class="pilcrow">¶</a></p>
</section>
<section id="section-6.3">
        <h3 id="name-map-server-behavior">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-map-server-behavior" class="section-name selfRef">Map-Server Behavior</a>
        </h3>
<p id="section-6.3-1">Received registrations create/update or delete mapping state.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">A refresh with global scope is sent when a session between the ETR
        and map-server is first established so the map-server can obtain the
        complete database contents from the ETR. This refresh is also serving
        as a capability signaling from the map-server to the ETR that it can
        support reliable registration.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<p id="section-6.3-3">Refresh for rejected registrations sent (R bit set) when a new EID
        prefix is configured on the Map-Server.<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<p id="section-6.3-4">Refresh is sent whenever authentication key is changed or EID
        prefix is deconfigured. Upon reception of the registration map-server
        can decide whether to acknowledge the registration or issue
        rejection.<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<p id="section-6.3-5">Mapping Notification message sent whenever the mapping for a
        registered or more specific prefix for which notifications are
        requested changes. ETR acknowledgement or rejection messaging for
        Mapping Notification is not required because the ETR decides how to
        process the message based on the registered mapping information. If
        the mapping information changes the resulting registration will
        trigger a new Mapping Notification message from the Map-Server.<a href="#section-6.3-5" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">The LISP reliable transport session SHOULD be authenticated. On
      controlled RLOC networks that can guarantee that the source RLOC address
      of data packets cannot be spoofed, the authentication check can be a
      source address validation on the reliable transport packets. When the
      RLOC network does not provide such guarantees, reliable transport
      authentication SHOULD be used. Implementations SHOULD support the TCP
      Authentication Option (TCP-AO) [RFC5925] and SCTP Authenticated Chunks
      [RFC4895].<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-lisp-reliable-transport-mes">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-lisp-reliable-transport-mes" class="section-name selfRef">LISP Reliable Transport Message Types</a>
        </h3>
<p id="section-8.1-1">Assignment of new LISP reliable transport message types is done
        according to the "IETF Review" model defined in <span>[<a href="#RFC5266" class="xref">RFC5266</a>]</span>.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">The initial content of the registry should be as follows.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3" class="keepWithNext"></p>
<div class="alignLeft art-text artwork" id="section-8.1-4">
<pre>
Type         Name                                      Reference
-----------  ----------------------------------------  --------------
0-15         Reserved                                  This document
16           Error Notification                        This document
17           Registration Message                      This document
18           Registration Acknowledgement Message      This document
19           Registration Rejected Message             This document
20           Registration Refresh Message              This document
21           Mapping Notification Message              This document
22-30        Reserved for EID membership distribution  TBD
31-64999     Unassigned
65000-65535  Reserved for Experimental Use
</pre><a href="#section-8.1-4" class="pilcrow">¶</a>
</div>
</section>
<section id="section-8.2">
        <h3 id="name-transport-protocol-port-num">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-transport-protocol-port-num" class="section-name selfRef">Transport Protocol Port Numbers</a>
        </h3>
<p id="section-8.2-1">TCP port 4342 already reserved for LISP CONS that is now obsolete.
        Repurpose for reliable transport over TCP. Reserve an SCTP port.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-9">
      <h2 id="name-acknowledgments">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-9-1">The authors would like to thank Noel Chiappa, Dino Farinacci, Jesper
      Skriver, Andre Pelletier and Les Ginsberg for their contributions to
      this document.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
<section id="section-10">
      <h2 id="name-normative-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.ietf-lisp-rfc6833bis">[I-D.ietf-lisp-rfc6833bis]</dt>
      <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Maino, F.</span>, <span class="refAuthor">Fuller, V.</span>, and <span class="refAuthor">A. Cabellos</span>, <span class="refTitle">"Locator/ID Separation Protocol (LISP) Control-Plane"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lisp-rfc6833bis-30</span>, <time datetime="2020-11-18" class="refDate">18 November 2020</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-lisp-rfc6833bis-30.txt">https://www.ietf.org/archive/id/draft-ietf-lisp-rfc6833bis-30.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5266">[RFC5266]</dt>
      <dd>
<span class="refAuthor">Devarapalli, V.</span> and <span class="refAuthor">P. Eronen</span>, <span class="refTitle">"Secure Connectivity and Mobility Using Mobile IPv4 and IKEv2 Mobility and Multihoming (MOBIKE)"</span>, <span class="seriesInfo">BCP 136</span>, <span class="seriesInfo">RFC 5266</span>, <span class="seriesInfo">DOI 10.17487/RFC5266</span>, <time datetime="2008-06" class="refDate">June 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5266">https://www.rfc-editor.org/info/rfc5266</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8060">[RFC8060]</dt>
    <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Meyer, D.</span>, and <span class="refAuthor">J. Snijders</span>, <span class="refTitle">"LISP Canonical Address Format (LCAF)"</span>, <span class="seriesInfo">RFC 8060</span>, <span class="seriesInfo">DOI 10.17487/RFC8060</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8060">https://www.rfc-editor.org/info/rfc8060</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Johnson Leong</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">Tasman Drive</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:joleong@cisco.com" class="email">joleong@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Darrel Lewis</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">Tasman Drive</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:darlewis@cisco.com" class="email">darlewis@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Balaji Pitta</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">Tasman Drive</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bvenkata@cisco.com" class="email">bvenkata@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Chris Cassar</span></div>
<div dir="auto" class="left"><span class="org">Tesla</span></div>
<div dir="auto" class="left"><span class="street-address">10 New Square Park</span></div>
<div dir="auto" class="left"><span class="locality">Bedfont Lakes</span></div>
<div dir="auto" class="left"><span class="postal-code">TW14 8HA</span></div>
<div dir="auto" class="left"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:christiancassar@acm.org" class="email">christiancassar@acm.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Isidor Kouvelas</span></div>
<div dir="auto" class="left"><span class="org">Arista Networks Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">5453 Great America Parkway</span></div>
<div dir="auto" class="left">
<span class="locality">Santa Clara</span>, <span class="region">CA</span> <span class="postal-code">95054</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:isidor@kouvelas.net" class="email">isidor@kouvelas.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jesus Arango</span></div>
<div dir="auto" class="left"><span class="org">Microsoft</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jearango@microsoft.com" class="email">jearango@microsoft.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
