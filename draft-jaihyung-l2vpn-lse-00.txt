

   L2VPN Working Group                                                         
   Internet Draft                                                J. Cho 
   Document: draft-jaihyung-l2vpn-lse-00.txt                      ETRI 
   Expires: April 2004                                     October 2003 
    
    
        A Label Switching Technique for Ethernet Frame Transmission    
    
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 [i].  
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 except that the right to 
   produce derivative works is not granted.  
    
   This document is an Internet-Draft and is NOT offered in accordance 
   with Section 10 of RFC2026, and the author does not provide the IETF 
   with any rights other than to publish as an Internet-Draft  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
    
    
    
    
Abstract 
    
   LSE (Label Switched Ethernet) is a label switching technique for 
   transmission of Ethernet frame. The method offers not only L2VPN 
   connectivity but it also provides features for dynamic connection 
   establishment and resource reservation. LSE does not require 
   additional information fields other than 802.3 standard header 
   because it uses destination address and source address as labels. As 
   a result, compatibility with legacy Ethernet is maintained and it 
   provides label switching service from terminal to terminal. 
   Equipments that support LSE are connected via Ethernet tunnel merging 
 
 
Cho          Expires - April 2004                            [Page 1] 
                                 LSE                     October 2003 
 
 
   tree or TLSP (Tunnel LSP) tree across legacy network equipment. User 
   terminals establish connections using modified ARP protocol. Use of 
   merging tree structure helps reducing signaling overhead as well as 
   improving scalability of LSE network. LSE also provides unified 
   mechanism for unicasting, multicasting and wireless terminal mobility. 
    
    
Conventions used in this document 
  
    
   In examples, "C:" and "S:" indicate lines sent by the client and 
   server respectively. 
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC-2119 [ii]. 
    
Table of Contents 
    
   1. Overview.......................................................2 
   2. Classification of Network Equipments...........................3 
   3. Label Switched Ethernet Frame Format...........................4 
   4. LSE Tunnel Establishment.......................................4 
   5. Signaling & Connection Setup...................................6 
   6. Label Switched Data Transmission  .............................8
   7. Data Transmission in All LSE Network...........................9
   8. Support for Multicasting and Wireless LAN Mobility............12
   9. Structuring LSE Network.......................................14
   10. Conclusion...................................................15
   11. Security Considerations......................................15 
   12. References...................................................15 

   Author's Addresses...............................................16 
    
    
    
    
1.   Overview 
    
   LSE employs advantage of MPLS technique in order to improve 
   scalability, QoS and ability for VPN support for Ethernet. Techniques 
   suggested for employing MPLS function in Ethernet, such as [iii], 
   focus only on providing L2VPN connectivity, that the methods lack 
   functions for dynamic provisioning and differentiated service for 

 
 
Cho          Expires - April 2004                      [Page 2] 
                                 LSE                     October 2003 
 
 
   each traffic flow of applications. Overhead caused from large size of 
   frame header is another problem in particular for applications such 
   as VoIP that generates small size of payload. However, the length of 
   header required for supporting LSE is minimum compared to other 
   methods because LSE uses destination address and source address of 
   standard 802.3 header as labels. A distinct feature of LSE is that it 
   provides service for connection establishment and resource 
   reservation using modified ARP protocol. Pre-established tunnels are 
   used for allocation of small flows. The edge nodes of a tunnel 
   control admission of ARP requests and negotiate labels. Terminals use 
   different labels (i.e. different addresses) for traffic flows of 
   different forwarding classes. Switches that support LSE translate the 
   labels to addresses that legacy Ethernet switches can deliver frames 
   to appropriate LSE switches. Thus Ethernet switches do not need aware 
   of transition of frame forwarding scheme from legacy Ethernet to 
   Label Switched Ethernet. LSE also supports multicasting and wireless 
   terminal mobility using a unified mechanism. Overall mechanism for 
   LSE label assignment and frame forwarding will be explained. A soft 
   process for evolving legacy Ethernet to LSE supporting network is 
   proposed.  
 
2.   Classification of Network Equipments 
    
   Equipments discussed in this document are classified as following. 
    
   Class-1 Equipment : Legacy Ethernet equipments including NIC of user 
                       terminal.  

   Class-2 Equipment : Ethernet switches that support LSE functions 

   Class-3 Equipment : IP level gateways that provide services for 
                       interworking with Class-2 networks and IP networks 

   Class-4 Equipment : Circuit based equipments that employ LSE control 
                       stacks 
    
   Class-2 equipment offer services for label switched frame 
   transmission and interworking with legacy Ethernet protocols such as 
   spanning tree establishment. Typical class-2 network consists of 
   class-1 equipment and class-2 equipment. Class-3 switches are IP 
   routers providing services for both LSE label switching and IP packet 
   forwarding. Class-4 equipments are circuit switches such as ATM or 
   optical cross-connects (OxCs) that employ LSE protocol stack for 
   controlling data plane. 
    
    
    
 
 
Cho          Expires - April  2004                      [Page 3] 
                                 LSE                     October 2003 
 
 
    
3.   Frame Format of Label Switched Ethernet 
    
    
   Figure-1 shows basic format of LSE frame.  
    
    
 0                   1                   2                   3 3 
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
|   Destination Address (TID Part=24bit)        |      DA       | 
+-------------------------------+---------------+---------------+ 
|      DA (LID Part=24bit)      |  Source Address (TID Part =   | 
+---------------+---------------+-------------------------------+ 
|   24 bit)     |            SA (LID Part = 24 bit)             | 
+---------------+-----------------------------------------------+ 
|     Length/Type (=LSE)        |          Payload              | 
+-------------------------------+                               | 
|                                                               | 
|                                                               | 
|                                                               | 
|                                                               | 
+---------------------------------------------------------------+ 
      
    
   Figure-1  LSE Frame Format 
    
    
   The frame format of LSE follows specification of IEEE 802.3 except 
   that the destination address (DA) and the source address (SA) fields 
   are used as labels. Each DA and SA field consists of 3 bytes of 
   Tunnel ID (TID) part and 3 bytes of Local ID (LID) part. The 
   Length/Type field indicates that the frame must be treated according 
   to LSE protocol. 
    
    
    
4.   LSE Tunnel Establishment 
    
   Class-2 switches use pre-established Ethernet tunnels in order to 
   exchange signaling messages and establish connections. LTE (LSE 
   Tunnel Establishment) frame, as shown in figure-2, is used for 
   building tunnels between every class-2 switches in a class-2 network. 
   Class-2 switches broadcast LTE frame periodically. The frame contains 
   information of list of terminals attached to the switch, and resource 
   demand necessary for provisioning a tunnel. 
    
    
    
 
 
Cho          Expires - April  2004                      [Page 4] 
                                 LSE                     October 2003 
 
 
 0                   1                   2                   3 3 
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
|         Ethernet Multicast/Broadcast Address (6byte)          | 
|                               +-------------------------------+ 
|                               |        Tunnel ID (24bit)      | 
+---------------+---------------+-------------------------------+ 
|    cont'd     |                     0x000000                  | 
+---------------+---------------+---+----+----------------------+ 
|      Length/Type (=LSE)       |Ver|Type|    reserved          | 
+-------------------------------+---+----+----------------------+ 
|                        Root Address (6byte)                   | 
|                               +-------------------------------+ 
|                               |                               | 
+-------------------------------+                               | 
|                                                               | 
|                         Policy Data                           | 
|                                                               | 
+---------------------------------------------------------------+ 
|                                                               | 
|                     Access List (Optional)                    | 
|                                                               | 
|                                                               | 
+---------------------------------------------------------------+ 
      
    
   Figure-2 LTE (LSE Tunnel Establishment) Frame Format 
    
    
   In LSE, TID (Tunnel ID) is used for tunnel number and LID (Local ID) 
   is used for identification of terminals that are connected via a 
   tunnel. The 3 bytes of TID number space is divided and allocated for 
   each class-2 switch in a network, and so is the LID number space. A 
   Class-2 switch that establishes a tunnel selects a TID number out of 
   its own TID number pool. The TID number must be unique in a class-2 
   network. The TID number is mapped in the SA field of the LTE frame in 
   a form of xx:xx:xx:00:00:00. 
    
   Typical Ethernet switches learn SA of frames received from a port. 
   When class-2 switches broadcast LTE frame, Ethernet switches learn 
   the SA of LTE frames, as the frames propagating network. As a result, 
   if a node in the network transmits a frame that DA is the SA of the 
   LTE frame, the frame is delivered to the source class-2 switch that 
   has broadcast the LTE frame. The data path learned from LTE broadcast 
   is called 'Ethernet tunnel' in this document. The Ethernet tunnel is 
   in effect a reverse path tree, rooted at a class-2 switch. 
    
   Figure-3 shows an example of network that consists of 3 class-2 
   switches (S1, S2, S3), 2 legacy Ethernet switches (E1, E2) and user 
 
 
Cho          Expires - April  2004                      [Page 5] 
                                 LSE                     October 2003 
 
 
   terminals (Ta, Tb, Tc). In the example, S3 selected a TID and 
   composed a source address A1 for LTE frame. As a result of LTE 
   broadcast originated from S3, network nodes learn the SA and data 
   path to deliver frames to S3. The figure describes that Ethernet 
   frames (that DA='A1') are delivered to S3 via the tunnel.  
    
            ---------> A1 
   [Ta]--[S1]--[E1]---[S3]--[Tc] 
                 |  /-> A1 
                 |  | 
   [Tb]--[S2]--[E2] | 
            --------/ 
    
    
   Figure-3  LSE Tunnel Merging Tree 
    
   Note that LTE frames contain information of resource demand (such as 
   bandwidth, priority), and access list of IP addresses allowed for 
   connection. Typically, the list of IP addresses are the addresses of 
   terminals attached to a root class-2 switch, or subnet addresses that 
   the class-2 switch provides transit service. Other class-2 switches 
   store the information when they receive LTE frame and use it for 
   connection control. 
    
   When a class-2 switch needs to send an IP packet to a terminal (or a 
   class-2 switch), the switch checks the stored access list and selects 
   an appropriate tunnel. The switch encapsulates the IP packet in a 
   frame that DA is the SA known from LTE broadcast, and transmits the 
   frame via the tunnel. Note that the tunnel is a unidirectional path 
   converging at a root node. Since all class-2 switches establish their 
   own tunnels, class-2 switches are able to exchange data using tunnels. 
   Class-2 switches use tunnels for exchanging signals and establishing 
   connections with resource reservation. 
    
5.   Signaling & Connection Setup 
    
   Most IP terminals issue ARP query when it does not know Ethernet 
   address of the destination terminal. Using this feature, LSE provides 
   connection oriented service in Ethernet (and also IP) without 
   requiring substantial modification of service interface with IP layer. 
   User terminals that support LSE request to setup a connection using 
   modified ARP protocol. An extension of ARP packet may contain 
   information necessary for admission control of connection request 
   such as resource demand, authentication data, preferred policy, etc. 
   If applications do not have ability to control modified ARP, default 
   feature of ARP is used and connection is established without 
   reserving resource. Such connections are used for transmitting best-
   effort traffic. Best-effort frames may share a connection if the 
   destinations or default routes are identical. However, an application 
 
 
Cho          Expires - April  2004                      [Page 6] 
                                 LSE                     October 2003 
 
 
   that has signaling feature, such as SIP, may directly control the 
   modified ARP to request a connection and reserve necessary resource 
   in a class-2 network. 
    
   Figure-4 shows a timing diagram that explains procedure for 
   connection establishment between two terminals, Ta and Tc. In the 
   timing diagram, frame notation of 'Frame_name[DA][SA]' is used for 
   describing type of frames and DA, SA values.  
    
    
    
Ta               S1               E1               S3               Tc 
|                |                |                |                | 
|   ARP[ff][Ta]  |  msg[G1:0][01] |  msg[G1:0][01] |                | 
| -------------> | -------------> | -------------> | assign (a1,a2) | 
|                |                |                |                | 
|                |                |                | ARP[ff][G1:a2] | 
|                |                |                | -------------> | 
|                |                |                |                | 
|                |                |                | RPY[G1:a2][Tc] | 
|                |                |   map(a1<->a2) | <------------- | 
|                |                |                |                | 
| RPY[Ta][G1:a1] |  msg[Gn:0][01] |  msg[Gn:0][01] |                | 
| <------------  | <------------- | <------------- |                | 
|                |                |                |                | 
|                |                |                |                | 
| Data[G1:a1][Ta]|Data[G1:0][0:a1]|Data[G1:0][0:a1]|Data[Tc][G1:a2] | 
| -------------> | -------------> | ------------>  | -------------> | 
|                |                |                |                | 
|Data[Ta][G1:a1] | Data[0:a1][s1] | Data[0:a1][s1] | Data[G1:a2][Tc]| 
| <------------  | <------------- | <------------  | <------------- | 
|                |                |                |                | 
|                |                |                |                | 
 
    
    
   Figure-4  Typical procedure for point to point connection 
   establishment 
    
    
   In figure-4, S1 is a class-2 switch that receives an ARP request from 
   terminal Ta. The ARP packet contains target IP address of terminal Tc. 
   Using the IP address, S1 examines access list to find an appropriate 
   tunnel reaching the destination Tc. S1 encapsulates the ARP packet in 
   a frame with additional information necessary to setup a connection. 
   The DA (=G1:0) of the frame is the address composed using the TID 
   (=G1) of the tunnel, and the SA is 0x01. Class-2 switches treat 
   frames that SA is 0x01 as control messages between two edge nodes of 

 
 
Cho          Expires - April  2004                      [Page 7] 
                                 LSE                     October 2003 
 
 
   a tunnel. Thus the frame is delivered to the root node S3 via the 
   tunnel. 
    
   When S3 receives the ARP packet, S3 selects two LID numbers (in the 
   figure, a1, a2) out of its own LID number pool. The two numbers are 
   allocated for use by terminals Ta and Tc respectively. LIDs are 
   always assigned by root node, and the numbers must be unique in a 
   class-2 network. 
    
   Class-2 switches provide proxy service to attached terminal nodes. 
   Terminals use proxy address assigned by class-2 switches to 
   communicate with remote peer. Class-2 switches compose a proxy 
   address using concatenation of TID and LID. For example in figure-4, 
   S3 composes a proxy address [G1:a2] as a physical address of Ta and 
   passes the ARP request to Tc. (Here, 'G1'in the brackets indicates 
   TID part and 'a2' indicates LID part in Ethernet address) In response 
   to this, Tc sends an ARP reply back to S3 to inform its physical 
   address. S3 stores the information of connection (such as TID, LIDs, 
   IP addresses, etc) in a local table, and passes the information with 
   ARP reply to S1. The return path of the ARP reply does not 
   necessarily identical to the path that ARP request was delivered. S1 
   also stores the information in a local table, and passes the ARP 
   reply to Tc using a proxy address [G1:a1]. 
    
   In summary, Ta uses [G1:a1] for proxy address of Tc, and Tc uses 
   [G1:a2] for proxy address of Ta. Class-2 switches translate the proxy 
   addresses to a tunnel address, and the tunnel address to a physical 
   address of peer terminal as they relaying data frames. 
    
    
    
6.   Label Switched Frame Transmission 
    
   Figure-4 shows sequences that terminal Ta and Tc transmit unicast 
   data frames. In the middle of the diagram, terminal Ta sends a data 
   frame to Tc using proxy address (=G1:a1). S1 splits the proxy address 
   and use the TID part for making DA (=G1:00), and LID part for making 
   SA (=00:a1). Since [G1:00] is the tunnel address (i.e. SA of LTE) 
   known from LTE broadcast, the frame is delivered to S3 via the tunnel. 
   As the frame is passing intermediate nodes (i.e. E1 and S3), the 
   nodes learn source MAC address [00:a1] with input links. When S3 
   receives a frame via a tunnel, the node checks local table using LID 
   in the SA of the frame. The local table contains information of MAC 
   address of Tc and corresponding proxy address of peer terminal Ta 
   (=G1:a2). S3 replaces DA to the MAC address and SA to the proxy 
   address, and passes the data frame to Tc.  
    
   In the reverse direction of frame transmission, the path learned 
   during the upstream transmission is used for downstream forwarding. 
 
 
Cho          Expires - April  2004                      [Page 8] 
                                 LSE                     October 2003 
 
 
   Note that intermediate nodes learned source MAC address [00:a1] while 
   they pass a frame toward Tc. When the terminal Tc sends a frame using 
   the proxy address of Ta (=G1:a2), S3 examines local table and 
   replaces the DA to [00:a1]. S3 passes the frame to E1 because E1 is 
   the path learned from previous frame reception. E1 also passes the 
   frame to S1, as a result, the data frame is delivered to S1 across 
   legacy Ethernet switches. S1 checks local table using LID in the DA 
   of the frame and retrieves MAC address of Ta and proxy address of Tc 
   (=G1:a1). S1 replaces DA to MAC address of Ta and SA to proxy address, 
   and passes the frame to Ta.  
    
   In conclusion, Ethernet frames are label switched using proxy 
   addresses by class-2 switches and transmitted via legacy Ethernet 
   switches. Traffic flows must be controlled at the ingress class-2 
   switches. The controlled traffic flow passing a tunnel must not be 
   disturbed by uncontrolled traffic coming from legacy Ethernet. A 
   priority mechanism such as VLAN can be considered in order to protect 
   LSE traffic from non-LSE traffic at legacy switches.  
    
    
    
7.   Data Transmission in All LSE Network 
    
   The method explained in chapter 6 is applied in a network where not 
   all network nodes support LSE. A weakness of the method is that TID 
   number and LID number must be unique in a network because legacy 
   Ethernet switches interpret TID and LID as part of Ethernet address. 
   In consequence, a mechanism is necessary to share available number 
   space, and scalability is limited.  
    
   When deployment of class-2 switches increase in a network and LSE 
   switches are linked directly, it is desirable to employ a feature of 
   Tunnel LSP (TLSP) in such part of network instead of using Ethernet 
   tunnel. Figure-5 shows an example that all network nodes support LSE. 
   In figure-5, a TLSP merging tree rooted at S3 is established using 
   protocols such as LDP, or Flood Routing Protocol that is proposed in 
   separate document. Detail of TLSP establishment is not explained in 
   this document. 
    
    
            --->g2 ---> g1 
   [Ta]--[S1]--[S4]----[S3]--[Tc] 
                 |  /-> g1 
                 |  | 
   [Tb]--[S2]--[S5] | 
            --->g3 -/ 
    
   Figure-5  TLSP Merging Tree 
    
 
 
Cho          Expires - April  2004                      [Page 9] 
                                 LSE                     October 2003 
 
 
    
   The role of TLSP is similar to Ethernet tunnel. However in TLSP, TID 
   of frames are switched as the frames pass class-2 switches. Figure-5 
   describes that TID (=g2) of a frame sent by S1 is switched to g1 at 
   S4 and passed to S3. The TID numbers are set by negotiation between 
   two neighboring nodes when TLSP is established. Since a TID number 
   only needs to be unique in a link between two neighboring nodes, 3 
   bytes of TID number space would be sufficient to support most large 
   scale Ethernet. 
    
   Several distinct features of TLSP are listed below.  
    
    
   1) DA field of a frame is composed of 3 bytes of TID and 3 bytes of 
   LID. The TID number in the DA is switched as the frame passes class-2 
   switches, however the LID number in the DA is not altered while the 
   frame is traversing a TLSP. The SA field of a frame always indicates 
   address of leaf node regardless of whether a root or a leaf created 
   the frame. 
    
   2) LSE labels are bidirectional. In other words, once a node 
   allocates TID, the number is used commonly in all neighboring nodes 
   that share a link. This does not cause confusion even in multiple 
   access link because LID part of DA distinguishes individual flows. 
   LID is also used bidirectional once a root node allocates it. As a 
   result, frames that pass a link have identical DA and SA values 
   regardless of direction. (see figure-6) 
    
   3) When a leaf node sends a frame toward a root node (i.e. upstream), 
   intermediate class-2 switches learn LID in the DA of a frame, and 
   input link. The information is used for guiding frames when root node 
   transmits frame toward the leaf node (i.e. downstream). 
    
   4) Class-2 switches are all multicast capable. Specifically, class-2 
   switches are able to establish multicast connections and duplicate 
   downstream frames accordingly. Detail of multicast mechanism will be 
   explained later in chapter 8. 
    
    
    
    
    
    
    
    
    
    
    
    
 
 
Cho          Expires - April  2004                     [Page 10] 
                                 LSE                     October 2003 
 
 
Ta               S1               S4               S3               Tc 
|                |                |                |                | 
|   ARP[ff][Ta]  | msg[g2:01][S1] | msg[g1:01][S1] |                | 
| -------------> | -------------> | -------------> | assign (a1,a2) | 
|                |                |                |                | 
|                |                |                | ARP[ff][g1:a2] | 
|                |                |                | -------------> | 
|                |                |                |                | 
|                |                |                | RPY[g1:a2][Tc] | 
|                |                |   map(a1<->a2) | <------------- | 
|                |                |                |                | 
| RPY[Ta][g2:a1] | msg[gn:01][S3] |  msg[gn:01][S3]|                | 
| <------------- | <------------- | <------------- |                | 
|                |                |                |                | 
|                |                |                |                | 
| Data[g2:a1][Ta]| Data[g2:a1][S1]| Data[g1:a1][S1]| Data[Tc][g1:a2]| 
| -------------> | -------------> | -------------> | -------------> | 
|                |                |                |                | 
| Data[Ta][g2:a1]| Data[g2:a1][S1]| Data[g1:a1][S1]| Data[g1:a2][Tc]| 
| <------------- | <------------- | <------------- | <------------- | 
|                |                |                |                | 
|                |                |                |                | 
 
    
   Figure-6  Connection establishment and data transmission via TLSP 
    
    
   Figure-6 explains procedure for connection setup between two 
   terminals Ta and Tc using TLSP. In LSE network, though network 
   changes tunneling scheme from Ethernet tunnel to TLSP, terminal users 
   need not aware of the variation. Terminal users constantly use ARP 
   for establishing connection and proxy address for communicating with 
   remote peer, as explained in chapter 5 and 6. 
    
   In figure-6, terminal Ta initiates connection setup by sending an ARP 
   packet to S1. The ARP packet contains target IP address of terminal 
   Tc. S1 examines local table and finds appropriate TLSP (=g2) to reach 
   the destination. Since S3 is the root node linked to the terminal Tc, 
   S1 encapsulates the ARP request in a frame that DA is [g2:01]. The 
   LID number '0x01' in the DA indicates that the frame is a control 
   message sending to the other edge node of the TLSP. Thus the frame is 
   delivered to S3 via the TLSP. 
    
   When S3 receives the frame, S3 allocates two LID numbers a1, a2 for 
   Ta and Tc respectively. Note that the LID numbers do not need to be 
   globally unique because the LIDs only have local significance within 
   a TLSP. Terminal Ta uses [g2:a1] for proxy address of Tc, and Tc uses 
   [g1:a2] for proxy address of Ta. The rest of the connection procedure 
   is similar to the procedure explained in chapter 5.  
 
 
Cho          Expires - April  2004                     [Page 11] 
                                 LSE                     October 2003 
 
 
    
   The label switched data transmission using TLSP is relatively simple 
   than using Ethernet tunnel. When Ta transmits data frame to Tc using 
   the proxy address [g2:a1], intermediate nodes (S1, S4, S3) replace 
   TID number of DA as they pass the frame along the path of TLSP. The 
   intermediate nodes learn the LID number (or the whole DA) with input 
   link, as explained in 3) above. When S3 receives the frame, the node 
   checks local table using the LID (=a1) in the DA. S3 replaces the DA 
   of the frame to MAC address of Tc and SA to proxy address [g1:a2], 
   and passes the frame to Tc.  
    
   When Tc replies data frame, the root node S3 replaces DA and SA to 
   the same number as received from S4 (i.e. DA=[g1:a1], SA='S1' see 
   figure-6 for detail). S3 passes the frame downstream to S4. Since S4 
   learned the LID (or the whole DA) and input link in the previous 
   upstream data transmission, S4 passes the frame to S1 with switching 
   the TID number in the DA. When TLSP is used, data frames received by 
   leaf node always contain proxy address in the DA field. In figure-6, 
   S1 retrieves MAC address of Ta using the proxy address contained in 
   the DA of the data frame. S1 replaces the DA to the MAC address and 
   SA to the proxy address, and passes the data frame to Ta. 
    
   In LSE, although TLSP and LID number are fixed entity for relatively 
   long period, connections are soft entity that can be erased by timer. 
   In other words, class-2 switches must transmit a data frame toward 
   the root of a TLSP at least once in order for intermediate nodes to 
   learn LID and downstream path. The learned downstream path is erased 
   by timer unless downstream terminals keep sending data and refresh it. 
   An optimum timer management mechanism is necessary and this is left 
   for future study. 
 
    
8.   Support for Multicasting and Wireless LAN Mobility 
    
   The procedure explained in figure-6 is also applied in multicast 
   connection as well as mobile connection. Note in 4) of chapter 7, 
   class-2 switches are required to have capability to learn multicast 
   connections. When more than two downstream nodes transmit frames of 
   identical LID via a TLSP, class-2 switches set multicast forwarding 
   state to duplicate downstream frames. For example in figure-5, 
   suppose that S1 transmitted a frame that DA is [g2:m1]. S4 learn the 
   LID (=m1) in the DA and downstream path to S1, and passes the frame 
   to S3. When S5 transmits a frame that DA is [g3:m1], S4 merges S5 as 
   multicast downstream path because S1 and S5 both used same LID number 
   (=m1). When the root node S3 transmits a frame, the frame is 
   duplicated at S4 and forwarded to both downstream nodes S1 and S5 
   with appropriate DA (i.e. for S1, DA=[g2:m1], for S5, DA=[g3:m1]). In 
   summary, data frames that transmitted by a root node are duplicated 
   and multicast along the path of TLSP, if multiple downstream nodes 
 
 
Cho          Expires - April  2004                     [Page 12] 
                                 LSE                     October 2003 
 
 
   have transmitted data using identical LID number. Unicast and 
   multicast data frames are not distinguished. An extension of ARP 
   protocol to include semantics for multicast session is necessary. 
   Method for selecting optimum root node (i.e. a rendezvous point) and 
   advertising TLSP are required. Detail of mechanism for supporting 
   multicast service will be proposed in later document. 
    
   The multicasting method explained above is also used for supporting 
   fast mobility of wireless terminals. Figure-7 below shows a situation 
   that a mobile terminal Ta moves access point from S1 to S2 while 
   communicating with Tc. It is assumed that a point-to-point connection 
   has been established between Ta and Tc via a wireless link at S1. 
   Similar to the procedure explained in chapter 7, terminal Ta uses 
   proxy address (=g2:a1) for sending data frame to Tc. S1 puts its 
   address in the SA of the data frame and forwards it via the TLSP. 
 
    
Ta            (S1/S2)             S4               S3               Tc 
|                |                |                |                | 
|                |                |                |                | 
| Data[g2:a1][Ta]|                |                |                | 
| -------------> | (S1 receiving) |                |                | 
|                |                |                |                | 
|                | Data[g2:a1][S1]| Data[g1:a1][S1]| Data[Tc][g1:a2]| 
|                | -------------> | -------------> | -------------> | 
|                |                |                |                | 
|                |                |                |                | 
|request for TID |                |                |                | 
| -------------> |(Ta Move to S2) |                |                | 
|     (TID=g3)   |                |                |                | 
| <------------- | (register Ta)  |                |                | 
|                |                |                |                | 
| Data[g3:a1][Ta]|                |                |                | 
| -------------> | (S2 receiving) |                |                | 
|                |                |                |                | 
|                | Data[g3:a1][S2]| Data[g1:a1][S2]| Data[Tc][g1:a2]| 
|                | -------------> | -------------> | -------------> | 
|                |                |                |                | 
|                | Data[g2:a1][S2]| Data[g1:a1][S2]| Data[g1:a2][Tc]| 
|   (S1 turn off)| <------------- | <------------- | <------------- | 
|                | Data[g3:a1][S2]|                |                | 
|   (S2 relaying)| <------------- |                |                | 
|                |                |                |                | 
| Data[Ta][g3:a1]|                |                |                | 
| <------------- |                |                |                | 
|                |                |                |                | 
 
    
   Figure-7  Data Transmission in Mobile Terminal  
 
 
Cho          Expires - April  2004                     [Page 13] 
                                 LSE                     October 2003 
 
 
    
    
   When Ta moves access point to S2, Ta requests local TID number of the 
   same TLSP tree in the course of mobile subscription process to S2. 
   Detail of the subscription process will not be discussed in this 
   document. S2 informs its local TLSP ID (=g3), and S1 reassembles 
   proxy address (=g3:a1) using the new TID. When S2 receives a data 
   frame from Ta, the node puts its own address in the SA field and 
   forwards the frame to upstream node S4. Note that S4 still remember 
   previous path that forwarding downstream frames to S1. Hence, S4 
   merges additional downstream path to S2. The data frame is passed to 
   the root node S3, and S3 updates the location of Ta (=S2) in its 
   local table.  
    
   When Tc replies a data frame, S3 puts the address of new location 
   (=S2) in the SA field. The data frame is forwarded via the downstream 
   path learned by intermediate nodes. Since S4 merged two downstream 
   paths, the frame is duplicated and forwarded to both leaf nodes S1 
   and S2. S1 notices that the receive frame is not designated itself 
   because the SA (=S2) value is changed. Hence, S1 cease to forward 
   data via its wireless link. As a result, the data frame is delivered 
   only via the wireless link at S2. The branch path to the old access 
   point S1 will eventually be erased by timer.  
    
    
    
9.   Structuring LSE Network 
    
   When the size of class-2 network grows, a class-2 network can be 
   partitioned according to boundary of IP subnet. In this case, 
   independent class-2 networks are linked by class-2 switches that 
   function as border switch. 
    
   Border class-2 switches collect information of local LSP trees and 
   advertise summarized information to neighboring class-2 networks. 
   Other border switches that receive the information establish exterior 
   LSP trees to relay internal traffic into the neighboring network. If 
   class-2 networks are organized systematically, for example in tree 
   configuration, large scale network can be built using only by class-2 
   switches. However, if the connections between subnets become complex, 
   it is desirable to use class-3 switches for interconnecting class-2 
   networks. 
    
   Class-3 switches perform label switching as well as IP routing. The 
   switches gather information of IP routes from outside world and 
   advertise it internally to class-2 networks. The switches also help 
   to establish loopless concatenation of tunnels between class-2 
   networks using modified IP routing protocols. The switches may relay 
   labeled frame, or terminates a tunnel and perform IP forwarding.  
 
 
Cho          Expires - April  2004                     [Page 14] 
                                 LSE                     October 2003 
 
 
    
   On the contrary, class-4 switches are circuit based switches, such as 
   ATM or OxC, that employ LSE control plane. Though the transmission 
   media of class-4 switches may not be compatible with Ethernet frame, 
   the switches can coordinate routing functions to provide long-haul 
   connectivity between remote LSE networks. 
    
    
    
10.    Conclusion 
    
   In this document, new label switching method for transmitting 
   Ethernet frame is proposed. The mechanism of LSE is relatively simple 
   than other proposals, and the method is efficient in terms of header 
   overhead. There have been few proposals that incorporate services of 
   unicast, multicast and mobility support in a unified mechanism. LSE 
   provides solution for converging networks of different types into 
   cost effective Ethernet. LSE multicasting has advantage of low 
   overhead for join operation and support for bandwidth reservation. It 
   can also support mobility of multicasting nodes. 
    
   LSE improves scalability of Ethernet and provides features for 
   establishing connections of guaranteed service quality. The method 
   does not require comprehensive modification of upper layer interface 
   in order to introduce connection oriented service in Ethernet. It 
   also provides progressive evolution method to convert legacy Ethernet 
   into LSE supporting network. 
    
    
    
    
11. Security Considerations 
    
   Security issues will be considered in later documents. 
    
    
References 
    
                     
   i  Bradner, S., "The Internet Standards Process -- Revision 3", BCP 9, 
      RFC 2026, October 1996. 
    
   ii  Bradner, S., "Key words for use in RFCs to Indicate Requirement 
      Levels", BCP 14, RFC 2119, March 1997 

   iii  Kompella et. al., "Layer 2 VPNs over Tunnels", draft-kompella-
        ppvpn-l2vpn-03.txt, Apr 2003
    
 
Cho          Expires - April  2004                     [Page 15] 
                                 LSE                     October 2003 
 
 
   
    
    
      
    
Author's Addresses 
    
   Jaihyung Cho  
   ETRI 
   Daejeon, Korea 
   Phone: +82 42 860 5514 
   Email: jaihyung@chol.com 
     































 
 
Cho          Expires - April  2004                     [Page 16] 
