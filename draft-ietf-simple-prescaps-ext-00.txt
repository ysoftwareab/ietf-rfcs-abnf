

SIMPLE WG                                                    M. Lonnfors
Internet-Draft                                     Nokia Research Center
Expires: August 7, 2004                                          K. Kiss
                                                                   Nokia
                                                        February 7, 2004


            User agent capability presence status extension
                   draft-ietf-simple-prescaps-ext-00

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 7, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2004). All Rights Reserved.

Abstract

   Interoperation of Instant Messaging and Presence systems has been
   defined in IMPP working group. IMPP WG has come up with baseline
   interoperable operations and formats for presence and instant
   messaging systems. However, these base formats might need
   standardized extensions in order to enable building rational
   applications using presence and instant messaging. This memo proposes
   an extension to PIDF presence document format to represent
   "Indicating User Agent Capabilities in the Session Initiation
   Protocol (SIP)" capabilities to be used in SIMPLE based presence
   systems but may also be applied to other protocols as well.




Lonnfors & Kiss          Expires August 7, 2004                 [Page 1]

Internet-Draft    User agent capability extension to PIDF  February 2004


Table of Contents

   1.     Introduction . . . . . . . . . . . . . . . . . . . . . . .   4
   1.1    Motivation . . . . . . . . . . . . . . . . . . . . . . . .   4
   1.2    Scope  . . . . . . . . . . . . . . . . . . . . . . . . . .   5
   2.     Conventions  . . . . . . . . . . . . . . . . . . . . . . .   5
   3.     Extension for "Indicating User Agent Capabilities in
          the Session Initiation Protocol (SIP)" in PIDF documents .   5
   3.1    Extension overview . . . . . . . . . . . . . . . . . . . .   5
   3.2    <prescaps> element . . . . . . . . . . . . . . . . . . . .   6
   3.3    <audio> element  . . . . . . . . . . . . . . . . . . . . .   6
   3.4    <application> element  . . . . . . . . . . . . . . . . . .   6
   3.5    <data> element . . . . . . . . . . . . . . . . . . . . . .   7
   3.6    <control> element  . . . . . . . . . . . . . . . . . . . .   7
   3.7    <video> element  . . . . . . . . . . . . . . . . . . . . .   7
   3.8    <text> element . . . . . . . . . . . . . . . . . . . . . .   8
   3.9    <type> element . . . . . . . . . . . . . . . . . . . . . .   8
   3.10   <automata> element . . . . . . . . . . . . . . . . . . . .   9
   3.11   <class> element  . . . . . . . . . . . . . . . . . . . . .   9
   3.12   <duplex> element . . . . . . . . . . . . . . . . . . . . .   9
   3.13   <mobility> element . . . . . . . . . . . . . . . . . . . .   9
   3.14   <description> element  . . . . . . . . . . . . . . . . . .   9
   3.15   <event-packages> element . . . . . . . . . . . . . . . . .  10
   3.15.1 <event-package>  . . . . . . . . . . . . . . . . . . . . .  10
   3.16   <priority> element . . . . . . . . . . . . . . . . . . . .  10
   3.17   <methods> element  . . . . . . . . . . . . . . . . . . . .  10
   3.17.1 <method> . . . . . . . . . . . . . . . . . . . . . . . . .  10
   3.18   <extensions> element . . . . . . . . . . . . . . . . . . .  11
   3.18.1 <extension>  . . . . . . . . . . . . . . . . . . . . . . .  11
   3.19   <schemes> element  . . . . . . . . . . . . . . . . . . . .  11
   3.19.1 <scheme> . . . . . . . . . . . . . . . . . . . . . . . . .  11
   3.20   <actor> element  . . . . . . . . . . . . . . . . . . . . .  11
   3.21   <is-focus> element . . . . . . . . . . . . . . . . . . . .  12
   3.22   <languages> element  . . . . . . . . . . . . . . . . . . .  12
   3.22.1 <language> . . . . . . . . . . . . . . . . . . . . . . . .  12
   3.23   Extension elements . . . . . . . . . . . . . . . . . . . .  13
   3.23.1 <string> element . . . . . . . . . . . . . . . . . . . . .  13
   3.23.2 <token> element  . . . . . . . . . . . . . . . . . . . . .  13
   3.23.3 <boolean> element  . . . . . . . . . . . . . . . . . . . .  13
   3.23.4 <numeric> element  . . . . . . . . . . . . . . . . . . . .  13
   4.     Publishing and using 'prescaps' elements . . . . . . . . .  14
   5.     Generating SIP request based on 'prescaps' extension . . .  14
   6.     Using extension with PIDF document format  . . . . . . . .  14
   6.1    Contact URI  . . . . . . . . . . . . . . . . . . . . . . .  15
   7.     Examples . . . . . . . . . . . . . . . . . . . . . . . . .  15
   7.1    Example  . . . . . . . . . . . . . . . . . . . . . . . . .  16
   8.     XML schema definitions . . . . . . . . . . . . . . . . . .  16
   9.     IANA Considerations  . . . . . . . . . . . . . . . . . . .  22



Lonnfors & Kiss          Expires August 7, 2004                 [Page 2]

Internet-Draft    User agent capability extension to PIDF  February 2004


   9.1    URN sub-namespace registration for
          'urn:ietf:params:xml:ns:simple-prescaps-ext' . . . . . . .  23
   10.    Security Considerations  . . . . . . . . . . . . . . . . .  23
   11.    Acknowledgements . . . . . . . . . . . . . . . . . . . . .  24
          Normative references . . . . . . . . . . . . . . . . . . .  24
          Informative references . . . . . . . . . . . . . . . . . .  24
          Authors' Addresses . . . . . . . . . . . . . . . . . . . .  25
          Intellectual Property and Copyright Statements . . . . . .  27











































Lonnfors & Kiss          Expires August 7, 2004                 [Page 3]

Internet-Draft    User agent capability extension to PIDF  February 2004


1. Introduction

   Interoperation of instant messaging and presence systems has been
   defined in IMPP working group. Working group has defined "A model for
   Presence and Instant Messaging" [2] and also requirements for
   protocols implementing such a system [3]. Common presence and instant
   messaging (CPP/CPIM) defines common operations and formats which all
   Presence and Instant Messaging services must agree upon so that basic
   interoperability would be possible [5], [10]. The actual base format
   for presence is being defined in PIDF [4]. The PIDF document format
   has been designed to reduce the need for gatewaying and to allow
   end-to-end security of presence data. It has taken very minimalistic
   approach to support such operations. In order to make the PIDF format
   usable by different presence applications, these applications usually
   must extend the basic PIDF format by standard XML mechanism as
   defined in [4].

   The aim of this memo is to introduce SIP/SIMPLE specific extension
   mechanism for the PIDF document. With this extension SIMPLE based
   applications can have richer and more usable formats compared to the
   baseline PIDF data format. Aim of this document is to introduce
   extension for "Indicating User Agent Capabilities in the Session
   Initiation Protocol (SIP)" [6].

1.1 Motivation

   The PIDF document format [4] defines a <contact> element which may
   appear once inside every <tuple> element. The content of the
   <contact>  element encodes the CONTACT ADDRESS and CONTACT MEANS as
   defined in [2]. The <contact> element is defined to be an URI.  This
   URI can be of any URI type.  In some implementations this URI can
   uniquely identify the application the tuple intends to describe (e.g.
   im: URIs). However, this may not be the case in all implementations.
   For example in SIP, a SIP URI can represent different kinds of
   applications. A SIP URI can be used to contact voice applications,
   video applications, or messaging applications. If it is not known by
   other means, it might be hard for applications processing the
   presence document containing only SIP URI contact addresses to know
   what particular application the tuple intends to describe. Also
   watchers receiving presence information would probably benefit for
   getting more descriptive information about what particular
   communication means or applications are supported by the presentity.

   "Indicating User Agent Capabilities in the Session Initiation
   Protocol (SIP)" document [6] defines a set of extensions which allow
   callees to express preferences about request handling in SIP servers.
   The same information could provide value also to presence watchers so
   that they could make more rational decisions on how presentity should



Lonnfors & Kiss          Expires August 7, 2004                 [Page 4]

Internet-Draft    User agent capability extension to PIDF  February 2004


   be contacted if presence document would contain similar information
   as defined in "Indicating User Agent Capabilities in the Session
   Initiation Protocol (SIP)" extension.

1.2 Scope

   This document defines extension to the PIDF document format which
   enables presence implementations based on SIP protocol to utilize
   similar capabilities in presence document as what "Indicating User
   Agent Capabilities in the Session Initiation Protocol (SIP)" document
   [6] defines.

   This extension does not replace media negotiation mechanisms defined
   for SIP (e.g.  SDP [14]), therefore media negotiation (e.g. choose of
   voice and video codecs) MUST be performed according to [11]. This
   extension is only aimed to give the watchers hints about the
   presentity's preferences, willingness and capabilities to communicate
   before watchers would initiate SIP based communication with the
   presentity.

2. Conventions

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in RFC 2119 [1] and
   indicate requirement levels for compliant implementations.

   This memo makes use of the vocabulary defined in RFC2778 [2], and in
   PIDF [4].

3. Extension for "Indicating User Agent Capabilities in the Session
   Initiation Protocol (SIP)" in PIDF documents

   This section presents "Indicating User Agent Capabilities in the
   Session Initiation Protocol (SIP)" extension namespace, its elements,
   their values, and semantics. This section also describes how this
   extension can be further extended. Extension is intended to be used
   with "urn:ietf:params:xml:ns:pidf" namespace and that particular
   usage is described here. This extension may also be used with other
   namespaces if appropriate.

3.1 Extension overview

   This extension adds features presented in "Indicating User Agent
   Capabilities in the Session Initiation Protocol (SIP)" document [6]
   into PIDF presence document format. Extension also includes type
   feature tag [7] and language feature tag [8]. Features presented in
   [6], [7], and [8] are added here without any change in their



Lonnfors & Kiss          Expires August 7, 2004                 [Page 5]

Internet-Draft    User agent capability extension to PIDF  February 2004


   semantics. Bringing these features to PIDF presence document format
   basically means mapping them to XML structure. Namespace identifier
   for this extension is:

   urn:ietf:params:xml:ns:simple-prescaps-ext

   When this extension namespace is congregated with base PIDF document,
   combined document must follow the same general formatting rules as
   specified in [4] in chapter 4.1.

3.2 <prescaps> element

   Root element of this extension namespace is <prescaps>.  The root
   element MUST be always present. This element MAY contain one or more
   elements as specified later in this document.

   <prescaps> element does not have any attributes and it MAY contain
   other namespace declarations for the extensions used in the presence
   XML document.

3.3 <audio> element

   The <audio> element indicates that the device supports audio as a
   streaming media type as defined in [6].

   The <audio> element can contain 'negated' attribute. This attribute
   is of boolean type. Value 'true' indicates that device supports audio
   media type and value 'false' indicates that device does not support
   audio media type as defined in [6]. Default value for 'negated'
   attribute is 'false'.

   <audio> element can contain any number of <type> elements which can
   be used to describe audio media types supported by the device. If
   'negated' attribute has value 'true' it is NOT RECOMMENTED to include
   <type> elements. Media types included in <type> elements MUST start
   with 'audio/'.

3.4 <application> element

   The <application> element indicates that the device supports
   application as a streaming media type as defined in [6].

   The <application> element can contain 'negated' attribute. This
   attribute is of boolean type. Value 'true' indicates that device
   supports application media type and value 'false' indicates that
   device does not support application media type as defined in [6].
   Default value for 'negated' attribute is 'false'.




Lonnfors & Kiss          Expires August 7, 2004                 [Page 6]

Internet-Draft    User agent capability extension to PIDF  February 2004


   <application> element can contain any number of <type> elements which
   can be used to describe application media types supported by the
   device. If 'negated' attribute has value 'true' it is NOT RECOMMENTED
   to include <type> elements. Media types included in <type> elements
   MUST start with 'application/'.

3.5 <data> element

   The <data> element indicates that the device supports data as a
   streaming media type as defined in [6].

   The <data> element can contain 'negated' attribute. This attribute is
   of boolean type. Value 'true' indicates that device supports data
   media type and value 'false' indicates that device does not support
   data media type as defined in [6]. Default value for 'negated'
   attribute is 'false'.

   <data> element can contain any number of <type> elements which can be
   used to describe data media types supported by the device. If
   'negated' attribute has value 'true' it is NOT RECOMMENTED to include
   <type> elements. Media types included in <type> elements MUST start
   with 'data/'.

3.6 <control> element

   The <control> element indicates that the device supports control as a
   streaming media type as defined in [6].

   The <control> element can contain 'negated' attribute. This attribute
   is of boolean type. Value 'true' indicates that device supports
   control media type and value 'false' indicates that device does not
   support control media type as defined in [6]. Default value for
   'negated' attribute is 'false'.

   <control> element can contain any number of <type> elements which can
   be used to describe control media types supported by the device. If
   'negated' attribute has value 'true' it is NOT RECOMMENTED to include
   <type> elements. Media types included in <type> elements MUST start
   with 'control/'.

3.7 <video> element

   The <video> element  indicates that the device supports video as a
   streaming media type as defined in [6].

   The <video> element can contain 'negated' attribute. This attribute
   is of boolean type. Value 'true' indicates that device supports video
   media type and value 'false' indicates that device does not support



Lonnfors & Kiss          Expires August 7, 2004                 [Page 7]

Internet-Draft    User agent capability extension to PIDF  February 2004


   video media type as defined in [6]. Default value for 'negated'
   attribute is 'false'.

   <video> element can contain any number of <type> elements which can
   be used to describe video media types supported by the device. If
   'negated' attribute has value 'true' it is NOT RECOMMENTED to include
   <type> elements. Media types included in <type> elements MUST start
   with 'video/'.

3.8 <text> element

   The <text> element  indicates that the device supports text as a
   streaming media type as defined in [6].

   The <text> element can contain 'negated' attribute. This attribute is
   of boolean type. Value 'true' indicates that device supports text
   media type and value 'false' indicates that device does not support
   text media type as defined in [6]. Default value for 'negated'
   attribute is 'false'.

   <text> element can contain any number of <type> elements which can be
   used to describe text media types supported by the device. If
   'negated' attribute has value 'true' it is NOT RECOMMENTED to include
   <type> elements. Media types included in <type> elements MUST start
   with 'text/'.

3.9 <type> element

   The <type> element indicates indicates a MIME media content type
   (i.e. that appears in a 'Content-type:' header of the corresponding
   MIME-formatted data) as defined in [7].

   The <type> element is of string type and does not have any
   attributes. It must be a string of the form "type/subtype", where
   'type' and 'subtype' are defined by the MIME specification [17]. Only
   lower-case letters should be used.

   This element can be used inside <audio>, <video>, <text>, <data>,
   <application>, and <control> elements.

   Open issue: Do we need to also allow separate <type> elements outside
      media tags? This would allow representation of other media type
      which are not included into this document (like multipart or
      message).







Lonnfors & Kiss          Expires August 7, 2004                 [Page 8]

Internet-Draft    User agent capability extension to PIDF  February 2004


3.10 <automata> element

   The <automata> element indicates whether the UA represents an
   automata (such as a voicemail server, conference server, IVR, or
   recording device) or a human as defined in [6].

   The <automata> element is of boolean type and does not have any
   attributes. Value 'true' indicates that the UA represents an automata
   and value 'false' indicates that it represents a human.

3.11 <class> element

   The <class> element indicates the setting, business or personal, in
   which a communications device is used as defined in [6].

   The <class> element is of string type and does not have any
   attributes. Possible values include: "business" and "personal".

3.12 <duplex> element

   The <duplex> element lists whether a communications device can
   simultaneously send and receive media ("full"), alternate between
   sending and receiving ("half"), can only receive ("receive-only") or
   only send ("send-only")  defined in [6].

   The <duplex> element is of string type and does not have any
   attributes. possible values include: "full", "half", "receive-only",
   and "send-only".

3.13 <mobility> element

   The <mobility> element indicates whether the device is fixed (meaning
   that it is associated with a fixed point of contact with the
   network), or mobile (meaning that it is not associated with a fixed
   point or contact). Note that cordless phones are fixed, not mobile,
   based on this definition.as defined in [6].

   The <mobility> element is of string type and does not have any
   attributes. Possible values include: "fixed" and "mobile"

3.14 <description> element

   The <description> element provides a textual description of the
   device as defined in [6].

   The <description> element is of string type and does not have any
   attributes.




Lonnfors & Kiss          Expires August 7, 2004                 [Page 9]

Internet-Draft    User agent capability extension to PIDF  February 2004


3.15 <event-packages> element

   The <event-packages> element lists the event packages [12] supported
   by a device.

   <event-packages> element can contain any number of <event-package>
   elements which can be used to describe individual event packages
   supported by the device.

3.15.1 <event-package>

   The <event-package> is string type element and it is used to describe
   individual event package supported by the device. The <event-package>
   element can contain 'negated' attribute. This attribute is of boolean
   type. Value 'true' indicates that device supports particular event
   package and value 'false' indicates that device does not support
   particular event package as defined in [6]. Default value for
   'negated' attribute is 'false'.

   The values for this tag equal the event package names that are
   registered by each event package as defined in [6].

3.16 <priority> element

   The <priority> element indicates the call priorities the device is
   willing to handle. A value of X means that the device is willing to
   take requests with priority X and higher as defined in [6].

   The <priority> element is of integer type does not have any
   attributes.

3.17 <methods> element

   The <methods> element indicates the SIP methods supported by this UA.
   In this case, "supported" means that the UA can receive requests with
   this method. In that sense, it has the same connotation as the Allow
   header field as defined in [6].

   <methods> element can contain any number of <method> elements which
   can be used to describe individual methods supported by the device.

3.17.1 <method>

   The <method> is string type element and it is used to describe
   individual method supported by the device. The <method> element can
   contain 'negated' attribute. This attribute is of boolean type. Value
   'true' indicates that device supports particular method and value
   'false' indicates that device does not support particular method as



Lonnfors & Kiss          Expires August 7, 2004                [Page 10]

Internet-Draft    User agent capability extension to PIDF  February 2004


   defined in [6]. Default value for 'negated' attribute is 'false'.

3.18 <extensions> element

   The <extensions> element is a list of SIP extensions (each of which
   is defined by an option-tag registered with IANA) that are understood
   by the UA. Understood, in this context, means that the option tag
   would be included in a Supported header field in a request as defined
   in [6].

   <extensions> element can contain any number of <extension> elements
   which can be used to describe individual extensions supported by the
   device.

3.18.1 <extension>

   The <extension> is string type element and it is used to describe
   individual extension supported by the device. The <extension> element
   can contain 'negated' attribute. This attribute is of boolean type.
   Value 'true' indicates that device supports particular extension and
   value 'false' indicates that device does not support particular
   extension as defined in [6]. Default value for 'negated' attribute is
   'false'.

3.19 <schemes> element

   The <schemes> element provides the set of URI schemes that are
   supported by a UA. Supported implies, for example, that the UA would
   know how to handle a URI of that scheme in the Contact header field
   of a redirect response as defined in [6].

   <schemes> element can contain any number of <scheme> elements which
   can be used to describe individual schemes supported by the device.

3.19.1 <scheme>

   The <scheme> is string type element and it is used to describe
   individual scheme supported by the device. The <scheme> element can
   contain 'negated' attribute. This attribute is of boolean type. Value
   'true' indicates that device supports particular scheme and value
   'false' indicates that device does not support particular scheme as
   defined in [6]. Default value for 'negated' attribute is 'false'.

3.20 <actor> element

   The <actor> element indicates the type of entity that is available at
   this URI as defined in [6].




Lonnfors & Kiss          Expires August 7, 2004                [Page 11]

Internet-Draft    User agent capability extension to PIDF  February 2004


   The <actor> element is of string type and does not have any
   attributes. Possible values include:

   o  principal: The device provides communication with the principal
      that is associated with the device. Often this will be a specific
      human being, but it can be an automata (for example, when calling
      a voice portal).

   o  attendant: The device provides communication with an automaton or
      person that will act as an intermediary in contacting the
      principal associated with the device, or a substitute.

   o  msg-taker: The device provides communication with an automaton or
      person that will take messages and deliver them to the principal.

   o  information: The device provides communication with an automaton
      or person that will provide information about the principal.


3.21 <is-focus> element

   The <is-focus> element indicates that the UA is a conference server,
   also known as a focus, and will mix together the media for all calls
   to the same URI as defined in [6].

   The <is-focus> element is of boolean type and does not have any
   attributes.

3.22 <languages> element

   The <languages> element indicates Ability to display particular human
   languages as as defined in [8].

   <languages> element can contain any number of <language> elements
   which can be used to describe individual languages supported by the
   device.

3.22.1 <language>

   The <language> is string type element and it is used to describe
   individual language supported by the device. The <language> element
   can contain 'negated' attribute. This attribute is of boolean type.
   Value 'true' indicates that device supports particular language and
   value 'false' indicates that device does not support particular
   language as defined in [6]. Default value for 'negated' attribute is
   'false'.





Lonnfors & Kiss          Expires August 7, 2004                [Page 12]

Internet-Draft    User agent capability extension to PIDF  February 2004


3.23 Extension elements

   This section defines how extension features present in "Indicating
   User Agent Capabilities in the Session Initiation Protocol (SIP)"
   [6]	can be used in this extension.

3.23.1 <string> element

   <string> element can be used to represent string type feature tags.
   This element MUST NOT be used to represent standard tags discussed in
   this document, for example to represent <language> tags. <string>
   element has one mandatory attribute called 'name'. This attribute is
   string type and it MUST contain the name of the feature tag. <string>
   has optional attribute 'negated' which is boolean type attribute.
   Value 'false' indicates that feature tag is supported and value
   'true' indicates that feature tag is not supported. Default value is
   'false'.

3.23.2 <token> element

   <token> element can be used to represent token type feature tags.
   This element MUST NOT be used to represent standard tags discussed in
   this document, for example to represent <language> tags. <token>
   element has one mandatory attribute called 'name'. This attribute is
   string type and it MUST contain the name of the feature tag. <string>
   has optional attribute 'negated' which is boolean type attribute.
   Value 'false' indicates that feature tag is supported and value
   'true' indicates that feature tag is not supported. Default value is
   'false'.

3.23.3 <boolean> element

   <boolean> element can be used to represent boolean type feature tags.
   This element MUST NOT be used to represent standard tags discussed in
   this document, for example to represent <is-focus> tag. <boolean>
   element has one mandatory attribute called 'name'. This attribute is
   string type and it MUST contain the name of the feature tag.
   <boolean> can have two values: value 'true' indicates that feature
   tag is supported and value 'false' indicates that feature tag is not
   supported.

3.23.4 <numeric> element

   <numeric> element can be used to represent numeric type feature tags.
   This element MUST NOT be used to represent standard tags discussed in
   this document, for example to represent <priority> tag. <numeric>
   element has one mandatory attribute called 'name'. This attribute is
   string type and it MUST contain the name of the feature tag.



Lonnfors & Kiss          Expires August 7, 2004                [Page 13]

Internet-Draft    User agent capability extension to PIDF  February 2004


   <numeric> has optional attribute 'negated' which is boolean type
   attribute. Value 'false' indicates that feature tag is supported and
   value 'true' indicates that feature tag is not supported. Default
   value is 'false'.

4. Publishing and using 'prescaps' elements

   In [6] it is recommended that a UA provide complete information in
   its contact predicate. However, it may be that presentity is not
   willing to publish such presence information which would be
   consistent with actual device capabilities (e.g. presentity may not
   want to indicate that he/she supports voice when the device actually
   is able to support it). Also authorization rules or policies in
   presence server may limit or modify published presence information in
   a way that all published presence information may not end up to all
   possible watchers.

   It is RECOMMENTED that Presence User Agent (PUA) using this extension
   provider as complete presence information as it can. However, it is
   not mandated that this presence information should be consistent with
   actual device capabilities. Also, watchers SHOULD NOT expect that
   presence information represented by this extension fully represents
   actual presentity's device capabilities.

5. Generating SIP request based on 'prescaps' extension

   UA receiving PIDF documents with 'prescaps' extension may wish to
   generate SIP request which would route to UA having capabilities
   described by 'prescaps' extension. UA MAY add Accept-Contact: header
   based on 'prescaps' extension elements. However, as discussed in
   Section 4 device capabilities described by this extension may not be
   consistent what UA has indicated in its registration. Due to this
   request may not route to correct UA.

6. Using extension with PIDF document format

   This section presents guidelines how extension can be used with PIDF
   document format.

   PIDF format allows use of extension XML namespaces inside <presence>,
   <tuple>, and <status> elements. <presence> element is intended to
   describe presentity as a whole. 'Prescaps' extension is related to
   contact address defined by PIDF to which this extension is applied
   to. These contact addresses can only appear inside <tuple> elements.
   The use of this extension in <presence> element level is NOT
   RECOMMENDED for this purpose.

   'Prescaps' extension elements SHOULD be placed inside <status>



Lonnfors & Kiss          Expires August 7, 2004                [Page 14]

Internet-Draft    User agent capability extension to PIDF  February 2004


   element. Root element <prescaps> MUST NOT appear more than once
   inside a single  <tuple> element but can appear multiple times in
   PIDF document format inside different <tuple> elements.

6.1 Contact URI

   "Indicating User Agent Capabilities in the Session Initiation
   Protocol (SIP)" [6]  has restrictions what kind of URIs can be used
   with callee capabilities. As Address of Record of the presentity
   represents the union of all presentity's device capabilities it is
   RECOMMENTED that contact URI in <contact> element used with this
   specifications SHOULD be Address of Record of the presentity.

7. Examples

   This section presents examples how this extension can be used with
   base PIDF document format.


































Lonnfors & Kiss          Expires August 7, 2004                [Page 15]

Internet-Draft    User agent capability extension to PIDF  February 2004


7.1 Example

   <?xml version="1.0" encoding="UTF-8"?>
   <presence xmlns="urn:ietf:params:xml:ns:pidf"
     xmlns:ext="urn:ietf:params:xml:ns:simple-prescaps-ext
     entity="pres:someone@example.com">
      <tuple id="joi9877866786ua9">
        <status>
   	  <basic>open</basic>
   	    <ext:prescaps>
   	      <ext:video negated="false"/>
   	      <ext:audio negated="false">
   	        <ext:type>audio/gsm</ext:type>
   	        <ext:type>audio/amr-wb</ext:type>
   	      </ext:audio>
   	      <ext:text negated="true"/>
   	      <ext:mobile>true</ext:mobile>
   	      <ext:methods>
   	        <ext:method>INVITE</ext:method>
   	        <ext:method>MESSAGE</ext:method>
   	        <ext:method>ACK</ext:method>
   	        <ext:method>BYE</ext:method>
   	        <ext:method>CANCEL</ext:method>
   	        <ext:method negated="true">REFER</ext:method>
   	      </ext:methods>
   	      <ext:string name="myString" negated="false">myvalue
   	      </ext:string>
   	    </ext:prescaps>
   	  </status>
   	  <contact>sip:someone@example.com</contact>
        </tuple>
   </presence>


8. XML schema definitions

   This section gives the XML Schema Definition for the extension
   defined in this document which can be used in the context of
   "application/cpim-pidf+xml" content type.

   <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema
    targetNamespace="urn:ietf:params:xml:ns:simple-prescaps-ext"
    xmlns:tns="urn:ietf:params:xml:ns:simple-prescaps-ext"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">
   	<!-- This import brings in the XML language



Lonnfors & Kiss          Expires August 7, 2004                [Page 16]

Internet-Draft    User agent capability extension to PIDF  February 2004


   	      attribute xml:lang-->
   	<xs:import namespace="http://www.w3.org/XML/1998/namespace"
   	 schemaLocation="http://www.w3.org/2001/xml.xsd"/>

   	<xs:element name="prescaps" type="tns:prescaps"/>

   	<xs:complexType name="prescaps">
   	  <xs:sequence>
   	    <xs:element name="audio" type="tns:audio" minOccurs="0"/>
   	    <xs:element name="application" type="tns:application"
   	          minOccurs="0"/>
   	    <xs:element name="data" type="tns:data" minOccurs="0"/>
   	    <xs:element name="control" type="tns:control"
   	          minOccurs="0"/>
   	    <xs:element name="video" type="tns:video" minOccurs="0"/>
   	    <xs:element name="text" type="tns:text" minOccurs="0"/>
   	    <xs:element name="automata" type="tns:automata"
   	           minOccurs="0"/>
   	    <xs:element name="class" type="tns:class" minOccurs="0"/>
   	    <xs:element name="duplex" type="tns:duplex" minOccurs="0"/>
   	    <xs:element name="mobility" type="tns:mobility"
   	          minOccurs="0"/>
   	    <xs:element name="description" type="tns:description"
   	          minOccurs="0"/>
   	    <xs:element name="event-packages" type="tns:event-packages"
   	           minOccurs="0"/>
   	    <xs:element name="priority" type="tns:priority"
   	           minOccurs="0"/>
   	    <xs:element name="methods" type="tns:methods"
   	    		 minOccurs="0"/>
   	    <xs:element name="extensions" type="tns:extensions"
   	          minOccurs="0"/>
   	    <xs:element name="schemes" type="tns:schemes"
   	    		 minOccurs="0"/>
   	    <xs:element name="actor" type="tns:actor" minOccurs="0"
   	           maxOccurs="4"/>
   	    <xs:element name="is-focus" type="tns:is-focus"
   	    		 minOccurs="0"/>
   	    <xs:element name="languages" type="tns:languages"
   	    		 minOccurs="0"
   	           maxOccurs="unbounded"/>
   	    <xs:element name="string" type="tns:string" minOccurs="0"
   	           maxOccurs="unbounded"/>
   	    <xs:element name="token" type="tns:token" minOccurs="0"
   	          maxOccurs="unbounded"/>
   	    <xs:element name="boolean" type="tns:boolean" minOccurs="0"
   	          maxOccurs="unbounded"/>
   	    <xs:element name="numeric" type="tns:numeric" minOccurs="0"



Lonnfors & Kiss          Expires August 7, 2004                [Page 17]

Internet-Draft    User agent capability extension to PIDF  February 2004


   	           maxOccurs="unbounded"/>
   	    <xs:any namespace="##other" processContents="lax"
   	    		minOccurs="0" maxOccurs="unbounded"/>
   	  </xs:sequence>
   	</xs:complexType>

   	<xs:complexType name="audio">
   	  <xs:sequence>
   	    <xs:element name="type" type="tns:type" minOccurs="0"
   	      maxOccurs="unbounded"/>
   	  </xs:sequence>
   	  <xs:attribute name="negated" type="xs:boolean"
   	    default="false"/>
   	</xs:complexType>

   	<xs:complexType name="application">
          <xs:sequence>
   	    <xs:element name="type" type="tns:type" minOccurs="0"
   	      maxOccurs="unbounded"/>
   	  </xs:sequence>
   	  <xs:attribute name="negated" type="xs:boolean"
   	    default="false"/>
   	</xs:complexType>

   	<xs:complexType name="data">
   	  <xs:sequence>
   	    <xs:element name="type" type="tns:type" minOccurs="0"
   	      maxOccurs="unbounded"/>
   	  </xs:sequence>
   	  <xs:attribute name="negated" type="xs:boolean"
   	    default="false"/>
   	</xs:complexType>

   	<xs:complexType name="control">
   	  <xs:sequence>
   	    <xs:element name="type" type="tns:type" minOccurs="0"
   	      maxOccurs="unbounded"/>
   	  </xs:sequence>
   	  <xs:attribute name="negated" type="xs:boolean"
   	    default="false"/>
   	</xs:complexType>

   	<xs:complexType name="video">
   	  <xs:sequence>
   	    <xs:element name="type" type="tns:type" minOccurs="0"
   	      maxOccurs="unbounded"/>
   	  </xs:sequence>
   	  <xs:attribute name="negated" type="xs:boolean"



Lonnfors & Kiss          Expires August 7, 2004                [Page 18]

Internet-Draft    User agent capability extension to PIDF  February 2004


   	    default="false"/>
   	</xs:complexType>

   	<xs:complexType name="text">
   	  <xs:sequence>
   	    <xs:element name="type" type="tns:type" minOccurs="0"
   	      maxOccurs="unbounded"/>
   	  </xs:sequence>
   	  <xs:attribute name="negated" type="xs:boolean"
   	    default="false"/>
   	</xs:complexType>

   	<xs:simpleType name="type">
   	  <xs:restriction base="xs:string"/>
   	</xs:simpleType>

   	<xs:simpleType name="automata">
   	  <xs:restriction base="xs:boolean"/>
   	</xs:simpleType>

   	<xs:simpleType name="class">
   	  <xs:restriction base="xs:string">
   		<xs:enumeration value="personal"/>
   		<xs:enumeration value="business"/>
   	  </xs:restriction>
   	</xs:simpleType>

   	<xs:simpleType name="duplex">
   	  <xs:restriction base="xs:string">
   		<xs:enumeration value="full"/>
   		<xs:enumeration value="half"/>
   		<xs:enumeration value="receive-only"/>
   		<xs:enumeration value="send-only"/>
   	  </xs:restriction>
   	</xs:simpleType>

   	<xs:simpleType name="mobility">
   	  <xs:restriction base="xs:string">
   		<xs:enumeration value="fixed"/>
   		<xs:enumeration value="mobile"/>
   	  </xs:restriction>
   	</xs:simpleType>

   	<xs:simpleType name="description">
   	  <xs:restriction base="xs:string"/>
   	</xs:simpleType>

   	<xs:complexType name="event-packages">



Lonnfors & Kiss          Expires August 7, 2004                [Page 19]

Internet-Draft    User agent capability extension to PIDF  February 2004


   	  <xs:sequence>
   		<xs:element name="event-package" type="tns:event-package"
   		  minOccurs="0" maxOccurs="unbounded"/>
   	  </xs:sequence>
   	</xs:complexType>

   	<xs:complexType name="event-package">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">
   		  <xs:attribute name="negated" type="xs:boolean"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   	<xs:simpleType name="priority">
   	  <xs:restriction base="xs:integer"/>
   	</xs:simpleType>

   	<xs:complexType name="methods">
   	  <xs:sequence>
   		<xs:element  name="method" type="tns:method"
   		  minOccurs="0" maxOccurs="unbounded"/>
   	  </xs:sequence>
   	</xs:complexType>

   	<xs:complexType name="method">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">
   		  <xs:attribute name="negated" type="xs:boolean"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   	<xs:complexType name="extensions">
   	  <xs:sequence>
   		<xs:element  name="extension" type="tns:extension"
   		  minOccurs="0" maxOccurs="unbounded"/>
   	  </xs:sequence>
   	</xs:complexType>

   	<xs:complexType name="extension">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">
   		  <xs:attribute name="negated" type="xs:boolean"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>




Lonnfors & Kiss          Expires August 7, 2004                [Page 20]

Internet-Draft    User agent capability extension to PIDF  February 2004


   	<xs:complexType name="schemes">
   	  <xs:sequence>
   		<xs:element  name="scheme" type="tns:scheme"
   		  minOccurs="0" maxOccurs="unbounded"/>
   	  </xs:sequence>
   	</xs:complexType>

   	<xs:complexType name="scheme">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">
   		  <xs:attribute name="negated" type="xs:boolean"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   	<xs:simpleType name="actor">
   	  <xs:restriction base="xs:string">
   		<xs:enumeration value="principal"/>
   		<xs:enumeration value="attendant"/>
   		<xs:enumeration value="msg-taker"/>
   		<xs:enumeration value="information"/>
   	  </xs:restriction>
   	</xs:simpleType>

   	<xs:simpleType name="is-focus">
   	  <xs:restriction base="xs:boolean"/>
   	</xs:simpleType>

   	<xs:complexType name="languages">
   	  <xs:sequence>
   		<xs:element  name="language" type="tns:language"
   		  minOccurs="0" maxOccurs="unbounded"/>
   	  </xs:sequence>
   	</xs:complexType>

   	<xs:complexType name="language">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">
   		  <xs:attribute name="negated" type="xs:boolean"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   <!-- Extension tag definitions -->

   	<xs:complexType name="token">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">



Lonnfors & Kiss          Expires August 7, 2004                [Page 21]

Internet-Draft    User agent capability extension to PIDF  February 2004


   		  <xs:attribute name="name" type="xs:string"
   		    use="required"/>
   		  <xs:attribute name="negated" type="xs:boolean"
   		    default="false"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   	<xs:complexType name="string">
   	  <xs:simpleContent>
   		<xs:extension base="xs:string">
   		  <xs:attribute name="name" type="xs:string"
   		    use="required"/>
   		  <xs:attribute name="negated" type="xs:boolean"
   		    default="false"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   	<xs:complexType name="boolean">
   	  <xs:simpleContent>
   		<xs:extension base="xs:boolean">
   		  <xs:attribute name="name" type="xs:string"
   		    use="required"/>
   		  </xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   	<xs:complexType name="numeric">
   	  <xs:simpleContent>
   		<xs:extension base="xs:integer">
   		  <xs:attribute name="name" type="xs:string"
   		    use="required"/>
   		  <xs:attribute name="negated" type="xs:boolean"
   		    default="false"/>
   		</xs:extension>
   	  </xs:simpleContent>
   	</xs:complexType>

   </xs:schema>


                                Figure 2


9. IANA Considerations

   This memo calls for IANA to register a new XML namespace URN as



Lonnfors & Kiss          Expires August 7, 2004                [Page 22]

Internet-Draft    User agent capability extension to PIDF  February 2004


   defined in [15]

9.1  URN sub-namespace registration for
    'urn:ietf:params:xml:ns:simple-prescaps-ext'

   URI:
   urn:ietf:params:xml:ns:simple-prescaps-ext

   Description:
   This is the XML namespace for XML elements defined by [[[RFCXXXX]]]
   to describe communication means extension for CPIM-PIDF presence
   document format in application/cpim-pidf+xml content type.

   Registrant Contact:
   IETF, SIMPLE working group, <simple@ietf.org>
   Mikko Lonnfors, <mikko.lonnfors@nokia.com>

   XML:

   BEGIN
   <?xml version="1.0"?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
   "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml
   <head>
        <meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/>
        <title>PIDF User Agent capability extension</title>
   </head>
   <body>
       <h1>Namespace for PIDF User Agent capability extension</h1>
       <h2>application/cpim-pidf+xml</h2>
       <p>See <a href="[[[URL of published RFC]]]">RFCXXXX</a>.</p>
    </body>
    </html>
   END


10. Security Considerations

   All security considerations specified in CPIM [5] and in PIDF [4]
   documents apply also to this document.  For clarity some of the
   security considerations are repeated here.

   Because presence is very privacy-sensitive information, the transport
   protocol for the presence information SHOULD have capabilities to
   protect protocol messages from possible threats, such as
   eavesdropping, corruption, tamper and replay attacks. The protocols



Lonnfors & Kiss          Expires August 7, 2004                [Page 23]

Internet-Draft    User agent capability extension to PIDF  February 2004


   SHOULD be able to use security mechanisms which are standardized or
   being standardized in IETF. However, it depends on the actual
   transport protocols which security mechanisms should be used, and it
   is beyond the scope of this memo.

11. Acknowledgements

   Authors of this document would like to thank following people for
   their contributions and valuable comments: Paul Kyzivat, Jonathan
   Rosenberg, Markus Isomaki, Eva Leppanen, and Hisham Khartabil.

Normative references

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Day, M., Rosenberg, J. and H. Sugano, "A Model for Presence and
        Instant Messaging", RFC 2778, February 2000.

   [3]  Day, M., Aggarwal, S., Mohr, G. and J. Vincent, "Instant
        Messaging / Presence Protocol Requirements", RFC 2779, February
        2000.

   [4]  Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W. and
        J. Peterson, "Presence Information Data Format (PIDF)",
        draft-ietf-impp-cpim-pidf-08 (work in progress), May 2003.

   [5]  Peterson, J., "Common Profile for Presence (CPP)",
        draft-ietf-impp-pres-04 (work in progress), August 2003.

   [6]  Schulzrinne, H., Rosenberg, J. and P. Kyzivat, "Indicating User
        Agent Capabilities in the Session Initiation Protocol (SIP)",
        draft-ietf-sip-callee-caps-03 (work in progress), December 2003.

   [7]  Klyne, G., "MIME Content Types in Media Feature Expressions",
        RFC 2913, September 2000.

   [8]  Hoffman, P., "Registration of Charset and Languages Media
        Features Tags", RFC 2987, November 2000.

Informative references

   [9]   Schulzrinne, H., Rosenberg, J. and P. Kyzivat, "Caller
         Preferences for the Session Initiation Protocol (SIP)",
         draft-ietf-sip-callerprefs-10 (work in progress), October 2003.

   [10]  Peterson, J., "Common Profile for Instant Messaging (CPIM)",
         draft-ietf-impp-im-04 (work in progress), August 2003.



Lonnfors & Kiss          Expires August 7, 2004                [Page 24]

Internet-Draft    User agent capability extension to PIDF  February 2004


   [11]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
         Peterson, J., Sparks, R., Handley, M. and E. Schooler, "SIP:
         Session Initiation Protocol", RFC 3261, June 2002.

   [12]  Roach, A., "Session Initiation Protocol (SIP)-Specific Event
         Notification", RFC 3265, June 2002.

   [13]  Rosenberg, J., "Session Initiation Protocol (SIP) Extensions
         for Presence",  draft-ietf-simple-presence-10.txt (work in
         progress), May 2002.

   [14]  Handley, M. and V. Jacobson, "SDP: Session Description
         Protocol", RFC 2327, April 1998.

   [15]  Mealling, M., "The IETF XML Registry",
         draft-mealling-iana-xmlns-registry-05 (work in progress), June
         2002.

   [16]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
         Extensions (MIME) part two: Media Types", RFC 2046, November
         1996.

   [17]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
         Extensions (MIME) part one:Format of Internet Message Bodies",
         RFC 2045, November 1996.

   [18]  Alvestrand, H., "Tags for the Identification of Languages", RFC
         1766, March 1995.

   [19]  Holtman, K., Mutz, A. and T. Hardie, "Media Feature Tag
         Registration Procedure", RFC 2046, March 1999.


Authors' Addresses

   Mikko Lonnfors
   Nokia Research Center
   Itamerenkatu 11-13 00180
   Helsinki
   Finland

   Phone: +358 71 8008000
   EMail: mikko.lonnfors@nokia.com








Lonnfors & Kiss          Expires August 7, 2004                [Page 25]

Internet-Draft    User agent capability extension to PIDF  February 2004


   Krisztian Kiss
   Nokia
   12278 Scripps Summit Drive
   San Diego
   US

   Phone: +18582049141
   EMail: krisztian.kiss@nokia.com











































Lonnfors & Kiss          Expires August 7, 2004                [Page 26]

Internet-Draft    User agent capability extension to PIDF  February 2004


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2004). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Lonnfors & Kiss          Expires August 7, 2004                [Page 27]

Internet-Draft    User agent capability extension to PIDF  February 2004


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Lonnfors & Kiss          Expires August 7, 2004                [Page 28]

