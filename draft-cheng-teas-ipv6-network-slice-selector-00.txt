



Network Working Group                                           W. Cheng
Internet-Draft                                                  W. Jiang
Intended status: Standards Track                            China Mobile
Expires: March 30, 2022                                            C. Lin
                                                    New H3C Technologies
                                                         September 30, 2021


  Encapsulation and Processing of Network Slice Selector in IPv6 Data
                                 Plane
            draft-cheng-teas-ipv6-network-slice-selector-00

Abstract

   Packets belong to a network slice need to be forwarded using the
   specific network resources.  A network slice selector is carried in
   each packet to identify the network slice that it belongs to.

   This document proposes a new Network Slice Selector Option, and
   describes the encapsulation and processing of network slice selector
   in IPv6 data plane using the proposed option.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 30, 2022.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents



Cheng, et al.             Expires March 30, 2022                 [Page 1]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   2
     1.2.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Carrying Network Slice Selector in IPv6 Data Plane  . . . . .   3
   3.  Definition of Network Slice Selector Option . . . . . . . . .   3
   4.  Processing of Network Slice Selector Option . . . . . . . . .   4
   5.  Usage of Network Slice Selector Option  . . . . . . . . . . .   5
     5.1.  IP Backbone of Network Slice  . . . . . . . . . . . . . .   5
     5.2.  IP Fast-Reroute of Network Slice  . . . . . . . . . . . .   7
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   8
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   Network slicing provides the ability to partition a physical network
   into multiple isolated logical networks of varying sizes, structures,
   and functions so that each slice can be dedicated to specific
   services or customers.  [I-D.ietf-teas-ietf-network-slices] defines
   the term "IETF Network Slice" and establishes the general principles
   of network slicing in the IETF context.
   [I-D.cheng-teas-network-slice-usecase] describes several use cases of
   IETF Network Slice.  [I-D.bestbar-teas-ns-packet] proposes a solution
   to realize network slicing in IP/MPLS networks.  Network nodes need
   to identify a packet belonging to a network slice before it can apply
   the proper forwarding treatment, so a Network Slice Selector must be
   carried in each packet.

   This document proposes a new Network Slice Selector Option, and
   describes the encapsulation and processing of the network slice
   selector in IPv6 data plane using the proposed option.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP



Cheng, et al.             Expires March 30, 2022                 [Page 2]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

1.2.  Terminology

   IETF Network Slice: An IETF Network Slice is a logical network
   topology connecting a number of endpoints using a set of shared or
   dedicated network resources that are used to satisfy specific Service
   Level Objectives.  See [I-D.ietf-teas-ietf-network-slices].

   Service Level Objectives (SLO): Define a set of measurable network
   attributes and characteristics that describe an IETF Network Slice
   service.  See [I-D.ietf-teas-ietf-network-slices].

   Network Slice Selector (NSS): An identifier carried in each packet to
   indicate the network slice that it belongs to.

2.  Carrying Network Slice Selector in IPv6 Data Plane

   As specified in [RFC8200], the Hop-by-Hop Options header is used to
   carry optional information that may be examined and processed by
   every node along a packet's delivery path.

   Therefore, in IPv6 data plane, the Network Slice Selector can be
   carried as a Hop-by-Hop option in the Hop-by-Hop options header.
   Each node along the path will process the IPv6 Hop-by-Hop options
   header and apply the specific Per Hop Behavior (PHB) that is
   associated with the network slice.

3.  Definition of Network Slice Selector Option

   A new Network Slice Selector Option is defined to encapsulate the
   network slice selector in IPv6 data plane.  It identifies the network
   slice which the packet belongs to.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Option Type  |  Opt Data Len |             Flags             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Network Slice Selector                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   o  Option Type: 8-bit identifier of the type of option.  The value is
      to be assigned by IANA.  The highest-order 2 bits are set to 00 to
      indicate that a node which does not recognize the option type will
      skip over this option and continue processing the header.  The




Cheng, et al.             Expires March 30, 2022                 [Page 3]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


      third highest-order bit is set to 0 to indicate the option data
      does not change en route.

   o  Opt Data Len: 8-bit unsigned integer.  Length of the Option Data
      field of this option, in octets.  The Value is 6.

   o  Flags: 16 bits of flags.  The following flags are defined:

    0                   1
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |B U U U U U U U U U U U U U U U|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      *  B: Best-effort.  When the forwarding behavior of the specific
         network slice identified by the Network Slice Selector filed is
         not configured or available, if B-Flag is set, the packet
         should be transmitted ignoring the Network Slice Selector
         Option, otherwise it should be discarded.

      *  U: Unused and for future use.  MUST be 0 on transmission and
         ignored on receipt.

   o  Network Slice Selector: 32-bit identifier of the network slice
      which the packet belongs to.

4.  Processing of Network Slice Selector Option

   In an IPv6 network which deploys network slicing, the ingress node
   encapsulates an outer IPv6 Header with the Network Slice Selector
   Option into each packet that belongs to a certain network slice.  The
   Network Slice Selector is carried in the Hop-by-Hop Options Header,
   and needs to be processed by each node along the delivery path.
   Nodes should be able to process the Network Slice Selector Option in
   the forwarding plane.

   When forwarding a packet with the Network Slice Selector Option, a
   node performs an IPv6 fib lookup on the Destination Address in IPv6
   Header, and determines the next hop to the destination.  Then it
   processes the Network Slice Selector Option in the Hop-by-Hop Options
   Header with the following logic:










Cheng, et al.             Expires March 30, 2022                 [Page 4]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


   Perform network slice lookup using the Network Slice Selector
     and determine the forwarding behavior
   IF (the network slice or the forwarding behavior is not
     configured or available) {
     IF (B-Flag is set) {
       Transmit the packet to next hop indicated by Destination
         Address, ignoring the Network Slice Selector Option
     }
     ELSE {
       Discard the packet
     }
   }
   ELSE {
     Transmit the packet to next hop indicated by Destination
       Address, using the forwarding behavior for the specific
       network slice
   }

   Nodes which do not recognize the Network Slice Selector Option should
   ignore the Network Slice Selector Option and continue to forward the
   packet.

   The egress node decapsulates the outer IPv6 Header carrying the
   Network Slice Selector Option.

5.  Usage of Network Slice Selector Option

5.1.  IP Backbone of Network Slice

   In Figure 1, the network operator has created two network slices in
   the IP Backbone for IETF network slices, which are NS1 and NS2.  The
   SLO of NS1 is guaranteed bandwidth of 100Mbps, and the SLO of NS2 is
   guaranteed bandwidth of 200Mbps.  Two network slice selectors, NSS1
   and NSS2, are assigned for NS1 and NS2 respectively.  SRv6 is applied
   in the IP Backbone.

   Along with the forwarding path <PE1-P1-P2-PE2>, dedicated queues with
   guaranteed bandwidth for NS1 and NS2 are configured at corresponding
   interfaces of each router.  Taking the interface P1-P2 of router P1
   as an example, which is shown in Figure 2, Queue 1 is configured with
   network slice selector NSS1 and guaranteed bandwidth of 100Mbps, and
   Queue 2 is configured with NSS2 and 200Mbps.  When P1 transmits a
   packet through interface P1-P2, the network slice selector carried in
   the packet header is checked.  If NSS1 appears in Hop-by-Hop Options
   Header, P1 uses Queue 1 to transmit the packet.  If NSS2 appears in
   Hop-by-Hop Options Header, P1 uses Queue 2 to transmit the packet.





Cheng, et al.             Expires March 30, 2022                 [Page 5]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


   When the traffic flows of NS1 or NS2 enter the IP Backbone, PE1 and
   PE2 encapsulate the received packet with an outer IPv6 header.  The
   outer IPv6 header has a Hop-by-Hop Options Header which contains a
   Network Slice Selector Option carrying NSS1 or NSS2, along with a SRH
   header which contains the SIDs of path <PE1-P1-P2-PE2>.

   In packet forwarding, P1 and P2 use the SID in IPv6 destination
   address and SRH to determine the next-hop and the outgoing interface,
   and then, according to the Hop-by-Hop Options Header, use the
   dedicated queue related with NSS1 or NSS2 to transmit the packet.

            .................................
            :        IP Backbone            :
   CPE      PE1       P1        P2        PE2   ......
   |----|   |---| NS1 |---| NS1 |---| NS1 |---|  : DC :
   |    o---|o-o|-----|o-o|-----|o-o|-----|o-o|--o    :
   |    o---|o-o|-----|o-o|-----|o-o|-----|o-o|--o    :
   |----|   |---| NS2 |---| NS2 |---| NS2 |---|  :....:
            :                               :
            :...............................:

                 +-------+        +-------+
                 |  IPv6 |        |  IPv6 |
                 +-------+        +-------+
                 |  HBH  |        |  HBH  |
                 +-------+        +-------+
                 |  SRH  |        |  SRH  |
   +-------+     +-------+        +-------+     +-------+
   |  IPv6 |     |  IPv6 |        |  IPv6 |     |  IPv6 |
   +-------+ <-> +-------+  <...> +-------+ <-> +-------+
   |Payload|     |Payload|        |Payload|     |Payload|
   +-------+     +-------+        +-------+     +-------+

                                 Figure 1

   |----|         Interface: P1-P2
   |    |  ----------------------------------
   |    |  >>>>>>Queue 1: NSS1, 100Mbps>>>>>>
   | P1 |  >>>>>>Queue 2: NSS2, 200Mbps>>>>>>
   |    |  >>>>>>         ...          >>>>>>
   |    |  ----------------------------------
   |----|

                                 Figure 2







Cheng, et al.             Expires March 30, 2022                 [Page 6]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


5.2.  IP Fast-Reroute of Network Slice

   In Figure 3, the network operator has created a network slice NS1.  A
   forwarding path <PE1-P1-P2-PE2> is selected to transmit the traffic
   flows of NS1.  On the links of PE1-P1, P1-P2 and P2-PE2, dedicated
   resources are allocated for NS1.

   When the traffic flows of NS1 enter the network via PE1, PE1
   encapsulates the received packet with an outer IPv6 header.  The
   outer IPv6 header has a Hop-by-Hop Options Header which contains a
   Network Slice Selector Option carrying NSS1, along with a SRH header
   which contains the SIDs of path <PE1-P1-P2-PE2>.  The B-Flag in the
   Network Slice Selector Option is set.  The packets are forwarded
   along the selected path, using the dedicated resources.

   Then, a failure occurs on P2.  The fast re-route technology on P1
   works, and P1 will send the packets to P3 and make the packet
   forwarding along the path <P3-P4-PE2>.  However, on the links of
   P1-P3, P3-P4 and P4-PE2, there is no dedicated resource allocated for
   NS1.  The B-Flag in the Network Slice Selector Option indicates the
   routers to transmit the packets with best-effort service rather than
   discard them.  Since the lack of dedicated resource along the new
   path, the SLO of NS1 may not be satisfied during the failure, but NS1
   remains available.

     |---|     |---|     |---|     |---|
   --|PE1|*****|P1 |*****|P2 |*****|PE2|--
     |---|     |---|     |---|     |---|
       |         |         |         |
       |         |         |         |
       |         |         |         |
       |       |---|     |---|       |
       +-------|P3 |-----|P4 |-------+
               |---|     |---|

   *****: links with dedicated resource for NS1
   -----: links without dedicated resource for NS1

                                 Figure 3

   For another example as shown in Figure 4, the network operator has
   assigned a main path <PE1-P1-P2-PE2> and a hot-standby backup path
   <PE1-P3-P4-PE2> for NS1.  Dedicated resources are allocated both on
   the main and backup paths.  In this case, the B-Flag in the Network
   Slice Selector Option can be unset.  When PE1 detects a failure on
   the main path, the traffic flows of NS1 will be steered to the backup
   path and forwarded with dedicated resource.




Cheng, et al.             Expires March 30, 2022                 [Page 7]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


     |---|     |---|     |---|     |---|
   --|PE1|*****|P1 |*****|P2 |*****|PE2|--
     |---|     |---|     |---|     |---|
       *         |         |         *
       *         |         |         *
       *         |         |         *
       *       |---|     |---|       *
       ********|P3 |*****|P4 |********
               |---|     |---|

   *****: links with dedicated resource for NS1
   -----: links without dedicated resource for NS1

                                 Figure 4

6.  IANA Considerations

   This document requests IANA to assign a new option type for Network
   Slice Selector Option.

7.  Security Considerations

   TBD.

8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8200]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", STD 86, RFC 8200,
              DOI 10.17487/RFC8200, July 2017,
              <https://www.rfc-editor.org/info/rfc8200>.

8.2.  Informative References








Cheng, et al.             Expires March 30, 2022                 [Page 8]

Internet-Draft         Ipv6 Network Slice Selector           September 2021


   [I-D.bestbar-teas-ns-packet]
              Saad, T., Beeram, V. P., Wen, B., Ceccarelli, D., Halpern,
              J., Peng, S., Chen, R., Liu, X., Contreras, L. M., and R.
              Rokui, "Realizing Network Slices in IP/MPLS Networks",
              draft-bestbar-teas-ns-packet-03 (work in progress), July
              2021.

   [I-D.cheng-teas-network-slice-usecase]
              Cheng, W., Jiang, W., Chen, R., Gong, L., and S. Peng,
              "IETF Network Slice use cases", draft-cheng-teas-network-
              slice-usecase-01 (work in progress), August 2021.

   [I-D.ietf-teas-ietf-network-slices]
              Farrel, A., Gray, E., Drake, J., Rokui, R., Homma, S.,
              Makhijani, K., Contreras, L., and J. Tantsura, "Framework
              for IETF Network Slices", draft-ietf-teas-ietf-network-
              slices-04 (work in progress), August 2021.

Authors' Addresses

   Weiqiang Cheng
   China Mobile

   Email: chengweiqiang@chinamobile.com


   Wenying Jiang
   China Mobile

   Email: jiangwenying@chinamobile.com


   Changwang Lin
   New H3C Technologies

   Email: linchangwang.04414@h3c.com















Cheng, et al.             Expires March 30, 2022                 [Page 9]
