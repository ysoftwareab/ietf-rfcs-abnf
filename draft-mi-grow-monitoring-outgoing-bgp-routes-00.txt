



Network Working Group                                              P. Mi
Internet-Draft                                                   Tencent
Intended status: Standards Track                               S. Zhuang
Expires: September 14, 2017                                      J. Dong
                                                                  Huawei
                                                          March 13, 2017


                  Monitoring Outgoing Routes Using BMP
            draft-mi-grow-monitoring-outgoing-bgp-routes-00

Abstract

   The BGP Monitoring Protocol (BMP) [RFC7854] is designed to monitor
   BGP [RFC4271] running status, such as BGP peer relationship
   establishment and termination and route updates.  At present, the BMP
   only monitors the incoming bgp routes (Adj-RIB-In), does not monitor
   the outgoing bgp routes (Adj-RIB-Out).

   This draft extends the applicability of BMP [RFC7854] to monitor the
   outgoing bgp routes.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 14, 2017.







Mi, et al.             Expires September 14, 2017               [Page 1]

Internet-Draft       Monitoring Outgoing BGP Routes           March 2017


Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Protocol Extensions . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  Option 1: Extending BMP Peer Flags  . . . . . . . . . . .   4
     3.2.  Option 2: Introducing Advertise Route Monitoring Message    5
     3.3.  Optons Comparison . . . . . . . . . . . . . . . . . . . .   6
   4.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Terminology

   This memo makes use of the terms defined in [RFC7854].

   Adj-RIB-Out: The Adj-RIBs-Out contains the routes for advertisement
   to specific peers by means of the local speaker's UPDATE messages.

   BMP: BGP Monitoring Protocol

   BMS: BGP Monitoring Station

2.  Introduction

   The BGP Monitoring Protocol (BMP) introduces the availability of
   monitoring BGP running status, such as BGP peer relationship
   establishment and termination and route updates.  Without BMP, manual
   query is required if you want to know about BGP running status.  With
   BMP, a router can be connected to a monitoring station and configured
   to report BGP running statistics to the station for monitoring, which



Mi, et al.             Expires September 14, 2017               [Page 2]

Internet-Draft       Monitoring Outgoing BGP Routes           March 2017


   improves the network monitoring efficiency.  BMP facilitates the
   monitoring of BGP running status and reports security threats in real
   time so that preventive measures can be taken promptly.

   The BMP can be used to obtain route view instead of screen scraping.
   The BMP provides access to unprocessed routing information (Adj-RIB-
   In) and processed routes (applied inbound policy) of monitored
   router's peer.  Route Monitoring (RM) message defined in [RFC7854] is
   used to provide an initial dump of all routes received from a peer,
   as well as an ongoing mechanism that sends the incremental routes
   advertised and withdrawn by a peer to the monitoring station.

   At present, the BMP only monitors the incoming bgp routes (Adj-RIB-
   In), does not monitor the outgoing bgp routes (Adj-RIB-Out).

   Consider the following scenario:

   The Station of ISP A is attached to router A, and the route to the
   Station is advertised to the Users via multiple exit routers (Such as
   routers C and E).

   The BMS (BGP Monitoring Station) is used to monitor the bgp running
   status of routers C and E.

   Now the operator of ISP A would like to know the status of the routes
   being advertised out of the ISP A:

   1) Outgoing to which peers;

   2) Whether the route was rejected by the export policy;

   3) The modification of BGP route attributes;

   4) To be added later.

   These status will provide valuable information for network operators,
   can be used in subsequent optimization procedures.














Mi, et al.             Expires September 14, 2017               [Page 3]

Internet-Draft       Monitoring Outgoing BGP Routes           March 2017


   *********************************
   *                +---+          *
   *         AS A   |BMS|          *
   *+------+        +---+          *
   *|Station|           \           *    AS X
   *+------+ +---+      \  +---+   *  +-----------+
   *  |     /| B |-------+-| C |-+----| Transit X |---+
   *  |    / +---+\        +---+ | *  +-----------+   |
   *  |   /    |   \\    //  |   | *    AS Y          |
   *+---+/     |     \\//    |   | *  +-----------+   |      +------+
   *| A |      |     //\     |   +----| Transit Y |---+---...| Users|
   *+---+\     |   //   \\   |   | *  +-----------+   |      +------+
   *      \    |  /       \  |   | *    AS Z          |
   *       \ +---+         +---+ | *  +-----------+   |
   *        \| D |---------| E |-+----| Transit Z |---+
   *         +---+         +---+   *  +-----------+
   *                               *
   *          ISP A                *
   *                               *
   *********************************

   Figure 1: Monitoring Outgoing Routes Using BMP


   From the above description of the scenario, it can be seen that it is
   necessary to monitor BGP outgoing routes.  This draft extends the
   applicability of BMP [RFC7854] to monitor the outgoing bgp routes.

3.  Protocol Extensions

   In order to support BMP to monitoring outgoing BGP routes, this
   document proposes some protocol extensions to BMP.

3.1.  Option 1: Extending BMP Peer Flags

   [RFC7854] defines three bit flags in the Peer Flags field of the per-
   peer header.  The bits are numbered from 0 (the high-order, or
   leftmost, bit) to 7 (the low-order, or rightmost, bit):

   o  Flag 0: V flag

   o  Flag 1: L flag

   o  Flag 2: A flag







Mi, et al.             Expires September 14, 2017               [Page 4]

Internet-Draft       Monitoring Outgoing BGP Routes           March 2017


    0 1 2 3 4 5 6 7
   +-+-+-+-+-+-+-+-+
   |V|L|A|O|  Res. |
   +-+-+-+-+-+-+-+-+

   Figure 2: Peer Flags


   This document defines an additional Flag that will be used to monitor
   the outgoing bgp routes:

   o  Flag TBD: O flag

   The O flag, if set to 0, indicates that Adj-RIBs-In are synchronized
   to BMP Station.  If set to 1, indicates that Adj-RIBs-Out are
   synchronized to BMP Station.

   This flag has no significance when used with other messages but Route
   Monitoring message.

3.2.  Option 2: Introducing Advertise Route Monitoring Message

   [RFC7854] defines seven message types for transferring BGP messages
   between cooperating systems:

   o  Type 0: Route Monitoring

   o  Type 1: Statistics Report

   o  Type 2: Peer Down Notification

   o  Type 3: Peer Up Notification

   o  Type 4: Initiation

   o  Type 5: Termination

   o  Type 6: Route Mirroring

   This document defines an additional message type that will be used to
   monitor the outgoing bgp routes:

   o  Type TBD: Advertise Route Monitoring

   The format of Advertise Route Monitoring message will reuse Route
   Monitoring message, the only difference is the message type value.

   The support for this new route type is OPTIONAL.



Mi, et al.             Expires September 14, 2017               [Page 5]

Internet-Draft       Monitoring Outgoing BGP Routes           March 2017


3.3.  Optons Comparison

   Option 1: Reusing the Type 0 information, only introduces an
   additional flag into the BMP Peer Flags.  If the BMP Station does not
   support the new flag, there is a risk that the BMP Station will
   wrongly handle the receiving Adj-RIBs-Out information as Adj-RIBs-In
   information.

   Option 2: Introduces an additional message type, if the BMP Station
   does not support it, the receiving new type message will be ignored
   by the BMP Station Quietly.

4.  Acknowledgements

   TBD.

5.  IANA Considerations

   TBD.

6.  Security Considerations

   TBD.

7.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC4271]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A
              Border Gateway Protocol 4 (BGP-4)", RFC 4271,
              DOI 10.17487/RFC4271, January 2006,
              <http://www.rfc-editor.org/info/rfc4271>.

   [RFC7854]  Scudder, J., Ed., Fernando, R., and S. Stuart, "BGP
              Monitoring Protocol (BMP)", RFC 7854,
              DOI 10.17487/RFC7854, June 2016,
              <http://www.rfc-editor.org/info/rfc7854>.

Authors' Addresses









Mi, et al.             Expires September 14, 2017               [Page 6]

Internet-Draft       Monitoring Outgoing BGP Routes           March 2017


   Penghui Mi
   Tencent
   Tengyun Building,Tower A ,No. 397 Tianlin Road
   Shanghai  200233
   China

   Email: kevinmi@tencent.com


   Shunwan Zhuang
   Huawei
   Huawei Bld., No.156 Beiqing Rd.
   Beijing  100095
   China

   Email: zhuangshunwan@huawei.com


   Jie Dong
   Huawei
   Huawei Bld., No.156 Beiqing Rd.
   Beijing  100095
   China

   Email: jie.dong@huawei.com


























Mi, et al.             Expires September 14, 2017               [Page 7]
