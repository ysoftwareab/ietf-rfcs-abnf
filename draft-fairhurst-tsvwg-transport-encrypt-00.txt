


TSVWG                                                       G. Fairhurst
Internet-Draft                                    University of Aberdeen
Intended status: Informational                              May 29, 2017
Expires: November 28, 2017

The Impact of Transport Header Encryption on Operation and Evolution of
                              the Internet
               draft-fairhurst-tsvwg-transport-encrypt-00

Abstract

   This document describes the implications of applying end-to-end
   encryption at the transport layer.  It identifies some in-network
   uses of transport layer header information that can be used with
   transport header authentication,. It reviews the implication of
   developing encrypted end-to-end transport protocols and examines the
   implication of developing and deploying encrypted end-to-end
   transport protocols.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 28, 2017.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (http://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Simplified BSD License text






Fairhurst              Expires November 28, 2017                [Page 1]

Internet-Draft            Transport Encryption                  May 2017

   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Internet Transports and Pervasive Encryption . . . . . . . . .  4
     2.1.  Authenticating the Transport Protocol Header . . . . . . .  5
     2.2.  Encrypting the Transport Payload . . . . . . . . . . . . .  5
     2.3.  Encrypting the Transport Header  . . . . . . . . . . . . .  6
     2.4.  Authenticating Transport Information and Selectively
           Encrypting the Transport Header  . . . . . . . . . . . . .  6
     2.5.  Adding transport information to network-layer Protocol
           Headers  . . . . . . . . . . . . . . . . . . . . . . . . .  6
   3.  Use of Transport Headers in the Network  . . . . . . . . . . .  7
     3.1.  Use to Identify Flows  . . . . . . . . . . . . . . . . . .  9
     3.2.  Use to derive Traffic Statistics . . . . . . . . . . . . .  9
       3.2.1.  Use to Characterise Traffic Rate and Volume  . . . . .  9
       3.2.2.  Use of the Network-Layer DSCP  . . . . . . . . . . . . 10
       3.2.3.  Measuring Loss rate and Loss Pattern . . . . . . . . . 10
       3.2.4.  Measuring Throughput and Goodput . . . . . . . . . . . 11
       3.2.5.  Measuring Latency (Network Transit Delay and Jitter) . 11
       3.2.6.  Measuring Flow Reordering  . . . . . . . . . . . . . . 12
     3.3.  Network-Layer Header Information . . . . . . . . . . . . . 13
       3.3.1.  Use of IPv6 Network-Layer Flow Label . . . . . . . . . 13
       3.3.2.  Use Network-Layer Differentiated Services Code Point
               Point (DSCP) . . . . . . . . . . . . . . . . . . . . . 13
       3.3.3.  Use of Explicit Congestion Marking . . . . . . . . . . 13
     3.4.  Use by Operators to Plan and Provision Networks  . . . . . 14
     3.5.  Use for Network Diagnostics and Troubleshooting  . . . . . 14
     3.6.  Verification of Acceptable Response to Congestion  . . . . 15
       3.6.1.  Impact on Network Operations . . . . . . . . . . . . . 16
       3.6.2.  Accountability and the Evolution of Internet Transport 17
   4.  The Effect of Encrypting Transport Header Fields . . . . . . . 17
     4.1.  Flow Identifier  . . . . . . . . . . . . . . . . . . . . . 17
       4.1.1.  Identification by a well-known Transport Port  . . . . 18
       4.1.2.  Use of a Transport as a Substrate  . . . . . . . . . . 18
       4.1.3.  Mobility and Flow Migration  . . . . . . . . . . . . . 18
       4.1.4.  IPv6 Network-Layer Flow Label  . . . . . . . . . . . . 19
       4.1.5.  Flow Start and Stop Indicator  . . . . . . . . . . . . 19
     4.2.  Use of Transport Sequence Number . . . . . . . . . . . . . 19
     4.3.  Use of Transport Sequence Acknowledgment Number  . . . . . 20
     4.4.  Use of ECN Transport Feedback Information  . . . . . . . . 20
     4.5.  Interpretation of Transport Header Fields  . . . . . . . . 21
   5.  Implications on Evolution of the Internet Transport  . . . . . 21
   6.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 24
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 24
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 25
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 25
     9.1.  Normative References . . . . . . . . . . . . . . . . . . . 25
     9.2.  Informative References . . . . . . . . . . . . . . . . . . 25
   Appendix A. Revision information . . . . . . . . . . . . . . . . . 29
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 29


Fairhurst              Expires November 28, 2017                [Page 2]

Internet-Draft            Transport Encryption                  May 2017


1.  Introduction

   This document discusses the implications of end-to-end encryption
   applied at the transport layer, and examines the impact on transport
   protocol design, transport use, and network operations and
   management.  It also considers some anticipated implications on
   transport and application evolution.

   The transport layer is the first end-to-end layer in the network
   stack.  Despite headers having end-to-end meaning, transport headers
   have come to be used in various ways within the Internet.  In
   response to pervasive monitoring [RFC7624] revelations and the IETF
   consensus that "Pervasive Monitoring is an Attack" [RFC7258], efforts
   are underway to increase encryption of Internet traffic, which
   prvents visibility of transport headers, and have implications on how
   network protocols are designed and used (e.g., [I-D.mm-wg-effect-
   encrypt]).

   Transport information that is sent without end-to-end authentication
   could be modified by "middleboxes" - defined as any intermediary box
   performing functions apart from normal, standard functions of an IP
   router on the data path between a source host and destination host
   [RFC3234].  When transport headers are modified by network devices on
   the path this can change the end-to-end protocol transport protocol
   behaviour in a way that may benefit the user or may hinder transport
   performance and application experience.  Whatever the outcome,
   modification of packets by a middlebox was not usually intended when
   the protocol was specified and is usually not known by the sender or
   receiver.

   Middleboxes have been deployed for a variety of reasons [RFC3234],
   including middlebox protocol enhancement, proxy-based methods, such
   as Protocol Enhancing Proxies (PEPs) [RFC3135], TCP acknowledgement
   (ACK) enhancement [RFC3449], use of application protocol caches [I-D
   .mm-wg-effect-encrypt], application layer gateways [I-D.mm-wg-effect-
   encrypt], etc.  [I-D.dolson-plus-middlebox-benefits] summarizes some
   of the functions provided to the Internet by such middleboxes, and
   the benefits that may arise when they are used in a number of
   deployment scenarios.  Methods that involve in-network modification
   of transport headers are not further discussed.

   This document notes that transport protocols can be designed to
   encrypt or authenticate transport header fields.  Authentication
   methods can be used at the transport layer to detect any changes to
   an immutable header field that were made by a network device along a
   path.  These methods do not require encryption of the header fields
   and hence these fields may remain visible to network devices.  End-
   to-end authentication allows the receiving transport endpoint to
   avoid accepting modified protocol headers.  This document therefore
   considers the case where protocol fields in the transport header are
   not altered as a packet traverses the network path.



Fairhurst              Expires November 28, 2017                [Page 3]

Internet-Draft            Transport Encryption                  May 2017


   Authentication methods have also been specified at the network layer,
   and cover fields not protected by a transport authentication header.
   Network layer header fields can convey codepoints that are
   increasingly being used to help forwarding decisions reflect the need
   of transport protocols, such the IPv6 Flow Label [RFC6437], the
   Differentiated Services Code Point (DSCP) [RFC2474] and Explicit
   Congestion Notification (ECN) [RFC3168].

   Encryption methods can help to hide information from an eavesdropper
   in the network.  Encryption can also help protect the privacy of a
   user, by hiding data relating to user/device identity or location.
   Neither authentication nor encryption methods prevent traffic
   analysis, and usage needs to reflect that profiling of users and
   fingerprinting of behaviour can take place even on encrypted traffic
   flows.

   This document seeks to identify the implications of various
   approaches to transport protocol authentication and encryption.

2.  Internet Transports and Pervasive Encryption

   End-to-end encryption can be applied at various protocol layers.  It
   can be applied above the transport to encrypt the transport payload.
   One motive to use encryption is a response to perceptions that the
   network has become ossified by over-reliance on middleboxes that
   prevent new protocols and mechanisms from being deployed.  This has
   lead to a common perception that there is too much "manipulation" of
   protocol headers within the network, and that designing to deploy in
   such networks is preventing transport evolution.  In the light of
   this, a method that authenticates transport headers may help improve
   the pace of transport development, by eliminating the need to always
   consider deployed middleboxes [I-D.trammell-plus-abstract-mech], or
   potentially to only explicitly enable middlebox use for particular
   paths with particular middleboxes [RFC3135].

   Another perspective stems from increased concerns about privacy and
   surveillance . Some Internet users have valued the ability to protect
   identity and defend against traffic analysis, and have used methods
   such as IPsec ESP and Tor [Tor].  Revelations about the use of
   pervaisive surveillance [RFC7624] have, to some extent, eroded trust
   in the service offered by network operators, and following the
   Snowden revelation in the USA in 2013 has led to an increased desire
   for people to employ encryption to avoid unwanted "eavesdropping" on
   their communications.  Whatever the reasons, there are now activities
   in the IETF to design new protocols that may include some form of
   transport header encryption (e.g., QUIC [I-D.ietf-quic-transport]).

   The use of transport layer authentication and encryption exposes a
   tussle between middlebox vendors, operators, applications developers
   and users.




Fairhurst              Expires November 28, 2017                [Page 4]

Internet-Draft            Transport Encryption                  May 2017


   o  On the one hand, future Internet protocols that enable large-scale
      encryption assist in the restoration of the end-to-end nature of
      the Internet by returning complex processing to the endpoints,
      since middleboxes cannot modify what they cannot see.
   o  On the other hand, encryption of transport layer header
      information has implications to people responsible for operating
      networks and researchers and analysts seeking to understand the
      dynamics of protocols and traffic patterns.

   Whatever the motives, a decision to use pervasive of transport header
   encryption will have implications on the way in which design and
   evaluation is performed, and which canin turn impact the direction of
   evolution of the TCP/IP stack.

   The next subsections briefly review some security design options for
   transport protocols.

2.1.  Authenticating the Transport Protocol Header

   Transport layer header information can be authenticated.  An
   authentication method protects the integrity of immutable transport
   header fields, but can still expose the transport protocol header
   information in the clear, allowing in-network devices to observes
   these fields.  Authentication can not prevent in-network
   modification, but can avoid accepting changes and avoid impact on the
   transport protocol operation.

   An example transport authentication mechanism is TCP-Authentication
   (TCP-AO) [RFC5925].  This TCP option authenticates TCP segments,
   including the IP pseudo header, TCP header, and TCP data.  TCP-AO
   protects the transport layer, preventing attacks from disabling the
   TCP connection itself.  TCP-AO may interact with middleboxes,
   depending on their behavior [RFC3234].

   The IPSec Authentication Header (AH) [RFC4302] works at the network
   layer and authenticates the IP payload.  This therefore also
   authenticates all transport headers, and verifies their integrity at
   the receiver, preventing in-network modification.

2.2.  Encrypting the Transport Payload

   The transport layer payload can be encrypted to protect the content
   of transport segments.  This leaves transport protocol header











Fairhurst              Expires November 28, 2017                [Page 5]

Internet-Draft            Transport Encryption                  May 2017

   information in the clear.  The integrity of immutable transport
   header fields could be protected by combining this with
   authentication methods (Section 2.1).

   Examples of encrypting the payload include TLS over TCP [RFC5246]
   [RFC7525] or DTLS over UDP [RFC6347] [RFC7525].

2.3.  Encrypting the Transport Header

   The network layer payload could be encrypted (including the entire
   transport header and payload). This method does not expose any
   transport information to devices in the network, which also prevents
   modification along the network path.

   The IPSec Encapsulating Security Payload (ESP) [RFC4303] is an
   example of encryption at the network layer, it encrypts and
   authenticates all transport headers, preventing visibility of the
   headers by in-network devices.  Some Virtual Private Network (VPN)
   methods also encrypt these headers.

2.4.  Authenticating Transport Information and Selectively Encrypting
      the Transport Header

   A transport protocol design can encrypt selected header fields, while
   also choosing to authenticate some or all of other fields in the
   transport header.  This allows only specific transport header fields
   to be observable by network devices.  End-to end authentication can
   prevent an endpoint from undetected modification of the immutable
   transport headers.

   The choice of which fields to expose and which to encrypt is a design
   choice for the transport protocol.  Any selective encryption method
   requires trading two conflicting goals for a transport protocol
   designer to decide which header fields to encrypt.  On the one hand,
   security work typically employs a design technique that seeks to
   expose only what is needed.  On the other hand, there may be
   performance and operational benefits in exposing selected information
   to network tools.

   Mutable fields in the transport header provide opportunities for
   middleboxes to modify the transport behaviour (e.g., the extended
   headers described in [I-D.trammell-plus-abstract-mech]). This
   considers only the use of immutable fields in the transport headers,
   that is, fields that could be authenticated end-to-end across a
   transport path.

   An example of a method that encrypts some, but not all, transport
   information is UDP-in-GRE [RFC8086] when it is used with GRE
   encryption.

2.5.  Adding transport information to network-layer Protocol Headers




Fairhurst              Expires November 28, 2017                [Page 6]

Internet-Draft            Transport Encryption                  May 2017


   The transport information can be made visible in a network-layer
   header.  This has the advantage that this information can then be
   observed by in-network devices.  This has the advantage that a single
   header can support all transport protocols, but there may also be
   less desirable implications of separating the operation of the
   transport protocol from the measurement framework.

   Some measurements may be made by adding additional packet headers
   carrying operations, administration and management (OAM) information
   to packets at the ingress to a maintenance domain (e.g., adding an
   Ethernet protocol header with timestamps and sequence number
   information using a method such as 802.11ag) and removing the
   additional header at the egress of the maintenance domain.  This
   approach enables some types of measurements, but does not cover the
   entire range of measurments described in this document.

   Another example of a network-layer approach is the IPv6 Performance
   and Diagnostic Metrics (PDM) Destination Option [I-D.ietf-ippm-6man-
   pdm-option].  This allows a sender to optionally include a
   destination option that cariies header fields that can be used to
   observe timestamps and packet sequence numbers.  Transmission of the
   packets with thsi option can be impacted by destination-options
   processing by network devices.  This information could be
   authenticated by receiving transport endpoints when the information
   is added at the sender and visible at the receiving endpoint,
   although methods to do this have not currently been proposed.  This
   method needs to be explicitly enabled at the sender.

   A drawback of using extension headers is that IPv4 network options
   are often not supported (or are carried on a slower processing path)
   and some IPv6 networks are also known to drop packets that set an
   IPv6 header extension.  Another disadvantage is that protocols that
   seprately expose header information do not necessarily have an
   advantage to expose the information that is utilised by the protocol
   itself, and could manipulate this header information to gain an
   advantage from the network.

3.  Use of Transport Headers in the Network

   This section identifies ways that observable (non-encrypted)
   transport header fields can be used by devices in the network.  There
   are a number of actors who can benefit from observing this
   information.  These include:

   o  Protocol developers and implementors of TCP/IP stacks;
   o  Researchers working on new mechanisms or new applications of
      existing applications;
   o  Analysis researching the impact of mechanisms on network equipment
      or specific network topologies;
   o  Staff supporting operation of a network.




Fairhurst              Expires November 28, 2017                [Page 7]

Internet-Draft            Transport Encryption                  May 2017


   When encryption conceals more layers in a packet, people seeking
   understanding of the network operation need to rely more on pattern
   inferences and other heuristics.  The accuracy of measurements
   therefore suffers, as does the ability to investigate and
   troubleshoot interactions between different anomalies.  For example,
   the traffic patterns between server and browser are dependent on
   browser supplier and version, even when the sessions use the same
   server application (e.g., web e-mail access). Even when measurment
   datasets are made available (e.g., from endpoints) additional
   metadata (such as the state of the network) is often required to
   interpret the data, collecting such metadata is more difficult when
   the observation point is at a different location to the bottleneck/
   equipment under evaluation.

   To observe protocol headers requires knowledge of the format of the
   transport header.  In-network observation of transport protocol
   headers requires:

   o  Flows to be identified at the level required for monitoring.  In
      IETF transports, this is typically identified by the ports field.
   o  Knowledge of the protocol being used.  In some usages, well-known
      ports can be identified from the low-numbered port that can
      identify a protocol (although port information alone is not
      sufficient to guarentee identification of the protocol).
   o  To know the position and syntax of any transport headers that need
      to be observed.  IETF transport protocols specify this
      information.

   If there is more than one format for visible headers, the observer
   needs to know the protocol that is used.  As protocols evolve over
   time and there mau be a need to introduce new transport headers.This
   may require interpretation of protocol version information.TCP and
   SCTP specify a standard base header that includes sequence number
   information and other data.  TCP and SCTP options may be negotiated
   to indicate the presence of new (negotiated) features, the size and
   function of each option is identified by an option number in the
   transport header.

   Protocols that expose header information that is utilised by the
   protocol itself provide an incentive for the endpoints to provide
   correct information.

   Packet sampling techniques can be used to scale processing involved
   in observing apckets on high rate links.  This only exports the
   packet header information of (randomly) selected packets.  The
   utility of these measurements depends on the type of bearer and








Fairhurst              Expires November 28, 2017                [Page 8]

Internet-Draft            Transport Encryption                  May 2017

   number of mechanisms used by network devices.  Simple routers are
   relatively easy to manage, a device with more complexity demands
   understanding of the choice of many system parameters.  This level of
   complexity exists when several network methods are combined.

   The following subsections describe various ways that observable
   transport information may be utilised.

3.1.  Use to Identify Flows

   Transport protocol header infromation can identify the connection
   state of a flow, and identify separate flows operating over a path.

   Connection information can assist a firewall in deciding which flows
   are permitted through a security gateway [I-D.trammell-plus-
   statefulness], or to help maintain the network address translation
   (NAT) bindings in a NAPT or application layer gateway.  This
   information may also find use in load balancers, where visibility of
   the 5-tuple and meaningful use could be used as a method for
   determining forwarding or selecting a server [I-D.mm-wg-effect-
   encrypt].

   The use of UDP as a substrate protocol is discussed further in
   Section 4.1.2, and the implications of mobility bindings in Section
   4.1.3.

3.2.  Use to derive Traffic Statistics

   Passive monitoring uses observed traffic to makes inferences frok
   transport headers to derive measurements.  A variety of open source
   and commecial tools exists that can utilise the information in RTP
   and RTCP headers to derive traffic volume measurements and provide
   infromation on the progress and quality of a session using RTP.

   Any Internet transport or application could report data to the
   network, by sending status packets or by providing access to
   measurement data.  However, to be useful a user of measurement data
   needs to trust the source of this data and importantly require
   metadata to understand the context under which the data was
   collected, including the time, observation point, and way in which
   metrics were accumulated.

   When encryption conceals information in packet headers, measurments
   need to rely on pattern inferences and other heuristics grows, and
   accuracy suffers [I-D.mm-wg-effect-encrypt].

3.2.1.  Use to Characterise Traffic Rate and Volume








Fairhurst              Expires November 28, 2017                [Page 9]

Internet-Draft            Transport Encryption                  May 2017


   Operators can measure per-subscriber information about the volume and
   pattern of network usage.  Transport headers may be observed on a
   per-application (or per endpoints) basis.  Capacity usage ican be
   valuable for capacity planning (providing more detail of trends
   rather than the volume per subscriber). This can also be used for
   measurement-based traffic shaping and to implement QoS support within
   the network and lower layers.

3.2.2.  Use of the Network-Layer DSCP

   Applications can expose their delivery expectations to the network
   allowing endpoints to encode in the Differentiated Services Code
   Point (DSCP) field of IPv4 and IPv6 packets.  Setting this field
   provides explicit information that can be used in place of inferring
   traffic requirements (e.g., by inferring QoS requirements from port
   information via a multi-field classifier). This information can be
   collected by measurement campaigns, but does not directly provide any
   performance data.

3.2.3.  Measuring Loss rate and Loss Pattern

   Various actors have a need to characterise link/network segments and
   derive key performance indicators (retransmission rate, packet drop
   rate, sector utilization Level, a measure of reordering, peak rate,
   the CE-marking rate, etc.). The quality of a transport path may be
   assessed using dedicated tools that generate test traffic.  However
   such tools need to be run from an endpoint, and most operators do not
   have access to this equipment.  There also may be costs associated
   with running such tests.  (e.g., the implications of bandwidth tests
   in a mobile network are obvious.) An alternative is to use in-network
   techniques that observe visible transport packet sequence numbers to
   determine transport flow statistics.

   The design tradeoffs for radio networks are often very different to
   those of wired networks.  A radio-based network (e.g., cellular
   mobile, enterprise WiFi, satellite access/backhaul, point-to-point
   radio) has the complexity of a subsystem that performs radio resource
   management - with direct impact on the available capacity, and
   potentially loss/reordering of packets.  The pattern of loss and
   congestion, impact of different traffic types, correlation with
   propagation and interference measures can all have significant impact
   on the cost and performance of providing a service.  The need for
   this type of information is expected to increase as operators seek to
   bring together heterogeneous types of network equipment and seek to
   deploy opportunistic methods to access radio spectrum.









Fairhurst              Expires November 28, 2017               [Page 10]

Internet-Draft            Transport Encryption                  May 2017


   Transport layer information can help identify whether the link/
   network tuning is effective and alert to potential problems that can
   be hard to derive from link or device measurements alone.  Often
   impact is only understood in the context of the other flows that
   share a bottleneck.  In summary, the common language between network
   operators and application/content providers/users is packet transfer
   performance at a layer that all can view and analyze.  For most
   packets, this has been transport layer, until the emergence of QUIC,
   with the obvious exception of VPNs and IPsec.

   A simple example is the monitoring of Active Queue Management (AQM).
   For example, FQ-CODEL [I-D.ietf-aqm-fq-codel], combines sub queues
   (statistically assigned per flow), management of the queue length
   (CODEL), flow-scheduling, and a starvation prevention mechanism.
   Usually such algorithms are designed to be self-tuning, but current
   methods typically employ heuristics that can result in more loss
   under certain path conditions (e.g., large RTT, effects of multiple
   bottlenecks [RFC7567]).

3.2.4.  Measuring Throughput and Goodput

   The throughput observed by a flow can be determined even when a flow
   is encrypted, providing the individual flow can be identified.
   Goodput [RFC7928] is a measure of useful data exchanged (the ratio of
   useful/total volume of traffic sent by a flow), which requires
   ability to differentiate the different ways packets are used at the
   remote endpoint (e.g., by observing duplicate packet sequence numbers
   in TCP).

3.2.5.  Measuring Latency (Network Transit Delay and Jitter)

   Latency is a key performance metric that impacts application response
   time and user perceived response time.  This often indirectly impacts
   throughput and flow completion time.  It also determines the reaction
   time of the transport protocol itself, impacting flow setup,
   congestion control, loss recovery, and other transport mechanisms.
   The overall latency can have many components [Latency], but of these
   unnecessary/unwanted queuing in network buffers has often been
   observed as a significant factor.  Once the cause of unwanted latency
   has been identified, this can often be eliminated, and determining
   latency metrics is a key driver in the deployment of AQM [RFC7567],
   DiffServ [RFC2474], and ECN [RFC3168] [RFC8087].

   To measure latency across a part of the path, an observation point
   has to measure the experienced round-trip time (RTT). This can be
   achieved using packet sequence numbers, and acknowledgement points.
   An observation point in the network is able to determine not only the
   path RTT, but also to measure the upstream and downstream RTT,






Fairhurst              Expires November 28, 2017               [Page 11]

Internet-Draft            Transport Encryption                  May 2017

   respectively to the sending and receiving endpoints.  This may be
   used to locate a source of latency, e.g., by observing cases where
   the ratio of median to minimum RTT is large for a part of a path.

   An example usage of this method could be to identify excessive
   buffers and to deploy or configure Active Queue Management (AQM)
   [RFC7567] [RFC7928].  Operators deploying such tools can effectively
   eliminate unnecessary queuing in routers and other devices.  AQM
   methods need to be deployed at the capacity bottleneck, but are often
   deployed in combination with other techniques, such as scheduling
   [RFC7567] [I-D.ietf-aqm-fq-codel] and although parameter-less methods
   are desired [RFC7567], current methods [I-D.ietf-aqm-fq-codel] [I-D
   .ietf-aqm-codel] [I-D.ietf-aqm-pie] often cannot scale across all
   possible deployment scenarios.  The service offered by operators can
   therefore benefit from latency information to understand the impact
   of deployment and tune deployed services.

   Some network applications are sensitive to packet jitter, and to
   support this type of application, it can be useful to monitor the
   jitter observed along a portion of the path.  The requirements to
   measure jitter resemble those for the measurement of latency.

3.2.6.  Measuring Flow Reordering

   Significant flow reordering can impact time-critical applications and
   can be interpreted as loss by reliable transports.  Many transport
   protocols (e.g., TCP) therefore use technqiues that are impacted
   reordering.  Packet reordering can occur for many reasons (from
   equipment design to misconfiguration of forwarding rules). As in the
   drive to reduce network latency, there is a need for operational
   tools to be able to detect misordered packet flows and quantify the
   degree or reordering.  Techniques for measuring reordering typically
   observe packet sequence numbers.  Metrics have been defined that
   evaluate whether a network has maintained packet order on a packet-
   by-packet basis [RFC4737] and [RFC5236].

   There has been initiatives in the IETF transport area to reduce the
   impact of reordering withing a transport flow, possibly leading to
   reduced the requirements for ordering.  These have promise to
   simplify network equipment design as well as the potential to improve
   robustness of the transport service.  Measurements of reordering can
   help understand the level of reordering within deployed













Fairhurst              Expires November 28, 2017               [Page 12]

Internet-Draft            Transport Encryption                  May 2017

   infrastructure, and inform decisions about how to progress such
   mechanisms.

3.3.  Network-Layer Header Information

   Some network-layer information is closely tied to transport protocol
   operation.

3.3.1.  Use of IPv6 Network-Layer Flow Label

   Endpoints should expose flow information in the IPv6 Flow Label field
   of the network-layer header (e..g.  [RFC8085]). This can be used to
   inform network-layer queuing, forwarding (e.g., for equal cost multi-
   path (ECMP) routing, and Link Aggregation (LAG)). This can provide
   useful information to assign packets to flows in the data collected
   by measurement campaigns, but does not directly provide any
   performance data.

3.3.2.  Use Network-Layer Differentiated Services Code Point Point
        (DSCP)

   Application should expose their delivery expectations to the network
   allowing endpoints to encode in the Differentiated Services Code
   Point (DSCP) field of IPv4 and IPv6 packets.  This can be used to
   inform network-layer queuing and forwarding, and can also provide
   information on the relative importance of packet information
   collected by measurement campaigns, but does not directly provide any
   performance data.

   Setting this field provides explicit information that can be used in
   place of inferring traffic requirements (e.g., by inferring QoS
   requirements from port information via a multi-field classifier).

3.3.3.  Use of Explicit Congestion Marking

   Explicit Congestion Notification (ECN)[RFC3168] uses a codepoint in
   the network-layer header.  This exposes the presence of congestion on
   a network path to the transport and network layer.  Use of ECN can
   offer gains in terms of increased throughput, reduced delay, and
   other benefits when used over a path that includes equipment that
   supports an AQM method that performs Congestion Experienced (CE)
   marking of IP packets [RFC8087].













Fairhurst              Expires November 28, 2017               [Page 13]

Internet-Draft            Transport Encryption                  May 2017

   ECN CE-marks are visible to in-network devices on the transport path.
   The reception of CE-marked packets can therefore be used to monitor
   the presence and estimate the level of incipient congestion on the
   upstream portion of the path from the point of observation (Section
   2.5 of [RFC8087]). Because ECN marks carried in the IP protocol
   header, measuring ECN can be much easier than metering packet loss.
   However, interpretting the marking behaviour (i.e., assessing
   congestion and diagnosing faults) requires context from the transport
   layer (path RTT, visibility of loss - that could be due to queue
   overflow, congestion response, etc) [RFC7567].

   Some proposed ECN-capable network devices provide richer (more
   frequent and fine-grained) indication of their congestion state.
   setting congestion marks proportional to the level of congestion
   (e.g., DCTP [I-D.ietf-tcpm-dctcp], and L4S [I-D.ietf-tsvwg-l4s-
   arch]).

   AQM and ECN can use and combine a range of algorithms and
   configuration options, it is therefore important for tools to be
   available to network operators and researchers to understand the
   implication of configuration choices and transport behaviour as use
   of ECN increases and new methods emerge [RFC7567] [RFC8087].  ECN-
   monitoring is expected to become important as AQM is deployed that
   supports ECN [RFC8087]

   Section Section 4.4 describes the transport layer feedback
   information that accompanies the use of ECN.

3.4.  Use by Operators to Plan and Provision Networks

   Traffic measurements can and is used by operators to help plan
   deployment of new equipment and configurations in their networks.
   Data is also important to equipment vendors who also need to
   understand trends in the volume of traffic and the patterns of usage
   as inputs to decisions about planning and provisioning.

   If the "unknown" or "uncharacterised" traffic forms a small part of
   the traffic aggregate, the dynamics of this traffic may not have a
   significant collateral impact on the other traffic that shares a
   network segment.  Once the proportion of traffic increases, the need
   to monitor the traffic and determine if appropriate safety measures
   need to be put in place.

3.5.  Use for Network Diagnostics and Troubleshooting

   Transport header information is useful for a variety of operational
   tasks [I-D.mm-wg-effect-encrypt]: to diagnose network problems,
   assess performance, capacity planning, management of denial of
   service threats, and responding to user performance questions.  These
   tasks seldom involve the need to determine the contents of the
   transport payload, or other application details.




Fairhurst              Expires November 28, 2017               [Page 14]

Internet-Draft            Transport Encryption                  May 2017


   In-network measurements that can distinguish between upstream and
   downstream metrics with respect to the measurement point are
   particularly useful to locating the source of problems or to asses
   the performance of a network segment.

   A network operator supporting traffic that uses transport header
   encryption can see only encrypted transport headers.  This prevents
   deployment of performance measurement tools that rely on transport
   protocol information.  Choosing to encrypt all information may be
   expected to reduce the ability for networks to "help" (e.g.  in
   response to tracing issues, making appropriate Quality of Service,
   QoS, decisions). For some this will be blessing, for others it may be
   a curse.  For example, operational performance data about encrypted
   flows needs to be determined by traffic pattern analysis, rather than
   relying on traditional tools.  This can impact the ability of the
   operator to respond to faults, it could require reliance on endpoint
   diagnostic tools or user involvement in diagnosing and
   troubleshooting unusual use cases or non-trivial problems.  Although
   many network operators utilise transport information as a part of
   their operational practice, the network will not break because
   transport headers are encrypted.

3.6.  Verification of Acceptable Response to Congestion

   Many network operators implicitly accept that TCP traffic to conform
   to a behaviour that is acceptable for use in the shared Internet.
   TCP algorithms have been continuously improved over decades, and they
   have reached a level of efficiency and correctness that custom
   application-layer mechanisms will struggle to easily duplicate
   [RFC8085].  A standards-compliant TCP stack provides congestion
   control that is therefore judged safe for use across the Internet.
   Applications developed on top of well-designed transports can be
   expected to appropriately control their network usage, reacting when
   the network experiences congestion, by back-off and reduce the load
   placed on the network.  This is the normal expected behaviour for TCP
   transports.

   Tools exist that can interpret the transport protocol header
   information to help understand the impact of specific transport
   protocols (or protocol mechanisms) on other traffic that shares their
   network.  An observation in the network can gain understanding of the
   dynamics of a flow and its congestion control behaviour, by observing
   TCP sequence numbers to show how a flow shares available capacity,
   deduce its congestion dynamics, etc.  (e.g., it is common to
   visualise plots of TCP sequence numbers versus time [Osterman]).
   Analysing packet sequence numbers can be used to help understand
   whether an application flow backs-off its share of the network load
   in the face of persistent congestion, and hence to understand whether
   the behaviour is appropriate for sharing limited network capacity.





Fairhurst              Expires November 28, 2017               [Page 15]

Internet-Draft            Transport Encryption                  May 2017


   The User Datagram Protocol (UDP) provides a minimal message-passing
   transport that has no inherent congestion control mechanisms.
   Because congestion control is critical to the stable operation of the
   Internet, applications and other protocols that choose to use UDP as
   an Internet transport must employ mechanisms to prevent congestion
   collapse, avoid unacceptable contributions to jitter/latency, and to
   establish an acceptable share of capacity with concurrent traffic
   [RFC8085].  A network operator has no way of knowing the specific
   methods used by UDP applications, and an operator may need to deploy
   methods such as rate-limited, transport circuit breakers or other
   methods to enforce acceptable usage.

   UDP flows can also expose a well-known header by specifying the
   format of header fields.  This information can be observed to gain
   understanding of the dynamics of a flow and its congestion control
   behaviour.  For example, tools exist to monitor various aspects of
   the RTP and RTCP header information of real-time flows (see Section
   3.2).

   Independent observation by multiple actors is important for
   scientific analysis, and ability to validate the behaviour in-situ
   within a network is important.  Transport header encryption changes
   the ability for other actors to collect and independently analyse
   data.  This is important when considering transport protocols (e.g.,
   changes to transport mechanisms, changes in network infrastructure,
   and changes in the transport use).

   The growth and diversity of applications and protocols using the
   Internet continues to expand - and there has been recent interest in
   a wide range of new transport methods, e.g., Larger Initial Window,
   Proportional Rate Reduction (PRR), BBR, the introduction of active
   queue management (AQM) techniques and new forms of ECN response
   (e.g., Data Centre TCP, DCTP [I-D.ietf-tcpm-dctcp], and methods
   proposed for Low Latency Low Loss Scalable throughput, L4S).  For
   each new method it is desirable to build a body of data reflecting
   its behaviour under a wide range of deployment scenarios, traffic
   load, and interactions with other deployed/candidate methods.

   This has implications:

3.6.1.  Impact on Network Operations

   By correlating observations at multiple points along the path (e.g.
   at the ingress and egress of a network segment), an observer can
   determine the contribution of a portion of the path to an observed









Fairhurst              Expires November 28, 2017               [Page 16]

Internet-Draft            Transport Encryption                  May 2017

   metric (to locate a source of delay, jitter, loss, reordering,
   congestion marking, etc).

   Information provided by tools can help determine whether mechanisms
   are needed in the network to prevent flows from acquiring excessive
   network capacity.  Operators can manage traffic flows (e.g., to
   prevent flows from acquiring excessive network capacity under severe
   congestion) by deploying rate-limiters, traffic shaping or network
   transport circuit breakers [RFC8084].

3.6.2.  Accountability and the Evolution of Internet Transport

   One often used premise is to "trust but verify" the behaviours of
   protocol using the network.

   Internet transport protocols employ a set of mechanisms.  Some of
   these need to work in cooperation with the network layer - loss
   detection and recovery, congestion detection and congestion control,
   some of these need to work only end-to-end (e.g., parameter
   negotiation, flow-control.  Whatever the mechanism, experience has
   shown that it is often difficult to correctly implement combination
   of mechanisms [RFC8085].  These mechanisms therefore typically evolve
   as a protocol matures, or in response to changes in network
   conditions, changes in network traffic or changes to application
   usage.

   Measurement have a critical role in the design of transport protocol
   mechanisms and their acceptance by the wider community (e.g., as a
   method to judge the safety for Internet deployment.  Open standards
   suggest that such evaluation needs to include independent observation
   and evaluation of performance data.

4.  The Effect of Encrypting Transport Header Fields

   This section examines implications of encrypting specific transport
   header fields.

4.1.  Flow Identifier

   To measure and analyse flow traffic, a measurement tool needs to be
   able to identify traffic flows.  Aggregation of sessions, and
   persistent use of established transport flows by multiple sessions
   means that a flow at the transport layer is not necessarily the same
   as a flow seen at the application layer.  This is usually not a
   consequence, and data is measured for the aggregate transport flow.

   If flow information is observed from transport headers, then there
   needs to be a way to identify the format of the header - such as
   observing parameter negotiation at connection setup, identifying the
   protocol version from other data (e.g., a "magic" number embedded in





Fairhurst              Expires November 28, 2017               [Page 17]

Internet-Draft            Transport Encryption                  May 2017

   the header). This allows an observer to determine the presence, size
   and position of any observable header fields fro protocol
   decapsulation (decoding).

   Some measurement methods sample traffic, rather than collecting all
   packets passing through a measurement point.  These methods still
   require a way to determine the presence, size and position of any
   observable header fields.

4.1.1.  Identification by a well-known Transport Port

   All IETF-defined transport protocols include a transport port field
   in their transport header.  Observation of a well-known port value
   may be indicative of the protocol being encapsulated, but there is no
   way to enforce this usage.  This can be used to configure
   decapsulation.  This is not the necessarily case, e.g., RTP traffic
   may utilise ephemeral ports, requiring measurement tools to include
   additional methods to determine the protocol being used.

4.1.2.  Use of a Transport as a Substrate

   When a transport is used as a substrate, the transport provides an
   encapsulation that allows another transport flow to be within the
   payload of a transport flow.  The transported protocol header may
   provide additional information for multiplexing multiple flows over
   the same 5-tuple.  The UDP Guidelines [RFC8085] provides some
   guidance on using UDP as a substrate protocol.  If there is no
   additional information about the protocol transported by the
   substrate, this may be viewed as an opaque traffic aggregate.

   Examples include GRE-in-UDP, SCTP-in-UDP. GRE-in-UDP may include an
   encryped payload, but does not encrypt the GRE protocol header.

4.1.3.  Mobility and Flow Migration

   With the proliferation of mobile connected devices, there is a stated
   need for connection-oriented protocols to maintain connections after
   a network migration by an endpoint.  The ability and desirability of
   in-network devices to track such migration depends on the context.
   On the one hand, a load-balancer device in front of server may find
   it useful to map a migrated connection to the same server endpoint.
   On the other hand, a user performing migration to avoid detection may
   prefer the network not to be able to correlate the different parts of
   a migrating session.  Care must then be exercised to make sure that
   the information encoded by the endpoints is not sufficient to
   identify unique flows and facilitate a persistent surveillance attack
   vector [I-D.mm-wg-effect-encrypt].

   The impact of flow migration on measurement activities depends on the
   data being measured, rate of migration and level of encryption that
   is employed.

   Requirements for load balancing and mobility can lead to complex


Fairhurst              Expires November 28, 2017               [Page 18]

Internet-Draft            Transport Encryption                  May 2017

   protocol interactions.

   QUIC is an example of a transport protocol designed to provide
   mobolity, which is in development by the IETF.

4.1.4.  IPv6 Network-Layer Flow Label

   Endpoints should expose flow information in the IPv6 Flow Label field
   of the network-layer header (e..g.  [RFC8085]). This can be used to
   inform network-layer queuing, forwarding (e.g., for equal cost multi-
   path (ECMP) routing, and Link Aggregation (LAG)). This can provide
   useful information to assign packets to flows in the data collected
   by measurement campaigns, but does not directly provide any
   performance data.

4.1.5.  Flow Start and Stop Indicator

   Transports can expose that start and end of flows in a transport
   header field (e.g., TCP SYN, FIN, RST). This can also help
   measurement devices identify the start of flows, or to remove stale
   flow information.  This use resembles the use by in-network devices
   such as firewalls and NAPTs.  It provides supplemental information -
   flows can start and end at any time, the Internet network layer
   provides only a best effort service that allows alternate routing,
   reordering, loss, etc, so a network measurement tool can not rely
   upon observing these indicators.  The time to complete a protoocl
   connection and/or session setup can be measured as a peformance
   metric.

   One consequence of encrypting transport headers, is that this
   information is not visible to forwarding devices (such as a NAPT or
   Firewall). This may impact the network service.  For example, UDP-
   based middlebox traversal usually relies on timeouts to remove old
   state, since middleboxes are unaware when a particular flow ceases to
   be used by an application [RFC8085].  This can often lead to the
   state table entries not being kept as long as those for which the
   flows are identifiable.

4.2.  Use of Transport Sequence Number

   The TCP or RTP sequence number can be observed in one direction (the
   path that carries data segments). An authenticated header prevents
   this field being modified or terminated/split [RFC3135] by a network
   device, but allows this to be used to observe progress of the network
   flow.

   An incrementing sequence number enables detection of loss (either by
   correlating ingress and egress value, or when assuming that all







Fairhurst              Expires November 28, 2017               [Page 19]

Internet-Draft            Transport Encryption                  May 2017

   packets follow a single path), duplication and reordering (with
   understanding that not necessarily all packets of a flow follow the
   same path, and reordering can complicate processing of observations).
   Tools are widely available to interpret RTP and TCP sequence numbers
   - ranging from open source tools to dedicated commercial packages.

4.3.  Use of Transport Sequence Acknowledgment Number

   Acknowledgement (ACK) data provides information about the path from
   the network device to the remote endpoint.  The information can help
   identify packet loss (or the point of loss), RTT, and other network-
   related performance parameters (e.g., throughput, jitter,
   reordering). Unless this information is correlated with other data
   there is no way to disambiguate the cause of impairments (congestion
   loss, link transmission loss, equipment failure).

   An in-network device must not modify the flow of end-to-end ACK data
   when using an authenticated protocol.  That is, must not use the in-
   network methods described in [RFC3449].  This can impact the
   performance and/or efficiency (e.g., cost) of using paths where the
   return capacity is limited or has implications on the overall design
   (e.g., using TCP with cellular mobile uplinks, DOCSIS uplinks).

   The TCP stream can be observed by correlating the stream of TCP ACKs
   that flow from a receiver in the return direction.  Although these
   ACKs are cumulative, and are not necessarily sent on the same path as
   the forward data, when visible, their sequence can confirm successful
   transmission and the path RTT. In the case of TCP they may also
   indicate packet loss (duplicate ACKs).

   An RTP session can provide RTCP [RFC3605] [RFC4585] feedback using
   the RTP framework.  This reception information and can be observed by
   in-network measurement devices and can be interpreted to provide a
   variety of quality of experience information for the related RTP
   flow, as well as basic network performance data (RTT, loss, jitter,
   etc).

4.4.  Use of ECN Transport Feedback Information

   Transport protocols that use ECN Section 3.3.3 need to provide ECN
   feedback information in the transport header to inform the sender
   whether packets have been received with an ECN CE-mark [RFC3819].
   This information can be in the form of feedback once each RTT
   [RFC3819] or more frequent.  The latter may involve sending a
   detailed list of all ECN-marked packets (e.g., [I-D.ietf-tcpm-
   accurate-ecn] and [RFC6679]). The detailed information can provide
   detail about the pattern and rate of marking.  The information
   provided in these protocol headers can help a network operator to
   understand the congestion status of the forward path and the impact
   of marking algorithms on the traffic that is carried [RFC8087].





Fairhurst              Expires November 28, 2017               [Page 20]

Internet-Draft            Transport Encryption                  May 2017


   IETF specifications for Congestion Exposure (CONEX) [RFC7713] and
   Per-congestion Notification (PCN) [RFC5559] are examples of
   frameworks that monitor reception reports for CE-marked packets to
   support network operations.

4.5.  Interpretation of Transport Header Fields

   Understanding and analysing transport protocol behaviour typically
   demands tracking changes to the protocol state at the transport
   endpoints.  Although protocols communicate state information in their
   protocol headers, a protocol implementation typically also contains
   internal state that is not directly visible from observing transport
   protocol headers.  Effective measurement tools need to consider that
   not all packets may be observed (due to drops at the capture tap or
   because packets take an alternate route that does not pass the tap).
   Some flows of packets may also be encapsulatedmaintenance domain in
   other protocols, which further complicates analysis.

   Some examples of using network measurements of transport headers to
   infer internal TCP state information include:

   o  The TCP congestion window (cwnd) and slow start threshold
      (ssthresh.  Tools for analysing in-network performance of TCP may
      observe sequence number to infer the current congestion controller
      state.)
   o  The TCP RTT estimator and TCP Retransmission Time Out (RTO) value.
      This can be estimated by correlating sequence and acknowledgement
      numbers, or possibly by observing TCP timestamp options.
   o  Use of pacing (and pacing rate) and use of methods such as
      Proportional Rate Reduction (PRR) and Congestion Window validation
      (CWV). This may be estimated from observing timing of segments
      with TCP sequence numbers.
   o  Receiver window and flow control state.  This may be inferred from
      information in TCP ACK segments.
   o  Retransmission state and receiver buffer.  This may be inferred
      from information in TCP ACK segments (especially when SACK blocks
      are provided).
   o  Use of ACK delay and Nagle algorithm.  This may be estimated from
      observing timing of segments with TCP sequence numbers.

5.  Implications on Evolution of the Internet Transport













Fairhurst              Expires November 28, 2017               [Page 21]

Internet-Draft            Transport Encryption                  May 2017


   Architectural, the transport layer provides the first end-to-end
   interactions across the Internet.  The transport protocols are
   layered directly over the network service and are sent in the payload
   of network-layer packets.  However, this simple architecural view
   hides one of the core functions of the transport, to discover and
   adapt to the properties of the Internet path that is currently being
   used.  The design of Internet transport protocols is as much about
   avoiding the unwanted side effects of congestion, avoiiding
   congestion collapse, adapting to changes in the path characteristics,
   etc., as it is about end-to-end feature negotiation, flow control and
   optimising for performance for a specific application.  The IETF
   transport community has to date relied heavily on measurement and
   insight provided from the wider community to understand the trade-
   offs and to inform selection of select appropriate mechansims to
   ensure a safe, reliable and robust Internet.

   The increasing public concerns about the interference with Internet
   traffic have led to a rapidly expanding deployment of encryption to
   protect end-user privacy, in protocols like QUIC. At the same time,
   network operators and access providers, especially in mobile
   networks, have come to rely on the in-network functionality provided
   by middleboxes both to enhance performance and support network
   operations.  This presents a need for architectural changes and new
   approaches to the way network transport protocols are designed
   [Measure].

   There are many motivations for deploying encrypted transports, and
   encryption of transport payloads.  This document has expanded upon
   the expected implications on operational practices when working with
   encrypted transport protocols, and offers insight into the potential
   benefit of authentication, encryption and techniques that require in-
   network devices to interpret specific protocol header fields.

   The use of encryption to protect individual privacy may reasonably be
   considered a choice that users may make.  This comes with
   implications that need to be considered:

   Troubleshooting and diagnostics. Encrypting all transport information
      eliminates the incentive for operators to troubleshoot what they
      cannot interpret: one flow experiencing packet loss looks like any
      other.  When transport header encryption prevents decoding the
      transport header (if sequence numbers and flow ID are obscured),
      and hence understanding the impact on a particular flow or flows
      that share a common network segment.  Encrypted traffic therefore
      implies "don't touch", and a likely first response will be "can't
      help, no trouble found", or the implication that this complexity
      comes with an additional operational cost [I-D.mm-wg-effect-
      encrypt].
      





Fairhurst              Expires November 28, 2017               [Page 22]

Internet-Draft            Transport Encryption                  May 2017

   Open verifyable data The use of transport header encryption may
      reduce the range of parties who can capture useful measurement
      data.  This may restricts the information sources of available to
      the Internet community to understand the operation of the network
      and transport protocols that use this to inform design decisions
      for new protocols, new equipment and operational practice.  This
      could mean that key information is only available at endpoints:
      i.e., at user devices and within service platforms.  While these
      devices could be designed to offer data about the network paths
      that they use, this can not be independently captured - and
      therefore a new level of trust is required between these actors
      and those that use this data.
      

   Operational practice Published transport specifications can bring
      assurance to those operating networks that they have sufficient
      understanding to not deploy complex techniques to not routinely
      monitor and to not need to routinely manage TCP/IP traffic flows
      (e.g.  Avoiding the capital and operational costs of deploying
      flow rate-limiting and network circuit-breaker methods).  This
      should continue when encrypted transport headers are used,
      providing the traffic produced conforms to the expectations of the
      operator.  However, operators will need to establish this is the
      case.
      

   Traffic analysis The use of encryption makes it harder to determine
      which transport methods are being used across a network segment
      and the trends in usage.  This could impact the ability for an
      operator to anticipate the need for network upgrades and roll-out.
      It can also impact on-going traffic engineering activities.
      Although the impact in many case may be small, there are cases
      where operators directly support services (e.g., in radio
      environments) and the more complex the underlying infrastructure
      the more important this impact.
      

   Interactions between mechanisms Encryption restricts the ability to
      explore interactions between functions at different protocol
      layers.  This is a side-effect of not allowing a choice of the
      vantage point from which this information is observed, an
      important issue in examining collateral impact of flows sharing a
      bottleneck, or where the intention is to understand the
      interaction between a layer 2 function (e.g., radio resource
      management policy, a channel impairment, an AQM configuration, a
      PHB or scheduling method) and a transport protocol.  An
      appropriate vantage point, coupled with timing information for the
      flow (fine-grained timestamps) is a valuable tool in benchmarking
      equipment/configurations and understanding non-trivial
      interactions.
      




Fairhurst              Expires November 28, 2017               [Page 23]

Internet-Draft            Transport Encryption                  May 2017

   Common specifications Since the introduction of congestion control,
      TCP has continued to contribute the predominate transport, with a
      range but consistent approach to avoiding congestion collapse.
      There is also a risk that the diversity of transport mechanisms
      could also increase, with incentives to use a wide range of
      methods, this is not in itself a problem, nor is this a direct
      result of encryption.  However, when encryption is used, this risk
      needs to be weighed against the reduced visibility to network
      operators.  Especially, if a development cycle focused on specific
      protocols/applications could for instance incentivise
      optimisations (e.g., expectations of capacity, expectations of
      RTT, loss rate, level of multiplexing, etc) that may prove
      suboptimal for users or operators that utilise a network segments
      with different characteristics than targeted by the developer.
      Encryption places the onus on validation in the hands of
      developers.  While there is little to doubt that developers will
      seek to produce high quality code for their target use, it is not
      clear whether there is sufficient incentive to ensure good
      practice that benefits the wide diversity of requirements from the
      Internet community as a whole.
      

   Restricting research and development The use of encryption may impede
      independent research and development initiatives.  Experience
      shows that high quality transport protocols are complicated to
      design and complex to deploy, and that individual mechanisms need
      to be evaluated while considering other mechanism, across a broad
      range of network topologies and with attention to the impact on
      traffic sharing the capacity.  This could eliminate the
      independent self-checks that have previously been in place from
      research and academic contributors (e.g., the role of ICCRG, and
      research publications in reviewing new transport mechanisms and
      assessing the impact of their experimental deployment).

   Pervasive use of transport header encryption can impact the ways that
   future protocols are designed and deployed.  The choice of whether
   candidate transport designs should encrypt their protocol headers
   therefore needs to be taken based not just on security
   considerations, but also on the impact on operating networks and the
   constrictions this may place on evolution of Internet protocols.
   While encryption of all transport information can help reduce
   ossification of the transport layer, it could result in ossification
   of the network service.  There can be advantages in providing a level
   of ossification of the header in terms of providing a set of open
   specified header fields that are observable from in-network devices.

6.  Acknowledgements

   The author would like to thank all who have talked to him face-to-
   face or via email.  ...

7.  IANA Considerations

   XX RFC ED - PLEASE REMOVE THIS SECTION XXX

Fairhurst              Expires November 28, 2017               [Page 24]

Internet-Draft            Transport Encryption                  May 2017


   This memo includes no request to IANA.

8.  Security Considerations

   This document is about design and deployment considerations for
   transport protocols.  Authentication, confidentiality protection, and
   integrity protection are identified as Transport Features by
   RFC8095".  As currently deployed in the Internet, these features are
   generally provided by a protocol or layer on top of the transport
   protocol; no current full-featured standards-track transport protocol
   provides these features on its own.  Therefore, these features are
   not considered in this document, with the exception of native
   authentication capabilities of TCP and SCTP for which the security
   considerations in RFC4895.

   Like congestion control mechanisms, security mechanisms are difficult
   to design and implement correctly.  It is hence recommended that
   applications employ well-known standard security mechanisms such as
   DTLS, TLS or IPsec, rather than inventing their own.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, DOI 10.17487/
              RFC2119, March 1997, <http://www.rfc-editor.org/info/
              rfc2119>.

9.2.  Informative References

   [I-D.dolson-plus-middlebox-benefits]
              Dolson, D., Snellman, J., Boucadair, M. and C. Jacquenet,
              "Beneficial Functions of Middleboxes", Internet-Draft
              draft-dolson-plus-middlebox-benefits-03, March 2017.

   [I-D.ietf-aqm-codel]
              Nichols, K., Jacobson, V., McGregor, A. and J. Jana,
              "Controlled Delay Active Queue Management", Internet-Draft
              draft-ietf-aqm-codel-00, October 2014.

   [I-D.ietf-aqm-fq-codel]
              Hoeiland-Joergensen, T., McKenney, P., Taht, D., Gettys,
              J. and E. Dumazet, "FlowQueue-Codel", Internet-Draft
              draft-ietf-aqm-fq-codel-00, January 2015.

   [I-D.ietf-aqm-pie]
              Pan, R., Natarajan, P., Baker, F. and G. White, "PIE: A
              Lightweight Control Scheme To Address the Bufferbloat
              Problem", Internet-Draft draft-ietf-aqm-pie-00, October
              2014.

   [I-D.ietf-ippm-6man-pdm-option]

Fairhurst              Expires November 28, 2017               [Page 25]

Internet-Draft            Transport Encryption                  May 2017

              Elkins, N., Hamilton, R. and m.  mackermann@bcbsm.com,
              "IPv6 Performance and Diagnostic Metrics (PDM) Destination
              Option", Internet-Draft draft-ietf-ippm-6man-pdm-
              option-10, May 2017.

   [I-D.ietf-quic-transport]
              Iyengar, J. and M. Thomson, "QUIC: A UDP-Based Multiplexed
              and Secure Transport", Internet-Draft draft-ietf-quic-
              transport-03, May 2017.

   [I-D.ietf-tcpm-accurate-ecn]
              Briscoe, B., Kuehlewind, M. and R. Scheffenegger, "More
              Accurate ECN Feedback in TCP", Internet-Draft draft-ietf-
              tcpm-accurate-ecn-00, December 2015.

   [I-D.ietf-tcpm-dctcp]
              Bensley, S., Thaler, D., Balasubramanian, P., Eggert, L.
              and G. Judd, "Datacenter TCP (DCTCP): TCP Congestion
              Control for Datacenters", Internet-Draft draft-ietf-tcpm-
              dctcp-06, May 2017.

   [I-D.ietf-tsvwg-l4s-arch]
              Briscoe, B., Schepper, K. and M. Bagnulo, "Low Latency,
              Low Loss, Scalable Throughput (L4S) Internet Service:
              Architecture", Internet-Draft draft-ietf-tsvwg-l4s-
              arch-00, May 2017.

   [I-D.mm-wg-effect-encrypt]
              Moriarty, K. and A. Morton, "Effect of Pervasive
              Encryption on Operators", Internet-Draft draft-mm-wg-
              effect-encrypt-11, April 2017.

   [I-D.trammell-plus-abstract-mech]
              Trammell, B., "Abstract Mechanisms for a Cooperative Path
              Layer under Endpoint Control", Internet-Draft draft-
              trammell-plus-abstract-mech-00, September 2016.

   [I-D.trammell-plus-statefulness]
              Kuehlewind, M., Trammell, B. and J. Hildebrand,
              "Transport-Independent Path Layer State Management",
              Internet-Draft draft-trammell-plus-statefulness-02,
              December 2016.

   [Latency]  Briscoe, B., "Reducing Internet Latency: A Survey of
              Techniques and Their Merits", November 2014.

   [Measure]  Fairhurst, G., Kuehlewind, M. and D. Lopez, "Measurement-
              based Protocol Design", June 2017.

   [RFC2474]  Nichols, K., Blake, S., Baker, F. and D. Black,
              "Definition of the Differentiated Services Field (DS
              Field) in the IPv4 and IPv6 Headers", RFC 2474, DOI
              10.17487/RFC2474, December 1998, <http://www.rfc-
              editor.org/info/rfc2474>.

Fairhurst              Expires November 28, 2017               [Page 26]

Internet-Draft            Transport Encryption                  May 2017


   [RFC3135]  Border, J., Kojo, M., Griner, J., Montenegro, G. and Z.
              Shelby, "Performance Enhancing Proxies Intended to
              Mitigate Link-Related Degradations", RFC 3135, DOI
              10.17487/RFC3135, June 2001, <http://www.rfc-editor.org/
              info/rfc3135>.

   [RFC3168]  Ramakrishnan, K., Floyd, S. and D. Black, "The Addition of
              Explicit Congestion Notification (ECN) to IP", RFC 3168,
              DOI 10.17487/RFC3168, September 2001, <http://www.rfc-
              editor.org/info/rfc3168>.

   [RFC3234]  Carpenter, B. and S. Brim, "Middleboxes: Taxonomy and
              Issues", RFC 3234, DOI 10.17487/RFC3234, February 2002,
              <http://www.rfc-editor.org/info/rfc3234>.

   [RFC3449]  Balakrishnan, H., Padmanabhan, V., Fairhurst, G. and M.
              Sooriyabandara, "TCP Performance Implications of Network
              Path Asymmetry", BCP 69, RFC 3449, DOI 10.17487/RFC3449,
              December 2002, <http://www.rfc-editor.org/info/rfc3449>.

   [RFC3605]  Huitema, C., "Real Time Control Protocol (RTCP) attribute
              in Session Description Protocol (SDP)", RFC 3605, DOI
              10.17487/RFC3605, October 2003, <http://www.rfc-editor.org
              /info/rfc3605>.

   [RFC3819]  Karn, P., Ed., Bormann, C., Fairhurst, G., Grossman, D.,
              Ludwig, R., Mahdavi, J., Montenegro, G., Touch, J. and L.
              Wood, "Advice for Internet Subnetwork Designers", BCP 89,
              RFC 3819, DOI 10.17487/RFC3819, July 2004, <http://www
              .rfc-editor.org/info/rfc3819>.

   [RFC4301]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", RFC 4301, DOI 10.17487/RFC4301,
              December 2005, <http://www.rfc-editor.org/info/rfc4301>.

   [RFC4302]  Kent, S., "IP Authentication Header", RFC 4302, DOI
              10.17487/RFC4302, December 2005, <http://www.rfc-
              editor.org/info/rfc4302>.

   [RFC4303]  Kent, S., "IP Encapsulating Security Payload (ESP)", RFC
              4303, DOI 10.17487/RFC4303, December 2005, <http://www
              .rfc-editor.org/info/rfc4303>.

   [RFC4585]  Ott, J., Wenger, S., Sato, N., Burmeister, C. and J. Rey,
              "Extended RTP Profile for Real-time Transport Control
              Protocol (RTCP)-Based Feedback (RTP/AVPF)", RFC 4585, DOI
              10.17487/RFC4585, July 2006, <http://www.rfc-editor.org/
              info/rfc4585>.

   [RFC4737]  Morton, A., Ciavattone, L., Ramachandran, G., Shalunov, S.
              and J. Perser, "Packet Reordering Metrics", RFC 4737, DOI
              10.17487/RFC4737, November 2006, <http://www.rfc-
              editor.org/info/rfc4737>.

Fairhurst              Expires November 28, 2017               [Page 27]

Internet-Draft            Transport Encryption                  May 2017


   [RFC5236]  Jayasumana, A., Piratla, N., Banka, T., Bare, A. and R.
              Whitner, "Improved Packet Reordering Metrics", RFC 5236,
              DOI 10.17487/RFC5236, June 2008, <http://www.rfc-
              editor.org/info/rfc5236>.

   [RFC5246]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", RFC 5246, DOI 10.17487/
              RFC5246, August 2008, <http://www.rfc-editor.org/info/
              rfc5246>.

   [RFC5559]  Eardley, P., Ed., "Pre-Congestion Notification (PCN)
              Architecture", RFC 5559, DOI 10.17487/RFC5559, June 2009,
              <http://www.rfc-editor.org/info/rfc5559>.

   [RFC5925]  Touch, J., Mankin, A. and R. Bonica, "The TCP
              Authentication Option", RFC 5925, DOI 10.17487/RFC5925,
              June 2010, <http://www.rfc-editor.org/info/rfc5925>.

   [RFC6347]  Rescorla, E. and N. Modadugu, "Datagram Transport Layer
              Security Version 1.2", RFC 6347, DOI 10.17487/RFC6347,
              January 2012, <http://www.rfc-editor.org/info/rfc6347>.

   [RFC6437]  Amante, S., Carpenter, B., Jiang, S. and J. Rajahalme,
              "IPv6 Flow Label Specification", RFC 6437, DOI 10.17487/
              RFC6437, November 2011, <http://www.rfc-editor.org/info/
              rfc6437>.

   [RFC6679]  Westerlund, M., Johansson, I., Perkins, C., O'Hanlon, P.
              and K. Carlberg, "Explicit Congestion Notification (ECN)
              for RTP over UDP", RFC 6679, DOI 10.17487/RFC6679, August
              2012, <http://www.rfc-editor.org/info/rfc6679>.

   [RFC7258]  Farrell, S. and H. Tschofenig, "Pervasive Monitoring Is an
              Attack", BCP 188, RFC 7258, DOI 10.17487/RFC7258, May
              2014, <http://www.rfc-editor.org/info/rfc7258>.

   [RFC7525]  Sheffer, Y., Holz, R. and P. Saint-Andre, "Recommendations
              for Secure Use of Transport Layer Security (TLS) and
              Datagram Transport Layer Security (DTLS)", BCP 195, RFC
              7525, DOI 10.17487/RFC7525, May 2015, <http://www.rfc-
              editor.org/info/rfc7525>.

   [RFC7567]  Baker, F.Ed.,  and G. Fairhurst, Ed., "IETF
              Recommendations Regarding Active Queue Management", BCP
              197, RFC 7567, DOI 10.17487/RFC7567, July 2015, <http://
              www.rfc-editor.org/info/rfc7567>.

   [RFC7624]  Barnes, R., Schneier, B., Jennings, C., Hardie, T.,
              Trammell, B., Huitema, C. and D. Borkmann,
              "Confidentiality in the Face of Pervasive Surveillance: A
              Threat Model and Problem Statement", RFC 7624, DOI
              10.17487/RFC7624, August 2015, <http://www.rfc-editor.org/
              info/rfc7624>.

Fairhurst              Expires November 28, 2017               [Page 28]

Internet-Draft            Transport Encryption                  May 2017


   [RFC7713]  Mathis, M. and B. Briscoe, "Congestion Exposure (ConEx)
              Concepts, Abstract Mechanism, and Requirements", RFC 7713,
              DOI 10.17487/RFC7713, December 2015, <http://www.rfc-
              editor.org/info/rfc7713>.

   [RFC7928]  Kuhn, N., Ed., Natarajan, P., Ed., Khademi, N.Ed.,  and D.
              Ros, "Characterization Guidelines for Active Queue
              Management (AQM)", RFC 7928, DOI 10.17487/RFC7928, July
              2016, <http://www.rfc-editor.org/info/rfc7928>.

   [RFC8084]  Fairhurst, G., "Network Transport Circuit Breakers", BCP
              208, RFC 8084, DOI 10.17487/RFC8084, March 2017, <http://
              www.rfc-editor.org/info/rfc8084>.

   [RFC8085]  Eggert, L., Fairhurst, G. and G. Shepherd, "UDP Usage
              Guidelines", BCP 145, RFC 8085, DOI 10.17487/RFC8085,
              March 2017, <http://www.rfc-editor.org/info/rfc8085>.

   [RFC8086]  Yong, L., Ed., Crabbe, E., Xu, X. and T. Herbert, "GRE-in-
              UDP Encapsulation", RFC 8086, DOI 10.17487/RFC8086, March
              2017, <http://www.rfc-editor.org/info/rfc8086>.

   [RFC8087]  Fairhurst, G. and M. Welzl, "The Benefits of Using
              Explicit Congestion Notification (ECN)", RFC 8087, DOI
              10.17487/RFC8087, March 2017, <http://www.rfc-editor.org/
              info/rfc8087>.

   [Tor]      The Tor Project,  ., "https://www.torproject.org", June
              2017.

Appendix A.  Revision information

   -00 This is an individual draft for the IETF community

Author's Address

   Godred Fairhurst
   University of Aberdeen
   Department of Engineering
   Fraser Noble Building
   Aberdeen, AB24 3UE
   Scotland
   
   Email: gorry@erg.abdn.ac.uk
   URI:   http://www.erg.abdn.ac.uk/








Fairhurst              Expires November 28, 2017               [Page 29]
