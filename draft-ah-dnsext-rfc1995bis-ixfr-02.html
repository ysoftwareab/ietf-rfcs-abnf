<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>DNS Incremental Zone Transfer Protocol (IXFR) </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Overview">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Definition of Terms and Requirements Language">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Scope">
<link href="#rfc.section.2" rel="Chapter" title="2 Principles of IXFR Protocol Operation">
<link href="#rfc.section.3" rel="Chapter" title="3 IXFR Messages">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 IXFR Query">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Header Values">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Question Section">
<link href="#rfc.section.3.1.3" rel="Chapter" title="3.1.3 Answer Section">
<link href="#rfc.section.3.1.4" rel="Chapter" title="3.1.4 Authority Section">
<link href="#rfc.section.3.1.5" rel="Chapter" title="3.1.5 Additional Section">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 IXFR Response">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 Header Values">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 Question Section">
<link href="#rfc.section.3.2.3" rel="Chapter" title="3.2.3 Answer Section">
<link href="#rfc.section.3.2.4" rel="Chapter" title="3.2.4 Authority Section">
<link href="#rfc.section.3.2.5" rel="Chapter" title="3.2.5 Additional Section">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Connection Aborts">
<link href="#rfc.section.4" rel="Chapter" title="4 Response Contents">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Incremental Responses">
<link href="#rfc.section.5" rel="Chapter" title="5 Transport">
<link href="#rfc.section.6" rel="Chapter" title="6 Server Behavior">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 General">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Purging Strategy">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Optional Condensation of Zone Changes">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Authorization">
<link href="#rfc.section.7" rel="Chapter" title="7 Client Behavior">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Zone Integrity">
<link href="#rfc.section.8" rel="Chapter" title="8 Backwards Compatibility">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 IANA Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Motivation for IXFR-ONLY">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The standard means within the Domain Name System protocol for maintaining coherence among a zone's authoritative name servers consists of three mechanisms.  Incremental Zone Transfer (IXFR) is one of the mechanisms and originally was defined in RFC 1995.  " />
  <meta name="description" content="The standard means within the Domain Name System protocol for maintaining coherence among a zone's authoritative name servers consists of three mechanisms.  Incremental Zone Transfer (IXFR) is one of the mechanisms and originally was defined in RFC 1995.  " />
  <meta name="keywords" content="DNS, Domain Name Ssystem, incremental zone transfer, zone synchronization" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">DNSext Working Group</td>
<td class="right">A. Hoenes</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">TR-Sys</td>
</tr>
<tr>
<td class="left">Obsoletes: 1995 (if approved)</td>
<td class="right">O.S. Sury</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">CZ.NIC</td>
</tr>
<tr>
<td class="left">Expires: October 29, 2011</td>
<td class="right">April 27, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">DNS Incremental Zone Transfer Protocol (IXFR) <br />
  <span class="filename">draft-ah-dnsext-rfc1995bis-ixfr-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The standard means within the Domain Name System protocol for maintaining coherence among a zone's authoritative name servers consists of three mechanisms.  Incremental Zone Transfer (IXFR) is one of the mechanisms and originally was defined in RFC 1995.  </p>
<p>This document aims to provide a more detailed and up-to-date specification of the IXFR mechanism and to align it with the current specification of the primary zone transfer mechanism, AXFR, given in RFC 5936.  Further, based on operational experience, this document juxtaposes to the original IXFR query a new query type, IXFR-ONLY, that will likely be preferred over IXFR in specific deployments.  </p>
<p>This document obsoletes and replaces RFC 1995.  </p>
<h1><a>Discussion</a></h1>
<p>This draft targets adoption by the DNSEXT working group.  Comments should be sent to the authors and/or the namedroppers mailing list.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 29, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Overview</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Definition of Terms and Requirements Language</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Scope</a>
</li>
<li>2.   <a href="#rfc.section.2">Principles of IXFR Protocol Operation</a>
</li>
<li>3.   <a href="#rfc.section.3">IXFR Messages</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">IXFR Query</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">Header Values</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Question Section</a>
</li>
<li>3.1.3.   <a href="#rfc.section.3.1.3">Answer Section</a>
</li>
<li>3.1.4.   <a href="#rfc.section.3.1.4">Authority Section</a>
</li>
<li>3.1.5.   <a href="#rfc.section.3.1.5">Additional Section</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">IXFR Response</a>
</li>
<li>3.2.1.   <a href="#rfc.section.3.2.1">Header Values</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">Question Section</a>
</li>
<li>3.2.3.   <a href="#rfc.section.3.2.3">Answer Section</a>
</li>
<li>3.2.4.   <a href="#rfc.section.3.2.4">Authority Section</a>
</li>
<li>3.2.5.   <a href="#rfc.section.3.2.5">Additional Section</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Connection Aborts</a>
</li>
<li>4.   <a href="#rfc.section.4">Response Contents</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Incremental Responses</a>
</li>
<li>5.   <a href="#rfc.section.5">Transport</a>
</li>
<li>6.   <a href="#rfc.section.6">Server Behavior</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">General</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Purging Strategy</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Optional Condensation of Zone Changes</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Authorization</a>
</li>
<li>7.   <a href="#rfc.section.7">Client Behavior</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Zone Integrity</a>
</li>
<li>8.   <a href="#rfc.section.8">Backwards Compatibility</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">IANA Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Motivation for IXFR-ONLY</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#overview" id="overview">Overview</a>
</h1>
<p id="rfc.section.1.1.p.1">The Domain Name System standard facilities for maintaining coherent servers for a zone consist of three elements.  Authoritative Transfer (AXFR) originally was defined in STD 13: "Domain Names - Concepts and Facilities" <a href="#RFC1034">[RFC1034]</a> (referred to in this document as RFC 1034) and "Domain Names - Implementation and Specification" <a href="#RFC1035">[RFC1035]</a> (henceforth RFC 1035), and is now precisely specified in "DNS Zone Transfer Protocol (AXFR)" <a href="#RFC5936">[RFC5936]</a> (henceforth RFC 5936).  Incremental Transfer (IXFR) was originally defined in "Incremental Zone Transfer in DNS" <a href="#RFC1995">[RFC1995]</a>.  A mechanism for prompt notification of zone changes (NOTIFY) is defined in "A Mechanism for Prompt Notification of Zone Changes (DNS NOTIFY)" <a href="#RFC1996">[RFC1996]</a>.  The goal of these mechanisms is to enable a set of DNS name servers to remain coherently authoritative for a given zone.  </p>
<p id="rfc.section.1.1.p.2">For large domains that incur frequent changes that need to be available quickly to prospective DNS clients, AXFR has proven less suitable because it always transfers the whole zone content.  The latency incurred in the propagation of changes to the DNS database (<a href="#RFC1034">[RFC1034]</a>, <a href="#RFC1035">[RFC1035]</a>) can be substantially reduced in such scenarios by actively notifying secondary servers of the availability of a new version of the authoritative zone data at the primary server for a zone; this is accomplished by the DNS NOTIFY mechanism <a href="#RFC1996">[RFC1996]</a>.  The time and resources needed to accomplish the transfer of the new zone content to the secondary servers in many cases can be reduced substantially by only carrying forward the changes from a previous version of the zone data.  This is accomplished by the IXFR mechanism originally specified in <a href="#RFC1996">RFC&#160;1996</a> <cite title="NONE">[RFC1996]</cite> and, more precisely, in this document.  </p>
<p id="rfc.section.1.1.p.3">The original IXFR automatically falls back to AXFR behavior whenever the IXFR server cannot fulfill the given delta-update request.  In some deployments, in particular where multiple IXFR servers are available to the IXFR client, this can lead to premature fallback to AXFR whenever the chosen IXFR server does not have the wanted delta-update information available, but another possible IXFR server would, which incurs the additional overhead that the client wanted to avoid whenever possible by his initial choice to use IXFR.  This gap is closed by a variant of the IXFR mechanism, dubbed "IXFR-ONLY", which originally has been proposed in "IXFR-ONLY to Prevent IXFR Fallback to AXFR" <a href="#I-D.kerr-ixfr-only">[I-D.kerr-ixfr-only]</a> and which is fully specified below as well.  </p>
<p id="rfc.section.1.1.p.4">Thus, this document re-specifies the IXFR mechanism as it is deployed in the Internet at large, giving more details than in the original specification, and using RFC 5936 as its foundation.  Additionally, it newly specifies a versatile variant of IXFR, IXFR-ONLY.  </p>
<p id="rfc.section.1.1.p.5">This document is organized as follows: After presenting the terminology used and elaborations on the scope of this protocol and its specification in the next subsections, <a href="#Principles">Section 2</a> gives an overview on the principles of operation of the IXFR protocol.  <a href="#Messages">Section 3</a> normatively specifies the IXFR query and response message format and the basic rules governing their generation and processing.  Subsequent sections detail mandatory and optional server behavior, and they supply management, security, and IANA considerations.  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#terms" id="terms">Definition of Terms and Requirements Language</a>
</h1>
<p id="rfc.section.1.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">"Key words for use in RFCs to Indicate Requirement Levels", BCP 14 </a> <cite title="NONE">[RFC2119]</cite>.  </p>
<p id="rfc.section.1.2.p.2">The terms "AXFR server", "AXFR client", "AXFR session", "General-purpose DNS implementation" and "Turnkey DNS implementation" are used as defined in Section 1.1 of <a href="#RFC5936">RFC&#160;5936</a> <cite title="NONE">[RFC5936]</cite>.  </p>
<p id="rfc.section.1.2.p.3">The bare term "IXFR" is intended to refer to the generic case of an IXFR or IXFR-ONLY query/response, unless it is clear from the context that the original IXFR is dealt with specifically.  </p>
<p id="rfc.section.1.2.p.4">An "IXFR client" is a (secondary) name server for a given DNS zone that, based on a trigger event, for instance a DNS NOTIFY message, issues an IXFR query to a "superordinate" authoritative server (e.g., the primary server of the zone) and receives the IXFR response from it.  </p>
<p id="rfc.section.1.2.p.5">An "IXFR server" is an authoritative server that is presumed to become aware of changes to a zone earlier than other authoritiative servers, for instance the primary server for a zone as specified in STD 13 or a secondary server that already has synchronized with the primary server, and that is configured to respond to IXFR queries.  </p>
<p id="rfc.section.1.2.p.6">The interaction and protocol exchange(s) performed by an IXFR client and an IXFR server to issue an IXFR query and accomplish its processing are collectively denoted as an "IXFR session".  </p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> <a href="#scope" id="scope">Scope</a>
</h1>
<p id="rfc.section.1.3.p.1">In general terms, authoritative name servers for a given zone can use various means to achieve coherency of the zone contents they serve.  For example, there are DNS implementations that assemble answers from data stored in relational databases (as opposed to master files), relying on the database's non-DNS means to synchronize the database instances.  Some of these non-DNS solutions interoperate in some fashion.  However, AXFR, IXFR, and NOTIFY are the only protocol- defined in-band mechanisms to provide coherence of a set of name servers, and they are the only mechanisms specified by the IETF.  </p>
<p id="rfc.section.1.3.p.2">This document does not cover incoherent DNS situations.  There are applications of the DNS in which servers for a zone are designed to be incoherent.  For these configurations, a coherency mechanism as described here would be unsuitable.  </p>
<p id="rfc.section.1.3.p.3">IXFR is an optional protocol component for authoritiative DNS servers; it is not needed on DNS resolver software that does not support the functions of an authoritative DNS server.  Thus, all usage of normative <a href="#RFC2119">BCP 14 </a> <cite title="NONE">[RFC2119]</cite> language is applicable only to DNS server implementations that claim support of this specification.  </p>
<p id="rfc.section.1.3.p.4">Whereas the original IXFR already is widely implemented, IXFR-ONLY offers an operational choice for administrators of zones with a non-trivial propagation graph for the authoritative zone data, who are looking for more options to fine-tune the synchronization efficiency of their authoritative servers.  It could be implemented without bare IXFR, but for the sake of backwards compatibility and flexibility, and for simplicity in documentation, we strongly recommend that IXFR-ONLY be always implemented in concert with bare IXFR.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#Principles" id="Principles">Principles of IXFR Protocol Operation</a>
</h1>
<p id="rfc.section.2.p.1">Each version of the authoritative date of a DNS zone is identified by the SOA serial number (cf. Section 3.3.13 of <a href="#RFC1035">[RFC1035]</a>); succesive versions are tagged with monotonically increasing serial numbers.  Below, serial numbers are symbolically referred to by "sn" with some distinguishing postfix.  </p>
<p id="rfc.section.2.p.2">When an IXFR client currently serving, say, sn_o of a particular zone receives a trigger that it should incrementally update the zone data, it sends one of the two flavors of an IXFR request to an IXFR server, with the expectation to obtain in the IXFR response the change information necessary to transform the sn_o zone data into the zone data of the current zone version, say, sn_n.  </p>
<p id="rfc.section.2.p.3">The details of which triggers can and will start such IXFR session are implementation dependent.  Possible triggers are some time schedule or a management request, but most likely the IXFR query will be triggered by a DNS NOTIFY message received from an authoritative server of higher precedence in the propagation graph for the zone.  </p>
<p id="rfc.section.2.p.4">Possible IXFR servers are usually configured (per zone) on an IXFR client, amended with some indication of precedence.  Similarly, IXFR servers are configured (per zone) with the identities of the secondary servers they should accept as IXFR clients.  This way, some authoritative servers for a given zone may act both as an IXFR client and an IXFR server.  Among all authoritative servers for a zone, at least one server (the primary server of the zone) is not acting as an IXFR client.  This way, the {IXFR server, IXFR client} pairs form a binary relation on the set of these servers that defines a directed graph rooted at the primary server(s); this is the IXFR propagation graph for the zone.  </p>
<p></p>

<ul class="empty"><li>Note that, for the purpose of IXFR, it is possible that more than one server can be acting as a primary server; this requires that zone synchronization between these servers is accomplished by other mechanisms, e.g., AXFR, or non-DNS means like distributed database technology.  </li></ul>

<p> </p>
<p id="rfc.section.2.p.6">The most simple propagation graph is a star (hub and spokes) configuration, with the primary server as the central hub.  For redundancy, important zones with many authoritative servers are likely to be configured with a more dense propagation graph that, for the sake of resilience and/or load sharing, gives IXFR clients a choice of multiple IXFR servers to contact.  All these configuration details are a strictly local matter and do not affect interoperability; hence, these details are out of scope for this specification.  The only property of the propagation graph that needs to be ensured by the zone administration is that each secondary (i.e., non-primary) server must be reachable by at least one path in this graph that originates in a primary server.  </p>
<p id="rfc.section.2.p.7">In order to be able to act as a useful IXFR server, a DNS server needs to keep track of the zone history, to a certain extent (as directed by local policy, as well).  To this end, the server must maintain knowledge of the changes that have been applied successively to the zone content from one SOA serial up to the current version.  This does not necessarily mean that each change needs to be recorded, however; if some parts of the zone content change frequently, it might be preferable to coalesce subsequent chunks of change information -- both for local storage and/or for transmission --, for instance instead of the change information from sn_1 to sn_2 and the change information from sn_2 to sn_3  (where sn_1 &lt; sn_2 &lt; sn_3), the change information from sn_1 to sn_3 can be provided.  This condensation of data has some downsides, however: if an IXFR client serves sn_2 and asks an IXFR server for the delta information to the current version of the zone, but the server has performed the above condensation, it has no way to tell the necessary information to the IXFR client, and the IXFR request necessarily is doomed to fail.  Therefore, is becomes apparent that an IXFR server must maintain seemless chains of change information chunks from all past SOA serial number values it wants/needs to support (because potential IXFR clients currently serve these zone versions) to the current zone version.  See <a href="#Servers3">Section 6.3</a> for more details on Condensation.  </p>
<p id="rfc.section.2.p.8">Upon receipt of any IXFR query, the IXFR server conceptionally constructs a chain of change information chunks from the SOA serial number indicated by the client (sn_o) to the current zone version (sn_n).  </p>
<p id="rfc.section.2.p.9">If this is not possible, in the case of bare IXFR, the server falls back to AXFR, i.e. it provides the full zone content.  In the case of an IXFR-ONLY query, however, an error response is returned immediately to the IXFR client, thus giving it a chance to try with an alternate IXFR server that might (still) serve the client's sn_o and not to immediately incur the potential overhead of a full zone transfer.  </p>
<p id="rfc.section.2.p.10">In case it turns out that the IXFR client already has the current zone version (sn_o = sn_n), the IXFR server does not reply with an empty chain of chunks, but with the (current) SOA record of the zone.  </p>
<p id="rfc.section.2.p.11">If the IXFR server determines that it would be inefficient to transfer the series of chunks, it also may fall back to full zone transfer.  Note that this is recommended behavior for the IXFR server, but the correct protocol operation does not depend on this (useful) optimization.  </p>
<p id="rfc.section.2.p.12">Ordinarily, in the generic case, the IXFR server transmits the change information chunks in their "natural" order (by ascending sn) to the IXFR client.  </p>
<p id="rfc.section.2.p.13">Each such change information chunk -- say from sn_a to sn_b -- is represented (conceptionally and on the wire) by a sequence of RR deletions and a sequence of subsequent RR additions, all of which need to be applied in order to transform the zone content at sn_a to the zone content at sn_b.  For transfer in the IXFR response, each sequence starts with the corresponding SOA RR as its delimiter, and the other RRs within it can be given in arbitrary order.  </p>
<p id="rfc.section.2.p.14">The whole chain of change information chunks is embedded in a pair of copies of the new SOA RR (at sn_n) that serve as "sentinels".  It is important to point out that SOA RR is used only as a marker in this context and can appear multiple times, as opposed to RRSIG(SOA) RR which is treated as a common record and needs to appear only once in the zone.  That also means that RRSIG(SOA) RR for sn_o has to be deleted and RRSIG(SOA) RR for sn_n has to be added.  In other words RRSIG(SOA) doesn't get any special treatment in the context of IXFR and SOA RRs used as "sentinels".  </p>
<p id="rfc.section.2.p.15">For example, if the IXFR server wants to transmit the changes from sn_o to sn_n in three chunks, based on two intermediary zone versions at sn_1 and sn_2 (where sn_o &lt; sn_1 &lt; sn_2 &lt; sn_n), i.e., the chunk with the change information from sn_o to sn_1, the chunk from sn_1 to sn_2, and the chunk from sn_2 to sn_n, it would deliver in the IXFR response packet(s) the following resource records (RRs), in order: <br><br> In contrast, in the case of fallback to AXFR, the IXFR response would convey, in order: </p>

<ul class="empty"><li>
<ul>
<li>SOA for sn_n &#160;&#160; # outer bracket</li>
<li>SOA for sn_o &#160;&#160; # start of first chunk</li>
<li>{other RRs to be deleted from the zone at sn_o}</li>
<li>SOA for sn_1</li>
<li>{other RRs to be added for getting the zone at sn_1}</li>
<li>SOA for sn_1 &#160;&#160; # start of second chunk</li>
<li>{other RRs to be deleted from the zone at sn_1}</li>
<li>SOA for sn_2</li>
<li>{other RRs to be added for getting the zone at sn_2}</li>
<li>SOA for sn_2 &#160;&#160; # start of third chunk</li>
<li>{other RRs to be deleted from the zone at sn_2}</li>
<li>SOA for sn_n</li>
<li>{other RRs to be added for getting the zone at sn_n}</li>
<li>SOA for sn_n &#160;&#160; # outer bracket</li>
</ul>
<p> </p>
</li></ul>

<p> </p>

<ul class="empty"><li>
<ul>
<li>SOA for sn_n &#160;&#160; # first instance</li>
<li>{DNSSEC signature RRs for the SOA, if any}</li>
<li>{other RRsets of the zone at sn_n, in arbitrary order}</li>
<li>SOA for sn_n &#160;&#160; # repeated as trailing delimiter</li>
</ul>
<p> </p>
</li></ul>

<p> </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#Messages" id="Messages">IXFR Messages</a>
</h1>
<p id="rfc.section.3.p.1">This section specifies the format of IXFR messages and the basic message generation and processing rules.  </p>
<p id="rfc.section.3.p.2">An IXFR session is started with an IXFR query message sent from an IXFR client to an IXFR server, which solicits one or more response messages in return.  </p>
<p id="rfc.section.3.p.3">All these messages adhere to the basic DNS message format as specified in <a href="#RFC1035">RFC 1035 </a> <cite title="NONE">[RFC1035]</cite> and later amended in various ways, for which Section 2 of RFC 5936 gives an expanded bibliography.  Implementers should be aware of the considerations in "Measures for Making DNS More Resilient against Forged Answers" <a href="#RFC5452">[RFC5452]</a> and follow the recommendations given there.  </p>
<div id="#rfc.figure.1"></div>
<pre>
     0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
   |                      ID                       |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
   |QR|   OpCode  |AA|TC|RD|RA| Z|AD|CD|   RCODE   |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
   |                QDCOUNT/ZOCOUNT                |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
   |                ANCOUNT/PRCOUNT                |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
   |                NSCOUNT/UPCOUNT                |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
   |                    ARCOUNT                    |
   +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
      </pre>
<p id="rfc.section.3.p.4">For convenience of the reader, the synopsis of the DNS message header from <a href="#RFC5395">RFC 5395 </a> <cite title="NONE">[RFC5395]</cite> (and the IANA registry for DNS Parameters <a href="#DNSVALS">[DNSVALS]</a>) is reproduced here informally: </p>
<p id="rfc.section.3.p.5">An IXFR session can be carried out over UDP (with tight restrictions -- see below) and over TCP.  Thus, the DNS message size limit from RFC 1035 for DNS over UDP (and its extension specified in <a href="#RFC2671">RFC 2671, "Extension Mechanisms for DNS (EDNS0)" </a> <cite title="NONE">[RFC2671]</cite>) apply in the former case.  BCP 145, "Unicast UDP Usage Guidelines for Application Designers" <a href="#RFC5405">[RFC5405]</a> contains valuable considerations regarding IP level fragmentation of UDP messages, and <a href="#I-D.ietf-opsec-ip-security">"Security Assessment of the Internet Protocol version 4" </a> <cite title="NONE">[I-D.ietf-opsec-ip-security]</cite> contains a detailed security assessment of IPv4 segmentation and reassembly; both documents should be considered by implementers when deciding on the maximum size of DNS response messages over UPD supported by an IXFR server implementation.  The upper limit on the permissible size of a DNS message over TCP is only restricted by the TCP framing defined in Section 4.2.2 of RFC 1035, which specifies a two-octet message length field, understood to be unsigned, and thus causing a limit of 65535 octets.  This limit is not changed by EDNS0, and it applies to IXFR over TCP.  </p>
<p></p>

<ul class="empty"><li>Note that unlike with all common DNS responses, but like AXFR, the IXFR protocol makes no use of the TC (truncation) bit.  To signal that an IXFR session needs to be retried over TCP, an IXFR server sends a response that only contains its current version of the SOA RR for the zone.  </li></ul>

<p> </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#IXquery" id="IXquery">IXFR Query</a>
</h1>
<p id="rfc.section.3.1.p.1">An IXFR query is sent by a client whenever it wants to obtain the delta information needed to update the content of a zone it is aware of (as identified by its SOA serial number) to the most recent version.  The predominant trigger for this is the receipt of a DNS NOTIFY message <a href="#RFC1996">[RFC1996]</a>, but it also can be triggered by other mechanisms or events, for instance as a result of a command line request, say for debugging.  The details for these triggers are implemenation dependent and out of scope for this specification.  </p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> Header Values</h1>
<div id="#rfc.figure.2"></div>
<pre>
   NSCOUNT     Number of entries in Authority section;  MUST be 1
          </pre>
<p id="rfc.section.3.1.1.p.1">The specification for AXFR query messages in Section 2.1.1 of RFC 5936 applies likewise for IXFR queries, with a single exception: </p>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> Question Section</h1>
<div id="#rfc.figure.3"></div>
<pre>
   QNAME       the name of the zone requested

   QTYPE       one of the two pseudo-RR types for incremental zone
               transfer: IXFR (= 251) or IXFR-ONLY (= {TBD1})
               [DNSVALS]

   QCLASS      the class of the zone requested [DNSVALS]
          </pre>
<p id="rfc.section.3.1.2.p.1">The Question section of an IXFR query MUST conform to Section 4.1.2 of RFC 1035, and it MUST contain (matching QDCOUNT=1 in the DNS message header) a single resource record with the following values: <a href="#IXresponse">Section 3.2</a>.  </p>
<h1 id="rfc.section.3.1.3">
<a href="#rfc.section.3.1.3">3.1.3.</a> Answer Section</h1>
<p id="rfc.section.3.1.3.p.1">The Answer section MUST be empty, as indicated by ANCOUNT=0 in the DNS message header.  </p>
<h1 id="rfc.section.3.1.4">
<a href="#rfc.section.3.1.4">3.1.4.</a> Authority Section</h1>
<p id="rfc.section.3.1.4.p.1">Corresponding to NSCOUNT=1 in the DNS message header, the Authority section MUST contain a single DNS resource record, the SOA record of the client's version of the zone content, identified by its serial number (denoted as sn_o in this document).  </p>
<h1 id="rfc.section.3.1.5">
<a href="#rfc.section.3.1.5">3.1.5.</a> <a href="#Q-addl" id="Q-addl">Additional Section</a>
</h1>
<p id="rfc.section.3.1.5.p.1">Currently, two kinds of resource records are defined that can appear in the Additional section of IXFR queries and responses: EDNS and DNS transaction security.  Future specifications defining RRs that can be carried in the Additional section of normal DNS transactions need to explicitly describe their use with IXFR, should that be desired.  </p>
<p id="rfc.section.3.1.5.p.2">All considerations from Section 2.1.5 of RFC 5936 apply in the same manner for IXFR as they do for AXFR.  </p>
<p id="rfc.section.3.1.5.p.3">In order to support extended RCODE for CannotIXFR, the IXFR-ONLY requires EDNS0 support (<a href="#RFC2671">RFC 2671</a> <cite title="NONE">[RFC2671]</cite>).  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#IXresponse" id="IXresponse">IXFR Response</a>
</h1>
<p id="rfc.section.3.2.p.1">An IXFR server that has received an IXFR query responds to it with an IXFR response addressed to the transport source identifier from which the query has been received, in particular using the same transport protocol.  </p>
<p id="rfc.section.3.2.p.2">An IXFR response consists of one or more response messages.  If the IXFR query has been received over a connectionless transport (currently: UDP), the IXFR response MUST consist of a single message.  If it is not possible to send the complete response in a single DNS message, a response only containing the currrent SOA RR at the server is sent, whose serial sn_n being different from sn_o is the signal to the IXFR client to retry over connection-oriented transport (currently: TCP).  </p>
<p id="rfc.section.3.2.p.3">The conceptional "answer" carried in a multi-message response is the concatenation of the content of the Answer sections in these response messages, in the order they are sent; this is unambiguous from the point of view of the IXFR client as well since the applicable connection-oriented transport preserves the order of messages sent.  </p>
<p id="rfc.section.3.2.p.4">If the server detects an error condition that makes it impossible to fulfill the request, it immediately sends an error response, that is a response message with non-zero RCODE.  In case of connectionless transport (UDP), this is the single response message sent.  In case of connection-oriented transport (TCP), the error condition might occur after one of more response messages already have been sent; in this case the error message is sent as soon as need arises, and it will abort the ongoing IXFR session; i.e., the error message is the last response message sent by the server.  The special case of a server closing the TCP connection without sending an IXFR response message is covered in <a href="#ConnAbort">Section 3.3</a>.  </p>
<p id="rfc.section.3.2.p.5">If an IXFR server is not able or willing to send the incremental zone change information to transform the client's version (sn_o) to its newer version (sn_n), the server SHOULD, in the case of QTYPE=IXFR, fall back to AXFR (see below). In the case of QTYPE=IXFR-ONLY, it MUST respond with an appropriate error, e.g., CannotIXFR (see below).  </p>
<p id="rfc.section.3.2.p.6">Any non-error IXFR response starts with the server's version of the SOA resource record, sn_n.  <br> If the server detects that the client's version is current (sn_n = sn_o), or if the server detects that the entire response to an IXFR query received over connectionless transport (UDP) cannot be placed into a single response message, this SOA record is the only answer RR sent to the client.  Otherwise, the subsequent answer RRs sent form a sequence of one or more change information chunks as described below in <a href="#RspCont">Section 4</a>, and the final "sentinel" RR sent is another copy of the current SOA RR.  <br> In case of fallback to AXFR, the answer contains the same RRs (and is subject to the same ordering rules) as specified in Sections 2.2 through 3 of RFC 5936, with the single difference being the echoed QCODE (i.e., IXFR) in the Question section.  </p>
<p id="rfc.section.3.2.p.7">[[ Move part of the above material to <a href="#RspCont">Section 4</a> ?? ]] </p>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> Header Values</h1>
<p id="rfc.section.3.2.1.p.1">The specification for AXFR in Section 2.2.1 of RFC 5936 applies likewise for IXFR queries, where in the case of IXFR the "new" behavior from RFC 5936 is always followed, i.e. the query ID from the IXFR query MUST be echoed in all IXFR response messages.  </p>
<p id="rfc.section.3.2.1.p.2">The only additonal rule to be followed applies to the deliberations on the RCODE field in Note e) of Section 2.2.1 in RFC 5936: If the IXFR server is not able to fulfill an IXFR-ONLY request, is SHOULD respond with the (extended?) RCODE CannotIXFR assigned on behalf of this document (see <a href="#IANA">Section 10</a>).  </p>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> Question Section</h1>
<p id="rfc.section.3.2.2.p.1">In the first response message, the IXFR server MUST copy this section literally from the corresponding IXFR query message.  For subsequent response messages, it MAY do the same or leave the Question section empty.  However, if the last response message sent is an error message (RCODE unequal to 0), the query MUST also be copied.  Accordingly, QDCOUNT in the DNS message header is set to either 1 (query copied) or 0 (otherwise).  </p>
<p id="rfc.section.3.2.2.p.2">When it is present, the content of this section MAY be used to determine the context of the message, that is, the name of the zone being transferred.  The recipent (IXFR client) SHOULD apply the response verification rules from <a href="#RFC5452">RFC 5452 </a> <cite title="NONE">[RFC5452]</cite>.  </p>
<h1 id="rfc.section.3.2.3">
<a href="#rfc.section.3.2.3">3.2.3.</a> Answer Section</h1>
<p id="rfc.section.3.2.3.p.1">The Answer section MUST be populated with the zone change information or, in the case of fallback to AXFR, the full zone contents.  </p>
<p id="rfc.section.3.2.3.p.2">For multi-message IXFR responses, the conceptional answer is split into segments that are sent in order.  Each segment is comprised of an integer number of full RRs, and for transport efficiency, the response messages should be filled up with answer RRs as much as possible for the response message size chosen by the IXFR server, taking into account the space needed for the other sections in the messages.  </p>
<p id="rfc.section.3.2.3.p.3">See <a href="#RspCont">Section 4</a> below for the normative details of the resource record ordering requirements.  </p>
<h1 id="rfc.section.3.2.4">
<a href="#rfc.section.3.2.4">3.2.4.</a> Authority Section</h1>
<p id="rfc.section.3.2.4.p.1">Corresponding to NSCOUNT=0 in the DNS message header, the Authority section in IXFR response messages MUST be empty.  </p>
<h1 id="rfc.section.3.2.5">
<a href="#rfc.section.3.2.5">3.2.5.</a> Additional Section</h1>
<p id="rfc.section.3.2.5.p.1">All considerations from Section 2.2.5 (and hence, by reference, also Section 2.1.5) of RFC 5936 apply in the same manner for IXFR as they do for AXFR.  See also <a href="#Q-addl">Section 3.1.5</a> of this document.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#ConnAbort" id="ConnAbort">Connection Aborts</a>
</h1>
<p id="rfc.section.3.3.p.1">In case of an IXFR session carried over connection-oriented transport (TCP), the considerations in Section 2.3 of <a href="#RFC5936">RFC 5936 </a> <cite title="NONE">[RFC5936]</cite> apply similarly.  <br> In a nutshell: Servers SHOULD avoid dropping active connections whenever possible, and clients nevertheless must be prepared to gracefully deal with such aborts.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#RspCont" id="RspCont">Response Contents</a>
</h1>
<p id="rfc.section.4.p.1">This section describes the structure of the sequence of resource records (RRs) sent in IXFR reponses and how the IXFR client can distinguish the various cases covered.  </p>
<p id="rfc.section.4.p.2">If the IXFR server discovers an error condition before it sends the first (or only) response message, the response content in the Answer section is empty, and consequentially, ANCOUNT is set to 0 in that message.  </p>
<p></p>

<ol style="list-style-type: lower-alpha">
<li>The server serial (sn_n) is the same as the client serial (sn_o) sent in the Authority section of the IXFR query.  In this case, this SOA RR is the only RR in the response message, indicating to the IXFR client that it already has the current zone content.  </li>
<li>The server serial (sn_n) differs from the client serial (sn_o) sent in the Authority section of the IXFR query, and this SOA RR is the only RR in the response message.  This  indicates to the IXFR client that its zone content is outdated and the IXFR server is willing to send the incremental zone change information, but is unable to do so in a single response message due to message size limitations.  <br><br> An IXFR server MUST NOT send this type of IXFR response over connection-oriented transport (TCP), but it MAY use this type of response over connectionless transport (UDP).  <br><br> An IXFR client that receives over connection-oriented transport an IXFR response message (as the first response message related to its IXFR query) that contains only a single SOA RR with sn_n unequal to sn_o MUST discard the response message (see below).  <br><br> Note again that the "truncated response message" mechanism specified in RFC 1035, which is signalled by setting the TC bit in a response message, MUST NOT be used in an IXFR response.  An IXFR client that receives an IXFR response message with the TC bit set MUST discard the message (see below for details).  </li>
<li>The server serial (sn_n) differs from the client serial (sn_o) sent in the Authority section of the IXFR query, and this SOA RR is followed by another SOA RR in the same response message.  In this case, the IXFR response is an incremental response.  <br><br> If this second SOA RR also carries sn_n, the IXFR client SHOULD assume that the server exposes behavior arguably not explicitly forbidden in RFC 1995 to signal case a) above; an IXFR client SHOULD accept for resiliency an IXFR response with exactly these two copies of the same SOA RR sent in a single response message as an "empty incremental response" indicating that the client's version of the zone is current.  Otherwise, the client MUST discard a response starting with two copies of the sn_n SOA RR.  <br><br> Otherwise, if the second SOA RR carries sn_o, this indicates the start of an ordinary incremental response as detailed below.  <br><br> Otherwise (if the second SOA RR carries sn_x that differs from both sn_o (as sent by the client) and sn_n (in the first SOA RR), the client MUST discard the response message as bogus.  </li>
<li>The server serial (sn_n) is not the same as the client serial (sn_o) sent in the Authority section of the IXFR query, and this SOA RR is followed by another, non-SOA RR in the same response message.  <br><br> This indicates a non-incremental response, "fallback to AXFR".  In this case, the response content is structured like an AXFR response, as described in RFC 5936 ("new" behavior, no backward compatibility kludges admitted); it contains the entire zone content -- preferably with whole RRsets grouped together -- and ends with a second copy of the sn_n SOA RR as an end-of-response marker.  <br><br> A non-incremental IXFR response MUST NOT be sent in response to an IXFR-ONLY query.  AN IXFR client that receives an (initial) response message that indicates such non-incremental response to an IXFR-ONLY query MUST discard the message as bogus.  </li>
</ol>

<p> </p>
<p id="rfc.section.4.p.4">Whenever in the above cases the text says that the IXFR client "MUST discard the message", the following behavior is implied: The IXFR client MUST regard the IXFR session as terminated; this results in subsequent silent discarding of further response messages that still pretend to belong to the same IXFR session by means of the query ID and the echoed Question, if present, because the IXFR client does not maintain corresponding IXFR query/session state any more.  The IXFR client MAY log the event and SHOULD regard the IXFR server as broken; hence, it SHOULD refrain from using the same IXFR server again -- at least for considerable time, or until the usage has been reinstated by an implementation-dependent management interaction.  </p>
<p id="rfc.section.4.p.5">From the above decision tree for the client it also follows that, to allow unambiguous client behavior, if an IXFR server has to send a response comprised of two or more RRs, it MUST send at least the first two RRs in the first response message.  </p>
<p id="rfc.section.4.p.6">If the IXFR server discovers an error condition lately, after having sent one or more response messages (all with RCODE set to 0), it can abort the IXFR session by sending another response message with empty Answer section and a non-zero RCODE.  This MUST be the last message sent in response to the IXFR query, that is, this error message aborts the ongoing IXFR session.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Incremental Responses</h1>
<p id="rfc.section.4.1.p.1">In an incremental response, the leading sn_n SOA RR is followed by one or more change information chunks and concluded by a second copy of the sn_n SOA RR.  </p>
<p id="rfc.section.4.1.p.2">Each change information chunk describes the changes to be performed on a given "origin" version of the zone to obtain a "target" version of the zone (i.e., one SOA serial change of the zone).  It consists of (1) a set of old RRs to be deleted from the "origin" zone version and (2) a set of new RRs to be added after these deletions to obtain the "target" version of the zone.  (In this model, a change in a single RR is represented by an RR deletion followed by an RR addition.)  These two sets are sent in this order, with each set serialized as a sequence of the related SOA RR followed by other, non-SOA RRs in a arbitrary order.  This way, each SOA RR indicates the end of the sequence of (zero or more) non-SOA RRs that precedes it, and at the same time it either starts the next set of RRs or is the trailing sn_n SOA of the response.  </p>
<p id="rfc.section.4.1.p.3">The "origin" sn of each change information chunk MUST precede its "target" sn in the sense of sequence number arithmentics.  </p>
<p id="rfc.section.4.1.p.4">The change information chunks in an incremental response MUST be ordered oldest first, newest last; in more detail: The first change information chunk in an incremental response must have the client's version (sn_o) as its origin sn; the origin sn of each subsequent change information chunk MUST be the same as the target sn of the preceding chunk, and the last change information chunk in an incremental response MUST have the server's version (sn_n) as its target sn.  This "chaining" of chunks ensures that the client can correctly construct the sn_n version from the sn_o version it holds by conceptionally applying single-RR deletions and additions in the order the RRs appear in the IXFR response.  </p>
<p id="rfc.section.4.1.p.5">Note that, as a consequence of the aforementioned rules, a valid incremental IXFR response MUST contain exactly one copy of the sn_o SOA RR (sent as the second RR in the response) and exactly three copies of the sn_n SOA RR -- one as the first RR in the response, one as the leading RR of the second sequence (set of RRs to be added) in the last change information chunk, and one as the final "sentinel" RR that indicates the end of the response contents.  </p>
<p id="rfc.section.4.1.p.6">Any IXFR response classified as a (non-empty) incremental response by the decision tree presented above in <a href="#RspCont">Section 4</a> that violates any of the above rules MUST cause the IXFR client to regard the response as bogus; it MUST discard a response message in case its content allows the client to detect such violation, with the caveats for "discard" given in <a href="#RspCont">Section 4</a>.  </p>
<p id="rfc.section.4.1.p.7">In support of avoiding clients to draw wrong conclusions on the end of an incremental response, it is RECOMMENDED that an IXFR server not send the aforementioned second instance of the sn_n SOA RR as the last RR in a (non-final) response message.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#Transport" id="Transport">Transport</a>
</h1>
<p id="rfc.section.5.p.1">IXFR servers and IXFR clients MUST support transport over UDP and TCP (see <a href="#RFC5966">RFC 5966 </a> <cite title="NONE">[RFC5966]</cite>).  As with all DNS transactions, IXFR responses MUST be sent on the same transport association over which the query arrives at the server.  </p>
<p id="rfc.section.5.p.2">If an IXFR server cannot send a full IXFR response for an IXFR query received over UDP within a single response message over UDP due to message size limitations, it MUST return the special form of response that indicates to the client to retry over TCP (single-RR response with the server SOA only, as described in Sections <a href="#IXresponse">3.2</a> and <a href="#RspCont">4</a>).  </p>
<p id="rfc.section.5.p.3">Given the limitation of the basic DNS message size over UDP to 512 octets, it is strongly RECOMMENDED that implementations of IXFR servers and IXFR clients support <a href="#RFC2671">RFC 2671, "Extension Mechanisms for DNS (EDNS0)" </a> <cite title="NONE">[RFC2671]</cite>) and chose extended DNS message size limits appropriate for their environment.  The default behavior of IXFR clients regarding the EDNS message size, and the maximum accepted by servers, SHOULD both be configurable.  </p>
<p id="rfc.section.5.p.4">The considerations for AXFR transport over TCP in Section 4 of <a href="#RFC5936">RFC 5936 </a> <cite title="NONE">[RFC5936]</cite> apply similarly for IXFR.  However, IXFR is commonly being used much more frequently than AXFR between a given pair of authoritiative servers, and often not authorized for use by servers outside the set of authorities for a zone, which are all under the control of a single administrative domain or a small number of cooperating administrative domains.  In this environment, it might make sense for the sake of efficiency to maintain (and reuse) persistent TCP connections between the configured IXFR peers.  Therefore, implementations of IXFR should allow to configure relatively high TCP User Timeout values and support the TCP UTO mechanism (<a href="#RFC5482">[RFC5482]</a>) that allows the peers to exchange their view of the TCP User Timeout and adapt the behavior of their TCP accordingly.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Servers" id="Servers">Server Behavior</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#Servers1" id="Servers1">General</a>
</h1>
<p id="rfc.section.6.1.p.1">General considerations on IXFR server behavior, in particular response message generation and packet processing, are spread all over this document; in particular, see Sections <a href="#IXresponse">3.2</a> and <a href="#RspCont">4</a>.  </p>
<p id="rfc.section.6.1.p.2">In addition to the current zone content, IXFR servers need to maintain history information on the zone content that enables them to respond with incremental responses for a sufficient range of versions.  What is considered "sufficient" and how this history information is maintained, is a local matter.  It may be appropriate to maintain the history information on stable storage as well to make it available spanning restarts of an IXFR server, as it is already required for the current zone content.  </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#Servers2" id="Servers2">Purging Strategy</a>
</h1>
<p id="rfc.section.6.2.p.1">An IXFR server cannot be required to hold all previous versions forever and may delete them anytime. In general, there is a trade-off between the size of storage space and the possibility and need of using IXFR.  </p>
<p id="rfc.section.6.2.p.2">Information about older versions should be purged as soon as the total length of an IXFR response would otherwise become larger than that of an AXFR response.  Given that the purpose of IXFR is to reduce AXFR overhead, this strategy is quite reasonable.  The strategy assures that the amount of storage required is at most twice that of the current zone information.  </p>
<p id="rfc.section.6.2.p.3">Information older than the SOA expire period may also be purged.  </p>
<p id="rfc.section.6.2.p.4">The Condensation techniques explored below in <a href="#Servers3">Section 6.3</a> might pose an opportunity to get rid of more recent, yet less relevant history information and as such might allow to cover a larger span of SOA versions than otherwise possible within the same amount of storage.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#Servers3" id="Servers3">Optional Condensation of Zone Changes</a>
</h1>
<p id="rfc.section.6.3.p.1">An IXFR server MAY optionally condense a number of immediately succeeding change information chunks into a single chunk, thus dropping information on intermediate zone versions.  </p>
<p id="rfc.section.6.3.p.2">This may be beneficial if a lot of versions, not all of which are useful, are generated. For example, if multiple ftp servers share a single DNS name and the IP address associated with the name is changed once a minute to balance load between the ftp servers, it is not so important to keep track of all the history of changes.  </p>
<p id="rfc.section.6.3.p.3">Another example is where statefully managed client systems get IP addresses assigned dynamically by DHCP servers, and where the DHCP server(s) and/or the clients register their current contact information via DNS UPDATE whenever leases are given out or renewed.  These transactions could be comprised of several independent update steps, for forward and reverse address resolution, for service discovery, etc., where multiple parts of the related information are maintained in the same zone.  Intelligent condensation strategies might be able to identify subsequent incremental changes related to a single end-user system and collapse this information in a single change information chunk.  </p>
<p id="rfc.section.6.3.p.4">But this feature may not be so useful if an IXFR client has access to two IXFR servers, A and B, with inconsistent condensation results.  The current version of the IXFR client, received from server A, may be unknown to server B. In such a case, server B cannot provide incremental data from the unknown version and a full zone transfer is necessary.  Therefore, it is highly desirable that alternative IXFR servers for a given set of IXFR clients expose similar (or at best, the same) condensation behavior.  </p>
<p id="rfc.section.6.3.p.5">Condensation can be performed in two stages, perhaps in a complementary manner:  Firstly, the history information stored on an IXFR server can be condensed to reduce storage requirements *and* IXFR response sizes to some degree. Additionally, IXFR servers can perform condensation "on the fly" in preparing IXFR responses; this might provide additional savings in IXFR response size while reducing the likelihood that IXFR queries cannot be responded with incremental responses due to the requested sn being "condensed out" of the stored history information.  </p>
<p id="rfc.section.6.3.p.6">Condensation is completely optional. Clients cannot detect from the response whether or not the server has condensed the reply.  </p>
<p id="rfc.section.6.3.p.7">For interoperability, IXFR servers, including those without the condensation feature, SHOULD NOT send an error response in case they receive a client's IXFR request with an unknown version number and SHOULD, instead, attempt to perform a full zone transfer.  Of course, this does not apply if the client indicates its desire to try its luck in such case at another candidate IXFR server, by initiating the request with IXFR-ONLY.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> <a href="#Servers4" id="Servers4">Authorization</a>
</h1>
<p id="rfc.section.6.4.p.1">The considerations for AXFR presented in Section 5 of <a href="#RFC5936">RFC 5936 </a> <cite title="NONE">[RFC5936]</cite> apply in a similar fashion for IXFR.  </p>
<p id="rfc.section.6.4.p.2">Given the basic desire for frequent use and the resulting processing load, operational considerations will, even more likely than for AXFR, dictate the need to closely restrict the usage of IXFR to the set of authoritiative servers for a given zone, and to precisely configure the IXFR distribution graph within the set of servers, by means of access lists on the server side and by configuring a prioritized IXFR server search list on the client side.  </p>
<p id="rfc.section.6.4.p.3">Since IP addresses can be spoofed rather trivially in large parts of the open Internet, better authentication methods are needed as a base for authorization decisions unless the IXFR distribution graph can be restricted to protected networks under control of the same administration as the participating DNS servers.  </p>
<p id="rfc.section.6.4.p.4">In particular, as detailed in the Section of RFC 5936 quoted above, implementations of IXFR SHOULD also support at least one flavor of DNS transaction security.  Virtual private networks, virtual LANs, IPsec (<a href="#RFC4301">[RFC4301]</a>), and TCP-AO (<a href="#RFC5925">[RFC5925]</a> might also be applicable solutions to ensure proper authentication to base authorization decisions on.  See <a href="#SecCons">Section 9</a> for more information.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Clients" id="Clients">Client Behavior</a>
</h1>
<p id="rfc.section.7.p.1">It is RECOMMENDED that IXFR client implementations supporting IXFR-ONLY allow to configure its usage per IXFR server, as part of the IXFR distribution graph configuration.  </p>
<p id="rfc.section.7.p.2">An IXFR client SHOULD set an appropriate guard timeout whenever the content of a response message indicates that this is not the final message of an IXFR response.  In case this timeout period elapses without another response message arriving, it SHOULD regard the IXFR session as failed and apply the caveats for the "discard" case presented in <a href="#RspCont">Section 4</a>.  </p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#Clients1" id="Clients1">Zone Integrity</a>
</h1>
<p id="rfc.section.7.1.p.1">The elaborations on Zone Integrity for AXFR in Section 6 of <a href="#RFC5936">RFC 5936 </a> <cite title="NONE">[RFC5936]</cite> apply in a similar fashion for IXFR.  </p>
<p id="rfc.section.7.1.p.2">However, during the receipt of an incremental IXFR response, and upon successful processing of an SOA RR that serves as a sentinel for the end of any change information chunk, an IXFR client MAY immediately apply and commit to stable storage the SOA serial number change described by that chunk (and previous chunks, if not already done).  This operation MUST externally appear as an atomar operation.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#BwCompat" id="BwCompat">Backwards Compatibility</a>
</h1>
<p id="rfc.section.8.p.1">Despite a few potentially misleading statements in the previous specification, only a single detail has been identified so far that could give rise to backward compatibility concerns.  This is addressed by the compatibility rules in <a href="#RspCont">Section 4</a> that allow an IXFR client to process an "empty incremental response" consisting of only a pair of instances of the server's SOA RR.  </p>
<p id="rfc.section.8.p.2">The introduction of IXFR-ONLY creates further interoperability considerations.  An IXFR server utilizing IXFR-ONLY may receive an error response different from CannotIXFR persistently.  (The actual RCODE reveived may depend on whether or not the server is aware of the allocation of the range of RR types set aside for Q Types in <a href="#RFC5395">[RFC5395]</a>, from which the IXFR-ONLY code point has been assigned.) This event likely indicates that the IXFR server chosen does not support IXFR-ONLY.  In such case, the client will mark the server as "unusable of IXFR-ONLY" in his server list and try another potential IXFR server, or, if all candidates fail, retry the scan with bare IXFR, or alternatively try to immediately start an AXFR session.  The latter should always be the method of last resort in case of persistent IXFR failures.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#SecCons" id="SecCons">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">This document presents a more detailed specification for the mechanism previously specified in RFC 1995, which has similar protocol behavior and security properties as the AXFR mechanism described in RFC 5936.  Hence, beyond the general security considerations for the DNS laid down in <a href="#RFC3833">RFC 3833 </a> <cite title="NONE">[RFC3833]</cite>, similar considerations apply.  </p>
<p id="rfc.section.9.p.2">Thus, the sections on Transport, Authorization and Zone Integrity that all include by reference the respective sections of <a href="#RFC5936">RFC 5936 </a> <cite title="NONE">[RFC5936]</cite> largely address the relevant concerns.  Deployments of IXFR might be interested in using large values for the EDNS message size and thereby become more exposed to the various security threats against IP fragmentation; these and suitable mitigations are discussed in <a href="#I-D.ietf-opsec-ip-security">[I-D.ietf-opsec-ip-security]</a>.  </p>
<p id="rfc.section.9.p.3">Since IXFR is likely to be used in a more frequent and continuous manner and hence a possible candidate for making use of long-lived, persistent TCP connections for its transport, besides IPsec (<a href="#RFC4301">RFC 4301 </a> <cite title="NONE">[RFC4301]</cite>), the more lightweight TCP Authentication mechanism described in RFC 5925 (TCP-AO, <a href="#RFC5925">[RFC5925]</a>) might, once deployed, be a suitable candidate for peer authentication and integrity protection of IXFR sessions.  </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.10.p.1">The IANA Registry "Domain Name System (DNS) Parameters" <a href="#DNSVALS">[DNSVALS]</a> contains a sub-registry "Resource Record (RR) TYPEs", in which <a href="#RFC5395">[RFC5395]</a> has reserved the range 128 through 255 for pseudo-RRs only being used in DNS queries, for short "Q Types".  This partial namespace is managed under the "DNS RRTYPE Allocation Policy" specified in <a href="#RFC5395">RFC 5395 </a> <cite title="NONE">[RFC5395]</cite>.  </p>
<p id="rfc.section.10.p.2">Since RFC 1995, the Q Type 251 has been assigned to IXFR.  Upon publication of this memo as an RFC, IANA will update / has updated the description for that entry to say "incremental zone transfer" and the Reference for that entry to point to this RFC.  <br> Upon publication of this memo as an RFC, IANA also will assign / has assigned the Q Type {TBD1} to the TYPE mnemonic IXFR-ONLY, with description "incremental zone transfer w/o fallback", and pointing to this memo.  </p>
<div id="#rfc.figure.4"></div>
<pre>
RCODE      Name        Description                         Reference
---------  ----------  ----------------------------------  ---------
{TBD2}     CannotIXFR  IXFR not possible, would fall back  [RFCthis]

  [[ Do we want one of the remaining five basic RCODEs (11..15), or
     would an Extended RCODE from the 23..3840 range be acceptable? ]]
      </pre>
<p id="rfc.section.10.p.3">IANA is requested to allocate / has allocated from the "DNS RCODEs" sub-registry of the "Domain Name System (DNS) Parameters" Registry <a href="#DNSVALS">[DNSVALS]</a> a new RCODE value for CannotIXFR: </p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.11.p.1">Masataka Ohta is acknowledged for his original work as the author of <a href="#RFC1995">RFC 1995 </a> <cite title="NONE">[RFC1995]</cite>, and this extends to the contributors listed in the Acknowledgements section of that RFC.  </p>
<p id="rfc.section.11.p.2">The specification of IXFR-ONLY in this document is based on the original proposal <a href="#I-D.kerr-ixfr-only">[I-D.kerr-ixfr-only]</a>, whose authors are acknowledged for identifying the operational need for this behavior and carrying it to the IETF.  </p>
<p id="rfc.section.11.p.3">The DNSEXT working group and its predecessor (DNSIND) are acknowledged for their discussion on the above documents.  Substantial text has been borrowed from there and from <a href="#RFC5936">[RFC5936]</a>.  </p>
<p id="rfc.section.11.p.4">Your name could be here. ...  </p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1034">[RFC1034]</b></td>
<td class="top">
<a title="Information Sciences Institute (ISI)">Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>", STD 13, RFC 1034, November 1987.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1035">[RFC1035]</b></td>
<td class="top">
<a title="USC/ISI">Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1035">Domain names - implementation and specification</a>", STD 13, RFC 1035, November 1987.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2671">[RFC2671]</b></td>
<td class="top">
<a href="mailto:vixie@isc.org" title="Internet Software Consortium">Vixie, P.</a>, "<a href="http://tools.ietf.org/html/rfc2671">Extension Mechanisms for DNS (EDNS0)</a>", RFC 2671, August 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5395">[RFC5395]</b></td>
<td class="top">
<a>Eastlake, D.</a>, "<a href="http://tools.ietf.org/html/rfc5395">Domain Name System (DNS) IANA Considerations</a>", RFC 5395, November 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5405">[RFC5405]</b></td>
<td class="top">
<a>Eggert, L.</a> and <a>G. Fairhurst</a>, "<a href="http://tools.ietf.org/html/rfc5405">Unicast UDP Usage Guidelines for Application Designers</a>", BCP 145, RFC 5405, November 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5452">[RFC5452]</b></td>
<td class="top">
<a>Hubert, A.</a> and <a>R. van Mook</a>, "<a href="http://tools.ietf.org/html/rfc5452">Measures for Making DNS More Resilient against Forged Answers</a>", RFC 5452, January 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5936">[RFC5936]</b></td>
<td class="top">
<a>Lewis, E.</a> and <a>A. Hoenes</a>, "<a href="http://tools.ietf.org/html/rfc5936">DNS Zone Transfer Protocol (AXFR)</a>", RFC 5936, June 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1995">[RFC1995]</b></td>
<td class="top">
<a href="mailto:mohta@necom830.hpcl.titech.ac.jp" title="Computer Center Tokyo Institute of Technology">Ohta, M.</a>, "<a href="http://tools.ietf.org/html/rfc1995">Incremental Zone Transfer in DNS</a>", RFC 1995, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1996">[RFC1996]</b></td>
<td class="top">
<a href="mailto:paul@vix.com" title="Internet Software Consortium">Vixie, P.</a>, "<a href="http://tools.ietf.org/html/rfc1996">A Mechanism for Prompt Notification of Zone Changes (DNS NOTIFY)</a>", RFC 1996, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3833">[RFC3833]</b></td>
<td class="top">
<a>Atkins, D.</a> and <a>R. Austein</a>, "<a href="http://tools.ietf.org/html/rfc3833">Threat Analysis of the Domain Name System (DNS)</a>", RFC 3833, August 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4033">[RFC4033]</b></td>
<td class="top">
<a>Arends, R.</a>, <a>Austein, R.</a>, <a>Larson, M.</a>, <a>Massey, D.</a> and <a>S. Rose</a>, "<a href="http://tools.ietf.org/html/rfc4033">DNS Security Introduction and Requirements</a>", RFC 4033, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4034">[RFC4034]</b></td>
<td class="top">
<a>Arends, R.</a>, <a>Austein, R.</a>, <a>Larson, M.</a>, <a>Massey, D.</a> and <a>S. Rose</a>, "<a href="http://tools.ietf.org/html/rfc4034">Resource Records for the DNS Security Extensions</a>", RFC 4034, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4301">[RFC4301]</b></td>
<td class="top">
<a>Kent, S.</a> and <a>K. Seo</a>, "<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>", RFC 4301, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5482">[RFC5482]</b></td>
<td class="top">
<a>Eggert, L.</a> and <a>F. Gont</a>, "<a href="http://tools.ietf.org/html/rfc5482">TCP User Timeout Option</a>", RFC 5482, March 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5925">[RFC5925]</b></td>
<td class="top">
<a>Touch, J.</a>, <a>Mankin, A.</a> and <a>R. Bonica</a>, "<a href="http://tools.ietf.org/html/rfc5925">The TCP Authentication Option</a>", RFC 5925, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5966">[RFC5966]</b></td>
<td class="top">
<a>Bellis, R.</a>, "<a href="http://tools.ietf.org/html/rfc5966">DNS Transport over TCP - Implementation Requirements</a>", RFC 5966, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.kerr-ixfr-only">[I-D.kerr-ixfr-only]</b></td>
<td class="top">
<a>Sury, O</a> and <a>S Kerr</a>, "<a href="http://tools.ietf.org/html/draft-kerr-ixfr-only-01">IXFR-ONLY to Prevent IXFR Fallback to AXFR</a>", Internet-Draft draft-kerr-ixfr-only-01, February 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-opsec-ip-security">[I-D.ietf-opsec-ip-security]</b></td>
<td class="top">
<a>Gont, F</a>, "<a href="http://tools.ietf.org/html/draft-ietf-opsec-ip-security-07">Security Assessment of the Internet Protocol version 4</a>", Internet-Draft draft-ietf-opsec-ip-security-07, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="DNSVALS">[DNSVALS]</b></td>
<td class="top">
<a>IANA </a>, "<a>"Domain Name System (DNS) Parameters" </a>", IANA registry available at:, .</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#AppOnly" id="AppOnly">Motivation for IXFR-ONLY</a>
</h1>
<p id="rfc.section.Appendix A.p.1">IXFR is an efficient means to transfer changes in zones from IXFR servers to IXFR clients.  However, when an IXFR client has multiple IXFR servers for a single zone, it is possible that not all IXFR servers hold the zone content with the same serial number(s).  In this case, if an IXFR client attempts an IXFR from an IXFR server that does not have the zone content with the serial number used by the IXFR client, the IXFR server will fall back to a full zone transfer (AXFR) when it has a version of the zone with serial number greater than the serial requested by the IXFR client.  </p>
<p id="rfc.section.Appendix A.p.2">For example, IXFR server NS1 may have serial numbers 1, 2, and 3 for a zone, and IXFR server NS2 may have serial numbers 1 and 3 for the same zone.  An IXFR client that has the zone content with serial number 2 and sends an IXFR request to IXFR server NS2 will get a full zone transfer (AXFR) of the zone at serial number 3.  This is because NS2 does not know the zone with serial number 2, and therefore is not able to report the differences are between zone with serial number 2 and 3.  </p>
<p id="rfc.section.Appendix A.p.3">If the IXFR client in this example had known to send the query to IXFR server NS1, then it could have gotten an incremental transfer.  But an IXFR clients can only know what the *latest* version of the zone is at an IXFR server -- this information is available via an SOA query.  </p>
<p id="rfc.section.Appendix A.p.4">The IXFR-ONLY query type provides a way for the IXFR client to ask each IXFR server to return an error instead of sending the current version of the zone via full zone transfer.  By using this, an IXFR client can check each IXFR server until it finds one able to actually provide an incremental transfer.  If it doesn't succeed, it can fall back and try with bare IXFR instead of IXFR-ONLY, or it can immediately start an AXFR session with an AXFR server of its choice (the preferred AXFR server might be distinct from the most prefered IXFR server).  </p>
<p id="rfc.section.Appendix A.p.5">By providing IXFR-ONLY support, the policy control over the zone synchronization operation switches to the client side, which is preferable under various operational settings.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alfred Hoenes</span> 
	  <span class="n hidden">
		<span class="family-name">Hoenes</span>
	  </span>
	</span>
	<span class="org vcardline">TR-Sys </span>
	<span class="adr">
	  <span>Gerlinger Str. 12 </span>

	  <span class="vcardline">
		<span class="locality">Ditzingen </span>,  
		<span class="region"></span>
		<span class="code">D-71254   </span>
	  </span>
	  <span class="country-name vcardline">Germany   </span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ah@TR-Sys.de%20">ah@TR-Sys.de </a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ondrej Sury</span> 
	  <span class="n hidden">
		<span class="family-name">Sury</span>
	  </span>
	</span>
	<span class="org vcardline">CZ.NIC</span>
	<span class="adr">
	  <span>Americka 23</span>

	  <span class="vcardline">
		<span class="locality">120 00 Praha 2</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">CZ</span>
	</span>
	<span class="vcardline">Phone: +420 222 745 110</span>

<span class="vcardline">EMail: <a href="mailto:ondrej.sury@nic.cz">ondrej.sury@nic.cz</a></span>

  </address>
</div>

</body>
</html>