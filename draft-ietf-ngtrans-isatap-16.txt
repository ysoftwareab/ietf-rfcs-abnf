


Network Working Group                                         F. Templin
Internet-Draft                                                     Nokia
Expires: April 14, 2004                                       T. Gleeson
                                                      Cisco Systems K.K.
                                                               M. Talwar
                                                               D. Thaler
                                                   Microsoft Corporation
                                                        October 15, 2003


        Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)
                    draft-ietf-ngtrans-isatap-16.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 14, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This document specifies an Intra-Site Automatic Tunnel Addressing
   Protocol (ISATAP) that connects IPv6 hosts and routers within IPv4
   sites. ISATAP treats the site's IPv4 unicast infrastructure as a
   Non-Broadcast, Multiple Access (NBMA) link layer for IPv6 with no
   requirement for IPv4 multicast. ISATAP enables automatic IPv6-in-IPv4
   tunneling whether globally assigned or private IPv4 addresses are
   used.




Templin, et al.          Expires April 14, 2004                 [Page 1]

Internet-Draft                   ISATAP                     October 2003


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Requirements . . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   4.  Basic IPv6 Operation . . . . . . . . . . . . . . . . . . . . .  4
   5.  Automatic Tunneling  . . . . . . . . . . . . . . . . . . . . .  6
   6.  Neighbor Discovery . . . . . . . . . . . . . . . . . . . . . .  8
   7.  Address Autoconfiguration  . . . . . . . . . . . . . . . . . . 12
   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 12
   9.  Security considerations  . . . . . . . . . . . . . . . . . . . 12
   10. Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 12
       Normative References . . . . . . . . . . . . . . . . . . . . . 13
       Informative References . . . . . . . . . . . . . . . . . . . . 14
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 15
   A.  Major Changes  . . . . . . . . . . . . . . . . . . . . . . . . 15
   B.  Interface Identifier Construction  . . . . . . . . . . . . . . 16
       Intellectual Property and Copyright Statements . . . . . . . . 18

































Templin, et al.          Expires April 14, 2004                 [Page 2]

Internet-Draft                   ISATAP                     October 2003


1. Introduction

   This document specifies a simple mechanism called the Intra-Site
   Automatic Tunnel Addressing Protocol (ISATAP) that enables
   incremental deployment of IPv6 [RFC2460] within IPv4 [RFC0791] sites.
   ISATAP allows dual-stack nodes that do not share a link with an IPv6
   router to automatically tunnel packets to the IPv6 next-hop address
   through IPv4, i.e., the site's IPv4 infrastructure is treated as a
   link layer for IPv6.

   The main objectives of this document are to: 1) specify operational
   details for automatic tunneling of IPv6 over IPv4 using ISATAP, 2)
   specify the format of IPv6 interface identifiers using an embedded
   IPv4 address, 3) specify the operation of Neighbor Discovery and
   Address Autoconfiguration, and 4) discuss security considerations.

   The specification in this document is very similar to [RFC2529], with
   the primary distinction that ISATAP does not require IPv4 multicast
   support within the site.

2. Requirements

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in this
   document, are to be interpreted as described in [RFC2119].

   This document also makes use of internal conceptual variables to
   describe protocol behavior and external variables that an
   implementation must allow system administrators to change. The
   specific variable names, how their values change, and how their
   settings influence protocol behavior are provided to demonstrate
   protocol behavior. An implementation is not required to have them in
   the exact form described here, so long as its external behavior is
   consistent with that described in this document.

3. Terminology

   The terminology of [RFC2460][RFC2461][RFC2462] applies to this
   document. The following additional terms are defined:

   site:
      same as defined in [RFC3582], which is intended to be equivalent
      to "enterprise" as defined in [RFC1918].

   ISATAP interface:
      an interface used for automatic IPv6-in-IPv4 tunneling and
      configured over one or more IPv4 addresses assigned to one or more
      of the node's IPv4 interfaces that belong to the same site.



Templin, et al.          Expires April 14, 2004                 [Page 3]

Internet-Draft                   ISATAP                     October 2003


   advertising ISATAP interface:
      same meaning as advertising interface in ([RFC2461], section
      6.2.2).

   ISATAP address:
      an address with an on-link prefix assigned on an ISATAP interface
      and with an interface identifier constructed as specified in
      Section 4.1.


4. Basic IPv6 Operation

   ISATAP interfaces automatically tunnel IPv6 packets in IPv4 using the
   site's IPv4 infrastructure as a link layer, i.e., IPv6 treats the
   site's IPv4 infrastructure as a Non-Broadcast, Multiple Access (NBMA)
   link layer with properties similar to [RFC2491]. The following
   sections specify details for basic IPv6 operation on ISATAP
   interfaces:

4.1 Interface Identifiers and Unicast Addresses

   Interface identifiers for ISATAP are constructed in Modified EUI-64
   format as specified in ([ADDR-ARCH], section 2.5.1). They are formed
   by appending a 32-bit IPv4 address to the 32-bit leading token
   '0000:5EFE', then setting the universal/local ("u") bit as follows:

   When the IPv4 address is globally unique (i.e., provider-assigned),
   the "u" bit is set to 1 and the leading token becomes '0200:5EFE'.
   When the IPv4 address is from a private allocation [RFC1918], the "u"
   bit is set to 0 and the leading token remains as '0000:5EFE'.

   Global and link-local IPv6 unicast addresses ([ADDR-ARCH], sections
   2.5.4, 2.5.6) for ISATAP are constructed as follows:

    |           64 bits            |     32 bits   |    32 bits     |
    +------------------------------+---------------+----------------+
    |   global/link-local prefix   | 000[0/2]:5EFE |  IPv4 Address  |
    +------------------------------+---------------+----------------+

   (Appendix B provides additional non-normative details.)

4.2 ISATAP Interface Management

   The IP Tunnel MIB [MIB] is used, with the following additions for
   ISATAP interfaces:

   o  For each IPv4 address an ISATAP interface is configured over, a
      tuple consisting of the IPv4 address and ifIndex for the



Templin, et al.          Expires April 14, 2004                 [Page 4]

Internet-Draft                   ISATAP                     October 2003


      corresponding IPv4 interface ([RFC2863], section 3.1.5) is added
      to ifRcvAddressTable ([MIB], section 3.1.2).

   o  tunnelIfRemoteInetAddress in the tunnelIfEntry object ([MIB],
      section 4) is set to 0.0.0.0 for ISATAP interfaces.

   When an IPv4 address over which an ISATAP interface is configured is
   removed from its IPv4 interface, the corresponding (IPv4 addres,
   ifIndex)-tuple MUST be removed from the ISATAP interface
   ifRcvAddressTable. If the IPv4 address is also used as
   tunnelIfLocalInetAddress ([MIB], section 5) in the ISATAP interface
   tunnelIfEntry, the interface MUST either set tunnelIfLocalInetAddress
   to a different IPv4 address or be disabled.

   When a new IPv4 address is added to an IPv4 interface an ISATAP
   interface is configured over, a new (IPv4 address, ifIndex)-tuple MAY
   be added to ifRcvAddressTable and tunnelIfLocalInetAddress MAY be set
   to the new address.

4.3 Multicast and Anycast

   ISATAP interfaces recognize an IPv6 node's required addresses
   ([ADDR-ARCH], section 2.8). The following multicast mappings are
   defined for packets sent on ISATAP interfaces:

   o  When the IPv6 destination address is the 'All-Routers'
      ([ADDR-ARCH], section 2.7.1) or
      'All_DHCP_Relay_Agents_and_Servers' ([RFC3315], section 1.2)
      multicast address, it is mapped to V4ADDR(i) for one or more
      PRL(i)'s (see: Section 6.1). The manner of selecting PRL(i)'s is
      up to the implementation.

   Other multicast mappings, and mechanisms for general-purpose
   multicast/anycast emulation on ISATAP interfaces are beyond the scope
   of this document.

4.4 Source/Target Link Layer Address Options

   Source/Target Link Layer Address Options ([RFC2461], section 4.6.1)
   for ISATAP have the following format:

    +-------+-------+-------+-------+-------+-------+-------+--------+
    | Type  |Length |   0   |   0   |        IPv4 Address            |
    +-------+-------+-------+-------+-------+-------+-------+--------+







Templin, et al.          Expires April 14, 2004                 [Page 5]

Internet-Draft                   ISATAP                     October 2003


   Type:
      1 for Source Link-layer address.
      2 for Target Link-layer address.

   Length:
      1 (in units of 8 octets).

   IPv4 Address:
      The 32 bit IPv4 address, in network byte order.


5. Automatic Tunneling

   ISATAP interfaces use the basic transition mechanisms specified in
   [MECH] with the following exceptions:

5.1 Tunnel MTU and Fragmentation

   The specification in ([MECH], section 3.2) is not used; the
   specification in this section is used instead.

   The minimum MTU for IPv6 interfaces is 1280 bytes ([RFC2460], Section
   5), but the following operational considerations are noted:

   o  Nearly all IPv4 nodes connect to physical links with MTUs of 1500
      bytes or larger (e.g., Ethernet)

   o  Sub-IPv4 layer encapsulations (e.g., VPN) may occur on some paths

   o  Commonly-deployed VPN interfaces use an MTU of 1400 bytes

   To maximize efficiency and minimize IPv4 fragmentation for the
   predominant deployment case, LinkMTU for ISATAP interfaces SHOULD be
   set to no more than 1380 bytes (1400 minus 20 bytes for IPv4
   encapsulation).

   LinkMTU MAY be set to larger values when a dynamic link layer (IPv4)
   MTU discovery mechanism is used, or when a static MTU assignment is
   used and the anticipated/measured level of fragmentation in the
   site's IPv4 network is deemed acceptable.

   When a dynamic link layer MTU discovery mechanism is not used, the
   Don't Fragment (DF) bit MUST NOT be set in the encapsulating IPv4
   header of packets sent on the ISATAP interface. In this case, black
   holes may in rare instances occur along some paths even when the
   tunnel interface uses the IPv6 minimum MTU of 1280 bytes. (This
   concern is not specific to ISATAP interfaces, but applies to all
   tunnels for which nested levels of sub link-layer encapsulation may



Templin, et al.          Expires April 14, 2004                 [Page 6]

Internet-Draft                   ISATAP                     October 2003


   occur.)

5.2 Handling IPv4 ICMP Errors

   ARP failures and persistent ICMPv4 errors SHOULD be processed as
   link-specific information indicating that a path to a neighbor has
   failed ([RFC2461], section 7.3.3).

5.3 Link-Local Addresses

   The specification in ([MECH], section 3.7) is not used; the
   specification in Section 4.1 of this document is used instead.

5.4 Neighbor Discovery over Tunnels

   The specification in ([MECH], section 3.8) is not used; the
   specifications in Section 6 and Section 7 of this document are used
   instead.

5.5 Decapsulation/Filtering

   The specifications in ([MECH], sections 3.6, 3.9 and 4.1) are used.

   In addition, the decapsulator MUST determine the correct tunnel
   interface to receive each IPv4 protocol-41 packet via a table lookup
   for the tuple consisting of the packet's IPv4 source and destination
   address, and ifIndex for the receiving IPv4 interface. (Note that
   ISATAP interfaces match all IPv4 source addresses by default; if a
   tunnel interface with a more-specific match on the IPv4 source
   address exists, it is selected to receive the packet as for
   longest-prefix-match.) Packets for which the correct tunnel interface
   cannot be determined are discarded; in this case, the decapsulator
   MAY also send an ICMPv4 Destination Unreachable message with code 3
   (Port Unreachable) ([RFC1122], section 3.2.2.1) to the IPv4 source
   address in the packet's outer header.

   After determining the correct tunnel interface, the decapsulator MUST
   also verify that the packet's link-layer (IPv4) source address is
   correct for the network-layer (IPv6) source address. For ISATAP
   interfaces, the packet's link-layer source address is correct if one
   (or more) of the following are true:

   o  the network-layer source address is an ISATAP address that embeds
      the link-layer source address in its interface identifier.

   o  the network-layer source address is an IPv6 neighbor within the
      same site as the receiving ISATAP interface, and the link-layer
      source address matches the link layer address in the neighbor



Templin, et al.          Expires April 14, 2004                 [Page 7]

Internet-Draft                   ISATAP                     October 2003


      cache.

   o  the link-layer source address is a member of the Potential Router
      List for the site (see: Section 6.1).

   Packets for which the link-layer source address is incorrect are
   discarded, and an ICMPv6 Destination Unreachable message ([ICMPV6],
   section 3.1) SHOULD be sent to the IPv6 source in the inner header of
   the encapsulated packet (subject to rate limiting as in [ICMPV6],
   section 2.4, paragraph f).

6. Neighbor Discovery

   ISATAP interfaces use the neighbor discovery mechanisms specified in
   [RFC2461] with the following exceptions:

6.1 Conceptual Model Of A Host

   To the list of Conceptual Data Structures ([RFC2461], section 5.1),
   ISATAP interfaces add:

   Potential Router List
      A set of entries about potential routers for the site; used to
      support the mechanisms specified in  Section 6.2.3. Each entry
      ("PRL(i)") has an associated timer ("TIMER(i)"), and an IPv4
      address ("V4ADDR(i)") that represents a router's advertising
      ISATAP interface.


6.2 Router and Prefix Discovery

6.2.1 Message Validation

6.2.1.1 Validation of Router Solicitation Messages

   To the list of validity checks for Router Soliciation messages
   ([RFC2461], section 6.1.1), ISATAP interfaces add:

   o  If the message includes a Source Link Layer Address Option, the
      message also includes an IP authentication Header.


6.2.1.2 Validation of Router Advertisement Messages

   To the list of validity checks for Router Advertisement messages
   ([RFC2461], section 6.1.1), ISATAP interfaces add:





Templin, et al.          Expires April 14, 2004                 [Page 8]

Internet-Draft                   ISATAP                     October 2003


   o  IP Source Address is an ISATAP link-local address that embeds
      V4ADDR(i) for some PRL(i).

   o  If the message includes a Source Link Layer Address Option, the
      message also includes an IP authentication Header.


6.2.2 Router Specification

   As permitted by ([RFC2461], section 6.2.6), advertising ISATAP
   interfaces SHOULD unicast Router Advertisement messages to the
   soliciting host's address when the solicitation's source address is
   not the unspecified address.

6.2.3 Host Specification

6.2.3.1 Host Variables

   To the list of host variables ([RFC2461], section 6.3.2), ISATAP
   interfaces add:

   PrlRefreshInterval
      Time in seconds between successive refreshments of the PRL after
      initialization. It SHOULD be no less than 3600 seconds. The
      designated value of all 1's (0xffffffff) represents infinity.

      Default: 3600 seconds

   MinRouterSolicitInterval
      Minimum time in seconds between successive solicitations of the
      same advertising ISATAP interface. It SHOULD be no less than 900
      seconds. The designated value of alll 1's (0xffffffff) represents
      infinity.

      Default: 900 seconds


6.2.3.2 Interface Initialization

   The host joins the all-nodes multicast address on ISATAP interfaces,
   as for multicast-capable interfaces ([RFC2461], section 6.3.3).

   Additionally, the host provisions the ISATAP interface's PRL with
   IPv4 addresses it discovers via manual configuration, a DNS
   fully-qualified domain name (FQDN) [RFC1035], a DHCPv4 option for
   ISATAP [ISDHCP], a DHCPv4 vendor-specific option, or an unspecified
   alternate method. (Support for manual configuration is REQUIRED;
   other methods are OPTIONAL.)



Templin, et al.          Expires April 14, 2004                 [Page 9]

Internet-Draft                   ISATAP                     October 2003


   When FQDNs are used, the host establishes the FQDN via manual
   configuration or an unspecified alternate method. (Support for manual
   configuration is REQUIRED; other methods are OPTIONAL.) The host
   resolves the FQDN into IPv4 addresses through lookup in a static host
   file, a site-specific name service, querying the site's DNS service,
   or an unspecified alternate method. When DNS is used, client
   resolvers use the IPv4 transport.

   After the host provisions the ISATAP interface's PRL with IPv4
   addresses, it sets PrlRefreshIntervalTimer to PrlRefreshInterval
   seconds. The host re-initializes the PRL (i.e., as specified above)
   when PrlRefreshIntervalTimer expires, or when an asynchronous
   re-initialization event occurs. When the host re-initializes the PRL,
   it resets PrlRefreshIntervalTimer to PrlRefreshInterval seconds.

6.2.3.3 Processing Received Router Advertisements

   Router Advertisements (RAs) are processed exactly as specified in
   ([RFC2461], section 6.3.4) except that, if the MTU option is present,
   the option's value SHOULD be stored in a per-neighbor cache entry for
   the source of the RA; it MUST NOT be copied into LinkMTU for the
   ISATAP interface.

   Additionally, hosts reset TIMER(i) to schedule the next solicitation
   event (see: Section 6.2.3.4). Let "MIN_LIFETIME" be the minimum value
   in the Router Lifetime or the lifetime(s) encoded in options included
   in the RA message. Then, TIMER(i) is reset as follows:

      TIMER(i) = MAX((0.5 * MIN_LIFETIME), MinRouterSolicitInterval)


6.2.3.4 Sending Router Solicitations

   To the list of events after which RSs may be sent ([RFC2461], section
   6.3.2), ISATAP interfaces add:

   o  TIMER(i) for some PRL(i) expires.

   Additionally, hosts MAY send Router Solicitations to an ISATAP
   link-local address that embeds V4ADDR(i) for some PRL(i) instead of
   the All-Routers multicast address.

6.3 Address Resolution and Neighbor Unreachability Detection

6.3.1 Message Validation






Templin, et al.          Expires April 14, 2004                [Page 10]

Internet-Draft                   ISATAP                     October 2003


6.3.1.1 Validation of Neighbor Solicitations

   To the list of validity checks for Neighbor Solicitation (NS)
   messages ([RFC2461], section 7.1.1), ISATAP interfaces add:

   o  If the message includes a Source Link Layer Address Option, the
      message also includes an IP authentication Header.


6.3.1.2 Validation of Neighbor Solicitations

   To the list of validity checks for Neighbor Advertisement (NA)
   messages ([RFC2461], section 7.1.2), ISATAP interfaces add:

   o  If the message includes a Target Link Layer Address Option, the
      message also includes an IP authentication Header.


6.3.2 Address Resolution

   The specification in ([RFC2461], section 7.2) is used. NS and NA
   messages MAY omit the source/target link layer address option when
   the source/target is an ISATAP address. ISATAP addresses for which
   the neighbor's link-layer address cannot otherwise be determined
   (i.e., from the neighbor cache or a link layer address option in a
   received packet) are resolved to link-layer addresses by a static
   computation, i.e., the last four octets are treated as an IPv4
   address.

   Hosts SHOULD perform an initial reachability confirmation by sending
   NS message(s) and receiving a NA message; NS messages are sent to the
   target's unicast address. Routers MAY perform an initial reachability
   confirmation, but this might not scale in all environments.

   As specified in ([RFC2461], section 7.2.4), all nodes MUST send
   solicited neighbor advertisements on ISATAP interfaces.

6.3.3 Neighbor Unreachability Detection

   Hosts SHOULD perform Neighbor Unreachability Detection as specified
   in ([RFC2461], section 7.3). Routers MAY perform neighbor
   unreachability detection, but this might not scale in all
   environments.

6.4 Redirect Function

   To the list of validity checks for Redirect messages (([RFC2461],
   section 8.1), ISATAP interfaces add:



Templin, et al.          Expires April 14, 2004                [Page 11]

Internet-Draft                   ISATAP                     October 2003


   o  If the message includes a Target Link Layer Address Option, the
      message also includes an IP authentication Header.


7. Address Autoconfiguration

   ISATAP interfaces use the address autoconfiguration mechanisms
   specified in [RFC2462] with the following exceptions:

7.1 Address Lifetime Expiry

   The specification in ([RFC2462], section 5.5.4) is used, except that
   an ISATAP address also becomes deprecated when the IPv4 address
   embedded in its interface identifier is removed from an IPv4
   interface over which the ISATAP interface is configured. (This
   deprecation rule applies to all ISATAP addresses, including
   link-local addresses.)

7.2 Stateful Address Autoconfiguration

   When the site uses DHCPv6 [RFC3315] as the stateful address
   autoconfiguration mechanism, the server/relay function MUST be
   deployed equally on each router that is a member of the PRL.

8. IANA Considerations

   The IANA is advised to specify construction rules for IEEE EUI-64
   addresses formed from the Organizationally Unique Identifier (OUI)
   "00-00-5E" in the IANA "ethernet-numbers" registry. The non-normative
   text in Appendix B is offered as an example specification.

9. Security considerations

   The security considerations in [RFC2461][RFC2462][MECH] apply.

   Additionally, site administrators MUST ensure that lists of IPv4
   addresses representing the advertising ISATAP interfaces of PRL
   members are well maintained.

10. Acknowledgments

   Most of the basic ideas in this document are not original; the
   authors acknowledge the original architects of those ideas. Portions
   of this work were sponsored through SRI International internal
   projects and government contracts. Government sponsors include Monica
   Farah-Stapleton and Russell Langan (U.S. Army CECOM ASEO), and Dr.
   Allen Moshfegh (U.S. Office of Naval Research). SRI International
   sponsors include Dr.  Mike Frankel, J. Peter Marcotullio, Lou



Templin, et al.          Expires April 14, 2004                [Page 12]

Internet-Draft                   ISATAP                     October 2003


   Rodriguez, and Dr. Ambatipudi Sastry.

   The following are acknowledged for providing peer review input: Jim
   Bound, Rich Draves, Cyndi Jung, Ambatipudi Sastry, Aaron Schrader,
   Ole Troan, Vlad Yasevich.

   The following are acknowledged for their significant contributions:
   Alain Durand, Hannu Flinck, Jason Goldschmidt, Nathan Lutchansky,
   Karen Nielsen, Mohan Parthasarathy, Chirayu Patel, Art Shelest, Pekka
   Savola, Margaret Wasserman, Brian Zill.

   The authors acknowledge the work of Quang Nguyen [VET] under the
   guidance of Dr. Lixia Zhang that proposed very similar ideas to those
   that appear in this document. This work was first brought to the
   authors' attention on September 20, 2002.

Normative References

   [ADDR-ARCH]
              Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", draft-ietf-ipv6-addr-arch-v4-00 (work in
              progress), October 2003.

   [ICMPV6]   Conta, A. and S. Deering, "Internet Control Message
              Protocol (ICMPv6) for the Internet Protocol Version 6
              (IPv6) Specification", draft-ietf-ipngwg-icmp-v3 (work in
              progress), November 2001.

   [MECH]     Gilligan, R. and E. Nordmark, "Basic Transition Mechanisms
              for IPv6 Hosts and Routers", draft-ietf-v6ops-mech-v2-00
              (work in progress), February 2003.

   [MIB]      Thaler, D., "IP Tunnel MIB", draft-thaler-inet-tunnel-mib
              (work in progress), September 2003.

   [RFC0791]  Postel, J., "Internet Protocol", STD 5, RFC 791, September
              1981.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, December 1998.

   [RFC2461]  Narten, T., Nordmark, E. and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461, December
              1998.




Templin, et al.          Expires April 14, 2004                [Page 13]

Internet-Draft                   ISATAP                     October 2003


   [RFC2462]  Thomson, S. and T. Narten, "IPv6 Stateless Address
              Autoconfiguration", RFC 2462, December 1998.

Informative References

   [ISDHCP]   Templin, F., "Dynamic Host Configuration Protocol (DHCPv4)
              Option for the Intra-Site Automatic Tunnel Addressing
              Protocol (ISATAP)", draft-templin-isatap-dhcp (work in
              progress), October 2003.

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, November 1987.

   [RFC1122]  Braden, R., "Requirements for Internet Hosts -
              Communication Layers", STD 3, RFC 1122, October 1989.

   [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G. and
              E. Lear, "Address Allocation for Private Internets", BCP
              5, RFC 1918, February 1996.

   [RFC2491]  Armitage, G., Schulter, P., Jork, M. and G. Harter, "IPv6
              over Non-Broadcast Multiple Access (NBMA) networks", RFC
              2491, January 1999.

   [RFC2529]  Carpenter, B. and C. Jung, "Transmission of IPv6 over IPv4
              Domains without Explicit Tunnels", RFC 2529, March 1999.

   [RFC2827]  Ferguson, P. and D. Senie, "Network Ingress Filtering:
              Defeating Denial of Service Attacks which employ IP Source
              Address Spoofing", BCP 38, RFC 2827, May 2000.

   [RFC2863]  McCloghrie, K. and F. Kastenholz, "The Interfaces Group
              MIB", RFC 2863, June 2000.

   [RFC3041]  Narten, T. and R. Draves, "Privacy Extensions for
              Stateless Address Autoconfiguration in IPv6", RFC 3041,
              January 2001.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C. and
              M. Carney, "Dynamic Host Configuration Protocol for IPv6
              (DHCPv6)", RFC 3315, July 2003.

   [RFC3582]  Abley, J., Black, B. and V. Gill, "Goals for IPv6
              Site-Multihoming Architectures", RFC 3582, August 2003.

   [VET]      Nguyen, Q., "http://irl.cs.ucla.edu/vet/report.ps", spring
              1998.




Templin, et al.          Expires April 14, 2004                [Page 14]

Internet-Draft                   ISATAP                     October 2003


Authors' Addresses

   Fred L. Templin
   Nokia
   313 Fairchild Drive
   Mountain View, CA  94110
   US

   Phone: +1 650 625 2331
   EMail: ftemplin@iprg.nokia.com


   Tim Gleeson
   Cisco Systems K.K.
   Shinjuku Mitsu Building
   2-1-1 Nishishinjuku, Shinjuku-ku
   Tokyo  163-0409
   Japan

   EMail: tgleeson@cisco.com


   Mohit Talwar
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA>  98052-6399
   US

   Phone: +1 425 705 3131
   EMail: mohitt@microsoft.com


   Dave Thaler
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052-6399
   US

   Phone: +1 425 703 8835
   EMail: dthaler@microsoft.com

Appendix A. Major Changes

   Major changes from earlier versions to version 16:

   o  dropped "underlying link" from terminology.

   o  specified multicast mappings.



Templin, et al.          Expires April 14, 2004                [Page 15]

Internet-Draft                   ISATAP                     October 2003


   o  specified layer address option format.

   o  specified setting of "u" bit in interface id's.

   o  removed obsoleted appendix sections.

   o  re-organized major sections to match normative references.

   o  revised neighbor discovery, address autoconfiguration, security
      considerations sections. Added new subsections on interface
      management, decapsulation/filtering, address lifetime expiry.


Appendix B. Interface Identifier Construction

   This section provides an example specification for constructing EUI64
   addresses from the Organizationally-Unique Identifier (OUI) owned by
   the Internet Assigned Numbers Authority (IANA). It can be used to
   construct both modified EUI-64 format interface identifiers for IPv6
   unicast addresses ([ADDR-ARCH], section 2.5.1) and "native" EUI64
   addresses for future use:

   |0                      2|2      3|3      3|4                      6|
   |0                      3|4      1|2      9|0                      3|
   +------------------------+--------+--------+------------------------+
   |  OUI ("00-00-5E"+u+g)  |  TYPE  |  TSE   |          TSD           |
   +------------------------+--------+--------+------------------------+

   Where the fields are:

      OUI     IANA's OUI: 00-00-5E with "u" and "g" bits (3 octets)

      TYPE    Type field; specifies use of (TSE, TSD) (1 octet)

      TSE     Type-Specific Extension (1 octet)

      TSD     Type-Specific Data (3 octets)

   And the following interpretations are specified based on TYPE:

      TYPE         (TSE, TSD) Interpretation
      ----         -------------------------
      0x00-0xFD    RESERVED for future IANA use
      0xFE         (TSE, TSD) together contain an IPv4 address
      0xFF         TSD is interpreted based on TSE as follows:

                   TSE          TSD Interpretation
                   ---          ------------------



Templin, et al.          Expires April 14, 2004                [Page 16]

Internet-Draft                   ISATAP                     October 2003


                   0x00-0xFD    RESERVED for future IANA use
                   0xFE         TSD contains 24-bit EUI-48 intf id
                   0xFF         RESERVED by IEEE/RAC

   Using this example specification, if TYPE=0xFE, then TSE is an
   extension of TSD. If TYPE=0xFF, then TSE is an extension of TYPE.
   (Other values for TYPE, and other interpretations of TSE, TSD are
   reserved for future IANA use.) When TYPE='0xFE' the EUI64 address
   embeds an IPv4 address, encoded in network byte order.

   For Modified EUI64 format interface identifiers in IPv6 unicast
   addresses ([ADDR-ARCH], Appendix A) using IANA's OUI, when TYPE=0xFE
   and the IPv4 address is a globally unique (i.e., provider-assigned)
   unicast address, the "u" bit is set to 1 to indicate universal scope.
   When TYPE=0xFE and the IPv4 address is from a private allocation, the
   "u" bit is set to 0 to indicate local scope. Thus, when the first
   four octets of the interface identifier in an IPv6 unicast address
   are either: '02-00-5E-FE' or: '00-00-5E-FE', the next four octets
   embed an IPv4 address and the interface identifier is said to be in
   "ISATAP format".































Templin, et al.          Expires April 14, 2004                [Page 17]

Internet-Draft                   ISATAP                     October 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.

   The IETF has been notified of intellectual property rights claimed in
   regard to some or all of the specification contained in this
   document. For more information consult the online list of claimed
   rights.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.



Templin, et al.          Expires April 14, 2004                [Page 18]

Internet-Draft                   ISATAP                     October 2003


   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







































Templin, et al.          Expires April 14, 2004                [Page 19]


