



Registration Protocols Extensions                            M. Loffredo
Internet-Draft                                             M. Martinelli
Intended status: Standards Track                     IIT-CNR/Registro.it
Expires: April 6, 2018                                   October 3, 2017


  Registration Data Access Protocol (RDAP) Reverse search capabilities
              draft-loffredo-regext-rdap-reverse-search-00

Abstract

   The Registration Data Access Protocol (RDAP) does not include query
   capabilities to find the list of domains related to a set of entities
   matching a given search pattern.  Even if such capabilities, commonly
   referred to as reverse search, respond to some needs not yet readily
   fulfilled by the current Whois protocol, they have raised concern
   from two perspectives: server processing impact and data privacy.
   Anyway, the impact of the reverse queries on RDAP servers processing
   is the same of the standard searches and it can be reduced by
   implementing policies to deal with big result sets, while data
   privacy risks can be mitigated by RDAP access control functionalites.
   This document describes RDAP query extensions that allows clients to
   request a reverse search based on the domains-entities relationship.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 6, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Loffredo & Martinelli     Expires April 6, 2018                 [Page 1]

Internet-Draft             RDAP Reverse search              October 2017


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Conventions Used in This Document . . . . . . . . . . . .   3
   2.  RDAP Path Segment Specification . . . . . . . . . . . . . . .   3
   3.  Implementation Considerations . . . . . . . . . . . . . . . .   4
   4.  Implementation Status . . . . . . . . . . . . . . . . . . . .   4
     4.1.  IIT-CNR/Registro.it . . . . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Reverse Whois is a service provided by many web applications that
   allow users to find domain names owned by an individual person or
   company starting from the owner details (like name, email).  Even if
   the availability of this service might raise some objections due to
   potential privacy risks, ICANN itself, in its report about Next-Gen
   Registration Directory Service (RDS) [ICANN], states that it is
   allowed when driven by some permissible purposes (e.g. legal actions,
   criminal investigations) and if it provides adequate policies to
   enforce the requestor accreditation, authentication, authorization,
   and terms and conditions of data use.

   It is well known that these features are not implemented in Whois
   ([RFC3912]), while they are in RDAP.  In fact, RDAP relies on
   security features, available in the HTTP protocol to support access
   control based on local policy ([RFC7481]).

   Another objection to the implementation of Reverse Whois is connected
   with its impact on server processing.  Since RDAP supports search
   queries, the impact of both standard and reverse searches can be
   mitigated by servers adopting ad hoc policies.





Loffredo & Martinelli     Expires April 6, 2018                 [Page 2]

Internet-Draft             RDAP Reverse search              October 2017


   Reverse searches, such as finding the list of domain names associated
   to contacts, nameservers or DNSSEC keys, may be useful for registrars
   as well.  Usually, registries adopt out-of-band mechanisms to provide
   results to registrars asking for reverse searches on their domains.
   Possible reasons of such requests are:

   o  the loss of synchronization between the registrar database and the
      registry database;

   o  the need of such data to perform massive EPP updates (i.e.
      changing the contacts in a list of domains, etc.).

   Currently, RDAP does not provide any way for a client to search for
   the collection of domains associated to an entity ([RFC7482]).  A
   query (lookup or search) on domains can return the array of entities
   related to a domain with different roles (registrant, registrar,
   administrative, technical, reseller, etc.), but the reverse operation
   is not allowed.  Only reverse searches to find the collection of
   domains according to a nameserver (ldhName or ip) can be requested.
   Since entities can be in relationship with all RDAP objects
   ([RFC7483]), the availability of a reverse search can be common to
   all RDAP query paths.

   The protocol described in this specification aims to extend the RDAP
   query functionalities to enable reverse search based on the domains-
   entities relationship (the classic Reverse Whois scenario).  The
   extension is implemented by adding new path segments (i.e. search
   paths) and using a RESTful web service ([REST]).  The service is
   implemented using the Hypertext Transfer Protocol (HTTP) [RFC7230]
   and the conventions described in RFC 7480 [RFC7480].

1.1.  Conventions Used in This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

2.  RDAP Path Segment Specification

   The new search paths are OPTIONAL extensions of path segments defined
   in RFC 7482 [RFC7482].  The search paths are (Figure 1):

      Syntax: domains?entityHandle=<entity handle search pattern>

      Syntax: domains?entityFn=<entity name search pattern>

   Search patterns are the same as specified in paragraph Section 3.2.3
   of RFC 7482 [RFC7482].



Loffredo & Martinelli     Expires April 6, 2018                 [Page 3]

Internet-Draft             RDAP Reverse search              October 2017


   https://example.com/rdap/domains?entityHandle=CID-40*

     Figure 1: Example of RDAP query to find all domains related to an
                   entity whose handle matches "CID-40*"

   Search results MAY be restricted to a specific entity role, simply by
   adding the parameter "entityRole" to the search path (Figure 2).
   Possible values for such parameter are those detailed in
   Section 10.2.4 of RFC 7483 [RFC7483].


   https://example.com/rdap/domains?entityFn=Bobby*&entityRole=technical

     Figure 2: Example of RDAP query to find all domains related to a
          technical contact whose formatted name matches "Bobby*"

   FOR DISCUSSION: Should reverse search be based on other entity
   details like email, phone, country (code or name), city?

3.  Implementation Considerations

   The implementation of the proposed extension is technically feasible
   because "handle" and "fn" segment paths are used as standard paths to
   search for entities.  The risks to generate huge result sets are the
   same existing for the other standard searches and can be mitigated by
   adopting the same policy (e.g. restricting search functionalities,
   limiting the rate of search requests, truncating and paging the
   results, returning partial responses).

4.  Implementation Status

   NOTE: Please remove this section and the reference to RFC 7942 prior
   to publication as an RFC.

   This section records the status of known implementations of the
   protocol defined by this specification at the time of posting of this
   Internet-Draft, and is based on a proposal described in RFC 7942
   [RFC7942].  The description of implementations in this section is
   intended to assist the IETF in its decision processes in progressing
   drafts to RFCs.  Please note that the listing of any individual
   implementation here does not imply endorsement by the IETF.
   Furthermore, no effort has been spent to verify the information
   presented here that was supplied by IETF contributors.  This is not
   intended as, and must not be construed to be, a catalog of available
   implementations or their features.  Readers are advised to note that
   other implementations may exist.





Loffredo & Martinelli     Expires April 6, 2018                 [Page 4]

Internet-Draft             RDAP Reverse search              October 2017


   According to RFC 7942, "this will allow reviewers and working groups
   to assign due consideration to documents that have the benefit of
   running code, which may serve as evidence of valuable experimentation
   and feedback that have made the implemented protocols more mature.
   It is up to the individual working groups to use this information as
   they see fit".

4.1.  IIT-CNR/Registro.it

      Responsible Organization: Institute of Informatics and Telematics
      of National Research Council (IIT-CNR)/Registro.it

      Location: https://rdap.pubtest.nic.it/

      Description: This implementation includes support for RDAP queries
      using data from the public test environment of .it ccTLD.  The
      RDAP server does not implement any security policy because data
      returned by this server are only for experimental testing
      purposes.

      Level of Maturity: This is a "proof of concept" research
      implementation.

      Coverage: This implementation includes all of the features
      described in this specification.

      Contact Information: Mario Loffredo, mario.loffredo@iit.cnr.it

5.  Security Considerations

   Security services for the operations specified in this document are
   described in RFC 7481 [RFC7481].  It is quite easy to imagine that,
   in order to be compliant with ICANN recommendations about its use,
   RDAP servers will provide reverse search, like other query
   capabilities, only to restricted communities.  One realistic scenario
   for servers is to provide reverse search only for registrars
   searching for their own domains.  Another one is to prevent users to
   start a reverse search from a registrant detail, by removing
   "registrant" from the possible values of the "entityRole" parameter.

6.  IANA Considerations

   This document has no actions for IANA.








Loffredo & Martinelli     Expires April 6, 2018                 [Page 5]

Internet-Draft             RDAP Reverse search              October 2017


7.  Acknowledgements

   The authors would like to acknowledge Scott Hollenbeck for his
   contribution to this document.

8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3912]  Daigle, L., "WHOIS Protocol Specification", RFC 3912,
              DOI 10.17487/RFC3912, September 2004,
              <https://www.rfc-editor.org/info/rfc3912>.

   [RFC7230]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Message Syntax and Routing",
              RFC 7230, DOI 10.17487/RFC7230, June 2014,
              <https://www.rfc-editor.org/info/rfc7230>.

   [RFC7480]  Newton, A., Ellacott, B., and N. Kong, "HTTP Usage in the
              Registration Data Access Protocol (RDAP)", RFC 7480,
              DOI 10.17487/RFC7480, March 2015,
              <https://www.rfc-editor.org/info/rfc7480>.

   [RFC7481]  Hollenbeck, S. and N. Kong, "Security Services for the
              Registration Data Access Protocol (RDAP)", RFC 7481,
              DOI 10.17487/RFC7481, March 2015,
              <https://www.rfc-editor.org/info/rfc7481>.

   [RFC7482]  Newton, A. and S. Hollenbeck, "Registration Data Access
              Protocol (RDAP) Query Format", RFC 7482,
              DOI 10.17487/RFC7482, March 2015,
              <https://www.rfc-editor.org/info/rfc7482>.

   [RFC7483]  Newton, A. and S. Hollenbeck, "JSON Responses for the
              Registration Data Access Protocol (RDAP)", RFC 7483,
              DOI 10.17487/RFC7483, March 2015,
              <https://www.rfc-editor.org/info/rfc7483>.

8.2.  Informative References







Loffredo & Martinelli     Expires April 6, 2018                 [Page 6]

Internet-Draft             RDAP Reverse search              October 2017


   [ICANN]    Internet Corporation For Assigned Names and Numbers,
              "Final Report from the Expert Working Group on gTLD
              Directory Services: A Next-Generation Registration
              Directory Service (RDS)", June 2014.

   [REST]     Fielding, R., "Architectural Styles and the Design of
              Network-based Software Architectures", 2000.

   [RFC7942]  Sheffer, Y. and A. Farrel, "Improving Awareness of Running
              Code: The Implementation Status Section", BCP 205,
              RFC 7942, DOI 10.17487/RFC7942, July 2016,
              <https://www.rfc-editor.org/info/rfc7942>.

Authors' Addresses

   Mario Loffredo
   IIT-CNR/Registro.it
   Via Moruzzi,1
   Pisa  56124
   IT

   Email: mario.loffredo@iit.cnr.it
   URI:   http://www.iit.cnr.it


   Maurizio Martinelli
   IIT-CNR/Registro.it
   Via Moruzzi,1
   Pisa  56124
   IT

   Email: maurizio.martinelli@iit.cnr.it
   URI:   http://www.iit.cnr.it


















Loffredo & Martinelli     Expires April 6, 2018                 [Page 7]
