<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RTP Payload Format for Elementary Streams with MPEG Surround multi-channel audio</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RTP Payload Format for Elementary Streams with MPEG Surround multi-channel audio">
<meta name="keywords" content="MPEG Surround, RFC3640, RTP, MPEG-4, AAC">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">AVT</td><td class="header">F. de Bont</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Philips Electronics</td></tr>
<tr><td class="header">Updates: <a href='http://tools.ietf.org/html/rfc3640'>3640</a> (if&nbsp;approved)</td><td class="header">S. Doehla</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Fraunhofer IIS</td></tr>
<tr><td class="header">Expires: July 26, 2009</td><td class="header">M. Schmidt</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Dolby Laboratories</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">R. Sperschneider</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Fraunhofer IIS</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 22, 2009</td></tr>
</table></td></tr></table>
<h1><br />RTP Payload Format for Elementary Streams with MPEG Surround multi-channel audio<br />draft-ietf-avt-rtp-mps-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on July 26, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This memo describes extensions for the RTP payload format defined in RFC3640 for the transport of MPEG Surround multi-channel audio. Additional Media Type parameters are defined to signal backwards compatible transmission inside an MPEG-4 audio elementary stream. In addition a layered transmission scheme without using the MPEG-4 systems framework is presented to transport an MPEG Surround elementary stream via RTP in parallel with an RTP stream containing the downmixed audio data.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Conventions<br />
<a href="#anchor3">3.</a>&nbsp;
Definitions and Abbreviations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Abbreviations<br />
<a href="#anchor6">4.</a>&nbsp;
Transport of MPEG Surround<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Embedded spatial audio data in AAC payloads">4.1.</a>&nbsp;
Embedded spatial audio data in AAC payloads<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MPEG Surround Elementary Streams">4.2.</a>&nbsp;
MPEG Surround Elementary Stream<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.2.1.</a>&nbsp;
Low Bit-rate MPEG Surround<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.2.2.</a>&nbsp;
High Bit-rate MPEG Surround<br />
<a href="#anchor9">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Media Type registration">5.1.</a>&nbsp;
Media Type registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.2.</a>&nbsp;
Registration of Mode Definitions with IANA<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.3.</a>&nbsp;
Usage of SDP<br />
<a href="#Security">6.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        <a class='info' href='#23003-1'>MPEG Surround (Spatial Audio Coding, SAC)<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 23003-1 - MPEG Surround (MPEG D),&rdquo; 2007.</span><span>)</span></a> [23003&#8209;1] is an International Standard that was finalized by MPEG in January 2007. It is capable of re-creating N channels based on M&lt;N transmitted channels and additional control data. In the preferred modes of operating the spatial audio coding system, the M channels can either be a single mono channel or a stereo channel pair. The control data represents a significantly lower data rate than the data rate required for transmitting all N channels, making the coding very efficient while at the same time ensuring compatibility with M channel devices.
       
</p>
<p>
        The MPEG Surround standard incorporates a number of tools enabling features that allow for broad application of the standard. A key feature is the ability to scale the spatial image quality gradually from very low spatial overhead towards transparency. Another key feature is that the decoder input can be made compatible to existing matrixed surround technologies.
       
</p>
<p> 
	      As an example, for 5.1 multi-channel audio, the MPEG Surround encoder creates a stereo (or mono) downmix signal and spatial information describing the full 5.1 material in a highly efficient parameterised format. The spatial information is transmitted alongside the downmix.
      
</p>
<p>
	      By using MPEG Surround, existing services can easily be upgraded to provide surround sound in a backward compatible fashion. While a stereo decoder in an existing legacy consumer device ignores the MPEG Surround data and plays back the stereo signal without any quality degradation, an MPEG Surround enabled decoder will deliver high quality multi-channel audio.
       
</p>
<p>The MPEG Surround decoder can operate in modes that render the multi-channel signal to multi-channel output, stereo output or operate in a two-channel headphone mode to produce a virtual surround output signal.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions</h3>

<p>
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Definitions and Abbreviations</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Definitions</h3>

<p>
          This memo makes use of the definitions specified in <a class='info' href='#14496-1'>[14496&#8209;1]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-1 - Coding of audio-visual objects, Part 1 Systems,&rdquo; 2004.</span><span>)</span></a>, <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>, <a class='info' href='#23003-1'>[23003&#8209;1]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 23003-1 - MPEG Surround (MPEG D),&rdquo; 2007.</span><span>)</span></a> and <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a>. Frequently used terms are summed up for convenience:
          </p>
<blockquote class="text">
<p>Access Unit:  An MPEG Access Unit is the smallest data entity to which timing information is attributed. In the case of audio, an Access Unit is the smallest individually accessible portion of coded audio data within an elementary stream.
</p>
<p>AudioSpecificConfig():  Extends the class DecoderSpecificInfo(), as defined in <a class='info' href='#14496-1'>[14496&#8209;1]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-1 - Coding of audio-visual objects, Part 1 Systems,&rdquo; 2004.</span><span>)</span></a> when the objectType indication refers to a stream complying with <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>. AudioSpecificConfig() is used as the configuration structure for MPEG-4 Audio as specified in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>. It contains the field audioObjectType that distinguishes between the different audio codecs defined in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>, general audio information (e.g. the sampling frequency and number of channels) and further codec-dependent information structures.
</p>
<p>SpatialSpecificConfig():  Configuration structure for MPEG Surround audio coding as specified in <a class='info' href='#23003-1'>[23003&#8209;1]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 23003-1 - MPEG Surround (MPEG D),&rdquo; 2007.</span><span>)</span></a>. An AudioSpecificConfig() with an audioObjectType of value 30 contains a SpatialSpecificConfig() structure.
</p>
</blockquote><p>
        
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Abbreviations</h3>

<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  AOT:  Audio Object Type
  ASC:  AudioSpecificConfig() structure
  AU:   Access Unit
  PLI:  Profile and Level Indication
  SSC:  SpatialSpecificConfig() structure</pre></div><p>

        
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Transport of MPEG Surround</h3>

<p>
        From a top-level perspective MPEG Surround data can be subdivided into configuration data contained in the SpatialSpecificConfig() (SSC) and the SpatialFrame() that contains the MPEG Surround payload. The configuration data can be signaled in-band or out-of-band. In the case of in-band signaling the SSC is conveyed in an SacDataFrame() jointly with a SpatialFrame(). In the case of out-of-band signaling the SSC is transmitted to the decoder separately, e.g. by SDP means.
        
</p>
<p>
        SpatialFrame()s may be transmitted either embedded into the downmix stream (<a class='info' href='#Embedded spatial audio data in AAC payloads'>Section&nbsp;4.1<span> (</span><span class='info'>Embedded spatial audio data in AAC payloads</span><span>)</span></a>) or as an individual elementary stream besides the downmix audio stream (<a class='info' href='#MPEG Surround Elementary Streams'>Section&nbsp;4.2<span> (</span><span class='info'>MPEG Surround Elementary Stream</span><span>)</span></a>).
       
</p>
<p>The buffer definition for AAC decoders limits the size of an AU as specified in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>. For high-bitrate applications that exceed this limit all MPEG Surround data MUST be put in a separate stream as defined in <a class='info' href='#MPEG Surround Elementary Streams'>Section&nbsp;4.2<span> (</span><span class='info'>MPEG Surround Elementary Stream</span><span>)</span></a>.
      
</p>
<a name="Embedded spatial audio data in AAC payloads"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Embedded spatial audio data in AAC payloads</h3>

<p>
          <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a> defines the extension_payload() as a mechanism for transport of extension data inside AAC payloads. Typical extension data include SBR data and MPEG Surround data, i.e. a SacDataFrame() in extension_payload()s of type EXT_SAC_DATA. extension_payload()s reside inside the downmix AAC elementary stream. The resulting single elementary stream is transported as specified in <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a>. As AAC decoders are required to skip unknown extension data, MPEG Surround data can be embedded in backwards compatible fashion and be transported with the mechanism already described in <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a>.
        
</p>
<p>
          The SacDataFrame() includes a SpatialFrame() and an optional header that contains an SSC. Any SSC in a SacDataFrame() MUST be identical to the SSC conveyed via SDP for that stream.
        
</p>
<p>No new mode is introduced for SpatialFrame()s being embedded into AAC payloads. Either the mode AAC-lbr or the mode AAC-hbr SHOULD be used. The additional Media Type parameters as defined in <a class='info' href='#Media Type registration'>Section&nbsp;5.1<span> (</span><span class='info'>Media Type registration</span><span>)</span></a> SHOULD be present when SpatialFrame()s are embedded into AAC payloads.
        
</p>
<p>For example:
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  m=audio 5000 RTP/AVP 96
  a=rtpmap:96 mpeg4-generic/48000/2
  a=fmtp:96 streamType=5; profile-level-id=44; mode=AAC-hbr; config=131
    056E598; sizeLength=13; indexLength=3; indexDeltaLength=3; constant
    Duration=2048; MPS-profile-level-id=55; MPS-config=F1B4CF920442029B
    501185B6DA00;</pre></div><p>

        
</p>
<p>In this example the stream specifies the HE-AAC Profile at Level 2 [Profile and Level Indication (PLI) 44] and the config string contains the hexadecimal representation of the HE-AAC ASC [audioObjectType=2 (AAC LC); extensionAudioObjectType=5 (SBR); samplingFrequencyIndex=0x6 (24kHz); extensionSamplingFrequencyIndex=0x3 (48kHz); channelConfiguration=2 (2.0 channels)] of the downmix AAC elementary stream using explicit backward compatible signaling.
        
</p>
<p>Furthermore, the stream specifies the MPEG Surround Baseline Profile at Level 3 (PLI55) and the MPS-config string contains the hexadecimal representation of the MPEG Surround ASC [audioObjectType=30 (MPEG Surround); samplingFrequencyIndex=0x3 (48kHz); channelConfiguration=6 (5.1 channels); sacPayloadEmbedding=1; SSC=(48 kHz; 32 slots; 525 tree; ResCoding=1; ResBands=[0,13,13,13])].
        
</p>
<p>Note that the a=fmtp lines of the example above have been wrapped to fit the page; they comprise each a single line in the SDP file.
        
</p>
<a name="MPEG Surround Elementary Streams"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
MPEG Surround Elementary Stream</h3>

<p>
          MPEG Surround SpatialFrame()s can be present in an individual elementary stream. This stream complements the stream containing the downmix audio data, which may be coded by an arbitrary coding scheme. MPEG Surround elementary streams are packetized as specified in <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a>. The mode signaled and used for an MPEG Surround elementary stream MUST be either MPS-hbr or MPS-lbr. The MPS-hbr mode SHALL be used when the frame size may exceed 63 bytes, e.g. when high-bitrate residual coding is in use.
        
</p>
<p>
          The dependency relationships between the MPEG Surround elementary stream and the downmix stream are signaled as specified in <a class='info' href='#I-D.ietf-mmusic-decoding-dependency'>[I&#8209;D.ietf&#8209;mmusic&#8209;decoding&#8209;dependency]<span> (</span><span class='info'>Schierl, T. and S. Wenger, &ldquo;Signaling media decoding dependency in Session Description Protocol (SDP),&rdquo; February&nbsp;2008.</span><span>)</span></a>.
        
</p>
<p>
          The media clocks of the MPEG Surround elementary stream and the downmix stream SHALL operate in the same clock domain, i.e. the clocks are derived from a common clock and MUST NOT drift. RTCP sender reports MUST indicate that the stream timestamps are not drifting, i.e. that a single sender report for each stream is sufficient to establish unambiguous timing. The sampling rate of the MPEG Surround signal and the decoded downmix signal MUST be identical.
        
</p>
<p>
        If HE-AAC is used as the coding scheme for the downmix, the RTP clock-rate of the downmix MAY be the sampling rate of the AAC core, i.e. the clock-rate of the MPEG Surround elementary stream is an integer multiple of the clock-rate of the downmix stream.
        
</p>
<p>
          Note that separate RTP streams have different random RTP timestamp offsets and therefore RTCP MUST be used to synchronize the coded downmix audio data and the MPEG surround elementary stream.
        
</p>
<p>For example:
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  a=group:DDP L1 L2

  m=audio 5000 RTP/AVP 96
  a=rtpmap:96 mpeg4-generic/48000/2
  a=fmtp:96 streamType=5; profile-level-id=44; mode=AAC-hbr; config=2B1
    18800; sizeLength=13; indexLength=3; indexDeltaLength=3; constantDu
    ration=2048
  a=mid:L1

  m=audio 5002 RTP/AVP 97
  a=rtpmap:97 mpeg4-generic/48000/6
  a=fmtp:97 streamType=5; profile-level-id=55; mode=MPS-hbr; config=F1B
    0CF920460029B601189E79E70; sizeLength=13; indexLength=3;  indexDelt
    aLength=3; constantDuration=2048
  a=mid:L2
  a=depend:97 lay L1:96</pre></div><p>

        
</p>
<p>In this example the first stream specifies the High Efficiency AAC Profile at Level 2 (PLI44) and the config string contains the hexadecimal representation of the HE-AAC ASC [audioObjectType=2 (AAC LC); extensionAudioObjectType=5 (SBR); samplingFrequencyIndex=0x6 (24kHz); extensionSamplingFrequencyIndex=0x3 (48kHz); channelConfiguration=2 (2.0 channels)].
        
</p>
<p>The second stream specifies Baseline MPEG Surround Profile at Level 3 (PLI55) and the config string contains the hexadecimal represenation of the ASC [AOT=30(MPEG Surround); 48 kHz; 5.1-ch; sacPayloadEmbedding=0; SSC=(48 kHz; 32 slots; 525 tree; ResCoding=1; ResBands=[7,7,7,7])]
        
</p>
<p>Note that the a=fmtp lines of the example above have been wrapped to fit the page; they comprise each a single line in the SDP file.
        
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Low Bit-rate MPEG Surround</h3>

<p>This mode is signaled by mode=MPS-lbr. This mode supports the transport of one or more complete Access Units, each consisting of a single MPEG Surround SpatialFrame(). The AUs can be variably sized and interleaved. The maximum size of a SpatialFrame() is 63 bytes. Fragmentation MUST NOT be used in this mode. Receivers MUST support de-interleaving.
          
</p>
<p>The payload configuration is the same as in the AAC-lbr mode. It consists of the AU Header Section, followed by concatenated AUs. Note that Access Units are byte-aligned. The Auxiliary Section MUST be empty in the MPS-lbr mode. The one-octet AU-header MUST provide:
            </p>
<ol class="text">
<li>the size of each AAC frame encoded as 6 bits
</li>
<li>2 bits index information for computing the sequence (and hence timing) of each SpatialFrame().
</li>
</ol><p>
          
</p>
<p>The concatenated AU-header Section MUST be preceded by the 16-bit AU-header-length field.
</p>
<p>In addition to the required Media format parameters, the following parameters MUST be present with fixed values: sizeLength (fixed value 6), indexLength (fixed value 2) and indexDeltaLength (fixed value 2). The parameter maxDisplacement MUST be present when interleaving. SpatialFrame()s always have a fixed duration per AU; the fixed duration MUST be signaled by the Media format parameter constantDuration.
          
</p>
<p>
            The value of the &quot;config&quot; parameter is the hexadecimal representation of the ASC, as defined in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a> with an AOT of 30 and the sacPayloadEmbedding flag set to 0.
          
</p>
<p>
            The &quot;profile-level-id&quot; parameter SHALL contain a valid PLI for MPEG Surround as specified in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>.
          
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
High Bit-rate MPEG Surround</h3>

<p>This mode is signaled by mode=MPS-hbr. This mode supports the transportation of either one fragment of an Access Unit or one complete AU or several complete AUs. Each AU consists of a single MPEG Surround SpatialFrame(). The AUs can be variably sized and interleaved. The maximum size of a SpatialFrame() is 8191 bytes. Receivers MUST support de-interleaving.
          
</p>
<p>The payload configuration is the same as in the AAC-hbr mode. It consists of the AU Header Section, followed by either one SpatialFrame(), a fragment of a SpatialFrame() or several concatenated SpatialFrame()s. Note that Access Units are byte-aligned. The Auxiliary Section MUST be empty in the MPS-hbr mode. The two-octet AU-header MUST provide:
            </p>
<ol class="text">
<li>the size of each AAC frame encoded as 13 bits
</li>
<li>3 bits index information for computing the sequence (and hence timing) of each SpatialFrame(), i.e. the AU-Index or AU-Index-delta field.
</li>
</ol><p>
          
</p>
<p>Each AU-Index field MUST be coded with the value 0. The concatenated AU-header Section MUST be preceded by the 16-bit AU-header-length field.
</p>
<p>In addition to the required Media format parameters, the following parameters MUST be present with fixed values: sizeLength (fixed value 13), indexLength (fixed value 3) and indexDeltaLength (fixed value 3). The parameter maxDisplacement MUST be present when interleaving. SpatialFrame()s always have a fixed duration per AU; the fixed duration MUST be signaled by the Media format parameter constantDuration.
          
</p>
<p>
            The value of the &quot;config&quot; parameter is the hexadecimal representation of the ASC, as defined in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a> with an AOT of 30 and the sacPayloadEmbedding flag set to 0.
          
</p>
<p>
            The &quot;profile-level-id&quot; parameter SHALL contain a valid PLI for MPEG Surround as specified in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>.
          
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>
        This memo defines additional optional format parameters to the Media subtype audio/mpeg4-generic. These parameters SHALL only be used in combination with the AAC-lbr or AAC-hbr modes (cf. <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a> section 3.3).
      
</p>
<a name="Media Type registration"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Media Type registration</h3>

<p>
          This memo defines the following additional optional parameters which SHALL be used
          if MPEG Surround data is present inside the payload of an AAC elementary stream.
          </p>
<blockquote class="text">
<p>
              MPS-profile-level-id: A decimal representation of the MPEG Surround Profile Level indication as defined in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a>. This parameter MUST be used in the capability exchange or session set-up procedure to indicate the MPEG Surround Profile and Level that the decoder must be capable of in order to decode the stream.
            
</p>
<p>
              MPS-config: A hexadecimal representation of an octet string that expresses the AudioSpecificConfig (ASC) as defined in <a class='info' href='#14496-3'>[14496&#8209;3]<span> (</span><span class='info'>MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</span><span>)</span></a> for MPEG Surround. The ASC is mapped onto the hexadecimal octet string in an MSB-first basis.
              The AOT in this ASC SHALL have the value 30. The SSC inside the ASC MUST have the sacPayloadEmbedding flag set to 1.
            
</p>
</blockquote><p>
        
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Registration of Mode Definitions with IANA</h3>

<p> This section requests the registration of the "MPS-hbr" value and the "MPS-lbr" value for
            the "mode" parameter of the "mpeg4-generic" media type.  The "mpeg4-generic" media type is
            defined in [RFC3640], and [RFC3640] defines a repository for the "mode" parameter.
            We are registering the modes MPS-hbr and MPS-lbr to support MPEG Surround elementary streams.
</p>
<p> Media type name:
          </p>
<blockquote class="text">
<p> audio
            
</p>
</blockquote><p>
        
</p>
<p> Subtype name:
          </p>
<blockquote class="text">
<p> mpeg4-generic
            
</p>
</blockquote><p>
        
</p>
<p> Required parameters:
          </p>
<blockquote class="text">
<p> The "mode" parameter is required by [RFC3640]. [RFC3640]
                requests a repository for "mode", so that new values for mode
                may be added.  We request that the values "MPS-hbr" and "MPS-lbr"
                be added to the "mode" repository.
            
</p>
</blockquote><p>
        
</p>
<p> Optional parameters:
          </p>
<blockquote class="text">
<p> In the modes AAC-hbr and AAC-lbr, we request the registration of the
                additional optional parameters MPS-profile-level-id and MPS-config.
                See Section 4.1 for usage details of these parameters in the modes AAC-hbr and AAC-lbr.
            
</p>
<p> In the modes MPS-hbr and MPS-lbr, the use of optional parameters is according [RFC3640].
            
</p>
</blockquote><p>
        
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Usage of SDP</h3>

<p>It is assumed that the Media format parameters are conveyed via an SDP message as specified in <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a>, section 4.4.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
        RTP packets using the payload format defined in this memo are subject to the security considerations of the RTP specification <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> and <a class='info' href='#RFC3640'>[RFC3640]<span> (</span><span class='info'>van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;RTP Payload Format for Transport of MPEG-4 Elementary Streams,&rdquo; November&nbsp;2003.</span><span>)</span></a> which is extended with this memo. This implies that confideniality of the media streams is achieved by encryption. Because the data compression used with this payload format is applied end-to-end, encryption may be performed on the compressed data so there is no conflict between the two operations.
        
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="14496-1">[14496-1]</a></td>
<td class="author-text">MPEG, &ldquo;ISO/IEC International Standard 14496-1 - Coding of audio-visual objects, Part 1 Systems,&rdquo; 2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="14496-3">[14496-3]</a></td>
<td class="author-text">MPEG, &ldquo;ISO/IEC International Standard 14496-3 - Coding of audio-visual objects, Part 3 Audio,&rdquo; 2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="23003-1">[23003-1]</a></td>
<td class="author-text">MPEG, &ldquo;ISO/IEC International Standard 23003-1 - MPEG Surround (MPEG D),&rdquo; 2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-decoding-dependency">[I-D.ietf-mmusic-decoding-dependency]</a></td>
<td class="author-text">Schierl, T. and S. Wenger, &ldquo;<a href="http://tools.ietf.org/id/draft-ietf-mmusic-decoding-dependency-01.txt">Signaling media decoding dependency in Session Description Protocol (SDP)</a>,&rdquo; I-D&nbsp;ietf-mmusic-decoding-dependency, February&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3550.txt">TXT</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc3550.ps">PS</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3640">[RFC3640]</a></td>
<td class="author-text">van der Meer, J., Mackie, D., Swaminathan, V., Singer, D., and P. Gentric, &ldquo;<a href="http://tools.ietf.org/html/rfc3640">RTP Payload Format for Transport of MPEG-4 Elementary Streams</a>,&rdquo; RFC&nbsp;3640, November&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3640.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Frans de Bont</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Philips Electronics</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">High Tech Campus 5</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">5656 AE Eindhoven, </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NL</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">++31 40 2740234</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:frans.de.bont@philips.com">frans.de.bont@philips.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stefan Doehla</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fraunhofer IIS</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Am Wolfmantel 33</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">91058 Erlangen, </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">DE</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 9131 776 6042</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:stefan.doehla@iis.fraunhofer.de">stefan.doehla@iis.fraunhofer.de</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Malte Schmidt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dolby Laboratories</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Deutschherrnstr. 15-19</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">90537 Nuernberg, </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">DE</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 911 928 91 42</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:malte.schmidt@dolby.com">malte.schmidt@dolby.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ralph Sperschneider</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fraunhofer IIS</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Am Wolfmantel 33</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">91058 Erlangen, </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">DE</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 9131 776 6167</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ralph.sperschneider@iis.fraunhofer.de">ralph.sperschneider@iis.fraunhofer.de</a></td></tr>
</table>
</body></html>
