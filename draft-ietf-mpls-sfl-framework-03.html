<!DOCTYPE html> 


<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    draft-ietf-mpls-sfl-framework-03
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-mpls-sfl-framework/">
  <meta name="description" content="Synonymous Flow Label Framework (Internet-Draft, 2018)">


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.46.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.46.0/ietf/images/apple-touch-icon.png">
  <script async src='/cdn-cgi/bm/cv/669835187/api.js'></script></head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgred"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.ietf.org/archive/id/draft-ietf-mpls-sfl-framework-03.txt" title="Plaintext version of this document">txt</a>|<a href="/doc/pdf/draft-ietf-mpls-sfl-framework-03">pdfized</a>|<a href="/doc/draft-ietf-mpls-sfl-framework/03/bibtex/" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/draft-ietf-mpls-sfl-framework/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/mpls/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-mpls-sfl-framework@ietf.org?subject=draft-ietf-mpls-sfl-framework" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-mpls-sfl-framework-03.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-mpls-sfl-framework-03.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-mpls-sfl-framework-03.txt" title="Run an idnits check of this document">Nits</a>]

Versions: (<a href="/doc/html/draft-bryant-mpls-sfl-framework">draft-bryant-mpls-sfl-framework</a>)   <a href="/doc/html/draft-ietf-mpls-sfl-framework-00">00</a>        <a class="text-warning" href="/ipr/search/?submit=draft&amp;id=draft-ietf-mpls-sfl-framework">IPR declarations</a>
          <a href="/doc/html/draft-ietf-mpls-sfl-framework-01">01</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-02">02</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-03"><b>03</b></a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-04">04</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-05">05</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-06">06</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-07">07</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-08">08</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-09">09</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-10">10</a> <a href="/doc/html/draft-ietf-mpls-sfl-framework-11">11</a> <a href="/doc/html/rfc8957">rfc8957</a>                      </pre>
      </div>
    

    <div class="draftcontent">
    <pre>MPLS Working Group                                             S. Bryant
Internet-Draft                                                   M. Chen
Intended status: Informational                                     Z. Li
Expires: December 20, 2018                                        Huawei
                                                              G. Swallow
                                               Southend Technical Center
                                                            S. Sivabalan
                                                           Cisco Systems
                                                               G. Mirsky
                                                               ZTE Corp.
                                                           June 18, 2018


                    <span class="h1">Synonymous Flow Label Framework</span>
                    <span class="h1">draft-ietf-mpls-sfl-framework-03</span>

Abstract

   <a href="/doc/html/rfc8372">RFC 8372</a> describes the requirement for introducing flow identities
   within the MPLS architecture.  This document describes a method of
   accomplishing this by using a technique called Synonymous Flow Labels
   in which labels which mimic the behaviour of other labels provide the
   identification service.  These identifiers can be used to trigger
   per-flow operations on the on the packet at the receiving label
   switching router.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of <a href="/doc/html/bcp78">BCP 78</a> and <a href="/doc/html/bcp79">BCP 79</a>.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at <a href="https://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as &quot;work in progress.&quot;

   This Internet-Draft will expire on December 20, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.




<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Requirements Language . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-3">3</a>.  Synonymous Flow Labels  . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-4">4</a>.  User Service Traffic in the Data Plane  . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-4.1">4.1</a>.  Applications Label Present  . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-4.1.1">4.1.1</a>.  Setting TTL and the Traffic Class Bits  . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-4.2">4.2</a>.  Single Label Stack  . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
       <a href="#section-4.2.1">4.2.1</a>.  Setting TTL and the Traffic Class Bits  . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-4.3">4.3</a>.  Aggregation of SFL Actions  . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-5">5</a>.  Equal Cost Multipath Considerations . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-6">6</a>.  Privacy Considerations  . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-8">8</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-9">9</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-9.1">9.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-9.2">9.2</a>.  Informative References  . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   Authors&#x27; Addresses  . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   [<a id="ref-RFC8372">RFC8372</a>] describes the requirement for introducing flow identities
   within the MPLS architecture.

   This document describes a method of accomplishing this by using a
   technique called Synonymous Flow Labels (SFL) (see (<a href="#section-2">Section 2</a>)) in
   which labels which mimic the behaviour of other labels provide the
   identification service.  These identifiers can be used to trigger
   per-flow operations on the packet at the receiving label switching
   router.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Requirements Language</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and
   &quot;OPTIONAL&quot; in this document are to be interpreted as described in BCP




<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


   14 [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>] [<a href="/doc/html/rfc8174" title="&quot;Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words&quot;">RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Synonymous Flow Labels</span>

   An SFL is defined to be a label that causes exactly the same
   behaviour at the egress Label Switching Router (LSR) as the label it
   replaces, but in addition also causes an agreed action to take place
   on the packet.  There are many possible additional actions such as
   the measurement of the number of received packets in a flow,
   triggering IPFIX inspection, triggering other types of Deep Packet
   Inspection, or identification of the packet source.  In, for example,
   a Performance Monitoring (PM) application, the agreed action could be
   the recording of the receipt of the packet by incrementing a packet
   counter.  This is a natural action in many MPLS implementations, and
   where supported this permits the implementation of high quality
   packet loss measurement without any change to the packet forwarding
   system.

   Consider an MPLS application such as a pseudowire (PW), and consider
   that it is desired to use the approach specified in this document to
   make a packet loss measurement.  By some method outside the scope of
   this text, two labels, synonymous with the PW labels are obtained
   from the egress terminating provider edge (T-PE).  By alternating
   between these SFLs and using them in place of the PW label, the PW
   packets may be batched for counting without any impact on the PW
   forwarding behaviour (note that strictly only one SFL is needed in
   this application, but that is an optimization that is a matter for
   the implementor).

   Now consider an MPLS application that is multi-point to point such as
   a VPN.  Here it is necessary to identify a packet batch from a
   specific source.  This is achieved by making the SFLs source
   specific, so that batches from one source are marked differently from
   batches from another source.  The sources all operate independently
   and asynchronously from each other, independently co-ordinating with
   the destination.  Each ingress is thus able to establish its own SFL
   to identify the sub-flow and thus enable PM per flow.

   Finally we need to consider the case where there is no MPLS
   application label such as occurs when sending IP over an LSP.  In
   this case introducing an SFL that was synonymous with the LSP label
   would introduce network wide forwarding state.  This would not be
   acceptable for scaling reasons.  We therefore have no choice but to
   introduce an additional label.  Where penultimate hop popping (PHP)
   is in use, the semantics of this additional label can be similar to
   the LSP label.  Where PHP is not in use, the semantics are similar to




<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


   an MPLS explicit NULL [<a href="/doc/html/rfc3032" title="&quot;MPLS Label Stack Encoding&quot;">RFC3032</a>].  In both of these cases the label
   has the additional semantics of the SFL.

   Note that to achieve the goals set out in <a href="#section-1">Section 1</a> SFLs need to be
   allocated from the platform label table.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  User Service Traffic in the Data Plane</span>

   As noted in <a href="#section-3">Section 3</a> it is necessary to consider two cases:

   1.  Applications label present

   2.  Single label stack

<span class="h3"><a class="selflink" id="section-4.1" href="#section-4.1">4.1</a>.  Applications Label Present</span>

   Figure 1 shows the case in which both an LSP label and an application
   label are present in the MPLS label stack.  Traffic with no SFL
   function present runs over the &quot;normal&quot; stack, and SFL enabled flows
   run over the SFL stack with the SFL used to indicate the packet
   batch.

    +-----------------+          +-----------------+
    |                 |          |                 |
    |      LSP        |          |      LSP        | &lt;May be PHPed
    |     Label       |          |     Label       |
    +-----------------+          +-----------------+
    |                 |          |                 |
    |  Application    |          | Synonymous Flow |
    |     Label       |          |     Label       |
    +-----------------+          +-----------------+ &lt;= Bottom of stack
    |                 |          |                 |
    |   Payload       |          |   Payload       |
    |                 |          |                 |
    +-----------------+          +-----------------+


   &quot;Normal&quot; Label Stack         Label Stack with SFL

    Figure 1: Use of Synonymous Labels In A Two Label MPLS Label Stack

   At the egress LSR the LSP label is popped (if present).  Then the SFL
   is processed in exactly the same way as the corresponding application
   label would have been processed.







<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


<span class="h4"><a class="selflink" id="section-4.1.1" href="#section-4.1.1">4.1.1</a>.  Setting TTL and the Traffic Class Bits</span>

   The TTL and the Traffic Class bits [<a href="/doc/html/rfc5462" title="&quot;Multiprotocol Label Switching (MPLS) Label Stack Entry: &quot;">RFC5462</a>] in the SFL LSE would
   normally be set to the same value as would have been set in the label
   that the SFL is synonymous with.  However it is recognised that there
   may be an applications need to set the SFL to some other value.  An
   example would be where it was desired to cause the SFL to trigger an
   action in the TTL expiry exception path as part of the label action.

<span class="h3"><a class="selflink" id="section-4.2" href="#section-4.2">4.2</a>.  Single Label Stack</span>

   Figure 2 shows the case in which only an LSP label is present in the
   MPLS label stack.  Traffic with no SFL function present runs over the
   &quot;normal&quot; stack and SFL enabled flows run over the SFL stack with the
   SFL used to indicate the packet batch.  However in this case it is
   necessary for the ingress LSR to first push the SFL and then to push
   the LSP label.

                                 +-----------------+
                                 |                 |
                                 |      LSP        | &lt;= May be PHPed
                                 |     Label       |
    +-----------------+          +-----------------+
    |                 |          |                 | &lt;= Synonymous with
    |      LSP        |          | Synonymous Flow |    Explicit NULL
    |     Label       |          |     Label       |
    +-----------------+          +-----------------+ &lt;= Bottom of stack
    |                 |          |                 |
    |   Payload       |          |   Payload       |
    |                 |          |                 |
    +-----------------+          +-----------------+


   &quot;Normal&quot; Label Stack         Label Stack with SFL

   Figure 2: Use of Synonymous Labels In A Single Label MPLS Label Stack

   At the receiving LSR it is necessary to consider two cases:

   1.  Where the LSP label is still present

   2.  Where the LSP label is penultimate hop popped

   If the LSP label is present, it processed exactly as it would
   normally processed and then it is popped.  This reveals the SFL which
   in the case of [<a href="/doc/html/rfc6374" title="&quot;Packet Loss and Delay Measurement for MPLS Networks&quot;">RFC6374</a>] measurements is simply counted and then
   discarded.  In this respect the processing of the SFL is synonymous




<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


   with an MPLS Explicit NULL.  As the SFL is the bottom of stack, the
   IP packet that follows is processed as normal.

   If the LSP label is not present due to PHP action in the upstream
   LSR, two almost equivalent processing actions can take place.  Either
   the SFL can be treated as an LSP label that was not PHPed and the
   additional associated SFL action is taken when the label is
   processed.  Alternatively, it can be treated as an MPLS Explicit NULL
   with associated SFL actions.  From the perspective of the measurement
   system described in this document the behaviour of two approaches are
   indistinguishable and thus either may be implemented.

<span class="h4"><a class="selflink" id="section-4.2.1" href="#section-4.2.1">4.2.1</a>.  Setting TTL and the Traffic Class Bits</span>

   The TTL and the Traffic Class considerations described in
   <a href="#section-4.1.1">Section 4.1.1</a> apply.

<span class="h3"><a class="selflink" id="section-4.3" href="#section-4.3">4.3</a>.  Aggregation of SFL Actions</span>

   There are cases where it is desirable to aggregate an SFL action
   against a number of labels.  For example where it is desirable to
   have one counter record the number of packets received over a group
   of application labels, or where the number of labels used by a single
   application is large, and consequently the increase in the number of
   allocated labels needed to support the SFL actions consequently
   becomes too large to be viable.  In these circumstances it would be
   necessary to introduce an additional label in the stack to act as an
   aggregate instruction.  This is not strictly a synonymous action in
   that the SFL is not replacing a existing label, but is somewhat
   similar to the single label case shown in <a href="#section-4.2">Section 4.2</a>, and the same
   signalling, management and configuration tools would be applicable.




















<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


                                 +-----------------+
                                 |                 |
                                 |      LSP        | &lt; May be PHPed
                                 |     Label       |
    +-----------------+          +-----------------+
    |                 |          |                 |
    |      LSP        |          |   Aggregate     |
    |     Label       |          |      SFL        |
    +-----------------+          +-----------------+
    |                 |          |                 |
    |  Application    |          |  Application    |
    |     Label       |          |     Label       |
    +-----------------+          +-----------------+ &lt;= Bottom of stack
    |                 |          |                 |
    |   Payload       |          |   Payload       |
    |                 |          |                 |
    +-----------------+          +-----------------+


   &quot;Normal&quot; Label Stack         Label Stack with SFL

                      Figure 3: Aggregate SFL Actions

   The Aggregate SFL is shown in the label stack depicted in Figure 3 as
   preceding the application label, however the choice of position
   before, or after, the application label will be application specific.
   In the case described in <a href="#section-4.1">Section 4.1</a>, by definition the SFL has the
   full application context.  In this case the positioning will depend
   on whether the SFL action needs the full context of the application
   to perform its action and whether the complexity of the application
   will be increased by finding an SFL following the application label.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Equal Cost Multipath Considerations</span>

   The introduction to an SFL to an existing flow may cause that flow to
   take a different path through the network under conditions of Equal
   Cost Multipath (ECMP).  This is turn may invalidate the certain uses
   of the SFL such as performance measurement applications.  Where this
   is a problem there are two solutions worthy of consideration:

   1.  The operator can elect to always run with the SFL in place in the
       MPLS label stack.

   2.  The operator can elect to use [<a href="/doc/html/rfc6790" title="&quot;The Use of Entropy Labels in MPLS Forwarding&quot;">RFC6790</a>] Entropy Labels in a
       network that fully supports this type of ECMP.  If this approach
       is adopted, the intervening MPLS network MUST NOT load balance on
       any packet field other than the entropy label.  Note that this is
       stricter than the text in <a href="/doc/html/rfc6790#section-4.2">Section&nbsp;4.2 of [RFC6790]</a>.  In networks



<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 7]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-8" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


       in which the ECMP decision is independent of both the value of
       any other label in the label stack, and the MPLS payload, the
       path of the flow with the SFL will be congruent with the path
       without the SFL.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Privacy Considerations</span>

   IETF concerns on pervasive monitoring are described in [<a href="/doc/html/rfc7258" title="&quot;Pervasive Monitoring Is an Attack&quot;">RFC7258</a>].
   The inclusion of originating and/or flow information in a packet
   provides more identity information and hence potentially degrades the
   privacy of the communication.  Whilst the inclusion of the additional
   granularity does allow greater insight into the flow characteristics
   it does not specifically identify which node originated the packet
   other than by inspection of the network at the point of ingress, or
   inspection of the control protocol packets.  This privacy threat may
   be mitigated by encrypting the control protocol packets, regularly
   changing the synonymous labels and by concurrently using a number of
   such labels.  Minimizing the scope of the identity indication can be
   useful in minimizing the observability of the flow characteristics.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  Security Considerations</span>

   The issue noted in <a href="#section-6">Section 6</a> is a security consideration.  There are
   no other new security issues associated with the MPLS dataplane.  Any
   control protocol used to request SFLs will need to ensure the
   legitimacy of the request.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>.  IANA Considerations</span>

   This draft makes no IANA requests.

<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  References</span>

<span class="h3"><a class="selflink" id="section-9.1" href="#section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-</a>
              <a href="https://www.rfc-editor.org/info/rfc2119">editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3032">RFC3032</a>]  Rosen, E., Tappan, D., Fedorkow, G., Rekhter, Y.,
              Farinacci, D., Li, T., and A. Conta, &quot;MPLS Label Stack
              Encoding&quot;, <a href="/doc/html/rfc3032">RFC 3032</a>, DOI 10.17487/RFC3032, January 2001,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3032">https://www.rfc-editor.org/info/rfc3032</a>&gt;.







<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 8]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-9" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


   [<a id="ref-RFC5462">RFC5462</a>]  Andersson, L. and R. Asati, &quot;Multiprotocol Label Switching
              (MPLS) Label Stack Entry: &quot;EXP&quot; Field Renamed to &quot;Traffic
              Class&quot; Field&quot;, <a href="/doc/html/rfc5462">RFC 5462</a>, DOI 10.17487/RFC5462, February
              2009, &lt;<a href="https://www.rfc-editor.org/info/rfc5462">https://www.rfc-editor.org/info/rfc5462</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., &quot;Ambiguity of Uppercase vs Lowercase in <a href="/doc/html/rfc2119">RFC</a>
              <a href="/doc/html/rfc2119">2119</a> Key Words&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

<span class="h3"><a class="selflink" id="section-9.2" href="#section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-RFC6374">RFC6374</a>]  Frost, D. and S. Bryant, &quot;Packet Loss and Delay
              Measurement for MPLS Networks&quot;, <a href="/doc/html/rfc6374">RFC 6374</a>,
              DOI 10.17487/RFC6374, September 2011, &lt;<a href="https://www.rfc-editor.org/info/rfc6374">https://www.rfc-</a>
              <a href="https://www.rfc-editor.org/info/rfc6374">editor.org/info/rfc6374</a>&gt;.

   [<a id="ref-RFC6790">RFC6790</a>]  Kompella, K., Drake, J., Amante, S., Henderickx, W., and
              L. Yong, &quot;The Use of Entropy Labels in MPLS Forwarding&quot;,
              <a href="/doc/html/rfc6790">RFC 6790</a>, DOI 10.17487/RFC6790, November 2012,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6790">https://www.rfc-editor.org/info/rfc6790</a>&gt;.

   [<a id="ref-RFC7258">RFC7258</a>]  Farrell, S. and H. Tschofenig, &quot;Pervasive Monitoring Is an
              Attack&quot;, <a href="/doc/html/bcp188">BCP 188</a>, <a href="/doc/html/rfc7258">RFC 7258</a>, DOI 10.17487/RFC7258, May
              2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7258">https://www.rfc-editor.org/info/rfc7258</a>&gt;.

   [<a id="ref-RFC8372">RFC8372</a>]  Bryant, S., Pignataro, C., Chen, M., Li, Z., and G.
              Mirsky, &quot;MPLS Flow Identification Considerations&quot;,
              <a href="/doc/html/rfc8372">RFC 8372</a>, DOI 10.17487/RFC8372, May 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8372">https://www.rfc-editor.org/info/rfc8372</a>&gt;.

Authors&#x27; Addresses

   Stewart Bryant
   Huawei

   Email: stewart.bryant@gmail.com


   Mach Chen
   Huawei

   Email: mach.chen@huawei.com


   Zhenbin Li
   Huawei

   Email: lizhenbin@huawei.com



<span class="grey">Bryant, et al.          Expires December 20, 2018               [Page 9]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-10" ></span>
<span class="grey">Internet-Draft                   MPLS FL                       June 2018</span>


   George Swallow
   Southend Technical Center

   Email: swallow.ietf@gmail.com


   Siva Sivabalan
   Cisco Systems

   Email: msiva@cisco.com


   Gregory Mirsky
   ZTE Corp.

   Email: gregimirsky@gmail.com



































Bryant, et al.          Expires December 20, 2018              [Page 10]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  <script type="text/javascript">(function(){window['__CF$cv$params']={r:'6e95d814780f95ea',m:'NPKzX0r8o87UqZeuC3zLnpgTcH7KvchG913DC0beyiU-1646850231-0-AZNLd+BiVkj+R0ob8m4MBNgnPwePGdoH0gN49642lNEDcBVgzwZXJaBwjuTiU4P6ZEnhx5pGX+KBS4lfXv/yKHfAfQQZ1RSS8yUQysRPk56a3kIB7j2j84WkN4tFh2qx3oJXo8U2IuVwkZ6QYsUkREdQvphzhVTKmXaGTevNRVe1',s:[0x2f030ad89a,0xf8e48f615a],}})();</script></body>
</html>