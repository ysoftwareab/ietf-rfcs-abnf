<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>SMTP Service Extension for Greylisting Operations</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Background">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Document Conventions">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Definitions and Acronyms">
<link href="#rfc.section.1.4" rel="Chapter" title="1.4 Out of Scope Considerations">
<link href="#rfc.section.2" rel="Chapter" title="2 Greylisting Basic Framework">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Recording Sender Information (Triplet)">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 SMTP Server Rejection Points">
<link href="#rfc.section.2.2.1" rel="Chapter" title="2.2.1 Connection Greeting">
<link href="#rfc.section.2.2.2" rel="Chapter" title="2.2.2 MAIL FROM">
<link href="#rfc.section.2.2.3" rel="Chapter" title="2.2.3 RCPT TO">
<link href="#rfc.section.2.2.4" rel="Chapter" title="2.2.4 DATA">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 4yz Format Structure">
<link href="#rfc.section.2.3.1" rel="Chapter" title="2.3.1 421 vs 45z Reply Codes">
<link href="#rfc.section.2.4" rel="Chapter" title="2.4 Recommended Blocking Times">
<link href="#rfc.section.3" rel="Chapter" title="3 SMTP Service Keyword">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 SMTP Client/Server Implementation">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 SMTP Server Implementation">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 SMTP Client Implementation">
<link href="#rfc.section.4" rel="Chapter" title="4 Examples">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Additional Greylist Parameters">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Augmenting Other Standard Email Filters Methods">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C TO DO LIST">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="GREYLIST is a SMTP extension to formalize the widely supported Greylisting mail filtering method and to help support SMTP rejected transports by following a new formal structured 4yz server temporary rejection response by including a retry=time tag string which SMTP clients can use to optimize the rescheduling of the mail delivery attempts. With adoption, network overhead reduction in wasteful mail delivery attempts will be realized." />
  <meta name="description" content="GREYLIST is a SMTP extension to formalize the widely supported Greylisting mail filtering method and to help support SMTP rejected transports by following a new formal structured 4yz server temporary rejection response by including a retry=time tag string which SMTP clients can use to optimize the rescheduling of the mail delivery attempts. With adoption, network overhead reduction in wasteful mail delivery attempts will be realized." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">H. Santos, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Santronics Software, Inc.</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">E. Harris</td>
</tr>
<tr>
<td class="left">Expires: April 26, 2012</td>
<td class="right">puremagic.com</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 24, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">SMTP Service Extension for Greylisting Operations<br />
  <span class="filename">draft-santos-smtpgrey-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>GREYLIST is a SMTP extension to formalize the widely supported Greylisting mail filtering method and to help support SMTP rejected transports by following a new formal structured 4yz server temporary rejection response by including a retry=time tag string which SMTP clients can use to optimize the rescheduling of the mail delivery attempts. With adoption, network overhead reduction in wasteful mail delivery attempts will be realized.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 26, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Background</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Document Conventions</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Definitions and Acronyms</a>
</li>
<li>1.4.   <a href="#rfc.section.1.4">Out of Scope Considerations</a>
</li>
<li>2.   <a href="#rfc.section.2">Greylisting Basic Framework</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Recording Sender Information (Triplet)</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">SMTP Server Rejection Points</a>
</li>
<li>2.2.1.   <a href="#rfc.section.2.2.1">Connection Greeting</a>
</li>
<li>2.2.2.   <a href="#rfc.section.2.2.2">MAIL FROM</a>
</li>
<li>2.2.3.   <a href="#rfc.section.2.2.3">RCPT TO</a>
</li>
<li>2.2.4.   <a href="#rfc.section.2.2.4">DATA</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">4yz Format Structure</a>
</li>
<li>2.3.1.   <a href="#rfc.section.2.3.1">421 vs 45z Reply Codes</a>
</li>
<li>2.4.   <a href="#rfc.section.2.4">Recommended Blocking Times</a>
</li>
<li>3.   <a href="#rfc.section.3">SMTP Service Keyword</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">SMTP Client/Server Implementation</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">SMTP Server Implementation</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">SMTP Client Implementation</a>
</li>
<li>4.   <a href="#rfc.section.4">Examples</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Additional Greylist Parameters</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Augmenting Other Standard Email Filters Methods</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">TO DO LIST</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">In 2003, a non-IETF technology called GreyListing was invented by <a href="#HARRIS">Evan Harris</a> <cite title="NONE">[HARRIS]</cite> as a very effective method of enhancing the abilities of <a href="#RFC5321">SMTP</a> <cite title="NONE">[RFC5321]</cite> mail systems to limit the amount of unwanted, abusive mail that they receive and deliver to their users. Mail systems supporting GreyListing has grown over the years to become a "pseudo standard" among many SMTP operations.</p>
<p id="rfc.section.1.p.2">This specification provides a formal IETF specification to the Greylisting framework, learned practices and introduces a SMTP extension to reduce the network, traffic overheads and mail delivery delays associated with SMTP Greylisting operations.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Background</h1>
<p id="rfc.section.1.1.p.1">Greylisting was originally tested on a few small scale mail hosts (less than 100 users, though with a fairly diverse set of senders from all over the world, and volumes over 10,000 email attempts a day).  Currently, Greylisting is in use on many mail servers, including ones processing several millions of messages per day. It was designed to be scalable and marginal impact to both administrators and users, and should be acceptable for use on a wide range of systems. Of course, performance issues are very dependent on implementation details.</p>
<p><em>How does Greylisting work?</em></p>
<p id="rfc.section.1.1.p.3">Greylisting works by leveraging the standard SMTP client design expectation to retry sending mail after an initial 4yz temporary rejection response is issued by the server. When the greylisted recorded SMTP client reschedules and retries the same transaction, the GreyListing server will allow the greylisted recorded sender to continue with the transaction.</p>
<p id="rfc.section.1.1.p.4">While the idea of using an intentional 4yz rejection to force SMTP clients to retry sending mail would naturally be considered a radical concept for the IETF purist and most likely would not have been endorsed as an IETF standard protocol, the proof of concept has long been established as a very effective means to control certain types of malicious and abusive mail senders and today, Greylisting is a widely recognized mail filtering method and Greylisting SMTP Servers are widely implemented by many in the IETF mail community.</p>
<p><em>What sort of mail senders does Greylisting address?</em></p>
<p id="rfc.section.1.1.p.6">By leveraging the SMTP retry expectation for clients, Greylisting is very effective against mail senders who anonymously and randomly perform a "Single Shot" mail sending attempt and will never repeat the same transaction after the sender has been initially rejected. The high payoff has been the nearly 100% of all mail senders behaving as "single shot" mail senders are abusive and/or malicious in nature.</p>
<p id="rfc.section.1.1.p.7">Greylisting can not address abusive mail senders using compliant SMTP mail clients. However, it has been observed that many abusive mail senders will retry again and often immediately within a short time delay. Hence, the Greylisting concept includes the idea of using a "Blocking Time" factor where a greylisted recorded mail sender is blocked for a certain time period. Only when the blocking time has expired, will the GreyListing server finally allow the mail sender to continue with the transaction.</p>
<p><em>What sort of impact has Greylisting had with Mail Delivery?</em></p>
<p id="rfc.section.1.1.p.9">Greylisting has been designed since its conception to satisfy certain criteria:</p>
<p></p>

<ul>
<li>Enforce SMTP compliance with expected SMTP retry strategies,</li>
<li>Limit abusive mail senders ability to circumvent the blocking,</li>
<li>Have minimal impact on users, and</li>
<li>Require minimal maintenance at both the user and administrator level.</li>
</ul>
<p id="rfc.section.1.1.p.11">The first immediate impact are the increasing delays in mail delivery due to the wide range in Greylisting blocking time values which can be seconds, minutes to hours. Since SMTP has a standard recommendation to implement a Progressive Retry queuing strategy (see section 4.5.4.1 in <a href="#RFC5321">RFC5321</a> <cite title="NONE">[RFC5321]</cite>) where the first few attempts have short delays (i.e. two attempts within the first hour) with a progressive back off longer delay before the maximum attempts (i.e. over 4-5 days) are exhausted, there are increasing wasted attempts and foremost higher delays in delivering mail. When a SMTP client implements an initial retry lower than the remote GreyListing Server blocking time, the SMTP client will have increasing wasted attempts overhead. When the SMTP client implements an initial retry delay higher than the remote GreyListing Server blocking time, the SMTP client will have unnecessary wasted mail delays in delivering mail.</p>
<p id="rfc.section.1.1.p.12">With the increasing deployment of Greylisting mail servers, the second impact is such that even the SMTP server who does not employ Greylisting, will more than likely increasingly connect to a remote mail server that does employ Greylisting and will experience the temporary rejection overhead requiring additional mail sending retries.</p>
<p id="rfc.section.1.1.p.13">The third impact is that many GreyListing servers now use the rejection idea at the connection level using a 421 greeting response which may be a different retry condition than a 45z rejection response issued at the MAIL FROM or DATA state. Since many MTA clients see a 421 as a possible loading limit, it may use this to immediately reschedule a retry using a different MX/IP host..</p>
<p id="rfc.section.1.1.p.14">Overall, Greylisting was designed to address the high abuse of "single shot" anonymous mail senders, however it was done at the expense of legitimate mail senders experiencing wasted mail attempts and increasing delivery delays and with improper GreyListing server and client settings, SMTP clients may now have to revisit their queuing strategies to address the Greylisting overhead related issues.</p>
<p id="rfc.section.1.1.p.15">This specification provides insights into preparing a low impact Greylisting Server by providing some recommendations for blocking delays and defining a formal structure GreyListing server to optionally include a suggested retry=time information in the server's 4yz temporary text responses.</p>
<p id="rfc.section.1.1.p.16">This specification does not attempt to alter existing IETF standard SMTP and non-IETF standard Greylisting protocols other than to provide augmented Greylisting techniques to help alleviate the overhead associated with Greylisting in the client/server SMTP transport process.</p>
<p id="rfc.section.1.1.p.17">The Greylisting method specified in this document is a complementary method to any other existing mail filtering control systems, and is not intended as a replacement for those other methods.  In fact, it is expected that abusive mail senders will eventually try to minimize the effectiveness of this method of blocking, and Greylisting is designed to limit options available to the mail senders when attempting to do so. The positive outcome of Greylisting is that the only methods of circumventing it will tend to make other mail filtering control techniques just that much more effective (primarily DNS and other methods of blacklisting based on IP address) even after any adaptation by the abusive mail senders has occurred.</p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Document Conventions</h1>
<p id="rfc.section.1.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> Definitions and Acronyms</h1>
<p></p>

<dl>
<dt>MTA</dt>
<dd style="margin-left: 5">Mail Transfer Agent. Sender or Receiver of mail.  Generally viewed as a router within a MSA intra-network where there is a inherent authentication.<br><br>
</dd>
<dt>MUA</dt>
<dd style="margin-left: 5">Mail User Agent. Online or offline mail reader/writer software. Typically has its own MTA component for sending mail.<br><br>
</dd>
<dt>MSA</dt>
<dd style="margin-left: 5">Mail Submission Agent. Generally associated with a MUA sending message to a ISP or ESP where there is an authorized or authenticated association with the MUA.<br><br>
</dd>
<dt>MDA</dt>
<dd style="margin-left: 5">Mail Destination Agent. Generally associated as the final destination of the message where the message is typically targeted for a local user. If the MDA is going to route the mail, then its behaving more as a MSA or MTA.<br><br>
</dd>
</dl>
<h1 id="rfc.section.1.4">
<a href="#rfc.section.1.4">1.4.</a> Out of Scope Considerations</h1>
<p id="rfc.section.1.4.p.1">The following are out of scope considerations in this specification:</p>
<p></p>

<ul class="empty">
<li>o how Greylisting information is recorded in databases,</li>
<li>o what additional mail information is recorded in databases beyond the Triplet recording, and</li>
<li>o server reasons for an 4yz response outside a Greylisting reason, such as SMTP Traffic Control concepts.</li>
</ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Greylisting Basic Framework</h1>
<p id="rfc.section.2.p.1">The basic idea of GreyListing is:</p>
<p></p>

<ol>
<li>MTA Client initiates a mail delivery attempt to a remote GreyListing compliant mail receiver (MDA),<br><br>
</li>
<li>The GreyListing Server collects first time session information about the sender such as connection IP, MAIL FROM and RCPT TO called the Triplet.<br><br>
</li>
<li>If the Triplet was never recorded before, the Triplet is recorded and a 4yz rejection server response with a recommended retry=time hint is issued where the time reflects the blocking time the sender can attempt again and proceed with the transaction.<br><br>
</li>
<li>If the Triplet was recorded, a check is performed to determine if the blocking time has expired. If not, another 4yz rejection response with a new retry=time hint reflecting the new blocking time is issued.<br><br>
</li>
<li>When the sender tries again with the same recorded information after the blocking time has expired, then the sender has passed the server's greylist test and is allowed to proceed to send the mail.</li>
</ol>
<p id="rfc.section.2.p.3">One of the essential goals of this specification is to reduce the network and communications overhead in sender attempts and to reduce mail delivery delays by implementing the server retry=time hints in the 4yz greylist responses.</p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Recording Sender Information (Triplet)</h1>
<p id="rfc.section.2.1.p.1">In the classic Greylisting protocol described in <a href="#HARRIS">HARRIS</a> <cite title="NONE">[HARRIS]</cite>, a Triplet is the unique combination of connection IP, the reverse address (MAIL FROM) and the forwarding address (RCPT TO) used to track the sender. When the sender retries with the same triplet, a lookup can be perform to determine its Greylist status. However, depending on the Greylist server implementation, it can reject at different points in the SMTP state machine and may not collect the entire triplet information.</p>
<p id="rfc.section.2.1.p.2">While it is out of scope how a SMTP session Triplet is collected and what SMTP session data points it contains, the key point is a specific Triplet used to track the MTA for an initial transaction attempt and subsequent retries in order to control it during the Greylisting Server blocking time.</p>
<p id="rfc.section.2.1.p.3">The following is an implementation example for triplet recording:</p>
<div id="#rfc.figure.1"></div>
<pre>
   Sender-Triplet = triplet-alg(CIP, RPATH, FPATH)

   where

   CIP          is the connection IP address of the client,
   RPATH        is the MAIL FROM reverse-address or domain,
   FPATH        is the RCPT TO forwarding address
   triplet-alg  is the algorithm used to generate a database tracking key
 </pre>
<p id="rfc.section.2.1.p.4">One example of a triplet-alg is using a standard hashing algorithm as such SHA1 with BASE32 encoding.</p>
<p></p>

<ul class="empty"><li>BASE64(SHA1(CIP, RPATH, FPATH))</li></ul>

<p>Other tracking methods such as index keys in SQL database tables are often common with Greylisting server implementations. This specification does not define an formal triple-alg method. Any SMTP data can be used as long as it represents Greylisting servers method for consistent tracking transactions , its initial rejection and subsequent acceptance with expected retries.</p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> SMTP Server Rejection Points</h1>
<p id="rfc.section.2.2.p.1">Greylisting assumes a triplet recording (IP, FROM and TO), however a Greylisting server can reject at any point in the SMTP state machine by recording less information about the sender. This specification hopes to assist the MTA to determine when a temporary rejection is greylist related apart from other reasons which can be a factor in how an MTA client will reschedule new attempts.</p>
<h1 id="rfc.section.2.2.1">
<a href="#rfc.section.2.2.1">2.2.1.</a> Connection Greeting</h1>
<p id="rfc.section.2.2.1.p.1">Many SMTP servers will use a 421 response during the greeting as a way to limit connections and control load.</p>
<p id="rfc.section.2.2.1.p.2">A GreyListing server deciding to greylist a client at the connection greeting MUST use a 421 reply code and SHOULD include a retry=time hint as part of the text response.</p>
<p id="rfc.section.2.2.1.p.3">The retry=time hint will help the MTA decide what sort of rejection was imposed by distinguishing between loading limit or greylist rejection. Without the retry=hint, a MTA can try an alternative MX immediately (without delay) and the rejection may still occur. Including the retry=hint will assist the MTA to better reschedule the retry.</p>
<p id="rfc.section.2.2.1.p.4">A GreyListing Server rejecting at the connection level is recording only the connection IP to track the sender.</p>
<h1 id="rfc.section.2.2.2">
<a href="#rfc.section.2.2.2">2.2.2.</a> MAIL FROM</h1>
<p id="rfc.section.2.2.2.p.1">A GreyListing server deciding to greylist a client as a response to the MAIL FROM command SHOULD use a 451 reply code and SHOULD include a retry=time hint as part of the text response. The retry=time hint will help the MTA decide when a new attempt should be attempted.</p>
<p id="rfc.section.2.2.2.p.2">A GreyListing Server rejecting at the MAIL FROM is recording the connection IP and MAIL FROM sender address.</p>
<h1 id="rfc.section.2.2.3">
<a href="#rfc.section.2.2.3">2.2.3.</a> RCPT TO</h1>
<p id="rfc.section.2.2.3.p.1">A GreyListing server deciding to greylist a client as a response to the RCPT TO command SHOULD use a 451 reply code and SHOULD include a retry=time hint as part of the text response. The retry=time hint will help the MTA decide when a new attempt should be attempted.</p>
<p id="rfc.section.2.2.3.p.2">A GreyListing Server rejecting at the RCPT TO is recording the connection IP, MAIL FROM and RCPT TO addresses.</p>
<h1 id="rfc.section.2.2.4">
<a href="#rfc.section.2.2.4">2.2.4.</a> DATA</h1>
<p id="rfc.section.2.2.4.p.1">A GreyListing server deciding to greylist a client as a response to the DATA End of Data (EOD) SHOULD use a 451 reply code and SHOULD include a retry=time hint as part of the text response. The retry=time hint will help the MTA decide when a new attempt should be attempted.</p>
<p id="rfc.section.2.2.4.p.2">Generally, a GreyListing server will allow the DATA command in order to capture the actual <a href="#RFC5322">RFC5322</a> <cite title="NONE">[RFC5322]</cite> message before a greylist response is issued. The reasons are beyond the scope of this specification.</p>
<p id="rfc.section.2.2.4.p.3">A GreyListing Server rejecting at the DATA may be recording more information besides the triplet information, i.e. Message-Id header.</p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> 4yz Format Structure</h1>
<p id="rfc.section.2.3.p.1">Many current Greylisting Servers use varying text responses with informal language try again time text information. The following are known forms of existing Greylisting Servers which expose a form of time hints within the text response:</p>
<p></p>

<ul class="empty">
<li>421 This server implements greylisting, please try again in # seconds</li>
<li>450 4.7.1 &lt;RCPT&gt;: Recipient address rejected: Greylisted for # minutes</li>
<li>450 4.7.1 &lt;RCPT&gt;: Recipient address rejected: Greylisted for # seconds</li>
<li>451 4.7.1 Greylisting in action, please come back in HH:MM:SS</li>
<li>451 Greylisted for # seconds</li>
<li>451 Greylisted, please try again in # seconds</li>
<li>451 Greylisting enabled, try again in # minutes</li>
</ul>
<p id="rfc.section.2.3.p.3">It is possible for existing MTA clients currently supporting the parsing and extraction of the time factor with the known informal responses from existing Greylisting servers and this specification does not attempt to limit specific MTA client implementations which may already exist.</p>
<p id="rfc.section.2.3.p.4">This specification offers a formal structure the Greylisting Server MAY use within their 4yz responses and the MTA client MAY use to detect and extract the retry information consistently without error using a single format within the 4yz response containing the following structured "retry=" tag:</p>
<p></p>

<ul class="empty"><li>retry=[DD-]HH:MM:SS</li></ul>
<p id="rfc.section.2.3.p.6">The [DD-]HH:MM:SS part is the time delay the MTA SHOULD wait before attempting to send the mail again. It is not a specific time of day, but rather the amount of GreyListing Server blocking time expected by the server before the client SHOULD try again. An MTA client ignoring this information, attempting again before the blocking time has expired, is a wasted attempt and can delay the mail delivery well beyond the GreyListing server blocking time.</p>
<p id="rfc.section.2.3.p.7">In ABNF, GreyListing server response syntax is:</p>
<div id="#rfc.figure.2"></div>
<pre>
Reply-Line     = ( Reply-Code [ SP textstring [SP retrytime] ] CRLF ) /
                       ( Reply-Code "-" [ SP textstring ] CRLF
                         *( Reply-Code "-" [ SP textstring ] CRLF )
                         Reply-Code [ SP textstring [SP retrytime ] ] CRLF )

textstring     = 1*(%d09 / %d32-126) ; HT, SP, Printable US-ASCII

retrytime       =   "retry=" [days "-"] hours ":" minutes ":" seconds

days            =   2DIGIT   ; 00-99

hours           =   2DIGIT   ; 00-23

minutes         =   2DIGIT   ; 00-59

seconds         =   2DIGIT   ; 00-59

Reply-code     =  "421 / 450 / 451"</pre>
<p id="rfc.section.2.3.p.8">Examples:</p>
<div id="#rfc.figure.3"></div>
<pre>Single line responses:

451 4.7.1. Greylist enabled. retry=00:02:00

451 Temporary rejection. retry=00:00:30

450 Temporary Greylist rejection. retry=01-00:10:00

451 retry=01:00:00 Try again at the suggested retry time.

421 Your connection is greylisted. Please try again later (retry=00:01:00)

Multiple lines response:

451-Greylisted. See policy http://example.com/GreyList-Policy
451 Retry=00:02:00</pre>
<p id="rfc.section.2.3.p.9">The retrytime MUST be provided in the first and only line for a single line response or the last line for a multiple line response.</p>
<h1 id="rfc.section.2.3.1">
<a href="#rfc.section.2.3.1">2.3.1.</a> 421 vs 45z Reply Codes</h1>
<p id="rfc.section.2.3.1.p.1">GreyListing Servers may issue 421 or 45z responses at any point in the SMTP session. However, RFC5321 recommends 421 be used at the greeting and for server interruption events. This specification recommends keeping with the SMTP RFC5321 recommendations for 421 and only use 45z for non-Greeting rejections responses. All SMTP compliant MTA will always follow 4yz for scheduling a retry, but the difference is a 421 can trigger an immediate retry attempt without delay at the next MX IP address, if any, where a GreyListing server will most likely reject the new attempt due to the blocking time.</p>
<p></p>

<ul class="empty"><li>IMPLEMENTATION NOTE: RFC5321 recommends a specific 450 reply code for temporary rejections related to local policy reasons.  HARRIS used 451 to make it distinctive as a greylist response.  This specification recommends using 450, however, it is recognized that many existing Greylisting servers already use 451 as the reply code. MTA MUST NOT depend on 450 or 451 to make retry decisions. All 4yz responses MUST be interpreted as a temporary rejection.</li></ul>

<p>When the retry=time hint is implemented in the response, compliant MTA will be able to determine the difference between a load restriction and a greylisted rejection to appropriately reschedule a new attempt at the GreyListing server's suggested time hint.</p>
<h1 id="rfc.section.2.4">
<a href="#rfc.section.2.4">2.4.</a> Recommended Blocking Times</h1>
<p id="rfc.section.2.4.p.1">This specification does not impose any specific blocking delay value when 4yz rejections are issued by servers, other than to suggest that timely delivery of mail to users remains to be an inherent expectation by SMTP clients and SMTP servers.</p>
<p id="rfc.section.2.4.p.2">The GreyListing server blocking times vary greatly in practice, but there is empirical evidence a majority of systems use a 1 to 5 minute delay. Many use 10 minutes or 15 minutes. Many use less than 1 minute, like 30 to 55 seconds. The latter tend to be systems who wish to lower impact with immediate and timely mail delivery delays. However, this can be wasteful attempts when the MTA is operating blindly with unknown blocking times imposed by Greylisting Servers.</p>
<p id="rfc.section.2.4.p.3">When it comes to a recommendation, there is no GreyListing logic to suggest that long delays be use when the goal of Greylisting senders is to address the anonymous random "single shot" senders where their triplet will never be the same. Delaying good SMTP senders for extended unreasonable periods defeats the goal of Greylisting.</p>
<p id="rfc.section.2.4.p.4">Since there is no clear recommendation for a blocking time delay (other than to keep it short as possible), this specification offers the retry=time hint as a method to alleviate the uncertainty in the wasted attempts and delays in timely mail delivery.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> SMTP Service Keyword</h1>
<p id="rfc.section.3.p.1">GREYLIST is a new <a href="#RFC1651">ESMTP</a> <cite title="NONE">[RFC1651]</cite> service keyword. The GreyListing Server MAY add this optional keyword as a response to EHLO command. EHLO response Format:</p>
<p id="rfc.section.3.p.2">250-GREYLIST [server-options]</p>
<p id="rfc.section.3.p.3">If the GREYLIST keyword is presented as part of the EHLO response, it means the server has Greylisting implemented and 4yz responses are possible due to a Greylist decision by the server to impose on the client. The keyword is not necessary and the server can still provide 4yz temporary rejections.</p>
<p id="rfc.section.3.p.4">The optional server-options provides space separated attributes reflecting the server Greylisting information the server wishes to expose. Currently the following optional attributes are defined:</p>
<p></p>

<dl>
<dt>RETRY</dt>
<dd style="margin-left: 8">means that 4yz responses related to GreyListing will have retry=time information. The attribute is optional and not required to issue 4yz responses with retry=time hints.</dd>
</dl>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> SMTP Client/Server Implementation</h1>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> SMTP Server Implementation</h1>
<p id="rfc.section.3.1.1.p.1">The SMTP server MAY add support for the GREYLIST keyword in the EHLO response.</p>
<p id="rfc.section.3.1.1.p.2">The SMTP Server MAY add "retry=" tag support to 4yz responses.</p>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> SMTP Client Implementation</h1>
<p id="rfc.section.3.1.2.p.1">The SMTP client MAY use the GREYLIST keyword exposed by the EHLO response.</p>
<p id="rfc.section.3.1.2.p.2">The SMTP client MAY support the usage of the "retry=" tag in 4yz responses and are not obligated to honor the SMTP servers recommended retry delay.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Examples</h1>
<p id="rfc.section.4.p.1">Example with no extended codes:</p>
<div id="#rfc.figure.4"></div>
<pre>
         S: serverdomain.com, welcome ESMTP v2.0
         C: EHLO mail.clientdomain.com
         S: 250-GREYLIST
         S: 250-HELP
         C: MAIL FROM:&lt;jqpublic@emaildomain.com&gt;
         S: 250 User OK
         C: RCPT TO:&lt;localuser@serverdomain.com&gt;
         S: 451 Greylisted. Please Disconnect now. retry=00:05:00
         C: QUIT
         S: 221 Goodbye
      </pre>
<p id="rfc.section.4.p.2">Example with extended codes:</p>
<div id="#rfc.figure.5"></div>
<pre>
         S: serverdomain.com, welcome ESMTP v2.0
         C: EHLO mail.clientdomain.com
         S: 250-ENHANCEDSTATUSCODES
         S: 250-GREYLIST
         S: 250-HELP
         C: MAIL FROM:&lt;jqpublic@emaildomain.com&gt;
         S: 250 2.1.0 User OK
         C: RCPT TO:&lt;localuser@serverdomain.com&gt;
         S: 450 4.7.1 Greylisted. Please Disconnect now. retry=2 minutes
         C: QUIT
         S: 221 Goodbye
      </pre>
<p id="rfc.section.4.p.3">Example of connection rejection:</p>
<div id="#rfc.figure.6"></div>
<pre>
         S: 421 4.7.1 Greylist enabled. Try again later. retry=5 minutes
      </pre>
<p></p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This document makes no request of IANA.</p>
<p id="rfc.section.5.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">One possible security concern envisioned is a DoS attack when retry=time information is exposed by the GreyListing server where by a malicious sender may attempt to overwhelm the server during the server's retry time exposing a time window when the server has indicated system availability for mail acceptability. However, since security measures to mitigate DoS is a required operational factor, a GreyListing Server will inherently be prepared for DoS attacks with managed loading limits with or without retry=time Greylist responses, thus there is no expected technical concern by exposing Greylist retry=time hints. With or without this specification, all SMTP servers SHOULD be prepared for DoS attacks of all kinds.</p>
<p id="rfc.section.6.p.2">Another arguable security concern is related to the idea a formal SMTP extension can possibly lower the effectiveness of Greylisting when abusive mail senders adapt to the server's suggested retry times. This concern does not seem to have weight since adaptation can occur with or without the extension simply by complying to SMTP retry recommendations.  Greylisting remains effective because legacy abusive systems do not adapt. In fact, a retry=time hint implementation provides a means to help avoid abusive redundancy and reduced random overloading of connections at unmanaged random times by MTA clients of all flavors. A retry=time hint may actually be purposely calculated to provide a time window when there is less loading for legitimate and abusive senders.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.7.p.1">The following individuals contributed input and guidance in the production of this specification:</p>
<p></p>

<ul class="empty"><li>Tim Kehres, John Klensin, S. Moonesamy, Keith Moore, Paul Smith.</li></ul>

<p>Please note acknowledgement does not imply any specific endorsement of this specification other than they have provided important pros and cons input which helped mold the specification.</p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1651">[RFC1651]</b></td>
<td class="top">
<a href="mailto:klensin@mci.net" title="MCI Data Services Division">Klensin, J.</a>, <a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a>, <a href="mailto:mrose@dbc.mtview.ca.us" title="Dover Beach Consulting, Inc.">Rose, M.</a>, <a href="mailto:stef@nma.com" title="Network Management Associates, Inc.">Stefferud, E.</a> and <a href="mailto:dcrocker@sgi.com" title="Silicon Graphics, Inc.">D. Crocker</a>, "<a href="http://tools.ietf.org/html/rfc1651">SMTP Service Extensions</a>", RFC 1651, July 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3463">[RFC3463]</b></td>
<td class="top">
<a>Vaudreuil, G.</a>, "<a href="http://tools.ietf.org/html/rfc3463">Enhanced Mail System Status Codes</a>", RFC 3463, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4408">[RFC4408]</b></td>
<td class="top">
<a>Wong, M.</a> and <a>W. Schlitt</a>, "<a href="http://tools.ietf.org/html/rfc4408">Sender Policy Framework (SPF) for Authorizing Use of Domains in E-Mail, Version 1</a>", RFC 4408, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4871">[RFC4871]</b></td>
<td class="top">
<a>Allman, E.</a>, <a>Callas, J.</a>, <a>Delany, M.</a>, <a>Libbey, M.</a>, <a>Fenton, J.</a> and <a>M. Thomas</a>, "<a href="http://tools.ietf.org/html/rfc4871">DomainKeys Identified Mail (DKIM) Signatures</a>", RFC 4871, May 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5321">[RFC5321]</b></td>
<td class="top">
<a>Klensin, J.</a>, "<a href="http://tools.ietf.org/html/rfc5321">Simple Mail Transfer Protocol</a>", RFC 5321, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5322">[RFC5322]</b></td>
<td class="top">
<a href="mailto:presnick@qualcomm.com" title="Qualcomm Incorporated">Resnick, P.</a>, "<a href="http://tools.ietf.org/html/rfc5322">Internet Message Format</a>", RFC 5322, October 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="HARRIS">[HARRIS]</b></td>
<td class="top">
<a>Harris, E.</a>, "<a>The Next Step in the Spam Control War: Greylisting</a>", 2003.</td>
</tr></tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Additional Greylist Parameters</h1>
<p id="rfc.section.Appendix A.p.1">Greylisting Servers vary in ways which include what factors are used in tracking a sender and how accepted senders are temporarily or permanently white listed.</p>
<p></p>

<dl>
<dt>Whitelist Record Expiration</dt>
<dd style="margin-left: 5">Whitelist Record Expiration is used to allow a previous greylisted sender a time window where it can be temporarily or permanently whitelisted depending on the implementation. This is a local policy consideration, however, it should be noted that redundant greylisting of a common MTA is not considered reasonable. At some point, the MTA is a trusted source of mail and the MTA SHOULD be permanently whitelisted. The main idea with a temporary whitelisting is that its possible a future transaction can be a compromised user transaction.</dd>
<dt>Class C IP Address Tracking</dt>
<dd style="margin-left: 5">Class C IP Address Tracking allows a Greylisting server to control a greylisted MTA who retries using a different class C address. This is typical in larger outbound farms where many machines are used to send mail. If Class C is not considered, MTAs using a different IP will be unnecessarily rejected after delaying within a blocked time.</dd>
</dl>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Augmenting Other Standard Email Filters Methods</h1>
<p id="rfc.section.Appendix B.p.1">It is possible for a GreyListing server to combine other mail filtering techniques, methods and session information to determine if a sender should be greylisted. While the augmentation of these additional methods is out of the scope, the following are some suggestions that may help minimize a GreyListing Server impact. on MTAs.</p>
<p></p>

<dl>
<dt>SPF</dt>
<dd style="margin-left: 5">
<a href="#RFC4408">SPF (Sender Policy Framework)</a> <cite title="NONE">[RFC4408]</cite> can be used to help validate a sender's IP association with the return path domain. A SPF SOFTFAIL or FAIL (if not used for rejection) result could be used to help decide when Greylisting should be employed on the sender. While a PASS result is not a trusted condition, a local policy may use a PASS to skip Greylisting mail checks.</dd>
<dt>DKIM</dt>
<dd style="margin-left: 5">
<a href="#RFC4871">DKIM (Domain Key Identified Mail)</a> <cite title="NONE">[RFC4871]</cite> can be used to help authenticate the transactions from trusted DKIM mail signers. If the signer is considered is trusted source, this can help eliminate the need to greylist the sender.</dd>
</dl>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> TO DO LIST</h1>
<p></p>

<ol>
<li>Possible section showing real proof of concept examples.<br><br>
</li>
<li>Review the SMTP Service Keyword and determine how SHOULD|MAY|MUST is applied.<br><br>
</li>
<li>Address concerns the SMTP extension attempts to modify RFC5321.  <br><br>There is no intent to do so - its an extension and its very nature, optional. This extension could only alter a Greylisting Server implementation for 4yz text responses which is out of scope in RFC5321 or the implementation for a MTA retry and queuing method where the exact methods used are already out of scope in RFC5321.</li>
</ol>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Hector Santos</span> editor
	  <span class="n hidden">
		<span class="family-name">Santos</span>
	  </span>
	</span>
	<span class="org vcardline">Santronics Software, Inc.</span>
	<span class="adr">
	  <span>15600 SW 158 ST Suite #306</span>

	  <span class="vcardline">
		<span class="locality">Homestead, Florida</span>,  
		<span class="region">FL</span> 
		<span class="code">33033</span>
	  </span>
	  <span class="country-name vcardline">United States of America</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:hsantos@santronics.com">hsantos@santronics.com</a></span>

<span class="vcardline">URI: <a href="http://www.santronics.com">http://www.santronics.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Evan Harris</span> 
	  <span class="n hidden">
		<span class="family-name">Harris</span>
	  </span>
	</span>
	<span class="org vcardline">puremagic.com</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:eharris@puremagic.com">eharris@puremagic.com</a></span>

  </address>
</div>

</body>
</html>