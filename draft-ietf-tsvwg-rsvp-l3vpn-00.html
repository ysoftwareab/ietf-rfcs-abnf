<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Support for RSVP in Layer 3 VPNs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Support for RSVP in Layer 3 VPNs">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">B. Davie</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">F. le Faucheur</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">A. Narayanan</td></tr>
<tr><td class="header">Expires: January 4, 2009</td><td class="header">Cisco Systems, Inc.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 03, 2008</td></tr>
</table></td></tr></table>
<h1><br />Support for RSVP in Layer 3 VPNs<br />draft-ietf-tsvwg-rsvp-l3vpn-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 4, 2009.</p>

<h3>Abstract</h3>

<p>RFC 4364 and RFC 4659 define an approach to building
      provider-provisioned Layer 3 VPNs for IPv4 and IPv6. It may be desirable
      to use RSVP to perform admission control on the links between CE and PE
      routers. This document specifies procedures by which RSVP messages
      travelling from CE to CE across an L3VPN may be appropriately handled by
      PE routers so that admission control can be performed on PE-CE links.
      Optionally, admission control across the provider's backbone may also be
      supported.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<h3>Change history</h3>

<p>[<em>Note to RFC Editor: This section to be removed
      before publication</em>]
</p>
<p>Changes in this version (draft-ietf-tsvwg-rsvp-l3vpn-00) relative to
      the last (draft-davie-tsvwg-rsvp-l3vpn-02):
</p>
<p></p>
<ul class="text">
<li>Outlined signalling security issues and added discussion of
          methods to control redistribution of routes among providers and from
          providers to customers
</li>
<li>Clarification regarding support for RSVP-TE across L3VPN
</li>
<li>Minor corrections
</li>
</ul>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Terminology<br />
<a href="#anchor3">2.</a>&nbsp;
Problem Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#model">2.1.</a>&nbsp;
Model of Operation<br />
<a href="#cac-pe-ce">3.</a>&nbsp;
Admission Control on PE-CE Links<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#path-proc-i">3.1.</a>&nbsp;
Path Message Processing at Ingress PE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#path-proc-e">3.2.</a>&nbsp;
Path Message Processing at Egress PE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resv-proc-e">3.3.</a>&nbsp;
Resv Processing at Egress PE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resv-proc-i">3.4.</a>&nbsp;
Resv Processing at Ingress PE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.5.</a>&nbsp;
Other RSVP Messages<br />
<a href="#backbone">4.</a>&nbsp;
Admission Control in Provider's Backbone<br />
<a href="#inter-as">5.</a>&nbsp;
Inter-AS operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#inter-as-a">5.1.</a>&nbsp;
Inter-AS Option A<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#inter-as-b">5.2.</a>&nbsp;
Inter-AS Option B<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#inter-as-b-cac">5.2.1.</a>&nbsp;
Admission control on ASBR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#inter-as-b-no-cac">5.2.2.</a>&nbsp;
No admission control on ASBR<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#inter-as-c">5.3.</a>&nbsp;
Inter-AS Option C<br />
<a href="#anchor5">6.</a>&nbsp;
Operation with RSVP disabled<br />
<a href="#other">7.</a>&nbsp;
Other RSVP procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#refresh-reduction">7.1.</a>&nbsp;
Refresh overhead reduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#authentication">7.2.</a>&nbsp;
Cryptographic Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#aggregation">7.3.</a>&nbsp;
RSVP Aggregation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ce-ce-lsp">7.4.</a>&nbsp;
Support for CE-CE RSVP-TE<br />
<a href="#objects">8.</a>&nbsp;
Object Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-session">8.1.</a>&nbsp;
VPN-IPv4 and VPN-IPv6 SESSION objects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-template">8.2.</a>&nbsp;
VPN-IPv4 and VPN-IPv6 SENDER_TEMPLATE objects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-filterspec">8.3.</a>&nbsp;
VPN-IPv4 and VPN-IPv6 FILTER_SPEC objects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-hop">8.4.</a>&nbsp;
VPN-IPv4 and VPN-IPv6 RSVP_HOP objects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-agg-session">8.5.</a>&nbsp;
Aggregated VPN-IPv4 and VPN-IPv6 SESSION objects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-agg-template">8.6.</a>&nbsp;
AGGREGATE-VPN-IPv4 and AGGREGATE-VPN-IPv6 SENDER_TEMPLATE objects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#obj-agg-filterspec">8.7.</a>&nbsp;
AGGREGATE-VPN-IPv4 and AGGREGATE-VPN-IPv6 FILTER_SPEC objects<br />
<a href="#IANA">9.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">10.</a>&nbsp;
Security Considerations<br />
<a href="#Acknowledgments">11.</a>&nbsp;
Acknowledgments<br />
<a href="#altern">Appendix&nbsp;A.</a>&nbsp;
Alternatives Considered<br />
<a href="#anchor6">Appendix&nbsp;A.1.</a>&nbsp;
GMPLS UNI approach<br />
<a href="#anchor7">Appendix&nbsp;A.2.</a>&nbsp;
VRF label approach<br />
<a href="#anchor8">Appendix&nbsp;A.3.</a>&nbsp;
VRF label plus VRF address approach<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p><a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#RFC4659'>[RFC4659]<span> (</span><span class='info'>De Clercq, J., Ooms, D., Carugi, M., and F. Le Faucheur, &ldquo;BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN,&rdquo; September&nbsp;2006.</span><span>)</span></a> define a
      Layer 3 VPN service known as BGP/MPLS VPNs for IPv4 and for IPv6
      respectively. <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a> defines the Resource Reservation
      Protocol (RSVP) which may be used to perform admission control as part
      of the Integrated Services (int-serv) architecture <a class='info' href='#RFC1633'>[RFC1633]<span> (</span><span class='info'>Braden, B., Clark, D., and S. Shenker, &ldquo;Integrated Services in the Internet Architecture: an Overview,&rdquo; June&nbsp;1994.</span><span>)</span></a><a class='info' href='#RFC2210'>[RFC2210]<span> (</span><span class='info'>Wroclawski, J., &ldquo;The Use of RSVP with IETF Integrated Services,&rdquo; September&nbsp;1997.</span><span>)</span></a>.
</p>
<p>Customers of a layer 3 VPN service may run RSVP for the purposes of
      admission control in their own networks. Since the links between
      Provider Edge (PE) and Customer Edge (CE) routers in a layer 3 VPN may
      often be resource constrained, it may be desirable to be able to perform
      admission control over those links. In order to perform admission
      control using RSVP in such an environment, it is necessary that RSVP
      control messages, such as Path messages and Resv messages, are
      appropriately handled by the PE routers. This presents a number of
      challenges in the context of BGP/MPLS VPNs:</p>
<ul class="text">
<li>RSVP Path message processing depends on routers recognizing the
          router alert option in the IP header. However, packets traversing
          the backbone of a BGP/MPLS VPN are MPLS encapsulated and thus the
          router alert option is not normally visible to the egress PE.
</li>
<li>BGP/MPLS VPNs support non-unique addressing of customer networks.
          Thus a PE at the ingress or egress of the provider backbone may be
          called upon to process Path messages from different customer VPNs
          with non-unique destination addresses.
</li>
<li>A PE at the ingress of the provider's backbone may receive Resv
          messages corresponding to different customer VPNs from other PEs,
          and needs to be able to associate those Resv messages with the
          appropriate customer VPNs.
</li>
</ul><p>This document describes a set of procedures to overcome these
      challenges and thus to enable admission control using RSVP over the
      PE-CE links. We note that similar techniques may be applicable to other
      protocols used for admission control such as NSIS <a class='info' href='#RFC4080'>[RFC4080]<span> (</span><span class='info'>Hancock, R., Karagiannis, G., Loughney, J., and S. Van den Bosch, &ldquo;Next Steps in Signaling (NSIS): Framework,&rdquo; June&nbsp;2005.</span><span>)</span></a>.
</p>
<p>Additionally, it may be desirable to perform admission control over
      the provider's backbone on behalf of one or more L3VPN customers. Core
      (P) routers in a BGP/MPLS VPN do not have forwarding entries for
      customer routes, and thus cannot natively process RSVP messages for
      customer flows. Also the core is a shared resource that carries traffic
      for many customers, so issues of resource allocation among customers and
      trust (or lack thereof) must also be addressed. This draft also
      specifies procedures for supporting such a scenario.
</p>
<p>This draft deals with establishing reservations for unicast flows
      only. Because the support of multicast traffic in BGP/MPLS VPNs is still
      evolving, and raises additional challenges for admission control, we
      leave the support of multicast flows for further study at this
      point.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Terminology</h3>

<p>This document draws freely on the terminology defined in <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a> and <a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a>. For convenience, we
        provide a few brief definitions here:</p>
<ul class="text">
<li>CE (Customer Edge) Router: Router at the edge of a customer
            site that attaches to the network of the VPN provider.
</li>
<li>PE (Provider Edge) Router: Router at the edge of the service
            provider's network that attaches to one or more customer
            sites.
</li>
<li>VPN Label: An MPLS label associated with a route to a customer
            prefix in a VPN (also called a VPN route label).
</li>
<li>VRF: VPN Routing and Forwarding Table. A PE typically has
            multiple VRFs, enabling it to be connected to CEs that are in
            different VPNs.
</li>
</ul>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Problem Statement</h3>

<p>The problem space of this document is the support of admission
      control between customer sites when the customer subscribes to a
      BGP/MPLS VPN. We subdivide the problem into (a) the problem of admission
      control on the PE-CE links (in both directions), and (b) the problem of
      admission control across the provider's backbone.
</p>
<p>For the PE-CE link subproblem, the most basic challenge is that RSVP
      control messages contain IP addresses that are drawn from the customer's
      address space, and PEs must be able to deal with traffic from many
      customers who may have non-unique (or overlapping) address spaces. Thus,
      it is essential that a PE be able in all cases to identify the correct
      VPN context in which to process an RSVP control message. Much of this
      draft deals with this issue.
</p>
<p>For the case of making reservations across the provider backbone, we
      observe that BGP/MPLS VPNs do not create any per-customer forwarding
      state in the P (provider core) routers. Thus, in order to make
      reservations on behalf of customer-specified flows, it is clearly
      necessary to make some sort of aggregated reservation from PE-PE and
      then map individual, customer-specific reservations onto an aggregate
      reservation. That is similar to the problem tackled in <a class='info' href='#RFC3175'>[RFC3175]<span> (</span><span class='info'>Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;Aggregation of RSVP for IPv4 and IPv6 Reservations,&rdquo; September&nbsp;2001.</span><span>)</span></a> and <a class='info' href='#RFC4804'>[RFC4804]<span> (</span><span class='info'>Le Faucheur, F., &ldquo;Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels,&rdquo; February&nbsp;2007.</span><span>)</span></a>, with the additional
      complications of handling customer-specific addressing associated with
      BGP/MPLS VPNs.
</p>
<p>Finally, we note that RSVP Path messages are normally addressed to
      the destination of a session, and contain the router alert IP option.
      Routers along the path to the destination that are configured to process
      RSVP messages must detect the presence of the router alert option to
      allow them to intercept Path messages. However, the egress PEs of a
      network supporting BGP/MPLS VPNs receive packets destined for customer
      sites as MPLS-encapsulated packets, and may forward those based only on
      examination of the MPLS label. Hence, a Path message would be forwarded
      without examination of the IP options and would therefore not receive
      appropriate processing at the PE. This problem of recognizing and
      processing Path messages is also discussed below.
</p>
<a name="model"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Model of Operation</h3>

<p>Figure 1 illustrates the basic model of operation with which this
        document is concerned.
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                      --------------------------
                     /       Provider           \
        |----|      |         Backbone           |      |----|
Sender-&gt;| CE1|  |-----|                       |-----|   |CE2 |-&gt;Receiver
        |    |--|     |   |---|     |---|     |     |---|    |
        |----|  |     |   | P |     | P |     |     |   |----|
                | PE1 |---|   |-----|   |-----| PE2 |
                |     |   |   |     |   |     |     |
                |     |   |---|     |---|     |     |
                |-----|                       |-----|
                    |                            |
                     \                          /
                      --------------------------

</pre></div>
<p>Figure 1. Model of Operation for RSVP-based admission
          control over MPLS/BGP VPN
</p>
<p>
</p>
<p>To establish a unidirectional reservation for a point-to-point flow
        from Sender to Receiver that takes account of resource availability on
        the CE-PE and PE-CE links only, the following steps must take
        place:</p>
<ol class="text">
<li>Sender sends a Path message to an IP address of the
            Receiver.
</li>
<li>Path message is processed by CE1 using normal RSVP procedures
            and forwarded towards the Receiver along the link CE1-PE1.
</li>
<li>PE1 processes Path message and forwards towards the Receiver
            across the provider backbone.
</li>
<li>PE2 processes Path message and forwards towards the Receiver
            along link PE2-CE2.
</li>
<li>CE2 processes Path message using normal RSVP procedures and
            forwards towards Receiver.
</li>
<li>Receiver sends Resv message to CE2.
</li>
<li>CE2 sends Resv message to PE2.
</li>
<li>PE2 processes Resv message (including performing admission
            control on link PE2-CE2) and sends Resv to PE1.
</li>
<li>PE1 processes Resv message and sends Resv to CE1.
</li>
<li>CE1 processes Resv using normal RSVP procedures, performs
            admission control on the link CE1-PE1 and sends Resv message to
            Sender if successful.
</li>
</ol><p> In each of the steps involving Resv messages (6 through 10)
        the node sending the Resv uses the previously established Path state
        to determine the "RSVP Previous Hop (PHOP)" and sends a Resv message
        to that address. We note that establishing that Path state correctly
        at PEs is one of the challenges posed by the BGP/MPLS environment.
</p>
<a name="cac-pe-ce"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Admission Control on PE-CE Links</h3>

<p>In the following sections we trace through the steps outlined in
      <a class='info' href='#model'>Section&nbsp;2.1<span> (</span><span class='info'>Model of Operation</span><span>)</span></a> and expand on the details for those steps where
      standard RSVP procedures need to be extended or modified to support the
      BGP/MPLS VPN environment. For all the remaining steps described in the
      preceding section, standard RSVP processing rules apply.
</p>
<p>All the procedures described below support both IPv4 and IPv6
      addressing. In all cases where IPv4 is referenced, IPv6 can be
      substituted with identical procedures and results. Object definitions
      for both IPv4 and IPv6 are provided in <a class='info' href='#objects'>Section&nbsp;8<span> (</span><span class='info'>Object Definitions</span><span>)</span></a>.
</p>
<a name="path-proc-i"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Path Message Processing at Ingress PE</h3>

<p>When a Path message arrives at the ingress PE (step 3 of <a class='info' href='#model'>Section&nbsp;2.1<span> (</span><span class='info'>Model of Operation</span><span>)</span></a>) the PE needs to establish suitable Path state and
        forward the Path message on to the egress PE. In the following
        paragraphs we described the steps taken by the ingress PE.
</p>
<p>The Path message is addressed to the eventual destination (the
        receiver at the remote customer site) and carries the IP Router Alert
        option, in accordance with <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>. The ingress PE
        must recognize the router alert, intercept these messages and process
        them as RSVP signalling messages.
</p>
<p>As noted above, there is an issue in recognizing Path messages as
        they arrive at the egress PE (PE 2 in Figure 1). The approach defined
        here is to address the Path messages sent by the ingress PE directly
        to the egress PE, and send it without IP Router Alert; that is, rather
        than using the ultimate receiver's destination address as the
        destination address of the Path message, we use the loopback address
        of the egress PE as the destination address of the Path message. This
        approach has the advantage that it does not require any new data plane
        capabilities for the egress PE beyond those of a standard BGP/MPLS VPN
        PE. Details of the processing of this message at the egress PE are
        described below in <a class='info' href='#path-proc-e'>Section&nbsp;3.2<span> (</span><span class='info'>Path Message Processing at Egress PE</span><span>)</span></a>. The approach of
        addressing a Path message directly to an RSVP next hop (that may or
        may not be the next IP hop) is already used in other environments such
        as those of <a class='info' href='#RFC4206'>[RFC4206]<span> (</span><span class='info'>Kompella, K. and Y. Rekhter, &ldquo;Label Switched Paths (LSP) Hierarchy with Generalized Multi-Protocol Label Switching (GMPLS) Traffic Engineering (TE),&rdquo; October&nbsp;2005.</span><span>)</span></a> and <a class='info' href='#RFC4804'>[RFC4804]<span> (</span><span class='info'>Le Faucheur, F., &ldquo;Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels,&rdquo; February&nbsp;2007.</span><span>)</span></a>.
</p>
<p>For an RSVP Path message, the existing SESSION and SENDER_TEMPLATE
        objects can no longer uniquely identify a flow on VPN PE nodes. We
        propose a new format of SESSION and SENDER_TEMPLATE objects which
        contain a VPN-IPv4 format address. The ingress and egress PE nodes
        translate between the regular IPv4 addresses for messages to and from
        the CE, and VPN-IPv4 addresses for messages to and from PE
        routers.
</p>
<p>The details of operation at the ingress PE are as follows. When the
        ingress PE (PE1 in Figure 1) receives a Path message from CE1 that is
        addressed to the receiver, the VRF that is associated with the
        incoming interface is identified, just as for normal data path
        operations. The Path state for the session is stored, and is
        associated with that VRF, so that potentially overlapping addresses
        among different VPNs do not appear to belong to the same session. The
        destination address of the receiver is looked up in the appropriate
        VRF, and the BGP Next-Hop for that destination is identified. That
        next-hop is the egress PE (PE2 in Figure 1). A new VPN-IPv4 SESSION
        object is constructed, containing the Route Distinguisher (RD) that is
        part of the VPN-IPv4 route prefix for this destination, and the IPv4
        address from the SESSION. In addition, a new VPN-IPv4 SENDER_TEMPLATE
        object is constructed, with the original IPv4 address from the
        incoming SENDER_TEMPLATE plus the RD that is used by this PE to
        advertise that prefix for this customer into the VPN. A new Path
        message is constructed with a destination address equal to the address
        of the egress PE identified above. This new Path message will contain
        all the objects from the original Path message, replacing the original
        SESSION and SENDER_TEMPLATE objects with the new VPN-IPv4 type
        objects. The RSVP_HOP object in the Path message contains an IP
        address of the ingress PE. The Path message is sent without IP Router
        Alert.
</p>
<a name="path-proc-e"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Path Message Processing at Egress PE</h3>

<p>When a Path message arrives at the egress PE, it is addressed to
        the PE itself, and is handed to RSVP for processing. The router
        extracts the RD and IPv4 address from the VPN-IPv4 SESSION object, and
        determines the local VRF context by finding a matching VPN-IPv4 prefix
        with the specified RD that has been advertised by this router into
        BGP. The entire incoming RSVP message, including the VRF information,
        is stored as part of the Path state.
</p>
<p>Now the RSVP module can construct a Path message which differs from
        the Path it received in the following ways:</p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>Its destination address is the IP address extracted from the
            SESSION Object;
</dd>
<dt>b.</dt>
<dd>The SESSION and SENDER_TEMPLATE objects are converted back to
            IPv4-type by discarding the attached RD
</dd>
<dt>c.</dt>
<dd>The RSVP_HOP Object contains the IP address of the outgoing
            interface of the egress PE and an LIH, as per normal RSVP
            processing.
</dd>
</dl></blockquote><p>The router then sends the Path message on towards its
        destination over the interface identified above. This Path message
        carries the IP Router-Alert option as required by <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="resv-proc-e"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Resv Processing at Egress PE</h3>

<p>When a receiver at the customer site originates a Resv message for
        the session, normal RSVP procedures apply until the Resv, making its
        way back towards the sender, arrives at the "egress" PE (it is
        "egress" with respect to the direction of data flow, i.e. PE2 in
        figure 1). On arriving at PE2, the SESSION and FILTER_SPEC objects in
        the Resv, and the VRF in which the Resv was received, are used to find
        the matching Path state stored previously. At this stage, admission
        control can be performed on the PE-CE link.
</p>
<p>Assuming admission control is successful, the PE constructs a Resv
        message to send to the RSVP HOP stored in the Path state, i.e., the
        ingress PE (PE1 in Figure 1). The IPv4 SESSION object is replaced with
        the same VPN-IPv4 SESSION object received in the Path. The IPv4
        FILTER_SPEC object is replaced with a VPN-IPv4 FILTER_SPEC object,
        which copies the VPN-IPv4 address from the SENDER_TEMPLATE received in
        the matching Path message. The RSVP_HOP in the Resv message contains
        an IP address of the Egress PE that is reachable by the ingress PE.
        The Resv message is sent to the IP address contained within the
        RSVP_HOP object in the Path message.
</p>
<p>If admission control is not successful on the egress PE, a
        ResvError message is sent towards the receiver as per normal RSVP
        processing.
</p>
<a name="resv-proc-i"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Resv Processing at Ingress PE</h3>

<p>Upon receiving a Resv message at the ingress PE (with respect to
        data flow, i.e. PE1 in Figure 1), the PE determines the local VRF
        context and associated Path state for this Resv by decoding the
        received SESSION and FILTER_SPEC objects. It is now possible to
        generate a Resv message to send to the appropriate CE. The Resv
        message sent to the ingress CE will contain IPv4 SESSION and
        FILTER_SPEC objects, derived from the appropriate Path state. Since we
        assume in this section that admission control over the
        Provider&rsquo;s backbone is not needed, the ingress PE does not
        perform any admission control for this reservation.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Other RSVP Messages</h3>

<p>Processing of PathError, PathTear, ResvError, ResvTear and ResvConf
        messages is generally straightforward and follows the rules of <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>. These additional rules must be observed for
        messages transmitted within the VPN (i.e. between the PEs):</p>
<ul class="text">
<li>The SESSION, SENDER_TEMPLATE and FILTER_SPEC objects must be
            converted from IPv4 to VPN-IPv4 form and back in the same manner
            as described above for Path and Resv messages.
</li>
<li>The matching state &amp; VRF must be determined by decoding the
            RD and IPv4 addresses in the SESSION and FILTER_SPEC objects.
</li>
<li>The message must be directly addressed to the appropriate PE,
            without using the IP Router Alert option.
</li>
</ul>

<a name="backbone"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Admission Control in Provider's Backbone</h3>

<p>The preceding section outlines how per-customer reservations can be
      made over the PE-CE links. This may be sufficient in many situations
      where the backbone is well engineered with ample capacity and there is
      no need to perform any sort of admission control in the backbone.
      However, in some cases where excess capacity cannot be relied upon
      (e.g., during failures or unanticipated periods of overload) it may be
      desirable to be able to perform admission control in the backbone on
      behalf of customer traffic.
</p>
<p>Because of the fact that routes to customer addresses are not present
      in the P routers, along with the concerns of scalability that would
      arise if per-customer reservations were allowed in the P routers, it is
      clearly necessary to map the per-customer reservations described in the
      preceding section onto some sort of aggregate reservations. Furthermore,
      customer data packets need to be tunneled across the provider backbone
      just as in normal BGP/MPLS VPN operation.
</p>
<p>Given these considerations, a feasible way to achieve the objective
      of admission control in the backbone is to use the ideas described in
      <a class='info' href='#RFC4804'>[RFC4804]<span> (</span><span class='info'>Le Faucheur, F., &ldquo;Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels,&rdquo; February&nbsp;2007.</span><span>)</span></a>. MPLS-TE tunnels can be established between
      PEs as a means to perform aggregate admission control in the
      backbone.
</p>
<p>An MPLS-TE tunnel from an ingress PE to an egress PE can be thought
      of as a virtual link of a certain capacity. The main change to the
      procedures described above is that when a Resv is received at the
      ingress PE, an admission control decision can be performed by checking
      whether sufficient capacity of that virtual link remains available to
      admit the new customer reservation. We note also that <a class='info' href='#RFC4804'>[RFC4804]<span> (</span><span class='info'>Le Faucheur, F., &ldquo;Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels,&rdquo; February&nbsp;2007.</span><span>)</span></a> uses the IF_ID RSVP_HOP object to identify the
      tunnel across the backbone, rather than the simple RSVP_HOP object
      described in <a class='info' href='#path-proc-i'>Section&nbsp;3.1<span> (</span><span class='info'>Path Message Processing at Ingress PE</span><span>)</span></a>. The procedures of <a class='info' href='#RFC4804'>[RFC4804]<span> (</span><span class='info'>Le Faucheur, F., &ldquo;Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels,&rdquo; February&nbsp;2007.</span><span>)</span></a> should be followed here as well.
</p>
<p>To achieve effective admission control in the backbone, there needs
      to be some way to separate the data plane traffic that has a reservation
      from that which does not. We assume that packets that are subject to
      admission control on the core will be given a particular MPLS EXP value,
      and that no other packets will be allowed to enter the core with this
      value unless they have passed admission control. Some fraction of link
      resources will be allocated to queues on core links for packets bearing
      that EXP value, and the MPLS-TE tunnels will use that resource pool to
      make their constraint-based routing and admission control decisions.
      This is all consistent with the principles of aggregate RSVP
      reservations described in <a class='info' href='#RFC3175'>[RFC3175]<span> (</span><span class='info'>Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;Aggregation of RSVP for IPv4 and IPv6 Reservations,&rdquo; September&nbsp;2001.</span><span>)</span></a>.
</p>
<a name="inter-as"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Inter-AS operation</h3>

<p><a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a> defines three modes of inter-AS operation
      for MPLS/BGP VPNs, referred to as options A, B and C. In the following
      sections we describe how the scheme described above can operate in each
      inter-AS environment.
</p>
<a name="inter-as-a"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Inter-AS Option A</h3>

<p>Operation of RSVP in Inter-AS Option A is quite straightforward.
        Each ASBR operates like a PE, and the ASBR-ASBR links can be viewed as
        PE-CE links in terms of admission control. If the procedures defined
        in <a class='info' href='#cac-pe-ce'>Section&nbsp;3<span> (</span><span class='info'>Admission Control on PE-CE Links</span><span>)</span></a> are enabled on both ASBRs, then CAC may
        be performed on the inter-ASBR links. In addition, the operator of
        each AS can independently decide whether or not to perform CAC across
        his backbone. The new objects described in this document MUST NOT be
        sent in any RSVP message between two Option-A ASBRs.
</p>
<a name="inter-as-b"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Inter-AS Option B</h3>

<p>To support inter-AS Option B, we require some additional processing
        of RSVP messages on the ASBRs. Recall that, when packets are forwarded
        from one AS to another in option B, the VPN label is swapped by each
        ASBR as a packet goes from one AS to another. The BGP next hop seen by
        the ingress PE will be the ASBR, and there need not be IP visibility
        between the ingress and egress PEs. Hence when the ingress PE sends
        the Path message to the BGP next hop of the VPN-IPv4 route towards the
        destination, it will be received by the ASBR. The ASBR determines the
        next hop of the route in a similar way as the ingress PE - by finding
        a matching BGP VPN-IPv4 route with the same RD and a matching
        prefix.
</p>
<p>The provider(s) who interconnect ASes using option B may or may not
        desire to perform admission control on the inter-AS links. This choice
        affects the detailed operation of ASBRs. We describe the two modes of
        operation - with and without admission control at the ASBRs - in the
        following sections.
</p>
<a name="inter-as-b-cac"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Admission control on ASBR</h3>

<p>In this scenario, the ASBR performs full RSVP signalling and
          admission control. The RSVP database is indexed on the ASBR using
          the VPN-IPv4 SESSION, SENDER_TEMPLATE and FILTER_SPEC objects (which
          uniquely identify RSVP sessions and flows as per the requirements of
          <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>). These objects are forwarded unmodified
          in both directions by the ASBR. All other procedures of RSVP are
          performed as if the ASBR was a RSVP hop. In particular, the RSVP_HOP
          objects sent in Path and Resv messages contain IP addresses of the
          ASBR, which MUST be reachable by the neighbor to whom the message is
          being sent. Note that since the VPN-IPv4 SESSION, SENDER_TEMPLATE
          and FILTER_SPEC objects satisfy the uniqueness properties required
          for a RSVP database implementation as per <a class='info' href='#RFC2209'>[RFC2209]<span> (</span><span class='info'>Braden, B. and L. Zhang, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Message Processing Rules,&rdquo; September&nbsp;1997.</span><span>)</span></a>,
          no customer VRF awareness is required on the ASBR.
</p>
<a name="inter-as-b-no-cac"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
No admission control on ASBR</h3>

<p>If the ASBR is not doing admission control, it is desirable that
          per-flow state not be maintained on the ASBR. This requires adjacent
          RSVP hops (i.e. the ingress and egress PEs of the respective ASes)
          to send RSVP messages directly between them. Not however that such
          routers in an Option B environment are not required to have direct
          IP reachability to each other. To mitigate this issue, we propose
          the use of label switching to forward RSVP messages from a PE in one
          AS to a PE in another AS. A detailed description of how this is
          achieved follows.
</p>
<p>We first define a new VPN-IPv4 RSVP_HOP object. Use of the
          VPN-IPv4 RSVP_HOP object enables RSVP control plane reachability
          between any two adjacent RSVP hops in a MPLS VPN, regardless of
          whether they have IP reachability. RSVP nodes sending Path or Resv
          messages across a MPLS VPN MAY use the VPN-IPv4 PHOP object to
          achieve signalling across Option-B ASBRs without requiring the ASBRs
          to install state. The requirements ("SHOULD", "MUST" etc.) specified
          in the remainder of this section only apply when the implementation
          supports the OPTIONAL use of the VPN-IPv4 HOP object.
</p>
<p>The VPN-IPv4 RSVP_HOP object carries the IPv4 address of the
          message sender and a logical interface handle as before, but in
          addition carries a VPN-IPv4 address which also represents the sender
          of the message. The message sender MUST also advertise this VPN-IPv4
          HOP address into BGP with an associated label, and this
          advertisement MUST be propagated by BGP throughout the VPN and to
          adjacent ASes in order to provide reachability to this PE. Frames
          received by the PE marked with this label MUST be given to the local
          control plane for processing. This VPN-IPv4 address MAY be created
          specially for this task, or MAY be any previously-advertised address
          representing any VRF (e.g. local PE-CE link address). In the case
          where the address is specially created for control protocols, the
          BGP advertisement for this address SHOULD be marked such that it is
          not redistributed outside the MPLS VPN. Two possible methods to
          achieve this goal are:
</p>
<p>
            </p>
<ul class="text">
<li>Tag the advertisement of such routes with a route target that
              is not imported into any customer VRFs. This requires the
              creation of a special "control protocols" VPN which is used only
              for these addresses.
</li>
<li>Tag the advertisement with a specially defined
              extended-community attribute, the meaning of which is that this
              route is not to be redistributed to customers. Definition of
              this attribute is beyond the scope of this document.
</li>
</ul><p>
          
</p>
<p>When an ASBR that is not installing local RSVP state receives a
          Path message, it looks up the next-hop of the matching BGP route as
          described in <a class='info' href='#path-proc-i'>Section&nbsp;3.1<span> (</span><span class='info'>Path Message Processing at Ingress PE</span><span>)</span></a>, and sends the Path
          message to the next-hop, without modifying any RSVP objects
          (including the RSVP_HOP). This process is repeated at subsequent
          ASBRs until the Path message arrives at a router that is installing
          local RSVP state (either the ultimate egress PE, or an ASBR
          configured to perform CAC). This router receives the Path and
          processes it as described in <a class='info' href='#path-proc-e'>Section&nbsp;3.2<span> (</span><span class='info'>Path Message Processing at Egress PE</span><span>)</span></a> if it is
          a PE, or <a class='info' href='#inter-as-b-cac'>Section&nbsp;5.2.1<span> (</span><span class='info'>Admission control on ASBR</span><span>)</span></a> if it is an ASBR
          performing CAC. When this router sends the Resv upstream, it queries
          BGP for a next-hop and label for the VPN-IPv4 address in the PHOP,
          encapsulates the Resv with that label and sends it upstream. This
          message will be received for control processing directly on the
          upstream RSVP hop (the hop that last updated the RSVP_HOP field in
          the Path message), without any involvement of intermediate ASBRs.
          Further, the router sending this Resv message MUST include in its
          RSVP_HOP object a VPN-IPv4 address advertised by itself into BGP
          with a label, so that hop-by-hop RSVP messages in the downstream
          direction (e.g. ResvError) can be sent directly to it. Note that the
          VPN-IPv4 address is only used to identify a LSP for neighbor
          reachability. The IPv4 address in the RSVP_HOP object is used for
          all other purposes, including neighbor matching between Path/Resv
          and SRefresh messages (<a class='info' href='#RFC2961'>[RFC2961]<span> (</span><span class='info'>Berger, L., Gan, D., Swallow, G., Pan, P., Tommasi, F., and S. Molendini, &ldquo;RSVP Refresh Overhead Reduction Extensions,&rdquo; April&nbsp;2001.</span><span>)</span></a>), authentication
          (<a class='info' href='#RFC2747'>[RFC2747]<span> (</span><span class='info'>Baker, F., Lindell, B., and M. Talwar, &ldquo;RSVP Cryptographic Authentication,&rdquo; January&nbsp;2000.</span><span>)</span></a>), etc.
</p>
<p>The ASBR is not expected to process any other RSVP messages apart
          from the Path message as described above. The ASBR also does not
          need to store any RSVP state. Note that any ASBR along the path that
          wishes to do admission control or insert itself into the RSVP
          signalling flow, may do so by writing its own RSVP_HOP object with
          IPv4 and VPN-IPv4 address pointing to itself.
</p>
<p>If an Option-B ASBR receives a RSVP Path message with an IPv4
          type PHOP, does not wish to perform admission control but is willing
          to install local state for this flow, the ASBR MUST process and
          forward RSVP signalling messages for this flow as described in
          section 5.2.1 (except admission control). If an Option-B ASBR
          receives a RSVP Path message with an IPv4 type PHOP, but does not
          wish to install local state or perform admission control for this
          flow, the ASBR MUST NOT forward the Path message. In addition, the
          ASBR SHOULD send a PathError message of Error Code [<em>TBD</em>], Error Value [<em>TBD</em>], signifying to the upstream RSVP hop that
          the supplied PHOP object is insufficient to provide reachability
          across this VPN. The upstream node, on receipt of this PathError,
          SHOULD re-send the Path message including a RSVP_HOP of VPN-IPv4
          type.
</p>
<a name="inter-as-c"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Inter-AS Option C</h3>

<p>Operation of RSVP in Inter-AS Option C is also quite
        straightforward, because there exists an LSP directly from ingress PE
        to egress PE. In this case, there is no significant difference in
        operation from the single AS case described in <a class='info' href='#cac-pe-ce'>Section&nbsp;3<span> (</span><span class='info'>Admission Control on PE-CE Links</span><span>)</span></a>. Furthermore, if it is desired to provide
        admission control from PE to PE, it can be done by building an
        inter-AS TE tunnel and then using the procedures described in <a class='info' href='#backbone'>Section&nbsp;4<span> (</span><span class='info'>Admission Control in Provider's Backbone</span><span>)</span></a>.
</p>
<p>
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Operation with RSVP disabled</h3>

<p>It is often the case that RSVP will not be enabled on the PE-CE
      links. In such an environment, a customer may reasonably expect that
      RSVP messages sent into the L3 VPN network should be forwarded just like
      any other IP datagrams. This transparency is useful when the customer
      wishes to use RSVP within his own sites or perhaps to perform admission
      control on the CE-PE links (in CE-&gt;PE direction only), without
      involvement of the PEs. For this reason, a PE SHOULD NOT discard or
      modify RSVP messages sent towards it from a CE when RSVP is not enabled
      on the PE-CE links. Similarly a PE SHOULD NOT discard or modify RSVP
      messages which are destined for one of its attached CEs, even when RSVP
      is not enabled on those links. Note that the presence of the router
      alert option in some RSVP messages may cause them to be forwarded
      outside of the normal forwarding path, but that the guidance of this
      paragraph still applies in that case. Note also that this guidance
      applies regardless of whether RSVP-TE is used in some, all, or none of
      the L3VPN network.
</p>
<a name="other"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Other RSVP procedures</h3>

<p>This section describes modifications to other RSVP procedures
      introduced by MPLS VPNs
</p>
<a name="refresh-reduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Refresh overhead reduction</h3>

<p>The following points should be noted regarding RSVP refresh
        overhead reduction (<a class='info' href='#RFC2961'>[RFC2961]<span> (</span><span class='info'>Berger, L., Gan, D., Swallow, G., Pan, P., Tommasi, F., and S. Molendini, &ldquo;RSVP Refresh Overhead Reduction Extensions,&rdquo; April&nbsp;2001.</span><span>)</span></a>) across a MPLS VPN:
</p>
<p>
          </p>
<ul class="text">
<li>The hop between the ingress and egress PE of a VPN should be
            considered as traversing one or more non-RSVP hops. As such, the
            procedures described in Section 5.3 of <a class='info' href='#RFC2961'>[RFC2961]<span> (</span><span class='info'>Berger, L., Gan, D., Swallow, G., Pan, P., Tommasi, F., and S. Molendini, &ldquo;RSVP Refresh Overhead Reduction Extensions,&rdquo; April&nbsp;2001.</span><span>)</span></a>
            relating to non-RSVP hops SHOULD be followed.
</li>
<li>The source IP address of a SRefresh message MUST match the IPv4
            address signalled in the RSVP_HOP object contained in the
            corresponding Path or Resv message. The IPv4 address in any
            received VPN-IPv4 RSVP_HOP object MUST be used as the source
            address of that message for this purpose.
</li>
</ul><p>
        
</p>
<a name="authentication"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Cryptographic Authentication</h3>

<p>The following points should be noted regarding RSVP cryptographic
        authentication (<a class='info' href='#RFC2747'>[RFC2747]<span> (</span><span class='info'>Baker, F., Lindell, B., and M. Talwar, &ldquo;RSVP Cryptographic Authentication,&rdquo; January&nbsp;2000.</span><span>)</span></a>) across a MPLS VPN:
</p>
<p>
          </p>
<ul class="text">
<li>The IPv4 address in any received VPN-IPv4 RSVP_HOP object MUST
            be used as the source address of that message for purposes of
            identifying the security association.
</li>
<li>Forwarding of Challenge and Response messages MUST follow the
            same rules as described above for hop-by-hop messages.
            Specifically, if the originator of a Challenge/Response message
            has received a VPN-IPv4 RSVP_HOP object from the corresponding
            neighbor, it MUST use the label associated with that VPN-IPv4
            address in BGP to forward the Challenge/Response message.
</li>
</ul><p>
        
</p>
<a name="aggregation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
RSVP Aggregation</h3>

<p><a class='info' href='#RFC3175'>[RFC3175]<span> (</span><span class='info'>Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;Aggregation of RSVP for IPv4 and IPv6 Reservations,&rdquo; September&nbsp;2001.</span><span>)</span></a> and <a class='info' href='#RFC4860'>[RFC4860]<span> (</span><span class='info'>Le Faucheur, F., Davie, B., Bose, P., Christou, C., and M. Davenport, &ldquo;Generic Aggregate Resource ReSerVation Protocol (RSVP) Reservations,&rdquo; May&nbsp;2007.</span><span>)</span></a> describe
        mechanisms to aggregate multiple individual RSVP reservations into a
        single larger reservation on the basis of a common DSCP/PHB for
        traffic classification. The following points should be noted in this
        regard:
</p>
<p>
          </p>
<ul class="text">
<li>The procedures described in this section apply only in the case
            where the Aggregator and Deaggregator nodes are C/CE devices, and
            the entire MPLS VPN lies within the Aggregation Region. The case
            where the PE is also an Aggregator/Deaggregator is more complex
            and not considered in this document.
</li>
<li>Aggregate RSVP sessions will be treated in the same way as
            regular IPv4 RSVP sessions. To this end, all the procedures
            described in <a class='info' href='#cac-pe-ce'>Section&nbsp;3<span> (</span><span class='info'>Admission Control on PE-CE Links</span><span>)</span></a> and <a class='info' href='#backbone'>Section&nbsp;4<span> (</span><span class='info'>Admission Control in Provider's Backbone</span><span>)</span></a> apply to aggregate RSVP sessions. New
            SESSION, SENDER_TEMPLATE and FILTERSPEC objects are defined in
            <a class='info' href='#objects'>Section&nbsp;8<span> (</span><span class='info'>Object Definitions</span><span>)</span></a>.
</li>
<li>End-To-End (E2E) RSVP sessions are passed unmodified through
            the MPLS VPN. These RSVP messages may be identified by their IP
            protocol (RSVP-E2E-IGNORE, 134). When the ingress PE receives any
            RSVP message with this IP protocol, it MUST process this frame as
            if it is regular customer traffic and ignore any IP Router-Alert
            flags. The appropriate VPN and transport labels are applied to the
            frame and it is forwarded towards the remote CE. Note that this
            message will not be received or processed by any other P or PE
            node.
</li>
<li>Any SESSION-OF-INTEREST objects (defined in <a class='info' href='#RFC4860'>[RFC4860]<span> (</span><span class='info'>Le Faucheur, F., Davie, B., Bose, P., Christou, C., and M. Davenport, &ldquo;Generic Aggregate Resource ReSerVation Protocol (RSVP) Reservations,&rdquo; May&nbsp;2007.</span><span>)</span></a>) are to be conveyed unmodified across the MPLS
            VPN.
</li>
</ul><p>
        
</p>
<a name="ce-ce-lsp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Support for CE-CE RSVP-TE</h3>

<p><a class='info' href='#I-D.kumaki-l3vpn-e2e-rsvp-te-reqts'>[I&#8209;D.kumaki&#8209;l3vpn&#8209;e2e&#8209;rsvp&#8209;te&#8209;reqts]<span> (</span><span class='info'>Kumaki, K., &ldquo;Requirements for supporting Customer RSVP and RSVP-TE Over a BGP/MPLS  IP-VPN,&rdquo; February&nbsp;2008.</span><span>)</span></a> describes a
        set of requirements for the establishment for CE-CE MPLS LSPs across
        networks offering an L3VPN service. The requirements specified in that
        draft are similar to those addressed by this document, in that both
        address the issue of handling RSVP requests from customers in a VPN
        context. It is possible that the solution described here could be
        adapted to meet the requirements of <a class='info' href='#I-D.kumaki-l3vpn-e2e-rsvp-te-reqts'>[I&#8209;D.kumaki&#8209;l3vpn&#8209;e2e&#8209;rsvp&#8209;te&#8209;reqts]<span> (</span><span class='info'>Kumaki, K., &ldquo;Requirements for supporting Customer RSVP and RSVP-TE Over a BGP/MPLS  IP-VPN,&rdquo; February&nbsp;2008.</span><span>)</span></a>. To the extent that
        this draft uses signalling extensions described in <a class='info' href='#RFC3473'>[RFC3473]<span> (</span><span class='info'>Berger, L., &ldquo;Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions,&rdquo; January&nbsp;2003.</span><span>)</span></a> which have already been used for GMPLS/TE, we
        expect that CE-CE RSVP/TE will be incremental work built on these
        extensions. These extensions will be considered in a separate
        document.
</p>
<p>
</p>
<a name="objects"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Object Definitions</h3>

<a name="obj-session"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
VPN-IPv4 and VPN-IPv6 SESSION objects</h3>

<p>The usage of the VPN-IPv4 SESSION Object is described in <a class='info' href='#path-proc-i'>Section&nbsp;3.1<span> (</span><span class='info'>Path Message Processing at Ingress PE</span><span>)</span></a> and <a class='info' href='#path-proc-e'>Section&nbsp;3.2<span> (</span><span class='info'>Path Message Processing at Egress PE</span><span>)</span></a>. The
        VPN-IPv4 SESSION object should appear in all RSVP messages that
        ordinarily contain a SESSION object and are sent between ingress PE
        and egress PE in either direction. The object MUST NOT be included in
        any RSVP messages that are sent outside of the provider's backbone
        (except in the inter-AS option B and C cases, as described above, when
        it may appear on inter-AS links). The VPN-IPv4 address in this object
        is built by combining the IPv4 address from the incoming SESSION with
        the RD in the BGP advertisement from the egress PE for this prefix and
        customer.
</p>
<p>The VPN-IPv6 SESSION object is analogous to the VPN-IPv4 SESSION
        object, using VPN-IPv6 addresses<a class='info' href='#RFC4659'>[RFC4659]<span> (</span><span class='info'>De Clercq, J., Ooms, D., Carugi, M., and F. Le Faucheur, &ldquo;BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN,&rdquo; September&nbsp;2006.</span><span>)</span></a>.
</p>
<p>The formats of the objects are as follows:
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv4 SESSION object: Class = 1, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |             VPN-IPv4 DestAddress (12 bytes)           |
           +                                                       +
           |                                                       |
           +-------------+-------------+-------------+-------------+
           | Protocol Id |    Flags    |          DstPort          |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv6 SESSION object: Class = 1, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +             VPN-IPv6 DestAddress (24 bytes)           +
           /                                                       /
           .                                                       .
           /                                                       /
           |                                                       |
           +-------------+-------------+-------------+-------------+
           | Protocol Id |     Flags   |          DstPort          |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>The protocol ID, flags, and DstPort are identical to the IPv4 and
        IPv6 SESSION objects.
</p>
<a name="obj-template"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
VPN-IPv4 and VPN-IPv6 SENDER_TEMPLATE objects</h3>

<p>The usage of the VPN-IPv4 SENDER_TEMPLATE Object is described in
        <a class='info' href='#path-proc-i'>Section&nbsp;3.1<span> (</span><span class='info'>Path Message Processing at Ingress PE</span><span>)</span></a> and <a class='info' href='#path-proc-e'>Section&nbsp;3.2<span> (</span><span class='info'>Path Message Processing at Egress PE</span><span>)</span></a>. The
        VPN-IPv4 SENDER_TEMPLATE object should appear in all RSVP messages
        that ordinarily contain a SENDER_TEMPLATE object and are sent between
        ingress PE and egress PE in either direction (such as Path, PathError,
        and PathTear). The object MUST NOT be included in any RSVP messages
        that are sent outside of the provider's backbone (except in the
        inter-AS option B and C cases, as described above, when it may appear
        on inter-AS links). The VPN-IPv4 address in this object is built by
        combining the IPv4 address from the incoming SENDER_TEMPLATE with the
        RD in the BGP advertisement from the ingress PE for this prefix and
        customer. The format of the object is as follows:
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv4 SENDER_TEMPLATE object: Class = 11, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |             VPN-IPv4 SrcAddress (12 bytes)            |
           +                                                       +
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |          Reserved         |          SrcPort          |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv6 SENDER_TEMPLATE object: Class = 11, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +             VPN-IPv6 SrcAddress (24 bytes)            +
           /                                                       /
           .                                                       .
           /                                                       /
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |          Reserved         |          SrcPort          |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>The SrcPort is identical to the IPv4 and IPv6 SENDER_TEMPLATE
        objects. The Reserved field must be set to zero on transmit and
        ignored on receipt.
</p>
<a name="obj-filterspec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
VPN-IPv4 and VPN-IPv6 FILTER_SPEC objects</h3>

<p>The usage of the VPN-IPv4 FILTER_SPEC Object is described in <a class='info' href='#resv-proc-e'>Section&nbsp;3.3<span> (</span><span class='info'>Resv Processing at Egress PE</span><span>)</span></a> and <a class='info' href='#resv-proc-i'>Section&nbsp;3.4<span> (</span><span class='info'>Resv Processing at Ingress PE</span><span>)</span></a>. The
        VPN-IPv4 FILTER_SPEC object should appear in all RSVP messages that
        ordinarily contain a FILTER_SPEC object and are sent between ingress
        PE and egress PE in either direction (such as Resv, ResvError, and
        ResvTear). The object MUST NOT be included in any RSVP messages that
        are sent outside of the provider's backbone (except in the inter-AS
        option B and C cases, as described above, when it may appear on
        inter-AS links). The VPN-IPv4 address in this object is built by
        combining the IPv4 address from the incoming FILTER_SPEC with the RD
        in the BGP advertisement from the ingress PE for this prefix and
        customer.
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv4 FILTER_SPEC object: Class = 10, C-Type = TBA

           Definition same as VPN-IPv4 SENDER_TEMPLATE object.


      o    VPN-IPv6 FILTER_SPEC object: Class = 10, C-Type = TBA

           Definition same as VPN-IPv6 SENDER_TEMPLATE object.

</pre></div>
<p>
</p>
<p>The protocol ID, flags, and DstPort are identical to the IPv4 and
        IPv6 SESSION objects.
</p>
<a name="obj-hop"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4"></a><h3>8.4.&nbsp;
VPN-IPv4 and VPN-IPv6 RSVP_HOP objects</h3>

<p>Usage of the VPN-IPv4 RSVP_HOP Object is described in <a class='info' href='#inter-as-b-no-cac'>Section&nbsp;5.2.2<span> (</span><span class='info'>No admission control on ASBR</span><span>)</span></a>. The VPN-IPv4 RSVP_HOP object is used to
        establish signalling reachability between RSVP neighbors separated by
        one or more Option-B ASBRs. This object may appear in all RSVP
        messages that carry a RSVP_HOP object, and that travel between the
        Ingress and Egress PEs. It MUST NOT be included in any RSVP messages
        that are sent outside of the provider's backbone (except in the
        inter-AS option B and C cases, as described above, when it may appear
        on inter-AS links). The format of the object is as follows:
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv4 RSVP_HOP object: Class = 3, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |       IPv4 Next/Previous Hop Address (4 bytes)        |
           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |    VPN-IPv4 Next/Previous Hop Address (12 bytes)      |
           +
              +
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |                 Logical Interface Handle              |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    VPN-IPv6 RSVP_HOP object: Class = 3, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +       IPv6 Next/Previous Hop Address (16 bytes)       +
           |                                                       |
           +                                                       +
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +     VPN-IPv6 Next/Previous Hop Address (24 bytes)     +
           /                                                       /
           .                                                       .
           /                                                       /
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |                Logical Interface Handle               |
           +-------------+-------------+-------------+-------------+
</pre></div>
<a name="obj-agg-session"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5"></a><h3>8.5.&nbsp;
Aggregated VPN-IPv4 and VPN-IPv6 SESSION objects</h3>

<p>The usage of Aggregated VPN-IPv4 SESSION object is described in
        <a class='info' href='#aggregation'>Section&nbsp;7.3<span> (</span><span class='info'>RSVP Aggregation</span><span>)</span></a>. The AGGREGATE-VPN-IPv4 SESSION object
        should appear in all RSVP messages that ordinarily contain a
        AGGREGATE-IPv4 SESSION object as defined in <a class='info' href='#RFC3175'>[RFC3175]<span> (</span><span class='info'>Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;Aggregation of RSVP for IPv4 and IPv6 Reservations,&rdquo; September&nbsp;2001.</span><span>)</span></a>
        and are sent between ingress PE and egress PE in either direction. The
        GENERIC-AGGREGATE-VPN-IPv4 SESSION object should appear in all RSVP
        messages that ordinarily contain a GENERIC-AGGREGATE-IPv4 SESSION
        object as defined in <a class='info' href='#RFC4860'>[RFC4860]<span> (</span><span class='info'>Le Faucheur, F., Davie, B., Bose, P., Christou, C., and M. Davenport, &ldquo;Generic Aggregate Resource ReSerVation Protocol (RSVP) Reservations,&rdquo; May&nbsp;2007.</span><span>)</span></a> and are sent between
        ingress PE and egress PE in either direction. These objects MUST NOT
        be included in any RSVP messages that are sent outside of the
        provider's backbone (except in the inter-AS option B and C cases, as
        described above, when it may appear on inter-AS links). The processing
        rules for these objects are otherwise identical to those of the
        VPN-IPv4 SESSION object defined in <a class='info' href='#obj-session'>Section&nbsp;8.1<span> (</span><span class='info'>VPN-IPv4 and VPN-IPv6 SESSION objects</span><span>)</span></a>. The
        VPN-IPv4 address in this object is built by combining the IPv4 address
        from the incoming SESSION with the RD in the BGP advertisement from
        the egress PE for this prefix and customer. The format of the object
        is as follows:
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    AGGREGATE-VPN-IPv4 SESSION object: Class = 1, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |             VPN-IPv4 DestAddress (12 bytes)           |
           +                                                       +
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |   ///////   |    Flags    |   ///////   |     DSCP    |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    AGGREGATE-VPN-IPv6 SESSION object: Class = 1, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +             VPN-IPv6 DestAddress (24 bytes)           +
           /                                                       /
           .                                                       .
           /                                                       /
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |   Reserved  |    Flags    |   Reserved  |     DSCP    |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>The flags and DSCP are identical to the AGGREGATE-IPv4 and
        AGGREGATE-IPv6 SESSION objects.
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    GENERIC-AGGREGATE-VPN-IPv4 SESSION object:
             Class = 1, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |             VPN-IPv4 DestAddress (12 bytes)           |
           +                                                       +
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |  Reserved   |    Flags    |           PHB-ID          |
           +-------------+-------------+-------------+-------------+
           |          Reserved         |          vDstPort         |
           +-------------+-------------+-------------+-------------+
           |                    Extended vDstPort                  |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    GENERIC-AGGREGATE-VPN-IPv6 SESSION object:
             Class = 1, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +             VPN-IPv6 DestAddress (24 bytes)           +
           /                                                       /
           .                                                       .
           /                                                       /
           |                                                       |
           +-------------+-------------+-------------+-------------+
           |  Reserved   |    Flags    |           PHB-ID          |
           +-------------+-------------+-------------+-------------+
           |          Reserved         |          vDstPort         |
           +-------------+-------------+-------------+-------------+
           |                    Extended vDstPort                  |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>The flags, PHB-ID, vDstPort and Extended vDstPort are identical to
        the GENERIC-AGGREGATE-IPv4 and GENERIC-AGGREGATE-IPv6 SESSION
        objects.
</p>
<a name="obj-agg-template"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6"></a><h3>8.6.&nbsp;
AGGREGATE-VPN-IPv4 and AGGREGATE-VPN-IPv6 SENDER_TEMPLATE objects</h3>

<p>The usage of Aggregated VPN-IPv4 SENDER_TEMPLATE object is
        described in <a class='info' href='#aggregation'>Section&nbsp;7.3<span> (</span><span class='info'>RSVP Aggregation</span><span>)</span></a>. The AGGREGATE-VPN-IPv4
        SENDER_TEMPLATE object should appear in all RSVP messages that
        ordinarily contain a AGGREGATE-IPv4 SENDER_TEMPLATE object as defined
        in <a class='info' href='#RFC3175'>[RFC3175]<span> (</span><span class='info'>Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;Aggregation of RSVP for IPv4 and IPv6 Reservations,&rdquo; September&nbsp;2001.</span><span>)</span></a> and <a class='info' href='#RFC4860'>[RFC4860]<span> (</span><span class='info'>Le Faucheur, F., Davie, B., Bose, P., Christou, C., and M. Davenport, &ldquo;Generic Aggregate Resource ReSerVation Protocol (RSVP) Reservations,&rdquo; May&nbsp;2007.</span><span>)</span></a>, and are
        sent between ingress PE and egress PE in either direction. These
        objects MUST NOT be included in any RSVP messages that are sent
        outside of the provider's backbone (except in the inter-AS option B
        and C cases, as described above, when it may appear on inter-AS
        links). The processing rules for these objects are otherwise identical
        to those of the VPN-IPv4 SENDER_TEMPLATE object defined in <a class='info' href='#obj-template'>Section&nbsp;8.2<span> (</span><span class='info'>VPN-IPv4 and VPN-IPv6 SENDER_TEMPLATE objects</span><span>)</span></a>. The VPN-IPv4 address in this object is built
        by combining the IPv4 address from the incoming SENDER_TEMPLATE with
        the RD in the BGP advertisement from the ingress PE for this prefix
        and customer. The format of the object is as follows:
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    AGGREGATE-VPN-IPv4 SENDER_TEMPLATE object:
             Class = 11, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |          VPN-IPv4 AggregatorAddress (12 bytes)        |
           +                                                       +
           |                                                       |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    AGGREGATE-VPN-IPv6 SENDER_TEMPLATE object:
             Class = 11, C-Type = TBA

           +-------------+-------------+-------------+-------------+
           |                                                       |
           +                                                       +
           |                                                       |
           +          VPN-IPv6 AggregatorAddress (24 bytes)        +
           /                                                       /
           .                                                       .
           /                                                       /
           |                                                       |
           +-------------+-------------+-------------+-------------+

</pre></div>
<p>
</p>
<p>The flags and DSCP are identical to the AGGREGATE-IPv4 and
        AGGREGATE-IPv6 SESSION objects.
</p>
<a name="obj-agg-filterspec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7"></a><h3>8.7.&nbsp;
AGGREGATE-VPN-IPv4 and AGGREGATE-VPN-IPv6 FILTER_SPEC objects</h3>

<p>The usage of Aggregated VPN-IPv4 FILTER_SPEC object is described in
        <a class='info' href='#aggregation'>Section&nbsp;7.3<span> (</span><span class='info'>RSVP Aggregation</span><span>)</span></a>. The AGGREGATE-VPN-IPv4 FILTER_SPEC
        object should appear in all RSVP messages that ordinarily contain a
        AGGREGATE-IPv4 FILTER_SPEC object as defined in <a class='info' href='#RFC3175'>[RFC3175]<span> (</span><span class='info'>Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;Aggregation of RSVP for IPv4 and IPv6 Reservations,&rdquo; September&nbsp;2001.</span><span>)</span></a> and <a class='info' href='#RFC4860'>[RFC4860]<span> (</span><span class='info'>Le Faucheur, F., Davie, B., Bose, P., Christou, C., and M. Davenport, &ldquo;Generic Aggregate Resource ReSerVation Protocol (RSVP) Reservations,&rdquo; May&nbsp;2007.</span><span>)</span></a>, and are sent
        between ingress PE and egress PE in either direction. These objects
        MUST NOT be included in any RSVP messages that are sent outside of the
        provider's backbone (except in the inter-AS option B and C cases, as
        described above, when it may appear on inter-AS links). The processing
        rules for these objects are otherwise identical to those of the
        VPN-IPv4 FILTER_SPEC object defined in <a class='info' href='#obj-filterspec'>Section&nbsp;8.3<span> (</span><span class='info'>VPN-IPv4 and VPN-IPv6 FILTER_SPEC objects</span><span>)</span></a>. The VPN-IPv4 address in this object is
        built by combining the IPv4 address from the incoming FILTER_SPEC with
        the RD in the BGP advertisement from the ingress PE for this prefix
        and customer. The format of the object is as follows:
</p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      o    AGGREGATE-VPN-IPv4 FILTER_SPEC object:
             Class = 10, C-Type = TBA

           Definition same as AGGREGATE-VPN-IPv4 SENDER_TEMPLATE object.


      o    AGGREGATE-VPN-IPv6 FILTER_SPEC object:
             Class = 10, C-Type = TBA

           Definition same as AGGREGATE-VPN-IPv6 SENDER_TEMPLATE object.

</pre></div>
<p>
</p>
<p>
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>This document requires IANA assignment of new RSVP C-Types to
      accommodate the new objects described in <a class='info' href='#objects'>Section&nbsp;8<span> (</span><span class='info'>Object Definitions</span><span>)</span></a>. In
      addition, a new PathError code/value is required to identify a
      signalling reachability failure and the need for a VPN-IPv4 or VPN-IPv6
      RSVP_HOP object as described in <a class='info' href='#inter-as-b-no-cac'>Section&nbsp;5.2.2<span> (</span><span class='info'>No admission control on ASBR</span><span>)</span></a>.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p><a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a> addresses the security considerations of
      BGP/MPLS VPNs in general. General RSVP security considerations are
      addressed in <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>. To ensure the integrity of RSVP,
      the RSVP Authentication mechanisms defined in <a class='info' href='#RFC2747'>[RFC2747]<span> (</span><span class='info'>Baker, F., Lindell, B., and M. Talwar, &ldquo;RSVP Cryptographic Authentication,&rdquo; January&nbsp;2000.</span><span>)</span></a>
      and <a class='info' href='#RFC3097'>[RFC3097]<span> (</span><span class='info'>Braden, R. and L. Zhang, &ldquo;RSVP Cryptographic Authentication -- Updated Message Type Value,&rdquo; April&nbsp;2001.</span><span>)</span></a>may be used. These protect RSVP message
      integrity hop-by-hop and provide node authentication as well as replay
      protection, thereby protecting against corruption and spoofing of RSVP
      messages. <a class='info' href='#I-D.behringer-tsvwg-rsvp-security-groupkeying'>[I&#8209;D.behringer&#8209;tsvwg&#8209;rsvp&#8209;security&#8209;groupkeying]<span> (</span><span class='info'>Behringer, M. and F. Faucheur, &ldquo;Applicability of Keying Methods for RSVP Security,&rdquo; November&nbsp;2007.</span><span>)</span></a> discusses
      applicability of various keying approaches for RSVP Authentication. We
      note that the RSVP signaling in MPLS VPN is likely to spread over
      multiple administrative domains (e.g. the service provider operating the
      VPN service, and the customers of the service). Therefore the
      considerations in <a class='info' href='#I-D.behringer-tsvwg-rsvp-security-groupkeying'>[I&#8209;D.behringer&#8209;tsvwg&#8209;rsvp&#8209;security&#8209;groupkeying]<span> (</span><span class='info'>Behringer, M. and F. Faucheur, &ldquo;Applicability of Keying Methods for RSVP Security,&rdquo; November&nbsp;2007.</span><span>)</span></a> about
      inter-domain issues are likely to apply. Since RSVP messages travel
      through the L3VPN cloud directly addressed to PE or ASBR routers
      (without IP Router-Alert), P routers remain isolated from RSVP messages
      signalling customer reservations. Providers MAY choose to block PEs from
      sending IP Router-Alert datagrams to P routers as a security practice,
      without impacting the functionality described herein.
</p>
<p>Beyond those general issues, four specific issues are introduced by
      this document: resource usage on PEs, resource usage in the provider
      backbone, PE route advertisement outside the AS, and signalling exposure
      to ASBRs and PEs. We discuss these in turn.
</p>
<p>A customer who makes resource reservations on the CE-PE links for his
      sites is only competing for link resources with himself, as in standard
      RSVP, at least in the common case where each CE-PE link is dedicated to
      a single customer. Thus, from the perspective of the CE-PE links, this
      draft does not introduce any new security issues. However, because a PE
      typically serves multiple customers, there is also the possibility that
      a customer might attempt to use excessive computational resources on a
      PE (CPU cycles, memory etc.) by sending large numbers of RSVP messages
      to a PE. In the extreme this could represent a form of denial-of-service
      attack. In order to prevent such an attack, a PE should have mechanisms
      to limit the fraction of its processing resources that can be consumed
      by any one CE or by the set of CEs of a given customer. For example, a
      PE might implement a form of rate limiting on RSVP messages that it
      receives from each CE. We observe that these security risks and measures
      related to PE resource usage are very similar for any control plane
      protocol operating between CE and PE (e.g. RSVP, routing, multicast)
</p>
<p>The second concern arises only when the service provider chooses to
      offer resource reservation across the backbone, as described in <a class='info' href='#backbone'>Section&nbsp;4<span> (</span><span class='info'>Admission Control in Provider's Backbone</span><span>)</span></a>. In this case, the concern may be that a single
      customer might attempt to reserve a large fraction of backbone capacity,
      perhaps with a co-ordinated effort from several different CEs, thus
      denying service to other customers using the same backbone. <a class='info' href='#RFC4804'>[RFC4804]<span> (</span><span class='info'>Le Faucheur, F., &ldquo;Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels,&rdquo; February&nbsp;2007.</span><span>)</span></a> provides some guidance on the security issues when
      RSVP reservations are aggregated onto MPLS tunnels, which are applicable
      to the situation described here. We note that a provider may use local
      policy to limit the amount of resources that can be reserved by a given
      customer from a particular PE, and that a policy server could be used to
      control the resource usage of a given customer across multiple PEs if
      desired.
</p>
<p>A third issue may arise when Inter-AS Option B is used and admission
      control is not required on the inter-AS link (<a class='info' href='#inter-as-b-no-cac'>Section&nbsp;5.2.2<span> (</span><span class='info'>No admission control on ASBR</span><span>)</span></a>). In this case, the VPN PE includes a
      VPN-IPv4 address in the PHOP/NHOP objects it generates, which is used by
      the peer to determine a VPN label to communicate back with this PE. This
      results in a direct VPN-IPv4 route to a PE being exported to another AS,
      and potentially could allow customers to direct RSVP messages to remote
      PEs if those routes were advertised to the customers. However, as
      described in <a class='info' href='#inter-as-b-no-cac'>Section&nbsp;5.2.2<span> (</span><span class='info'>No admission control on ASBR</span><span>)</span></a>, a variety of
      techniques may be used to prevent such routes from being advertised to
      customers. Alternatively, ASBRs may implement the signalling procedures
      described in <a class='info' href='#inter-as-b-cac'>Section&nbsp;5.2.1<span> (</span><span class='info'>Admission control on ASBR</span><span>)</span></a>, even if admission control
      is not required on the inter-AS link, as these procedures do not require
      any direct P/PE route advertisement out of the AS.
</p>
<p>Finally, certain operations described herein (<a class='info' href='#cac-pe-ce'>Section&nbsp;3<span> (</span><span class='info'>Admission Control on PE-CE Links</span><span>)</span></a>) require an ASBR or PE to receive and locally
      process a signalling packet addressed to the BGP next-hop address
      advertised by that router. This requirement does not strictly apply to
      MPLS/BGP VPNs <a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a>. This could be viewed as opening
      ASBRs and PEs to being directly addressable by customer devices where
      they were not open before, and could be considered a security issue. If
      a provider wishes to mitigate this situation, it would be possible to
      use one of the approaches described in <a class='info' href='#inter-as-b-no-cac'>Section&nbsp;5.2.2<span> (</span><span class='info'>No admission control on ASBR</span><span>)</span></a> to prevent such routers from being
      reachable by customers. That is, whenever a signalling message is to be
      sent to a PE or ASBR, the address of the router in question would be
      looked up in the "control protocol" VPN, and the message would then be
      sent on the LSP that is found as a result of that lookup. This would
      allow the provider to restrict advertisement of PE and ASBR addresses so
      that these addresses are not reachable by customer devices.
</p>
<a name="Acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgments</h3>

<p>Thanks to Ashwini Dahiya, Prashant Srinivas, Yakov Rekhter, Eric
      Rosen for their many contributions to solving the problems described in
      this draft. Thanks to Ferit Yegenoglu and Dan Tappan for their useful
      comments.
</p>
<a name="altern"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Alternatives Considered</h3>

<p>At this stage a number of alternatives to the approach described
      above have been considered. We document some of the approaches
      considered here to assist future discussion. None of these has been
      shown to improve upon the approach described above, and the first two
      seem to have significant drawbacks relative to the approach described
      above.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>Appendix A.1.&nbsp;
GMPLS UNI approach</h3>

<p><a class='info' href='#RFC4208'>[RFC4208]<span> (</span><span class='info'>Swallow, G., Drake, J., Ishimatsu, H., and Y. Rekhter, &ldquo;Generalized Multiprotocol Label Switching (GMPLS) User-Network Interface (UNI): Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Support for the Overlay Model,&rdquo; October&nbsp;2005.</span><span>)</span></a> defines the GMPLS UNI. In Section 7 the
        operation of the GMPLS UNI in a VPN context is briefly described. This
        is somewhat similar to the problem tackled in the current document.
        The main difference is that the GMPLS UNI is primarily aimed at the
        problem of allowing a CE device to request the establishment of an LSP
        across the network on the other side of the UNI. Hence the procedures
        in <a class='info' href='#RFC4208'>[RFC4208]<span> (</span><span class='info'>Swallow, G., Drake, J., Ishimatsu, H., and Y. Rekhter, &ldquo;Generalized Multiprotocol Label Switching (GMPLS) User-Network Interface (UNI): Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Support for the Overlay Model,&rdquo; October&nbsp;2005.</span><span>)</span></a> would lead to the establishment of an LSP
        across the VPN provider's network for every RSVP request received,
        which is not desired in this case.
</p>
<p>To the extent possible, the approach described in this document is
        consistent with <a class='info' href='#RFC4208'>[RFC4208]<span> (</span><span class='info'>Swallow, G., Drake, J., Ishimatsu, H., and Y. Rekhter, &ldquo;Generalized Multiprotocol Label Switching (GMPLS) User-Network Interface (UNI): Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Support for the Overlay Model,&rdquo; October&nbsp;2005.</span><span>)</span></a>, while filling in more of
        the details and avoiding the problem noted above.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>Appendix A.2.&nbsp;
VRF label approach</h3>

<p>Another approach to solving the problems described here involves
        the use of label switching to ensure that Path, Resv, and other RSVP
        messages are directed to the appropriate VRF. One challenge with such
        an approach is that <a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a> does not require labels
        to be allocated for VRFs, only for customer prefixes, and that there
        is no simple, existing method for advertising the fact that a label is
        bound to a VRF. If, for example, an ingress PE sent a Path message
        labelled with a VPN label that was advertised by the egress PE for the
        prefix that matches the destination address in the Path, there is a
        risk that the egress PE would simply label-switch the Path directly on
        to the CE without performing RSVP processing.
</p>
<p>A second challenge with this approach is that an IP address needs
        to be associated with a VRF and used as the PHOP address for the Path
        message sent from ingress PE to egress PE. That address must be
        reachable from the egress PE, and exist in the VRF at the ingress PE.
        Such an address is not always available in today's deployments, so
        this represents at least a change to existing deployment
        practices.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>Appendix A.3.&nbsp;
VRF label plus VRF address approach</h3>

<p>It is possible to create an approach based on that described in the
        previous section which addresses the main challenges of that approach.
        The basic approach has two parts: (a) define a new BGP Extended
        Community to tag a route (and its associated MPLS label) as pointing
        to a VRF; (b) allocate a "dummy" address to each VRF, specifically to
        be used for routing RSVP messages. The dummy address (which could be
        anything, e.g. a loopback of the associated PE) would be used as a
        PHOP for Path messages and would serve as the destination for Resv
        messages but would not be imported into VRFs of any other PE.
</p>
<p>
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2205">[RFC2205]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:lixia@cs.ucla.edu">Zhang, L.</a>, <a href="mailto:Berson@ISI.EDU">Berson, S.</a>, <a href="mailto:Herzog@WATSON.IBM.COM">Herzog, S.</a>, and <a href="mailto:jamin@EECS.UMICH.EDU">S. Jamin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2205">Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification</a>,&rdquo; RFC&nbsp;2205, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2205.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2205.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2205.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3175">[RFC3175]</a></td>
<td class="author-text">Baker, F., Iturralde, C., Le Faucheur, F., and B. Davie, &ldquo;<a href="http://tools.ietf.org/html/rfc3175">Aggregation of RSVP for IPv4 and IPv6 Reservations</a>,&rdquo; RFC&nbsp;3175, September&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3175.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4364">[RFC4364]</a></td>
<td class="author-text">Rosen, E. and Y. Rekhter, &ldquo;<a href="http://tools.ietf.org/html/rfc4364">BGP/MPLS IP Virtual Private Networks (VPNs)</a>,&rdquo; RFC&nbsp;4364, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4364.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4659">[RFC4659]</a></td>
<td class="author-text">De Clercq, J., Ooms, D., Carugi, M., and F. Le Faucheur, &ldquo;<a href="http://tools.ietf.org/html/rfc4659">BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN</a>,&rdquo; RFC&nbsp;4659, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4659.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4804">[RFC4804]</a></td>
<td class="author-text">Le Faucheur, F., &ldquo;<a href="http://tools.ietf.org/html/rfc4804">Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels</a>,&rdquo; RFC&nbsp;4804, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4804.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.behringer-tsvwg-rsvp-security-groupkeying">[I-D.behringer-tsvwg-rsvp-security-groupkeying]</a></td>
<td class="author-text">Behringer, M. and F. Faucheur, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-behringer-tsvwg-rsvp-security-groupkeying-01.txt">Applicability of Keying Methods for RSVP Security</a>,&rdquo; draft-behringer-tsvwg-rsvp-security-groupkeying-01 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-behringer-tsvwg-rsvp-security-groupkeying-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.kumaki-l3vpn-e2e-rsvp-te-reqts">[I-D.kumaki-l3vpn-e2e-rsvp-te-reqts]</a></td>
<td class="author-text">Kumaki, K., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-kumaki-l3vpn-e2e-rsvp-te-reqts-06.txt">Requirements for supporting Customer RSVP and RSVP-TE Over a BGP/MPLS  IP-VPN</a>,&rdquo; draft-kumaki-l3vpn-e2e-rsvp-te-reqts-06 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-kumaki-l3vpn-e2e-rsvp-te-reqts-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1633">[RFC1633]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:ddc@LCS.MIT.EDU">Clark, D.</a>, and <a href="mailto:Shenker@PARC.XEROX.COM">S. Shenker</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1633">Integrated Services in the Internet Architecture: an Overview</a>,&rdquo; RFC&nbsp;1633, June&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1633.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc1633.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc1633.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2209">[RFC2209]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a> and <a href="mailto:lixia@cs.ucla.edu">L. Zhang</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2209">Resource ReSerVation Protocol (RSVP) -- Version 1 Message Processing Rules</a>,&rdquo; RFC&nbsp;2209, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2209.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2209.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2209.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2210">[RFC2210]</a></td>
<td class="author-text"><a href="mailto:jtw@lcs.mit.edu">Wroclawski, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2210">The Use of RSVP with IETF Integrated Services</a>,&rdquo; RFC&nbsp;2210, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2210.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2210.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2210.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2747">[RFC2747]</a></td>
<td class="author-text"><a href="mailto:fred@cisco.com">Baker, F.</a>, <a href="mailto:lindell@ISI.EDU">Lindell, B.</a>, and <a href="mailto:mohitt@microsoft.com">M. Talwar</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2747">RSVP Cryptographic Authentication</a>,&rdquo; RFC&nbsp;2747, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2747.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2961">[RFC2961]</a></td>
<td class="author-text">Berger, L., Gan, D., Swallow, G., Pan, P., Tommasi, F., and S. Molendini, &ldquo;<a href="http://tools.ietf.org/html/rfc2961">RSVP Refresh Overhead Reduction Extensions</a>,&rdquo; RFC&nbsp;2961, April&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc2961.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3032">[RFC3032]</a></td>
<td class="author-text">Rosen, E., Tappan, D., Fedorkow, G., Rekhter, Y., Farinacci, D., Li, T., and A. Conta, &ldquo;<a href="http://tools.ietf.org/html/rfc3032">MPLS Label Stack Encoding</a>,&rdquo; RFC&nbsp;3032, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3032.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3097">[RFC3097]</a></td>
<td class="author-text">Braden, R. and L. Zhang, &ldquo;<a href="http://tools.ietf.org/html/rfc3097">RSVP Cryptographic Authentication -- Updated Message Type Value</a>,&rdquo; RFC&nbsp;3097, April&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3097.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3473">[RFC3473]</a></td>
<td class="author-text">Berger, L., &ldquo;<a href="http://tools.ietf.org/html/rfc3473">Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions</a>,&rdquo; RFC&nbsp;3473, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3473.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4080">[RFC4080]</a></td>
<td class="author-text">Hancock, R., Karagiannis, G., Loughney, J., and S. Van den Bosch, &ldquo;<a href="http://tools.ietf.org/html/rfc4080">Next Steps in Signaling (NSIS): Framework</a>,&rdquo; RFC&nbsp;4080, June&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4080.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4206">[RFC4206]</a></td>
<td class="author-text">Kompella, K. and Y. Rekhter, &ldquo;<a href="http://tools.ietf.org/html/rfc4206">Label Switched Paths (LSP) Hierarchy with Generalized Multi-Protocol Label Switching (GMPLS) Traffic Engineering (TE)</a>,&rdquo; RFC&nbsp;4206, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4206.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4208">[RFC4208]</a></td>
<td class="author-text">Swallow, G., Drake, J., Ishimatsu, H., and Y. Rekhter, &ldquo;<a href="http://tools.ietf.org/html/rfc4208">Generalized Multiprotocol Label Switching (GMPLS) User-Network Interface (UNI): Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Support for the Overlay Model</a>,&rdquo; RFC&nbsp;4208, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4208.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4860">[RFC4860]</a></td>
<td class="author-text">Le Faucheur, F., Davie, B., Bose, P., Christou, C., and M. Davenport, &ldquo;<a href="http://tools.ietf.org/html/rfc4860">Generic Aggregate Resource ReSerVation Protocol (RSVP) Reservations</a>,&rdquo; RFC&nbsp;4860, May&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4860.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bruce Davie</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1414 Mass. Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Boxborough, MA  01719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:bsd@cisco.com">bsd@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Francois le Faucheur</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Village d'Entreprise Green Side - Batiment T3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">400, Avenue de Roumanille</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Biot Sophia-Antipolis  06410</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:flefauch@cisco.com">flefauch@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ashok Narayanan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1414 Mass. Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Boxborough, MA  01719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ashokn@cisco.com">ashokn@cisco.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
