






Internet Draft                                               K. Murchison
Document: draft-murchison-lmtp-ignorequota-02.txt           L. Greenfield
Expires December 15, 2002                                    10 June 2002


            LMTP Service Extension for Ignoring Recipient Quotas


Status of this Memo

    This document is an Internet-Draft and is in full conformance with
    all provisions of Section 10 of RFC2026.  Internet-Drafts are working
    documents of the Internet Engineering Task Force (IETF), its areas,
    and its working groups.  Note that other groups may also distribute
    working documents as Internet-Drafts.

    Internet-Drafts are draft documents valid for a maximum of six months
    and may be updated, replaced, or obsoleted by other documents at any
    time.  It is inappropriate to use Internet-Drafts as reference
    material or to cite them other than as "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/ietf/1id-abstracts.txt

    To view the list Internet-Draft Shadow Directories, see
    http://www.ietf.org/shadow.html.

    Distribution of this memo is unlimited.



Abstract

    This memo defines an extension to the LMTP service whereby a client
    may ask the server to ignore a recipient's quotas when delivering a
    message.


Conventions Used in the Document

    In examples, "C:" and "S:" indicate lines sent by the client and
    server respectively.

    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
    document are to be interpreted as described in [KEYWORDS].





Expires December 15, 2002     Murchison                         [Page 1]

Internet Draft              LMTP Ignore Quota              June 10, 2002



0.  Meta-information on this draft

    This information is intended to facilitate discussion.  It will be
    removed when this document leaves the Internet-Draft stage.


0.1.  Discussion

    This draft is intended to be an extension to the Local Mail Transfer
    Protocol, available from the RFC repository as
    <ftp://ftp.ietf.org/rfc/rfc2033.txt>.  A revised version of this
    draft document will be submitted to the RFC editor as Informational
    for the Internet Community.

    This draft and the Local Mail Protocol Extension itself are being
    discussed on the SMTP Extensions mailing list at <ietf-smtp@imc.org>.
    Subscription requests can be sent to <ietf-smtp-request@imc.org>
    (send an email message with the word "subscribe" in the body).  More
    information on the mailing list along with a WWW archive of back
    messages is available at <http://www.imc.org/ietf-smtp/>.


0.2.  Noted Changes


0.2.1  since -01

    Editorial changes (re-submission).


0.2.2  since -00

    Editorial changes.


1.  Introduction

    In many cases, the [LMTP] protocol is used to transfer messages to a
    delivery agent which might impose some limits on the usage of system
    resources by individual recipients (e.g. disk space on a mailstore).
    Sometimes it may be desirable for an LMTP client to inject a message
    into the mailstore regardless of these quotas (e.g. an automated
    process notifying users that they are over quota).

    This memo uses the mechanism defined in [ESMTP] to define an
    extension to the LMTP service whereby a client may ask a server to
    ignore such quotas when delivering a message.



Expires December 15, 2002     Murchison                         [Page 2]

Internet Draft              LMTP Ignore Quota              June 10, 2002


2.  Framework for the Ignore Quota Extension

    The following service extension is hereby defined:

     (1) the name of the LMTP service extension is "Ignore Quota";

     (2) the LHLO keyword value associated with this extension is
         "IGNOREQUOTA";

     (3) no parameters are allowed with this LHLO keyword value;

     (4) one optional parameter using the keyword "IGNOREQUOTA" is added
         to the RCPT TO command;

     (5) the maximum length of a RCPT TO command line is increased by 12
         characters by the possible addition of the IGNOREQUOTA keyword;

     (6) no additional LMTP verbs are defined by this extension.

    The remainder of this memo specifies how support for the extension
    affects the behavior of an LMTP client and server.


3.  The Ignore Quota service extension

    When an LMTP client wishes to force delivery of a message regardless
    of quotas, it first issues the LHLO command to the server.  If the
    LMTP server responds with code 250 to the LHLO command, and the
    response includes the LHLO keyword IGNOREQUOTA, then the server sup¡
    ports the Ignore Quota extension and will accept the extended ver¡
    sion of the RCPT command.

    The extended RCPT command is issued by an LMTP client when it wishes
    to have the server ignore the recipient's quotas. The extended RCPT
    command is identical to the RCPT command defined in [SMTP], except
    that an IGNOREQUOTA parameter must appear after the address.

    The complete syntax of this extended command is defined in [ESMTP],
    with the esmtp-keyword of IGNOREQUOTA.


4.  Usage Example

    The following dialogue illustrates the use of the Ignore Quota ser¡
    vice extension:






Expires December 15, 2002     Murchison                         [Page 3]

Internet Draft              LMTP Ignore Quota              June 10, 2002


    S: <wait for connection>
    C: <open connection to server>
    S: 220 foo.oceana.com LMTP Cyrus v2.0.11 ready
    C: LHLO oceana.com
    S: 250-foo.oceana.com
    S: 250-IGNOREQUOTA
    S: 250-8BITMIME
    S: 250-ENHANCEDSTATUSCODES
    S: 250-AUTH DIGEST-MD5 CRAM-MD5 EXTERNAL
    S: 250 PIPELINING
    C: MAIL FROM:<ken@oceana.com>
    S: 250 2.1.0 ok
    C: RCPT TO:<test@oceana.com>
    S: 250 2.1.5 ok
    C: DATA
    S: 354 go ahead
     ...
    C: .
    S: 452 4.2.2 Over quota
    C: MAIL FROM:<ken@oceana.com>
    S: 250 2.1.0 ok
    C: RCPT TO:<test@oceana.com> IGNOREQUOTA
    S: 250 2.1.5 ok
    C: DATA
    S: 354 go ahead
     ...
    C: .
    S: 250 2.1.5 Ok
    C: QUIT
    S: 221 2.0.0 bye


5.  Security Considerations

    The Ignore Quota extension described in this memo can conceivably be
    used to force any or all users over their quotas and prevent further
    messages from being delivered.  For this reason, implementations
    SHOULD try to limit the use of this extension to privileged or
    trusted users.  Possible means for doing so would be to either
    authenticate and identify the user of the LMTP client by using the
    mechanism defined in [SMTPAUTH] or restrict the use of the LMTP
    client via permissions or access control lists.









Expires December 15, 2002     Murchison                         [Page 4]

Internet Draft              LMTP Ignore Quota              June 10, 2002


6.  IANA Considerations

    The registration of the LMTP "IGNOREQUOTA" extension follows:

    Service Extension: Ignore Quota
    LHLO Keyword:      IGNOREQUOTA
    Parameters:        none
    Verb:              none
    Added Behavior:    defined in this memo


7.  References

     [KEYWORDS] Bradner, S., "Key words for use in RFCs to Indicate
         Requirement Levels", Harvard University, RFC 2119, March 1997.


     [LMTP] Myers, J., "Local Mail Transfer Protocol", Carnegie-Mellon
         University, RFC 2033, October 1996.


     [SMTP] Klensin, J., Ed., "Simple Mail Transfer Protocol", AT&T Lab¡
         oratories, RFC 2821, April 2001.


     [ESMTP] Klensin, J., Freed, N., Rose, M., Stefferud, E., and D.
         Crocker, "SMTP Service Extensions", MCI, Innosoft Interna¡
         tional, Inc., Dover Beach Consulting, Inc., Network Management
         Associates, Inc., Brandenburg Consulting, RFC 1869, November
         1995.


     [SMTPAUTH] Myers, J., "SMTP Service Extension for Authentication",
         Netscape Communications, RFC 2554, March 1999.


8.  Author's Address

    Kenneth Murchison
    Oceana Matrix Ltd.
    21 Princeton Place
    Orchard Park, NY 14127

    Phone: (716) 662-8973
    EMail: ken@oceana.com






Expires December 15, 2002     Murchison                         [Page 5]

Internet Draft              LMTP Ignore Quota              June 10, 2002


    Lawrence E. Greenfield
    Carnegie Mellon University
    5000 Forbes Ave.
    Pittsburgh, PA 15213

    Phone: (412) 268-4646
    EMail: leg+@andrew.cmu.edu












































Expires December 15, 2002     Murchison                         [Page 6]

