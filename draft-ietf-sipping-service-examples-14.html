<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Session Initiation Protocol Service Examples</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Session Initiation Protocol Service Examples">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING Working Group</td><td class="header">A. Johnston, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Avaya</td></tr>
<tr><td class="header">Intended status: BCP</td><td class="header">R. Sparks</td></tr>
<tr><td class="header">Expires: August 23, 2008</td><td class="header">Estacado Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">C. Cunningham</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">S. Donovan</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">K. Summers</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Prodea Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 20, 2008</td></tr>
</table></td></tr></table>
<h1><br />Session Initiation Protocol Service Examples<br />draft-ietf-sipping-service-examples-14</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 23, 2008.</p>

<h3>Abstract</h3>

<p>
   This document gives examples of Session Initiation
   Protocol (SIP) services.  This covers most features offered in
   so-called IP Centrex offerings from local exchange carriers and PBX
   (Private Branch Exchange) features.  Most of the services shown in
   this document are implemented in the SIP User Agents, although some
   require the assistance of a SIP Proxy.  Some require some extensions
   to SIP including the REFER, SUBSCRIBE, and NOTIFY methods and the
   Replaces and Join header fields. These features are not intended to be an
   exhaustive set, but rather show implementations of common features
   likely to be implemented on SIP IP telephones in a business
   environment.

</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Overview<br />
<a href="#anchor2">2.</a>&nbsp;
Service Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Call Hold<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
Consultation Hold<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.3.</a>&nbsp;
Music On Hold<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.4.</a>&nbsp;
Transfer - Unattended<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.5.</a>&nbsp;
Transfer - Attended<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.6.</a>&nbsp;
Transfer - Instant Messaging<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.7.</a>&nbsp;
Call Forwarding Unconditional<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">2.8.</a>&nbsp;
Call Forwarding - Busy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">2.9.</a>&nbsp;
Call Forwarding - No Answer<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">2.10.</a>&nbsp;
3-way Conference - Third Party is Added<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">2.11.</a>&nbsp;
3-way Conference - Third Party Joins<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">2.12.</a>&nbsp;
Find-Me<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">2.13.</a>&nbsp;
Call Management (Incoming Call Screening)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">2.14.</a>&nbsp;
Call Management (Outgoing Call Screening)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">2.15.</a>&nbsp;
Call Park<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">2.16.</a>&nbsp;
Call Pickup<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">2.17.</a>&nbsp;
Automatic Redial<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">2.18.</a>&nbsp;
Click to Dial<br />
<a href="#anchor21">3.</a>&nbsp;
Security Considerations<br />
<a href="#anchor22">4.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor23">5.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">6.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">6.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">6.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Overview</h3>

<p>

   This document provides example call flows detailing a SIP
   implementation of the following traditional telephony services:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         Call Hold                     Music on Hold
         Unattended Transfer           Consultation Hold
         Unconditional Call Forwarding Attended Transfer
         No Answer Call Forwarding     Busy Call Forwarding
         3-way Call                    Incoming Call Screening
         Find-Me                       Call Pickup
         Call Park                     Outgoing Call Screening
         Automatic Redial              Click to Dial
</pre></div>
<p>
Note that the Single Line Extension call flow has been removed from this document and will be covered in a separate document.

</p>
<p>
   The call flows shown in this document were developed in the design of 
   a SIP IP communications network.  They represent an example 
   set of so-called IP Centrex services or PBX services. 

</p>
<p>    
   It is the hope of the authors that this document will be useful for 
   SIP implementers, designers, and protocol researchers alike and will 
   help further the goal of a standard implementation of 
   <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] and some of its extensions.

</p>
<p>
   These flows represent carefully checked and working group reviewed 
   scenarios of SIP service examples as a companion to the specifications. 


</p>
<p>    
   These call flows are based on the current version 2.0 of SIP in 
   <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] with SDP usage described in 
   <a class='info' href='#RFC3264'>RFC 3264<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3264] Other RFCs 
   also form part of the SIP standard and are used and referenced in these
   call flows.

</p>
<p>
   The SIP specification and the other referenced
   documents are definitive as far as protocol issues are concerned.
   Also, these flows do not represent the only way to implement these
   services - other approaches such as <a class='info' href='#RFC3725'>3pcc (Third Party Call Control)<span> (</span><span class='info'>Rosenberg, J., Peterson, J., Schulzrinne, H., and G. Camarillo, &ldquo;Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP),&rdquo; April&nbsp;2004.</span><span>)</span></a> [RFC3725]
   or Back-to-Back User Agents (B2BUA) may be more appropriate in some
   circumstances.  The peer-to-peer design and principles of these service 
   examples are described in the <a class='info' href='#I-D.ietf-sipping-cc-framework'>Multiparty Framework document<span> (</span><span class='info'>Mahy, R., Sparks, R., Rosenberg, J., Petrie, D., and A. Johnston, &ldquo;A Call Control and Multi-party usage framework for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sipping&#8209;cc&#8209;framework].

</p>
<p>
   These flows assume the functionality described in the <a class='info' href='#RFC3665'>SIP Call Flow
   Examples document<span> (</span><span class='info'>Johnston, A., Donovan, S., Sparks, R., Cunningham, C., and K. Summers, &ldquo;Session Initiation Protocol (SIP) Basic Call Flow Examples,&rdquo; December&nbsp;2003.</span><span>)</span></a> [RFC3665], which explores basic SIP behavior.  Some of the scenarios described herein make use of
   the SIP method extension <a class='info' href='#RFC3515'>REFER<span> (</span><span class='info'>Sparks, R., &ldquo;The Session Initiation Protocol (SIP) Refer Method,&rdquo; April&nbsp;2003.</span><span>)</span></a> [RFC3515] and the SIP header extension <a class='info' href='#RFC3891'>Replaces<span> (</span><span class='info'>Mahy, R., Biggs, B., and R. Dean, &ldquo;The Session Initiation Protocol (SIP) &quot;Replaces&quot; Header,&rdquo; September&nbsp;2004.</span><span>)</span></a> [RFC3891], and the SIP header extension <a class='info' href='#RFC3911'>Join<span> (</span><span class='info'>Mahy, R. and D. Petrie, &ldquo;The Session Initiation Protocol (SIP) &quot;Join&quot; Header,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3911].  The
   <a class='info' href='#RFC3265'>SIP Events document<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] describes the use of SUBSCRIBE and NOTIFY
   while the <a class='info' href='#RFC4235'>SIP Dialog Event Package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and R. Mahy, &ldquo;An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP),&rdquo; November&nbsp;2005.</span><span>)</span></a> [RFC4235] document describes the dialog event
   package.  Some examples make use of the <a class='info' href='#I-D.ietf-sip-gruu'>GRUU (Globally Routable User Agent URI)<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;gruu] extension.

</p>
<p>
   These flows were prepared assuming a network of proxies, registrars, and other SIP servers.  The use of Secure SIP URIs (sips)
   is shown throughout this document, implying TLS transport on each hop with assumed certificate validation.  However, other security approaches can be used.  The use of Digest authentication is shown in some examples.

</p>
<p>
The emphasis in these call flows is the SIP signaling exchange.  As a result, only very simple SDP offer/answer exchanges are shown with audio media.  These flows apply equally well for other media and multi-media sessions.  For more advanced examples of SDP offer/answer exchanges, refer to <a class='info' href='#RFC4317'>[RFC4317]<span> (</span><span class='info'>Johnston, A. and R. Sparks, &ldquo;Session Description Protocol (SDP) Offer/Answer Examples,&rdquo; December&nbsp;2005.</span><span>)</span></a>.

</p>
<p>
   Each call flow is presented with a textual description of the
   scenario, a message flow diagram showing the messages exchanged
   between separate network elements, and the detailed contents of each
   message shown in the diagram.


</p>
<p>
1.1 Legend for Message Flows

</p>
<p>
   Dashed lines (---) represent control messages that are mandatory to
   the call scenario. These control messages can be SIP signaling.

</p>
<p>
   Double dashed lines (===) represent media paths between network
   elements.

</p>
<p>
   Messages with parenthesis around name represent optional control
   messages.

</p>
<p>
   Messages are identified in the Figures as F1, F2, etc.  This
   references the message details in the table that follows the Figure.

</p>
<p>
   Lines longer than 72 characters are handled using the &lt;allOneLine&gt; convention defined in Section 2.1 of <a class='info' href='#RFC4475'>RFC 4475<span> (</span><span class='info'>Sparks, R., Hawrylyshen, A., Johnston, A., Rosenberg, J., and H. Schulzrinne, &ldquo;Session Initiation Protocol (SIP) Torture Test Messages,&rdquo; May&nbsp;2006.</span><span>)</span></a> [RFC4475].

</p>
<p>
   Comments in the message details are shown in the following form:

</p>
<p>
   /* Comments. */

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Service Examples</h3>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Call Hold</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         Alice           Proxy            Bob
          |                |              |
          |    INVITE F1   |              |
          |---------------&gt;|              |
          |                |   INVITE F2  |
          |(100 Trying) F3 |-------------&gt;|
          |&lt;---------------|              |
          |                |180 Ringing F4|
          | 180 Ringing F5 |&lt;-------------|
          |&lt;---------------|              |
          |                |  200 OK F6   |
          |    200 OK F7   |&lt;-------------|
          |&lt;---------------|              |
          |     ACK F8     |              |
          |---------------&gt;|    ACK F9    |
          |                |-------------&gt;|
          |    Both way RTP Established   |
          |&lt;=============================&gt;|
          |                |INVITE(hold) F10
          |INVITE(hold) F11|&lt;-------------|
          |&lt;---------------|              |
          |    200 OK F12  |              |
          |---------------&gt;|   200 OK F13 |
          |                |-------------&gt;|
          |                |     ACK F14  |
          |     ACK F15    |&lt;-------------|
          |&lt;---------------|              |
          |           No RTP Sent!        |
          |                |  INVITE F16  |
          |   INVITE F17   |&lt;-------------|
          |&lt;---------------|              |
          |   200 OK F18   |              |
          |---------------&gt;|  200 OK F19  |
          |                |-------------&gt;|
          |                |    ACK F20   |
          |     ACK F21    |&lt;-------------|
          |&lt;---------------|              |
          |    Both way RTP Established   |
          |&lt;=============================&gt;|
          |     BYE F22    |              |
          |---------------&gt;|   BYE F23    |
          |                |-------------&gt;|
          |                |   200 OK F24 |
          |    200 OK F25  |&lt;-------------|
          |&lt;---------------|              |
          |                |              |
</pre></div>
<p>
   In this scenario, Alice calls Bob, then Bob places the call on hold. Bob then    
   takes the call off hold, then Alice hangs up the call.  Note that hold is unidirectional   
   in nature.
   However, a UA that places the other party on hold will generally also
   stop sending media, resulting in no media exchange between the UAs.  Older
   UAs may set the connection address to 0.0.0.0 when initiating hold.
   However, this behavior has been deprecated in favor of using the a=sendonly 
   SDP attribute. 

</p>
<p>
   Also note the use of the rendering feature tag defined in RFC 4235 <a class='info' href='#RFC4235'>[RFC4235]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and R. Mahy, &ldquo;An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP),&rdquo; November&nbsp;2005.</span><span>)</span></a> used in F10 and F11 to indicate in that Bob's UA is no longer rendering media to Bob, i.e. that Bob has placed the call on hold. 

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy 1

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 INVITE Proxy 1 -&gt; Bob

   INVITE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F3 (100 Trying) Proxy 1 -&gt; Alice

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F4 180 Ringing Bob -&gt; Proxy 1

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content Length:0


   F5 180 Ringing Proxy 1 -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content Length: 0


   F6 200 OK Bob -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F7 200 OK Proxy 1 -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F8 ACK Alice -&gt; Proxy 1

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf92
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F9 ACK Proxy 1 -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837492.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf92
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* Bob places Alice on hold.  Note that the version is
      incremented in the o= field of the SDP  */

   F10 INVITE Bob -&gt; Proxy 1

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F11 INVITE Proxy 1 -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0

   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   /* Alice replies to hold */

   F12 200 OK Alice -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F13 200 OK Proxy 1 -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F14 ACK Bob -&gt; Proxy 1

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds72
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F15 ACK Proxy 1 -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds72
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /*   Bob takes the call off hold */

   F16 INVITE Bob -&gt; Proxy 1

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds73
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844529 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F17 INVITE Proxy 1 -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837493.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds73
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844529 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F18 200 OK Alice -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837493.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds73
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844528 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F19 200 OK Proxy 1 -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds73
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844528 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F20 ACK Bob -&gt; Proxy 1

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds74
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F21 ACK Proxy 1 -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837494.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds74
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* RTP Media stream re-established.   Alice disconnects. */

   F22 BYE Alice -&gt; Proxy 1

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf97
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F23 BYE Proxy 1 -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837497.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf97
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F24 200 OK Bob -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837497.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf97
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F25 200 OK Proxy 1 -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf97
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0
</pre></div>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Consultation Hold</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        Alice            Proxy           Bob                Carol
          |                |              |                   |
          |    INVITE F1   |              |                   |
          |---------------&gt;|   INVITE F2  |                   |
          |                |-------------&gt;|                   |
          |(100 Trying) F3 |              |                   |
          |&lt;---------------|180 Ringing F4|                   |
          |                |&lt;-------------|                   |
          | 180 Ringing F5 |              |                   |
          |&lt;---------------|  200 OK F6   |                   |
          |                |&lt;-------------|                   |
          |    200 OK F7   |              |                   |
          |&lt;---------------|              |                   |
          |     ACK F8     |              |                   |
          |---------------&gt;|     ACK F9   |                   |
          |                |-------------&gt;|                   |
          |     Both way RTP Established  |                   |
          |&lt;=============================&gt;|                   |
          |                |INVITE(hold) F10                  |
          |INVITE(hold) F11|&lt;-------------|                   |
          |&lt;---------------|              |                   |
          |    200 OK F12  |              |                   |
          |---------------&gt;|   200 OK F13 |                   |
          |                |-------------&gt;|                   |
          |                |     ACK F14  |                   |
          |                |&lt;-------------|                   |
          |    ACK F15     |              |                   |
          |&lt;---------------|              |                   |
          |         No RTP Sent!          |                   |
          |                |   INVITE F16 |                   |
          |                |&lt;-------------|                   |
          |                |              |    INVITE F17     |
          |                |---------------------------------&gt;|
          |                |(100 Trying) F18                  |
          |                |-------------&gt;|                   |
          |                |              | 180 Ringing F19   |
          |                |&lt;---------------------------------|
          |                | 180 Ringing F20                  |
          |                |-------------&gt;|                   |
          |                |              |    200 OK F21     |
          |                |&lt;---------------------------------|
          |                |   200 OK F22 |                   |
          |                |-------------&gt;|                   |
          |                |    ACK F23   |                   |
          |                |&lt;-------------|                   |
          |                |              |      ACK F24      |
          |                |---------------------------------&gt;|
          |                |         Both way RTP Established |
          |                |              |&lt;=================&gt;|
          |                |   BYE F25    |                   |
          |                |&lt;-------------|                   |
          |                |              |       BYE F26     |
          |                |---------------------------------&gt;|
          |                |              |    200 OK F27     |
          |                |&lt;---------------------------------|
          |                |   200 OK F28 |                   |
          |                |-------------&gt;|                   |
          |                |   INVITE F29 |                   |
          |    INVITE F30  |&lt;-------------|                   |
          |&lt;---------------|              |                   |
          |    200 OK F31  |              |                   |
          |---------------&gt;|   200 OK F32 |                   |
          |                |-------------&gt;|                   |
          |                |     ACK F33  |                   |
          |                |&lt;-------------|                   |
          |    ACK F34     |              |                   |
          |&lt;---------------|              |                   |
          |     Both way RTP Established  |                   |
          |&lt;=============================&gt;|                   |
          |    BYE F35     |              |                   |
          |---------------&gt;|    BYE F36   |                   |
          |                |-------------&gt;|                   |
          |                |   200 OK F37 |                   |
          |                |&lt;-------------|                   |
          |  200 OK F38    |              |                   |
          |&lt;---------------|              |                   |
          |                |              |                   |
</pre></div>
<p>
   In this scenario, Alice calls Bob. Bob places call on hold.  Bob calls Carol.     
   Bob then disconnects with Carol, then takes the call with Alice off hold.  
   The call ends when Alice hangs up.

</p>
<p>
Also note the use of the rendering feature tag defined in RFC 4235 <a class='info' href='#RFC4235'>[RFC4235]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and R. Mahy, &ldquo;An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP),&rdquo; November&nbsp;2005.</span><span>)</span></a> used in F10 to indicate in that Bob's UA is no longer rendering media to Bob, i.e. that Bob has placed the call on hold. 

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy 1

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 INVITE Proxy 1 -&gt; Bob

   INVITE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F3(100 Trying) Proxy 1 -&gt; Alice

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F4 180 Ringing Bob -&gt; Proxy 1

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content Length:0


   F5 180 Ringing Proxy 1 -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content Length: 0


   F6 200 OK Bob -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F7 200 OK Proxy 1 -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F8 ACK Alice -&gt; Proxy 1

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf45
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F9 ACK Proxy 1 -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837494.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf45
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* Bob places  Alice on hold. */

   F10 INVITE Bob -&gt; Proxy 1

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F11 INVITE Proxy 1 -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837497.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F12 200 OK Alice -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837497.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F13 200 OK Proxy 1 -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F14 ACK Bob -&gt; Proxy 1

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdsg
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F15 ACK Proxy 1 -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK8374.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdsg
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F16 INVITE Bob -&gt; Proxy 1

   INVITE sips:carol@chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844834 2890844834 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 50170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F17 INVITE Proxy 1 -&gt; Carol

   INVITE sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749a.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844834 2890844834 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 50170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F18 (100 Trying) Proxy 1 -&gt; Bob

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F19 180 Ringing Carol -&gt; Proxy 1

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749a.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Content Length:0


   F20 180 Ringing Proxy 1 -&gt; Bob

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
    ;received=client.chicago.example.com
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Content Length: 0


   F21 200 OK Carol -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749a.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844922 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F22 200 OK Proxy 1 -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds22
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844922 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F23 ACK Bob -&gt; Proxy 1

   ACK sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds24
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F24 ACK Proxy 1 -&gt; Carol

   ACK sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749b.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds24
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F25 BYE Bob -&gt; Proxy 1

   BYE sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7j
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F26 BYE Proxy 1 -&gt; Carol

   BYE sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749k.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7j
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F27 200 OK Carol -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749k.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7j
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F28 200 OK Proxy 1 -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7j
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=456654
   Call-ID: 9876543210@biloxi.example.com
   CSeq: 2 BYE
   Content-Length: 0


   /* Bob takes the call off hold */

   F29 INVITE Bob -&gt; Proxy 1

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7b
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844529 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F30 INVITE Proxy 1 -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749q.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7b
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844529 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F31 200 OK Alice -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749q.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7b
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844528 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F32 200 OK Proxy 1 -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7b
    ;received=192.0.2.105
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844528 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000



   F33 ACK Bob -&gt; Proxy 1

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7d7
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F34 ACK Proxy 1 -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK8374.1
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7d7
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F35 BYE Alice -&gt; Proxy 1

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf10
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F36 BYE Proxy 1 -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK8379.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf10
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F37 200 OK Bob -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK8379.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf10
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F38 200 OK Proxy 1 -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf10
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0
</pre></div>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Music On Hold</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice             Bob       Music Server
          |                |              |
          |    INVITE F1   |              |
          |---------------&gt;|              |
          | 180 Ringing F2 |              |
          |&lt;---------------|              |
          |    200 OK F3   |              |
          |&lt;---------------|              |
          |     ACK F4     |              |
          |---------------&gt;|              |
          |       RTP      |              |
          |&lt;==============&gt;|              |
          |                |              |
          |   Bob places Alice on hold    |
          |                |              |
          | INVITE (hold) F5              |
          |&lt;---------------|              |
          |    200 OK F6   |              |
          |---------------&gt;|              |
          |     ACK F7     |              |
          |&lt;---------------|              |
          |    no RTP      |              |
          |                |              |
          |  Bob initiates music on hold  |
          |                |              |
          |                |   REFER Refer-To: A F8
          |                |-------------&gt;|
          |                |    202 F9    |
          |                |&lt;-------------|
          |                |   NOTIFY F10 |
          |                |&lt;-------------|
          |                |    200 F11   |
          |                |-------------&gt;|
          |  INVITE F12 Replaces: B       |
          |&lt;------------------------------|
          |          200 OK F13           |
          |------------------------------&gt;|
          |           ACK F14             |
          |&lt;------------------------------|
          |           RTP Music           |
          |&lt;==============================|
          |     BYE F15    |              |
          |---------------&gt;|  NOTIFY F17  |
          |  200 OK F16    |&lt;-------------|
          |&lt;---------------|  200 OK F18  |
          |                |-------------&gt;|
          |                |              |
          | The music on hold is complete |
          |                |              |
          |    Bob takes Alice off hold   |
          |                |              |
          |  INVITE Replaces: M F19       |
          |&lt;---------------|              |
          |    200 OK F20  |              |
          |---------------&gt;|              |
          |     ACK F21    |              |
          |&lt;---------------|              |
          |       RTP      |              |
          |&lt;==============&gt;|              |
          |            BYE F22            |
          |------------------------------&gt;|
          |          200 OK F23           |
          |&lt;------------------------------|

</pre></div>
<p>
   In this flow, Bob places Alice on hold with music. This is performed by Bob
   sending a REFER to a Music Server which sends an INVITE with Replaces to Alice.  The Music Server then
   sends RTP music to Alice.  Bob picks the call up from hold by sending an INVITE with Replaces to Alice.

</p>
<p>
Note the use of the rendering feature tag defined in RFC 4235 <a class='info' href='#RFC4235'>[RFC4235]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and R. Mahy, &ldquo;An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP),&rdquo; November&nbsp;2005.</span><span>)</span></a> used in F5 to indicate in that Bob's UA is no longer rendering media to Bob, i.e. that Bob has placed the call on hold.  Feature tags are also used in F12 with the automaton (defined in RFC 3840 <a class='info' href='#RFC3840'>[RFC3840]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;Indicating User Agent Capabilities in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>) and byeless feature tags (defined in RFC 4235 <a class='info' href='#RFC4235'>[RFC4235]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and R. Mahy, &ldquo;An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP),&rdquo; November&nbsp;2005.</span><span>)</span></a>)  to describe the capabilities of the Music Server.

</p>
<p>
Should Alice not wish to receive music on hold, her UA could refuse F12 and she will remain on hold with Bob, but in silence.

</p>
<p>
Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F3 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Alice -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfd
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* Bob places Alice on hold */

   F5 INVITE Bob -&gt; Alice

   INVITE sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK874bk
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 712 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F6 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK874bk
    ;received=192.0.2.105
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 712 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F7 ACK Bob -&gt; Alice

   ACK sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKq874b
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 712 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


/*   Bob REFERs Music Server to establish session with Alice
        which replaces the established session between
        Alice and Bob. */

   F8 REFER Bob -&gt; Music Server

   REFER sips:music@server.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds9
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   To: Music Server &lt;sips:music@server.example.com&gt;
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 1 REFER
 &lt;allOneLine&gt;
   Refer-To: &lt;sips:a8342043f@atlanta.example.com;gr?Replaces=
   12345600%40atlanta.example.com%3Bfrom-tag%3D23431
   %3Bto-tag%3D1234567&amp;Require=replaces&gt;
 &lt;/allOneLine&gt;
   Referred-By: &lt;sips:bob@biloxi.example.com&gt;
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F9 202 Accepted Music Server -&gt; Bob

   SIP/2.0 202 Accepted
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds9
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   To: Music Server &lt;sips:music@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   Contact: &lt;sips:music@server.example.com&gt;
   CSeq: 1 REFER
   Content-Length: 0


   F10 NOTIFY Music Server -&gt; Bob

   NOTIFY sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bT6
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   Max-Forwards: 70
   From: Music Server &lt;sips:music@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 1 NOTIFY
   Event: refer
   Subscription-State: active;expires=60
   Contact: &lt;sips:music@server.example.com&gt;
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 100 Trying


   F11 200 OK Bob -&gt; Music Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bT6
    ;received=192.0.2.103
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   From: Music Server &lt;sips:music@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 1 NOTIFY
   Content-Length: 0


   /* Music Server places call to Alice to replace session
      between Alice and Bob. */

   F12 INVITE Music Server -&gt; Alice

   INVITE sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74rf
   Max-Forwards: 70
   From: &lt;sips:music@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 INVITE
   Referred-By: &lt;sips:bob@biloxi.example.com&gt;
   Contact: &lt;sips:music@server.example.com&gt;;automaton
    ;+sip.byeless;+sip.rendering="no"
   Require: replaces
   Replaces: 12345600@atlanta.example.com
    ;from-tag=23431;to-tag=1234567
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=MusicServer 2890844576 2890844576 IN IP4 server.example.com
   s=
   c=IN IP4 server.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F13 200 OK Alice -&gt; Music Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74rf
    ;received=192.0.2.103
   From: &lt;sips:music@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F14 ACK Music Server -&gt; Alice

   ACK sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK7rfF
   Max-Forwards: 70
   From: &lt;sips:music@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F15 BYE Alice -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F16 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   /*   Music Server reports success back to Bob by returning
        a 200 OK response.  Bob obtains the dialog identifiers
        from the headers included in the response. */

   F17 NOTIFY Music Server -&gt; Bob

   NOTIFY sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bf9
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   Max-Forwards: 70
   From: Music Server &lt;sips:music@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 2 NOTIFY
   Event: refer
   Subscription-State: terminated;reason=noresource
   Contact: &lt;sips:music@server.example.com&gt;
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74rf
    ;received=192.0.2.103
   From: &lt;sips:music@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;


   F18 200 OK Bob -&gt; Music Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   From: Music Server &lt;sips:music@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 2 NOTIFY
   Content-Length: 0


   /*  Alice is now parked at the Music Server */

   /* Bob picks up the call by sending an INVITE to Alice who
      replaces the existing session with the Music Server.   */


   F19 INVITE Bob -&gt; Alice

   INVITE sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74bf9
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=4i323pr
   To: Alice &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Call-ID: uioewrjk2k2were
   CSeq: 42121 INVITE
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
   Replaces: a5-75-34-12-76@server.example.com
    ;to-tag=098594;from-tag=0111
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844631 2890844631 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3458 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendrecv


   F20 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=4i323pr
   To: Alice &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=6654323
   Call-ID: uioewrjk2k2were
   CSeq: 42121 INVITE
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844576 2890844576 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendrecv


   F21 200 ACK Bob -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKj974bf9
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=4i323pr
   To: Alice &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=6654323
   Call-ID: uioewrjk2k2were
   CSeq: 42121 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Length: 0


   F22 BYE Alice -&gt; Music Server

   BYE sips:music@server.example.com SIP/2.0
   Max-Forwards: 70
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74rf
   To: &lt;sips:music@server.example.com&gt;;tag=0111
   From: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 15 BYE
   Content-Length: 0


   F23 200 OK Music Server -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74rf
    ;received=192.0.2.103
   To: &lt;sips:music@server.example.com&gt;;tag=0111
   From: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 15 BYE
   Content-Length: 0


   /* Normal media session between Alice and Bob is resumed */

</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Transfer - Unattended</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       Alice                 Bob                 Carol
         |      INVITE F1     |                    |
         |&lt;-------------------|                    |
         |   180 Ringing F2   |                    |
         |-------------------&gt;|                    |
         |      200 OK F3     |                    |
         |-------------------&gt;|                    |
         |        ACK F4      |                    |
         |&lt;-------------------|                    |
         |        RTP         |                    |
         |&lt;==================&gt;|                    |
         |                    |                    |
         |  Alice performs unattended transfer     |
         |                    |                    |
         | REFER Refer-To:C F5|                    |
         |-------------------&gt;|                    |
         |  202 Accepted F6   |                    |
         |&lt;-------------------|                    |
         |      NOTIFY F7     |                    |
         |&lt;-------------------|                    |
         |      200 OK F8     |                    |
         |-------------------&gt;|                    |
         |       BYE F9       |                    |
         |-------------------&gt;|                    |
         |     200 OK F10     |                    |
         |&lt;-------------------|                    |
         |   No RTP Session   | INVITE Referred-By: A F11
         |                    |-------------------&gt;|
         |                    |   180 Ringing F12  |
         |                    |&lt;-------------------|
         |                    |     200 OK F13     |
         |                    |&lt;-------------------|
         |                    |       ACK F14      |
         |                    |-------------------&gt;|
         |                    |        RTP         |
         |                    |&lt;==================&gt;|
         |      NOTIFY F15    |                    |
         |&lt;-------------------|                    |
         |      200 OK F16    |                    |
         |-------------------&gt;|                    |
         |                    |                    |
</pre></div>
<p>

   In this scenario, Bob calls Alice.   Alice then transfers Bob to Carol, then 
   Alice disconnects with Bob.  Bob establishes the session to Carol then
   reports the success  back to Alice in the NOTIFY in F15.  If the transfer
   fails, Bob can send a new INVITE back to Alice to re-establish the
   session.

</p>
<p>
   Despite the BYE sent by Alice in F9, the dialog between Alice and Bob still
   exists until the subscription created by the REFER has terminated (either due
   to a NOTIFY containing a Subscription-State: terminated;reason=noresource
   header field, as in F15, or a 481 response to a NOTIFY).  

</p>
<p>
   For more about call transfer see the <a class='info' href='#I-D.ietf-sipping-cc-transfer'>transfer<span> (</span><span class='info'>Sparks, R. and A. Johnston, &ldquo;Session Initiation Protocol Call Control - Transfer,&rdquo; March&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sipping&#8209;cc&#8209;transfer] document.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Bob -&gt; Alice

   INVITE sips:alice@atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Alice -&gt; Bob

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Length: 0


   F3 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Bob -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds2
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* Session is established between Alice and Bob. */

   /* Alice performs unattended transfer of Bob to Carol */

   F5 REFER Alice -&gt; Bob

   REFER sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds8
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 101 REFER
   Refer-To: &lt;sips:carol@chicago.example.com&gt;
   Referred-By: &lt;alice@atlanta.example.com&gt;
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Length: 0


   F6 202 Accepted Bob -&gt; Alice

   SIP/2.0 202 Accepted
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds8
    ;received=192.0.2.105
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   CSeq: 101 REFER
   Content-Length: 0


   F7 NOTIFY Bob -&gt; Alice

   NOTIFY sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds32
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 NOTIFY
   Event: refer
   Subscription-State: active;expires=60
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 100 Trying


   F8 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds32
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 NOTIFY
   Content-Length: 0


   /* Alice now disconnects with Bob. */

   F9 BYE Alice -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds43
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 102 BYE
   Content-Length: 0


   F10 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds43
    ;received=192.0.2.105
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 102 BYE
   Content-Length: 0


   /* Bob attempts the transfer to Carol */

   F11 INVITE Bob -&gt; Carol

   INVITE sips:carol@chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds1
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Referred-By: &lt;alice@atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844539 2890844539 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3458 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F12 180 Ringing Carol -&gt; Bob

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds1
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Content-Length: 0


   F13 200 OK Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds1
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890944542 2890844542 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F14 ACK Bob -&gt; Carol

   ACK sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds9
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* Bob and Carol now have established a session.  Bob reports
      success to Alice which Alice probably ignores. */

   F15 NOTIFY Bob -&gt; Alice

   NOTIFY sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds67
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 3 NOTIFY
   Event: refer
   Subscription-State: terminated;reason=noresource
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds1
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...


   F16 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds6
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345601@atlanta.example.com
   CSeq: 3 NOTIFY
   Content-Length: 0
</pre></div>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Transfer - Attended</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice             Bob          Carol
          |                |              |
          |    INVITE F1   |              |
          |---------------&gt;|              |
          | 180 Ringing F2 |              |
          |&lt;---------------|              |
          |    200 OK F3   |              |
          |&lt;---------------|              |
          |     ACK F4     |              |
          |---------------&gt;|              |
          |       RTP      |              |
          |&lt;==============&gt;|              |
          |INVITE (hold) F5|              |
          |&lt;---------------|              |
          |    200 OK F6   |              |
          |---------------&gt;|              |
          |     ACK F7     |              |
          |&lt;---------------|              |
          |     No RTP     |              |
          |                |  INVITE F8   |
          |                |-------------&gt;|
          |                | 180 Ringing F9
          |                |&lt;-------------|
          |                |  200 OK F10  |
          |                |&lt;-------------|
          |                |    ACK F11   |
          |                |-------------&gt;|
          |                |     RTP      |
          |                |&lt;============&gt;|
          |                |INVITE (hold) F12
          |                |-------------&gt;|
          |                | 200 OK F13   |
          |                |&lt;-------------|
          |                |    ACK F14   |
          |                |-------------&gt;|
          |                |     No RTP   |
          | REFER Refer-To: C F15         |
          |&lt;---------------|              |
          |202 Accepted F16|              |
          |---------------&gt;|              |
          |   NOTIFY F17   |              |
          |---------------&gt;|              |
          |   200 OK F18   |              |
          |&lt;---------------|              |
          |     INVITE Replaces: B F19    |
          |------------------------------&gt;|
          |            200 OK F20         |
          |&lt;------------------------------|
          |             ACK F21           |
          |------------------------------&gt;|
          |               RTP             |
          |&lt;=============================&gt;|
          |                |    BYE F22   |
          |                |&lt;-------------|
          |                |  200 OK F23  |
          |                |-------------&gt;|
          |   NOTIFY F24   |              |
          |---------------&gt;|              |
          |   200 OK F25   |              |
          |&lt;---------------|              |
          |    BYE F26     |              |
          |&lt;---------------|              |
          |   200 OK F27   |              |
          |---------------&gt;|              |

</pre></div>
<p>
   In this scenario, Alice calls Bob.  Bob puts Alice on hold then calls Carol     
to announce transfer, then places Carol on hold.  Bob  transfers  Alice to Carol
   which replaces the session between Bob and Carol.  Carol then
   disconnects session with Bob. Alice reports success of transfer to
   Bob, who then disconnects with Alice.  In this example, the <a class='info' href='#RFC3891'>Replaces
   header field<span> (</span><span class='info'>Mahy, R., Biggs, B., and R. Dean, &ldquo;The Session Initiation Protocol (SIP) &quot;Replaces&quot; Header,&rdquo; September&nbsp;2004.</span><span>)</span></a> [RFC3891] is inserted into the Refer-To URI by Bob.  Note that the

   Refer-To URI is the Contact URI returned by Carol in the 200 OK
   response F10.  This ensures that only the correct instance of Carol
   is reached.  The presence of the gr URI parameter in the Contact URI in message F10 indicates that the Contact URI is a <a class='info' href='#I-D.ietf-sip-gruu'>GRUU<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;gruu] and will be globally routable outside of the dialog.  Without knowing the Contact URI is a gruu, Bob must be prepared, if the triggered INVITE had failed, to retry the REFER with a Refer-To URI of the URI used to reach Carol
   but with a Require: replaces header escaped in the Refer-To header
   field, as discussed in the <a class='info' href='#I-D.ietf-sipping-cc-transfer'>transfer<span> (</span><span class='info'>Sparks, R. and A. Johnston, &ldquo;Session Initiation Protocol Call Control - Transfer,&rdquo; March&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sipping&#8209;cc&#8209;transfer] document.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F3 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Alice -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* Alice and Bob have established a session.
       Bob puts Alice on Hold */

   F5 INVITE Bob -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Content-Type: application/sdp
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F6 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F7 ACK Bob -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds3
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 ACK
   Content-Length: 0


   /* Bob calls Carol  */

   F8 INVITE Bob -&gt; Carol

   INVITE sips:carol@chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 28908445834 2890844834 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3458 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F9 180 Ringing Carol -&gt; Bob

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 INVITE
   Contact: &lt;sips:39itp34klkd@chicago.example.com&gt;
   Content-Length: 0


   F10 200 OK Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 INVITE
   Contact: &lt;sips:39itp34klkd@chicago.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844922 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F11 ACK Bob -&gt; Carol

   ACK sips:39itp34klkd@chicago.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashd5
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 ACK
   Content-Length: 0


   /* Bob puts Carol on hold */

   F12 INVITE Bob -&gt; Carol

   INVITE sips:39itp34klkd@chicago.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds0
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 43 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 289084834 2890844835 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3458 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=sendonly


   F13 200 OK Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds0
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 43 INVITE
   Contact: &lt;sips:39itp34klkd@chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844923 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F14 ACK Bob -&gt; Carol

   ACK sips:39itp34klkd@chicago.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash334
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 43 ACK
   Content-Length: 0


   /* Bob  Transfers  Alice to Carol.  */

   F15 REFER Bob -&gt; Alice

   REFER sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds2g
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1025 REFER
 &lt;allOneLine&gt;
   Refer-To: &lt;sips:39itp34klkd@chicago.example.com?Replaces=
   sdjfdjfskdf%40biloxi.example.com%3Bto-tag%3D5f35a3
   %3Bfrom-tag%3D8675309&amp;Require=replaces&gt;
 &lt;/allOneLine&gt;
   Referred-By: &lt;sips:bob@biloxi.example.com&gt;
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F16 202 Accepted Alice -&gt; Bob

   SIP/2.0 202 Accepted
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds2g
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   CSeq: 1025 REFER
   Content-Length: 0


   F17 NOTIFY Alice -&gt; Bob

   NOTIFY sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfK
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 NOTIFY
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Event: refer
   Subscription-State: active;expires=60
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 100 Trying


   F18 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfK
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 NOTIFY
   Content-Length: 0


   /*  Alice establishes session with Carol which replaces the
       session between Bob and Carol */

   F19 INVITE Alice -&gt; Carol

   INVITE sips:39itp34klkd@chicago.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKadfe4ko
   To: Carol &lt;sips:39itp34klkd@chicago.example.com&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=3461
   Call-ID: 9435674543@atlanta.example.com
   CSeq: 1 INVITE
   Require: replaces
   Referred-By: &lt;sips:bob@biloxi.example.com&gt;
   Replaces: sdjfdjfskdf@biloxi.example.com
    ;to-tag=5f35a3;from-tag=8675309
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844989 2890844989 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 3458 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F20 200 OK Carol -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKadfe4ko
    ;received=192.0.2.103
   To: Carol &lt;sips:39itp34klkd@chicago.example.com&gt;;tag=ff3a
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=3461
   Call-ID: 9435674543@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:39itp34klkd@chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844221 2890844221 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 49172 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F21 ACK Alice -&gt; Carol

   ACK sips:39itp34klkd@chicago.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKadfe4kU3
   To: Carol &lt;sips:39itp34klkd@chicago.example.com&gt;;tag=ff3a
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=3461
   Call-ID: 9435674543@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   /* Carol then disconnects from Bob */

   F22 BYE Carol -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfE
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 1 BYE
   Content-Length: 0


   F23 200 OK Bob -&gt; Carol

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfE
    ;received=192.0.2.123
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 1 BYE
   Content-Length: 0


   /*  Alice tells Bob that the call has been
       successfully transferred */

   F24 NOTIFY Alice -&gt; Bob

   NOTIFY sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf2N
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 3 NOTIFY
   Event: refer
   Subscription-State: terminated;reason=noresource
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKadfe4ko
    ;received=192.0.2.103
   To: Carol &lt;sips:39itp34klkd@chicago.example.com&gt;;tag=ff3a
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=3461
   Call-ID: 9435674543@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:39itp34klkd@chicago.example.com&gt;


   F25 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 3 NOTIFY
   Content-Length: 0


   /* Bob disconnects with  Alice */

   F26 BYE Bob -&gt; Alice

   BYE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7P
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1026 BYE
   Content-Length: 0


   F27 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7P
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1026 BYE
   Content-Length: 0
</pre></div>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.6"></a><h3>2.6.&nbsp;
Transfer - Instant Messaging</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         Alice          Bob                Carol
          |              |                   |
          |   INVITE F1  |                   |
          |-------------&gt;|                   |
          | 180 Ringing F2                   |
          |&lt;-------------|                   |
          |  200 OK F3   |                   |
          |&lt;-------------|                   |
          |    ACK F4    |                   |
          |-------------&gt;|                   |
          |  Both way RTP Established        |
          |&lt;============&gt;|                   |
          |              |     MESSAGE F5    |
          |              |------------------&gt;|
          |              |     200 OK F6     |
          |              |&lt;------------------|
          |              |                   |
          |       INVITE Replaces:A-B F7     |
          |&lt;---------------------------------|
          |            200 OK F8             |
          |---------------------------------&gt;|
          |               ACK F9             |
          |&lt;---------------------------------|
          |   Both way RTP Established       |
          |&lt;================================&gt;|
          |    BYE F10   |                   |
          |-------------&gt;|                   |
          |  200 OK F11  |                   |
          |&lt;-------------|                   |
          |                                  |
</pre></div>
<p>
   In this scenario, Alice and Bob establish a session between them.  Bob wants
   Carol to take the call so sends an Instant Message (IM) to Carol containing 
   Alice's URI and an embedded Replaces header field.  If Carol clicks on the

   URI, Carol's SIP UA sends an INVITE to Alice which replaces the session with
   Bob.

</p>
<p>
   This scenario shows the use of the SIP <a class='info' href='#RFC3428'>MESSAGE<span> (</span><span class='info'>Campbell, B., Rosenberg, J., Schulzrinne, H., Huitema, C., and D. Gurle, &ldquo;Session Initiation Protocol (SIP) Extension for Instant Messaging,&rdquo; December&nbsp;2002.</span><span>)</span></a> [RFC3428]
   method to pass the URI.  
   However, another IM protocol or other method could have been used to pass
   the URI from Bob to Carol.

</p>
<p>
   Message Details

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F3 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   CSeq: 1 INVITE
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Alice -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74r
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   CSeq: 1 ACK
   Content-Length: 0


   /* Bob IMs Carol  */

   F5 MESSAGE Bob -&gt; Carol

   MESSAGE sips:carol@chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 MESSAGE
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE
   Supported: replaces
   Content-Type: text/html
   Content-Length: ...

   &lt;HTML&gt;Do you want to take this call from
 &lt;allOneLine&gt;
   &lt;A HREF="sips:a8342043f@atlanta.example.com;gr?Replaces=
   12345600@atlanta.example.com%3Bto-tag%3D3145678
   %3Bfrom-tag%3D1234567&amp;Require=replaces"&gt;
   Alice&lt;/A&gt;?
 &lt;/allOneLine&gt;
    &lt;/HTML&gt;


   F6 200 OK Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5f35a3
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 MESSAGE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE
   Supported: replaces
   Content-Length: 0


/* Carol takes the call from Bob */

   F7 INVITE  Carol -&gt; Alice

   INVITE sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK74HH
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675310
   To: Alice &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Call-ID: 563456212@b2.chicago.example.com
   CSeq: 1 INVITE
   Require: replaces
   Replaces: 12345600@atlanta.example.com
    ;to-tag=3145678;from-tag=1234567
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY, MESSAGE
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890843122 2890843122 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 5342 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   /* Alice matches the dialog information in the
      Replaces header and accepts the INVITE */

   F8 200 OK Alice -&gt; Carol

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK74HH
    ;received=192.0.2.114
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675310
   To: Alice &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=131256
   Call-ID: 563456212@b2.chicago.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 289084543 289084543 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49172 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F9 ACK  Carol -&gt; Alice

   ACK sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS b2.biloxi.example.com:5061
    ;branch=z9hG4bK7435
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675310
   To: Alice &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=131256
   Call-ID: 563456212@b2.chicago.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* RTP streams are established between Alice and Carol.
      Alice Hangs Up with Bob due to the Replaces header field. */

   F10 BYE Alice -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F11 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq:  2 BYE
   Content-Length: 0


</pre></div>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7"></a><h3>2.7.&nbsp;
Call Forwarding Unconditional</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         Alice           Proxy          Gateway
          |                |              |
          |    INVITE F1   |              |
          |---------------&gt;|              |
          |(100 Trying) F2 |              |
          |&lt;---------------|              |
          | (181 Call Is Being Forwarded) F3
          |&lt;---------------|   INVITE F4  |
          |                |-------------&gt;|
          |                |180 Ringing F5|
          | 180 Ringing F6 |&lt;-------------|
          |&lt;---------------|  200 OK F7   |
          |    200 OK F8   |&lt;-------------|
          |&lt;---------------|              |
          |     ACK F9     |              |
          |---------------&gt;|    ACK F10   |
          |                |-------------&gt;|
          |    Both way RTP Established   |
          |&lt;=============================&gt;|
          |     BYE F11    |              |
          |---------------&gt;|   BYE F12    |
          |                |-------------&gt;|
          |                |   200 OK F13 |
          |    200 OK F14  |&lt;-------------|
          |&lt;---------------|              |
          |                |              |
</pre></div>
<p>
   Bob wants all calls forwarded to the PSTN (which is just another URI
   to the proxy server).   Alice calls Bob.  The
   proxy server rewrites the Request URI, and forwards the INVITE to a
   Gateway.  Details of messaging behind the Gateway are not shown.

</p>
<p>
   Note that the 181 Call is Being Forwarded response does not have a To tag   
   added as the proxy does not wish to establish an early dialog with Alice.  Strictly speaking, the proxy is behaving as a User Agent in this case as a proxy can not generate non-100 provisional responses.

</p>
<p>
   Note also that forwarding could be accomplished using a redirect (302 Moved Temporarily response).

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 (100 Trying) Proxy -&gt; Alice

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F3 (181 Call is Being Forwarded) Proxy -&gt; Alice

   SIP/2.0 181 Call is Being Forwarded
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=9214d
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   /* Proxy forwards call by rewriting Request-URI */

   F4 INVITE Proxy -&gt; Gateway

   INVITE sips:+19727293660@gw1.example.com;user=phone SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F5 180 Ringing Gateway -&gt; Proxy

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:+19727293660@gw1.example.com;user=phone&gt;
   Content Length:0


   F6 180 Ringing Proxy -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:+19727293660@gw1.example.com;user=phone&gt;
   Content Length: 0


   F7 200 OK Gateway -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:+19727293660@gw1.example.com;user=phone&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=GATEWAY1 2890844527 2890844527 IN IP4 gatewayone.example.com
   s=
   c=IN IP4 gatewayone.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F8 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:+19727293660@gw1.example.com;user=phone&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=GATEWAY1 2890844527 2890844527 IN IP4 gatewayone.example.com
   s=
   c=IN IP4 gatewayone.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F9 ACK Alice -&gt; Proxy

   ACK sips:+19727293660@gw1.example.com;user=phone SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf31
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F10 ACK Proxy -&gt; Gateway

   ACK sips:+19727293660@gw1.example.com;user=phone SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749ws.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf31
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F11 BYE Alice -&gt; Proxy

   BYE sips:+19727293660@gw1.example.com;user=phone SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfJe
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F12 BYE Proxy -&gt; Gateway

   BYE sips:+19727293660@gw1.example.com;user=phone SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749G1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfJe
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F13 200 OK Gateway -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749G1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfJe
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F14 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfJe
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345600@atlanta.example.com
   CSeq:  2 BYE
   Content-Length: 0
</pre></div>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.8"></a><h3>2.8.&nbsp;
Call Forwarding - Busy</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice            Proxy          User B1             User B2
          |                |              |                   |
          |    INVITE F1   |              |                   |
          |---------------&gt;|   INVITE F2  |                   |
          |                |-------------&gt;|                   |
          |(100 Trying) F3 |              |                   |
          |&lt;---------------|  486 Busy F4 |                   |
          |                |&lt;-------------|                   |
          |                |     ACK F5   |                   |
          |                |-------------&gt;|                   |
          |(181 Call is Being Forwarded) F6                   |
          |&lt;---------------|              |    INVITE F7      |
          |                |---------------------------------&gt;|
          |                |              | 180 Ringing F8    |
          |                |&lt;---------------------------------|
          | 180 Ringing F9 |              |                   |
          |&lt;---------------|              |      200 OK F10   |
          |                |&lt;---------------------------------|
          |    200 OK F11  |              |                   |
          |&lt;---------------|              |                   |
          |     ACK F12    |              |                   |
          |---------------&gt;|              |     ACK F13       |
          |                |---------------------------------&gt;|
          |               Both way RTP Established            |
          |&lt;=================================================&gt;|
          |    BYE F14     |              |                   |
          |---------------&gt;|              |      BYE F15      |
          |                |---------------------------------&gt;|
          |                |              |    200 OK F16     |
          |  200 OK F17    |&lt;---------------------------------|
          |&lt;---------------|              |                   |
          |                |              |                   |
</pre></div>
<p>

   Bob wants calls to B1 forwarded to B2 if B1 is busy (this information
   is known to the proxy).   Alice calls B1, B1 is busy, the proxy
   server places call to B2.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 INVITE Proxy -&gt; B1

   INVITE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F3 (100 Trying) Proxy -&gt; Alice

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F4 486 Busy Here B1 -&gt; Proxy

   SIP/2.0 486 Busy Here
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F5 ACK Proxy -&gt; B1

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F6 (181 Call is Being Forwarded) Proxy -&gt; Alice

   SIP/2.0 181 Call is Being Forwarded
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=9214d
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   /* The proxy now forwards the call to B2 */

   F7 INVITE Proxy -&gt; B2

   INVITE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F8 180 Ringing B2 -&gt; Proxy

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Content-Length: 0


   F9 180 Ringing Proxy -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Content-Length: 0


   F10 200 OK B2 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client2.biloxi.example.com
   s=
   c=IN IP4 client2.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F11 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client2.biloxi.example.com
   s=
   c=IN IP4 client2.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F12 ACK Alice -&gt; Proxy

   ACK sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfX
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F13 ACK Proxy -&gt; B2

   ACK sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83731
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfX
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* RTP streams are established between A and B2 */

   /*  Alice eventually hangs up with User B2. */

   F14 BYE Alice -&gt; Proxy

   BYE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bW4
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F15 BYE Proxy -&gt; B2

   BYE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837493
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bW4
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0



   F16 200 OK B2 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837493
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bW4
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F17 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bW4
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq:  2 BYE
   Content-Length: 0

</pre></div>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.9"></a><h3>2.9.&nbsp;
Call Forwarding - No Answer</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice            Proxy         User B1             User B2
          |                |              |                   |
          |    INVITE F1   |              |                   |
          |---------------&gt;|   INVITE F2  |                   |
          |(100 Trying) F3 |-------------&gt;|                   |
          |&lt;---------------|180 Ringing F4|                   |
          | 180 Ringing F5 |&lt;-------------|                   |
          |&lt;---------------|              |                   |
          |                 Request Timeout                   |
          |                |              |                   |
          |                |   CANCEL F6  |                   |
          |                |-------------&gt;|                   |
          |                |   200 OK F7  |                   |
          |                |&lt;-------------|                   |
          |                |     487 F8   |                   |
          |                |&lt;-------------|                   |
          |                |     ACK F9   |                   |
          |                |-------------&gt;|                   |
          |(181 Call is Being Forwarded) F10                  |
          |&lt;---------------|              |    INVITE F11     |
          |                |---------------------------------&gt;|
          |                |              | 180 Ringing F12   |
          | 180 Ringing F13|&lt;---------------------------------|
          |&lt;---------------|              |      200 OK F14   |
          |                |&lt;---------------------------------|
          |   200 OK F15   |              |                   |
          |&lt;---------------|              |                   |
          |     ACK F16    |              |                   |
          |---------------&gt;|              |     ACK F17       |
          |                |---------------------------------&gt;|
          |               Both way RTP Established            |
          |&lt;=================================================&gt;|
          |    BYE F18     |              |                   |
          |---------------&gt;|              |      BYE F19      |
          |                |---------------------------------&gt;|
          |                |              |    200 OK F20     |
          |  200 OK F21    |&lt;---------------------------------|
          |&lt;---------------|              |                   |
          |                |              |                   |
</pre></div>
<p>

   Bob  wants calls to B1 forwarded to B2 if B1 is not answered
   (information is known to the proxy server).   Alice calls B1 and no
   one answers.  The proxy server then places the call to B2.

</p>
<p>


   Message Details

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 INVITE Proxy -&gt; B1

   INVITE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F3 (100 Trying) Proxy -&gt; Alice

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F4 180 Ringing B1 -&gt; Proxy

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F5 180 Ringing Proxy -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   /* B1 rings until a configurable timer expires in the Proxy. The
      Proxy sends Cancel and proceeds down the list of routes. */

   F6 CANCEL Proxy -&gt; B1

   CANCEL sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 CANCEL
   Content-Length: 0


   F7 200 OK B1 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=329d823
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 CANCEL
   Content-Length: 0


   F8 487 Request Terminated B1 -&gt; Proxy

   SIP/2.0 487 Request Terminated
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F9 ACK Proxy -&gt; B1

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F10 (181 Call is Being Forwarded) Proxy -&gt; Alice

   SIP/2.0 181 Call is Being Forwarded
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=9214d
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F11 INVITE Proxy -&gt; B2

   INVITE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F12 180 Ringing B2 -&gt; Proxy

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Content-Length: 0


   F13 180 Proxy -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Content-Length: 0


   F14 200 OK B2 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client2.biloxi.example.com
   s=
   c=IN IP4 client2.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F15 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client2.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client2.biloxi.example.com
   s=
   c=IN IP4 client2.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F16 ACK Alice -&gt; Proxy

   ACK sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf3
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F17 ACK Proxy -&gt; B2

   ACK sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK8374.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf3
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* RTP streams are established between A and B2.
      Alice Hangs Up with User B2. */

   F18 BYE Alice -&gt; Proxy

   BYE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b3f
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F19 BYE Proxy -&gt; B2

   BYE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b3f
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F20 200 OK B2 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK837.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b3f
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F21 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b3f
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq:  2 BYE
   Content-Length: 0
</pre></div>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.10"></a><h3>2.10.&nbsp;
3-way Conference - Third Party is Added</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         Alice           Bob            Carol
          |    INVITE F1   |              |
          |---------------&gt;|              |
          | 180 Ringing F2 |              |
          |&lt;---------------|              |
          |    200 OK F3   |              |
          |&lt;---------------|              |
          |     ACK F4     |              |
          |---------------&gt;|              |
          |       RTP      |              |
          |&lt;==============&gt;|              |
          |   INVITE F5    |              |
          |&lt;---------------|              |
          |    200 OK F6   |              |
          |---------------&gt;|              |
          |     ACK F7     |              |
          |&lt;---------------|  INVITE F8   |
          |                |-------------&gt;|
          |                |    180 F9    |
          |                |&lt;-------------|
          |                |  200 OK F10  |
          |                |&lt;-------------|
          |                |  ACK F11     |
          |                |-------------&gt;|
          |                |       RTP    |
          |                |&lt;============&gt;|
</pre></div>
<p>


   In this scenario, Alice and Bob are in a 2-party call (session) when
   Bob wishes to add Carol into the conversation.  Bob is capable of
   media mixing in a 3-party call.  Bob first sends a re-INVITE to Alice
   changing Contact URIs to one that indicates Bob's mixer and acts like a focus.  
   As a result, Bob includes the 
   <a class='info' href='#RFC3840'>"isfocus" feature tag<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;Indicating User Agent Capabilities in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3840] as
   described in <a class='info' href='#RFC4579'>[RFC4579]<span> (</span><span class='info'>Johnston, A. and O. Levin, &ldquo;Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents,&rdquo; August&nbsp;2006.</span><span>)</span></a>.  Bob then
   INVITEs Carol using the same Contact URI.  Note that Bob could wait to re-INVITE Alice until after Carol has answered.  Bob could also put Alice on hold before calling Carol

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:b54gh42f5@biloxi.example.com&gt;
   Content-Length: 0


   F3 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK

   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:b54gh42f5@biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Alice -&gt; Bob

   ACK sips:b54gh42f5@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfL
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* Alice and Bob have established a session.
       Bob re-INVITEs changing Contact URIs */

   F5 INVITE Bob -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 INVITE
   Contact: &lt;sips:bob-Mixer@client.biloxi.example.com&gt;;isfocus
   Content-Type: application/sdp
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 49172 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F6 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK

   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F7 ACK Bob -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash3G
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 ACK
   Content-Length: 0


   /* Bob calls Carol  */

   F8 INVITE Bob -&gt; Carol

   INVITE sips:carol@chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashJfd
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 INVITE
   Contact: &lt;sips:bob-Mixer@client.biloxi.example.com&gt;;isfocus
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 28908445834 2890844834 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 48174 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F9 180 Ringing Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashJfd
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=341313
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F10 200 OK Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashJfd
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=341313
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844922 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F11 ACK Bob -&gt; Carol

   ACK sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash431
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=341313
   Call-ID: sdjfdjfskdf@biloxi.example.com
   CSeq: 42 ACK
   Content-Length: 0


   /* User B's mixer know mixes media from both A and C
      to create the 3-way conference.  */
</pre></div>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.11"></a><h3>2.11.&nbsp;
3-way Conference - Third Party Joins</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         Alice           Bob            Carol
          |    INVITE F1   |              |
          |---------------&gt;|              |
          | 180 Ringing F2 |              |
          |&lt;---------------|              |
          |    200 OK F3   |              |
          |&lt;---------------|              |
          |     ACK F4     |              |
          |---------------&gt;|              |
          |       RTP      |              |
          |&lt;==============&gt;|  INVITE Join:A-B F5
          |                |&lt;-------------|
          |                |    180 F6    |
          |                |-------------&gt;|
          |   INVITE F7    |              |
          |&lt;---------------|              |
          |    200 OK F8   |              |
          |---------------&gt;|              |
          |     ACK F9     |              |
          |&lt;---------------|              |
          |                |  200 OK F10  |
          |                |-------------&gt;|
          |                |  ACK F11     |
          |                |&lt;-------------|
          |                |       RTP    |
          |                |&lt;============&gt;|

</pre></div>
<p>

   In this scenario, Alice and Bob are in a 2 party call and Carol
   wishes to join resulting in a three party call.  Carol could have
   learned Bob's dialog identifier using some non-SIP means, or possibly
   from a NOTIFY with the dialog package sent by Bob.  Carol sends an
   INVITE to Bob containing a Join header identifying the dialog between
   Alice and Bob.  Bob re-INVITEs Alice to switch to focus mode and includes   
   the <a class='info' href='#RFC3840'>"isfocus" feature tag<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;Indicating User Agent Capabilities in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3840]   
   as described in <a class='info' href='#RFC4579'>[RFC4579]<span> (</span><span class='info'>Johnston, A. and O. Levin, &ldquo;Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents,&rdquo; August&nbsp;2006.</span><span>)</span></a>. Bob  then
   accepts the INVITE from Carol, resulting in the 3-way call.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:b54gh42f5@biloxi.example.com&gt;
   Content-Length: 0


   F3 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:b54gh42f5@biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, join, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Alice -&gt; Bob

   ACK sips:b54gh42f5@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf6
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /*  Alice and Bob have established a session.
       Carol requests to join the session */

   F5 INVITE Carol -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675309
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 452k499sk@chicago.example.com
   CSeq: 99 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, join
   Join: 12345600@atlanta.example.com;from-tag=1234567;to-tag=23431
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844922 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F6 180 Ringing Bob -&gt; Carol

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=120.
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675309
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=0982
   Call-ID: 452k499sk@chicago.example.com
   CSeq: 99 INVITE
   Contact: &lt;sips:bob-Mixer@client.biloxi.example.com&gt;;isfocus
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Length: 0


   F7 INVITE Bob -&gt; Alice

   INVITE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdyKL
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 INVITE
   Contact: &lt;sips:bob-Mixer@client.biloxi.example.com&gt;;isfocus
   Content-Type: application/sdp
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, join, gruu
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844528 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 49172 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F8 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdyKL
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F9 ACK Bob -&gt; Alice

   ACK sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnash3g
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1024 ACK
   Content-Length: 0


   F10 200 OK Bob -&gt; Carol

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=120.
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675309
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=0982
   Call-ID: 452k499sk@chicago.example.com
   CSeq: 99 INVITE
   Contact: &lt;sips:bob-Mixer@client.biloxi.example.com&gt;;isfocus
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, join, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 28908445834 2890844834 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 48174 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F11 ACK OK Carol -&gt; Bob

   ACK sips:bob-Mixer@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS chicago.example.com:5061
    ;branch=z9hG4bKnash4Gf
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=8675309
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=0982
   Call-ID: 452k499sk@chicago.example.com
   CSeq: 99 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, join
   Content-Length:0


</pre></div>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.12"></a><h3>2.12.&nbsp;
Find-Me</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          Alice           Proxy           User   User   User   User
                                           B1     B2     B3     B4
          |                |              |      |      |      |
          |    INVITE F1   |              |      |      |      |
          |---------------&gt;|   INVITE F2  |      |      |      |
          |                |-------------&gt;|      |      |      |
          |(100 Trying) F3 |              |      |      |      |
          |&lt;---------------|180 Ringing F4|      |      |      |
          |                |&lt;-------------|      |      |      |
          | 180 Ringing F5 |              |      |      |      |
          |&lt;---------------|              |      |      |      |
          |                |    Timeout   |      |      |      |
          |                |              |      |      |      |
          |                |   CANCEL F6  |      |      |      |
          |                |-------------&gt;|      |      |      |
          |                |   200 OK F7  |      |      |      |
          |                |&lt;-------------|      |      |      |
          |                |     487 F8   |      |      |      |
          |                |&lt;-------------|      |      |      |
          |                |     ACK F9   |      |      |      |
          |                |-------------&gt;|      |      |      |
          |                |     INVITE F10      |      |      |
          |                |--------------------&gt;|      |      |
          |                |480 Not Logged In F11|      |      |
          |                |&lt;--------------------|      |      |
          |                |              ACK F12|      |      |
          |                |--------------------&gt;|      |      |
          |                |          INVITE F13        |      |
          |                |---------------------------&gt;|      |
          |                |      486 Busy Here F14     |      |
          |                |&lt;---------------------------|      |
          |                |            ACK F15         |      |
          |                |---------------------------&gt;|      |
          |                |              INVITE F16           |
          |                |----------------------------------&gt;|
          |                |            180 Ringing F17        |
          |     180 F18    |&lt;----------------------------------|
          |&lt;---------------|               200 OK F19          |
          |   200 OK F20   |&lt;----------------------------------|
          |&lt;---------------|                                   |
          |     ACK F21    |                                   |
          |---------------&gt;|                 ACK F22           |
          |                |----------------------------------&gt;|
          |               Both way RTP Established             |
          |&lt;==================================================&gt;|
          |                |                  BYE F23          |
          |     BYE F24    |&lt;----------------------------------|
          |&lt;---------------|                                   |
          |    200 OK F25  |                                   |
          |---------------&gt;|                 200 OK F26        |
          |                |----------------------------------&gt;|
          |                |                                   |
</pre></div>
<p>

   Alice's call to Bob will result in an attempt to locate that user by
   calling locations from a list of contacts.  The location to answer
   the call becomes the active set, no other sets may join the call.

</p>
<p>
   While this flow shows a sequential search, the search could be
   accomplished using parallel forking, as in the previous example.


</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t= 0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 INVITE Proxy -&gt; B1

   INVITE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t= 0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F3 (100 Trying) Proxy -&gt; Alice

   SIP/2.0 100 Trying
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F4 180 Ringing B1 -&gt; Proxy

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F5 180 Ringing Proxy -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   /* B1 rings until a configurable timer in the Proxy
      expires.  The Proxy then sends Cancel and proceeds down
      the list of routes. */

   F6 CANCEL Proxy -&gt; B1

   CANCEL sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 CANCEL
   Content-Length: 0


   F7 200 OK B1 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 CANCEL
   Content-Length: 0


   F8 487 Request Terminated B1 -&gt; Proxy

   SIP/2.0 487 Request Terminated
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F9 ACK Proxy -&gt; B1

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.1
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=765432
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F10 INVITE Proxy -&gt; B2

   INVITE sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F11 480 Not Logged In B2 -&gt; Proxy

   SIP/2.0 480 Not Logged In
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314756
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F12 ACK Proxy -&gt; B2

   ACK sips:bob@client2.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.2
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314756
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F13 INVITE Proxy -&gt; B3

   INVITE sips:bob@client3.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.3
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F14 486 Busy Here B3 -&gt; Proxy

   SIP/2.0 486 Busy Here
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.3
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F15 ACK Proxy -&gt; B3

   ACK sips:bob@client3.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.3
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7654321
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F16 INVITE Proxy -&gt; B4

   INVITE sips:bob@client4.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.4
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F17 180 Ringing B4 -&gt; Proxy

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.4
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client4.biloxi.example.com&gt;
   Content-Length: 0


   F18 180 Ringing Proxy -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client4.biloxi.example.com&gt;
   Content-Length: 0


   F19 200 OK B4 -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83749.4
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client4.biloxi.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client4.biloxi.example.com
   s=
   c=IN IP4 client4.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F20 200 OK Proxy -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   Record-Route: &lt;sips:ss1.example.com;lr&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client4.biloxi.example.com&gt;
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client4.biloxi.example.com
   s=
   c=IN IP4 client4.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F21 ACK Alice -&gt; Proxy

   ACK sips:bob@client4.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F22 ACK Proxy -&gt; B4

   ACK sips:bob@client4.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK8374
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf
    ;received=192.0.2.103
   Max-Forwards: 69
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* RTP streams are established between A and B4*/

   /* User B4 Hangs Up with User A. */

   F23 BYE B4 -&gt; Proxy

   BYE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client4.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
   Route: &lt;sips:ss1.example.com;lr&gt;
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 BYE
   Content-Length: 0


   F24 BYE Proxy -&gt; Alice

   BYE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83754
   Via: SIP/2.0/TLS client4.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   Max-Forwards: 69
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 BYE
   Content-Length: 0


   F25 200 OK Alice -&gt; Proxy

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS ss1.example.com:5061
    ;branch=z9hG4bK83754
    ;received=192.0.2.54
   Via: SIP/2.0/TLS client4.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 BYE
   Content-Length: 0


   F26 200 OK Proxy -&gt; B4

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client4.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7137136
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 BYE
   Content-Length: 0
</pre></div>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.13"></a><h3>2.13.&nbsp;
Call Management (Incoming Call Screening)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                                   Announcement
        Alice           Proxy            Bob           Server

          |                |              |              |
          |    INVITE F1   |              |              |
          |------------------------------&gt;|              |
          | 305 Use Proxy F2              |              |
          |&lt;------------------------------|              |
          |     ACK F3     |              |              |
          |------------------------------&gt;|              |
          |    INVITE F4   |              |              |
          |---------------&gt;|              |              |
          | 407 Proxy Authentication F5   |              |
          |&lt;---------------|              |              |
          |     ACK F6     |              |              |
          |---------------&gt;|              |              |
          |    INVITE F7   |              |              |
          |---------------&gt;|              |              |
          | 403 Screening Failure (Terminating) Error-Info: URI F8
          |&lt;---------------|              |              |
          |     ACK F9     |              |              |
          |---------------&gt;|              |              |
          |    INVITE F10  |              |              |
          |---------------------------------------------&gt;|
          |    200 OK F11  |              |              |
          |---------------------------------------------&gt;|
          |     ACK F12    |                             |
          |---------------------------------------------&gt;|
          |          Announcement Played to Caller       |
          |&lt;=============================================|
          |                                    BYE F13   |
          |&lt;---------------------------------------------|
          |     200 OK F14                               |
          |---------------------------------------------&gt;|
          |                                              |
          |                                              |
          |                                              |
</pre></div>
<p>

   Bob  has an incoming call screening list,  Alice is included on the
   list of addresses Bob  will not accept calls from.   Alice attempts
   to call Bob.  Messages F1, F2, and F3 are included to show that
   Bob  does not accept INVITEs that have not been screened by the
   proxy.

</p>
<p>
   Note that call screening can not be done using the From header -
   instead some form of authentication credentials must be used.

</p>
<p>
   The screening proxy inserts an announcement URI in an Error-Info header 
   field which Alice accesses by sending an INVITE to listen to the
   Announcement.  The Announcement Server uses the automaton and rendering feature tags in F12 and F13 to indicate that it is a media server only capability of playing announcements.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   /* Bob only accepts INVITEs that have been screened
      by the proxy */

   F2 305 Use Proxy Bob -&gt; Alice

   SIP/2.0 305 Use Proxy
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=342123
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:ss1.example.com&gt;
   Content-Length: 0


   F3 ACK Alice -&gt; Bob

   ACK sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=342123
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* A retries the call through the proxy */

   F4 INVITE Alice -&gt; Proxy 1

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf0
   Max-Forwards: 70
   Route: &lt;sips:ss1.example.com&gt;
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   /* Proxy 1 challenges  Alice for authentication */

   F5 407 Proxy Authentication Required Proxy 1 -&gt; Alice

   SIP/2.0 407 Proxy Authentication Required
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf0
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7886765
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Proxy-Authenticate: Digest realm="example.com",
    nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
    qop="auth", nc=00000001, cnonce="0a4f113b",
    opaque="", stale=FALSE, qop="auth", algorithm=MD5
   Content-Length: 0


   F6 ACK Alice -&gt; Proxy 1

   ACK sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf0
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=7886765
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 ACK
   Content-Length: 0


   /*  Alice responds by sending an INVITE with authentication
   credentials in it.  */

   F7 INVITE Alice -&gt; Proxy 1

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf2
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 3 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Proxy-Authorization: Digest username="alice",
    realm="example.com", qop="auth",
    nc=00000001, cnonce="4gr84543ft2",
    nonce="ae9137be1c87d175c2dd63302a0d6e0a",
    opaque="", uri="sips:bob@biloxi.example.com",
    response="bbaec39f943bdcb3620d90afc548a45c"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F8 403 Screening Failure (Terminating) Proxy 1 -&gt; Alice

   SIP/2.0 403 Screening Failure (Terminating)
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf2
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=ffe254
   Call-ID: 12345600@atlanta.example.com
   CSeq: 3 INVITE
   Error-Info: &lt;sips:screen-fail-term-ann@ms.biloxi.example.com&gt;
   Content-Length: 0


   F9 ACK Alice -&gt; Proxy 1

   ACK sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf2
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=ffe254
   Call-ID: 12345600@atlanta.example.com
   Proxy-Authorization: Digest username="alice",
    realm="example.com", nonce="ae9137be1c87d175c2dd63302a0d6e0a",
    opaque="", uri="sips:bob@biloxi.example.com",
    response="bbaec39f943bdcb3620d90afc548a45c"
   CSeq: 3 ACK
   Content-Length: 0


/* To hear the recording, Alice connects to the Error-Info URI */

   F10 INVITE Alice -&gt; Proxy 1

   INVITE sips:screen-fail-term-ann@ms.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfj
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 4 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


F11 200 OK Announcement Server -&gt; Proxy 1

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfj
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=234934
   Call-ID: 12345600@atlanta.example.com
   CSeq: 4 INVITE
   Contact: &lt;sips:ms.biloxi.example.com&gt;
    ;automaton;+sip.rendering="no"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=annc 2890844543 2890844543 IN IP4 announce.biloxi.example.com
   s=
   c=IN IP4 announce.biloxi.example.com
   t=0 0
   m=audio 49174 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


F12 ACK Alice -&gt; Announcement Server

   ACK sips:ms.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b32
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=234934
   Call-ID: 12345600@atlanta.example.com
   CSeq: 4 ACK
   Content-Length: 0


  /* Announcement Server plays announcement then disconnects */

   F13 BYE Announcement Server -&gt; Alice

   BYE sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS announcement.example.com:5061
    ;branch=z9hG4bK74bKS
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=234934
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2334 BYE
   Content-Length: 0


   F14 200 OK Alice -&gt; Announcement Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS announcement.example.com:5061
    ;branch=z9hG4bK74bKS
    ;received=192.0.2.103
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=234934
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2334 BYE
   Content-Length: 0

</pre></div>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.14"></a><h3>2.14.&nbsp;
Call Management (Outgoing Call Screening)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice            Proxy           Bob
          |                |              |
          |    INVITE F1   |              |
          |---------------&gt;|              |
          | 407 Proxy Authentication F2    |
          |&lt;---------------|              |
          |     ACK F3     |              |
          |---------------&gt;|              |
          |    INVITE F4   |              |
          |---------------&gt;|              |
          | 403 Screening Failure (Originating) F5
          |&lt;---------------|              |
          |     ACK F6     |              |
          |---------------&gt;|              |
          |                |              |
</pre></div>
<p>

   Alice has an outgoing call screening list, Bob is included on the
   list of addresses Alice will not be able to place a call to.   Alice
   attempts to call Bob.

</p>
<p>
   Alice could establish a session to listen to the announcement in the 
   Error-Info header field.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Proxy 1

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   /* Proxy 1 challenges  Alice for authentication */

   F2 407 Proxy Authentication Required Proxy 1 -&gt; Alice

   SIP/2.0 407 Proxy Authentication Required
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=90210
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Proxy-Authenticate: Digest realm="example.com",
    nonce="ea9c8e88df84f1cec4341ae6cbe5a359",
    qop=auth, nc=00000001, cnonce="0a4f113b",
    opaque="", stale=FALSE, algorithm=MD5
   Content-Length: 0


   F3 ACK Alice -&gt; Proxy 1

   ACK sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=90210
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /*  Alice responds be sending an INVITE with authentication
       credentials in it.  */

   F4 INVITE Alice -&gt; Proxy 1

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b4
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Proxy-Authorization: Digest username="alice", realm="example.com",
    nonce="cb360afc54bbaec39f943bd820d9a45c", opaque="",
    uri="sips:bob@biloxi.example.com",
    response="b9d2e5bcdec9f69ab2a9b44f270285a6"
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F5 403 Screening Failure (Originating) Proxy 1 -&gt; Alice

   SIP/2.0 403 Screening Failure (Originating)
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b4
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=18017
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 INVITE
   Error-Info: &lt;sips:screen-fail-orig-ann@announcement.example.com&gt;
   Content-Length: 0


   F6 ACK Alice -&gt; Proxy 1

   ACK sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b4
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=18017
   Call-ID: 12345600@atlanta.example.com
   CSeq: 2 ACK
   Proxy-Authorization: Digest username="alice", realm="example.com",
    nonce="cb360afc54bbaec39f943bd820d9a45c", opaque="",
    uri="sips:bob@biloxi.example.com",
    response="b9d2e5bcdec9f69ab2a9b44f270285a6"

   Content-Length: 0
</pre></div>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.15"></a><h3>2.15.&nbsp;
Call Park</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice           Bob        Park Server       Carol
          |              |              |              |
          |   INVITE F1  |              |              |
          |-------------&gt;|              |              |
          |180 Ringing F2|              |              |
          |&lt;-------------|              |              |
          |  200 OK F3   |              |              |
          |&lt;-------------|              |              |
          |    ACK F4    |              |              |
          |-------------&gt;|              |              |
          |  RTP Media   |              |              |
          |&lt;============&gt;|              |              |
          |      Bob Parks Call         |              |
          |              |   REFER Refer-To: A F5      |
          |              |-------------&gt;|              |
          |              |    202 F6    |              |
          |              |&lt;-------------|              |
          |              |   NOTIFY F7  |              |
          |              |&lt;-------------|              |
          |              |    200 F8    |              |
          |              |-------------&gt;|              |
          |  INVITE F9 Replaces: B      |              |
          |&lt;----------------------------|              |
          |          200 OK F10         |              |
          |----------------------------&gt;|              |
          |           ACK F11           |              |
          |&lt;----------------------------|              |
          |           RTP Music         |              |
          |&lt;===========================&gt;|              |
          |     BYE F12  |              |              |
          |-------------&gt;|  NOTIFY F14  |              |
          |  200 OK F13  |&lt;-------------|              |
          |&lt;-------------|  200 OK F15  |              |
          |              |-------------&gt;|              |
          |              |   Carol picks up the call   |
          |              |              |              |
          |              |              | SUBSCRIBE F16|
          |              |              |&lt;-------------|
          |              |              |  200 OK F17  |
          |              |              |-------------&gt;|
          |              |              |  NOTIFY F18  |
          |              |              |-------------&gt;|
          |              |              |  200 OK F19  |
          |              |              |&lt;-------------|
          |           INVITE Replaces: Park Server F20 |
          |&lt;-------------------------------------------|
          |              |              |   200 F21    |
          |-------------------------------------------&gt;|
          |              |              |    ACK F22   |
          |&lt;-------------------------------------------|
          |                  RTP Media                 |
          |&lt;==========================================&gt;|
          |           BYE F23           |              |
          |----------------------------&gt;|              |
          |          200 OK F24         |              |
          |&lt;----------------------------|              |
          |       No more RTP Music     |              |
</pre></div>
<p>

   In this example, Alice calls Bob.  Bob then parks the call at the
   Park Server by sending a REFER to the Park Server.  The server sends
   an INVITE to Alice which replaces the session between Alice and Bob.  The Park Server utilizes the automaton, rendering, and byeless feature tags in F9 to indicate its capabilities to Alice.  
   The call is accepted by Alice and causes Alice to send a BYE to Bob.
   Bob receives notification of the successful park, and also receives
   the dialog identifiers in the application/sip body of the NOTIFY response.

</p>
<p>
   Carol wishes to retrieve the call, so she sends an INVITE containing the dialog identifiers to Alice which replaces the session with the Park Server.   Alice accepts the call and sends a BYE to the Park Server. Carol obtains the dialog identifiers from a NOTIFY from the Park Server.  

</p>
<p>
   Note that this call flow is a special case of call transfer.

</p>
<p>
   Note also that this flow could also be used for Music on Hold.

</p>
<p>
   Message Details.


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.alice.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F3 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 ACK Alice -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 1 ACK
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Length: 0


   /*   Bob REFERs Park Server to establish session with A
        which replaces the established session between A and B.
        Note that there is no session established between B
        and the Park Server. */

   F5 REFER Bob -&gt; Park Server

   REFER sips:park@server.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds9
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   To: Park Server &lt;sips:park@server.example.com&gt;
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 1 REFER
 &lt;allOneLine&gt;
   Refer-To: &lt;sips:a8342043f@atlanta.example.com;gr?Replaces=
   12345601%40atlanta.example.com%3Bfrom-tag%3D314159
   %3Bto-tag%3D1234567&amp;Require=replaces&gt;
 &lt;/allOneLine&gt;
   Referred-By: &lt;sips:bob@biloxi.example.com&gt;
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F6 202 Accepted Park Server -&gt; Bob

   SIP/2.0 202 Accepted
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds9
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   To: Park Server &lt;sips:park@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   Contact: &lt;sips:park@server.example.com&gt;
   CSeq: 1 REFER
   Content-Length: 0


   F7 NOTIFY Park Server -&gt; Bob

   NOTIFY sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bT6
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   Max-Forwards: 70
   From: Park Server &lt;sips:park@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 1 NOTIFY
   Event: refer
   Contact: &lt;sips:park@server.example.com&gt;
   Subscription-State: active;expires=60
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 100 Trying


   F8 200 OK Bob -&gt; Park Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bT6
    ;received=192.0.2.103
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   From: Park Server &lt;sips:park@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 1 NOTIFY
   Content-Length: 0


   /* Park Server places call to Alice to replace session
      between Alice and Bob. */

   F9 INVITE Park Server -&gt; Alice

   INVITE sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74rf
   Max-Forwards: 70
   From: &lt;sips:park@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 INVITE
   Referred-By: &lt;sips:bob@biloxi.example.com&gt;
   Contact: &lt;sips:park@server.example.com&gt;;automaton
       ;+sip.byeless;+sip.rendering="no"
   Require: replaces
   Replaces: 12345601@atlanta.example.com
    ;from-tag=314159;to-tag=1234567
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=ParkServer 2890844576 2890844576 IN IP4 Park.server.example.com
   s=
   c=IN IP4 server.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F10 200 OK Alice -&gt; Park Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74rf
    ;received=192.0.2.103
   From: &lt;sips:park@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000
   a=recvonly


   F11 ACK Park Server -&gt; Alice

   ACK sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK7rfF
   Max-Forwards: 70
   From: &lt;sips:park@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F12 BYE Alice -&gt; Bob

   BYE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   F13 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.105
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 12345601@atlanta.example.com
   CSeq: 2 BYE
   Content-Length: 0


   /*  Park Server reports success back to Bob by returning
        a 200 OK response.  Bob obtains the dialog identifiers
        from the headers included in the response. */

   F14 NOTIFY Park Server -&gt; Bob

   NOTIFY sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bf9
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   Max-Forwards: 70
   From: Park Server &lt;sips:park@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 2 NOTIFY
   Event: refer
   Subscription-State: terminated;reason=noresource
   Contact: &lt;sips:park@server.example.com&gt;;automaton
       ;+sip.byeless;+sip.rendering="no"
   Content-Type: message/sipfrag
   Content-Length: ...

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74rf
    ;received=192.0.2.103
   From: &lt;sips:park@server.example.com&gt;;tag=0111
   To: &lt;sips:a8342043f@atlanta.example.com;gr&gt;;tag=098594
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;


   F15 200 OK Bob -&gt; Park Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=02134
   From: Park Server &lt;sips:park@server.example.com&gt;;tag=56323
   Call-ID: 4802029847@biloxi.example.com
   CSeq: 2 NOTIFY
   Content-Length: 0


   /*  Alice is now parked at the Park Server */

   /* Carol picks up the call by sending an INVITE to A which
      replaces the existing session with the Park/Park Server.
      Carol needs to know the dialog information to construct
      the Replaces header. */



   F16 SUBSCRIBE  Carol -&gt; Park Server

   SUBSCRIBE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.chicago.example.com:5061
    ;branch=z9hG4bK74b232
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=158x93461
   To: &lt;sips:park@server.example.com&gt;
   Call-ID: 2d6485356dfaj34dsf
   CSeq: 1 SUBSCRIBE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Event: dialog
   Expires: 0
   Accept: application/dialog-info+xml
   Content-Length: 0


   F17 200 OK Park Server -&gt; Carol

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.chicago.example.com:5061
    ;branch=z9hG4bK74b232
    ;received=192.0.2.105
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=158x93461
   To: &lt;sips:park@server.example.com&gt;;tag=3213j
   Call-ID: 2d6485356dfaj34dsf
   CSeq: 1 SUBSCRIBE
   Contact: &lt;sips:park@server.example.com&gt;;automaton
       ;+sip.byeless;+sip.rendering="no"
   Content-Length: 0


   F18 NOTIFY  Park Server -&gt; Carol

   NOTIFY sips:carol@client.example.com SIP/2.0
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74b8skd
   Max-Forwards: 70
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=158x93461
   From: &lt;sips:park@server.example.com&gt;;tag=3213j
   Call-ID: 2d6485356dfaj34dsf
   CSeq: 1 NOTIFY
   Contact: &lt;sips:park@server.example.com&gt;;automaton
       ;+sip.byeless;+sip.rendering="no"
   Event: dialog
   Subscription-State: terminated;reason=timeout
   Content-Type: application/dialog-info+xml
   Content-Length: ...

   &lt;?xml version="1.0"?&gt;
   &lt;dialog-info xmlns="urn:ietf:params:xml:ns:dialog-info"
          version="0" state="full" entity="sips:park@server.example.com"&gt;
      &lt;dialog id="439920143524" call-id="a5-75-34-12-76@server.example.com"
          local-tag="0111" remote-tag="098594"
                                              direction="initiator"&gt;
        &lt;duration&gt;1&lt;/duration&gt;
        &lt;local&gt;
           &lt;target&gt;sips:park@server.example.com&lt;/target&gt;
        &lt;/local&gt;
        &lt;remote&gt;
          &lt;target&gt;sips:a8342043f@atlanta.example.com;gr&lt;/target&gt;
        &lt;/remote&gt;
        &lt;state&gt;confirmed&lt;/state&gt;
      &lt;/dialog&gt;
    &lt;/dialog-info&gt;


   F19 200 OK Carol -&gt; Park Server

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS server.example.com:5061
    ;branch=z9hG4bK74b8skd
    ;received=192.0.2.103
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=158x93461
   From: &lt;sips:park@server.example.com&gt;;tag=3213j
   Call-ID: 2d6485356dfaj34dsf
   CSeq: 1 NOTIFY
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Content-Length: 0



   F20 INVITE Carol -&gt; Alice

   INVITE sips:alice@atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.chicago.example.com:5061
    ;branch=z9hG4bK74bQ2
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5893461
   To: Alice &lt;sips:alice@atlanta.example.com&gt;
   Call-ID: 6485356@chicago.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Require: replaces
   Replaces: a5-75-34-12-76@server.example.com
    ;to-tag=098594;from-tag=0111
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,
    SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844922 2890844922 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F21 200 OK Alice -&gt; Carol

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.chicago.example.com:5061
    ;branch=z9hG4bK74bQ2
    ;received=192.0.2.105
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5893461
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=222
   Call-ID: 6485356@chicago.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844527 2890844527 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F22 ACK Carol -&gt; Alice

   ACK sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS client.chicago.example.com:5061
    ;branch=z9hG4bK74bJ0
   Max-Forwards: 70
   From: Carol &lt;sips:carol@chicago.example.com&gt;;tag=5893461
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=222
   Call-ID: 6485356@chicago.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* A replaces the session to the Park Server with the new
      session with C and generates a BYE to disconnect the
      Park Server. */

   F23 BYE Alice -&gt; Park Server

   BYE sips:park@server.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b4N
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=098594
   To: &lt;sips:park@server.example.com&gt;;tag=0111
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 BYE
   Content-Length: 0


   F24 200 OK Park Server -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b4N
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=098594
   To: &lt;sips:park@server.example.com&gt;;tag=0111
   Call-ID: a5-75-34-12-76@server.example.com
   CSeq: 1 BYE
   Content-Length: 0
</pre></div>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.16"></a><h3>2.16.&nbsp;
Call Pickup</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

         Alice          Bob                Bill
          |              |                   |
          |   INVITE F1  |                   |
          |-------------&gt;|                   |
          |180 Ringing F2|                   |
          |&lt;-------------|                   |
          |              |   SUBSCRIBE F3    |
          |              |&lt;------------------|
          |              |     200 OK F4     |
          |              |------------------&gt;|
          |              |     NOTIFY F5     |
          |              |------------------&gt;|
          |              |     200 OK F6     |
          |              |&lt;------------------|
          |          INVITE Replaces:Bob  F7 |
          |&lt;---------------------------------|
          |              |     200 OK F8     |
          |---------------------------------&gt;|
          |   CANCEL F9  |                   |
          |-------------&gt;|                   |
          |  200 OK F10  |                   |
          |&lt;-------------|                   |
          |    487 F11   |                   |
          |&lt;-------------|                   |
          |    ACK F12   |                   |
          |-------------&gt;|                   |
          |                    ACK F13       |
          |&lt;---------------------------------|
          |                                  |
          |    Two way RTP Established       |
          |&lt;================================&gt;|
          |                     BYE F14      |
          |---------------------------------&gt;|
          |                   200 OK F15     |
          |&lt;---------------------------------|
          |                                  |
</pre></div>
<p>

   Bob and Bill are part of a work group at example.com that can pick
   up each other's calls.  Alice calls Bob who does not answer.  Bill
   wishes to pick up the call and sends a SUBSCRIBE to Bob to retrieve the
   dialog information.  Bill then generates an INVITE with a Replaces
   to Alice.  Alice answers the INVITE and sends a CANCEL to stop Bob's
   phone ringing. Note that the relative order of the 487/ACK sequence (F11/F12) and the 200 OK to the CANCEL (F10) is not deterministic.

</p>
<p>
   This call flow shows the use of the "early-only" parameter <a class='info' href='#RFC3891'>[RFC3891]<span> (</span><span class='info'>Mahy, R., Biggs, B., and R. Dean, &ldquo;The Session Initiation Protocol (SIP) &quot;Replaces&quot; Header,&rdquo; September&nbsp;2004.</span><span>)</span></a> in the Replaces
   header field of F7.  This parameter prevents Alice from accepting the INVITE
   if Bob has already accepted the INVITE.  If Bill had wished to "take" the 
   call from Bob regardless of whether he had answered, the parameter would not
   have been present in F7.

</p>
<p>
   Also note that the subscription between Bob and Carol could have been 
   established prior to Alice's call.

</p>
<p>
   Message Details

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   /*   Bill decides to pick up the call. */

   F3 SUBSCRIBE  Bill -&gt; Bob

   SUBSCRIBE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK74bf
   Max-Forwards: 70
   From: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675309
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: rt4353gs2egg@pc.biloxi.example.com
   CSeq: 1 SUBSCRIBE
   Contact: &lt;sips:bill@pc.biloxi.example.com&gt;
   Event: dialog
   Expires: 0
   Accept: application/dialog-info+xml
   Content-Length: 0


   F4 200 OK Bob -&gt; Bill

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK74bf
    ;received=192.0.2.114
   Max-Forwards: 70
   From: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675309
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=31451098
   Call-ID: rt4353gs2egg@pc.biloxi.example.com
   CSeq: 1 SUBSCRIBE
   Content-Length: 0


   F5 NOTIFY  Bob -&gt; Bill

   NOTIFY sips:bill@pc.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74br
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=31451098
   To: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675309
   Call-ID: rt4353gs2egg@pc.biloxi.example.com
   CSeq: 1 NOTIFY
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Event: dialog
   Subscription-State: terminated;reason=timeout
   Content-Type: application/dialog-info+xml
   Content-Length: ...

   &lt;?xml version="1.0"?&gt;
   &lt;dialog-info xmlns="urn:ietf:params:xml:ns:dialog-info"
          version="0" state="full" entity="sips:bob@biloxi.example.com"&gt;
      &lt;dialog id="94992014524" call-id="12345600@atlanta.example.com"
          local-tag="3145678" remote-tag="1234567"
                                              direction="recipient"&gt;
        &lt;duration&gt;1&lt;/duration&gt;
        &lt;local&gt;
          &lt;identity display="Bob"&gt;sips:bob@biloxi.example.com&lt;/identity&gt;
          &lt;target&gt;sips:bob@client.biloxi.example.com&lt;/target&gt;
        &lt;/local&gt;
        &lt;remote&gt;
          &lt;identity display="Alice"&gt;sips:alice@atlanta.example.com
                                                          &lt;/identity&gt;
          &lt;target&gt;sips:a8342043@atlanta.example.com;gr&lt;/target&gt;
        &lt;/remote&gt;
        &lt;state&gt;early&lt;/state&gt;
      &lt;/dialog&gt;
    &lt;/dialog-info&gt;


   F6 200 OK  Bill -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74br
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=31451098
   To: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675309
   Call-ID: rt4353gs2egg@pc.biloxi.example.com
   CSeq: 1 NOTIFY
   Contact: &lt;sips:bill@pc.biloxi.example.com&gt;
   Content-Length: 0


   F7 INVITE  Bill -&gt; Alice

   INVITE sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK74HH
   Max-Forwards: 70
   From: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675310
   To: Alice &lt;sips:alice@atlanta.example.com&gt;
   Call-ID: 563456212@b2.biloxi.example.com
   CSeq: 1 INVITE
   Require: replaces
   Replaces: 12345600@atlanta.example.com
    ;from-tag=314578;to-tag=1234567;early-only
   Contact: &lt;sips:bill@pc.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bill 2890843122 2890843122 IN IP4 pc.biloxi.example.com
   s=
   c=IN IP4 pc.biloxi.example.com
   t=0 0
   m=audio 5342 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   /* Alice matches the dialog information in the Replaces header
      and accepts the INVITE. */

   F8 200 OK  Alice -&gt; Bill

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK74HH
    ;received=192.0.2.114
   From: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675310
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=131256
   Call-ID: 563456212@b2.biloxi.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:a8342043f@atlanta.example.com;gr&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces, gruu
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 289084543 289084543 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49172 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   /* Alice stops Bob's phone from ringing by sending a CANCEL */

   F9 CANCEL Alice -&gt; Bob

   CANCEL sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 CANCEL
   Content-Length: 0


   F10 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 CANCEL
   Content-Length: 0


   F11 487 Request Terminated Bob -&gt; Alice

   SIP/2.0 487 Request Terminated
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F12 ACK Alice -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK83749.1
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=3145678
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F13 ACK  Bill -&gt; Alice

   ACK sips:a8342043f@atlanta.example.com;gr SIP/2.0
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bK7435
   Max-Forwards: 70
   From: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675310
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=131256
   Call-ID: 563456212@b2.biloxi.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* RTP streams are established between Alice and Bill.
      Later, Alice Hangs Up with Bob. */

   F14 BYE Alice -&gt; Bill

   BYE sips:bill@pc.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf2
   Max-Forwards: 70
   To: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675310
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=131256
   Call-ID: 563456212@b2.biloxi.example.com
   CSeq: 1 BYE
   Content-Length: 0


   F15 200 OK Bill -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf2
    ;received=192.0.2.105
   To: Bill &lt;sips:bill@biloxi.example.com&gt;;tag=8675310
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=131256
   Call-ID: 563456212@b2.biloxi.example.com
   CSeq:  1 BYE
   Content-Length: 0

</pre></div>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.17"></a><h3>2.17.&nbsp;
Automatic Redial</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        Alice             Bob
          |                |
          |    INVITE F1   |
          |---------------&gt;|
          |486 Busy Here F2|
          |&lt;---------------|    Bob is busy
          |     ACK F3     |
          |---------------&gt;|
          |  SUBSCRIBE F4  |
          |---------------&gt;|
          |   200 OK F5    |
          |&lt;---------------|
          |    NOTIFY F6   |
          |&lt;---------------|
          |   200 OK F7    |
          |---------------&gt;|
          |                |
          |    NOTIFY F8   |    Bob is now available
          |&lt;---------------|
          |   200 OK F9    |
          |---------------&gt;|
          |                |
          |   INVITE F10   |
          |---------------&gt;|   Session setup successfully
          | 180 Ringing F11|
          |&lt;---------------|
          |   200 OK F12   |
          |&lt;---------------|
          |     ACK F13    |
          |---------------&gt;|
          |  Media Session |
          |&lt;==============&gt;|
          |                |
          |   NOTIFY F14   |
          |&lt;---------------|
          |   200 OK F15   |
          |---------------&gt;|
          |                |
          |  SUBSCRIBE F16 | Alice terminates subscription
          |---------------&gt;|
          |   200 OK F17   |
          |&lt;---------------|
          |   NOTIFY F18   |
          |&lt;---------------|
          |   200 OK F19   |
          |---------------&gt;|
          |                |
</pre></div>
<p>

   Bob is initially busy when  Alice calls.   Alice subscribes to
   Bob's call state using a SUBSCRIBE F4.  Bob sends a NOTIFY F8 when
   Bob is available.  Alice is alerted, then Alice sends an INVITE to Bob to
   establish the session.  The subscription is terminated using SUBSCRIBE F16.

</p>
<p>
   Message Details


</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F2 486 Busy Here

   SIP/2.0 486 Busy Here
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=982039i4
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 INVITE
   Content-Length: 0


   F3 ACK Alice -&gt; Bob

   ACK sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bf9
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=982039i4
   Call-ID: 12345600@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F4 SUBSCRIBE Alice -&gt; Bob

   SUBSCRIBE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b8G
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 1 SUBSCRIBE
   Contact: sips:alice@client.atlanta.example.com
   Event: dialog
   Accept: application/dialog-info+xml
   Content-Length: 0


   F5 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74b8G
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   Call-ID: 4524526232@atlanta.example.com
   Expires: 60
   CSeq: 1 SUBSCRIBE
   Contact: sips:bob@client.biloxi.example.com
   Content-Length: 0


   F6 NOTIFY Bob -&gt; Alice

   NOTIFY sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74bn2
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 1 NOTIFY
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Event: dialog
   Subscription-State: active;expires=59
   Content-Type: application/dialog-info+xml
   Content-Length: ...

   &lt;?xml version="1.0"?&gt;
   &lt;dialog-info xmlns="urn:ietf:params:xml:ns:dialog-info"
          version="0" state="full" entity="sips:bob@biloxi.example.com"&gt;
      &lt;dialog id="562623442g3"&gt;
         &lt;duration&gt;1&lt;/duration&gt;
        &lt;state&gt;confirmed&lt;/state&gt;
      &lt;/dialog&gt;
    &lt;/dialog-info&gt;


   F7 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74bn2
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 1 NOTIFY
   Content-Length: 0


   /*   Bob is now available. */

   F8 NOTIFY Bob -&gt; Alice

   NOTIFY sips:alice@atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74bVi
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 2 NOTIFY
   Event: dialog
   Subscription-State: active;expires=27
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Type: application/dialog-info+xml
   Content-Length: ...

   &lt;?xml version="1.0"?&gt;
   &lt;dialog-info xmlns="urn:ietf:params:xml:ns:dialog-info"
          version="0" state="full" entity="sips:bob@biloxi.example.com"&gt;
      &lt;dialog id="562623442g3"&gt;
        &lt;state&gt;terminated&lt;/state&gt;
      &lt;/dialog&gt;
   &lt;/dialog-info&gt;


   F9 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK74bVi
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 2 NOTIFY
   Content-Length: 0


   F10 INVITE Alice -&gt; Bob

   INVITE sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfq
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=f23fkg14k
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: aoij4i9okitr@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:alice@client.atlanta.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=alice 2890844826 2890844826 IN IP4 client.atlanta.example.com
   s=
   c=IN IP4 client.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F11 180 Ringing Bob -&gt; Alice

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfq
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=f23fkg14k
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: aoij4i9okitr@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Content-Length: 0


   F12 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bfq
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=f23fkg14k
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: aoij4i9okitr@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890854527 2890854527 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F13 ACK Alice -&gt; Bob

   ACK sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK74bLBJ
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=f23fkg14k
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=23431
   Call-ID: aoij4i9okitr@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   F14 NOTIFY Bob -&gt; Alice

   NOTIFY sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK4bnd2
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 3 NOTIFY
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Event: dialog
   Subscription-State: active;expires=15
   Content-Type: application/dialog-info+xml
   Content-Length: ...

   &lt;?xml version="1.0"?&gt;
   &lt;dialog-info xmlns="urn:ietf:params:xml:ns:dialog-info"
          version="0" state="full" entity="sips:bob@biloxi.example.com"&gt;
      &lt;dialog id="62d2623442g3"&gt;
         &lt;duration&gt;1&lt;/duration&gt;
        &lt;state&gt;confirmed&lt;/state&gt;
      &lt;/dialog&gt;
    &lt;/dialog-info&gt;


   F15 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bK4bnd2
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 3 NOTIFY
   Content-Length: 0


   /* Alice terminates the subscription */

   F16 SUBSCRIBE Alice -&gt; Bob

   SUBSCRIBE sips:bob@client.biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK474b8
   Max-Forwards: 70
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 2 SUBSCRIBE
   Contact: sips:alice@client.atlanta.example.com
   Event: dialog
   Expires: 0
   Accept: application/dialog-info+xml
   Content-Length: 0


   F17 200 OK Bob -&gt; Alice

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.atlanta.example.com:5061
    ;branch=z9hG4bK474b8
    ;received=192.0.2.103
   From: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   Call-ID: 4524526232@atlanta.example.com
   Expires: 0
   CSeq: 2 SUBSCRIBE
   Contact: sips:bob@client.biloxi.example.com
   Content-Length: 0


   F18 NOTIFY Bob -&gt; Alice

   NOTIFY sips:alice@client.atlanta.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKb5n2j
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 4 NOTIFY
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Event: dialog
   Subscription-State: terminated;reason=noresource
   Content-Type: application/dialog-info+xml
   Content-Length: ...

   &lt;?xml version="1.0"?&gt;
   &lt;dialog-info xmlns="urn:ietf:params:xml:ns:dialog-info"
          version="0" state="full" entity="sips:bob@biloxi.example.com"&gt;
      &lt;dialog id="62d2623442g3"&gt;
         &lt;duration&gt;3&lt;/duration&gt;
        &lt;state&gt;confirmed&lt;/state&gt;
      &lt;/dialog&gt;
    &lt;/dialog-info&gt;


   F19 200 OK Alice -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKb5n2j
    ;received=192.0.2.105
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=341123
   To: Alice &lt;sips:alice@atlanta.example.com&gt;;tag=837348234
   Call-ID: 4524526232@atlanta.example.com
   CSeq: 4 NOTIFY
   Content-Length: 0


</pre></div>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.18"></a><h3>2.18.&nbsp;
Click to Dial</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     Bob's PC                Bob                Carol
         | REFER Refer-To:Carol F1                 |
         |-------------------&gt;|                    |
         |  202 Accepted F2   |                    |
         |&lt;-------------------|                    |
         |                    |     INVITE F3      |
         |                    |-------------------&gt;|
         |                    |   180 Ringing F4   |
         |                    |&lt;-------------------|
         |                    |     200 OK F5      |
         |                    |&lt;-------------------|
         |                    |       ACK F6       |
         |                    |-------------------&gt;|
         |                    |         RTP        |
         |                    |&lt;==================&gt;|
         |                    |                    |
</pre></div>
<p>


   In this example, while browsing the web on his PC, Bob clicks on
   Carol's SIP URI intending to establish a session with Carol.  Bob's
   web browser passes the SIP URI to the SIP client on Bob's PC.  The PC
   client is configured with the URI of Bob's SIP phone.  A REFER is
   sent to the SIP phone which results in the establishment of the
   session between Bob and Carol.

</p>
<p>
   Note that Bob's PC requests that no REFER dialog be established by the use of the Refer-Sub: false header field <a class='info' href='#RFC4488'>[RFC4488]<span> (</span><span class='info'>Levin, O., &ldquo;Suppression of Session Initiation Protocol (SIP) REFER Method Implicit Subscription,&rdquo; May&nbsp;2006.</span><span>)</span></a>.

</p>
<p>
   This flow is preferable to the 3pcc flow because the end-to-end SIP signaling 
   is not interrupted by the 3pcc controller, and because Bob's experience of 
   the call will not be marred by the lack of ringback tone or possible 
   clipping.  Suitable authorization of the REFER and explicit authorization of 
   the triggered INVITE by Bob is necessary.

</p>
<p>
   Message Details

</p>
<p>
   /* Bob's PC SIP Client sends a REFER to Bob's SIP phone */

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   F1 REFER PC -&gt; Bob

   REFER sips:bob@biloxi.example.com SIP/2.0
   Via: SIP/2.0/TLS pc.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
   Max-Forwards: 70
   From: &lt;sips:pc.biloxi.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;
   Call-ID: 1234560183434
   CSeq: 1 REFER
   Refer-To: &lt;sips:carol@chicago.example.com&gt;
   Refer-Sub: false
   Contact: &lt;sips:pc.biloxi.example.com&gt;
   Content-Length: 0


   F2 202 Accepted Bob -&gt; PC

   SIP/2.0 202 Accepted
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashds7
    ;received=192.0.2.103
   From: &lt;sips:pc.biloxi.example.com&gt;;tag=1234567
   To: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=314159
   Call-ID: 1234560183434
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   CSeq: 1 REFER
   Refer-Sub: false
   Content-Length: 0


   F3 INVITE Bob -&gt; Carol

   INVITE sips:carol@chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdK9
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:bob@client.biloxi.example.com&gt;
   Referred-By: &lt;sips:pc.biloxi.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=bob 2890844539 2890844539 IN IP4 client.biloxi.example.com
   s=
   c=IN IP4 client.biloxi.example.com
   t=0 0
   m=audio 3458 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F4 180 Ringing Carol -&gt; Bob

   SIP/2.0 180 Ringing
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdK9
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Content-Length: 0


   F5 200 OK Carol -&gt; Bob

   SIP/2.0 200 OK
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashdK9
    ;received=192.0.2.113
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 INVITE
   Contact: &lt;sips:carol@client.chicago.example.com&gt;
   Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, NOTIFY
   Supported: replaces
   Content-Type: application/sdp
   Content-Length: ...

   v=0
   o=carol 2890844527 2890844527 IN IP4 client.chicago.example.com
   s=
   c=IN IP4 client.chicago.example.com
   t=0 0
   m=audio 3456 RTP/AVP 0
   a=rtpmap:0 PCMU/8000


   F6 ACK Bob -&gt; Carol

   ACK sips:carol@client.chicago.example.com SIP/2.0
   Via: SIP/2.0/TLS client.biloxi.example.com:5061
    ;branch=z9hG4bKnashd43
   Max-Forwards: 70
   From: Bob &lt;sips:bob@biloxi.example.com&gt;;tag=8675309
   To: Carol &lt;sips:carol@chicago.example.com&gt;;tag=928287
   Call-ID: 7436222@atlanta.example.com
   CSeq: 1 ACK
   Content-Length: 0


   /* Bob and Carol now have established a session. */
</pre></div>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Security Considerations</h3>

<p>
   Since many of the examples in this document involve SIP call control,
   either peer-to-peer or 3pcc, the security considerations in the
   <a class='info' href='#I-D.ietf-sipping-cc-framework'>Multiparty Framework document<span> (</span><span class='info'>Mahy, R., Sparks, R., Rosenberg, J., Petrie, D., and A. Johnston, &ldquo;A Call Control and Multi-party usage framework for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sipping&#8209;cc&#8209;framework] apply.

</p>
<p>
Many of the services shown in this document rely on a particular user agent being part of a group.  Members of a group could be, for example, employees within a particular department, a set of home phone extensions, members of a call center, etc.  As such, user agents which are part of the group permit other group members special privileges and features.  For example, while a user agent may not in general allow another user agent to learn detailed dialog information, this information might be shared with another group member in order to facilitate a service such as call pickup.  Group members must be authenticated using normal SIP means such as certificates or shared secrets.

</p>
<p>
The service examples in this document make extensive use of the SIP call control primitives REFER, Replaces, Join, and the dialog package.  The security considerations associated with each of these extensions apply to the scenarios in this document.

</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>
None.

</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgements</h3>

<p>
The authors would like to thank the following reviewers of the document for their detailed comments and corrections: Vijay Gurbani, John Elwell, Joel Repiquet, Nagesh Kumar, Chandra Ravipati, Eric Burger, Jeroen Bemmel, Miguel Garcia, and Dale Worley.

</p>
<p>
   The Transfer - Instant Messaging call flow is based on the "IM-a-call" call
   flow by Jonathan Rosenberg and Henning Schulzrinne.  The Automatic Call Back call flow is based on a call flow by Adam
   Roach. The authors wish to thank the following
   individuals for their assistance and review of this call flows
   document: Joel Repiquet, Aki Neimi, Rohan Mahy, Jonathan Rosenberg, Hemant Agrawal, Henry
   Sinnreich, Dean Willis, David Devanatham, Joe Pizzimenti,  Matt
   Cannon, John Hearty, the whole MCI WorldCom IPOP Design team, Scott
   Orton, Greg Osterhout, Pat Sollee, Doug Weisenberg, Danny Mistry,
   Steve McKinnon, and Denise Ingram, Denise Caballero, Tom Redman, Ilya
   Slain, Pat Sollee, John Truetken, and others from MCI WorldCom, 3Com,
   Cisco, Lucent and Nortel.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3515">[RFC3515]</a></td>
<td class="author-text">Sparks, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3515">The Session Initiation Protocol (SIP) Refer Method</a>,&rdquo; RFC&nbsp;3515, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3515.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3891">[RFC3891]</a></td>
<td class="author-text">Mahy, R., Biggs, B., and R. Dean, &ldquo;<a href="http://tools.ietf.org/html/rfc3891">The Session Initiation Protocol (SIP) "Replaces" Header</a>,&rdquo; RFC&nbsp;3891, September&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3891.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4235">[RFC4235]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and R. Mahy, &ldquo;<a href="http://tools.ietf.org/html/rfc4235">An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4235, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4235.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3911">[RFC3911]</a></td>
<td class="author-text">Mahy, R. and D. Petrie, &ldquo;<a href="http://tools.ietf.org/html/rfc3911">The Session Initiation Protocol (SIP) "Join" Header</a>,&rdquo; RFC&nbsp;3911, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3911.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3840">[RFC3840]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;<a href="http://tools.ietf.org/html/rfc3840">Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3840, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3840.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4579">[RFC4579]</a></td>
<td class="author-text">Johnston, A. and O. Levin, &ldquo;<a href="http://tools.ietf.org/html/rfc4579">Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents</a>,&rdquo; BCP&nbsp;119, RFC&nbsp;4579, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4579.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3428">[RFC3428]</a></td>
<td class="author-text">Campbell, B., Rosenberg, J., Schulzrinne, H., Huitema, C., and D. Gurle, &ldquo;<a href="http://tools.ietf.org/html/rfc3428">Session Initiation Protocol (SIP) Extension for Instant Messaging</a>,&rdquo; RFC&nbsp;3428, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3428.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4488">[RFC4488]</a></td>
<td class="author-text">Levin, O., &ldquo;<a href="http://tools.ietf.org/html/rfc4488">Suppression of Session Initiation Protocol (SIP) REFER Method Implicit Subscription</a>,&rdquo; RFC&nbsp;4488, May&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4488.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipping-cc-transfer">[I-D.ietf-sipping-cc-transfer]</a></td>
<td class="author-text">Sparks, R. and A. Johnston, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-cc-transfer-12.txt">Session Initiation Protocol Call Control - Transfer</a>,&rdquo; draft-ietf-sipping-cc-transfer-12 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-cc-transfer-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sipping-cc-framework">[I-D.ietf-sipping-cc-framework]</a></td>
<td class="author-text">Mahy, R., Sparks, R., Rosenberg, J., Petrie, D., and A. Johnston, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-cc-framework-12.txt">A Call Control and Multi-party usage framework for the Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sipping-cc-framework-12 (work in progress), December&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sipping-cc-framework-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3665">[RFC3665]</a></td>
<td class="author-text">Johnston, A., Donovan, S., Sparks, R., Cunningham, C., and K. Summers, &ldquo;<a href="http://tools.ietf.org/html/rfc3665">Session Initiation Protocol (SIP) Basic Call Flow Examples</a>,&rdquo; BCP&nbsp;75, RFC&nbsp;3665, December&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3665.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3725">[RFC3725]</a></td>
<td class="author-text">Rosenberg, J., Peterson, J., Schulzrinne, H., and G. Camarillo, &ldquo;<a href="http://tools.ietf.org/html/rfc3725">Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)</a>,&rdquo; BCP&nbsp;85, RFC&nbsp;3725, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3725.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-gruu">[I-D.ietf-sip-gruu]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-gruu-15 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4317">[RFC4317]</a></td>
<td class="author-text">Johnston, A. and R. Sparks, &ldquo;<a href="http://tools.ietf.org/html/rfc4317">Session Description Protocol (SDP) Offer/Answer Examples</a>,&rdquo; RFC&nbsp;4317, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4317.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4475">[RFC4475]</a></td>
<td class="author-text">Sparks, R., Hawrylyshen, A., Johnston, A., Rosenberg, J., and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc4475">Session Initiation Protocol (SIP) Torture Test Messages</a>,&rdquo; RFC&nbsp;4475, May&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4475.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Johnston (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">St. Louis, MO  63124</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan@sipstation.com">alan@sipstation.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Robert J. Sparks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Estacado Systems</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:RjS@estacado.net">RjS@estacado.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chris Cunningham</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chrcunni@cisco.com">chrcunni@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Steve Donovan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:srd@cisco.com">srd@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kevin Summers</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Prodea Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Plano, TX  75093</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:kevin.summers@prodeasystems.com">kevin.summers@prodeasystems.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
