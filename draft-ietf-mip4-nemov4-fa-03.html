<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>FA extensions to NEMOv4 Base</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="FA extensions to NEMOv4 Base">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">G. Tsirtsis</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">V. Park</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">V. Narayanan</td></tr>
<tr><td class="header">Expires: October 27, 2008</td><td class="header">Qualcomm</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">K. Leung</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">April 25, 2008</td></tr>
</table></td></tr></table>
<h1><br />FA extensions to NEMOv4 Base<br />draft-ietf-mip4-nemov4-fa-03.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on October 27, 2008.</p>

<h3>Abstract</h3>

<p>The base NEMOv4 specification defines extensions to Mobile IPv4
                for mobile networks. NEMOv4 extensions are defined for use only
                by the mobile node and the home agent. This specification
                introduces extensions for NEMO support on the foreign agent.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Requirements notation<br />
<a href="#anchor2">2.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor3">3.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Background<br />
<a href="#system">4.</a>&nbsp;
Extension Formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.</a>&nbsp;
NEMOv4 Tunneling Extension<br />
<a href="#anchor6">5.</a>&nbsp;
Mobile IP registrations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.1.</a>&nbsp;
Registration Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">5.2.</a>&nbsp;
Registration Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.3.</a>&nbsp;
Home Agent Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.4.</a>&nbsp;
Foreign Agent Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.5.</a>&nbsp;
Mobile Client Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.6.</a>&nbsp;
Disparate Address Space Support <br />
<a href="#anchor13">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor14">7.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Requirements notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
                NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
                "OPTIONAL" in this document are to be interpreted as described
                in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Acknowledgments</h3>

<p>Alexandru Petrescu co-authored with Vidya an older document which
                included some of the mechanisms described herein.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Introduction</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Background</h3>

<p>The base NEMOv4 specification <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>
                    defines extensions to <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344]
                    for mobile networks. NEMOv4 extensions are defined for use
                    only by the mobile node and the home agent so there are no
                    extensions defined for NEMOv4 support by foreign agent.
</p>
<p>
                    <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177] solution defines:
</p>
<p>
                    </p>
<blockquote class="text">
<p> - When the co-located care-of address model is used,
                            traffic to/from the mobile network prefixes can be
                            sent over a bidirectional between the mobile node’s
                            care-of address and the home agent address.
</p>
<p> - When the care-of address model is used, traffic
                            to/from the mobile network prefixes must be sent
                            over a bidirectional between the mobile’s home
                            address and the home agent address. This results in
                            double tunneling since traffic to the mobile’s home
                            address is encapsulated inside the between the
                            mobile node’s care-of address and home agent
                            address.
</p>
</blockquote><p>
                
</p>
<p> Extensions defined in this document allow the mobile node
                    and/or a foreign agent to indicate to the home agent what
                    address should be used for tunneling traffic to the mobile
                    network prefixes during registration. Thus, this
                    specification removes the need for double encapsulation when
                    a foreign agent is used.
</p>
<a name="system"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Extension Formats</h3>

<p>The following extension is defined according to this
                specification.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
NEMOv4 Tunneling Extension</h3>

<p>A new skippable extension to the Mobile IPv4 header in
                    accordance to the short extension format of <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344] is defined here.
</p>
<p>The presence of this extension indicates that the
                        sender supports the NEMOv4 and the selection extensions
                        defined in this specification.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |   Length      |    Sub-Type   |   Reserved    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p>Type
</p>
<p>
                    </p>
<blockquote class="text">
<p>148 Mobile Network Extension <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>
                        
</p>
</blockquote><p>
                
</p>
<p>Length
</p>
<p>
                    </p>
<blockquote class="text">
<p>4
</p>
</blockquote><p>
                
</p>
<p>Sub-Type
</p>
<p>
                    </p>
<blockquote class="text">
<p>TBA by IANA (NEMOv4 Tunneling Extension)
</p>
</blockquote><p>
                
</p>
<p>Reserved
</p>
<p>
                    </p>
<blockquote class="text">
<p>Set to 0 by the sender and ignored by the
                        receiver.
</p>
</blockquote><p>
                
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Mobile IP registrations</h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Registration Requests</h3>

<p>A mobile node that supports <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177] and this specification MAY include exactly
                    one NEMOv4 Tunneling Extension when it uses the co-located
                    care-of address mode.
</p>
<p> When the NEMOv4 Tunneling Extension is used by the mobile
                    node, it MUST be placed after the registration request
                    header and before the mobile – home authentication extension
                    so, it MUST be included in the computation of any
                    authentication extension.
</p>
<p> A foreign agent that supports this specification MAY include
                    a NEMOv4 Tunneling Extension defined in the specification in
                    a registration request when the care-of address mode of
                    operation is used.
</p>
<p> When the NEMOv4 Tunneling Extension is used by a foreign
                    agent it MUST be placed after the mobile – home
                    authentication extensions and before the foreign – home
                    authentication extension so it MUST be included in the
                    computation of the foreign – home authentication extension
                    when one exists.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Registration Reply</h3>

<p>A foreign agent that supports this specification MAY include
                    a NEMOv4 Tunneling Extension defined in the specification in
                    a registration reply message
</p>
<p> When a NEMOv4 Tunneling Extension is used by a home agent it
                    MUST be placed after the registration reply header and
                    before the mobile – home authentication extension so, it
                    must be included in the calculation of any authentication
                    extension.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Home Agent Considerations</h3>

<p>A home agent that supports the extensions in this
                    specification MUST act as in <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177] with the addition to the tunneling mode
                    selection defined below.
</p>
<p> Tunneling mode selection, for mobile network traffic,
                    depends on the following parameters in a valid registration
                    request:
</p>
<p> 1) Registration request is received with one or more Mobile
                    Network Request Extensions <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>. A
                    NEMOv4 Tunneling Extension is NOT included.
</p>
<p>
                    </p>
<blockquote class="text">
<p> All mobile network traffic MUST be tunneled by the
                            home agent to the registered home address of the
                            mobile. The home agent MUST NOT include a NEMOv4
                            Tunneling Extension in the registration reply and it
                            MUST be prepared to accept reverse tunneled packets
                            from the IPv4 home address of the mobile
                            encapsulating packets sent by the mobile node.
</p>
</blockquote><p>
                
</p>
<p> 2) Registration request is received with one or more Mobile
                    Network Request Extensions <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177]. A NEMOv4 Tunneling Extension is included.
</p>
<p>
                    </p>
<blockquote class="text">
<p> All mobile network traffic SHOULD be tunneled by the
                            home agent to the registered care-of address of the
                            mobile. In that case, the home agent SHOULD include
                            the NEMOv4 Tunneling Extension in the registration
                            reply message and it MUST be prepared to accept
                            reverse tunneled packets from the care-of address of
                            the mobile encapsulating packets sent by the mobile
                            network. Alternatively, the home agent MAY ignore
                            the presence of the NEMOv4 Tunneling Extension and
                            act as in case (1) above.
</p>
</blockquote><p>
                
</p>
<p> As defined in <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177], for each
                    mobile network extension included in a valid registration
                    request, a home agent that supports this specification
                    includes a corresponding mobile network acknowledgement
                    extension.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Foreign Agent Considerations</h3>

<p>When a foreign agent receives a registration request with
                        <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177] extensions it has
                    the following options:
</p>
<p>
                    </p>
<blockquote class="text">
<p> Ignore the <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177]
                            extension(s). The registration request is forwarded
                            as is with no NEMOv4 Tunneling Extension to the home
                            agent.
</p>
<p> Attach a NEMOv4 Tunneling Extension to the
                            registration request sent to the home agent.
</p>
</blockquote><p>
                
</p>
<p> If the foreign agent sets the R flag included in the
                    mobility agent advertisement <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344] and a mobile client uses the co-located
                    address model, the foreign agent MUST NOT include a NEMOv4
                    Tunneling Extension in the registration request messages
                    sent from that mobile client.
</p>
<p> When a successful Registration Reply is received the foreign
                    agent MUST act as defined by <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344]. In addition to that and according to this
                    specification the foreign agent SHOULD check for a NEMOv4
                    Tunneling Extension.
</p>
<p>
                    </p>
<blockquote class="text">
<p> If the NEMOv4 Tunneling Extension is included then
                            the foreign agent MUST establish a bidirectional
                            tunnel. The endpoints are the care-of address of the
                            foreign agent and the address of the home agent. In
                            addition to setting up a bi-directional with the
                            home agent, the foreign agent locally establishes
                            forwarding information such that all packets
                            originated by the clients in the mobile network, or
                            originated by the mobile router itself (i.e.,
                            packets with source address any address under the
                            registered prefixes for that mobile router) and
                            destined to any correspondent node whose address is
                            topologically correct outside the mobile network are
                            encapsulated through the bi-directional tunnel. Note
                            that registered prefixes are only the prefixes
                            accepted by Mobile Network Acknowledgement
                            Extensions <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>, with Code field
                            set to “0”, included in the Registration Reply
                            message.
</p>
<p> If the NEMOv4 Tunneling Extension is not included
                            then the foreign agent SHOULD operate as defined in
                                <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344] and <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177].
</p>
</blockquote><p>
                
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Mobile Client Considerations</h3>

<p> A mobile router that supports the NEMOv4 extensions may use
                    these extensions to register its mobile networks as defined
                    in <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>.
</p>
<p> The mobile client MAY include exactly one NEMOv4 Tunneling
                    Extension, if it uses the co-located care-of address model
                    and if it wants to specifically request that packets to the
                    mobile network are tunneled to its co-located care-of
                    address. Note that if the mobile client uses the co-located
                    care-of address model but it does not include the NEMOv4
                    Tunneling Extension, according to <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177], the home agent MAY mobile network
                    packets to the mobile client’s home address.
</p>
<p>
                    <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177] also defines the mobile
                    client processing when a registration reply is received. In
                    addition that what is defined in <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>,
                    the following processing MUST be done by the mobile client
                    according to this specification.
</p>
<p>
                    </p>
<blockquote class="text">
<p>If NEMOv4 Tunneling Extension is not included, the
                            mobile client MUST act as defined by <a class='info' href='#RFC5177'>[RFC5177]<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a>
                        
</p>
<p> If NEMOv4 Tunneling Extension is included then the
                            mobile client MUST act as follows:
</p>
<p>
                            </p>
<blockquote class="text">
<p> If the care-of address mode is used, the
                                    mobile client MUST be prepared to
                                    send/receive traffic from/to the mobile
                                    network on its interface natively, unless
                                    reverse has been negotiated in which case
                                    all traffic MUST be reverse tunneled
                                    according to <a class='info' href='#RFC3024'>REVTUN<span> (</span><span class='info'>Montenegro, G., &ldquo;Reverse Tunneling for Mobile IP, revised,&rdquo; January&nbsp;2001.</span><span>)</span></a> [RFC3024].
</p>
<p> If the co-located care-of address mode is
                                    used, the mobile client MUST be prepared to
                                    send/receive packets from/to the mobile
                                    network over the bidirectional tunnel
                                    between the home agent address and its
                                    co-located care-of address.
</p>
</blockquote>
                        

</blockquote><p>
                
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Disparate Address Space Support </h3>

<p>
                    <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344] assumes that all the
                    entities involved have addresses within the same globally
                    unique space. In many deployment scenarios this is not the
                    case, either because of the use of private address space or
                    because of the use of public address space that is only
                    advertised in not advertised globally. The analysis and
                    suggestions on how to deal with such deployments included in
                    Appendix A of <a class='info' href='#RFC3024'>REVTUN<span> (</span><span class='info'>Montenegro, G., &ldquo;Reverse Tunneling for Mobile IP, revised,&rdquo; January&nbsp;2001.</span><span>)</span></a> [RFC3024]] apply in
                    this specification if the prefixes that a mobile node
                    successfully registers according to <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177] and this specification are treated in the
                    same way <a class='info' href='#RFC3024'>REVTUN<span> (</span><span class='info'>Montenegro, G., &ldquo;Reverse Tunneling for Mobile IP, revised,&rdquo; January&nbsp;2001.</span><span>)</span></a> [RFC3024] treats the
                    home address of the mobile node.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>This specification operates in the security constraints and
                requirements of <a class='info' href='#RFC3344'>MIPv4<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> [RFC3344] and <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177].
</p>
<p> A foreign agent that supports this specification SHOULD perform
                ingress filtering on all the packets received from the mobile
                router prior to reverse tunneling them to the Home Agent. The
                foreign agent SHOULD drop any packets that do not have a source
                address belonging to one of the registered prefixes. For traffic
                coming from the home agent and if the foreign agent has included
                a NEMOv4 Tunneling Extension in the registration request, the
                foreign agent MUST be prepared to accept encapsulated packets to
                the home address of a registered mobile router as well as to any
                address belonging to any of the registered prefixes for the same
                mobile router.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This document has the following action for IANA.
</p>
<p>A new value needs to be allocated for the NEMOv4 Tunneling
                Extension defined in this document, from the number space of the
                Sub-Type for Mobile Network Extensions defined in <a class='info' href='#RFC5177'>NEMOv4<span> (</span><span class='info'>Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;Network Mobility (NEMO) Extensions for Mobile IPv4,&rdquo; April&nbsp;2008.</span><span>)</span></a> [RFC5177]. 
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3024">[RFC3024]</a></td>
<td class="author-text">Montenegro, G., &ldquo;<a href="http://tools.ietf.org/html/rfc3024">Reverse Tunneling for Mobile IP, revised</a>,&rdquo; RFC&nbsp;3024, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3024.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3344">[RFC3344]</a></td>
<td class="author-text">Perkins, C., &ldquo;<a href="http://tools.ietf.org/html/rfc3344">IP Mobility Support for IPv4</a>,&rdquo; RFC&nbsp;3344, August&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3344.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5177">[RFC5177]</a></td>
<td class="author-text">Leung, K., Dommety, G., Narayanan, V., and A. Petrescu, &ldquo;<a href="http://tools.ietf.org/html/rfc5177">Network Mobility (NEMO) Extensions for Mobile IPv4</a>,&rdquo; RFC&nbsp;5177, April&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5177.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">George Tsirtsis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Qualcomm</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+908-443-8174</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tsirtsis@googlemail.com">tsirtsis@googlemail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vincent Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Qualcomm</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+908-947-7084</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vpark@qualcomm.com">vpark@qualcomm.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vidya Narayana</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Qualcomm</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+858-845-2483</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vidyan@qualcomm.com">vidyan@qualcomm.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kent Leung</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+408-526-5030</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:kleung@cisco.com">kleung@cisco.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
