

Audio Video Transport WG                                          Q. Xie
Internet-Draft                                                 D. Pearce
Expires: June 11, 2003                                          Motorola
                                                       December 11, 2002


       RTP Payload Format for ETSI ES 202 050 Distributed  Speech
                          Recognition Encoding
                   draft-xie-avt-dsr-es202050-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 11, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   This document specifies an RTP payload format for encapsulating ETSI
   Standard ES 202 050 advanced front-end signal processing feature
   streams for distributed speech recognition (DSR) systems.










Xie & Pearce             Expires June 11, 2003                  [Page 1]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


Table of Contents

   1.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.1 ETSI ES 202 050 DSR Front-end Codec  . . . . . . . . . . . . .  3
   3.  ES 202 050 DSR RTP Payload Format  . . . . . . . . . . . . . .  4
   3.1 Consideration on Number of FPs in Each RTP Packet  . . . . . .  5
   3.2 Support for Discontinuous Transmission . . . . . . . . . . . .  5
   4.  Frame Pair Formats . . . . . . . . . . . . . . . . . . . . . .  5
   4.1 Format of Speech and Non-speech FPs  . . . . . . . . . . . . .  5
   4.2 Format of Null FP  . . . . . . . . . . . . . . . . . . . . . .  7
   4.3 RTP header usage . . . . . . . . . . . . . . . . . . . . . . .  7
   5.  DSR MIME Type Registration . . . . . . . . . . . . . . . . . .  8
   5.1 Mapping MIME Parameters into SDP . . . . . . . . . . . . . . .  9
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   7.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 10
       Normative References . . . . . . . . . . . . . . . . . . . . . 10
       Informative References . . . . . . . . . . . . . . . . . . . . 10
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 11
       Full Copyright Statement . . . . . . . . . . . . . . . . . . . 12































Xie & Pearce             Expires June 11, 2003                  [Page 2]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


1. Conventions

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, NOT RECOMMENDED, MAY, and OPTIONAL, when
   they appear in this document, are to be interpreted as described in
   [4].

   The following acronyms are used in this document:

      DSR  - Distributed Speech Recognition
      ETSI - the European Telecommunications Standards Institute
      FP   - Frame Pair
      DTX  - Discontinuous Transmission


2. Introduction

   Distributed speech recognition (DSR) technology is intended for a
   remote device acting as a thin client, also known as the front-end,
   to communicate with a speech recognition server, also called a speech
   engine, over a network connection to obtain speech recognition
   services.  More details on DSR over Internet can be found in [7].

   To achieve interoperability with different client devices and speech
   engines, the first ETSI standard DSR front-end ES 201 108 was
   published in early 2000 [8], and an RTP packetization for ES 210 108
   frames is defined in [7] in IETF.

   In ES 202 050 [1], ETSI issues another standard for an Advanced DSR
   front-end that is meant to provide substantially improved recognition
   performance in background noise.  The codecs in ES 202 050 uses a
   different frame format from that of ES 201 108 and the two do not
   inter-operate with each other.  Thus, this document defines a
   separate RTP packetization for ES 202 050 front-end.

2.1 ETSI ES 202 050 DSR Front-end Codec

   Some relevant characteristics of ES 202 050 DSR front-end codec are
   summarized below.

   The coding algorithm, a standard mel-cepstral technique common to
   many speech recognition systems, supports three raw sampling rates: 8
   kHz, 11 kHz, and 16 kHz.  The mel-cepstral calculation is a frame-
   based scheme that produces an output vector every 10 ms.

   After calculation of the mel-cepstral representation, the
   representation is first quantized via split-vector quantization to
   reduce the data rate of the encoded stream.  Then, the quantized



Xie & Pearce             Expires June 11, 2003                  [Page 3]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


   vectors from two consecutive frames are put into an FP, as described
   in more detail in Section 4.1.

3. ES 202 050 DSR RTP Payload Format

   An ES 202 050 DSR RTP payload datagram consists of a standard RTP
   header [2] followed by a DSR payload.  The DSR payload itself is
   formed by concatenating a series of ES 202 050 DSR FPs (defined in
   Section 4).

   FPs are always packed bit-contiguously into the payload octets
   beginning with the most significant bit.  For ES 202 050 front-end,
   the size of each FP is 96 bits or 12 octets (see Sections 4.1 and
   4.2).  This ensures that a DSR payload will always end on an octet
   boundary.

   The following example shows a DSR RTP datagram carrying a DSR payload
   containing three 96-bit-long FPs (bit 0 is the MSB):

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      \                                                               \
      /                    RTP header in [RFC1889]                    /
      \                                                               \
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |                                                               |
      +                                                               +
      |                         FP #1 (96 bits)                       |
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +                                                               +
      |                         FP #2 (96 bits)                       |
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +                                                               +
      |                         FP #3 (96 bits)                       |
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+







Xie & Pearce             Expires June 11, 2003                  [Page 4]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


3.1 Consideration on Number of FPs in Each RTP Packet

   The number of FPs per payload packet should be determined by the
   latency and bandwidth requirements of the DSR application using this
   payload format.  In particular, using a smaller number of FPs per
   payload packet in a session will result in lowered bandwidth
   efficiency due to the RTP/UDP/IP header overhead, while using a
   larger number of FPs per packet will cause longer end-to-end delay
   and hence increased recognition latency.  Furthermore, carrying a
   larger number of FPs per packet will increase the possibility of
   catastrophic packet loss; the loss of a large number of consecutive
   FPs is a situation most speech recognizers have difficulty dealing
   with.

   It is therefore RECOMMENDED that the number of FPs per DSR payload
   packet be minimized, subject to meeting the application's
   requirements on network bandwidth efficiency.  RTP header compression
   techniques, such as those defined in [9] and [10], should be
   considered to improve network bandwidth efficiency.

3.2 Support for Discontinuous Transmission

   The DSR RTP payloads may be used to support discontinuous
   transmission (DTX) of speech, which allows that DSR FPs are sent only
   when speech has been detected at the terminal equipment.

   In DTX a set of DSR frames coding an unbroken speech segment
   transmitted from the terminal to the server is called a transmission
   segment.  A DSR frame inside such a transmission segment can be
   either a speech frame or a non-speech frame, depending on the nature
   of the section of the speech signal it represents.

   The end of a transmission segment is determined at the sending end
   equipment when the number of consecutive non-speech frames exceeds a
   pre-set threshold, called the hangover time.  A typical value used
   for the hangover time is 1.5 seconds.

   After all FPs in a transmission segment are sent, the front-end
   SHOULD indicate the end of the current transmission segment by
   sending one or more Null FPs (defined in Section 4.2).

4. Frame Pair Formats

4.1 Format of Speech and Non-speech FPs

   Similar to the frame pairing format defined in Section 7.2.4 in [1],
   pairs of the quantized 10ms mel-cepstral front-end frames, of 44 bits
   each, MUST be grouped together and protected with a 4-bit CRC.



Xie & Pearce             Expires June 11, 2003                  [Page 5]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


   Together, these two front-end frames and the CRC field form a 92-bit
   long Frame-pair (FP):

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Frame #1  (44 bits)                      |
      +                       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       |          Frame #2 (44 bits)           |
      +-+-+-+-+-+-+-+-+-+-+-+-+                       +-+-+-+-+-+-+-+-+
      |                                               | CRC   |0|0|0|0|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Therefore, each FP represents 20ms of original speech.  Note, as
   shown above, each FP MUST be padded with 4 zeros to the LSB 4 bits of
   the last octet in order to make the FP aligned to the 32-bit word
   boundary.  This makes the total size of an FP 96 bits, or 12 octets.
   Note, this padding is separate from padding indicated by the P bit in
   the RTP header.

   The 4-bit CRC MUST be calculated using the formula defined in 7.2.4
   in [1].

   To be consistent with the bit-order used in [1], the following mel-
   cepstral frame formats MUST be used when forming an FP:

     Frame #1 in FP:
     ===============
         (MSB)                                     (LSB)
           0     1     2     3     4     5     6     7
        +-----+-----+-----+-----+-----+-----+-----+-----+
        :  idx(2,3) |            idx(0,1)               |    Octet 1
        +-----+-----+-----+-----+-----+-----+-----+-----+
        :       idx(4,5)        |     idx(2,3) (cont)   :    Octet 2
        +-----+-----+-----+-----+-----+-----+-----+-----+
        |             idx(6,7)              |idx(4,5)(cont)  Octet 3
        +-----+-----+-----+-----+-----+-----+-----+-----+
    idx(10,11)| VAD |              idx(8,9)             |    Octet 4
        +-----+-----+-----+-----+-----+-----+-----+-----+
        :       idx(12,13)      |   idx(10,11) (cont)   :    Octet 5
        +-----+-----+-----+-----+-----+-----+-----+-----+
                                |   idx(12,13) (cont)   :    Octet 6/1
                                +-----+-----+-----+-----+








Xie & Pearce             Expires June 11, 2003                  [Page 6]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


     Frame #2 in FP:
     ===============
         (MSB)                                     (LSB)
           0     1     2     3     4     5     6     7
        +-----+-----+-----+-----+
        :        idx(0,1)       |                            Octet 6/2
        +-----+-----+-----+-----+-----+-----+-----+-----+
        |              idx(2,3)             |idx(0,1)(cont)  Octet 7
        +-----+-----+-----+-----+-----+-----+-----+-----+
        :  idx(6,7) |              idx(4,5)             |    Octet 8
        +-----+-----+-----+-----+-----+-----+-----+-----+
        :        idx(8,9)       |      idx(6,7) (cont)  :    Octet 9
        +-----+-----+-----+-----+-----+-----+-----+-----+
        |          idx(10,11)         | VAD |idx(8,9)(cont)  Octet 10
        +-----+-----+-----+-----+-----+-----+-----+-----+
        |                   idx(12,13)                  |    Octet 11
        +-----+-----+-----+-----+-----+-----+-----+-----+

   The usage of the index fields and 'VAD' flag are defined in [1] and
   their value is only set and examined by the codecs in the front-end
   client and the recognizer.

4.2 Format of Null FP

   A Null FP for the ES 202 050 front-end codec is defined by setting
   the content of the first and second frame in the FP to null (i.e.,
   filling the first 88 bits of the FP with 0's).  The 4-bit CRC MUST be
   calculated the same way as described in 6.2.4 in [1], and 4 zeros
   MUST be padded to the end of the Null FP to made it 32-bit word
   aligned.

4.3 RTP header usage

   The format of the RTP header is specified in [2].  This payload
   format uses the fields of the header in a manner consistent with that
   specification.

   The RTP timestamp corresponds to the sampling instant of the first
   sample encoded for the first FP in the packet.  The timestamp clock
   frequency is the same as the sampling frequency, so the timestamp
   unit is in samples.

   As defined by ES 202 050 front-end codec, the duration of one FP is
   20 ms, corresponding to 160, 220, or 320 encoded samples with
   sampling rate of 8, 11, or 16 kHz being used at the front-end,
   respectively.  Thus, the timestamp is increased by 160, 220, or 320
   for each consecutive FP, respectively.




Xie & Pearce             Expires June 11, 2003                  [Page 7]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


   The DSR payload for ES 202 050 front-end codes is always an integral
   number of octets.  If additional padding is required for some other
   purpose, then the P bit in the RTP in the header may be set and
   padding appended as specified in [2].

   The RTP header marker bit (M) should be set following the general
   rules defined in [6].

   The assignment of an RTP payload type for this new packet format is
   outside the scope of this document, and will not be specified here.
   It is expected that the RTP profile under which this payload format
   is being used will assign a payload type for this encoding or specify
   that the payload type is to be bound dynamically.

5. DSR MIME Type Registration

   Media Type name: audio

   Media subtype name: dsr-es202050

   Required parameters: none

   Optional parameters for RTP mode:

      rate: Indicates the sample rate of the speech.  Valid values
         include: 8000, 11000, and 16000.  If this parameter is not
         present, 8000 sample rate is assumed.

      maxptime: The maximum amount of media which can be encapsulated in
         each packet, expressed as time in milliseconds.  The time shall
         be calculated as the sum of the time the media present in the
         packet represents.  The time SHOULD be a multiple of the frame
         pair size (i.e., one FP == 20ms).

         If this parameter is not present, maxptime is assumed to be
         80ms.

         Note, since the performance of most speech recognizers are
         extremely sensitive to consecutive FP losses, if the user of
         the payload format expects a high packet loss ratio for the
         session, it MAY consider to explicitly choose a maxptime value
         for the session that is shorter than the default value.

      ptime: see RFC2327 [5].

   Encoding considerations: This type is defined for transfer via RTP
      [2] as described in Sections 3 and 4 of RFC XXXX.




Xie & Pearce             Expires June 11, 2003                  [Page 8]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


   Security considerations: See Section 6 of RFC XXXX.

   Person & email address to contact for further information:
      Qiaobing.Xie@motorola.com

   Intended usage: COMMON.  It is expected that many VoIP applications
      (as well as mobile applications) will use this type.

   Author/Change controller:

      *  Qiaobing.Xie@motorola.com

      *  IETF Audio/Video transport working group


5.1 Mapping MIME Parameters into SDP

   The information carried in the MIME media type specification has a
   specific mapping to fields in the Session Description Protocol (SDP)
   [5], which is commonly used to describe RTP sessions.  When SDP is
   used to specify sessions employing ES 201 018 DSR codec, the mapping
   is as follows:

   o  The MIME type ("audio") goes in SDP "m=" as the media name.

   o  The MIME subtype ("dsr-es202050") goes in SDP "a=rtpmap" as the
      encoding name.

   o  The optional parameter "rate" also goes in "a=rtpmap" as clock
      rate.

   o  The optional parameters "ptime" and "maxptime" go in the SDP
      "a=ptime" and "a=maxptime" attributes, respectively.

   Example of usage of ES 202 050 DSR:

     m=audio 49120 RTP/AVP 101
     a=rtpmap:101 dsr-es202050/8000
     a=maxptime:40


6. Security Considerations

   Implementations using the payload defined in this specification are
   subject to the security considerations discussed in the RTP
   specification [2] and the RTP profile [6].  This payload does not
   specify any different security services.




Xie & Pearce             Expires June 11, 2003                  [Page 9]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


7. Acknowledgments

   The design presented here is based on that of [7].

Normative References

   [1]  European Telecommunications Standards Institute (ETSI) Standard
        ES 202 050, "Speech Processing, Transmission and Quality Aspects
        (STQ); Distributed Speech Recognition; Front-end Feature
        Extraction Algorithm; Compression Algorithms", Ver. 1.1.1
        (http://pda.etsi.org/pda/home.asp?wki_id=6402), October 2002.

   [2]  Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
        "RTP: A Transport Protocol for Real-Time Applications", RFC
        1889, January 1996.

   [3]  Bradner, S., "The Internet Standards Process -- Revision 3", BCP
        9, RFC 2026, October 1996.

   [4]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [5]  Handley, M. and V. Jacobson, "SDP: Session Description
        Protocol", RFC 2327, April 1998.

   [6]  Schulzrinne, H. and S. Casner, "RTP Profile for Audio and Video
        Conferences with Minimal Control", draft-ietf-avt-profile-new-
        12.txt (work in progress), November 2001.

Informative References

   [7]   Xie, Q., "RTP Payload Format for ETSI ES 201 108 Distributed
         Speech Recognition Encoding", draft-ietf-avt-dsr-04 (work in
         progress), October 2002.

   [8]   European Telecommunications Standards Institute (ETSI) Standard
         ES 201 108, "Speech Processing, Transmission and Quality
         Aspects (STQ); Distributed Speech Recognition; Front-end
         Feature Extraction Algorithm; Compression Algorithms", Ver.
         1.1.2, http://webapp.etsi.org/pda/home.asp?wki_id=9948, April
         2000.

   [9]   Casner, S. and V. Jacobson, "Compressing IP/UDP/RTP Headers for
         Low-Speed Serial Links", RFC 2508, February 1999.

   [10]  Bormann, C., Burmeister, C., Degermark, M., Fukushima, H.,
         Hannu, H., Jonsson, L-E., Hakenberg, R., Koren, T., Le, K.,
         Liu, Z., Martensson, A., Miyazaki, A., Svanbro, K., Wiebke, T.,



Xie & Pearce             Expires June 11, 2003                 [Page 10]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


         Yoshimura, T. and H. Zheng, "RObust Header Compression (ROHC):
         Framework and four profiles: RTP, UDP, ESP, and uncompressed",
         RFC 3095, July 2001.


Authors' Addresses

   Qiaobing Xie
   Motorola, Inc.
   1501 W. Shure Drive, 2-F9
   Arlington Heights, IL  60004
   US

   Phone: +1-847-632-3028
   EMail: qxie1@email.mot.com


   David Pearce
   Motorola Labs
   UK Research Laboratory
   Jays Close
   Viables Industrial Estate
   Basingstoke, HANTS  RG22 4PD
   UK

   Phone: +44 (0)1256 484 436
   EMail: bdp003@motorola.com
























Xie & Pearce             Expires June 11, 2003                 [Page 11]

Internet-Draft    RTP Payload Format for ES202050 DSR      December 2002


Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Xie & Pearce             Expires June 11, 2003                 [Page 12]

