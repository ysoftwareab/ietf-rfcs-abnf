



PCE Working Group                                                  Z. Li
Internet-Draft                                                   S. Peng
Intended status: Standards Track                                 X. Geng
Expires: 28 February 2022                            Huawei Technologies
                                                                 M. Negi
                                                             RtBrick Inc
                                                          27 August 2021


 Path Computation Element Communication Protocol (PCEP) Procedures and
 Extensions for Using the PCE as a Central Controller (PCECC) for SRv6
                    SID Allocation and Distribution.
         draft-dhody-pce-pcep-extension-pce-controller-srv6-07

Abstract

   The Path Computation Element (PCE) is a core component of Software-
   Defined Networking (SDN) systems.

   A PCE-based Central Controller (PCECC) can simplify the processing of
   a distributed control plane by blending it with elements of SDN and
   without necessarily completely replacing it.  This document specifies
   the procedures and PCEP extensions when a PCE-based controller is
   also responsible for configuring the forwarding actions on the
   routers, in addition to computing the paths for packet flows in the
   for Segment Routing (SR) in IPv6 (SRv6) network and telling the edge
   routers what instructions to attach to packets as they enter the
   network.  PCECC is further enhanced for SRv6 SID (Segment Identifier)
   allocation and distribution.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 28 February 2022.





Li, et al.              Expires 28 February 2022                [Page 1]

Internet-Draft                 PCECC-SRv6                    August 2021


Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Simplified BSD License text
   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   5
     2.1.  Requirements Language . . . . . . . . . . . . . . . . . .   5
   3.  PCECC SRv6  . . . . . . . . . . . . . . . . . . . . . . . . .   5
   4.  PCEP Requirements . . . . . . . . . . . . . . . . . . . . . .   6
   5.  Procedures for Using the PCE as a Central Controller (PCECC) in
           SRv6  . . . . . . . . . . . . . . . . . . . . . . . . . .   6
     5.1.  Stateful PCE Model  . . . . . . . . . . . . . . . . . . .   6
     5.2.  New Functions . . . . . . . . . . . . . . . . . . . . . .   6
     5.3.  PCECC Capability Advertisement  . . . . . . . . . . . . .   7
     5.4.  PCEP session IP address and TED Router ID . . . . . . . .   7
     5.5.  SRv6 Path Operations  . . . . . . . . . . . . . . . . . .   7
       5.5.1.  PCECC Segment Routing in IPv6 (SRv6)  . . . . . . . .   8
         5.5.1.1.  PCECC SRv6 Node/Prefix SID allocation . . . . . .   8
         5.5.1.2.  PCECC SRv6 Adjacency SID allocation . . . . . . .   9
         5.5.1.3.  Redundant PCEs  . . . . . . . . . . . . . . . . .   9
         5.5.1.4.  Re-Delegation and Cleanup . . . . . . . . . . . .   9
         5.5.1.5.  Synchronization of SRv6 SID Allocations . . . . .   9
   6.  PCEP Messages . . . . . . . . . . . . . . . . . . . . . . . .   9
   7.  PCEP Objects  . . . . . . . . . . . . . . . . . . . . . . . .  10
     7.1.  OPEN Object . . . . . . . . . . . . . . . . . . . . . . .  10
       7.1.1.  PCECC Capability sub-TLV  . . . . . . . . . . . . . .  10
     7.2.  SRv6 Path Setup . . . . . . . . . . . . . . . . . . . . .  10
     7.3.  CCI Object  . . . . . . . . . . . . . . . . . . . . . . .  10
     7.4.  FEC Object  . . . . . . . . . . . . . . . . . . . . . . .  11
   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  12
   9.  Manageability Considerations  . . . . . . . . . . . . . . . .  12
     9.1.  Control of Function and Policy  . . . . . . . . . . . . .  12
     9.2.  Information and Data Models . . . . . . . . . . . . . . .  12
     9.3.  Liveness Detection and Monitoring . . . . . . . . . . . .  12
     9.4.  Verify Correct Operations . . . . . . . . . . . . . . . .  13
     9.5.  Requirements On Other Protocols . . . . . . . . . . . . .  13



Li, et al.              Expires 28 February 2022                [Page 2]

Internet-Draft                 PCECC-SRv6                    August 2021


     9.6.  Impact On Network Operations  . . . . . . . . . . . . . .  13
   10. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  13
     10.1.  PCECC-CAPABILITY sub-TLV . . . . . . . . . . . . . . . .  13
     10.2.  PCEP Object  . . . . . . . . . . . . . . . . . . . . . .  13
     10.3.  PCEP-Error Object  . . . . . . . . . . . . . . . . . . .  14
   11. Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .  14
   12. References  . . . . . . . . . . . . . . . . . . . . . . . . .  14
     12.1.  Normative References . . . . . . . . . . . . . . . . . .  14
     12.2.  Informative References . . . . . . . . . . . . . . . . .  15
   Appendix A.  Contributor Addresses  . . . . . . . . . . . . . . .  18
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  18

1.  Introduction

   The Path Computation Element (PCE) [RFC4655] was developed to offload
   the path computation function from routers in an MPLS traffic-
   engineered (TE) network.  It can compute optimal paths for traffic
   across a network and can also update the paths to reflect changes in
   the network or traffic demands.  Since then, the role and function of
   the PCE have grown to cover a number of other uses (such as GMPLS
   [RFC7025]) and to allow delegated control [RFC8231] and PCE-initiated
   use of network resources [RFC8281].

   According to [RFC7399], Software-Defined Networking (SDN) refers to a
   separation between the control elements and the forwarding components
   so that software running in a centralized system, called a
   controller, can act to program the devices in the network to behave
   in specific ways.  A required element in an SDN architecture is a
   component that plans how the network resources will be used and how
   the devices will be programmed.  It is possible to view this
   component as performing specific computations to place traffic flows
   within the network given knowledge of the availability of network
   resources, how other forwarding devices are programmed, and the way
   that other flows are routed.  This is the function and purpose of a
   PCE, and the way that a PCE integrates into a wider network control
   system (including an SDN system) is presented in [RFC7491].

   In early PCE implementations, where the PCE was used to derive paths
   for MPLS Label Switched Paths (LSPs), paths were requested by network
   elements (known as Path Computation Clients (PCCs)), and the results
   of the path computations were supplied to network elements using the
   Path Computation Element Communication Protocol (PCEP) [RFC5440].
   This protocol was later extended to allow a PCE to send unsolicited
   requests to the network for LSP establishment [RFC8281].

   [RFC8283] introduces the architecture for PCE as a central controller
   as an extension of the architecture described in [RFC4655] and
   assumes the continued use of PCEP as the protocol used between PCE



Li, et al.              Expires 28 February 2022                [Page 3]

Internet-Draft                 PCECC-SRv6                    August 2021


   and PCC.  [RFC8283] further examines the motivations and
   applicability for PCEP as a Southbound Interface (SBI), and
   introduces the implications for the protocol.
   [I-D.ietf-teas-pcecc-use-cases] describes the use cases for the PCECC
   architecture.

   [RFC9050] specify the procedures and PCEP extensions for using the
   PCE as the central controller for static LSPs, where LSPs can be
   provisioned as explicit label instructions at each hop on the end-to-
   end path.

   Segment Routing (SR) technology leverages the source routing and
   tunneling paradigms.  A source node can choose a path without relying
   on hop-by-hop signaling protocols such as LDP or RSVP-TE.  Each path
   is specified as a set of "segments" advertised by link-state routing
   protocols (IS-IS or OSPF).  [RFC8402] provides an introduction to SR
   architecture.  The corresponding IS-IS and OSPF extensions are
   specified in [RFC8667] and [RFC8665] , respectively.  It relies on a
   series of forwarding instructions being placed in the header of a
   packet.  The list of segments forming the path is called the Segment
   List and is encoded in the packet header.  Segment Routing can be
   applied to the IPv6 architecture with the Segment Routing Header
   (SRH) [RFC8754].  A segment is encoded as an IPv6 address.  An
   ordered list of segments is encoded as an ordered list of IPv6
   addresses in the routing header.  The active segment is indicated by
   the Destination Address of the packet.  Upon completion of a segment,
   a pointer in the new routing header is incremented and indicates the
   next segment.  The segment routing architecture supports operations
   that can be used to steer packet flows in a network, thus providing a
   form of traffic engineering.  [RFC8664] and
   [I-D.ietf-pce-segment-routing-ipv6] specify the SR specific PCEP
   extensions.

   PCECC may further use PCEP for SR SID (Segment Identifier) allocation
   and distribution to all the SR nodes with some benefits.  The SR
   nodes continue to rely on IGP for distributed computation (nexthop
   selection, protection etc) where PCE (and PCEP) does only the
   allocation and distribution of SRv6 SIDs in the network.  Note that
   the topology at PCE is still learned via existing mechanisms.

   [I-D.ietf-pce-pcep-extension-pce-controller-sr] specifies the
   procedures and PCEP extensions when a PCE-based controller is also
   responsible for configuring the forwarding actions on the routers
   (SR-MPLS SID distribution), in addition to computing the paths for
   packet flows in a segment routing network and telling the edge
   routers what instructions to attach to packets as they enter the
   network.  This document extends this to include SRv6 SID distribution
   as well.



Li, et al.              Expires 28 February 2022                [Page 4]

Internet-Draft                 PCECC-SRv6                    August 2021


2.  Terminology

   Terminologies used in this document is the same as described in the
   document [RFC8283].

2.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  PCECC SRv6

   [RFC8664] specifies extensions to PCEP that allow a stateful PCE to
   compute, update, or initiate SR-TE paths for MPLS dataplane.  An
   ingress node of an SR-TE path appends all outgoing packets with a
   list of MPLS labels (SIDs).  This is encoded in SR-ERO subobject,
   capable of carrying a label (SID) as well as the identity of the
   node/adjacency label (SID).  [I-D.ietf-pce-segment-routing-ipv6]
   extends the procedure to include support for SRv6 paths.

   As per [RFC8754], an SRv6 Segment is a 128-bit value.  "SRv6 SID" or
   simply "SID" are often used as a shorter reference for "SRv6
   Segment".  Further details are in an illustration provided in
   [RFC8986].  The SR is applied to IPV6 data plane using SRH.  An SR
   path can be derived from an IGP Shortest Path Tree (SPT), but SR-TE
   paths may not follow IGP SPT.  Such paths may be chosen by a suitable
   network planning tool, or a PCE and provisioned on the ingress node.
   [I-D.ietf-pce-segment-routing-ipv6] specify the SRv6-ERO subobject
   capable of carrying an SRv6 SID as well as the identity of the node/
   adjacency represented by the SID.

   [RFC8283] examines the motivations and applicability for PCECC and
   use of PCEP as an SBI.  Section 3.1.5. of [RFC8283] highlights the
   use of PCECC for configuring the forwarding actions on the routers
   and assume responsibility for managing the identifier space.  It
   simplifies the processing of a distributed control plane by blending
   it with elements of SDN and without necessarily completely replacing
   it.  This allows the operator to introduce the advantages of SDN
   (such as programmability) into the network.  Further Section 3.3. of
   [I-D.ietf-teas-pcecc-use-cases] describes some of the scenarios where
   the PCECC technique could be useful.  Section 4 of [RFC8283] also
   describe the implications on the protocol when used as an SDN SBI.
   The operator needs to evaluate the advantages offered by PCECC
   against the operational and scalability needs of the PCECC.




Li, et al.              Expires 28 February 2022                [Page 5]

Internet-Draft                 PCECC-SRv6                    August 2021


   As per [RFC8283], PCECC can allocate and provision the node/prefix/
   adjacency label (SID) via PCEP.  As per
   [I-D.ietf-teas-pcecc-use-cases] this is also applicable to SRv6 SIDs.

   The rest of the processing is similar to existing stateful PCE for
   SRv6 [I-D.ietf-pce-segment-routing-ipv6].

4.  PCEP Requirements

   Following key requirements for PCECC-SRv6 should be considered when
   designing the PCECC-based solution:

   *  A PCEP speaker supporting this document needs to have the
      capability to advertise its PCECC-SRv6 capability to its peers.

   *  PCEP procedures need to allow for PCC-based SRv6 SID allocations.

   *  PCEP procedures need to provide a means to update (or clean up)
      the SRv6 SID to the PCC.

   *  PCEP procedures need to provide a means to synchronize the SRv6
      SID allocations between the PCE to the PCC in the PCEP messages.

5.  Procedures for Using the PCE as a Central Controller (PCECC) in SRv6

5.1.  Stateful PCE Model

   Active stateful PCE is described in [RFC8231].  A PCE as a Central
   Controller (PCECC) reuses the existing active stateful PCE mechanism
   as much as possible to control the LSPs.

5.2.  New Functions

   This document uses the same PCEP messages and its extensions which
   are described in [RFC9050] and
   [I-D.ietf-pce-pcep-extension-pce-controller-sr] for PCECC-SRv6 as
   well.

   The PCEP messages PCRpt, PCInitiate, PCUpd are used to send LSP
   Reports, LSP setup, and LSP update respectively.  The extended
   PCInitiate message described in [RFC9050] is used to download or
   clean up CCIs (a new CCI Object-Type=TBD3 for SRv6 SID).  The
   extended PCRpt message described in [RFC9050] is also used to report
   the CCIs (SRv6 SIDs) from PCC to PCE.







Li, et al.              Expires 28 February 2022                [Page 6]

Internet-Draft                 PCECC-SRv6                    August 2021


   [RFC9050] specify an object called CCI for the encoding of the
   central controller's instructions.
   [I-D.ietf-pce-pcep-extension-pce-controller-sr] defined a CCI object-
   type for SR-MPLS.  This document further defines a new CCI object-
   type=TBD3 for SRv6.

5.3.  PCECC Capability Advertisement

   During the PCEP initialization phase, PCEP speakers (PCE or PCC)
   advertise their support of and willingness to use PCEP extensions for
   the PCECC.  A PCEP speaker includes the PCECC-CAPABILITY sub-TLV in
   the PATH-SETUP-TYPE-CAPABILITY TLV as per [RFC9050].

   A new S bit is added in the PCECC-CAPABILITY sub-TLV to indicate
   support for PCECC-SR-MPLS in
   [I-D.ietf-pce-pcep-extension-pce-controller-sr].  This document adds
   another I bit to indicate support for SR in IPv6.  A PCC MUST set the
   I bit in the PCECC-CAPABILITY sub-TLV and include the SRv6-PCE-
   CAPABILITY sub-TLV ([I-D.ietf-pce-segment-routing-ipv6]) in the OPEN
   object (inside the PATH-SETUP-TYPE-CAPABILITY TLV) to support the
   PCECC SRv6 extensions defined in this document.

   If the I bit is set in PCECC-CAPABILITY sub-TLV and the SRv6-PCE-
   CAPABILITY sub-TLV is not advertised, or is advertised without the I
   bit set, in the OPEN object, the receiver MUST:

   *  send a PCErr message with Error-Type=19 (Invalid Operation) and
      Error-value=TBD4 (SRv6 capability was not advertised) and

   *  terminate the session.

   The rest of the processing is as per [RFC9050] and
   [I-D.ietf-pce-pcep-extension-pce-controller-sr].

5.4.  PCEP session IP address and TED Router ID

   As described in [I-D.ietf-pce-pcep-extension-pce-controller-sr], it
   is important to link the session IP address with the Router ID in TED
   for successful PCECC-SRv6 operations.

5.5.  SRv6 Path Operations

   [RFC8664] specify the PCEP extension to allow a stateful PCE to
   compute and initiate SR-TE paths, as well as a PCC to request a path
   subject to certain constraint(s) and optimization criteria in SR
   networks.  [I-D.ietf-pce-segment-routing-ipv6] extends it to support
   SRv6.




Li, et al.              Expires 28 February 2022                [Page 7]

Internet-Draft                 PCECC-SRv6                    August 2021


   The Path Setup Type for SRv6 (PST=TBD) is used on the PCEP session
   with the Ingress as per [I-D.ietf-pce-segment-routing-ipv6].

5.5.1.  PCECC Segment Routing in IPv6 (SRv6)

   Segment Routing (SR) as described in [RFC8402] depends on "segments"
   that are advertised by Interior Gateway Protocols (IGPs).  The SR-
   node allocates and advertises the SID (node, adj, etc) and floods
   them via the IGP.  This document proposes a new mechanism where PCE
   allocates the SRv6 SID centrally and uses PCEP to distribute them to
   all nodes.  In some deployments, PCE (and PCEP) are better suited
   than IGP because of the centralized nature of PCE and direct TCP
   based PCEP sessions to the node.  Note that only the SRv6 SID
   allocation and distribution is done by the PCEP, all other SRv6
   operations (nexthop selection, protection, etc) are still done by the
   node (and the IGPs).

5.5.1.1.  PCECC SRv6 Node/Prefix SID allocation

   Each node (PCC) is allocated a node SRv6 SID by the PCECC.  The PCECC
   sends the PCInitiate message to update the SRv6 SID table of each
   node.  The TE router ID is determined from the TED or from "IPv4/IPv6
   Router-ID" sub-TLV [I-D.dhodylee-pce-pcep-ls], in the OPEN Object.

   On receiving the SRv6 node SID allocation, each node (PCC) uses the
   local routing information to determine the next-hop and download the
   forwarding instructions accordingly.  The PCInitiate message uses the
   FEC object [I-D.ietf-pce-pcep-extension-pce-controller-sr].

   On receiving the SRv6 node SID allocation:

      For the local SID, the node (PCC) needs to update SID with
      associated function (END function in this case) in "My Local SID
      Table" ([RFC8986]).

      For the non-local SID, the node (PCC) uses the local routing
      information to determine the next-hop and download the forwarding
      instructions accordingly.

   The forwarding behavior and the end result is similar to IGP based
   "Node-SID" in SRv6.  Thus, from anywhere in the domain, it enforces
   the ECMP-aware shortest-path forwarding of the packet towards the
   related node as per [RFC8402].

   PCE relies on the Node/Prefix SRv6 SID clean up using the same
   PCInitiate message as per [RFC8281].





Li, et al.              Expires 28 February 2022                [Page 8]

Internet-Draft                 PCECC-SRv6                    August 2021


5.5.1.2.  PCECC SRv6 Adjacency SID allocation

   For PCECC-SRv6, apart from node-SID, Adj-SID is used where each
   adjacency is allocated an Adj-SID by the PCECC.  The PCECC sends
   PCInitiate message to update the SRv6 SID entry for each adjacency to
   all nodes in the domain.  Each node (PCC) download the SRv6 SID
   instructions accordingly.  Similar to SRv6 Node/Prefix Label
   allocation, the PCInitiate message in this case uses the FEC object.

   The forwarding behavior and the end result is similar to IGP based
   "Adj-SID" in SRv6 as per [RFC8402].

   The handling of adjacencies on the LAN subnetworks is specified in
   [RFC8402].  PCECC MUST assign Adj-SID for every pair of routers in
   the LAN.  The rest of the protocol mechanism remains the same.

   PCE relies on the Adj label clean up using the same PCInitiate
   message as per [RFC8281].

5.5.1.3.  Redundant PCEs

   [I-D.ietf-pce-state-sync] describes the synchronization mechanism
   between the stateful PCEs.  The SRv6 SIDs allocated by a PCE MUST
   also be synchronized among PCEs for PCECC-SRv6 state synchronization.
   Note that the SRv6 SIDs are independent of the SRv6 paths, and
   remains intact till any topology change.  The redundant PCEs MUST
   have a common view of all SRv6 SIDs allocated in the domain.

5.5.1.4.  Re-Delegation and Cleanup

   [RFC9050] describes the action needed for CCIs for the static LSPs on
   a terminated session.  Same holds true for the CCI for SRv6 SID as
   well.

5.5.1.5.  Synchronization of SRv6 SID Allocations

   [RFC9050] describes the synchronization of CCIs via the LSP state
   synchronization as described in [RFC8231] and [RFC8232].  Same
   procedures are applied for the SRv6 SID CCIs.

6.  PCEP Messages

   The PCEP messages are as per
   [I-D.ietf-pce-pcep-extension-pce-controller-sr].







Li, et al.              Expires 28 February 2022                [Page 9]

Internet-Draft                 PCECC-SRv6                    August 2021


7.  PCEP Objects

7.1.  OPEN Object

7.1.1.  PCECC Capability sub-TLV

   [RFC9050] defined the PCECC-CAPABILITY sub-TLV.

   A new I-bit is defined in PCECC-CAPABILITY sub-TLV for PCECC-SRv6:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               Type=TBD        |            Length=4           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Flags                       |I|S|L|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   [Editor's Note - The above figure is included for ease of the reader
   but should be removed before publication.]

   I (PCECC-SRv6-CAPABILITY - 1 bit - TBD1): If set to 1 by a PCEP
   speaker, it indicates that the PCEP speaker is capable of PCECC-SRv6
   capability and the PCE allocates the Node and Adj SRv6 SID on this
   session.

7.2.  SRv6 Path Setup

   The PATH-SETUP-TYPE TLV is defined in [RFC8408].  A PST value of TBD
   is used when Path is setup via SRv6 mode as per
   [I-D.ietf-pce-segment-routing-ipv6].  The procedure for SRv6 path
   setup as specified in [I-D.ietf-pce-segment-routing-ipv6] remains
   unchanged.

7.3.  CCI Object

   The Central Control Instructions (CCI) Object is used by the PCE to
   specify the controller instructions is defined in [RFC9050].  This
   document defines another object-type for SRv6 purpose.

   CCI Object-Type is TBD3 for SRv6 as below -









Li, et al.              Expires 28 February 2022               [Page 10]

Internet-Draft                 PCECC-SRv6                    August 2021


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            CC-ID                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MT-ID    |    Algorithm  |    Flags      |B|P|G|C|N|E|V|L|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Reserved            |   SRv6 Endpoint Function      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                      SRv6 Identifier                          |
   |                         (128-bit)                             |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                              SID                              |
   |                           Structure                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   //                        Optional TLV                         //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   The field CC-ID is as described in [RFC9050].  The field MT-ID,
   Algorithm, Flags are defined in
   [I-D.ietf-pce-pcep-extension-pce-controller-sr].

   Reserved: MUST be set to 0 while sending and ignored on receipt.

   SRv6 Endpoint Function: 16-bit field representing supported functions
   associated with SRv6 SIDs.

   SRv6 Identifier: 128-bit IPv6 addresses representing SRv6 segment.

   SID Structure: 64-bit field formatted as per "SID Structure" in
   [I-D.ietf-pce-segment-routing-ipv6].

7.4.  FEC Object

   The FEC Object is used to specify the FEC information and MAY be
   carried within PCInitiate or PCRpt message.

   FEC Object (and various Object-Types) are described in
   [I-D.ietf-pce-pcep-extension-pce-controller-sr].  SRv6 Node SID MUST
   includes the FEC Object-Type 2 for IPv6 Node.  SRv6 Adjacency SID
   MUST include the FEC Object-Type=4 for IPv6 adjacency.  Further FEC
   object types could be added in future extensions.




Li, et al.              Expires 28 February 2022               [Page 11]

Internet-Draft                 PCECC-SRv6                    August 2021


8.  Security Considerations

   As per [RFC8283], the security considerations for a PCE-based
   controller are a little different from those for any other PCE
   system.  That is, the operation relies heavily on the use and
   security of PCEP, so consideration should be given to the security
   features discussed in [RFC5440] and the additional mechanisms
   described in [RFC8253].  It further lists the vulnerability of a
   central controller architecture, such as a central point of failure,
   denial of service, and a focus for interception and modification of
   messages sent to individual Network Elements (NEs).

   The PCECC extension builds on the existing PCEP messages; thus, the
   security considerations described in [RFC5440], [RFC8231], [RFC8281],
   [RFC9050], and [I-D.ietf-pce-pcep-extension-pce-controller-sr]
   continue to apply.

   As per [RFC8231], it is RECOMMENDED that these PCEP extensions only
   be activated on mutually-authenticated and encrypted sessions across
   PCEs and PCCs belonging to the same administrative authority, using
   Transport Layer Security (TLS) [RFC8253] as per the recommendations
   and best current practices in [RFC7525] (unless explicitly set aside
   in [RFC8253]).

9.  Manageability Considerations

9.1.  Control of Function and Policy

   A PCE or PCC implementation SHOULD allow to configure to enable/
   disable PCECC SRv6 capability as a global configuration.

9.2.  Information and Data Models

   [RFC7420] describes the PCEP MIB, this MIB can be extended to get the
   PCECC SRv6 capability status.

   The PCEP YANG module [I-D.ietf-pce-pcep-yang] could be extended to
   enable/disable PCECC SRv6 capability.

9.3.  Liveness Detection and Monitoring

   Mechanisms defined in this document do not imply any new liveness
   detection and monitoring requirements in addition to those already
   listed in [RFC5440].







Li, et al.              Expires 28 February 2022               [Page 12]

Internet-Draft                 PCECC-SRv6                    August 2021


9.4.  Verify Correct Operations

   Mechanisms defined in this document do not imply any new operation
   verification requirements in addition to those already listed in
   [RFC5440] and [RFC8231].

9.5.  Requirements On Other Protocols

   PCEP extensions defined in this document do not put new requirements
   on other protocols.

9.6.  Impact On Network Operations

   PCEP implementation SHOULD allow a limit to be placed on the rate of
   PCInitiate/PCUpd messages (as per [RFC8231]) sent by PCE and
   processed by PCC.  It SHOULD also allow sending a notification when a
   rate threshold is reached.

10.  IANA Considerations

10.1.  PCECC-CAPABILITY sub-TLV

   [RFC9050] defines the PCECC-CAPABILITY sub-TLV and requests that IANA
   creates a registry to manage the value of the PCECC-CAPABILITY sub-
   TLV's Flag field.  IANA is requested to allocate a new bit in the
   PCECC-CAPABILITY sub-TLV Flag Field registry, as follows:

                  +======+=============+===============+
                  | Bit  | Description | Reference     |
                  +======+=============+===============+
                  | TBD1 | SRv6        | This document |
                  +------+-------------+---------------+

                                 Table 1

10.2.  PCEP Object

   IANA is requested to allocate a new code-point for the new CCI
   object-type in "PCEP Objects" sub-registry as follows:












Li, et al.              Expires 28 February 2022               [Page 13]

Internet-Draft                 PCECC-SRv6                    August 2021


        +====================+======+=============+===============+
        | Object-Class Value | Name | Object-Type | Reference     |
        +====================+======+=============+===============+
        | TBD                | CCI  |             | [RFC9050]     |
        +--------------------+------+-------------+---------------+
        |                    |      | TBD3: SRv6  | This document |
        +--------------------+------+-------------+---------------+

                                  Table 2

10.3.  PCEP-Error Object

   IANA is requested to allocate new error types and error values within
   the "PCEP-ERROR Object Error Types and Values" sub-registry of the
   PCEP Numbers registry for the following errors:

   Error-Type   Meaning
   ---------- -------
   19           Invalid operation.
                Error-value = TBD4 :                 SRv6 capability was
                                                     not advertised

   The Reference is marked as "This document".

11.  Acknowledgments

12.  References

12.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5440]  Vasseur, JP., Ed. and JL. Le Roux, Ed., "Path Computation
              Element (PCE) Communication Protocol (PCEP)", RFC 5440,
              DOI 10.17487/RFC5440, March 2009,
              <https://www.rfc-editor.org/info/rfc5440>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.








Li, et al.              Expires 28 February 2022               [Page 14]

Internet-Draft                 PCECC-SRv6                    August 2021


   [RFC8231]  Crabbe, E., Minei, I., Medved, J., and R. Varga, "Path
              Computation Element Communication Protocol (PCEP)
              Extensions for Stateful PCE", RFC 8231,
              DOI 10.17487/RFC8231, September 2017,
              <https://www.rfc-editor.org/info/rfc8231>.

   [RFC8281]  Crabbe, E., Minei, I., Sivabalan, S., and R. Varga, "Path
              Computation Element Communication Protocol (PCEP)
              Extensions for PCE-Initiated LSP Setup in a Stateful PCE
              Model", RFC 8281, DOI 10.17487/RFC8281, December 2017,
              <https://www.rfc-editor.org/info/rfc8281>.

   [RFC8664]  Sivabalan, S., Filsfils, C., Tantsura, J., Henderickx, W.,
              and J. Hardwick, "Path Computation Element Communication
              Protocol (PCEP) Extensions for Segment Routing", RFC 8664,
              DOI 10.17487/RFC8664, December 2019,
              <https://www.rfc-editor.org/info/rfc8664>.

   [I-D.ietf-pce-segment-routing-ipv6]
              Li(Editor), C., Negi, M. S., Sivabalan, S., Koldychev, M.,
              Kaladharan, P., and Y. Zhu, "PCEP Extensions for Segment
              Routing leveraging the IPv6 data plane", Work in Progress,
              Internet-Draft, draft-ietf-pce-segment-routing-ipv6-09, 27
              May 2021, <https://datatracker.ietf.org/doc/html/draft-
              ietf-pce-segment-routing-ipv6-09>.

   [RFC9050]  Li, Z., Peng, S., Negi, M., Zhao, Q., and C. Zhou, "Path
              Computation Element Communication Protocol (PCEP)
              Procedures and Extensions for Using the PCE as a Central
              Controller (PCECC) of LSPs", RFC 9050,
              DOI 10.17487/RFC9050, July 2021,
              <https://www.rfc-editor.org/info/rfc9050>.

   [I-D.ietf-pce-pcep-extension-pce-controller-sr]
              Li, Z., Peng, S., Negi, M. S., Zhao, Q., and C. Zhou,
              "PCEP Procedures and Protocol Extensions for Using PCE as
              a Central Controller (PCECC) for Segment Routing (SR) MPLS
              Segment Identifier (SID) Allocation and Distribution.",
              Work in Progress, Internet-Draft, draft-ietf-pce-pcep-
              extension-pce-controller-sr-02, 25 March 2021,
              <https://datatracker.ietf.org/doc/html/draft-ietf-pce-
              pcep-extension-pce-controller-sr-02>.

12.2.  Informative References







Li, et al.              Expires 28 February 2022               [Page 15]

Internet-Draft                 PCECC-SRv6                    August 2021


   [RFC4655]  Farrel, A., Vasseur, J.-P., and J. Ash, "A Path
              Computation Element (PCE)-Based Architecture", RFC 4655,
              DOI 10.17487/RFC4655, August 2006,
              <https://www.rfc-editor.org/info/rfc4655>.

   [RFC7025]  Otani, T., Ogaki, K., Caviglia, D., Zhang, F., and C.
              Margaria, "Requirements for GMPLS Applications of PCE",
              RFC 7025, DOI 10.17487/RFC7025, September 2013,
              <https://www.rfc-editor.org/info/rfc7025>.

   [RFC7399]  Farrel, A. and D. King, "Unanswered Questions in the Path
              Computation Element Architecture", RFC 7399,
              DOI 10.17487/RFC7399, October 2014,
              <https://www.rfc-editor.org/info/rfc7399>.

   [RFC7420]  Koushik, A., Stephan, E., Zhao, Q., King, D., and J.
              Hardwick, "Path Computation Element Communication Protocol
              (PCEP) Management Information Base (MIB) Module",
              RFC 7420, DOI 10.17487/RFC7420, December 2014,
              <https://www.rfc-editor.org/info/rfc7420>.

   [RFC7491]  King, D. and A. Farrel, "A PCE-Based Architecture for
              Application-Based Network Operations", RFC 7491,
              DOI 10.17487/RFC7491, March 2015,
              <https://www.rfc-editor.org/info/rfc7491>.

   [RFC7525]  Sheffer, Y., Holz, R., and P. Saint-Andre,
              "Recommendations for Secure Use of Transport Layer
              Security (TLS) and Datagram Transport Layer Security
              (DTLS)", BCP 195, RFC 7525, DOI 10.17487/RFC7525, May
              2015, <https://www.rfc-editor.org/info/rfc7525>.

   [RFC8232]  Crabbe, E., Minei, I., Medved, J., Varga, R., Zhang, X.,
              and D. Dhody, "Optimizations of Label Switched Path State
              Synchronization Procedures for a Stateful PCE", RFC 8232,
              DOI 10.17487/RFC8232, September 2017,
              <https://www.rfc-editor.org/info/rfc8232>.

   [RFC8253]  Lopez, D., Gonzalez de Dios, O., Wu, Q., and D. Dhody,
              "PCEPS: Usage of TLS to Provide a Secure Transport for the
              Path Computation Element Communication Protocol (PCEP)",
              RFC 8253, DOI 10.17487/RFC8253, October 2017,
              <https://www.rfc-editor.org/info/rfc8253>.








Li, et al.              Expires 28 February 2022               [Page 16]

Internet-Draft                 PCECC-SRv6                    August 2021


   [RFC8283]  Farrel, A., Ed., Zhao, Q., Ed., Li, Z., and C. Zhou, "An
              Architecture for Use of PCE and the PCE Communication
              Protocol (PCEP) in a Network with Central Control",
              RFC 8283, DOI 10.17487/RFC8283, December 2017,
              <https://www.rfc-editor.org/info/rfc8283>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8408]  Sivabalan, S., Tantsura, J., Minei, I., Varga, R., and J.
              Hardwick, "Conveying Path Setup Type in PCE Communication
              Protocol (PCEP) Messages", RFC 8408, DOI 10.17487/RFC8408,
              July 2018, <https://www.rfc-editor.org/info/rfc8408>.

   [RFC8665]  Psenak, P., Ed., Previdi, S., Ed., Filsfils, C., Gredler,
              H., Shakir, R., Henderickx, W., and J. Tantsura, "OSPF
              Extensions for Segment Routing", RFC 8665,
              DOI 10.17487/RFC8665, December 2019,
              <https://www.rfc-editor.org/info/rfc8665>.

   [RFC8667]  Previdi, S., Ed., Ginsberg, L., Ed., Filsfils, C.,
              Bashandy, A., Gredler, H., and B. Decraene, "IS-IS
              Extensions for Segment Routing", RFC 8667,
              DOI 10.17487/RFC8667, December 2019,
              <https://www.rfc-editor.org/info/rfc8667>.

   [RFC8754]  Filsfils, C., Ed., Dukes, D., Ed., Previdi, S., Leddy, J.,
              Matsushima, S., and D. Voyer, "IPv6 Segment Routing Header
              (SRH)", RFC 8754, DOI 10.17487/RFC8754, March 2020,
              <https://www.rfc-editor.org/info/rfc8754>.

   [RFC8986]  Filsfils, C., Ed., Camarillo, P., Ed., Leddy, J., Voyer,
              D., Matsushima, S., and Z. Li, "Segment Routing over IPv6
              (SRv6) Network Programming", RFC 8986,
              DOI 10.17487/RFC8986, February 2021,
              <https://www.rfc-editor.org/info/rfc8986>.

   [I-D.ietf-teas-pcecc-use-cases]
              Li, Z. (., Dhody, D., Zhao, Q., Ke, K., Khasanov, B.,
              Fang, L., Zhou, C., Zhang, B., Rachitskiy, A., and A.
              Gulida, "The Use Cases for Path Computation Element (PCE)
              as a Central Controller (PCECC).", Work in Progress,
              Internet-Draft, draft-ietf-teas-pcecc-use-cases-07, 8
              March 2021, <https://datatracker.ietf.org/doc/html/draft-
              ietf-teas-pcecc-use-cases-07>.




Li, et al.              Expires 28 February 2022               [Page 17]

Internet-Draft                 PCECC-SRv6                    August 2021


   [I-D.ietf-pce-pcep-yang]
              Dhody, D., Hardwick, J., Beeram, V. P., and J. Tantsura,
              "A YANG Data Model for Path Computation Element
              Communications Protocol (PCEP)", Work in Progress,
              Internet-Draft, draft-ietf-pce-pcep-yang-16, 22 February
              2021, <https://datatracker.ietf.org/doc/html/draft-ietf-
              pce-pcep-yang-16>.

   [I-D.ietf-pce-state-sync]
              Litkowski, S., Sivabalan, S., Li, C., and H. Zheng, "Inter
              Stateful Path Computation Element (PCE) Communication
              Procedures.", Work in Progress, Internet-Draft, draft-
              ietf-pce-state-sync-00, 28 June 2021,
              <https://datatracker.ietf.org/doc/html/draft-ietf-pce-
              state-sync-00>.

   [I-D.dhodylee-pce-pcep-ls]
              Dhody, D., Peng, S., Lee, Y., Ceccarelli, D., Wang, A.,
              Mishra, G., and S. Sivabalan, "PCEP extensions for
              Distribution of Link-State and TE Information", Work in
              Progress, Internet-Draft, draft-dhodylee-pce-pcep-ls-22,
              25 August 2021, <https://datatracker.ietf.org/doc/html/
              draft-dhodylee-pce-pcep-ls-22>.

Appendix A.  Contributor Addresses

   Dhruv Dhody
   Huawei Technologies
   Divyashree Techno Park, Whitefield
   Bangalore, Karnataka  560066
   India

   EMail: dhruv.ietf@gmail.com



Authors' Addresses

   Zhenbin Li
   Huawei Technologies
   Huawei Bld., No.156 Beiqing Rd.
   Beijing
   100095
   China

   Email: lizhenbin@huawei.com





Li, et al.              Expires 28 February 2022               [Page 18]

Internet-Draft                 PCECC-SRv6                    August 2021


   Shuping Peng
   Huawei Technologies
   Huawei Bld., No.156 Beiqing Rd.
   Beijing
   100095
   China

   Email: pengshuping@huawei.com


   Xuesong Geng
   Huawei Technologies
   China

   Email: gengxuesong@huawei.com


   Mahendra Singh Negi
   RtBrick Inc
   N-17L, 18th Cross Rd, HSR Layout
   Bangalore 560102
   Karnataka
   India

   Email: mahend.ietf@gmail.com


























Li, et al.              Expires 28 February 2022               [Page 19]
