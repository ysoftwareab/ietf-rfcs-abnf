

Network Working Group                                      Sanjeev Singh
Internet-Draft                                          W. Mark Townsley
Category: Standards Track                                        Jed Lau
<draft-ietf-l2tpext-pwe3-atm-00.txt>                 Cisco Systems, Inc.
March 2004

                   ATM Pseudo-Wire Extensions for L2TP



Status of this Memo

    This document is an Internet-Draft and is in full conformance with
    all provisions of Section 10 of RFC2026.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as Internet-
    Drafts.

    Internet-Drafts are draft documents valid for a maximum of six months
    and may be updated, replaced, or obsoleted by other documents at any
    time.  It is inappropriate to use Internet-Drafts as reference
    material or to cite them other than as "work in progress."

    The list of current Internet-Drafts can be accessed at
               http://www.ietf.org/ietf/1id-abstracts.txt

    The list of Internet-Draft Shadow Directories can be accessed at
               http://www.ietf.org/shadow.html.

Copyright Notice

    Copyright (C) The Internet Society (2004).  All Rights Reserved.


Abstract


    The Layer 2 Tunneling Protocol, Version 3, (L2TPv3) defines an
    extensible tunneling protocol, how to transport layer 2 services over
    IP network. This document describes the specifics of how to use the
    L2TP control plane for Asynchronous Transfer Mode (ATM) Pseudo-Wires
    and guidelines for transporting various ATM services over an IP
    network.






Sanjeev, et al.             Standards Track                     [Page 1]





INTERNET DRAFT              ATM over L2TPv3                March 2004


    Contents

    Status of this Memo..........................................    1

    1. Introduction..............................................    3
       1.1 Abbreviations.........................................    3

    2. Control Connection Establishment..........................    4

    3. Session Establishment and ATM Circuit Status Notification.    4
       3.1 L2TPv3 Session Establishment..........................    4
       3.2 L2TPv3 Session Teardown...............................    6
       3.3 L2TPv3 Session Maintenance............................    6

    4. Encapsulation.............................................    7
       4.1 ATM-Specific Sublayer.................................    7
       4.2 Sequencing............................................    9

    5. ATM Transport.............................................    9
       5.1 ATM AAL5-SDU Mode.....................................   10
       5.2 ATM Cell Mode.........................................   10
          5.2.1 ATM VCC Cell-Relay Service.......................   11
          5.2.2 ATM VPC Cell-Relay Service.......................   11
          5.2.3 ATM Port Cell-Relay Service......................   12
       5.3 OAM Cell Support......................................   12
          5.3.1 VCC switching....................................   12
          5.3.1 VPC switching....................................   12

    6. ATM Maximum Concatenated Cells AVP........................   12

    7. OAM Emulation Required AVP................................   13

    8. ATM defects mapping and status notification...............   13
       8.1 ATM Alarm Status AVP..................................   14

    9. Security Considerations...................................   15

    10. IANA Considerations......................................   15

    7. Acknowledgments...........................................   15

    12. References...............................................   16
       12.1 Normative References.................................   16
       12.2 Informative References...............................   16

    13. Contacts.................................................   17





Sanjeev, et al.             Standards Track                     [Page 2]





INTERNET DRAFT              ATM over L2TPv3                March 2004


Specification of Requirements

    In this document, several words are used to signify the requirements
    of the specification.  These words are often capitalized.  The key
    words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
    "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document
    are to be interpreted as described in [RFC2119].


1. Introduction

    This document describes the specifics of how to use the L2TP for ATM
    pseudo-wires, including encapsulation, carrying various ATM services,
    such as, AAL5 SDU, ATM VCC/VPC/Port cell-relay over L2TP, and mapping
    ATM defects to L2TP SLI message to notify the peer LCCE.

    Any ATM specific AVPs or other L2TP constructs for ATM pseudo-wire
    (ATMPW) support will be defined here as well. Support for ATM
    Switched Virtual Path/Connection (SVP/SVC) and Switched/soft
    Permanent Virtual Path/Connection (SPVP/SPVC) are outside the scope
    of this document.

    The reader is expected to be very familiar with the terminology and
    protocol constructs defined in [L2TPv3].

1.1 Abbreviations

    AIS     Alarm Indication Signal
    ATMPW   ATM Pseudo-wire
    AVP     Attribute Value Pair
    CC      Continuity Check OAM Cell
    CE      Customer Edge
    HEC     Header Error Control
    LAC     L2TP Access Concentrator (See [L2TPv3])
    LCCE    L2TP control connection endpoint (See [L2TPv3])
    MSB     Most Significant Byte
    OAM     Operation, Administration, and Management
    PE      Provider Edge
    PSN     Packet Service Network
    PWE3    Pseudo-wire Edge-to-edge emulation
    RDI     Remote Defect Indicator
    SDU     Service Data Unit
    SLI     Set Link Info, an L2TP control message
    SVC     Switched Virtual Connection
    SVP     Switched Virtual Path
    SPVC    Switched Permanent Virtual Connection
    SPVP    Switched Permanent Virtual Path
    VC      Virtual Circuit



Sanjeev, et al.             Standards Track                     [Page 3]





INTERNET DRAFT              ATM over L2TPv3                March 2004


    VCC     Virtual Channel Connection
    VCI     Virtual Channel Identifier
    VPC     Virtual Path Connection
    VPI     Virtual Path Identifier

2. Control Connection Establishment

    To emulate, ATM pseudo-wires using L2TP, an L2TP Control Connection
    as described in Section 3.3 of [L2TPv3] MUST be established.

    The SCCRQ and corresponding SCCRP MUST include the specific ATM PW
    type of TBA1 (See IANA Considerations Section), in the Pseudo-Wire
    Capabilities List as defined in Section 5.4.3 of [L2TPv3]. This
    identifies the control connection as able to establish L2TP sessions
    in support of the ATM Pseudo-Wires.

    An LCCE MUST be able to uniquely identify itself in the SCCRQ and
    SCCRP messages via a globally unique value. By default, this is
    advertised via the structured Router ID AVP [L2TPv3], though the
    unstructured Hostname AVP [L2TPv3] MAY be used if both endpoints
    support an application (as defined by the Application Code AVP
    [L2TPv3]) to identify LCCEs via this value.

3. Session Establishment and ATM Circuit Status Notification

    This section describes how L2TP ATM PW or sessions are established
    between two LCCEs. This includes what will happen when an ATM Circuit
    (e.g. AAL5 PVC) is created, deleted or changes state when circuit is
    alarmed.

3.1 L2TPv3 Session Establishment

    ATM Circuit (e.g. an AAL5 PVC) creation triggers establishment of a
    L2TP session using three-way handshake described in Section 3.4.1 of
    [L2TPv3].  An LCCE MAY initiate the session immediately upon ATM
    circuit creation, or wait until the Circuit state transitions to
    ACTIVE before attempting to establish a session for the ATM circuit.
    It MAY be preferred to wait until Circuit status transitions to
    ACTIVE to avoid wasting L2TP resources.

    The Circuit Status AVP (see Section 8) MUST be present in the ICRQ
    and ICRP messages, and MAY be present in the SLI message for ATM PWs.

    The following figures shows how the L2TP messages are exchanged to
    setup an ATM PWs after ATM Circuit (e.g. an AAL5 PVC) becomes ACTIVE.






Sanjeev, et al.             Standards Track                     [Page 4]





INTERNET DRAFT              ATM over L2TPv3                March 2004


           LCCE (LAC) A                                  LCCE (LAC) B
       ------------------                            --------------------

        ATM Ckt Provisioned
                                                       ATM Ckt Provisioned
        ATM Ckt ACTIVE
                        ICRQ (status = 0x03) ---->
                                                       ATM Ckt ACTIVE
                        <----- ICRP (status = 0x03)
        L2TP session established
        OK to send data into PW

                        ICCN ----->
                                                      L2TP session established
                                                      OK to send data into PW

    The following signaling elements are required for the ATM PW
    establishment.

    a. Pseudo-Wire Type: One of the following four attribute types can be
       present in PW Type AVP of [L2TPv3].

       - ATM AAL5 SDU attribute type, TBA1
       - ATM VCC Cell-Relay attribute type, TBA2
       - ATM VPC Cell-Relay attribute type, TBA3
       - ATM Port Cell-Relay attribute type, TBA4

    The above Cell-Relay mode can also signal the ATM Cell-Packing AVP as
    described in Section 6. Other ATM PW types are outside the scope of
    this document.

    b. PW End ID: Each PW is associated with a PW End ID akin to the
       VC-ID in [PWE3ATM]. Two LCCEs of a PW would have the same PW
       End ID and its format is described in Section 5.4.4 of [L2TPv3].

       This End ID AVP MUST be present in the ICRQ in order for the
       remote LCCE to associate the session to the ATM Circuit. The End
       Identifier AVP defined in [L2TPv3] is of opaque form, though ATMPW
       implementations MAY simply use a four-octet value that is known
       to both LCCEs (either by direct configuration, or some other
       means). The exact method of how this value is configured,
       retrieved, discovered, or otherwise determined at each LCCE
       is outside the scope of this document.

    As with the ICRQ, the ICRP is sent only after the ATM Circuit
    transitions to ACTIVE as well. If LCCE B had not been provisioned
    that ATM Circuit identified in the ICRQ, a CDN would have been
    immediately returned indicating that the circuit was not provisioned



Sanjeev, et al.             Standards Track                     [Page 5]





INTERNET DRAFT              ATM over L2TPv3                March 2004


    or available at this LCCE. LCCE A should then exhibit a periodic
    retry mechanism. The period and maximum number of retries MUST be
    configurable.

    An Implementation MAY send an ICRQ or ICRP before a PVC is ACTIVE, as
    long as the Circuit Status AVP reflects that the ATM Circuit is
    INACTIVE and an SLI is sent when the ATM Circuit becomes ACTIVE (see
    Section 8).

    The ICCN is the final stage in the session establishment, confirming
    the receipt of the ICRP with acceptable parameters to allow
    bidirectional traffic.

3.2 L2TPv3 Session Teardown

    When an ATM Circuit is unprovisioned (deleted) at either LCCE, the
    associated L2TP session MUST be torn down via the CDN message defined
    in Section 3.4.3 of [L2TPv3].

3.3 L2TPv3 Session Maintenance

    All sessions established by a given control connection utilize the
    L2TP Hello facility defined in Section 4.4 of [L2TPv3] for session
    keepalive. This gives all sessions basic dead peer and path detection
    between LCCEs.

    If the control channel utilizing the Hello message is not in-band
    with data traffic over PSN, then other method MAY be used to detect
    the Session failure and it is left for further study.

    ATMPW over L2TP uses the Set Link Info (SLI) control message as
    defined in [L2TPv3] to signal ATM Circuit Status between LCCEs after
    initial session establishment. This includes ACTIVE or INACTIVE
    notifications of the ATM Circuit, or any other parameters that may
    need to be shared between the LCCEs in order to provide proper PW
    emulation.

    The SLI message MUST be sent any time there is a status change which
    may be reported by any values identified in the Circuit Status AVP.
    The only exception to this is the initial ICRQ, ICRP and CDN messages
    which establish and teardown the L2TP session itself when ATM circuit
    is created or deleted. The SLI message may be sent from either LCCE
    at any time after the first ICRQ is sent (and perhaps before an ICRP
    is received, requiring the peer to perform a reverse Session ID
    lookup).

    The other application of the SLI message is to map the ATM OAM or
    physical layer alarms into Circuit Status AVP as described in Section



Sanjeev, et al.             Standards Track                     [Page 6]





INTERNET DRAFT              ATM over L2TPv3                March 2004


    8.

4. Encapsulation

    The section describes the general encapsulation format for ATM
    services over L2TP.

    Figure 1: General format for ATM encapsulation over L2TPv3 over IP

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                     PSN Transport Header                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                       Session Header                          |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                    ATM-Specific Sublayer                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                      ATM Service Payload                      |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    The PSN Transport header is specific to IP and its underlying
    transport header. This header is used to transport the encapsulated
    ATM payload through the IP network.

    The Session Header is non-zero 32-bit session ID and optional cookies
    upto 64-bits. This Session id is exchanged during session setup.

    The ATM Specific Sublayer is REQUIRED for AAL5 SDU mode and OPTIONAL
    for ATM Cell mode. Please refer the Section 4.1 for more details.

4.1 ATM-Specific Sublayer

    An alternative to default L2-Specific Sublayer as mentioned in
    Section 4.6 of [L2TPv3], the ATM-Specific Sublayer is defined here.
    Four new flag bits (T,G,C,U) are defined which concurs with the
    Section 8.2 of [PWE3ATM]. The bit positions, 6 & 7 of MSB have
    already been defined in Section 4.5 of [L2TPFRAG] for fragmentation
    but are mutually exclusive with bits defined below.

    Figure 2: ATM-Specific Sublayer Format








Sanjeev, et al.             Standards Track                     [Page 7]





INTERNET DRAFT              ATM over L2TPv3                March 2004


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |x|S|x|x|T|G|C|U|          Sequence Number                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Definition of these four bits are as per Section 8.2 of [PWE3ATM] and
    also included here for reference.

       * S bit

       Definition of this bit as per Section 4.6 of [L2TPv3].

       * xx (Reserved)

       These bits are reserved and MUST be set to 0 upon transmission
       and ignored upon reception, unless otherwise, these bits are
       used as per [L2TPFRAG].

       * T (Transport type) bit

       Bit (T) of the control word indicates whether the packet
       contains an ATM admin cell or an AAL5 payload. If T = 1, the
       packet contains an ATM admin cell, encapsulated according to
       the VCC cell relay encapsulation of Section 5.2.
       If not set, the PDU contains an AAL5 payload. The ability to
       transport an ATM cell in the AAL5 SDU mode is intended to
       provide a means of enabling administrative functionality over
       the AAL5 VCC (though it does not endeavor to preserve user-cell
       and admin-cell arrival/transport ordering).

       * G (EFCI) Bit

       The ingress LCCE device SHOULD set this bit to 1 if the EFCI bit
       of the final cell of the incoming AAL5 payload is set to 1, or
       if the EFCI bit of the single ATM cell to be transported in
       the packet is set to 1.  Otherwise this bit SHOULD be set to
       0.  The egress LCCE device SHOULD set the EFCI bit of all the
       outgoing cells that transport the AAL5 payload to the value
       contained in this field.

       * C (CLP) Bit

       The ingress LCCE device SHOULD set this bit to 1 if the CLP bit
       of any of the incoming ATM cells of the AAL5 payload are set
       to 1, or if the CLP bit of the single ATM cell that is to be
       transported in the packet is set to 1.  Otherwise this bit
       SHOULD be set to 0. The egress LCCE device SHOULD set the CLP



Sanjeev, et al.             Standards Track                     [Page 8]





INTERNET DRAFT              ATM over L2TPv3                March 2004


       bit of all outgoing cells that transport the AAL5 CPCS-PDU to
       the value contained in this field.


       * U (Command/Response) Bit

       When FRF.8.1 Frame Relay / ATM PVC Service Interworking (see
       [FRF8.1]) traffic is being transported, the CPCS-UU Least
       Significant Bit (LSB) of the AAL5 CPCS-PDU may contain the
       Frame Relay C/R bit.
       The ingress LCCE device SHOULD copy this bit to the U bit of
       the control word. The egress LCCE device SHOULD copy the
       U bit to the CPCS-UU Least Significant Bit (LSB) of the AAL5
       payload.

       The Sequence Number fields are described in Section 4.3

       In case of a reassembly timeout, the encapsulating LCCE should
       discard all component cells of the AAL5 frame.

       An additional enumeration is added to the L2-Specific Sublayer AVP
       to identify the ATM L2-Specific Sublayer:

          0 - There is no L2-Specific Sublayer present.
          1 - The default L2-Specific Sublayer (defined in Section 4.6)
              is used.
          TBA5 - The ATM L2-Specific Sublayer is used.

    The first two values are already defined in the L2TPv3 base draft
    [L2TPv3].

4.2 Sequencing

    Data Packet Sequencing MAY be enabled for ATMPWs. The sequencing
    mechanisms described in [L2TPv3] MUST be used for signaling
    sequencing support. ATMPW over L2TPv3 MUST request the presence of
    the ATM-Specific Sublayer when sequencing is enabled, and MAY request
    its presence at all times.

5. ATM Transport

    There are two encapsulations supported for ATM transport as described
    below.

    ATM Specific Sublayer is prepended to AAL5-SDU. The other Cell-mode
    encapsulation consists of the OPTIONAL ATM-Specific Sublayer and 4-
    byte ATM Cell Header and 48-byte ATM Cell-payload.




Sanjeev, et al.             Standards Track                     [Page 9]





INTERNET DRAFT              ATM over L2TPv3                March 2004


5.1 ATM AAL5-SDU Mode

    In this mode each AAL5 VC is mapped to an L2TP session. Ingress LCCE
    reassembles AAL5 CPCS-SDU without AAL5 trailer and any padding bytes.
    Incoming EFCI, CLP and C/R (if present) is carried in ATM Specific
    sublayer across ATMPW to egress LCCE. The processing of these bits on
    ingress and egress LCCE defined in Section 4.1.

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |x|S|x|x|T|G|C|U|             Sequence Number                   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                         AAL5 CPCS-SDU                         |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    If ingress LCCE determines that an encapsulated AAL5 SDU exceeds the
    MTU size of the PW then AAL5 SDU should be discarded. F5 OAM cells
    that arrive during the reassembly of an AAL5 SDU are sent immediately
    on the PW followed by the AAL5 SDU payload. In this case OAM cell's
    relative order with respect to user data cell is not maintained.

    Performance Monitoring OAM, as specified in ITU-T 610 [I610-1],
    [I610-2], [I610-3] and security OAM cells as speicified in [ATMSEC],
    should not be used in combination with AAL5 SDU mode and these cells
    MAY be dropped at ingress LCCE because cell sequence integrities is
    not maintained.

5.2 ATM Cell Mode

    In this mode, ATM cells skip the reassembly process at ingress LCCE
    and transported over an L2TP session, either as a single Cell or as
    concatenated cells into a single packet. Each ATM Cell consists of 4
    byte ATM cell header and 48-byte ATM Cell-payload, HEC is not
    included.

    In ATM Cell Mode encapsulation, ATM-Specific Sublayer is OPTIONAL.
    It can be included, if sequencing support required. It is left to
    implementation to choose to signal Default L2-Specific Sublayer or
    ATM-Specific Sublayer.








Sanjeev, et al.             Standards Track                    [Page 10]





INTERNET DRAFT              ATM over L2TPv3                March 2004


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |x|S|x|x|x|x|x|x|          Sequence Number (Optional)           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        VPI            |           VCI                 |PTI  |C|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                    ATM Cell Payload (48-bytes)                |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                "
                                "
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        VPI            |           VCI                 |PTI  |C|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                    ATM Cell Payload (48-bytes)                |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    In the simplest case, this encapsulation can be used to transmit
    a single ATM cell per Pseudo Wire PDU. However, in order to
    provide better Pseudo Wire bandwidth efficiency, several ATM cells
    may be optionally encapsulated into single Pseudo Wire PDU.

    The maximum number of concatenated cells in a packet is limited by
    the MTU size of the session and also by the ability  of egress
    LCCE to process them.  For more detail about ATM Maximum Concatenated
    cells, please refer to Section 6.

5.2.1 ATM VCC Cell-Relay Service

    A VCC cell relay service may be provided by mapping an ATM Virtual
    Channel Connection to a single Pseudo-Wire using cell mode
    encapsulation as defined in section 5.2.

    An LCCE may map one or more VCCs to a single PW. However, a service
    provider may wish to provision a single VCC to a PW in order to satify
    QOS or restoration requirement.

5.2.2 ATM VPC Cell-Relay Service

    A Virtual Path Connection cell relay service may be provided by
    mapping an ATM Virtual Path Connection to single Pseudo Wire using
    cell mode encapsulation as defined in section 5.2.

    An LCCE may map one or more VPCs to a single Pseudo Wire.



Sanjeev, et al.             Standards Track                    [Page 11]





INTERNET DRAFT              ATM over L2TPv3                March 2004


5.2.3 ATM Port Cell-Relay Service

    ATM port cell relay service allows an ATM port to be connected to
    only one other ATM port. All ATM cells that are received at the
    ingress ATM port on the LCCE, is encapsulated as per section 5.2
    into Pseudo wire PDU and sent to peer LCCE.

    Each LCCE MUST discard any idle/unassigned cells received on an ATM port
    associated with an ATM PW.

5.3 OAM Cell Support

    The OAM cells are defined in [I610-1], [I610-2], [I610-3] and [ATMSEC]
    can be categoried as:

       a. Fault Management
       b. Performance monitoring and reproting
       c. Activation/deactivation
       d. System Management (e.g. security OAM cells).

    OAM Cells are always encapsulated using cell mode encapsulation,
    regardless of the encapsulation format used for user data.

5.3.1 VCC switching

    The LCCEs SHOULD be able to pass the F5 segment and end-to-end Fault
    Management, Resource Management (RM cells), Performance Management,
    Activation/deactivation and System Management OAM cells.

    F4 OAM cells are inserted or extracted at the VP link termination.
    These OAM cells are not seen at the VC link termination and are
    therefore not sent across the PW.

5.3.1 VPC switching

    The LCCEs MUST be able to pass the F4 segment and end-to-end Fault
    Management, Resource Management (RM cells), Performance Management,
    Activation/deactivation and System Management OAM cells transparently
    according to [I610-1].

    F5 OAM cells are not intesrted or extracted at the VP cross-connect.
    The LCCEs MUST be able to pass the F5 OAM cells transparently across
    the PW.

6. ATM Maximum Concatenated Cells AVP

    The "ATM Maximum Cells Concatenated AVP", Attribute type TBA6,
    indicates that the egress LCCE node can process a single PDU with



Sanjeev, et al.             Standards Track                    [Page 12]





INTERNET DRAFT              ATM over L2TPv3                March 2004


    concatenated cells upto a specified number of cells. An LCCE
    node transmitting concatenated cells on this PW MUST not exceed
    the maximum number of cells as specified in this AVP. This AVP
    is applicable only to ATM Cell-Relay PW types (VCC, VPC, Port
    Cell-Relay). This Attribute value may not be same in both
    direction of the specific PW.

    The Attribute Value field for this AVP has the following format:

     0                   1
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ATM Maximum Concatenated Cells|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    This AVP MAY be hidden (the H bit MAY be 0 or 1). The M bit for this
    AVP MAY be set to 0, but MAY vary (see Section 5.2 of [L2TPv3]).  The
    length (before hiding) of this AVP is 8.

    This AVP is sent in an ICRQ, ICRP during session negotiation or via
    SLI control messages when LCCE changes the maximum number of
    Concatenated Cells configuration for given ATM cell-relay Circuit.

7. OAM Emulation Required AVP

    An "OAM Emulation Required AVP" Attribute type, TBA7 MAY be needed to
    signal OAM Emulation in AAL5 SDU mode if LCCE does not support
    transport of OAM cells across L2TP session. If OAM Cell Emulation is
    configured or detected via some other means on one side, the other
    LCCE MUST support OAM Cell Emulation as well.

    This AVP is exchanged during session negotiation (in ICRQ, ICRP) or
    during life of the session via SLI control message. If the other LCCE
    can not support the OAM Cell Emulation, the associated L2TP session
    MUST be torn down via CDN message with result code, TBA8.

    OAM Emulation AVP is a boolean AVP, having no Attribute Value. Its
    absence is FALSE and its presence is TRUE. This AVP MAY be hidden
    (the H bit MAY be 0 or 1). The M bit for this AVP SHOULD be set to 0,
    but MAY vary (see Section 5.2 of [L2TPv3]). The Length (before
    hiding) of this AVP is 6.

8. ATM defects mapping and status notification

    ATM OAM alarms or circuit status is indicated via Circuit Status AVP
    as defined in  Section 5.4.5 of [L2TPv3]. For reference, usage of
    this AVP is shown below.




Sanjeev, et al.             Standards Track                    [Page 13]





INTERNET DRAFT              ATM over L2TPv3                March 2004


     0                   1
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Reserved        |A|N|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    The Value is a 16 bit mask with the two least significant bits
    defined and the remaining bits reserved for future use. Reserved bits
    MUST be set to 0 when sending, and ignored upon receipt.

    The A (Active) bit indicates whether the ATM Circuit is ACTIVE (1) or
    INACTIVE (0).

    The N (New) bit indicates whether the ATM circuit status indication
    is for a new Circuit (1) or an existing ATM Circuit (0).

8.1 ATM Alarm Status AVP

    An "ATM Alarm Status AVP" attribute type, TBA9 indicates the reason
    for the ATM circuit status and specific alarm type, if any, to its
    peer LCCE node. This OPTIONAL AVP MAY be present in SLI message with
    Circuit Status AVP.

    The Attribute Value field for this AVP has the following format:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Circuit Status Reason         |         Alarm             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    The Circuit status reason is a 2-octets unsigned integer and Alarm
    Type is also a 2-octets unsigned integer.

    This AVP MAY be hidden (the H bit MAY be 0 or 1). The m bit for this
    AVP SHOULD be set to 0, but MAY vary (see Section 5.2 of [L2TPv3]).
    The Length (before hiding) of this AVP is 10 octets.

    This AVP is sent in SLI message to indicate the additional
    information about the ATM circuit status.

    Circuit Status Reason values for the SLI message are as follows:

       0        - Reserved
       CSR-TBA1 - No alarm or alarm cleared (default for Active Status)
       CSR-TBA2 - Unspecified or unknown Alarm Received (default for
                  Inactive Status)
       CSR-TBA3 - ATM Circuit received F1 Alarm on ingress LCCE



Sanjeev, et al.             Standards Track                    [Page 14]





INTERNET DRAFT              ATM over L2TPv3                March 2004


       CSR-TBA4 - ATM Circuit received F2 Alarm on ingress LCCE
       CSR-TBA5 - ATM Circuit received F3 Alarm on ingress LCCE
       CSR-TBA6 - ATM Circuit received F4 Alarm on ingress LCCE
       CSR-TBA7 - ATM Circuit received F5 Alarm on ingress LCCE
       CSR-TBA8 - ATM Circuit down due to ATM Port shutdown on Peer LCCE
       CSR-TBA9 - ATM Circuit down due to loop-back timeout on ingress
                  LCCE

    The general ATM Alarm failures are encoded as below:

       0      - Reserved
       A-TBA1 - No Alarm type specified (default)
       A-TBA2 - Alarm Indication Signal (AIS)
       A-TBA3 - Remote Defect Indicator (RDI)
       A-TBA4 - Loss of Signal (LOS)
       A-TBA5 - Loss of pointer (LOP)
       A-TBA6 - Loss of framer (LOF)
       A-TBA7 - loopback cells (LB)
       A-TBA8 - Continuity Check (CC)

9. Security Considerations

    For generic security issues regarding PWs and ATMPWs, this document
    will eventually refer to documents from the PWE3 WG.


10. IANA Considerations

    The signaling mechanisms defined in this document rely upon the
    assignment of a ATM Pseudowire Type for ATM AAL5 SDU, ATM VCC Cell-
    relay, ATM VPC Cell-Relay, ATM Port Cell-Relay. IANA assignment of
    this value should take place within the PWE3 WG.

    This document defines a new ATM-Specific Sublayer and enumeration for
    L2-Specific Sublayer AVP to identify the ATM-Specific Sublayer.

    Two additional AVP Attribute (ATM Maximum Concatenated Cells AVP, OAM
    Emulation Required AVP) are specified in this document. These are
    required to be defined by IANA as described in Section 9.1 of
    [BCP0068].

    This document defines one L2TP Result Codes in Section 7 and 8, which
    will be defined by IANA as described in Section 9.1 of [BCP0068].

7. Acknowledgments

    Thanks for the contribution from Pony Zhu, Prasad Yaditi, Durai, Jaya
    Kumar,



Sanjeev, et al.             Standards Track                    [Page 15]





INTERNET DRAFT              ATM over L2TPv3                March 2004


    Thanks to Shoou Yiu and Fred Shu for their valuable time to review
    this document.

12. References

12.1 Normative References

       [L2TPv3]   J. Lau, M. Townsley, A. Valencia, G. Zorn, I. Goyret, G. Pall,
                  A. Rubens, B. Palter, Layer Two Tunneling Protocol a.k.a.
                  "L2TPv3," work in progress,
                  draft-ietf-l2tpext-l2tp-base-11.txt, October 2003.

       [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
                     Requirement Levels", BCP 14, RFC 2119, March 1997.

12.2 Informative References

       [PWE3ATM]  L. Martini., et al., "Encapsulation Methods for Transport of
                  ATM Cells/Frame Over IP and MPLS Networks", work in progress,
                  draft-ietf-pwe3-atm-encap-01.txt

       [L2TPFRAG] A. Malis, W. M. Townsley, "PWE3 Fragmentation and Reassembly",
                  draft-ietf-pwe3-fragmentation-00.txt

       [FRF8.1]   "Frame Relay / ATM PVC Service Interworking Implementation
                  Agreement (FRF 8.1)", Frame Relay Forum 2000.

       [BCP0068]  Townsley, W., "Layer Two Tunneling Protocol (L2TP) Internet
                  Assigned Numbers Authority (IANA) Considerations Update"
                  RFC3438, BCP0068, December 2002

       [I610-1]   ITU-T Recommendation I.610 (1999): B-ISDN operation and
                  maintenance principles and functions

       [I610-2]   ITU-T Recommendation I.610, Corrigendum 1 (2000): B-ISDN
                  operation and maintenance principles and functions
                  (corrigendum 1)

       [I610-3]   ITU-T Recommendation I.610, Amendment 1 (2000): B-ISDN
                  operation and maintenance principles and functions
                  (Amendment 1)

       [ATMSEC]   ATM Forum Specification, af-sec-0100.002 (2001): ATM Security
                  Specification version 1.1







Sanjeev, et al.             Standards Track                    [Page 16]





INTERNET DRAFT              ATM over L2TPv3                March 2004


13. Contacts

    Sanjeev Singh
    cisco Systems
    170 W. Tasman Drive
    San Jose, CA  95134
    sanjeevs@cisco.com

    W. Mark Townsley
    cisco Systems
    7025 Kit Creek Road
    PO Box 14987
    Research Triangle Park, NC 27709
    mark@townsley.net

    Jed Lau
    cisco Systems
    170 W. Tasman Drive
    San Jose, CA  95134
    jedlau@cisco.com

Full Copyright Statement

    Copyright (C) The Internet Society (2003).  All Rights Reserved.

    This document and translations of it may be copied and furnished to
    others, and derivative works that comment on or otherwise explain it
    or assist in its implementation may be prepared, copied, published
    and distributed, in whole or in part, without restriction of any
    kind, provided that the above copyright notice and this paragraph are
    included on all such copies and derivative works.  However, this
    document itself may not be modified in any way, such as by removing
    the copyright notice or references to the Internet Society or other
    Internet organizations, except as needed for the purpose of
    developing Internet standards in which case the procedures for
    copyrights defined in the Internet Standards process must be
    followed, or as required to translate it into languages other than
    English.

    The limited permissions granted above are perpetual and will not be
    revoked by the Internet Society or its successors or assigns.

    This document and the information contained herein is provided on an
    "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
    TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
    BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
    HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
    MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE."



Sanjeev, et al.             Standards Track                    [Page 17]





INTERNET DRAFT              ATM over L2TPv3                March 2004


Intellectual Property

    The IETF takes no position regarding the validity or scope of any
    intellectual property or other rights that might be claimed to
    pertain to the implementation or use of the technology described in
    this document or the extent to which any license under such rights
    might or might not be available; neither does it represent that it
    has made any effort to identify any such rights.  Information on the
    IETF's procedures with respect to rights in standards-track and
    standards-related documentation can be found in BCP-11 [RFC2028].
    Copies of claims of rights made available for publication and any
    assurances of licenses to be made available, or the result of an
    attempt made to obtain a general license or permission for the use of
    such proprietary rights by implementors or users of this
    specification can be obtained from the IETF Secretariat.

    The IETF invites any interested party to bring to its attention any
    copyrights, patents or patent applications, or other proprietary
    rights which may cover technology that may be required to practice
    this standard.  Please address the information to the IETF Executive
    Director.






























Sanjeev, et al.             Standards Track                    [Page 18]





