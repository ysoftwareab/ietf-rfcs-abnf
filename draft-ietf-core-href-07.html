<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Constrained Resource Identifiers</title>
<meta content="Carsten Bormann" name="author">
<meta content="Henk Birkholz" name="author">
<meta content="
       The Constrained Resource Identifier (CRI) is a complement to the Uniform
Resource Identifier (URI) that serializes the URI components in Concise
Binary Object Representation (CBOR) instead of a sequence of characters.
This simplifies parsing, comparison and reference resolution in
environments with severe limitations on processing power, code size, and
memory size. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="draft-ietf-core-href-07" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-core-href.v2v3-07-uuyp2ez5.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Constrained Resource Identifiers</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Bormann &amp; Birkholz</td>
<td class="center">Expires 28 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">CoRE Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-core-href-07</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-10-25" class="published">25 October 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-28">28 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Bormann, <span class="editor">Ed.</span>
</div>
<div class="org">Universität Bremen TZI</div>
</div>
<div class="author">
      <div class="author-name">H. Birkholz</div>
<div class="org">Fraunhofer SIT</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Constrained Resource Identifiers</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The Constrained Resource Identifier (CRI) is a complement to the Uniform
Resource Identifier (URI) that serializes the URI components in Concise
Binary Object Representation (CBOR) instead of a sequence of characters.
This simplifies parsing, comparison and reference resolution in
environments with severe limitations on processing power, code size, and
memory size.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues-2">
<a href="#name-discussion-venues-2" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on the
Constrained RESTful Environments Working Group mailing list (core@ietf.org),
which is archived at <a href="https://mailarchive.ietf.org/arch/browse/core/">https://mailarchive.ietf.org/arch/browse/core/</a>.
Source for this draft and an issue tracker can be found at
<a href="https://github.com/core-wg/href">https://github.com/core-wg/href</a><a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-2">
<a href="#name-status-of-this-memo-2" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 April 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-2">
<a href="#name-copyright-notice-2" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-2">
<a href="#name-table-of-contents-2" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-2" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-notational-conventions-2" class="xref">Notational Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-constraints-2" class="xref">Constraints</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-constraints-by-example-2" class="xref">Constraints by example</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-constraints-not-expressed-by" class="xref">Constraints not expressed by the data model</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-creation-and-normalization-2" class="xref">Creation and Normalization</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-comparison-2" class="xref">Comparison</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-cri-references-2" class="xref">CRI References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-cbor-serialization-2" class="xref">CBOR Serialization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-ingesting-and-encoding-a-cri" class="xref">Ingesting and encoding a CRI Reference</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-reference-resolution-2" class="xref">Reference Resolution</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-relationship-between-cris-ur" class="xref">Relationship between CRIs, URIs and IRIs</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-converting-cris-to-uris-2" class="xref">Converting CRIs to URIs</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-implementation-status-2" class="xref">Implementation Status</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations-2" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations-2" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references-2" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references-2" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references-2" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-cddl-specification-2" class="xref">CDDL specification</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="xref">Appendix B</a>.  <a href="#name-change-log-2" class="xref">Change Log</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-C" class="xref"></a><a href="#name-acknowledgements-2" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-D" class="xref"></a><a href="#name-contributors-2" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-E" class="xref"></a><a href="#name-authors-addresses-2" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction-2">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-2" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The <span><a href="#RFC3986" class="xref">Uniform Resource Identifier (URI)</a> [<a href="#RFC3986" class="xref">RFC3986</a>]</span> and its most common
usage, the URI reference, are the Internet standard for linking to
resources in hypertext formats such as <span><a href="#W3C.REC-html52-20171214" class="xref">HTML</a> [<a href="#W3C.REC-html52-20171214" class="xref">W3C.REC-html52-20171214</a>]</span>
or the <span><a href="#RFC8288" class="xref">HTTP "Link" header field</a> [<a href="#RFC8288" class="xref">RFC8288</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">A URI reference is a sequence of characters chosen from the repertoire
of US-ASCII characters.
The individual components of a URI reference are delimited by a number
of reserved characters, which necessitates the use of a character escape
mechanism called "percent-encoding" when these reserved characters are
used in a non-delimiting function.
The resolution of URI references involves parsing a character sequence
into its components, combining those components with the components of a
base URI, merging path components, removing dot-segments, and
recomposing the result back into a character sequence.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Overall, the proper handling of URI references is quite intricate.
This can be a problem especially in <span><a href="#RFC7228" class="xref">constrained environments</a> [<a href="#RFC7228" class="xref">RFC7228</a>]</span>,
where nodes often have severe code size and memory size limitations.
As a result, many implementations in such environments support only an
ad-hoc, informally-specified, bug-ridden, non-interoperable subset of
half of RFC 3986.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">This document defines the <em>Constrained Resource Identifier (CRI)</em> by
constraining URIs to a simplified subset and serializing their
components in <span><a href="#RFC8949" class="xref">Concise Binary Object Representation (CBOR)</a> [<a href="#RFC8949" class="xref">RFC8949</a>]</span>
instead of a sequence of characters.
This allows typical operations on URI references such as parsing,
comparison and reference resolution (including all corner cases) to be
implemented in a comparatively small amount of code.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">As a result of simplification, however, CRIs are not capable of
expressing all URIs permitted by the generic syntax of RFC 3986 (hence
the "constrained" in "Constrained Resource Identifier").
The supported subset includes all URIs of the
<span><a href="#RFC7252" class="xref">Constrained Application Protocol (CoAP)</a> [<a href="#RFC7252" class="xref">RFC7252</a>]</span>, most URIs of the
<span><a href="#RFC7230" class="xref">Hypertext Transfer Protocol (HTTP)</a> [<a href="#RFC7230" class="xref">RFC7230</a>]</span>,
<span><a href="#RFC8141" class="xref">Uniform Resource Names (URNs)</a> [<a href="#RFC8141" class="xref">RFC8141</a>]</span>, and other similar URIs.
The exact constraints are defined in <a href="#constraints" class="xref">Section 2</a>.<a href="#section-1-5" class="pilcrow">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions-2">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions-2" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL</span>
NOT", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">In this specification, the term "byte" is used in its now customary
sense as a synonym for "octet".<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">Terms defined in this document appear in <em>cursive</em> where they
are introduced (rendered in plain text as the new term surrounded by
underscores).<a href="#section-1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="constraints">
<section id="section-2">
      <h2 id="name-constraints-2">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-constraints-2" class="section-name selfRef">Constraints</a>
      </h2>
<p id="section-2-1">A Constrained Resource Identifier consists of the same five components
as a URI: scheme, authority, path, query, and fragment.
The components are subject to the following constraints:<a href="#section-2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="olPercent" id="section-2-2">
<dt>C1.</dt>
<dd id="section-2-2.1">
<div id="c-scheme">The scheme name can be any Unicode string (see
Definition D80 in <span>[<a href="#Unicode" class="xref">Unicode</a>]</span>) that matches the syntax of a URI
scheme (see <span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.1" class="relref">Section 3.1</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>, which constrains schemes to
ASCII) and is lowercase (see Definition D139 in <span>[<a href="#Unicode" class="xref">Unicode</a>]</span>).
The scheme is always present.<a href="#c-scheme" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C2.</dt>
<dd id="section-2-2.2">
<div id="c-authority">
          <p id="section-2-2.2.1">An authority is always a host identified by an IP
address or registered name, along with optional port information.
User information is not supported.<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
<p id="section-2-2.2.2">
Alternatively, the authority can be absent; the two cases for this
defined in <span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.3" class="relref">Section 3.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span> are modeled by two different
values used in place of an absent authority:<a href="#section-2-2.2.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.2.3.1">the path can begin with a root ("/", as when the authority is
present), or<a href="#section-2-2.2.3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2-2.2.3.2">the path can be rootless.<a href="#section-2-2.2.3.2" class="pilcrow">¶</a>
</li>
          </ul>
</div>
        </dd>
<dd class="break"></dd>
<dt>C3.</dt>
<dd id="section-2-2.3">
<div id="c-ip-address">An IP address can be either an IPv4 address or an
IPv6 address, optionally with a zone identifier <span>[<a href="#RFC6874" class="xref">RFC6874</a>]</span>.
Future versions of IP are not supported.<a href="#c-ip-address" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C4.</dt>
<dd id="section-2-2.4">
<div id="c-reg-name">A registered name is a sequence of one or more
<em>labels</em>, which, when joined with dots (".") in between them,
result in a Unicode string that is lowercase and in Unicode
Normalization Form C (NFC) (see Definition D120 in <span>[<a href="#Unicode" class="xref">Unicode</a>]</span>).
(The syntax may be further restricted by the scheme.)<a href="#c-reg-name" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C5.</dt>
<dd id="section-2-2.5">
<div id="c-port-range">A port is always an integer in the range from 0 to 65535.
Ports outside this range, empty ports (port subcomponents with no
digits, see <span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.2.3" class="relref">Section 3.2.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>), or ports with redundant
leading zeros, are not supported.<a href="#c-port-range" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C6.</dt>
<dd id="section-2-2.6">
<div id="c-port-omitted">The port is omitted if and only if the port would be the same as the
scheme's default port (provided the scheme is defining such a default
port) or the scheme is not using ports.<a href="#c-port-omitted" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C7.</dt>
<dd id="section-2-2.7">
<div id="c-path">A path consists of zero or more path segments.
A path must not consist of a single zero-length path segment, which
is considered equivalent to a path of zero path segments.<a href="#c-path" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C8.</dt>
<dd id="section-2-2.8">
<div id="c-path-segment">A path segment can be any Unicode string that is
in NFC, with the exception of the special "." and ".." complete path
segments.
It can be the zero-length string. No special constraints are placed
on the first path segment.<a href="#c-path-segment" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C9.</dt>
<dd id="section-2-2.9">
<div id="c-query">A query always consists of one or more query parameters.
A query parameter can be any Unicode string that is in NFC.
It is often in the form of a "key=value" pair.
When converting a CRI to a URI, query parameters are separated by an
ampersand ("&amp;") character.
(This matches the structure and encoding of the target URI in CoAP
requests.)
Queries are optional; there is a difference between an absent query
and a single query parameter that is the empty string.<a href="#c-query" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C10.</dt>
<dd id="section-2-2.10">
<div id="c-fragment">A fragment identifier can be any Unicode string that
   is in NFC.
   Fragment identifiers are optional; there is a difference between an
   absent fragment identifier and a fragment identifier that is the
   empty string.<a href="#c-fragment" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C11.</dt>
<dd id="section-2-2.11">
<div id="c-escaping">The syntax of registered names, path segments, query
   parameters, and fragment identifiers may be further restricted and
   sub-structured by the scheme.
   There is no support, however, for escaping sub-delimiters
   that are not intended to be used in a delimiting function.<a href="#c-escaping" class="pilcrow">¶</a>
</div>
        </dd>
<dd class="break"></dd>
<dt>C12.</dt>
<dd id="section-2-2.12">
<div id="c-mapping">When converting a CRI to a URI, any character that is
   outside the allowed character range or is a delimiter in the URI syntax
   is percent-encoded.
   For CRIs, percent-encoding always uses the UTF-8 encoding form (see
   Definition D92 in <span>[<a href="#Unicode" class="xref">Unicode</a>]</span>) to convert the character to a sequence
   of bytes (that is then converted to a sequence of %HH triplets).<a href="#c-mapping" class="pilcrow">¶</a>
</div>
      </dd>
<dd class="break"></dd>
</dl>
<div id="constraints-by-example">
<section id="section-2.1">
        <h3 id="name-constraints-by-example-2">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-constraints-by-example-2" class="section-name selfRef">Constraints by example</a>
        </h3>
<p id="section-2.1-1">While most URIs in everyday use can be converted to CRIs and back to URIs
matching the input after syntax-based normalization of the URI,
these URIs illustrate the constraints by example:<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1-2.1">
            <p id="section-2.1-2.1.1"><code>https://host%ffname</code>, <code>https://example.com/x?data=%ff</code><a href="#section-2.1-2.1.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.1.2">
All URI components must, after percent decoding, be valid UTF-8 encoded text.
Bytes that are not valid UTF-8 show up, for example, in BitTorrent web seeds.<a href="#section-2.1-2.1.2" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-2.1-2.2">
            <p id="section-2.1-2.2.1"><code>https://example.com/component%3bone;component%3btwo</code>, <code>http://example.com/component%3dequals</code><a href="#section-2.1-2.2.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.2.2">
While delimiters can be used in an escaped and unescaped form in URIs with generally distinct meanings,
CRIs only support one escapable delimiter character per component,
which is the delimiter by which the component is split up in the CRI.<a href="#section-2.1-2.2.2" class="pilcrow">¶</a></p>
<p id="section-2.1-2.2.3">
Note that the separators <code>.</code> (for authority parts), <code>/</code> (for paths), <code>&amp;</code> (for query parameters)
are special in that they are syntactic delimiters of their respective components in CRIs.
Thus, the following examples <em>are</em> convertible to CRIs:<a href="#section-2.1-2.2.3" class="pilcrow">¶</a></p>
<p id="section-2.1-2.2.4"><code>https://interior%2edot/</code><a href="#section-2.1-2.2.4" class="pilcrow">¶</a></p>
<p id="section-2.1-2.2.5"><code>https://example.com/path%2fcomponent/second-component</code><a href="#section-2.1-2.2.5" class="pilcrow">¶</a></p>
<p id="section-2.1-2.2.6"><code>https://example.com/x?ampersand=%26&amp;questionmark=?</code><a href="#section-2.1-2.2.6" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-2.1-2.3">
            <p id="section-2.1-2.3.1"><code>https://alice@example.com/</code><a href="#section-2.1-2.3.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.3.2">
The user information can not be expressed in CRIs.<a href="#section-2.1-2.3.2" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-2.1-2.4">
            <p id="section-2.1-2.4.1">URIs with an authority but a completely empty path (eg. <code>http://example.com</code>)<a href="#section-2.1-2.4.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.4.2">
CRIs with an authority component always produce at least a slash in the path component.<a href="#section-2.1-2.4.2" class="pilcrow">¶</a></p>
<p id="section-2.1-2.4.3">
For generic schemes, the conversion of <code>scheme://example.com</code> to a CRI is impossible
because no CRI produces a URI with an authority not followed by a slash following the rules of <a href="#cri-to-uri" class="xref">Section 6.1</a>.
Most schemes do not distinguish between the empty path and the path containing a single slash when an authority is set
(as recommended in <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>).
For these schemes, that equivalence allows converting even the slash-less URI to a CRI
(which, when converted back, produces a slash after the authority).<a href="#section-2.1-2.4.3" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="constraints-not-expressed-by-the-data-model">
<section id="section-2.2">
        <h3 id="name-constraints-not-expressed-by">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-constraints-not-expressed-by" class="section-name selfRef">Constraints not expressed by the data model</a>
        </h3>
<p id="section-2.2-1">There are syntactically valid CRIs and CRI references that can not be converted into a URI or URI reference, respectively.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">For CRI references, this is acceptable -- they can be resolved still and result in a valid CRI that can be converted back.
(An example of this is <code>[0, ["p"]]</code> which appends a slash and the path segment "p" to its base).<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">(Full) CRIs that do not correspond to a valid URI are not valid on their own, and can not be used.
Normatively they are characterized by the <a href="#cri-to-uri" class="xref">Section 6.1</a> process producing a valid and syntax-normalized URI.
For easier understanding, they are listed here:<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-4.1">
            <p id="section-2.2-4.1.1">CRIs (and CRI references) containing a path component "." or "..".<a href="#section-2.2-4.1.1" class="pilcrow">¶</a></p>
<p id="section-2.2-4.1.2">
These would be removed by the remove_dot_segments algorithm of <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>,
and thus never produce a normalized URI after resolution.<a href="#section-2.2-4.1.2" class="pilcrow">¶</a></p>
<p id="section-2.2-4.1.3">
(In CRI references, the <code>discard</code> value is used to afford segment removal,
and with "." being an unreserved character, expressing them as "%2e" and "%2e%2e" is not even viable,
let alone practical).<a href="#section-2.2-4.1.3" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-2.2-4.2">
            <p id="section-2.2-4.2.1">CRIs without authority whose path starts with two or more empty segments.<a href="#section-2.2-4.2.1" class="pilcrow">¶</a></p>
<p id="section-2.2-4.2.2">
When converted to URIs, these would violate the requirement that in absence of an authority, a URI's path can not begin with two slash characters,
and they would be indistinguishable from a URI with a shorter path and a present but empty authority component.<a href="#section-2.2-4.2.2" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="creation-and-normalization">
<section id="section-3">
      <h2 id="name-creation-and-normalization-2">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-creation-and-normalization-2" class="section-name selfRef">Creation and Normalization</a>
      </h2>
<p id="section-3-1">In general, resource identifiers are created on the initial creation of a
resource with a certain resource identifier, or the initial exposition
of a resource under a particular resource identifier.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">A Constrained Resource Identifier <span class="bcp14">SHOULD</span> be created by
the naming authority that governs the namespace of the resource
identifier (see also <span>[<a href="#RFC8820" class="xref">RFC8820</a>]</span>).
For example, for the resources of an HTTP origin server,
that server is responsible for creating the CRIs for those resources.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">The naming authority <span class="bcp14">MUST</span> ensure that any CRI created
satisfies the constraints defined in <a href="#constraints" class="xref">Section 2</a>. The creation of a
CRI fails if the CRI cannot be validated to satisfy all of the
constraints.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">If a naming authority creates a CRI from user input, it <span class="bcp14">MAY</span> apply
the following (and only the following) normalizations to get the CRI
more likely to validate:<a href="#section-3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-5.1">map the scheme name to lowercase (<a href="#c-scheme" class="xref">C1</a>);<a href="#section-3-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.2">map the registered name to NFC (<a href="#c-reg-name" class="xref">C4</a>) and split it on
embedded dots;<a href="#section-3-5.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.3">elide the port if it is the default port for the scheme
(<a href="#c-port-omitted" class="xref">C6</a>);<a href="#section-3-5.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.4">elide a single zero-length path segment (<a href="#c-path" class="xref">C7</a>);<a href="#section-3-5.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.5">map path segments, query parameters and the fragment identifier to NFC
(<a href="#c-path-segment" class="xref">C8</a>, <a href="#c-query" class="xref">C9</a>, <a href="#c-fragment" class="xref">C10</a>).<a href="#section-3-5.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-6">Once a CRI has been created, it can be used and transferred without
further normalization.
All operations that operate on a CRI <span class="bcp14">SHOULD</span> rely on the
assumption that the CRI is appropriately pre-normalized.
(This does not contradict the requirement that when CRIs are
transferred, recipients must operate on as-good-as untrusted input and
fail gracefully in the face of malicious inputs.)<a href="#section-3-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="comparison">
<section id="section-4">
      <h2 id="name-comparison-2">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-comparison-2" class="section-name selfRef">Comparison</a>
      </h2>
<p id="section-4-1">One of the most common operations on CRIs is comparison: determining
whether two CRIs are equivalent, without dereferencing the CRIs (using
them to access their respective resource(s)).<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Determination of equivalence or difference of CRIs is based on simple
component-wise comparison. If two CRIs are identical
component-by-component (using code-point-by-code-point comparison for
components that are Unicode strings) then it is safe to conclude that
they are equivalent.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">This comparison mechanism is designed to minimize false negatives while
strictly avoiding false positives.
The constraints defined in <a href="#constraints" class="xref">Section 2</a> imply the most
common forms of syntax- and scheme-based normalizations in URIs, but do
not comprise protocol-based normalizations that require accessing the
resources or detailed knowledge of the scheme's dereference algorithm.
False negatives can be caused, for example, by CRIs that are not
appropriately pre-normalized and by resource aliases.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">When CRIs are compared to select (or avoid) a network action, such as
retrieval of a representation, fragment components (if any) should be
excluded from the comparison.<a href="#section-4-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="cri-references">
<section id="section-5">
      <h2 id="name-cri-references-2">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-cri-references-2" class="section-name selfRef">CRI References</a>
      </h2>
<p id="section-5-1">The most common usage of a Constrained Resource Identifier is to embed
it in resource representations, e.g., to express a hyperlink between the
represented resource and the resource identified by the CRI.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">This section defines the serialization of CRIs in
<span><a href="#RFC8949" class="xref">Concise Binary Object Representation (CBOR)</a> [<a href="#RFC8949" class="xref">RFC8949</a>]</span>.
To reduce representation size, CRIs are not serialized directly.
Instead, CRIs are indirectly referenced through <em>CRI references</em>.
These take advantage of hierarchical locality and provide a very compact
encoding.
The CBOR serialization of CRI references is specified in
<a href="#cbor-serialization" class="xref">Section 5.1</a>.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">The only operation defined on a CRI reference is <em>reference resolution</em>:
the act of transforming a CRI reference into a CRI.

An application <span class="bcp14">MUST</span> implement this operation by applying
the algorithm specified in <a href="#reference-resolution" class="xref">Section 5.3</a> (or any algorithm
that is functionally equivalent to it).<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">The reverse operation of transforming a CRI into a CRI reference is
unspecified;
implementations are free to use any algorithm as long as reference
resolution of the resulting CRI reference yields the original CRI.
Notably, a CRI reference is not required to satisfy all of the
constraints of a CRI; the only requirement on a CRI reference is that
reference resolution <span class="bcp14">MUST</span> yield the original CRI.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">When testing for equivalence or difference, applications <span class="bcp14">SHOULD NOT</span>
directly compare CRI references; the references should be
resolved to their respective CRI before comparison.<a href="#section-5-5" class="pilcrow">¶</a></p>
<div id="cbor-serialization">
<section id="section-5.1">
        <h3 id="name-cbor-serialization-2">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-cbor-serialization-2" class="section-name selfRef">CBOR Serialization</a>
        </h3>
<p id="section-5.1-1">A CRI reference is encoded as a CBOR array <span>[<a href="#RFC8949" class="xref">RFC8949</a>]</span>, with the
structure as described in the <span><a href="#RFC8610" class="xref">Concise Data Definition Language
(CDDL)</a> [<a href="#RFC8610" class="xref">RFC8610</a>]</span> as follows:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div id="section-5.1-2">
<pre class="lang-cddl sourcecode">
; not expressed in this CDDL spec: trailing nulls to be left off

CRI-Reference = [
  ((scheme / null, authority / no-authority)
   // discard),                 ; relative reference
  path / null,
  query / null,
  fragment / null
]

scheme      = scheme-name / scheme-id
scheme-name = text .regexp "[a-z][a-z0-9+.-]*"
scheme-id   = (COAP / COAPS / HTTP / HTTPS / other-scheme)
              .within nint
COAP = -1 COAPS = -2 HTTP = -3 HTTPS = -4
other-scheme = nint .feature "scheme-id-extension"

no-authority = NOAUTH-NOSLASH / NOAUTH-LEADINGSLASH
NOAUTH-NOSLASH = null
NOAUTH-LEADINGSLASH = true

authority   = [host, ?port]
host        = (host-name // host-ip)
host-name   = (*text) ; lowercase, NFC labels
host-ip     = (bytes .size 4 //
               (bytes .size 16, ?zone-id))
zone-id     = text
port        = 0..65535

discard     = DISCARD-ALL / 0..127
DISCARD-ALL = true
path        = [*text]
query       = [*text]
fragment    = text
</pre><a href="#section-5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1-3">This CDDL specification is simplified for exposition and needs to be augmented by the
following rule for interchange: Trailing null values are removed, and
two leading null values (scheme and authority both not given) are
represented by using the <code>discard</code> alternative instead.
A complete CDDL specification is given in <a href="#cddl-complete" class="xref">Appendix A</a>.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">The rules <code>scheme</code>, <code>authority</code>, <code>path</code>, <code>query</code>, <code>fragment</code>
correspond to the (sub-)components of a CRI, as described in
<a href="#constraints" class="xref">Section 2</a>, with the addition of the <code>discard</code> section.
The <code>discard</code> section can be used when neither a scheme nor an
authority is present.
It then expresses path
prefixes such as "/",
"./", "../", "../../", etc.
The exact semantics of the section values are defined by
<a href="#reference-resolution" class="xref">Section 5.3</a>.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">Most URI references that <span><a href="https://rfc-editor.org/rfc/rfc3986#section-4.2" class="relref">Section 4.2</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span> calls "relative
references" (i.e., references that need to undergo a resolution
process to obtain a URI) correspond to the CRI form that starts with
<code>discard</code>.  The exception are relative references with an <code>authority</code>
(called a "network-path reference" in <span><a href="https://rfc-editor.org/rfc/rfc3986#section-4.2" class="relref">Section 4.2</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>),
which in CRI references never carry a <code>discard</code> section (the value of
<code>discard</code> defaults to <code>true</code>).<a href="#section-5.1-5" class="pilcrow">¶</a></p>
<aside id="section-5.1-6">
          <p id="section-5.1-6.1">The structure of a CRI is visualized using the somewhat limited means
of a railroad diagram below.<a href="#section-5.1-6.1" class="pilcrow">¶</a></p>
<div id="section-5.1-6.2">
            <div class="alignLeft art-svg artwork" id="section-5.1-6.2.1">
<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 300">
                <g transform="translate(40 50)">
                  <text x="-30" y="-10">cri-reference:</text>
                  <path class="station" d="M5.5 94 v12 m 4 0 v-12" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path class="station" d="M780.5 94 v12 m 4 0 v-12" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path class="arrow" d="M397 10 l-4 3 v-6 z" fill="none" stroke="black" stroke-width="1.5"></path>
                  <rect class="rule" fill="none" height="20" rx="0" ry="0" stroke="black" stroke-width="1.5" width="70" x="90" y="90"></rect>
                  <text class="rule" text-anchor="middle" x="125" y="105">scheme</text>
                  <rect class="rule" fill="none" height="20" rx="0" ry="0" stroke="black" stroke-width="1.5" width="90" x="180" y="90"></rect>
                  <text class="rule" text-anchor="middle" x="225" y="105">authority</text>
                  <rect class="rule" fill="none" height="20" rx="0" ry="0" stroke="black" stroke-width="1.5" width="70" x="145" y="120"></rect>
                  <text class="rule" text-anchor="middle" x="180" y="135">discard</text>
                  <path class="arrow" d="M527 30 l-4 3 v-6 z" fill="none" stroke="black" stroke-width="1.5"></path>
                  <rect class="rule" fill="none" height="20" rx="0" ry="0" stroke="black" stroke-width="1.5" width="50" x="350" y="90"></rect>
                  <text class="rule" text-anchor="middle" x="375" y="105">path</text>
                  <path class="arrow" d="M562 50 l-4 3 v-6 z" fill="none" stroke="black" stroke-width="1.5"></path>
                  <rect class="rule" fill="none" height="20" rx="0" ry="0" stroke="black" stroke-width="1.5" width="50" x="450" y="90"></rect>
                  <text class="rule" text-anchor="middle" x="475" y="105">query</text>
                  <path class="arrow" d="M597 70 l-4 3 v-6 z" fill="none" stroke="black" stroke-width="1.5"></path>
                  <rect class="rule" fill="none" height="20" rx="0" ry="0" stroke="black" stroke-width="1.5" width="90" x="550" y="90"></rect>
                  <text class="rule" text-anchor="middle" x="595" y="105">fragment</text>
                  <path d="M40 20 v70" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M750 90 q0 10 10 10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M330 40 v50" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M720 90 q0 10 10 10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M430 60 v30" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M690 90 q0 10 10 10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M530 80 v10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M660 90 q0 10 10 10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M640 100 h140" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M520 100 q10 0 10 -10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M530 80 q0 -10 10 -10 h110 q10 0 10 10 v10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M500 100 h50" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M420 100 q10 0 10 -10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M430 60 q0 -10 10 -10 h240 q10 0 10 10 v30" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M400 100 h50" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M320 100 q10 0 10 -10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M330 40 q0 -10 10 -10 h370 q10 0 10 10 v50" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M290 110 v10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M215 130 h65 q10 0 10 -10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M70 120 q0 10 10 10 h65" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M290 110 q0 -10 10 -10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M270 100 h80" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M160 100 h20" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M60 100 q10 0 10 10 v10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M30 100 q10 0 10 -10" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M40 20 q0 -10 10 -10 h690 q10 0 10 10 v70" fill="none" stroke="black" stroke-width="1.5"></path>
                  <path d="M10 100 h80" fill="none" stroke="black" stroke-width="1.5"></path>
                </g>
              </svg><a href="#section-5.1-6.2.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-5.1-6.3">This visualization does not go into the details of the elements.<a href="#section-5.1-6.3" class="pilcrow">¶</a></p>
</aside>
<p id="section-5.1-7">Examples:<a href="#section-5.1-7" class="pilcrow">¶</a></p>
<div id="section-5.1-8">
<pre class="lang-cbor sourcecode">
[-1,             / scheme -- equivalent to "coap" /
 [h'C6336401',   / host /
  61616],        / port /
 [".well-known", / path /
  "core"]
]
</pre><a href="#section-5.1-8" class="pilcrow">¶</a>
</div>
<div id="section-5.1-9">
<pre class="lang-cbor sourcecode">
[true,                  / discard /
 [".well-known",        / path /
  "core"],
 ["rt=temperature-c"]]  / query /
</pre><a href="#section-5.1-9" class="pilcrow">¶</a>
</div>
<p id="section-5.1-10">A CRI reference is considered <em>well-formed</em> if it matches the CDDL
structure.<a href="#section-5.1-10" class="pilcrow">¶</a></p>
<p id="section-5.1-11">A CRI reference is considered <em>absolute</em> if it is well-formed
and the sequence of sections starts with a non-null <code>scheme</code>.<a href="#section-5.1-11" class="pilcrow">¶</a></p>
<p id="section-5.1-12">A CRI reference is considered <em>relative</em> if it is well-formed
and the sequence of sections is empty or starts with a section other
than those that would constitute a <code>scheme</code>.<a href="#section-5.1-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ingesting-and-encoding-a-cri-reference">
<section id="section-5.2">
        <h3 id="name-ingesting-and-encoding-a-cri">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-ingesting-and-encoding-a-cri" class="section-name selfRef">Ingesting and encoding a CRI Reference</a>
        </h3>
<p id="section-5.2-1">From an abstract point of view, a CRI Reference is a data structure
with six sections:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">scheme, authority, discard, path, query, fragment<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">Each of these sections can be unset ("null"),

except for discard,
which is always an unsigned number or <code>true</code>.  If scheme and/or
authority are non-null, discard must be <code>true</code>.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">When ingesting a CRI Reference that is in the transfer form, those
sections are filled in from the transfer form (unset sections are
filled with null), and the following steps are performed:<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-5.1">If the array is entirely empty, replace it with <code>[0]</code>.<a href="#section-5.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-5.2">If discard is present in the transfer form (i.e., the outer array
starts with true or an unsigned number), set scheme and authority to null.<a href="#section-5.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-5.3">If scheme and/or authority are present in the transfer form (i.e.,
the outer array starts with null, a text string, or a negative integer), set
discard to <code>true</code>.<a href="#section-5.2-5.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.2-6">Upon encoding the abstract form into the transfer form, the inverse
processing is performed:  If scheme and/or authority are not null, the
discard value is not transferred (it must be true in this case).  If
they are both null, they are both left out and only discard is
transferred.
Trailing null values are removed from the array.
As a special case, an empty array is sent in place for a remaining
<code>[0]</code> (URI "").<a href="#section-5.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="reference-resolution">
<section id="section-5.3">
        <h3 id="name-reference-resolution-2">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-reference-resolution-2" class="section-name selfRef">Reference Resolution</a>
        </h3>
<p id="section-5.3-1">The term "relative" implies that a "base CRI" exists against which the
relative reference is applied. Aside from fragment-only references,
relative references are only usable when a base CRI is known.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">The following steps define the process of resolving any well-formed CRI
reference against a base CRI so that the result is a CRI in the form of
an absolute CRI reference:<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.3-3">
<li id="section-5.3-3.1">Establish the base CRI of the CRI reference and express it in the
  form of an abstract absolute CRI reference.<a href="#section-5.3-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.2">Initialize a buffer with the sections from the base CRI.<a href="#section-5.3-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.3">If the value of discard is <code>true</code> in the CRI reference, replace the
path in the buffer with the empty array, unset query and
fragment, and set a <code>true</code> authority to <code>null</code>.  If the value of
discard is an unsigned number, remove as many elements
from the end of the path array; if it is non-zero, unset query and
fragment.  Set discard to <code>true</code> in the buffer.<a href="#section-5.3-3.3" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.4">If the path section is set in the CRI reference, append all
elements from the path array to the array in the path section in
the buffer; unset query and fragment.<a href="#section-5.3-3.4" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.5">Apart from the path and discard, copy all non-null sections from
the CRI reference to the buffer in sequence; unset fragment if
query is non-null and thus copied.<a href="#section-5.3-3.5" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.6">Return the sections in the buffer as the resolved CRI.<a href="#section-5.3-3.6" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="relationship-between-cris-uris-and-iris">
<section id="section-6">
      <h2 id="name-relationship-between-cris-ur">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-relationship-between-cris-ur" class="section-name selfRef">Relationship between CRIs, URIs and IRIs</a>
      </h2>
<p id="section-6-1">CRIs are meant to replace both <span><a href="#RFC3986" class="xref">Uniform Resource Identifiers (URIs)</a> [<a href="#RFC3986" class="xref">RFC3986</a>]</span>
and <span><a href="#RFC3987" class="xref">Internationalized Resource Identifiers (IRIs)</a> [<a href="#RFC3987" class="xref">RFC3987</a>]</span>
in <span><a href="#RFC7228" class="xref">constrained environments</a> [<a href="#RFC7228" class="xref">RFC7228</a>]</span>.
Applications in these environments may never need to use URIs and IRIs
directly, especially when the resource identifier is used simply for
identification purposes or when the CRI can be directly converted into a
CoAP request.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">However, it may be necessary in other environments to determine the
associated URI or IRI of a CRI, and vice versa. Applications can perform
these conversions as follows:<a href="#section-6-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-6-3">
        <dt id="section-6-3.1">
CRI to URI  </dt>
        <dd style="margin-left: 1.5em" id="section-6-3.2">
          <p id="section-6-3.2.1">A CRI is converted to a URI as specified in <a href="#cri-to-uri" class="xref">Section 6.1</a>.<a href="#section-6-3.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.3">
URI to CRI  </dt>
        <dd style="margin-left: 1.5em" id="section-6-3.4">
          <p id="section-6-3.4.1">The method of converting a URI to a CRI is unspecified;
implementations are free to use any algorithm as long as converting
the resulting CRI back to a URI yields an equivalent URI.<a href="#section-6-3.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.5">
CRI to IRI  </dt>
        <dd style="margin-left: 1.5em" id="section-6-3.6">
          <p id="section-6-3.6.1">A CRI can be converted to an IRI by first converting it to a URI as
specified in <a href="#cri-to-uri" class="xref">Section 6.1</a>, and then converting the URI
to an IRI as described in <span><a href="https://rfc-editor.org/rfc/rfc3987#section-3.2" class="relref">Section 3.2</a> of [<a href="#RFC3987" class="xref">RFC3987</a>]</span>.<a href="#section-6-3.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.7">
IRI to CRI  </dt>
        <dd style="margin-left: 1.5em" id="section-6-3.8">
          <p id="section-6-3.8.1">An IRI can be converted to a CRI by first converting it to a URI as
described in <span><a href="https://rfc-editor.org/rfc/rfc3987#section-3.1" class="relref">Section 3.1</a> of [<a href="#RFC3987" class="xref">RFC3987</a>]</span>, and then
converting the URI to a CRI as described above.<a href="#section-6-3.8.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-6-4">Everything in this section also applies to CRI references, URI
references and IRI references.<a href="#section-6-4" class="pilcrow">¶</a></p>
<div id="cri-to-uri">
<section id="section-6.1">
        <h3 id="name-converting-cris-to-uris-2">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-converting-cris-to-uris-2" class="section-name selfRef">Converting CRIs to URIs</a>
        </h3>
<p id="section-6.1-1">Applications <span class="bcp14">MUST</span> convert a CRI reference to a URI
reference by determining the components of the URI reference according
to the following steps and then recomposing the components to a URI
reference string as specified in <span><a href="https://rfc-editor.org/rfc/rfc3986#section-5.3" class="relref">Section 5.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-6.1-2">
          <dt id="section-6.1-2.1">
scheme  </dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.2">
            <p id="section-6.1-2.2.1">If the CRI reference contains a <code>scheme</code> section, the scheme
component of the URI reference consists of the value of that
section.
Otherwise, the scheme component is unset.<a href="#section-6.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.3">
authority  </dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.4">
            <p id="section-6.1-2.4.1">If the CRI reference contains a <code>host-name</code> or <code>host-ip</code> item, the
authority component of the URI reference consists of a host
subcomponent, optionally followed by a colon (":") character and a
port subcomponent.  Otherwise, the authority component is unset.<a href="#section-6.1-2.4.1" class="pilcrow">¶</a></p>
<p id="section-6.1-2.4.2">The host subcomponent consists of the value of the <code>host-name</code> or
<code>host-ip</code> item.<a href="#section-6.1-2.4.2" class="pilcrow">¶</a></p>
<p id="section-6.1-2.4.3">The <code>host-name</code> is turned into a single string by joining the
elements separated by dots (".").
Any character in the value of a <code>host-name</code> item that is not in
the set of unreserved characters (<span><a href="https://rfc-editor.org/rfc/rfc3986#section-2.3" class="relref">Section 2.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>) or
"sub-delims" (<span><a href="https://rfc-editor.org/rfc/rfc3986#section-2.2" class="relref">Section 2.2</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>) <span class="bcp14">MUST</span> be
percent-encoded.<a href="#section-6.1-2.4.3" class="pilcrow">¶</a></p>
<p id="section-6.1-2.4.4">The value of a <code>host-ip</code> item <span class="bcp14">MUST</span> be
represented as a string that matches the "IPv4address" or
"IP-literal" rule (<span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.2.2" class="relref">Section 3.2.2</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>).
Any zone-id is appended to the string, separated by "%25" as
defined in <span><a href="https://rfc-editor.org/rfc/rfc6874#section-2" class="relref">Section 2</a> of [<a href="#RFC6874" class="xref">RFC6874</a>]</span>, or as specified in a successor
zone-id specification document; this also leads to a modified
"IP-literal" rule as specified in these documents.<a href="#section-6.1-2.4.4" class="pilcrow">¶</a></p>
<p id="section-6.1-2.4.5">If the CRI reference contains a <code>port</code> item, the port
subcomponent consists of the value of that item in decimal
notation.
Otherwise, the colon (":") character and the port subcomponent are
both omitted.<a href="#section-6.1-2.4.5" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.5">
path  </dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.6">
            <p id="section-6.1-2.6.1">If the CRI reference contains a <code>discard</code> item of value <code>true</code>, the
path component is prefixed by a slash ("/") character.  If it
contains a <code>discard</code> item of value <code>0</code> and the <code>path</code> item is
present, the conversion fails.  Otherwise, the path component is
prefixed by as many "../" components as the <code>discard</code> value minus
one indicates.<a href="#section-6.1-2.6.1" class="pilcrow">¶</a></p>
<p id="section-6.1-2.6.2">If the discard item is not present and the CRI reference contains an
authority that is <code>true</code>, the path component of the URI reference is
prefixed by the zero-length string.  Otherwise, the path component
is prefixed by a slash ("/") character.<a href="#section-6.1-2.6.2" class="pilcrow">¶</a></p>
<p id="section-6.1-2.6.3">If the CRI reference contains one or more <code>path</code> items, the prefix
is followed by the value of each item, separated by a slash ("/")
character.<a href="#section-6.1-2.6.3" class="pilcrow">¶</a></p>
<p id="section-6.1-2.6.4">Any character in the value of a <code>path</code> item that is not
in the set of unreserved characters or "sub-delims" or a colon
(":") or commercial at ("@") character <span class="bcp14">MUST</span> be
percent-encoded.<a href="#section-6.1-2.6.4" class="pilcrow">¶</a></p>
<p id="section-6.1-2.6.5">If the authority component is present (not <code>null</code> or <code>true</code>) and the
path component does not match the "path-abempty" rule (<span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.3" class="relref">Section 3.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>), the conversion fails.<a href="#section-6.1-2.6.5" class="pilcrow">¶</a></p>
<p id="section-6.1-2.6.6">If the authority component is not present, but the scheme component
is, and the path component does not match the "path-absolute",
"path-rootless" (authority == <code>true</code>) or "path-empty" rule (<span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.3" class="relref">Section 3.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>), the conversion fails.<a href="#section-6.1-2.6.6" class="pilcrow">¶</a></p>
<p id="section-6.1-2.6.7">If neither the authority component nor the scheme component are
present, and the path component does not match the "path-absolute",
"path-noscheme" or "path-empty" rule (<span><a href="https://rfc-editor.org/rfc/rfc3986#section-3.3" class="relref">Section 3.3</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span>), the
conversion fails.<a href="#section-6.1-2.6.7" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.7">
query  </dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.8">
            <p id="section-6.1-2.8.1">If the CRI reference contains one or more <code>query</code> items,
the query component of the URI reference consists of the value of
each item, separated by an ampersand ("&amp;") character.
Otherwise, the query component is unset.<a href="#section-6.1-2.8.1" class="pilcrow">¶</a></p>
<p id="section-6.1-2.8.2">Any character in the value of a <code>query</code> item that is not
in the set of unreserved characters or "sub-delims" or a colon
(":"), commercial at ("@"), slash ("/") or question mark ("?")
character <span class="bcp14">MUST</span> be percent-encoded.
Additionally, any ampersand character ("&amp;") in the item
value <span class="bcp14">MUST</span> be percent-encoded.<a href="#section-6.1-2.8.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.9">
fragment  </dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.10">
            <p id="section-6.1-2.10.1">If the CRI reference contains a fragment item, the fragment
component of the URI reference consists of the value of that
item.
Otherwise, the fragment component is unset.<a href="#section-6.1-2.10.1" class="pilcrow">¶</a></p>
<p id="section-6.1-2.10.2">Any character in the value of a <code>fragment</code> item that is
not in the set of unreserved characters or "sub-delims" or a colon
(":"), commercial at ("@"), slash ("/") or question mark ("?")
character <span class="bcp14">MUST</span> be percent-encoded.<a href="#section-6.1-2.10.2" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="impl">
<section id="section-7">
      <h2 id="name-implementation-status-2">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-implementation-status-2" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-7-1">With the exception of the authority=true fix and host-names split into
labels, CRIs are implemented in <code>https://gitlab.com/chrysn/micrurus</code>.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security">
<section id="section-8">
      <h2 id="name-security-considerations-2">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations-2" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">Parsers of CRI references must operate on input that is assumed to be
untrusted. This means that parsers <span class="bcp14">MUST</span> fail gracefully
in the face of malicious inputs.
Additionally, parsers <span class="bcp14">MUST</span> be prepared to deal with
resource exhaustion (e.g., resulting from the allocation of big data
items) or exhaustion of the call stack (stack overflow).
See <span><a href="https://rfc-editor.org/rfc/rfc8949#section-10" class="relref">Section 10</a> of [<a href="#RFC8949" class="xref">RFC8949</a>]</span> for additional
security considerations relating to CBOR.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">The security considerations discussed in <span><a href="https://rfc-editor.org/rfc/rfc3986#section-7" class="relref">Section 7</a> of [<a href="#RFC3986" class="xref">RFC3986</a>]</span> and
<span><a href="https://rfc-editor.org/rfc/rfc3987#section-8" class="relref">Section 8</a> of [<a href="#RFC3987" class="xref">RFC3987</a>]</span> for URIs and IRIs also apply to CRIs.<a href="#section-8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations-2">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations-2" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">This document has no IANA actions.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references-2">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references-2" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references-2">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references-2" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3987">[RFC3987]</dt>
        <dd>
<span class="refAuthor">Duerst, M.</span> and <span class="refAuthor">M. Suignard</span>, <span class="refTitle">"Internationalized Resource Identifiers (IRIs)"</span>, <span class="seriesInfo">RFC 3987</span>, <span class="seriesInfo">DOI 10.17487/RFC3987</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3987">https://www.rfc-editor.org/info/rfc3987</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6874">[RFC6874]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span>, <span class="refAuthor">Cheshire, S.</span>, and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Representing IPv6 Zone Identifiers in Address Literals and Uniform Resource Identifiers"</span>, <span class="seriesInfo">RFC 6874</span>, <span class="seriesInfo">DOI 10.17487/RFC6874</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6874">https://www.rfc-editor.org/info/rfc6874</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8610">[RFC8610]</dt>
        <dd>
<span class="refAuthor">Birkholz, H.</span>, <span class="refAuthor">Vigano, C.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures"</span>, <span class="seriesInfo">RFC 8610</span>, <span class="seriesInfo">DOI 10.17487/RFC8610</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8610">https://www.rfc-editor.org/info/rfc8610</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8949">[RFC8949]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR)"</span>, <span class="seriesInfo">STD 94</span>, <span class="seriesInfo">RFC 8949</span>, <span class="seriesInfo">DOI 10.17487/RFC8949</span>, <time datetime="2020-12" class="refDate">December 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8949">https://www.rfc-editor.org/info/rfc8949</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Unicode">[Unicode]</dt>
      <dd>
<span class="refAuthor">The Unicode Consortium</span>, <span class="refTitle">"The Unicode Standard, Version 13.0.0"</span>, <span class="seriesInfo">ISBN 978-1-936213-26-9</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://www.unicode.org/versions/Unicode13.0.0/">https://www.unicode.org/versions/Unicode13.0.0/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references-2">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references-2" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC7228">[RFC7228]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, and <span class="refAuthor">A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7228">https://www.rfc-editor.org/info/rfc7228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7230">[RFC7230]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"</span>, <span class="seriesInfo">RFC 7230</span>, <span class="seriesInfo">DOI 10.17487/RFC7230</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7230">https://www.rfc-editor.org/info/rfc7230</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7252">[RFC7252]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Hartke, K.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"The Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7252</span>, <span class="seriesInfo">DOI 10.17487/RFC7252</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7252">https://www.rfc-editor.org/info/rfc7252</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8141">[RFC8141]</dt>
        <dd>
<span class="refAuthor">Saint-Andre, P.</span> and <span class="refAuthor">J. Klensin</span>, <span class="refTitle">"Uniform Resource Names (URNs)"</span>, <span class="seriesInfo">RFC 8141</span>, <span class="seriesInfo">DOI 10.17487/RFC8141</span>, <time datetime="2017-04" class="refDate">April 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8141">https://www.rfc-editor.org/info/rfc8141</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8288">[RFC8288]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refTitle">"Web Linking"</span>, <span class="seriesInfo">RFC 8288</span>, <span class="seriesInfo">DOI 10.17487/RFC8288</span>, <time datetime="2017-10" class="refDate">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8288">https://www.rfc-editor.org/info/rfc8288</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8820">[RFC8820]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refTitle">"URI Design and Ownership"</span>, <span class="seriesInfo">BCP 190</span>, <span class="seriesInfo">RFC 8820</span>, <span class="seriesInfo">DOI 10.17487/RFC8820</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8820">https://www.rfc-editor.org/info/rfc8820</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="W3C.REC-html52-20171214">[W3C.REC-html52-20171214]</dt>
      <dd>
<span class="refAuthor">Faulkner, S.</span>, <span class="refAuthor">Eicholz, A.</span>, <span class="refAuthor">Leithead, T.</span>, <span class="refAuthor">Danilo, A.</span>, and <span class="refAuthor">S. Moon</span>, <span class="refTitle">"HTML 5.2"</span>, <span class="seriesInfo">World Wide Web Consortium Recommendation REC-html52-20171214</span>, <time datetime="2017-12-14" class="refDate">14 December 2017</time>, <span>&lt;<a href="https://www.w3.org/TR/2017/REC-html52-20171214">https://www.w3.org/TR/2017/REC-html52-20171214</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="cddl-complete">
<section id="appendix-A">
      <h2 id="name-cddl-specification-2">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-cddl-specification-2" class="section-name selfRef">CDDL specification</a>
      </h2>
<p id="appendix-A-1">The full CDDL specification is somewhat redundant internally in order
to express trailing null suppression.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<div id="appendix-A-2">
<pre class="lang-cddl sourcecode">
; expressing null suppression

CRI-Reference = [
  ?( ((scheme, (authority / null / true)
       // (null, authority))
     // discard),                 ; relative reference
     ?( (path / null, query / null, fragment) //
        (path / null, query) //
         path)
  )
]

scheme      = scheme-name / scheme-id
scheme-name = text .regexp "[a-z][a-z0-9+.-]*"
scheme-id   = (COAP / COAPS / HTTP / HTTPS / other-scheme)
              .within nint
COAP = -1 COAPS = -2 HTTP = -3 HTTPS = -4
other-scheme = nint .feature "scheme-id-extension"

authority   = [host, ?port]
host        = (host-name // host-ip)
host-name   = (*text) ; lowercase, NFC labels
host-ip     = (bytes .size 4 //
               (bytes .size 16, ?zone-id))
zone-id     = text
port        = 0..65535

discard     = true / 0..127
path        = [*text]
query       = [*text]
fragment    = text
</pre><a href="#appendix-A-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="change-log">
<section id="appendix-B">
      <h2 id="name-change-log-2">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-change-log-2" class="section-name selfRef">Change Log</a>
      </h2>
<p id="appendix-B-1">This section is to be removed before publishing as an RFC.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">Changes from -05 to -06<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-3.1">
          <p id="appendix-B-3.1.1">rework authority:<a href="#appendix-B-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-3.1.2.1">split reg-names at dots;<a href="#appendix-B-3.1.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="appendix-B-3.1.2.2">add optional zone identifiers <span>[<a href="#RFC6874" class="xref">RFC6874</a>]</span> to IP addresses<a href="#appendix-B-3.1.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
      </ul>
<p id="appendix-B-4">Changes from -04 to -05<a href="#appendix-B-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-5.1">Simplify CBOR structure.<a href="#appendix-B-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-5.2">Add implementation status section.<a href="#appendix-B-5.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-B-6">Changes from -03 to -04:<a href="#appendix-B-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-7.1">Minor editorial improvements.<a href="#appendix-B-7.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-7.2">Renamed path.type/path-type to discard.<a href="#appendix-B-7.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-7.3">Renamed option to section, substructured into items.<a href="#appendix-B-7.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-7.4">Simplied the table "resolution-variables".<a href="#appendix-B-7.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-7.5">Use the CBOR structure inspired by Jim Schaad's proposals.<a href="#appendix-B-7.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-B-8">Changes from -02 to -03:<a href="#appendix-B-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-9.1">Expanded the set of supported schemes (#3).<a href="#appendix-B-9.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.2">Specified creation, normalization and comparison (#9).<a href="#appendix-B-9.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.3">Clarified the default value of the <code>path.type</code> option (#33).<a href="#appendix-B-9.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.4">Removed the <code>append-relation</code> path.type option (#41).<a href="#appendix-B-9.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.5">Renumbered the remaining path.types.<a href="#appendix-B-9.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.6">Renumbered the option numbers.<a href="#appendix-B-9.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.7">Restructured the document.<a href="#appendix-B-9.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-9.8">Minor editorial improvements.<a href="#appendix-B-9.8" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-B-10">Changes from -01 to -02:<a href="#appendix-B-10" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-11.1">Changed the syntax of schemes to exclude upper case characters (#13).<a href="#appendix-B-11.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-B-11.2">Minor editorial improvements (#34 #37).<a href="#appendix-B-11.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-B-12">Changes from -00 to -01:<a href="#appendix-B-12" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-13.1">None.<a href="#appendix-B-13.1" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="acknowledgements">
<section id="appendix-C">
      <h2 id="name-acknowledgements-2">
<a href="#name-acknowledgements-2" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-C-1">CRIs were developed by <span class="contact-name">Klaus Hartke</span> for use in the Constrained
RESTful Application Language (CoRAL).
The current author team is completing this work with a view to achieve
good integration with the potential use cases, both inside and outside of CoRAL.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<p id="appendix-C-2">Thanks to
<span class="contact-name">Christian Amsüss</span>,
<span class="contact-name">Ari Keränen</span>,
<span class="contact-name">Jim Schaad</span> and
<span class="contact-name">Dave Thaler</span>
for helpful comments and discussions that have shaped the
document.<a href="#appendix-C-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="contributors">
<section id="appendix-D">
      <h2 id="name-contributors-2">
<a href="#name-contributors-2" class="section-name selfRef">Contributors</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Klaus Hartke</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div dir="auto" class="left"><span class="street-address">Torshamnsgatan 23</span></div>
<div dir="auto" class="left">SE-<span class="postal-code">16483</span> <span class="locality">Stockholm</span>
</div>
<div dir="auto" class="left"><span class="country-name">Sweden</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:klaus.hartke@ericsson.com" class="email">klaus.hartke@ericsson.com</a>
</div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses-2">
<a href="#name-authors-addresses-2" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Carsten Bormann (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Universität Bremen TZI</span></div>
<div dir="auto" class="left"><span class="street-address">Postfach 330440</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-28359</span> <span class="locality">Bremen</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+49-421-218-63921" class="tel">+49-421-218-63921</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:cabo@tzi.org" class="email">cabo@tzi.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Henk Birkholz</span></div>
<div dir="auto" class="left"><span class="org">Fraunhofer SIT</span></div>
<div dir="auto" class="left"><span class="street-address">Rheinstrasse 75</span></div>
<div dir="auto" class="left">
<span class="postal-code">64295</span> <span class="locality">Darmstadt</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:henk.birkholz@sit.fraunhofer.de" class="email">henk.birkholz@sit.fraunhofer.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
