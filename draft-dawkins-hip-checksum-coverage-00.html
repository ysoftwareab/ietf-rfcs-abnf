<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Proposed Host Identity Protocol (HIP) Checksum Coverage</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Proposed Host Identity Protocol (HIP) Checksum Coverage">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">X. Jiang</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Huawei</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">P. Matthews</td></tr>
<tr><td class="header">Expires: May 13, 2008</td><td class="header">Avaya</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">S. Dawkins, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Huawei (USA)</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 10, 2007</td></tr>
</table></td></tr></table>
<h1><br />Proposed Host Identity Protocol (HIP) Checksum Coverage<br />draft-dawkins-hip-checksum-coverage-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 13, 2008.</p>

<h3>Abstract</h3>

<p>This specification suggests two changes to the Host Identity Protocol (HIP) checksum calculation. 	
	Specifically, only the HIP header and payload fields would be included in the checksum calculation, and 
	the CRC32c algorithm would be used to compute the checksum. The HIP version number would be incremented if these
	suggestions are accepted, to reflect a different checksum algorithm. 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terms">2.</a>&nbsp;
Terminology used in this document<br />
<a href="#background">3.</a>&nbsp;
Background for this Proposal<br />
<a href="#coverage">4.</a>&nbsp;
Changes to Checksum Coverage<br />
<a href="#proposal">5.</a>&nbsp;
Proposed HIP Checksum Coverage<br />
<a href="#versioning">6.</a>&nbsp;
Proposed HIP Version Change<br />
<a href="#security">7.</a>&nbsp;
Security Considerations<br />
<a href="#iana">8.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This specification suggests two changes to the Host Identity Protocol (HIP) checksum calculation.
		Each of these changes should be considered separately:
</p>
<p></p>
<ol class="text">
<li>A change to the checksum coverage in HIP, and 
</li>
<li>Replacing the 16-bit checksum with a CRC32c checksum.
</li>
</ol>

<p>The HIP version number would be incremented if these suggestions are accepted, 
		to reflect a different checksum algorithm.
</p>
<p>The checksum calculation described in this specification is used only when HIP is carried directly
		over IP. Considerations for checksum calculations when an intervening transport protocol is used
		are left to <a class='info' href='#I-D.ietf-hip-nat-traversal'>[I&#8209;D.ietf&#8209;hip&#8209;nat&#8209;traversal]<span> (</span><span class='info'>Komu, M., Henderson, T., Tschofenig, H., Melen, J., and A. Keranen, &ldquo;Basic HIP Extensions for Traversal of Network Address Translators,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
	
</p>
<a name="terms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology used in this document</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
      this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. 
</p>
<a name="background"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Background for this Proposal</h3>

<p>In section 5.1.1, the HIP base protocol draft <a class='info' href='#I-D.ietf-hip-base'>[I&#8209;D.ietf&#8209;hip&#8209;base]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>
		now specifies the following: 
</p>
<p></p>
<blockquote class="text">
<p>

   Since the checksum covers the source and destination addresses in the
   IP header, it must be recomputed on HIP-aware NAT devices.
		
</p>
<p>
   If IPv6 is used to carry the HIP packet, the pseudo-header [RFC2460]
   contains the source and destination IPv6 addresses, HIP packet length
   in the pseudo-header length field, a zero field, and the HIP protocol
   number (see Section 4) in the Next Header field.  The length field is
   in bytes and can be calculated from the HIP header length field: (HIP
   Header Length + 1) * 8.
		
</p>
<p>
   In case of using IPv4, the IPv4 UDP pseudo header format [RFC0768] is
   used.  In the pseudo header, the source and destination addresses are
   those used in the IP header, the zero field is obviously zero, the
   protocol is the HIP protocol number (see Section 4), and the length
   is calculated as in the IPv6 case.
		
</p>
</blockquote>

<p>Although the use of pseudo-headers in transport checksums has been universal practice for decades,
		this design choice is proving problematic for several applications that 
		perform HIP-level packet relays. For example:
	
</p>
<p></p>
<ul class="text">
<li>There are two active proposals in the HIP working group itself 
			that require forwarding of HIP packets, 
			"Host Identity Protocol (HIP) Rendezvous Extension" (<a class='info' href='#I-D.ietf-hip-rvs'>[I&#8209;D.ietf&#8209;hip&#8209;rvs]<span> (</span><span class='info'>Laganier, J. and L. Eggert, &ldquo;Host Identity Protocol (HIP) Rendezvous Extension,&rdquo; June&nbsp;2006.</span><span>)</span></a>) and
			"HIP Extensions for the Traversal of Network Address Translators" 
			(<a class='info' href='#I-D.ietf-hip-nat-traversal'>[I&#8209;D.ietf&#8209;hip&#8209;nat&#8209;traversal]<span> (</span><span class='info'>Komu, M., Henderson, T., Tschofenig, H., Melen, J., and A. Keranen, &ldquo;Basic HIP Extensions for Traversal of Network Address Translators,&rdquo; October&nbsp;2009.</span><span>)</span></a>). 
		
</li>
<li>Other HIP applications would also benefit. For example,
			the HIP-HOP proposal in the P2PSIP working group 
			(<a class='info' href='#I-D.matthews-p2psip-hip-hop'>[I&#8209;D.matthews&#8209;p2psip&#8209;hip&#8209;hop]<span> (</span><span class='info'>Cooper, E., &ldquo;A Distributed Transport Function in P2PSIP using HIP for Multi-Hop Overlay  Routing,&rdquo; June&nbsp;2007.</span><span>)</span></a>)includes a
			mechanism that allows intermediate peers to route HIP packets
			between peers that does not have an active direct connection (for various reasons,
			including but not limited to NAT traversal issues). 
		
</li>
</ul>

<p> Although a HIP-level relay is attractive for these mechanisms, the HIP packet
		checksum is recomputed at each relay, because the source and destination 
		IP addresses are currently included in the pseudo-header covered by the HIP checksum. 
	
</p>
<p>In addition to the checksum
		calculation overhead at each relay, intermediate recalculation means that
		checksum protection only covers the part of the path to the next HIP-aware device 
		that recalculates the checksum.
	
</p>
<p>We also note that excluding the source and destination IP addresses from the HIP checksum calculation 
		would improve the ability of HIP connections to survive interface selection
		changes, would better accommodate multihoming, and would better detect checksum failures in scenarios
		where intermediate nodes forward at the HIP layer. For example, in 
		<a class='info' href='#I-D.ietf-hip-nat-traversal'>[I&#8209;D.ietf&#8209;hip&#8209;nat&#8209;traversal]<span> (</span><span class='info'>Komu, M., Henderson, T., Tschofenig, H., Melen, J., and A. Keranen, &ldquo;Basic HIP Extensions for Traversal of Network Address Translators,&rdquo; October&nbsp;2009.</span><span>)</span></a>, checksums are recalculated when packets traverse
		HIP-aware NATs (so checksums do not protect the packets over an entire end-to-end path) and 
		checksums are set to 0 when packets traverse HIP-unaware NATs 
		(so that checksums are disabled completely).
	
</p>
<a name="coverage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Changes to Checksum Coverage</h3>

<p>This specification recommends removing pseudo-header fields from the checksum calculation, so that
		the checksum does not need to be recalculated when pseudo-header field values change. Most
		important (and probably most controversial) is the removal of source and destination IP addresses
		from the checksum calculation.
	
</p>
<p>The only bytes included in the checksum calculation are the HIP header and HIP payload bytes.
	
</p>
<p>The resulting checksum does protect the HIP header and HIP payload, but does not protect the pseudo-header
		fields associated with the HIP header and HIP payload. The resulting checksum is "end-to-end" - it
		protects the HIP header and HIP payload for packets that traverse HIP relays, where the current
		checksum calculation does not - it is recalculated at each HIP relay, so errors at intermediate HIP
		relays may not be caught if the checksum was recalculated after the error was introduced at the HIP relay.
	
</p>
<p>We believe that removal of the source and destination IP addresses from the transport checksum calculation
		is a reasonable change to the HIP protocol. If these fields are exluded from the transport checksum 
		calculation, we see no reason to include other IP-level fields as part of a transport pseudo-header
		in the checksum calculation. 
	
</p>
<a name="proposal"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Proposed HIP Checksum Coverage</h3>

<p>This proposal uses the same checksum algorithm that is used in SCTP, except that no pseudo-header fields are
		prepended to the HIP header and payload before the checksum is calculated.
	
</p>
<p>Note that the current HIP base specification uses a 16-bit checksum field. This checksum field must be
		expanded to 32 bits, in order to accommodate the crc32c checksum (also used by SCTP). Also note that 
		a reserved field is also added to preserve 8-byte alignment, as required in <a class='info' href='#RFC2460'>[RFC2460]<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1998.</span><span>)</span></a>
		to ensure alignment of subsequent IPv6 extension headers.
	
</p>
<p>The resulting modified header format is as follows:

		</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Header   | Header Length |0| Packet Type |  VER. | RES.|1|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            Checksum                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Controls             |           (Reserved)          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          (Reserved)                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                Sender's Host Identity Tag (HIT)               |
   |                                                               |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               Receiver's Host Identity Tag (HIT)              |
   |                                                               |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   /                        HIP Parameters                         /
   /                                                               /
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><p>

	
</p>
<p> The following text is taken from <a class='info' href='#RFC4960'>[RFC4960]<span> (</span><span class='info'>Stewart, R., &ldquo;Stream Control Transmission Protocol,&rdquo; September&nbsp;2007.</span><span>)</span></a>, with modifications (reflecting its use for HIP):
	
</p>
<p>When sending a HIP packet, the endpoint MUST strengthen the data
  			integrity of the transmission by including the crc32c checksum
  			value calculated on the packet, as described below.
	
</p>
<p>After the packet is constructed, the transmitter shall:
	
</p>
<p></p>
<ol class="text">
<li>Initialize the checksum field to 0's.
		
</li>
<li>Calculate the crc32c checksum of the HIP header and HIP payload.  
			Refer to appendix B of 
			<a class='info' href='#RFC4960'>[RFC4960]<span> (</span><span class='info'>Stewart, R., &ldquo;Stream Control Transmission Protocol,&rdquo; September&nbsp;2007.</span><span>)</span></a> for details of the crc32c algorithm.  And,
		
</li>
<li>Put the resultant value into the checksum field, and leave the rest of the bits unchanged.
		
</li>
</ol>

<p>When a HIP packet is received, the receiver MUST first check the
  			crc32c checksum:
	
</p>
<p></p>
<ol class="text">
<li>Store the received crc32c checksum value aside,
		
</li>
<li>Replace the 32 bits of the checksum field in the received HIP
     				packet with all '0's and calculate an crc32c checksum value of
     				the HIP header and payload.  And,
		
</li>
<li>Verify that the calculated crc32c checksum is the same as the
     				received crc32c checksum.  If not, the receiver MUST treat the
     				packet as an invalid HIP packet.
		
</li>
</ol>

<p>The default procedure for handling invalid HIP packets is to silently discard them.
	
</p>
<a name="versioning"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Proposed HIP Version Change</h3>

<p>Because this change is not backward-compatible with current HIP specifications 
		(<a class='info' href='#I-D.ietf-hip-base'>[I&#8209;D.ietf&#8209;hip&#8209;base]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>)
		or with conformant implementations to this specification, 
		we recommend changing the HIP version number from 1 to 2 for packets processed using this specification.
	
</p>
<p>Although it is certainly possible to make this change backward-compatible by adding a version negotiation
		mechanism and continuing to use HIP Version 1 with hosts that do not respond to the negotiation mechanism,
		we believe that making this change to HIP at this time, without providing such a negotiation mechanism,
		is appropriate because

		</p>
<ol class="text">
<li>The base HIP protocol specification is still an Internet Draft, as of this writing,
</li>
<li>The base HIP protocol specification is currently targeted at the Experimental track,
				so that the usual RFC 2026 considerations about incompatible changes to Standards-track
				protocols should not apply, and 
</li>
<li>The change is small and localized to setting/verifying the HIP version number itself, 
				plus computing and verifying the HIP checksum.
</li>
</ol><p>
	
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>The following security considerations are in addition to the security considerations identified in the base
		HIP protocol specification (<a class='info' href='#I-D.ietf-hip-base'>[I&#8209;D.ietf&#8209;hip&#8209;base]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>).
	
</p>
<p> This change to the HIP checksum coverage does make source and destination IP addresses less "visible" to 
		a receiving host, but this is judged to be an acceptable risk, for these reasons:
		
		</p>
<ol class="text">
<li>Off-path attackers must provide two 128-bit numbers (the source and destination HITs) that
				the host under attack will recognize as legitimate HITs. If the attacker sends packets
				with HITs that the host under attack does not recognize, these packets are simply
				dropped as invalid packets - a MUST in <a class='info' href='#I-D.ietf-hip-base'>[I&#8209;D.ietf&#8209;hip&#8209;base]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>. 
				Given that each of the two numbers is self-cerifying because it is the 
				hash of a public key, this attack is seen as computationally hard.
</li>
<li>On-path attackers who are able to learn valid source and destination HITs, in order to forge
				packets that might be used for denial of service attacks, etc. can already do much worse
				than forge packets - they can simply drop packets, or execute denial of service attacks
				on intermediate devices that would forward legitimate packets in normal operation. 
</li>
</ol><p>
	
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>The current HIP base protocol specification (<a class='info' href='#I-D.ietf-hip-base'>[I&#8209;D.ietf&#8209;hip&#8209;base]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>) includes as part of its 
		IANA considerations 
		a request that IANA create a new namespace for HIP Version
		Numbers, and add an entry for HIP Version 1. This specification defines HIP Version 2, so 
		we also request an entry in this namespace for HIP Version 2, as described in this specification.
	
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-base">[I-D.ietf-hip-base]</a></td>
<td class="author-text">Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-base-10.txt">Host Identity Protocol</a>,&rdquo; draft-ietf-hip-base-10 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-base-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4960">[RFC4960]</a></td>
<td class="author-text">Stewart, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4960">Stream Control Transmission Protocol</a>,&rdquo; RFC&nbsp;4960, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4960.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-nat-traversal">[I-D.ietf-hip-nat-traversal]</a></td>
<td class="author-text">Komu, M., Henderson, T., Tschofenig, H., Melen, J., and A. Keranen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-nat-traversal-09.txt">Basic HIP Extensions for Traversal of Network Address Translators</a>,&rdquo; draft-ietf-hip-nat-traversal-09 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-nat-traversal-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-rvs">[I-D.ietf-hip-rvs]</a></td>
<td class="author-text">Laganier, J. and L. Eggert, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-rvs-05.txt">Host Identity Protocol (HIP) Rendezvous Extension</a>,&rdquo; draft-ietf-hip-rvs-05 (work in progress), June&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-rvs-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.matthews-p2psip-hip-hop">[I-D.matthews-p2psip-hip-hop]</a></td>
<td class="author-text">Cooper, E., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-matthews-p2psip-hip-hop-00.txt">A Distributed Transport Function in P2PSIP using HIP for Multi-Hop Overlay  Routing</a>,&rdquo; draft-matthews-p2psip-hip-hop-00 (work in progress), June&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-matthews-p2psip-hip-hop-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC0768">[RFC0768]</a></td>
<td class="author-text">Postel, J., &ldquo;<a href="http://tools.ietf.org/html/rfc768">User Datagram Protocol</a>,&rdquo; STD&nbsp;6, RFC&nbsp;768, August&nbsp;1980 (<a href="http://www.rfc-editor.org/rfc/rfc768.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2460">[RFC2460]</a></td>
<td class="author-text"><a href="mailto:deering@cisco.com">Deering, S.</a> and <a href="mailto:hinden@iprg.nokia.com">R. Hinden</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>,&rdquo; RFC&nbsp;2460, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2460.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2460.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2460.xml">XML</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">XingFeng Jiang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huihong Mansion,No.91 Baixia Rd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nanjing, Jiangsu  210001</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P. R. China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86(25)84565462</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jiang.x.f@huawei.com">jiang.x.f@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Philip Matthews</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">100 Innovation Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ottawa, Ontario  K2K 3G7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Canada</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 613 592 4343 x224</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:philip_matthews@magma.ca">philip_matthews@magma.ca</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Spencer Dawkins (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies (USA)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1547 Rivercrest Blvd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Allen, TX  75002</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 214 755 3870</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:spencer@mcsr-labs.org">spencer@mcsr-labs.org</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
