

Internet Engineering Task Force                             H. Levkowetz
Internet-Draft                                               ipUnplugged
Expires: April 24, 2003                                 October 24, 2002


               DHCP Option for Mobile IP Mobility Agents
                 <draft-ietf-dhc-mipadvert-opt-00.txt>

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 24, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   This document defines a new Dynamic Host Configuration Protocol
   (DHCP) option with suboptions.  One suboption is passed from the DHCP
   Server to the DHCP Client to announce the presence of one or more
   Mobile IP Mobility Agents.  For each announced Mobility Agent,
   information is provided which is the same as that of the Mobile IP
   Agent Advertisement extension to ICMP Router Advertisements.  There
   is also one suboption which may be used by a DHCP client to provide
   identity information to the DHCP server.







Levkowetz                Expires April 24, 2003                 [Page 1]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3

   2.  Requirements terminology . . . . . . . . . . . . . . . . . . .  3

   3.  Mobility Agent Information Option  . . . . . . . . . . . . . .  3
   3.1 Mobility Agent Information Option Definition . . . . . . . . .  3
   3.2 Network Access Identifier Sub-Option . . . . . . . . . . . . .  4
   3.3 Mobility Agent Announcement Sub-Option . . . . . . . . . . . .  4

   4.  Mobility Agent Option Usage  . . . . . . . . . . . . . . . . .  7

   5.  Security Considerations  . . . . . . . . . . . . . . . . . . .  7

   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  7

   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  7
       Normative References . . . . . . . . . . . . . . . . . . . . .  7
       Informative References . . . . . . . . . . . . . . . . . . . .  8
       Author's Address . . . . . . . . . . . . . . . . . . . . . . .  8
       Full Copyright Statement . . . . . . . . . . . . . . . . . . .  9





























Levkowetz                Expires April 24, 2003                 [Page 2]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


1. Introduction

   There already exists a DHCP option to announce Mobile IP Home Agent
   addresses, described in RFC 2132 [2].  There is, however, no option
   available to announce Mobile IP Foreign Agents.

   Announcement of available Mobile IP Mobility Agents by means of DHCP
   provides possibilities for selective and individual assignment of
   Mobility Agents to Mobile Nodes.  This in turn makes load-sharing and
   selective service offerings easier.  This draft describes a DHCP
   option for announcing Mobility Agents to DHCP Clients.

2. Requirements terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [8].

   The Mobile IP related terminology used in this document is described
   in RFC 3220 [5].

3. Mobility Agent Information Option

3.1 Mobility Agent Information Option Definition

   This document defines a new DHCP Option called the Mobility Agent
   Option.  It is a "container" option for specific agent- supplied sub-
   options.  The format of the Mobility Agent option is:



   	   Code     Len     Mobility Agent Information Field
   	 +-------+------+------+------+------+------+--...-+------+
   	 |  TBD  |   N  |  a1  |  a2  |  a3  |  a4  |      |  aN  |
   	 +-------+------+------+------+------+------+--...-+------+

   The length N gives the total number of octets in the Mobility Agent
   Field.  The Mobility Agent Information field consists of a sequence
   of SubOpt/Length/Value tuples for each sub-option, encoded in the
   following manner:











Levkowetz                Expires April 24, 2003                 [Page 3]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


   	  SubOpt  Len     Sub-option Value
   	 +------+------+------+------+------+------+--...-+------+
   	 |  1   |   N  |  s1  |  s2  |  s3  |  s4  |      |  sN  |
   	 +------+------+------+------+------+------+--...-+------+
   	  SubOpt  Len     Sub-option Value
   	 +------+------+------+------+------+------+--...-+------+
   	 |  2   |   N  |  t1  |  t2  |  t3  |  t4  |      |  tN  |
   	 +------+------+------+------+------+------+--...-+------+

   The Mobility Agent Information field shall NOT be terminated with a
   255 sub-option.  The length N of the DHCP Mobility Agent Information
   Option shall include all bytes of the sub-option code/length/value
   tuples.  Since at least one sub-option must be defined, the minimum
   Mobility Agent Information length is two (2).  The length N of the
   sub-options shall be the number of octets in only that sub-option's
   value field.  A sub-option length may be zero.  The sub-options need
   not appear in sub-option code order.

3.2 Network Access Identifier Sub-Option

   The Network Access Identifier (NAI) defined in RFC 2486 [3] is
   already used in Mobile IP as an alternative to the home address as an
   identifier of a mobile node [9].

   The Network Access Identifier sub-option of the Mobility Agent
   Information Option MAY be used by the DHCP client to provide
   identifying information to the DHCP server, as part of the
   DHCPDISCOVER message.  The server may then use this information in
   selecting mobility agent announcement parameters for the client.

   The format of the Network Access Identifier sub-option is as follows:


     SubOpt   Len     Sub-option Value
    +------+-----+-----+-----+-----+-----+--...-+-----+
    |  1   |  N  |  Network Access Identifier         |
    +------+-----+-----+-----+-----+-----+--...-+-----+


3.3 Mobility Agent Announcement Sub-Option

   The Mobility Agent Announcement sub-option announces the address of
   one or more mobility agents, together with all the information about
   the mobility agent which is normally found in a Mobile IP Agent
   Advertisement extension to ICMP Router Advertisements as described in
   RFC 3220 [5].

   All fields are defined so as to correspond to fields of the same name



Levkowetz                Expires April 24, 2003                 [Page 4]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


   in a Mobility Agent Advertisement Extension as described in RFC 3220
   [5], and if in the future additional bits are allocated from the
   'reserved' field for the Mobility Agent Advertisement Extension, they
   should be equally valid in a DHCP Mobility Agent option.

   This option may contain announcements of one or more Mobility Agents,
   in sequence.  The length of each individual Mobility Agent
   Announcement is determined from the Adv-Length field of the
   announcement.


     SubOpt   Len     Sub-option Value (Announcements)
    +------+-----+-----+-----+--...-+-----+-----+-----+--...-+-----+...
    |  2   |  N  |  Announcement 1        |  Announcement 2        |
    +------+-----+-----+-----+--...-+-----+-----+-----+--...-+-----+...

   The format of one Mobility Agent Announcement is as follows:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                  Mobility Agent IP Address                    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |  Adv-Length   |        Sequence Number        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |    Registration Lifetime      |R|B|H|F|M|G|r|T|   reserved    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                  zero or more care-of addresses               |
    |                              ...                              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      Option code
         DHCP_MIP_OPTION (to be assigned by IANA)

      Length
         Length in bytes of this option, not including the Option code
         and Length bytes.

      Agent IP Address
         The address trough which the Mobile Node may reach the
         announced Mobility Agent in order to do a Mobile IP
         registration.

      Type
         16.  This is the same value as for the type field in a Mobility
         Agent Advertisement Extension as described in RFC 3220 [5].  If
         other Mobility Agent Advertisement Extensions are defined in
         the future, this field will make it possible to differentiate



Levkowetz                Expires April 24, 2003                 [Page 5]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


         between them without using new DHCP option numbers.

      Reserved-0
         Sent as zero; required to be zero on reception for the option
         described in this document.

      Adv-Length
         (6 + 4*N), where 6 accounts for the number of bytes in the
         Sequence Number, Registration Lifetime, flags, and reserved
         fields, and N is the number of care-of addresses advertised for
         the Mobility Agent.

      Sequence Number
         The count of Mobility Agent DHCP announcements made since the
         DHCP server was initialized (RFC 3220, Section 2.3.2 [5]).

      Registration Lifetime
         The longest lifetime (measured in seconds) that this agent is
         willing to accept in any Registration Request.  A value of
         0xffff indicates infinity.

      R
         Registration required.  Registration with this foreign agent
         (or another foreign agent listed in this DHCP option) is
         required even when using a co-located care-of address.

      B
         Busy.  The foreign agent will not accept registrations from
         additional mobile nodes.

      H
         Home agent.  This agent offers service as a home agent on the
         link on which this mobility agent announcement is sent.

      F
         Foreign agent.  This agent offers service as a foreign agent on
         the link on which this mobility agent announcement is sent.

      M
         Minimal encapsulation.  This agent implements receiving
         tunneled datagrams that use minimal encapsulation [7].

      G
         GRE encapsulation.  This agent implements receiving tunneled
         datagrams that use GRE encapsulation [6].

      r
         Sent as zero; ignored on reception.  SHOULD NOT be allocated



Levkowetz                Expires April 24, 2003                 [Page 6]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


         for any other uses.

      T
         Foreign agent supports reverse tunneling [11].

      reserved
         Sent as zero; ignored on reception.

      Care-of Address(es)
         The foreign agent care-of address(es) provided by this foreign
         agent.  An DHCP Mobility Agent Announcement MUST include at
         least one care-of address if the 'F' bit is set.  The number of
         care-of addresses present is determined by the Length field in
         the Extension.


4. Mobility Agent Option Usage

   The requesting and sending of this option follows the rules for DHCP
   options in RFC 2131 [1]

5. Security Considerations

   DHCP provides an authentication mechanism, as described in RFC 3118
   [4], which may be used if authentication is required before offering
   the Mobility Agent option described here.  On the other hand, Mobile
   IP Agent Advertisements as described in RFC 3220 [5] requires no
   authentication for Agent Advertisement and Agent Solicitation
   messages.

   By providing Agent Advertisements by means of DHCP as an alternative
   to extended ICMP Router Advertisement messages it is possible to do
   so more selectively, and it does not offer any new threat to the
   internet.

6. IANA Considerations

   The value for the DHCP_MIP_OPTION code must be assigned from the
   numbering space defined for public DHCP Options in RFC 2939 [10].

7. Acknowledgements

Normative References

   [1]  Droms, R., "Dynamic Host Configuration Protocol", RFC 2131,
        March 1997.

   [2]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor



Levkowetz                Expires April 24, 2003                 [Page 7]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


        Extensions", RFC 2132, March 1997.

   [3]  Aboba, B. and M. Beadles, "The Network Access Identifier", RFC
        2486, January 1999.

   [4]  Droms, R. and W. Arbaugh, "Authentication for DHCP Messages",
        RFC 3118, June 2001.

   [5]  Perkins, C., "IP Mobility Support for IPv4", RFC 3220, January
        2002.

Informative References

   [6]   Hanks, S., Li, T., Farinacci, D. and P. Traina, "Generic
         Routing Encapsulation (GRE)", RFC 1701, October 1994.

   [7]   Perkins, C., "Minimal Encapsulation within IP", RFC 2004,
         October 1996.

   [8]   Bradner, S., "Key words for use in RFCs to Indicate Requirement
         Levels", BCP 14, RFC 2119, March 1997.

   [9]   Calhoun, P. and C. Perkins, "Mobile IP Network Access
         Identifier Extension for IPv4", RFC 2794, March 2000.

   [10]  Droms, R., "Procedures and IANA Guidelines for Definition of
         New DHCP Options and Message Types", BCP 43, RFC 2939,
         September 2000.

   [11]  Montenegro, G., "Reverse Tunneling for Mobile IP, revised", RFC
         3024, January 2001.


Author's Address

   Henrik Levkowetz
   ipUnplugged AB
   Arenavagen 33
   Stockholm  S-121 28
   SWEDEN

   Phone: +46 8 725 9513
   EMail: henrik@levkowetz.com








Levkowetz                Expires April 24, 2003                 [Page 8]

Internet-Draft       DHCP Option for Mobility Agents        October 2002


Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Levkowetz                Expires April 24, 2003                 [Page 9]

