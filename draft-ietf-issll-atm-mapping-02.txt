

INTERNET-DRAFT                                        Mark W. Garrett,
                                                      Bellcore
Expires 26 September 1997
                                                      Marty Borden,
                                                      New Oak Communications

                                                      26 March 1997


   Interoperation of Controlled-Load and Guaranteed Services with ATM
                 <draft-ietf-issll-atm-mapping-02.txt>


Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as ``work in progress.''

   To learn the current status of any Internet-Draft, please check the
   ``1id-abstracts.txt'' listing contained in the Internet- Drafts
   Shadow Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or
   ftp.isi.edu (US West Coast).

Abstract

   Service mappings are an important aspect of effective interoperation
   between Internet Integrated Services and ATM networks.  This document
   provides guidelines for ATM virtual connection features and
   parameters to be used in support of the IP integrated services
   protocols.  The specifications include IP Guaranteed Service,
   Controlled-Load Service and ATM Forum UNI specification, versions
   3.0, 3.1 and 4.0.

   These service mappings are intended to facilitate effective end-to-
   end Quality of Service for IP networks containing ATM subnetworks.
   We discuss the various features of the IP and ATM protocols, and
   identify solutions and difficult issues of compatibility and
   interoperation.




Garrett, Borden           Expires September 1997                [Page 1]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


                              Table of Contents

   0.0 What's New in This Version .........................................   3

   1.0 Introduction .......................................................   x
       1.1 General System Architecture ....................................   x
       1.2 Related Documents ..............................................   x

   2.0 Discussion of ATM Protocol Features ................................   x
       2.1 Service Category and Bearer Capability .........................   x
           2.1.1 Service Categories for Guaranteed Service ................   x
           2.1.2 Service Categories for Controlled Load ...................   x
           2.1.3 Service Categories for Best Effort .......................   x
       2.2 Cell Loss Priority Bit, Tagging and Conformance Definitions ....   x
       2.3 ATM Adaptation Layer ...........................................   x
       2.4 Broadband Low Layer Information ................................   x
       2.5 Traffic Descriptors ............................................   x
           2.5.1 Translating Traffic Descriptors for Guaranteed Service ...   x
           2.5.2 Translating Traffic Descriptors for Controlled Load Service  x
           2.5.3 Translating Traffic Descriptors for Best Effort Service .... x
       2.6 QoS Classes and Parameters .....................................   x
       2.7 Additional Parameters -- Frame Discard Mode ....................   x

   3.0 Discussion of IP-IS Protocol Features ..............................   x
       3.1 Handling of Excess Traffic .....................................   x
       3.2 Use of AdSpec in Guaranteed Service with ATM ...................   x

   4.0 Discussion of Miscellaneous Items ..................................   x
       4.1 Units Conversion ...............................................   x

   5.0 Summary of ATM VC Setup Parameters for Guaranteed Service ..........   x
       5.1 Encoding GS Using Real-Time VBR ................................   x
       5.2 Encoding GS Using CBR ..........................................   x
       5.3 Encoding GS Using Non-Real-Time VBR ............................   x
       5.4 Encoding GS Using ABR ..........................................   x
       5.5 Encoding GS Using UBR ..........................................   x
       5.6 Encoding GS Using UNI 3.0 and UNI 3.1. .........................   x

   6.0 Summary of ATM VC Setup Parameters for Controlled Load Service .....   x
       6.1 Encoding CLS Using ABR .........................................   x
       6.2 Encoding CLS Using Non-Real-Time VBR ...........................   x
       6.3 Encoding CLS Using Real-Time VBR ...............................   x
       6.4 Encoding CLS Using CBR .........................................   x
       6.5 Encoding CLS Using UBR .........................................   x
       6.6 Encoding CLS Using UNI 3.0 and UNI 3.1. ........................   x

   7.0 Summary of ATM VC Setup Parameters for Best Effort Service .........   x
       7.1 Encoding Best Effort Service Using UBR .........................   x



Garrett, Borden           Expires September 1997                [Page 2]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


       7.2 Encoding Best Effort Service Using Other ATM Service Categories    x

   8.0 Acknowledgements ...................................................   x

   Appendix 1  Abbreviations ..............................................   x
   REFERENCES .............................................................   x
   AUTHORS' ADDRESSES .....................................................   x


0.0 What's New in This Version

   Corrections to VC setup parameter tables.

   Deleted specific QoS parameter values in tables.

   Section 3.1 on handling of excess traffic.



1.0 Introduction

   We consider the problem of providing IP Integrated Services [1] with
   an ATM subnetwork.  This document is intended to be consistent with
   the rsvp protocol [2] for IP-level resource reservation (although it
   is, strictly speaking, independent of rsvp, since GS and CLS services
   can be supported through other mechanisms).  In the ATM network, we
   consider ATM Forum UNI Signaling, versions 3.0, 3.1 and 4.0 [3, 4,
   5].  The latter uses the more complete service model of The ATM
   Forum's TM 4.0 specification [6, 7].

   This is a complex problem with many facets.  In this document, we
   focus on the service types, parameters and signalling elements needed
   for service interoperation.  The resulting service mappings can be
   used to provide effective end-to-end Quality of Service (QoS) for IP
   traffic that traverses ATM networks.

   The IP services considered are Guaranteed Service (GS) [8] and
   Controlled Load Service (CLS) [9].  We also treat the default Best
   Effort Service (BE) in parallel with these.  Our recommendations for
   BE are intended to be consistent with RFC 1755 [10], and its revision
   (in progress) [11], which defines how ATM VCs can be used in support
   of normal BE IP service.  The ATM services we consider are:

       CBR           Constant Bit Rate
       rtVBR         Real-time Variable Bit Rate
       nrtVBR        Non-real-time Variable Bit Rate
       UBR           Unspecified Bit Rate
       ABR           Available Bit Rate



Garrett, Borden           Expires September 1997                [Page 3]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   (Note, Appendix 1 provides definitions for all abbreviations.)  In
   the case of UNI 3.0 and 3.1 signaling, where these service are not
   all clearly distinguishable, we identify the appropriate available
   services.

   The service mappings which follow most naturally from the service
   definitions are as follows:

       Guaranteed Service    ->     CBR or rtVBR
       Controlled Load       ->     nrtVBR or ABR (with a minimum cell rate)
       Best Effort           ->     UBR or ABR

   For completeness we provide detailed mappings for all service
   combinations and identify how each meets or fails to meet the
   requirements of the higher level IP services.  The reason for not
   restricting mappings to the most obvious or natural ones is that we
   cannot assume now that these services will always be ubiquitously
   available.  A number of details, such as treatment of packets in
   excess of the flow traffic descriptor, make service mapping a
   complicated subject, which cannot be expressed briefly and accurately
   at the same time.

   The remainder of this introduction provides a general discussion of
   the system configuration and other assumptions.  Section 2 considers
   the relevant ATM protocol elements and their effects as related to
   Guaranteed, Controlled Load and Best Effort services (the latter
   being the default "service").  Section 3 discusses a number of
   important features of the IP services and how they can be handled on
   an ATM subnetwork.  Section 4 addresses a few miscellaneous problems
   which are neither distinctly IP nor ATM.  Section 5 gives detailed VC
   setup parameters for Guaranteed Service, and considers the effect of
   using each of the ATM service categories.  Section 6 provides a
   similar treatment for Controlled Load Service.  Section 7 considers
   Best Effort service.

   This document is only a part of the total solution to providing the
   interworking of IP integrated services with ATM subnetworks.  The
   important issue of VC management, including flow aggregation, is
   considered in [12].  We do not consider how routing -- QoS sensitive
   or not -- interacts with the use of VCs, especially in the case of
   multicast (or point-to-multipoint) flows.  We expect that a
   considerable degree of implementation latitude will exist, even
   within the guidelines presented here.  Many aspects of interworking
   between IP and ATM will depend on economic factors, and will not be
   subject to standardization.






Garrett, Borden           Expires September 1997                [Page 4]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


1.1 General System Architecture

   We assume that the reader has a general working knowledge of IP, rsvp
   and ATM protocols.  The network architecture we consider is
   illustrated in Figure 1, below.  An IP-attached host may send unicast
   datagrams to another host, or may use an IP multicast address to send
   packets to all of the hosts which have "joined" the multicast "tree".
   In either case, a destination host may then use RSVP to establish
   resource reservation in routers along the internet path for the data
   flow.

   An ATM network lies in the path (chosen by the IP routing), and
   consists of one or many ATM switches.  It uses VCs to provide both
   resources and QoS within the ATM cloud.  These connections are set
   up, added to (in the case of multipoint trees), torn down, and
   controlled by the edge devices, which act as both IP routers and ATM
   interfaces, capable of initiating and managing VCs across the ATM
   user-to-network (UNI) interface.  The edge devices are assumed to be
   fully functional in both the IP int-serv/RSVP protocols and the ATM
   UNI protocols, as well as translating between them.


                                  ATM Cloud
                              ------------------
        H ----\              (                  )          /------- H
        H ---- R -- R -- E --( ATM Sw -- ATM Sw ) -- E -- R -- R -- H
        H ----/     |        (                  )          \
                    |         ------------------            \------ H
        H ----------R

              Figure 1:  Network Architecture with hosts (H),
                         Routers (R) and Edge Devices (E).


   The edge devices may be considered part of the IP internet or part of
   the ATM cloud, or both.  This is not an issue since they must provide
   capabilities of both environments.  The edge devices have normal RSVP
   capability to process RSVP messages, reserve resources, and maintain
   soft state (in the control path), and to classify and schedule
   packets (in the data path).  They also have the normal ATM
   capabilities to initiate connections by signaling, and to accept or
   refuse connections signaled to them.  They police and schedule cells
   going into the ATM cloud.  An IP-level reservation (RESV message)
   triggers the edge device to translate the RSVP service requirements
   into ATM VC (UNI) semantics.

   A range of VC management policies are possible, which determine
   whether a flow should initiate a new VC or join an existing one.  VCs



Garrett, Borden           Expires September 1997                [Page 5]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   are managed according to a combination of standards and local policy
   rules, which are specific to either the implementation (equipment) or
   the operator (network service provider).  Point-to-multipoint
   connections within the ATM cloud can be used to support general IP
   multicast flows.  In ATM, a point to multipoint connection can be
   controlled by the source (or root) node, or a leaf initiated join
   (LIJ) feature in ATM may be used.  Note, the topic of VC management
   and mapping of flows onto VCs is considered at length in another
   issll working group draft [12].

   Figure 2 shows the functions of an edge device, summarizing the work
   not part of IP or ATM abstractly as an InterWorking Function (IWF),
   and segregating the control and data planes.  (Note: for expositional
   convenience, policy control and other control functions are included
   as part of the admission control in the diagram.)


         IP                                                ATM
                               ____________________
                              |        IWF         |
                              |                    |
         admission       <--> | service mapping    | <-->  ATM
         control              | VC management      |       signalling &
                              | address resolution |       admission
                              |....................|       control
                              |                    |
         classification/      |ATM Adaptation Layer|       cell
         policing &      <--> | Segmentation and   | <-->  scheduling/
         scheduling           |  Reassembly        |       shaping
                              | Buffering          |
                               ____________________

                 Figure 2: Edge Device Functions showing the IWF



   In the logical view of Figure 2, some functions, such as scheduling,
   are shown separately, since these functions are required of both the
   IP and ATM sides.  However it may be possible in an integrated
   implementation to combine such functions.

   It is not possible to completely separate the service mapping and VC
   management functions.  Several illustrative examples come to mind:
   (i) Multiple integrated-services flows may be aggregated to use one
   point-to-multipoint VC.  In this case, we assume the IP flows are of
   the same service type and their parameters have been merged
   appropriately.  (ii) The VC management function may choose to
   allocate extra resources in anticipation of further reservations or



Garrett, Borden           Expires September 1997                [Page 6]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   based on an empiric of changing TSpecs.  (iii) There must exist a
   path for best effort flows and for sending the rsvp control messages.
   How this interacts with the establishment of VCs for QoS traffic may
   alter the characteristics required of those VCs.  See [12] for
   further details on VC management.

   Therefore, in discussing the service-mapping problem, we will assume
   that the VC management function of the IWF can always express its
   result in terms of an IP-level service with some QoS and TSpec.  The
   service mapping algorithm, which is the subject of this document, can
   then identify the appropriate VC parameters, whether the resulting
   action is initiation of a new VC, the addition/deletion of a leaf to
   an existing multipoint tree, or the modification of an existing VC to
   one of another description.

1.2 Related Documents

   Earlier ATM Forum documents were called UNI 3.0 and UNI 3.1.  The 3.1
   release was used to correct errors and fix alignment with the ITU.
   Unfortunately UNI 3.0 and 3.1 are incompatible.  However this is in
   terms of actual codepoints, not semantics.  Therefore, descriptions
   of parameter values can generally be used for both.

   After 3.1, the ATM Forum decided to release documents separately for
   each technical working group.  The Traffic Management and Signalling
   4.0 documents are available publically at ftp.atmforum.com/pub.  We
   refer to the combination of traffic management and signalling as
   TM/UNI 4.0, although specific references may be made to the TM 4.0
   specification or the UNI SIG 4.0 specification.

   Within the IETF area, related material includes the work of the rsvp
   [2], int-serv [1, 8, 9, 13, 14] and ion working groups [10, 11] of
   the IETF.  Rsvp defines the resource reservation protocol (which is
   analogous to signaling in ATM). Int-serv defines the behavior and
   semantics of particular services (analogous e.g., to the Traffic
   Management working group in the ATM Forum).  Ion defines interworking
   of IP and ATM for traditional Best Effort service, and covers all
   issues related to routing and addressing.

   A large number of ATM signaling details are covered in RFC 1755 [10],
   e.g., differences between UNI 3.0 and UNI 3.1, encapsulation, frame-
   relay interworking, etc.  These considerations generally extend to IP
   over ATM with QoS as well.  Any description given in this document of
   IP Best Effort service (i.e. the default behavior) over ATM is
   intended to be consistent with RFC 1755 and it's extension for UNI
   4.0 [11], and those documents are to be considered definitive.  In
   some instances with non-best-effort services, certain IP/ATM features
   will diverge from the following RFC 1755.  The authors have attempted



Garrett, Borden           Expires September 1997                [Page 7]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   to note such differences explicitly.  (For example, best effort VCs
   are taken down on timeout by either edge device, while QoS VCs are
   only removed by the upstream edge device when the corresponding rsvp
   reservation is deleted.)

   RFC 1821 [15], represents an early discussions of issues involved
   with interoperating IP and ATM protocols for integrated services and
   QoS.


2.0 Discussion of ATM Protocol Features


   In this section, we discuss each of the items that must be specified
   in the setup of an ATM VC.  For each of these we discuss which
   specified items and values may be most appropriate for each of the
   three integrated services.

   The ATM Call Setup is sent by the edge device to the ATM network to
   establish end-to-end (ATM) service.   This setup contains the
   following information.

       Service Category/Broadband Bearer Capability
       AAL Parameters
       Broadband Low Layer Information
       Calling and Called Party Addressing Information
       Traffic Descriptors
       QoS Parameters
       Additional Parameters of TM/UNI 4.0

   We will discuss each of these, except addressing information, as they
   relate to the translation of GS and CLS to ATM services.  Following
   the discussion of the service categories, we discuss the tagging and
   conformance definitions for IP and ATM, since the policing method is
   implicit in the call setup.  We then continue with mappings of the
   other parameters and information elements.


2.1 Service Category and Bearer Capability


   The highest level of abstraction distinguishing features of ATM VCs
   is in the service category or bearer capability.  Service categories
   were introduced in TM/UNI 4.0; previously the bearer capability was
   used to discriminate at this level.

   In each version of the ATM specifications, these indicate the general
   properties required of a VC: whether there is a real-time delay



Garrett, Borden           Expires September 1997                [Page 8]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   constraint, whether the traffic is constant or variable rate, the
   applicable traffic and QoS description parameters and (implicitly)
   the complexity of some supporting switch mechanisms.

   For UNI 3.0 and UNI 3.1, there are only two distinct options for
   bearer capabilities (in our context):

       BCOB-A:  constant rate, timing required, unicast/multipoint;
       BCOB-C:  variable rate, timing not required, unicast/multipoint.

   There is a third capability, BCOB-X, but in the case of AAL5 (which
   we require -- see below) it can be used interchangeably and
   consistently with the above two capabilities.

   In TM/UNI 4.0 the service categories are:

       Constant Bit Rate (CBR)
       Real-time Variable Bit Rate (rtVBR)
       Non-real-time Variable Bit Rate (nrtVBR)
       Unspecified Bit Rate (UBR)
       Available Bit Rate (ABR)

   The first two of these are real-time services, so that rtVBR is new
   to TM/UNI 4.0.  The ABR service is also new to TM/UNI 4.0.  UBR
   exists in all specifications, except perhaps in name, through the
   ``best effort'' indication flag and/or the QoS Class 0.

   The encoding used in 4.0 is consistent with the earlier versions.
   For example, the Service Category is indicated solely by the
   combination of the Bearer Capability and the Best Effort indication
   flag.

   In principle, it is possible to support any foreseeable service
   through the use of BCOB-A/CBR.  This is because the CBR service is
   equivalent to having a ``pipe'' with specified bandwidth/timing.
   However, it may be desirable to make better use of the ATM network's
   resources by using other, less demanding, services when available.
   (See RFC 1821 for a discussion of this [15].)


   2.1.1 Service Categories for Guaranteed Service

   There are two possible mappings for GS:

       CBR (BCOB-A)
       rtVBR

   GS requires real-time support, that is, timing is required.  Thus in



Garrett, Borden           Expires September 1997                [Page 9]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   UNI 3.x, the bearer class BCOB-A (or an equivalent BCOB-X
   formulation) must be used.  In TM/UNI 4.0 either CBR or rtVBR is
   appropriate.  In both cases, GS would use a value of CLR
   appropriately low for the link (i.e., such that congestion losses are
   dominated by losses due to bit errors).  The use of rtVBR may
   encourage recovery of allocated bandwidth left unused by a source.
   It also accomm odates more bursty sources with a larger bucket
   parameter, and permits the use of tagging for excess traffic (see
   Section 2.2).

   Neither the BCOB-C bearer class, nor nrtVBR, UBR, ABR are good
   matches for the GS service.  These provide no delay estimates and
   cannot guarantee consistently low delay for every packet.

   Specification of BCOB-A or CBR requires specification of a PCR.  The
   PCR should be specified as the the token bucket rate parameter, with
   appropriate conversion from bytes to cells (accounting for overhead),
   of the GS TSpec.  For both of these, the network provides a nominal
   clearing rate of PCR with jitter toleration (bucket size) CDVT,
   specified in a network specific manner (see below).

   Specification of rtVBR requires the specification of two rates, SCR
   and PCR.  This models bursty traffic with specified peak and average
   rates.  With rtVBR, it is appropriate to map the PCR to the line rate
   of incoming traffic and the SCR to the GS TSpec bucket rate.  The ATM
   bucket sizes are CDVT, in a network specific manner, and CDVT+BT,
   respectively for the PCR and SCR parameters (see below).


   2.1.2 Service Categories for Controlled Load

   There are three possible mappings for CLS:

       CBR (BCOB-A)
       ABR
       nrtVBR (BCOB-C)

   Note that under UNI 3.x, only the first and third choices are
   applicable.   The first, with a CBR/BCOB-A connection, provides a
   higher level of QoS than is necessary, but it may be convenient to
   simply allocate a fixed-rate ``pipe'', which should be ubiquitously
   supported in ATM networks.  However unless this is the only choice
   available, this will probably be wasteful of network resources.

   The ABR category with a positive MCR aligns with the CLS idea of
   ``best effort with floor.''  The ATM network agrees to forward cells
   with a rate of at least MCR, which should be directly converted from
   the token bucket rate of the TSpec.  The bucket size parameter



Garrett, Borden           Expires September 1997               [Page 10]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   measures approximately the amount of buffer required at the IWF.

   The nrtVBR/BCOB-C category can also be used.  The rtVBR category can
   be used, although the edge device must choose a value for CTD and CDV
   as a matter of local policy.

   The UBR category does not provide enough capability for Controlled
   Load.  The point of CLS is to allow an allocation of resources, which
   is facilitated by the token bucket traffic descriptor, and is
   unavailable in UBR.


   2.1.3 Service Categories for Best Effort

   All of the service categories have the capability to carry Best
   Effort service, but the natural service category is UBR (or, in UNI
   3.x, BCOB-C or BCOB-X, with the best effort indication set).  A CBR
   or rtVBR clearly could be used, and since the service is not real-
   time, a nrtVBR connection could also be used.  In these cases the
   rate parameter used reflects a bandwidth allocation in support of the
   edge device's best effort connectivity to the far edge router.  It
   would be normal for traffic from many source/destination pairs to be
   aggregated on this connection; indeed, since Best Effort is the
   default IP behavior, the individual flows are not necessarily
   identified or accounted for.  CBR may be a preferred solution in the
   case where best effort traffic is sufficiently highly aggregated that
   a simple fixed-rate pipe is efficient.  Both CBR and nrt-VBR provide
   bandwidth allocation which may be useful for billing purposes.  An
   ABR connection could similarly be used to support Best Effort
   traffic.  The support of data communications protocols such as TCP/IP
   is the explicit purpose for which ABR was specifically designed.  It
   is conceivable that a separate ABR connection would be made for
   different IP flows, although the normal case would probably have all
   IP Best Effort traffic with a common egress router sharing a single
   ABR connection.

   The rt-VBR service category may be considered less suitable, simply
   because both the real-time delay constraint and the use of SCR/BT add
   unnecessary complexity.

   See specifications from the IETF ion working group [10, 11] for
   related work on support of Best Effort service with ATM.


2.2 Cell Loss Priority Bit, Tagging and Conformance Definitions


   An ATM header carries the Cell Loss Priority (CLP) bit.  Cells with



Garrett, Borden           Expires September 1997               [Page 11]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   CLP=1 are said to be ``tagged'' and have lower priority.  This
   tagging may be done by the source, to indicate relative priority
   within the VC, or by a switch, to indicate traffic in violation of
   policing parameters.  Options involving the use of tagging are
   decided at call setup time.

   A Conformance Definition is a rule that determines whether a cell is
   conforming to the traffic descriptor of the VC.  The conformance
   definition is given in terms of a Generic Cell Rate Algorithm (GCRA),
   also known as a "leaky bucket" algorithm, for CBR and VBR services.
   (UBR and ABR have network-specific conformance definitions.  Note,
   the term "compliance" in ATM is used to describe the behavior of a
   connection.)

   The network may tag cells which are non-conforming, rather than
   dropping them only if the VC is set up to request tagging and the
   network supports the tagging option.  When congestion occurs, a
   switch must attempt to discard tagged cells in preference to the
   discarding of CLP=0 cells.  However, the mechanism for doing this is
   completely implementation specific.   Tagged cells are treated with a
   behavior which is Best Effort in the sense that they are transported
   when bandwidth is available, queued when buffers are available, and
   dropped when the resources are overcommitted.

   Since GS and CLS services require excess traffic to be treated as
   Best Effort, the tagging option should always be chosen (if
   supported) in the VC setup as a means of ``downgrading'' non-
   conformant cells.  However, the term ``best effort'' seems to be used
   with two distinguishable meanings in the int-serv specs.  The first
   is that of a service class that, in some typical scheduler
   implementations, would correspond to a separate queue.  Placing
   excess traffic in best effort in this sense would be giving it lower
   delay priority.  The other sense is more generic, meaning that the
   network would make a best effort to transport the traffic.  A
   reasonable expectation is that a network with no contending traffic
   would transport the packet, while a very congested network would drop
   the packet.  A packet that could be tagged with lower loss priority
   (such as the ATM CLP bit) would be more likely to be dropped, but
   would not normally be transported out of order with respect to the
   conforming portion of the flow.  Such a mechanism would agree with
   the latter definition of best effort, but not the former.

   In TM/UNI 4.0 tagging does not apply to the CBR or ABR services.
   However, there are three conformance definitions of VBR service (for
   both rtVBR and nrtVBR) to consider.  In VBR, only the conformance
   definition VBR.3 supports tagging and applies the GCRA with PCR to
   the aggregate CLP=0+1 cells, and another GCRA with SCR to the CLP=0
   cells.  Thus this conformance definition should always be used in



Garrett, Borden           Expires September 1997               [Page 12]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   support of IP integrated services.  For UBR service, conformance
   definition UBR.2 supports the use of tagging, but a CLP=1 cell does
   not imply non-conformance; it may be a hint of network congestion.

   Once an ATM connection is established, and the particular conformance
   definition is determined, the resulting policing action is mandatory.
   Since the conformance algorithm operates on cells, when mapping rates
   and bucket sizes from IP services to corresponding ATM parameters, a
   correction needs to be made (at call setup time) for the ATM
   segmentation overhead.  Unfortunately this overhead, as a ratio,
   depends on packet length, with the overhead largest for small
   packets.  Thus the appropriate correction could be based on minimum
   packet size, expected packet size, or otherwise in a network specific
   manner, determined at the edge device IWF.  See Section 4.1.

   It is always better fo the IWF to tag cells when it can anticipate
   that the ATM network would do so.  This is because the IWF knows the
   IP packet boundaries and can tag all of the cells corresponding to a
   packet.  If left to the ATM layer UPC, the network would inevitably
   carry some cells of packets which are worthless, because some other
   cells from those packet are dropped due to non-conformance.
   Therefore, the IWF, knowing the VC GCRA parameters, should always
   anticipate the cells which will be tagged by the ATM UPC and tag all
   of the cells uniformly across each affected packet.


2.3 ATM Adaptation Layer


   The AAL type 5 encoding must be used, as specified in RFC 1483 and
   RFC 1755. AAL5 requires specification of the maximum SDU size in both
   the forward and reverse directions. Both GS and CLS specify a maximum
   packet size as part of the TSpec and this value shall be used as the
   maximum SDU in each direction for unicast connections, but only in
   one direction for point-to-multipoint connections, which are
   unidirectional.  When more than one flow aggregated into a single VC,
   the TSpecs are merged to yield the largest packet size.  In no case
   can this exceed 65535 (or, of course, the MTU of the link).


2.4 Broadband Low Layer Information


   The B-LLI Information Element is transferred transparently by the ATM
   network between the edge devices and is used to specify the
   encapsulation method.  Multiple B-LLI IEs may be sent as part of
   negotiation.  The default encapsulation LLC/SNAP [16] must be
   supported as specified in RFC 1577 and RFC 1755.  Additional



Garrett, Borden           Expires September 1997               [Page 13]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   encapsulations are discussed in RFC 1755 and we refer to the
   discussion there.


2.5 Traffic Descriptors


   The ATM traffic descriptor always contains specification of a peak
   cell rate (PCR) (in each direction).  For variable rate services it
   also contains specification of a sustainable cell rate (SCR) and
   maximum burst size (MBS).  The SCR and MBS form a leaky bucket pair
   (rate, depth), while the bucket depth parameter for PCR is CDVT.
   Note that CDVT is not signaled explicitly, but is determined by the
   network operator, and serves as a measure of the jitter imposed by
   the network.

   Since CDVT is not signaled, and is presumed to be small, the leaky
   bucket traffic descriptor (TSpec) of the Internet service cannot
   always be directly mapped into PCR/CDVT parameters.  Additional
   buffering is needed at the IWF to account for the depth of the
   bucket.

   The Burst Tolerance is related to MBS (see TM 4.0 for details).
   Roughly, they are both expressions of the bucket depth parameter that
   goes with SCR.  The units of BT is time while the units of MBS is
   cells.  Since both SCR and MBS are signalled, they can be computed
   directly from the IP layer traffic description.  The specific manner
   in which resources are allocated from the traffic description is
   implementation specific.  Note that when translating the traffic
   parameters, the segmentation overhead and minimum policed unit need
   to be taken into account (see Section 4.2 below).

   In ATM UNI SIG 4.0 there are the notions of Alternative Traffic
   Descriptors and Minimal Traffic Descriptors.  Alternative Traffic
   Descriptors enumerate other acceptable choices for traffic
   descriptors and are not considered here.  Minimal Traffic Descriptors
   are used in ``negotiation,'' which refers to the specific way in
   which an ATM connection is set up.  Very roughly it works like this,
   taking PCR as an example: A minimal PCR and a requested PCR are
   signalled, the requested PCR being the usual item signalled, and the
   minimal PCR being the absolute minimum that the source edge device
   will accept.  When sensing the existence of both minimal and
   requested parameters, the intermediate switches along the path may
   reduce the requested PCR to a ``comfortable'' level.  This choice is
   part of admission control, and is therefore implementation dependent.
   If at any point the requested PCR falls below the minimal PCR then
   the call is cleared.  Minimal Traffic Descriptors can be used to
   present an acceptable range for parameters and ensure a higher



Garrett, Borden           Expires September 1997               [Page 14]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   likelihood of call admission.  Whether anything more specific about
   Minimal Traffic Descriptors needs to be said here is left for further
   study (FFS).  In general, our discussion of connection parameters
   assumes the values resulting from successful connection setup.

   The Best Effort indicator (used only with UBR) and Tagging indicators
   are also part of the signaled information element (IE) containing the
   traffic descriptor.  In the UNI SIG 4.0 traffic descriptor IE there
   is an additional parameter, the Frame Discard indicator (see Section
   2.7).


   2.5.1 Translating Traffic Descriptors for Guaranteed Service


   For Guaranteed Service there is a peak rate, p, a source Tspec rate,
   r_s, a receiver Tspec rate r_r, and an Rspec rate, R.  The two Tspec
   rates are intended to support receiver heterogeneity, in the sense
   that different receivers can accept different rates representing
   subsets of the sender's traffic.  In this document we leave this
   feature for further study (FFS), and assume the two Tspec rates are
   always identical.  The Tspec rate describes the traffic itself, and
   is used for policing, while the Rspec rate (which cannot be smaller)
   is the allocated service rate.  A receiver increases R over r to
   reduce the delay.

   When mapping Guaranteed Service onto a rtVBR VC, the ATM traffic
   descriptor parameters (PCR, SCR, MBS) can be set within the following
   bounds:

                  R <= PCR <= min(p, line rate)
                  r <= SCR <= PCR
                  0 <= MBS <- b.

   Note that a receiver can choose R > p to lower the delay.  This
   leaves the first equation somewhat subject to interpretation.  If a
   receiver chooses R > line rate, it seems clear that the admission
   control would simply reject the reservation.

   The edge device has a buffer preceding the ATM network which must be
   sufficient to absorb bursts arriving faster than they can be admitted
   into the ATM network.  For example, parameters may be set as PCR = R,
   SCR = r, MBS = b.  The edge device buffer of size b would absorb a
   burst sent at any IP-level peak rate.  Although this buffer exists,
   the ATM network must accept bursts at rate PCR, at least R, to ensure
   that the edge device delay is no greater than b/R.  Since this buffer
   is not in the ATM network, its delay is not included in D_ATM.




Garrett, Borden           Expires September 1997               [Page 15]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   For GS over CBR, the service rate is mapped to the PCR parameter,
   using the same constraint for PCR given above.  The edge device again
   requires adequate buffering to accommodate the TSpec bucket depth and
   ensure delay before entering the ATM network of no more than b/R.  If
   PCR is greater than R, the buffer requirement may be relaxed
   accordingly.


   2.5.2 Translating Traffic Descriptors for Controlled Load Service


   Controlled Load service has a peak rate, p, a Tspec rate, r, and a
   corresponding bucket depth parameter, b.  The ATM traffic parameters
   for nrtVBR service category are constrained by

                  r <= SCR <= PCR <= min(p, line rate)
                  0 <= MBS <- b.


   For ABR VCs, the Tspec rate would be used to set the minimum cell
   rate (MCR) parameter.  The bucket depth parameter does not map
   directly to a signalled ATM parameter, so the edge device must have a
   buffer of at least b bytes.

   For CBR, the Tspec rate sets a lower bound on PCR, and again, the
   available buffering in the edge device must be adequate to
   accommodate possible bursts.


   2.5.3 Translating Traffic Descriptors for Best Effort Service


   For Best Effort service, there is no traffic description.  The UBR
   service category allows negotiation of PCR, simply to allow the
   source to discover the smallest physical bottleneck along the path.


2.6 QoS Classes and Parameters


   In TM/UNI 4.0 the three QoS parameters may be individually signalled.
   These parameters are the Cell Loss Ratio (CLR), Cell Transfer Delay
   (CTD), and Cell Delay Variation (CDV).  In UNI 3.x the setup message
   includes only the QoS Class, which is essentially an index to a
   network specific table of values for these three parameters.  A
   network provider may choose to associate other parameters, such as
   Severely Errored Cell Block Ratio, but these are less well understood
   and accepted compared to the basic loss, delay and jitter parameters



Garrett, Borden           Expires September 1997               [Page 16]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   mentioned here.  The ITU has recently included a standard set of
   parameter values for a (small) number of QoS classes in the latest
   version of Recommendation I.356, October 1996.  The network provider
   may choose to define further network-specific QoS classes in addition
   to these.  The problem of agreement between network providers as to
   the definition of QoS classes is completely unaddressed to date.  We
   will adopt a convention expressed in UNI 3.x, that assumes that QoS
   class 1 is appropriate for low-delay, low-loss CBR connections, and
   QoS class 3 is appropriate for variable rate connections with loss
   and delay roughly appropriate for non-real-time data applications.
   Note that the QoS class definitions in the new I.356 version may not
   align with this model.

   Since no IP layer counterparts to these ATM QoS parameters exist in
   any of the IP services, they must be set by policy of the edge
   device.  The QoS classes can be chosen relatively easily.  QoS class
   1 should be used with Guaranteed Service and QoS class 3 should be
   used with Controlled Load Service.  Best Effort Service always gets
   QoS class 0, which is unspecified QoS by definition.  There are two
   issues which amount to the same thing: First, the choice of
   individually signalled parameter values (under TM/UNI 4.0) for GS and
   CLS is the edge device policy.  The second issue is choosing
   parameter values for the two QoS classes, which is the ATM network
   policy.  If the same network operator controls both, then these
   problems are identical; if not, an agreement to make the values
   identical would be extremely desirable.

   Note that we have mapped QoS class 1 and 3 onto Guaranteed and
   Controlled Load service respectively.  This is regardless of what
   service category is used.  So when running CLS over a CBR pipe, it
   would not be inappropriate to use QoS class 3.  This leaves the delay
   unspecified (or much looser than with QoS 1).  These comments should
   be taken as preliminary, as these issues are far from clear, and
   industry consensus should be sought.


2.7 Additional Parameters -- Frame Discard Mode


   In TM/UNI 4.0 ATM allows the user to choose a mode where a dropped
   cell causes all cells up to the last remaining in the AAL5 PDU to be
   also dropped.  This improves efficiency and the behavior of end-to-
   end protocols such as TCP, since the remaining cells of a damaged PDU
   are useless to the receiver.  For IP over ATM, Frame Discard should
   always be used in both directions, if available, for all services.






Garrett, Borden           Expires September 1997               [Page 17]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


3.0 Discussion of IP-IS Protocol Features


3.1 Handling of Excess Traffic


   (Placeholder for text.)

           Reiterate that whole packets should be tagged, See Section
   2.2.



3.2 Use of AdSpec in Guaranteed Service with ATM


   The AdSpec is a feature of Guaranteed Service which allows a receiver
   to calculate the worst-case delay associated with a GS flow.  Three
   quantities, C, D, and MPL, are accumulated (by simple addition of
   components, one for each network element) in the PATH message from
   source to receiver.  The resulting values can be different for each
   unique receiver.  The maximum delay is then found by

           delay <=  b/R + C/R + D + MPL

   The Maximum Path Latency (MPL) includes propagation delay and any
   other unavoidable system delays.  (We neglect the effect of maximum
   packet size and peak rate here; see the GS specification [8] for the
   more detailed equation.)  The service rate requested by the receiver,
   R, can be greater than the sender's Tspec rate, r.  The effect of the
   larger R is to allocate more bandwidth and, through this equation,
   lower the packet delay.  The burst size, b, is the leaky bucket
   parameter from the Tspec, and is not changed by the receiver in the
   Rspec.

   The values of C and D which a router advertise will depend on both
   the particular packet scheduling algorithm used in the router, and
   the characteristics of the subnet attached to the router.  We assume
   here that each router (or the source host) takes responsibility for
   its downstream subnet only.  If the subnet is a simple point-to-point
   link, then the subnet-specific parts of C and D will account for the
   link transmission rate and MTU.  An ATM subnet is more complex.

   The edge router will always have an internal packet scheduler, which
   will contribute to C and D.  For this discussion we consider only the
   ATM subnet-specific components.  We further assume that the ATM
   network will be represented as a "pure delay" element, contributing a
   component to D, but not to C.  The reason for this is that C would



Garrett, Borden           Expires September 1997               [Page 18]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   depend on details of the cell scheduling algorithm inside the ATM
   switches, which is not known by the edge device, where the AdSpec
   parameters are accumulated.  (In the special case where the edge
   device does have enough information to modify C, it would not be
   precluded.)  Generally the delay behavior of the whole ATM cloud may
   be expressed abstractly as a fixed constant D_ATM.

   Since the AdSpec values are incremented before any reservation is
   made, the edge device must have some knowledge about the VC which
   would be set up in case a reservation were made.  This does not
   really add to the complexity of the device, since it must also have
   this information in order to make an intelligent VC setup request.
   For example, the edge device may have a cached table with the
   propagation delay and a reasonable additional delay budget, from
   which it composes a value of CTD for the VC setup.  The device may
   learn such information through VC setup negotiation, and, indeed,
   there may be no other way to obtain that information.  However, it
   seems reasonable that these values would be cached for later use when
   new VCs to the same egress router need to be established.

   Therefore, we will presume a table with values of MPL (which includes
   propagation delay) and expected queueing delays for each possible
   egress edge device.  (How such a table is maintained is
   implementation specific.)  The latter quantity is simply D_ATM, the
   value added to the AdSpec D term to account for the ATM network.
   When a RESV message arrives, causing a VC to be set up, the requested
   value for CTD should then be given by

           CTD = D_ATM + MPL + S_ATM.

   The last term, S_ATM is the portion of the slack term applied to the
   ATM portion of the path.  Recall that the slack term [8] is positive
   when the receiver can afford more delay than that computed from the
   AdSpec.  The ATM edge device may take part (or all) of the slack term
   to relax the delay constraint on the ATM VC.  The distribution of
   delay slack among the nodes and subnets is network specific.

   An important detail to note is the relationship between the b/R term
   of the (Internet) delay and the corresponding MBS/SCR in the ATM
   network, when using a VBR VC.  The term b/R accounts for the delay
   experienced by the last byte of a burst, of size b, which encounters
   a congested node.  In the simple ideal case, where the scheduling
   algorithm emulates a fixed rate server, at rate R, the delay of the
   last byte is b/R.  Once this occurs, the stream has been smoothed,
   and such a delay will not occur at later congested nodes, as long as
   they also serve at rate R.  The form of the delay equation expresses
   this ideal behavior with C and D acting as error terms.  Now, since
   the delay which smooths the burst can occur outside of the ATM cloud,



Garrett, Borden           Expires September 1997               [Page 19]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   the b/R term cannot include any delay within the ATM cloud.  However,
   a burst of size MBS is permitted to enter the ATM network, and it may
   be served at a rate no greater than SCR.  We might reasonably expect
   a queueing delay of MBS/SCR to occur at a congested ATM switch.  If
   the ATM network will impose this delay, then it must be included in
   the value of D_ATM advertised.  If the ATM network can increase its
   bandwidth allocation (e.g., due to CTD being lower than MBS/SCR), to
   decrease this delay, then this behavior should be reflected in the
   value of D_ATM.  So, the information from which the edge device
   determines D_ATM must reflect an accurate abstraction of the actual
   behavior of the ATM network.  To the extent that D_ATM is approximate
   (and it must be an upper bound on the actual delay), it reduces the
   chance that the VC setup will succeed, and/or increases its cost.

4.0 Discussion of Miscellaneous Items

4.1 Units Conversion


   In the integrated services domain, bucket sizes and rates are
   measured in bytes and bytes/sec, respectively, whereas for ATM, they
   are measured in cells and cells/sec.

   Packets are segmented into 53 byte cells of which the first 5 bytes
   are header information.  For

         B = number of Bytes,
         C = number of cells,

   a rough approximation between the token bucket parameters (rate and
   bucket depth) is

         C = B/48.

   This is actually a lower bound on C and does not take into account
   the extra padding at the end of a partially filled cell, or the 8
   byte trailer in the last cell of an AAL5 encoding.  The actual
   relationship between the number of cells and bytes of one packet is

         C = 1 + int(B/48) + x,

         where x = 1 if B mod 48 > 41
                   0 otherwise.

   where int() is the rounding down operation.  The third term is  0 or
   1 and is 1 only when the remainder of B/48 is 41 or more.   (An
   additional cell is needed because the 41 bytes plus 8 byte trailer
   will not fit in a cell.)



Garrett, Borden           Expires September 1997               [Page 20]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   The above formula is not particularly amenable to engineering
   considerations.  By equating the number of bytes before and after
   segmentation we have

         48 C = B + 8 + A,

   where A is the additional padding used in the last 2 cells and has
   the range 0 <= A <= 47.  From this we obtain a number of  useful
   observations.

   For example, if one believes that the packet lengths are uniformly
   distributed mod 48, then on average, 48 C = B + 8 + 47/2, or C = B/48
   + .65625.

   We can also make use of the upper bound on A to state that 48 C <= B
   + 55.  This is true for any one packet.  Considering the number of
   bytes in a stream of P packets, we have

         48 C <= B + 55 P.

   The number of packets P may not be a readily available quantity.
   However, in terms of the minimum policed unit m, we know that P * m
   <= B.  Hence P <= B/m and 48 C <= B ( 1 + 55/m).  That is,

         C <= B/48 * (1 + 55/m).

5.0 Summary of ATM VC Setup Parameters for Guaranteed Service


   This section describes how to create ATM VCs appropriately matched
   for Guaranteed Service. The key points differentiating among ATM
   choices are that real-time timing is required, that the data flow may
   have a variable rate, and that demotion of non-conforming traffic to
   best effort is required to be in agreement with the definition of GS.
   For this reason, we prefer an rtVBR service in which tagging is
   supported.  Another good match is to use CBR with special handling of
   any non-conforming traffic.

   Note, in all cases the encodings assume point to multipoint
   connections, where the backward channel is not used.  This is done to
   be consistent with rsvp, which generally assumes a multicast
   scenerio.  If a specific situation does not involve multicast, then
   the IWF may make use of the backward channel in a point-to-point VC,
   provided that the QoS parameters are mapped consistently for the
   service provided.






Garrett, Borden           Expires September 1997               [Page 21]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


5.1 Encoding GS Using Real-Time VBR (ATM Forum TM/UNI 4.0)


   AAL
     Type                            5
     Forward CPCS-SDU Size           parameter M of TSpec
     Backward CPCS-SDU Size          0
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR CLP=0+1                                     Note 1
     Backward PCR CLP=0+1            0
     Forward SCR CLP=0                                       Note 1
     Backward SCR CLP=0              0
     Forward MBS (CLP=0)                                     Note 1
     Backward MBS (CLP=0)            0
     BE indicator                    NOT included
     Forward Frame Discard bit       1
     Backward Frame Discard bit      1
     Tagging Forward bit             1 (Tagging requested)
     Tagging Backward bit            1 (Tagging requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)              Note 2
     ATM Transfer Capability         9  (Real time VBR)       Note 3
     Susceptible to Clipping         00 (bit encoding for Not
   susceptible)
     User Plane Configuration        01 (bit encoding for pt-to-mpt)

   Broadband Low Layer Information
     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 4
      ISO/IEC TR 9577 IPI            204

   QoS Class
     QoS Class Forward               1                       Note 5
     QoS Class Backward              1                       Note 5

   QoS Parameters                                            Note 6
     Acceptable Forward CDV
     Acceptable Forward CLR
     Forward Max CTD

   Note 1:  See discussion Section 2.5.1.
   Note 2:  Value 3 (BCOB-C) can also be used.
   Note 3:  The ATC value 19 is not used.  The value 19 implies CLR



Garrett, Borden           Expires September 1997               [Page 22]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


            objective applies to the aggregate  CLP=0+1 stream and
            that does not give desirable treatment of excess
            traffic in the case of IP.
   Note 4:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.
   Note 5:  Cf ITU I.365 (Oct 1996) for new definition.
   Note 6:  See section 2.6 for the values to be used  The cumulative CDV
            is also provided, but it depends on local implementation, and
            not on values mapped from IP level service parameters.


5.2 Encoding GS Using CBR (ATM Forum TM/UNI 4.0)



   It is also possible to support GS using a CBR ``pipe.''   The
   advantage of this is that CBR is probably supported; the disadvantage
   is that data flows may not fill the pipe (utilization loss) and there
   is no tagging option available.



   AAL
     Type                            5
     Forward CPCS-SDU Size           parameter M of TSpec
     Backward CPCS-SDU Size          parameter M of TSpec
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR 0                                           Note 1
     Backward PCR                    0
     Forward PCR 0+1                                         Note 1
     Backward PCR 0+1                0
     BE indicator                    NOT included
     Forward Frame Discard bit       1
     Backward Frame Discard bit      1
     Tagging Forward bit             1 (Tagging requested)
     Tagging Backward bit            1 (Tagging requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)             Note 2
     ATM Transfer Capability         5  (CBR)                Note 3, 4
     Susceptible to Clipping         00 (bit encoding for Not
   susceptible)
     User Plane Configuration        01 (bit encoding for pt-to-mpt)

   Broadband Low Layer Information



Garrett, Borden           Expires September 1997               [Page 23]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 5
      ISO/IEC TR 9577 IPI            204

   QoS Class
     QoS Class Forward               1                       Note 6
     QoS Class Backward              1                       Note 6


   QoS Parameters                                            Note 7
     Acceptable Forward CDV
     Acceptable Forward CLR
     Forward Max CTD

   Note 1:  See discussion Section 2.5.1.
   Note 2:  Value 1 (BCOB-A) can also be used.
   Note 3:  If bearer class A is chosen the ATC field must be absent.
   Note 4:  The ATC value 7 is not used.  The value 7 implies CLR
            objective applies to the aggregate  CLP=0+1 stream and
            that does not give desirable treatment of excess
            traffic in the case of IP.
   Note 5:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.
   Note 6:  Cf ITU I.365 (Oct 1996) for new definition.
   Note 7:  See section 2.6 for the values to be used  The cumulative CDV
            is also provided, but it depends on local implementation, and
            not on values mapped from IP level service parameters.



5.3 Encoding GS Using Non-Real-Time VBR (ATM Forum TM/UNI 4.0)



   The remaining ATM service categories, including nrtVBR, do not
   provide delay guarantees and cannot be recommended as the best fits.
   However in some circumstances, the best fits may not be available.

   If nrtVBR is used, no hard delay can be given.  However by using a
   variable rate service with low utilization, delay may be
   `reasonable', but not controlled.  The encoding of GS as nrtVBR is
   the same as that for CLS using nrtVBR, except that the Forward PCR
   would be derived from the Tspec peak rate.  See Section 6.2 below.





Garrett, Borden           Expires September 1997               [Page 24]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


5.4 Encoding GS Using ABR (ATM Forum TM/UNI 4.0)



   This is a very unlikely combination.  The objective of the ABR
   service is to provide `low' loss rates which, via flow control, can
   result in delays.  The introduction of delays is contrary to the
   design objectives of GS.  If ABR were used for GS, the VC parameters
   would follow as for CLS over ABR.  See Section 6.1.



5.5 Encoding GS Using UBR (ATM Forum TM/UNI 4.0)



   The UBR service is the default lowest common denominator of the
   services.  It cannot provide delay or loss guarantees.  However if it
   is used for GS, it will be encoded in the same way as Best Effort
   over UBR, with the exception that the PCR would be determined from
   the peak rate of the Tspec.  See Section 5.1.


5.6 Encoding GS Using ATM Forum UNI 3.0/3.1 Specifications



   It is not recommended to support GS using VBR for the following
   reasons.  The Class C bearer class does not represent real-time
   behavior.  Appendix F of UNI 3.1 specification precludes the
   specification of traffic type "VBR" with the timing requirement "End
   to End timing Required" in conjunction with bearer class X.


   It is possible to support GS using a CBR ``pipe.''   The following
   table specifies the support of GS using CBR.



   AAL
     Type                            5
     Forward CPCS-SDU Size           parameter M of TSpec
     Backward CPCS-SDU Size          parameter M of TSpec
     Mode                            1 (Message mode)        Note 1
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR 0                                           Note 2



Garrett, Borden           Expires September 1997               [Page 25]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


     Backward PCR                    0
     Forward PCR 0+1                                         Note 2
     Backward PCR 0+1                0
     BE indicator                    NOT included
     Tagging Forward bit             1 (Tagging requested)
     Tagging Backward bit            1 (Tagging requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)             Note 3
     Traffic Type                    001 (bit encoding for Constant Bit
   Rate)
     Timing Requirements             01 (bit encoding for Timing
   Required)
     Susceptible to Clipping         00 (bit encoding for Not
   susceptible)
     User Plane Configuration        01 (bit encoding for pt-to-mpt)

   Broadband Low Layer Information
     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 4
      ISO/IEC TR 9577 IPI            204

   QoS Class
     QoS Class Forward               1
     QoS Class Backward              1

   QoS Parameters
     Parameters are implied by the QOS Class


   Note 1:  Only included for UNI 3.0.
   Note 2:  See discussion, Section 2.5.1.
   Note 3:  Value 1 (BCOB-A) can also be used. If BCOB-A is used Traffic
            Type and Timing Requirements fields are not included.
   Note 4:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.


6.0 Summary of ATM VC Setup Parameters for Controlled Load Service



   This section describes how to create ATM VCs appropriately matched
   for Controlled Load.  CLS traffic is partly delay tolerant and of
   variable rate.  NrtVBR and ABR (for TM/UNI 4.0 only) are the possible



Garrett, Borden           Expires September 1997               [Page 26]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   choices in supporting CLS.

   Generally we prefer to use point-to-multipoint connections.  However
   this is not yet available in ABR. Other than in ABR, the encodings
   assume a point-to-multipoint connection.  For a unicast connection,
   the backward parameters would be equal to the forward parameters.


6.1 Encoding CLS Using ABR (ATM Forum TM/UNI 4.0)



   AAL
     Type                            5
     Forward CPCS-SDU Size           parameter M of TSpec
     Backward CPCS-SDU Size          parameter M of TSpec
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR CLP=0+1             From line rate
     Backward PCR CLP=0+1            From line rate
     Forward MCR CLP 0+1             From TSpec token bucket rate
     Backward MCR CLP 0+1            From TSpec token bucket rate
     BE indicator                    NOT included
     Forward Frame Discard bit       1
     Backward Frame Discard bit      1
     Tagging Forward bit             0 (Tagging not requested)
     Tagging Backward bit            0 (Tagging not requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)              Note 1
     ATM Transfer Capability         12 (ABR)
     Traffic Type                    010 (Variable Bit Rate)
     Timing Requirements             10 (Timing Not Required)
     Susceptible to Clipping         00 (Not susceptible)
     User Plane Configuration        00 (For pt-to-pt)

   Broadband Low Layer Information
     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 2
      ISO/IEC TR 9577 IPI            204


   QoS Class
     QoS Class Forward               3                       Note 3
     QoS Class Backward              3                       Note 3



Garrett, Borden           Expires September 1997               [Page 27]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   QoS Parameters                                            Note 4
     Acceptable Forward CDV
     Acceptable Forward CLR
     Forward Max CTD

   ABR Setup Parameters                                      Note 5 ABR
   Additional Parameters                                 Note 5


   Note 1:  Value 3 (BCOB-C) can also be used.
   Note 2:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.
   Note 3:  Cf ITU I.365 (Oct 1996) for new definition.
   Note 4:  See section 2.6 for the values to be used.  The cumulative CDV
            is also provided, but it depends on local implementation, and
            not on values mapped from IP level service parameters.
   Note 5:  Discussion of these parameters is beyond the scope of this draft.



6.2 Encoding CLS Using Non-Real-Time VBR (ATM Forum TM/UNI 4.0)




   AAL
     Type                            5
     Forward CPCS-SDU Size           parameter M of TSpec
     Backward CPCS-SDU Size          0
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR CLP=0+1             From line rate
     Backward PCR CLP=0+1            0
     Forward SCR CLP=0               From TSpec token bucket rate
     Backward SCR CLP=0              0
     Forward MBS (CLP=0)             From TSpec bucket size param
     Backward MBS (CLP=0)            0
     BE indicator                    NOT included
     Forward Frame Discard bit       1
     Backward Frame Discard bit      1
     Tagging Forward bit             1 (Tagging requested)
     Tagging Backward bit            1 (Tagging requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)             Note 1
     ATM Transfer Capability         10 (Non-real time VBR)  Note 2, 3



Garrett, Borden           Expires September 1997               [Page 28]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


     Susceptible to Clipping         00 (bit encoding Not susceptible)
     User Plane Configuration        01 (bit encoding pt-to-mpt)

   Broadband Low Layer Information
     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 4
      ISO/IEC TR 9577 IPI            204


   QoS Class
     QoS Class Forward               3                       Note 5
     QoS Class Backward              3                       Note 5

   QoS Parameters                                            Note 6
     Acceptable Forward CDV
     Acceptable Forward CLR
     Forward Max CTD


   Note 1:  Value 3 (BCOB-C) can also be used.
   Note 2:  If bearer class C is used, the ATC field must be absent
   Note 3:  The ATC value 11 is not used.  The value 11 implies CLR
            objective applies to the aggregate  CLP=0+1 stream and
            that does not give desirable treatment of excess
            traffic in the case of IP.
   Note 4:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.
   Note 5:  Cf ITU I.365 (Oct 1996) for new definition.
   Note 6:  See section 2.6 for the values to be used.  The cumulative CDV
            is also provided, but it depends on local implementation, and
            not on values mapped from IP level service parameters.



6.3 Encoding CLS Using Real-Time VBR (ATM Forum TM/UNI 4.0)



   The encoding of CLS using rtVBR imposes a hard limit on the delay,
   which is specified as an end-to-end delay in the ATM network.  This
   is more stringent than the CLS service specifies and may result in
   less utilization of the network.

   If rtVBR is used to encode CLS, then the encoding is essentially the
   same as that for GS.  The exceptions are that the Forward PCR is



Garrett, Borden           Expires September 1997               [Page 29]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   derived from the line rate and probably a different value of the
   transit delay and CDV will be specified.  See Section 3.1.



6.4 Encoding CLS Using CBR (ATM Forum TM/UNI 4.0)



   The encoding of CLS using CBR is more stringent than using rtVBR
   since it does not take into account the variable rate of the data.
   Consequently there may be even lower utilization of the network.

   To use CBR for CLS, the same encoding as in Section 3.2 would be
   used.  However a different set of values of the QoS parameters will
   likely be used.



6.5 Encoding CLS Using UBR (ATM Forum TM/UNI 4.0)



   This encoding gives no QoS guarantees and would be done in the same
   way as for BE traffic.  See Section 5.1.



6.6 Encoding CLS Using Non-Real-Time VBR as in UNI 3.0/3.1
Specifications


   AAL
     Type                            5
     Forward CPCS-SDU Size           parameter M of TSpec
     Backward CPCS-SDU Size          0
     Mode                            1 (Message mode)        Note 1
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR CLP=0+1             From line rate
     Backward PCR CLP=0+1            0
     Forward SCR CLP=0               From TSpec token bucket rate
     Backward SCR CLP=0              0
     Forward MBS (CLP=0)             From TSpec bucket size param
     Backward MBS (CLP=0)            0
     BE indicator                    NOT included
     Tagging Forward bit             1 (Tagging requested)



Garrett, Borden           Expires September 1997               [Page 30]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


     Tagging Backward bit            1 (Tagging requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)             Note 2
     Traffic Type                    010 (bit encoding for Variable Bit
   Rate)
     Timing Requirements             00 (bit encoding for No Indication)
     Susceptible to Clipping         00 (bit encoding for Not
   susceptible)
     User Plane Configuration        01 (bit encoding for For pt-to-mpt)


   Broadband Low Layer Information
     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 3
      ISO/IEC TR 9577 IPI            204


   QoS Class
     QoS Class Forward               3
     QoS Class Backward              3

   QoS Parameters
     Parameters are implied by the QOS Class


   Note 1:  Only included for UNI 3.0.
   Note 2:  Value 3 (BCOB-C) can also be used. If BCOB-C is used Traffic
            Type and Timing Requirements fields are not included.
   Note 3:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.



7.0 Summary of ATM VC Setup Parameters for Best Effort Service


This section describes how to create ATM VCs appropriately matched for
Best Effort.  The BE service does not need a reservation of resources.

The following subsections are for information only.  See the IETF ION
working group draft on ATM signalling support for IP over ATM using UNI
4.0 [11] for recommendations.





Garrett, Borden           Expires September 1997               [Page 31]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


7.1 Encoding Best Effort Service Using UBR (ATM Forum TM/UNI 4.0)


   This section is for information only.  For recommendation, see the
   IETF ION working group draft on ATM signalling support for IP over
   ATM using UNI 4.0 [11].

   AAL
     Type                            5
     Forward CPCS-SDU Size           MTU of link
     Backward CPCS-SDU Size          MTU of link
     SSCS Type                       0 (Null SSCS)

   Traffic Descriptor
     Forward PCR CLP=0+1             From line rate
     Backward PCR CLP=0+1            0
     BE indicator                    included
     Forward Frame Discard bit       1
     Backward Frame Discard bit      1
     Tagging Forward bit             1 (Tagging requested)
     Tagging Backward bit            1 (Tagging requested)

   Broadband Bearer Capability
     Bearer Class                    16 (BCOB-X)                 Note 1
     ATM Transfer Capability         10 (Non-real time VBR)      Note 2
     Susceptible to Clipping         00 (bit encoding for Not susceptible)
     User Plane Configuration        01 (bit encoding for pt-to-mpt)

   Broadband Low Layer Information
     User Information Layer 2
       Protocol                      12 (ISO 8802/2)
     User Information Layer 3
       Protocol                      11 (ISO/IEC TR 9577)    Note 3
      ISO/IEC TR 9577 IPI            204


   QoS Class
     QoS Class Forward               0
     QoS Class Backward              0


   Note 1:  Value 3 (BCOB-C) can also be used.
   Note 2:  If bearer class C is used, the ATC field must be absent
   Note 3:  For QoS VCs supporting GS or CLS, the layer 3 protocol should
            be specified.  For BE VCs, it can be left unspecified, allowing
            the VC to be shared by multiple protocols, following RFC 1755.
    .fi




Garrett, Borden           Expires September 1997               [Page 32]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


7.2 Encoding Best Effort Service Using Other ATM Service Categories


See the IETF ION working group draft on ATM signalling support for IP
over ATM using UNI 4.0 [11].


8.0 Security


   Some security issues are raised in the rsvp specification [2], which
   would apply here as well.  There are no additional security
   considerations raised in this document.


9.0 Acknowledgements


   The authors would like to thank the members of the ISSLL working
   group for their input. In particular, thanks to Jon Bennett of Fore
   Systems, Roch Guerin of IBM and Susan Thomson of Bellcore.

Appendix 1  Abbreviations


       AAL           ATM Adaptation Layer
       ABR           Available Bit Rate
       ATM           Asynchronous Transfer Mode
       B-LLI         Broadband Low Layer Information
       BCOB          Broadband Connection-Oriented Bearer Capability
       BCOB-{A,C,X}  Bearer Class A, C, or X
       BE            Best Effort
       BT            Burst Tolerance
       CBR           Constant Bit Rate
       CDV           Cell Delay Variation
       CDVT          Cell Delay Variation Tolerance
       CLP           Cell Loss Priority (bit)
       CLR           Cell Loss Ratio
       CLS           Controlled Load Service
       CPCS          Common Part Convergence Sublayer
       CTD           Cell Transfer Delay
       EOM           End of Message
       FFS           For Further Study
       GCRA          Generic Cell Rate Algorithm
       GS            Guaranteed Service
       IE            Information Element
       IETF          Internet Engineering Task Force
       IP            Internet Protocol



Garrett, Borden           Expires September 1997               [Page 33]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


       IS            Integrated Services
       ISSLL         Integrated Services over Specific Link Layers
       ITU           International Telecommunication Union
       IWF           Interworking Function
       LIJ           Leaf Initiated Join
       LLC           Logical Link Control
       MBS           Maximum Burst Size
       MCR           Minimum Cell Rate
       MPL           Minimum Path Latency
       MTU           Maximum Transfer Unit
       nrtVBR        Non-real-time VBR
       PCR           Peak Cell Rate
       PDU           Protocol Data Unit
       QoS           Quality of Service
       RESV          Reservation Message (of rsvp protocol)
       RFC           Request for Comment
       RSVP          Resource Reservation Protocol
       Rspec         Reservation Specification
       rtVBR         Real-time VBR
       SCR           Sustained Cell Rate
       SDU           Service Data Unit
       SIG           ATM Signaling (ATM Forum document)
       SNAP          Subnetwork Attachment Point
       SSCS          Service-Specific Convergence Sub-layer
       Sw            Switch
       TCP           Transport Control Protocol
       TM            Traffic Management
       TSpec         Traffic Specification
       UBR           Unspecified Bit Rate
       UNI           User-Network Interface
       UPC           Usage Parameter Control (ATM traffic policing function)
       VBR           Variable Bit Rate
       VC            (ATM) Virtual Connection

REFERENCES


   [1]  R. Braden, D. Clark and S. Shenker, "Integrated Services in the
        Internet Architecture: an Overview", RFC 1633, June 1994.

   [2]  R. Braden, L. Zhang, S. Berson, S. Herzog and S. Jamin,
        "Resource ReSerVation Protocol (RSVP) - Version 1 Functional
        Specification", Internet Draft, May 1996, <draft-ietf-rsvp-
        spec-12.txt>

   [3]  The ATM Forum, "ATM User-Network Interface Specification, Ver-
        sion 3.0", Prentice Hall, Englewood Cliffs NJ, 1993.




Garrett, Borden           Expires September 1997               [Page 34]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   [4]  The ATM Forum, "ATM User-Network Interface Specification, Ver-
        sion 3.1", Prentice Hall, Upper Saddle River NJ, 1995.

   [5]  The ATM Forum, "ATM User-Network Interface (UNI) Signalling
        Specification, Version 4.0", Prentice Hall, Upper Saddle River
        NJ, specification finalized July 1996; expected publication,
        late 1996; available at ftp://ftp.atmforum.com/pub.

   [6]  The ATM Forum, "ATM Traffic Management Specification, Version
        4.0", Prentice Hall, Upper Saddle River NJ; specification final-
        ized April 1996; expected publication, late 1996; available at
        ftp://ftp.atmforum.com/pub.

   [7]  M. W. Garrett, "A Service Architecture for ATM: From Applica-
        tions to Scheduling", IEEE Network Mag., Vol. 10, No. 3, pp. 6-
        14, May 1996.

   [8]  S. Shenker, C. Partridge and R. Guerin, "Specification of
        Guaranteed Quality of Service", Internet Draft, August 1996,
        <draft-ietf-intserv-guaranteed-svc-06.txt>

   [9]  J. Wroclawski, "Specification of the Controlled-Load Network
        Element Service", Internet Draft, August 1996, draft-ietf-
        intserv-ctrl-load-svc-03.txt

   [10] M. Perez, F. Liaw, A. Mankin, E. Hoffman, D. Grossman and A.
        Malis, "ATM Signaling Support for IP over ATM", RFC 1755, Febru-
        ary 1995.

   [11] M. Perez and A. Mankin, "ATM Signalling Support for IP over ATM
        - UNI 4.0 Update", Internet Draft, November 1996, <draft-ietf-
        ion-sig-uni4.0-01.txt>

   [12] S. Berson, L. Berger, "IP Integrated Services with RSVP over
        ATM", Internet Draft, September 1996, <draft-ietf-issll-atm-
        support-01.txt>

   [13] S. Shenker and J. Wroclawski, "Network Element Service Specifi-
        cation Template", Internet Draft, November 1995, <draft-ietf-
        intserv-svc-template-02.txt>

   [14] J. Wroclawski, "The Use of RSVP with IETF Integrated Services",
        Internet Draft, August 1996, <draft-ietf-intserv-use-00.txt>

   [15] M. Borden, E. Crawley, B. Davie and S. Batsell, "Integration of
        Real-time Services in an IP-ATM Network Architecture", "IP
        Authentication Header", RFC 1821, August 1995.




Garrett, Borden           Expires September 1997               [Page 35]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


   [16] J. Heinanen, "Multiprotocol Encapsulation over ATM Adaptation
        Layer 5", RFC 1483, July 1993.


AUTHORS' ADDRESSES


Mark W. Garrett                  Marty Borden
Bellcore                         New Oak Communications, Inc.
445 South Street                 42 Nanog Park
Morristown, NJ 07960             Acton MA, 01720
USA                              USA

phone: +1 201 829-4439           phone: +1 508 266-1011
email: mwg@bellcore.com          email: mborden@newoak.com




































Garrett, Borden           Expires September 1997               [Page 36]

INTERNET DRAFT     Interoperation of CLS and GS with ATM      March 1997


Table of Contents


















































Garrett, Borden           Expires September 1997               [Page 37]

