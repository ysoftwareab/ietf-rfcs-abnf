<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Common Ancestor Objective Function and Parent Set DAG Metric Container Extension</title>
<meta content="Remous-Aris Koutsiamanis" name="author">
<meta content="Georgios Papadopoulos" name="author">
<meta content="Nicolas Montavont" name="author">
<meta content="Pascal Thubert" name="author">
<meta content="
       
        Packet Replication and Elimination is a method in which several copies of a data packet are sent in the network in order to achieve high reliability and low jitter.
        This document details how to apply Packet Replication and Elimination in RPL, especially how to exchange information within RPL control packets to let a node better select the different parents that will be used to  forward the multiple copies of a packet.
        This document also describes the Objective Function which takes advantage of this information to implement multi-path routing.
       
    " name="description">
<meta content="xml2rfc 2.41.0" name="generator">
<meta content="draft-ietf-roll-nsa-extension-08" name="ietf.draft">
<link href="/tmp/draft-ietf-roll-nsa-extension-ep3jaenl.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">CA OF and PS DAG MC Extension</td>
<td class="right">March 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Koutsiamanis, et al.</td>
<td class="center">Expires 28 September 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">ROLL</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-roll-nsa-extension-07</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-03-27" class="published">27 March 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-09-28">28 September 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R.-A. Koutsiamanis, <span class="editor">Ed.</span>
</div>
<div class="org">IMT Atlantique</div>
</div>
<div class="author">
      <div class="author-name">G.Z. Papadopoulos</div>
<div class="org">IMT Atlantique</div>
</div>
<div class="author">
      <div class="author-name">N. Montavont</div>
<div class="org">IMT Atlantique</div>
</div>
<div class="author">
      <div class="author-name">P. Thubert</div>
<div class="org">Cisco</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Common Ancestor Objective Function and Parent Set DAG Metric Container Extension</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
        Packet Replication and Elimination is a method in which several copies of a data packet are sent in the network in order to achieve high reliability and low jitter.
        This document details how to apply Packet Replication and Elimination in RPL, especially how to exchange information within RPL control packets to let a node better select the different parents that will be used to  forward the multiple copies of a packet.
        This document also describes the Objective Function which takes advantage of this information to implement multi-path routing.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 September 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-common-ancestor-ap-selectio" class="xref">Common Ancestor AP Selection Policies</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-common-ancestor-strict" class="xref">Common Ancestor Strict</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-common-ancestor-medium" class="xref">Common Ancestor Medium</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-common-ancestor-relaxed" class="xref">Common Ancestor Relaxed</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-common-ancestor-objective-f" class="xref">Common Ancestor Objective Function</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-usage" class="xref">Usage</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-node-state-and-attribute-ns" class="xref">Node State and Attribute (NSA) object type extension</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-usage-2" class="xref">Usage</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-controlling-pre" class="xref">Controlling PRE</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-informative-references" class="xref">Informative references</a><a href="#section-toc.1-1.9.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-other-informative-reference" class="xref">Other Informative References</a><a href="#section-toc.1-1.9.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-implementation-status" class="xref">Implementation Status</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-choosing-an-ap-selection-po" class="xref">Choosing an AP selection policy</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
        Networks in the industrial context must provide stringent guarantees in terms of reliability and predictability, with this domain being one of main ones addressed by <span><a href="#RFC8557" class="xref">Deterministic Networking</a> [<a href="#RFC8557" class="xref">RFC8557</a>]</span>.
        <span><a href="#I-D.papadopoulos-raw-pareo-reqs" class="xref">Packet Replication and Elimination (PRE)</a> [<a href="#I-D.papadopoulos-raw-pareo-reqs" class="xref">I-D.papadopoulos-raw-pareo-reqs</a>]</span> is a technique which allows redundant paths in the network to be utilized for traffic requiring higher reliability.
        
        Allowing industrial applications to function over wireless networks requires the application of the principles and <span><a href="#RFC8655" class="xref">architecture of Deterministic Networking</a> [<a href="#RFC8655" class="xref">RFC8655</a>]</span>.
        This results in designs which aim at optimizing packet delivery rate and bounding latency.

        Additionally, nodes operating on battery need to minimize their energy consumption.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">  
        As an example, to meet this goal, <span><a href="#IEEE802154" class="xref">IEEE Std. 802.15.4</a> [<a href="#IEEE802154" class="xref">IEEE802154</a>]</span> provides Time-Slotted Channel Hopping (TSCH), a mode of operation which uses a common communication schedule
based on timeslots to allow deterministic medium access as well as channel hopping to work around radio interference.
        However, since TSCH uses retransmissions in the event of a failed transmission, end-to-end latency and jitter performance can deteriorate.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
        Furthermore, the 6TiSCH working group, focusing on IPv6 over IEEE Std. 802.15.4-TSCH, has worked on these issues and produced the <span><a href="#I-D.ietf-6tisch-architecture" class="xref">"6TiSCH Architecture"</a> [<a href="#I-D.ietf-6tisch-architecture" class="xref">I-D.ietf-6tisch-architecture</a>]</span> to address that case.
        
        Building on this architecture, "Exploiting Packet Replication and Elimination in Complex Tracks in LLNs" <span>[<a href="#I-D.papadopoulos-raw-pareo-reqs" class="xref">I-D.papadopoulos-raw-pareo-reqs</a>]</span> leverages PRE to improve the Packet Delivery Ratio (PDR), to provide a hard bound to the end-to-end latency, and thus to limit jitter.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">
        PRE is a general method of maximizing packet delivery rate and potentially minimizing latency and jitter, not limited to 6TiSCH.
        More specifically, PRE achieves controlled redundancy by laying multiple forwarding paths through the network and using them in parallel for different copies of a same packet.
        
        PRE can follow the Destination-Oriented Directed Acyclic Graph (DODAG) formed by <span>[<a href="#RFC6550" class="xref">RPL</a>]</span> from a node to the root. 
        Building a multi-path DODAG can be achieved based on the RPL capability of having multiple parents for each node in a network, a subset of which is used to forward packets.
        In order to select parents to be part of this subset, the RPL Objective Function (OF) needs additional information regarding the multi-path nature of PRE.

        This document describes an OF which implements multi-path routing for PRE and specifies the transmission of this specific path information.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">
        This document describes a new Objective Function (OF) called the Common Ancestor (CA) OF (see <a href="#ca_of" class="xref">Section 4</a>).
        A detailed description is given of how the path information is used within the CA OF and how the subset of parents for forwarding packets is selected.
        This specification defines a new Objective Code Point (OCP) for the CA OF.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">

        For the path information, this specification focuses on the extensions to the <span><a href="#RFC6551" class="xref">DAG Metric Container</a> [<a href="#RFC6551" class="xref">RFC6551</a>]</span> required for providing the PRE mechanism a part of the information it needs to operate.
        This information is the <span>[<a href="#RFC6550" class="xref">RPL</a>]</span> parent address set of a node and it must be sent to potential children of the node.
        The RPL DIO Control Message is the canonical way of broadcasting this kind of information and therefore its <span><a href="#RFC6551" class="xref">DAG Metric Container</a> [<a href="#RFC6551" class="xref">RFC6551</a>]</span> field is used to append a Node State and Attribute (NSA) object.
        The node's parent address set is stored as an optional TLV within the NSA object.
        This specification defines the type value and structure for the parent address set TLV (see <a href="#PS_TLV" class="xref">Section 5</a>).<a href="#section-1-6" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">
        The draft uses the following Terminology:<a href="#section-2-2" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2-3">
        <dt id="section-2-3.1">Packet Replication and Elimination (PRE):</dt>
<dd id="section-2-3.2">
                A method which consists of transmitting multiple copies of a packet using multi-path forwarding over a multi-hop network and which consolidates multiple received packet copies to control flooding.
                See "Exploiting Packet Replication and Elimination in Complex Tracks in LLNs" <span>[<a href="#I-D.papadopoulos-raw-pareo-reqs" class="xref">I-D.papadopoulos-raw-pareo-reqs</a>]</span> for more details.<a href="#section-2-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-2-3.3">Parent Set (PS):</dt>
<dd id="section-2-3.4">
                Given a RPL node, the set of its neighbor nodes which participate in the same RPL DODAG and which can potentially take the role of the node's preferred parent.<a href="#section-2-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-2-3.5">Alternative Parent (AP):</dt>
<dd id="section-2-3.6">
                A RPL parent in the parent set of a node which is used to forward a packet copy when replicating packets.<a href="#section-2-3.6" class="pilcrow">¶</a>
</dd>
<dt id="section-2-3.7">Alternative Parent (AP) Selection:</dt>
<dd id="section-2-3.8">
                The mechanism for choosing the next hop node to forward a packet copy when replicating packets.<a href="#section-2-3.8" class="pilcrow">¶</a>
</dd>
<dt id="section-2-3.9">Preferred Grand Parent (PGP):</dt>
<dd id="section-2-3.10">
                The preferred parent of the preferred parent of a node.<a href="#section-2-3.10" class="pilcrow">¶</a>
</dd>
</dl>
</section>
<section id="section-3">
      <h2 id="name-common-ancestor-ap-selectio">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-common-ancestor-ap-selectio" class="section-name selfRef">Common Ancestor AP Selection Policies</a>
      </h2>
<p id="section-3-1">
        In the RPL protocol, each node maintains a list of potential parents. 
        For PRE, the Preferred Parent (PP) node is defined to be the same as the RPL DODAG Preferred Parent node. 
        Furthermore, to construct an alternative path toward the root, in addition to the PP node, each node in the network selects additional parent(s), called alternative parent(s), from its Parent Set (PS).<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">
        There are multiple possible policies of selecting the AP node.
        This section details three such possible policies.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">
        All three policies defined perform AP selection based on common ancestors, named Common Ancestor Strict, Common Ancestor Medium, and Common Ancestor Relaxed, depending on how restrictive the selection process is.
        A more restrictive policy will limit flooding but might fail to select an appropriate AP, while a less restrictive one will more often find an appropriate AP but might increase flooding.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">
        All three policies apply their corresponding common ancestor criterion to filter the list of candidate neighbours in the alternative parent set.<a href="#section-3-4" class="pilcrow">¶</a></p>
<div id="sec_ca_strict">
<section id="section-3.1">
        <h3 id="name-common-ancestor-strict">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-common-ancestor-strict" class="section-name selfRef">Common Ancestor Strict</a>
        </h3>
<p id="section-3.1-1">
            In the CA Strict OF the node will check if its Preferred Grand Parent (PGP), the PP of its PP, is the same as the PP of the potential AP.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span id="name-example-common-ancestor-str"></span><div id="fig_ca_alternative_parent_selection">
<figure id="figure-1">
          <div class="artwork art-text alignLeft" id="section-3.1-2.1">
<pre>

               (  R  ) root
                  .                      PS(S) = {A, B, C, D}
                  .                      PP(S) = C
                  .                      PP(PP(S)) = Y
                  .
                                         PS(A) = {W, X}
  ( W )    ( X )    ( Y )    ( Z )       PP(A) = X
    ^ ^   ^^ ^ ^    ^^^^ ^   ^ ^^
    |  \ //  |  \ //  ||  \ /  ||        PS(B) = {W, X, Y}
    |   //   |   //   ||   /   ||        PP(B) = Y
    |  // \  |  // \  ||  / \  ||
    | //   \ | //   \ || /   \ ||        PS(C) = {X, Y, Z}
  ( A )    ( B )    ( C )    ( D )       PP(C) = Y
      ^        ^      ^^     ^
       \        \     ||    /            PS(D) = {Y, Z}
         \       \    ||   /             PP(D) = Z
           \      \   ||  /
             \----\\  || /               || Preferred Parent
                  (   S   ) source       |  Potential Alternative Parent
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-example-common-ancestor-str" class="selfRef">Example Common Ancestor Strict Alternative Parent Selection policy</a>
          </figcaption></figure>
</div>
<p id="section-3.1-3">
            For example, in <a href="#fig_ca_alternative_parent_selection" class="xref">Figure 1</a>, the source node S must know its grandparent sets through nodes A, B, C, and D.
            The Parent Sets (PS) and the Preferred Parents (PS) of nodes A, B, C, and D are shown on the side of the figure.
            The CA Strict parent selection policy will select an AP for node S for which PP(PP(S)) = PP(AP).
            Given that PP(PP(S)) = Y:<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.1-4.1">
                    Node A: PP(A) = X and therefore it is different than PP(PP(S))<a href="#section-3.1-4.1" class="pilcrow">¶</a>
</li>
<li id="section-3.1-4.2">
                    Node B: PS(B) = Y and therefore it is equal to PP(PP(S))<a href="#section-3.1-4.2" class="pilcrow">¶</a>
</li>
<li id="section-3.1-4.3">
                    Node D: PS(D) = Z and therefore it is different than PP(PP(S))<a href="#section-3.1-4.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-3.1-5">
            
            node S can decide to use node B as its AP node, since PP(PP(S)) = Y = PP(B).<a href="#section-3.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_ca_medium">
<section id="section-3.2">
        <h3 id="name-common-ancestor-medium">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-common-ancestor-medium" class="section-name selfRef">Common Ancestor Medium</a>
        </h3>
<p id="section-3.2-1">
            In the CA Medium OF the node will check if its Preferred Grand Parent (PGP), the PP of its PP, is contained in the PS of the potential AP.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2"> 
            Using the same example, in <a href="#fig_ca_alternative_parent_selection" class="xref">Figure 1</a>, the CA Medium parent selection policy will select an AP for node S for which PP(PP(S)) is in PS(AP).
            
            Given that PP(PP(S)) = Y:<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.2-3.1">
                    Node A: PS(A) = {W, X} and therefore PP(PP(S)) is not in the set<a href="#section-3.2-3.1" class="pilcrow">¶</a>
</li>
<li id="section-3.2-3.2">
                    Node B: PS(B) = {W, X, Y} and therefore PP(PP(S)) is in the set<a href="#section-3.2-3.2" class="pilcrow">¶</a>
</li>
<li id="section-3.2-3.3">
                    Node D: PS(D) = {Y, Z} and therefore PP(PP(S)) is in the set<a href="#section-3.2-3.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-3.2-4">
            
            node S can decide to use node B or D as its AP node.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_ca_relaxed">
<section id="section-3.3">
        <h3 id="name-common-ancestor-relaxed">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-common-ancestor-relaxed" class="section-name selfRef">Common Ancestor Relaxed</a>
        </h3>
<p id="section-3.3-1">
            In the CA Relaxed OF the node will check if the Parent Set (PS) of its Preferred Parent (PP) has a node in common with the PS of the potential AP.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2"> 
            Using the same example, in <a href="#fig_ca_alternative_parent_selection" class="xref">Figure 1</a>, the CA Relaxed parent selection policy will select an AP for node S for which PS(PP(S)) has at least one node in common with PS(AP).
            Given that PS(PP(S)) = {X, Y, Z}:<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.3-3.1">
                    Node A: PS(A) = {W, X} and the common nodes are {X}<a href="#section-3.3-3.1" class="pilcrow">¶</a>
</li>
<li id="section-3.3-3.2">
                    Node B: PS(B) = {W, X, Y} and the common nodes are {X, Y}<a href="#section-3.3-3.2" class="pilcrow">¶</a>
</li>
<li id="section-3.3-3.3">
                    Node D: PS(D) = {Y, Z} and the common nodes are {Y, Z}<a href="#section-3.3-3.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-3.3-4">
            
            node S can decide to use node A, B or D as its AP node.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<div id="ca_of">
<section id="section-4">
      <h2 id="name-common-ancestor-objective-f">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-common-ancestor-objective-f" class="section-name selfRef">Common Ancestor Objective Function</a>
      </h2>
<p id="section-4-1">
        An OF which allows the multiple paths to remain correlated is detailed here.
        More specifically, when using this OF a node will select an AP node close to its PP node to allow the operation of overhearing between parents.
        For more details about overhearing and its use in this context see the "Promiscuous Overhearing" <span><a href="https://tools.ietf.org/html/draft-papadopoulos-raw-pareo-reqs-01#section-4.3" class="relref">Section 4.3</a> of [<a href="#I-D.papadopoulos-raw-pareo-reqs" class="xref">I-D.papadopoulos-raw-pareo-reqs</a>]</span>.
        If multiple potential APs match this condition, the AP with the lowest rank will be registered.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">
        The OF described here is an extension of <span><a href="#RFC6719" class="xref">The Minimum Rank with Hysteresis Objective Function</a> [<a href="#RFC6719" class="xref">MRHOF</a>]</span>.
        In general, this OF extends MRHOF by specifying how an AP is selected.
        Importantly, the calculation of the rank of the node through each candidate neighbor and the selection of the PP is kept the same as in MRHOF.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">
        The ways in which the CA OF modifies MRHOF in a section-by-section manner follows in detail:<a href="#section-4-3" class="pilcrow">¶</a></p>
<dl class="dlNewline" id="section-4-4">
        <dt id="section-4-4.1">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-2" class="relref">Section 2</a></span>: "Terminology". Term "Selected Metric":</dt>
<dd id="section-4-4.2">
                The CA OF uses only one metric, like MRHOF, for rank calculation, with the same MRHOF semantics.
                For selecting the AP, the PS TLV (stored in the DIO Metric Container Node State and Attribute (NSA) object body, see <a href="#PS_TLV" class="xref">Section 5</a>) is used.
                This additional NSA metric is disregarded for the purposes of rank calculation.<a href="#section-4-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.3">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3" class="relref">Section 3</a></span> "The Minimum Rank with Hysteresis Objective Function":</dt>
<dd id="section-4-4.4">
                Same as MRHOF extended to AP selection.
                Minimum Rank path selection and switching applies correspondingly to the AP with the extra CA requirement of having some match between ancestors.<a href="#section-4-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.5">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.1" class="relref">Section 3.1</a></span> "Computing the Path Cost":</dt>
<dd id="section-4-4.6">
                Same as MRHOF extended to AP selection.
                If a candidate neighbor does not fulfill the CA requirement then the path through that neighbor SHOULD be set to MAX_PATH_COST, the same value used by MRHOF.
                As a result, the node MUST NOT select the candidate neighbor as its AP.<a href="#section-4-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.7">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.2" class="relref">Section 3.2</a></span> "Parent Selection":</dt>
<dd id="section-4-4.8">
                Same as MRHOF extended to AP selection.
                To allow hysteresis, AP selection maintains a variable, cur_ap_min_path_cost, which is the path cost of the current AP.<a href="#section-4-4.8" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.9">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.2.1" class="relref">Section 3.2.1</a></span> "When Parent Selection Runs":</dt>
<dd id="section-4-4.10">
                Same as MRHOF.<a href="#section-4-4.10" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.11">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.2.2" class="relref">Section 3.2.2</a></span> "Parent Selection Algorithm":</dt>
<dd id="section-4-4.12">
                Same as MRHOF extended to AP selection.
                If the smallest path cost for paths through the candidate neighbors is smaller than cur_ap_min_path_cost by less than PARENT_SWITCH_THRESHOLD (the same variable as MRHOF uses), the node MAY continue to use the current AP.
                Additionally, if there is no PP selected, there MUST NOT be any AP selected as well.
                Finally, as with MRHOF, a node MAY include up to PARENT_SET_SIZE-1 additional candidate neighbors in its alternative parent set.
                The value of PARENT_SET_SIZE is the same as in MRHOF.<a href="#section-4-4.12" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.13">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.3" class="relref">Section 3.3</a></span> "Computing Rank":</dt>
<dd id="section-4-4.14">
                Same as MRHOF.<a href="#section-4-4.14" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.15">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.4" class="relref">Section 3.4</a></span> "Advertising the Path Cost":</dt>
<dd id="section-4-4.16">
                Same as MRHOF.<a href="#section-4-4.16" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.17">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-3.5" class="relref">Section 3.5</a></span> "Working without Metric Containers":</dt>
<dd id="section-4-4.18">
                It is not possible to work without metric containers, since CA AP selection requires information from parents regarding their parent sets, which is transmitted via the NSA object in the DIO Mectric Container.<a href="#section-4-4.18" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.19">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-4" class="relref">Section 4</a></span> "Using MRHOF for Metric Maximization":</dt>
<dd id="section-4-4.20">
                Same as MRHOF.<a href="#section-4-4.20" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.21">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-5" class="relref">Section 5</a></span> "MRHOF Variables and Parameters":</dt>
<dd id="section-4-4.22">
          <p id="section-4-4.22.1">
                Same as MRHOF extended to AP selection.
                The CA OF operates like MRHOF for AP selection by maintaining separate:<a href="#section-4-4.22.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-4-4.22.2">
            <dt id="section-4-4.22.2.1">AP:</dt>
<dd id="section-4-4.22.2.2">
                        Corresponding to the MRHOF PP.
                        Hysteresis is configured for AP with the same PARENT_SWITCH_THRESHOLD parameter as in MRHOF.
                        The AP MUST NOT be the same as the PP.<a href="#section-4-4.22.2.2" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.22.2.3">Alternative parent set:</dt>
<dd id="section-4-4.22.2.4">
                        Corresponding to the MRHOF parent set.
                        The size is defined by the same PARENT_SET_SIZE parameter as in MRHOF.
                        The Alternative parent set MUST be a non-strict subset of the parent set.<a href="#section-4-4.22.2.4" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.22.2.5">cur_ap_min_path_cost:</dt>
<dd id="section-4-4.22.2.6">
                        Corresponding to the MRHOF cur_min_path_cost variable.
                        To support the operation of the hysteresis function for AP selection.<a href="#section-4-4.22.2.6" class="pilcrow">¶</a>
</dd>
</dl>
</dd>
<dt id="section-4-4.23">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-6" class="relref">Section 6</a></span> "Manageability":</dt>
<dd id="section-4-4.24">
                Same as MRHOF.<a href="#section-4-4.24" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.25">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-6.1" class="relref">Section 6.1</a></span> "Device Configuration":</dt>
<dd id="section-4-4.26">
                Same as MRHOF.<a href="#section-4-4.26" class="pilcrow">¶</a>
</dd>
<dt id="section-4-4.27">
<span>[<a href="#RFC6719" class="xref">MRHOF</a>], <a href="https://rfc-editor.org/rfc/rfc6719#section-6.2" class="relref">Section 6.2</a></span> "Device Monitoring":</dt>
<dd id="section-4-4.28">
                Same as MRHOF.<a href="#section-4-4.28" class="pilcrow">¶</a>
</dd>
</dl>
<section id="section-4.1">
        <h3 id="name-usage">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-usage" class="section-name selfRef">Usage</a>
        </h3>
<p id="section-4.1-1">
            All OF policies apply their corresponding criterion to filter the list of candidate neighbours in the alternative parent set.
            The AP is then selected from the alternative parent set based on Rank and using hysteresis as is done for the PP in MRHOF.
            It is noteworthy that the OF uses the same Objective Code Point (OCP): TBD1 for all policies used.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">
            The PS information can be used by any of the described AP selection policies or other ones not described here, depending on requirements.
            It is optional for all nodes to use the same AP selection policies.
            Different nodes may use different AP selection policies, since the selection policy is local to each node.
            For example, using different policies can be used to vary the transmission reliability in each hop.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="PS_TLV">
<section id="section-5">
      <h2 id="name-node-state-and-attribute-ns">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-node-state-and-attribute-ns" class="section-name selfRef">Node State and Attribute (NSA) object type extension</a>
      </h2>
<p id="section-5-1">
            In order to select their AP node, nodes need to be aware of their grandparent node sets. 
            Within <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>, the nodes use the DODAG Information Object (DIO) Control Message to broadcast information about themselves to potential children.
            However, <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>, does not define how to propagate parent set related information, which is what this document addresses.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">
            DIO messages can carry multiple options, out of which the <span><a href="#RFC6551" class="xref">DAG Metric Container option</a> [<a href="#RFC6551" class="xref">RFC6551</a>]</span> is the most suitable structurally and semantically for the purpose of carrying the parent set.
            The DAG Metric Container option itself can carry different nested objects, out of which the <span><a href="#RFC6551" class="xref">Node State and Attribute (NSA)</a> [<a href="#RFC6551" class="xref">RFC6551</a>]</span> is appropriate for transferring generic node state data.
            Within the Node State and Attribute it is possible to store optional TLVs representing various node characteristics.
            As per the <span><a href="#RFC6551" class="xref">Node State and Attribute (NSA)</a> [<a href="#RFC6551" class="xref">RFC6551</a>]</span> description, no TLV has been defined for use.
            This document defines one TLV for the purpose of transmitting a node's parent set.<a href="#section-5-2" class="pilcrow">¶</a></p>
<span id="name-example-dio-message-with-a-"></span><div id="fig_dio">
<figure id="figure-2">
        <div class="artwork art-text alignLeft" id="section-5-3.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| RPLInstanceID |Version Number |             Rank              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|G|0| MOP | Prf |     DTSN      |     Flags     |   Reserved    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                            DODAGID                            +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| DAGMC Type (2)| DAGMC Length  |                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
|                                                               |
//                   DAG Metric Container data                 //
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-example-dio-message-with-a-" class="selfRef">Example DIO Message with a DAG Metric Container option</a>
        </figcaption></figure>
</div>
<p id="section-5-4">
            <a href="#fig_dio" class="xref">Figure 2</a> shows the structure of the DIO Control Message when a DAG Metric Container option is included.
            The DAG Metric Container option type (DAGMC Type in <a href="#fig_dio" class="xref">Figure 2</a>) has the value 0x02 as per the IANA registry for the RPL Control Message Options, and is defined in <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>.
            The DAG Metric Container option length (DAGMC Length in <a href="#fig_dio" class="xref">Figure 2</a>) expresses the DAG Metric Container length in bytes.
            DAG Metric Container data holds the actual data and is shown expanded in <a href="#fig_dagmc" class="xref">Figure 3</a>.<a href="#section-5-4" class="pilcrow">¶</a></p>
<span id="name-dag-metric-container-mc-dat"></span><div id="fig_dagmc">
<figure id="figure-3">
        <div class="artwork art-text alignLeft" id="section-5-5.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Routing-MC-Type|Res Flags|P|C|O|R| A   |  Prec | Length (bytes)| |MC
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Res       |  Flags    |A|O|    PS  type   |   PS  Length  | |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |NSA
|   PS IPv6 address(es) ...                                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-dag-metric-container-mc-dat" class="selfRef">DAG Metric Container (MC) data with Node State and Attribute (NSA) object body and a TLV</a>
        </figcaption></figure>
</div>
<p id="section-5-6">
            The structure of the DAG Metric Container data in the form of a Node State and Attribute (NSA) object with a TLV in the NSA Optional TLVs field is shown in <a href="#fig_dagmc" class="xref">Figure 3</a>.
            The first 32 bits comprise the DAG Metric Container header and all the following bits are part of the Node State and Attribute object body, as defined in <span>[<a href="#RFC6551" class="xref">RFC6551</a>]</span>.
            This document defines a new TLV, which MAY be carried in the Node State and Attribute (NSA) object Optional TLVs field. 
            The TLV is named Parent Set and is abbreviated as PS in <a href="#fig_dagmc" class="xref">Figure 3</a>.<a href="#section-5-6" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-5-7">
        <dt id="section-5-7.1">PS type:</dt>
<dd style="margin-left: 3.0em" id="section-5-7.2">
                    The type of the Parent Set TLV.
                    The value is TBD2.<a href="#section-5-7.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5-7.3">PS Length:</dt>
<dd style="margin-left: 3.0em" id="section-5-7.4">
                    The total length of the TLV value field (PS IPv6 address(es)) in bytes.
                    The length is an integral multiple of 16, the number of bytes in an IPv6 address.<a href="#section-5-7.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5-7.5">PS IPv6 address(es)</dt>
<dd style="margin-left: 3.0em" id="section-5-7.6">
                    One or more 128-bit IPv6 address(es) without any separator between them.
                    The field consists of one IPv6 address per parent in the parent set.
                    The parent addresses are listed in decreasing order of preference and not all parents in the parent set need to be included.
                    The selection of how many parents from the parent set are to be included is left to the implementation.  
                    The number of parent addresses in the PS IPv6 address(es) field can be deduced by dividing the length of the PS IPv6 address(es) field in bytes by 16, the number of bytes in an IPv6 address.<a href="#section-5-7.6" class="pilcrow">¶</a>
</dd>
</dl>
<section id="section-5.1">
        <h3 id="name-usage-2">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-usage-2" class="section-name selfRef">Usage</a>
        </h3>
<p id="section-5.1-1">
            The PS SHOULD be used in the process of parent selection, and especially in AP selection, since it can help the alternative path to not significantly deviate from the preferred path.
            The Parent Set is information local to the node that broadcasts it.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">
            The PS is used only within NSA objects configured as a metric, therefore the DAG Metric Container field "C" MUST be 0.
            Additionally, since the information in the PS needs to be propagated downstream but it cannot be aggregated, the DAG Metric Container field "R" MUST be 1.
            Finally, since the information contained is by definition partial, more specifically just the parent set of the DIO-sending node, the DAG Metric Container field "P" MUST be 1.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">    
        It is important that the PS does not affect the calculation of the rank through candidate neighbors.
            It is only used with the CA OF to remove nodes which do not fulfill the CA OF criteria from the candidate neighbor list.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<section id="section-6">
      <h2 id="name-controlling-pre">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-controlling-pre" class="section-name selfRef">Controlling PRE</a>
      </h2>
<p id="section-6-1">
        PRE is very helpful when the aim is to increase reliability for a certain path, however its use creates additional traffic as part of the replication process.
        It is conceivable that not all paths have stringent reliability requirements. 
        Therefore, a way to control whether PRE is applied to a path's packets SHOULD be implemented.
        For example, a traffic class label can be used to determine this behavior per flow type as described in <span><a href="#RFC8655" class="xref">Deterministic Networking Architecture</a> [<a href="#RFC8655" class="xref">RFC8655</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">
        The structure of the DIO control message is extended, within the pre-defined DIO options.
        The additional information are the IPv6 addresses of the parent set of the node transmitting the DIO.
        This use of this additional information can have the following potential consequences:<a href="#section-7-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-7-2.1">
                A malicious node that can receive and read the DIO can "see" further than it's own neighbourhood by one hop, learning the addresses of it's two hop neighbors.
                This is a privacy / network discovery issue.<a href="#section-7-2.1" class="pilcrow">¶</a>
</li>
<li id="section-7-2.2">
                A malicious node that can send DIOs can use the parent set extension to convince neighbours to route through itself, instead of the normal preferred parent they would use.
                However, this is already possible with other OFs (like <span>[<a href="#RFC6552" class="xref">OF0</a>]</span> and <span>[<a href="#RFC6719" class="xref">MRHOF</a>]</span>) by reporting a fake rank value in the DIO, thus masquerading as the DODAG root.<a href="#section-7-2.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">
        This proposal requests the allocation of a new value TBD1 from the "Objective Code Point (OCP)" sub-registry of the "Routing Protocol for Low Power and Lossy Networks (RPL)" registry.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">
        This proposal also requests the allocation of a new value TBD2 for the "Parent Set" TLV from the Routing Metric/Constraint TLVs sub-registry from IANA.<a href="#section-8-2" class="pilcrow">¶</a></p>
</section>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-informative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-informative-references" class="section-name selfRef">Informative references</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-6tisch-architecture">[I-D.ietf-6tisch-architecture]</dt>
<dd>
<span class="refAuthor">Thubert, P.</span>, <span class="refTitle">"An Architecture for IPv6 over the TSCH mode of IEEE 802.15.4"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6tisch-architecture-28</span>, <time datetime="2019-10-29">29 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6tisch-architecture-28">https://tools.ietf.org/html/draft-ietf-6tisch-architecture-28</a>&gt;</span>. </dd>
<dt id="I-D.papadopoulos-raw-pareo-reqs">[I-D.papadopoulos-raw-pareo-reqs]</dt>
<dd>
<span class="refAuthor">Papadopoulos, G.</span><span class="refAuthor">, Koutsiamanis, R.</span><span class="refAuthor">, Montavont, N.</span><span class="refAuthor">, and P. Thubert</span>, <span class="refTitle">"Exploiting Packet Replication and Elimination in Complex Tracks in LLNs"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-papadopoulos-raw-pareo-reqs-01</span>, <time datetime="2020-01-02">2 January 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-papadopoulos-raw-pareo-reqs-01">https://tools.ietf.org/html/draft-papadopoulos-raw-pareo-reqs-01</a>&gt;</span>. </dd>
<dt id="RFC6719">[MRHOF]</dt>
<dd>
<span class="refAuthor">Gnawali, O.</span><span class="refAuthor"> and P. Levis</span>, <span class="refTitle">"The Minimum Rank with Hysteresis Objective Function"</span>, <span class="seriesInfo">RFC 6719</span>, <span class="seriesInfo">DOI 10.17487/RFC6719</span>, <time datetime="2012-09">September 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6719">https://www.rfc-editor.org/info/rfc6719</a>&gt;</span>. </dd>
<dt id="RFC6552">[OF0]</dt>
<dd>
<span class="refAuthor">Thubert, P., Ed.</span>, <span class="refTitle">"Objective Function Zero for the Routing Protocol for Low-Power and Lossy Networks (RPL)"</span>, <span class="seriesInfo">RFC 6552</span>, <span class="seriesInfo">DOI 10.17487/RFC6552</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6552">https://www.rfc-editor.org/info/rfc6552</a>&gt;</span>. </dd>
<dt id="RFC2119">[RFC2119]</dt>
<dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC6551">[RFC6551]</dt>
<dd>
<span class="refAuthor">Vasseur, JP., Ed.</span><span class="refAuthor">, Kim, M., Ed.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, Dejean, N.</span><span class="refAuthor">, and D. Barthel</span>, <span class="refTitle">"Routing Metrics Used for Path Calculation in Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6551</span>, <span class="seriesInfo">DOI 10.17487/RFC6551</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6551">https://www.rfc-editor.org/info/rfc6551</a>&gt;</span>. </dd>
<dt id="RFC8557">[RFC8557]</dt>
<dd>
<span class="refAuthor">Finn, N.</span><span class="refAuthor"> and P. Thubert</span>, <span class="refTitle">"Deterministic Networking Problem Statement"</span>, <span class="seriesInfo">RFC 8557</span>, <span class="seriesInfo">DOI 10.17487/RFC8557</span>, <time datetime="2019-05">May 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8557">https://www.rfc-editor.org/info/rfc8557</a>&gt;</span>. </dd>
<dt id="RFC8655">[RFC8655]</dt>
<dd>
<span class="refAuthor">Finn, N.</span><span class="refAuthor">, Thubert, P.</span><span class="refAuthor">, Varga, B.</span><span class="refAuthor">, and J. Farkas</span>, <span class="refTitle">"Deterministic Networking Architecture"</span>, <span class="seriesInfo">RFC 8655</span>, <span class="seriesInfo">DOI 10.17487/RFC8655</span>, <time datetime="2019-10">October 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8655">https://www.rfc-editor.org/info/rfc8655</a>&gt;</span>. </dd>
<dt id="RFC6550">[RPL]</dt>
<dd>
<span class="refAuthor">Winter, T., Ed.</span><span class="refAuthor">, Thubert, P., Ed.</span><span class="refAuthor">, Brandt, A.</span><span class="refAuthor">, Hui, J.</span><span class="refAuthor">, Kelsey, R.</span><span class="refAuthor">, Levis, P.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, Struik, R.</span><span class="refAuthor">, Vasseur, JP.</span><span class="refAuthor">, and R. Alexander</span>, <span class="refTitle">"RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6550</span>, <span class="seriesInfo">DOI 10.17487/RFC6550</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6550">https://www.rfc-editor.org/info/rfc6550</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-other-informative-reference">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-other-informative-reference" class="section-name selfRef">Other Informative References</a>
        </h3>
<dl class="references">
<dt id="IEEE802154">[IEEE802154]</dt>
<dd>
<span class="refAuthor">IEEE standard for Information Technology</span>, <span class="refTitle">"IEEE Std 802.15.4 Standard for Low-Rate Wireless Personal Area Networks (WPANs)"</span>, <time datetime="2015-12">December 2015</time>. </dd>
</dl>
</section>
</section>
<section id="section-appendix.a">
      <h2 id="name-implementation-status">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-appendix.a-1">
        A research-stage implementation of the PRE mechanism using the proposed extension as part of a 6TiSCH IOT use case was developed at IMT Atlantique, France by Tomas Lagos Jenschke and Remous-Aris Koutsiamanis.
        It was implemented on the open-source Contiki OS and tested with the Cooja simulator.
        The DIO DAGMC NSA extension is implemented with a configurable number of parents from the parent set of a node to be reported.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
<span id="name-simulation-topology"></span><div id="fig_sim_topology">
<figure id="figure-4">
        <div class="artwork art-text alignLeft" id="section-appendix.a-2.1">
<pre>
                 ( R )


(11)   (12)   (13)   (14)   (15)   (16)


(21)   (22)   (23)   (24)   (25)   (26)


(31)   (32)   (33)   (34)   (35)   (36)


(41)   (42)   (43)   (44)   (45)   (46)


(51)   (52)   (53)   (54)   (55)   (56)


                 ( S )
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-simulation-topology" class="selfRef">Simulation Topology</a>
        </figcaption></figure>
</div>
<p id="section-appendix.a-3">
        The simulation setup is:<a href="#section-appendix.a-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-appendix.a-4">
        <dt id="section-appendix.a-4.1">Topology:</dt>
<dd id="section-appendix.a-4.2">
                32 nodes structured in regular grid as show in <a href="#fig_sim_topology" class="xref">Figure 4</a>. 
                Node S (source) is the only data packet sender, and send data to node R (root).
                The parent set of each node (except R) is all the nodes in the immediately higher row, the immediately above 6 nodes.
                For example, each node in {51, 52, 53, 54, 55, 56} is connected to all of {41, 42, 43, 44, 45, 46}.
                Node 11, 12, 13, 14, 15, 16 have a single upwards link to R.<a href="#section-appendix.a-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.3">MAC:</dt>
<dd id="section-appendix.a-4.4">
               TSCH with 1 retransmission<a href="#section-appendix.a-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.5">Platform:</dt>
<dd id="section-appendix.a-4.6">
               Cooja<a href="#section-appendix.a-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.7">Schedule:</dt>
<dd id="section-appendix.a-4.8">
               Static, 2 timeslots per link from each node to each parent in its parent set, 1 broadcast EB slot, 1 sender-based shared timeslot (for DIO and DIS) per node (total of 32).<a href="#section-appendix.a-4.8" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.9">Simulation lifecycle:</dt>
<dd id="section-appendix.a-4.10">
               Allow link formation for 100 seconds before starting to send data packets.
               Afterwards, S sends data packets to R.
               The simulation terminates when 1000 packets have been sent by S.<a href="#section-appendix.a-4.10" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.11">Radio Links:</dt>
<dd id="section-appendix.a-4.12">
               Every 60 s, a new Packet Delivery Rate is randomly drawn for each link, with a uniform distribution spanning the 70% to 100% interval.<a href="#section-appendix.a-4.12" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.13">Traffic Pattern:</dt>
<dd id="section-appendix.a-4.14">
                CBR, S sends one non-fragmented UDP packet every 5 seconds to R.<a href="#section-appendix.a-4.14" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.15">PS extension size:</dt>
<dd id="section-appendix.a-4.16">
                3 parents.<a href="#section-appendix.a-4.16" class="pilcrow">¶</a>
</dd>
<dt id="section-appendix.a-4.17">Routing Methods:</dt>
<dd id="section-appendix.a-4.18">
          <ul>
<li id="section-appendix.a-4.18.1.1">
                        RPL: The default RPL non-PRE implementation in Contiki OS.<a href="#section-appendix.a-4.18.1.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.a-4.18.1.2">
                        2nd ETX: PRE with a parent selection method which picks as AP the 2nd best parent in the parent set based on ETX.<a href="#section-appendix.a-4.18.1.2" class="pilcrow">¶</a>
</li>
<li id="section-appendix.a-4.18.1.3">
                        CA Strict: As described in <a href="#sec_ca_strict" class="xref">Section 3.1</a>.<a href="#section-appendix.a-4.18.1.3" class="pilcrow">¶</a>
</li>
<li id="section-appendix.a-4.18.1.4">
                        CA Medium: As described in  <a href="#sec_ca_medium" class="xref">Section 3.2</a>.<a href="#section-appendix.a-4.18.1.4" class="pilcrow">¶</a>
</li>
</ul>
</dd>
</dl>
<p id="section-appendix.a-5">
            Simulation results:<a href="#section-appendix.a-5" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
        <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">
            Routing Method
            </th>
            <th class="text-right" rowspan="1" colspan="1">
            Average Packet Delivery Rate (%)
            </th>
            <th class="text-right" rowspan="1" colspan="1">
            Average Traversed Nodes/packet (#)
            </th>
            <th class="text-right" rowspan="1" colspan="1">
            Average Duplications/packet (#)
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">RPL</td>
            <td class="text-right" rowspan="1" colspan="1">82.70</td>
            <td class="text-right" rowspan="1" colspan="1">5.56</td>
            <td class="text-right" rowspan="1" colspan="1">7.02</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">2nd ETX</td>
            <td class="text-right" rowspan="1" colspan="1">99.38</td>
            <td class="text-right" rowspan="1" colspan="1">14.43</td>
            <td class="text-right" rowspan="1" colspan="1">31.29</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">CA Strict</td>
            <td class="text-right" rowspan="1" colspan="1">97.32</td>
            <td class="text-right" rowspan="1" colspan="1">9.86</td>
            <td class="text-right" rowspan="1" colspan="1">18.23</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">CA Medium</td>
            <td class="text-right" rowspan="1" colspan="1">99.66</td>
            <td class="text-right" rowspan="1" colspan="1">13.75</td>
            <td class="text-right" rowspan="1" colspan="1">28.86</td>
          </tr>
        </tbody>
      </table>
<p id="section-appendix.a-7">
        Links:<a href="#section-appendix.a-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.a-8.1">
          <a href="https://github.com/ariskou/contiki/tree/draft-koutsiamanis-roll-nsa-extension">Contiki OS DIO DAGMC NSA extension (draft-koutsiamanis-roll-nsa-extension branch)</a><a href="#section-appendix.a-8.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.a-8.2">
          <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=e2f6ba229f45d8ccae2a6405e0ef41f1e61da138">Wireshark dissectors (for the optional PS TLV) - currently merged / in master</a><a href="#section-appendix.a-8.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
<section id="section-appendix.b">
      <h2 id="name-choosing-an-ap-selection-po">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-choosing-an-ap-selection-po" class="section-name selfRef">Choosing an AP selection policy</a>
      </h2>
<p id="section-appendix.b-1">
        The manner of choosing an AP selection policy is left to the implementation, for maximum flexibility.<a href="#section-appendix.b-1" class="pilcrow">¶</a></p>
<p id="section-appendix.b-2">
        For example, a different policy can be used per traffic type.
        The network configurator can choose the CA Relaxed policy to increase reliability (thus producing some flooding) for specific, extremely important, alert packets.
        On the other hand, all normal data traffic uses the CA Strict policy.
        Therefore, an exception is made just for the alert packets.<a href="#section-appendix.b-2" class="pilcrow">¶</a></p>
<p id="section-appendix.b-3">
        Another option would be to devise a new disjoint policy, where the paths are on purpose non-correlated, to increase path diversity and resilience against whole groups of nodes failing.
        The disadvantage may be increased jitter.<a href="#section-appendix.b-3" class="pilcrow">¶</a></p>
<p id="section-appendix.b-4">
        Finally, a network configurator may provide the CA policies with a preference order of Strict &gt; Medium &gt; Relaxed as a means of falling back to more flood-prone policies to maintain reliability.<a href="#section-appendix.b-4" class="pilcrow">¶</a></p>
</section>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Remous-Aris Koutsiamanis (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">IMT Atlantique</span></div>
<div dir="auto" class="left"><span class="street-address">Office B00 - 126A<br>2 Rue de la Chataigneraie</span></div>
<div dir="auto" class="left">
<span class="postal-code">35510</span> <span class="locality">Cesson-Sevigne - Rennes</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+33%20299%2012%2070%2049" class="tel">+33 299 12 70 49</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:aris@ariskou.com" class="email">aris@ariskou.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Georgios Papadopoulos</span></div>
<div dir="auto" class="left"><span class="org">IMT Atlantique</span></div>
<div dir="auto" class="left"><span class="street-address">Office B00 - 114A<br>2 Rue de la Chataigneraie</span></div>
<div dir="auto" class="left">
<span class="postal-code">35510</span> <span class="locality">Cesson-Sevigne - Rennes</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+33%20299%2012%2070%2004" class="tel">+33 299 12 70 04</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:georgios.papadopoulos@imt-atlantique.fr" class="email">georgios.papadopoulos@imt-atlantique.fr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Nicolas Montavont</span></div>
<div dir="auto" class="left"><span class="org">IMT Atlantique</span></div>
<div dir="auto" class="left"><span class="street-address">Office B00 - 106A<br>2 Rue de la Chataigneraie</span></div>
<div dir="auto" class="left">
<span class="postal-code">35510</span> <span class="locality">Cesson-Sevigne - Rennes</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+33%20299%2012%2070%2023" class="tel">+33 299 12 70 23</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:nicolas.montavont@imt-atlantique.fr" class="email">nicolas.montavont@imt-atlantique.fr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pascal Thubert</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc</span></div>
<div dir="auto" class="left"><span class="street-address">Building D<br>45 Allee des Ormes - BP1200</span></div>
<div dir="auto" class="left">
<span class="postal-code">06254</span> <span class="locality">MOUGINS - Sophia Antipolis</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+33%20497%2023%2026%2034" class="tel">+33 497 23 26 34</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:pthubert@cisco.com" class="email">pthubert@cisco.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
