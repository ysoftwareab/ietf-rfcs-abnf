<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Multi-party Chat
      Using the Message Session Relay Protocol (MSRP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Multi-party Chat
      Using the Message Session Relay Protocol (MSRP)">
<meta name="keywords" content="I-D, Internet-Draft, messaging, message sessions, multi-party">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Niemi</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Nokia</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Garcia-Martin</td></tr>
<tr><td class="header">Expires: September 10, 2009</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">G. Sandbakken, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">TANDBERG</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 09, 2009</td></tr>
</table></td></tr></table>
<h1><br />Multi-party Chat
      Using the Message Session Relay Protocol (MSRP)<br />draft-ietf-simple-chat-04</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 10, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>The Message Session Relay Protocol (MSRP) defines a
        mechanism for sending instant messages within a peer-to-peer
        session, negotiated using the Session Initiation Protocol (SIP)
        and the Session Description Protocol (SDP). This document
        defines the necessary tools for establishing multi-party
        chat sessions, or chat rooms, using MSRP.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#motivation">3.</a>&nbsp;
Motivations and Requirements<br />
<a href="#overview">4.</a>&nbsp;
Overview of Operation<br />
<a href="#chatroom-management">5.</a>&nbsp;
Creating, Joining, and Deleting
				                 a Chat Room<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#creating">5.1.</a>&nbsp;
Creating a Chat Room<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#joining">5.2.</a>&nbsp;
Joining a Chat Room<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">5.3.</a>&nbsp;
Deleting a Chat Room<br />
<a href="#im">6.</a>&nbsp;
Sending and Receiving Instant Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#regular">6.1.</a>&nbsp;
Regular Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#private-messages">6.2.</a>&nbsp;
Private Messages<br />
<a href="#nicknames">7.</a>&nbsp;
Nicknames<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#using-nicknames">7.1.</a>&nbsp;
Using Nicknames within a Conference<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mod-nicknames">7.2.</a>&nbsp;
Modifying a Nickname<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">7.3.</a>&nbsp;
Removing a Nickname<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">7.4.</a>&nbsp;
Nicknames in the Conference Event Package<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">7.5.</a>&nbsp;
Nicknames not supported nor allowed<br />
<a href="#chatroom-attribute">8.</a>&nbsp;
The SDP 'chatroom' attribute<br />
<a href="#examples">9.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example-join">9.1.</a>&nbsp;
Joining a chat room<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example-nickname">9.2.</a>&nbsp;
Setting up a nickname<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example-normal-message">9.3.</a>&nbsp;
Sending a regular message to the chat room<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example-private-message">9.4.</a>&nbsp;
Sending a private message to a participant<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example-register-anonymous-uri">9.5.</a>&nbsp;
Obtaining an anonymous URI<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example-anonymous-private-message">9.6.</a>&nbsp;
Sending a private message using anonymous URI<br />
<a href="#iana">10.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-msrp-method">10.1.</a>&nbsp;
New MSRP Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-msrp-header">10.2.</a>&nbsp;
New MSRP Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-msrp-status-codes">10.3.</a>&nbsp;
New MSRP Status Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-sdp-attribute">10.4.</a>&nbsp;
New SDP Attribute<br />
<a href="#security">11.</a>&nbsp;
Security Considerations<br />
<a href="#contributors">12.</a>&nbsp;
Contributors<br />
<a href="#acknowledgments">13.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">14.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">14.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">14.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        The <a class='info' href='#RFC4975'>Message Session Relay Protocol (MSRP)<span> (</span><span class='info'>Campbell, B., Mahy, R., and C. Jennings, &ldquo;The Message Session Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a> [RFC4975] defines a mechanism for sending a series of instant 
        messages within a session. The <a class='info' href='#RFC3261'>Session Initiation Protocol (SIP)<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] in
        combination with the <a class='info' href='#RFC3264'>Session Description
          Protocol (SDP)<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3264] allows for two peers to establish and manage
        such sessions.
      
</p>
<p>
        In another application of SIP, a user agent can join in a
        multi-party conversation called a conference that is hosted 
        by a specialized user agent called a focus 
        <a class='info' href='#RFC4353'>[RFC4353]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a>. Such a
        conference can naturally involve an MSRP session as one of
        possibly many media components. It is the responsibility of an
        entity handling the media to relay instant messages received from
        one participant to the rest of the participants in the
        conference.  
      
</p>
<p>
        Several such systems already exist in the
        Internet. Participants in a chat room can be identified with a
        pseudonym or nickname, and decide whether their real identity is
        disclosed to other participants. Participants can also use a rich
        set of features such as the ability to send private instant
        messages to other participants.  They also allow combining instant 
        messaging with other media components, such as voice, video, 
        white boarding, screen sharing, and file transfer.
      
</p>
<p>Similar conferences are already available today with other
        technologies different than MSRP. For example, 
        <a class='info' href='#RFC2810'>Internet Relay Chat (IRC)<span> (</span><span class='info'>Kalt, C., &ldquo;Internet Relay Chat: Architecture,&rdquo; April&nbsp;2000.</span><span>)</span></a> [RFC2810], 
        <a class='info' href='#RFC3920'>Extensible Messaging and Presence Protocol<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3920]
        based chat rooms, and many other proprietary systems provide this
        kind of functionality. It makes sense to specify equivalent functionality 
        for MSRP-based systems to both provide competitive features as well as
        enable interworking between the systems.
      
</p>
<p>
        This document defines requirements, conventions, and extensions
        for providing private messages and nickname management in
        centralized conferences with MSRP. This document, however, does
        not specify functionality that can be used in conference with
        media different than MSRP. This memo uses the 
        <a class='info' href='#RFC4353'>SIP Conferencing Framework<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4353] as a design
        basis. It also aims to be compatible with the 
        <a class='info' href='#I-D.ietf-xcon-framework'>Centralized Conferencing
          Framework<span> (</span><span class='info'>Barnes, M., Boulton, C., and O. Levin, &ldquo;A Framework for Centralized Conferencing,&rdquo; April&nbsp;2008.</span><span>)</span></a> [I&#8209;D.ietf&#8209;xcon&#8209;framework]. It is expected that future mechanisms will be
        developed for providing similar functionality in generic
        conferences, i.e., where the media is not only restricted to
        MSRP. The mechanisms described in this document provide a future
        compatible short-term solution for MSRP centralized
        conferences. 
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
        in this document are to be interpreted as described in 
        <a class='info' href='#RFC2119'>RFC 2119, BCP 14<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119], and indicate 
        requirement levels for compliant implementations.
</p>
<p>This memo deals with a particular case of tightly coupled SIP
        conferences where the media exchanged consist of session-based
        instant messaging. Unless otherwise noted, we use the terminology
        defined in the 
        <a class='info' href='#RFC4353'>SIP Conferencing Framework<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4353] 
        applied to the scope of this document. In
        addition to that terminology, we introduce some new terms:
        
        </p>
<blockquote class="text"><dl>
<dt>Nickname: </dt>
<dd> a pseudonym or descriptive name associated to a
            participant. See <a class='info' href='#nicknames'>Section&nbsp;7<span> (</span><span class='info'>Nicknames</span><span>)</span></a> for details 
</dd>
<dt>Multi-party chat: </dt>
<dd>
            an instance of a tightly coupled conference, in which the media
            exchanged between the participants consist of (among others) MSRP
            based instant messages. Also known as a chat room.
</dd>
<dt>Chat Room: </dt>
<dd> a synonym for a multi-party chat
</dd>
<dt>Chat Room URI: </dt>
<dd> a URI that identifies a particular
            chat room. Since a chat room is a
            specialized conference of instant messages, in the context of this
            document, a chat room URI is a synonym of a conference URI.
</dd>
<dt>Sender: </dt>
<dd> the conference participant that
            originally created an instant message and sent it to the chat room for
            delivery.
</dd>
<dt>Recipient: </dt>
<dd> the destination conference
            participant(s). This defaults to the full conference participant
            list, minus the IM Sender.
</dd>
<dt>MSRP switch: </dt>
<dd> a media level entity that receives
            MSRP messages and delivers them to the other conference
            participants. An MSRP switch has a similar role to a conference
            mixer with the exception that an MSRP switch does not actually
            "mix" together different input media streams; it merely relays the
            messages between participants.
</dd>
<dt>Private Instant Message: </dt>
<dd> an instant
            message sent in a chat room whose intended to a single participant.
            A private IM is usually rendered distinctly from
            the rest of the IMs, as to indicate that the message was a private
            communication.
</dd>
<dt>Anonymous URI:</dt>
<dd> a temporary GRUU that can  be registered 
            with the conference focus to conceal a participant's SIP AOR 
            from the other participants in the a conference.
</dd>
</dl></blockquote>

<a name="motivation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Motivations and Requirements</h3>

<p>
        Although conference frameworks describing many types of
        conferencing applications already exist, such as the 
        <a class='info' href='#I-D.ietf-xcon-framework'>Framework and Data Model for
          Centralized Conferencing<span> (</span><span class='info'>Barnes, M., Boulton, C., and O. Levin, &ldquo;A Framework for Centralized Conferencing,&rdquo; April&nbsp;2008.</span><span>)</span></a> [I&#8209;D.ietf&#8209;xcon&#8209;framework] and the 
        <a class='info' href='#RFC4353'>SIP Conferencing
          Framework<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4353], the exact details of session-based instant
        messaging conferences are not well-defined at the moment. 
      
</p>
<p>
        To allow interoperable chat implementations, for both
        conference-aware, and conference-unaware user agents, certain
        conventions for MSRP conferences need to be defined. It also seems
        beneficial to provide a set of features that enhance the baseline
        multi-party MSRP in order to be able to create systems that have
        functionality on par with existing chat systems, as well as enable 
        building interworking gateways to these existing chat systems.
      
</p>
<p>We define the following requirements:
</p>
<p>
        </p>
<blockquote class="text"><dl>
<dt>REQ-1:</dt>
<dd>
            A basic requirement is the existence of a multi-party
            conference, where participants can join and leave the conference
            and get instant messages exchanged to the rest of the participants.
          
</dd>
<dt>REQ-2:</dt>
<dd>
            The conference must have the ability to host other media in
            addition to MSRP, as well as multiple streams of MSRP.
          
</dd>
<dt>REQ-3:</dt>
<dd>
            A conference participant must be able to determine the
            identities of the sender and recipient of the received IMs.
          
</dd>
<dt>REQ-4:</dt>
<dd>
            A conference participant must be able to determine the
            recipient of the received message. For instance, the recipient of the
            message might be the entire conference or a single participant 
            of the conference (i.e., a private message).
          
</dd>
<dt>REQ-5:</dt>
<dd>
            It must be possible to send a message to a single
            participant within the conference (i.e., a private instant message).
          
</dd>
<dt>REQ-6:</dt>
<dd>
            A conference participant may have a nickname or pseudonym
            associated with their real identity.
          
</dd>
<dt>REQ-7:</dt>
<dd>
            It must be possible for a participant to change their nickname
            during the progress of the conference.
          
</dd>
<dt>REQ-8:</dt>
<dd>
            It must be possible that a participant is only known by
            their nickname and not their real identity to the rest of the
            conference.
          
</dd>
<dt>REQ-9:</dt>
<dd>
            It must be possible for the MSRP switch itself to send IMs
            to the conference (e.g. message of the day, welcome messages,
            server is shutting down, etc.)
          
</dd>
<dt>REQ-10:</dt>
<dd>
            It must be possible for participants to learn the capabilities
            support of the features described in this document (and perhaps
            others).
          
</dd>
</dl></blockquote><p>
      
</p>
<a name="overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Overview of Operation</h3>

<p>
        In order to set up a conference, one must first be
        created. Users wishing to host a conference themselves can of
        course do just that; their user agents simply morph from an
        ordinary user agent into a special purpose one called a conference
        focus. Another, commonly used setup is one where a dedicated
        node in the network functions as a conference focus.
      
</p>
<p>
        Each chat room has an identity of its own: a SIP URI that
        participants use to join the conference, e.g. by sending an
        INVITE request. The conference focus processes the invitations,
        and as such, maintains SIP dialogs with each participant. In an
        multi-party chat, or chat room, MSRP is one of the
        established media streams. Each conference participant
        establishes an MSRP session with an MSRP switch, which is a
        special purpose MSRP application. The MSRP switch is similar to a
        conference mixer in that it handles media sessions with each
        of the participants and bridges these streams together. However,
        unlike a conference mixer, the MSRP switch merely relays
        messages between participants but doesn't actually mix the
        streams in any way. The system is illustrated in 
        <a class='info' href='#arch'>Figure&nbsp;1<span> (</span><span class='info'>Multi-party chat in a Centralized Conference</span><span>)</span></a>.
      
</p><br /><hr class="insert" />
<a name="arch"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                            +------+
                            | MSRP |
                            |Client|
          +------+          +--.---+          +------+
          | MSRP |             |              | MSRP |
          |Client|             |             _|Client|
          +------._            |           ,' +------+
                   `._         |         ,'
                      `.. +----------+ ,'
                         `|          |'
                          |   MSRP   |
                          |  Switch  |
                         ,|          |_
                    _,-'' +----------+ ``-._
          +------.-'            |           `--+------+
          | MSRP |              |              | MSRP |
          |Client|              |              |Client|
          +------+              |              +------+
                            +---'--+
                            | MSRP |
                            |Client|
                            +------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Multi-party chat in a Centralized Conference&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        Typically conference participants also subscribe to the
        <a class='info' href='#RFC4575'>conference event package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575] 
        to gather information about the conference 
        roster in the form of conference state notifications. 
        For example, participants can learn about other
        participants' identities. 
      
</p>
<p>
        All messages in the chat room use the 
        <a class='info' href='#RFC3862'>'Message/CPIM' wrapper content type<span> (</span><span class='info'>Klyne, G. and D. Atkins, &ldquo;Common Presence and Instant Messaging (CPIM): Message Format,&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3862], 
        so that it is possible to distinguish between private and regular
        messages. When a participant wants to send an instant message to
        the conference, it constructs an MSRP SEND request and submits
        it to the MSRP switch including a regular payload (e.g. a
        Message/CPIM message that contains a text, html, an image,
        etc.). The Message/CPIM To header is set to the chat room
        URI. The switch then fans out the SEND request to all of the
        other participants using their existing MSRP sessions. 
      
</p>
<p>
        A participant can also send a private instant message
        addressed to a participants whose
        identity has been learned, e.g. via a notification from the
        <a class='info' href='#RFC4575'>conference event package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575]. In this
        case the sender creates an MSRP SEND request with a Message/CPIM
        body whose To header contains not the chat room URI but
        the recipient's URI. The MSRP switch
        then forwards the SEND request to the recipient.
      
</p>
<p>
        We extend the current MSRP negotiation that takes place in
        <a class='info' href='#RFC4566'>SDP<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4566] to allow participants to
        learn whether the chat room supports and is willing to accept
        (e.g. due to local policy restrictions) certain MSRP functions
        defined in this memo, such as nicknames or private
        messaging.
      
</p>
<p>
        Naturally, when a participant wishes to leave a chat room,
        it sends a SIP BYE request to the conference focus and
        disconnects.
      
</p>
<a name="chatroom-management"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Creating, Joining, and Deleting
				                 a Chat Room</h3>

<a name="creating"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Creating a Chat Room</h3>

<p>
          Since we consider a chat room a particular type of conference
          where one of the offered media happens to be MSRP, the methods
          defined by the <a class='info' href='#RFC4353'>SIP Conference
          Framework<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4353] for creating conferences are directly
          applicable to a chat room.
        
</p>
<p>
          Once a chat room is created, it is identified by a SIP URI,
          like any other conference. 
        
</p>
<a name="joining"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Joining a Chat Room</h3>

<p>
          Participants usually join the conference by sending an INVITE
          request to the conference URI. As long as the conference policy
          allows, the INVITE request is accepted by the focus and the user
          is brought into the conference. Participants are aware that the
          peer is a focus due to the presence of <a class='info' href='#RFC3840'>the "isfocus" feature tag<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;Indicating User Agent Capabilities in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3840] in the Contact header field of
          the 200-class response to the INVITE request. Participants are
          also aware that the mixer is an MSRP switch due to the presence
          of an additional 'message' media type and either TCP/MSRP or
          TCP/TLS/MSRP as the protocol field in the 
          <a class='info' href='#RFC4566'>SDP<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4566] media-line.
        
</p>
<p>
          The conference focus of a chat room MUST include support for
          a <a class='info' href='#RFC3862'>Message/CPIM<span> (</span><span class='info'>Klyne, G. and D. Atkins, &ldquo;Common Presence and Instant Messaging (CPIM): Message Format,&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3862] top-level wrapper
          for the MSRP messages by setting the 'accept-types' MSRP
          media line attribute in the SDP offer or answer to include
          'Message/CPIM'. 
        
</p>
<p>
	  </p>
<blockquote class="text">
<p>Note that the 'Message/CPIM' wrapper is used to carry the sender
	      information that, otherwise, it will not be available to the
	      recipient. Additionally, 'Message/CPIM' wrapper carries the
	      recipient information (e.g. To and Cc: headers).
</p>
</blockquote><p>
        
</p>
<p> 
          If a participant wants to remain anonymous to the rest of the 
          participants in the conference, the participant's UA can 
          register or acquire by other means a temporary GRUU 
          with the conference focus.  The procedure SHOULD follow 
          the recommendation of 
          <a class='info' href='#I-D.ietf-sip-gruu'>draft-ietf-sip-gruu<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;gruu].
          The temporary GRUU can be used in the From and To header in
          the 'Message/CPIM' wrapper concealing the participant's SIP AOR  
          from the other participants in the conference.
        
</p>
<p>The conference focus of a chat room MUST learn the chat room
          capabilities of each participant that joins the chat room, and
          MUST inform the MSRP switch of such support. This is to prevent
          that the MSRP switch distributes private messages to participants
          who do not support private messaging.
        
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Deleting a Chat Room</h3>

<p>
          As with creating a conference, the methods defined by the
          <a class='info' href='#RFC4353'>SIP Conference Framework<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4353] 
          for deleting a conference are directly applicable to a chat 
          room.
        
</p>
<p>
          Deleting a chat room is an action that heavily depends on the
          policy of the chat room. The policy can determine that the chat
          room is deleted when the creator leaves the conference, or with
          any out of band mechanism.
        
</p>
<a name="im"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Sending and Receiving Instant Messages</h3>

<a name="regular"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Regular Messages</h3>

<p>
          This section describes the conventions used to send and receive
          instant messages that are addressed to all the participants in the
          chat room. These are sent over a regular MSRP SEND request that
          contains a <a class='info' href='#RFC3862'>Message/CPIM wrapper<span> (</span><span class='info'>Klyne, G. and D. Atkins, &ldquo;Common Presence and Instant Messaging (CPIM): Message Format,&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3862]
          that in turn contains the desired payload (e.g. text, image,
          video-clip, etc.).
        
</p>
<p>
          When a chat room participant wishes to send an instant message
          to all the other participants in the chat room, he constructs an MSRP
          SEND request that MUST contain a top-level wrapper of type 
          <a class='info' href='#RFC3862'>'Message/CPIM'<span> (</span><span class='info'>Klyne, G. and D. Atkins, &ldquo;Common Presence and Instant Messaging (CPIM): Message Format,&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3862]. The actual instant message
          payload inside 'Message/CPIM' MAY be of any type negotiated in the
          SDP 'accepted-types' attribute according to the MSRP rules.
        
</p>
<p>The sender SHOULD populate the From header
          of the Message/CPIM wrapper with a proper identity by which the user
          is recognized in the conference. Identities that can be used
          (among others) are:
</p>
<p>
          </p>
<ul class="text">
<li>A <a class='info' href='#RFC3261'>SIP URI<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] representing the
	      participant's address-of-record
</li>
<li>A <a class='info' href='#RFC3966'>tel URI<span> (</span><span class='info'>Schulzrinne, H., &ldquo;The tel URI for Telephone Numbers,&rdquo; December&nbsp;2004.</span><span>)</span></a> [RFC3966] representing the
	      participant's telephone number
</li>
<li>An <a class='info' href='#RFC3860'>IM URI<span> (</span><span class='info'>Peterson, J., &ldquo;Common Profile for Instant Messaging (CPIM),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3860] representing the
	      participant's instant messaging address
</li>
<li> An <a class='info' href='#I-D.ietf-sip-gruu'>temporary GRUU<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;gruu] 
              representing the anonymous URI associated with the sender.
              
</li>
</ul><p>
        
</p>
<p>
          An MSRP switch that receives a SEND request from a participant
          SHOULD first verify that the From header field of the
          Message/CPIM wrapper is correctly populated with a valid URI.
          The valid URI can be the SIP AOR of the participant, or a temporary
          GRUU registered with the focus associated with an anonymous participant.
          If the URI included in the From header field
          of the Message/CPIM wrapper is not valid (e.g, because it does
          not "belong" to the user), then the MSRP switch MUST generate a
          403 response and MUST NOT forward the SEND request to any of the
          participants. Otherwise, the MSRP switch SHOULD generate a 200
          response according to the MSRP rules for response
          generation. 
          
</p>
<p>
          Then the MSRP switch should inspect the To header field of the
          Message/CPIM wrapper. If the To header field of the Message/CPIM
          wrapper contains the chat room URI, the MSRP switch can
          generate a copy of the SEND request to each of the participants
          in the conference except the sender. The MSRP switch MUST NOT
          modify any of the bodies included in the received SEND
          request. Note that the MSRP switch does not need to wait for the
          reception of the complete MSRP chunk or MSRP message before it
          starts the distribution to the rest of the participants. Instead,
          once the MSRP switch has received the headers of the Message/CPIM
          body it SHOULD start the distribution process.
        
</p>
<p> The MSRP SHALL follow the success report and failure report 
          handling described in section 7 of <a class='info' href='#RFC4975'>[RFC4975]<span> (</span><span class='info'>Campbell, B., Mahy, R., and C. Jennings, &ldquo;The Message Session Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a> when it 
          receives a SEND request with a Message/CPIM
          wrapper having the To header field set to the chat room URI. 
          The MSRP switch MAY use any report model in the copies 
          of the SEND request intended for the recipients, but 
          any received reports MUST NOT be forwarded to the originator of
          the original SEND request. The report model for handling private messages
          is different from SEND requests to the chat room 
          (see <a class='info' href='#private-messages'>Section&nbsp;6.2<span> (</span><span class='info'>Private Messages</span><span>)</span></a>  for details)
        
</p>
<p>
          An MSRP endpoint that receives a SEND request from an MSRP
          switch containing a Message/CPIM wrapper SHOULD first inspect the
          To header field of the Message/CPIM body. If the To header field
          is set to the chat room URI, then it is a regular message that
          has been distributed to all the participants in the
          conference. Then the MSRP endpoint SHOULD inspect the From header
          field of the Message/CPIM body to identify the sender. The From
          header field will include a URI that identifies the sender. The
          endpoint might have also received further identity information
          through a subscription to the 
          <a class='info' href='#RFC4575'>SIP conference event package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575].
        
</p>
<a name="private-messages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Private Messages</h3>

<p>
          This section describes the conventions used to send and receive
          private instant messages, i.e., instant messages that are addressed
          to one participant of the chat room rather to
          all of them. A chat room can signal support for private messages 
          using the chatroom-attribute (see <a class='info' href='#chatroom-attribute'>Section&nbsp;8<span> (</span><span class='info'>The SDP 'chatroom' attribute</span><span>)</span></a> 
          for details).  
        
</p>
<p>
          When a chat room participant wishes to send a private instant
          message to a participant the chat room, he
          constructs an MSRP SEND request that MUST contain a top-level
          wrapper of type <a class='info' href='#RFC3862'>'Message/CPIM'<span> (</span><span class='info'>Klyne, G. and D. Atkins, &ldquo;Common Presence and Instant Messaging (CPIM): Message Format,&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3862]. The
          actual instant message payload inside 'Message/CPIM' MAY be of any
          type negotiated in the SDP 'accepted-types' attribute according to
          the MSRP rules (e.g. text, image, video-clip etc.)
        
</p>
<p>
          The sender SHOULD populate the From header of the Message/CPIM
          wrapper with a proper identity by which the user is recognized in
          the conference as indicated for regular instant messages. Then the
          sender MUST populate the To header field with the identity of intended
          recipient. The identity can be SIP, TEL, and IM URIs typically 
          learned from the information received in notifications of the 
          <a class='info' href='#RFC4575'>conference event package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575].
        
</p>
<p>
          As for regular messages, an MSRP switch that receives a SEND
          request from a participant SHOULD first verify that the From
          header field of the Message/CPIM wrapper is correctly populated
          with a valid URI. If the URI included in the
          From header field of the Message/CPIM wrapper is not valid (e.g,
          because it does not "belong" to the user), then the MSRP switch
          MUST generate a 403 response and MUST NOT forward the SEND request
          to any of the participants. Otherwise, the MSRP switch SHOULD
          generate a 200 response according to the MSRP rules for response
          generation.  
        
</p>
<p>
          Then the MSRP switch MUST inspect the To header field of the
          Message/CPIM wrapper. If the To header field of the Message/CPIM
          wrapper does not contain the chat room URI, it must check if it
          contains a participants URI associated with 
          a participant.  If the URI in the To header can not be resolved 
          (e.g. cased by a mistyped URI or that the recipient has abandoned 
          he chat room), and the Failure-Report 
          header field of the SEND request was either not present in the 
          original request, or had a value of "yes" or "partial", the MSRP switch 
          MUST generate a REPORT request to the sender.  The status header
          field MUST be set to 427. The new 427 status code indicates a 
          failure to resolve the recipient URI in the To header field. 
          If the recipient is valid, but the recipient does not support 
          private messages,  and the Failure-Report 
          header field of the SEND request was either not present in the 
          original request, or had a value of "yes" or "partial", the MSRP switch 
          MUST send a REPORT request having the status code of 428.
          The new response 428 indicate that the recipient does not support 
          private messages.  In either case the REPORT request MUST include 
          a Message/CPIM wrapper, with the original From header field 
          included in the SEND request, and the To header field of the
          original message.  The message MUST not be forwarded to the recipient
          if above conditions applies. The MSRP switch should search it's mapping 
          table to find the MSRP session established towards the recipient. 
          If a match is found the MSRP switch MUST create a SEND request 
          and MUST copy the contents of the sender's message to it.  
        
</p>
<p>
         If the original SEND request contained a Success-report header field
         with the value of "yes" it MUST be added to the SEND request intended
         for the recipient. If the MSRP switch receives an success report from
         the recipient of the private message, and the original request had 
         the Success-report header field present with a value of "yes",  
         the MSRP switch MUST create a success REPORT and MUST copy the contents
         of the recipient's report to it.  The REPORT MUST be sent to the 
         originator of the original SEND request. If the original SEND request 
         contained the Success-report header field with the value of "no", it
         may be added to the SEND request intended for the recipient; but 
         any received reports from the recipient MUST NOT be forwarded to the
         originator of the original SEND request.
       
</p>
<p> 
         If the original SEND request contained a Failure-report header field 
         with the value of "yes" or "partial" it MUST be added to the SEND 
         request intended for the recipient.  The MSRP switch MUST follow the 
         Failure-Report handling described in section 7.1.1 of <a class='info' href='#RFC4975'>[RFC4975]<span> (</span><span class='info'>Campbell, B., Mahy, R., and C. Jennings, &ldquo;The Message Session Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a>
         If the MSRP switch receives a failure report from the recipient of the 
         private message, and the original SEND request had the Failure-report 
         header field present with the value of "yes" or "partial", the 
         MSRP switch MUST create a failure REPORT and MUST copy the 
         contents of the recipient's report to it.  The REPORT MUST be sent
         to the originator of the original SEND request.  If the original SEND 
         request contained a Failure-report header field 
         with the value of "no", it may be added to the SEND request intended 
         for the recipient; but any received reports from the recipient 
         MUST NOT be forwarded to the originator of the original SEND request.
         
</p>
<p>
          An MSRP endpoint that receives a SEND request from an MSRP
          switch containing a Message/CPIM wrapper SHOULD first inspect the
          To header field of the Message/CPIM body. If the To header field
          is not set to the chat room URI, then it is a private message.
          Then the MSRP endpoint SHOULD inspect the
          From header field of the Message/CPIM body to identify the
          sender. The From header field will include a URI that identifies
          the sender. The endpoint might have also received further
          identity information through a subscription to the 
          <a class='info' href='#RFC4575'>SIP conference event package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575].
</p>
<p>
          It is possible that a participant, identified by
          a SIP Address of Record, joins a conference of instant messages
          from two or more different SIP UAs. It is RECOMMENDED that
          the an MSRP switch can map a participant or anonymous URI
          for two or more MSRP sessions.  If the policy of the server
          allows for this, the MSRP switch MUST copy all messages intended
          for the recipient through each MSRP session.
        
</p>
<a name="nicknames"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Nicknames</h3>

<p>
        A common characteristic of existing chat room services is
        that participants have the ability to identify themselves with
        a nickname to the rest of the participants of the
        conference. It is used for easy reference of participants 
        in the chat room, and can also provide anonymous participants 
        with a meaningful descriptive name.
      
</p>
<p>
        Nicknames are a useful construct in many use cases, of which
        MSRP chat is but one example. Nicknames are an alternate form
        of identity, associated with a URI of which the participant
        is known to the focus.  It is not a
        'display-name', but it is used somewhat like a display name.
        A main difference is that a nickname is unique inside a chat
        room to allow an unambiguous reference to a participant in the chat.
        Nicknames may be long lived, or may be temporary.  
        Users also need to reserve a nickname prior to its
        utilization.  
      
</p>
<p> 
        This memo specifies the nickname as a string.  The nickname 
        string MUST be unambiguous within the scope of the chat room 
        (conference instance).  This scope is similar to having a nickname 
        unique inside a chat room from <a class='info' href='#RFC3920'>Extensible Messaging 
          and Presence Protocol<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3920]. The chat room may have
        policies associated with nicknames.  It may not accept nickname strings
        at all, or a it may provide a wider
        unambiguous scope like a domain or server, similar to 
        <a class='info' href='#RFC2810'>Internet Relay Chat (IRC)<span> (</span><span class='info'>Kalt, C., &ldquo;Internet Relay Chat: Architecture,&rdquo; April&nbsp;2000.</span><span>)</span></a> [RFC2810]. 
      
</p>
<a name="using-nicknames"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Using Nicknames within a Conference</h3>

<p> 
          This memo provides a mechanism to reserve a nickname 
          for a participant for as long as the participants is logged 
          into the chat room.
          The mechanism is based on a NICKNAME MSRP method
          (see below) and a new "Use-Nickname" header. Note that other
          mechanisms may exists (for example, a web page reservation
          system), although they are outside the scope of this
          document.
        
</p>
<p>
          A conference participant who has established an MSRP session
          with an MSRP switch, where the MSRP switch has indicated the
          support and availability of nicknames with the 'nicknames' token
          in the 'chatroom' SDP attribute, MAY send a NICKNAME request to
          the MSRP switch. The NICKNAME request MUST include a new
          Use&#8209;Nickname header that contains the nickname string that the
          participant wants to reserve. 
        
</p>
<p>
          An MSRP switch that receives a NICKNAME request containing a
          nickname in the Use&#8209;Nickname header field SHOULD first
          verify whether the policy of the chat room allows the nickname
          functionality. If is not allowed, the MSRP switch MUST answer
          with a 501 response.
        
</p>
<p>
          If the policy of the chat room allows the usage of nicknames, the MSRP
          switch SHOULD validate that the SIP AOR is entitled to reserve 
          the nickname. The participant's authenticated identity can be 
          derived after a successful HTTP Digest Authentication, included in a trusted 
          SIP P-Asserted-Identity header field, included in a valid SIP Identity 
          header field, or derived from any other present or future SIP 
          authentication mechanism.   Once the MSRP switch has validated 
          that the participant is entitled to reserve the nickname, the MSRP 
          switch answers to the MSRP NICKNAME request with a 200 response.
        
</p>
<p>
          The reservation of a nickname can fail, e.g. if the NICKNAME
          request contains a malformed or non-existent Use&#8209;Nickname header
          field, or if the same nickname has already been reserved by another
          participant in the conference. The validation can also fail where 
          the SIP AOR is not entitled to reserve the nickname. In any of these cases 
          the MSRP switch MUST answer with a newly defined 423 response. The
          semantics of the 423 response are: "Nickname usage failed;
          the nickname is not allocated to this user".
        
</p>
<p>
          As indicated earlier, this specification defines a new MSRP
          header field: "Use-Nickname". The Use&#8209;Nickname header
          field carries a nickname string, and
          SHOULD be included in the NICKNAME requests. 
        
</p>
<p>
          The syntax of the NICKNAME method and the "Use-Nickname"
          header field is built upon the 
          <a class='info' href='#RFC4975'>MSRP formal syntax<span> (</span><span class='info'>Campbell, B., Mahy, R., and C. Jennings, &ldquo;The Message Session Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a> [RFC4975]
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
            ext-method =/ NICKNAMEm
            NICKNAMEm = %x4E.49.43.4B.4E.41.4D.45 ; NICKNAME in caps
            ext-header =/ Use-Nickname
            ; ext-header is specified in RFC 4975
            Use-Nickname = "Use-Nickname" ":" nickname
            nickname = quoted-string
</pre></div>
<a name="mod-nicknames"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Modifying a Nickname</h3>

<p>
          Typically participants will reserve a nickname as soon as they
          join the chat room. But it is also
          possible for participants to modify their own nicknames and
          replace them it a new one at any time during the duration of the
          MSRP session. Modification of the nickname is not different from
          the initial reservation and usage of a nickname, thus the
          NICKNAME method is used as described in 
          <a class='info' href='#using-nicknames'>Section&nbsp;7.1<span> (</span><span class='info'>Using Nicknames within a Conference</span><span>)</span></a>.
</p>
<p>
          If a NICKNAME request that attempts to modify the current
          nickname of the user for some reason fails, the current nickname
          stays in effect.  A new nickname comes into effect and the old
          one is released only after a NICKNAME request is accepted with a
          200 response.
        
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Removing a Nickname</h3>

<p>
          If the participant no longer wants to be known by a nickname
          in the conference, the participant can follow the method 
          described in <a class='info' href='#mod-nicknames'>Section&nbsp;7.2<span> (</span><span class='info'>Modifying a Nickname</span><span>)</span></a>.  
          The nickname element of the Use&#8209;Nickname header MUST be
          set to an empty quoted string.
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Nicknames in the Conference Event Package</h3>

<p>Typically the conference focus acts as a notifier of the 
          <a class='info' href='#RFC4575'>SIP conference event package<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4575]. The
          conference focus MAY notify subscribers of the nickname reserved
          by a given participant. We define an extension to the conference
          event package to include nicknames.  The extension adds a
          &lt;nickname&gt; attribute to the &lt;user&gt; containing the
          nickname string. 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
          &lt;xs:attribute name="nickname" type="xs:string"&gt;
</pre></div>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
Nicknames not supported nor allowed</h3>

<p> The participants SHOULD be notified of the 
          URIs associated with the other participants of the conference even if
          nicknames are provided.  The entity attribute in event notification
          framework being an SIP AOR or anonymous URI.  A
          client not supporting the extensions of this 
          memo will not render nicknames and can therefore can 
          not be referred to  using nickname inside the chat room.  
          The same would apply where a chat room do not allow nicknames 
          to be used.
        
</p>
<a name="chatroom-attribute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
The SDP 'chatroom' attribute</h3>

<p>
        There are a handful of use cases where a participant would like
        to learn the chat room capabilities supported by the MSRP switch
        and the chat room. For example, a participant would like to learn
        if the MSRP switch supports private messaging, otherwise, the
        participant may send what he believes is a private instant message
        addressed to a participant, but since the MSRP switch does
        not support the functions specified in this memo, the message gets
        eventually distributed to all the participants of the chat
        room. 
      
</p>
<p>
        The reverse case also exists. A participant, say Alice, whose
        user agent does not support the extensions defined by this
        document joins the chat room. The MSRP switch learns that Alice
        application does not support private messaging nor nicknames. If
        another participant, say Bob, sends a private message to Alice,
        the MSRP switch does not distribute it to Alice, because Alice is
        not able to differentiate it from a regular message sent to the
        whole roster. Further more, if Alice replied to this message, she
        would do it to the whole roster. Because of this, the MSRP switch
        keeps also track of users who do not support the extensions
        defined in this document.
      
</p>
<p>
        In another scenario, the policy of a chat room may indicate
        that certain functions are not allowed. For example, the policy
        may indicate that nicknames or private messages are not
        allowed. 
      
</p>
<p>
        In order to provide the user with a good chat room experience,
        we define a new 'chatroom' SDP attribute. The 'chatroom' attribute
        is a media-level attribute that MAY be included in conjunction
        with and MSRP media stream (i.e., when an m= line in SDP indicates
        "TCP/MSRP" or "TCP/TLS/MSRP"). The 'chatroom' attribute indicates
        the intersection of support and chat room local policy allowance
        for a number of functions specified in this
        document. Specifically, we provide the means for indicating
        support to use nicknames and private messaging.
      
</p>
<p>
        The 'chatroom' SDP attribute has the following syntax:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
          chatroom = chatroom-label ":" chat-token *(SP chat-token)
          chatroom-label = "chatroom"
          chat-token = (nicknames-token | private-msg-token | token)
          nicknames-token = "nicknames"
          private-msg-token = "private-messages"
</pre></div>
<p>
        A conference focus that includes the 'nicknames' token in the
        session description is signaling that the MSRP switch supports and
        the chat room allows to use the procedures specified in 
        <a class='info' href='#nicknames'>Section&nbsp;7<span> (</span><span class='info'>Nicknames</span><span>)</span></a>. A conference focus that includes the
        'private-messages' in the SDP description is signaling that the
        MSRP switch supports and the chat room allows to use the procedures
        specified in <a class='info' href='#private-messages'>Section&nbsp;6.2<span> (</span><span class='info'>Private Messages</span><span>)</span></a>. 
      
</p>
<p>
        Example of the 'chatroom' attribute for an MSRP media stream
        that indicates the acceptance of nicknames and private
        messages:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
          a=chatroom:nickname private-messages
</pre></div>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Examples</h3>

<a name="example-join"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Joining a chat room</h3>

<p><a class='info' href='#fig-joining'>Figure&nbsp;2<span> (</span><span class='info'>Flow diagram of a user joining a chat room</span><span>)</span></a> presents a flow diagram where
	  Alice joins a chat room by sending an INVITE request. This
	  INVITE request contains a session description that includes the
	  chatroom extensions defined in this document.
</p><br /><hr class="insert" />
<a name="fig-joining"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Alice               Conference focus
  |                        |
  |(1) (SIP) INVITE        |
  |-----------------------&gt;|
  |(2) (SIP) 200 OK        |
  |&lt;-----------------------|
  |(3) (SIP) ACK           |
  |-----------------------&gt;|
  |                        |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Flow diagram of a user joining a chat room&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F1: Alice constructs an SDP description that includes an
	  MSRP media stream. She also indicates her support for the
	  chatroom extensions defined in this document. She sends the
	  INVITE request to the chat room server.
</p><br /><hr class="insert" />
<a name="fig-invite-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
INVITE sip:chatroom22@chat.example.com SIP/2.0
Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9
Max-Forwards: 70
From: Alice &lt;sip:alice@atlanta.example.com&gt;;tag=9fxced76sl
To: Chatroom 22 &lt;sip:chatroom22@chat.example.com&gt;
Call-ID: 3848276298220188511@atlanta.example.com
CSeq: 1 INVITE
Contact: &lt;sip:alice@client.atlanta.example.com;transport=tcp&gt;
Content-Type: application/sdp
Content-Length: [length]

v=0
o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com
s=-
c=IN IP4 atlanta.example.com
m=message 7654 TCP/MSRP *
a=accept-types:message/cpim text/plain text/html
a=path:msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
a=chatroom:nickname private-messages
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: INVITE request containing an SDP offer with
		       chat room extensions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          F2: The chat room server accepts the session
	  establishment. It includes the 'isfocus' and other relevant
	  feature tags in the Contact header field of the response. The
	  chat room server also builds an SDP answer that also that
	  forces the reception of messages wrapped in message/cpim
	  envelops. It also includes the the chatroom attribute with the
	  allowed extensions.
        
</p><br /><hr class="insert" />
<a name="fig-200-OK-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SIP/2.0 200 OK
Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9
 ;received=192.0.2.101
From: Alice &lt;sip:alice@atlanta.example.com&gt;;tag=9fxced76sl
To: Chatroom 22 &lt;sip:chatroom22@chat.example.com&gt;;tag=8321234356
Call-ID: 3848276298220188511@atlanta.example.com
CSeq: 1 INVITE
Contact: &lt;sip:chatroom22@chat.example.com;transport=tcp&gt; \
          ;methods="INVITE,BYE,OPTIONS,ACK,CANCEL,SUBSCRIBE,NOTIFY" \
          ;automata;isfocus;message;event="conference"
Content-Type: application/sdp
Content-Length: [length]

v=0
o=chat 2890844527 2890844527 IN IP4 chat.example.com
s=-
c=IN IP4 chat.example.com
m=message 12763 TCP/MSRP *
a=accept-types:message/cpim
a=accept-wrapped-types:text/plain text/html *
a=path:msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
a=chatroom:nickname private-messages
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: 200 (OK) response including chat room
		       extensions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          F3: The session established is acknowledged (details not
	  shown).
        
</p>
<a name="example-nickname"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Setting up a nickname</h3>

<p><a class='info' href='#fig-nickname'>Figure&nbsp;5<span> (</span><span class='info'>Flow diagram of a user setting up her nickname</span><span>)</span></a> shows an example of Alice
	  setting up a nickname using the conference as provider. 
          Her first proposal is not accepted
	  because the proposed nickname is already in use. Her second
	  proposal is accepted.
</p><br /><hr class="insert" />
<a name="fig-nickname"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Alice                  MSRP switch
  |                        |
  |(1) (MSRP) NICKNAME     |
  |-----------------------&gt;|
  |(2) (MSRP) 423          |
  |&lt;-----------------------|
  |(3) (MSRP) NICKNAME     |
  |-----------------------&gt;|
  |(4) (MSRP) 200          |
  |&lt;-----------------------|
  |                        |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Flow diagram of a user setting up her nickname&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F1: Alice sends an MSRP NICKNAME request that contains her
	  proposed nicknames in the Set-Nickname header field.
</p><br /><hr class="insert" />
<a name="fig-nickname-nickname-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP d93kswow NICKNAME
To-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
From-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
Use-Nickname: "Alice the great"
-------d93kswow$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: MSRP NICKNAME request with an initial nickname proposal&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F2: The MSRP switch analyzes the existing allocation of
	  nicknames and detects that the nickname "Alice is great" 
          is already provided to another participant by the conference.
          The MSRP switch answers with a 423 response.
</p><br /><hr class="insert" />
<a name="fig-nickname-423-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP d93kswow 423 Nickname usage failed
To-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
From-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
-------d93kswow$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: MSRP 423 response&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F3: Alice receives the response. She proposes a new
	  nickname in a second NICKNAME request.
</p><br /><hr class="insert" />
<a name="fig-nickname-nickname-3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 09swk2d NICKNAME
To-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
From-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
Use-Nickname: "Alice in wonderland"
-------09swk2d$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: MSRP NICKNAME request with a second nickname proposal&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F4: The MSRP switch accepts the nickname proposal and
	  answers with a 200 response.
</p><br /><hr class="insert" />
<a name="fig-nickname-200-4"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 09swk2d 200 OK
To-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
From-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
-------09swk2d$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: MSRP NICKNAME request&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="example-normal-message"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
Sending a regular message to the chat room</h3>

<p><a class='info' href='#fig-sending-regular-message'>Figure&nbsp;10<span> (</span><span class='info'>Sending a regular message to the chat room</span><span>)</span></a> depicts a flow
	  diagram where Alice is sending a regular message addressed to
	  the chat room. The MSRP switch distributes the message to the
	  rest of the participants.
</p><br /><hr class="insert" />
<a name="fig-sending-regular-message"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Alice               MSRP switch                   Bob   Charlie
  |                      |                        |       |
  | (1) (MSRP) SEND      |                        |       |
  |---------------------&gt;|  (3) (MSRP) SEND       |       |
  | (2) (MSRP) 200       |-----------------------&gt;|       |
  |&lt;---------------------|  (4) (MSRP) SEND       |       |
  |                      |-------------------------------&gt;|
  |                      |  (5) (MSRP) 200 OK     |       |
  |                      |&lt;-----------------------|       |
  |                      |  (6) (MSRP) 200 OK     |       |
  |                      |&lt;------------------------------ |
  |                      |                        |       |
  |                      |                        |       |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: Sending a regular message to the chat room&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F1: Alice builds a text message and wraps it in a CPIM
          message. She addresses the CPIM message to the chat room. She
          encloses the result in an MSRP SEND request and sends it to the
          MSRP switch via the existing TCP connection.
</p><br /><hr class="insert" />
<a name="fig-regular-send-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 3490visdm SEND
To-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
From-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
Message-ID: 99s9s2
Byte-Range: 1-*/*
Content-Type: message/cpim

To: &lt;sip:chatroom22@chat.example.com;transport=tcp&gt;
From: &lt;sip:alice@atlanta.example.com&gt;
DateTime: 2009-03-02T15:02:31-03:00
Content-Type: text/plain

Hello guys, how are you today?
-------3490visdm$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: Instant message addressed to all participants
		       in the chat room&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F2: The MSRP switch acknowledges the reception of the SEND
	  request with a 200 (OK) response.
</p><br /><hr class="insert" />
<a name="fig-regular-200-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 3490visdm 200 OK
To-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
From-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
Message-ID: 99s9s2
Byte-Range: 1-*/*
-------3490visdm$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12: 200 (OK) response&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F3: The MSRP switch creates a new MSRP SEND request that
	  contains the received message/cpim body and sends it to Bob.
</p><br /><hr class="insert" />
<a name="fig-regular-send-3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 490ej23 SEND
To-Path: msrp://client.biloxi.example.com:4923/49dufdje2;tcp
From-Path: msrp://chat.example.com:5678/jofofo3;tcp
Message-ID: 304sse2
Byte-Range: 1-*/*
Content-Type: message/cpim

To: &lt;sip:chatroom22@chat.example.com;transport=tcp&gt;
From: &lt;sip:alice@atlanta.example.com&gt;
DateTime: 2009-03-02T15:02:31-03:00
Content-Type: text/plain

Hello guys, how are you today?
-------490ej23$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13: Instant message sent to all participants&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The rest of the message flows are analogous to the
	  previous. They are not shown here.
</p>
<a name="example-private-message"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
Sending a private message to a participant</h3>

<p><a class='info' href='#fig-sending-private-message'>Figure&nbsp;14<span> (</span><span class='info'>Sending a private message to Bob</span><span>)</span></a> depicts a flow
	  diagram where Alice is sending a private message addressed to
	  Bob's SIP AOR. The MSRP switch distributes the message only to
	  Bob.
</p><br /><hr class="insert" />
<a name="fig-sending-private-message"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Alice               MSRP switch                   Bob
  |                      |                        |
  | (1) (MSRP) SEND      |                        |
  |---------------------&gt;|  (3) (MSRP) SEND       |
  | (2) (MSRP) 200       |-----------------------&gt;|
  |&lt;---------------------|                        |
  |                      |                        |
  |                      |                        |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;14: Sending a private message to Bob&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F1: Alice builds a text message and wraps it in a CPIM
          message. She addresses the CPIM message to the Bob's nickname,
          which she learned from a notification in the conference event
          package. She encloses the result in an MSRP SEND request and
          sends it to the MSRP switch via the existing TCP connection.
</p><br /><hr class="insert" />
<a name="fig-private-send-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 6959ssdf SEND
To-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
From-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
Message-ID: okj3kw
Byte-Range: 1-*/*
Content-Type: message/cpim

To: &lt;sip:Bob%20the%20great@example.com&gt;
From: &lt;sip:Alice%20in%20wonderland@example.com&gt;
DateTime: 2009-03-02T15:02:31-03:00
Content-Type: text/plain

Hello Bob.
-------6959ssdf$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;15: Private instant message addressed to one participant&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F2: The MSRP switch acknowledges the reception of the SEND
	  request with a 200 (OK) response.
</p><br /><hr class="insert" />
<a name="fig-private-200-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 6959ssdfm 200 OK
To-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
From-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
Message-ID: okj3kw
Byte-Range: 1-*/*
-------6959ssdfm$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;16: 200 (OK) response&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F3: The MSRP switch creates a new MSRP SEND request that
	  contains the received message/cpim body and sends it only to
	  Bob. Bob can distinguish the sender in the From header of the
	  CPIM message. He also identifies this as a private message due
	  to the To CPIM header.
</p><br /><hr class="insert" />
<a name="fig-private-send-3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 9v9s2 SEND
To-Path: msrp://client.biloxi.example.com:4923/49dufdje2;tcp
From-Path: msrp://chat.example.com:5678/jofofo3;tcp
Message-ID: d9fghe982
Byte-Range: 1-*/*
Content-Type: message/cpim

To: &lt;sip:Bob%20the%20great@example.com&gt;
From: &lt;sip:alice@atlanta.example.com&gt;
DateTime: 2009-03-02T15:02:31-03:00
Content-Type: text/plain

Hello Bob.
-------9v9s2$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;17: Private instant message sent to Bob&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="example-register-anonymous-uri"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.5"></a><h3>9.5.&nbsp;
Obtaining an anonymous URI</h3>

<p><a class='info' href='#fig-register'>Figure&nbsp;18<span> (</span><span class='info'>Flow diagram of registering an anonymous URI</span><span>)</span></a> presents a flow diagram where
	  Alice registers her SIP AOR with the conference focus.  The response will
          contain a temp-gruu which can be used as an anonymous URI when joining the conference.  
          The temp-gruu is also used to send anonymous MSRP messages to and from the MSRP switch.
</p><br /><hr class="insert" />
<a name="fig-register"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Alice               Conference focus
  |                        |
  |(1) (SIP) REGISTER      |
  |-----------------------&gt;|
  |(2) (SIP) 200 OK        |
  |&lt;-----------------------|
  |                        |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;18: Flow diagram of registering an anonymous URI&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F1: Alice constructs an REGISTER including an instance id in 
        her Contact header defined in <a class='info' href='#I-D.ietf-sip-gruu'>draft-ietf-sip-gruu<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;gruu].
</p><br /><hr class="insert" />
<a name="fig-register-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
REGISTER sip:chatroom22@chat.example.com SIP/2.0
Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9
Max-Forwards: 70
From: Alice &lt;sip:alice@atlanta.example.com&gt;;tag=9fxced76sl
To: Alice &lt;sip:alice@atlanta.example.com&gt;
Supported: gruu
Call-ID: 3848276298220188511@atlanta.example.com
CSeq: 1 REGISTER
Contact: &lt;sip:alice@client.atlanta.example.com;transport=tcp&gt; \
;+sip.instance="&lt;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&gt;"
Content-Length: 0

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;19: REGISTER request containing a Contact header
                       with an instance id&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          F2: The chat room server accepts the registration
	  returning a "pub-gruu" and a "temp-gruu". 
        
</p><br /><hr class="insert" />
<a name="fig-200-OK-3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SIP/2.0 200 OK
Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9
 ;received=192.0.2.101
From: Alice &lt;sip:alice@atlanta.example.com&gt;;tag=9fxced76sl
To: Alice &lt;sip:alice@atlanta.example.com&gt;
Call-ID: 3848276298220188511@atlanta.example.com
CSeq: 1 REGISTER

Contact: &lt;sip:alice@client.atlanta..example.com;transport=tcp&gt; \
;pub-gruu="sip:callee@example.com \
;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6" \
;temp-gruu="sip:tgruu.7hatz6cn-098s-anonymous@chat.example.com;gr" \
;+sip.instance="&lt;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&gt;"

Content-Length: 0
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;20: 200 (OK) response including a temp-gruu in the Contact header&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="example-anonymous-private-message"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.6"></a><h3>9.6.&nbsp;
Sending a private message using anonymous URI</h3>

<p><a class='info' href='#fig-sending-anonymous-private-message'>Figure&nbsp;21<span> (</span><span class='info'>Sending an anonymous private message to Bob</span><span>)</span></a> depicts a flow
	  diagram where Alice is utilizing the temporary GRUU when sending a 
          private message to Bob
</p><br /><hr class="insert" />
<a name="fig-sending-anonymous-private-message"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Alice               MSRP switch                   Bob
  |                      |                        |
  | (1) (MSRP) SEND      |                        |
  |---------------------&gt;|  (3) (MSRP) SEND       |
  | (2) (MSRP) 200       |-----------------------&gt;|
  |&lt;---------------------|                        |
  |                      |                        |
  |                      |                        |
  |                      |                        |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;21: Sending an anonymous private message to Bob&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F1: Alice builds a text message adding her registered temp-gruu
          to the From header of the CPIM message
</p><br /><hr class="insert" />
<a name="fig-anonymous-private-send-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 7443ruls SEND
To-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
From-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
Message-ID: aft4to
Byte-Range: 1-*/*
Content-Type: message/cpim

To: &lt;sip:Bob%20the%20great@example.com&gt;
From: &lt;sip:sip:tgruu.7hatz6cn-098s-anonymous@chat.example.com;gr&gt;
DateTime: 2009-03-02T15:02:31-03:00
Content-Type: text/plain

Hello Bob.
-------7443ruls$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;22: Anonymous private instant message&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>F2: The MSRP switch inspects the From header field and verifies
          that the temp-gruuu in registered to Alice.  If the temporary gruu 
          is valid, the MSRP acknowledges the reception of SEND request with
          a 200 (OK) response
</p><br /><hr class="insert" />
<a name="fig-anonymous-private-200-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
MSRP 7443ruls 200 OK
To-Path: msrp://client.atlanta.example.com:7654/jshA7weztas;tcp
From-Path: msrp://chat.example.com:12763/kjhd37s2s20w2a;tcp
Message-ID: aft4to
Byte-Range: 1-*/*
-------7443ruls$
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;23: 200 (OK) response&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Flow F3 is not shown 
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<a name="new-msrp-method"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
New MSRP Method</h3>

<p> This specification defines a new MSRP method to be added to the
          Methods sub-registry under the MSRP Parameter registry: NICKNAME.
          See section <a class='info' href='#nicknames'>Section&nbsp;7<span> (</span><span class='info'>Nicknames</span><span>)</span></a> for details.
          
</p>
<a name="new-msrp-header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
New MSRP Header</h3>

<p> This specification defines a new MSRP header to be added to 
          the header-field sub registry under the MSRP Parameter registry: 
          Use&#8209;Nickname. See section <a class='info' href='#nicknames'>Section&nbsp;7<span> (</span><span class='info'>Nicknames</span><span>)</span></a> for details.
        
</p>
<a name="new-msrp-status-codes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3"></a><h3>10.3.&nbsp;
New MSRP Status Codes</h3>

<p>This specification defines three new MSRP status codes to be added 
          to the Status-Code sub-registry under MSRP parameters.
        
</p>
<p>
          The 427 status code indicates the failure to resolve the 
          recipient URI in the To header field of the Message/CPIM wrapper in the
          SEND request. See section  for details.
        
</p>
<p>
          The 428 status code indicates that the recipient of a SEND request does
          not support private messages. See section  for details.
        
</p>
<p>
          The 423 response indicates that the requested nickname is not allocated
          to the user requesting it. See section <a class='info' href='#nicknames'>Section&nbsp;7<span> (</span><span class='info'>Nicknames</span><span>)</span></a> for details.
        
</p>
<a name="new-sdp-attribute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.4"></a><h3>10.4.&nbsp;
New SDP Attribute</h3>

<p> This specification defines a new media level attribute in the 
          Session Description Protocol (SDP) Parameters registry: chatroom.
          See section <a class='info' href='#chatroom-attribute'>Section&nbsp;8<span> (</span><span class='info'>The SDP 'chatroom' attribute</span><span>)</span></a> for details.
        
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Security Considerations</h3>

<p>This document proposes extensions to the 
        <a class='info' href='#RFC4975'>Message Session Relay
	  Protocol<span> (</span><span class='info'>Campbell, B., Mahy, R., and C. Jennings, &ldquo;The Message Session Relay Protocol (MSRP),&rdquo; September&nbsp;2007.</span><span>)</span></a> [RFC4975]. Therefore, the security considerations of
	such document apply to this document as well.
      
</p>
<p>
        In general, messages sent to a multi-party session based
        messaging focus are not deem to expose any security
        threat. Nevertheless, if a participant wants to avoid
        eavesdropping from non authorized entities, it should send
        those messages a <a class='info' href='#RFC4346'>TLS<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.1,&rdquo; April&nbsp;2006.</span><span>)</span></a> [RFC4346] transport
        connection, as allowed by MSRP.
</p>
<a name="contributors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Contributors</h3>

<p>
	This work would have never been possible without the fruitful
	discussions in the SIMPLE WG mailing list, specially with
	Brian Rosen (Neustar) and Paul Kyzivat (Cisco), who provided
	extensive review and improvements throughout the document.
      
</p>
<a name="acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Acknowledgments</h3>

<p>The authors want to thank Eva Leppanen, Adamu Haruna, 
        Adam Roach and Matt Lepinski for providing comments.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3840">[RFC3840]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;<a href="http://tools.ietf.org/html/rfc3840">Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3840, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3840.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3860">[RFC3860]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3860">Common Profile for Instant Messaging (CPIM)</a>,&rdquo; RFC&nbsp;3860, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3860.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3862">[RFC3862]</a></td>
<td class="author-text">Klyne, G. and D. Atkins, &ldquo;<a href="http://tools.ietf.org/html/rfc3862">Common Presence and Instant Messaging (CPIM): Message Format</a>,&rdquo; RFC&nbsp;3862, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3862.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4346">[RFC4346]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc4346">The Transport Layer Security (TLS) Protocol Version 1.1</a>,&rdquo; RFC&nbsp;4346, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4346.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4575">[RFC4575]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;<a href="http://tools.ietf.org/html/rfc4575">A Session Initiation Protocol (SIP) Event Package for Conference State</a>,&rdquo; RFC&nbsp;4575, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4575.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4975">[RFC4975]</a></td>
<td class="author-text">Campbell, B., Mahy, R., and C. Jennings, &ldquo;<a href="http://tools.ietf.org/html/rfc4975">The Message Session Relay Protocol (MSRP)</a>,&rdquo; RFC&nbsp;4975, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4975.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-gruu">[I-D.ietf-sip-gruu]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-gruu-15 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2810">[RFC2810]</a></td>
<td class="author-text">Kalt, C., &ldquo;<a href="http://tools.ietf.org/html/rfc2810">Internet Relay Chat: Architecture</a>,&rdquo; RFC&nbsp;2810, April&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2810.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3920">[RFC3920]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3920.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3920.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3920.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3966">[RFC3966]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc3966">The tel URI for Telephone Numbers</a>,&rdquo; RFC&nbsp;3966, December&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3966.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4353">[RFC4353]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4353">A Framework for Conferencing with the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4353, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4353.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-xcon-framework">[I-D.ietf-xcon-framework]</a></td>
<td class="author-text">Barnes, M., Boulton, C., and O. Levin, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-xcon-framework-11.txt">A Framework for Centralized Conferencing</a>,&rdquo; draft-ietf-xcon-framework-11 (work in progress), April&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-xcon-framework-11.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aki Niemi</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FIN  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 389 1644</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:aki.niemi@nokia.com">aki.niemi@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Miguel A. Garcia-Martin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Calle Via de los Poblados 13</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Madrid, ES  28033</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Spain</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:miguel.a.garcia@ericsson.com">miguel.a.garcia@ericsson.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Geir A. Sandbakken (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TANDBERG</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Philip Pedersens vei 20</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">N-1366 Lysaker</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Norway</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+47 67 125 125</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:geir.sandbakken@tandberg.com">geir.sandbakken@tandberg.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tandberg.com">http://www.tandberg.com</a></td></tr>
</table>
</body></html>
