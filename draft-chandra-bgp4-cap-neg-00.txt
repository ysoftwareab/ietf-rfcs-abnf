




Network Working Group                                      Ravi Chandra
Internet Draft                                            Cisco Systems
Expiration Date: January 1998                           John G. Scudder
                                        Internet Engineering Group, LLC

                  Capabilities Negotiation with BGP-4

                   draft-chandra-bgp4-cap-neg-00.txt


1. Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   To learn the current status of any Internet-Draft, please check the
   ``1id-abstracts.txt'' listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or
   ftp.isi.edu (US West Coast).


2. Abstract

   Currently BGP-4 [BGP-4] requires that when a BGP speaker receives an
   OPEN message with one or more unrecognized Optional Parameters, the
   speaker must terminate BGP peering. This complicates introduction of
   new capabilities in BGP.

   This document defines new Optional Parameter, called Capabilities,
   that is expected to facilitate introduction of new capabilities in
   BGP by providing graceful capability negotiation.

   The proposed parameter is backward compatible - a router that
   supports the parameter can maintain BGP peering with a router that
   doesn't support the parameter.








Chandra, Scudder                                                [Page 1]





Internet Draft     draft-chandra-bgp4-cap-neg-00.txt           July 1997


3. Overview of Operations

   When a BGP speaker that supports capabilities negotiation sends an
   OPEN message to its BGP peer, the message includes an Optional
   Parameter, called Capabilities. The parameter lists the capabilities
   supported by the speaker. The speaker can mark a listed capability as
   "Required", which means that if the peer doesn't recognize/support
   the capability, the BGP peering shall be terminated.

   When the peer receives the OPEN message, if the message contains the
   Capabilities Optional Parameter, the peer checks whether it supports
   all of the listed capabilities marked as R, and if not, sends a
   NOTIFICATION message, and terminates peering. The Error Subcode in
   the message is set to Unsupported Capability. The message should
   contain all the capabilities marked as R that are not supported by
   the peer.  If the peer doesn't support a capability that is not
   marked as R, the peer should not use this as a reason to terminate
   peering.

   A BGP speaker may use a particular capability when peering with
   another speaker if both speakers support that capability.  A BGP
   speaker determines the capabilities supported by its peer by
   examining the list of capabilities present in the Capabilities
   Optional Parameter carried by the OPEN message that the peer sends to
   the speaker.

   A BGP speaker determines that its peer doesn't support capabilities
   negotiation, if in response to an OPEN message that carries the
   Capabilities Optional Parameter, the speaker receives a NOTIFICATION
   message with the Error Subcode set to Unsupported Optional Parameter.


4. Capabilities Optional Parameter (Parameter Type 2):

   This is an Optional Parameter that is used by a BGP speaker to convey
   to its BGP peer the list of capabilities supported by the speaker.

   The parameter contains one or more triples <Capability Code,
   Capability Length, Capability Value>, where each triple is encoded as
   shown below:


      +------------------------------+
      | Capability Code (1 octet)    |
      +------------------------------+
      | Capability Length (1 octet)  |
      +------------------------------+
      | Capability Value (variable)  |



Chandra, Scudder                                                [Page 2]





Internet Draft     draft-chandra-bgp4-cap-neg-00.txt           July 1997


      +------------------------------+



   The use and meaning of these fields are as follows:

      Capability Code:

         Capability Code is a one octet field that unambiguously
         identifies individual capabilities.

         The high-order bit of this field is used to mark the capability
         as "Required" (if the bit is set to 1).

      Capability Length:

         Capability Length is a one octet field that contains the length
         of the Capability Value field in octets.

      Capability Value:

         Capability Value is a variable length field that is interpreted
         according to the value of the Capability Code field.



5. Extensions to Error Handling

   This document defines new Error Subcode - Unsupported Capability.
   The value of this Subcode is 7. The Data field in the NOTIFICATION
   message lists the set of capabilities that are marked as Required,
   but are either unsupported or unrecognized by the BGP speaker that
   sends the message. Each such capability is encoded the same way as it
   was encoded in the received OPEN message.


6. Security Considerations

   Security issues are not discussed in this document.












Chandra, Scudder                                                [Page 3]





Internet Draft     draft-chandra-bgp4-cap-neg-00.txt           July 1997


7. Acknowledgements

   To be supplied.


8. References


   [BGP-4]



9. Author Information


   Ravi Chandra
   Cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, CA 95134
   e-mail: rchandra@cisco.com

   John G. Scudder
   Internet Engineering Group, LLC
   122 S. Main, Suite 280
   Ann Arbor, MI 48104
   e-mail: jgs@ieng.com

























Chandra, Scudder                                                [Page 4]


