<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Asynchronous Channels for the Blocks Extensible Exchange Protocol (BEEP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Asynchronous Channels for the Blocks Extensible Exchange Protocol (BEEP)">
<meta name="keywords" content="Internet-Draft, BEEP, Asynchronous, Channel">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Thomson</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Andrew</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">March 23, 2009</td></tr>
<tr><td class="header">Expires: September 24, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Asynchronous Channels for the Blocks Extensible Exchange Protocol (BEEP)<br />draft-thomson-beep-async-02</h1>

<h3>Status of This Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 24, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>The Blocks Extensible Exchange Protocol (BEEP) provides a protocol framework for the development of application protocols.  This document describes an BEEP feature that enables asynchrony for individual channels.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#conventions">2.</a>&nbsp;
Conventions used in this document<br />
<a href="#async">3.</a>&nbsp;
Asynchronous BEEP Channels<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.1.</a>&nbsp;
Asynchronous Feature<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.2.</a>&nbsp;
Starting an Asynchronous Channel<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.3.</a>&nbsp;
Asynchronous Channel Behaviour<br />
<a href="#anchor5">4.</a>&nbsp;
Alternatives<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.1.</a>&nbsp;
Increasing Throughput<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.2.</a>&nbsp;
Asynchrony in the Application Protocol<br />
<a href="#security">5.</a>&nbsp;
Security Considerations<br />
<a href="#iana">6.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Blocks Extensible Exchange Protocol (BEEP) provides a protocol framework that manages many of the aspects necessary in developing an application protocol: framing, encoding, privacy, authentication and asynchrony.  However the asynchrony provided by BEEP is limited to asynchrony between channels; replies to messages sent on any channel are strictly ordered.
      
</p>
<p>Serial processing behaviour is desirable for a range of applications.  However, serial processing is less suitable for applications that rely more heavily on asynchrony.  In particular, if a response takes a significant amount of time to create, the channel is effectively blocked until the request has been processed and the response sent.  Pipelining only ensures that network latency does not add to this time; subsequent requests cannot be processed until a response is made to the first request.
      
</p>
<p>Asynchronous applications require a protocol that is able to support a large number of concurrent outstanding requests.  The analogy of a channel as a thread does not scale to the large number of threads used in modern systems.  Modern applications regularly have large numbers of concurrent processing threads.  Thus, a better way of multiplexing large numbers of concurrent requests is required.
      
</p>
<p>This document describes an BEEP feature, an extension to BEEP, that enables the creation of an asynchronous channel.  An asynchronous channel is a channel where response ordering is not fixed to the order of the requests sent by the client peer.  An asynchronous channel is identical to other channels, using unmodified framing; only requests may be processed in parallel and responses may be sent in any order.
      
</p>
<p>An asynchronous channel enables the efficient use of a single channel for multiple concurrent requests.  There is no impact on requests arising from the timing of responses to other requests.  The requesting peer can process responses to the requests it sends as they come available; similarly, the serving peer can take advantage of parallel processing without artificial constraints on the order of responses.
      
</p>
<p>Asynchronous channels allow for greater throughput where the serving peer requires any time to process requests.  This is particularly relevant where the serving peer needs to perform lengthy computations or make network-based requests as a part of servicing the request.
      
</p>
<p>BEEP feature negotiation is used to ensure that both peers are mutually willing to create asynchronous channels.  A means for establishing an asynchronous channel is described.
      
</p>
<a name="conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions used in this document</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.  Similar to in <a class='info' href='#RFC3080'>[RFC3080]<span> (</span><span class='info'>Rose, M., &ldquo;The Blocks Extensible Exchange Protocol Core,&rdquo; March&nbsp;2001.</span><span>)</span></a>, these words are written in lower case; this document refrains from unnecessary shouting.
      
</p>
<a name="async"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Asynchronous BEEP Channels</h3>

<p>This document defines a BEEP feature that enables the use of asynchronous channels.  An asynchronous channel is a BEEP channel that is not subject to the restrictions of Section 2.6.1 of <a class='info' href='#RFC3080'>[RFC3080]<span> (</span><span class='info'>Rose, M., &ldquo;The Blocks Extensible Exchange Protocol Core,&rdquo; March&nbsp;2001.</span><span>)</span></a> regarding ordering of responses; requests can be processed and responded to in any order by the serving peer.
      
</p>
<p>Asynchronous channels use the <tt>msgno</tt> element of the BEEP frame header to correlate request and response.  Regular BEEP channels do not use <tt>msgno</tt> for request/response correlation, contrary to what might be inferred by the presence of the parameter.  In a regular BEEP channel, the <tt>msgno</tt> only serves as an means of checking for protocol errors.
      
</p>
<p>Asynchronous channels are not suitable for applications where state established by requests is relied upon in subsequent requests or the ordering of messages is significant.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Asynchronous Feature</h3>

<p>The <tt>feature</tt> attribute in the BEEP greeting contains a whitespace separate list of features supported by each peer.  If both lists contain the same feature that feature may be used by either peer.
        
</p>
<p>This document registers the feature <tt>async</tt>.  If both peers include this feature in the greeting message, either peer is able to create an asynchronous channel.
        
</p>
<p><a class='info' href='#greeting'>Figure&nbsp;1<span> (</span><span class='info'>BEEP greetings with asynchronous feature</span><span>)</span></a> shows an example exchange where both peers declare willingness to use this feature.
        
</p><br /><hr class="insert" />
<a name="greeting"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   L: &lt;wait for incoming connection&gt;
   I: &lt;open connection&gt;
   L: RPY 0 0 . 0 133
   L: Content-Type: application/beep+xml
   L:
   L: &lt;greeting features="async x-foo"&gt;
   L:    &lt;profile uri="http://iana.org/beep/TLS" /&gt;
   L: &lt;/greeting&gt;
   L: END
   I: RPY 0 0 . 0 69
   I: Content-Type: application/beep+xml
   I:
   I: &lt;greeting features="async" /&gt;
   I: END
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: BEEP greetings with asynchronous feature&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The registration template for BEEP features is included in <a class='info' href='#iana'>Section&nbsp;6<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a>.
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Starting an Asynchronous Channel</h3>

<p>To create an asynchronous channel, an <tt>async</tt> parameter set to <tt>true</tt> is included in the <tt>start</tt> request.  If omitted, or set to <tt>false</tt>, the channel is not asynchronous.
        
</p>
<p><a class='info' href='#start'>Figure&nbsp;2<span> (</span><span class='info'>Asynchronous Channel Start</span><span>)</span></a> shows how the <tt>async</tt> attribute can be used to start an asynchronous channel.
        
</p><br /><hr class="insert" />
<a name="start"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   C: MSG 0 1 . 52 130
   C: Content-Type: application/beep+xml
   C:
   C: &lt;start number="1" async="true"&gt;
   C:    &lt;profile uri="http://example.org/protocol"/&gt;
   C: &lt;/start&gt;
   C: END
   S: RPY 0 1 . 221 102
   S: Content-Type: application/beep+xml
   S:
   S: &lt;profile uri="http://example.org/protocol"/&gt;
   S: END
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Asynchronous Channel Start&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>If the serving peer is unable to create an asynchronous channel for any reason, the channel start is rejected.  This could occur if the selected profile is not suitable for an asynchronous channel.  The response can include the <tt>553</tt> response code (parameter invalid) and an appropriate message, as shown in <a class='info' href='#start-bad'>Figure&nbsp;3<span> (</span><span class='info'>Asynchronous Channel Start Error</span><span>)</span></a>.
        
</p><br /><hr class="insert" />
<a name="start-bad"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   C: MSG 0 1 . 52 128
   C: Content-Type: application/beep+xml
   C:
   C: &lt;start number="1" async="true"&gt;
   C:    &lt;profile uri="http://example.org/serial"/&gt;
   C: &lt;/start&gt;
   C: END
   S: ERR 0 1 . 221 152
   S: Content-Type: application/beep+xml
   S:
   S: &lt;error code="553"&gt;Profile &amp;lt;http://example.org/serial&amp;gt;
   S: cannot be used for asynchronous channels.&lt;/error&gt;
   S: END
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Asynchronous Channel Start Error&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Asynchronous Channel Behaviour</h3>

<p>Asynchronous channels differ from normal BEEP channels in one way only: an asynchronous channel is not subject to the restrictions in Section 2.6.1 of <a class='info' href='#RFC3080'>[RFC3080]<span> (</span><span class='info'>Rose, M., &ldquo;The Blocks Extensible Exchange Protocol Core,&rdquo; March&nbsp;2001.</span><span>)</span></a> regarding the processing and response ordering.  A peer in the serving role may process and respond to requests in any order it chooses.
        
</p>
<p>In an asynchronous channel the <tt>msgno</tt> element of the frame header is used to correlate request and response.  A BEEP peer receiving responses in a different order to the requests that triggered them must not regard this is a protocol error.
        
</p>
<p><tt>MSG</tt> messages sent on an asynchronous chanel may be processed in parallel by the serving peer.  Responses (<tt>RPY</tt>, <tt>ANS</tt>, <tt>NUL</tt> or <tt>ERR</tt> messages) can be sent in any order.  Different <tt>ANS</tt> messages that are sent in a one-to-many exchange may be interleaved with responses to other <tt>MSG</tt> messages.
        
</p>
<p>An asynchronous channel must still observe the rules in <a class='info' href='#RFC3080'>[RFC3080]<span> (</span><span class='info'>Rose, M., &ldquo;The Blocks Extensible Exchange Protocol Core,&rdquo; March&nbsp;2001.</span><span>)</span></a> regarding segmented messages.  Each message must be completed before any other message can be sent on that same channel.
        </p>
<blockquote class="text"><dl>
<dt>Note:</dt>
<dd>An exception to this rule is made in <a class='info' href='#RFC3080'>[RFC3080]<span> (</span><span class='info'>Rose, M., &ldquo;The Blocks Extensible Exchange Protocol Core,&rdquo; March&nbsp;2001.</span><span>)</span></a> for interleaved ANS segments sent in response to the same <tt>MSG</tt>.  It is recommended that BEEP peers do not generate interleaved ANS segments.
          
</dd>
</dl></blockquote><p>
        
</p>
<p>The BEEP management channel (channel 0) is never asynchronous.
        
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Alternatives</h3>

<p>The option presented in this document provides for asynchronous communication.  Asynchronous channels might not be applicable in every circumstance, particularly where ordering of requests is significant.  Depending on application protocol requirements, the alternatives discussed in this section could be more applicable.
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Increasing Throughput</h3>

<p>Asynchronous channels can be used to remove limitations on message processing throughput in some cases.  Alternatively, pipelining of requests can increase throughput significantly where network latency is the limiting factor.  Spreading requests over several channels increases overall throughput, if throughput is the only consideration.
        
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Note:</dt>
<dd>Be wary of false optimizations that rely on the pipelining of requests.  If later requests in a series of pipelined requests rely on state established by earlier requests, errors in earlier requests could invalidate later requests.
        
</dd>
</dl></blockquote>

<p>The flow control window used in the <a class='info' href='#RFC3081'>TCP mapping<span> (</span><span class='info'>Rose, M., &ldquo;Mapping the BEEP Core onto TCP,&rdquo; March&nbsp;2001.</span><span>)</span></a> [RFC3081] can introduce a limiting factor in throughput for individual channels.  Choice of TCP window size similarly limits throughput, see <a class='info' href='#RFC1323'>[RFC1323]<span> (</span><span class='info'>Jacobson, V., Braden, B., and D. Borman, &ldquo;TCP Extensions for High Performance,&rdquo; May&nbsp;1992.</span><span>)</span></a>.  To avoid limitations introduced by flow control, receiving peers can increase the window size used; sending peers can open additional channels with the same profile.  Correctly managing flow control also applies to asynchronous channels.
        
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Asynchrony in the Application Protocol</h3>

<p>With changes to the application protocol, serial channels can be used for asynchronous exchanges.  Asynchrony can be provided at a protocol layer above BEEP by separating request and response.  This requires the addition of proprietary MIME headers or modifications to the application protocol.
        
</p>
<p>The serving peer provides an immediate <tt>RPY</tt> (or <tt>NUL</tt>) response to requests.  This frees the channel for further requests.  The actual response is sent as a separate <tt>MSG</tt> using a special identifier included in the original request to correlate the response with the request.  This second <tt>MSG</tt> can be sent on the same channel (since these are full duplex) or on a channel specifically created for this purpose.
        
</p>
<p>This method is not favoured since it requires that the application protocol solve the problem of correlating request with response.  BEEP aims to provide a general framework for the creation of an application protocol, and for it to not provide request/response correlation would limit its usefulness.  Using a MIME header is also possible, but using <tt>msgno</tt> is the most elegant solution.
        
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>Enabling asynchronous messaging for a channel potentially requires the maintenance of additional state information.  A peer in the server role that does not reply to messages can cause the accumulation of state at the client peer.  If this state information were not limited, this mode could be used to perform denial of service.  This problem, while already present in BEEP, is potentially more significant due to the nature of the processing on the serving peer that might occur for requests received on an asynchronous channel.  The extent to which denial is possible is limited by what a serving peer accepts; the number of outstanding requests can be restricted to protect against excessive accumulation of state.
      
</p>
<p>Peers that serve requests on asynchronous channels are not subject to any specific problems from state accumulation.  Peers in the serving role are able to use <a class='info' href='#RFC3081'>flow control<span> (</span><span class='info'>Rose, M., &ldquo;Mapping the BEEP Core onto TCP,&rdquo; March&nbsp;2001.</span><span>)</span></a> [RFC3081] to limit the consumption of local resources.
      
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This section registers the BEEP <tt>async</tt> feature in the BEEP parameters registry, following the template from Section 5.2 of <a class='info' href='#RFC3080'>[RFC3080]<span> (</span><span class='info'>Rose, M., &ldquo;The Blocks Extensible Exchange Protocol Core,&rdquo; March&nbsp;2001.</span><span>)</span></a>.
      </p>
<blockquote class="text"><dl>
<dt>Feature Identification:</dt>
<dd>async
</dd>
<dt>Feature Semantics:</dt>
<dd>This feature enables the creation of asynchronous channels, see <a class='info' href='#async'>Section&nbsp;3<span> (</span><span class='info'>Asynchronous BEEP Channels</span><span>)</span></a> of RFCXXXX.  [[EDITORS NOTE: Please replace XXXX with the assigned number of this document.]]
        
</dd>
<dt>Contact Information:</dt>
<dd>Martin Thomson &lt;martin.thomson@andrew.com&gt;
        
</dd>
</dl></blockquote><p>
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3080">[RFC3080]</a></td>
<td class="author-text"><a href="mailto:mrose@invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3080">The Blocks Extensible Exchange Protocol Core</a>,&rdquo; RFC&nbsp;3080, March&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3080.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3080.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3080.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3081">[RFC3081]</a></td>
<td class="author-text"><a href="mailto:mrose@invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3081">Mapping the BEEP Core onto TCP</a>,&rdquo; RFC&nbsp;3081, March&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3081.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3081.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3081.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1323">[RFC1323]</a></td>
<td class="author-text"><a href="mailto:van@CSAM.LBL.GOV">Jacobson, V.</a>, <a href="mailto:Braden@ISI.EDU">Braden, B.</a>, and <a href="mailto:dab@cray.com">D. Borman</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1323">TCP Extensions for High Performance</a>,&rdquo; RFC&nbsp;1323, May&nbsp;1992 (<a href="http://www.rfc-editor.org/rfc/rfc1323.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Thomson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong University Campus, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 2 4221 2915</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.thomson@andrew.com">martin.thomson@andrew.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.andrew.com/">http://www.andrew.com/</a></td></tr>
</table>
</body></html>
