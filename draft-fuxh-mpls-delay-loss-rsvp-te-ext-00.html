<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RSVP-TE extensions for services aware MPLS </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Conventions Used in This Document">
<link href="#rfc.section.2" rel="Chapter" title="2 Performance Accumulation and Verification">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Signaling Extensions">
<link href="#rfc.section.2.1.1" rel="Chapter" title="2.1.1 Latency Accumulation Object">
<link href="#rfc.section.2.1.1.1" rel="Chapter" title="2.1.1.1 Latency Accumulation sub-TLV">
<link href="#rfc.section.2.1.2" rel="Chapter" title="2.1.2 Required Latency Object">
<link href="#rfc.section.2.1.3" rel="Chapter" title="2.1.3 Signaling Procedures">
<link href="#rfc.section.3" rel="Chapter" title="3 Performance SLA Parameters Conveying">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Signaling Extensions">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Latency SLA Parameters subobject">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Signaling Procedure">
<link href="#rfc.section.4" rel="Chapter" title="4 Security Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="6 References">
<link href="#rfc.references.1" rel="Chapter" title="6.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="6.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="With more and more enterprises using cloud based services, the distances between the user and the applications are growing.  For multiple applications such as High Performance Computing and Electronic Financial markets, the response times are critical as is packet loss, while other applications require more throughput.  For example, financial or trading companies are very focused on end-to-end private pipe line latency optimizations that improve things 2-3 ms. Latency and latency SLA is one of the key parameters that these "high value" customers use to select a private pipe line provider.  This document extends RSVP-TE protocol to promote SLA experince of latency and packet loss application.  " />
  <meta name="description" content="With more and more enterprises using cloud based services, the distances between the user and the applications are growing.  For multiple applications such as High Performance Computing and Electronic Financial markets, the response times are critical as is packet loss, while other applications require more throughput.  For example, financial or trading companies are very focused on end-to-end private pipe line latency optimizations that improve things 2-3 ms. Latency and latency SLA is one of the key parameters that these "high value" customers use to select a private pipe line provider.  This document extends RSVP-TE protocol to promote SLA experince of latency and packet loss application.  " />
  <meta name="keywords" content="latency computation, latency verification, latency, RSVP-TE, OSPF-TE" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">X. Fu</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">M. Betts</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Q.L. Wang</td>
</tr>
<tr>
<td class="left">Expires: April 23, 2012</td>
<td class="right">ZTE</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">D. McDysan</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A. Malis</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Verizon</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">V. Manral</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Hewlett-Packard Corp.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 21, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RSVP-TE extensions for services aware MPLS <br />
  <span class="filename">draft-fuxh-mpls-delay-loss-rsvp-te-ext-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>With more and more enterprises using cloud based services, the distances between the user and the applications are growing.  For multiple applications such as High Performance Computing and Electronic Financial markets, the response times are critical as is packet loss, while other applications require more throughput.  For example, financial or trading companies are very focused on end-to-end private pipe line latency optimizations that improve things 2-3 ms. Latency and latency SLA is one of the key parameters that these "high value" customers use to select a private pipe line provider.  This document extends RSVP-TE protocol to promote SLA experince of latency and packet loss application.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 23, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Conventions Used in This Document</a>
</li>
<li>2.   <a href="#rfc.section.2">Performance Accumulation and Verification</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Signaling Extensions</a>
</li>
<li>2.1.1.   <a href="#rfc.section.2.1.1">Latency Accumulation Object</a>
</li>
<li>2.1.1.1.   <a href="#rfc.section.2.1.1.1">Latency Accumulation sub-TLV</a>
</li>
<li>2.1.2.   <a href="#rfc.section.2.1.2">Required Latency Object</a>
</li>
<li>2.1.3.   <a href="#rfc.section.2.1.3">Signaling Procedures</a>
</li>
<li>3.   <a href="#rfc.section.3">Performance SLA Parameters Conveying</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Signaling Extensions</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">Latency SLA Parameters subobject</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Signaling Procedure</a>
</li>
<li>4.   <a href="#rfc.section.4">Security Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.references">References</a>
</li>
<li>6.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>6.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">End-to-end service optimization based on latency is a key requirement for service provider.  It needs to communicate latency of links and nodes including latency and latency variation as a traffic engineering performance metric is a very important requirement.  [LATENCY-REQ] describes the requirement of latency traffic engineering application.  </p>
<p id="rfc.section.1.p.2">This document extend RSVP-TE to accumulate (e.g., sum) latency information of links and nodes along one LSP across multi-domain (e.g., Inter-AS, Inter-Area or Multi-Layer) so that an latency verification can be made at end points and improve the user's experience.  One-way and round-trip latency collection along the LSP by signaling protocol can be supported.  So the end points of this LSP can verify whether the total amount of latency could meet the latency agreement between operator and his user.  When RSVP-TE signaling is used, the source can determine if the latency requirement is met much more rapidly than performing the actual end-to-end latency measurement.  <br><br> One end-to-end LSP may be across some Composite Links [CL-REQ].  Even if the transport technology (e.g., OTN) implementing the component links is identical, the latency characteristics of the component links may differ.  RSVP-TE message needs to carry a indication for the selection of component links based on the latecny constraint.  When one end-to-end LSP traverse a server layer, there will be some latency constraint requirement for server layer.  RSVP-TE message also needs to carry a indication for the FA selection or FA-LSP creation.  This document extends RSVP-TE to indicate that a component links, FA or FA-LSP should meet the minimum and maximum latency value or maximum acceptable latency variation value.  <br><br> Packet Loss constraint will be taken up in a future version of the draft.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Conventions Used in This Document</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [RFC2119].  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Performance Accumulation and Verification</h1>
<p id="rfc.section.2.p.1">Latency accumulation and verification applies where the full path of an multi-domain (e.g., Inter-AS, Inter-Area or Multi-Layer) TE LSP can't be or is not determined at the ingress node of the TE LSP. This is most likely to arise owing to TE visibility limitations.  If all domains support to communicate latency as a traffic engineering metric parameter, one end-to-end optimized path with delay constraint (e.g., less than 10 ms) which satisfies latency SLAs parameter could be computed by BRPC [RFC5441] in PCE.  Otherwise, it could use the mechanism defined in this section to accumulat the latency of each links and nodes along the path which is across multi-domain.  </p>
<p id="rfc.section.2.p.2">Latency accumulation and verification also applies where not all domains could support the communication latency as a traffic engineering metric parameter.  The required latency could be signaled by RSVP-TE (i.e., Path and Resv message).  Intermediate nodes could reject the request (Path or Resv message) if the accumulated latency is not achievable.  This is essential in multiple AS use cases, but may not be needed in a single IGP level/area if the IGP is extended to convey latency information.  </p>
<p id="rfc.section.2.p.3">Node latency for a WAN could be ignored or even an average, however that was not true for the LAN cases.  Whether the node latency should be accumulated or not depends on the implementation.  </p>
<p id="rfc.section.2.p.4">One domain may need to know that other domains support latency accumulation.  It could be discovered in some automatic way. PCEs in different domains may play a role here. It is for further study.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Signaling Extensions</h1>
<h1 id="rfc.section.2.1.1">
<a href="#rfc.section.2.1.1">2.1.1.</a> Latency Accumulation Object</h1>
<p id="rfc.section.2.1.1.p.1">An Latency Accumulation Object is defined in this document to support the accumulation and verification of the latency.  This object which can be carried in a Path/Resv message may includes two sub-TLVs.  Latency Accumulation Object has the following format.  </p>
<div id="#rfc.figure.1"></div>
<div id="#figure4"></div>
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type(IANA)             |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Latency Accumulation sub-TLV (from source to sink)        |   
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Latency Accumulation sub-TLV (from sink to source)        |   
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
						</pre>
<p></p>

<ul>
<li>Latency Accumulation sub-TLV (from source to sink):It is used to accumulate the latency from source to sink along the unidirectional or bidirectional LSP.  A Path message for unidirectional and bidirectional LSP must includes this sub-TLV.  When sink node receives the Path message including this sub-TLV, it must copy this sub-TLV into Resv message.  So the source node can receive the latency accumulated value (i.e., sum) from itself to sink node which can be used for latency verification.  </li>
<li>Latency Accumulation sub-TLV (from sink to source):It is used to accumulate the latency from sink to source along the bidirectional LSP.  A Resv message for the bidirectional LSP must includes this sub-TLV.  So the source node can get the latency accumulated value (i.e., sum) of round-trip which can be used for latency verification.  In the case of unidirectional LSP, this sub-TLV is absent.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.2.1.1.1">
<a href="#rfc.section.2.1.1.1">2.1.1.1.</a> Latency Accumulation sub-TLV</h1>
<p id="rfc.section.2.1.1.1.p.1">The Sub-TLV format is defined in the next picture.</p>
<div id="#rfc.figure.2"></div>
<div id="#figure5"></div>
<pre>
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Type              |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Accumulated Estimated Latency Value                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Accumulated Estimated Latency Variation Value           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
							</pre>
<p></p>

<ul>
<li>Type: sub-TLV type <ul>
<li>0: It indicates the sub-TLV is for the latency accumulation from source to sink node along the LSP.</li>
<li>1: It indicates the sub-TLV is for the latency accumulation from sink to source node along the LSP.</li>
</ul>
<p> </p>
</li>
<li>Length: length of the sub-TLV value in bytes.</li>
<li>Accumulated Estimated Latency Value: a value indicates the sum of each links and nodes' latency along one direction of LSP.  It MUST be quantified in units of micro-seconds and encoded as an float point value.  </li>
<li>Accumulated Estimated Latency Variation Value: a value indicates the sume of each links and nodes' latency variation along one direction of LSP.  Since latecny variation is accumulated non-linearly. Latency variation accumulatoin should be in a lower priority.  It MUST be quantified in units of nano-seconds and encoded as an float point value.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.2.1.2">
<a href="#rfc.section.2.1.2">2.1.2.</a> Required Latency Object</h1>
<p id="rfc.section.2.1.2.p.1">A required latency could be signaled by RSVP-TE message (i.e., Path and Resv).  This object is carried in the LSP_ATTRIBUTES object of Path/Resv message, object that is defined in [RFC5420].  Intermediate nodes could reject the request (Path or Resv message) if the accumulated latency value exceeds required latency value in the Required Latency Object.  </p>
<p id="rfc.section.2.1.2.p.2">If the accumulated latency is not achievable, there is no necessary to accumulate the latency for remaining domain or nodes.  In order to balance the load across network links more efficiently if the absolute minimum latency is not required, intermediate nodes could choose a cost-effective path if the requested latency could easily be met.  Note that this would apply inter-AS if the IGP is extended to advertise latency.  </p>
<div id="#rfc.figure.3"></div>
<div id="#figure6"></div>
<pre>
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Type (IANA)          |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                   Required Latency Value                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Required Latency Variation Value                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
						</pre>
<p></p>

<ul>
<li>Required Latency Value: The accumulated estimated latency value should not exceed this value.  It MUST be quantified in units of micro-seconds and encoded as an float point value.  </li>
<li>Required Latency Variation Value: The accumulated estimated latency variation value should not exceed this value.  It MUST be quantified in units of micro-seconds and encoded as an float point value.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.2.1.3">
<a href="#rfc.section.2.1.3">2.1.3.</a> Signaling Procedures</h1>
<p id="rfc.section.2.1.3.p.1">When the source node desires to accumulate (i.e., sum) the total latency of one end-to-end LSP, the "Latency Accumulating desired" flag (value TBD) should be set in the LSP_ATTRIBUTES object of Path/Resv message, object that is defined in [RFC5420].  If the source node makes the intermediate node have the capability to verify the accumulated latency, the "Latency Verifying desired" flag (value TBD) should be also set in the LSP_ATTRIBUTES object of Path/Resv message.  </p>
<p id="rfc.section.2.1.3.p.2">A source node initiates latency accumulation for a given LSP by adding Latency Accumulation object to the Path message.  The Latency Accumulation object only includes one sub-TLV (sub-TLV type=0) where it is going to accumulate the latency value of each links and nodes along path from source to sink.  If latency verifying is desired, the source node also adds the Required Latency Object to the Path message.  </p>
<p id="rfc.section.2.1.3.p.3">When the downstream node receives Path message and if the "Latency Accumulating desired" is set in the LSP_ATTRIBUTES, it accumulates the latency of link and node based on the accumulated latency value of the sub-TLV (sub-TLV type=0) in Latency Accumulation object before it sends Path message to downsteam.  </p>
<p id="rfc.section.2.1.3.p.4">If the "Latency Verifying desired" is set in the LSP_ATTRIBUTES, downstream node will check whether the Accumulated Estimated Latency and Variation value exceeds the Required Latency and Variation value.  If the accumulated latency is not achievable, there is no necessary to accumulate the latency for remaining domain or nodes.  It MUST generate a error message with a "Accumulated Latency couldn't meet the required latency" indication (TBD by IANA).  </p>
<p id="rfc.section.2.1.3.p.5">If the intermediate node (e.g., entry node of one domain) couldn't support the latency accumulation function, it MUST generate a error message with a "Latency Accumulation unsupported" indication (TBD by IANA).  </p>
<p id="rfc.section.2.1.3.p.6">If the intermediate node (e.g., entry node of one domain) couldn't support the latency verify function, it MUST generate a error message with a "Latency Verify unsupported" indication (TBD by IANA).  </p>
<p id="rfc.section.2.1.3.p.7">When the sink node of LSP receives the Path message and the "Latency Accumulating desired" is set in the LSP_ATTRIBUTES, it copy the Accumulated Estimated Latency and Variation value in the Latency Accumulation sub-TLV (sub-TLV type=0) of Path message into the one of Resv message which will be forwarded hop by hop in the upstream direction until it arrives the source node.  Then source node can get the latency sum value from source to sink for unidirectional and bidirectional LSP.  </p>
<p id="rfc.section.2.1.3.p.8">If the LSP is a bidirectional one and the "Latency Accumulating desired" is set in the LSP_ATTRIBUTES, it adds another Latency Accumulation sub-TLV (sub-TLV type=1) into the Latency Accumulation object of Resv message where latency of each links and nodes along path will be accumulated from sink to source into this sub-TLV.  </p>
<p id="rfc.section.2.1.3.p.9">If the LSP is a bidirectional one and the "Latency Verifying desired" is set in the LSP_ATTRIBUTES, it copy the Required Latency and Variation value in the Required Latency Object of Path message into the Resv message.  </p>
<p id="rfc.section.2.1.3.p.10">When the upstream node receives Resv message and if the "Latency Accumulating desired" is set in the LSP_ATTRIBUTES, it accumulates the latency of link and node based on the latency value in sub-TLV (sub-TLV type=1) before it continues to sends Resv message.  </p>
<p id="rfc.section.2.1.3.p.11">If the "Latency Verifying desired" is set in the LSP_ATTRIBUTES, it will check whether the latency sum of Accumulated Estimated Latency and Variation value in each Latency Accumulation sub-TLV exceeds the Required Latency and Variation value.  If the accumulated latency is not achievable, there is no necessary to accumulate the latency for remaining domain or nodes.  It MUST generate a error message with a "Accumulated Latency couldn't meet the required latency" indication (TBD by IANA).  </p>
<p id="rfc.section.2.1.3.p.12">After source node receive Resv message, it can get the total latency value of one way or round-trip from Latency Accumulation object.  So it can confirm whether the latency value meet the latency SLA or not.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Performance SLA Parameters Conveying</h1>
<p id="rfc.section.3.p.1">[CL-REQ] introduces Composite Link into MPLS network.  In order to assign the LSP to one of component links with different latency characteristics, RSVP-TE message MUST convey latency SLA parameter to the end points of Composite Links where it can select one of component links or trigger the creation of lower layer connection which MUST meet latency SLA parameter.  </p>
<p id="rfc.section.3.p.2">One end-to-end LSP (e.g., in IP/MPLS or MPLS-TP network) may traverse a FA-LSP of server layer (e.g., OTN rings).  There will be some latency constraint requirement for server layer.  RSVP-TE message also needs to carry a indication for the FA selection or FA-LSP creation.  </p>
<p id="rfc.section.3.p.3">The RSVP-TE message needs to carry a indication of request minimum latency, maximum acceptable latency value and maximum acceptable delay variation value.  The end point will take these parameters into account for selection or creation of component link, FA selection or FA-LSP.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Signaling Extensions</h1>
<p id="rfc.section.3.1.p.1">This document defines extensions to and describes the use of RSVP-TE [RFC3209], [RFC3471], [RFC3473] to explicitly convey the latency SLA parameter for the selection or creation of component link or FA/FA-LSP.  Specifically, in this document, Latency SLA Parameters TLV are defined and added into ERO as a subobject.  </p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> Latency SLA Parameters subobject</h1>
<p id="rfc.section.3.1.1.p.1">A new OPTIONAL subobject of the EXPLICIT_ROUTE Object (ERO) is used to specify the latency SLA parameters including a indication of request minimum latency, request maximum acceptable latency value and request maximum acceptable latency variation value. It can be used for the following scenarios.  </p>

<ul>
<li>One end-to-end LSP may traverse a server layer FA-LSP. This subobject of ERO can indicate that FA selection or FA-LSP creation shall be based on this latency constraint.  The boundary nodes of multi-layer will take these parameters into account for FA selection or FA-LSP creation.  </li>
<li>One end-to-end LSP may be across some Composite Links [CL-REQ]. This subobject of ERO can indicate that a traffic flow shall select a component link with some latency constraint values as specified in this subobject.  </li>
</ul>

<p> </p>
<p id="rfc.section.3.1.1.p.2">This Latency SLA Parameters ERO subobject has the following format.  It follows a subobject containing the IP address, or the link identifier [RFC3477], associated with the TE link on which it is to be used.  </p>
<div id="#rfc.figure.4"></div>
<div id="#figure3"></div>
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type(IANA)             |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|I|V|                       Reserved                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Request Maximum Acceptable Latency Value              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Request Maximum Acceptable Latency Variation Value        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
						</pre>
<p></p>

<ul>
<li>I bit: a one bit field indicates whether a traffic flow shall select a component link with the minimum latency value or not.  It can also indicate whether one end-to-end LSP shall select a FA or trigger a FA-LSP creation with the minimum latency value or not when it traverse a server layer.  </li>
<li>V bit: a one bit field indicates whether a traffic flow shall select a component link with the minimum latency variation value or not.  It can also indicate whether one end-to-end LSP shall select a FA or trigger a FA-LSP creation with the minimum latency variation value or not when it traverse a server layer.  </li>
<li>Request Maximum Acceptable Latency Value: a value indicates that a traffic flow shall select a component link with a maximum acceptable latency value.  It can also indicate one end-to-end LSP shall select a FA or trigger a FA-LSP creation with a maximum acceptable latency value when it traverse a server layer.  It MUST be quantified in units of micro-seconds and encoded as an float point value.  </li>
<li>Request Maximum Acceptable Latency Variation Value: a value indicates that a traffic flow shall select a component link with a maximum acceptable latency variation value.  It can also indicate one end-to-end LSP shall select a FA or trigger a FA-LSP creation with a maximum acceptable latency variation value when it traverse a server layer.  It MUST be quantified in units of nano-seconds and encoded as an float point value.  </li>
</ul>

<p> </p>
<p id="rfc.section.3.1.1.p.4">Following is an example about how to use these parameters.  Assume there are following component links within one composite link.  <br><br> Assume there are following request information.  <br><br> <br><br> <br><br> </p>

<ul>
<li>Component link1: latency = 50 ms, latency variation = 15 ns</li>
<li>Component link2: latency = 100 ms, latency variation = 6 ns</li>
<li>Component link3: latency = 200 ms, latency variation = 3 ns</li>
<li>Component link4: latency = 300 ms, latency variation = 1 ns</li>
</ul>

<p> </p>

<ul>
<li>Request minimum latency = FALSE</li>
<li>Request minimum latency variation= FALSE</li>
<li>Maximum Acceptable Latency Value= 150 ms</li>
<li>Maximum Acceptable Latency Variation Value = 10 ns</li>
</ul>

<p> Only Component link2 could be qualified.  </p>

<ul>
<li>Request minimum latency = FALSE</li>
<li>Request minimum latency variation= FALSE</li>
<li>Maximum Acceptable Latency Value= 350 ms</li>
<li>Maximum Acceptable Latency Variation Value = 10 ns</li>
</ul>

<p> Component link2/3/4 could be qualified. Which component link is selected depends on local policy.  </p>

<ul>
<li>Request minimum latency = FALSE</li>
<li>Request minimum latency variation= TRUE</li>
<li>Maximum Acceptable Latency Value= 350 ms</li>
<li>Maximum Acceptable Latency Variation Value = 10 ns</li>
</ul>

<p> Only Component link4 could be qualified.  </p>

<ul>
<li>Request minimum latency = TRUE</li>
<li>Request minimum latency variation= FALSE</li>
<li>Maximum Acceptable Latency Value= 350 ms</li>
<li>Maximum Acceptable Latency Variation Value = 10 ns</li>
</ul>

<p> Only Component link2 could be qualified.  </p>

<ul class="empty">
<li>Request minimum latency = TRUE</li>
<li>Request minimum latency variation= TRUE</li>
<li>Maximum Acceptable Latency Value= 350 ms</li>
<li>Maximum Acceptable Latency Variation Value = 10 ns</li>
</ul>

<p> In this case, there is no any qualified component links.  But priority may be used for latency and variation, so one of component links could be still selected.  </p>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> Signaling Procedure</h1>
<p id="rfc.section.3.1.2.p.1">When a intermediate node receives a PATH message containing ERO and finds that there is a Latency SLA Parameters ERO subobject immediately behind the IP address or link address sub-object related to itself, if the node determines that it's a region edge node of FA-LSP or an end point of a composite link [CL-REQ], then, this node extracts latency SLA parameters (i.e.,request minimum, request maximum acceptable and request maximum acceptable latency variation value) from Latency SLA Parameters ERO subobject.  This node used these latency parameters for FA selection, FA-LSP creation or component link selection.  <br><br> If the intermediate node couldn't support the latency SLA, it MUST generate a PathErr message with a "Latency SLA unsupported" indication (TBD by IANA).  If the intermediate node couldn't select a FA or component link, or create a FA-LSP which meet the latency constraint defined in Latency SLA Parameters ERO subobject, it must generate a PathErr message with a "Latency SLA parameters couldn't be met" indication (TBD by IANA).  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Security Considerations</h1>
<p id="rfc.section.4.p.1">This document raises no new security issues.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> IANA Considerations</h1>
<p id="rfc.section.5.p.1">TBD </p>
<h1 id="rfc.references">
<a href="#rfc.references">6.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">6.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3209">[RFC3209]</b></td>
<td class="top">
<a>Awduche, D.</a>, <a>Berger, L.</a>, <a>Gan, D.</a>, <a>Li, T.</a>, <a>Srinivasan, V.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc3209">RSVP-TE: Extensions to RSVP for LSP Tunnels</a>", RFC 3209, December 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3473">[RFC3473]</b></td>
<td class="top">
<a>Berger, L.</a>, "<a href="http://tools.ietf.org/html/rfc3473">Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions</a>", RFC 3473, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3477">[RFC3477]</b></td>
<td class="top">
<a>Kompella, K.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc3477">Signalling Unnumbered Links in Resource ReSerVation Protocol - Traffic Engineering (RSVP-TE)</a>", RFC 3477, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3630">[RFC3630]</b></td>
<td class="top">
<a>Katz, D.</a>, <a>Kompella, K.</a> and <a>D. Yeung</a>, "<a href="http://tools.ietf.org/html/rfc3630">Traffic Engineering (TE) Extensions to OSPF Version 2</a>", RFC 3630, September 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4203">[RFC4203]</b></td>
<td class="top">
<a>Kompella, K.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc4203">OSPF Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)</a>", RFC 4203, October 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">6.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="CL-REQ">[CL-REQ]</b></td>
<td class="top">
<a title="Infinera Corporation">C. Villamizar, </a>, "<a>Requirements for MPLS Over a Composite Link </a>", draft-ietf-rtgwg-cl-requirement-02 , .</td>
</tr>
<tr>
<td class="reference"><b id="LATENCY-REQ">[LATENCY-REQ]</b></td>
<td class="top">
<a title="ZTE Corporation">X. Fu, </a>, "<a>Traffic Engineering architecture for services aware MPLS </a>", draft-fuxh-mpls-delay-loss-te-framework-02 , .</td>
</tr>
<tr>
<td class="reference"><b id="ietf-mpls-loss-delay">[ietf-mpls-loss-delay]</b></td>
<td class="top">
<a title="Cisco Systems">D. Frost, </a>, "<a>Packet Loss and Delay Measurement for MPLS Networks </a>", draft-ietf-mpls-loss-delay-03 , .</td>
</tr>
<tr>
<td class="reference"><b id="EXPRESS-PATH">[EXPRESS-PATH]</b></td>
<td class="top">
<a title="Thomson Reuters">S. Giacalone, </a>, "<a>OSPF Traffic Engineering (TE) Express Path </a>", draft-giacalone-ospf-te-express-path-01 , .</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Xihua Fu</span> 
	  <span class="n hidden">
		<span class="family-name">Fu</span>
	  </span>
	</span>
	<span class="org vcardline">ZTE</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fu.xihua@zte.com.cn">fu.xihua@zte.com.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Malcolm Betts</span> 
	  <span class="n hidden">
		<span class="family-name">Betts</span>
	  </span>
	</span>
	<span class="org vcardline">ZTE</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:malcolm.betts@zte.com.cn">malcolm.betts@zte.com.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Qilei Wang</span> 
	  <span class="n hidden">
		<span class="family-name">Wang</span>
	  </span>
	</span>
	<span class="org vcardline">ZTE</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:wang.qilei@zte.com.cn">wang.qilei@zte.com.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Dave McDysan</span> 
	  <span class="n hidden">
		<span class="family-name">McDysan</span>
	  </span>
	</span>
	<span class="org vcardline">Verizon</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:dave.mcdysan@verizon.com">dave.mcdysan@verizon.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Andrew Malis</span> 
	  <span class="n hidden">
		<span class="family-name">Malis</span>
	  </span>
	</span>
	<span class="org vcardline">Verizon</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:andrew.g.malis@verizon.com">andrew.g.malis@verizon.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Vishwas Manral</span> 
	  <span class="n hidden">
		<span class="family-name">Manral</span>
	  </span>
	</span>
	<span class="org vcardline">Hewlett-Packard Corp.</span>
	<span class="adr">
	  <span>191111 Pruneridge Ave.</span>

	  <span class="vcardline">
		<span class="locality">Cupertino</span>,  
		<span class="region">CA</span> 
		<span class="code">95014</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">Phone: 408-447-1497</span>

<span class="vcardline">EMail: <a href="mailto:vishwas.manral@hp.com">vishwas.manral@hp.com</a></span>

  </address>
</div>

</body>
</html>