<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Support for Local RIB in BGP Monitoring Protocol (BMP)</title>
<meta content="Tim Evens" name="author">
<meta content="Serpil Bayraktar" name="author">
<meta content="Manish Bhardwaj" name="author">
<meta content="Paolo Lucente" name="author">
<meta content="
       
                The BGP Monitoring Protocol (BMP) defines access to various Routing
                Information Bases (RIBs). This document updates BMP (RFC 7854) by
                adding access to the Local Routing Information Base (Loc-RIB), as
                defined in RFC 4271. The Loc-RIB contains the routes that have been
                selected by the local BGP speaker's Decision Process.
       
    " name="description">
<meta content="xml2rfc 3.5.0" name="generator">
<meta content="BGP" name="keyword">
<meta content="BMP" name="keyword">
<meta content="local-rib" name="keyword">
<meta content="loc-rib" name="keyword">
<meta content="draft-ietf-grow-bmp-local-rib-10" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.3
    google-i18n-address 2.4.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.2
    pycountry 20.7.3
    pyflakes 2.2.0
    PyYAML 5.4.1
    requests 2.25.1
    setuptools 54.0.0
    six 1.15.0
-->
<link href="/tmp/draft-ietf-grow-bmp-local-rib-b75wy44i.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">BMP Loc-RIB</td>
<td class="right">March 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Evens, et al.</td>
<td class="center">Expires 9 September 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Global Routing Operations</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-grow-bmp-local-rib-10</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc7854" class="eref">7854</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-03-08" class="published">8 March 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-09-09">9 September 2021</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Evens</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">S. Bayraktar</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">M. Bhardwaj</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">P. Lucente</div>
<div class="org">NTT Communications</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Support for Local RIB in BGP Monitoring Protocol (BMP)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
                The BGP Monitoring Protocol (BMP) defines access to various Routing
                Information Bases (RIBs). This document updates BMP (RFC 7854) by
                adding access to the Local Routing Information Base (Loc-RIB), as
                defined in RFC 4271. The Loc-RIB contains the routes that have been
                selected by the local BGP speaker's Decision Process.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 9 September 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-alternative-method-to-monit" class="xref">Alternative Method to Monitor Loc-RIB</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-definitions" class="xref">Definitions</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-per-peer-header" class="xref">Per-Peer Header</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-peer-type" class="xref">Peer Type</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-peer-flags" class="xref">Peer Flags</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-loc-rib-monitoring" class="xref">Loc-RIB Monitoring</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-per-peer-header-2" class="xref">Per-Peer Header</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-peer-up-notification" class="xref">Peer UP Notification</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-peer-up-information" class="xref">Peer UP Information</a><a href="#section-toc.1-1.5.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-peer-down-notification" class="xref">Peer Down Notification</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-route-monitoring" class="xref">Route Monitoring</a><a href="#section-toc.1-1.5.2.4.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.5.2.4.2.1">
                    <p id="section-toc.1-1.5.2.4.2.1.1"><a href="#section-5.4.1" class="xref">5.4.1</a>.  <a href="#name-asn-encoding" class="xref">ASN Encoding</a><a href="#section-toc.1-1.5.2.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.5.2.4.2.2">
                    <p id="section-toc.1-1.5.2.4.2.2.1"><a href="#section-5.4.2" class="xref">5.4.2</a>.  <a href="#name-granularity" class="xref">Granularity</a><a href="#section-toc.1-1.5.2.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="xref">5.5</a>.  <a href="#name-route-mirroring" class="xref">Route Mirroring</a><a href="#section-toc.1-1.5.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a href="#section-5.6" class="xref">5.6</a>.  <a href="#name-statistics-report" class="xref">Statistics Report</a><a href="#section-toc.1-1.5.2.6.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-other-considerations" class="xref">Other Considerations</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-loc-rib-implementation" class="xref">Loc-RIB Implementation</a><a href="#section-toc.1-1.6.2.1.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="xref">6.1.1</a>.  <a href="#name-multiple-loc-rib-peers" class="xref">Multiple Loc-RIB Peers</a><a href="#section-toc.1-1.6.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="xref">6.1.2</a>.  <a href="#name-filtering-loc-rib-to-bmp-re" class="xref">Filtering Loc-RIB to BMP Receivers</a><a href="#section-toc.1-1.6.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact toc ulEmpty" id="section-toc.1-1.6.2.1.2.3">
                    <p id="section-toc.1-1.6.2.1.2.3.1"><a href="#section-6.1.3" class="xref">6.1.3</a>.  <a href="#name-changes-to-existing-bmp-ses" class="xref">Changes to existing BMP sessions</a><a href="#section-toc.1-1.6.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="compact toc ulEmpty">
<li class="compact toc ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-bmp-peer-type" class="xref">BMP Peer Type</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-bmp-peer-flags" class="xref">BMP Peer Flags</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-peer-up-information-tlv" class="xref">Peer UP Information TLV</a><a href="#section-toc.1-1.8.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact toc ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="xref">8.4</a>.  <a href="#name-peer-down-reason-code" class="xref">Peer Down Reason code</a><a href="#section-toc.1-1.8.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-appendix.b" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
                This document defines a mechanism to monitor the BGP Loc-RIB state
                of remote BGP instances without the need to establish BGP peering
                sessions.

                BMP <span>[<a href="#RFC7854" class="xref">RFC7854</a>]</span> does not define a method to send
                the BGP instance Loc-RIB.  It does define in 
                <span><a href="#RFC7854" class="xref">section 8.2 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span> locally originated routes,
                but these routes are defined as the routes originated into BGP. For
                example, locally sourced routes that are redistributed.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
                <a href="#FigAdjRibInLocRib" class="xref">Figure 1</a> shows the flow of received routes from one or more BGP peers
                into the Loc-RIB.<a href="#section-1-2" class="pilcrow">¶</a></p>
<span id="name-bgp-peering-adj-ribs-in-int"></span><div id="FigAdjRibInLocRib">
<figure id="figure-1">
        <div class="artwork art-text alignCenter" id="section-1-3.1">
<pre>
    +------------------+      +------------------+
    | Peer-A           |      | Peer-B           |
/-- |                  | ---- |                  | --\
|   | Adj-RIB-In (Pre) |      | Adj-RIB-In (Pre) |   |
|   +------------------+      +------------------+   |
|                 |                         |        |
| Filters/Policy -|         Filters/Policy -|        |
|                 V                         V        |
|   +------------------       +------------------+   |
|   | Adj-RIB-In (Post)|      | Adj-RIB-In (Post)|   |
|   +------------------       +------------------+   |
|                |                          |        |
|      Selected -|                Selected -|        |
|                V                          V        |
|    +-----------------------------------------+     |
|    |                 Loc-RIB                 |     |
|    +-----------------------------------------+     |
|                                                    |
| ROUTER/BGP Instance                                |
\----------------------------------------------------/
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-bgp-peering-adj-ribs-in-int" class="selfRef">BGP peering Adj-RIBs-In into Loc-RIB</a>
        </figcaption></figure>
</div>
<p id="section-1-4">
        <a href="#FigLocallyOriginated" class="xref">Figure 2</a> (Locally Originated into Loc-RIB)
 illustrates how redistributed or otherwise originated routes get installed into the
 Loc-RIB based on the decision process selection in
 <span><a href="#RFC4271" class="xref">RFC 4271</a> [<a href="#RFC4271" class="xref">RFC4271</a>]</span>.<a href="#section-1-4" class="pilcrow">¶</a></p>
<span id="name-locally-originated-into-loc"></span><div id="FigLocallyOriginated">
<figure id="figure-2">
        <div class="artwork art-text alignCenter" id="section-1-5.1">
<pre>
/--------------------------------------------------------\
|                                                        |
| +----------+  +----------+  +----------+  +----------+ |
| |  IS-IS   |  |   OSPF   |  |  Static  |  |    BGP   | |
| +----------+  +----------+  +----------+  +----------+ |
|       |            |             |              |      |
|       |                                         |      |
|       |  Redistributed or originated into BGP   |      |
|       |                                         |      |
|       |            |             |              |      |
|       V            V             V              V      |
|    +----------------------------------------------+    |
|    |                 Loc-RIB                      |    |
|    +----------------------------------------------+    |
|                                                        |
| ROUTER/BGP Instance                                    |
\--------------------------------------------------------/
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-locally-originated-into-loc" class="selfRef">Locally Originated into Loc-RIB</a>
        </figcaption></figure>
</div>
<p id="section-1-6">
                The following are some use-cases for Loc-RIB access:<a href="#section-1-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-7.1">
          <p id="section-1-7.1.1">
                        The Adj-RIB-In for a given peer Post-Policy may contain hundreds of
                        thousands of routes, with only a handful of routes selected and installed
                        in the Loc-RIB after best-path selection.
                        Some monitoring applications, such as ones that need only to
                        correlate flow records to Loc-RIB entries, only need to collect
                        and monitor the routes that are actually selected and used.<a href="#section-1-7.1.1" class="pilcrow">¶</a></p>
<p id="section-1-7.1.2">

                        Requiring the applications to collect all Adj-RIB-In Post-Policy
                        data forces the applications to receive a potentially
                        large unwanted data set and to perform the BGP decision process
                        selection, which includes having access to the IGP next-hop
                        metrics. While it is possible to obtain the IGP topology
                        information using BGP-LS, it requires the application to
                        implement SPF and possibly CSPF based on additional policies.
                        This is overly complex for such a simple application that only
                        needs to have access to the Loc-RIB.<a href="#section-1-7.1.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-7.2">
                        It is common to see frequent changes over many BGP peers, but
                        those changes do not always result in the router's Loc-RIB
                        changing. The change in the Loc-RIB can have a direct impact
                        on the forwarding state. It can greatly reduce time to
                        troubleshoot and resolve issues if operators have the history of
                        Loc-RIB changes. For example, a performance issue might have
                        been seen for only a duration of 5 minutes. Post
                        troubleshooting this issue without Loc-RIB history hides any
                        decision based routing changes that might have happened during
                        those five minutes.<a href="#section-1-7.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-7.3">
                        Operators may wish to validate the impact of policies applied
                        to Adj-RIB-In by analyzing the final decision made by the
                        router when installing into the Loc-RIB. For example, in order
                        to validate if multi-path prefixes are installed as expected
                        for all advertising peers, the Adj-RIB-In Post-Policy and Loc-RIB
                        needs to be compared. This is only possible if the Loc-RIB
                        is available. Monitoring the Adj-RIB-In for this router from
                        another router to derive the Loc-RIB is likely to not show same
                        installed prefixes. For example, the received Adj-RIB-In will
                        be different if add-paths is not enabled or if maximum number
                        of equal paths are different from Loc-RIB to routes
                        advertised.<a href="#section-1-7.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-8">
                This document adds Loc-RIB to the BGP Monitoring Protocol and
                replaces <span><a href="#RFC7854" class="xref">Section 8.2 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span> Locally Originated Routes.<a href="#section-1-8" class="pilcrow">¶</a></p>
<section id="section-1.1">
        <h3 id="name-alternative-method-to-monit">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-alternative-method-to-monit" class="section-name selfRef">Alternative Method to Monitor Loc-RIB</a>
        </h3>
<p id="section-1.1-1">
                    Loc-RIB is used to build Adj-RIB-Out when advertising routes to a
                    peer. It is therefore possible to derive the Loc-RIB of a router by
                    monitoring the Adj-RIB-In Pre-Policy from another router.  At scale
                    this becomes overly complex and error prone.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2"></p>
<span id="name-alternative-method-to-monito"></span><div id="FigCurLocRibMon">
<figure id="figure-3">
          <div class="artwork art-text alignCenter" id="section-1.1-3.1">
<pre>
/------------------------------------------------------\
|  ROUTER1 BGP Instance                                |
|                                                      |
|     +--------------------------------------------+   |
|     |                 Loc-RIB                    |   |
|     +--------------------------------------------+   |
|                    |                    |            |
|    +------------------+     +------------------+     |
|    |   Peer-ROUTER2   |     |   Peer-ROUTER3   |     |
|    | Adj-RIB-Out (Pre)|     | Adj-RIB-Out (Pre)|     |
|    +------------------+     +------------------+     |
|    Filters/Policy -|    Filters/Policy -|            |
|                    V                    V            |
|   +-------------------+     +-------------------+    |
|   | Adj-RIB-Out (Post)|     | Adj-RIB-Out (Post)|    |
|   +-------------------+     +-------------------+    |
|              |                          |            |
\------------- | ------------------------ | -----------/
          BGP  |                     BGP  |
          Peer |                     Peer |
   +------------------+          +------------------+
   |   Peer-ROUTER1   |          |   Peer-ROUTER1   |
/--|                  |--\    /--|                  | --\
|  | Adj-RIB-In (Pre) |  |    |  | Adj-RIB-In (Pre) |   |
|  +------------------+  |    |  +------------------+   |
|                        |    |                         |
| ROUTER2/BGP Instance   |    | ROUTER3/BGP Instance    |
\------------------------/    \-------------------------/
            |                              |
            v                              v
    ROUTER2 BMP Feed               ROUTER3 BMP Feed
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-alternative-method-to-monito" class="selfRef">Alternative method to monitor Loc-RIB</a>
          </figcaption></figure>
</div>
<p id="section-1.1-4">
                    The setup needed to monitor the Loc-RIB of a router requires another
                    router with a peering session to the target router that is to be
                    monitored. As shown in <a href="#FigCurLocRibMon" class="xref">Figure 3</a>, the
                    target router Loc-RIB is advertised via Adj-RIB-Out
                    to the BMP router over a standard BGP peering session. The BMP
                    router then forwards Adj-RIB-In Pre-Policy to the BMP receiver.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">
                    BMP lacking access to Loc-RIB introduces the need for additional
     resources:<a href="#section-1.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-6.1">
                    Requires at least two routers when only one router was to be
                    monitored.<a href="#section-1.1-6.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.2">
                    Requires additional BGP peering to collect the received updates
                    when peering may have not even been required in the first
                    place. For example, VRFs with no peers, redistributed BGP-LS
                    with no peers, segment routing egress peer engineering where no
                    peers have link-state address family enabled.<a href="#section-1.1-6.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-7">
                    Complexities introduced by the lack of access to Loc-RIB in
     order to derive (e.g. correlate) peer to router Loc-RIB:<a href="#section-1.1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-8.1">
                    Adj-RIB-Out received as Adj-RIB-In from another router may have
                    a policy applied that filters, generates aggregates, suppresses
                    more specifics, manipulates attributes, or filters routes. Not
                    only does this invalidate the Loc-RIB view, it adds complexity
                    when multiple BMP routers may have peering sessions to the same
                    router. The BMP receiver user is left with the error prone task of
                    identifying which peering session is the best representative of
                    the Loc-RIB.<a href="#section-1.1-8.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.2">
                    BGP peering is designed to work between administrative domains
                    and therefore does not need to include internal system level
                    information of each peering router (e.g. the system name or
                    version information). In order to derive a Loc-RIB to a router,
                    the router name or other system information is needed. The BMP
                    receiver and user are forced to do some type of correlation using
                    what information is available in the peering session (e.g. peering
                    addresses, ASNs, and BGP-IDs). This leads to error prone
                    correlations.<a href="#section-1.1-8.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.3">
                    The BGP-IDs and session addresses to router correlation
                    requires additional data, such as router inventory. This
                    additional data provides the BMP receiver the ability to map and
                    correlate the BGP-IDs and/or session addresses, but requires the
                    BMP receiver to somehow obtain this data outside of BMP. How this
                    data is obtained and the accuracy of the data directly effects the
                    integrity of the correlation.<a href="#section-1.1-8.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</section>
</div>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">
 The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
 NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
 "MAY", and "OPTIONAL" in this document are to be interpreted as
 described in BCP 14 <span><a href="#RFC2119" class="xref">RFC 2119</a> [<a href="#RFC2119" class="xref">RFC2119</a>]</span>
        <span><a href="#RFC8174" class="xref">RFC 8174</a> [<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they
 appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-definitions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-3-1.1">
 BGP Instance: refers to an instance of an instance of BGP-4 <span>[<a href="#RFC4271" class="xref">RFC4271</a>]</span>
 and considerations in <span><a href="#RFC7854" class="xref">section 8.1 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span> do apply to it.<a href="#section-3-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-1.2">
            Adj-RIB-In: As defined in <span>[<a href="#RFC4271" class="xref">RFC4271</a>]</span>, "The Adj-RIBs-In contains
            unprocessed routing information that has been advertised to the
            local BGP speaker by its peers." This is also referred to as the
            pre-policy Adj-RIB-In in this document.<a href="#section-3-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-1.3">
            Adj-RIB-Out: As defined in <span>[<a href="#RFC4271" class="xref">RFC4271</a>]</span>, "The Adj-RIBs-Out contains
            the routes for advertisement to specific peers by means of the
            local speaker's UPDATE messages."<a href="#section-3-1.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-1.4">
            Loc-RIB: As defined in <span><a href="#RFC4271" class="xref">section 9.4 of</a> [<a href="#RFC4271" class="xref">RFC4271</a>]</span>, "The Loc-RIB
 contains the routes that have been selected by the local BGP speaker's Decision
            Process." Note that the Loc-RIB state as monitored through BMP might
            also contain routes imported from other routing protocols such as an IGP,
            or local static routes.<a href="#section-3-1.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-1.5">
            Pre-Policy Adj-RIB-Out: The result before applying the outbound
            policy to an Adj-RIB-Out. This normally represents a similar view of the
            Loc-RIB but may contain additional routes based on BGP peering configuration.<a href="#section-3-1.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-1.6">
            Post-Policy Adj-RIB-Out: The result of applying outbound policy to
            an Adj-RIB-Out. This MUST be what is actually sent to the peer.<a href="#section-3-1.6" class="pilcrow">¶</a>
</li>
      </ul>
</section>
<section id="section-4">
      <h2 id="name-per-peer-header">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-per-peer-header" class="section-name selfRef">Per-Peer Header</a>
      </h2>
<div id="PeerType">
<section id="section-4.1">
        <h3 id="name-peer-type">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-peer-type" class="section-name selfRef">Peer Type</a>
        </h3>
<p id="section-4.1-1">
            A new peer type is defined for Loc-RIB to distinguish that it
            represents Loc-RIB with or without RD and local instances.
            <span><a href="#RFC7854" class="xref">Section 4.2 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span> defines a Local Instance
     Peer type, which is for the case of non-RD peers that have an instance
            identifier.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">
            This document defines the following new peer type:<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-3.1">
            Peer Type = 3: Loc-RIB Instance Peer<a href="#section-4.1-3.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="PeerFlags">
<section id="section-4.2">
        <h3 id="name-peer-flags">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-peer-flags" class="section-name selfRef">Peer Flags</a>
        </h3>
<p id="section-4.2-1">
            In <span><a href="#RFC7854" class="xref">section 4.2 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span>, the "locally sourced routes"
            comment under the L flag description is removed. If locally sourced routes are communicated
     using BMP, they MUST be conveyed using the Loc-RIB instance peer type.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">
            The per-peer header flags for Loc-RIB Instance Peer type are defined
            as follows:<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignCenter" id="section-4.2-3">
<pre>
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|F|  Reserved   |
+-+-+-+-+-+-+-+-+
</pre><a href="#section-4.2-3" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-4.2-4.1">
            <p id="section-4.2-4.1.1">
                The F flag indicates that the Loc-RIB is filtered. This MUST be
     set when only a subset of Loc-RIB routes is sent to the BMP
     collector.<a href="#section-4.2-4.1.1" class="pilcrow">¶</a></p>
<p id="section-4.2-4.1.2">

                The remaining bits are reserved for future use. They MUST be
                transmitted as 0 and their values MUST be ignored on receipt.<a href="#section-4.2-4.1.2" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
<section id="section-5">
      <h2 id="name-loc-rib-monitoring">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-loc-rib-monitoring" class="section-name selfRef">Loc-RIB Monitoring</a>
      </h2>
<p id="section-5-1">
 The Loc-RIB contains all routes selected by the BGP protocol Decision Process as
 described in  <span><a href="#RFC4271" class="xref">section 9.1 of</a> [<a href="#RFC4271" class="xref">RFC4271</a>]</span>. These
 routes include those learned from BGP peers via its Adj-RIBs-In post-policy, as
 well as routes learned by other means as per <span><a href="#RFC4271" class="xref">section 9.4 of</a> [<a href="#RFC4271" class="xref">RFC4271</a>]</span>.
 Examples of these include redistribution of routes from other protocols into BGP
 or otherwise locally originated (ie. aggregate routes).<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">
 As mentioned in <a href="#PeerFlags" class="xref">Section 4.2</a> a subset of Loc-RIB routes MAY be
 sent to a BMP collector by setting the F flag.<a href="#section-5-2" class="pilcrow">¶</a></p>
<section id="section-5.1">
        <h3 id="name-per-peer-header-2">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-per-peer-header-2" class="section-name selfRef">Per-Peer Header</a>
        </h3>
<p id="section-5.1-1">
            All peer messages that include a per-peer header <span><a href="#RFC7854" class="xref">section 4.2 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span>
     MUST use the following values:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.1">
                Peer Type: Set to 3 to indicate Loc-RIB Instance Peer.<a href="#section-5.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.2">
                Peer Distinguisher: Zero filled if the Loc-RIB represents the
                global instance.  Otherwise set to the route distinguisher or
                unique locally defined value of the particular instance the Loc-RIB belongs to.<a href="#section-5.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.3">
 Peer Address: Zero-filled.  Remote peer address is not applicable.
 The V flag is not applicable with Loc-RIB Instance peer type
 considering addresses are zero-filed.<a href="#section-5.1-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.4">
                Peer AS: Set to the primary router BGP ASN.<a href="#section-5.1-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.5">
                Peer BGP ID: Set to the BGP instance global or RD (e.g. VRF)
                specific router-id <span><a href="#RFC7854" class="xref">section 1.1 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span>.<a href="#section-5.1-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-2.6">
 Timestamp: The time when the encapsulated routes were installed in
 The Loc-RIB, expressed in seconds and microseconds since midnight
 (zero hour), January 1, 1970 (UTC).  If zero, the time is unavailable.
 Precision of the timestamp is implementation-dependent.<a href="#section-5.1-2.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<div id="PeerUpNotify">
<section id="section-5.2">
        <h3 id="name-peer-up-notification">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-peer-up-notification" class="section-name selfRef">Peer UP Notification</a>
        </h3>
<p id="section-5.2-1">
                Peer UP notifications follow <span><a href="#RFC7854" class="xref">section 4.10 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span> with the
                following clarifications:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-2.1">
                Local Address: Zero-filled, local address is not applicable.<a href="#section-5.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.2">
                Local Port: Set to 0, local port is not applicable.<a href="#section-5.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.3">
                Remote Port: Set to 0, remote port is not applicable.<a href="#section-5.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.4">
                Sent OPEN Message: This is a fabricated BGP OPEN message.
                Capabilities MUST include the 4-octet ASN and all necessary
                capabilities to represent the Loc-RIB route monitoring messages.
                Only include capabilities if they will be used for Loc-RIB
                monitoring messages.  For example, if add-paths is enabled for
                IPv6 and Loc-RIB contains additional paths, the add-paths
                capability should be included for IPv6.  In the case of add-paths,
                the capability intent of advertise, receive or both can be ignored
                since the presence of the capability indicates enough that add-
                paths will be used for IPv6.<a href="#section-5.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.5">
                Received OPEN Message: Repeat of the same Sent Open Message.  The
                duplication allows the BMP receiver to use existing parsing.<a href="#section-5.2-2.5" class="pilcrow">¶</a>
</li>
        </ul>
<div id="PeerUpInfoTlv">
<section id="section-5.2.1">
          <h4 id="name-peer-up-information">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-peer-up-information" class="section-name selfRef">Peer UP Information</a>
          </h4>
<p id="section-5.2.1-1">
                The following Peer UP information TLV type is added:<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.1-2.1">
              <p id="section-5.2.1-2.1.1">
                Type = 3: VRF/Table Name.  The Information field contains a
                UTF-8 string whose value MUST be equal to the value of the VRF or
                table name (e.g. RD instance name) being conveyed.  The string size
                MUST be within the range of 1 to 255 bytes.<a href="#section-5.2.1-2.1.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-2.1.2">
                The VRF/Table Name TLV is optionally included. For consistency, it
                is RECOMMENDED that the VRF/Table Name always be included.  The
                default value of "global" MUST be used for the default Loc-RIB
                instance with a zero-filled distinguisher.

                If the TLV is included, then it MUST also be included in the Peer Down notification.<a href="#section-5.2.1-2.1.2" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-5.2.1-3">
 Multiple TLVs of the same type can be repeated as part of the same message,
 for example to convey a filtered view of a VRF. A BMP receiver should append
 multiple TLVs of the same type to a set in order to support alternate or
 additional names for the same peer. If multiple strings are included, their
 ordering MUST be preserved when they are reported.<a href="#section-5.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="PeerDownReasonCode">
<section id="section-5.3">
        <h3 id="name-peer-down-notification">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-peer-down-notification" class="section-name selfRef">Peer Down Notification</a>
        </h3>
<p id="section-5.3-1">
            Peer down notification MUST use reason code 6. Following the reason is data
     in TLV format. The following peer Down information TLV type is defined:<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-2.1">
                Type = 3: VRF/Table Name.  The Information field contains a
                UTF-8 string whose value MUST be equal to the value of the VRF or
                table name (e.g. RD instance name) being conveyed.  The string size
                MUST be within the range of 1 to 255 bytes. The VRF/Table Name
 informational TLV MUST be included if it was in the Peer UP.<a href="#section-5.3-2.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<section id="section-5.4">
        <h3 id="name-route-monitoring">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-route-monitoring" class="section-name selfRef">Route Monitoring</a>
        </h3>
<p id="section-5.4-1">
            Route Monitoring messages are used for initial synchronization of
            the Loc-RIB.  They are also used to convey incremental Loc-RIB
            changes.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">
            As defined in <span><a href="#RFC7854" class="xref">section 4.3 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span>, "Following the
     common BMP header and per-peer header is a BGP Update PDU."<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<section id="section-5.4.1">
          <h4 id="name-asn-encoding">
<a href="#section-5.4.1" class="section-number selfRef">5.4.1. </a><a href="#name-asn-encoding" class="section-name selfRef">ASN Encoding</a>
          </h4>
<p id="section-5.4.1-1">
            Loc-RIB route monitor messages MUST use 4-byte ASN encoding as indicated
            in <span><a href="#PeerUpNotify" class="xref">PEER UP sent OPEN message</a> (<a href="#PeerUpNotify" class="xref">Section 5.2</a>)</span> capability.<a href="#section-5.4.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-5.4.2">
          <h4 id="name-granularity">
<a href="#section-5.4.2" class="section-number selfRef">5.4.2. </a><a href="#name-granularity" class="section-name selfRef">Granularity</a>
          </h4>
<p id="section-5.4.2-1">
            State compression and throttling SHOULD be used by a BMP sender
            to reduce the amount of route monitoring messages that are
            transmitted to BMP receivers.  With state compression, only the
            final resultant updates are sent.<a href="#section-5.4.2-1" class="pilcrow">¶</a></p>
<p id="section-5.4.2-2">
            For example, prefix 192.0.2.0/24 is updated in the Loc-RIB 5 times
            within 1 second. State compression of BMP route monitor messages
            results in only the final change being transmitted. The other 4
            changes are suppressed because they fall within the compression
            interval. If no compression was being used, all 5 updates would
            have been transmitted.<a href="#section-5.4.2-2" class="pilcrow">¶</a></p>
<p id="section-5.4.2-3">
            A BMP receiver should expect that Loc-RIB route monitoring granularity
            can be different by BMP sender implementation.<a href="#section-5.4.2-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5.5">
        <h3 id="name-route-mirroring">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-route-mirroring" class="section-name selfRef">Route Mirroring</a>
        </h3>
<p id="section-5.5-1">
            Route mirroring is not applicable to Loc-RIB and Route Mirroring
     messages SHOULD be ignored.<a href="#section-5.5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-5.6">
        <h3 id="name-statistics-report">
<a href="#section-5.6" class="section-number selfRef">5.6. </a><a href="#name-statistics-report" class="section-name selfRef">Statistics Report</a>
        </h3>
<p id="section-5.6-1">
            Not all Stat Types are relevant to Loc-RIB.  The Stat Types that
            are relevant are listed below:<a href="#section-5.6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.6-2.1">
            Stat Type = 8: (64-bit Gauge) Number of routes in Loc-RIB.<a href="#section-5.6-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.6-2.2">
            Stat Type = 10: Number of routes in per-AFI/SAFI Loc-RIB.  The
            value is structured as: 2-byte AFI, 1-byte SAFI, followed by a 64-
            bit Gauge.<a href="#section-5.6-2.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</section>
<section id="section-6">
      <h2 id="name-other-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-other-considerations" class="section-name selfRef">Other Considerations</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-loc-rib-implementation">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-loc-rib-implementation" class="section-name selfRef">Loc-RIB Implementation</a>
        </h3>
<p id="section-6.1-1">
            There are several methods for a BGP speaker to implement Loc-RIB efficiently.
            In all methods, the implementation emulates a peer with Peer UP and DOWN
            messages to convey capabilities as well as Route Monitor messages to
            convey Loc-RIB.  In this sense, the peer that conveys the Loc-RIB is
            a local router emulated peer.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<section id="section-6.1.1">
          <h4 id="name-multiple-loc-rib-peers">
<a href="#section-6.1.1" class="section-number selfRef">6.1.1. </a><a href="#name-multiple-loc-rib-peers" class="section-name selfRef">Multiple Loc-RIB Peers</a>
          </h4>
<p id="section-6.1.1-1">
            There MUST be multiple emulated peers for each Loc-RIB instance, such
            as with VRFs. The BMP receiver identifies the Loc-RIB by the peer
            header distinguisher and BGP ID.  The BMP receiver uses the VRF/Table
            Name from the PEER UP information to associate a name to the Loc-RIB.<a href="#section-6.1.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1.1-2">
            In some implementations, it might be required to have more than one
            emulated peer for Loc-RIB to convey different address families for
            the same Loc-RIB.  In this case, the peer distinguisher and BGP ID
            should be the same since it represents the same Loc-RIB instance.
            Each emulated peer instance MUST send a PEER UP with the OPEN message
            indicating the address family capabilities.  A BMP receiver MUST
            process these capabilities to know which peer belongs to which
            address family.<a href="#section-6.1.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6.1.2">
          <h4 id="name-filtering-loc-rib-to-bmp-re">
<a href="#section-6.1.2" class="section-number selfRef">6.1.2. </a><a href="#name-filtering-loc-rib-to-bmp-re" class="section-name selfRef">Filtering Loc-RIB to BMP Receivers</a>
          </h4>
<p id="section-6.1.2-1">
            There maybe be use-cases where BMP receivers should only receive
            specific routes from Loc-RIB. For example, IPv4 unicast routes may
            include IBGP, EBGP, and IGP but only routes from EBGP should be sent
            to the BMP receiver.  Alternatively, it may be that only IBGP and
            EBGP that should be sent and IGP redistributed routes should be
            excluded.  In these cases where the Loc-RIB is filtered, the F flag
            is set to 1 to indicate to the BMP receiver that the Loc-RIB is
            filtered. If multiple filters are associated to the same Loc-RIB,
 a Table Name MUST be used in order to allow a BMP receiver to make
 the right associations.<a href="#section-6.1.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6.1.3">
          <h4 id="name-changes-to-existing-bmp-ses">
<a href="#section-6.1.3" class="section-number selfRef">6.1.3. </a><a href="#name-changes-to-existing-bmp-ses" class="section-name selfRef">Changes to existing BMP sessions</a>
          </h4>
<p id="section-6.1.3-1">
 In case of any change that results in the alteration of behaviour of
 an existing BMP session, ie. changes to filtering and table names, the
 session MUST be bounced with a Peer DOWN/Peer UP sequence.<a href="#section-6.1.3-1" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">
        The same considerations as in <span><a href="#RFC7854" class="xref">section 11 of</a> [<a href="#RFC7854" class="xref">RFC7854</a>]</span> apply to this
        document. Implementations of this protocol SHOULD require to establish sessions with
        authorized and trusted monitoring devices. It is also believed that this document does
        not add any additional security considerations.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">
        This document requests that IANA assign the following new parameters
        to the <a href="https://www.iana.org/assignments/bmp-parameters/bmp-parameters.xhtml">
        BMP parameters name space</a>.<a href="#section-8-1" class="pilcrow">¶</a></p>
<section id="section-8.1">
        <h3 id="name-bmp-peer-type">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-bmp-peer-type" class="section-name selfRef">BMP Peer Type</a>
        </h3>
<p id="section-8.1-1">
            This document defines a new peer type (<a href="#PeerType" class="xref">Section 4.1</a>):<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1-2.1">
            Peer Type = 3: Loc-RIB Instance Peer<a href="#section-8.1-2.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-8.2">
        <h3 id="name-bmp-peer-flags">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-bmp-peer-flags" class="section-name selfRef">BMP Peer Flags</a>
        </h3>
<p id="section-8.2-1">
            This document defines a new flag (<a href="#PeerFlags" class="xref">Section 4.2</a>) and proposes that peer
            flags are specific to the peer type:<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2-2.1">
            The F flag indicates that the Loc-RIB is filtered.  This indicates
            that the Loc-RIB does not represent the complete routing table.<a href="#section-8.2-2.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-8.3">
        <h3 id="name-peer-up-information-tlv">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-peer-up-information-tlv" class="section-name selfRef">Peer UP Information TLV</a>
        </h3>
<p id="section-8.3-1">
            This document defines the following new BMP PEER UP informational
            message TLV types (<a href="#PeerUpInfoTlv" class="xref">Section 5.2.1</a>):<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.3-2.1">
            Type = 3: VRF/Table Name.
            The Information field contains a UTF-8 string whose value MUST be equal to the
            value of the VRF or table name (e.g. RD instance name) being conveyed.
            The string size MUST be within the range of 1 to 255 bytes.<a href="#section-8.3-2.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-8.4">
        <h3 id="name-peer-down-reason-code">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-peer-down-reason-code" class="section-name selfRef">Peer Down Reason code</a>
        </h3>
<p id="section-8.4-1">
            This document defines the following new BMP Peer Down reason code (<a href="#PeerDownReasonCode" class="xref">Section 5.3</a>):<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.4-2.1">
            Type = 6: Local system closed, TLV data follows.<a href="#section-8.4-2.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</section>
<section id="section-9">
      <h2 id="name-normative-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4271">[RFC4271]</dt>
      <dd>
<span class="refAuthor">Rekhter, Y., Ed.</span><span class="refAuthor">, Li, T., Ed.</span><span class="refAuthor">, and S. Hares, Ed.</span>, <span class="refTitle">"A Border Gateway Protocol 4 (BGP-4)"</span>, <span class="seriesInfo">RFC 4271</span>, <span class="seriesInfo">DOI 10.17487/RFC4271</span>, <time datetime="2006-01" class="refDate">January 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4271">https://www.rfc-editor.org/info/rfc4271</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7854">[RFC7854]</dt>
      <dd>
<span class="refAuthor">Scudder, J., Ed.</span><span class="refAuthor">, Fernando, R.</span><span class="refAuthor">, and S. Stuart</span>, <span class="refTitle">"BGP Monitoring Protocol (BMP)"</span>, <span class="seriesInfo">RFC 7854</span>, <span class="seriesInfo">DOI 10.17487/RFC7854</span>, <time datetime="2016-06" class="refDate">June 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7854">https://www.rfc-editor.org/info/rfc7854</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
    <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="Acknowledgements">
<section id="section-appendix.a">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-appendix.a-1">
        The authors would like to thank John Scudder, Jeff Haas and Mukul Srivastava
 for their valuable input.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.b">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tim Evens</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">2901 Third Avenue, Suite 600</span></div>
<div dir="auto" class="left">
<span class="locality">Seattle</span>, <span class="region">WA</span> <span class="postal-code">98121</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tievens@cisco.com" class="email">tievens@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Serpil Bayraktar</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">3700 Cisco Way</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:serpil@cisco.com" class="email">serpil@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Manish Bhardwaj</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">3700 Cisco Way</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:manbhard@cisco.com" class="email">manbhard@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Paolo Lucente</span></div>
<div dir="auto" class="left"><span class="org">NTT Communications</span></div>
<div dir="auto" class="left"><span class="street-address">Siriusdreef 70-72</span></div>
<div dir="auto" class="left">
<span class="postal-code">2132</span> <span class="locality">Hoofddorp</span>
</div>
<div dir="auto" class="left"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:paolo@ntt.net" class="email">paolo@ntt.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
