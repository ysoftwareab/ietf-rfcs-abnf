 



INTERNET-DRAFT                                              Mingui Zhang
Intended Status: Proposed Standard                              Bin Wang
Expires: June 22, 2014                                         Liang Xia
                                                                  Huawei
                                                       December 19, 2013

                     Tagging Bridge Domains in VPLS
                draft-zhang-l2vpn-vpls-bd-tagging-00.txt

Abstract

   When customers' Bridge Domains (BD) are interconnected using Virtual
   Private LAN Service, traffic of these BDs need be separated. This
   proposal suggests to use the service tag as a further de-multiplexor
   besides Pseudo-Wire to distinguish customers' BDs. Use cases are
   explored in this document.

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html


Copyright and License Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
 


Mingui Zhang, et al      Expires June 22, 2014                  [Page 1]

INTERNET-DRAFT       BD Interconnection Using VPLS     December 19, 2013


   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1. Introduction  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2. Acronyms and Terminology  . . . . . . . . . . . . . . . . . . .  3
     2.1. Acronyms  . . . . . . . . . . . . . . . . . . . . . . . . .  3
     2.2. Terminology . . . . . . . . . . . . . . . . . . . . . . . .  3
   3. Example Network . . . . . . . . . . . . . . . . . . . . . . . .  3
   4. Use Cases . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
     4.1. No Duplicated MAC Address . . . . . . . . . . . . . . . . .  4
     4.2. BUM Traffic Scoped per BD . . . . . . . . . . . . . . . . .  4
     4.3. Scalable Interconnection of L2 Sites  . . . . . . . . . . .  5
     4.4. Per S-tag Pruning and Dynamic VLAN Registration . . . . . .  5
   5. Security Considerations . . . . . . . . . . . . . . . . . . . .  5
   6. IANA Considerations . . . . . . . . . . . . . . . . . . . . . .  5
   7. References  . . . . . . . . . . . . . . . . . . . . . . . . . .  5
     7.1. Normative References  . . . . . . . . . . . . . . . . . . .  5
     7.2. Informative References  . . . . . . . . . . . . . . . . . .  6
   Author's Addresses . . . . . . . . . . . . . . . . . . . . . . . .  7























 


Mingui Zhang, et al      Expires June 22, 2014                  [Page 2]

INTERNET-DRAFT       BD Interconnection Using VPLS     December 19, 2013


1. Introduction

   When VPLS is used to interconnect customers' layer2 networks,
   operators used to establish one VSI for each BD. When there is a
   large number of BDs need be interconnected, for example, in the
   environment of Data Center Networks, a lot of PWs must be set up [V-
   aware]. This kind of solution is not so scalable. 

   This document suggests a service tag is used as an additional de-
   multiplexor of customers' BDs besides PW. By doing this, lots of BDs
   can share the same PW, which can greatly reduce the configuration
   overhead of PWs for operators and make the proposal be scalable. For
   example, if S-VLAN is used as the service tag, as many as 4094 BDs
   can be bundled in one PW.

2. Acronyms and Terminology

2.1. Acronyms

   MVRP: Multiple VLAN Registration Protocol
   BD: Bridge Domain/Broadcast Domain
   PW: Pseudo-Wire
   VSI: Virtual Switch Instance
   S-tag: Service tag
   S-VLAN: Service VLAN
   C-VLAN: Customer VLAN
   BUM: Broadcast, Unknown unicast and Multicast
   VLL: Virtual Leased Line

2.2. Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

3. Example Network












 


Mingui Zhang, et al      Expires June 22, 2014                  [Page 3]

INTERNET-DRAFT       BD Interconnection Using VPLS     December 19, 2013


                   +--------+
       L2 +--------+  BD1   |                  PW
       L2 +--------+Stag=1  +----------------------
       L2 +---+    +--------+
              |
              |  +----------------------+
              |  |            +---+---+ |
              |  | +--------+ |100|PKT| |
              +----+  BD11  | +---+---+ |
       L2 +--------+Stag=100+--------------+
       L2 +      | +--------+           |  |
       L2 +      |            +---+---+ |  |
       L2 +      | +--------+ |200|PKT| |  |
       L2 +--------+  BD12  | +---+---+ |  |   PW
                 | |Stag=200+--------------+--------
                 | +--------+           |  |
                 |            +---+---+ |  |
                 | +--------+ |300|PKT| |  |
       L2 +--------+  BD13  | +---+---+ |  |
       L2 +--------+Stag=300+--------------+
       L2 +      | +--------+           |
       L2 +      |                   VSI|
       L2 +      +----------------------+
       L2 +                                    PW
       L2 +-----------VLL---------------------------

             Figure 3.1: Service tag as the de-multiplexor

   In Figure 3.1, an example is used to shown that service tag is used
   as an finer grained de-multiplexor along with PW for traffic
   segregation. Therefore, multiple BDs can be integrated into one VSI.

4. Use Cases

4.1. No Duplicated MAC Address

   For a specific Customer VLAN (C-VLAN) in different BDs, one MAC may
   be used by different hosts, which is illegal but it is the reality.
   If these BDs share the same PW, hosts in this C-VLAN will join in the
   same bridge domain. It therefore causes the MAC duplication issue.

   If operators use S-tag as the de-multiplexor, traffic of customers'
   BDs are separated. Above MAC duplication issue is avoided.

4.2. BUM Traffic Scoped per BD

   Suppose a customer has four sites in New York, Chicago, Atlanta and
   Dallas. BD1 = {New York, Chicago and Atlanta} while BD2 = {New York,
 


Mingui Zhang, et al      Expires June 22, 2014                  [Page 4]

INTERNET-DRAFT       BD Interconnection Using VPLS     December 19, 2013


   Chicago and Dallas}. If one PW is set up to interconnect customers
   four sites. BUM traffic of Atlanta site will be poured to Dallas
   site, and vice versa.

   When the S-tag is used, the BUM traffic can be confined per BD. For
   above example, the operator need use two S-tags to distinguish the
   two BDs. In this way, BUM traffic of Atlanta site will be confined in
   BD1 and BUM traffic for Dallas site will be confined in BD2. This
   increases the efficiency of the bandwidth utilization of BUM traffic.

4.3. Scalable Interconnection of L2 Sites

   For the per PW bundling, when the connections (topologies) of sites
   in different BDs are different, operators used to set up different
   VSI to distinguish these BDs. The worst case is to set up one VSI per
   BD. This causes the scalability issue when there is a mass of BDs
   need be inter-connected.

   In this document, S-tag is used to distinguish BDs further, operators
   need not set up that many PWs. As shown in Figure 3.1, one PW is set
   up for each VSI and this VSI may be an integration of multiple BDs.

4.4. Per S-tag Pruning and Dynamic VLAN Registration

   Multiple VLAN Registration Protocol (MVRP) can be used for per-
   service-tag registration. For PEs connected by a PW, MVRP is used to
   register service tags configured on customers' BDs. Only when an S-
   tag is registered in both directions on this PW, BUM traffic with
   this S-tag can be transmitted on this PW. In this way, distributions
   trees of the BUM traffic is pruned.

   Since MVRP is used, operators need not reconfigure VLANs on their
   network devices when customers change their VLAN configuration. 

5. Security Considerations

   This document raises no new security issues. For general security
   considerations, refer to [RFC4761] and [RFC4762].

6. IANA Considerations

   This document requires no IANA actions. RFC Editor: please remove
   this section before publication.

7. References 

7.1. Normative References

 


Mingui Zhang, et al      Expires June 22, 2014                  [Page 5]

INTERNET-DRAFT       BD Interconnection Using VPLS     December 19, 2013


   [V-aware] D. Cai, S. Boutros, and et al, "VLAN Aware VPLS services",
             draft-cai-l2vpn-vpls-vlan-aware-bundling-00.txt, working in
             progress

7.2. Informative References

   [RFC4761] Kompella, K., Ed., and Y. Rekhter, Ed., "Virtual Private
             LAN Service (VPLS) Using BGP for Auto-Discovery and
             Signaling", RFC 4761, January 2007.

   [RFC4762] Lasserre, M., Ed., and V. Kompella, Ed., "Virtual Private
             LAN Service (VPLS) Using Label Distribution Protocol (LDP)
             Signaling", RFC 4762, January 2007.



































 


Mingui Zhang, et al      Expires June 22, 2014                  [Page 6]

INTERNET-DRAFT       BD Interconnection Using VPLS     December 19, 2013


Author's Addresses


   Mingui Zhang
   Huawei Technologies
   	
   Email: zhangmingui@huawei.com

   Bin Wang
   Huawei Technologies

   Email: wb.wangbin@huawei.com

   Liang Xia
   Huawei Technologies

   Email: frank.xialiang@huawei.com


































Mingui Zhang, et al      Expires June 22, 2014                  [Page 7]
