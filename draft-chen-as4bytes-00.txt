Network Working Group                                   Enke Chen
Internet Draft                             Redback Networks, Inc.
Expiration Date: May 2001                           Yakov Rekhter
                                                    cisco Systems


               BGP support for four-octet AS number space

                       draft-chen-as4bytes-00.txt


1. Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 except that the right to
   produce derivative works is not granted.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


2. Abstract

   Currently the Autonomous System number is encoded in BGP as a two-
   octets field. This document describes extentions to BGP to carry the
   Autonomous System number as a four-octets field.












draft-chen-as4bytes-00.txt                                      [Page 1]





Internet Draft         draft-chen-as4bytes-00.txt          November 2000


3. Protocol Extensions

   BGP carries the Autonomous System number in the My Autonomous System
   field of the OPEN message, in the AS_PATH attribute of the UPDATE
   message, and in the AGGREGATOR attribute of the UPDATE message.

   A BGP speaker that is capable of supporting 4-octets Autonomous
   System numbers uses BGP Capability Advertisements [BGP-CAP] to
   advertise it to its neighbors (either internal or external). The BGP
   Capability code for the 4-octets Autonomous System number capability
   is [TBD].  The Capability that is used by a BGP speaker to convey to
   its BGP peer the 4-octets Autonomous System number capability carries
   the 4-octets Autonomous System number of the speaker in the
   Capability Value field of the Optional Parameter. The Capability
   Length field of the Capability is set to 4.

   To carry AS path information expressed in terms of 4-octets
   Autonomous Systems numbers, we use the existing AS_PATH attribute,
   except that each AS in this attribute is expressed not as a 2-octets,
   but as a 4-octets entity.  The same applies to the AGGREGATOR
   attribute - we use the same attribute, except that the AS carried in
   this attribute is encoded as a 4-octets entity.

   Currently assigned 2-octets Autonomous System numbers are converted
   into 4-octets Autonomous System numbers by setting the high-order 2
   octets of the 4-octets field to zero.


4. Operations

   A BGP speaker that supports 4-octets Autonomous System numbers may
   advertise this to its peers using the BGP Capability Advertisements.
   A BGP speaker that advertises such capability to a particular peer,
   and receives from that peer the advertisement of such capability MUST
   encode Autonomous System numbers as 4-octets entities in both the
   AS_PATH and the AGGREGATOR attributes in the updates it sends to the
   peer, and MUST assume that these attributes in the updates received
   from the peer encode Autonomous System numbers as 4-octets entities.

   In all other cases the speaker MUST encode Autonomous System numbers
   as 2-octets entities in both the AS_PATH and the AGGREGATOR attribute
   in the updates it sends to the peer, and MUST assume that these
   attributes in the updates received from the peer encoded Autonomous
   System numbers as 2-octets entities.







draft-chen-as4bytes-00.txt                                      [Page 2]





Internet Draft         draft-chen-as4bytes-00.txt          November 2000


5. Transition

   In an ideal case we assume that all the BGP speakers in the Internet
   will become capable of supporting 4-octets Autonomous System numbers
   before we'll exhaust the current (2-octets) Autonomous System number
   space. Assignment of 4-octets Autonomous System numbers would start
   only after we'll exhaust the current Autonomous System number space,
   and thus only after all the BGP speakers in the Internet will become
   capable of supporting 4-octets Autonomous System numbers.

   During the transition a BGP speaker that supports 4-octets Autonomous
   System numbers may have some of its peers capable of supporting 4-
   octets Autonomous System number, and others capable of supporting
   only 2-octets Autonomous System number. In this case the speaker may
   need to convert between the 2 and the 4 octets Autonomous System
   numbers, as a route received from one peer may carry Autonomous
   System numbers encoded as 4 octets, while re-advertising this route
   to other peer may require the speaker to encode Autonomous System
   numbers as 2 octets. Note that as long as no Autonomous System is
   assigned a 4-octets Autonomous System number this conversion is
   straightforward.

   In a less than ideal case we need to assume that not all the BGP
   speakers in the Internet will become capable of supporting 4-octets
   Autonomous System numbers prior to the exhaustion of the current (2-
   octets) Autonomous System number space. In this case conversion from
   4-octets to 2-octets may not be possible for any of the 4-octets
   assigned Autonomous System number. One way to deal with this
   situation is to truncate the AS_PATH information as to exclude all of
   the 4-octets assigned Autonomous System numbers, although doing this
   may result in a formation of forwarding loops.


6. Security Considerations

   Security issues are not discussed in this document.















draft-chen-as4bytes-00.txt                                      [Page 3]





Internet Draft         draft-chen-as4bytes-00.txt          November 2000


7. Acknowledgements

   TBD.


8. References


9. Author Information


   Enke Chen
   Redback Networks, Inc.
   350 Holger Way
   San Jose, CA 95134
   e-mail: enke@redback.com

   Yakov Rekhter
   Cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, CA 95134
   e-mail: yakov@cisco.com





























draft-chen-as4bytes-00.txt                                      [Page 4]


