



MPLS Working Group                                                L. Han
Internet-Draft                                              China Mobile
Intended status: Standards Track                                 F. Yang
Expires: January 14, 2021                            Huawei Technologies
                                                           July 13, 2020


  Signal Degrade Indication Used in Segment Routing over MPLS Network
                        draft-han-mpls-sdi-sr-00

Abstract

   This document describes the typical use cases for signal degrade
   indication used in SR over MPLS networks.  To satisfy the use cases
   and requirements of signal degrade indication, two extensions based
   on the BFD protocol and MPLS-TP OAM mechanisms are given
   respectively.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 14, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Han & Yang              Expires January 14, 2021                [Page 1]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Overview  . . . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  BFD Indication Mechanism  . . . . . . . . . . . . . . . . . .   4
   5.  MPLS-TP Indication Mechanism  . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   7
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   The importance and necessity of signal degrade notification used in
   Segment Routing over MPLS networks is discussed in
   [I-D.yang-mpls-ps-sdi-sr].  When signal degrade is detected, this
   information could be extended by means of protocols to perform the
   performance monitoring, fault management, and trigger of protection
   mechanism etc.  Extensions on control plane, forwarding plane,
   management plane, and/or combination of any of them could be utilized
   to support the function of signal degrade indication.  This document
   provides two protocol extensions used in SR over MPLS networks, by
   specifying the encapsulations and behaviors in detail.

   In some of SR over MPLS networks, BFD [RFC5880] or enhanced SBFD
   [RFC7880] is widely utilized as the failure detection mechanism
   because of its' simplicity and efficiency characteristics.  The
   indication of signal degrade could be adopted as one of the reasons
   of BFD state changes.  In other SR over MPLS networks, MPLS-TP OAM
   [ITU-T G.8113.1] mechanisms are used instead of BFD or SBFD.  In this
   scenario, the extension based on the OAM PDU format is proposed in
   this document to support the signal degarde indication.







Han & Yang              Expires January 14, 2021                [Page 2]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


2.  Terminology

   MPLS: Multiprotocol Label Switching

   SR: Segment Routing

   BFD: Bidirectional Forwarding Detection

   SBFD: Seamless BFD

   LER: Label Edge Router

   LSR: Label Switching Router

   MPLS-TP: Multiprotocol Label Switching - Tranport Profile

   OAM: Operation, Administration and Maintena

   GAL: Generic Associated Channel Label

   G-ACh: Generic Associated Channel (G-ACh)

   PDU: Protocol Data Unit

   CCM: Continuity Check Message

3.  Overview

   The use cases and requirements have been discussed in
   [I-D.yang-mpls-ps-sdi-sr].  This document narrows the scope to the
   multi-hop SR over MPLS network, signal degrade is detected simply
   based on the physical bit error statistic on port level, no matter if
   the PHY is with or without forward error correction (FEC).  Port
   level statistic is the intuitive approach to be best understood in
   the equipment and network systems.  In practice of deployment,
   flexible configuration of the watermark to trigger the indication of
   signal degrade is preferred.

   As mentioned in [I-D.yang-mpls-ps-sdi-sr], signal degrade can happen
   in any link or node in SR over MPLS networks, such as LERs and LSRs.
   LERs can detect the signal degrade fault, or directly trigger the
   protecton switch mechanisms once it detects the signal degrade
   reaches at a certain level.  However, LSRs may need further
   considerations.  In SR over MPLS networks, since only the headend LER
   knows all the segments in the label stack, the intermediate LSRs does
   not know the entire label stack.  There is no other choice of
   forwarding path to avoid the impact of signal degrade on the LSR.
   Thus, the signal degrade information should be spread to other LSRs



Han & Yang              Expires January 14, 2021                [Page 3]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


   and LERs, and consequent behaviors on LSRs or LERs are executed
   depending on the choices of the protection mechanisms.

   The notification mechanism is best used through a forwarding
   protocol, not through the centralized Network Management System (NMS)
   or a SDN controller, to make sure the notification could be fast
   enough.  Furthermore, carrying the signal degrade information in a
   control protocol is considered as well.  In this case, the extensions
   of BFD control packet format and MPLS-TP CCM OAM PDU format are made
   to spread the signal degrade information.

   Though the signal degrade detection is limited to be monitored based
   on the physical link, the indication of signal degrade is preferred
   at the transport path level, e.g.  MPLS PWs, MPLS LSPs, or MPLS
   Sections.  In this case, Generic Associated Channel (G-ACh) defined
   in [RFC5586] is proposed as the best choice to satisfy this
   requirement.  The Generic Associated Channel packet format used in SR
   over MPLS network is shown in Figure 1.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Label                    | EXP |S|      TTL      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             GAL Label (13)            |  TC |S|      TTL      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  0001 |  0000 |    00000000   |         Channel Type          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Figure 1 G-ACh Packet Format in SR over MPLS

4.  BFD Indication Mechanism

   Working together with the G-Ach, IP/UDP/BFD packet formats are
   encapsulated and shown in Figure 2.  The IP, UDP and BFD headers stay
   intact within the generic associated channel.  The Diagnostic code
   specifies the local system's reason for the last change in session
   state.  The definition of the Values is specified in Section 4.1 of
   [RFC5880].  The Reserved values from 9 to 31 can be extended to
   support the signal degrade indication.  The registration to support
   the indication and removal of the signal degrade indication should be
   applied to IANA.









Han & Yang              Expires January 14, 2021                [Page 4]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             GAL Label (13)            |  TC |S|      TTL      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  0001 |  0000 |    00000000   |         Channel Type          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Vers  |  IHL  |      TOS      |           Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            Identifier         | Flag  |    Fragment Offset    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     TTL       |    Prot       |         Header Checksum       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Source Address                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Destination Address                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Source Port          |       Destination Port        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Length            |           Checksum            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Vers |  Diag   |Sta|P|F|C|A|D|M|  Detect Mult  |    Length     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       My Discriminator                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Your Discriminator                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Desired Min TX Interval                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Required Min RX Interval                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                 Required Min Echo RX Interval                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Authentication (optional)                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                Figure 2: BFD Packet Format in SR over MPLS

5.  MPLS-TP Indication Mechanism

   ITU-T G.8113.1 defines the OAM PDU formats used in MPLS-TP networks.
   Figure 3 shows the OAM PDU format used within the SR over MPLS
   networks.  If the LSR node detects the signal degrade, OAM CCM
   message is chosen to indicate the signal degrade via the forwarding
   plane.  The OpCode value 0x01 in OAM PDU field indicates the CCM PDU
   message type.





Han & Yang              Expires January 14, 2021                [Page 5]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             GAL Label (13)            |  TC |S|      TTL      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  0001 |  0000 |    00000000   |         Channel Type          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | MEL | Version |  OpCode(0x01) |     Flag      |  TLV Offset   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           OAM PDU                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |End TLV|
      +-+-+-+-+

             Figure 3 G.8113.1 OAM PDU Format in SR over MPLS

   The reservation bits in Flag format in CCM OAM PDU message can be
   used as the error notification indication (EI) to indicate signal
   degrade, as shown in Figure 4.  LSRs fills the EI field and transmits
   the OAM message to the other LSRs or LERs so that the degrade
   information can be learned.

                       0
                       0    1   2   3   4   5   6   7
                      +---+---+---+---+---+---+---+---+
                      |RDI| EI|   Resv    |  Period   |
                      +---+---+---+---+---+---+---+---+

                      Figure 4 Extended Flags Format

   EI (1 bit): Error notification indication, 0 indicates no error, 1
   indicates error, to notify the signal degradation error.

6.  IANA Considerations

   The document requires the definition of the new indication and
   removal of the signal degrade indication in BFD Value code.
   Moreover, the EI bit definition is required to be assigned by ITU-T.

7.  Security Considerations

   This document has no security consideration.

8.  Acknowledgements

   TBD





Han & Yang              Expires January 14, 2021                [Page 6]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

9.2.  Informative References

   [I-D.yang-mpls-ps-sdi-sr]
              Yang, F., Han, L., and J. Zhao, "Problem Statement of
              Signal Degrade Indication for Segment Routing over MPLS
              Network", draft-yang-mpls-ps-sdi-sr-00 (work in progress),
              March 2020.
			  
   [ITU-T_G8113.1]
              ITU-T, "ITU-T G.8113.1: Operations, administration 
			  and maintenance mechanisms for MPLS-TP in packet 
			  and maintenance mechanisms for MPLS-TP in packet 
			  transport networks", April 2016.

   [RFC5586]  Bocci, M., Ed., Vigoureux, M., Ed., and S. Bryant, Ed.,
              "MPLS Generic Associated Channel", RFC 5586,
              DOI 10.17487/RFC5586, June 2009,
              <https://www.rfc-editor.org/info/rfc5586>.

   [RFC5880]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", RFC 5880, DOI 10.17487/RFC5880, June 2010,
              <https://www.rfc-editor.org/info/rfc5880>.

   [RFC7880]  Pignataro, C., Ward, D., Akiya, N., Bhatia, M., and S.
              Pallagatti, "Seamless Bidirectional Forwarding Detection
              (S-BFD)", RFC 7880, DOI 10.17487/RFC7880, July 2016,
              <https://www.rfc-editor.org/info/rfc7880>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Liuyan Han
   China Mobile
   No.32 Xuanwumen west street
   Beijing 100053
   China

   Email: hanliuyan@chinamobile.com






Han & Yang              Expires January 14, 2021                [Page 7]

Internet-Draft          draft-han-mpls-sdi-sr-00               July 2020


   Fan Yang
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing 100095
   China

   Email: shirley.yangfan@huawei.com












































Han & Yang              Expires January 14, 2021                [Page 8]
