   Internet Engineering Task Force                        Martin Wakley 
   Internet Draft                                      Tania Sassenberg 
   Document: draft-wakley-mgcp-extalpkg-00.txt          Nortel Networks 
   Category: Informational                                December 2001 
 
 
                     MGCP Extended Analog Line Package 
 
Status of this Memo 
 
   This document is an Internet-Draft and is in full conformance 
   with all provisions of Section 10 of RFC2026 [1]. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time.  It is inappropriate to use Internet-Drafts as 
   reference material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
 
1. Abstract 
    
   This document provides proposed definitions for a supplemental 
   package for MGCP. This package addresses support of functionality 
   for standard and enhanced telephony services delivered over analogue 
   line terminations, specifically line/tip & ring polarity reversal. 
   The package is defined with the intention of adding further line 
   supervision signals at a later date. 
    
    
2. Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",  
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in  
   this document are to be interpreted as described in RFC2119 [2]. 
    
    
3. Document Organization 
    
   The subsequent text in this document is organized into the following  
   major sections: 
    
   * Introduction 
   * Description of the Extended Analog Line Supervision Package 
   * Use Cases, Example Call Flows 
   * References 
   * Author's address 
     
   Wakley         Informational - Expires July 2002          [Page 1] 
                  MGCP Extended Analog Line Package       December 2001 
                     
    
4. Introduction 
    
   The Basic MGCP Line Package defined in RFC2705 [3] supports basic 
   telephony services, using on-hook and off-hook events and ringing 
   signals. Some telephony services delivered over analog line 
   terminations have additional supervisory signalling requirements 
   that are not met by this package. The package defined in this 
   document is intended to meet the needs of the following supervisory 
   signalling functions: 
    
      Line Reversal û Line reversal consists of reversing the polarity 
      of the tip/ring leads (GND becomes û48V and û48V switches to GND). 
      There are two ways in which line reversal is often used: 
    
         1. Line reversal on seizure û This is used to prevent a glare 
            condition when a call is originating from a line at the same 
            time that a call is terminating to the line. The line 
            reversal signal is applied on seizure to the terminating/ 
            called party followed by ringing and maintained until the 
            line is answered. Once reversal has been applied the line 
            cannot attempt a simultaneous origination. 
          
         2. Line reversal on answer û In this case line reversal will be 
            applied to the originating party to control electronic 
            equipment such as coin phones or answering machines. The 
            line reversal signal acts as a stimulus to the equipment to 
            perform specific actions such as dropping coins or 
            activating the answering machine. 
          
       
5. Extended Analog Line Supervision Package 
    
   PackageID: XL 
   Version:   1 
    
   This package is a new MGCP package. In it's first version, only one 
   new signal is defined: Line Reversal. 
    
   Signals MUST always be prefixed with the "XL" package name. 
    
   5.1 Properties 
    
   None. 
    
   5.2 Events 
    
   None. 
    
   5.3 Signals 
    
   Line Reversal 
    
      SignalID: XL/rev 
     
   Wakley         Informational - Expires July 2002          [Page 2] 
                  MGCP Extended Analog Line Package       December 2001 
                                    
       
      This signal activates or switches off line reversal on an endpoint 
      (line). The gateway shall reverse the polarity of the tip and ring 
      wires for that line (or return it to normal), immediately after 
      the signal is received (whatever call processing state the line is 
      currently in). 
       
      Signal Type: OnOff (+) or (-) 
 
   5.4 Statistics 
    
   None. 
    
   5.5 Procedures 
    
   A specific line reversal signal is needed in order for the call agent 
   to have full control of the line polarity states. This enables the 
   call agent to control both line reversal on answer and line reversal 
   on seizure using one MGCP signal. This approach maps well to the 
   legacy method of setting/resetting a data flag to indicate line 
   reversal state. 
    
   Media gateways can then provide both support for the full control of 
   line reversal using the new XL/rev signal and support direct 
   supervision signals such as 'lsa' (line-side answer), which will 
   typically involve a line-reversal being applied by the media gateway. 
   In the latter case, the implementation of the supervision is left to 
   the media gateway (so it could be provisioned based on market/country 
   for instance). The new signal provides a method for the call agent to 
   have full control over the line reversal state. 
    
    
6. Use Cases, Example Call Flows 
    
   6.1 Line Reversal 
    
   6.1.1 Line Reversal on Seizure 
    
   The call agent seizes the terminating line by applying the line 
   reversal signal: 
       RQNT 311 aaln/1@mg23.whatever.net MGCP 1.0  
       X: 880 
       S: XL/rev(+) 
    
   The endpoint confirms: 
       200 311 OK 
    
   Now the call agent can apply ringing: 
       RQNT 312 aaln/1@mg23.whatever.net MGCP 1.0 
       X: 881 
       S: L/rg 
       R: L/hd(N) 
       Q: loop 
    
     
   Wakley         Informational - Expires July 2002          [Page 3] 
                  MGCP Extended Analog Line Package       December 2001 
                                    
   The endpoint confirms: 
       200 312 OK 
    
   When the line answers a call: 
       NTFY 3132 aaln/1@mg23.whatever.net MGCP 1.0 
       X: 4564 
       O: L/hd 
    
   The call agent then instructs the gateway to switch off line 
   reversal: 
       RQNT 313 aaln/1@mg23.whatever.net MGCP 1.0  
       X: 882 
       S: XL/rev(-) 
    
   The endpoint confirms: 
       200 313 OK 
    
    
   6.1.2 Line Reversal on Answer 
    
   The called party has answered, so the call agent sends the line 
   reversal signal to the originating party: 
       RQNT 322 aaln/1@mg23.whatever.net MGCP 1.0  
       X: 867 
       S: XL/rev(+) 
    
   The endpoint confirms: 
       200 322 OK 
    
   Later, the call agent instructs the gateway to switch off line 
   reversal: 
       RQNT 329 aaln/1@mg23.whatever.net MGCP 1.0  
       X: 868 
       S: XL/rev(-) 
    
   The endpoint confirms: 
       200 329 OK 
 
 
   6.3 Audit Endpoint 
 
   The state of On/Off signals is an auditable property. If the Audit 
   Endpoint command asks for currently applied signal requests, the 
   endpoint MUST return a list of the On/Off signals that are currently 
   "on" for the endpoint (with or without parameters). 
    
   The Call Agent audits the endpoint: 
       AUEP 361 aaln/1@mg23.whatever.net MGCP 1.0 
       F: S 
    
   The response indicates that line reversal signal is on: 
       200 361 OK 
       S: XL/rev(+) 
    
     
   Wakley         Informational - Expires July 2002          [Page 4] 
                  MGCP Extended Analog Line Package       December 2001 
                                    
       
7. Formal Syntax 
 
   Not applicable. 
    
 
8. Security Considerations 
 
   Not applicable. 
 
 
9. Terms 
 
   Ring & Tip:  The two copper wires that make up a standard analogue 
   telephone line. Also sometimes referred to as the A & B wires. When 
   line reversal is not active, the tip or A wire has a voltage of 0v 
   or GND, whilst the ring or B wire has a voltage of û48v. 
    
    
10. Other Documents of Interest 
 
   Internet Draft draft-taylor-megaco-enhalpkgs-00.txt [4] describes an 
   Extended Analog Line Supervision package for H.248/MEGACO. This 
   defines signals for Line-side Answer Supervision and Network 
   Disconnect.  These signals have not been included in this XL package 
   definition as they is already included ('lsa' and 'osi') in the MGCP 
   Basic Line Package defined in Internet Draft draft-foster-mcgp-basic-
   packages-02.txt [5]. 
    
11. Acknowledgement 
 
   Thanks goes to Bill Foster for his guidance, comments and general 
   input to this document. 
    
12. References 
    
   1  Bradner, S., "The Internet Standards Process -- Revision 3", BCP  
      9, RFC 2026, October 1996. 
    
   2  RFC 2119 Bradner, S., "Key words for use in RFCs to Indicate 
      Requirement Levels", BCP 14, RFC 2119, March 1997 
    
   3  Arango, Dugan, Elliot, Huitema, Pickett, Foster, Andreasen, Media 
      Gateway Control Protocol (MGCP) Version 1.0bis, Work in Progress, 
      draft-andreasen-mgcp-rfc2705bis-01.txt, Internet Engineering Task 
      Force, May 2001 
    
   4  Taylor,  Brown, CopperCom, Nortel Networks, Megaco/H.248 Enhanced 
      Analog Line Packages, Work in Progress, draft-taylor-megaco-
      enhalpkgs-00.txt, Internet Engineering Task Force, April 2001 
    
 
     
   Wakley         Informational - Expires July 2002          [Page 5] 
                  MGCP Extended Analog Line Package       December 2001 
                                    
    
   5  Arango, Dugan, Elliot, Huitema, Pickett, Foster, Andreasen, Basic 
      MGCP Packages, Work in Progress, draft-foster-mgcp-basic-
      packages-02.txt, Internet Engineering Task Force, August 2001 
    
    
13. Author's Addresses 
    
   Martin Wakley 
   Nortel Networks 
   Concorde Road 
   Norreys Drive 
   Maidenhead 
   Berkshire, UK               Phone:  +44 (0) 1628 431579 
   SL6 2RP.                    Email:  mwakley@nortelnetworks.com 
    
    
   Tania Sassenberg            Phone:  (919) 991-2341 
                               Email:  tanisas@nortelnetworks.com 
    
     
   Wakley         Informational - Expires July 2002          [Page 6] 