
 
 
 
  
  
  
DIME Working Group        
Internet-Draft                                       Vishnu Ram  
Expires: February, 2007                              Satendra Gera 
                                                     September, 2006     
                                  
                 
                 
       Diameter base loop avoidance Extension  
       draft-vishnu-diameter-loop-avoidance-ext-00.txt  
  
Status of this Memo  
  
   By submitting this Internet-Draft, each author represents that any  
   applicable patent or other IPR claims of which he or she is aware  
   have been or will be disclosed, and any of which he or she becomes  
   aware will be disclosed, in accordance with Section 6 of BCP 79.  
  
   Internet-Drafts are working documents of the Internet Engineering  
   Task Force (IETF), its areas, and its working groups.  
   Note that other groups may also distribute working documents as  
   Internet-Drafts.  
  
   Internet-Drafts are draft documents valid for a maximum of six months  
   and may be updated, replaced, or obsoleted by other documents at any  
   time.  It is inappropriate to use Internet-Drafts as reference  
   material or to cite them other than as "work in progress."  
  
   The list of current Internet-Drafts can be accessed at  
   http://www.ietf.org/ietf/1id-abstracts.txt.  
  
   The list of Internet-Draft Shadow Directories can be accessed at  
   http://www.ietf.org/shadow.html.  
  
   This Internet-Draft will expire on February 2007.  
  
Copyright Notice  
  
   Copyright (C) The Internet Society (2006).  
  
Abstract  
   The Diameter base protocol which is intended to provide   
   Authentication, Authorization and Accounting (AAA) framework for   
   applications (such as network access) is specified in [RFC 3588].   
   [RFC 3588] specifies a loop detection mechanism which handles   
   looped messages at the intermediate diameter agent nodes.      
    


 
 
Vishnu et al.,            Expires - March 2007          [Page 1] 

Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
   This draft discusses a possible loop avoidance mechanism for diameter  
   request messages. 
    
 
Conventions used in this document  
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",  
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this  
   document are to be interpreted as described in [RFC2119].  
  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
  
  
 
 
 
 
 
 







 
 
Vishnu et al.,            Expires - March 2007          [Page 2] 


Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
 
Table of Contents  
  
   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3  
   2.  Problem statement. . . . . . . . . . . . . . . . . . . . . . .  3  
   3.  Diameter loop avoidance  . . . . . . . . . . . . . . . . . . .  4  
   5.  Backward compatibility . . . . . . . . . . . . . . . . . . . .  5  
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  5  
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . .  5  
   8.  Normative References . . . . . . . . . . . . . . . . . . . . .  6  
   9.  Informative References . . . . . . . . . . . . . . . . . . . .  6  
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  7  
   Intellectual Property and Copyright Statements . . . . . . . . . .  8  
   Disclaimer of Validity . . . . . . . . . . . . . . . . . . . . . .  8  
   Copyright Statement  . . . . . . . . . . . . . . . . . . . . . . .  8  
   Acknowledgment . . . . . . . . . . . . . . . . . . . . . . . . . .  8  
     
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

 
 
Vishnu et al.,            Expires - March 2007          [Page 3] 

Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
1.  Introduction  
  
   Section 6.1.3 of [RFC3588], specifies a loop detection mechanism  
   which can detect looped messages at the intermediate diameter nodes.      
   This draft discusses a loop avoidance mechanism for Diameter request  
   messages which shall be used in addition to the loop detection  
   mechanism. 
    
2. Problem statement   
    
   Loop detection mechanism specified in Section 6.1.3 of [RFC3588] has 
   the following drawbacks: 
     i.   It does not provide loop avoidance mechanism. In the absence  
            of agents which corrects the error and retries, potential  
            successful routes to the destination might not be tried even 
            if one exists. 
     ii.  No recovery mechanism is specified, [RFC 3588] seems to  
           suggest only a manual or administrative correction.  
                
3. Diameter loop avoidance 
    
   Before forwarding or routing a request, Diameter agents, in addition 
   to processing in 6.1.3 of [RFC 3588], SHOULD check for the presence 
   of candidate peer's identity in any of the Route-Record AVPs.   
   In an event of the agent detecting the presence of a candidate peer's  
   identity in a Route-Record AVP, the agent MUST ignore such a  
   candidate peer for routing the Diameter request message.  
   In case all the candidate peers are eliminated by the above criteria 
   the agent SHOULD return DIAMETER_UNABLE_TO_DELIVER message.   
   The following figures describe a scenario where Diameter loop  
   avoidance may help. 
                    



















 
 
Vishnu et al.,            Expires - March 2007          [Page 4] 


Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
                   ___________ 
                  |Destination|   
                  |           |  
                  |___________|              
                   ^                ______________ 
                   |               |  Relay 1     | 
                   |               |              | 
                   |               |______________| 
                   |                ^     ^      ^ 
                   |                |     |      | 
                   |                |     |      |         
                   |     __________v      |     _v_________ 
                   |    |  Relay 2  |     |    |  Origin   | 
          _________v    |           |     |    |           | 
         | Relay 4  |   |___________|     |    |___________| 
         |          |              ^      | 
         |__________|<-------      |      |  
                             |     |      | 
                             |     |      | 
                             |     v______v___ 
                              --> | Relay 3   | 
                                  |           | 
                                  |___________| 
      
      Figure 1 Deployment (Arrow show Diameter connections)    
---------x---------------x--------------x------------x----------- 
      ___________ 
     |Destination| 
     |           | 
     |___________|            ______________ 
                             |  Relay 1     | 
                             |              | 
                             |______________| 
                          Msg1|   ^(Loop-  ^ 
                 ( RR- Origin)|   | ed)    |Msg1  
                    __________v   |     ___|_______ 
                   |  Relay 2  |  |    |  Origin   | 
     __________    |           |  |    |           | 
    | Relay 4  |   |___________|  |    |___________| 
    |          |           Msg1|  |Msg1      
    |__________|   (RR- Origin)|  |(RR- Origin)  
                   (RR- Relay1)|  |(RR- Relay1) 
                               |  |(RR- Relay2)  
                             __v__|_____ 
                            | Relay 3   | 
                            |           | 
                            |___________| 
  
      Figure 2 Possible message path without loop avoidance  
------------x------------x----------------x------------x------------- 
           

 
 
Vishnu et al.,            Expires - March 2007          [Page 5] 

Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
      ___________ 
     |Destination| 
     |           | 
     |___________|        
        Msg1^                     ______________ 
(RR- Origin)|                    |  Relay 1     | 
(RR- Relay1)|                    |              | 
(RR- Relay2)|                    |______________| 
(RR- Relay3)|                Msg1 |           ^ 
            |        ( RR- Origin)|           |Msg1  
            |           __________v         __|________ 
            |          |  Relay 2  |       |  Origin   | 
       _____|____      |           |       |           | 
      | Relay 4  |     |___________|       |___________| 
      |          |<--          Msg1|   
      |__________|   | (RR- Origin)|   
                     | (RR- Relay1)|   
                     |             |   
                     |          ___v_______ 
                      ---------| Relay 3   | 
                           Msg1|           | 
                   (RR- Origin)|___________| 
                   (RR- Relay1) 
                   (RR- Relay2)  
 
 
      Figure 3 Message path with loop avoidance  
 
------------x------------x----------------x------------x------------- 
 
   Explained mechanism will result in: 
   i. Better probability of delivery for diameter request  
      messages as the message will be delivered if there exists  
      at least one path to the destination which does not include a 
      loop. 
   ii. Saving the round-trip to peers which detect loop. 
     
5. Backward compatibility 
   This drafts describes a loop avoidance mechanism which is in addition  
   to the loop detection mechanism described in [RFC 3588]. If a  
   deployment has a node which doesn't support preventive loop avoidance 
   ,the node may end up passing a request message to an already  
   traversed node and the scenario will fall back to the one described  
   in [RFC 3588].       
     
6. IANA Considerations 
   None 
     
7. Security Considerations  
 
   This document does not contain a security protocol; it describes  

 
 
Vishnu et al.,            Expires - March 2007          [Page 6] 

Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
   extensions to the existing Diameter protocol.  All security issues of  
   DIAMETER protocol must be considered in implementing this   
   specification.  This extension does not add any unique concerns.  
  
8.  Normative References  
  
   [RFC2119]   Bradner, S., "Key words for use in RFCs to Indicate  
               Requirement Levels", BCP 14, RFC 2119, March 1997.            
  
   [RFC3588]   Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J.  
               Arkko, "Diameter Base Protocol", RFC 3588,   
               September 2003.  
  
   [IANA]      Narten, T. and H. Alvestrand, "Guidelines for Writing  
               an IANA Considerations Section in RFCs", BCP 26, RFC  
               2434, October 1998.  
  
   [IANAADFAM] IANA; "Address Family Numbers",  
               http://www.iana.org/assignments/address-family-numbers  
  
   [IANAWEB]   IANA, "Number assignment", http://www.iana.org  
  
  
9. Informative References   
  
   [AAAREQ]       Aboba, B., Calhoun, P., Glass, S., Hiller, T., McCann,  
                  P., Shiino, H., Zorn, G., Dommety, G., Perkins, C.,  
                  Patil, B., Mitton, D., Manning, S., Beadles, M.,  
                  Walsh, P., Chen, X., Sivalingham, S., Hameed, A.,  
                  Munson, M., Jacobs, S., Lim, B., Hirschman, B., Hsu,  
                  R., Xu, Y., Campbell, E., Baba, S. and E. Jaques,  
                  "Criteria for Evaluating AAA Protocols for Network  
                  Access", RFC 2989, November 2000.  
  
   [AAATRANS]     Aboba, B. and J. Wood, "Authentication, Authorization  
                  and Accounting (AAA) Transport Profile", RFC 3539,  
                  June 2003.  
  
  
  
  
  
  
  
 
 
 
 
 
 
  

 
 
Vishnu et al.,            Expires - March 2007          [Page 7] 

Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
Authors' Addresses  
  
   Vishnu Ram   
   Motorola   
   66/1, Bagmane Tech Park,    
   C V Raman Nagar, Bangalore, 560093   
   vishnu@motorola.com   
      
   Satendra Gera  
   Motorola   
   66/1, Bagmane Tech Park,    
   C V Raman Nagar, Bangalore, 560093   
   in1236c@motorola.com 
       
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
  
  












 
 
Vishnu et al.,            Expires - March 2007          [Page 8] 


Internet-Draft   Diameter predictive loop avoidance ext September 2006 
 
 
Intellectual Property Statement  
  
   The IETF takes no position regarding the validity or scope of any  
   Intellectual Property Rights or other rights that might be claimed to  
   pertain to the implementation or use of the technology described in  
   this document or the extent to which any license under such rights  
   might or might not be available; nor does it represent that it has  
   made any independent effort to identify any such rights.  Information  
   on the procedures with respect to rights in RFC documents can be  
   found in BCP 78 and BCP 79.  
  
   Copies of IPR disclosures made to the IETF Secretariat and any  
   assurances of licenses to be made available, or the result of an  
   attempt made to obtain a general license or permission for the use of  
   such proprietary rights by implementers or users of this  
   specification can be obtained from the IETF on-line IPR repository at  
   http://www.ietf.org/ipr.  
  
   The IETF invites any interested party to bring to its attention any  
   copyrights, patents or patent applications, or other proprietary  
   rights that may cover technology that may be required to implement  
   this standard.  Please address the information to the IETF at  
   ietf-ipr@ietf.org.  
  
  
Disclaimer of Validity  
  
   This document and the information contained herein are provided on an  
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS  
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET  
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,  
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE  
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED  
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  
  
  
Copyright Statement  
  
   Copyright (C) The Internet Society (2006).  This document is subject  
   to the rights, licenses and restrictions contained in BCP 78, and  
   except as set forth therein, the authors retain all their rights.  
  
  
Acknowledgment  
  
   A significant contribution to this draft was made by Liyaqatali 
   G. Nadaf.  
  
 
 


 
 
Vishnu et al.,            Expires - March 2007          [Page 9] 


