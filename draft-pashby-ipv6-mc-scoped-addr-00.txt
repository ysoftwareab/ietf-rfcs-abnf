Network Working Group	R. Pashby
Internet Draft	Bowhead Support 
Document: draft-pashby-ipv6-mc-scoped-addr-00.txt	July 2005
Expires: January 2006 

Multicast Scoped Address Assignment Guidance
draft-pashby-ipv6-mc-scoped-addr-00.txt

Status of this Memo

By submitting this Internet-Draft, each author represents that any 
applicable patent or other IPR claims of which he or she is aware 
have been or will be disclosed, and any of which he or she becomes 
aware will be disclosed, in accordance with Section 6 of BCP 79.

Internet-Drafts are working documents of the Internet Engineering 
Task Force (IETF), its areas, and its working groups.  Note that 
other groups may also distribute working documents as Internet-
Drafts.

Internet-Drafts are draft documents valid for a maximum of six 
months and may be updated, replaced, or obsoleted by other 
documents at any time.  It is inappropriate to use Internet-Drafts 
as reference material or to cite them other than as "work in 
progress."

The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt.

The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html.

This Internet-Draft will expire on January 2006.

Abstract

The purpose of this document is to define IPv6 Multicast Id ranges 
that will not allow overlap between dynamically assigned global 
scoped addresses and dynamically assigned non-global scoped 
addresses, specifically dynamically assigned link-local scoped 
addresses.

[RFC3307] defines IPv6 Multicast Group ID ranges for the following 
Permanent Addresses, Permanent Identifiers and Dynamic Addresses. 
However, there are certain multicast addresses that need to be 
assigned for closed systems that should not collide with the Group 
IDs used within the Internet. 

This document further defines the Dynamic Addresses into two ranges 
Dynamically Assigned Global (DAG) addresses and Dynamically 
Assigned Non-Global (DANG) addresses. The DANG range is further 
broken down to Dynamically Assigned Link-Local (DALL) addresses and 
the rest reserved for future. Future uses might be for Site-Local 
Scoped and Organization Scoped ranges. The DALL range may be used 
to simplify the design of MLD Snooping layer 2 switches.

[RFC3171] defines the Local Network Control Block address range for 
IPv4. A similar range should be defined to possibly simplify the 
design of MLD Snooping layer 2 switches. 

Table of Contents:

1.	Introduction
2.	Applicability
3.	Multicast Group ID Assignment Guidelines
4.	Modifications to RFC3307
5.	Security Considerations
6.	IANA Considerations
7.	Acknowledgments
8.	References
9.	Author's Information


1. Introduction

The purpose of this document is to define IPv6 Multicast Id ranges 
that will not allow overlap between dynamically assigned global 
scoped addresses and dynamically assigned non-global scoped 
addresses, specifically dynamically assigned link-local scoped 
addresses.

[RFC3307] defines IPv6 Multicast Group ID ranges for the following 
Permanent Addresses, Permanent Identifiers and Dynamic Addresses. 
However, there are certain multicast addresses that need to be 
assigned for closed systems that should not collide with the Group 
IDs used within the Internet. 

This document further defines the Dynamic Addresses into two ranges 
Dynamically Assigned Global (DAG) addresses and Dynamically 
Assigned Non-Global (DANG) addresses. The DANG range is further 
broken down to Dynamically Assigned Link-Local (DALL) addresses and 
the rest reserved for future. Future uses might be for Site-Local 
Scoped and Organization Scoped ranges. The DALL range may be used 
to simplify the design of MLD Snooping layer 2 switches.

It is understood that there is the Scope field in the IPv6 address, 
however the issue here is keeping unique ranges that are guaranteed 
not to overlap at the link-layer. Link-layer uniqueness is critical 
within organizations because most of the multicast will be 
controlled via layer 2 switches.

Given the definitions in [RFC3307] the new ranges should be 
assigned from the currently defined Dynamically Assigned Addresses, 
since they are not Permanently Assigned Addresses (from the 
Internet perspective). 

- Dynamically Assigned Global (DAG) Addresses
- Dynamically Assigned Non-Global (DANG) Addresses
-	Reserved Dynamically Assigned Non-Global Addresses
-	Dynamically Assigned Link-Local (DALL) Addresses

The Solicited Node Multicast Addresses will fall into the last 
range.

[RFC3171] also defines the Local Network Control Block (LNCB) 
address range for IPv4. A similar range should be defined to 
possibly simplify the design of MLD Snooping layer 2 switches, as 
defined by [mldsnoop]. This [mldsnoop] document also recommends 
that the DANG and LNCB addresses be forwarded to all layer 2 ports 
on a MLD snooping switch.

2. Applicability

These guidelines are to be used in any environment in which IPv6 
multicast addresses are delegated, assigned, or selected.  They are 
critical to be used where overlap of multiple multicast flows can 
happen on layer 2 switches.

3. Multicast Group ID Assignment Guidelines

3.1 Permanent Assigned Addresses

The range specified for Permanent Assigned Addresses is 0x00000001 
û 0x3FFFFFFF. This is the same as defined in RFC3307.

3.1.1 Local Network Control Block

The range specified for Local Network Control Block is 0x00000001 û 
0x000000FF. There is a related document [snoop] that recommends 
that this range be sent to every interface on a layer 2 switches 
that supports MLD snooping [mldsnoop].

3.2 Permanent Assigned IDs

The range specified for Permanent Assigned Identifiers is 
0x40000000 û 0x7FFFFFFF. This is the same as defined in RFC3307.

3.3 Dynamically Assigned Addresses

This range was previously defined in RFC3307 but called Dynamic 
IPv6 Multicast Addresses. It is broken down into the following 
ranges.

3.3.1 Dynamically Assigned Global Scoped Addresses

This range would be used for Scope field values 9 û E.

The range specified for Dynamically Assigned Global Scoped 
Addresses 0x80000000 û 0xBFFFFFFF. This range was selected to 
provide the largest range of addresses for dynamic allocation.

3.3.2 Dynamically Assigned Non-Global Addresses

This range would be used for Scope field values 1-8.

The range specified for Dynamically Assigned Non-Global Scoped 
Addresses 0xC0000000 û 0xFFFFFFFF. 

3.3.2.1 Reserved Dynamically Assigned Non-Global Addresses

This range is reserved for future use. Possible future use would be 
for Site-Local Scoped and Organization Scoped addresses. The range 
is 0xC0000000 û 0xEFFFFFFF. 


3.3.2.2 Dynamically Assigned Link-Local Addresses

The range for Dynamically Assigned Link-Local Scoped Addresses is 
0xF0000000 û 0xF0FFFFFF. This range was chosen so that it would 
include the Solicited Node Multicast Addresses 0xFF000000 û 
0xFFFFFFFF. There is a related document [snoop] that recommends 
that this range be sent to every interface on a layer 2 switches 
that supports MLD snooping [mldsnoop].

4. Modifications to RFC3307

4.1	Permanent IPv6 Multicast Addresses (section 4.1)

Add the definitions of the LCNB ranges as defined above.

4.2	Dynamic IPv6 Multicast Addresses (section 4.3)

Add the definitions of the DAG and DANG ranges as defined above.

4.3	Server Allocation (section 4.3.1)

Change the range from 0x80000000 û 0xFFFFFFFF to 0x80000000 û 
0xBFFFFFFF.

4.4	Host Allocation Section (section 4.3.2)

Replace the last sentence with:
This can be accomplished by setting the high-order two bits of the 
generated number to 10 (binary).

5. Security Considerations

The allocation mechanisms described in this document do not alter 
the security properties of either the Any Source or Source Specific 
multicast service models of IPv4 and IPv6.

The potential to allocate large blocks of addresses can lead to 
Denial-of-Service attacks.  A more in-depth discussion of the 
security issues surrounding dynamic allocation of multicast 
addresses can be found in [RFC 2908].

6. IANA Considerations

This document defines the new LNCB range that IANA needs to assure 
that addresses assigned in this range are for Link-local Network 
Control.

7. Acknowledgments

Brian Haberman, John Hopkins University
Karen O'Donoghue, US Department of Navy

8. References

[RFC3307]	Haberman, B., "Allocation Guidelines for IPv6 Multicast 
Addresses", RFC3307, August 2002
[RFC3171]	Albanna, Z., Almeroth, K., Meyer, D., Schipper, M., "IANA 
Guidelines for IPv4 Multicast Address Assignments", 
RFC3171, August 2001
[mldsnoop]	Pashby, R., "Simplifying IPv6 MLD Snooping Switches", 
draft-pashby-maga-simplify-mld-snooping-00, July 2005

9. Author's Information

Ronald Pashby
Bowhead Support Services
Ronald.Pashby.ctr@navy.mil
(540) 653-6070


Copyright (C) The Internet Society (2005)

This document is subject to the rights, licenses and restrictions 
contained in BCP 78, and except as set forth therein, the authors retain 
all their rights.  
 
This document and the information contained herein are provided on an 
"AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS OR 
IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET 
ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, 
INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE 
INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

