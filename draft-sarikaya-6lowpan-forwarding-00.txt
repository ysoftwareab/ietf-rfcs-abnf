


Network Working Group                                        B. Sarikaya
Internet-Draft                                    Futurewei Technologies
Expires: August 24, 2006                               February 20, 2006


 Serial forwarding approach to connecting TinyOS-based sensors to IPv6
                                Internet
                  draft-sarikaya-6lowpan-forwarding-00

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 24, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This document describes a simple approach to interconnect IEEE
   802.15.4 sensor nodes to IPv6 Internet.  The technique requires a
   gateway node that is connected to both the sensor network and the
   IPv6 Internet.  The gateway node runs the serial forwarder over IPv6.
   Sensor nodes run the open-source TinyOS operating system and generate
   TinyOS packets.  The sensor network can be accessed from IPv6
   Internet using a Web interface and the serial forwarder that runs in
   the applets enables reception/transmission of TinyOS packets over



Sarikaya                 Expires August 24, 2006                [Page 1]

Internet-Draft             Serial Forwarder v6             February 2006


   IPv6.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Serial Forwarder . . . . . . . . . . . . . . . . . . . . . . .  5
   4.  Experimental Work  . . . . . . . . . . . . . . . . . . . . . .  6
   5.  TinyOS Packet Details  . . . . . . . . . . . . . . . . . . . .  7
   6.  Conclusions  . . . . . . . . . . . . . . . . . . . . . . . . .  8
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   8.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 10
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 11
     9.1.  Normative References . . . . . . . . . . . . . . . . . . . 11
     9.2.  Informative References . . . . . . . . . . . . . . . . . . 11
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 12
   Intellectual Property and Copyright Statements . . . . . . . . . . 13

































Sarikaya                 Expires August 24, 2006                [Page 2]

Internet-Draft             Serial Forwarder v6             February 2006


1.  Introduction

   This document describes the serial forwarding architecture that
   allows interconnection of sensor networks with IPv6 Internet.

   Serial forwarding is a different approach than the native approach
   described in [draft-ietf-6lowpan-format-01].  In the native approach,
   the sensor nodes are connected to IPv6 network, configure an address
   and receive/ transmit IPv6 packets.  An adaptation layer is defined
   for 802.15.4 frame fragmentation and reassembly.  The sensor node
   that is natively connected has the option of delivering IPv6 packet
   in the sensor network using mesh routing.

   In this document we assume the base forwarding architecture shown in
   Figure 1.  Stargate [platformx] is a PDA with an XScale board that
   has a serial port or USB connection to the sensor network as well as
   802.3 interface to IPv6 Internet.  This architecture is commonly used
   to connect TinyOS [tinyos] based sensor nodes such as Telos motes.
   Telos motes have 802.15.4 radios.  TinyOS is an open-source operating
   system designed to run on sensor nodes.

              TinyOS                IPv6
              packet  +-+       datagrams (TCP)          +-+
               -------| |--------------------------------| |
            ------    | |            --------            | |
           |sensor |--| |-----------| IPv6   |-----------| |
           |network|  | |           |Internet|           | |
            ------    | |           |        |           | |
                      +-+            --------            +-+
                   Stargate        IPv6 Internet     Web Client
                   SFv6 server                       SFv6 client

   Figure 1: Base Forwarding Architecture

   Stargate software includes apache Web server and serial forwarder
   which is originally developed to run in IPv4.  Applications such as
   TinyDB, an environmental monitoring application are developed using
   Java and include an applet which is client of the serial forwarder.
   In TinyDB, the application sends queries to the sensor network to
   inquire about things like sensor readings and the sensor nodes send
   replies such as their sensor readings.

   In this document, we present an extension to the base architecture
   for IPv6.  Section 3 describes the serial forwarder, Section 4
   presents our architecture for an IPv6 extension, Section 5 describes
   TinyOS packet format and Section 6 presents our conclusions.





Sarikaya                 Expires August 24, 2006                [Page 3]

Internet-Draft             Serial Forwarder v6             February 2006


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14 RFC 2119
   [STANDARDS].













































Sarikaya                 Expires August 24, 2006                [Page 4]

Internet-Draft             Serial Forwarder v6             February 2006


3.  Serial Forwarder

   Serial forwarder runs on Stargate as a TCP-based socket application.
   Serial forwarder was originally developed as part of TinyOS project
   and IPv4 version of the software is available in the TinyOS source
   tree.

   Serial forwarder (SFv4) opens a TCP port and then forwards TinyOS
   packets from the serial port of Stargate to which an interface card
   to the sensor network is connected to the TCP port and vice versa.
   Web based applications such as TinyDB running on hosts contain an
   applet which is a client of the serial forwarder.  The applet
   connects to the TCP port opened by SFv4 running on Stargate.  The
   applet receives TinyOS packets encapsulated as IPv4 TCP data.  The
   applet can also send the user queries encapsulated in TinyOS packet
   payload as TCP data to SFv4 on Stargate and the Stargate's TinyDB
   application is responsible for routing the query to the sensor
   network.  Routing protocol is application-dependent and is mesh-
   oriented.
































Sarikaya                 Expires August 24, 2006                [Page 5]

Internet-Draft             Serial Forwarder v6             February 2006


4.   Experimental Work

   The base architecture has two deficiencies: Stargate can not
   efficiently run a webserver and an IPv6 version of apache for
   Stargate was not available.  The proposed extension to the base
   architecture is shown in Figure 2.


     TinyOS                IPv6
      packet  +-+      +-+ datagrams (TCP)          +-+
       -------| |------| |--------------------------| |
    ------    | |      | |      --------            | |
   |sensor |--| |------| |-----| IPv6   |-----------| |
   |network|  | |      | |     |Internet|           | |
    ------    | |      | |     |        |           | |
              +-+      +-+      --------            +-+
            Stargate Web Server IPv6             Web Client
         SFv6 Server SFv6 Client Internet
                     SFv6 Server                 SFv6 Client



   Figure 2: Experimental Forwarding Architecture

   We first ported SFv4 into IPv6 and the resulting software is called
   serial forwarder v6 (SFv6).  SFv6 running on Stargate opens a TCP
   port and forwards TinyOS packets back and fort from the serial port
   to TCP port.

   We developed a serial forwarder v6 to be run on an IPv6 host.  This
   version of SFv6 connects to the TCP port at Stargate and opens a TCP
   port itself.

   Applications in IPv6 Internet need to run a serial forwarder that
   connects to the TCP port of SFv6 that runs on the host.  We modified
   TinyDB Java applet for this purpose and obtained the applet that runs
   as SFv6 client.














Sarikaya                 Expires August 24, 2006                [Page 6]

Internet-Draft             Serial Forwarder v6             February 2006


5.  TinyOS Packet Details

   TinyOS packet has the format shown in Figure 3.

          +----------------------------------------------+
          | FCF | DSN | Dest |Source| Type|Group ID| Data|
          +----------------------------------------------+
          |   2 |  1  |   2  |  2   |  1  |  1     | 28  |
          +----------------------------------------------+

   Figure 3: TinyOS Packet Format

   where FCF is the frame control field and is 2 octets, DSN is 1 octet
   and is the destination sequence number.  The Dest and Source fields
   are 2 octets and Dest is destination PAN identifier and Source is
   source sensor node ID (MAC address).  Type field is 1 octet long and
   is the message type.  Group ID is 1 octet long.  User data (payload)
   is placed in the data field and is 28 octets long.

   This format is used for IEEE 802.15.4 based sensor nodes such as
   Telos motes.  Some fields like FCF, DSN, Dest and Group ID are Zigbee
   MAC layer specific.





























Sarikaya                 Expires August 24, 2006                [Page 7]

Internet-Draft             Serial Forwarder v6             February 2006


6.  Conclusions

   We presented an alternative architecture for connecting Zigbee based
   sensor nodes to IPv6 Internet.  Our architecture is based on a PDA
   that connects both the sensor network and IPv6 Internet.  There is no
   need for an adaptation layer on sensor nodes in order to fragment/
   reassemble 802.15.4 MAC frames.  The application has to be aware of
   the frame format and be capable of receiving the data and generating
   queries to the sensor network.










































Sarikaya                 Expires August 24, 2006                [Page 8]

Internet-Draft             Serial Forwarder v6             February 2006


7.  Security Considerations

   Security of the serial forwarder can be divided into two parts: IPv6
   Internet and the sensor network.  The security in the sensor network
   can be provided using link-layer mechanisms defined by IEEE 802.15.4.
   IPv6 Internet communication is on TCP and application-oriented.  Such
   a communication should be secured using TLS.












































Sarikaya                 Expires August 24, 2006                [Page 9]

Internet-Draft             Serial Forwarder v6             February 2006


8.  Acknowledgements

   The author gratefully acknowledges the contributions of Abbie Zheng
   of UNBC.















































Sarikaya                 Expires August 24, 2006               [Page 10]

Internet-Draft             Serial Forwarder v6             February 2006


9.  References

9.1.  Normative References

   [STANDARDS]
              "Key words for use in RFCs to Indicate Requirement
              Levels", RFC 2119, March 1997,
              <ftp://ftp.isi.edu/in-notes/rfc2119>.

9.2.  Informative References

   [draft-ietf-6lowpan-format-01]
              Montenegro, G. and N. Kushalnagar, "Transmission of IPv6
              Packets over IEEE 802.15.4 Networks", October 2005, <http:
              //ietf.org/internet-drafts/
              draft-ietf-6lowpan-format-01.txt>.

   [platformx]
              "Stargate: A PlatformX Project", February 2006,
              <http://platformx.sourceforge.net>.

   [tinyos]   "TinyOS CVS Source Tree", February 2006,
              <http://www.tinyos.net>.




























Sarikaya                 Expires August 24, 2006               [Page 11]

Internet-Draft             Serial Forwarder v6             February 2006


Author's Address

   Behcet Sarikaya
   Futurewei Technologies
   1700 Alma Dr. Suite 100
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: bsarikaya@huawei.com










































Sarikaya                 Expires August 24, 2006               [Page 12]

Internet-Draft             Serial Forwarder v6             February 2006


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Sarikaya                 Expires August 24, 2006               [Page 13]

