
                                                                S. Rhim
Internet Draft                                                 J. Hwang
draft-rhim-spirits-kticw-00.txt                           Korea Telecom
February 2000                                          28 February 2000
Expires August 2000


                    On a Pre-SPIRITS Implementation
             in the KT Internet Call Waiting(ICW) Service


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.
   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   This document provides the pre-SPIRITS Internet Call Waiting(ICW)
   Service Implementation developed by Korea Telecom. The document
   describes the ICW service and service features, the architecture,
   and the protocols, and illustrates the example scenario.

   As such, this document contributes to the future SPIRITS
   architecture and protocol RFCs.


1. Introduction

   The ICW service[1] allows the PSTN user to be notified of incoming
   calls and properly handle the calls while connected to the internet
   using dial-up modem.

   Korea Telecom provides the Telephone Mail Service(TMS) based on
   Intelligent Network, which records the directory number or voice
   message from calling party when the called party(TMS subscriber) is
   busy or no-answer to complete the call. The ICW service is developed
   as a supplementary service to TMS. When the called party is busy, the
   IN system determines whether he/she is PSTN on-line or Internet on-
  
Rhim & Hwang                                                  [Page 1]

                KT Internet Call Waiting(ICW) Service   February 2000


   line and completes the call by forwarding to the TMS at the former
   case, or notifies the subscriber via internet session allowing he/she
   processes the incoming call at the latter case.

   This document describes the ICW service implemented by Korea
   Telecom[2] as a supplementary service of KT TMS using PINT Service
   architecture and service protocol.

   The rest of this document is as follows:

   Chapter 2 describes the services and service features.
   Chapter 3 describers the service architecture and protocols.
   Chapter 4 illustrates the service scenario.
   Chapter 5 concludes this document.


2. Service

2.1 Service Description

   The ICW(Internet Call Waiting) service allows the PSTN user who is
   connected to the internet using dial-up modem to be notified of
   incoming calls with calling party number and name via internet
   connection and properly handle(accept, reject, forward to another
   number, or forward to VMS(Voice Mail System) of TMS) the calls.

2.2 Service Features

   The Key features of the ICW service are following:

   1) Internet On-line Trigerring: When an ICW subscriber is using the
   Internet and an incoming call arrives to the busy line, the IN
   service will be triggered from the terminating SSP.

   2) Incoming Call Notification: The subscriber is notified on the PC
   that an incoming call is arrived. The notification box is popped up
   by the ICW Client running on the subscriber's PC. The box is brought
   to the foreground. The notification includes following information:

   i) Calling Party Number Identification: The number of the calling
   party is displayed.

   ii) Calling Party Name Identification: The name of the calling party,
   if available, is displayed.
     
   iii) Calling Time Identification: The time of the incoming call is
   displayed.

   3) Incoming Call Handling

   i) Accept the Call: The ICW subscriber may select "Accept the Call"
   button on the pop up box, so that the ICW Server routes the incoming

  
Rhim & Hwang                                                  [Page 2]

                KT Internet Call Waiting(ICW) Service   February 2000


   call to the subscriber's line after the ICW Client terminates the
   internet (modem) connection.

   ii) Reject the Call: The ICW subscriber may select "Reject the Call"
   button on the pop up box, so that the incoming call is rejected.

   iii) Forward the Call to Another Number: The ICW subscriber may
   select "Forward the Call" button on the pop up box with a number
   being forwarded to, so that the ICW Client routes the incoming call
   to the number.

   iv) Forward the Call to the Voice Mail System(VMS): The ICW
   subscriber may select "Forward the Call to VMS" button on the pop up
   box, so that the ICW Client routes the incoming call to VMS provided
   by KT-TMS.

   v) Call Processing on No Response: If the ICW subscriber does not
   respond within a pre-specified period of time after the notification
   dialog box is displayed, then the ICW Client process the "Call
   Processing on No Response" which is specified by the ICW subscriber
   on the ICW service profile. Call processing method on No Response can
   be "Accept", "Reject", "Forward", or "Forward to VMS".

   vi) Automatic Call Processing(Call Screening) : The subscriber can
   pre-define the call processing method for each incoming call based on
   the calling party number, by configuring "Automatic Call Processing
   List" like address book in the ICW service profile. The automatic
   call processing method can be following :

     - Do Not Disturb (Reject all calls / Forward all calls / Forward
        all calls to the VMS)
     - Automatic Processing based on the calling party number (Accept
        the call / Reject the call / Forward the call / Forward the call
        to the VMS)

   vii) Multiple Call Handling : The subscriber can be notified of the
   multiple calls during the ICW service and process those calls one by
   one.

   4) Call Logging : Logs of incoming calls processed during the ICW
   service are recorded and maintained both on the ICW Client and server
   system. The subscriber can access the call log in the ICW Client to
   determine the number and the name of calling party, the time of call,
   and the call processing method for each call. The operator can access
   the call log in the ICW Server for statistics and management purposes.

   5) ICW service Activation/Deactivation

   i) Automatic Activation/Deactivation : When dial-up internet
   connection is setup or terminated, the ICW service is activated or
   deactivated automatically.


  
Rhim & Hwang                                                  [Page 3]

                KT Internet Call Waiting(ICW) Service   February 2000


   ii) Manual Activation/Deactivation : The subscriber can deactivate
   the ICW service manually when he/she doesn't want to be interrupted
   by notification during internet on-line, and activate the ICW service
   when he/she wants.

   6) ICW Client Configuration : The subscriber can configure the ICW
   service profile such as default call forwarding number, automatic
   call processing list, etc in the ICW Client.


3. Architectures and Protocols

   In this chapter, the network architectures and protocols for the ICW
   service will be described.

3.1 Network Architecture

   (Figure 3-1) illustrates the hardware and functional architecture for
   ICW service provision.

   The SSP(Service Switching Point), SCP(Service Control Point), and
   IP(Intelligent Peripheral) are legacy PSTN IN elements with IN CS-1.
   Both the ICW Server System and the ICW Client System are new elements
   in the Internet domain for the ICW service.

   The functionalities of each element will be described in next section.

3.2 Network Entities

   1) SSP
   The SSP contains SSF(Service Switching Function) and CCF(Call Control
   Function). The SSP triggers the service to the SCP when it detects
   the called party busy(T_Busy), and proceed the call under the control
   of the SCP.

   2) SCP
   The SCP contains SCF(Service Control Function) and SDF(Service Data
   Function). The ICW Service Logic on the SCF/SDF can determine whether
   the subscriber is PSTN on-line or internet on-line when it receives
   the T_BUSY trigger from the SSP. If determined that the internet on-
   line, the ICW Service Logic notifies the ICW subscriber of incoming
   call via the ICW Server and the ICW Client, and waits for the reply
   of call disposition from the subscriber. The ICW Service Logic then
   process and complete the incoming call according to the subscribers
   response.

   In addition, the SCP contains the SCGF(Service Control Gateway
   Function) for protocol inter-working between PSTN/IN and Internet. It
   translates the SIP message from the ICW Server to the SLP interface
   message and vise versa. The SCGF is an end point for internet
   protocol and behaves as a UAS(User Agent server) or UAC(User Agent
   client) for the Internet protocol.

  
Rhim & Hwang                                                  [Page 4]

                KT Internet Call Waiting(ICW) Service   February 2000


   3) IP
   The IP contains SRF(Service Resource Function). It plays
   announcements to the calling party during the ICW service
   before/after receiving the response from the ICW subscriber and
   records the calling party number or voice message from the calling
   party when the call "Forward to VMS".

   4) ICW Server System
   The ICW Server system is a new element for PSTN/Internet inter-
   working in the Internet domain. It is an SIP entity, which behaves as
   a proxy or redirect server for message routing between the ICW Client
   and SCGF.

   The ICW Server has management function for the ICW Clients connected
   to it. When an the ICW Client requests the registration to the ICW
   service, the ICW Server relays that request to the SCP, waits for the
   result of authorization from the SCP, and only if it is proved to be
   a authorized the subscriber, registers that the subscriber in its
   Database(DB). The ICW Server should monitor all the ICW Clients
   registered to it, so that if it detects the termination of internet
   connection for an ICW Client, it deactivate the ICW service for that
   the subscriber.

   The ICW Server manages profiles for each ICW subscribers and also has
   logs of the call processing results.

   5) ICW Client System
   The ICW Client System is launched on the subscriber's PC that is
   connected to the Internet via dial-up modem. It is an application
   program for the ICW service.

   The ICW Client is activated as soon as the subscriber powers on the
   PC, and monitors the Internet connection status. If the subscriber
   connects the Internet, the ICW Client detects it and starts
   REGISTRATION notification to the SCGF via the ICW Server, and that
   notification eventually transferred to SLP(SCP). In this case, the
   ICW Client acts as a UAC to the SCGF which acts as a UAS. Thereafter
   it notifies the ICW Server periodically that the subscriber during
   the Internet connection.

   When an incoming call is notified to the ICW Client during the
   Internet on-line, it pops up the notification dialog box including
   the number and name of calling party, calling time, and the call
   processing option on the subscribers PC, and waits for the
   subscribers answer. When the subscriber selects the choice (Accept,
   Reject, Forward, or Forward to VMS), the ICW Client responds to the
   SCP. In this case, the ICW Client acts as a UAS.

   The ICW Client can screen the incoming call before notifying the
   subscriberbased on the predefined ICW Service ProfileThe ICW Client
   manages the ICW Service Profile including following information :

   o Subscriber Information : Name, Directory Number, Password
  
Rhim & Hwang                                                  [Page 5]

                KT Internet Call Waiting(ICW) Service   February 2000



   o Service Status(Activation/Deactivation)

   o Automatic Call Processing Method

     - Call Processing Method on No Answer (Reject/Forward/VMS) : the
   automatic call completion method in case the subscriber doesn't reply
   to the pup up dialog box for pre defined period of time
     - Do Not Disturb Mode (On/Off) : the subscriber can set the DND
   mode when he/she does not want to be notified
     - Call Processing Method on Do Not Disturb Mode
   (Reject/Forward/VMS) : the call processing method for all incoming
   call when the subscriber sets the DND Mode.
     - Call Processing List by Calling party numbers
   (Accept/Reject/Forward/VMS) : the list of calling party number and
   the automatic call processing method for the incoming call with that
   number

   The ICW Client records the call processing method and the result for
   each incoming calls in log file on the subscriber's PC. Each call
   record in the call log includes the following items :

   - Calling Time
   - Calling Party Number
   - Calling Party Name(optional)
   - Call Processing Method : Accept / Reject / Forward / Forward to VMS
   - Result : Success/Fail

   6) Firewall
   Packet Filtering Firewall Systems are between ICW server and clients
   and also between SCGF and ICW server for accessing IN Nodes of KT.

3.3 Network Interfaces

   1) SCF-SDF, SCF-SSF, SCF-SRF Interfaces
   These interfaces are same as existing PSTN IN Interfaces. They are
   implemented using KT INAP CS-1.

   2) SCGF-SCF Interface
   This interface will relay requests either from the IN or the Internet.
   It is implemented using the SCP internal API.

   3) SCGF-ICW Server, ICW Server-ICW Client Interface
   These interfaces are implemented using PINT Service Protocol V.1. We
   adopted UAS-Proxy-UAC relationships as shown in (Figure 3-2).


3.4 Protocols

   1) INAP Protocol



  
Rhim & Hwang                                                  [Page 6]

                KT Internet Call Waiting(ICW) Service   February 2000


   The SCP, SSP, and IP support KT INAP V1.0 which is based on ITU-T
   INAP CS-1 and two CS-2 INAP messages(PRM(PromptAndReceiveMessage) and
   EM(EraseMessage)) for recording the voice message.

   2) PINT Protocol

   The ICW service uses PINT Service Protocol 1.0[3] as a protocol
   between the SCP and the ICW Server System, and between the ICW Server
   System and the ICW Client System. We adopt the PINT Service Protocol
   1.0 defined at the IETF PINT WG for invoking telephone services from
   an IP network. It is specified as a set of enhancements and addition
   to the SIP 2.0 and SDP Protocols.

   The ICW service uses PINT Service Protocol 1.0 as follows:

   o REGISTER
   The REGISTER method classified as two folds: One is the first and the
   last registration to the SCP for notifying the on-line/off-line
   status changes. The last registration means that it is un-register
   message from the Client. The other is all the remaining periodic
   registrations between the first and the last, from the ICW client to
   the ICW server to notify the liveness of the Internet connection of
   the ICW client.

   In the former case, the ICW Client sends the REGISTER method to the
   ICW Server with parameters of IP address and phone number. ICW server
   relays it to the SCP, who updates the DB if it is the authorized
   subscriber and returns the registration ack to the ICW Server and
   then Client.

   In the latter case, the ICW Client sends the REGISTER method to the
   ICW Server periodically with predefined intervals (e.g. 20 seconds).
   The ICW server checks if it is from the authorized subscriber. No
   further relay to SCP is needed.

   o INVITE
   The SCP sends the INVITE method to the ICW Client via the ICW Server
   in order to notify the subscriber which is internet on-line and the
   ICW service is activated of the incoming call.

   o ACK
   Both the SCP and the ICW Server sends the ACK method to the ICW
   Server and Client right after receiving the final response from them
   in order to confirm.

   o BYE
   The BYE method releases the session. In addition to this original
   usage of BYE, we use this method to convey the 'call processing
   results' from the PSTN. The BYE method uses the Subject: header of
   value 'success' or 'failure' to indicate the call completion result
   of PSTN.

   o CANCEL
  
Rhim & Hwang                                                  [Page 7]

                KT Internet Call Waiting(ICW) Service   February 2000


   When the calling party release the call before the called party
   response that call, the SCP sends the CANCEL method to the ICW Client
   to cancel the INVITE method it sent before.

   o OPTION
   Not Used

   o Response
   The SCP sends Response method with state-codes to the ICW Client for
   REGISTER Method. The State-codes of response for REGISTER request
   are :
   . 100 Trying : Trying
   . 200 OK   : Registered

   The ICW Client sends Response method with state-codes to the ICW
   Client for INVITE Method in order to deliver the selection of the
   subscriber. The State-codes of response for INVITE request are :
   . 100 Trying   : Trying
   . 200 OK      : Accept the Call
   . 303 see other : Forward the Call to Another Number
   . 380 alternative service : Forward the Call to VMS
   . 603 decline  : Reject the Call


4. Example Scenario

4.1 ICW Service Subscription

   A PSTN subscriber has to subscribe to the ICW service in order to be
   provided the ICW service. Both PSTN operator and IN-based ICW service
   provider is the Korea Telecom, in our case. When the subscription is
   completed, the Local exchange should update the subscription data for
   the number to be triggered to the SSP for further trigger to the SCP.
   This necessity is because we Korea do not have local SSPs but toll
   SSPs.

4.2 ICW Client Installation

   An ICW subscriber should install the ICW Client program in his/her PC.
   The ICW Client is automatically activated as a daemon when the
   subscriber's PC's power-on. It monitors and detects the Internet
   connection status.

4.3 ICW Service Activation

   When the subscriber initiates the Internet connection or activates
   the ICW service manually, the ICW service is activated. That is the
   ICW Client sends the REGISTER message with directory number and IP
   address to the SCP

   (0A) The ICW subscriber dials ISP access number and establishes PPP
   connection.

  
Rhim & Hwang                                                  [Page 8]

                KT Internet Call Waiting(ICW) Service   February 2000


   (0B) The ICW Client on the ICW subscriber's PC detects the PPP
   connection.

   (1) The ICW Client sends registration request to the ICW Server in
   order to register IP address to DN relationship as a result of dial-
   up access to Internet.

      REGISTER sip:ICW@147.6.18.169 SIP/2.0
      From: SIP:025265262@147.6.18.169
      To: SIP:KT-ICW@147.6.18.224
      Call-Id: 1-410613070200-ICW@147.6.18.169
      CSeq: 1

   (2) The ICW Server relays registration request to SCGF.

      REGISTER sip:ICW@147.6.18.224 SIP/2.0
      Via: SIP/2.0/TCP 147.6.18.224
      From: SIP:025265262@147.6.18.169
      To: SIP:KT-ICW@147.6.18.224
      Call-id: 1-410613070200-ICW@147.6.18.169
      CSeq: 1
      Content-type: application/sdp
      Content-length: 1

   (2A) The SCGF translates user registration information from the SIP
   message to the SCP internal API message.

   (3) The SCGF relays the user registration message to the SCF/SDF.

   (3A) The SCF/SDF authorizes the subscriber with directory number
   using user registration information.

   (3B) The SCF/SDF stores the IP address relating to the ICW Client for
   the DN1 and sets the status as the Internet on-line.

   (4) The SCF/SDF sends the result of registration to the SCF/SCGF.

   (4A) The SCGF translates user registration response of SCP internal
   API message to the PINT message.

   (5) The SCGF relays sends back the user registration response to the
   ICW Server.

      SIP/2.0 200 OK
      From: SIP:025265262@147.6.18.169
      To: SIP:KT-ICW@147.6.18.224
      Call-Id: 1-410613070200-ICW@147.6.18.169
      CSeq: 2

   (5A) The ICW Server records the user registration information and the
   internet on-line status for the ICW Client(the subscriber) in DB.


  
Rhim & Hwang                                                  [Page 9]

                KT Internet Call Waiting(ICW) Service   February 2000


   (6) The ICW Server sends the user registration response to the ICW
   Client.

      SIP/2.0 200 OK
      Via: SIP/2.0/UDP 147.6.18.224
      From: SIP:025265262@147.6.18.169
      To: SIP:KT-ICW@147.6.18.224
      Call-Id: 1-410613070200-ICW@147.6.18.169
      CSeq: 2
      Content-type: application/sdp
      Content-length: 1

   (6A) The ICW Client notifies the subscriber that the registration is
   completed successfully and the ICW service is in active state.

4.4 Incoming Call Notification

   When a calling party makes a call to the ICW subscriber, the SCP
   notifies the ICW Client of incoming call and waits for the
   subscriber's response.

   (1) The calling party of DN2 (a telephone user) makes a call to the
   ICW subscriber (PC user) with DN1. The Connection is setup using
   existing ISDN signalling.

   (1A) The SSF/CCF is detected the called party(the ICW subscriber)
   busy.

   (2) The SSF/CCF sends InitialDP (T_Busy) to SCF/SDF.

   (2A) The SCF/SDF determines whether the user of DN1 is PSTN on-line
   or Internet on-line. (The SCF/SDF performs PSTN TMS service logic in
   case of PSTN on-line or performs the ICW service Logic in case of
   internet on-line. In this document, we assume internet on-line.)

   (2B) The SCF/SDF retrieves the IP address related with DN1.

   (2C) The SCF/SDF may play the announcement to the calling party, to
   wait for called party answer after connection establishment with SRF.

   (3) The SCF sends incoming call notification to the SCGF.

   (3A) The SCGF translates incoming call notification of SCP internal
   API message to the PINT message.

   (4) The SCGF relays the notification to the ICW Server.

      INVITE sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id:949896649@147.6.18.211
      Cseq:1

  
Rhim & Hwang                                                 [Page 10]

                KT Internet Call Waiting(ICW) Service   February 2000


   (4A) The ICW Server double-checks the subscriber's status using the
   ICW subscribers profile in its own DB.

   (5) The ICW Server sends trying message to the SCGF.

      SIP/2.0 100 Trying
      Via: SIP/2.0/TCP 147.6.18.224
      From: SIP: 0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id: 949896649@147.6.18.211
      Cseq:2
      Content-type: application/sdp
      Content-length: 1

   (6) The ICW Server relays the notification to the ICW Client.

      INVITE sip:ICW@147.6.18.169 SIP/2.0
      Via: SIP/2.0/TCP 147.6.18.224
      From: SIP: 0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id: 949896649@147.6.18.211
      Cseq:1
      Content-type: application/sdp
      Content-length: 1

   (6A) The ICW Client consults the ICW service profile in order to
   process the incoming call in pre-defined method. If the incoming call
   is specified in the ICW service profile, then the procedure for
   automatic call processing is performed.

   (6B) If the incoming call has not been screened by the automatic call
   processing, the ICW Client displays the notification dialog box on
   the subscribers PC.

   (7) The ICW Client sends trying message to the ICW Server.

      SIP/2.0 100 Trying
      Via: SIP/2.0/TCP 147.6.18.224
      From: SIP: 0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id: 949896649@147.6.18.211
      Cseq:2
      Content-type: application/sdp
      Content-length: 1

4.5 Incoming Call Processing

   The incoming call can be accepted, rejected, forwarded to another
   number, or forwarded to VMS by the automatic call processing method
   pre-defined by the ICW subscriber or by the subscribers selection. In
   this document, the information flows of "Accept the call" and
   "Forward the call to another number" choice cases are illustrated.

  
Rhim & Hwang                                                 [Page 11]

                KT Internet Call Waiting(ICW) Service   February 2000


4.5.1 Accept the Call

   (0A) The ICW subscriber chooses to "Accept" the incoming call.

   (1) The ICW Client sends the "Accept" indication to the ICW Server.

      SIP/2.0 200 OK
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id:949896649@147.6.18.211
      Cseq:3

   (1A) The ICW Client records the subscriber's selection for incoming
   call in the call log.

   (1B) The ICW Client terminates the Internet connection of user's PC.

   (2) The ICW Server sends the "Accept" message to the SCGF.

      SIP/2.0 200 OK
      Via:SIP/2.0/TCP 147.6.18.224
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id:949896649@147.6.18.211
      Cseq:3
      Content-type: application/sdp
      Content-length: 1

   (2A) The SCGF translates the "Accept" message to the SCP internal API
   message.

   (3) The SCGF sends "ACK" message to the ICW Server.

      ACK sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id:949896649@147.6.18.211
      Cseq:4

   (4) The SCGF sends the "Accept" message to SCF.

   (5) The SCF instructs SSF/CCF to route the call to DN1.

   (6) The SSF/CCF initiates the connection setup to DN1.

   (6A) The bearer connection between the calling party(DN2) and the ICW
   subscriber(DN1) is setup.

   (7) The Connection results are returned to the SCF through ERB.

   (8) The SCF sends the call completion message to the SCGF.


  
Rhim & Hwang                                                 [Page 12]

                KT Internet Call Waiting(ICW) Service   February 2000


   (8A) The SCGF translates the call completion message to the PINT
   message.

   (9) The SCGF sends "BYE" message to the ICW Server.

      BYE sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id:949896649@147.6.18.211
      Cseq: 5
      Subject: Success

   (9A) The ICW Server records the call completion result to the log
   file.

4.5 2 Forward the Call to Another Number

   (0A) The ICW subscriber chooses to "Forward to another number of DN3"
   for the incoming call.

   (1) The ICW Client sends the "Forward to another number" indication
   to the ICW Server.

      SIP/2.0 303 See Other
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id:949896652@147.6.18.211
      Contact: SIP:025266444@147.6.18.169
      Cseq:3

   (1A) The ICW Client records the subscriber's selection for incoming
   call in the call log.

   (2) The ICW Server sends "ACK" message to the ICW Client.

      ACK sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id:949896649@147.6.18.211
      Cseq:4

   (3) The ICW Server relays the "Forward to another number" message to
   the SCGF.

      SIP/2.0 303 See Other
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id: 949896652@147.6.18.211
      Contact: SIP:025266444@147.6.18.169
      Cseq:3
      Content-type: application/sdp
      Content-length: 1

  
Rhim & Hwang                                                 [Page 13]

                KT Internet Call Waiting(ICW) Service   February 2000


   (3A) The SCGF translates the "Forward to another number" message to
   the SCP internal API message.

   (4) The SCGF sends "ACK" message to the ICW Server.

      ACK sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id:949896649@147.6.18.211
      Cseq:4

   (5) The SCGF sends the "Forward to another number" message to SCF.

   (6) The SCF instructs SSF/CCF to route the call to another number of
   DN3.

   (7) The SSF/CCF initiates the connection setup to DN3.

   (7A) The bearer connection between the calling party(DN2) and the
   forwarding number(DN3) is setup.

   (8) The Connection results are returned to the SCF through the ERB.

   (9) The SCF sends the call completion message to the SCGF.

   (9A) The SCGF translates the call completion message to the PINT
   message.

   (10) The SCGF sends the call completion message to the ICW Server.

      BYE sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.224
      Call-Id:949896649@147.6.18.211
      Cseq:5
      Subject:Success

   (10A) The ICW Server records the call completion result to the log
   file.

   (11) The ICW Server sends the success of "Forwarding to another
   number" to the ICW Client.

      BYE sip:ICW@147.6.18.169 SIP/2.0
      Via:SIP/2.0/TCP 147.6.18.224
      From: SIP:0428708467@147.6.18.211
      To: SIP:025265262@147.6.18.169
      Call-Id:949896649@147.6.18.211
      Cseq:5
      Subject:Success

   (11A) The ICW Client records the call completion result to the log
   file.
  
Rhim & Hwang                                                 [Page 14]

                KT Internet Call Waiting(ICW) Service   February 2000



4.6 ICW service Deactivation

   The ICW Server detects disconnection from the ICW Client when the ICW
   subscriber terminates the internet connection, and then notifies the
   SCP of the ICW service deactivation for that the subscriber. When the
   ICW subscriber deactivates the ICW service manually, the ICW Server
   receives the unregister message from the ICW Client, and then
   notifies the SCP of the ICW service deactivation for that the
   subscriber. In this document, the service deactivation scenario
   caused by internet disconnection is illustratead.

   (0A) The ICW subscriber terminates the internet connection.

   (0B) The ICW Server decides that the internet connection has been
   terminated when it does not receive the periodic notification of
   internet on-line from the ICW Client.

   (1) The ICW Server sends unregister message to SCGF

      REGISTER sip:ICW@147.6.18.224 SIP/2.0
      From: SIP:025265262@147.6.18.169
      To: SIP:KT-ICW@147.6.18.224
      Call-Id: 025265262-949897072-SVR
      Expires:0
      CSeq: 1
      Content-type: application/sdp
      Content-length: 1

   (1A) The SCGF translates the unregister message to the SCP internal
   API message.

   (2) The SCGF sends the unregister message to SCF.

   (2A) The SCF/SDF authorizes the subscriber with directory number
   using the unregistration information.

   (2B) The SCF/SDF records the internet off-line for that ICW Client.

   (3) The SCF/SDF sends the user unregistration response to the
   SCF/SCGF.

   (3A) The SCGF translates user unregistration response to the PINT
   message.

   (4) The SCGF relays sends back the user unregistration response to
   the ICW Server.

      SIP/2.0 200 OK
      From: SIP:025265262@147.6.18.169
      To: SIP:KT-ICW@147.6.18.224
      Call-Id: 025265262-949897072-SVR@147.6.18.169
      CSeq: 2
  
Rhim & Hwang                                                 [Page 15]

                KT Internet Call Waiting(ICW) Service   February 2000



   (4A) The ICW Server records the status of internet off-line for the
   ICW Client(the subscriber) in DB.


5. Conclusion

   We design and implement the ICW service whose main features are
   Internet call waiting, Internet call notification, and Internet call
   processing including connection to the same telephone after modem
   disconnection, forwarding to the other number, or connection to the
   VMS. This service is designated as a supplementary service of the TMS,
   which purpose is to increase the call completion rates. After
   implemented last year, the field trial tests are under going and the
   service feasibility is almost proved.

   Since KT's VOIP service is not fully deployed yet, the ICW service
   does not have the virtual second line feature, but it will be added
   in the near future.

   Our main advantages are

   - ICW service is ISP independent.

   - Automatic modem disconnection feature when the incoming call is
   accepted.

   - After the call disposition, the processing result (e.g. VM success,
   or Call forwarding fails because no-answer, etc) can be delivered to
   the Client to be logged through the enhanced BYE message,

   - Intermediate ICW server filters the service accesses

   Our specific features are

   - It is supplementary service of the TMS which is dedicated to the
   subscriber's telephone number: The ICW client could not support
   subscriber's mobility.

   - The REGISTER method has used for two purposes: One is to update the
   Internet on/off-line status. The other is to show the liveness of the
   Client. The latter may burden the ICW Server: This scheme was chosen
   to support IAP(Internet Access Provider) independent service
   provision.

   Our further challenges are

   - to extend it to general messaging notification services such as
   unified messaging or community services.

   We should support the SIP-based ICW service architecture and will
   adopt the further SPIRIT protocol specification as we would follow
   the standardized approach.
  
Rhim & Hwang                                                 [Page 16]

                KT Internet Call Waiting(ICW) Service   February 2000




6. References

   [1] <Draft-brusilovsky-icw-00.txt> A. Brusilovsky, E. Gausmann, V.
      Gurbani, A. Jain, "A Proposal for Internal Call Waiting Service
      using SIP", Jan. 1999

   [2] ICW Service Requirements & Specifications, Oct.1999, Korea
      Telecom

   [3] <draft-ietf-pint-protocol-02.txt> S. Petrack, L. Conroy, The PINT
      Service Protocol : Extensions to SIP and SDP for IP Access to
      Telephone Call Service Oct.1999


7. Appendix

           PSTN/IN      |                INTERNET
                        |
   +--------+propr-+---------+        +-------------+        +---------+
   |(ICW SL)|ietary|(UAC/UAS)|  PINT  |(ProxyServer)|  PINT  |(UAC/UAS)|
   |        |------|         |--------|     ICW     |--------|   ICW   |
   |SCF/SDF |  i/f |  SCGF   |protocol|   Server    |protocol|  Client |
   +--------+      +---------+        +-------------+        +---------+
      SCP          SCGP or SCP           ICW server      subscriber's PC

   (Figure 3-1) Network and Functional Architecture for the ICW service


   (Figure 3-2) PINT protocol architecture


   (Figure 4-1) ICW Service Activation


   (Figure 4-2) Incoming Call Notification


   (Figure 4-3) Incoming Call Processing - Accept the Call


   (Figure 4-4) Incoming Call Processing - Forward the Call to Another
   Number


   (Figure 4-5) ICW Service Deactivation



8. Author's Addresses

   Sung-Yurn Rhim
  
Rhim & Hwang                                                 [Page 17]

                KT Internet Call Waiting(ICW) Service   February 2000


   Korea Telecom
   17 Woomyun-dong
   Seocho-gu, Seoul, Korea
   Phone: +82 2 526 6172
   Email: syrhim@kt.co.kr

   Jinkyung Hwang
   Korea Telecom
   17 Woomyun-dong
   Seocho-gu, Seoul, Korea
   Phone: +82 2 526 6830
   Email: jkhwang@kt.co.kr
    








































  
Rhim & Hwang                                                 [Page 18]

