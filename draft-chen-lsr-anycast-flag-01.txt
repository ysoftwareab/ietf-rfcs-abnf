



LSR                                                              R. Chen
Internet-Draft                                                   D. Zhao
Intended status: Standards Track                         ZTE Corporation
Expires: 8 May 2022                                            P. Psenak
                                                           K. Talaulikar
                                                           Cisco Systems
                                                         4 November 2021


           Updates to Anycast Property advertisement for OSPF
                     draft-chen-lsr-anycast-flag-01

Abstract

   Each prefix is advertised along with an 8-bit field of
   capabilities,by using the Prefix Options[RFC8362] and the flag flield
   in the OSPFv2 Extended Prefix TLV [RFC7684], but the definition of
   anycast flag to identify the prefix as anycast has not yet been
   defined.  However, Almost all bits of the Flag field has been
   assigned already.  Thus, it is also required to extend the flag field
   for future use.

   This document updates [RFC7684] and [RFC8362], by defining a new
   variable length Prefix attributes Sub-TLVs for OSPFv2 and OSPFv3 and
   a new flag in the Prefix attributes Sub-TLV to advertise the anycast
   property.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 8 May 2022.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.



Chen, et al.               Expires 8 May 2022                   [Page 1]

Internet-Draft       Anycast Property advertisement        November 2021


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  Variable length Prefix attributes Sub-TLV . . . . . . . . . .   3
   3.  Processing  . . . . . . . . . . . . . . . . . . . . . . . . .   5
   4.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     5.1.  OSPFv2 Extended Prefix Sub-TLV Registry . . . . . . . . .   6
     5.2.  OSPFv3 Extended LSA Sub-TLV Registry  . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   7.  Normative References  . . . . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Both SR-MPLS prefixes-SID and IPv4/IPv6 prefix may be configured as
   anycast and as such the same value can be advertised by multiple
   routers.  It is useful for other routers to know that the
   advertisement is for an anycast identifier.

   [RFC7684] defines OSPFv2 Opaque LSAs based on Type-Length-Value (TLV)
   tuples that can be used to associate additional attributes with
   prefixes or links.8-bit field of the OSPFv2 Extended Prefix TLV is
   used to advertise additional attributes associated with the prefix,
   but the definition of anycast flag to identify the prefix as anycast
   has not yet been defined.  However, three bits have been defined.

   [RFC8362] extends the LSA format by encoding the existing OSPFv3 LSA
   information in Type-Length-Value (TLV) tuples and allowing
   advertisement of additional information with additional TLVs.  Each
   prefix is advertised along with an 8-bit field of capabilities, by
   using the Prefix Options, but the definition of anycast flag to
   identify the prefix as anycast has not yet been defined.
   However,only the final bit in the Prefix Options is not allocated.







Chen, et al.               Expires 8 May 2022                   [Page 2]

Internet-Draft       Anycast Property advertisement        November 2021


   This document updates [RFC7684] and [RFC8362], by defining a new
   variable length Prefix attributes Sub-TLVs for OSPFv2 and OSPFv3 and
   a new flag in the Prefix attributes Sub-TLV to advertise the anycast
   property.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

2.  Variable length Prefix attributes Sub-TLV

   This document creates a new variable length Prefix attributes Sub-TLV
   for OSPFv2 and OSPFv3.  This Sub-TLV specifies a variable flag fields
   to advertise additional attributes associated with the prefix.

   The format of each TLV is:


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type             |            Length             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                    attributes(variable)...                    |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                  Figure 1

   where:

   Type: TBA.

   Length: Variable, dependent on the included attributes.

   Attributes: Variable.The extended flag fields, and the first 8 bits
   are reserved for the flag field previously defined by OSPFv2 and
   OSPFv3.

   In the case of OSPFv2,the Prefix attributes Sub-TLVs is a sub-TLV of
   the OSPFv2 Extended Prefix TLV as defined in [RFC7684].Figure 2 below
   is the definition of attribute field.

   Attributes:The following flags are defined and the first 8 bits are
   reserved for the previously defined one-octet field contains flags in
   OSPFv2 Extended Prefix TLV [RFC7684]:




Chen, et al.               Expires 8 May 2022                   [Page 3]

Internet-Draft       Anycast Property advertisement        November 2021


              0  1  2  3  4  5  6  7  8  9  0  1  2  3  4   5
             +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
             | A| N| E|  |  |  |  |  |AC|  |  |  |  |  |  |  |......
             +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

                                  Figure 2

   Where:

   E-Flag: Refer to [RFC9089] .

   N/A-Flag: Refer to [RFC7684].

   AC-flag: A new flag is used to advertise the anycast property.  When
   the prefix is configured as anycast, the AC-flag SHOULD be set.
   Otherwise, this flag MUST be clear.If both N-flag and AC-flag are
   set, the receiving routers MUST ignore the N-flag.

   AC-flag MUST be preserved when the prefix is propagated between
   areas.

   The same prefix can be advertised by multiple routers, and that if at
   least one of them sets the AC-Flag in its advertisement, the prefix
   SHOULD be considered as anycast.

   The other bits are reserved for future use.

   In the case of OSPFv3, the Prefix attributes Sub-TLVs is a sub-TLV of
   the following OSPFv3 TLVs as defined in [RFC8362]:

   *  Intra-Area Prefix TLV

   *  Inter-Area Prefix TLV

   *  External Prefix TLV

   Figure 3 below is the definition of attribute field.

   Attributes:The following flags are defined and the first 8 bits are
   reserved for the previously defined OSPFv3 Prefix Options:


              0  1  2  3  4  5  6  7  8  9  0  1  2  3  4   5
             +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
             |  | E| N|DN| P| x|LA|NU|AC|  |  |  |  |  |  |  |......
             +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

                                  Figure 3



Chen, et al.               Expires 8 May 2022                   [Page 4]

Internet-Draft       Anycast Property advertisement        November 2021


   Where:

   E-Flag: Refer to [RFC9089] in section 3.1.

   N-Flag: Refer to [RFC8362] in section 3.1.1.

   P/x/LA/NU-Flag: Refer to [RFC5340].

   AC-Flag: A new flag is used to advertise the anycast property.  When
   the prefix is configured as anycast, the AC-flag SHOULD be set.
   Otherwise, this flag MUST be clear.If both N-flag and AC-flag are
   set, the receiving routers MUST ignore the N-flag.

   AC-flag MUST be preserved when the prefix is propagated between
   areas.

   The same prefix can be advertised by multiple routers, and that if at
   least one of them sets the AC-Flag in its advertisement, the prefix
   SHOULD be considered as anycast.

   The other bits are reserved for future use.

3.  Processing

   If there is an device in the network that does not support the
   Extension of the Prefix attributes Sub-TLV, then the device that
   support the Extension of the Prefix attributes Sub-TLV should
   advertise the field of capabilities of the Prefix by using prefix-
   options[RFC8362]or prefix-flags[RFC7684], and the Prefix attributes
   Sub-TLV.  Otherwise, only use the Prefix attributes Sub-TLV to
   advertise the field of capabilities of the Prefix.

   If prefix is advertised along with the field of capabilities, by
   using the Prefix attributes Sub-TLV, then the field of capabilities
   of the Prefix in the OSPFv2/OSPFv3 Prefix attributes Sub-TLV shall
   prevail.

   As long as the Prefix attributes Sub-TLV is used to advertise the
   field of capabilities and the device support the Extension of the
   Prefix attributes Sub-TLV, then the field of capabilities in the
   Prefix attributes Sub-TLV shall prevail.

   If prefix is advertised along with the field of capabilities, by
   using only the prefix-options[RFC8362]or prefix-flags[RFC7684], then
   the field of capabilities in the prefix-options[RFC8362]or prefix-
   flags[RFC7684] shall prevail.





Chen, et al.               Expires 8 May 2022                   [Page 5]

Internet-Draft       Anycast Property advertisement        November 2021


4.  Acknowledgements

   TBD.

5.  IANA Considerations

   This document requests allocation for the following registry.

5.1.  OSPFv2 Extended Prefix Sub-TLV Registry

   This document requests allocation for OSPFv2 Extended Prefix Sub-TLV
   Registry:



       Value            Description                         Reference
       ------     ----------------------------------      --------------
        TBA        OSPFv2 Prefix attributes Sub-TLV        This document

                                Figure 4

   This document adds a new bit in the "OSPFv2 Prefix attributes Sub-
   TLV" registry:

   AC-flag (Anycast Flag).

5.2.  OSPFv3 Extended LSA Sub-TLV Registry

   This document requests allocation for OSPFv3 Extended LSA Sub-TLV
   Registry:



      Value            Description                         Reference
      ------     ----------------------------------       --------------
       TBA        OSPFv3 Prefix attributes Sub-TLV        This document

                               Figure 5

   This document adds a new bit in the "OSPFv3 Prefix attributes TLV"
   registry:

   AC-flag (Anycast Flag).








Chen, et al.               Expires 8 May 2022                   [Page 6]

Internet-Draft       Anycast Property advertisement        November 2021


6.  Security Considerations

   Procedures and protocol extensions defined in this document do not
   affect the OSPFv2 , OSPFv3 security model.  See the "Security
   Considerations"section of [RFC7684] for a discussion of OSPFv2
   security, the "Security Considerations"section of [RFC8362] for a
   discussion of OSPFv3 security.

7.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5340]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", RFC 5340, DOI 10.17487/RFC5340, July 2008,
              <https://www.rfc-editor.org/info/rfc5340>.

   [RFC7684]  Psenak, P., Gredler, H., Shakir, R., Henderickx, W.,
              Tantsura, J., and A. Lindem, "OSPFv2 Prefix/Link Attribute
              Advertisement", RFC 7684, DOI 10.17487/RFC7684, November
              2015, <https://www.rfc-editor.org/info/rfc7684>.

   [RFC8362]  Lindem, A., Roy, A., Goethals, D., Reddy Vallem, V., and
              F. Baker, "OSPFv3 Link State Advertisement (LSA)
              Extensibility", RFC 8362, DOI 10.17487/RFC8362, April
              2018, <https://www.rfc-editor.org/info/rfc8362>.

   [RFC9089]  Xu, X., Kini, S., Psenak, P., Filsfils, C., Litkowski, S.,
              and M. Bocci, "Signaling Entropy Label Capability and
              Entropy Readable Label Depth Using OSPF", RFC 9089,
              DOI 10.17487/RFC9089, August 2021,
              <https://www.rfc-editor.org/info/rfc9089>.

Authors' Addresses

   Ran Chen
   ZTE Corporation
   Nanjing
   China

   Email: chen.ran@zte.com.cn








Chen, et al.               Expires 8 May 2022                   [Page 7]

Internet-Draft       Anycast Property advertisement        November 2021


   Detao Zhao
   ZTE Corporation
   Nanjing
   China

   Email: zhao.detao@zte.com.cn


   Peter Psenak
   Cisco Systems
   Slovakia

   Email: ppsenak@cisco.com


   Ketan Talaulikar
   Cisco Systems
   India

   Email: ketant@cisco.com































Chen, et al.               Expires 8 May 2022                   [Page 8]
