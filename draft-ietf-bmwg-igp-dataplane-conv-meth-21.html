<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Benchmarking
    Methodology for Link-State IGP Data Plane Route Convergence</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Benchmarking
    Methodology for Link-State IGP Data Plane Route Convergence">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">S. Poretsky</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Allot Communications</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">B. Imhoff</td></tr>
<tr><td class="header">Expires: November 11, 2010</td><td class="header">Juniper Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">K. Michielsen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 10, 2010</td></tr>
</table></td></tr></table>
<h1><br />Benchmarking
    Methodology for Link-State IGP Data Plane Route Convergence<br />draft-ietf-bmwg-igp-dataplane-conv-meth-21</h1>

<h3>Abstract</h3>

<p>This document describes the methodology for benchmarking Link-State
      Interior Gateway Protocol (IGP) Route Convergence. The methodology is to
      be used for benchmarking IGP convergence time through externally
      observable (black box) data plane measurements. The methodology can be
      applied to any link-state IGP, such as ISIS and OSPF.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on November 11, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction and Scope<br />
<a href="#anchor2">2.</a>&nbsp;
Existing Definitions<br />
<a href="#test_topologies">3.</a>&nbsp;
Test Topologies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.1.</a>&nbsp;
Test topology for local changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.2.</a>&nbsp;
Test topology for remote changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.3.</a>&nbsp;
Test topology for local ECMP changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.4.</a>&nbsp;
Test topology for remote ECMP changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.5.</a>&nbsp;
Test topology for Parallel Link changes<br />
<a href="#section_conv_and_loc">4.</a>&nbsp;
Convergence Time and Loss of Connectivity Period<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#conv_time_no_instant_loss">4.1.</a>&nbsp;
Convergence Events without instant traffic loss<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.2.</a>&nbsp;
Loss of Connectivity<br />
<a href="#anchor9">5.</a>&nbsp;
Test Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.1.</a>&nbsp;
IGP Selection<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.2.</a>&nbsp;
Routing Protocol Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.3.</a>&nbsp;
IGP Topology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.4.</a>&nbsp;
Timers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.5.</a>&nbsp;
Interface Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.6.</a>&nbsp;
Offered Load<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.7.</a>&nbsp;
Measurement Accuracy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">5.8.</a>&nbsp;
Measurement Statistics<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">5.9.</a>&nbsp;
Tester Capabilities<br />
<a href="#selection_metrics_methods">6.</a>&nbsp;
Selection of Convergence Time Benchmark Metrics and Methods<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">6.1.</a>&nbsp;
Loss-Derived Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">6.1.1.</a>&nbsp;
Tester capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">6.1.2.</a>&nbsp;
Benchmark Metrics<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">6.1.3.</a>&nbsp;
Measurement Accuracy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">6.2.</a>&nbsp;
Rate-Derived Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">6.2.1.</a>&nbsp;
Tester Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">6.2.2.</a>&nbsp;
Benchmark Metrics<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">6.2.3.</a>&nbsp;
Measurement Accuracy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">6.3.</a>&nbsp;
Route-Specific Loss-Derived Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">6.3.1.</a>&nbsp;
Tester Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">6.3.2.</a>&nbsp;
Benchmark Metrics<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">6.3.3.</a>&nbsp;
Measurement Accuracy<br />
<a href="#anchor31">7.</a>&nbsp;
Reporting Format<br />
<a href="#test_cases">8.</a>&nbsp;
Test Cases<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">8.1.</a>&nbsp;
Interface failures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_local_link_failure">8.1.1.</a>&nbsp;
Convergence Due to Local Interface Failure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_remote_link_failure">8.1.2.</a>&nbsp;
Convergence Due to Remote Interface Failure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_local_lb_link_failure">8.1.3.</a>&nbsp;
Convergence Due to ECMP Member Local Interface Failure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_remote_lb_link_failure">8.1.4.</a>&nbsp;
Convergence Due to ECMP Member Remote Interface Failure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_parallel_link_failure">8.1.5.</a>&nbsp;
Convergence Due to Parallel Link Interface Failure <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">8.2.</a>&nbsp;
Other failures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_layer2_session_failure">8.2.1.</a>&nbsp;
Convergence Due to Layer 2 Session Loss<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_igp_adj_failure">8.2.2.</a>&nbsp;
Convergence Due to Loss of IGP Adjacency<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_route_withdrawal">8.2.3.</a>&nbsp;
Convergence Due to Route Withdrawal<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">8.3.</a>&nbsp;
Administrative changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor35">8.3.1.</a>&nbsp;
Convergence Due to Local Adminstrative Shutdown<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#testcase_route_cost_change">8.3.2.</a>&nbsp;
Convergence Due to Cost Change<br />
<a href="#anchor36">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor37">10.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor38">11.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">12.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction and Scope</h3>

<p>This document describes the methodology for benchmarking Link-State
      Interior Gateway Protocol (IGP) convergence. The motivation and
      applicability for this benchmarking is described in <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>. The terminology to be used for this benchmarking
      is described in <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<p>IGP convergence time is measured on the data plane at the Tester by
      observing packet loss through the DUT. All factors contributing to
      convergence time are accounted for by measuring on the data plane, as
      discussed in <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>. The test cases in this
      document are black-box tests that emulate the network events that cause
      convergence, as described in <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<p>The methodology described in this document can be applied to IPv4 and
      IPv6 traffic and link-state IGPs such as ISIS <a class='info' href='#Ca90'>[Ca90]<span> (</span><span class='info'>Callon, R., &ldquo;Use of OSI           IS-IS for routing in TCP/IP and dual environments,&rdquo; December&nbsp;1990.</span><span>)</span></a><a class='info' href='#Ho08'>[Ho08]<span> (</span><span class='info'>Hopps, C., &ldquo;Routing IPv6 with IS-IS,&rdquo; October&nbsp;2008.</span><span>)</span></a>, OSPF <a class='info' href='#Mo98'>[Mo98]<span> (</span><span class='info'>Moy, J., &ldquo;OSPF Version 2,&rdquo; April&nbsp;1998.</span><span>)</span></a><a class='info' href='#Co08'>[Co08]<span> (</span><span class='info'>Coltun, R., Ferguson, D., Moy, J., and A. Lindem, &ldquo;OSPF for IPv6,&rdquo; July&nbsp;2008.</span><span>)</span></a>, and others.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Existing Definitions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in BCP 14, RFC 2119 <a class='info' href='#Br97'>[Br97]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate           Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. RFC 2119 defines the use of these key words to
      help make the intent of standards track documents as clear as possible.
      While this document uses these keywords, this document is not a
      standards track document.
</p>
<p>This document uses much of the terminology defined in <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> and uses existing terminology defined in other
      BMWG work. Examples include, but are not limited to:
</p><br /><hr class="insert" />
<a name="table_terminology"></a>
<table class="none" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="50%"><col align="left">
<tr>
<td align="left">Throughput</td>
<td align="left">[Ref.<a class='info' href='#Br91'>[Br91]<span> (</span><span class='info'>Bradner, S., &ldquo;Benchmarking terminology           for network interconnection devices,&rdquo; July&nbsp;1991.</span><span>)</span></a>, section 3.17]</td>
</tr>
<tr>
<td align="left">Device Under Test (DUT)</td>
<td align="left">[Ref.<a class='info' href='#Ma98'>[Ma98]<span> (</span><span class='info'>Mandeville, R., &ldquo;Benchmarking Terminology           for LAN Switching Devices,&rdquo; February&nbsp;1998.</span><span>)</span></a>, section 3.1.1]</td>
</tr>
<tr>
<td align="left">System Under Test (SUT)</td>
<td align="left">[Ref.<a class='info' href='#Ma98'>[Ma98]<span> (</span><span class='info'>Mandeville, R., &ldquo;Benchmarking Terminology           for LAN Switching Devices,&rdquo; February&nbsp;1998.</span><span>)</span></a>, section 3.1.2]</td>
</tr>
<tr>
<td align="left">Out-of-Order Packet</td>
<td align="left">[Ref.<a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>, section 3.3.4]</td>
</tr>
<tr>
<td align="left">Duplicate Packet</td>
<td align="left">[Ref.<a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>, section 3.3.5]</td>
</tr>
<tr>
<td align="left">Stream</td>
<td align="left">[Ref.<a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>, section 3.3.2]</td>
</tr>
<tr>
<td align="left">Loss Period</td>
<td align="left">[Ref.<a class='info' href='#Ko02'>[Ko02]<span> (</span><span class='info'>Koodli, R. and R. Ravikanth, &ldquo;One-way Loss Pattern Sample Metrics,&rdquo; August&nbsp;2002.</span><span>)</span></a>, section 4]</td>
</tr>
<tr>
<td align="left">Forwarding Delay</td>
<td align="left">[Ref.<a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>, section 3.2.4]</td>
</tr>
<tr>
<td align="left">IP Packet Delay Variation (IPDV)</td>
<td align="left">[Ref.<a class='info' href='#De02'>[De02]<span> (</span><span class='info'>Demichelis, C. and P. Chimento, &ldquo;IP Packet Delay Variation Metric for IP Performance Metrics           (IPPM),&rdquo; November&nbsp;2002.</span><span>)</span></a>, section 1.2]</td>
</tr>
</table>
<br clear="all" />

<a name="test_topologies"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Test Topologies</h3>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Test topology for local changes</h3>

<p>Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a> shows the
        test topology to measure IGP convergence time due to local Convergence
        Events such as Local Interface failure (<a class='info' href='#testcase_local_link_failure'>Section&nbsp;8.1.1<span> (</span><span class='info'>Convergence Due to Local Interface Failure</span><span>)</span></a>), layer 2 session failure
        (<a class='info' href='#testcase_layer2_session_failure'>Section&nbsp;8.2.1<span> (</span><span class='info'>Convergence Due to Layer 2 Session Loss</span><span>)</span></a>), and IGP
        adjacency failure (<a class='info' href='#testcase_igp_adj_failure'>Section&nbsp;8.2.2<span> (</span><span class='info'>Convergence Due to Loss of IGP Adjacency</span><span>)</span></a>).
        This topology is also used to measure IGP convergence time due to the
        route withdrawal (<a class='info' href='#testcase_route_withdrawal'>Section&nbsp;8.2.3<span> (</span><span class='info'>Convergence Due to Route Withdrawal</span><span>)</span></a>),
        and route cost change (<a class='info' href='#testcase_route_cost_change'>Section&nbsp;8.3.2<span> (</span><span class='info'>Convergence Due to Cost Change</span><span>)</span></a>) Convergence Events. IGP
        adjacencies MUST be established between Tester and DUT, one on the
        Preferred Egress Interface and one on the Next-Best Egress Interface.
        For this purpose the Tester emulates two routers, each establishing
        one adjacency with the DUT. An IGP adjacency SHOULD be established on
        the Ingress Interface between Tester and DUT.
</p><br /><hr class="insert" />
<a name="local_nlb"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
---------       Ingress Interface         ----------
|       |&lt;--------------------------------|        |
|       |                                 |        |
|       |    Preferred Egress Interface   |        |
|  DUT  |--------------------------------&gt;| Tester |
|       |                                 |        |
|       |--------------------------------&gt;|        |
|       |    Next-Best Egress Interface   |        |
---------                                 ----------
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: IGP convergence test topology for local changes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Figure <a class='info' href='#local_lb_1toN'>2<span> (</span><span class='info'>IGP convergence test topology for local changes with non-ECMP to ECMP convergence</span><span>)</span></a> shows
        the test topology to measure IGP convergence time due to local
        Convergence Events with a non-ECMP Preferred Egress Interface and ECMP
        Next-Best Egress Interfaces (<a class='info' href='#testcase_local_link_failure'>Section&nbsp;8.1.1<span> (</span><span class='info'>Convergence Due to Local Interface Failure</span><span>)</span></a>). In this topology, the
        DUT is configured with each Next-Best Egress interface as a member of
        a single ECMP set. The Preferred Egress Interface is not a member of
        an ECMP set. The Tester emulates N+1 next-hop routers, one router for
        the Preferred Egress Interface and N routers for the members of the
        ECMP set. IGP adjacencies MUST be established between Tester and DUT,
        one on the Preferred Egress Interface, an one on each member of the
        ECMP set. For this purpose each of the N+1 routers emulated by the
        Tester establishes one adjacency with the DUT. An IGP adjacency SHOULD
        be established on the Ingress Interface between Tester and DUT. When
        the test specifies to observe the Next-Best Egress Interface
        statistics, the combined statistics for all ECMP members should be
        observed.
</p><br /><hr class="insert" />
<a name="local_lb_1toN"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
---------       Ingress Interface         ----------
|       |&lt;--------------------------------|        |
|       |    Preferred Egress Interface   |        |
|       |--------------------------------&gt;|        |
|       |     ECMP set interface 1        |        |
|  DUT  |--------------------------------&gt;| Tester |
|       |               .                 |        |
|       |               .                 |        |
|       |--------------------------------&gt;|        |
|       |     ECMP set interface N        |        |
---------                                 ----------
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: IGP convergence test topology for local changes with non-ECMP to ECMP convergence&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Test topology for remote changes</h3>

<p>Figure <a class='info' href='#remote_nlb'>3<span> (</span><span class='info'>IGP convergence test topology for remote changes</span><span>)</span></a> shows the
        test topology to measure IGP convergence time due to Remote Interface
        failure (<a class='info' href='#testcase_remote_link_failure'>Section&nbsp;8.1.2<span> (</span><span class='info'>Convergence Due to Remote Interface Failure</span><span>)</span></a>). In this
        topology the two routers R1 and R2 are considered System Under Test
        (SUT) and SHOULD be identically configured devices of the same model.
        IGP adjacencies MUST be established between Tester and SUT, one on the
        Preferred Egress Interface and one on the Next-Best Egress Interface.
        For this purpose the Tester emulates one or two routers. An IGP
        adjacency SHOULD be established on the Ingress Interface between
        Tester and SUT. In this topology there is a possibility of a transient
        microloop between R1 and R2 during convergence.
</p><br /><hr class="insert" />
<a name="remote_nlb"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
         ------                      ----------
         |    |  Preferred           |        |
------   | R2 |---------------------&gt;|        |
|    |--&gt;|    |  Egress Interface    |        |
|    |   ------                      |        |
| R1 |                               | Tester |
|    |           Next-Best           |        |
|    |------------------------------&gt;|        |
------           Egress Interface    |        |
   ^                                 ----------
   |                                     |
   ---------------------------------------
               Ingress Interface
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: IGP convergence test topology for remote changes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Figure <a class='info' href='#remote_lb_1toN'>4<span> (</span><span class='info'>IGP convergence test topology for remote changes with non-ECMP to ECMP convergence</span><span>)</span></a> shows
        the test topology to measure IGP convergence time due to remote
        Convergence Events with a non-ECMP Preferred Egress Interface and ECMP
        Next-Best Egress Interfaces (<a class='info' href='#testcase_remote_link_failure'>Section&nbsp;8.1.2<span> (</span><span class='info'>Convergence Due to Remote Interface Failure</span><span>)</span></a>). In this topology the
        two routers R1 and R2 are considered System Under Test (SUT) and MUST
        be identically configured devices of the same model. Router R1 is
        configured with each Next-Best Egress interface as a member of the
        same ECMP set. The Preferred Egress Interface of R1 is not a member of
        an ECMP set. The Tester emulates N+1 next-hop routers, one for R2 and
        one for each member of the ECMP set. IGP adjacencies MUST be
        established between Tester and SUT, one on each egress interface of
        SUT. For this purpose each of the N+1 routers emulated by the Tester
        establishes one adjacency with the SUT. An IGP adjacency SHOULD be
        established on the Ingress Interface between Tester and SUT. In this
        topology there is a possibility of a transient microloop between R1
        and R2 during convergence. When the test specifies to observe the
        Next-Best Egress Interface statistics, the combined statistics for all
        ECMP members should be observed.
</p><br /><hr class="insert" />
<a name="remote_lb_1toN"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
                          ------     ----------
                          |    |     |        |
------      Preferred     | R2 |----&gt;|        |
|    |-------------------&gt;|    |     |        |
|    |  Egress Interface  ------     |        |
|    |                               |        |
|    |      ECMP set interface 1     |        |
| R1 |------------------------------&gt;| Tester |
|    |               .               |        |
|    |               .               |        |
|    |               .               |        |
|    |------------------------------&gt;|        |
------      ECMP set interface N     |        |
   ^                                 ----------
   |                                     |
   ---------------------------------------
               Ingress Interface
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: IGP convergence test topology for remote changes with non-ECMP to ECMP convergence&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Test topology for local ECMP changes</h3>

<p>Figure <a class='info' href='#local_lb'>5<span> (</span><span class='info'>IGP convergence test topology for local ECMP changes</span><span>)</span></a> shows the
        test topology to measure IGP convergence time due to local Convergence
        Events of a member of an Equal Cost Multipath (ECMP) set (<a class='info' href='#testcase_local_lb_link_failure'>Section&nbsp;8.1.3<span> (</span><span class='info'>Convergence Due to ECMP Member Local Interface Failure</span><span>)</span></a>). In this topology,
        the DUT is configured with each egress interface as a member of a
        single ECMP set and the Tester emulates N next-hop routers, one router
        for each member. IGP adjacencies MUST be established between Tester
        and DUT, one on each member of the ECMP set. For this purpose each of
        the N routers emulated by the Tester establishes one adjacency with
        the DUT. An IGP adjacency SHOULD be established on the Ingress
        Interface between Tester and DUT. When the test specifies to observe
        the Next-Best Egress Interface statistics, the combined statistics for
        all ECMP members except the one affected by the Convergence Event,
        should be observed.
</p><br /><hr class="insert" />
<a name="local_lb"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
---------       Ingress Interface         ----------
|       |&lt;--------------------------------|        |
|       |                                 |        |
|       |     ECMP set interface 1        |        |
|       |--------------------------------&gt;|        |
|  DUT  |               .                 | Tester |
|       |               .                 |        |
|       |               .                 |        |
|       |--------------------------------&gt;|        |
|       |     ECMP set interface N        |        |
---------                                 ----------
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: IGP convergence test topology for local ECMP changes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Test topology for remote ECMP changes</h3>

<p>Figure <a class='info' href='#remote_lb'>6<span> (</span><span class='info'>IGP convergence test topology for remote ECMP changes</span><span>)</span></a> shows the
        test topology to measure IGP convergence time due to remote
        Convergence Events of a member of an Equal Cost Multipath (ECMP) set
        (<a class='info' href='#testcase_remote_lb_link_failure'>Section&nbsp;8.1.4<span> (</span><span class='info'>Convergence Due to ECMP Member Remote Interface Failure</span><span>)</span></a>). In this
        topology the two routers R1 and R2 are considered System Under Test
        (SUT) and MUST be identically configured devices of the same model.
        Router R1 is configured with each egress interface as a member of a
        single ECMP set and the Tester emulates N next-hop routers, one router
        for each member. IGP adjacencies MUST be established between Tester
        and SUT, one on each egress interface of SUT. For this purpose each of
        the N routers emulated by the Tester establishes one adjacency with
        the SUT. An IGP adjacency SHOULD be established on the Ingress
        Interface between Tester and SUT. In this topology there is a
        possibility of a transient microloop between R1 and R2 during
        convergence. When the test specifies to observe the Next-Best Egress
        Interface statistics, the combined statistics for all ECMP members
        except the one affected by the Convergence Event, should be
        observed.
</p><br /><hr class="insert" />
<a name="remote_lb"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
                          ------     ----------
                          |    |     |        |
------      ECMP set      | R2 |----&gt;|        |
|    |-------------------&gt;|    |     |        |
|    |      Interface 1   ------     |        |
|    |                               |        |
|    |      ECMP set interface 2     |        |
| R1 |------------------------------&gt;| Tester |
|    |               .               |        |
|    |               .               |        |
|    |               .               |        |
|    |------------------------------&gt;|        |
------      ECMP set interface N     |        |
   ^                                 ----------
   |                                     |
   ---------------------------------------
               Ingress Interface
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: IGP convergence test topology for remote ECMP changes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Test topology for Parallel Link changes</h3>

<p>Figure <a class='info' href='#local_parallel'>7<span> (</span><span class='info'>IGP convergence test topology for Parallel Link changes</span><span>)</span></a> shows
        the test topology to measure IGP convergence time due to local
        Convergence Events with members of a Parallel Link (<a class='info' href='#testcase_parallel_link_failure'>Section&nbsp;8.1.5<span> (</span><span class='info'>Convergence Due to Parallel Link Interface Failure </span><span>)</span></a>). In this topology,
        the DUT is configured with each egress interface as a member of a
        Parallel Link and the Tester emulates the single next-hop router. IGP
        adjacencies MUST be established on all N members of the Parallel Link
        between Tester and DUT. For this purpose the router emulated by the
        Tester establishes N adjacencies with the DUT. An IGP adjacency SHOULD
        be established on the Ingress Interface between Tester and DUT. When
        the test specifies to observe the Next-Best Egress Interface
        statistics, the combined statistics for all Parallel Link members
        except the one affected by the Convergence Event, should be
        observed.
</p><br /><hr class="insert" />
<a name="local_parallel"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
---------       Ingress Interface         ----------
|       |&lt;--------------------------------|        |
|       |                                 |        |
|       |     Parallel Link Interface 1   |        |
|       |--------------------------------&gt;|        |
|  DUT  |               .                 | Tester |
|       |               .                 |        |
|       |               .                 |        |
|       |--------------------------------&gt;|        |
|       |     Parallel Link Interface N   |        |
---------                                 ----------
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: IGP convergence test topology for Parallel Link changes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="section_conv_and_loc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Convergence Time and Loss of Connectivity Period</h3>

<p>Two concepts will be highlighted in this section: convergence time
      and loss of connectivity period.
</p>
<p>The Route Convergence <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> time indicates the
      period in time between the Convergence Event Instant <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> and the instant in time the DUT is ready to
      forward traffic for a specific route on its Next-Best Egress Interface
      and maintains this state for the duration of the Sustained Convergence
      Validation Time <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>. To measure Route
      Convergence time, the Convergence Event Instant and the traffic received
      from the Next-Best Egress Interface need to be observed.
</p>
<p>The Route Loss of Connectivity Period <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>
      indicates the time during which traffic to a specific route is lost
      following a Convergence Event until Full Convergence <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> completes. This Route Loss of Connectivity Period
      can consist of one or more Loss Periods <a class='info' href='#Ko02'>[Ko02]<span> (</span><span class='info'>Koodli, R. and R. Ravikanth, &ldquo;One-way Loss Pattern Sample Metrics,&rdquo; August&nbsp;2002.</span><span>)</span></a>. For
      the testcases described in this document it is expected to have a single
      Loss Period. To measure Route Loss of Connectivity Period, the traffic
      received from the Preferred Egress Interface and the traffic received
      from the Next-Best Egress Interface need to be observed.
</p>
<p>The Route Loss of Connectivity Period is most important since that
      has a direct impact on the network user's application performance.
</p>
<p>In general the Route Convergence time is larger than or equal to the
      Route Loss of Connectivity Period. Depending on which Convergence Event
      occurs and how this Convergence Event is applied, traffic for a route
      may still be forwarded over the Preferred Egress Interface after the
      Convergence Event Instant, before converging to the Next-Best Egress
      Interface. In that case the Route Loss of Connectivity Period is shorter
      than the Route Convergence time.
</p>
<p>At least one condition needs to be fulfilled for Route Convergence
      time to be equal to Route Loss of Connectivity Period. The condition is
      that the Convergence Event causes an instantaneous traffic loss for the
      measured route. A fiber cut on the Preferred Egress Interface is an
      example of such a Convergence Event.
</p>
<p>A second condition applies to Route Convergence time measurements
      based on Connectivity Packet Loss <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>. This
      second condition is that there is only a single Loss Period during Route
      Convergence. For the testcases described in this document this is
      expected to be the case.
</p>
<a name="conv_time_no_instant_loss"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Convergence Events without instant traffic loss</h3>

<p>To measure convergence time benchmarks for Convergence Events
        caused by a Tester, such as an IGP cost change, the Tester MAY start
        to discard all traffic received from the Preferred Egress Interface at
        the Convergence Event Instant, or MAY separately observe packets
        received from the Preferred Egress Interface prior to the Convergence
        Event Instant. This way these Convergence Events can be treated the
        same as Convergence Events that cause instantaneous traffic loss.
</p>
<p>To measure convergence time benchmarks without instantaneous
        traffic loss (either real or induced by the Tester) at the Convergence
        Event Instant, such as a reversion of a link failure Convergence
        Event, the Tester SHALL only observe packet statistics on the
        Next-Best Egress Interface. If using the Rate-Derived method to
        benchmark convergence times for such Convergence Events, the Tester
        MUST collect a timestamp at the Convergence Event Instant. If using a
        loss-derived method to benchmark convergence times for such
        Convergence Events, the Tester MUST measure the period in time between
        the Start Traffic Instant and the Convergence Event Instant. To
        measure this period in time the Tester can collect timestamps at the
        Start Traffic Instant and the Convergence Event Instant.
</p>
<p>The Convergence Event Instant together with the receive rate
        observations on the Next-Best Egress Interface allow to derive the
        convergence time benchmarks using the Rate-Derived Method <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<p>By observing lost packets on the Next-Best Egress Interface only,
        the observed packet loss is the number of lost packets between Traffic
        Start Instant and Convergence Recovery Instant. To measure convergence
        times using a loss-derived method, packet loss between the Convergence
        Event Instant and the Convergence Recovery Instant is needed. The time
        between Traffic Start Instant and Convergence Event Instant must be
        accounted for. An example may clarify this.
</p>
<p>Figure <a class='info' href='#non_instant_loss_example'>8</a> illustrates a Convergence
        Event without instantaneous traffic loss for all routes. The top graph
        shows the Forwarding Rate over all routes, the bottom graph shows the
        Forwarding Rate for a single route Rta. Some time after the
        Convergence Event Instant, Forwarding Rate observed on the Preferred
        Egress Interface starts to decrease. In the example, route Rta is the
        first route to experience packet loss at time Ta. Some time later, the
        Forwarding Rate observed on the Next-Best Egress Interface starts to
        increase. In the example, route Rta is the first route to complete
        convergence at time Ta'.
</p><br /><hr class="insert" />
<a name="non_instant_loss_example"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
     ^
Fwd  |
Rate |-------------                    ............
     |             \                  .
     |              \                .
     |               \              .
     |                \            .
     |.................-.-.-.-.-.-.----------------
     +----+-------+---------------+-----------------&gt;
     ^    ^       ^               ^             time
    T0   CEI      Ta              Ta'

     ^
Fwd  |
Rate |-------------               .................
Rta  |            |               .
     |            |               .
     |.............-.-.-.-.-.-.-.-.----------------
     +----+-------+---------------+-----------------&gt;
     ^    ^       ^               ^             time
    T0   CEI      Ta              Ta'

     Preferred Egress Interface: ---
     Next-Best Egress Interface: ...
</pre></div>
<p style='text-align: left'>With T0 the Start Traffic Instant; CEI the Convergence
          Event Instant; Ta the time instant traffic loss for route Rta
          starts; Ta' the time instant traffic loss for route Rta
          ends.
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>If only packets received on the Next-Best Egress Interface are
        observed, the duration of the packet loss period for route Rta can be
        calculated from the received packets as in Equation 1. Since the
        Convergence Event Instant is the start time for convergence time
        measurement, the period in time between T0 and CEI needs to be
        subtracted from the calculated result to become the convergence time,
        as in Equation 2.
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Next-Best Egress Interface packet loss period
    = (packets transmitted
        - packets received from Next-Best Egress Interface) / tx rate
    = Ta' - T0
</pre></div>
<p style='text-align: center'>Equation 1
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
convergence time
    = Next-Best Egress Interface packet loss period - (CEI - T0)
    = Ta' - CEI
</pre></div>
<p style='text-align: center'>Equation 2
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Loss of Connectivity</h3>

<p>Route Loss of Connectivity Period SHOULD be measured using the
        Route-Specific Loss-Derived Method. Since the start instant and end
        instant of the Route Loss of Connectivity Period can be different for
        each route, these can not be accurately derived by only observing
        global statistics over all routes. An example may clarify this.
</p>
<p>Following a Convergence Event, route Rta is the first route for
        which packet loss starts, the Route Loss of Connectivity Period for
        route Rta starts at time Ta. Route Rtb is the last route for which
        packet loss starts, the Route Loss of Connectivity Period for route
        Rtb starts at time Tb with Tb&gt;Ta.
</p><br /><hr class="insert" />
<a name="Fig7"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
     ^
Fwd  |
Rate |--------                       -----------
     |        \                     /
     |         \                   /
     |          \                 /
     |           \               /
     |            ---------------
     +------------------------------------------&gt;
              ^   ^             ^    ^      time
             Ta   Tb           Ta'   Tb'
                               Tb''  Ta''

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Example Route Loss Of Connectivity Period&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>If the DUT implementation would be such that Route Rta would be the
        first route for which traffic loss ends at time Ta' with Ta'&gt;Tb.
        Route Rtb would be the last route for which traffic loss ends at time
        Tb' with Tb'&gt;Ta'. By using only observing global traffic statistics
        over all routes, the minimum Route Loss of Connectivity Period would
        be measured as Ta'-Ta. The maximum calculated Route Loss of
        Connectivity Period would be Tb'-Ta. The real minimum and maximum
        Route Loss of Connectivity Periods are Ta'-Ta and Tb'-Tb. Illustrating
        this with the numbers Ta=0, Tb=1, Ta'=3, and Tb'=5, would give a LoC
        Period between 3 and 5 derived from the global traffic statistics,
        versus the real LoC Period between 3 and 4.
</p>
<p>If the DUT implementation would be such that route Rtb would be the
        first for which packet loss ends at time Tb'' and route Rta would be
        the last for which packet loss ends at time Ta'', then the minimum and
        maximum Route Loss of Connectivity Periods derived by observing only
        global traffic statistics would be Tb''-Ta, and Ta''-Ta. The real
        minimum and maximum Route Loss of Connectivity Periods are Tb''-Tb and
        Ta''-Ta. Illustrating this with the numbers Ta=0, Tb=1, Ta''=5,
        Tb''=3, would give a LoC Period between 3 and 5 derived from the
        global traffic statistics, versus the real LoC Period between 2 and
        5.
</p>
<p>The two implementation variations in the above example would result
        in the same derived minimum and maximum Route Loss of Connectivity
        Periods when only observing the global packet statistics, while the
        real Route Loss of Connectivity Periods are different.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Test Considerations</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
IGP Selection</h3>

<p>The test cases described in Section <a class='info' href='#test_cases'>8<span> (</span><span class='info'>Test Cases</span><span>)</span></a> MAY be used for link-state IGPs, such as
        ISIS or OSPF. The IGP convergence time test methodology is
        identical.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Routing Protocol Configuration</h3>

<p>The obtained results for IGP convergence time may vary if other
        routing protocols are enabled and routes learned via those protocols
        are installed. IGP convergence times SHOULD be benchmarked without
        routes installed from other protocols.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
IGP Topology</h3>

<p>The Tester emulates a single IGP topology. The DUT establishes IGP
        adjacencies with one or more of the emulated routers in this single
        IGP topology emulated by the Tester. See test topology details in
        <a class='info' href='#test_topologies'>Section&nbsp;3<span> (</span><span class='info'>Test Topologies</span><span>)</span></a>. The emulated topology SHOULD
        only be advertised on the DUT egress interfaces.
</p>
<p>The number of IGP routes and number of nodes in the topology, and
        the type of topology will impact the measured IGP convergence time. To
        obtain results similar to those that would be observed in an
        operational network, it is RECOMMENDED that the number of installed
        routes and nodes closely approximate that of the network (e.g.
        thousands of routes with tens or hundreds of nodes).
</p>
<p>The number of areas (for OSPF) and levels (for ISIS) can impact the
        benchmark results.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Timers</h3>

<p>There are timers that may impact the measured IGP convergence
        times. The benchmark metrics MAY be measured at any fixed values for
        these timers. To obtain results similar to those that would be
        observed in an operational network, it is RECOMMENDED to configure the
        timers with the values as configured in the operational network.
</p>
<p>Examples of timers that may impact measured IGP convergence time
        include, but are not limited to:
</p>
<p></p>
<blockquote class="text">
<p>Interface failure indication
</p>
<p>IGP hello timer
</p>
<p>IGP dead-interval or hold-timer
</p>
<p>LSA or LSP generation delay
</p>
<p>LSA or LSP flood packet pacing
</p>
<p>SPF delay
</p>
</blockquote>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Interface Types</h3>

<p>All test cases in this methodology document MAY be executed with
        any interface type. The type of media may dictate which test cases may
        be executed. Each interface type has a unique mechanism for detecting
        link failures and the speed at which that mechanism operates will
        influence the measurement results. All interfaces MUST be the same
        media and Throughput <a class='info' href='#Br91'>[Br91]<span> (</span><span class='info'>Bradner, S., &ldquo;Benchmarking terminology           for network interconnection devices,&rdquo; July&nbsp;1991.</span><span>)</span></a><a class='info' href='#Br99'>[Br99]<span> (</span><span class='info'>Bradner, S. and J. McQuaid, &ldquo;Benchmarking Methodology           for Network Interconnect Devices,&rdquo; March&nbsp;1999.</span><span>)</span></a> for each test case. All interfaces SHOULD be
        configured as point-to-point.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Offered Load</h3>

<p>The Throughput of the device, as defined in <a class='info' href='#Br91'>[Br91]<span> (</span><span class='info'>Bradner, S., &ldquo;Benchmarking terminology           for network interconnection devices,&rdquo; July&nbsp;1991.</span><span>)</span></a> and benchmarked in <a class='info' href='#Br99'>[Br99]<span> (</span><span class='info'>Bradner, S. and J. McQuaid, &ldquo;Benchmarking Methodology           for Network Interconnect Devices,&rdquo; March&nbsp;1999.</span><span>)</span></a>
        at a fixed packet size, needs to be determined over the preferred path
        and over the next-best path. The Offered Load SHOULD be the minimum of
        the measured Throughput of the device over the primary path and over
        the backup path. The packet size is selectable and MUST be recorded.
        Packet size is measured in bytes and includes the IP header and
        payload.
</p>
<p>The destination addresses for the Offered Load MUST be distributed
        such that all routes or a statistically representative subset of all
        routes are matched and each of these routes is offered an equal share
        of the Offered Load. It is RECOMMENDED to send traffic matching all
        routes, but a statistically representative subset of all routes can be
        used if required.
</p>
<p>In the Remote Interface failure testcases using topologies <a class='info' href='#remote_nlb'>3<span> (</span><span class='info'>IGP convergence test topology for remote changes</span><span>)</span></a>, <a class='info' href='#remote_lb_1toN'>4<span> (</span><span class='info'>IGP convergence test topology for remote changes with non-ECMP to ECMP convergence</span><span>)</span></a>, and <a class='info' href='#remote_lb'>6<span> (</span><span class='info'>IGP convergence test topology for remote ECMP changes</span><span>)</span></a> there is a possibility of a transient
        microloop between R1 and R2 during convergence. The TTL or Hop Limit
        value of the packets sent by the Tester may influence the benchmark
        measurements since it determines which device in the topology may send
        an ICMP Time Exceeded Message for looped packets.
</p>
<p>The duration of the Offered Load MUST be greater than the
        convergence time plus the Sustained Convergence Validation Time.
</p>
<p>Offered load should send a packet to each destination before
        sending another packet to the same destination. It is RECOMMENDED that
        the packets are transmitted in a round-robin fashion with a uniform
        interpacket delay.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
Measurement Accuracy</h3>

<p>Since packet loss is observed to measure the Route Convergence
        Time, the time between two successive packets offered to each
        individual route is the highest possible accuracy of any packet loss
        based measurement. The higher the traffic rate offered to each route
        the higher the possible measurement accuracy.
</p>
<p>Also see Section <a class='info' href='#selection_metrics_methods'>6<span> (</span><span class='info'>Selection of Convergence Time Benchmark Metrics and Methods</span><span>)</span></a> for method-specific
        measurement accuracy.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.8"></a><h3>5.8.&nbsp;
Measurement Statistics</h3>

<p>The benchmark measurements may vary for each trial, due to the
        statistical nature of timer expirations, cpu scheduling, etc.
        Evaluation of the test data must be done with an understanding of
        generally accepted testing practices regarding repeatability, variance
        and statistical significance of a small number of trials.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.9"></a><h3>5.9.&nbsp;
Tester Capabilities</h3>

<p>It is RECOMMENDED that the Tester used to execute each test case
        has the following capabilities:
</p>
<p></p>
<ol class="text">
<li>Ability to establish IGP adjacencies and advertise a single IGP
            topology to one or more peers.
</li>
<li>Ability to measure Forwarding Delay, Duplicate Packets and
            Out-of-Order Packets.
</li>
<li>An internal time clock to control timestamping, time
            measurements, and time calculations.
</li>
<li>Ability to distinguish traffic load received on the Preferred
            and Next-Best Interfaces <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</li>
<li>Ability to disable or tune specific Layer-2 and Layer-3
            protocol functions on any interface(s).
</li>
</ol>

<p>The Tester MAY be capable to make non-data plane convergence
        observations and use those observations for measurements. The Tester
        MAY be capable to send and receive multiple traffic Streams <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</p>
<p>Also see Section <a class='info' href='#selection_metrics_methods'>6<span> (</span><span class='info'>Selection of Convergence Time Benchmark Metrics and Methods</span><span>)</span></a> for method-specific
        capabilities.
</p>
<a name="selection_metrics_methods"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Selection of Convergence Time Benchmark Metrics and Methods</h3>

<p>Different convergence time benchmark methods MAY be used to measure
      convergence time benchmark metrics. The Tester capabilities are
      important criteria to select a specific convergence time benchmark
      method. The criteria to select a specific benchmark method include, but
      are not limited to:
</p><br /><hr class="insert" />
<a name="table_tester_capabilities"></a>
<table class="none" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="50%"><col align="left">
<tr>
<td align="left">Tester capabilities:</td>
<td align="left">Sampling Interval, number of Stream statistics to collect</td>
</tr>
<tr>
<td align="left">Measurement accuracy:</td>
<td align="left">Sampling Interval, Offered Load, number of routes</td>
</tr>
<tr>
<td align="left">Test specification:</td>
<td align="left">number of routes</td>
</tr>
<tr>
<td align="left">DUT capabilities:</td>
<td align="left">Throughput, IP Packet Delay Variation</td>
</tr>
</table>
<br clear="all" />

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Loss-Derived Method</h3>

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Tester capabilities</h3>

<p>The Offered Load SHOULD consist of a single Stream <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>. If sending multiple Streams, the measured
          packet loss statistics for all Streams MUST be added together.
</p>
<p>In order to verify Full Convergence completion and the Sustained
          Convergence Validation Time, the Tester MUST measure Forwarding Rate
          each Packet Sampling Interval.
</p>
<p>The total number of packets lost between the start of the traffic
          and the end of the Sustained Convergence Validation Time is used to
          calculate the Loss-Derived Convergence Time.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
Benchmark Metrics</h3>

<p>The Loss-Derived Method can be used to measure the Loss-Derived
          Convergence Time, which is the average convergence time over all
          routes, and to measure the Loss-Derived Loss of Connectivity Period,
          which is the average Route Loss of Connectivity Period over all
          routes.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.3"></a><h3>6.1.3.&nbsp;
Measurement Accuracy</h3>

<p>The actual value falls within the accuracy interval [-(number of
          destinations/Offered Load), +(number of destinations/Offered Load)]
          around the value as measured using the Loss-Derived Method.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Rate-Derived Method</h3>

<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Tester Capabilities</h3>

<p>The Offered Load SHOULD consist of a single Stream. If sending
          multiple Streams, the measured traffic rate statistics for all
          Streams MUST be added together.
</p>
<p>The Tester measures Forwarding Rate each Sampling Interval. The
          Packet Sampling Interval influences the observation of the different
          convergence time instants. If the Packet Sampling Interval is large
          compared to the time between the convergence time instants, then the
          different time instants may not be easily identifiable from the
          Forwarding Rate observation. The presence of IPDV <a class='info' href='#De02'>[De02]<span> (</span><span class='info'>Demichelis, C. and P. Chimento, &ldquo;IP Packet Delay Variation Metric for IP Performance Metrics           (IPPM),&rdquo; November&nbsp;2002.</span><span>)</span></a> may cause fluctuations of the Forwarding Rate
          observation and can prevent correct observation of the different
          convergence time instants.
</p>
<p>The Packet Sampling Interval MUST be larger than or equal to the
          time between two consecutive packets to the same destination. For
          maximum accuracy the value for the Packet Sampling Interval SHOULD
          be as small as possible, but the presence of IPDV may enforce using
          a larger Packet Sampling Interval. The Packet Sampling Interval MUST
          be reported.
</p>
<p>IPDV causes fluctuations in the number of received packets during
          each Packet Sampling Interval. To account for the presence of IPDV
          in determining if a convergence instant has been reached, Forwarding
          Delay SHOULD be observed during each Packet Sampling Interval. The
          minimum and maximum number of packets expected in a Packet Sampling
          Interval in presence of IPDV can be calculated with Equation 3.
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
number of packets expected in a Packet Sampling Interval
  in presence of IP Packet Delay Variation
    = expected number of packets without IP Packet Delay Variation
      +/-( (maxDelay - minDelay) * Offered Load)
with minDelay and maxDelay the minimum resp. maximum Forwarding Delay
  of packets received during the Packet Sampling Interval

</pre></div>
<p style='text-align: center'>Equation 3
</p>
<p>To determine if a convergence instant has been reached the number
          of packets received in a Packet Sampling Interval is compared with
          the range of expected number of packets calculated in Equation
          3.
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Benchmark Metrics</h3>

<p>The Rate-Derived Method SHOULD be used to measure First Route
          Convergence Time and Full Convergence Time. It SHOULD NOT be used to
          measure Loss of Connectivity Period (see Section <a class='info' href='#section_conv_and_loc'>4<span> (</span><span class='info'>Convergence Time and Loss of Connectivity Period</span><span>)</span></a>).
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.3"></a><h3>6.2.3.&nbsp;
Measurement Accuracy</h3>

<p>The measurement accuracy interval of the Rate-Derived Method
          depends on the metric being measured or calculated and the
          characteristics of the related transition. IPDV <a class='info' href='#De02'>[De02]<span> (</span><span class='info'>Demichelis, C. and P. Chimento, &ldquo;IP Packet Delay Variation Metric for IP Performance Metrics           (IPPM),&rdquo; November&nbsp;2002.</span><span>)</span></a> adds uncertainty to the amount of packets
          received in a Packet Sampling Interval and this uncertainty adds to
          the measurement error. The effect of IPDV is not accounted for in
          the calculation of the accuracy intervals below. IPDV is of
          importance for the convergence instants were a variation in
          Forwarding Rate needs to be observed (Convergence Recovery Instant
          and for topologies with ECMP also Convergence Event Instant and
          First Route Convergence Instant).
</p>
<p>If the Convergence Event Instant is observed on the dataplane
          using the Rate Derived Method, it needs to be instantaneous for all
          routes (see <a class='info' href='#conv_time_no_instant_loss'>Section&nbsp;4.1<span> (</span><span class='info'>Convergence Events without instant traffic loss</span><span>)</span></a>). The actual value of the
          Convergence Event Instant falls within the accuracy interval
          [&ndash;(Packet Sampling Interval + 1/Offered Load), +0] around the
          value as measured using the Rate-Derived Method.
</p>
<p>If the Convergence Recovery Transition is non-instantaneous for
          all routes then the actual value of the First Route Convergence
          Instant falls within the accuracy interval [&ndash;(Packet Sampling
          Interval + time between two consecutive packets to the same
          destination), +0] around the value as measured using the
          Rate-Derived Method, and the actual value of the Convergence
          Recovery Instant falls within the accuracy interval [&ndash;(2 *
          Packet Sampling Interval), &ndash;(Packet Sampling Interval - time
          between two consecutive packets to the same destination)] around the
          value as measured using the Rate-Derived Method.
</p>
<p>The term &ldquo;time between two consecutive packets to the same
          destination&rdquo; is added in the above accuracy intervals since
          packets are sent in a particular order to all destinations in a
          stream and when part of the routes experience packet loss, it is
          unknown where in the transmit cycle packets to these routes are
          sent. This uncertainty adds to the error.
</p>
<p>The accuracy intervals of the derived metrics First Route
          Convergence Time and Rate-Derived Convergence Time are calculated
          from the above convergence instants accuracy intervals. The actual
          value of First Route Convergence Time falls within the accuracy
          interval [&ndash;(Packet Sampling Interval + time between two
          consecutive packets to the same destination), +(Packet Sampling
          Interval + 1/Offered Load)] around the calculated value. The actual
          value of Rate-Derived Convergence Time falls within the accuracy
          interval [&ndash;(2 * Packet Sampling Interval), +(time between two
          consecutive packets to the same destination + 1/Offered Load)]
          around the calculated value.
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Route-Specific Loss-Derived Method</h3>

<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.1"></a><h3>6.3.1.&nbsp;
Tester Capabilities</h3>

<p>The Offered Load consists of multiple Streams. The Tester MUST
          measure packet loss for each Stream separately.
</p>
<p>In order to verify Full Convergence completion and the Sustained
          Convergence Validation Time, the Tester MUST measure packet loss
          each Packet Sampling Interval. This measurement at each Packet
          Sampling Interval MAY be per Stream.
</p>
<p>Only the total packet loss measured per Stream at the end of the
          Sustained Convergence Validation Time is used to calculate the
          benchmark metrics with this method.
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.2"></a><h3>6.3.2.&nbsp;
Benchmark Metrics</h3>

<p>The Route-Specific Loss-Derived Method SHOULD be used to measure
          Route-Specific Convergence Times. It is the RECOMMENDED method to
          measure Route Loss of Connectivity Period.
</p>
<p>Under the conditions explained in Section <a class='info' href='#section_conv_and_loc'>4<span> (</span><span class='info'>Convergence Time and Loss of Connectivity Period</span><span>)</span></a>, First Route Convergence Time
          and Full Convergence Time as benchmarked using Rate-Derived Method,
          may be equal to the minimum resp. maximum of the Route-Specific
          Convergence Times.
</p>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.3"></a><h3>6.3.3.&nbsp;
Measurement Accuracy</h3>

<p>The actual value falls within the accuracy interval [-(number of
          destinations/Offered Load), +(number of destinations/Offered Load)]
          around the value as measured using the Route-Specific Loss-Derived
          Method.
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Reporting Format</h3>

<p>For each test case, it is recommended that the reporting tables below
      are completed and all time values SHOULD be reported with resolution as
      specified in <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="table_report_config"></a>
<table class="headers" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="50%"><col align="left">
<tr><th align="left">Parameter</th><th align="left">Units</th></tr>
<tr>
<td align="left">Test Case</td>
<td align="left">test case number</td>
</tr>
<tr>
<td align="left">Test Topology</td>
<td align="left">Test Topology Figure number</td>
</tr>
<tr>
<td align="left">IGP</td>
<td align="left">(ISIS, OSPF, other)</td>
</tr>
<tr>
<td align="left">Interface Type</td>
<td align="left">(GigE, POS, ATM, other)</td>
</tr>
<tr>
<td align="left">Packet Size offered to DUT</td>
<td align="left">bytes</td>
</tr>
<tr>
<td align="left">Offered Load</td>
<td align="left">packets per second</td>
</tr>
<tr>
<td align="left">IGP Routes advertised to DUT</td>
<td align="left">number of IGP routes</td>
</tr>
<tr>
<td align="left">Nodes in emulated network</td>
<td align="left">number of nodes</td>
</tr>
<tr>
<td align="left">Number of Parallel or ECMP links</td>
<td align="left">number of links</td>
</tr>
<tr>
<td align="left">Number of Routes measured</td>
<td align="left">number of routes</td>
</tr>
<tr>
<td align="left">Packet Sampling Interval on Tester</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">Forwarding Delay Threshold</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">Timer Values configured on DUT:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;Interface failure indication delay</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;IGP Hello Timer</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;IGP Dead-Interval or hold-time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;LSA Generation Delay</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;LSA Flood Packet Pacing</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;LSA Retransmission Packet Pacing</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;SPF Delay</td>
<td align="left">seconds</td>
</tr>
</table>
<br clear="all" />

<p>Test Details:</p>
<blockquote class="text">
<p>If the Offered Load matches a subset of routes, describe how this
          subset is selected.
</p>
<p>Describe how the Convergence Event is applied; does it cause
          instantaneous traffic loss or not.
</p>
</blockquote>

<p>Complete the table below for the initial Convergence Event and the
      reversion Convergence Event.
</p><br /><hr class="insert" />
<a name="table_report_measurements"></a>
<table class="headers" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="50%"><col align="left">
<tr><th align="left">Parameter</th><th align="left">Units</th></tr>
<tr>
<td align="left">Conversion Event</td>
<td align="left">(initial or reversion)</td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">Traffic Forwarding Metrics:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;Total number of packets offered to DUT</td>
<td align="left">number of Packets</td>
</tr>
<tr>
<td align="left">&nbsp;Total number of packets forwarded by DUT</td>
<td align="left">number of Packets</td>
</tr>
<tr>
<td align="left">&nbsp;Connectivity Packet Loss</td>
<td align="left">number of Packets</td>
</tr>
<tr>
<td align="left">&nbsp;Convergence Packet Loss</td>
<td align="left">number of Packets</td>
</tr>
<tr>
<td align="left">&nbsp;Out-of-Order Packets</td>
<td align="left">number of Packets</td>
</tr>
<tr>
<td align="left">&nbsp;Duplicate Packets</td>
<td align="left">number of Packets</td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">Convergence Benchmarks:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;Rate-Derived Method:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;First Route Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Full Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;Loss-Derived Method:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Loss-Derived Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;Route-Specific Loss-Derived Method:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Route-Specific Convergence Time[n]</td>
<td align="left">array of seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Minimum R-S Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Maximum R-S Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Median R-S Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Average R-S Convergence Time</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">Loss of Connectivity Benchmarks:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;Loss-Derived Method:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Loss-Derived Loss of Connectivity Period</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;Route-Specific Loss-Derived Method:</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Route LoC Period[n]</td>
<td align="left">array of seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Minimum Route LoC Period</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Maximum Route LoC Period</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Median Route LoC Period</td>
<td align="left">seconds</td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;Average Route LoC Period</td>
<td align="left">seconds</td>
</tr>
</table>
<br clear="all" />

<a name="test_cases"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Test Cases</h3>

<p>It is RECOMMENDED that all applicable test cases be performed for
      best characterization of the DUT. The test cases follow a generic
      procedure tailored to the specific DUT configuration and Convergence
      Event <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>. This generic procedure is as
      follows:
</p>
<p></p>
<ol class="text">
<li>Establish DUT and Tester configurations and advertise an IGP
          topology from Tester to DUT.
</li>
<li>Send Offered Load from Tester to DUT on ingress interface.
</li>
<li>Verify traffic is routed correctly. Verify if traffic is
          forwarded without drops, without Out-of-Order Packets, and without
          exceeding the Forwarding Delay Threshold <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
<li>Introduce Convergence Event <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</li>
<li>Measure First Route Convergence Time <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</li>
<li>Measure Full Convergence Time <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
          Convergence Time, Route LoC Periods, and Loss-Derived LoC Period
          <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</li>
<li>Wait sufficient time for queues to drain. The duration of this
          time period is equal to the Forwarding Delay Threshold. In absence
          of a Forwarding Delay Threshold specification the duration of this
          time period is 2 seconds <a class='info' href='#Br99'>[Br99]<span> (</span><span class='info'>Bradner, S. and J. McQuaid, &ldquo;Benchmarking Methodology           for Network Interconnect Devices,&rdquo; March&nbsp;1999.</span><span>)</span></a>.
</li>
<li>Restart Offered Load.
</li>
<li>Reverse Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
          Convergence Time, Route LoC Periods, and Loss-Derived LoC
          Period.
</li>
</ol>

<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Interface failures</h3>

<a name="testcase_local_link_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.1"></a><h3>8.1.1.&nbsp;
Convergence Due to Local Interface Failure</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence times due to a Local Interface
          failure event. The Next-Best Egress Interface can be a single
          interface (Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a>)
          or an ECMP set (Figure <a class='info' href='#local_lb_1toN'>2<span> (</span><span class='info'>IGP convergence test topology for local changes with non-ECMP to ECMP convergence</span><span>)</span></a>). The test with ECMP topology (Figure
          <a class='info' href='#local_lb_1toN'>2<span> (</span><span class='info'>IGP convergence test topology for local changes with non-ECMP to ECMP convergence</span><span>)</span></a>) is
          OPTIONAL.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the
              topology shown in Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a> or <a class='info' href='#local_lb_1toN'>2<span> (</span><span class='info'>IGP convergence test topology for local changes with non-ECMP to ECMP convergence</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is forwarded over Preferred Egress
              Interface.
</li>
<li>Remove link on DUT's Preferred Egress Interface. This is the
              Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived
              Convergence Time.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore link on DUT's Preferred Egress Interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP convergence time may be influenced by the link
          failure indication time, LSA/LSP delay, LSA/LSP generation time,
          LSA/LSP flood packet pacing, SPF delay, SPF execution time, and
          routing and forwarding tables update time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="testcase_remote_link_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.2"></a><h3>8.1.2.&nbsp;
Convergence Due to Remote Interface Failure</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to a Remote Interface
          failure event. The Next-Best Egress Interface can be a single
          interface (Figure <a class='info' href='#remote_nlb'>3<span> (</span><span class='info'>IGP convergence test topology for remote changes</span><span>)</span></a>) or an ECMP set (Figure <a class='info' href='#remote_lb_1toN'>4<span> (</span><span class='info'>IGP convergence test topology for remote changes with non-ECMP to ECMP convergence</span><span>)</span></a>). The test with
          ECMP topology (Figure <a class='info' href='#remote_lb_1toN'>4<span> (</span><span class='info'>IGP convergence test topology for remote changes with non-ECMP to ECMP convergence</span><span>)</span></a>) is OPTIONAL.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to SUT using the
              topology shown in Figure <a class='info' href='#remote_nlb'>3<span> (</span><span class='info'>IGP convergence test topology for remote changes</span><span>)</span></a> or <a class='info' href='#remote_lb_1toN'>4<span> (</span><span class='info'>IGP convergence test topology for remote changes with non-ECMP to ECMP convergence</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to SUT on ingress
              interface.
</li>
<li>Verify traffic is forwarded over Preferred Egress
              Interface.
</li>
<li>Remove link on Tester's interface <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> connected to SUT's Preferred Egress
              Interface. This is the Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived
              Convergence Time.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore link on Tester's interface connected to DUT's
              Preferred Egress Interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP convergence time may be influenced by the link
          failure indication time, LSA/LSP delay, LSA/LSP generation time,
          LSA/LSP flood packet pacing, SPF delay, SPF execution time, and
          routing and forwarding tables update time. This test case may
          produce Stale Forwarding <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> due to a
          transient microloop between R1 and R2 during convergence, which may
          increase the measured convergence times and loss of connectivity
          periods.
</p>
<a name="testcase_local_lb_link_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.3"></a><h3>8.1.3.&nbsp;
Convergence Due to ECMP Member Local Interface Failure</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to a Local Interface link
          failure event of an ECMP Member.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the test
              setup shown in Figure <a class='info' href='#local_lb'>5<span> (</span><span class='info'>IGP convergence test topology for local ECMP changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is forwarded over the DUT's ECMP member
              interface that will be failed in the next step.
</li>
<li>Remove link on one of the DUT's ECMP member interfaces. This
              is the Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived
              Convergence Time. At the same time measure Out-of-Order Packets
              <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a> and Duplicate Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore link on DUT's ECMP member interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period. At the same time measure Out-of-Order Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a> and Duplicate Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP Convergence time may be influenced by link
          failure indication time, LSA/LSP delay, LSA/LSP generation time,
          LSA/LSP flood packet pacing, SPF delay, SPF execution time, and
          routing and forwarding tables update time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="testcase_remote_lb_link_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.4"></a><h3>8.1.4.&nbsp;
Convergence Due to ECMP Member Remote Interface Failure</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to a Remote Interface link
          failure event for an ECMP Member.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the test
              setup shown in Figure <a class='info' href='#remote_lb'>6<span> (</span><span class='info'>IGP convergence test topology for remote ECMP changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is forwarded over the DUT's ECMP member
              interface that will be failed in the next step.
</li>
<li>Remove link on Tester's interface to R2. This is the
              Convergence Event Trigger.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived
              Convergence Time. At the same time measure Out-of-Order Packets
              <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a> and Duplicate Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore link on Tester's interface to R2.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period. At the same time measure Out-of-Order Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a> and Duplicate Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP convergence time may influenced by the link
          failure indication time, LSA/LSP delay, LSA/LSP generation time,
          LSA/LSP flood packet pacing, SPF delay, SPF execution time, and
          routing and forwarding tables update time. This test case may
          produce Stale Forwarding <a class='info' href='#Po10t'>[Po10t]<span> (</span><span class='info'>Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;Terminology for Benchmarking Link-State IGP Data Plane Route           Convergence,&rdquo; March&nbsp;2010.</span><span>)</span></a> due to a
          transient microloop between R1 and R2 during convergence, which may
          increase the measured convergence times and loss of connectivity
          periods.
</p>
<a name="testcase_parallel_link_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.5"></a><h3>8.1.5.&nbsp;
Convergence Due to Parallel Link Interface Failure </h3>

<p>Objective
</p>
<p>To obtain the IGP convergence due to a local link failure event
          for a member of a parallel link. The links can be used for data load
          balancing
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the test
              setup shown in Figure <a class='info' href='#local_parallel'>7<span> (</span><span class='info'>IGP convergence test topology for Parallel Link changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is forwarded over the parallel link member
              that will be failed in the next step.
</li>
<li>Remove link on one of the DUT's parallel link member
              interfaces. This is the Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times and Loss-Derived
              Convergence Time. At the same time measure Out-of-Order Packets
              <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a> and Duplicate Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore link on DUT's Parallel Link member interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period. At the same time measure Out-of-Order Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a> and Duplicate Packets <a class='info' href='#Po06'>[Po06]<span> (</span><span class='info'>Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;Terminology for Benchmarking Network-layer Traffic Control           Mechanisms,&rdquo; October&nbsp;2006.</span><span>)</span></a>.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP convergence time may be influenced by the link
          failure indication time, LSA/LSP delay, LSA/LSP generation time,
          LSA/LSP flood packet pacing, SPF delay, SPF execution time, and
          routing and forwarding tables update time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Other failures</h3>

<a name="testcase_layer2_session_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.1"></a><h3>8.2.1.&nbsp;
Convergence Due to Layer 2 Session Loss</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to a local layer 2
          loss.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the
              topology shown in Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is routed over Preferred Egress Interface.
</li>
<li>Remove Layer 2 session from DUT's Preferred Egress Interface.
              This is the Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore Layer 2 session on DUT's Preferred Egress
              Interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP Convergence time may be influenced by the Layer
          2 failure indication time, LSA/LSP delay, LSA/LSP generation time,
          LSA/LSP flood packet pacing, SPF delay, SPF execution time, and
          routing and forwarding tables update time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<p>Discussion
</p>
<p>Configure IGP timers such that the IGP adjacency does not time
          out before layer 2 failure is detected.
</p>
<p>To measure convergence time, traffic SHOULD start dropping on the
          Preferred Egress Interface on the instant the layer 2 session is
          removed. Alternatively the Tester SHOULD record the time the instant
          layer 2 session is removed and traffic loss SHOULD only be measured
          on the Next-Best Egress Interface. For loss-derived benchmarks the
          time of the Start Traffic Instant SHOULD be recorded as well. See
          Section <a class='info' href='#conv_time_no_instant_loss'>4.1<span> (</span><span class='info'>Convergence Events without instant traffic loss</span><span>)</span></a>.
</p>
<a name="testcase_igp_adj_failure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.2"></a><h3>8.2.2.&nbsp;
Convergence Due to Loss of IGP Adjacency</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to loss of an IGP
          Adjacency.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the
              topology shown in Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is routed over Preferred Egress Interface.
</li>
<li>Remove IGP adjacency from the Preferred Egress Interface
              while the layer 2 session MUST be maintained. This is the
              Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore IGP session on DUT's Preferred Egress Interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP Convergence time may be influenced by the IGP
          Hello Interval, IGP Dead Interval, LSA/LSP delay, LSA/LSP generation
          time, LSA/LSP flood packet pacing, SPF delay, SPF execution time,
          and routing and forwarding tables update time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<p>Discussion
</p>
<p>Configure layer 2 such that layer 2 does not time out before IGP
          adjacency failure is detected.
</p>
<p>To measure convergence time, traffic SHOULD start dropping on the
          Preferred Egress Interface on the instant the IGP adjacency is
          removed. Alternatively the Tester SHOULD record the time the instant
          the IGP adjacency is removed and traffic loss SHOULD only be
          measured on the Next-Best Egress Interface. For loss-derived
          benchmarks the time of the Start Traffic Instant SHOULD be recorded
          as well. See Section <a class='info' href='#conv_time_no_instant_loss'>4.1<span> (</span><span class='info'>Convergence Events without instant traffic loss</span><span>)</span></a>.
</p>
<a name="testcase_route_withdrawal"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.3"></a><h3>8.2.3.&nbsp;
Convergence Due to Route Withdrawal</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to route withdrawal.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the
              topology shown in Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a>. The routes that will be withdrawn
              MUST be a set of leaf routes advertised by at least two nodes in
              the emulated topology. The topology SHOULD be such that before
              the withdrawal the DUT prefers the leaf routes advertised by a
              node "nodeA" via the Preferred Egress Interface, and after the
              withdrawal the DUT prefers the leaf routes advertised by a node
              "nodeB" via the Next-Best Egress Interface.
</li>
<li>Send Offered Load from Tester to DUT on Ingress
              Interface.
</li>
<li>Verify traffic is routed over Preferred Egress Interface.
</li>
<li>The Tester withdraws the set of IGP leaf routes from nodeA.
              This is the Convergence Event. The withdrawal update message
              SHOULD be a single unfragmented packet. If the routes cannot be
              withdrawn by a single packet, the messages SHOULD be sent using
              the same pacing characteristics as the DUT. The Tester MAY
              record the time it sends the withdrawal message(s).
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Re-advertise the set of withdrawn IGP leaf routes from nodeA
              emulated by the Tester. The update message SHOULD be a single
              unfragmented packet. If the routes cannot be advertised by a
              single packet, the messages SHOULD be sent using the same pacing
              characteristics as the DUT. The Tester MAY record the time it
              sends the update message(s).
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP convergence time is influenced by SPF or route
          calculation delay, SPF or route calculation execution time, and
          routing and forwarding tables update time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<p>Discussion
</p>
<p>To measure convergence time, traffic SHOULD start dropping on the
          Preferred Egress Interface on the instant the routes are withdrawn
          by the Tester. Alternatively the Tester SHOULD record the time the
          instant the routes are withdrawn and traffic loss SHOULD only be
          measured on the Next-Best Egress Interface. For loss-derived
          benchmarks the time of the Start Traffic Instant SHOULD be recorded
          as well. See Section <a class='info' href='#conv_time_no_instant_loss'>4.1<span> (</span><span class='info'>Convergence Events without instant traffic loss</span><span>)</span></a>.
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Administrative changes</h3>

<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.1"></a><h3>8.3.1.&nbsp;
Convergence Due to Local Adminstrative Shutdown</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to taking the DUT's Local
          Interface administratively out of service.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the
              topology shown in Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is routed over Preferred Egress Interface.
</li>
<li>Take the DUT's Preferred Egress Interface administratively
              out of service. This is the Convergence Event.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>Restore Preferred Egress Interface by administratively
              enabling the interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
<li>It is possible that no measured packet loss will be observed
              for this test case.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP Convergence time may be influenced by LSA/LSP
          delay, LSA/LSP generation time, LSA/LSP flood packet pacing, SPF
          delay, SPF execution time, and routing and forwarding tables update
          time <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="testcase_route_cost_change"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.2"></a><h3>8.3.2.&nbsp;
Convergence Due to Cost Change</h3>

<p>Objective
</p>
<p>To obtain the IGP convergence time due to route cost change.
</p>
<p>Procedure
</p>
<p></p>
<ol class="text">
<li>Advertise an IGP topology from Tester to DUT using the
              topology shown in Figure <a class='info' href='#local_nlb'>1<span> (</span><span class='info'>IGP convergence test topology for local changes</span><span>)</span></a>.
</li>
<li>Send Offered Load from Tester to DUT on ingress
              interface.
</li>
<li>Verify traffic is routed over Preferred Egress Interface.
</li>
<li>The Tester, emulating the neighbor node, increases the cost
              for all IGP routes at DUT's Preferred Egress Interface so that
              the Next-Best Egress Interface becomes preferred path. The
              update message advertising the higher cost MUST be a single
              unfragmented packet. This is the Convergence Event. The Tester
              MAY record the time it sends the update message advertising the
              higher cost on the Preferred Egress Interface.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
<li>Wait sufficient time for queues to drain.
</li>
<li>Restart Offered Load.
</li>
<li>The Tester, emulating the neighbor node, decreases the cost
              for all IGP routes at DUT's Preferred Egress Interface so that
              the Preferred Egress Interface becomes preferred path. The
              update message advertising the lower cost MUST be a single
              unfragmented packet.
</li>
<li>Measure First Route Convergence Time.
</li>
<li>Measure Full Convergence Time.
</li>
<li>Stop Offered Load.
</li>
<li>Measure Route-Specific Convergence Times, Loss-Derived
              Convergence Time, Route LoC Periods, and Loss-Derived LoC
              Period.
</li>
</ol>

<p>Results
</p>
<p>The measured IGP Convergence time may be influenced by SPF delay,
          SPF execution time, and routing and forwarding tables update time
          <a class='info' href='#Po09a'>[Po09a]<span> (</span><span class='info'>Poretsky, S., &ldquo;Considerations for Benchmarking Link-State IGP Data Plane           Route Convergence,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
</p>
<p>Discussion
</p>
<p>To measure convergence time, traffic SHOULD start dropping on the
          Preferred Egress Interface on the instant the cost is changed by the
          Tester. Alternatively the Tester SHOULD record the time the instant
          the cost is changed and traffic loss SHOULD only be measured on the
          Next-Best Egress Interface. For loss-derived benchmarks the time of
          the Start Traffic Instant SHOULD be recorded as well. See Section
          <a class='info' href='#conv_time_no_instant_loss'>4.1<span> (</span><span class='info'>Convergence Events without instant traffic loss</span><span>)</span></a>.
</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>Benchmarking activities as described in this memo are limited to
      technology characterization using controlled stimuli in a laboratory
      environment, with dedicated address space and the constraints specified
      in the sections above.
</p>
<p>The benchmarking network topology will be an independent test setup
      and MUST NOT be connected to devices that may forward the test traffic
      into a production network, or misroute traffic to the test management
      network.
</p>
<p>Further, benchmarking is performed on a "black-box" basis, relying
      solely on measurements observable external to the DUT/SUT.
</p>
<p>Special capabilities SHOULD NOT exist in the DUT/SUT specifically for
      benchmarking purposes. Any implications for network security arising
      from the DUT/SUT SHOULD be identical in the lab and in production
      networks.
</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>This document requires no IANA considerations.
</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgements</h3>

<p>Thanks to Sue Hares, Al Morton, Kevin Dubray, Ron Bonica, David Ward,
      Peter De Vriendt, Anuj Dewagan and the BMWG for their contributions to
      this work.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Br91">[Br91]</a></td>
<td class="author-text"><a href="mailto:SOB@HARVARD.HARVARD.EDU">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1242">Benchmarking terminology
          for network interconnection devices</a>,&rdquo; RFC&nbsp;1242, July&nbsp;1991 (<a href="ftp://ftp.isi.edu/in-notes/rfc1242.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Br97">[Br97]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate
          Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Br99">[Br99]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a> and <a href="mailto:mcquaidj@netscout.com">J. McQuaid</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2544">Benchmarking Methodology
          for Network Interconnect Devices</a>,&rdquo; RFC&nbsp;2544, March&nbsp;1999 (<a href="ftp://ftp.isi.edu/in-notes/rfc2544.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Ca90">[Ca90]</a></td>
<td class="author-text">Callon, R., &ldquo;<a href="http://tools.ietf.org/html/rfc1195">Use of OSI
          IS-IS for routing in TCP/IP and dual environments</a>,&rdquo; RFC&nbsp;1195, December&nbsp;1990 (<a href="ftp://ftp.isi.edu/in-notes/rfc1195.txt">TXT</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc1195.ps">PS</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Co08">[Co08]</a></td>
<td class="author-text">Coltun, R., Ferguson, D., Moy, J., and A. Lindem, &ldquo;<a href="http://tools.ietf.org/html/rfc5340">OSPF for IPv6</a>,&rdquo; RFC&nbsp;5340, July&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5340.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="De02">[De02]</a></td>
<td class="author-text">Demichelis, C. and P. Chimento, &ldquo;<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics
          (IPPM)</a>,&rdquo; RFC&nbsp;3393, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3393.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Ho08">[Ho08]</a></td>
<td class="author-text">Hopps, C., &ldquo;<a href="http://tools.ietf.org/html/rfc5308">Routing IPv6 with IS-IS</a>,&rdquo; RFC&nbsp;5308, October&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5308.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Ko02">[Ko02]</a></td>
<td class="author-text">Koodli, R. and R. Ravikanth, &ldquo;<a href="http://tools.ietf.org/html/rfc3357">One-way Loss Pattern Sample Metrics</a>,&rdquo; RFC&nbsp;3357, August&nbsp;2002 (<a href="ftp://ftp.isi.edu/in-notes/rfc3357.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Ma98">[Ma98]</a></td>
<td class="author-text"><a href="mailto:bob.mandeville@eunet.fr">Mandeville, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2285">Benchmarking Terminology
          for LAN Switching Devices</a>,&rdquo; RFC&nbsp;2285, February&nbsp;1998 (<a href="ftp://ftp.isi.edu/in-notes/rfc2285.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2285.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2285.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Mo98">[Mo98]</a></td>
<td class="author-text"><a href="mailto:jmoy@casc.com">Moy, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2328">OSPF Version 2</a>,&rdquo; STD&nbsp;54, RFC&nbsp;2328, April&nbsp;1998 (<a href="ftp://ftp.isi.edu/in-notes/rfc2328.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2328.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2328.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Po06">[Po06]</a></td>
<td class="author-text">Poretsky, S., Perser, J., Erramilli, S., and S. Khurana, &ldquo;<a href="http://tools.ietf.org/html/rfc4689">Terminology for Benchmarking Network-layer Traffic Control
          Mechanisms</a>,&rdquo; RFC&nbsp;4689, October&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4689.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Po09a">[Po09a]</a></td>
<td class="author-text">Poretsky, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-bmwg-igp-dataplane-conv-app-17.txt">Considerations for Benchmarking Link-State IGP Data Plane
          Route Convergence</a>,&rdquo; draft-ietf-bmwg-igp-dataplane-conv-app-17 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-bmwg-igp-dataplane-conv-app-17.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Po10t">[Po10t]</a></td>
<td class="author-text">Poretsky, S., Imhoff, B., and K. Michielsen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-bmwg-igp-dataplane-conv-term-20.txt">Terminology for Benchmarking Link-State IGP Data Plane Route
          Convergence</a>,&rdquo; draft-ietf-bmwg-igp-dataplane-conv-term-20 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-bmwg-igp-dataplane-conv-term-20.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Scott Poretsky</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Allot Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">67 South Bedford Street, Suite 400</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Burlington, MA  01803</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+ 1 508 309 2179</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sporetsky@allot.com">sporetsky@allot.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brent Imhoff</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juniper Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1194 North Mathilda Ave</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+ 1 314 378 2571</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:bimhoff@planetspork.com">bimhoff@planetspork.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kris Michielsen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">6A De Kleetlaan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Diegem, BRABANT  1831</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Belgium</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:kmichiel@cisco.com">kmichiel@cisco.com</a></td></tr>
</table>
</body></html>
