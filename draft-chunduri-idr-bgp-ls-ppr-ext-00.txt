



IDR Working Group                                            U. Chunduri
Internet-Draft                                         P. Pillay-Esnault
Intended status: Standards Track                              Huawei USA
Expires: November 18, 2019                                    M. Nanduri
                                                                  Oracle
                                                            May 17, 2019


              BGP-LS extensions for Preferred Path Routing
                  draft-chunduri-idr-bgp-ls-ppr-ext-00

Abstract

   This document describe extensions to BGP-LS protocol to include
   Preferred Path Routing (PPR) information.  This document also extends
   BGP-LS protocol and define new SAFIs and NLRIs for propagating path
   information from a central entity to a node in the network in the
   south bound direction.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [RFC2119],
   RFC8174 [RFC8174] when, and only when they appear in all capitals, as
   shown here.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 18, 2019.








Chunduri, et al.        Expires November 18, 2019               [Page 1]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Acronyms  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  PPR-ID TLVs Supported by a Prefix . . . . . . . . . . . . . .   3
     2.1.  PPR-ID Encoding . . . . . . . . . . . . . . . . . . . . .   4
   3.  Southbound BGP-LS SAFI and NLRIs  . . . . . . . . . . . . . .   5
   4.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     5.1.  New BGP-LS Attribute  . . . . . . . . . . . . . . . . . .   6
     5.2.  New BGP-LS SAFIs  . . . . . . . . . . . . . . . . . . . .   6
     5.3.  New BGP-LS NLRIs  . . . . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   7
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   Preferred Path Routing (PPR) is a path routing mechanism where
   routing happens on path identifier in the packet as opposed to
   individual segments in the packet as defined in [RFC8402].  PPRs
   allow path routing for any underlying data plane with abstracted path
   identifier to represent the path of the data packet.  Definition and
   usage of PPRs by the link state routing protocols ( IS-IS, OSPFv2 and
   OSPFv3) within IGP topologies are detailed in
   [I-D.chunduri-lsr-isis-preferred-path-routing] and
   [I-D.chunduri-lsr-ospf-preferred-path-routing].

   PPR-Identifier (PPR-ID) TLV allows advertisement of multi-hop Traffic
   Engineered (TE) paths, Fast Re-Route (FRR) or certain chained paths.
   The flooding scope for the IGP extensions for PPRs is an IGP area/



Chunduri, et al.        Expires November 18, 2019               [Page 2]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


   domain.  Consequently, the contents of a Link State Database (LSDB)
   or a Traffic Engineering Database (TED) has the scope of an IGP area/
   domain and therefore by using the IGP alone it is not enough to
   construct PPRs across multiple IGP Areas or AS boundaries.

   Even though a central entity provisions the PPRs at one of the
   network node, not all PPRs are active and advertised in IGPs as these
   could be subjected to the local policies of the network node.  PPRs
   can also be potentially created locally by operators, it is critical
   to have a complete view of currently active PPRs in the network for
   creating end-to-end paths crossing multiple IGP areas and AS
   boundaries.

   To take care of the above cases, this document describe extensions to
   BGP-LS to advertise PPR information in Prefix NLRI as described in
   Section 2.  An external component, which is a BGP-LS [RFC7752]
   speaker (e.g., a controller) then can collect active PPR information
   in the network in "north bound" direction across IGP areas or ASes.

   In some environments, where single protocol is desired for controller
   communication with the network nodes, new SAFIs and new NLRI types
   are defined to signal the PPR paths from external BGP-LS speaker to
   the network nodes in Section 3.  This information is subjected to the
   local policies of the network node and eventually can be signaled in
   an IGP as defined in IGP PPR extensions.

1.1.  Acronyms

   IGP      -  Interior Gateway Protocols

   MTU      -  Maximum Transferrable Unit

   PPR      -  Preferred Path Route/Routing

   SID      -  Segment Identifier

   SR       -  Segment Routing

   TE       -  Traffic Engineering

2.  PPR-ID TLVs Supported by a Prefix

   This section defines a new TLV, PPR-ID TLV in BGP-LS Prefix
   Attributes of Prefix NLRI and describes the encoding of the same.
   The BGP-LS Prefix attribute, PPR-ID TLV has the following format:






Chunduri, et al.        Expires November 18, 2019               [Page 3]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Type              |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           MT-ID               |      AF       |  Flags        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Prefix Len    |  FEC Prefix                                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      //               Prefix (continued, variable)                  //
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      //               PPR-ID Encoding                               //
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 1: Prefix attribute - PPR-ID TLV Format

      Type - TBD (Suggested Value 1174, IANA TBD).

      Length - Total length of the value field in bytes (variable).

      AF - See Section 2.1.

      MT-ID - is the multi-topology identifier defined in [RFC5120] with
      4 most significant bits reset on transmission and ignored on
      receive.  The remaining 12-bit field contains the MT-ID.  For
      OSPFv2 this is as defined in [RFC4915].  For OSPFv3 it MUST be set
      to zero.

      Prefix Len - contains the length of the prefix in bits.

      Prefix - represents the the tail-end node address of the
      advertised PPR.  Value of this field MUST be encoded as a 32-bit
      value for IPv4 "Prefix".  Value of this field MUST be 16 octets
      for IPv6 "Prefix", encoded as an even multiple of 32-bit words,
      padded with zeroed bits as necessary.  This encoding consumes
      ((PrefixLength + 31) / 32) 32-bit words.

      Flags: 1 octet field of PPR-ID TLV has flags as defined in
      respective IGP and encoded based on the Protocol-ID field in BGP-
      LS node NLRI.

2.1.  PPR-ID Encoding

   This TLV can be seen as having 3 logical section viz., encoding of
   Prefix, encoding of PPR-ID with description of ordered path with sub-
   TLVs and a set of optional PPR-Attribute Sub-TLVs, which can be used
   to describe one or more parameters of the PPR.  Out of the above only
   the first logical section i.e., encoding Prefix is described here in



Chunduri, et al.        Expires November 18, 2019               [Page 4]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


   IGP agnostic way.  The remaining 2 sections MUST be encoded as
   defined in [I-D.chunduri-lsr-isis-preferred-path-routing] and
   [I-D.chunduri-lsr-ospf-preferred-path-routing] drafts.  This MUST be
   based on the Protocol-ID field as defined in section 3.2 of [RFC7752]
   'The Prefix NLRI Format'.

   The advertisement of PPR-ID TLV in IS-IS has following semantics:

   The IS-IS 'PPR-ID Encoding' as defined in Section 2 is encoded in the
   BGP-LS Prefix Attribute TLV and the format is as defined in
   [I-D.chunduri-lsr-isis-preferred-path-routing] including PPR-ID, PPR-
   PDE Sub-TLVs and all possible PPR-Attribute Sub-TLVs.  The AF field
   for IS-IS MUST be set to zero.  The flags of the PPR-ID TLV are
   semantically mapped to the definition in
   [I-D.chunduri-lsr-isis-preferred-path-routing] section 2.

   The advertisement of PPR-ID TLV in OSPF has following semantics:

   The OSPFv2/OSPFv3 "PPR-ID Encoding" as defined in Section 2 is
   encoded in the BGP-LS Prefix Attribute TLV and the format is as
   defined in [I-D.chunduri-lsr-ospf-preferred-path-routing] including
   PPR-ID, PPR-PDE Sub-TLVs and all possible PPR-Attribute Sub-TLVs.
   The flags and AF of the PPR-ID TLV are semantically mapped to the
   definition in [I-D.chunduri-lsr-ospf-preferred-path-routing] section
   2 for OSPFv2 or section 3 for OSPFv3.

3.  Southbound BGP-LS SAFI and NLRIs

   This document extends the [RFC7752] by defining two new South Bound
   (SB) SAFIs to be used with BGP-LS AFI 16388.  All non-VPN SB prefix
   information SHALL be encoded using AFI 16388 / SAFI 75 (suggested
   value for SB-BGP-LS SAFI, IANA TBD).  VPN SB prefix information SHALL
   be encoded using AFI 16388 / SAFI 76 (suggested value for SB-BGP-LS-
   VPN SAFI, IANA TBD).

   This document also extends then BGP-LS by defining 2 new south bound
   NLRI types, one for SB IPv4 Topology Prefix (type 5, suggested value,
   IANA TBD) and one for SB IPv6 Topology Prefix NLRI (type 6, suggested
   value, IANA TBD).  As with other BGP-LS SAFIs, in order for two BGP
   speakers to exchange SB Link-State NLRI, they MUST use BGP
   Capabilities Advertisement to advertise SB SAFIs to ensure that they
   are both capable of properly processing such NLRI.

   Encoding for the new SB SAFIs and new SB NLRIs are applicable to
   [RFC7752], including the parameters as defined in "BGP-LS Protocol-
   IDs", "BGP-LS Well-Known Instance-IDs" and "BGP-LS Node Descriptor,
   Link Descriptor, Prefix Descriptor, and Attribute TLVs".




Chunduri, et al.        Expires November 18, 2019               [Page 5]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


   PPR-ID Prefix Attribute TLV as defined in Section 2 can be advertised
   with SB IPv4/IPv6 Topology Prefix NLRIs.  When this is done this
   information is advertised in the corresponding underlying IGP
   subjected to the local node policy.

4.  Acknowledgements

   TBD.

5.  IANA Considerations

5.1.  New BGP-LS Attribute

   This document requests IANA to assign a code point from the "BGP-LS
   Node Descriptor, Link Descriptor, Prefix Descriptor, and Attribute
   TLVs" registry as follows: BGP-LS Node Attribute - PPR-ID TLV as
   described in Section 2.

        TLV #   Name
        -----   ------------------------------
        TBD     PPR-ID TLV in Prefix attribute


5.2.  New BGP-LS SAFIs

   This document defines a new SAFIs in the registry "Subsequent Address
   Family Identifiers (SAFI) Parameters" that has been assigned by IANA:

        SAFI #   Description               Reference
        -----   --------------------       ------------
        75     SB-BGP-LS     SAFI          This Document
        76     SB-BGP-LS-VPN SAFI          This Document


5.3.  New BGP-LS NLRIs

   This document requests IANA to assign a code point from the"BGP-LS
   NLRI-Types" registry as follows:

        NLRI #   Description                   Reference
        -----   ------------------------       ---------------
        5       SB IPv4 Topology Prefix          This Document
        6       SB IPv6 Topology Prefix          This Document








Chunduri, et al.        Expires November 18, 2019               [Page 6]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


6.  Security Considerations

   This document does not introduce security issues beyond those
   discussed in [RFC7752]

7.  References

7.1.  Normative References

   [I-D.chunduri-lsr-isis-preferred-path-routing]
              Chunduri, U., Li, R., White, R., Tantsura, J., Contreras,
              L., and Y. Qu, "Preferred Path Routing (PPR) in IS-IS",
              draft-chunduri-lsr-isis-preferred-path-routing-03 (work in
              progress), May 2019.

   [I-D.chunduri-lsr-ospf-preferred-path-routing]
              Chunduri, U., Qu, Y., White, R., Tantsura, J., and L.
              Contreras, "Preferred Path Routing (PPR) in OSPF", draft-
              chunduri-lsr-ospf-preferred-path-routing-03 (work in
              progress), May 2019.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

7.2.  Informative References

   [RFC4915]  Psenak, P., Mirtorabi, S., Roy, A., Nguyen, L., and P.
              Pillay-Esnault, "Multi-Topology (MT) Routing in OSPF",
              RFC 4915, DOI 10.17487/RFC4915, June 2007,
              <https://www.rfc-editor.org/info/rfc4915>.

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.



Chunduri, et al.        Expires November 18, 2019               [Page 7]

Internet-DraftBGP-LS extensions for Preferred Path Routing      May 2019


   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Uma Chunduri
   Huawei USA
   2330 Central Expressway
   Santa Clara, CA  95050
   USA

   Email: uma.chunduri@huawei.com


   Padma Pillay-Esnault
   Huawei USA
   2330 Central Expressway
   Santa Clara, CA  95050
   USA

   Email: padma@huawei.com


   Mohan Nanduri
   Oracle
   USA

   Email: mohan.nanduri@oracle.com





















Chunduri, et al.        Expires November 18, 2019               [Page 8]