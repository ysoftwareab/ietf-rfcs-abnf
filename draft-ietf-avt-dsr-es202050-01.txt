

Audio Video Transport WG                                          Q. Xie
Internet-Draft                                                 D. Pearce
Expires: April 16, 2004                                         Motorola
                                                        October 17, 2003


      RTP Payload Format for European Telecommunications Standards
   Institute (ETSI) European Standard ES 202 050 Distributed  Speech
                          Recognition Encoding
                   draft-ietf-avt-dsr-es202050-01.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 16, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This document specifies an RTP payload format for encapsulating ETSI
   Standard ES 202 050 advanced front-end signal processing feature
   streams for distributed speech recognition (DSR) systems.










Xie & Pearce             Expires April 16, 2004                 [Page 1]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


Table of Contents

   1.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.1 ETSI ES 202 050 Advanced DSR Front-end Codec . . . . . . . . .  3
   3.  ES 202 050 DSR RTP Payload Format  . . . . . . . . . . . . . .  4
   3.1 Consideration on Number of FPs in Each RTP Packet  . . . . . .  4
   3.2 Support for Discontinuous Transmission . . . . . . . . . . . .  4
   4.  Frame Pair Formats . . . . . . . . . . . . . . . . . . . . . .  4
   4.1 Format of Speech and Non-speech FPs  . . . . . . . . . . . . .  4
   4.2 Format of Null FP  . . . . . . . . . . . . . . . . . . . . . .  6
   4.3 RTP header usage . . . . . . . . . . . . . . . . . . . . . . .  7
   5.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  7
   5.1 Mapping MIME Parameters into SDP . . . . . . . . . . . . . . .  8
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   7.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . .  9
       Normative References . . . . . . . . . . . . . . . . . . . . .  9
       Informative References . . . . . . . . . . . . . . . . . . . . 10
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 10
       Intellectual Property and Copyright Statements . . . . . . . . 11































Xie & Pearce             Expires April 16, 2004                 [Page 2]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


1. Conventions

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, NOT RECOMMENDED, MAY, and OPTIONAL, when
   they appear in this document, are to be interpreted as described in
   [3].

   The following acronyms are used in this document:

      DSR  - Distributed Speech Recognition
      ETSI - the European Telecommunications Standards Institute
      FP   - Frame Pair
      DTX  - Discontinuous Transmission
      VAD  - Voice Activity Detection


2. Introduction

   Distributed speech recognition (DSR) technology is intended for a
   remote device acting as a thin client, also known as the front-end,
   to communicate with a speech recognition server, also called a speech
   engine, over a network connection to obtain speech recognition
   services. More details on DSR over Internet can be found in [7].

   To achieve interoperability with different client devices and speech
   engines, the first ETSI standard DSR front-end ES 201 108 was
   published in early 2000 [8], and an RTP packetization for ES 201 108
   frames is defined in [7] in IETF.

   In ES 202 050 [1], ETSI issues another standard for an Advanced DSR
   front-end that provides substantially improved recognition
   performance when background noise is present. The codecs in ES 202
   050 uses a slightly different frame format from that of ES 201 108
   and thus the two do not inter-operate with each other.

   The RTP packetization for ES 202 050 front-end defined in this
   document uses the same RTP packet format layout as that defined in
   [7]. The differences are in the DSR codec frame bit definition and
   the payload type MIME registration.

2.1 ETSI ES 202 050 Advanced DSR Front-end Codec

   Some relevant characteristics of ES 202 050 Advanced DSR front-end
   codec are summarized below.

   The front-end calculation is a frame-based scheme that produces an
   output vector every 10 ms. In the front-end feature extraction, noise
   reduction by two stages of Wiener filtering is performed first. Then,



Xie & Pearce             Expires April 16, 2004                 [Page 3]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


   waveform processing is applied to the de-noised signal and
   mel-cepstral features are calculated. At the end, blind equalization
   is applied to the cepstral features. The front-end algorithm produces
   at its output a mel-cepstral representation in the same format as ES
   210 108, i.e., 12 cepstral coeffients [C1 - C12], C0 and log Engergy.
   Voice activity detection (VAD) for the clasification of each frame as
   speech or non-speech is also implemented in Feature Extraction. The
   VAD information is included in the payload format for each frame pair
   to be sent to the remote recognition engine as part of the payload.
   This information may optionally be used by the receiving recognition
   engine to drop non-speech frames. The front-end supports three raw
   sampling rates: 8 kHz, 11 kHz, and 16 kHz (It is worthwhile to note
   that unlike some other speech codecs, the feature frame size of DSR
   presented to RTP packetization is not dependent on the number of
   speech samples used in each 10 ms sample frame. This will become more
   evident in the following sections).

   After calculation of the mel-cepstral representation, the
   representation is first quantized via split-vector quantization to
   reduce the data rate of the encoded stream. Then, the quantized
   vectors from two consecutive frames are put into an FP, as described
   in more detail in Section 4.1 below.

3. ES 202 050 DSR RTP Payload Format

   An ES 202 050 DSR RTP payload datagram uses exactly the same layout
   as defined in Section 3 of [7], i.e., a standard RTP header followed
   by a DSR payload containing a series of DSR FPs.

   The size of each ES 202 050 FP is still 96 bits or 12 octets (see
   Sections 4 below). This ensures that a DSR RTP payload will always
   end on an octet boundary.

3.1 Consideration on Number of FPs in Each RTP Packet

   Same considerations described in Section 3.1 of [7] apply to ES 202
   050 RTP payload.

3.2 Support for Discontinuous Transmission

   Same considerations described in Section 3.2 of [7] apply to ES 202
   050 RTP payload.

4. Frame Pair Formats

4.1 Format of Speech and Non-speech FPs

   The following mel-cepstral frame MUST be used, as defined in [1]:



Xie & Pearce             Expires April 16, 2004                 [Page 4]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


   As defined in [1], pairs of the quantized 10ms mel-cepstral frames
   MUST be grouped together and protected with a 4-bit CRC, forming a
   92-bit long FP:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |         Frame Pair (88 bits) = Frame #1 + Frame #2            |
   +                                               +-+-+-+-+-+-+-+-+
   |                                               | CRC   |0|0|0|0|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Here Frame #1 and Frame #2 above MUST use the following mel-cepstral
   frame formats:

     Frame #1 in FP:
     ===============
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :  idx(2,3) |            idx(0,1)               |    Octet 1
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :       idx(4,5)        |     idx(2,3) (cont)   :    Octet 2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |             idx(6,7)              |idx(4,5)(cont)  Octet 3
       +-----+-----+-----+-----+-----+-----+-----+-----+
   idx(10,11)| VAD |              idx(8,9)             |    Octet 4
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :       idx(12,13)      |   idx(10,11) (cont)   :    Octet 5
       +-----+-----+-----+-----+-----+-----+-----+-----+
                               |   idx(12,13) (cont)   :    Octet 6/1
                               +-----+-----+-----+-----+

















Xie & Pearce             Expires April 16, 2004                 [Page 5]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


    Frame #2 in FP:
    ===============
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+
       :        idx(0,1)       |                            Octet 6/2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |              idx(2,3)             |idx(0,1)(cont)  Octet 7
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :  idx(6,7) |              idx(4,5)             |    Octet 8
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :        idx(8,9)       |      idx(6,7) (cont)  :    Octet 9
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |          idx(10,11)         | VAD |idx(8,9)(cont)  Octet 10
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |                   idx(12,13)                  |    Octet 11
       +-----+-----+-----+-----+-----+-----+-----+-----+

   The 4-bit CRC in the FP MUST be calculated using the formula
   (including the bit-order rules) defined in 7.2 in [1].

   Therefore, each FP represents 20ms of original speech. Note, as shown
   above, each FP MUST be padded with 4 zeros to the LSB 4 bits of the
   last octet in order to make the FP aligned to the 32-bit word
   boundary. This makes the total size of an FP 96 bits, or 12 octets.
   Note, this padding is separate from padding indicated by the P bit in
   the RTP header.

   The definition of the indices and 'VAD' flag are described in [1] and
   their value is only set and examined by the codecs in the front-end
   client and the recognizer.

   Any number of FPs MAY be aggregate together in an RTP payload and
   they MUST be consecutive in time. However, one SHOULD always keep the
   RTP payload size smaller than the MTU in order to avoid IP
   fragmentation and SHOULD follow the recommendations given in Section
   3.1 in [7] when determining the proper number of FPs in an RTP
   payload.

4.2 Format of Null FP

   A Null FP for the ES 202 050 front-end codec is defined by setting
   the content of the first and second frame in the FP to null (i.e.,
   filling the first 88 bits of the FP with 0's). The 4-bit CRC MUST be
   calculated the same way as described in 7.2.4 in [1], and 4 zeros
   MUST be padded to the end of the Null FP to made it 32-bit word
   aligned.




Xie & Pearce             Expires April 16, 2004                 [Page 6]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


4.3 RTP header usage

   The format of the RTP header is specified in [5]. This payload format
   uses the fields of the header in a manner consistent with that
   specification.

   The RTP timestamp corresponds to the sampling instant of the first
   sample encoded for the first FP in the packet. The timestamp clock
   frequency is the same as the sampling frequency, so the timestamp
   unit is in samples.

   As defined by ES 202 050 front-end codec, the duration of one FP is
   20 ms, corresponding to 160, 220, or 320 encoded samples with
   sampling rate of 8, 11, or 16 kHz being used at the front-end,
   respectively.  Thus, the timestamp is increased by 160, 220, or 320
   for each consecutive FP, respectively.

   The DSR payload for ES 202 050 front-end codes is always an integral
   number of octets. If additional padding is required for some other
   purpose, then the P bit in the RTP in the header may be set and
   padding appended as specified in [5].

   The RTP header marker bit (M) should be set following the general
   rules for audio codecs as defined in Section 4.1 in [6].

   The assignment of an RTP payload type for this new packet format is
   outside the scope of this document, and will not be specified here.
   It is expected that the RTP profile under which this payload format
   is being used will assign a payload type for this encoding or specify
   that the payload type is to be bound dynamically.

5. IANA Considerations

   One new MIME subtype registration is required for this payload type,
   as described below.

   Media Type name: audio

   Media subtype name: dsr-es202050

   Required parameters: none

   Optional parameters:

   rate: Indicates the sample rate of the speech.  Valid values include:
      8000, 11000, and 16000.  If this parameter is not present, 8000
      sample rate is assumed.




Xie & Pearce             Expires April 16, 2004                 [Page 7]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


   maxptime: The maximum amount of media which can be encapsulated in
      each packet, expressed as time in milliseconds. The time shall be
      calculated as the sum of the time the media present in the packet
      represents.  The time SHOULD be a multiple of the frame pair size
      (i.e., one FP => 20ms).

      If this parameter is not present, maxptime is assumed to be 80ms.

      Note, since the performance of most speech recognizers are
      extremely sensitive to consecutive FP losses, if the user of the
      payload format expects a high packet loss ratio for the session,
      it MAY consider to explicitly choose a maxptime value for the
      session that is shorter than the default value.

   ptime: see RFC2327 [4].

   Encoding considerations: This type is defined for transfer via RTP
      [5] as described in Sections 3 and 4 of RFC XXXX.

   Security considerations: See Section 6 of RFC XXXX.

   Person & email address to contact for further information:
      Qiaobing.Xie@motorola.com

   Intended usage: COMMON. It is expected that many VoIP applications
      (as well as mobile applications) will use this type.

   Author/Change controller:

      *  Qiaobing.Xie@motorola.com

      *  IETF Audio/Video transport working group


5.1 Mapping MIME Parameters into SDP

   The information carried in the MIME media type specification has a
   specific mapping to fields in the Session Description Protocol (SDP)
   [4], which is commonly used to describe RTP sessions. When SDP is
   used to specify sessions employing ES 202 050 DSR codec, the mapping
   is as follows:

   o  The MIME type ("audio") goes in SDP "m=" as the media name.

   o  The MIME subtype ("dsr-es202050") goes in SDP "a=rtpmap" as the
      encoding name.

   o  The optional parameter "rate" also goes in "a=rtpmap" as clock



Xie & Pearce             Expires April 16, 2004                 [Page 8]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


      rate.

   o  The optional parameters "ptime" and "maxptime" go in the SDP
      "a=ptime" and "a=maxptime" attributes, respectively.

   Example of usage of ES 202 050 DSR:

     m=audio 49120 RTP/AVP 101
     a=rtpmap:101 dsr-es202050/8000
     a=maxptime:40


6. Security Considerations

   Implementations using the payload defined in this specification are
   subject to the security considerations discussed in the RTP
   specification [5] and the RTP profile [6]. This payload does not
   specify any different security services.

7. Acknowledgments

   The design presented here is based on that of [7].

Normative References

   [1]  European Telecommunications Standards Institute (ETSI) Standard
        ES 202 050, "Speech Processing, Transmission and Quality Aspects
        (STQ); Distributed Speech Recognition; Front-end Feature
        Extraction Algorithm; Compression Algorithms", (http://
        pda.etsi.org/pda/home.asp?wki_id=6402) , October 2002.

   [2]  Bradner, S., "The Internet Standards Process -- Revision 3", BCP
        9, RFC 2026, October 1996.

   [3]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [4]  Handley, M. and V. Jacobson, "SDP: Session Description
        Protocol", RFC 2327, April 1998.

   [5]  Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
        "RTP: A Transport Protocol for Real-Time Applications", RFC
        3550, July 2003.

   [6]  Schulzrinne, H. and S. Casner, "RTP Profile for Audio and Video
        Conferences with Minimal Control", RFC 3551, July 2003.

   [7]  Xie, Q., "RTP Payload Format for European Telecommunications



Xie & Pearce             Expires April 16, 2004                 [Page 9]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


        Standards Institute (ETSI) European Standard ES 201 108
        Distributed Speech Recognition Encoding", RFC 3557, July 2003.

Informative References

   [8]  European Telecommunications Standards Institute (ETSI) Standard
        ES 201 108, "Speech Processing, Transmission and Quality Aspects
        (STQ); Distributed Speech Recognition; Front-end Feature
        Extraction Algorithm; Compression Algorithms", http://
        webapp.etsi.org/pda/home.asp?wki_id=9948 , April 2000.


Authors' Addresses

   Qiaobing Xie
   Motorola, Inc.
   1501 W. Shure Drive, 2-F9
   Arlington Heights, IL  60004
   US

   Phone: +1-847-632-3028
   EMail: qxie1@email.mot.com


   David Pearce
   Motorola Labs
   UK Research Laboratory
   Jays Close
   Viables Industrial Estate
   Basingstoke, HANTS  RG22 4PD
   UK

   Phone: +44 (0)1256 484 436
   EMail: bdp003@motorola.com

















Xie & Pearce             Expires April 16, 2004                [Page 10]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Xie & Pearce             Expires April 16, 2004                [Page 11]

Internet-Draft    RTP Payload Format for ES202050 DSR       October 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Xie & Pearce             Expires April 16, 2004                [Page 12]

