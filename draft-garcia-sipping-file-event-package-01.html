<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Session Initiation Protocol (SIP) Event Package and Data
    Format for Describing Files</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Session Initiation Protocol (SIP) Event Package and Data
    Format for Describing Files">
<meta name="keywords" content="file, event, package, SIP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING Working Group</td><td class="header">M. Garcia-Martin</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Matuszewski</td></tr>
<tr><td class="header">Expires: May 19, 2008</td><td class="header">Nokia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 16, 2007</td></tr>
</table></td></tr></table>
<h1><br />A Session Initiation Protocol (SIP) Event Package and Data
    Format for Describing Files<br />draft-garcia-sipping-file-event-package-01</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 19, 2008.</p>

<h3>Abstract</h3>

<p>
      This document specifies the format and semantics associated to a
      'file' event package that allows SIP endpoints to publish the
      availability of files. A file can be, for example, images, video
      files, audio files, etc. The event package reuses the eXtended
      Mark-up Language (XML) 'file-metadata' document to provide file
      descriptions. This event package also allows SIP endpoints to
      subscribe to changes in the availability of files, or perform
      searches for the availability and location of a given
      file. Support for partial notifications and publications is also
      accomplished by using XML patch operations.
    
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
The 'file' Event Package<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Package Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Event Package Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
SUBSCRIBE Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
Subscription duration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.5.</a>&nbsp;
NOTIFY Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notifier-sub">3.6.</a>&nbsp;
Notifier processing of SUBSCRIBE requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notifier-sub-authentication">3.6.1.</a>&nbsp;
Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notifier-sub-authorization">3.6.2.</a>&nbsp;
Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notifier">3.7.</a>&nbsp;
Notifier Generation of NOTIFY Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.8.</a>&nbsp;
Subscriber Processing of NOTIFY Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.9.</a>&nbsp;
Handling of Forked Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.10.</a>&nbsp;
Rate of Notifications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.11.</a>&nbsp;
State Agents<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.12.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.13.</a>&nbsp;
Use of URIs to Retrieve State<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.14.</a>&nbsp;
PUBLISH bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">3.15.</a>&nbsp;
PUBLISH Response Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">3.16.</a>&nbsp;
Multiple Sources for Event State<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">3.17.</a>&nbsp;
Event State Segmentation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">3.18.</a>&nbsp;
Rate of Publication<br />
<a href="#security">4.</a>&nbsp;
Security Considerations<br />
<a href="#anchor20">5.</a>&nbsp;
Acknowledgements<br />
<a href="#iana">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">6.1.</a>&nbsp;
Registration of the 'file' Event Package<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
      There are scenarios where a SIP endpoint has a number of
      available files that can be offered for public disposal or for a
      limited number of authorized users. One of these cases is, for
      example, when Alice takes some pictures with her camera phone
      and she wants to share them within a community. This requires a
      mechanism that allows Alice to describe the files she wants to share. 
    
</p>
<p>
      In another scenario, Alice might be interested in finding out
      the availability of a given file, defined by a set of
      parameters. Think, for example, of Alice trying to find pictures
      of the bowling tournament that took place recently in her home
      town. This implies a mechanism whereby Alice can perform
      searches of available files. The user who performs the
      search identifies one or more aspects of the file she is
      searching, but probably she is not able to provide a full
      description of the file.
    
</p>
<p>
      <a class='info' href='#RFC3261'>SIP<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] provides an extensible <a class='info' href='#RFC3265'>event mechanism<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] that is suitable for
      our needs. We enable the above scenarios by defining a SIP event
      package for file metadata publication and search. We reuse the
      'file-metadata' document format specified in the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format
      for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]. All together, they allow an Event
      Publication Agent (EPA) to provide a description of locally
      available files in a <a class='info' href='#RFC3903'>PUBLISH
      request<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903]. In a community, there can be an Event State
      Compositor that aggregates shared files available at different
      endpoints. The Event State Compositor (ESC) that receives the
      PUBLISH request processes 'file-metadata' documents according to
      a well defined strategy (which is outside the scope of this
      document). For example, the ESC can be a centralized
      intermediary facilitator for a given community, or it can be a
      super-node of a SIP Peer-to-Peer (P2P) network.
    
</p>
<p>
      A user that searches for one or more files issues a
      SUBSCRIBE request (either a subscription or a fetch of state,
      see <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265]) to the 'file'
      event package. Because a subscription to all of the files
      published in the community is likely to contain a large amount
      of data, the subscriber will typically attach a <a class='info' href='#RFC4661'>filter<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;An Extensible Markup Language (XML)-Based Format for Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a> [RFC4661] that describes the files
      under search. This will result in the generation of one or more
      NOTIFY requests that contains the searched items. Once the
      information on files is retrieved, the subscriber can use
      any suitable mechanism (such as the one defined in <a class='info' href='#I-D.ietf-mmusic-file-transfer-mech'>"Session Description
      Protocol (SDP) Offer/Answer Mechanism to Enable File
      Transfer"<span> (</span><span class='info'>Garcia, M., Isomaki, M., Camarillo, G., Loreto, S., and P. Kyzivat, &ldquo;A Session Description Protocol (SDP) Offer/Answer Mechanism to Enable File  Transfer,&rdquo; February&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;mmusic&#8209;file&#8209;transfer&#8209;mech]) to actually download the file. Such file
      transfer mechanisms are outside the scope of this memo.
    
</p>
<p>
      In the file descriptor, sometimes  the URI points to the file
      itself itself (such as an HTTP URI that points to an image
      file). In other cases the URI merely resolves to a host where
      the content is available (for example, the SIP URI of a camera
      phone that stores images).
    
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
      "OPTIONAL" in this document are to be interpreted as described
      in BCP 14, <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to           Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119] and indicate
      requirement levels for compliant implementations.
    
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
The 'file' Event Package</h3>

<p>
      <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] defines a SIP extension
      for subscribing to, and receiving notifications of changes
      (events) in the state of remote nodes. It leaves the definition
      of many aspects of these events to concrete extensions, known as
      event packages.  This document qualifies as an event package.
      This section fills in the information required for all event
      packages by <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].
    
</p>
<p>
      Additionally, <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] defines
      an extension that allows SIP User Agents to publish event
      state. According to <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] any
      event package intended to be used in conjunction with the SIP
      PUBLISH method has to include a considerations section. This
      section also fills the information for all event packages to be
      used with PUBLISH requests.
    
</p>
<p>
      We define a new 'file' event package. Event Publication
      Agents (EPA) use PUBLISH requests to inform an Event State
      Compositor (ESC) of changes in the 'file' event package. The
      ESC, acting as a notifier, notifies subscribers to the
      'file' event package when changes occur.
    
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Package Name</h3>

<p>
	The name of this package is 'file'.  As specified in <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265], this value appears in the
	Event header field present in SUBSCRIBE and NOTIFY
	requests. As specified in the <a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903], this value appears as well in the Event header field
	present in PUBLISH requests.
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Event Package Parameters</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] allows event packages
	to define additional parameters carried in the Event header
	field. This event package, 'file', does not define
	additional parameters.
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
SUBSCRIBE Bodies</h3>

<p>
	According to <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265], a
	SUBSCRIBE request can contain a body.  The purpose of the body
	depends on its type.  Subscriptions to the 'file' event
	package MAY contain a filter body according to the format
	specified in <a class='info' href='#RFC4661'>[RFC4661]<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;An Extensible Markup Language (XML)-Based Format for Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a>. Filters are used to
	reduce the number of results during searches.
      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Subscription duration</h3>

<p>
	From the functional point of view, there are two kinds of
	subscriptions to the 'file' even package. In one, the user may
	want to either perform a single search operation on the
	existing files. In the other, the user may want to monitor the
	changes in the state information of files. These
	functionalities can be controlled by the duration of the
	subscription.
      
</p>
<p>
	A search on existing files can be implemented with a
	single fetch operation (where the Expires header field is set
	to zero) or by a subscription of a short duration (typically
	on the order of a few minutes). The other functionality, where
	a user wants to monitor the changes of a state, is typically
	implemented as a lengthy subscription, on the order of hours,
	as the user needs to be notified whenever a change in the
	file has occurred.
      
</p>
<p>
	Due to the lack of congruence in the two types of
	subscriptions, it is hard to select a default expiration
	value. We have decided to select a mean default value that
	accommodate both types of subscriptions: 1800 seconds. As per
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265], the subscriber MAY
	specify an alternate expiration in the Expires header
	field. It is RECOMMENDED that UACs always include an explicit
	Expires header field with the desired subscription value.
      
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
NOTIFY Bodies</h3>

<p>
	As described in <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265], the
	NOTIFY message can contain a body describing the state of the
	subscribed resources. This body is either in a format listed
	in the Accept header field of the SUBSCRIBE request, or in a
	package-specific default format, if the Accept header field
	was omitted from the SUBSCRIBE request.
      
</p>
<p>
	In this event package, the body of the notification contains a
	'file-metadata' document, specified in the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format
	for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]. A 'file-metadata'
	document can be expressed as a full or partial document.  An
	ESC can receive 'file-metadata' documents from different EPAs
	or other sources. The ESC applies a composition policy, and
	composes a 'file-metadata' document that contains all the
	available known files to the EPA. If the ESC is not able to
	resolve a conflict, due to contradictory information provided
	by two different EPAs, the ESC provides a comprehensive
	information for that file, so that the subscriber can resolve
	the conflict.
      
</p>
<p>
	All subscribers and notifiers of 'file' event package MUST
	support the "application/file+xml" data format described in
	<a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data
	Format for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format].  The SUBSCRIBE request
	MAY contain an Accept header field.  If no such header field
	is present, it has a default value of "application/file+xml"
	(assuming that the Event header field contains a value of
	'file').  If the Accept header field is present, it MUST
	include "application/file+xml", and MAY include any other
	types capable of representing 'file-metadata' documents.
      
</p>
<p>
	When composing a 'file-metadata' document, the ESC MAY include
	several &lt;instance&gt; elements per &lt;file&gt;
	element. This would be the case when the ESC has acquired
	information concerning the same file, for example, through
	publications from different EPAs.
      
</p>
<a name="notifier-sub"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
Notifier processing of SUBSCRIBE requests</h3>

<p>
	The contents of a 'file-metadata' document can contain
	sensitive information that can reveal some privacy
	information. For example, it can contain a list of valuable
	files and the address (SIP URI) of the SIP User Agent where
	those are stored. While this information itself is not very
	useful, it can be used by malicious agents, e.g., to mount an
	attack to avoid other users to retrieve such a
	file. Therefore, 'file-metadata' documents MUST only be sent
	to authorized subscribers.  In order to determine if a
	subscription originates in an authorized user, the user MUST
	be authenticated as described in <a class='info' href='#notifier-sub-authentication'>Section&nbsp;3.6.1<span> (</span><span class='info'>Authentication</span><span>)</span></a> and then he MUST be
	authorized to be a subscriber as described in <a class='info' href='#notifier-sub-authorization'>Section&nbsp;3.6.2<span> (</span><span class='info'>Authorization</span><span>)</span></a>.
      
</p>
<a name="notifier-sub-authentication"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6.1"></a><h3>3.6.1.&nbsp;
Authentication</h3>

<p>
	  Notifiers SHOULD authenticate all subscription requests.
	  This authentication can be done using any of the mechanisms
	  defined in <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] and
	  other authentication extensions.
	
</p>
<a name="notifier-sub-authorization"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6.2"></a><h3>3.6.2.&nbsp;
Authorization</h3>

<p>
	  Once authenticated, the notifier makes an authorization
	  decision.  A notifier MUST NOT accept a subscription unless
	  authorization has been provided by the user. The means by
	  which authorization are provided are outside the scope of
	  this document. Authorization may have been provided ahead of
	  time through access lists, perhaps specified in a web page,
	  or provided with the <a class='info' href='#RFC4745'>Common Policy Framework<span> (</span><span class='info'>Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J., Polk, J., and J. Rosenberg, &ldquo;Common Policy: A Document Format for Expressing Privacy Preferences,&rdquo; February&nbsp;2007.</span><span>)</span></a> [RFC4745].
	
</p>
<a name="notifier"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
Notifier Generation of NOTIFY Requests</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] details the formatting
	and structure of NOTIFY messages.  However, packages are
	mandated to provide detailed information on when to send a
	NOTIFY request, how to compute the state of the resource, how to
	generate neutral or fake state information, and whether state
	information is complete or partial.  This section describes
	those details for the 'file' event package.
      
</p>
<p>
	A notifier MAY send a NOTIFY at any time. The NOTIFY request
	MAY contain a body containing a 'file-metadata' document or
	any other type indicated by the subscriber in the Accept
	header field of the SUBSCRIBE request. The times at which the
	NOTIFY is sent to a particular subscriber, and the contents of
	the body within that notification, are subject to any rules
	specified by the authorization policy that governs the
	subscription, but typically will contain an indication of
	those known files for which a change has occurred.
      
</p>
<p>
	Since 'file-metadata' documents can contain full or partial
	state, the first 'file-metadata' document that a notifier
	sends to subscriber MUST contain be a full 'file-metadata'
	document. Subsequent documents sent to the same subscriber MAY
	contain full 'file-metadata' documents or partial
	'file-metadata' documents (the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format
	for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format] provides further discussion about
	full and partial 'file-metadata' documents).
      
</p>
<p>
	In the case of a pending subscription, when final
	authorization is determined, a NOTIFY request can be sent.  If
	the result of the authorization decision was success, a NOTIFY
	SHOULD be sent and SHOULD contain a full 'file-metadata' document
	with the current state of the files known by the notifier
	at that moment. If the subscription is rejected, a NOTIFY MAY
	be sent.  As described in <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265], the Subscription-State header field indicates the
	state of the subscription.
      
</p>
<p>
	Frequently, the notifier will have a incomplete view of the
	available files described in a 'file-metadata' document. For
	the duration of the subscription, the notifier can be running
	searches for the availability of the searched files. When new
	state information is made available to the notifier, the
	notifier SHOULD provide this information to the subscribers,
	typically as notifications that contain a partial
	'file-metadata' document.
      
</p>
<p>
	The body of the NOTIFY MUST be sent using one of the types
	listed in the Accept header field in the most recent SUBSCRIBE
	request, or using the type "application/file+xml" if no
	Accept header field was present.
      
</p>
<p>
	Notifiers will typically act as Event State Compositors (ESC)
	and thus, will learn the 'file' event state via PUBLISH
	requests sent from the user's Event Publication Agent (EPA)
	when the user makes one or more files available or via
	subscriptions passed further to other ESCs.
      
</p>
<p>
	For reasons of privacy, it will frequently be necessary to
	encrypt the contents of the notifications.  This can be
	accomplished using <a class='info' href='#RFC3851'>S/MIME<span> (</span><span class='info'>Ramsdell, B., &ldquo;Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.1 Message Specification,&rdquo; July&nbsp;2004.</span><span>)</span></a> [RFC3851].  The
	encryption can be performed using the key of the subscriber as
	identified in the From field of the SUBSCRIBE request.
	Similarly, integrity of the notifications is important to
	subscribers.  As such, the contents of the notifications MAY
	provide authentication and message integrity using <a class='info' href='#RFC3851'>S/MIME<span> (</span><span class='info'>Ramsdell, B., &ldquo;Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.1 Message Specification,&rdquo; July&nbsp;2004.</span><span>)</span></a> [RFC3851].  This will require the
	notifier to sign the content of the notification with the
	notifier's private key.
      
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.8"></a><h3>3.8.&nbsp;
Subscriber Processing of NOTIFY Requests</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] leaves it to event
	packages to describe the process followed by the subscriber
	upon receipt of a NOTIFY request, including any logic required
	to form a coherent resource state.
      
</p>
<p>
	In this specification, each NOTIFY request contains either no
	'file-metadata' document, a full 'file-metadata' document
	representing files which are available at one or more SIP User
	Agents, or a partial 'file-metadata' document that represent
	changes with respect a previously notified 'file-metadata'
	document. Within a dialog, when a 'file-metadata' document is
	received in a NOTIFY request with a higher CSeq header field
	value than a previously received NOTIFY, and when the
	'version' attribute value of the &lt;patch&gt; element is
	increased by one it contains a
	partial 'file-metadata' document that updates a previously
	received 'file-metadata' document (see the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format
	for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format] for more details).
      
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.9"></a><h3>3.9.&nbsp;
Handling of Forked Requests</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] requires each package
	to describe handling of forked SUBSCRIBE requests.
      
</p>
<p>
	This specification allows several dialogs to be constructed as
	a result of emitting an initial SUBSCRIBE request, i.e., in
	cases where the SUBSCRIBE request forked to several
	notifiers. In this case, the subscriber will keep several
	simultaneous dialogs. The subscriber SHOULD merge the several
	'file-metadata' documents received in NOTIFY requests. It might be
	possible that new &lt;file&gt; elements are received in
	forked 'file-metadata' documents, or it might be possible that
	existing &lt;file&gt; elements are updated with new
	information (e.g., a new &lt;gruu&gt; element). In both cases
	the merge should provide a logical OR operation of all the
	available information such as new entries and added
	information to existing entries.
      
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.10"></a><h3>3.10.&nbsp;
Rate of Notifications</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] requires each package
	to specify the maximum rate at which notifications can be
	sent.
      
</p>
<p>
	Notifiers of 'file-metadata' documents SHOULD NOT generate
	notifications for a single user at a higher rate than once
	every second.
      
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.11"></a><h3>3.11.&nbsp;
State Agents</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] requires each package
	to consider the role of state agents in the package, and if
	they are used, to specify how authentication and authorization
	are done.
      
</p>
<p>
	This specification allows state agents to be located in the
	network. A given file might be available at different SIP
	User Agents in the network. ESCs can act as state agents by
	compiling and aggregating state towards, e.g., subscribers,
	other networks or communities. State agents MUST use any of
	the mechanism specified in <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] or any other SIP extension to authenticate and
	authorize users prior to accepting publications.
      
</p>
<p>
	If the state agent acts as an aggregator, the state agent
	SHOULD aggregate all the information related to the same
	available file. In this case, it is expected that, because
	the same file is available in different endpoints, there
	might be different URIs for a given available file.
      
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.12"></a><h3>3.12.&nbsp;
Examples</h3>

<p>
	Examples of 'file-metadata' documents are provided in the
	<a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data
	Format for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format].
      
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.13"></a><h3>3.13.&nbsp;
Use of URIs to Retrieve State</h3>

<p>
	<a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] allows packages to use
	URIs to retrieve large state documents.
      
</p>
<p>
	A 'file-metadata' document can be of any arbitrary length, and can
	also become too large to be reasonably sent in a SIP
	request. To avoid the burden of transmitting large documents
	through SIP proxies and to avoid potential congestion
	scenarios, it is possible that the notifier instead includes a
	URI that points to the contents, rather than the actual
	contents. For example, the notifier can include an <a class='info' href='#RFC2616'>HTTP<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] URI that points to the notifier
	itself. Since HTTP requests are transferred via a congestion
	controlled protocol (such as <a class='info' href='#RFC0793'>TCP<span> (</span><span class='info'>Postel, J., &ldquo;Transmission Control Protocol,&rdquo; September&nbsp;1981.</span><span>)</span></a> [RFC0793]), the inclusion of a URI to retrieve state mitigates
	the problem of large 'file-metadata' documents.
      
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.14"></a><h3>3.14.&nbsp;
PUBLISH bodies</h3>

<p>
	<a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] requires event
	packages to define the content types expected in PUBLISH
	requests.
      
</p>
<p>
	In this event package, the body of a PUBLISH request contains
	a 'file-metadata' document (see the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format
	for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format]).  This 'file-metadata' document
	describes the availability of one or more files (typically,
	but not necessarily, stored at the EPA).  EPAs SHOULD only
	publish the description of locally available files, i.e., the
	URI of the file SHOULD resolve to the EPA itself.

	

      
</p>
<p>
	All EPAs and ESCs MUST support the "application/file+xml" data
	format described in the <a class='info' href='#I-D.garcia-app-area-file-data-format'>XML Data Format
	for describing files<span> (</span><span class='info'>Garcia-Martin, M. and M. Matuszewski, &ldquo;An Extensible Data Format (XML) for Describing Files,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;app&#8209;area&#8209;file&#8209;data&#8209;format].  and MAY support other formats.
      
</p>
<p>
	When the EPA is composing a 'file-metadata' document, the EPA
	SHOULD include only one &lt;instance&gt; element per
	&lt;file&gt; element, and the data SHOULD include only the
	local description of the file.
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
	    Allowing EPAs to provide a description of non-locally
	    stored files could be maliciously used for creating,
	    e.g., denial of service attacks.
	  
</dd>
</dl></blockquote><p>
      
</p>
<p>
	EPAs MUST NOT publish non-local URIs in the &lt;uri&gt; element,
	although they MAY publish several URIs for a single file,
	e.g., if the file is available through several protocols and
	URIs.
      
</p>
<p>
	EPAs MUST NOT include &lt;user-aor&gt; containing
	addresses-of-record that point to other users than the one
	whose file EPA is publishing. ESCs MUST verify that a
	&lt;user-aor&gt; element received in a PUBLISH request belongs
	to the same user who published the request; this requires the
	ESC to first authenticate the publisher.
      
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.15"></a><h3>3.15.&nbsp;
PUBLISH Response Bodies</h3>

<p>
	This specification does not associate semantics to a body in a
	PUBLISH response.
      
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.16"></a><h3>3.16.&nbsp;
Multiple Sources for Event State</h3>

<p>
	<a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] requires event
	packages to specify whether multiple sources can contribute to
	the event state view at the ESC.
      
</p>
<p>
	This event package allows different EPAs to publish the
	availability of the same file. For the same file, each
	EPA publishes data that is invariant with the instance of
	the file, and data that is specific with each
	instance. The ESC SHOULD merge the data pertaining to the same
	file according to a composition policy. This policy can,
	e.g., list all the difference instances where each file is
	available.
      
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.17"></a><h3>3.17.&nbsp;
Event State Segmentation</h3>

<p>
	<a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] defines segments
	within a state document. Each segment is defined as one of
	potentially many identifiable sections in the published event
	state.
      
</p>
<p>
	In this 'file' event package, each &lt;file&gt; element composes
	a segment.
      
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.18"></a><h3>3.18.&nbsp;
Rate of Publication</h3>

<p>
	<a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] allows event packages
	to define their own rate of publication.
      
</p>
<p>
	There are no rate limiting recommendations for 'file'
	publication. It is expected that new files are added at
	the time of creation (e.g., a new image is taken with a camera
	phone), and that they are not changed often. Thus, a typical
	rate of publication does not exist and there is no foreseen
	need to limit the rate of publications.
      
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>
      TBD
    
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgements</h3>

<p>
      The authors would like to thank Nicklas Beijar and Juuso
      Lehtinen held fruitful discussions with the authors that lead to
      the design of this event package. Pekka Kuure and Arto
      Leppisaari provided helpful comments during the initial review.
    
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Registration of the 'file' Event Package</h3>

<p>
	This specification registers an event package, based on the
	registration procedures defined in <a class='info' href='#RFC3265'>RFC
	3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].  The following is the information required for
	such a registration:
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
	    Package Name: file
	  
</dd>
</dl></blockquote><p>
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
	    Package or Template-Package: This is a package.
	  
</dd>
</dl></blockquote><p>
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>        
	    Published Document: RFC XXX [Replace by the RFC number of
	    this specification].
	  
</dd>
</dl></blockquote><p>
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>        
	    Person to Contact: Miguel A. Garcia-Martin,
	    miguel.garcia@nsn.com
	  
</dd>
</dl></blockquote><p>
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to
          Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3851">[RFC3851]</a></td>
<td class="author-text">Ramsdell, B., &ldquo;<a href="http://tools.ietf.org/html/rfc3851">Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.1 Message Specification</a>,&rdquo; RFC&nbsp;3851, July&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3851.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[RFC3903]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.garcia-app-area-file-data-format">[I-D.garcia-app-area-file-data-format]</a></td>
<td class="author-text">Garcia-Martin, M. and M. Matuszewski, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-garcia-app-area-file-data-format-00.txt">An Extensible Data Format (XML) for Describing Files</a>,&rdquo; draft-garcia-app-area-file-data-format-00 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-garcia-app-area-file-data-format-00.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-file-transfer-mech">[I-D.ietf-mmusic-file-transfer-mech]</a></td>
<td class="author-text">Garcia, M., Isomaki, M., Camarillo, G., Loreto, S., and P. Kyzivat, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-file-transfer-mech-11.txt">A Session Description Protocol (SDP) Offer/Answer Mechanism to Enable File  Transfer</a>,&rdquo; draft-ietf-mmusic-file-transfer-mech-11 (work in progress), February&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-file-transfer-mech-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC0793">[RFC0793]</a></td>
<td class="author-text">Postel, J., &ldquo;<a href="http://tools.ietf.org/html/rfc793">Transmission Control Protocol</a>,&rdquo; STD&nbsp;7, RFC&nbsp;793, September&nbsp;1981 (<a href="http://www.rfc-editor.org/rfc/rfc793.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4661">[RFC4661]</a></td>
<td class="author-text">Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;<a href="http://tools.ietf.org/html/rfc4661">An Extensible Markup Language (XML)-Based Format for Event Notification Filtering</a>,&rdquo; RFC&nbsp;4661, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4661.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4745">[RFC4745]</a></td>
<td class="author-text">Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J., Polk, J., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4745">Common Policy: A Document Format for Expressing Privacy Preferences</a>,&rdquo; RFC&nbsp;4745, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4745.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Miguel A. Garcia-Martin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks, FIN  02022</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:miguel.garcia@nsn.com">miguel.garcia@nsn.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marcin Matuszewski</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FIN  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:marcin.matuszewski@nokia.com">marcin.matuszewski@nokia.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
