



Network Work group                                             N. Nainar
Internet-Draft                                              C. Pignataro
Updates: 8287 (if approved)                          Cisco Systems, Inc.
Intended status: Standards Track                                F. Iqbal
Expires: February 9, 2020                                     Individual
                                                           A. Vainshtein
                                                             ECI Telecom
                                                          August 8, 2019


                  RFC8287 Sub-TLV Length Clarification
              draft-ietf-mpls-rfc8287-len-clarification-04

Abstract

   RFC8287 defines the extensions to MPLS LSP Ping and Traceroute for
   Segment Routing IGP-Prefix and IGP-Adjacency Segment Identifier
   (SIDs) with an MPLS data plane.  RFC8287 proposes 3 Target FEC Stack
   Sub-TLVs.  While the standard defines the format and procedure to
   handle those Sub-TLVs, it does not sufficiently clarify how the
   length of the Segment ID Sub-TLVs should be computed to include in
   the Length field of the Sub-TLVs which may result in interoperability
   issues.

   This document updates RFC8287 by clarifying the length of each
   Segment ID Sub-TLVs defined in RFC8287.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on February 9, 2020.








Nainar, et al.          Expires February 9, 2020                [Page 1]

Internet-Draft    RFC8287 Sub-TLV Length Clarification       August 2019


Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Requirements notation . . . . . . . . . . . . . . . . . . . .   3
   4.  Length field clarification for Segment ID Sub-TLVs  . . . . .   3
     4.1.  IPv4 IGP-Prefix Segment ID Sub-TLV  . . . . . . . . . . .   3
     4.2.  IPv6 IGP-Prefix Segment ID Sub-TLV  . . . . . . . . . . .   3
     4.3.  IGP-Adjacency Segment ID Sub-TLV  . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   5
   8.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .   5
   9.  Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   [RFC8287] defines the extensions to MPLS LSP Ping and Traceroute for
   Segment Routing IGP-Prefix and IGP-Adjacency Segment Identifier
   (SIDs) with an MPLS data plane.  [RFC8287] proposes 3 Target FEC
   Stack Sub-TLVs.  While the standard defines the format and procedure
   to handle those Sub-TLVs, it does not sufficiently clarify how the
   length of the Segment ID Sub-TLVs should be computed to include in
   the Length field of the Sub-TLVs which may result in interoperability
   issues.

   This document updates [RFC8287] by clarifying the length of each
   Segment ID Sub-TLVs defined in [RFC8287].







Nainar, et al.          Expires February 9, 2020                [Page 2]

Internet-Draft    RFC8287 Sub-TLV Length Clarification       August 2019


2.  Terminology

   This document uses the terminologies defined in [RFC8402], [RFC8029],
   [RFC8287] and so the readers are expected to be familiar with the
   same.

3.  Requirements notation

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

4.  Length field clarification for Segment ID Sub-TLVs

   Section 5 of [RFC8287] defines 3 different Segment ID Sub-TLVs that
   will be included in Target FEC Stack TLV defined in [RFC8029].  The
   length of each Sub-TLVs MUST be calculated as defined in this
   section.

   The TLVs representation defined in section 5.1, 5.2 and 5.3 of
   [RFC8287] are updated to clarify the length calculation as shown in
   section 4.1, 4.2 and 4.3 respectively.  The updated TLV
   representation contain explicitly defined length.

4.1.  IPv4 IGP-Prefix Segment ID Sub-TLV

   The Sub-TLV length for IPv4 IGP-Prefix Segment ID MUST be set to 8 as
   shown in the below TLV format:


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Type = 34 (IPv4 IGP-Prefix SID)|          Length = 8           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                          IPv4 prefix                          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Prefix Length  |    Protocol   |              Reserved         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


4.2.  IPv6 IGP-Prefix Segment ID Sub-TLV

   The Sub-TLV length for IPv6 IGP-Prefix Segment ID MUST be set to 20
   as shown in the below TLV format:




Nainar, et al.          Expires February 9, 2020                [Page 3]

Internet-Draft    RFC8287 Sub-TLV Length Clarification       August 2019


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Type = 35 (IPv6 IGP-Prefix SID)|          Length = 20          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |                                                               |
       |                       IPv6 Prefix                             |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Prefix Length  |    Protocol   |              Reserved         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


4.3.  IGP-Adjacency Segment ID Sub-TLV

   The Sub-TLV length for IGP-Adjacency Segment ID varies depending on
   the Adjacency Type and Protocol.  In any of the allowed combination
   of Adjacency Type and Protocol, the sub-TLV length MUST be calculated
   by including 2 octets of Reserved field.  Table 1 below list the
   length for different combinations of Adj.Type and Protocol.

         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |  Protocol   |            Length for Adj.Type                |
         +             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |             | Parallel  |    IPv4   |    IPv6   | Unnumbered|
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |    OSPF     |    20     |    20     |    44     |     20    |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |    ISIS     |    24     |    24     |    48     |     24    |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |    Any      |    20     |    20     |    44     |     20    |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                          Table 1. IGP-Adjacency SID Length Comparison


   For example, when the Adj. Type is set to Parallel Adjacency and the
   Protocol is set to 0, the Sub-TLV will be as below:













Nainar, et al.          Expires February 9, 2020                [Page 4]

Internet-Draft    RFC8287 Sub-TLV Length Clarification       August 2019


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Type = 36 (IGP-Adjacency SID)  |          Length = 20          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Adj. Type = 1 | Protocol = 0  |          Reserved             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |               Local Interface ID (4 octets)                   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |              Remote Interface ID (4 octets)                   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |          Advertising Node Identifier (4 octets)               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           Receiving Node Identifier (4 octets)                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

5.  IANA Considerations

   This document does not introduce any IANA consideration.

6.  Security Considerations

   This document updates [RFC8287] and does not introduce any additional
   security considerations.

7.  Contributors

   The below individuals contributed to this document:

      Zafar Ali, Cisco Systems, Inc.

8.  Acknowledgement

   The authors would like to thank Michael Gorokhovsky and Manohar
   Doppalapudi for investigating the interop issue during EANTC test.

9.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8029]  Kompella, K., Swallow, G., Pignataro, C., Ed., Kumar, N.,
              Aldrin, S., and M. Chen, "Detecting Multiprotocol Label
              Switched (MPLS) Data-Plane Failures", RFC 8029,
              DOI 10.17487/RFC8029, March 2017,
              <https://www.rfc-editor.org/info/rfc8029>.



Nainar, et al.          Expires February 9, 2020                [Page 5]

Internet-Draft    RFC8287 Sub-TLV Length Clarification       August 2019


   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8287]  Kumar, N., Ed., Pignataro, C., Ed., Swallow, G., Akiya,
              N., Kini, S., and M. Chen, "Label Switched Path (LSP)
              Ping/Traceroute for Segment Routing (SR) IGP-Prefix and
              IGP-Adjacency Segment Identifiers (SIDs) with MPLS Data
              Planes", RFC 8287, DOI 10.17487/RFC8287, December 2017,
              <https://www.rfc-editor.org/info/rfc8287>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Nagendra Kumar Nainar
   Cisco Systems, Inc.
   7200-12 Kit Creek Road
   Research Triangle Park, NC  27709
   US

   Email: naikumar@cisco.com


   Carlos Pignataro
   Cisco Systems, Inc.
   7200-11 Kit Creek Road
   Research Triangle Park, NC  27709
   US

   Email: cpignata@cisco.com


   Faisal Iqbal
   Individual
   Canada

   Email: faisal.iqbal@msn.com


   Alexander Vainshtein
   ECI Telecom
   Israel

   Email: vainshtein.alex@gmail.com



Nainar, et al.          Expires February 9, 2020                [Page 6]
