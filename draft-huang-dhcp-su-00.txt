Internet Area                                                 L.Huang 
Internet Draft                                            China Mobile 
Intended status: Informational                           X.Cheng&L.Lin 
Expires: September 2, 2009                                       BUPT 
                                                         March 2, 2009 
 
                                      
             Extension of DHCP Relay Agent Information Option 
                        draft-huang-dhcp-su-00.txt 


Status of this Memo 

   This Internet-Draft is submitted to IETF in full conformance with the 
   provisions of BCP 78 and BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that other 
   groups may also distribute working documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time. It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on September 2, 2009. 

    

Copyright Notice 

   Copyright (c) 2009 IETF Trust and the persons identified as the 
   document authors.  All rights reserved. 

   This document is subject to BCP 78 and the IETF Trust's Legal 
   Provisions Relating to IETF Documents 
   (http://trustee.ietf.org/license-info) in effect on the date of 
   publication of this document.  Please review these documents 
   carefully, as they describe your rights and restrictions with respect 
   to this document. 

    
 
 
 
Huang&Cheng&Lin       Expires September 2, 2009               [Page 1] 

Internet-Draft          DHCP Option Extension            February 2009 
    

Abstract 

   This Internet draft describes an extension of DHCP Relay Agent 
   Information option for the IP address assignment diversity and the 
   server-to-client replies forwarding convenience. 

    

Table of Contents 

    
   1. Introduction................................................2 
   2. Extension of DHCP Relay Agent Information Option.............2 
      2.1. Purpose................................................3 
      2.2. Mechanism..............................................3 
   3. Security Considerations......................................5 
   4. IANA Considerations.........................................5 
   5. References..................................................5 
   Author's Addresses.............................................6 
    
    

1. Introduction 

    

   As defined in RFC 3046, Relay Agent Information option is inserted by 
   the DHCP relay agent (or downstream network element) when forwarding 
   client-originated DHCP packets to a DHCP server. Servers recognizing 
   the Relay Agent Information option may use the information to 
   implement IP address or other parameter assignment policies. The DHCP 
   Server echoes the option back verbatim to the relay agent in server-
   to-client replies, and the relay agent strips the option before 
   forwarding the reply to the client. 

   How to implement more flexible IP address assignment policies with 
   the Relay Agent Information option? This document define an extension 
   of DHCP Relay Agent Information option for the IP address assignment 
   diversity and the server-to-client replies forwarding convenience. 

    

2. Extension of DHCP Relay Agent Information Option 

    


 
 
Huang&Cheng&Lin       Expires September 2, 2009               [Page 2] 

Internet-Draft          DHCP Option Extension            February 2009 
    

2.1. Purpose 

   According to RFC 3046, Relay Agent Information Option is mainly 
   responsible for: 

     (1) More flexible IP address assignment policies; 

     (2) More better server-to-client replies forwarding. 

   Does Relay Agent Information option gain its ends? DHCP Server may 
   implement IP address assignment policies with the circuit information 
   carried in Relay Agent Information option. However, such information 
   isn't legible enough. 

   Inserted more earlier, the Relay Agent Information option is more 
   specific. But the option can't precisely locate the client even it's 
   inserted in the device closest to the client. Although Relay Agent 
   Information option can be used to relay DHCP responses back to the 
   proper circuit, this only works in the network element which inserts 
   the option. 

   As the result, the circuit information in Relay Agent Information 
   option can't fully support the IP address assignment policies. What 
   the DHCP server needs is to locate the client level by level with the 
   whole path information form client to server. Its benefit is that IP 
   address assignment policies of different granularities can be made. 
   When transmitting the server-to-client replies, all network elements 
   can make use of the Relay Agent Information option. 

2.2. Mechanism 

   The "Relay Agent Information" option is organized as a single DHCP 
   option that contains one or more "sub-options" that convey 
   information known by the relay agent.  The initial sub-options are 
   defined for a relay agent that is co-located in a public circuit 
   access unit. The Agent Information field consists of a sequence of 
   SubOpt/Length/Value tuples for each sub-option. 

   Such definition in RFC 3046 has some drawbacks: 

     (1) Relay Agent Information option can only be added by one device 
          in the network, other network elements can only forward the 
          message when finding Relay Agent Information option in it. 

     (2) Sub-option is used to define a kind of information, which means 
          sub-options of the same type value can't coexist in one Relay 
          Agent Information option. 
 
 
Huang&Cheng&Lin       Expires September 2, 2009               [Page 3] 

Internet-Draft          DHCP Option Extension            February 2009 
    

   Based on the demand of the new Relay Agent Information option, we 
   extend this option as following: 

   There is still unique Relay Agent Information option in a DHCP 
   message, but this option can be modified by multiple network elements 
   between DHCP client and DHCP server. For the sake of distinguishing 
   the information added by different devices, we define a new sub-
   option whose type field is y and len field is 0, which are used to 
   identify the end of modification of one device. When a network 
   element receives a DHCP message, if it wants to add Relay Agent 
   Information option, it must check whether Relay Agent Information is 
   already existed in current message. If there is no Relay Agent 
   Information option in the message, the network element adds this kind 
   of option according to RFC 3046; otherwise, the network element adds 
   a new option information after existed option in the sub-options form 
   that are defined in RFC 3046 or other RFCs, such as sub-
   option1(circuit) and sub-option2(remote). Regardless of the two 
   situations, devices must plus a sub-option(type x, len 0) that is 
   defined above to indicate the end of the modification and increase 
   corresponding number in length field of Relay Agent Information 
   option. 

   For example, if all network elements add sub-option1 and sub-option2, 
   DHCP Relay Agent Information option may be following format: 

   Relay Agent Information option: 

   +-------+------+-----+ 

   |Code(x)|Len(N)|Value| 

   +-------+------+-----+ 

   Value: 

   +---+----+--------+---+----+--------+---+---+ 

   | 1 | N1 | a1~aN1 | 2 | N2 | b1~bN2 | y | 0 | 

   +---+----+--------+---+----+--------+---+---+ 

   | 1 | N3 | c1~cN3 | 2 | N4 | d1~dN4 | y | 0 | 

   +---+----+--------+---+----+--------+---+---+ 

   /                    ...                    \ 

 
 
Huang&Cheng&Lin       Expires September 2, 2009               [Page 4] 

Internet-Draft          DHCP Option Extension            February 2009 
    

   \                    ...                    / 

   +---+----+--------+---+----+--------+---+---+ 

   | 1 | N51| y1~yN3 | 2 | N52| z1~zN52| y | 0 | 

   +---+----+--------+---+----+--------+---+---+ 

   DHCP server receiving the DHCP message can obtain layer Relay Agent 
   Information option information and it can allocate different IP 
   address according to the different strategy of allocating granularity 
   constituted by option. Then, Relay Agent Information option is 
   replicated in DHCP response to the DHCP client. 

   Network elements (e.g.: DHCP relay agent or downstream network 
   element) strip its own sub-options when receiving the DHCP response 
   packets and then relay DHCP responses back to the proper circuit by 
   reading the sub-options. 

    

3. Security Considerations 

    

   This document doesn't propose any new protocol. 

    

4. IANA Considerations 

    

   This document requires a new number for DHCP option code x and a new 
   DHCP sub-option code y described in section 2.2. 

    

5. References 

    

   [RFC2131] R. Droms, Bucknell University, " Dynamic Host Configuration 
   Protocol ", RFC 2131, March 1997. 

   [RFC2132] S. Alexander, Silicon Graphics, Inc., and R. Droms, " DHCP 
   Options and BOOTP Vendor Extensions ", RFC 2132, March 1997. 
 
 
Huang&Cheng&Lin       Expires September 2, 2009               [Page 5] 

Internet-Draft          DHCP Option Extension            February 2009 
    

   [RFC3046] M. Patrick, Motorola BCS, " DHCP Relay Agent Information 
   Option ", RFC 3046, January 2001. 

    

Author's Addresses 

    

   Lu Huang 
   China Mobile 
   53A,Xibianmennei Ave., 
   Xuanwu District, 
   Beijing 100053 
   China 
   Email: huanglu@chinamobile.com 
    

   Xu Cheng 
   Beijing University of Posts and Telecommunications 
   10,Xitucheng Road., 
   Haidian District, 
   Beijing 100876 
   China 
   Email: chengx@buptnet.edu.cn 
    

   Lin Lin 
   Beijing University of Posts and Telecommunications 
   10,Xitucheng Road., 
   Haidian District, 
   Beijing 100876 
   China 
   Email: linl@buptnet.edu.cn 












 
 
Huang&Cheng&Lin       Expires September 2, 2009               [Page 6] 

