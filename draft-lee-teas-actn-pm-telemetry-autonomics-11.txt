TEAS Working Group                                      Y. Lee (Editor)
Internet Draft                                              Dhruv Dhody
Intended Status: Standard Track                      Satish Karunanithi
Expires: September 6, 2019                                       Huawei
                                                         Ricard Vilalta
                                                                   CTTC
                                                            Daniel King
                                                   Lancaster University
                                                     Daniele Ceccarelli
                                                               Ericsson


                                                          March 6, 2019


 YANG models for ACTN & TE Performance Monitoring Telemetry and Network
                               Autonomics

              draft-lee-teas-actn-pm-telemetry-autonomics-11

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with
   the provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time.  It is inappropriate to use Internet-Drafts as
   reference material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 6, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
Lee, et al.             Expires September 2019                 [Page 1]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with
   respect to this document.  Code Components extracted from this
   document must include Simplified BSD License text as described in
   Section 4.e of the Trust Legal Provisions and are provided without
   warranty as described in the Simplified BSD License.

Abstract

   Abstraction and Control of TE Networks (ACTN) refers to the set of
   virtual network operations needed to operate, control and manage
   large-scale multi-domain, multi-layer and multi-vendor TE networks,
   so as to facilitate network programmability, automation, efficient
   resource sharing.

   This document provides YANG data models that describe Key
   Performance Indicator (KPI) telemetry and network autonomics for TE-
   tunnels and ACTN VNs.



Table of Contents


   1. Introduction...................................................3
      1.1. Terminology...............................................3
      1.2. Tree diagram..............................................4
      1.3. Prefixes in Data Node Names...............................4
   2. Use-Cases......................................................4
   3. Design of the Data Models......................................6
      3.1. TE KPI Telemetry Model....................................7
      3.2. ACTN TE KPI Telemetry Model...............................7
   4. Scaling Intent Illustration....................................9
   5. Notification..................................................10
      5.1. YANG Push Subscription Examples..........................10
   6. YANG Data Tree................................................11
   7. Yang Data Model...............................................13
      7.1. ietf-te-kpi-telemetry model..............................13
      7.2. ietf-actn-te-kpi-telemetry model.........................18
   8. Security Considerations.......................................21
   9. IANA Considerations...........................................21
   10. Acknowledgements.............................................22
   11. References...................................................22
      11.1. Informative References..................................22
      11.2. Normative References....................................23
   12. Contributors.................................................24


Lee, et al.             Expires September 2019                 [Page 2]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   Authors' Addresses...............................................24

1. Introduction

   Abstraction and Control of TE Networks (ACTN) describes a method for
   operating a Traffic Engineered (TE) network (such as an MPLS-TE
   network or a layer 1/0 transport network) to provide connectivity
   and virtual network services for customers of the TE network
   [RFC8453]. The services provided can be optimized to meet the
   requirements (such as traffic patterns, quality, and reliability) of
   the applications hosted by the customers. Data models are a
   representation of objects that can be configured or monitored within
   a system. Within the IETF, YANG [RFC6020] is the language of choice
   for documenting data models, and YANG models have been produced to
   allow configuration or modeling of a variety of network devices,
   protocol instances, and network services. YANG data models have been
   classified in [RFC8199] and [RFC8309].

   [ACTN-VN] describes how customers or end to end orchestrators can
   request and/or instantiate a generic virtual network service. [ACTN-
   Applicability] describes a connection between IETF YANG model
   classifications to ACTN interfaces. In particular, it describes the
   customer service model can be mapped into the CMI (CNC-MDSC
   Interface) of the ACTN architecture.

   The YANG model on the ACTN CMI is known as customer service model in
   [RFC8309]. [RFC8233] describes key network performance data to be
   considered for end-to-end path computation in TE networks. Key
   performance indicator is a term that describes critical performance
   data that may affect VN/TE service.

   This document provides TE KPI Telemetry Model which provides the TE-
   Tunnel level of performance monitoring model and the scaling
   mechanisms. It also provides ACTN VN TE KPI Telemetry Model which
   provides the VN level of the aggregated performance monitoring model
   and the scaling mechanisms.



1.1. Terminology

   Refer to [RFC8453], [RFC7926], and [RFC8309] for the key terms used
   in this document.






Lee, et al.             Expires September 2019                 [Page 3]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


1.2. Tree diagram

   A simplified graphical representation of the data model is used in
   Section 5 of this this document.  The meaning of the symbols in
   these diagrams is defined in [RFC8340].

1.3. Prefixes in Data Node Names

   In this document, names of data nodes and other data model objects
   are prefixed using the standard prefix associated with the
   corresponding YANG imported modules, as shown in Table 1.


      +---------+------------------------------+-----------------+
      | Prefix  | YANG module                  | Reference       |
      +---------+------------------------------+-----------------+
      | rt      | ietf-routing-types           | [RFC8294]       |
      | te      | ietf-te                      | [TE-Tunnel]     |
      | te-types| ietf-te-types                | [TE-Types]      |
      | te-kpi  | ietf-te-kpi-telemetry        | [This I-D]      |
      | vn      | ietf-vn                      | [ACTN-VN]       |
      | actn-tel| ietf-actn-te-kpi-telemetry   | {This I-D]      |
      +---------+------------------------------+-----------------+

             Table 1: Prefixes and corresponding YANG modules

2. Use-Cases

   [ACTN-PERF] describes use-cases relevant to this draft. It
   introduces the dynamic creation, modification and optimization of
   services based on the performance monitoring in the Abstraction and
   Control of Transport Networks (ACTN) architecture. Figure 1 shows a
   high-level workflows for dynamic service control based on traffic
   monitoring.

   Some of the key points from [ACTN-PERF] are as follows:

     . Network traffic monitoring is important to facilitate automatic
        discovery of the imbalance of network traffic, and initiate the
        network optimization, thus helping the network operator or the
        virtual network service provider to use the network more
        efficiently and save CAPEX/OPEX.
     . Customer services have various SLA requirements, such as
        service availability, latency, latency jitter, packet loss
        rate, BER, etc. The transport network can satisfy service
        availability and BER requirements by providing different


Lee, et al.             Expires September 2019                 [Page 4]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


        protection and restoration mechanisms. However, for other
        performance parameters, there are no such mechanisms. In order
        to provide high quality services according to customer SLA, one
        possible solution is to measure the service SLA related
        performance parameters, and dynamically provision and optimize
        services based on the performance monitoring results.
     . Performance monitoring in a large scale network could generate
        a huge amount of performance information. Therefore, the
        appropriate way to deliver the information in CMI and MPI
        interfaces should be carefully considered.





































Lee, et al.             Expires September 2019                 [Page 5]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


      +-------------------------------------------+
      | CNC   +-----------------------------+     |
      |       | Dynamic Service Control APP |     |
      |       +-----------------------------+     |
      +-------------------------------------------+
      1.Traffic|  /|\4.Traffic            | /|\
      Monitor& |   | Monitor              |  | 8.Traffic
      Optimize |   | Result     5.Service |  | modify &
      Policy   |   |              modify& |  | optimize
              \|/  |        optimize Req.\|/ | result
      +------------------------------------------------+
      | MDSC       +-------------------------------+   |
      |            |Dynamic Service Control Agent |    |
      |            +-------------------------------+   |
      |      +---------------+ +-------------------+   |
      |      | Flow Optimize | | vConnection Agent |   |
      |      +---------------+ +-------------------+   |
      +------------------------------------------------+
      2. Path |   /|\3.Traffic            |  |
      Monitor |    | Monitor              |  |7.Path
      Request |    | Result      6.Path   |  | modify &
              |    |             modify&  |  | optimize
             \|/   |        optimize Req.\|/ | result
      +-------------------------------------------------------+
      | PNC +----------------------+ +----------------------+ |
      |     | Network Provisioning | |Abstract Topology Gen.| |
      |     +----------------------+ +----------------------+ |
      |     +------------------+ +--------------------+       |
      |     |Network Monitoring| |Physical Topology DB|       |
      |     +------------------+ +--------------------+       |
      +-------------------------------------------------------+

      Figure 1 Workflows for dynamic service control based on traffic
                                monitoring



3. Design of the Data Models

   The YANG models developed in this document describe two models:

   (i)   TE KPI Telemetry Model which provides the TE-Tunnel level of
          performance monitoring mechanism (See Section 3.1 & 7.1 for
          details).





Lee, et al.             Expires September 2019                 [Page 6]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   (ii)  ACTN TE KPI Telemetry Model which provides the VN level of the
          aggregated performance monitoring mechanism (See Section 3.2
          & 7.2 for details).


   The models include -

   (i)   Performance Telemetry details as measured during the last
          interval, e.g., delay.

   (ii)  Scaling Intent based on with TE/VN could be scaled in/out (See
          Section 4 for an illustration).



3.1. TE KPI Telemetry Model

   This module describes performance telemetry for TE-tunnel model. The
   telemetry data is augmented to tunnel state.  This module also
   allows autonomic traffic engineering scaling intent configuration
   mechanism on the TE-tunnel level. Various conditions can be set for
   auto-scaling based on the telemetry data (See Section 5 for details)

   The TE KPI Telemetry Model augments the TE-Tunnel Model to enhance
   TE performance monitoring capability. This monitoring capability
   will facilitate proactive re-optimization and reconfiguration of TEs
   based on the performance monitoring data collected via the TE KPI
   Telemetry YANG model.



                +------------+          +--------------+
                |  TE-Tunnel |          |    TE KPI    |
                |   Model    |<---------|  Telemetry   |
                +------------+ augments |     Model    |
                                        +--------------+




3.2. ACTN TE KPI Telemetry Model

   This module describes performance telemetry for ACTN VN model. The
   telemetry data is augmented both at the VN Level as well as
   individual VN member level. This module also allows autonomic
   traffic engineering scaling intent configuration mechanism on the VN
   level. Scale in/out criteria might be used for network autonomics in


Lee, et al.             Expires September 2019                 [Page 7]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   order the controller to react to a certain set of variations in
   monitored parameters (See Section 4 for illustrations).

   Moreover, this module also provides mechanism to define aggregated
   telemetry parameters as a grouping of underlying VN level telemetry
   parameters. Grouping operation (such as maximum, mean) could be set
   at the time of configuration. For example, if maximum grouping
   operation is used for delay at the VN level, the VN telemetry data
   is reported as the maximum {delay_vn_member_1, delay_vn_member_2,..
   delay_vn_member_N}. Thus, this telemetry abstraction mechanism
   allows the grouping of a certain common set of telemetry values
   under a grouping operation. This can be done at the VN-member level
   to suggest how the E2E telemetry be inferred from the per domain
   tunnel created and monitored by PNCs. One proposed example is the
   following:

      +------------------------------------------------------------+
      | CNC                                                        |
      |                                                            |
      +------------------------------------------------------------+

     1.CNC sets the         |   /|\   2. MDSC gets VN Telemetry
     grouping op, and       |    |
     subscribes to the      |    |    VN KPI TELEMETRY (VN Level)
     VN level telemetry for |    |    VN Utilized-bw-percentage:
     Delay and              |    |       Minimum across VN Members
     Utilized-bw-pecentage  |    |    VN Delay: Maximum across VN
                           \|/   |     Members
      +------------------------------------------------------------+
      | MDSC                                                       |
      |                                                            |
      +------------------------------------------------------------+


   The ACTN VN TE-Telemetry Model augments the basic ACTN VN model to
   enhance VN monitoring capability. This monitoring capability will
   facilitate proactive re-optimization and reconfiguration of VNs
   based on the performance monitoring data collected via the ACTN VN
   Telemetry YANG model.


                +----------+          +--------------+
                |  ACTN VN | augments |     ACTN     |
                |   Model  |<---------| TE-Telemetry |
                +----------+          |     Model    |
                                      +--------------+



Lee, et al.             Expires September 2019                 [Page 8]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019




4. Scaling Intent Illustration

   The following tree is a part of ietf-te-kpi-telemetry tree whose
   model is presented in full detail in Sections 6 & 7.

   module: ietf-te-kpi-telemetry
     augment /te:te/te:tunnels/te:tunnel:
       +-rw te-scaling-intent
       |  +-rw scale-in-intent
       |  |  +-rw threshold-time?            uint32
       |  |  +-rw cooldown-time?             uint32
       |  |  +-rw scale-in-operation-type?   scaling-criteria-operation
       |  |  +-rw scaling-condition* [performance-type]
       |  |     +-rw performance-type           identityref
       |  |     +-rw threshold-value?           string
       |  |     +-rw te-telemetry-tunnel-ref?   -> /te:te/tunnels/tunnel/name
       |  +-rw scale-out-intent
       |     +-rw threshold-time?             uint32
       |     +-rw cooldown-time?              uint32
       |     +-rw scale-out-operation-type?   scaling-criteria-operation
       |     +-rw scaling-condition* [performance-type]
       |        +-rw performance-type           identityref
       |        +-rw threshold-value?           string
       |        +-rw te-telemetry-tunnel-ref?   -> /te:te/tunnels/tunnel/name


   Scaling intent configuration mechanism allows the client to
   configure automatic scale-in and scale-out mechanisms on both the
   TE-tunnel and the VN level. Various conditions can be set for auto-
   scaling based on the PM telemetry data.

   For example, if the client were to set scale-out-intent (as the
   above tree), it can specify the threshold-time and cooldown-time to
   which the scaling intent would apply. Threshold time refers to the
   duration for which the criteria must hold true. Cooldown time refers
   to the duration after a scaling action has been triggered, for which
   there will be no further operation.

   Performance type can be any type as defined in performance-type
   (e.g., one-way-delay, one-way-delay-min, one-way-delay-max, two-way-
   delay, two-way-delay-min, two-way-delay-max, utilized bandwidth,
   etc.). Scaling condition can be set with one or more performance
   types. When multiple performance types are set, then scaling-
   operation-type (AND or OR) is applied to these selected performance
   types and its threshold values.




Lee, et al.             Expires September 2019                 [Page 9]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   Let say the client wants to set the scaling out operation based on
   two performance-types (e.g., two-way-delay and utilized-bandwidth
   for a te-tunnel), it can be done as follows:

     . Two-way-delay threshold: 300 mileseconds
     . Utilized bandwidth: 300 megabytes

   By setting AND for the scale-out-operation-type, the two criteria
   have to meet at the same time to trigger scale-out operation.

5. Notification


   This model does not define specific notifications.  To enable
   notifications, the mechanism defined in [Yang-Push]
   and [Event-Notification] can be used.  This mechanism currently
   allows the user to:

     .             Subscribe notifications on a per client basis.

     .             Specify subtree filters or xpath filters so that only interested
       contents will be sent.

     .             Specify either periodic or on-demand notifications.


5.1. YANG Push Subscription Examples

   Below example shows the way for a client to subscribe for the
   telemetry information for a particular tunnel (Tunnel1). The
   telemetry parameter that the client is interested in is one-way-
   delay.


   <netconf:rpc netconf:message-id="101"
       xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0">
       <establish-subscription
          xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push:1.0">
          <filter netconf:type="subtree">
             <te xmlns="urn:ietf:params:xml:ns:yang:ietf-te">
                <tunnels>
                   <tunnel>
                     <name>Tunnel1</name>
                     <identifier/>
                     <state>
                       <te-telemetry xmlns="urn:ietf:params:xml:ns:yang:ietf-te-kpi-
   telemetry">
                           <one-way-delay/>



Lee, et al.             Expires September 2019                [Page 10]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


                        </te-telemetry>
                     </state>
                    </tunnel>
                 </tunnels>
             </te>
          </filter>
          <period>500</period>
          <encoding>encode-xml</encoding>
       </establish-subscription>
    </netconf:rpc>

   This example shows the way for a client to subscribe for the
   telemetry information for all VNs. The telemetry parameter that the
   client is interested in is one-way-delay and one-way-utilized-
   bandwidth.

   <netconf:rpc netconf:message-id="101"
       xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0">
       <establish-subscription
          xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push:1.0">
          <filter netconf:type="subtree">
             <actn-state xmlns="urn:ietf:params:xml:ns:yang:ietf-vn">
                <vn>
                   <vn-list>
                     <vn-id/>
                     <vn-name/>
                     <vn-telemetry  xmlns="urn:ietf:params:xml:ns:yang:ietf-actn-te-kpi-
   telemetry">
                         <one-way-delay/>
                         <one-way-utilized-bandwidth/>
                     </vn-telemetry >
                   </vn-list>
                 </vn>
             </actn-state>
          </filter>
          <period>500</period>
       </establish-subscription>
    </netconf:rpc>

6. YANG Data Tree


module: ietf-te-kpi-telemetry
  augment /te:te/te:tunnels/te:tunnel:
    +-rw te-scaling-intent
    |  +-rw scale-in-intent
    |  |  +-rw threshold-time?            uint32
    |  |  +-rw cooldown-time?             uint32
    |  |  +-rw scale-in-operation-type?   scaling-criteria-operation
    |  |  +-rw scaling-condition* [performance-type]
    |  |     +-rw performance-type           identityref
    |  |     +-rw threshold-value?           string
    |  |     +-rw te-telemetry-tunnel-ref?   -> /te:te/tunnels/tunnel/name



Lee, et al.             Expires September 2019                [Page 11]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


    |  +-rw scale-out-intent
    |     +-rw threshold-time?             uint32
    |     +-rw cooldown-time?              uint32
    |     +-rw scale-out-operation-type?   scaling-criteria-operation
    |     +-rw scaling-condition* [performance-type]
    |        +-rw performance-type           identityref
    |        +-rw threshold-value?           string
    |        +-rw te-telemetry-tunnel-ref?   -> /te:te/tunnels/tunnel/name
    +-ro te-telemetry
       +-ro id?                            string
       +-ro performance-metrics-one-way
       |  +-ro one-way-delay?                           uint32
       |  +-ro one-way-delay-normality?                 te-types:performance-metrics-normality
       |  +-ro one-way-residual-bandwidth?              rt-types:bandwidth-ieee-float32
       |  +-ro one-way-residual-bandwidth-normality?    te-types:performance-metrics-normality
       |  +-ro one-way-available-bandwidth?             rt-types:bandwidth-ieee-float32
       |  +-ro one-way-available-bandwidth-normality?   te-types:performance-metrics-normality
       |  +-ro one-way-utilized-bandwidth?              rt-types:bandwidth-ieee-float32
       |  +-ro one-way-utilized-bandwidth-normality?    te-types:performance-metrics-normality
       +-ro performance-metrics-two-way
       |  +-ro two-way-delay?             uint32
       |  +-ro two-way-delay-normality?   te-types:performance-metrics-normality
       +-ro te-ref?                        -> /te:te/tunnels/tunnel/name



module: ietf-actn-te-kpi-telemetry
  augment /vn:vn/vn:vn-list:
    +--rw vn-scaling-intent
    |  +--rw scale-in-intent
    |  |  +--rw threshold-time?            uint32
    |  |  +--rw cooldown-time?             uint32
    |  |  +--rw scale-in-operation-type?   scaling-criteria-operation
    |  |  +--rw scaling-condition* [performance-type]
    |  |     +--rw performance-type           identityref
    |  |     +--rw threshold-value?           string
    |  |     +--rw te-telemetry-tunnel-ref?   -> /te:te/tunnels/tunnel/name
    |  +--rw scale-out-intent
    |     +--rw threshold-time?             uint32
    |     +--rw cooldown-time?              uint32
    |     +--rw scale-out-operation-type?   scaling-criteria-operation
    |     +--rw scaling-condition* [performance-type]
    |        +--rw performance-type           identityref
    |        +--rw threshold-value?           string
    |        +--rw te-telemetry-tunnel-ref?   -> /te:te/tunnels/tunnel/name
    +--ro vn-telemetry
       +--ro performance-metrics-one-way
       |  +--ro one-way-delay?                           uint32
       |  +--ro one-way-delay-normality?                 te-types:performance-metrics-normality
       |  +--ro one-way-residual-bandwidth?              rt-types:bandwidth-ieee-float32
       |  +--ro one-way-residual-bandwidth-normality?    te-types:performance-metrics-normality
       |  +--ro one-way-available-bandwidth?             rt-types:bandwidth-ieee-float32
       |  +--ro one-way-available-bandwidth-normality?   te-types:performance-metrics-normality
       |  +--ro one-way-utilized-bandwidth?              rt-types:bandwidth-ieee-float32
       |  +--ro one-way-utilized-bandwidth-normality?    te-types:performance-metrics-normality


Lee, et al.             Expires September 2019                [Page 12]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


       +--ro performance-metrics-two-way
       |  +--ro two-way-delay?             uint32
       |  +--ro two-way-delay-normality?   te-types:performance-metrics-normality
       +--ro grouping-operation?            grouping-operation
  augment /vn:vn/vn:vn-list/vn:vn-member-list:
    +--ro vn-member-telemetry
       +--ro performance-metrics-one-way
       |  +--ro one-way-delay?                           uint32
       |  +--ro one-way-delay-normality?                 te-types:performance-metrics-normality
       |  +--ro one-way-residual-bandwidth?              rt-types:bandwidth-ieee-float32
       |  +--ro one-way-residual-bandwidth-normality?    te-types:performance-metrics-normality
       |  +--ro one-way-available-bandwidth?             rt-types:bandwidth-ieee-float32
       |  +--ro one-way-available-bandwidth-normality?   te-types:performance-metrics-normality
       |  +--ro one-way-utilized-bandwidth?              rt-types:bandwidth-ieee-float32
       |  +--ro one-way-utilized-bandwidth-normality?    te-types:performance-metrics-normality
       +--ro performance-metrics-two-way
       |  +--ro two-way-delay?             uint32
       |  +--ro two-way-delay-normality?   te-types:performance-metrics-normality
       +--ro te-grouped-params*             -> /te:te/tunnels/tunnel/te-kpi:te-telemetry/id
       +--ro grouping-operation?            grouping-operation


7. Yang Data Model

7.1. ietf-te-kpi-telemetry model



   The YANG code is as follows:

<CODE BEGINS> file "ietf-te-kpi-telemetry@2019-03-06.yang"

module ietf-te-kpi-telemetry {
  namespace "urn:ietf:params:xml:ns:yang:ietf-te-kpi-telemetry";
  prefix te-tel;

  import ietf-te {
    prefix te;
  }
  import ietf-te-types {
    prefix te-types;
  }
  import ietf-routing-types {
    prefix rt-types;
  }

  organization
    "IETF Traffic Engineering Architecture and Signaling (TEAS)
     Working Group";
  contact


Lee, et al.             Expires September 2019                [Page 13]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


    "Editor: Young Lee <leeyoung@huawei.com>
     Editor: Dhruv Dhody <dhruv.ietf@gmail.com>
     Editor: Ricard Vilalta <ricard.vilalta@cttc.es>
     Editor: Satish Karunanithi <satish.karunanithi@gmail.com>";
  description
    "This module describes telemetry for teas tunnel model";

  revision 2019-03-06 {
    description
      "Initial revision. This YANG file defines
       the reusable base types for TE telemetry.";
    reference "Derived from earlier versions of base YANG files";
  }

  identity telemetry-param-type {
    description
      "Base identity for telemetry param types";
  }

  identity one-way-delay {
    base telemetry-param-type;
    description
      "To specify average Delay in one (forward)
       direction";
  }

  identity two-way-delay {
    base telemetry-param-type;
    description
      "To specify average Delay in both (forward and reverse)
       directions";
  }

  identity one-way-delay-variation {
    base telemetry-param-type;
    description
      "To specify average Delay Variation in one (forward) direction";
  }

  identity two-way-delay-variation {
    base telemetry-param-type;
    description
      "To specify average Delay Variation in both (forward and reverse)
       directions";
  }

  identity utilized-bandwidth {


Lee, et al.             Expires September 2019                [Page 14]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


    base telemetry-param-type;
    description
      "To specify utilized bandwidth over the specified source
       and destination.";
  }

  identity utilized-percentage {
    base telemetry-param-type;
    description
      "To specify utilization percentage of the entity
       (e.g., tunnel, link, etc.)";
  }

  typedef scaling-criteria-operation {
    type enumeration {
      enum AND {
        description
          "AND operation";
      }
      enum OR {
        description
          "OR operation";
      }
    }
    description
      "Operations to analize list of scaling criterias";
  }

  grouping scaling-duration {
    description
      "Base scaling criteria durations";
    leaf threshold-time {
      type uint32;
      units "seconds";
      description
        "The duration for which the criteria must hold true";
    }
    leaf cooldown-time {
      type uint32;
      units "seconds";
      description
        "The duration after a scaling-in/scaling-out action has been
         triggered, for which there will be no further operation";
    }
  }

  grouping scaling-criteria {


Lee, et al.             Expires September 2019                [Page 15]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


    description
      "Grouping for scaling criteria";
    leaf performance-type {
      type identityref {
        base telemetry-param-type;
      }
      description
        "Reference to the tunnel level telemetry type";
    }
    leaf threshold-value {
      type string;
      description
        "Scaling threshold for the telemetry parameter type";
    }
    leaf te-telemetry-tunnel-ref {
      type leafref {
        path "/te:te/te:tunnels/te:tunnel/te:name";
      }
      description
        "Reference to tunnel";
    }
  }

  grouping scaling-in-intent {
    description
      "Basic scaling in intent";
    uses scaling-duration;
    leaf scale-in-operation-type {
      type scaling-criteria-operation;
      default "AND";
      description
        "Operation to be applied to check between
         scaling criterias to check if the scale in
         threshold condition has been met.
         Defaults to AND";
    }
    list scaling-condition {
      key "performance-type";
      description
        "Scaling conditions";
      uses scaling-criteria;
    }
  }

  grouping scaling-out-intent {
    description
      "Basic scaling out intent";


Lee, et al.             Expires September 2019                [Page 16]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


    uses scaling-duration;
    leaf scale-out-operation-type {
      type scaling-criteria-operation;
      default "OR";
      description
        "Operation to be applied to check between
         scaling criterias to check if the scale out
         threshold condition has been met.
         Defauls to OR";
    }
    list scaling-condition {
      key "performance-type";
      description
        "Scaling conditions";
      uses scaling-criteria;
    }
  }

  augment "/te:te/te:tunnels/te:tunnel" {
    description
      "Augmentation parameters for config scaling-criteria
       TE tunnel topologies. Scale in/out criteria might be used
       for network autonomics in order the controller
       to react to a certain set of monitored params.";
    container te-scaling-intent {
      description
        "scaling intent";
      container scale-in-intent {
        description
          "scale-in";
        uses scaling-in-intent;
      }
      container scale-out-intent {
        description
          "scale-out";
        uses scaling-out-intent;
      }
    }
    container te-telemetry {
      config false;
      description
        "telemetry params";
      leaf id {
        type string;
        description
          "Id of telemetry param";
      }


Lee, et al.             Expires September 2019                [Page 17]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


      uses te-types:performance-metrics-attributes;
      leaf te-ref {
        type leafref {
          path "/te:te/te:tunnels/te:tunnel/te:name";
        }
        description
          "Reference to measured te tunnel";
      }
    }
  }
}

<CODE ENDS>


7.2. ietf-actn-te-kpi-telemetry model

   The YANG code is as follows:



<CODE BEGINS> file "ietf-actn-te-kpi-telemetry@2019-03-06.yang"

module ietf-actn-te-kpi-telemetry {
  namespace "urn:ietf:params:xml:ns:yang:ietf-actn-te-kpi-telemetry";
  prefix actn-tel;

  import ietf-vn {
    prefix vn;
  }
  import ietf-te {
    prefix te;
  }
  import ietf-te-types {
    prefix te-types;
  }
  import ietf-te-kpi-telemetry {
    prefix te-kpi;
  }

  organization
    "IETF Traffic Engineering Architecture and Signaling (TEAS)
     Working Group";
  contact
    "Editor: Young Lee <leeyoung@huawei.com>
     Editor: Dhruv Dhody <dhruv.ietf@gmail.com>
     Editor: Ricard Vilalta <ricard.vilalta@cttc.es>


Lee, et al.             Expires September 2019                [Page 18]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


     Editor: Satish Karunanithi <satish.karunanithi@gmail.com>";
  description
    "This module describes telemetry for actn vn model";

  revision 2019-03-06 {
    description
      "Initial revision. This YANG file defines
       the ACTN VN telemetry.";
    reference "Derived from earlier versions of base YANG files";
  }

  typedef grouping-operation {
    type enumeration {
      enum MINIMUM {
        description
          "Select the minimum param";
      }
      enum MAXIMUM {
        description
          "Select the maximum param";
      }
      enum MEAN {
        description
          "Select the MEAN of the params";
      }
      enum STD_DEV {
        description
          "Select the standard deviation of the
           monitored params";
      }
      enum AND {
        description
          "Select the AND of the params";
      }
      enum OR {
        description
          "Select the OR of the params";
      }
    }
    description
      "Operations to analize list of monitored params";
  }

  grouping vn-telemetry-param {
    description
      "augment of te-kpi:telemetry-param for VN specific params";
    leaf-list te-grouped-params {


Lee, et al.             Expires September 2019                [Page 19]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


      type leafref {
        path "/te:te/te:tunnels/te:tunnel/te-kpi:te-telemetry/te-kpi:id";
      }
      description
        "Allows the definition of a vn-telemetry param
         as a grouping of underlying TE params";
    }
    leaf grouping-operation {
      type grouping-operation;
      description
        "describes the operation to apply to
         te-grouped-params";
    }
  }

  augment "/vn:vn/vn:vn-list" {
    description
      "Augmentation parameters for state TE VN topologies.";
    container vn-scaling-intent {
      description
        "scaling intent";
      container scale-in-intent {
        description
          "VN scale-in";
        uses te-kpi:scaling-in-intent;
      }
      container scale-out-intent {
        description
          "VN scale-out";
        uses te-kpi:scaling-out-intent;
      }
    }
    container vn-telemetry {
      config false;
      description
        "VN telemetry params";
      uses te-types:performance-metrics-attributes;
      leaf grouping-operation {
        type grouping-operation;
        description
          "describes the operation to apply to the VN-members";
      }
    }
  }
  augment "/vn:vn/vn:vn-list/vn:vn-member-list" {
    description
      "Augmentation parameters for state TE vn member topologies.";


Lee, et al.             Expires September 2019                [Page 20]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


    container vn-member-telemetry {
      config false;
      description
        "VN member telemetry params";
      uses te-types:performance-metrics-attributes;
      uses vn-telemetry-param;
    }
  }
}

<CODE ENDS>


8. Security Considerations

   The configuration, state, and action data defined in this document
   are designed to be accessed via a management protocol with a secure
   transport layer, such as NETCONF [RFC6241].  The NETCONF access
   control model [RFC8341] provides the means to restrict access for
   particular NETCONF users to a preconfigured subset of all available
   NETCONF protocol operations and content.

   A number of configuration data nodes defined in this document are
   writable/deletable (i.e., "config true") These data nodes may be
   considered sensitive or vulnerable in some network environments.

9. IANA Considerations

   This document registers the following namespace URIs in the IETF XML
   registry [RFC3688]:

   --------------------------------------------------------------------
   URI: urn:ietf:params:xml:ns:yang:ietf-te-kpi-telemetry
   Registrant Contact: The IESG.
   XML: N/A, the requested URI is an XML namespace.
   --------------------------------------------------------------------

   --------------------------------------------------------------------
   URI: urn:ietf:params:xml:ns:yang:ietf-actn-te-kpi-telemetry
   Registrant Contact: The IESG.
   XML: N/A, the requested URI is an XML namespace.
   --------------------------------------------------------------------



Lee, et al.             Expires September 2019                [Page 21]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019



   This document registers the following YANG modules in the YANG
   Module.

   Names registry [RFC7950]:

   --------------------------------------------------------------------
   name:         ietf-te-kpi-telemetry
   namespace:    urn:ietf:params:xml:ns:yang:ietf-te-kpi-telemetry
   reference:    RFC XXXX (TDB)
   --------------------------------------------------------------------

   --------------------------------------------------------------------
   name:         ietf-actn-te-kpi-telemetry
   namespace:    urn:ietf:params:xml:ns:yang:ietf-actn-te-kpi-telemetry
   reference:    RFC XXXX (TDB)
   --------------------------------------------------------------------

10. Acknowledgements

   We thank Rakesh Gandhi, Tarek Saad and Igor Bryskin for useful
   discussions and their suggestions for this work.

11. References

11.1. Informative References

   [RFC3688] M. Mealling, "The IETF XML Registry", RFC 3688, January
             2004.

   [RFC7950] M. Bjorklund, Ed., "The YANG 1.1 Data Modeling Language",
             August 2016.

   [RFC6020] M. Bjorklund, Ed., "YANG - A Data Modeling Language for
             the Network Configuration Protocol (NETCONF)", RFC 6020,
             October 2010.

   [RFC8199] D. Bogdanovic, B. Claise, and C. Moberg, "YANG Module
             Classification", RFC 8199, July 2017.

   [RFC6241] Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
             and A. Bierman, Ed., "Network Configuration Protocol
             (NETCONF)", RFC 6241.



Lee, et al.             Expires September 2019                [Page 22]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   [RFC8294] X. Liu, et al, "Routing Area Common YANG Data Types", RFC
             8294, December 2017.

   [RFC7926] A. Farrel (Ed.), "Problem Statement and Architecture for
             Information Exchange between Interconnected Traffic-
             Engineered Networks", RFC 7926, July 2016.

   [RFC8309] Q. Wu, W. Cheng, and A. Farrel. "Service Models
             Explained", RFC 8309, January 2018.

   [RFC8340] M. Bjorklund and L. Berger (Editors), "YANG Tree
             Diagrams", RFC 8340, March 2018.

   [Yang-Push] A. Clemm, et al, "Subscription to YANG Datastores",
             draft-ietf-netconf-yang-push, work in progress.

   [Event-Notification] E. Voit, et al, "Subscription to YANG
             Datastores", draft-ietf-netconf-yang-push, work in
             progress.

   [ACTN-PERF] Y. XU, et al., "Use Cases and Requirements of Dynamic
             Service Control based on Performance Monitoring in ACTN
             Architecture", draft-xu-actn-perf-dynamic-service-control,
             work in progress.

   [RFC8341] A. Bierman, M. Bjorklund, "Network Configuration Access
             Control Model", RFC 8341, March 2018.

   [RFC8453] D. Ceccarelli and Y. Lee (Editors), "Framework for
             Abstraction and Control of Traffic Engineered Networks",
             RFC 8453, August 2018.



11.2. Normative References



   [TE-Tunnel] T. Saad (Editor), "A YANG Data Model for Traffic
             Engineering Tunnels and Interfaces", draft-ietf-teas-yang-
             te, work in progress.

   [TE-Types] T. Saad, et.al, "Traffic Engineering Common YANG Types",
             draft-ietf-teas-yang-te-types, work in progress.

   [ACTN-VN] Y. Lee (Editor), "A Yang Data Model for ACTN VN
             Operation", draft-lee-teas-actn-vn-yang, work in progress.


Lee, et al.             Expires September 2019                [Page 23]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   [RFC8233] D. Dhody, et al., "Extensions to the Path Computation
             Element Communication Protocol (PCEP) to compute service
             aware Label Switched Path (LSP)", RFC 8233, September
             2017.

12. Contributors


Authors' Addresses

   Young Lee
   Huawei Technologies
   5340 Legacy Drive Suite 173
   Plano, TX 75024, USA

   Email: leeyoung@huawei.com

   Dhruv Dhody
   Huawei Technology
   Leela Palace
   Bangalore, Karnataka 560008
   India

   Email: dhruv.dhody@huawei.com

   Satish Karunanithi
   Huawei Technology
   Leela Palace
   Bangalore, Karnataka 560008
   India

   Email: satish.karunanithi@gmail.com


   Ricard Vilalta
   Centre Tecnologic de Telecomunicacions de Catalunya (CTTC/CERCA)
   Av. Carl Friedrich Gauss 7
   08860 - Castelldefels
   Barcelona (Spain)
   Email: ricard.vilalta@cttc.es



   Daniel King



Lee, et al.             Expires September 2019                [Page 24]

Internet-Draft ACTN & TE PM Telemetry & Network Autonomics   March 2019


   Lancaster University

   Email: d.king@lancaster.ac.uk


   Daniele Ceccarelli
   Ericsson
   Torshamnsgatan,48
   Stockholm, Sweden

   Email: daniele.ceccarelli@ericsson.com




































Lee, et al.             Expires September 2019                [Page 25]

