schema = {
     form,
     ? definitions: { * tstr => schema }
form = empty /
     ref /
     type /
     enum /
     elements /
     properties /
     values /
     discriminator

empty = {}

ref = { ref: tstr }

type = { type: "boolean" / "number" / "string" / "timestamp" }

enum = { enum: [+ tstr] }

elements = { elements: schema }

properties = with-properties / with-optional-properties

with-properties = {
     properties: * tstr => schema,
     ? optionalProperties * tstr => schema
with-optional-properties = {
     ? properties: * tstr => schema,
     optionalProperties: * tstr => schema
values = { values: * tstr => schema }

discriminator = { tag: tstr, mapping: * tstr => properties }

root = any

root = [* a]

a = [* b]
b = number

root = "PENDING" / "DONE" / "CANCELED"

root = bool

root = number

root = tstr

root = tdate

root = [* number]

root = { a: bool, b: number, ? c: tstr, ? d: tdate }

root = { * tstr => number }

root = { a: "foo", b: number } / { a: "bar", b: tstr }
