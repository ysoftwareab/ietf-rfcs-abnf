<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RTP Payload Format for SMPTE 336M Encoded Data</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RTP Payload Format for SMPTE 336M Encoded Data">
<meta name="keywords" content="RTP, KLV, SMPTE, 336M">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Audio Video Transport Working</td><td class="header">J. Arbeiter, Ed.</td></tr>
<tr><td class="header">Group</td><td class="header">Harris Corporation</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">J. Downs, Ed.</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">PAR Government Systems Corp.</td></tr>
<tr><td class="header">Expires: May 20, 2011</td><td class="header">November 16, 2010</td></tr>
</table></td></tr></table>
<h1><br />RTP Payload Format for SMPTE 336M Encoded Data<br />draft-ietf-avt-rtp-klv-01</h1>

<h3>Abstract</h3>

<p>
         This document specifies the payload format for packetization
         of KLV (Key-Length-Value) Encoded Data, as defined by the Society of
         Motion Picture and Television Engineers (SMPTE) in SMPTE 336M, into
         the Real-time Transport Protocol (RTP).
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on May 20, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Conventions, Definitions and Acronyms<br />
<a href="#anchor3">3.</a>&nbsp;
Description of SMPTE 336M Data<br />
<a href="#payloadfmt">4.</a>&nbsp;
Payload Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rtpheader">4.1.</a>&nbsp;
RTP Header Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.2.</a>&nbsp;
Payload Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#klvunit">4.2.1.</a>&nbsp;
The KLVunit<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#klvunit_mapping">4.2.2.</a>&nbsp;
KLVunit Mapping to RTP Packet Payload<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.3.</a>&nbsp;
Implementation Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#loss_of_data">4.3.1.</a>&nbsp;
Loss of Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.3.1.1.</a>&nbsp;
Damaged KLVunits<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.3.1.2.</a>&nbsp;
Treatment of Damaged KLVunits<br />
<a href="#anchor8">5.</a>&nbsp;
Congestion Control<br />
<a href="#payloadformat">6.</a>&nbsp;
Payload Format Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mediatype">6.1.</a>&nbsp;
Media Type Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">6.2.</a>&nbsp;
Mapping to SDP<br />
<a href="#anchor10">7.</a>&nbsp;
IANA Considerations<br />
<a href="#security">8.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
         This document specifies the payload format for packetization
         of KLV (Key-Length-Value) Encoded Data, as defined by the Society of
         Motion Picture and Television Engineers (SMPTE) in 
         <a class='info' href='#SMPTE336M'>[SMPTE336M]<span> (</span><span class='info'>SMPTE, &ldquo;SMPTE336M-2007: Data Encoding Protocol Using Key-Length-Value,&rdquo; 2007.</span><span>)</span></a>, into the Real-time Transport
         Protocol (RTP) <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
      
</p>
<p>
        The payload format is defined in such a way that arbitrary KLV
        data can be carried.  No restrictions are placed on which KLV
        data keys can be used.
      
</p>
<p>
        A brief description of SMPTE 336M, KLV Encoded Data, is given.
        The payload format itself, including use of the RTP header fields, is
        specified in <a class='info' href='#payloadfmt'>Section&nbsp;4<span> (</span><span class='info'>Payload Format</span><span>)</span></a>.  The media type and IANA
        considerations are also described.  This document concludes with
        security considerations relevant to this payload format.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions, Definitions and Acronyms</h3>

<p>
        The term "KLV item" is used in this document to refer to one single
        universal key, length, and value triplet, or one single SMPTE
        Universal Label, encoded as described in <a class='info' href='#SMPTE336M'>[SMPTE336M]<span> (</span><span class='info'>SMPTE, &ldquo;SMPTE336M-2007: Data Encoding Protocol Using Key-Length-Value,&rdquo; 2007.</span><span>)</span></a>.
      
</p>
<p>
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Description of SMPTE 336M Data</h3>

<p>
        <a class='info' href='#SMPTE336M'>[SMPTE336M]<span> (</span><span class='info'>SMPTE, &ldquo;SMPTE336M-2007: Data Encoding Protocol Using Key-Length-Value,&rdquo; 2007.</span><span>)</span></a>, Data Encoding Protocol Using
        Key-Length-Value, defines a byte-level data encoding protocol for
        representing data items and data groups.  This encoding protocol
        definition is independent of the application or transportation
        method used.
      
</p>
<p>
        SMPTE 336M data encoding can be applied to a wide variety of binary
        data.  This encoding has been used to provide diverse and rich
        metadata sets that describe or enhance associated video
        presentations.  Use of SMPTE 336M encoded metadata in conjunction
        with video has enabled improvements in multimedia presentations,
        content management and distribution, archival and retrieval, and
        production workflow.
      
</p>
<p> 
        The SMPTE 336M standard defines a Key-Length-Value (KLV) triplet as
        a data interchange protocol for data items or data groups where the
        Key identifies the data, the Length specifies the length of the data
        and the Value is the data itself.  The KLV protocol provides a
        common interchange point for all compliant applications irrespective
        of the method of implementation or transport.
      
</p>
<p>
        The standard also provides methods for combining associated KLV
        triplets in data sets where the set of KLV triplets is itself coded
        with KLV data coding protocol.  Such sets can be coded in either
        full form (Universal Sets) or in one of four increasingly
        bit-efficient forms (Global Sets, Local Sets, Variable Length Packs
        and Defined Length Packs).  The standard provides a definition of
        each of these data constructs.
      
</p>
<p>
        The standard also describes implications of KLV coding including the
        use of a SMPTE Universal Label as a value within a KLV coding
        triplet or whose meaning is entirely conveyed by the SMPTE UL
        itself.  The two kinds of usage for such standalone SMPTE Universal
        Labels are a) as a value in a K L V construct and b) as a Key that
        has no Length and no Value.  
      
</p>
<p>
        The standard also defines the use of KLV coding to provide a means
        to carry information that is registered with a non-SMPTE external
        agency.
      
</p>
<p>
        The encoding byte range (length of the payload) may accommodate
        unusually large volumes of data.  Consequently, a specific
        application of KLV encoding may require only a limited operating
        data range and those details shall be defined in a relevant
        application document.
      
</p>
<a name="payloadfmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Payload Format</h3>

<p>
        The main goal of the payload format design for SMPTE 336M data is to
        provide carriage of SMPTE 336M data over RTP in a simple, yet robust
        manner.  All forms of SMPTE 336M data can be carried by the payload
        format.  The payload format maintains simplicity by using only the
        standard RTP headers and not defining any payload headers.
      
</p>
<p>
        SMPTE 336M KLV data is broken into KLVunits (see <a class='info' href='#klvunit'>Section&nbsp;4.2.1<span> (</span><span class='info'>The KLVunit</span><span>)</span></a>) based on source data timing.  Each KLVunit is
        then placed into one or more RTP packet payloads.  The RTP header
        marker bit is used to assist receivers in locating the boundaries of
        KLVunits.
      
</p>
<a name="rtpheader"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
RTP Header Usage</h3>

<p>
          This payload format uses the RTP packet header fields as
          described in the table below:
        
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Field</th><th align="left">Usage</th></tr>
<tr>
<td align="left">
            Timestamp
          </td>
<td align="left">
            The RTP Timestamp encodes the instant along a presentation
            timeline that the entire KLVunit encoded in the packet payload
            is to be presented.  When one KLVunit is placed in multiple
            RTP packets, the RTP timestamp of all packets comprising that
            KLVunit MUST be the same.
            The timestamp clock frequency SHALL be
            defined as a parameter to the <a class='info' href='#payloadformat'>payload format<span> (</span><span class='info'>Payload Format Parameters</span><span>)</span></a>.
          </td>
</tr>
<tr>
<td align="left">
            M-bit
          </td>
<td align="left">
            The RTP header marker bit (M) SHALL be set to '1' for any
            RTP packet which contains the final byte of a KLVunit.  
            For all other packets, the RTP header marker bit SHALL be set
            to '0'.  This allows receivers to pass a KLVunit for
            parsing/decoding immediately upon receipt of the last RTP packet
            comprising the KLVunit.  Without this, a receiver would need
            to wait for the next RTP packet with a
            different timestamp to arrive, thus signaling the end of one
            KLVunit and the start of another.
          </td>
</tr>
</table>
<br clear="all" />

<p>
          The remaining RTP header fields are used as specified in
          <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>. 
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Payload Data</h3>

<a name="klvunit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
The KLVunit</h3>

<p>
            A KLVunit is a logical collection of all KLV items that are to be
            presented at a specific time.  A KLVunit is comprised of one or
            more KLV items.  Compound items (sets, packs) are allowed as per
            <a class='info' href='#SMPTE336M'>[SMPTE336M]<span> (</span><span class='info'>SMPTE, &ldquo;SMPTE336M-2007: Data Encoding Protocol Using Key-Length-Value,&rdquo; 2007.</span><span>)</span></a>, but the contents of a compound item
            MUST NOT be split across two KLVunits.  Multiple KLV items in a
            KLVunit occur one after another with no padding or stuffing
            between items.
          
</p>
<a name="klvunit_mapping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
KLVunit Mapping to RTP Packet Payload</h3>

<p>
            An RTP packet payload SHALL contain one, and only one, KLVunit
            or a fragment thereof.  KLVunits small enough to fit into a single
            RTP packet (RTP packet size is up to implementation but should
            consider underlying transport/network factors such as MTU
            limitations) are placed directly into the payload of the RTP
            packet, with the first byte of the KLVunit (which is the first
            byte of a KLV universal key) being the first byte of the RTP
            packet payload.
          
</p>
<p> 
            KLVunits too large to fit into a single RTP packet payload MAY
            span multiple RTP packet payloads.  When this is done, the
            KLVunit data MUST be sent in sequential byte order, such that
            when all RTP packets comprising the KLVunit are arranged in
            sequence number order, concatenating the payload data together
            exactly reproduces the original KLVunit.
          
</p>
<p>
            Additionally, when a KLVunit is fragmented across multiple RTP
            packets, all RTP packets transporting the fragments a KLVunit
            MUST have the same timestamp.
          
</p>
<p>
            KLVunits are bounded with changes in RTP packet timestamps. The
            marker (M) bit in the RTP packet headers marks the last RTP packet
            comprising a KLVunit (see <a class='info' href='#rtpheader'>Section&nbsp;4.1<span> (</span><span class='info'>RTP Header Usage</span><span>)</span></a>).
          
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Implementation Considerations</h3>

<a name="loss_of_data"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Loss of Data</h3>

<p>
            RTP is generally deployed in network environments where packet
            loss may occur.  RTP header fields enable detection of lost
            packets, as described in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.  When
            transmitting payload data described by this payload format,
            packet loss can cause the loss of whole KLVunits or portions
            thereof.
          
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1"></a><h3>4.3.1.1.&nbsp;
Damaged KLVunits</h3>

<p>
              A damaged KLVunit is any KLVunit that was carried in one or
              more RTP packets that have been lost.  When a lost packet is
              detected (through use of the sequence number header field),
              the receiver:
              
             </p>
<ul class="text">
<li>
                 SHOULD consider the KLVunit carried in the prior packet (in
                 sequence number order) as damaged unless that prior packet's M
                 bit in the RTP header was set to '1'.
               
</li>
<li>
                 SHOULD consider all subsequent packets (in sequence number
                 order) up to and including the next one with the M-bit in the
                 RTP header set to '1' as part of a damaged KLVunit.
               
</li>
</ul><p>
            
</p>
<p>
             The example below illustrates how a receiver would handle a
             lost packet in one possible packet sequence:
             
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       +---------+-------------+    +--------------+
       | RTP Hdr | Data        |    |              |
       +---------+-------------+    +--------------+
  .... | ts = 30 | KLV KLV ... |    |              |  &gt;---+
       | M = 1   |             |    |              |      |
       | seq = 5 | ... KLV KLV |    |              |      |
       +---------+-------------+    +--------------+      |
        Last RTP pkt for time 30      Lost RTP Pkt        |
              For time 30               (seq = 6)         |
                                                          |
 +--------------------------------------------------------+
 |
 |     +---------+-------------+    +---------+-------------+
 |     | RTP Hdr |     Data    |    | RTP Hdr |     Data    |
 |     +---------+-------------+    +---------+-------------+
 +--&gt;  | ts = 45 | KLV KLV ... |    | ts = 45 | ... KLV ... | &gt;---+
       | M = 0   |             |    | M = 1   |             |     |
       | seq = 7 | ... KLV ... |    | seq = 8 | ... KLV KLV |     |
       +---------+-------------+    +---------+-------------+     |
          RTP pkt for time 45        Last RTP pkt for time 45     |
           KLVunit carried in these two packets is "damaged"      |
                                                                  |
 +----------------------------------------------------------------+
 |
 |     +---------+-------------+
 |     | RTP Hdr |     Data    |
 |     +---------+-------------+
 +--&gt;  | ts = 55 | KLV KLV ... |   ....
       | M = 1   |             |
       | seq = 9 | ... KLV ... |
       +---------+-------------+
        Last and only RTP pkt
            for time 55

</pre></div><p>

             
             In this example, the packets with sequence numbers 7 and 8
             contain portions of a KLVunit with timestamp of 45.  This
             KLVunit is considered "damaged" due to the missing RTP packet
             with sequence number 6, which may have been part of this
             KLVunit.  The KLVunit for timestamp 30 (ended in packet with
             sequence number 5) is unaffected by the missing packet.  The
             KLVunit for timestamp 55, carried in the packet with sequence
             number 9, is also unaffected by the missing packet and is
             considered complete and intact.
            
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.2"></a><h3>4.3.1.2.&nbsp;
Treatment of Damaged KLVunits</h3>

<p> 
              SMPTE 336M KLV data streams are built in such a way that it is
              possible to partially recover from errors or missing data in a
              stream.  Exact specifics of how damaged KLVunits are handled
              are left to each implementation, as different implementations
              may have differing capabilities and robustness in their
              downstream KLV payload processing.  Because some
              implementations may be particularly limited in their capacity
              to handle damaged KLVunits, receivers MAY drop damaged
              KLVunits entirely.
            
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Congestion Control</h3>

<p>
        The general congestion control considerations for transporting RTP
        data apply; see RTP <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> and any applicable 
        RTP profile like AVP <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
      
</p>
<p>
        Further, SMPTE 336M data can be encoded in different schemes which
        reduce the overhead associated with individual data items within the
        overall stream.  SMPTE 336M grouping constructs, such as local sets
        and data packs, provide a mechanism to reduce bandwidth requirements.
      
</p>
<a name="payloadformat"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Payload Format Parameters</h3>

<p>
        This RTP payload format is identified using the media type
        application/smpte336m, which is registered in accordance with
        <a class='info' href='#RFC4855'>[RFC4855]<span> (</span><span class='info'>Casner, S., &ldquo;Media Type Registration of RTP Payload Formats,&rdquo; February&nbsp;2007.</span><span>)</span></a> and using the template of 
        <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
      
</p>
<a name="mediatype"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Media Type Definition</h3>

<p>
          </p>
<blockquote class="text">
<p>Type name: application
</p>
<p>Subtype name: smpte336m
</p>
<p>Required parameters: 
              </p>
<blockquote class="text">
<p>
                  rate: RTP timestamp clock rate. Typically chosen based
                  on sampling rate of metadata being transmitted, but
                  other rates may be specified.
                
</p>
</blockquote>
            

<p>Optional parameters: 
</p>
<p>
               Encoding considerations: This media type is framed and
               binary; see Section 4.8 of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
            
</p>
<p>
               Security considerations: See <a class='info' href='#security'>Section&nbsp;8<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>
               of XXXX.
            
</p>
<p>
               Interoperability considerations: Data items in smpte336m
               can be very diverse. Receivers may only be capable of 
               interpreting a subset of the possible data items; unrecognized
               items are skipped. Agreement on data items to be used out of
               band, via application profile or similar, is typical.
            
</p>
<p>Published specification: XXXX
</p>
<p>
               Applications that use this media type: Audio and video 
               streaming and conferencing tools
            
</p>
<p>Additional Information: none
</p>
<p>
               Person &amp; email address to contact 
               for further information: J. Arbeiter &lt;jarbeite@harris.com&gt;
</p>
<p>Intended usage: COMMON
</p>
<p>
               Restrictions on usage: This media type depends on RTP framing,
               and hence is only defined for transfer via RTP 
               (<a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>). Transport within other framing
               protocols is not defined at this time.
            
</p>
<p>
               Author:
               </p>
<blockquote class="text">
<p>J. Arbeiter &lt;jarbeite@harris.com&gt;
</p>
<p>J. Downs &lt;jeff_downs@partech.com&gt;
</p>
</blockquote>
            

<p>
              Change controller: IETF Audio/Video Transport working
              group delegated from the IESG
            
</p>
</blockquote><p>
        
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Mapping to SDP</h3>

<p>
          The mapping of the above defined payload format media type and its
          parameters to SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> SHALL be done according to Section 3 of
          <a class='info' href='#RFC4855'>[RFC4855]<span> (</span><span class='info'>Casner, S., &ldquo;Media Type Registration of RTP Payload Formats,&rdquo; February&nbsp;2007.</span><span>)</span></a>.
        
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>
        This memo requests that IANA registers application/smpte336m as
        specified in <a class='info' href='#mediatype'>Section&nbsp;6.1<span> (</span><span class='info'>Media Type Definition</span><span>)</span></a>.
        The media type is also requested to be added to
        the IANA registry for "RTP Payload Format MIME types"
        (http://www.iana.org/assignments/rtp-parameters).
      
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
        RTP packets using the payload format defined in this specification
        are subject to the security considerations discussed in the RTP
        specification <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>, and in any applicable RTP
        profile.  The main security considerations for the RTP packet
        carrying the RTP payload format defined within this memo are
        confidentiality, integrity and source authenticity.  Confidentiality
        is achieved by encryption of the RTP payload.  Integrity of the RTP
        packets through suitable cryptographic integrity protection
        mechanism.  Cryptographic system may also allow the authentication
        of the source of the payload.  A suitable security mechanism for
        this RTP payload format should provide confidentiality, integrity
        protection and at least source authentication capable of determining
        if an RTP packet is from a member of the RTP session or not.
      
</p>
<p>
        Note that the appropriate mechanism to provide security to RTP and
        payloads following this memo may vary.  It is dependent on the
        application, the transport, and the signalling protocol employed.
        Therefore a single mechanism is not sufficient, although if suitable
        the usage of SRTP <a class='info' href='#RFC3711'>[RFC3711]<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> is recommended.
        Other mechanism that may be used are IPsec <a class='info' href='#RFC4301'>[RFC4301]<span> (</span><span class='info'>Kent, S. and K. Seo, &ldquo;Security Architecture for the Internet Protocol,&rdquo; December&nbsp;2005.</span><span>)</span></a>
        and TLS <a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a> (RTP over TCP), but
        also other alternatives may exist.
      
</p>
<p>
        This RTP payload format presents the possibility for significant
        non-uniformity in the receiver-side computational complexity during
        processing of SMPTE 336M payload data.  Because the length of
        SMPTE 336M encoded data items is essentially unbounded, receivers
        must take care when allocating resources used in processing.
        It is trivial to construct pathological data that would cause
        a naive decoder to allocate large amounts of resources, resulting
        in denial-of-service threats.  Receivers are encouraged to place
        limits on resource allocation that are within the bounds set forth
        by any application profile in use.
      
</p>
<p>
        This RTP payload format does not contain any inheritly active
        content.  However, individual SMPTE 336M KLV items could be defined
        to convey active content in a particular application.  Therefore,
        receivers capable of decoding and interpreting such data items
        should use appropriate caution and security practices.  Receivers
        not capable of decoding such data items are not at risk; unknown
        data items are skipped over and discarded according to SMPTE 336M
        processing rules.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3551">[RFC3551]</a></td>
<td class="author-text">Schulzrinne, H. and S. Casner, &ldquo;<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>,&rdquo; STD&nbsp;65, RFC&nbsp;3551, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3551.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4288">[RFC4288]</a></td>
<td class="author-text">Freed, N. and J. Klensin, &ldquo;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>,&rdquo; BCP&nbsp;13, RFC&nbsp;4288, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4288.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4855">[RFC4855]</a></td>
<td class="author-text">Casner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>,&rdquo; RFC&nbsp;4855, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4855.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="SMPTE336M">[SMPTE336M]</a></td>
<td class="author-text">SMPTE, &ldquo;<a href="http://www.smpte.org">SMPTE336M-2007: Data Encoding Protocol Using Key-Length-Value</a>,&rdquo; 2007.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3711">[RFC3711]</a></td>
<td class="author-text">Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>,&rdquo; RFC&nbsp;3711, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3711.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4301">[RFC4301]</a></td>
<td class="author-text">Kent, S. and K. Seo, &ldquo;<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>,&rdquo; RFC&nbsp;4301, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4301.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5246">[RFC5246]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>,&rdquo; RFC&nbsp;5246, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5246.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">J. Arbeiter (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Harris Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jarbeite@harris.com">jarbeite@harris.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">J. Downs (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PAR Government Systems Corp.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jeff_downs@partech.com">jeff_downs@partech.com</a></td></tr>
</table>
</body></html>
