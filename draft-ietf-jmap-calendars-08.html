<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>JMAP for Calendars</title>
<meta content="Neil Jenkins" name="author">
<meta content="Michael Douglass" name="author">
<meta content="
       This document specifies a data model for synchronizing calendar data with a server using JMAP. 
    " name="description">
<meta content="xml2rfc 3.12.2" name="generator">
<meta content="JMAP" name="keyword">
<meta content="JSON" name="keyword">
<meta content="calendars" name="keyword">
<meta content="draft-ietf-jmap-calendars-08" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.2
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/calendars-_le924j_.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">JMAP Calendars</td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Jenkins &amp; Douglass</td>
<td class="center">Expires 28 August 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">JMAP</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-jmap-calendars-08</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-02-24" class="published">24 February 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-08-28">28 August 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">N.M. Jenkins, <span class="editor">Ed.</span>
</div>
<div class="org">Fastmail</div>
</div>
<div class="author">
      <div class="author-name">M. Douglass, <span class="editor">Ed.</span>
</div>
<div class="org">Spherical Cow Group</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">JMAP for Calendars</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies a data model for synchronizing calendar data with a server using JMAP.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 August 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-notational-conventions" class="xref">Notational Conventions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-the-localdate-data-type" class="xref">The LocalDate Data Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="xref">1.4</a>.  <a href="#name-data-model-overview" class="xref">Data Model Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4.2.1">
                    <p id="section-toc.1-1.1.2.4.2.1.1"><a href="#section-1.4.1" class="xref">1.4.1</a>.  <a href="#name-uids-and-calendarevent-ids" class="xref">UIDs and CalendarEvent Ids</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.5">
                <p id="section-toc.1-1.1.2.5.1"><a href="#section-1.5" class="xref">1.5</a>.  <a href="#name-addition-to-the-capabilitie" class="xref">Addition to the Capabilities Object</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.5.2.1">
                    <p id="section-toc.1-1.1.2.5.2.1.1"><a href="#section-1.5.1" class="xref">1.5.1</a>.  <a href="#name-urnietfparamsjmapcalendars" class="xref">urn:ietf:params:jmap:calendars</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.5.2.2">
                    <p id="section-toc.1-1.1.2.5.2.2.1"><a href="#section-1.5.2" class="xref">1.5.2</a>.  <a href="#name-urnietfparamsjmapcalendarsp" class="xref">urn:ietf:params:jmap:calendars:preferences</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.5.2.3">
                    <p id="section-toc.1-1.1.2.5.2.3.1"><a href="#section-1.5.3" class="xref">1.5.3</a>.  <a href="#name-urnietfparamsjmapprincipals" class="xref">urn:ietf:params:jmap:principals:availability</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-principals-and-sharing" class="xref">Principals and Sharing</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-principal-capability-urniet" class="xref">Principal Capability urn:ietf:params:jmap:calendars</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-principal-getavailability" class="xref">Principal/getAvailability</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-participant-identities" class="xref">Participant Identities</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-participantidentity-get" class="xref">ParticipantIdentity/get</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-participantidentity-changes" class="xref">ParticipantIdentity/changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-participantidentity-set" class="xref">ParticipantIdentity/set</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-calendars" class="xref">Calendars</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-calendar-get" class="xref">Calendar/get</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-calendar-changes" class="xref">Calendar/changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-calendar-set" class="xref">Calendar/set</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-calendar-events" class="xref">Calendar Events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-additional-jscalendar-prope" class="xref">Additional JSCalendar properties</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="xref">5.1.1</a>.  <a href="#name-mayinviteself" class="xref">mayInviteSelf</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="xref">5.1.2</a>.  <a href="#name-mayinviteothers" class="xref">mayInviteOthers</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.3">
                    <p id="section-toc.1-1.5.2.1.2.3.1"><a href="#section-5.1.3" class="xref">5.1.3</a>.  <a href="#name-hideattendees" class="xref">hideAttendees</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-attachments" class="xref">Attachments</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-per-user-properties" class="xref">Per-user properties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-recurring-events" class="xref">Recurring events</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="xref">5.5</a>.  <a href="#name-updating-for-this-and-futur" class="xref">Updating for "this-and-future"</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5.2.1">
                    <p id="section-toc.1-1.5.2.5.2.1.1"><a href="#section-5.5.1" class="xref">5.5.1</a>.  <a href="#name-splitting-an-event" class="xref">Splitting an event</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5.2.2">
                    <p id="section-toc.1-1.5.2.5.2.2.1"><a href="#section-5.5.2" class="xref">5.5.2</a>.  <a href="#name-updating-the-base-event-and" class="xref">Updating the base event and overriding previous</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a href="#section-5.6" class="xref">5.6</a>.  <a href="#name-calendarevent-get" class="xref">CalendarEvent/get</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.7">
                <p id="section-toc.1-1.5.2.7.1"><a href="#section-5.7" class="xref">5.7</a>.  <a href="#name-calendarevent-changes" class="xref">CalendarEvent/changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.8">
                <p id="section-toc.1-1.5.2.8.1"><a href="#section-5.8" class="xref">5.8</a>.  <a href="#name-calendarevent-set" class="xref">CalendarEvent/set</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.8.2.1">
                    <p id="section-toc.1-1.5.2.8.2.1.1"><a href="#section-5.8.1" class="xref">5.8.1</a>.  <a href="#name-patching" class="xref">Patching</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.8.2.2">
                    <p id="section-toc.1-1.5.2.8.2.2.1"><a href="#section-5.8.2" class="xref">5.8.2</a>.  <a href="#name-sending-invitations-and-res" class="xref">Sending invitations and responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.9">
                <p id="section-toc.1-1.5.2.9.1"><a href="#section-5.9" class="xref">5.9</a>.  <a href="#name-calendarevent-copy" class="xref">CalendarEvent/copy</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.10">
                <p id="section-toc.1-1.5.2.10.1"><a href="#section-5.10" class="xref">5.10</a>. <a href="#name-calendarevent-query" class="xref">CalendarEvent/query</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.10.2.1">
                    <p id="section-toc.1-1.5.2.10.2.1.1"><a href="#section-5.10.1" class="xref">5.10.1</a>.  <a href="#name-filtering" class="xref">Filtering</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.10.2.2">
                    <p id="section-toc.1-1.5.2.10.2.2.1"><a href="#section-5.10.2" class="xref">5.10.2</a>.  <a href="#name-sorting" class="xref">Sorting</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.11">
                <p id="section-toc.1-1.5.2.11.1"><a href="#section-5.11" class="xref">5.11</a>. <a href="#name-calendarevent-querychanges" class="xref">CalendarEvent/queryChanges</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.12">
                <p id="section-toc.1-1.5.2.12.1"><a href="#section-5.12" class="xref">5.12</a>. <a href="#name-examples" class="xref">Examples</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-alerts" class="xref">Alerts</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-default-alerts" class="xref">Default alerts</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-acknowledging-an-alert" class="xref">Acknowledging an alert</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-snoozing-an-alert" class="xref">Snoozing an alert</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-push-events" class="xref">Push events</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-calendar-event-notification" class="xref">Calendar Event Notifications</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-auto-deletion-of-notificati" class="xref">Auto-deletion of Notifications</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-object-properties" class="xref">Object Properties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="xref">7.3</a>.  <a href="#name-calendareventnotification-g" class="xref">CalendarEventNotification/get</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="xref">7.4</a>.  <a href="#name-calendareventnotification-c" class="xref">CalendarEventNotification/changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="xref">7.5</a>.  <a href="#name-calendareventnotification-s" class="xref">CalendarEventNotification/set</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6">
                <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="xref">7.6</a>.  <a href="#name-calendareventnotification-q" class="xref">CalendarEventNotification/query</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6.2.1">
                    <p id="section-toc.1-1.7.2.6.2.1.1"><a href="#section-7.6.1" class="xref">7.6.1</a>.  <a href="#name-filtering-2" class="xref">Filtering</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6.2.2">
                    <p id="section-toc.1-1.7.2.6.2.2.1"><a href="#section-7.6.2" class="xref">7.6.2</a>.  <a href="#name-sorting-2" class="xref">Sorting</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.7">
                <p id="section-toc.1-1.7.2.7.1"><a href="#section-7.7" class="xref">7.7</a>.  <a href="#name-calendareventnotification-qu" class="xref">CalendarEventNotification/queryChanges</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-calendarpreferences" class="xref">CalendarPreferences</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-calendarpreferences-get" class="xref">CalendarPreferences/get</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-calendarpreferences-set" class="xref">CalendarPreferences/set</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-privacy" class="xref">Privacy</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-spoofing" class="xref">Spoofing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="xref">9.3</a>.  <a href="#name-denial-of-service" class="xref">Denial-of-service</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.1">
                    <p id="section-toc.1-1.9.2.3.2.1.1"><a href="#section-9.3.1" class="xref">9.3.1</a>.  <a href="#name-expanding-recurrences" class="xref">Expanding Recurrences</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.2">
                    <p id="section-toc.1-1.9.2.3.2.2.1"><a href="#section-9.3.2" class="xref">9.3.2</a>.  <a href="#name-firing-alerts" class="xref">Firing alerts</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.3">
                    <p id="section-toc.1-1.9.2.3.2.3.1"><a href="#section-9.3.3" class="xref">9.3.3</a>.  <a href="#name-load-spikes" class="xref">Load spikes</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="xref">9.4</a>.  <a href="#name-spam" class="xref">Spam</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-jmap-capability-registratio" class="xref">JMAP Capability Registration for "calendars"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-jmap-capability-registration" class="xref">JMAP Capability Registration for "calendars:preferences"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-jmap-capability-registration-" class="xref">JMAP Capability Registration for "principals:availability"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="xref">10.4</a>.  <a href="#name-jscalendar-property-registr" class="xref">JSCalendar Property Registrations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.1">
                    <p id="section-toc.1-1.10.2.4.2.1.1"><a href="#section-10.4.1" class="xref">10.4.1</a>.  <a href="#name-id" class="xref">id</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.2">
                    <p id="section-toc.1-1.10.2.4.2.2.1"><a href="#section-10.4.2" class="xref">10.4.2</a>.  <a href="#name-calendarids" class="xref">calendarIds</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.3">
                    <p id="section-toc.1-1.10.2.4.2.3.1"><a href="#section-10.4.3" class="xref">10.4.3</a>.  <a href="#name-isdraft" class="xref">isDraft</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.4">
                    <p id="section-toc.1-1.10.2.4.2.4.1"><a href="#section-10.4.4" class="xref">10.4.4</a>.  <a href="#name-utcstart" class="xref">utcStart</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.5">
                    <p id="section-toc.1-1.10.2.4.2.5.1"><a href="#section-10.4.5" class="xref">10.4.5</a>.  <a href="#name-utcend" class="xref">utcEnd</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.6">
                    <p id="section-toc.1-1.10.2.4.2.6.1"><a href="#section-10.4.6" class="xref">10.4.6</a>.  <a href="#name-mayinviteself-2" class="xref">mayInviteSelf</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.7">
                    <p id="section-toc.1-1.10.2.4.2.7.1"><a href="#section-10.4.7" class="xref">10.4.7</a>.  <a href="#name-mayinviteothers-2" class="xref">mayInviteOthers</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.8">
                    <p id="section-toc.1-1.10.2.4.2.8.1"><a href="#section-10.4.8" class="xref">10.4.8</a>.  <a href="#name-hideattendees-2" class="xref">hideAttendees</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">JMAP (<span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span> <span class="unicode">– (U+2013)</span> JSON Meta Application Protocol) is a generic protocol for synchronizing data, such as mail, calendars or contacts, between a client and a server. It is optimized for mobile and web environments, and aims to provide a consistent interface to different data types.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This specification defines a data model for synchronizing calendar data between a client and a server using JMAP. The data model is designed to allow a server to provide consistent access to the same data via CalDAV <span>[<a href="#RFC4791" class="xref">RFC4791</a>]</span> as well as JMAP, however the functionality offered over the two protocols may differ. Unlike CalDAV, this specification does not define access to tasks or journal entries (VTODO or VJOURNAL iCalendar components in CalDAV).<a href="#section-1-2" class="pilcrow">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Type signatures, examples, and property descriptions in this document follow the conventions established in Section 1.1 of <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>.  Data types defined in the core specification are also used in this document.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-localdate-data-type">
<section id="section-1.2">
        <h3 id="name-the-localdate-data-type">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-the-localdate-data-type" class="section-name selfRef">The LocalDate Data Type</a>
        </h3>
<p id="section-1.2-1">Where <code>LocalDate</code> is given as a type, it means a string in the same format as <code>Date</code> (see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 1.4), but with the <code>time-offset</code> omitted from the end. The interpretation in absolute time depends upon the time zone for the event, which may not be a fixed offset (for example when daylight saving time occurs). For example, <code>2014-10-30T14:12:00</code>.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-1.3">
        <h3 id="name-terminology">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.3-1">The same terminology is used in this document as in the core JMAP specification, see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 1.6.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">The terms ParticipantIdentity, Calendar, CalendarEvent, CalendarEventNotification, and CalendarPreferences (with these specific capitalizations) are used to refer to the data types defined in this document and instances of those data types.<a href="#section-1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data-model-overview">
<section id="section-1.4">
        <h3 id="name-data-model-overview">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-data-model-overview" class="section-name selfRef">Data Model Overview</a>
        </h3>
<p id="section-1.4-1">An Account (see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 1.6.2) with support for the calendar data model contains zero or more Calendar objects, which is a named collection of CalendarEvents. Calendars can also provide defaults, such as alerts and a color to apply to events in the calendar. Clients commonly let users toggle visibility of events belonging to a particular calendar on/off. Servers may allow an event to belong to multiple Calendars within an account.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
<p id="section-1.4-2">A CalendarEvent is a representation of an event or recurring series of events in JSEvent <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span> format. Simple clients may ask the server to expand recurrences for them within a specific time period, and optionally convert times into UTC so they do not have to handle time zone conversion. More full-featured clients will want to access the full event information and handle recurrence expansion and time zone conversion locally.<a href="#section-1.4-2" class="pilcrow">¶</a></p>
<p id="section-1.4-3">CalendarEventNotification objects keep track of the history of changes made to a calendar by other users, allowing calendar clients to notify the user of changes to their schedule.<a href="#section-1.4-3" class="pilcrow">¶</a></p>
<p id="section-1.4-4">The ParticipantIdentity data type represents the identities of the current user within an Account, which determines which events the user is a participant of and possibly their permissions related to that event.<a href="#section-1.4-4" class="pilcrow">¶</a></p>
<p id="section-1.4-5">The CalendarPreferences object is a singleton in the account that stores the user's default calendar and participant identity.<a href="#section-1.4-5" class="pilcrow">¶</a></p>
<p id="section-1.4-6">In servers with support for JMAP Sharing [RFC XXX], data may be shared with other users. Sharing permissions are managed per calendar. For example, an individual may have separate calendars for personal and work activities, with both contributing to their free-busy availability, but only the work calendar shared in its entirety with colleagues. Principals may also represent schedulable entities, such as a meeting room.<a href="#section-1.4-6" class="pilcrow">¶</a></p>
<p id="section-1.4-7">Users can normally subscribe to any calendar to which they have access. This indicates the user wants this calendar to appear in their regular list of calendars. The separate "isVisible" property stores whether the user would currently like to view the events in a subscribed calendar.<a href="#section-1.4-7" class="pilcrow">¶</a></p>
<div id="uids-and-calendarevent-ids">
<section id="section-1.4.1">
          <h4 id="name-uids-and-calendarevent-ids">
<a href="#section-1.4.1" class="section-number selfRef">1.4.1. </a><a href="#name-uids-and-calendarevent-ids" class="section-name selfRef">UIDs and CalendarEvent Ids</a>
          </h4>
<p id="section-1.4.1-1">Each CalendarEvent has a <code>uid</code> property (<span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, Section 4.1.2), which is a globally unique identifier that identifies the same event in different Accounts, or different instances of the same recurring event within an Account.<a href="#section-1.4.1-1" class="pilcrow">¶</a></p>
<p id="section-1.4.1-2">An Account MUST NOT contain more than one CalendarEvent with the same uid unless all of the CalendarEvent objects have distinct, non-null values for their <code>recurrenceId</code> property. (This situation occurs if the principal is added to one or more specific instances of a recurring event without being invited to the whole series.)<a href="#section-1.4.1-2" class="pilcrow">¶</a></p>
<p id="section-1.4.1-3">Each CalendarEvent also has an id, which is scoped to the JMAP Account and used for referencing it in JMAP methods. There is no necessary link between the uid property and the CalendarEvent's id. CalendarEvents with the same uid in different Accounts MAY have different ids.<a href="#section-1.4.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="addition-to-the-capabilities-object">
<section id="section-1.5">
        <h3 id="name-addition-to-the-capabilitie">
<a href="#section-1.5" class="section-number selfRef">1.5. </a><a href="#name-addition-to-the-capabilitie" class="section-name selfRef">Addition to the Capabilities Object</a>
        </h3>
<p id="section-1.5-1">The capabilities object is returned as part of the JMAP Session object; see <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 2. This document defines two additional capability URIs.<a href="#section-1.5-1" class="pilcrow">¶</a></p>
<div id="urn-ietf-params-jmap-calendars">
<section id="section-1.5.1">
          <h4 id="name-urnietfparamsjmapcalendars">
<a href="#section-1.5.1" class="section-number selfRef">1.5.1. </a><a href="#name-urnietfparamsjmapcalendars" class="section-name selfRef">urn:ietf:params:jmap:calendars</a>
          </h4>
<p id="section-1.5.1-1">This represents support for the Calendar, CalendarEvent, CalendarEventNotification, and ParticipantIdentity data types and associated API methods. The value of this property in the JMAP Session capabilities property is an empty object.<a href="#section-1.5.1-1" class="pilcrow">¶</a></p>
<p id="section-1.5.1-2">The value of this property in an account<span class="unicode">’ (U+2019)</span>s accountCapabilities property is an object that MUST contain the following information on server capabilities and permissions for that account:<a href="#section-1.5.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.5.1-3.1">
              <p id="section-1.5.1-3.1.1"><strong>shareesActAs</strong>: <code>String</code>
This MUST be one of:<a href="#section-1.5.1-3.1.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-1.5.1-3.1.2.1">
                  <code>self</code> - sharees act as themselves when using calendars in this account.<a href="#section-1.5.1-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="compact normal" id="section-1.5.1-3.1.2.2">
                  <code>secretary</code>- sharees act as the principal to which this account belongs.<a href="#section-1.5.1-3.1.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-1.5.1-3.2">
              <p id="section-1.5.1-3.2.1"><strong>maxCalendarsPerEvent</strong>: <code>UnsignedInt|null</code>
The maximum number of Calendars (see Section XXX) that can be can assigned to a single CalendarEvent object (see Section XXX). This MUST be an integer &gt;= 1, or null for no limit (or rather, the limit is always the number of Calendars in the account).<a href="#section-1.5.1-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.5.1-3.3">
              <p id="section-1.5.1-3.3.1"><strong>minDateTime</strong>: <code>LocalDate</code>
The earliest date-time the server is willing to accept for any date stored in a CalendarEvent.<a href="#section-1.5.1-3.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.5.1-3.4">
              <p id="section-1.5.1-3.4.1"><strong>maxDateTime</strong>: <code>LocalDate</code>
The latest date-time the server is willing to accept for any date stored in a CalendarEvent.<a href="#section-1.5.1-3.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.5.1-3.5">
              <p id="section-1.5.1-3.5.1"><strong>maxExpandedQueryDuration</strong>: <code>Duration</code>
The maximum duration the user may query over when asking the server to expand recurrences.<a href="#section-1.5.1-3.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.5.1-3.6">
              <p id="section-1.5.1-3.6.1"><strong>maxParticipantsPerEvent</strong>: <code>Number|null</code>
The maximum number of participants a single event may have, or null for no limit.<a href="#section-1.5.1-3.6.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.5.1-3.7">
              <p id="section-1.5.1-3.7.1"><strong>mayCreateCalendar</strong>: <code>Boolean</code>
If true, the user may create a calendar in this account.<a href="#section-1.5.1-3.7.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="urn-ietf-params-jmap-calendars-preferences">
<section id="section-1.5.2">
          <h4 id="name-urnietfparamsjmapcalendarsp">
<a href="#section-1.5.2" class="section-number selfRef">1.5.2. </a><a href="#name-urnietfparamsjmapcalendarsp" class="section-name selfRef">urn:ietf:params:jmap:calendars:preferences</a>
          </h4>
<p id="section-1.5.2-1">This represents support for the CalendarPreferences data type and associated API methods. The value of this property in the JMAP Session capabilities property and the account<span class="unicode">’ (U+2019)</span>s accountCapabilities property is an empty object.<a href="#section-1.5.2-1" class="pilcrow">¶</a></p>
<p id="section-1.5.2-2">Any account with this capability MUST also have the <code>urn:ietf:params:jmap:calendars</code> capability.<a href="#section-1.5.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="urn-ietf-params-jmap-principals-availability">
<section id="section-1.5.3">
          <h4 id="name-urnietfparamsjmapprincipals">
<a href="#section-1.5.3" class="section-number selfRef">1.5.3. </a><a href="#name-urnietfparamsjmapprincipals" class="section-name selfRef">urn:ietf:params:jmap:principals:availability</a>
          </h4>
<p id="section-1.5.3-1">Represents support for the Principal/getAvailability method. Any account with this capability MUST also have the <code>urn:ietf:params:jmap:principals</code> capability (see [RFC XXX]).<a href="#section-1.5.3-1" class="pilcrow">¶</a></p>
<p id="section-1.5.3-2">The value of this property in the JMAP Session capabilities property is an empty object.<a href="#section-1.5.3-2" class="pilcrow">¶</a></p>
<p id="section-1.5.3-3">The value of this property in an account<span class="unicode">’ (U+2019)</span>s accountCapabilities property is an object that MUST contain the following information on server capabilities and permissions for that account:<a href="#section-1.5.3-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-1.5.3-4.1">
              <strong>maxAvailabilityDuration</strong>:
The maximum duration over which the server is prepared to calculate availability in a single call (see Section XXX).<a href="#section-1.5.3-4.1" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="principals-and-sharing">
<section id="section-2">
      <h2 id="name-principals-and-sharing">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-principals-and-sharing" class="section-name selfRef">Principals and Sharing</a>
      </h2>
<p id="section-2-1">For systems that also support JMAP Sharing [RFC XXX], the calendars capability is used to indicate that this principal may be used with calendaring. A new method is defined to allow users to query availability when scehduling events.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="principal-capability-urn-ietf-params-jmap-calendars">
<section id="section-2.1">
        <h3 id="name-principal-capability-urniet">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-principal-capability-urniet" class="section-name selfRef">Principal Capability urn:ietf:params:jmap:calendars</a>
        </h3>
<p id="section-2.1-1">A "urn:ietf:params:jmap:calendars" property is added to the Principal "capabilities" object, the value of which is an object with the following properties:<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.1-2.1">
            <strong>accountId</strong>: <code>Id|null</code>
Id of Account with the <code>urn:ietf:params:jmap:calendars</code> capability that
contains the calendar data for this principal, or null if none (e.g. the Principal is a group just used for permissions management), or the user does not have access to any data in the account (with the exception of free/busy, which is governed by the mayGetAvailability property).<a href="#section-2.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-2.2">
            <strong>account</strong>: <code>Account|null</code>
The JMAP Account object corresponding to the accountId, null if none.<a href="#section-2.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-2.3">
            <strong>mayGetAvailability</strong>: <code>Boolean</code>
May the user call the "Principal/getAvailability" method with this Principal?<a href="#section-2.1-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-2.4">
            <strong>mayShareWith</strong>: <code>Boolean</code>
May the user add this principal as a calendar sharee (by adding them to the
shareWith property of a calendar, see Section XXX)?<a href="#section-2.1-2.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.1-2.5">
            <strong>sendTo</strong>: <code>String[String]|null</code>
If this principal may be added as a participant to an event, this is the map of methods for adding it, in the same format as Participant#sendTo in JSEvent (see <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, Section 4.4.5).<a href="#section-2.1-2.5" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="principal-getavailability">
<section id="section-2.2">
        <h3 id="name-principal-getavailability">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-principal-getavailability" class="section-name selfRef">Principal/getAvailability</a>
        </h3>
<p id="section-2.2-1">This method calculates the availability of the principal for scheduling within a requested time period. It takes the following arguments:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2-2.1">
            <strong>accountId</strong>: <code>Id</code>
The id of the account to use.<a href="#section-2.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-2.2">
            <strong>id</strong>: <code>Id</code>
The id of the Principal to calculate availability for.<a href="#section-2.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-2.3">
            <strong>utcStart</strong>: <code>UTCDate</code>
The start time (inclusive) of the period for which to return availability.<a href="#section-2.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-2.4">
            <strong>utcEnd</strong>: <code>UTCDate</code>
The end time (exclusive) of the period for which to return availability.<a href="#section-2.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-2.5">
            <strong>showDetails</strong>: <code>Boolean</code>
If true, event details will be returned if the user has permission to view them.<a href="#section-2.2-2.5" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-2.6">
            <strong>eventProperties</strong>: <code>String[]|null</code>
A list of properties to include in any JSEvent object returned. If <code>null</code>, all properties of the event will be returned. Otherwise, only properties with names in the given list will be returned.<a href="#section-2.2-2.6" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-3">The server will first find all relevant events, expanding any recurring events. Relevant events are ones where all of the following is true:<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2-4.1">The principal is subscribed to the calendar.<a href="#section-2.2-4.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.2">Either the calendar belongs to the principal or the calendar account's
"shareesActAs" property is "self".<a href="#section-2.2-4.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.3">The "includeInAvailability" property of the calendar for the principal is
"all" or "attending".<a href="#section-2.2-4.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.4">The user has the "mayReadFreeBusy" permission for the calendar.<a href="#section-2.2-4.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.5">The event finishes after the "utcStart" argument and starts before the
"utcEnd" argument.<a href="#section-2.2-4.5" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.6">The event's "privacy" property is not "secret".<a href="#section-2.2-4.6" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.7">The "freeBusyStatus" property of the event is "busy" (or omitted, as this is
the default).<a href="#section-2.2-4.7" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.8">The "status" property of the event is not "cancelled".<a href="#section-2.2-4.8" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-2.2-4.9">If the "includeInAvailability" property of the calendar is "attending", then
the principal is a participant of the event, and has a "participationStatus" of "accepted" or "tentative".<a href="#section-2.2-4.9" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-5">If an event is in more than one calendar, it is relevant if all of the above are true for any one calendar that it is in.<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<p id="section-2.2-6">The server then generates a BusyPeriod object for each of these events. A <strong>BusyPeriod</strong> object has the following properties:<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-7.1">
            <strong>utcStart</strong>: <code>UTCDate</code>
The start time (inclusive) of the period this represents.<a href="#section-2.2-7.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-7.2">
            <strong>utcEnd</strong>: <code>UTCDate</code>
The end time (exclusive) of the period this represents.<a href="#section-2.2-7.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-7.3">
            <p id="section-2.2-7.3.1"><strong>busyStatus</strong>: <code>String</code> (optional, default "unavailable")
This MUST be one of<a href="#section-2.2-7.3.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-2.2-7.3.2.1">
                <code>confirmed</code>: The event status is "confirmed".<a href="#section-2.2-7.3.2.1" class="pilcrow">¶</a>
</li>
              <li class="compact normal" id="section-2.2-7.3.2.2">
                <code>tentative</code>: The event status is "tentative".<a href="#section-2.2-7.3.2.2" class="pilcrow">¶</a>
</li>
              <li class="compact normal" id="section-2.2-7.3.2.3">
                <code>unavailable</code>: The principal is not available for scheduling at this time
for any other reason.<a href="#section-2.2-7.3.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-2.2-7.4">
            <p id="section-2.2-7.4.1"><strong>event</strong>: <code>JSEvent|null</code>
The JSEvent representation of the event, or null if any of the following are true:<a href="#section-2.2-7.4.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-2.2-7.4.2.1">The "showDetails" argument is false.<a href="#section-2.2-7.4.2.1" class="pilcrow">¶</a>
</li>
              <li class="compact normal" id="section-2.2-7.4.2.2">The "privacy" property of the event is "private".<a href="#section-2.2-7.4.2.2" class="pilcrow">¶</a>
</li>
              <li class="compact normal" id="section-2.2-7.4.2.3">The user does not have the "mayReadItems" permission for any of the
calendars the event is in.<a href="#section-2.2-7.4.2.3" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-2.2-7.4.3">If an eventProperties argument was given, any properties in the JSEvent that are not in the eventProperties list are removed from the returned representation.<a href="#section-2.2-7.4.3" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-2.2-8">The server MAY also generate BusyPeriod objects based on other information it has about the principal's availability, such as office hours.<a href="#section-2.2-8" class="pilcrow">¶</a></p>
<p id="section-2.2-9">Finally, the server MUST merge and split BusyPeriod objects where the "event" property is null, such that none of them overlap and either there is a gap in time between any two objects (the utcEnd of one does not equal the utcStart of another) or those objects have a different busyStatus property. If there are overlapping BusyPeriod time ranges with different "busyStatus" properties the server MUST choose the value in the following order: confirmed &gt; unavailable &gt; tentative.<a href="#section-2.2-9" class="pilcrow">¶</a></p>
<p id="section-2.2-10">The response has the following argument:<a href="#section-2.2-10" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2-11.1">
            <strong>list</strong>: <code>BusyPeriod[]</code>
The list of BusyPeriod objects calculated as described above.<a href="#section-2.2-11.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-12">The following additional errors may be returned instead of the
"Principal/getAvailability" response:<a href="#section-2.2-12" class="pilcrow">¶</a></p>
<p id="section-2.2-13"><code>notFound</code>: No principal with this id exists, or the user does not have
permission to see that this principal exists.<a href="#section-2.2-13" class="pilcrow">¶</a></p>
<p id="section-2.2-14"><code>forbidden</code>: The user does not have permission to query this principal's availability.<a href="#section-2.2-14" class="pilcrow">¶</a></p>
<p id="section-2.2-15"><code>tooLarge</code>: The duration between utcStart an utcEnd is longer than the server is willing to calculate availability for.<a href="#section-2.2-15" class="pilcrow">¶</a></p>
<p id="section-2.2-16"><code>rateLimit</code>: Too many availability requests have been made recently and the user is being rate limited. It may work to try again later.<a href="#section-2.2-16" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="participant-identities">
<section id="section-3">
      <h2 id="name-participant-identities">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-participant-identities" class="section-name selfRef">Participant Identities</a>
      </h2>
<p id="section-3-1">A ParticipantIdentity stores information about a URI that represents the user within that account in an event's participants. It has the following properties:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">
          <strong>id</strong>: <code>Id</code> (immutable; server-set)
The id of the ParticipantIdentity.<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.2">
          <strong>name</strong>: <code>String</code> (default: "")
The display name of the participant to use when adding this participant to an event, e.g. "Joe Bloggs".<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.3">
          <p id="section-3-2.3.1"><strong>sendTo</strong>: <code>String[String]</code>
Represents methods by which the participant may receive invitations and updates to an event.<a href="#section-3-2.3.1" class="pilcrow">¶</a></p>
<p id="section-3-2.3.2">The keys in the property value are the available methods and MUST only contain ASCII alphanumeric characters (A-Za-z0-9). The value is a URI for the method specified in the key.<a href="#section-3-2.3.2" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-3-3">A participant in an event corresponds to a ParticipantIdentity if any of the method/uri pairs in the sendTo property of the participant are identical to a method/uri pair in the sendTo property of the identity.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The following JMAP methods are supported.<a href="#section-3-4" class="pilcrow">¶</a></p>
<div id="participantidentity-get">
<section id="section-3.1">
        <h3 id="name-participantidentity-get">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-participantidentity-get" class="section-name selfRef">ParticipantIdentity/get</a>
        </h3>
<p id="section-3.1-1">This is a standard "/get" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.1. The <em>ids</em> argument may be <code>null</code> to fetch all at once.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="participantidentity-changes">
<section id="section-3.2">
        <h3 id="name-participantidentity-changes">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-participantidentity-changes" class="section-name selfRef">ParticipantIdentity/changes</a>
        </h3>
<p id="section-3.2-1">This is a standard "/changes" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.2.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="participantidentity-set">
<section id="section-3.3">
        <h3 id="name-participantidentity-set">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-participantidentity-set" class="section-name selfRef">ParticipantIdentity/set</a>
        </h3>
<p id="section-3.3-1">This is a standard "/set" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.3. The server MAY restrict the uri values the user may claim, for example only allowing <code>mailto:</code> URIs with email addresses that belong to the user. A standard <code>forbidden</code> error is returned to reject non-permissible changes.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">A participant identity may be destroyed that is referenced as the "defaultParticipantIdentityId" in the CalenderPreferences object for the same account. Doing so updates the defaultParticipantIdentityId property on the CalendarPreferences to <code>null</code>.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="calendars">
<section id="section-4">
      <h2 id="name-calendars">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-calendars" class="section-name selfRef">Calendars</a>
      </h2>
<p id="section-4-1">A Calendar is a named collection of events. All events are associated with at least one calendar.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">A <strong>Calendar</strong> object has the following properties:<a href="#section-4-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4-3.1">
          <strong>id</strong>: <code>Id</code> (immutable; server-set)
The id of the calendar.<a href="#section-4-3.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-3.2">
          <strong>name</strong>: <code>String</code>
The user-visible name of the calendar. This may be any UTF-8 string of at least 1 character in length and maximum 255 octets in size.<a href="#section-4-3.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-3.3">
          <strong>description</strong>: <code>String|null</code> (default: null)
An optional longer-form description of the calendar, to provide context in shared environments where users need more than just the name.<a href="#section-4-3.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-4-3.4">
          <strong>color</strong>: <code>String|null</code> (default: null)
A color to be used when displaying events associated with the calendar.<a href="#section-4-3.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-4">If not null, the value MUST be a case-insensitive color name taken from the set of names defined in Section 4.3 of CSS Color Module Level 3 <a href="https://www.w3.org/TR/css-color-3/">COLORS</a>, or an RGB value in hexadecimal notation, as defined in Section 4.2.1 of CSS Color Module Level 3.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4-5">
<pre>The color SHOULD have sufficient contrast to be used as text on a white background.
</pre><a href="#section-4-5" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-4-6.1">
          <p id="section-4-6.1.1"><strong>sortOrder</strong>: <code>UnsignedInt</code> (default: 0)
Defines the sort order of calendars when presented in the client's UI, so it
is consistent between devices. The number MUST be an integer in the range
0 &lt;= sortOrder &lt; 2<sup>31.</sup><a href="#section-4-6.1.1" class="pilcrow">¶</a></p>
<p id="section-4-6.1.2">A calendar with a lower order should be displayed before a calendar with
a higher order in any list of calendars in the client's UI. Calendars with equal order SHOULD be sorted in alphabetical order by name.  The sorting should take into account locale-specific character order convention.<a href="#section-4-6.1.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.2">
          <p id="section-4-6.2.1"><strong>isSubscribed</strong>: <code>Boolean</code>
Has the user indicated they wish to see this Calendar in their client? This SHOULD default to false for Calendars in shared accounts the user has access to and true for any new Calendars created by the user themself.<a href="#section-4-6.2.1" class="pilcrow">¶</a></p>
<p id="section-4-6.2.2">If false, the calendar should only be displayed when the user explicitly
requests it or to offer it for the user to subscribe to.<a href="#section-4-6.2.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.3">
          <p id="section-4-6.3.1"><strong>isVisible</strong>: <code>Boolean</code> (default: true)
Should the calendar's events be displayed to the user at the moment? Clients MUST ignore this property if isSubscribed is false. If an event is in multiple calendars, it should be displayed if isVisible is true for any of those calendars.<a href="#section-4-6.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.4">
          <p id="section-4-6.4.1"><strong>includeInAvailability</strong>: <code>String</code> (default: all)
Should the calendar's events be used as part of availability calculation?
This MUST be one of:<a href="#section-4-6.4.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-6.4.2.1">
              <code>all</code>: all events are considered.<a href="#section-4-6.4.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-6.4.2.2">
              <code>attending</code>: events the user is a confirmed or tentative participant of
are considered.<a href="#section-4-6.4.2.2" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-6.4.2.3">
              <code>none</code>: all events are ignored (but may be considered if also in another
calendar).<a href="#section-4-6.4.2.3" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-4-6.5">
          <p id="section-4-6.5.1"><strong>defaultAlertsWithTime</strong>: <code>Id[Alert]|null</code> (default: null)
A map of alert ids to Alert objects (see <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, Section 4.5.2) to apply for events where "showWithoutTime" is false and "useDefaultAlerts" is true. Ids MUST be unique across all default alerts in the account, including those in other calendars; a UUID is recommended.<a href="#section-4-6.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.6">
          <p id="section-4-6.6.1"><strong>defaultAlertsWithoutTime</strong>: <code>Id[Alert]|null</code> (default: null)
A map of alert ids to Alert objects (see <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, Section 4.5.2) to apply for events where "showWithoutTime" is true and "useDefaultAlerts" is true. Ids MUST be unique across all default alerts in the account, including those in other calendars; a UUID is recommended.<a href="#section-4-6.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.7">
          <p id="section-4-6.7.1"><strong>timeZone</strong>: <code>String|null</code> (default: null)
The time zone to use for events without a time zone when the server needs to resolve them into absolute time, e.g., for alerts or availability calculation. The value MUST be a time zone id from the IANA Time Zone Database <a href="https://www.iana.org/time-zones">TZDB</a>. If <code>null</code>, the timeZone of the account's associated Principal will be used. Clients SHOULD use this as the default for new events in this calendar if set.<a href="#section-4-6.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.8">
          <p id="section-4-6.8.1"><strong>shareWith</strong>: <code>Id[CalendarRights]|null</code> (default: null)
A map of Principal id to rights for principals this calendar is shared with. The principal to which this calendar belongs MUST NOT be in this set. This is null if the user requesting the object does not have the mayAdmin right, or if the calendar is not shared with anyone. May be modified only if the user has the mayAdmin right. The account id for the principals may be found in the <code>urn:ietf:params:jmap:principals:owner</code> capability of the Account to which the calendar belongs.<a href="#section-4-6.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-6.9">
          <p id="section-4-6.9.1"><strong>myRights</strong>: <code>CalendarRights</code> (server-set)
The set of access rights the user has in relation to this Calendar. If any event is in multiple calendars, the user has the following rights:<a href="#section-4-6.9.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-6.9.2.1">The user may fetch the event if they have the mayReadItems right on any
calendar the event is in.<a href="#section-4-6.9.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-6.9.2.2">The user may remove an event from a calendar (by modifying the event's
"calendarIds" property) if the user has the appropriate permission for that
calendar.<a href="#section-4-6.9.2.2" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-6.9.2.3">The user may make other changes to the event if they have the right to do
so in <em>all</em> calendars to which the event belongs.<a href="#section-4-6.9.2.3" class="pilcrow">¶</a>
</li>
          </ul>
</li>
      </ul>
<p id="section-4-7">A <strong>CalendarRights</strong> object has the following properties:<a href="#section-4-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-8.1">
          <strong>mayReadFreeBusy</strong>: <code>Boolean</code>
The user may read the free-busy information for this calendar as part of a call to Principal/getAvailability (see Section XXX).<a href="#section-4-8.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-8.2">
          <strong>mayReadItems</strong>: <code>Boolean</code>
The user may fetch the events in this calendar.<a href="#section-4-8.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-8.3">
          <strong>mayWriteAll</strong>: <code>Boolean</code>
The user may create, modify or destroy all events in this calendar, or move events to or from this calendar. If this is true, the mayWriteOwn, mayUpdatePrivate and mayRSVP properties MUST all also be true.<a href="#section-4-8.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-8.4">
          <strong>mayWriteOwn</strong>: <code>Boolean</code>
The user may create, modify or destroy an event on this calendar if either they are the owner of the event or the event has no owner. This means the user may also transfer ownership by updating an event so they are no longer an owner.<a href="#section-4-8.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-8.5">
          <p id="section-4-8.5.1"><strong>mayUpdatePrivate</strong>: <code>Boolean</code>
The user may modify the following properties on all events in the calendar, even if they would not otherwise have permission to modify that event. If the shareesActAs account capability is "self", these properties MUST all be stored per-user, and changes do not affect any other user of the calendar. If shareesActAs is "secretary", the values are shared between all users.<a href="#section-4-8.5.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-8.5.2.1">keywords<a href="#section-4-8.5.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.5.2.2">color<a href="#section-4-8.5.2.2" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.5.2.3">freeBusyStatus<a href="#section-4-8.5.2.3" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.5.2.4">useDefaultAlerts<a href="#section-4-8.5.2.4" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.5.2.5">alerts<a href="#section-4-8.5.2.5" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4-8.5.3">The user may also modify the above on a per-occurrence basis for recurring events (updating the recurrenceOverrides property of the event to do so).<a href="#section-4-8.5.3" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-8.6">
          <p id="section-4-8.6.1"><strong>mayRSVP</strong>: <code>Boolean</code>
The user may modify the following properties of any Participant object that corresponds to one of the user's ParticipantIdentity objects in the account, even if they would not otherwise have permission to modify that event:<a href="#section-4-8.6.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-8.6.2.1">participationStatus<a href="#section-4-8.6.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.6.2.2">participationComment<a href="#section-4-8.6.2.2" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.6.2.3">expectReply<a href="#section-4-8.6.2.3" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.6.2.4">scheduleAgent<a href="#section-4-8.6.2.4" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.6.2.5">scheduleSequence<a href="#section-4-8.6.2.5" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-8.6.2.6">scheduleUpdated<a href="#section-4-8.6.2.6" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4-8.6.3">If the event has its "mayInviteSelf" property set to true (see Section XXX), then the user may also add a new Participant to the event with a sendTo property that is the same as the sendTo property of one of the user's ParticipantIdentity objects in the account. The roles property of the participant MUST only contain "attendee".<a href="#section-4-8.6.3" class="pilcrow">¶</a></p>
<p id="section-4-8.6.4">If the event has its "mayInviteOthers" property set to true (see Section XXX) and there is an existing Participant in the event corresponding to one of the user's ParticipantIdentity objects in the account, then the user may also add new participants. The roles property of any new participant MUST only contain "attendee".<a href="#section-4-8.6.4" class="pilcrow">¶</a></p>
<p id="section-4-8.6.5">The user may also do all of the above on a per-occurrence basis for recurring events (updating the recurrenceOverrides property of the event to do so).<a href="#section-4-8.6.5" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-8.7">
          <p id="section-4-8.7.1"><strong>mayAdmin</strong>: <code>Boolean</code>
The user may modify sharing for this calendar.<a href="#section-4-8.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-8.8">
          <p id="section-4-8.8.1"><strong>mayDelete</strong>: <code>Boolean</code> (server-set)
The user may delete the calendar itself. This property MUST be false if the account to which this calendar belongs has the <em>isReadOnly</em> property set to true.<a href="#section-4-8.8.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-4-9">The user is an <strong>owner</strong> for an event if the CalendarEvent object has a   "participants" property, and one of the Participant objects both:<a href="#section-4-9" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4-10">
<pre>a) Has the "owner" role.
b) Corresponds to one of the user's ParticipantIdentity objects in the account.
</pre><a href="#section-4-10" class="pilcrow">¶</a>
</div>
<p id="section-4-11">An event has no owner if its participants property is null or omitted, or if none of the Participant objects have the "owner" role.<a href="#section-4-11" class="pilcrow">¶</a></p>
<div id="calendar-get">
<section id="section-4.1">
        <h3 id="name-calendar-get">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-calendar-get" class="section-name selfRef">Calendar/get</a>
        </h3>
<p id="section-4.1-1">This is a standard "/get" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.1. The <em>ids</em> argument may be <code>null</code> to fetch all at once.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">If mayReadFreeBusy is the only permission the user has, the calendar MUST NOT be returned in Calendar/get and Calendar/query; it must behave as though it did not exist. The data is just used as part of Principal/getAvailability.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendar-changes">
<section id="section-4.2">
        <h3 id="name-calendar-changes">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-calendar-changes" class="section-name selfRef">Calendar/changes</a>
        </h3>
<p id="section-4.2-1">This is a standard "/changes" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.2.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendar-set">
<section id="section-4.3">
        <h3 id="name-calendar-set">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-calendar-set" class="section-name selfRef">Calendar/set</a>
        </h3>
<p id="section-4.3-1">This is a standard "/set" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.3 but with the following additional request argument:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.3-2.1">
            <strong>onDestroyRemoveEvents</strong>: <code>Boolean</code> (default: false)<a href="#section-4.3-2.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.3-3">If false, any attempt to destroy a Calendar that still has CalendarEvents
  in it will be rejected with a <code>calendarHasEvent</code> SetError. If
  true, any CalendarEvents that were in the Calendar will be removed from it, and if in no other Calendars they will be destroyed. This SHOULD NOT send scheduling messages to participants or create CalendarEventNotification objects.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">The "shareWith" property may only be set by users that have the mayAdmin right. The value is shared across all users, although users without the mayAdmin right cannot see the value.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">When modifying the shareWith property, the user cannot give a right to a principal if the principal did not already have that right and the user making the change also does not have that right. Any attempt to do so must be rejected with a <code>forbidden</code> SetError.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.3-6">Users can subscribe or unsubscribe to a calendar by setting the "isSubscribed" property. The server MAY forbid users from subscribing to certain calendars even though they have permission to see them, rejecting the update with a <code>forbidden</code> SetError.<a href="#section-4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.3-7">The "timeZone", "includeInAvailability", "defaultAlertsWithoutTime" and "defaultAlertsWithTime" properties are stored per-user if the calendar account's "shareesActAs" capability is "self", and may be set by any user who is subscribed to the calendar. Each user gets the default value for these properties as the initial value; they do not inherit an initial value from the calendar owner.<a href="#section-4.3-7" class="pilcrow">¶</a></p>
<p id="section-4.3-8">If the calendar account's "shareesActAs" capability is "self" these properties are instead shared, and may only be set by users that have the mayAdmin right.<a href="#section-4.3-8" class="pilcrow">¶</a></p>
<p id="section-4.3-9">The following properties may be set by anyone who is subscribed to the calendar and are always stored per-user:<a href="#section-4.3-9" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.3-10.1">name<a href="#section-4.3-10.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.3-10.2">color<a href="#section-4.3-10.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.3-10.3">sortOrder<a href="#section-4.3-10.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.3-10.4">isVisible<a href="#section-4.3-10.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.3-11">The "name" and "color" properties are initially inherited from the owner's copy of the calendar, but if set by a sharee that user gets their own copy of the property; it does not change for any other principals. If the value of the property in the owner's calendar changes after this, it does not overwrite the sharee's value.<a href="#section-4.3-11" class="pilcrow">¶</a></p>
<p id="section-4.3-12">The "sortOrder" and "isVisible" properties are initally the default value for each sharee; they are not inherited from the owner.<a href="#section-4.3-12" class="pilcrow">¶</a></p>
<p id="section-4.3-13">A calendar may be destroyed that is referenced as the "defaultCalendarId" in the CalenderPreferences object for the same account. Doing so updates the defaultCalendarId property on the CalendarPreferences to <code>null</code>.<a href="#section-4.3-13" class="pilcrow">¶</a></p>
<p id="section-4.3-14">The following extra SetError types are defined:<a href="#section-4.3-14" class="pilcrow">¶</a></p>
<p id="section-4.3-15">For "destroy":<a href="#section-4.3-15" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.3-16.1">
            <strong>calendarHasEvent</strong>: The Calendar has at least one CalendarEvent assigned to
it, and the "onDestroyRemoveEvents" argument was false.<a href="#section-4.3-16.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="calendar-events">
<section id="section-5">
      <h2 id="name-calendar-events">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-calendar-events" class="section-name selfRef">Calendar Events</a>
      </h2>
<p id="section-5-1">A <strong>CalendarEvent</strong> object contains information about an event, or recurring series of events, that takes place at a particular time. It is a JSEvent object, as defined in <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, with the following additional properties:<a href="#section-5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-2.1">
          <p id="section-5-2.1.1"><strong>id</strong>: <code>Id</code> (immutable; server-set)
The id of the CalendarEvent. The id uniquely identifies a JSEvent with a particular "uid" and "recurrenceId" within a particular account.<a href="#section-5-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.2">
          <p id="section-5-2.2.1"><strong>baseEventId</strong>: <code>Id|null</code> (immutable; server-set)
This is only defined if the <em>id</em> property is a synthetic id, generated by the server to represent a particular instance of a recurring event (see Section XXX). This property gives the id of the "real" CalendarEvent this was generated from.<a href="#section-5-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.3">
          <p id="section-5-2.3.1"><strong>calendarIds</strong>: <code>Id[Boolean]</code>
The set of Calendar ids this event belongs to. An event MUST belong to one or more Calendars at all times (until it is destroyed). The set is represented as an object, with each key being a <em>Calendar id</em>. The value for each key in the object MUST be <code>true</code>.<a href="#section-5-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.4">
          <p id="section-5-2.4.1"><strong>isDraft</strong>: <code>Boolean</code> (default: false)
If true, this event is to be considered a draft. The server will not send any scheduling messages to participants or send push notifications for alerts. This may only be set to true upon creation. Once set to false, the value cannot be updated to true. This property MUST NOT appear in "recurrenceOverrides".<a href="#section-5-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.5">
          <p id="section-5-2.5.1"><strong>utcStart</strong>: <code>UTCDate</code>
For simple clients that do not or cannot implement time zone support. Clients should only use this if also asking the server to expand recurrences, as you cannot accurately expand a recurrence without the original time zone.<a href="#section-5-2.5.1" class="pilcrow">¶</a></p>
<p id="section-5-2.5.2">This property is calculated at fetch time by the server. Time zones are political and they can and do change at any time. Fetching exactly the same property again may return a different results if the time zone data has been updated on the server. Time zone data changes are not considered "updates" to the event.<a href="#section-5-2.5.2" class="pilcrow">¶</a></p>
<p id="section-5-2.5.3">If set, server will convert to the event's current time zone using its current time zone data and store the local time.<a href="#section-5-2.5.3" class="pilcrow">¶</a></p>
<p id="section-5-2.5.4">This is not included by default and must be requested explicitly.<a href="#section-5-2.5.4" class="pilcrow">¶</a></p>
<p id="section-5-2.5.5">Floating events (events without a time zone) will be interpreted as per the time zone given as a CalendarEvent/get argument.<a href="#section-5-2.5.5" class="pilcrow">¶</a></p>
<p id="section-5-2.5.6">Note that it is not possible to accurately calculate the expansion of recurrence rules or recurrence overrides with the utcStart property rather than the local start time. Even simple recurrences such as "repeat weekly" may cross a daylight-savings boundary and end up at a different UTC time. Clients that wish to use "utcStart" are RECOMMENDED to request the server expand recurrences (see Section XXX).<a href="#section-5-2.5.6" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.6">
          <p id="section-5-2.6.1"><strong>utcEnd</strong>: <code>UTCDate</code>
The server calculates the end time in UTC from the start/timeZone/duration properties of the event. This is not included by default and must be requested explicitly. Like utcStart, this is calculated at fetch time if requested and may change due to time zone data changes. Floating events will be interpreted as per the time zone given as a CalendarEvent/get argument.<a href="#section-5-2.6.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-5-3">CalendarEvent objects MUST NOT have a "method" property as this is only used when representing iTIP <span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span> scheduling messages, not events in a data store.<a href="#section-5-3" class="pilcrow">¶</a></p>
<div id="additional-jscalendar-properties">
<section id="section-5.1">
        <h3 id="name-additional-jscalendar-prope">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-additional-jscalendar-prope" class="section-name selfRef">Additional JSCalendar properties</a>
        </h3>
<p id="section-5.1-1">This document defines three new JSCalendar properties.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div id="mayinviteself">
<section id="section-5.1.1">
          <h4 id="name-mayinviteself">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-mayinviteself" class="section-name selfRef">mayInviteSelf</a>
          </h4>
<p id="section-5.1.1-1">Type: <code>Boolean</code> (default: false)<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-2">If <code>true</code>, any user may add themselves to the event as a participant with the "attendee" role. This property MUST NOT be altered in the recurrenceOverrides; it may only be set on the base object.<a href="#section-5.1.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3">This indicates the owner will accept "party crasher" RSVPs via iTIP, subject to any other domain-specific restrictions, and users may add themselves to the event via JMAP as long as they have the mayRSVP permission for the calendar.<a href="#section-5.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mayinviteothers">
<section id="section-5.1.2">
          <h4 id="name-mayinviteothers">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-mayinviteothers" class="section-name selfRef">mayInviteOthers</a>
          </h4>
<p id="section-5.1.2-1">Type: <code>Boolean</code> (default: false)<a href="#section-5.1.2-1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-2">If <code>true</code>, any current participant with the "attendee" role may add new participants with the "attendee" role to the event. This property MUST NOT be altered in the recurrenceOverrides; it may only be set on the base object.<a href="#section-5.1.2-2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3">The mayRSVP permission for the calendar is also required in conjunction with this event property for users to be allowed to make this change via JMAP.<a href="#section-5.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="hideattendees">
<section id="section-5.1.3">
          <h4 id="name-hideattendees">
<a href="#section-5.1.3" class="section-number selfRef">5.1.3. </a><a href="#name-hideattendees" class="section-name selfRef">hideAttendees</a>
          </h4>
<p id="section-5.1.3-1">Type: <code>Boolean</code> (default: false)<a href="#section-5.1.3-1" class="pilcrow">¶</a></p>
<p id="section-5.1.3-2">If <code>true</code>, only the owners of the event may see the full set of participants. Other sharees of the event may only see the owners and themselves. This property MUST NOT be altered in the recurrenceOverrides; it may only be set on the base object.<a href="#section-5.1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="attachments">
<section id="section-5.2">
        <h3 id="name-attachments">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-attachments" class="section-name selfRef">Attachments</a>
        </h3>
<p id="section-5.2-1">The Link object, as defined in <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span> Section 4.2.7, with a "rel" property equal to "enclosure" is used to represent attachments. Instead of mandating an "href" property, clients may set a "blobId" property instead to reference a blob of binary data in the account, as per <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span> Section 6.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">The server MUST translate this to an embedded <code>data:</code> URL <span>[<a href="#RFC2397" class="xref">RFC2397</a>]</span> when sending the event to a system that cannot access the blob. Servers that support CalDAV access to the same data are recommended to expose these files as managed attachments [?@RFC8607].<a href="#section-5.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="per-user-properties">
<section id="section-5.3">
        <h3 id="name-per-user-properties">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-per-user-properties" class="section-name selfRef">Per-user properties</a>
        </h3>
<p id="section-5.3-1">In shared calendars where the account's "shareesActAs" capability is "self", the following properties MUST be stored per-user:<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.3-2.1">keywords<a href="#section-5.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.3-2.2">color<a href="#section-5.3-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.3-2.3">freeBusyStatus<a href="#section-5.3-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.3-2.4">useDefaultAlerts<a href="#section-5.3-2.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.3-2.5">alerts<a href="#section-5.3-2.5" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.3-3">The user may also modify these properties on a per-occurrence basis for recurring events; again, these MUST be stored per-user.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3-4">When writing only per-user properties, the "updated" property MUST also be stored just for that user if set. When fetching the "updated" property, the value to return is whichever is later of the per-user updated time or the updated time of the base event.<a href="#section-5.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="recurring-events">
<section id="section-5.4">
        <h3 id="name-recurring-events">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-recurring-events" class="section-name selfRef">Recurring events</a>
        </h3>
<p id="section-5.4-1">Events may recur, in which case they represent multiple occurrences or instances. The data store will either contain a single base event, containing a recurrence rule and/or recurrence overrides; or, a set of individual instances (when invited to specific occurrences only).<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">The client may ask the server to expand recurrences within a specific time range in "CalendarEvent/query". This will generate synthetic ids representing individual instances in the requested time range. The client can fetch and update the objects using these ids and the server will make the appropriate changes to the base event. Synthetic ids do not appear in "CalendarEvent/changes" responses; only the ids of events as actually stored on the server.<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.4-3">If the user is invited to specific instances then later added to the base event, "CalendarEvent/changes" will show the ids of all the individual instances being destroyed and the id for the base event being created.<a href="#section-5.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="updating-for-this-and-future">
<section id="section-5.5">
        <h3 id="name-updating-for-this-and-futur">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-updating-for-this-and-futur" class="section-name selfRef">Updating for "this-and-future"</a>
        </h3>
<p id="section-5.5-1">When editing a recurring event, you can either update the base event (affecting all instances unless overriden) or update an override for a specific occurrence. To update all occurrences from a specific point onwards, there are therefore two options: split the event, or update the base event and override all occurrences before the split point back to their original values.<a href="#section-5.5-1" class="pilcrow">¶</a></p>
<div id="splitting-an-event">
<section id="section-5.5.1">
          <h4 id="name-splitting-an-event">
<a href="#section-5.5.1" class="section-number selfRef">5.5.1. </a><a href="#name-splitting-an-event" class="section-name selfRef">Splitting an event</a>
          </h4>
<p id="section-5.5.1-1">If the event is not scheduled (has no participants), the simplest thing to do is to duplicate the event, modifying the recurrence rules of the original so it finishes before the split point, and the duplicate so it starts at the split point. As per JSCalendar <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span> Section 4.1.3, a "next" and "first" relation MUST be set on the new objects respectively.<a href="#section-5.5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.5.1-2">Splitting an event however is problematic in the case of a scheduled event, because the iTIP messages generated make it appear like two unrelated changes, which can be confusing.<a href="#section-5.5.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="updating-the-base-event-and-overriding-previous">
<section id="section-5.5.2">
          <h4 id="name-updating-the-base-event-and">
<a href="#section-5.5.2" class="section-number selfRef">5.5.2. </a><a href="#name-updating-the-base-event-and" class="section-name selfRef">Updating the base event and overriding previous</a>
          </h4>
<p id="section-5.5.2-1">For scheduled events, a better approach is to avoid splitting and instead update the base event with the new property value for "this and future", then create overrides for all occurrences before the split point to restore the property to its previous value. Indeed, this may be the only option the user has permission to do if not an owner of the event.<a href="#section-5.5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.5.2-2">Clients may choose to skip creating the overrides if the old data is not important, for example if the "alerts" property is being updated, it is probably not important to create overrides for events in the past with the alerts that have already fired.<a href="#section-5.5.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="calendarevent-get">
<section id="section-5.6">
        <h3 id="name-calendarevent-get">
<a href="#section-5.6" class="section-number selfRef">5.6. </a><a href="#name-calendarevent-get" class="section-name selfRef">CalendarEvent/get</a>
        </h3>
<p id="section-5.6-1">This is a standard "/get" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.1, with three extra arguments:<a href="#section-5.6-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.6-2.1">
            <strong>recurrenceOverridesBefore</strong>: <code>UTCDate|null</code>
If given, only recurrence overrides with a recurrence id before this date (when translated into UTC) will be returned.<a href="#section-5.6-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.6-2.2">
            <strong>recurrenceOverridesAfter</strong>: <code>UTCDate|null</code>
If given, only recurrence overrides with a recurrence id on or after this date (when translated into UTC) will be returned.<a href="#section-5.6-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.6-2.3">
            <strong>reduceParticipants</strong>: <code>Boolean</code> (default: false)
If true, only participants with the "owner" role or corresponding to the user's participant identities will be returned in the "participants" property of the base event and any recurrence overrides. If false, all participants will be returned.<a href="#section-5.6-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.6-2.4">
            <strong>timeZone</strong>: <code>String</code> (default "Etc/UTC")
The time zone to use when calculating the utcStart/utcEnd property of floating events. This argument has no effect if those properties are not requested.<a href="#section-5.6-2.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.6-3">A CalendarEvent object is a JSEvent object so may have arbitrary properties. If the client makes a "CalendarEvent/get" call with a null or omitted "properties" argument, all properties defined on the JSEvent object in the store are returned, along with the "id", "calendarIds", and "isDraft" properties. The "utcStart" and "utcEnd" computed properties are only returned if explicitly requested. If either are requested, the "recurrenceOverrides" property MUST NOT be requested (recurrence overrides cannot be interpreted accurately with just the UTC times).<a href="#section-5.6-3" class="pilcrow">¶</a></p>
<p id="section-5.6-4">If specific properties are requested from the JSEvent and the property is not present on the object in the server's store, the server SHOULD return the default value if known for that property.<a href="#section-5.6-4" class="pilcrow">¶</a></p>
<p id="section-5.6-5">A requested id may represent a server-expanded single instance of a recurring event if the client asked the server to expand recurrences in "CalendarEvent/query". In such a case, the server will resolve any overrides and set the appropriate "start" and "recurrenceId" properties on the CalendarEvent object returned to the client. The "recurrenceRule" and "recurrenceOverrides" properties MUST be returned as null if requested for such an event.<a href="#section-5.6-5" class="pilcrow">¶</a></p>
<p id="section-5.6-6">An event with the same uid/recurrenceId may appear in different accounts. Clients may coalesce the view of such events, but must be aware that the data may be different in the different accounts due to per-user properties, difference in permissions etc.<a href="#section-5.6-6" class="pilcrow">¶</a></p>
<p id="section-5.6-7">The "privacy" property of a JSEvent object allows the owner to override how sharees of the calendar see the event. If this is set to "private", when a sharee fetches the event the server MUST only return the basic time and metadata properties of the JSEvent object as specified in <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, Section 4.4.3. If set to "secret", the server MUST behave as though the event does not exist for all users other than the owner.<a href="#section-5.6-7" class="pilcrow">¶</a></p>
<p id="section-5.6-8">This "hideAttendees" property of a JSEvent object allows the owner to reduce the visibility of sharees into the set of participants. If this is <code>true</code>, when a non-owner sharee fetches the event, the server MUST only return participants with the "owner" role or corresponding to the user's participant identities.<a href="#section-5.6-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendarevent-changes">
<section id="section-5.7">
        <h3 id="name-calendarevent-changes">
<a href="#section-5.7" class="section-number selfRef">5.7. </a><a href="#name-calendarevent-changes" class="section-name selfRef">CalendarEvent/changes</a>
        </h3>
<p id="section-5.7-1">This is a standard "/changes" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.2.<a href="#section-5.7-1" class="pilcrow">¶</a></p>
<p id="section-5.7-2">Synthetic ids generated by the server expanding recurrences in "CalendarEvent/query" do not appear in "CalendarEvent/changes" responses; only the ids of events as actually stored on the server.<a href="#section-5.7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendarevent-set">
<section id="section-5.8">
        <h3 id="name-calendarevent-set">
<a href="#section-5.8" class="section-number selfRef">5.8. </a><a href="#name-calendarevent-set" class="section-name selfRef">CalendarEvent/set</a>
        </h3>
<p id="section-5.8-1">This is a standard "/set" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.3, with the following extra argument:<a href="#section-5.8-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8-2.1">
            <strong>sendSchedulingMessages</strong>: <code>Boolean</code> (default: false)
If true then any changes to scheduled events will be sent to all the participants (if the user is an owner of the event) or back to the owners (otherwise). If false, the changes only affect this account and no scheduling messages will be sent.<a href="#section-5.8-2.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.8-3">An id may represent a server-expanded single instance of a recurring event if the client asked the server to expand recurrences in "CalendarEvent/query". When the synthetic id for such an instance is given, the server MUST process an update as an update to the recurrence override for that instance on the base event, and a destroy as removing just that instance.<a href="#section-5.8-3" class="pilcrow">¶</a></p>
<p id="section-5.8-4">Clients MUST NOT send an update/destroy to both the base event and a synthetic instance in a single "/set" request; the result of this is undefined. Note however, a client may replace a series of explicit instances (each with the same uid but a different <code>recurrenceId</code> property) with the base event (same uid, no <code>recurrenceId</code>) in a single "/set" call. (So the /set will destroy the existing instances and create the new base event.) This will happen when someone is initially invited to a specific instance or instances of a recurring event, then later invited to the whole series.<a href="#section-5.8-4" class="pilcrow">¶</a></p>
<p id="section-5.8-5">Servers MUST enforce the user's permissions as returned in the "myRights" property of the Calendar objects and reject changes with a <code>forbidden</code> SetError if not allowed.<a href="#section-5.8-5" class="pilcrow">¶</a></p>
<p id="section-5.8-6">The "privacy" property of a JSEvent object allows the owner to override how sharees of the calendar see the event. If this is set to "private", a sharee may not delete or update the event (even if only modifying per-user properties); any attempt to modify such an event MUST be rejected with a <code>forbidden</code> SetError. If set to "secret", the server MUST behave as though the event does not exist for all users other than the owner.<a href="#section-5.8-6" class="pilcrow">¶</a></p>
<p id="section-5.8-7">The "privacy" property MUST NOT be set to anything other than "public" (the default) for events in a calendar that does not belong to the user (e.g. a shared team calendar). The server MUST reject this with an <code>invalidProperties</code> SetError.<a href="#section-5.8-7" class="pilcrow">¶</a></p>
<p id="section-5.8-8">If omitted on create, the server MUST set the following properties to an appropriate value:<a href="#section-5.8-8" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8-9.1">@type<a href="#section-5.8-9.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.8-9.2">uid<a href="#section-5.8-9.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.8-9.3">created<a href="#section-5.8-9.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.8-10">If (and only if) the server is the source of the event (see Section XXX), the "updated" property MUST be set to the current time by the server whenever an event is created or updated. If the client tries to set a value for this property it is not an error, but it MUST be overridden and replaced with the server's time. If the event is being created and the overridden "updated" time is now earlier than a client-supplied "created" time, the "created" time MUST also be overridden to the server's time. If the server is not the source of the event it MUST NOT automatically set an "updated" time, as this can break correct processing of iTIP messages.<a href="#section-5.8-10" class="pilcrow">¶</a></p>
<p id="section-5.8-11">When updating an event, if all of:<a href="#section-5.8-11" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8-12.1">a property has been changed other than "calendarIds", "isDraft" or a per-user
property (see Section XXX); and<a href="#section-5.8-12.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.8-12.2">the server is the source of the event (see Section XXX); and<a href="#section-5.8-12.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.8-12.3">the "sequence" property is not explicitly set in the update, or the given
value is less than or equal to the current "sequence" value on the server;<a href="#section-5.8-12.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.8-13">then the server MUST increment the "sequence" value by one.<a href="#section-5.8-13" class="pilcrow">¶</a></p>
<p id="section-5.8-14">The "created" property MUST NOT be updated after creation. The "method" property MUST NOT be set. Any attempt to do these is rejected with a standard <code>invalidProperties</code> SetError.<a href="#section-5.8-14" class="pilcrow">¶</a></p>
<p id="section-5.8-15">If "utcStart" is set, this is translated into a "start" property using the server's current time zone information. It MUST NOT be set in addition to a "start" property and it cannot be set inside "recurrenceOverrides"; this MUST be rejected with an <code>invalidProperties</code> SetError.<a href="#section-5.8-15" class="pilcrow">¶</a></p>
<p id="section-5.8-16">Similarly, the "utcEnd" property is translated into a "duration" property if set. It MUST NOT be set in addition to a "duration" property and it cannot be set inside "recurrenceOverrides"; this MUST be rejected with an <code>invalidProperties</code> SetError.<a href="#section-5.8-16" class="pilcrow">¶</a></p>
<p id="section-5.8-17">The server does not automatically reset the "partipationStatus" or "expectReply" properties of a Participant when changing other event details. Clients should either be intelligent about whether the change necessitates resending RSVP requests, or ask the user whether to send them.<a href="#section-5.8-17" class="pilcrow">¶</a></p>
<p id="section-5.8-18">The server MAY enforce that all events have an owner, for example in team calendars. If the user tries to create an event without participants in such a calendar, the server MUST automatically add a participant with the "owner" role corresponding to one of the user's ParticipantIdentities (see Section XXX).<a href="#section-5.8-18" class="pilcrow">¶</a></p>
<p id="section-5.8-19">When creating an event with participants, or adding participants to an event that previously did not have participants, the server MUST set the "replyTo" property of the event if not present. Clients SHOULD NOT set the replyTo property for events when the user adds participants; the server is better positioned to add all the methods it supports to receive replies.<a href="#section-5.8-19" class="pilcrow">¶</a></p>
<div id="patching">
<section id="section-5.8.1">
          <h4 id="name-patching">
<a href="#section-5.8.1" class="section-number selfRef">5.8.1. </a><a href="#name-patching" class="section-name selfRef">Patching</a>
          </h4>
<p id="section-5.8.1-1">The JMAP "/set" method allows you to update an object by sending a patch, rather than having to supply the whole object. When doing so, care must be taken if updating a property of a CalendarEvent where the value is itself a PatchObject, e.g. inside "localizations" or "recurrenceOverrides". In particular, you cannot add a property with value <code>null</code> to the CalendarEvent using a direct patch on that property, as this is interpreted instead as a patch to remove the property. This is more easily understood with an example. Suppose you have a CalendarEvent object like so:<a href="#section-5.8.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.8.1-2">
<pre>{
  "id": "123",
  "title": "FooBar team meeting",
  "start": "2018-01-08T09:00:00",
  "recurrenceRules": [{
   "@type": "RecurrenceRule",
   "frequency": "weekly"
  }],
  "replyTo": {
   "imip": "mailto:6489-4f14-a57f-c1@schedule.example.com"
  },
  "participants": {
   "dG9tQGZvb2Jhci5xlLmNvbQ": {
     "@type": "Participant",
     "name": "Tom",
     "email": "tom@foobar.example.com",
     "sendTo": {
       "imip": "mailto:6489-4f14-a57f-c1@calendar.example.com"
     },
     "participationStatus": "accepted",
     "roles": {
       "attendee": true
     }
   },
   "em9lQGZvb2GFtcGxlLmNvbQ": {
     "@type": "Participant",
     "name": "Zoe",
     "email": "zoe@foobar.example.com",
     "sendTo": {
       "imip": "mailto:zoe@foobar.example.com"
     },
     "participationStatus": "accepted",
     "roles": {
       "owner": true,
       "attendee": true,
       "chair": true
     }
   },
   "recurrenceOverrides": {
     "2018-03-08T09:00:00": {
       "start": "2018-03-08T10:00:00",
       "participants/dG9tQGZvb2Jhci5xlLmNvbQ/participationStatus":
                                                           "declined"
     }
   }
  }
}
</pre><a href="#section-5.8.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.8.1-3">In this example, Tom is normally going to the weekly meeting but has declined
the occurrence on 2018-03-08, which starts an hour later than normal. Now, if Zoe too were to decline that meeting, she could update the event by just sending a patch like so:<a href="#section-5.8.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.8.1-4">
<pre>[[ "CalendarEvent/set", {
  "accountId": "ue150411c",
  "update": {
    "123": {
      "recurrenceOverrides/2018-03-08T09:00:00/
          participants~1em9lQGZvb2GFtcGxlLmNvbQ~1participationStatus":
              "declined"
    }
  }
}, "0" ]]
</pre><a href="#section-5.8.1-4" class="pilcrow">¶</a>
</div>
<p id="section-5.8.1-5">This patches the "2018-03-08T09:00:00" PatchObject in recurrenceOverrides so that it ends up like this:<a href="#section-5.8.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.8.1-6">
<pre>"recurrenceOverrides": {
  "2018-03-08T09:00:00": {
    "start": "2018-03-08T10:00:00",
    "participants/dG9tQGZvb2Jhci5xlLmNvbQ/participationStatus":
                                                       "declined",
    "participants/em9lQGZvb2GFtcGxlLmNvbQ/participationStatus":
                                                       "declined"
  }
}
</pre><a href="#section-5.8.1-6" class="pilcrow">¶</a>
</div>
<p id="section-5.8.1-7">Now if Tom were to change his mind and remove his declined status override (thus meaning he is attending, as inherited from the top-level event), he might remove his patch from the overrides like so:<a href="#section-5.8.1-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.8.1-8">
<pre>[[ "CalendarEvent/set", {
  "accountId": "ue150411c",
  "update": {
    "123": {
      "recurrenceOverrides/2018-03-08T09:00:00/
          participants~1dG9tQGZvb2Jhci5xlLmNvbQ~1participationStatus": null
    }
  }
}, "0" ]]
</pre><a href="#section-5.8.1-8" class="pilcrow">¶</a>
</div>
<p id="section-5.8.1-9">However, if you instead want to remove Tom from this instance altogether, you could not send this patch:<a href="#section-5.8.1-9" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.8.1-10">
<pre>[[ "CalendarEvent/set", {
  "accountId": "ue150411c",
  "update": {
    "123": {
      "recurrenceOverrides/2018-03-08T09:00:00/
          participants~1dG9tQGZvb2Jhci5xlLmNvbQ": null
    }
  }
}, "0" ]]
</pre><a href="#section-5.8.1-10" class="pilcrow">¶</a>
</div>
<p id="section-5.8.1-11">This would mean remove the "participants/dG9tQGZvb2Jhci5xlLmNvbQ" property at path "recurrenceOverrides" -&gt; "2018-03-08T09:00:00" inside the object; but this doesn't exist. We actually we want to add this property and make it map to <code>null</code>. The client must instead send the full object that contains the property mapping to <code>null</code>, like so:<a href="#section-5.8.1-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.8.1-12">
<pre>[[ "CalendarEvent/set", {
  "accountId": "ue150411c",
  "update": {
    "123": {
      "recurrenceOverrides/2018-03-08T09:00:00": {
        "start": "2018-03-08T10:00:00",
        "participants/em9lQGZvb2GFtcGxlLmNvbQ/participationStatus":
                                                       "declined"
        "participants/dG9tQGZvb2Jhci5xlLmNvbQ": null
      }
    }
  }
}, "0" ]]
</pre><a href="#section-5.8.1-12" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sending-invitations-and-responses">
<section id="section-5.8.2">
          <h4 id="name-sending-invitations-and-res">
<a href="#section-5.8.2" class="section-number selfRef">5.8.2. </a><a href="#name-sending-invitations-and-res" class="section-name selfRef">Sending invitations and responses</a>
          </h4>
<p id="section-5.8.2-1">If "sendSchedulingMessages" is true, the server MUST send appropriate iTIP <span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span> scheduling messages after successfuly creating, updating or destroying a calendar event.<a href="#section-5.8.2-1" class="pilcrow">¶</a></p>
<p id="section-5.8.2-2">When determining which scheduling messages to send, the server must first establish whether it is the <em>source</em> of the event. The server is the source if it will receive messages sent to any of the methods specified in the "replyTo" property of the event.<a href="#section-5.8.2-2" class="pilcrow">¶</a></p>
<p id="section-5.8.2-3">Messages are only sent to participants with a "scheduleAgent" property set to "server" or omitted. If the effective "scheduleAgent" property is changed:<a href="#section-5.8.2-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8.2-4.1">to "server" from something else: send messages to this participant as though
the event had just been created.<a href="#section-5.8.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.8.2-4.2">from "server" to something else: send messages to this participant as though
the event had just been destroyed.<a href="#section-5.8.2-4.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.8.2-4.3">any other change: do not send any messages to this participant.<a href="#section-5.8.2-4.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-5.8.2-5">The server may send the scheduling message via any of the methods defined on the sendTo property of a participant (if the server is the source) or the replyTo property of the event (otherwise) that it supports. If no supported methods are available, the server MUST reject the change with a <code>noSupportedScheduleMethods</code> SetError.<a href="#section-5.8.2-5" class="pilcrow">¶</a></p>
<p id="section-5.8.2-6">If the server is the source of the event it MUST NOT send messages to any participant corresponding to a ParticipantIdentitity in that account (see Section XXX).<a href="#section-5.8.2-6" class="pilcrow">¶</a></p>
<p id="section-5.8.2-7">If sending via iMIP <span>[<a href="#RFC6047" class="xref">RFC6047</a>]</span>, the server MAY choose to only send updates it deems "essential" to avoid flooding the recipient's email with changes they do not care about. For example, changes to the participationStatus of another participant, or changes to events solely in the past may be omitted.<a href="#section-5.8.2-7" class="pilcrow">¶</a></p>
<div id="request">
<section id="section-5.8.2.1">
            <h5 id="name-request">
<a href="#section-5.8.2.1" class="section-number selfRef">5.8.2.1. </a><a href="#name-request" class="section-name selfRef">REQUEST</a>
            </h5>
<p id="section-5.8.2.1-1">When the server is the source for the event, a REQUEST message (<span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span>, Section 3.2.2) is sent to all current participants if either:<a href="#section-5.8.2.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8.2.1-2.1">The event is being created; or<a href="#section-5.8.2.1-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-5.8.2.1-2.2">Any non per-user property (see Section XXX) is updated on the event
(including adding/removing participants), except if just modifying the recurrenceOverrides such that CANCEL messages are generated (see the next section).<a href="#section-5.8.2.1-2.2" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-5.8.2.1-3">Note, if the only change is adding an additional instance (not generated by the event's recurrence rule) to the recurrenceOverrides, this MAY be handled via sending an ADD message (<span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span>, Section 3.2.4) for the single instance rather than a REQUEST message for the base event. However, for interoperability reasons this is not recommended due to poor support in the wild for this type of message.<a href="#section-5.8.2.1-3" class="pilcrow">¶</a></p>
<p id="section-5.8.2.1-4">The server MUST ensure participants are only sent information about recurrence instances they are added to when sending scheduling messages for recurring events. If the participant is not invited to the full recurring event but only individual instances, scheduling messages MUST be sent for just those expanded occurrences individually. If a participant is invited to a recurring event, but removed via a recurrence override from a particular instance, any scheduling messages to this participant MUST return the instance as "excluded" (if it matches a recurrence rule for the event) or omit the instance entirely (otherwise).<a href="#section-5.8.2.1-4" class="pilcrow">¶</a></p>
<p id="section-5.8.2.1-5">If the event's "hideAttendees" property is set to <code>true</code>, the recipient MUST be the only attendee in the message; all others are omitted.<a href="#section-5.8.2.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="cancel">
<section id="section-5.8.2.2">
            <h5 id="name-cancel">
<a href="#section-5.8.2.2" class="section-number selfRef">5.8.2.2. </a><a href="#name-cancel" class="section-name selfRef">CANCEL</a>
            </h5>
<p id="section-5.8.2.2-1">When the server is the source for the event, a CANCEL message (<span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span>, Section 3.2.5) is sent if any of:<a href="#section-5.8.2.2-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8.2.2-2.1">A participant is removed from either the base event or a single instance
(the message is only sent to this participant; remaining participants will get a REQUEST, as described above).<a href="#section-5.8.2.2-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-5.8.2.2-2.2">The event is destroyed.<a href="#section-5.8.2.2-2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-5.8.2.2-2.3">An exclusion is added to recurrenceOverrides to remove an instance generated
by the event's recurrence rule.<a href="#section-5.8.2.2-2.3" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-5.8.2.2-2.4">An additional instance (not generated by the event's recurrence rule) is
removed from the recurrenceOverrides.<a href="#section-5.8.2.2-2.4" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-5.8.2.2-3">In each of the latter 3 cases, the message is sent to all participants.<a href="#section-5.8.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="reply">
<section id="section-5.8.2.3">
            <h5 id="name-reply">
<a href="#section-5.8.2.3" class="section-number selfRef">5.8.2.3. </a><a href="#name-reply" class="section-name selfRef">REPLY</a>
            </h5>
<p id="section-5.8.2.3-1">When the server is <em>not</em> the source for the event, a REPLY message (<span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span>, Section 3.2.3) is sent for every participant corresponding to one of the user's ParticipantIdentitities in the account if any of the following changes are made:<a href="#section-5.8.2.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.8.2.3-2.1">The "participationStatus" property of the participant is changed, either for
the base event or a specific instance, to any value other than "needs-action".<a href="#section-5.8.2.3-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-5.8.2.3-2.2">The event is created and the participationStatus is not "needs-action".<a href="#section-5.8.2.3-2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-5.8.2.3-2.3">The event is destroyed and the participationStatus was not "needs-action".<a href="#section-5.8.2.3-2.3" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-5.8.2.3-3">If the participationStatus property is changed for just a single instance of the event (i.e., set in recurrenceOverrides), the REPLY message SHOULD be sent for just that recurrence id.<a href="#section-5.8.2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="calendarevent-copy">
<section id="section-5.9">
        <h3 id="name-calendarevent-copy">
<a href="#section-5.9" class="section-number selfRef">5.9. </a><a href="#name-calendarevent-copy" class="section-name selfRef">CalendarEvent/copy</a>
        </h3>
<p id="section-5.9-1">This is a standard "/copy" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.4.<a href="#section-5.9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendarevent-query">
<section id="section-5.10">
        <h3 id="name-calendarevent-query">
<a href="#section-5.10" class="section-number selfRef">5.10. </a><a href="#name-calendarevent-query" class="section-name selfRef">CalendarEvent/query</a>
        </h3>
<p id="section-5.10-1">This is a standard "/query" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.5, with two extra arguments:<a href="#section-5.10-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.10-2.1">
            <strong>expandRecurrences</strong>: <code>Boolean</code> (default: false)
If true, the server will expand any recurring event. If true, the filter MUST be just a FilterCondition (not a FilterOperator) and MUST include both a before and after property. This ensures the server is not asked to return an infinite number of results.<a href="#section-5.10-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.10-2.2">
            <strong>timeZone</strong>: <code>String</code>
The time zone for before/after filter conditions (default: "Etc/UTC")<a href="#section-5.10-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.10-3">If expandRecurrences is true, a separate id will be returned for each instance of a recurring event that matches the query. This synthetic id is opaque to the client, but allows the server to resolve the id + recurrence id for "/get" and "/set" operations. Otherwise, a single id will be returned for matching recurring events that represents the entire event.<a href="#section-5.10-3" class="pilcrow">¶</a></p>
<p id="section-5.10-4">There is no necessary correspondence between the ids of different instances of the same expanded event.<a href="#section-5.10-4" class="pilcrow">¶</a></p>
<p id="section-5.10-5">The following additional error may be returned instead of the "CalendarEvent/query" response:<a href="#section-5.10-5" class="pilcrow">¶</a></p>
<p id="section-5.10-6"><code>cannotCalculateOccurrences</code>: the server cannot expand a recurrence required to return the results for this query.<a href="#section-5.10-6" class="pilcrow">¶</a></p>
<div id="filtering">
<section id="section-5.10.1">
          <h4 id="name-filtering">
<a href="#section-5.10.1" class="section-number selfRef">5.10.1. </a><a href="#name-filtering" class="section-name selfRef">Filtering</a>
          </h4>
<p id="section-5.10.1-1">A <strong>FilterCondition</strong> object has the following properties:<a href="#section-5.10.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.10.1-2.1">
              <strong>inCalendars</strong>: <code>Id[]|null</code>
A list of calendar ids. An event must be in ANY of these calendars to match the condition.<a href="#section-5.10.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.2">
              <strong>after</strong>: <code>LocalDate|null</code>
The end of the event, or any recurrence of the event, in the time zone given as the timeZone argument, must be after this date to match the condition.<a href="#section-5.10.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.3">
              <strong>before</strong>: <code>LocalDate|null</code>
The start of the event, or any recurrence of the event, in the time zone given as the timeZone argument, must be before this date to match the condition.<a href="#section-5.10.1-2.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.4">
              <strong>text</strong>: <code>String|null</code>
Looks for the text in the <em>title</em>, <em>description</em>, <em>locations</em> (matching name/description), <em>participants</em> (matching name/email) and any other textual properties of the event or any recurrence of the event.<a href="#section-5.10.1-2.4" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.5">
              <strong>title</strong>: <code>String|null</code>
Looks for the text in the <em>title</em> property of the event, or the overridden <em>title</em> property of a recurrence.<a href="#section-5.10.1-2.5" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.6">
              <strong>description</strong>: <code>String|null</code>
Looks for the text in the <em>description</em> property of the event, or the overridden <em>description</em> property of a recurrence.<a href="#section-5.10.1-2.6" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.7">
              <strong>location</strong>: <code>String|null</code>
Looks for the text in the <em>locations</em> property of the event (matching name/description of a location), or the overridden <em>locations</em> property of a recurrence.<a href="#section-5.10.1-2.7" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.8">
              <strong>owner</strong>: <code>String|null</code>
Looks for the text in the name or email fields of a participant in the <em>participants</em> property of the event, or the overridden <em>participants</em> property of a recurrence, where the participant has a role of "owner".<a href="#section-5.10.1-2.8" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.9">
              <strong>attendee</strong>: <code>String|null</code>
Looks for the text in the name or email fields of a participant in the <em>participants</em> property of the event, or the overridden <em>participants</em> property of a recurrence, where the participant has a role of "attendee".<a href="#section-5.10.1-2.9" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.10">
              <strong>participationStatus</strong>: Must match. If owner/attendee condition, status must
be of that participant. Otherwise any.<a href="#section-5.10.1-2.10" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-2.11">
              <strong>uid</strong>: <code>String</code>
The uid of the event is exactly the given string.<a href="#section-5.10.1-2.11" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-5.10.1-3">If expandRecurrences is true, all conditions must match against the same instance of a recurring event for the instance to match. If expandRecurrences is false, all conditions must match, but they may each match any instance of the event.<a href="#section-5.10.1-3" class="pilcrow">¶</a></p>
<p id="section-5.10.1-4">If zero properties are specified on the FilterCondition, the condition MUST always evaluate to <code>true</code>. If multiple properties are specified, ALL must apply for the condition to be <code>true</code> (it is equivalent to splitting the object into one-property conditions and making them all the child of an AND filter operator).<a href="#section-5.10.1-4" class="pilcrow">¶</a></p>
<p id="section-5.10.1-5">The exact semantics for matching <code>String</code> fields is <strong>deliberately not defined</strong> to allow for flexibility in indexing implementation, subject to the following:<a href="#section-5.10.1-5" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.10.1-6.1">Text SHOULD be matched in a case-insensitive manner.<a href="#section-5.10.1-6.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-6.2">Text contained in either (but matched) single or double quotes SHOULD be treated as a <strong>phrase search</strong>, that is a match is required for that exact sequence of words, excluding the surrounding quotation marks. Use <code>\"</code>, <code>\'</code> and <code>\\</code> to match a literal <code>"</code>, <code>'</code> and <code>\</code> respectively in a phrase.<a href="#section-5.10.1-6.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-6.3">Outside of a phrase, white-space SHOULD be treated as dividing separate tokens that may be searched for separately in the event, but MUST all be present for the event to match the filter.<a href="#section-5.10.1-6.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.1-6.4">Tokens MAY be matched on a whole-word basis using stemming (so for example a text search for <code>bus</code> would match "buses" but not "business").<a href="#section-5.10.1-6.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="sorting">
<section id="section-5.10.2">
          <h4 id="name-sorting">
<a href="#section-5.10.2" class="section-number selfRef">5.10.2. </a><a href="#name-sorting" class="section-name selfRef">Sorting</a>
          </h4>
<p id="section-5.10.2-1">The following properties MUST be supported for sorting:<a href="#section-5.10.2-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.10.2-2.1">start<a href="#section-5.10.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.2-2.2">uid<a href="#section-5.10.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.2-2.3">recurrenceId<a href="#section-5.10.2-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-5.10.2-3">The following properties SHOULD be supported for sorting:<a href="#section-5.10.2-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.10.2-4.1">created<a href="#section-5.10.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-5.10.2-4.2">updated<a href="#section-5.10.2-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="calendarevent-querychanges">
<section id="section-5.11">
        <h3 id="name-calendarevent-querychanges">
<a href="#section-5.11" class="section-number selfRef">5.11. </a><a href="#name-calendarevent-querychanges" class="section-name selfRef">CalendarEvent/queryChanges</a>
        </h3>
<p id="section-5.11-1">This is a standard "/queryChanges" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.6.<a href="#section-5.11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="examples">
<section id="section-5.12">
        <h3 id="name-examples">
<a href="#section-5.12" class="section-number selfRef">5.12. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
        </h3>
<p id="section-5.12-1">TODO: Add example of how to get event by uid: query uid=foo and backref. Return multiple with recurrenceId set (user invited to specific instances of recurring event).<a href="#section-5.12-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="alerts">
<section id="section-6">
      <h2 id="name-alerts">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-alerts" class="section-name selfRef">Alerts</a>
      </h2>
<p id="section-6-1">Alerts may be specified on events as described in <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span>, Section 4.5.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Alerts MUST only be triggered for events in calendars where the user is subscribed and either the user owns the calendar or the calendar account's "shareesActAs" capability is "self".<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">When an alert with an "email" action is triggered, the server MUST send an email to the user to notify them of the event. The contents of the email is implementation specific. Clients MUST NOT perform an action for these alerts.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">When an alert with a "display" action is triggered, clients SHOULD display an alert in a platform-appropriate manner to the user to remind them of the event. Clients with a full offline cache of events may choose to calculate when alerts should trigger locally. Alternatively, they can subscribe to push events from the server.<a href="#section-6-4" class="pilcrow">¶</a></p>
<div id="default-alerts">
<section id="section-6.1">
        <h3 id="name-default-alerts">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-default-alerts" class="section-name selfRef">Default alerts</a>
        </h3>
<p id="section-6.1-1">If the "useDefaultAlerts" property of an event is true, the alerts are taken from the "defaultAlertsWithTime" or "defaultAlertsWithoutTime" property of all Calendars the event is in, as described in Section XXX, rather than the "alerts" property of the CalendarEvent.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">When using default alerts, the "alerts" property of the event is ignored except for the following:<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-6.1-3.1">The "acknowledged" time for an alert is stored here when a default alert for
the event is dismissed. The id of the alert MUST be the same as the id of the default alert in the calendar. See Section XXX on acknowledging alerts.<a href="#section-6.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.1-3.2">If an alert has a relatedTo property where the parent is the id of one of
the calendar default alerts, it is processed as normal and not ignored. This is to support snoozing default alerts; see Section XXX.<a href="#section-6.1-3.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="acknowledging-an-alert">
<section id="section-6.2">
        <h3 id="name-acknowledging-an-alert">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-acknowledging-an-alert" class="section-name selfRef">Acknowledging an alert</a>
        </h3>
<p id="section-6.2-1">To dismiss an alert, clients set the "acknowledged" property of the Alert object to the current date-time. If the alert was a calendar default, it may need to be added to the event at this point in order to acknowledge it. When other clients fetch the updated CalendarEvent they SHOULD automatically dismiss or suppress duplicate alerts (alerts with the same alert id that triggered on or before the "acknowledged" date-time) and alerts that have been removed from the event.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">Setting the "acknowledged" property MUST NOT create a new recurrence override. For a recurring calendar object, the "acknowledged" property of the parent object MUST be updated, unless the alert is already overridden in the "recurrenceOverrides" property.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="snoozing-an-alert">
<section id="section-6.3">
        <h3 id="name-snoozing-an-alert">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-snoozing-an-alert" class="section-name selfRef">Snoozing an alert</a>
        </h3>
<p id="section-6.3-1">Users may wish to dismiss an alert temporarily and have it come back after a specific period of time. To do this, clients MUST:<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-6.3-2">
<li id="section-6.3-2.1">Acknowledge the alert as described in Section XXX.<a href="#section-6.3-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-6.3-2.2">Add a new alert to the event with an <code>AbsoluteTrigger</code> for the date-time the
alert has been snoozed until. Add a "relatedTo" property to the new alert, setting the "parent" relation to point to the original alert. This MUST NOT create a new recurrence override; it is added to the same "alerts" property that contains the alert that was acknowledged in step 1.<a href="#section-6.3-2.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-6.3-3">When acknowledging a snoozed alert (i.e. one with a parent relatedTo pointing to the original alert), the client SHOULD delete the alert rather than setting the "acknowledged" property.<a href="#section-6.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="push-events">
<section id="section-6.4">
        <h3 id="name-push-events">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-push-events" class="section-name selfRef">Push events</a>
        </h3>
<p id="section-6.4-1">Servers that support the <code>urn:ietf:params:jmap:calendars</code> capability MUST support registering for the pseudo-type "CalendarAlert" in push subscriptions and event source connections, as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Sections 7.2 and 7.3.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4-2">If requested, a CalendarAlert notification will be pushed whenever an alert is triggered for the user. For Event Source connections, this notification is pushed as an event called "calendarAlert".<a href="#section-6.4-2" class="pilcrow">¶</a></p>
<p id="section-6.4-3">A <strong>CalendarAlert</strong> object has the following properties:<a href="#section-6.4-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-6.4-4.1">
            <strong>@type</strong>: <code>String</code>
This MUST be the string "CalendarAlert".<a href="#section-6.4-4.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.4-4.2">
            <strong>accountId</strong>: <code>String</code>
The account id for the calendar in which the alert triggered.<a href="#section-6.4-4.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.4-4.3">
            <strong>calendarEventId</strong>: <code>String</code>
The CalendarEvent id for the alert that triggered.<a href="#section-6.4-4.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.4-4.4">
            <strong>uid</strong>: <code>String</code>
The uid property of the CalendarEvent for the alert that triggered.<a href="#section-6.4-4.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.4-4.5">
            <strong>recurrenceId</strong>: <code>String|null</code>
The recurrenceId for the instance of the event for which this alert is being
triggered, or <code>null</code> if the event is not recurring.<a href="#section-6.4-4.5" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-6.4-4.6">
            <strong>alertId</strong>: <code>String</code>
The id for the alert that triggered.<a href="#section-6.4-4.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="calendar-event-notifications">
<section id="section-7">
      <h2 id="name-calendar-event-notification">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-calendar-event-notification" class="section-name selfRef">Calendar Event Notifications</a>
      </h2>
<p id="section-7-1">The CalendarEventNotification data type records changes made by external entities to events in calendars the user is subscribed to. Notifications are stored in the same Account as the CalendarEvent that was changed.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Notifications are only created by the server; users cannot create them directly. Clients SHOULD present the list of notifications to the user and allow them to dismiss them. To dismiss a notification you use a standard "/set" call to destroy it.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">The server SHOULD create a CalendarEventNotification whenever an event is added, updated or destroyed by another user or due to receiving an iTIP <span>[<a href="#RFC5546" class="xref">RFC5546</a>]</span> or other scheduling message in a calendar this user is subscribed to. The server SHOULD NOT create notifications for events implicitly deleted due to the containing calendar being deleted.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">The CalendarEventNotification does not have any per-user data. A single instance may therefore be maintained on the server for all sharees of the notification. The server need only keep track of which users have yet to destroy the notification.<a href="#section-7-4" class="pilcrow">¶</a></p>
<div id="auto-deletion-of-notifications">
<section id="section-7.1">
        <h3 id="name-auto-deletion-of-notificati">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-auto-deletion-of-notificati" class="section-name selfRef">Auto-deletion of Notifications</a>
        </h3>
<p id="section-7.1-1">The server MAY limit the maximum number of notifications it will store for a user. When the limit is reached, any new notification will cause the previously oldest notification to be automatically deleted.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">The server MAY coalesce events if appropriate, or remove events that it deems are no longer relevant or after a certain period of time. The server SHOULD automatically destroy a notification about an event if the user updates or destroys that event (e.g. if the user sends an RSVP for the event).<a href="#section-7.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="object-properties">
<section id="section-7.2">
        <h3 id="name-object-properties">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-object-properties" class="section-name selfRef">Object Properties</a>
        </h3>
<p id="section-7.2-1">The <strong>CalendarEventNotification</strong> object has the following properties:<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2-2.1">
            <strong>id</strong>: <code>String</code>
The id of the CalendarEventNotification.<a href="#section-7.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-2.2">
            <strong>created</strong>: <code>UTCDate</code>
The time this notification was created.<a href="#section-7.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-2.3">
            <p id="section-7.2-2.3.1"><strong>changedBy</strong>: <code>Person</code>
Who made the change.<a href="#section-7.2-2.3.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2-2.3.2.1">
                <strong>name</strong>: <code>String</code>
The name of the person who made the change.<a href="#section-7.2-2.3.2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-7.2-2.3.2.2">
                <strong>email</strong>: <code>String</code>
The email of the person who made the change, or null if no email is available.<a href="#section-7.2-2.3.2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-7.2-2.3.2.3">
                <strong>principalId</strong>: <code>String|null</code>
The id of the calendar principal corresponding to the person who made the change, if any. This will be null if the change was due to receving an iTIP message.<a href="#section-7.2-2.3.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="compact" id="section-7.2-2.4">
            <strong>comment</strong>: <code>String|null</code>
Comment sent along with the change by the user that made it. (e.g. COMMENT
property in an iTIP message).<a href="#section-7.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-2.5">
            <p id="section-7.2-2.5.1"><strong>type</strong>: <code>String</code>
This MUST be one of<a href="#section-7.2-2.5.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2-2.5.2.1">created<a href="#section-7.2-2.5.2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-7.2-2.5.2.2">updated<a href="#section-7.2-2.5.2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-7.2-2.5.2.3">destroyed<a href="#section-7.2-2.5.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="compact" id="section-7.2-2.6">
            <strong>calendarEventId</strong>: <code>String</code>
The id of the CalendarEvent that this notification is about.<a href="#section-7.2-2.6" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-2.7">
            <strong>isDraft</strong>: <code>Boolean</code> (created/updated only)
Is this event a draft?<a href="#section-7.2-2.7" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-2.8">
            <strong>event</strong>: <code>JSEvent</code>
The data before the change (if updated or destroyed), or the data
after creation (if created).<a href="#section-7.2-2.8" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-2.9">
            <strong>eventPatch</strong>: <code>PatchObject</code> (updated only)
A patch encoding the change between the data in the event property, and the
data after the update.<a href="#section-7.2-2.9" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-7.2-3">To reduce data, if the change only affects a single instance of a recurring event, the server MAY set the event and eventPatch properties for the instance; the calendarEventId MUST still be for the base event.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendareventnotification-get">
<section id="section-7.3">
        <h3 id="name-calendareventnotification-g">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-calendareventnotification-g" class="section-name selfRef">CalendarEventNotification/get</a>
        </h3>
<p id="section-7.3-1">This is a standard "/get" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.1.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendareventnotification-changes">
<section id="section-7.4">
        <h3 id="name-calendareventnotification-c">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-calendareventnotification-c" class="section-name selfRef">CalendarEventNotification/changes</a>
        </h3>
<p id="section-7.4-1">This is a standard "/changes" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.2.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendareventnotification-set">
<section id="section-7.5">
        <h3 id="name-calendareventnotification-s">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-calendareventnotification-s" class="section-name selfRef">CalendarEventNotification/set</a>
        </h3>
<p id="section-7.5-1">This is a standard "/changes" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.3.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<p id="section-7.5-2">Only destroy is supported; any attempt to create/update MUST be rejected with a
<code>forbidden</code> SetError.<a href="#section-7.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendareventnotification-query">
<section id="section-7.6">
        <h3 id="name-calendareventnotification-q">
<a href="#section-7.6" class="section-number selfRef">7.6. </a><a href="#name-calendareventnotification-q" class="section-name selfRef">CalendarEventNotification/query</a>
        </h3>
<p id="section-7.6-1">This is a standard "/query" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.5.<a href="#section-7.6-1" class="pilcrow">¶</a></p>
<div id="filtering-1">
<section id="section-7.6.1">
          <h4 id="name-filtering-2">
<a href="#section-7.6.1" class="section-number selfRef">7.6.1. </a><a href="#name-filtering-2" class="section-name selfRef">Filtering</a>
          </h4>
<p id="section-7.6.1-1">A <strong>FilterCondition</strong> object has the following properties:<a href="#section-7.6.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.6.1-2.1">
              <strong>after</strong>: <code>UTCDate|null</code>
The creation date must be on or after this date to match the condition.<a href="#section-7.6.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-7.6.1-2.2">
              <strong>before</strong>: <code>UTCDate|null</code>
The creation date must be before this date to match the condition.<a href="#section-7.6.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-7.6.1-2.3">
              <strong>type</strong>: <code>String</code>
The type property must be the same to match the condition.<a href="#section-7.6.1-2.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-7.6.1-2.4">
              <strong>calendarEventIds</strong>: <code>Id[]|null</code>
A list of event ids. The calendarEventId property of the notification must be in this list to match the condition.<a href="#section-7.6.1-2.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="sorting-1">
<section id="section-7.6.2">
          <h4 id="name-sorting-2">
<a href="#section-7.6.2" class="section-number selfRef">7.6.2. </a><a href="#name-sorting-2" class="section-name selfRef">Sorting</a>
          </h4>
<p id="section-7.6.2-1">The "created" property MUST be supported for sorting.<a href="#section-7.6.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="calendareventnotification-querychanges">
<section id="section-7.7">
        <h3 id="name-calendareventnotification-qu">
<a href="#section-7.7" class="section-number selfRef">7.7. </a><a href="#name-calendareventnotification-qu" class="section-name selfRef">CalendarEventNotification/queryChanges</a>
        </h3>
<p id="section-7.7-1">This is a standard "/queryChanges" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.6.<a href="#section-7.7-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="calendarpreferences">
<section id="section-8">
      <h2 id="name-calendarpreferences">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-calendarpreferences" class="section-name selfRef">CalendarPreferences</a>
      </h2>
<p id="section-8-1">A CalendarPreferences object stores information about the principal's preferences and defaults.<a href="#section-8-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-2.1">
          <strong>id</strong>: <code>Id</code> (immutable; server-set)
The id of the object. There is only ever one CalendarPreferences object, and its id is <code>"singleton"</code>.<a href="#section-8-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-8-2.2">
          <p id="section-8-2.2.1"><strong>defaultCalendarId</strong>: <code>Id|null</code>
The id of the principal's default calendar. If set, clients should default to
this calendar when creating new events in this account, unless overridden by a local preference. When the principal is invited to an event, this is the calendar to which it will be added by the server.<a href="#section-8-2.2.1" class="pilcrow">¶</a></p>
<p id="section-8-2.2.2">If <code>null</code>, no default is defined and clients/servers may choose any calendar.<a href="#section-8-2.2.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-2.3">
          <p id="section-8-2.3.1"><strong>defaultParticipantIdentityId</strong>: <code>Id|null</code>
The default participant identity to use for the principal when adding participants to an event. If set, when the user adds an invitee to an event without an owner, the client should use this participant identity to add the principal as an owner participant of the event.<a href="#section-8-2.3.1" class="pilcrow">¶</a></p>
<p id="section-8-2.3.2">If <code>null</code>, no default is defined and clients/servers may choose any participant identity.<a href="#section-8-2.3.2" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-8-3">The following JMAP methods are supported.<a href="#section-8-3" class="pilcrow">¶</a></p>
<div id="calendarpreferences-get">
<section id="section-8.1">
        <h3 id="name-calendarpreferences-get">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-calendarpreferences-get" class="section-name selfRef">CalendarPreferences/get</a>
        </h3>
<p id="section-8.1-1">This is a standard "/get" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.1.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">There MUST only be exactly one CalendarPreferences object in an account. It MUST have the id "singleton".<a href="#section-8.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendarpreferences-set">
<section id="section-8.2">
        <h3 id="name-calendarpreferences-set">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-calendarpreferences-set" class="section-name selfRef">CalendarPreferences/set</a>
        </h3>
<p id="section-8.2-1">This is a standard "/set" method as described in <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span>, Section 5.3. There is always exactly one CalendarPreferences object in an account; it cannot be created or destroyed, only updated.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">All security considerations of JMAP <span>[<a href="#RFC8620" class="xref">RFC8620</a>]</span> and JSCalendar <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span> apply to this specification. Additional considerations specific to the data types and functionality introduced by this document are described in the following subsections.<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="privacy">
<section id="section-9.1">
        <h3 id="name-privacy">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-privacy" class="section-name selfRef">Privacy</a>
        </h3>
<p id="section-9.1-1">Calendars often contain the precise movements, activities, and contacts of people, and is therefore intensely private data. Privacy leaks can have real world consequences, and calendar servers and clients MUST be mindful of the need to keep all data secure.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">Servers MUST enforce the ACLs set on calendars to ensure only authorised data is shared. The additional restrictions specified by the "privacy" property of a JSEvent object (see <span>[<a href="#RFC8984" class="xref">RFC8984</a>]</span> Section 4.4.3) MUST also be enforced.<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3">Users may have multiple Participant Identities that they use for areas of their life kept private from one another. Using one identity with an event MUST NOT leak the existence of any other identity. For example, sending an RSVP from identity worklife@example.com MUST NOT reveal anything about another identity present in the account such as privatelife@example.org.<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<p id="section-9.1-4">Severs SHOULD enforce that invitations sent to external systems are only transmitted via secure encrypted and signed connections to protect against eavesdropping and modification of data.<a href="#section-9.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="spoofing">
<section id="section-9.2">
        <h3 id="name-spoofing">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-spoofing" class="section-name selfRef">Spoofing</a>
        </h3>
<p id="section-9.2-1">When receiving events and updates from external systems, it can be hard to verify that the identity of the author is who they claim to be. When receiving events via email, DKIM <span>[<a href="#RFC6376" class="xref">RFC6376</a>]</span> and S/MIME <span>[<a href="#RFC8551" class="xref">RFC8551</a>]</span> are two mechanisms that may be used to verify certain properties about the email data, which can be correlated with the event information.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="denial-of-service">
<section id="section-9.3">
        <h3 id="name-denial-of-service">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-denial-of-service" class="section-name selfRef">Denial-of-service</a>
        </h3>
<p id="section-9.3-1">There are many ways in which a calendar user can make a request liable to cause a calendar server to spend an inordinate amount of processing time. Care must be taken to limit resources allocated to any one user to ensure the system does not become unresponsive. The following subsections list particularly hazardous areas.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<div id="expanding-recurrences">
<section id="section-9.3.1">
          <h4 id="name-expanding-recurrences">
<a href="#section-9.3.1" class="section-number selfRef">9.3.1. </a><a href="#name-expanding-recurrences" class="section-name selfRef">Expanding Recurrences</a>
          </h4>
<p id="section-9.3.1-1">Recurrence rules can be crafted to occur as frequently as every second. Servers MUST be careful to not allow resources to be exhausted when expanding, and limit the number of expansions they will create. Equally, rules can be generated that never create any occurrences at all. Servers MUST be careful to limit the work spent iterating in search of the next occurrence.<a href="#section-9.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="firing-alerts">
<section id="section-9.3.2">
          <h4 id="name-firing-alerts">
<a href="#section-9.3.2" class="section-number selfRef">9.3.2. </a><a href="#name-firing-alerts" class="section-name selfRef">Firing alerts</a>
          </h4>
<p id="section-9.3.2-1">An alert firing for an event can cause a notification to be pused to the user's devices, or to send them an email. Servers MUST rate limit the number of alerts sent for any one user. The combination of recurring events with multiple alerts can in particular define unreasonably frequent alerts, leading to denial of service for either the server processing them or the user's devices receiving them.<a href="#section-9.3.2-1" class="pilcrow">¶</a></p>
<p id="section-9.3.2-2">Similarly, clients generating alerts from the data on device must take the same precautions.<a href="#section-9.3.2-2" class="pilcrow">¶</a></p>
<p id="section-9.3.2-3">The "email" alert type (see RFC8984, Section 4.5.2) causes an email to be sent when triggered. Clients MUST ignore this alert type; the email is sent only be the calendar server. There is no mechanism in JSCalendar to specify a particular email address: the server MUST only allow alerts to be sent to an address it has verified as belonging to the user to avoid this being used as a spamming vector.<a href="#section-9.3.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="load-spikes">
<section id="section-9.3.3">
          <h4 id="name-load-spikes">
<a href="#section-9.3.3" class="section-number selfRef">9.3.3. </a><a href="#name-load-spikes" class="section-name selfRef">Load spikes</a>
          </h4>
<p id="section-9.3.3-1">Since most events are likely to start on the hour mark, a large spike of activity is often seen at these times, with particularly large spikes at certain common times in the time zone of the server's user base. In particular, a large number of alerts (across different users and events) will be triggered at the same time. Servers may mitigate this somewhat by adding jitter to the triggering of the alerts; it is RECOMMENDED to fire them slightly early rather than slightly late if needed to spread load.<a href="#section-9.3.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="spam">
<section id="section-9.4">
        <h3 id="name-spam">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-spam" class="section-name selfRef">Spam</a>
        </h3>
<p id="section-9.4-1">Invitations received from an untrusted source may be spam. If this is added to the user's calendar automatically it can be very obtrusive, especially if it is a recurring event that now appears every day. Incoming invitations to events should be subject to spam scanning, and suspicious events should not be added to the calendar automatically.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
<p id="section-9.4-2">Servers should strip any alerts on invitations when adding to the user's calendar; the useDefaultAlerts property should be set instead to apply the user's preferences.<a href="#section-9.4-2" class="pilcrow">¶</a></p>
<p id="section-9.4-3">Similarly, a malicious user may use a calendar system to send spam by inviting people to an event. Outbound iTIP should be subject to all the same controls used on outbound email systems, and rate limited as appropriate. A rate limit on the number of distinct recipients as well as overall messages is recommended.<a href="#section-9.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="jmap-capability-registration-for-calendars">
<section id="section-10.1">
        <h3 id="name-jmap-capability-registratio">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-jmap-capability-registratio" class="section-name selfRef">JMAP Capability Registration for "calendars"</a>
        </h3>
<p id="section-10.1-1">IANA will register the "calendars" JMAP Capability as follows:<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">Capability Name: <code>urn:ietf:params:jmap:calendars</code><a href="#section-10.1-2" class="pilcrow">¶</a></p>
<p id="section-10.1-3">Specification document: this document<a href="#section-10.1-3" class="pilcrow">¶</a></p>
<p id="section-10.1-4">Intended use: common<a href="#section-10.1-4" class="pilcrow">¶</a></p>
<p id="section-10.1-5">Change Controller: IETF<a href="#section-10.1-5" class="pilcrow">¶</a></p>
<p id="section-10.1-6">Security and privacy considerations: this document, Section XXX<a href="#section-10.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="jmap-capability-registration-for-calendars-preferences">
<section id="section-10.2">
        <h3 id="name-jmap-capability-registration">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-jmap-capability-registration" class="section-name selfRef">JMAP Capability Registration for "calendars:preferences"</a>
        </h3>
<p id="section-10.2-1">IANA will register the "calendars:preferences" JMAP Capability as follows:<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">Capability Name: <code>urn:ietf:params:jmap:calendars:preferences</code><a href="#section-10.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2-3">Specification document: this document<a href="#section-10.2-3" class="pilcrow">¶</a></p>
<p id="section-10.2-4">Intended use: common<a href="#section-10.2-4" class="pilcrow">¶</a></p>
<p id="section-10.2-5">Change Controller: IETF<a href="#section-10.2-5" class="pilcrow">¶</a></p>
<p id="section-10.2-6">Security and privacy considerations: this document, Section XXX<a href="#section-10.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="jmap-capability-registration-for-principals-availability">
<section id="section-10.3">
        <h3 id="name-jmap-capability-registration-">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-jmap-capability-registration-" class="section-name selfRef">JMAP Capability Registration for "principals:availability"</a>
        </h3>
<p id="section-10.3-1">IANA will register the "principals:availability" JMAP Capability as follows:<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<p id="section-10.3-2">Capability Name: <code>urn:ietf:params:jmap:principals:availability</code><a href="#section-10.3-2" class="pilcrow">¶</a></p>
<p id="section-10.3-3">Specification document: this document<a href="#section-10.3-3" class="pilcrow">¶</a></p>
<p id="section-10.3-4">Intended use: common<a href="#section-10.3-4" class="pilcrow">¶</a></p>
<p id="section-10.3-5">Change Controller: IETF<a href="#section-10.3-5" class="pilcrow">¶</a></p>
<p id="section-10.3-6">Security and privacy considerations: this document, Section XXX<a href="#section-10.3-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="jscalendar-property-registrations">
<section id="section-10.4">
        <h3 id="name-jscalendar-property-registr">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-jscalendar-property-registr" class="section-name selfRef">JSCalendar Property Registrations</a>
        </h3>
<p id="section-10.4-1">IANA will register the following additional properties in the JSCalendar Properties Registry.<a href="#section-10.4-1" class="pilcrow">¶</a></p>
<div id="id">
<section id="section-10.4.1">
          <h4 id="name-id">
<a href="#section-10.4.1" class="section-number selfRef">10.4.1. </a><a href="#name-id" class="section-name selfRef">id</a>
          </h4>
<p id="section-10.4.1-1">Property Name: id<a href="#section-10.4.1-1" class="pilcrow">¶</a></p>
<p id="section-10.4.1-2">Property Type: <code>Id</code><a href="#section-10.4.1-2" class="pilcrow">¶</a></p>
<p id="section-10.4.1-3">Property Context: JSEvent, JSTask<a href="#section-10.4.1-3" class="pilcrow">¶</a></p>
<p id="section-10.4.1-4">Intended Use: Reserved<a href="#section-10.4.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="calendarids">
<section id="section-10.4.2">
          <h4 id="name-calendarids">
<a href="#section-10.4.2" class="section-number selfRef">10.4.2. </a><a href="#name-calendarids" class="section-name selfRef">calendarIds</a>
          </h4>
<p id="section-10.4.2-1">Property Name: calendarIds<a href="#section-10.4.2-1" class="pilcrow">¶</a></p>
<p id="section-10.4.2-2">Property Type: <code>Id[Boolean]</code><a href="#section-10.4.2-2" class="pilcrow">¶</a></p>
<p id="section-10.4.2-3">Property Context: JSEvent, JSTask<a href="#section-10.4.2-3" class="pilcrow">¶</a></p>
<p id="section-10.4.2-4">Intended Use: Reserved<a href="#section-10.4.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="isdraft">
<section id="section-10.4.3">
          <h4 id="name-isdraft">
<a href="#section-10.4.3" class="section-number selfRef">10.4.3. </a><a href="#name-isdraft" class="section-name selfRef">isDraft</a>
          </h4>
<p id="section-10.4.3-1">Property Name: isDraft<a href="#section-10.4.3-1" class="pilcrow">¶</a></p>
<p id="section-10.4.3-2">Property Type: <code>Boolean</code><a href="#section-10.4.3-2" class="pilcrow">¶</a></p>
<p id="section-10.4.3-3">Property Context: JSEvent, JSTask<a href="#section-10.4.3-3" class="pilcrow">¶</a></p>
<p id="section-10.4.3-4">Intended Use: Reserved<a href="#section-10.4.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="utcstart">
<section id="section-10.4.4">
          <h4 id="name-utcstart">
<a href="#section-10.4.4" class="section-number selfRef">10.4.4. </a><a href="#name-utcstart" class="section-name selfRef">utcStart</a>
          </h4>
<p id="section-10.4.4-1">Property Name: utcStart<a href="#section-10.4.4-1" class="pilcrow">¶</a></p>
<p id="section-10.4.4-2">Property Type: <code>UTCDateTime</code><a href="#section-10.4.4-2" class="pilcrow">¶</a></p>
<p id="section-10.4.4-3">Property Context: JSEvent, JSTask<a href="#section-10.4.4-3" class="pilcrow">¶</a></p>
<p id="section-10.4.4-4">Intended Use: Reserved<a href="#section-10.4.4-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="utcend">
<section id="section-10.4.5">
          <h4 id="name-utcend">
<a href="#section-10.4.5" class="section-number selfRef">10.4.5. </a><a href="#name-utcend" class="section-name selfRef">utcEnd</a>
          </h4>
<p id="section-10.4.5-1">Property Name: utcEnd<a href="#section-10.4.5-1" class="pilcrow">¶</a></p>
<p id="section-10.4.5-2">Property Type: <code>UTCDateTime</code><a href="#section-10.4.5-2" class="pilcrow">¶</a></p>
<p id="section-10.4.5-3">Property Context: JSEvent, JSTask<a href="#section-10.4.5-3" class="pilcrow">¶</a></p>
<p id="section-10.4.5-4">Intended Use: Reserved<a href="#section-10.4.5-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mayinviteself-1">
<section id="section-10.4.6">
          <h4 id="name-mayinviteself-2">
<a href="#section-10.4.6" class="section-number selfRef">10.4.6. </a><a href="#name-mayinviteself-2" class="section-name selfRef">mayInviteSelf</a>
          </h4>
<p id="section-10.4.6-1">Property Name: mayInviteSelf<a href="#section-10.4.6-1" class="pilcrow">¶</a></p>
<p id="section-10.4.6-2">Property Type: <code>Boolean</code> (default: false)<a href="#section-10.4.6-2" class="pilcrow">¶</a></p>
<p id="section-10.4.6-3">Property Context: JSEvent, JSTask<a href="#section-10.4.6-3" class="pilcrow">¶</a></p>
<p id="section-10.4.6-4">Reference: This document, Section XXX.<a href="#section-10.4.6-4" class="pilcrow">¶</a></p>
<p id="section-10.4.6-5">Intended Use: Common<a href="#section-10.4.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mayinviteothers-1">
<section id="section-10.4.7">
          <h4 id="name-mayinviteothers-2">
<a href="#section-10.4.7" class="section-number selfRef">10.4.7. </a><a href="#name-mayinviteothers-2" class="section-name selfRef">mayInviteOthers</a>
          </h4>
<p id="section-10.4.7-1">Property Name: mayInviteOthers<a href="#section-10.4.7-1" class="pilcrow">¶</a></p>
<p id="section-10.4.7-2">Property Type: <code>Boolean</code> (default: false)<a href="#section-10.4.7-2" class="pilcrow">¶</a></p>
<p id="section-10.4.7-3">Property Context: JSEvent, JSTask<a href="#section-10.4.7-3" class="pilcrow">¶</a></p>
<p id="section-10.4.7-4">Reference: This document, Section XXX.<a href="#section-10.4.7-4" class="pilcrow">¶</a></p>
<p id="section-10.4.7-5">Intended Use: Common<a href="#section-10.4.7-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="hideattendees-1">
<section id="section-10.4.8">
          <h4 id="name-hideattendees-2">
<a href="#section-10.4.8" class="section-number selfRef">10.4.8. </a><a href="#name-hideattendees-2" class="section-name selfRef">hideAttendees</a>
          </h4>
<p id="section-10.4.8-1">Property Name: hideAttendees<a href="#section-10.4.8-1" class="pilcrow">¶</a></p>
<p id="section-10.4.8-2">Property Type: <code>Boolean</code> (default: false)<a href="#section-10.4.8-2" class="pilcrow">¶</a></p>
<p id="section-10.4.8-3">Property Context: JSEvent, JSTask<a href="#section-10.4.8-3" class="pilcrow">¶</a></p>
<p id="section-10.4.8-4">Reference: This document, Section XXX.<a href="#section-10.4.8-4" class="pilcrow">¶</a></p>
<p id="section-10.4.8-5">Intended Use: Common<a href="#section-10.4.8-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-11">
      <h2 id="name-normative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2397">[RFC2397]</dt>
      <dd>
<span class="refAuthor">Masinter, L.</span>, <span class="refTitle">"The "data" URL scheme"</span>, <span class="seriesInfo">RFC 2397</span>, <span class="seriesInfo">DOI 10.17487/RFC2397</span>, <time datetime="1998-08" class="refDate">August 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2397">https://www.rfc-editor.org/info/rfc2397</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6376">[RFC6376]</dt>
      <dd>
<span class="refAuthor">Crocker, D., Ed.</span>, <span class="refAuthor">Hansen, T., Ed.</span>, and <span class="refAuthor">M. Kucherawy, Ed.</span>, <span class="refTitle">"DomainKeys Identified Mail (DKIM) Signatures"</span>, <span class="seriesInfo">STD 76</span>, <span class="seriesInfo">RFC 6376</span>, <span class="seriesInfo">DOI 10.17487/RFC6376</span>, <time datetime="2011-09" class="refDate">September 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6376">https://www.rfc-editor.org/info/rfc6376</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8551">[RFC8551]</dt>
      <dd>
<span class="refAuthor">Schaad, J.</span>, <span class="refAuthor">Ramsdell, B.</span>, and <span class="refAuthor">S. Turner</span>, <span class="refTitle">"Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 4.0 Message Specification"</span>, <span class="seriesInfo">RFC 8551</span>, <span class="seriesInfo">DOI 10.17487/RFC8551</span>, <time datetime="2019-04" class="refDate">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8551">https://www.rfc-editor.org/info/rfc8551</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8620">[RFC8620]</dt>
      <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"The JSON Meta Application Protocol (JMAP)"</span>, <span class="seriesInfo">RFC 8620</span>, <span class="seriesInfo">DOI 10.17487/RFC8620</span>, <time datetime="2019-07" class="refDate">July 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8620">https://www.rfc-editor.org/info/rfc8620</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8984">[RFC8984]</dt>
    <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">R. Stepanek</span>, <span class="refTitle">"JSCalendar: A JSON Representation of Calendar Data"</span>, <span class="seriesInfo">RFC 8984</span>, <span class="seriesInfo">DOI 10.17487/RFC8984</span>, <time datetime="2021-07" class="refDate">July 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8984">https://www.rfc-editor.org/info/rfc8984</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12">
      <h2 id="name-informative-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC4791">[RFC4791]</dt>
      <dd>
<span class="refAuthor">Daboo, C.</span>, <span class="refAuthor">Desruisseaux, B.</span>, and <span class="refAuthor">L. Dusseault</span>, <span class="refTitle">"Calendaring Extensions to WebDAV (CalDAV)"</span>, <span class="seriesInfo">RFC 4791</span>, <span class="seriesInfo">DOI 10.17487/RFC4791</span>, <time datetime="2007-03" class="refDate">March 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4791">https://www.rfc-editor.org/info/rfc4791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5546">[RFC5546]</dt>
      <dd>
<span class="refAuthor">Daboo, C., Ed.</span>, <span class="refTitle">"iCalendar Transport-Independent Interoperability Protocol (iTIP)"</span>, <span class="seriesInfo">RFC 5546</span>, <span class="seriesInfo">DOI 10.17487/RFC5546</span>, <time datetime="2009-12" class="refDate">December 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5546">https://www.rfc-editor.org/info/rfc5546</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6047">[RFC6047]</dt>
    <dd>
<span class="refAuthor">Melnikov, A., Ed.</span>, <span class="refTitle">"iCalendar Message-Based Interoperability Protocol (iMIP)"</span>, <span class="seriesInfo">RFC 6047</span>, <span class="seriesInfo">DOI 10.17487/RFC6047</span>, <time datetime="2010-12" class="refDate">December 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6047">https://www.rfc-editor.org/info/rfc6047</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Neil Jenkins (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Fastmail</span></div>
<div dir="auto" class="left"><span class="street-address">PO Box 234, Collins St West</span></div>
<div dir="auto" class="left">
<span class="locality">Melbourne</span>  <span class="postal-code">VIC 8007</span>
</div>
<div dir="auto" class="left"><span class="country-name">Australia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:neilj@fastmailteam.com" class="email">neilj@fastmailteam.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://www.fastmail.com" class="url">https://www.fastmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Michael Douglass (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Spherical Cow Group</span></div>
<div dir="auto" class="left"><span class="street-address">226 3rd Street</span></div>
<div dir="auto" class="left">
<span class="locality">Troy</span>,  <span class="postal-code">NY 12180</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mdouglass@sphericalcowgroup.com" class="email">mdouglass@sphericalcowgroup.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="http://sphericalcowgroup.com" class="url">http://sphericalcowgroup.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
