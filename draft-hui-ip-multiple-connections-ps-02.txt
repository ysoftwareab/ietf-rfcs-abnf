Internet Area                                                   M.Hui 
Internet Draft                                                 H.Deng 
Intended status: Informational                              China Mobile 
Expires: September 9, 2009                                 March 9, 2009 
                                   
 
                                      
     Problem Statement and Requirement of Simple IP Multi-homing of the 
                                   Host 
                  draft-hui-ip-multiple-connections-ps-02 


Status of this Memo 

   This Internet-Draft is submitted to IETF in full conformance with the 
   provisions of BCP 78 and BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on August 27, 2009. 

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. 
 
 
Hui & Deng            Expires September 9, 2009               [Page 1] 

Internet-Draft         IP Multiple Connections              March 2009 
    

   
Abstract 

   This document discusses current issues with simple IP multi-homing. 
   In order to have deep understanding of the issue, the document also 
   analyzes related works in IETF.  In the end gives the requirements of 
   the simple IP multi-homing in concern of technical implements. Simple 
   IP multi-homing focuses on simultaneous multiple IP connections of 
   the host. 

Table of Contents 

    
   1. Introduction................................................3 
   2. Problem statements of Simple IP Multi-homing.................4 
      2.1. Default Gateway.........................................4 
      2.2. Merging of parameters...................................4 
      2.3. Source address selection for IPv4.......................5 
   3. Analysis of Related Work in IETF.............................6 
      3.1. Multi6.................................................6 
      3.2. Shim6..................................................6 
      3.3. Monami6................................................7 
      3.4. Netlmm.................................................7 
   4. Requirements for Simple IP Multi-homing......................9 
   5. Security Considerations.....................................10 
   6. IANA Considerations........................................11 
   7. References.................................................12 
      7.1. Normative References...................................12 
      7.2. Informative References.................................12 
   Author's Addresses............................................13 
   Intellectual Property Statement....................               
   Disclaimer of Validity............................               
    






 
 
Hui&Deng              Expires September 9, 2009               [Page 2] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

          1. Introduction 

   Simple IP Multi-homing means the host connects to more than one 
   physical network through different network interfaces, and assigns 
   different network flows to each interface, and ensure all the 
   interfaces can deliver the flow simultaneously. 

   Simple IP Multi-homing is a necessary part of daily life, i.e., you 
   have to connect to your company office network through VPN connection 
   by your Ethernet interface, at the same time you want to watch the 
   stock market, which is not allowed through office network. And you 
   have a GPRS card, so you would like to use ethernet and GPRS at the 
   same time. 

   Current the operating systems only allow one default network 
   connection. If there are multiple connections of the host, all the 
   flows will go to the default gateway based on RFC1122 description. 
   One default gateway guarantees the host always has one entry to the 
   network, but lead to the multiple connections be difficult. The most 
   convenient way to make the host work under several networks at the 
   same time is to add specific static route in the host route table, so 
   that certain flow can use the assigned interface while others use the 
   default one, but it is not easy for the ordinary users to handle it. 





















 
 
Hui&Deng              Expires September 9, 2009               [Page 3] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

          2. Problem statements of Simple IP Multi-homing  

   As description above, simple IP multi-homing can not work based on 
   the current specification. There are several reasons cause it invalid, 
   and this section analyzes them in detail. 

             2.1. Default Gateway 

   The Windows operating system in the host follows the default gateway 
   mechanism, which will choose the unify gateway among more than one 
   default routes ('0.0.0.0'), the detail is described in RFC1122. The 
   default gateway guarantees there always has a route to network when 
   the host can not find a specific route for a datagram in the route 
   table. 

   But when it comes to multi-homing, the default gateway also causes 
   all the flows go out through one interface, although there has more 
   than one network connections.  Nowadays there are diverse networks 
   can be chosen by the user, and the terminal have the capability and 
   interfaces to connect to more than one networks at the same time. It 
   is possible and necessary for the user to require connecting to 
   different networks to ensure the best user experiences of different 
   services, but the default gateway mechanism only allows one 
   connection at once. Although you can connect your host to several 
   networks physically, and each network has already assigned a IP 
   address for your host interface, even you can see different default 
   routes in the route table, all the flow goes to the default gateway 
   chosen by the operation system other than different gateways actually. 

         2.2. Merging of parameters 

   In multiple interfaces host, each interface will get its own IP 
   parameters in the procedure of IP address allocation all other policy 
   deployment, such as DNS, metrics of routings, TOS. How to merge the 
   same type of parameters derived form multiple interfaces to act 
   harmoniously in the host is the problem presented in multiple 
   interfaces host. 

         2.2.1. DNS consideration 

   DNS will be configured to the interface manually or by DHCP procedure, 
   and multiple interfaces will obtain multiple DNS. The host will 
   reserve several DNS in this situation. Referring to different domain 
   names the host should query proper DNS so that the domain names can 
   be resolved. The problem is current DNS selection mechanism is lack 
 
 
Hui&Deng              Expires September 9, 2009               [Page 4] 

Internet-Draft         IP Multiple Connections              March 2009 
    

   to choose a right one for specific visited domain name, so that we 
   need to merge multiple DNS to provide the host with the best 
   connectivity. 

         2.2.2. Metrics consideration 

   Metrics are used to measure the performance of routings, the lower 
   metric it owns, the higher priority it has. For example, the default 
   gateway is chosen based on the metric rule as RFC1122 description, 
   The one have the lowest metric value becomes to the default gateway 
   among several connected gateways, and the interface correspond to 
   this gateway turns to be the default interface.  

   Metric rules are different depending on the access technology and 
   routing protocol, if the multiple interfaces connect to multiple 
   access networks which have different measurements of metrics, the 
   metric will not reflect the routing performances correctly. For 
   example, current metric rules define the 100M bps Ethernet network 
   card to be 20 and 10M bps to be 30, but the CDMA data card set its 
   metric value as 1, although its speed is lower than 100M bps Ethernet 
   network card. The merging of metrics is necessary in multiple 
   interfaces condition. 

         2.2.3. TOS consideration 

   TOS can be a parameter of routing item to indicate which kind of IP 
   data is suitable to deliver by this routing. The multiple interfaces 
   will connect to multiple access networks, so that the preference of 
   TOS need to be merged to have a better performance of data delivery. 
   For example, the WiFi access could indicate itself has broader 
   bandwidth comparing with 2G access, and set the TOS as broad 
   bandwidth. When another interface connects the Ethernet, the TOS is 
   also set as broad bandwidth preferred. In this situation, it needs 
   some mechanism to merge and reorder the TOS getting form multiple 
   interfaces. 

         2.3. Source address selection for IPv4 

   For the host has more than one IP addresses which are obtained by 
   multiple interfaces, the source address selection is the key issue in 
   order to use multiple interfaces reasonably. The application needs to 
   select right source address so that the data will be delivered by the 
   corresponding interface. This mechanism is lack currently which needs 
   to be solved in multiple interfaces situation. 

    

 
 
Hui&Deng              Expires September 9, 2009               [Page 5] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

          3. Analysis of Related Work in IETF 

   Multi-homing is a wide topic contains different aspects, and there 
   are some work groups in IETF worked on a certain aspect of multi-
   homing. 

   This section explains their work, and compares the covered field with 
   the simple IP multi-homing.  In the end we will find the simple IP 
   multi-homing is still a problem which is not solved yet. 

             3.1. Multi6 

   Multi6 WG in IETF focuses on the multi-homed site, which has more 
   than one connection to the public internet with those connections 
   through either the same or different ISPs.  The reasons to choose 
   site multi-homing are to improve fault tolerance, perform load 
   balancing, etc. 

   The Multi6 WG mainly focuses on site multi-homing solutions that tend 
   to minimize adverse impacts on the end-to-end routing system and 
   limit the number of prefixes that need to be advertised in the 
   Default-Free Zone (DFZ).  The background is site multi-homing today 
   is done largely by having a site obtain a dedicated block of address 
   space and then advertising a route for its prefix through each of its 
   ISP connections.  A site's ISPs in turn advertise the prefix to some 
   or all of their upstream connections and the route for the prefix may 
   propagate to all of the routers connected to the default-free zone. 
   As the number of sites multi-homing in this manner increase, the 
   number of routes propagated throughout the DFZ increases and overall 
   routing stability decreases because of the burden on convergence time. 

   Multi6 WG tries to solve this by defining a set of goals for IPv6 
   site multi-homing architecture, and analyzing the current limitations 
   and the approaches to the site multi-homing.  What's need to notice 
   is that the working group is not chartered to make significant 
   changes to the nature of IP addresses or to inter-domain routing. 
   Obviously, the site multi-homing does not consider the host multiple 
   connection which is the key problem of this document. 

             3.2. Shim6 

   Shim6 is another WG in IETF aims at site multi-homing.  Shim6 work is 
   based on the architecture developed by the Multi6 WG, and completes 
   the required protocol developments and the architecture and security 
   analysis of the required protocols.  Different form Multi6, Shim6 
 
 
Hui&Deng              Expires September 9, 2009               [Page 6] 

Internet-Draft         IP Multiple Connections              March 2009 
    

   focuses on surviving hosts on the multi-homing site from the changes 
   or for creating new associations, when one or more of the site's 
   address prefixes becomes unreachable. 

   Shim6 WG produces specifications for an IPv6-based site multi-homing 
   solution that inserts a new sub-layer (shim) into the IP stack of 
   end-system hosts.  It enables hosts on multi-homed sites to use a set 
   of provider-assigned IP address prefixes and switch between them 
   without upsetting transport protocols or applications.  But it can 
   not support connecting to all the ISPs simultaneously. 

             3.3. Monami6 

   The objective of the Monami6 WG is to produce a clear problem 
   statement and to produce standard track specifications to the 
   straight-forward problems associated with the simultaneous use of 
   multiple addresses for either mobile hosts using Mobile IPv6 or 
   mobile routers using NEMO Basic Support and their variants (FMIPv6, 
   HMIPv6,etc). 

   The WG does not define a tunnel selection mechanism, but document how 
   to use existing mechanisms based upon preferences or policies.  They 
   explain the limitations for mobile hosts using multiple simultaneous 
   Care-of Addresses and Home Agent addresses using Mobile IPv6, whether 
   issues are specific to Mobile IPv6 or not.  They also deliver a 
   protocol extension to Mobile IPv6 (RFC 3775) and NEMO Basic Support 
   (RFC 3963) to support the registration of multiple Care-of Addresses 
   at a given Home Agent address [Standard Track].  What's more, Monami6 
   WG makes a "Flow/binding policies exchange" solution for an exchange 
   of policies from the mobile host/router to the Home Agent and from 
   the Home Agent to the mobile host/router influencing the choice of 
   the Care-of Address and Home Agent address. 

   Monami6 focus the same field with simple IP multi-homing, which is 
   ensuring simultaneous use of multiple addresses for the host.  The 
   difference is Monami6 puts this aim to under a certain condition, the 
   mobile host using MIP6, while the simple IP multi-homing focuses on 
   ordinary host using IPv4/6. 

             3.4. Netlmm 

   Netlmm WG studies Proxy Mobile IPv6 (PMIPv6) which supports multiple 
   interfaces binding, by maintaining multiple binding cache entries for 
   a given MN. The scenario concerned by PMIPv6 is each interfaces gets 
   different prefix form others, however, there are many other scenarios 
   associated with multiple interface attachment are not covered. The 
   specific scenario needs specific solutions which require some 
 
 
Hui&Deng              Expires September 9, 2009               [Page 7] 

Internet-Draft         IP Multiple Connections              March 2009 
    

   enhancement/modification to the current PMIPv6 protocol, and the 
   simple IP multi-homing hasn't supported in the PMIPv6 environment as 
   well. 

   What's more, the multi-homing in PMIPv6 lacks flow filtering support. 
   The LMA must has filter rules to allocate certain flow to traverse 
   via a certain care-of address, but the mechanism in PMIPv6 is 
   currently not supported. 






































 
 
Hui&Deng              Expires September 9, 2009               [Page 8] 

Internet-Draft         IP Multiple Connections              March 2009 
    

          4. Requirements for Simple IP Multi-homing 

   Based on problem statements and related work analysis, the 
   requirements for simple IP multi-homing is concluded and listed as 
   follows: 

   1) The host with multiple network interfaces should be capable to 
   connect with different networks simultaneously. 

   2) The default gateway mechanism needs to be improved to support 
   several gateways working at the same time. 

   3) New metric mechanism must be defined to adapt to various network 
   cards nowadays. 

   4) The policies to assign different flows to the appropriate 
   interface are required, and how to apply the policies to the host 
   need to be considered as well. 

   5 Network side should be capable of distributing the IP flow 
   according to some parameters, such as IP address prefix, network type 
   and so on. 
























 
 
Hui&Deng              Expires September 9, 2009               [Page 9] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

          5. Security Considerations 

   This document doesn't propose any new protocol. 









































 
 
Hui&Deng              Expires September 9, 2009              [Page 10] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

          6. IANA Considerations 

   This document doesn't require any new number from IANA. 









































 
 
Hui&Deng              Expires September 9, 2009              [Page 11] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

          7. References 

             7.1. Normative References 

   [RFC1122]  Braden, R., "Requirements for Internet Hosts-communication 
              Layers", STD 3, RFC 1122, October 1989. 

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate 
              Requirement Levels", BCP 14, RFC 2119, March 1997. 

   [RFC3582]  Abley, J., Black, B., and V. Gill, "Goals for IPv6 Site-
              Multihoming Architectures", RFC 3582, August 2003. 

   [RFC3775]  Johnson, D., Perkins, C., and J. Arkko, "Mobility Support 
              in IPv6", RFC 3775, June 2004. 

   [RFC4177]  Huston, G., "Architectural Approaches to Multi-homing for 
              IPv6", RFC 4177, September 2005. 

   [RFC4191]  R. Draves, D. Thaler, "Default Router Preferences and 
              More-Specific Routes", RFC 4191, November 2005. 

   [RFC5213]  S. Gundavelli, Ed., K. Leung, ''Proxy Mobile IPv6'', RFC5213, 
              August 2008  

             7.2. Informative References 

   [MONAMI6] Ernst, T., "Motivations and Scenarios for Using Multiple 
             Interfaces and global Addresses", May 2008, <draft-ietf-
             monami6-multihoming-motivation-scenario-03(work in 
             progress)>. 

   [NETLMM]  M. Jeyatharan, C. Ng, J. Hirano, "Multiple Interfaced 
             Mobile Nodes in NetlMM", June 2008, <draft-jeyatharan-
             netlmm-multi-interface-ps-02(work in progress)>. 









 
 
Hui&Deng              Expires September 9, 2009              [Page 12] 

Internet-Draft         IP Multiple Connections              March 2009 
    

    

Author's Addresses 

   Min Hui 
   China Mobile 
   53A,Xibianmennei Ave., 
   Xuanwu District, 
   Beijing 100053 
   China 
   Email: huimin.cmcc@gmail.com 
    

   Hui Deng 
   China Mobile 
   53A,Xibianmennei Ave., 
   Xuanwu District, 
   Beijing 100053 
   China 
   Email: denghui02@gmail.com 
    
 
























 
 
Hui&Deng              Expires September 9, 2009              [Page 13] 

