

IETF conneg working group                                 Graham Klyne
Internet draft                                5GM/Content Technologies
Category: Work-in-progress                            15 February 1999
                                                  Expires: August 1999


              Indicating media features for MIME content
             <draft-ietf-conneg-content-features-00.txt>


Status of this memo

  This document is an Internet-Draft and is in full conformance with
  all provisions of Section 10 of RFC 2026.

  Internet-Drafts are working documents of the Internet Engineering
  Task Force (IETF), its areas, and its working groups.  Note that
  other groups may also distribute working documents as Internet-
  Drafts.

  Internet-Drafts are draft documents valid for a maximum of six
  months and may be updated, replaced, or obsoleted by other
  documents at any time.  It is inappropriate to use Internet- Drafts
  as reference material or to cite them other than as "work in
  progress."

  To view the list Internet-Draft Shadow Directories, see
  http://www.ietf.org/shadow.html.

Copyright Notice

  Copyright (C) The Internet Society 1999.  All Rights Reserved.

Abstract

  In "A syntax for describing media feature sets", an expression
  format is presented for describing media feature capabilities using
  simple media feature tags.

  This memo defines a MIME 'Content-features:' header that can be
  used to annotate a MIME message part using this expression format,
  and indicates some ways it might be used.










Klyne                      Work-in-progress                   [Page 1]

Internet draft              Indicating media features for MIME content
15 February 1999



Table of contents

  1. Introduction ............................................2
     1.1 Terminology and document conventions                 3
  2. Motivation and goals ....................................3
  3. The 'Content-features:' MIME header .....................4
     3.1 Usage considerations                                 4
       3.1.1 Simple message parts                             4
       3.1.2 Multipart and other composites                   4
       3.1.3 Reference to external data                       5
  4. Examples ................................................5
     4.1 Simple message                                       5
     4.2 Fax message                                          6
     4.3 Reference to external message data                   6
     4.4 Compressed data                                      6
  5. Security considerations .................................7
  6. Full copyright statement ................................7
  7. Acknowledgements ........................................8
  8. References ..............................................8
  9. Author's address ........................................9
  Appendix A: Revision history ...............................9


1. Introduction

  In "A syntax for describing media feature sets" [1], an expression
  format is presented for describing media feature capabilities as a
  combination of simple media feature tags, registered according to
  "Media Feature Tag Registration Procedure" [2].  This provides a
  format for message handling agents to describe the media feature
  content of messages that they can handle.

  This memo defines a MIME 'Content-features:' header that can be
  used to annotate a MIME message part using these feature
  expressions.  This header provides a means to indicate media-
  related features of message content that go beyond the MIME content
  type.

  Along with the new MIME header definition, consideration is also
  given to how it may be used to present message media content
  information that is problematic to express within the basic MIME
  framework.









Klyne                      Work-in-progress                   [Page 2]

Internet draft              Indicating media features for MIME content
15 February 1999


1.1 Terminology and document conventions

  This section defines a number of terms and other document
  conventions, which are used with specific meaning in this memo.
  The terms are listed in alphabetical order.

  feature set
            some set of media features described by a media feature
            assertion, as described in "A syntax for describing media
            feature sets" [1].  (See that memo for a more formal
            definition of this term.)

  feature set expression
            a string that describes some feature set, formulated
            according to the rules in "A syntax for describing media
            feature sets" [1] (and possibly extended by other
            specifications).

  media feature
            information that indicates facilities assumed to be
            available for the message content to be properly rendered
            or otherwise presented.  Media features are not intended
            to include information that affects message transmission.

  This specification uses syntax notation and conventions described
  in RFC 2234 "Augmented BNF for Syntax Specifications: ABNF" [3].

       NOTE:  Comments like this provide additional nonessential
       information about the rationale behind this document.
       Such information is not needed for building a conformant
       implementation, but may help those who wish to understand
       the design in greater depth.

2. Motivation and goals

  It is envisaged that media feature labelling of message parts may
  be used in the following ways:

  o  to supply more detailed media feature about a message content
     than can be provided by the 'Content-type:' header.

  o  to provide summary media feature information (possibly including
     MIME content types) about the content of a composite MIME message
     part (e.g. 'multipart' or 'message'), without having to open up
     the inner content of the message.

  o  to supply media feature information about external data
     referenced by a message part (e.g. 'message/external-body' MIME
     type).  This information would not be available by examination of
     the message content.


Klyne                      Work-in-progress                   [Page 3]

Internet draft              Indicating media features for MIME content
15 February 1999


  o  to describe the content of a message that is encrypted or encoded
     using some application-specific file structure that hides the
     content from a MIME processor.  This information also would not
     be generally available by examination of the message content.

  [[[I am assuming that a new feature tag will be registered to carry
  MIME content-type information in a media feature expression]]].

3. The 'Content-features:' MIME header

  A new header field is defined that extends the allowable formats
  for 'optional-field' [4] with the following syntax:

     optional-field =/ "Content-features" ":" Feature-expr
     Feature-expr   =  filter      ; See [1], section 4.1

  where 'filter' is the media feature expression format defined by "A
  syntax for describing media feature sets" [1].

  This header provides additional information about the message
  content directly contained or indirectly referenced in the
  corresponding MIME message part.

3.1 Usage considerations

3.1.1 Simple message parts

  When applied to a simple MIME message part, the header should
  appear just once and is used to convey additional information about
  the message part content that goes beyond that provided by the MIME
  'Content-type:' header field.The 'Content-features:' header may
  suggest a content type that is different than that given by the
  MIME 'Content-type:' header.  This is possible but not recommended:
  In such cases, MIME content type processing must be performed in
  accordance with the MIME 'Content-type:' header.

       NOTE:  Once the message content has been delivered to an
       application, it is possible that subsequent processing
       may be affected by content type information indicated by
       the media feature expression.

3.1.2 Multipart and other composites

  'Content-features:' headers may be applied to a MIME multipart
  indicating information about the inner content of the multipart.
  No one-to-one relationship between headers and contained body parts
  is assumed.





Klyne                      Work-in-progress                   [Page 4]

Internet draft              Indicating media features for MIME content
15 February 1999


  If it is important to relate specific media features to specific
  MIME body parts, then the 'Content-features:' header should be
  applied directly to the body part concerned, rather than the
  surrounding composite.

       NOTE:  The intent here is to allow summary media feature
       information to be provided without having to open up and
       examine the inner content of the MIME message.

  Similar usage may apply when the message format is a non-MIME or
  opaque composite;  e.g. 'application/zip', or an encrypted message.
  In these cases, the option of examining the message content to
  discover media feature information is not available.

3.1.3 Reference to external data

  Media feature information about data indirectly referenced by a
  MIME body part rather than contained within message can be conveyed
  using one or more 'Content-features:' headers.

  For example, media information --including MIME content type(s)--
  about the data referenced by a MIME 'Message/external-body' may be
  conveyed.

4. Examples

4.1 Simple message

     Mime-Version: 1.0
     Content-type: text/plain
     Content-features:
       (& (paper-size=A4)
          (ua-media=stationery) )

      :
     (data)
      :















Klyne                      Work-in-progress                   [Page 5]

Internet draft              Indicating media features for MIME content
15 February 1999


4.2 Fax message

     Mime-Version: 1.0
     Content-type: multipart/fax-message;boundary=break
     Content-features:
       (& (Type=image/tiff)
          (color=Binary)
          (image-file-structure=TIFF-S)
          (dpi=200)
          (dpi-xyratio=[200/100,200/200])
          (paper-size=A4)
          (image-coding=MH) (MRC-mode=0)
          (ua-media=stationery) )

     --break
     Content-Type: image/tiff; fax-coverpage=yes;name="coverpage.tiff"
     Content-Transfer-Encoding: base64
     Content-Description: This part is a coverpage
     Content-Disposition: attachment; filename="coverpage.tiff"

     0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAAB
     AAAAAQAAAAAAAAAAEAAAZAAAAAEAAAD+////AAAAAAAAAAD/////////////
      :
     (more data)
      :
     --break
     Content-Type: image/tiff; name="document.tiff"
     Content-Transfer-Encoding: base64
     Content-Disposition: attachment; filename="document.tiff"

     AAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgA
     AAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAA
      :
     (more data)
      :
     --break--

4.3 Reference to external message data

  [[[TODO]]]

4.4 Compressed data

  [[[TODO]]]








Klyne                      Work-in-progress                   [Page 6]

Internet draft              Indicating media features for MIME content
15 February 1999


5. Security considerations

  When applied to simple or multipart MIME formatted data, a media
  feature expression provides summary information about the message
  data, which in many cases can be determined by examination of the
  message content.  Under these circumstances, no additional security
  considerations appear to be raised.

  When applied to other message composites, especially encrypted
  message content, feature expressions may disclose information that
  is otherwise unavailable.  In these cases, some security
  considerations associated with media content negotiation [1,2] may
  have greater relevance.

  It is suggested here that media feature descriptions may be
  usefully employed with encrypted message content.  In doing this,
  take care to ensure that the purpose of encryption is not
  compromised.

6. Full copyright statement

  Copyright (C) The Internet Society 1999.  All Rights Reserved.

  This document and translations of it may be copied and furnished to
  others, and derivative works that comment on or otherwise explain
  it or assist in its implementation may be prepared, copied,
  published and distributed, in whole or in part, without restriction
  of any kind, provided that the above copyright notice and this
  paragraph are included on all such copies and derivative works.
  However, this document itself may not be modified in any way, such
  as by removing the copyright notice or references to the Internet
  Society or other Internet organizations, except as needed for the
  purpose of developing Internet standards in which case the
  procedures for copyrights defined in the Internet Standards process
  must be followed, or as required to translate it into languages
  other than English.

  The limited permissions granted above are perpetual and will not be
  revoked by the Internet Society or its successors or assigns.

  This document and the information contained herein is provided on
  an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET
  ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
  THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
  WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.






Klyne                      Work-in-progress                   [Page 7]

Internet draft              Indicating media features for MIME content
15 February 1999


7. Acknowledgements

  This proposal draws from discussions with Dan Wing.  The fax
  message example was taken from a proposal by Mike Ruhl.

8. References

[1]  "A syntax for describing media feature sets"
     Graham Klyne, 5GM/Content Technologies
     Internet draft: <draft-ietf-conneg-feature-syntax-00.txt>"
     Work in progress, September 1998.

[2]  "Media Feature Tag Registration Procedure"
     Koen Holtman, TUE
     Andrew Mutz, Hewlett-Packard
     Ted Hardie, NASA
     Internet draft: <draft-ietf-conneg-feature-reg-03.txt>
     Work in progress, July 1998.

[3]  RFC 2234, "Augmented BNF for Syntax Specifications: ABNF"
     D. Crocker (editor), Internet Mail Consortium
     P. Overell, Demon Internet Ltd.
     November 1997.

[4]  RFC 822, "Standard for the format of ARPA Internet text messages"
     D. Crocker, Department of Electrical Engineering, University of
     Delaware
     August 1982.

     To be replaced by:
     "Internet Message Format Standard"
     P. Resnick (editor), QUALCOMM Incorporated
     Internet draft: <draft-ietf-drums-msg-fmt-07.txt>
     Work in progress, January 1999.

[5]  RFC 2045, "Multipurpose Internet Mail Extensions (MIME)
     Part 1: Format of Internet message bodies"
     N. Freed, Innosoft
     N. Borenstein, First Virtual
     November 1996.

[6]  RFC 2046, "Multipurpose Internet Mail Extensions (MIME)
     Part 2: Media types"
     N. Freed, Innosoft
     N. Borenstein, First Virtual
     November 1996.






Klyne                      Work-in-progress                   [Page 8]

Internet draft              Indicating media features for MIME content
15 February 1999


9. Author's address

  Graham Klyne
  5th Generation Messaging Ltd.    Content Technologies Ltd.
  5 Watlington Street              Forum 1, Station Road
  Nettlebed                        Theale
  Henley-on-Thames, RG9 5AB        Reading, RG7 4RA
  United Kingdom                   United Kingdom.
  Telephone: +44 1491 641 641      +44 118 930 1300
  Facsimile: +44 1491 641 611      +44 118 930 1301
  E-mail: GK@ACM.ORG



Appendix A: Revision history

  00a  10-Feb-1999  Initial draft.



  TODO:

  o  Complete examples





























Klyne                      Work-in-progress                   [Page 9]

