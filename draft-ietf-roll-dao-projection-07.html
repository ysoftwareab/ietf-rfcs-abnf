<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Root initiated routing state in RPL</title>
<meta content="Pascal Thubert" name="author">
<meta content="Rahul Arvind Jadhav" name="author">
<meta content="Matthew Gillmore" name="author">
<meta content="
       This document proposes a protocol extension to RPL that enables to install a limited amount of centrally-computed routes in a RPL graph, enabling loose source routing down a non-storing mode DODAG, or transversal routes inside the DODAG.  As opposed to the classical route injection in RPL that are injected by the end devices, this draft enables the Root of the DODAG to projects the routes that are needed on the nodes where they should be installed.   
    " name="description">
<meta content="xml2rfc 2.34.0" name="generator">
<meta content="draft-ietf-roll-dao-projection-07" name="ietf.draft">
<link href="/tmp/draft-ietf-roll-dao-projection-07-vbsdid.xml" type="application/rfc+xml" rel="alternate">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
</style>
<link href="rfc-local.css" type="text/css" rel="stylesheet">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">DAO Projection</td>
<td class="right">November 2019</td>
</tr></thead>
<tfoot><tr>
<td class="left">Thubert, et al.</td>
<td class="center">Expires 6 May 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">ROLL</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc6550" class="eref">6550</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2019-11-03" class="published">3 November 2019</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-05-06">6 May 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">P. Thubert, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">R.A. Jadhav</div>
<div class="org">Huawei Tech</div>
</div>
<div class="author">
      <div class="author-name">M. Gillmore</div>
<div class="org">Itron</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Root initiated routing state in RPL</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document proposes a protocol extension to RPL that enables to install a limited amount of centrally-computed routes in a RPL graph, enabling loose source routing down a non-storing mode DODAG, or transversal routes inside the DODAG.  As opposed to the classical route injection in RPL that are injected by the end devices, this draft enables the Root of the DODAG to projects the routes that are needed on the nodes where they should be installed.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 6 May 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-boilerplate.3">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.1">
            <p id="section-boilerplate.3-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-boilerplate.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.2">
            <p id="section-boilerplate.3-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-boilerplate.3-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.1">
                <p id="section-boilerplate.3-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-bcp-14" class="xref">BCP 14</a><a href="#section-boilerplate.3-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.2">
                <p id="section-boilerplate.3-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-subset-of-a-6lowpan-glossar" class="xref">Subset of a 6LoWPAN Glossary</a><a href="#section-boilerplate.3-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.3">
                <p id="section-boilerplate.3-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-other-terms" class="xref">Other Terms</a><a href="#section-boilerplate.3-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.4">
                <p id="section-boilerplate.3-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-references" class="xref">References</a><a href="#section-boilerplate.3-1.2.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.3">
            <p id="section-boilerplate.3-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-extending-rfc-6550" class="xref">Extending RFC 6550</a><a href="#section-boilerplate.3-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.4">
            <p id="section-boilerplate.3-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-identifying-a-path" class="xref">Identifying a Path</a><a href="#section-boilerplate.3-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.5">
            <p id="section-boilerplate.3-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-new-rpl-control-messages-an" class="xref">New RPL Control Messages and Options</a><a href="#section-boilerplate.3-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.1">
                <p id="section-boilerplate.3-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-new-p-dao-request-control-m" class="xref">New P-DAO Request Control Message</a><a href="#section-boilerplate.3-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.2">
                <p id="section-boilerplate.3-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-new-pdr-ack-control-message" class="xref">New PDR-ACK Control Message</a><a href="#section-boilerplate.3-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.3">
                <p id="section-boilerplate.3-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-route-projection-options" class="xref">Route Projection Options</a><a href="#section-boilerplate.3-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.4">
                <p id="section-boilerplate.3-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-sibling-information-option" class="xref">Sibling Information Option</a><a href="#section-boilerplate.3-1.5.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.6">
            <p id="section-boilerplate.3-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-projected-dao" class="xref">Projected DAO</a><a href="#section-boilerplate.3-1.6.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.6.2.1">
                <p id="section-boilerplate.3-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-non-storing-mode-projected-" class="xref">Non-Storing Mode Projected Route</a><a href="#section-boilerplate.3-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.6.2.2">
                <p id="section-boilerplate.3-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-storing-mode-projected-rout" class="xref">Storing-Mode Projected Route</a><a href="#section-boilerplate.3-1.6.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.7">
            <p id="section-boilerplate.3-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-boilerplate.3-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.8">
            <p id="section-boilerplate.3-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-boilerplate.3-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.8.2.1">
                <p id="section-boilerplate.3-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-new-rpl-control-codes" class="xref">New RPL Control Codes</a><a href="#section-boilerplate.3-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.8.2.2">
                <p id="section-boilerplate.3-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-error-in-projected-route-ic" class="xref">Error in Projected Route ICMPv6 Code</a><a href="#section-boilerplate.3-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.9">
            <p id="section-boilerplate.3-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a><a href="#section-boilerplate.3-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.10">
            <p id="section-boilerplate.3-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-boilerplate.3-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.11">
            <p id="section-boilerplate.3-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-boilerplate.3-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.12">
            <p id="section-boilerplate.3-1.12.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-applications" class="xref">Applications</a><a href="#section-boilerplate.3-1.12.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.12.2.1">
                <p id="section-boilerplate.3-1.12.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-loose-source-routing-in-non" class="xref">Loose Source Routing in Non-storing Mode</a><a href="#section-boilerplate.3-1.12.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.12.2.2">
                <p id="section-boilerplate.3-1.12.2.2.1"><a href="#section-a.2" class="xref">A.2</a>.  <a href="#name-transversal-routes-in-stori" class="xref">Transversal Routes in storing and non-storing modes</a><a href="#section-boilerplate.3-1.12.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.13">
            <p id="section-boilerplate.3-1.13.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-examples" class="xref">Examples</a><a href="#section-boilerplate.3-1.13.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.13.2.1">
                <p id="section-boilerplate.3-1.13.2.1.1"><a href="#section-b.1" class="xref">B.1</a>.  <a href="#name-using-storing-mode-p-dao-in" class="xref">Using storing mode P-DAO in non-storing mode MOP</a><a href="#section-boilerplate.3-1.13.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.13.2.2">
                <p id="section-boilerplate.3-1.13.2.2.1"><a href="#section-b.2" class="xref">B.2</a>.  <a href="#name-projecting-a-storing-mode-t" class="xref">Projecting a storing-mode transversal route</a><a href="#section-boilerplate.3-1.13.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.14">
            <p id="section-boilerplate.3-1.14.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-boilerplate.3-1.14.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The <span><a href="#RFC6550" class="xref">"Routing Protocol for Low Power and Lossy Networks"</a> [<a href="#RFC6550" class="xref">RFC6550</a>]</span> (LLN)(RPL) is a generic Distance Vector protocol that is well suited for application in a variety of low energy Internet of Things (IoT) networks.  RPL forms Destination Oriented Directed Acyclic Graphs (DODAGs) in which the Root often acts as the Border Router to connect the RPL domain to the Internet. The Root is responsible to select the RPL Instance that is used to forward a packet coming from the Internet into the RPL domain and set the related RPL information in the packets.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The  <span><a href="#I-D.ietf-6tisch-architecture" class="xref">6TiSCH architecture </a> [<a href="#I-D.ietf-6tisch-architecture" class="xref">6TiSCH-ARCHI</a>]</span> leverages RPL for its routing operation and considers the <span><a href="#RFC8655" class="xref">Deterministic Networking Architecture</a> [<a href="#RFC8655" class="xref">RFC8655</a>]</span> as one possible model whereby the device resources and capabilities are exposed to an external controller which installs routing states into the network based on some objective functions that reside in that external entity.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Based on heuristics of usage, path length, and knowledge of device capacity and available resources such as battery levels and reservable buffers, a Path Computation Element (<span>[<a href="#PCE" class="xref">PCE</a>]</span>) with a global visibility on the system could install additional P2P routes that are more optimized for the current needs as expressed by the objective function.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">This draft enables a RPL Root to install and maintain Projected Routes within its DODAG, along a selected set of nodes that may or may not include self, for a chosen duration. This potentially enables routes that are more optimized than those obtained with the distributed operation of RPL, either in terms of the size of a source-route header or in terms of path length, which impacts both the latency and the packet delivery ratio.  Projected Routes may be installed in either Storing and Non-Storing Modes Instances of the classical RPL operation, resulting in potentially hybrid situations where the mode of some Projected Routes is different from that of the other routes in the RPL Instance.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Projected Routes must be used with the parsimony to limit the amount of state that is installed in each device to fit within its resources, and to limit the amount of rerouted traffic to fit within the capabilities of the transmission links.  The algorithm used to compute the paths and the protocol used to learn the topology of the network and the resources that are available in devices and in the network are out of scope for this document.  Possibly with the assistance of a Path Computation Element (<span>[<a href="#PCE" class="xref">PCE</a>]</span>) that could have a better visibility on the larger system, the Root computes which segment could be optimized and uses this draft to install the corresponding Projected Routes.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">A Projected Route may be a stand-alone path to a Target or a segment in a complex Track <span>[<a href="#I-D.ietf-6tisch-architecture" class="xref">6TiSCH-ARCHI</a>]</span> that provides redundant forwarding solutions to a destination to improve reliability and availability of the wireless transmissions <span>[<a href="#I-D.pthubert-raw-problem-statement" class="xref">RAW-PS</a>]</span>.<a href="#section-1-6" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<div id="bcp">
<section id="section-2.1">
        <h3 id="name-bcp-14">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-bcp-14" class="section-name selfRef">BCP 14</a>
        </h3>
<p id="section-2.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span><span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="gloss">
<section id="section-2.2">
        <h3 id="name-subset-of-a-6lowpan-glossar">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-subset-of-a-6lowpan-glossar" class="section-name selfRef">Subset of a 6LoWPAN Glossary</a>
        </h3>
<p id="section-2.2-1">This document often uses the following acronyms:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.2-2">
          <dt id="section-2.2-2.1">6BBR:</dt>
          <dd id="section-2.2-2.2">6LoWPAN Backbone Router<a href="#section-2.2-2.2" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.3">6LBR:</dt>
          <dd id="section-2.2-2.4">6LoWPAN Border Router<a href="#section-2.2-2.4" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.5">6LN:</dt>
          <dd id="section-2.2-2.6">6LoWPAN Node<a href="#section-2.2-2.6" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.7">6LR:</dt>
          <dd id="section-2.2-2.8">6LoWPAN Router<a href="#section-2.2-2.8" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.9">DAD:</dt>
          <dd id="section-2.2-2.10">Duplicate Address Detection<a href="#section-2.2-2.10" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.11">DODAG:</dt>
          <dd id="section-2.2-2.12">Destination-Oriented Directed Acyclic Graph<a href="#section-2.2-2.12" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.13">LLN:</dt>
          <dd id="section-2.2-2.14">Low-Power and Lossy Network<a href="#section-2.2-2.14" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.15">NA:</dt>
          <dd id="section-2.2-2.16">Neighbor Advertisement<a href="#section-2.2-2.16" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.17">NCE:</dt>
          <dd id="section-2.2-2.18">Neighbor Cache Entry<a href="#section-2.2-2.18" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.19">ND:</dt>
          <dd id="section-2.2-2.20">Neighbor Discovery<a href="#section-2.2-2.20" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.21">NDP:</dt>
          <dd id="section-2.2-2.22">Neighbor Discovery Protocol<a href="#section-2.2-2.22" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.23">NS:</dt>
          <dd id="section-2.2-2.24">Neighbor Solicitation<a href="#section-2.2-2.24" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.25">RPL:</dt>
          <dd id="section-2.2-2.26">IPv6 Routing Protocol for LLNs <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span><a href="#section-2.2-2.26" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.27">CMO:</dt>
          <dd id="section-2.2-2.28">Control Message Option<a href="#section-2.2-2.28" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.29">DAO:</dt>
          <dd id="section-2.2-2.30">Destination Advertisement Object<a href="#section-2.2-2.30" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.31">VIO:</dt>
          <dd id="section-2.2-2.32">A Via Information Option, used in Storing Mode P-DAO messages.<a href="#section-2.2-2.32" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.33">SRVIO:</dt>
          <dd id="section-2.2-2.34">A Source-Routed Via Information Option, used in Non-Storing Mode P-DAO messages.<a href="#section-2.2-2.34" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.35">RPO:</dt>
          <dd id="section-2.2-2.36">A Route Projection Option; it can be a VIO or an SRVIO.<a href="#section-2.2-2.36" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.37">P-DAO:</dt>
          <dd id="section-2.2-2.38">A Projected DAO is a DAO message sent by the RPL Root to install a Projected Route.<a href="#section-2.2-2.38" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.39">RTO:</dt>
          <dd id="section-2.2-2.40">RPL Target Option<a href="#section-2.2-2.40" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.41">RAN:</dt>
          <dd id="section-2.2-2.42">RPL-Aware Node<a href="#section-2.2-2.42" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.43">RA:</dt>
          <dd id="section-2.2-2.44">Router Advertisement<a href="#section-2.2-2.44" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-2.45">RS:</dt>
          <dd id="section-2.2-2.46">Router Solicitation<a href="#section-2.2-2.46" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-2.2-3"><a href="#section-2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="new">
<section id="section-2.3">
        <h3 id="name-other-terms">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-other-terms" class="section-name selfRef">Other Terms</a>
        </h3>
<p id="section-2.3-1"><a href="#section-2.3-1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3-2">
          <dt id="section-2.3-2.1">Projected Route:</dt>
          <dd id="section-2.3-2.2">A Projected Route is a serial path that is computed and installed remotely by a RPL Root.<a href="#section-2.3-2.2" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.3">Track:</dt>
          <dd id="section-2.3-2.4">The term Track is used in this document to refer to a complex path, e.g., a DODAG, that incorporates redundant Projected Routes towards a destination for increased reliability, high availability and load balancing.<a href="#section-2.3-2.4" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="lo">
<section id="section-2.4">
        <h3 id="name-references">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-references" class="section-name selfRef">References</a>
        </h3>
<p id="section-2.4-1">In this document, readers will encounter terms and concepts that are discussed in the following documents:<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.4-2.1">
            <span><a href="#RFC6550" class="xref">"Routing Protocol for Low Power and Lossy Networks" </a> [<a href="#RFC6550" class="xref">RFC6550</a>]</span>, and<a href="#section-2.4-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-2.2">
            <span><a href="#RFC7102" class="xref">"Terminology in Low power And Lossy Networks" </a> [<a href="#RFC7102" class="xref">RFC7102</a>]</span>.<a href="#section-2.4-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.4-3"><a href="#section-2.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<div id="ext6550">
<section id="section-3">
      <h2 id="name-extending-rfc-6550">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-extending-rfc-6550" class="section-name selfRef">Extending RFC 6550</a>
      </h2>
<p id="section-3-1">This specification introduces two new RPL Control Messages to enable a RPL Aware Node (RAN) to request the establisment of a path from self to a Target.  A RAN may request the installation of a path by sending a new P-DAO Request PDR) Message to the Root. The Root confirms with a new PDR-ACK message back to the requester RAN with a completion status once it is done installing the path. See <a href="#pdaoreq" class="xref">Section 5.1</a> for more.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Section 6.7 of <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span> specifies Control Message Options (CMO) to be placed in RPL messages such as the Destination Advertisement Object (DAO) message. The RPL Target Option (RTO) and the Transit Information Option (TIO) are such options.  In Non-Storing Mode, the TIO option is used in the DAO message to indicate a parent within a DODAG.  The TIO applies to the RTOs that immedially preceed it in the message. Options may be factorized; multiple TIOs may be present to indicate multiple routes to the one or more contiguous addresses indicated in the RTOs that immediately precede the TIOs in the RPL message.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">This specification introduces two new CMOs referred to as Route Projection Options (RPO) to install Projected Routes. One RPO is the Via Information Option (VIO) and the other is the Source-Routed VIO (SRVIO). The VIO installs a route on each hop along a Projected Route (in a fashion analogous to RPL Storing Mode) whereas the SRVIO installs a source-routing state at the ingress node, which uses that state to insert a routing header in a fashion similar to Non-Storing Mode.  Like the TIO, the RPOs MUST be preceded by one or more RTOs to which they apply, and they can be factorized: multiple contiguous RPOs indicate alternate paths to the Target(s), more in <a href="#rplrpo" class="xref">Section 5.3</a>.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">This specification also introduces a new CMO to enable a RPL Router to indicate its siblings to the Root, more in <a href="#siof" class="xref">Figure 4</a>.<a href="#section-3-4" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-4">
      <h2 id="name-identifying-a-path">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-identifying-a-path" class="section-name selfRef">Identifying a Path</a>
      </h2>
<p id="section-4-1">It must be noted that RPL has a concept of Instance to represent different routing topologies but does not have a concept of an administrative distance, which exists in certain proprietary implementations to sort out conflicts between multiple sources of routing information within one routing topology. This draft conforms the Instance model as follows:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4-2.1">If the PCE needs to influence a particular Instance to add better routes in conformance with the routing objectives in that Instance, it may do so as long as it does not create a loop. A Projected Route is always preferred over a route that is learned via RPL. This specification uses the RPL Root as a proxy to the PCE. If the actual PCE is a separate entity, then a protocol that is out of scope for this specification is needed to relay the control elements between the RPL Root and the PCE.<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.2">A PCE that installs a more specific (say, Traffic Engineered) and possibly complex path (aka a Track) towards a particular Target MUST use a Local RPL Instance (see section 5 of <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>) associated to that Target to identify the path. We refer to that Local RPLInstanceID as TrackID. A projected path is uniquely identified within the RPL domain by the tuple (Target address, TrackID). When packet is placed on a Track, a RPL Packet Information (RPI) is added with the TrackID as RPLInstanceID.  The RPLInstanceID has the 'D' flag set, indicating that the destination address in the IPv6 header is the Target that is used to identify the Track.<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.3">A packet that is routed over a projected path MUST NOT be placed over a different RPL Instance again. A packet that is placed on a Global Instance MAY be injected in a Local Instance based on a network policy and the Local Instance configuration.<a href="#section-4-2.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-3">A Projected Route is a serial path that may the whole path or a segment in a complex Track, in which case multiple Projected Routes are installed with the stuple (Target address, TrackID), and a node that is present on more than one segment in a Track may be able to use either of the Projected Routes to forward towards the Target. The selection of the best route in a Track at forwarding time is out of scope for this document.  <span>[<a href="#I-D.pthubert-raw-problem-statement" class="xref">RAW-PS</a>]</span> elaborates on that particular problem.<a href="#section-4-3" class="pilcrow">¶</a></p>
</section>
<div id="rplccmo">
<section id="section-5">
      <h2 id="name-new-rpl-control-messages-an">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-new-rpl-control-messages-an" class="section-name selfRef">New RPL Control Messages and Options</a>
      </h2>
<div id="pdaoreq">
<section id="section-5.1">
        <h3 id="name-new-p-dao-request-control-m">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-new-p-dao-request-control-m" class="section-name selfRef">New P-DAO Request Control Message</a>
        </h3>
<p id="section-5.1-1">The PDR is sent to the Root to request a new Path. Exactly one Target Options MUST be present.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">The format of P-DAO Request (PDR) Base Object is as follows:<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<span id="name-new-p-dao-request-format"></span><div id="disupdfmt">
<figure id="figure-1">
          <div class="artwork art-text alignLeft" id="section-5.1-3.1">
<pre>

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | RPLInstanceID |K|R|   Flags   |  PDRLifetime  | PDRSequence   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   Option(s)...
       +-+-+-+-+-+-+-+-+

 </pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-new-p-dao-request-format" class="selfRef">New P-DAO Request Format</a>
          </figcaption></figure>
</div>
<dl class="dlParallel" id="section-5.1-4">
          <dt id="section-5.1-4.1">TrackID:</dt>
          <dd id="section-5.1-4.2">8-bit field indicating the topology Instance associated with the Track. It is set to zero upon the first request for a new Track and then to the TrackID once the Track was created, to either renew it of destroy it.<a href="#section-5.1-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.1-4.3">K:</dt>
          <dd id="section-5.1-4.4">The 'K' flag is set to indicate that the recipient is expected to send a PDR-ACK back.<a href="#section-5.1-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.1-4.5">R:</dt>
          <dd id="section-5.1-4.6">The 'R' flag is set to indicate that the Requested path should be redundant.<a href="#section-5.1-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-5.1-4.7">PDRLifetime:</dt>
          <dd id="section-5.1-4.8">8-bit unsigned integer.  The requested lifetime for the Track expressed in Lifetime Units (obtained from the Configuration option). A PDR with a fresher PDRSequence refreshes the lifetime, and a PDRLifetime of 0 indicates that the track should be destroyed.<a href="#section-5.1-4.8" class="pilcrow">¶</a>
</dd>
<dt id="section-5.1-4.9">PDRSequence:</dt>
          <dd id="section-5.1-4.10">8-bit wrapping sequence number.  The PDRSequence obeys the operation in section 7.2 of <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>. It is incremented at each PDR message and echoed in the PDR-ACK by the Root. The PDRSequence is used to correlate a PDR-ACK message with the PDR message that triggeted it.<a href="#section-5.1-4.10" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="rpldisackl">
<section id="section-5.2">
        <h3 id="name-new-pdr-ack-control-message">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-new-pdr-ack-control-message" class="section-name selfRef">New PDR-ACK Control Message</a>
        </h3>
<p id="section-5.2-1">The new PDR-ACK is sent as a response to a PDR message with the 'K' flag set. Its format is as follows:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<span id="name-new-pdr-ack-control-message-"></span><div id="disackfmt">
<figure id="figure-2">
          <div class="artwork art-text alignLeft" id="section-5.2-2.1">
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |    TrackID    | PDR-ACK Status|     Flags     | Track Lifetime|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  PDRSequence  |                Reserved                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Option(s)...
     +-+-+-+-+-+-+-+
 </pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-new-pdr-ack-control-message-" class="selfRef">New PDR-ACK Control Message Format</a>
          </figcaption></figure>
</div>
<dl class="dlParallel" id="section-5.2-3">
          <dt id="section-5.2-3.1">TrackID:</dt>
          <dd id="section-5.2-3.2">The RPLInstanceID of the Track that was created. Set to 0 when no Track is created.<a href="#section-5.2-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2-3.3">PDR-ACK Status:</dt>
          <dd id="section-5.2-3.4">Indicates the completion.  A value up to 127 means acceptance Values of 128 and above are used for rejection codes;<a href="#section-5.2-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2-3.5">Track Lifetime:</dt>
          <dd id="section-5.2-3.6">Indicates that remaining Lifetime for the Track, 0 if the Track was destroyed or not created.<a href="#section-5.2-3.6" class="pilcrow">¶</a>
</dd>
<dt id="section-5.2-3.7">PDRSequence:</dt>
          <dd id="section-5.2-3.8">8-bit wrapping sequence number.  It is incremented at each PDR message and echoed in the PDR-ACK.<a href="#section-5.2-3.8" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="rplrpo">
<section id="section-5.3">
        <h3 id="name-route-projection-options">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-route-projection-options" class="section-name selfRef">Route Projection Options</a>
        </h3>
<p id="section-5.3-1">The RPOs indicate a series of IPv6 addresses that can be compressed using the method defined in the <span><a href="#RFC8138" class="xref">"6LoWPAN Routing Header" </a> [<a href="#RFC8138" class="xref">RFC8138</a>]</span> specification using the address of the Root found in the DODAGID field of DIO messages as Compression Reference.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">An RPO indicates a Projected Route that can be a serial Track in full or a segment of a more complex Track. The Track is identified by a RPLInstanceID that is either Global or local to the Target of the Track.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3">The format of RPOs is as follows:<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<span id="name-via-information-option-form"></span><div id="viao">
<figure id="figure-3">
          <div class="artwork art-text alignLeft" id="section-5.3-4.1">
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Type        | Option Length |Comp.|  Flags  |    TrackID    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Path Lifetime | Path Sequence |     Reserved                  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    .                                                               .
    .                     Via Address 1                             .
    .                                                               .
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                              ....                             .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    .                                                               .
    .                     Via Address n                             .
    .                                                               .
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

 </pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-via-information-option-form" class="selfRef">Via Information option format</a>
          </figcaption></figure>
</div>
<dl class="dlParallel" id="section-5.3-5">
          <dt id="section-5.3-5.1">Option Type:</dt>
          <dd id="section-5.3-5.2">0x0A for VIO, 0x0B for SRVIO (to be confirmed by IANA)<a href="#section-5.3-5.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.3">Option Length:</dt>
          <dd id="section-5.3-5.4">In bytes; variable, depending on the number of Via Addresses.<a href="#section-5.3-5.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.5">Compression Type:</dt>
          <dd id="section-5.3-5.6">16-bit unsigned integer. This is the SRH-6LoRH Type as defined in figure 7 in section 5.1 of <span>[<a href="#RFC8138" class="xref">RFC8138</a>]</span> that corresponds to the compression used for all the Via Addresses.<a href="#section-5.3-5.6" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.7">TrackID:</dt>
          <dd id="section-5.3-5.8">8-bit field indicating the topology Instance associated with the Track.<a href="#section-5.3-5.8" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.9">Path Lifetime:</dt>
          <dd id="section-5.3-5.10">8-bit unsigned integer. The length of time in Lifetime Units (obtained from the Configuration option) that the prefix is valid for route determination. The period starts when a new Path Sequence is seen. A value of 255 (0xFF) represents infinity. A value of zero (0x00) indicates a loss of reachability. A DAO message that contains a Via Information option with a Path Lifetime of zero for a Target is referred as a No-Path (for that Target) in this document.<a href="#section-5.3-5.10" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.11">Path Sequence:</dt>
          <dd id="section-5.3-5.12">8-bit unsigned integer. When a RPL Target option is issued by the Root of the DODAG (i.e. in a DAO message), that Root sets the Path Sequence and increments the Path Sequence each time it issues a RPL Target option with updated information. The indicated sequence deprecates any state for a given Target that was learned from a previous sequence and adds to any state that was learned for that sequence.<a href="#section-5.3-5.12" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.13">Via Address:</dt>
          <dd id="section-5.3-5.14">2 to 16 bytes, a compressed IPv6 Address.  A Via Address indicates the next hop within the path towards the destination(s) that is indicated in the Target option that immediately precede the RPO in the DAO message. Via Addresses are indicated in the order of the path from the ingress to the egress nodes. All Via addresses are expressed in the same size as indicated by the Compression Type.<a href="#section-5.3-5.14" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.3-6">An RPO MUST contain at least one Via Address, and a Via Address MUST NOT be present more than once, otherwise the RPO MUST be ignored.<a href="#section-5.3-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rplsib">
<section id="section-5.4">
        <h3 id="name-sibling-information-option">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-sibling-information-option" class="section-name selfRef">Sibling Information Option</a>
        </h3>
<p id="section-5.4-1">The Sibling Information Option (SIO) provides indication on siblings that could be used by the Root to form Projected Routes.  The format of SIOs is as follows:<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<span id="name-sibling-information-option-"></span><div id="siof">
<figure id="figure-4">
          <div class="artwork art-text alignLeft" id="section-5.4-2.1">
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Type        | Option Length |Comp.|B| Flags |    Opaque     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |            Step of Rank       |       Reserved                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    .                                                               .
    .                     Sibling Address                           .
    .                                                               .
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

 </pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-sibling-information-option-" class="selfRef">Sibling Information Option Format</a>
          </figcaption></figure>
</div>
<dl class="dlParallel" id="section-5.4-3">
          <dt id="section-5.4-3.1">Option Type:</dt>
          <dd id="section-5.4-3.2">0x0C (to be confirmed by IANA)<a href="#section-5.4-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.3">Option Length:</dt>
          <dd id="section-5.4-3.4">In bytes; variable, depending on the number of Via Addresses.<a href="#section-5.4-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.5">Compression Type:</dt>
          <dd id="section-5.4-3.6">16-bit unsigned integer. This is the SRH-6LoRH Type as defined in figure 7 in section 5.1 of <span>[<a href="#RFC8138" class="xref">RFC8138</a>]</span> that corresponds to the compression used for the Sibling Address.<a href="#section-5.4-3.6" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.7">B:</dt>
          <dd id="section-5.4-3.8">1-bit flag that is set to indicate that the connectivity to the sibling is bidirectional and roughly symmetrical. In that case, only one of the siblings may report the SIO for the hop. If 'B' is not set then the SIO only indicates connectivity from the sibling to this node, and does not provide information on the hop from this node to the sibling.<a href="#section-5.4-3.8" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.9">Opaque:</dt>
          <dd id="section-5.4-3.10">MAY be used to carry information that the node and the Root understand, e.g., a particular representation of the Link properties such as a proprietary Link Quality Information for packets received from the sibling. An industraial Alliance that uses RPL for a particular use / environment MAY redefine the use of this field to fit its needs.<a href="#section-5.4-3.10" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.11">Step of Rank:</dt>
          <dd id="section-5.4-3.12">16-bit unsigned integer. This is the Step of Rank <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span> as computed by the Objective Function between this node and the sibling.<a href="#section-5.4-3.12" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.13">Reserved:</dt>
          <dd id="section-5.4-3.14">MUST be set to zero by the sender and MUST be ignored by the receiver.<a href="#section-5.4-3.14" class="pilcrow">¶</a>
</dd>
<dt id="section-5.4-3.15">Sibling Address:</dt>
          <dd id="section-5.4-3.16">2 to 16 bytes, a compressed IPv6 Address.  a Via Address indicates the next hop towards the destination(s) that is indicated in the Target option that immediately precede the RPO in the DAO message. Via Addresses are indicated in the order of the data path from the ingress to the egress nodes.  All Via addresses are expressed in the same size as indicated by the Compression Type<a href="#section-5.4-3.16" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.4-4">An SIO MAY be immediately followed by a DAG Metric Container. In that case the DAG Metric Container provides additional metrics for the hop from the Sibling to this node.<a href="#section-5.4-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="pdao">
<section id="section-6">
      <h2 id="name-projected-dao">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-projected-dao" class="section-name selfRef">Projected DAO</a>
      </h2>
<p id="section-6-1">This draft adds a capability to RPL whereby the Root of a DODAG projects a route by sending an extended DAO message called a Projected-DAO (P-DAO) to an arbitrary router in the DODAG, indicating one or more sequence(s) of routers inside the DODAG via which the Target(s) indicated in the RPL Target Option(s) (RTO) can be reached.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">A P-DAO is sent from a global address of the Root to a global address of the recipient, and MUST be confirmed by a DAO-ACK, which is sent back to a global address of the Root.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">A P-DAO message MUST contain at least one RTO and at least one RPO following it. There can be at most one such sequence of RTOs and then RPOs.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">Like a classical DAO message, a P-DAO is processed only if it is "new" per section 9.2.2. "Generation of DAO Messages" of the <span><a href="#RFC6550" class="xref">RPL specification</a> [<a href="#RFC6550" class="xref">RFC6550</a>]</span>; this is determined using the Path Sequence information from the RPO as opposed to a TIO. Also, a Path Lifetime of 0 in an RPO indicates that a route is to be removed.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">There are two kinds of operation for the Projected Routes, the Storing Mode and the Non-Storing Mode.<a href="#section-6-5" class="pilcrow">¶</a></p>
<ul>
<li id="section-6-6.1">The Non-Storing Mode is discussed in <a href="#nspdao" class="xref">Section 6.1</a>.  It uses an SRVIO that carries a list of Via Addresses to be used as a source-routed path to the Target. The recipient of the P-DAO is the ingress router of the source-routed path. Upon a Non-Storing Mode P-DAO, the ingress router installs a source-routed state to the Target and replies to the Root directly with a DAO-ACK message.<a href="#section-6-6.1" class="pilcrow">¶</a>
</li>
        <li id="section-6-6.2">The Storing Mode is discussed in <a href="#spdao" class="xref">Section 6.2</a>. It uses a VIO with one Via Address per consecutive hop, from the ingress to the egress of the path, including the list of all intermediate routers in the data path order.  The Via Addresses indicate the routers in which the routing state to the Target have to be installed via the next Via Address in the VIO.  In normal operations, the P-DAO is propagated along the chain of Via Routers from the egress router of the path till the ingress one, which confirms the installation to the Root with a DAO-ACK message.  Note that the Root may be the ingress and it may be the egress of the path, that it can also be neither but it cannot be both.<a href="#section-6-6.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-6-7"><a href="#section-6-7" class="pilcrow">¶</a></p>
<p id="section-6-8">In case of a forwarding error along a Projected Route, an ICMP error is sent to the Root with a new Code "Error in Projected Route" (See <a href="#ICMPv6ErrPRoute" class="xref">Section 8.2</a>).  The Root can then modify or remove the Projected Route.  The "Error in Projected Route" message has the same format as the "Destination Unreachable Message", as specified in RFC 4443 <span>[<a href="#RFC4443" class="xref">RFC4443</a>]</span>.  The portion of the invoking packet that is sent back in the ICMP message SHOULD record at least up to the routing header if one is present, and the routing header SHOULD be consumed by this node so that the destination in the IPv6 header is the next hop that this node could not reach.  if a 6LoWPAN Routing Header (6LoRH) <span>[<a href="#RFC8138" class="xref">RFC8138</a>]</span> is used to carry the IPv6 routing information in the outter header then that whole 6LoRH information SHOULD be present in the ICMP message.  The sender and exact operation depend on the Mode and is described in <a href="#nspdao" class="xref">Section 6.1</a> and <a href="#spdao" class="xref">Section 6.2</a> respectively.<a href="#section-6-8" class="pilcrow">¶</a></p>
<div id="nspdao">
<section id="section-6.1">
        <h3 id="name-non-storing-mode-projected-">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-non-storing-mode-projected-" class="section-name selfRef">Non-Storing Mode Projected Route</a>
        </h3>
<p id="section-6.1-1">As illustrated in <a href="#nsdf" class="xref">Figure 5</a>, a P-DAO that carries an SRVIO enables the Root to install a source-routed path towards a Target in any particular router; with this path information the router can add a source routed header reflecting the Projected Route to any packet for which the current destination either is the said Target or can be reached via the Target.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<span id="name-projecting-a-non-storing-ro"></span><div id="nsdf">
<figure id="figure-5">
          <div class="artwork art-text alignLeft" id="section-6.1-2.1">
<pre>
           ------+---------
                 |          Internet
                 |
              +-----+
              |     | Border Router
              |     |  (RPL Root)
              +-----+                   |  P  ^            |
                 |                      | DAO | ACK        | Loose
           o    o   o    o     router   V     |            | Source
       o o   o  o   o  o  o      o  o            | P-DAO   . Route
      o  o o  o o    o   o   o  o  o             | Source  . Path
      o   o    o  o     o  o    o  o  o          | Route   . From
     o  o   o  o   o         o   o o             | Path    . Root
        o  o  o  o             o    Target       V         . To
       o       o               o    o                      | Desti-
     o          o             o     o                      | nation
                                   destination             V

                       LLN
                       </pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-projecting-a-non-storing-ro" class="selfRef">Projecting a Non-Storing Route</a>
          </figcaption></figure>
</div>
<p id="section-6.1-3">A route indicated by an SRVIO may be loose, meaning that the node that owns the next listed Via Address is not necessarily a neighbor. Without proper loop avoidance mechanisms, the interaction of loose source routing and other mechanisms may effectively cause loops. In order to avoid those loops, if the router that installs a Projected Route does not have a connected route (a direct adjacency) to the next soure routed hop and fails to locate it as a neighbor or a neighbor of a neighbor, then it MUST ensure that it has another Projected Route to the next loose hop under the control of the same route computation system, otherwise the P-DAO is rejected.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1-4">When forwarding a packet to a destination for which the router determines that routing happens via the Target, the router inserts the source routing header in the packet to reach the Target. In the case of a loose source-routed path, there MUST be either a neighbor that is adjacent to the loose next hop, on which case the packet s forwarded to that neighbor, or a source-routed path to the loose next hop; in the latter case, another encapsulation takes place and the process possibly recurses; otherwise the packet is dropped.<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<p id="section-6.1-5">In order to add a source-routing header, the router encapsulates the packet with an IP-in-IP header and a non-storing mode source routing header (SRH) <span>[<a href="#RFC6554" class="xref">RFC6554</a>]</span>.  In the uncompressed form the source of the packet would be self, the destination would be the first Via Address in the SRVIO, and the SRH would contain the list of the remaining Via Addresses and then the Target.<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<p id="section-6.1-6">In practice, the router will normally use the <span><a href="#RFC8025" class="xref">"IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Paging Dispatch"</a> [<a href="#RFC8025" class="xref">RFC8025</a>]</span> to compress the RPL artifacts as indicated in <span>[<a href="#RFC8138" class="xref">RFC8138</a>]</span>. In that case, the router indicates self as encapsulator in an IP-in-IP 6LoRH Header, and places the list of Via Addresses in the order of the VIO and then the Target in the SRH 6LoRH Header.<a href="#section-6.1-6" class="pilcrow">¶</a></p>
<p id="section-6.1-7">In case of a forwarding error along a Source Route path, the node that fails to forward SHOULD send an ICMP error with a code "Error in Source Routing Header" back to the source of the packet, as described in section 11.2.2.3. of <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>. Upon this message, the encapsulating node SHOULD stop using the source route path for a period of time and it SHOULD send an ICMP message with a Code "Error in Projected Route" to the Root. Failure to follow these steps may result in packet loss and wasted resources along the source route path that is broken.<a href="#section-6.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="spdao">
<section id="section-6.2">
        <h3 id="name-storing-mode-projected-rout">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-storing-mode-projected-rout" class="section-name selfRef">Storing-Mode Projected Route</a>
        </h3>
<p id="section-6.2-1">As illustrated in <a href="#sdf" class="xref">Figure 6</a>, the Storing Mode route projection is used by the Root to install a routing state towards a Target in the routers along a segment between an ingress and an egress router; this enables the routers to forward along that segment any packet for which the next loose hop is the said Target, for Instance a loose source routed packet for which the next loose hop is the Target, or a packet for which the router has a routing state to the final destination via the Target.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<span id="name-projecting-a-route"></span><div id="sdf">
<figure id="figure-6">
          <div class="artwork art-text alignLeft" id="section-6.2-2.1">
<pre>
           ------+---------
                 |          Internet
                 |
              +-----+
              |     | Border Router
              |     |  (RPL Root)
              +-----+                      |     ^                   |
                 |                         | DAO | ACK               |
           o    o   o    o                 |     |                   |
       o o   o  o   o  o  o o   o          |  ^       | Projected    .
      o  o o  o o    o   o   o  o  o       |  | DAO   | Route        .
      o   o    o  o     o  o    o  o  o    | ^        |              .
     o  o   o  o   o         o   o o       v | DAO    v              .
     o          o   LLN   o   o     o                                |
         o o   o        o     o              Loose Source Route Path |
      o       o      o    o                 From Root To Destination v

      </pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-projecting-a-route" class="selfRef">Projecting a route</a>
          </figcaption></figure>
</div>
<p id="section-6.2-3">In order to install the relevant routing state along the segment between an ingress and an egress routers, the Root sends a unicast P-DAO message to the egress router of the routing segment that must be installed. The P-DAO message contains the ordered list of hops along the segment as a direct sequence of Via Information options that are preceded by one or more RPL Target options to which they relate.  Each Via Information option contains a Path Lifetime for which the state is to be maintained.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4">The Root sends the P-DAO directly to the egress node of the segment.  In that P-DAO, the destination IP address matches the Via Address in the last VIO. This is how the egress recognizes its role. In a similar fashion, the ingress node recognizes its role as it matches Via Address in the first VIO.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2-5">The egress node of the segment is the only node in the path that does not install a route in response to the P-DAO; it is expected to be already able to route to the Target(s) on its own. It may either be the Target, or may have some existing information to reach the Target(s), such as a connected route or an already installed Projected Route.  If one of the Targets cannot be located, the node MUST answer to the Root with a negative DAO-ACK listing the Target(s) that could not be located (suggested status 10 to be confirmed by IANA).<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<p id="section-6.2-6">If the egress node can reach all the Targets, then it forwards the P-DAO with unchanged content to its loose predecessor in the segment as indicated in the list of Via Information options, and recursively the message is propagated unchanged along the sequence of routers indicated in the P-DAO, but in the reverse order, from egress to ingress.<a href="#section-6.2-6" class="pilcrow">¶</a></p>
<p id="section-6.2-7">The address of the predecessor to be used as destination of the propagated DAO message is found in the Via Information option the precedes the one that contain the address of the propagating node, which is used as source of the packet.<a href="#section-6.2-7" class="pilcrow">¶</a></p>
<p id="section-6.2-8">Upon receiving a propagated DAO, an intermediate router as well as the ingress router install a route towards the DAO Target(s) via its successor in the P-DAO; the router locates the VIO that contains its address, and uses as next hop the address found in the Via Address field in the following VIO. The router MAY install additional routes towards the addresses that are located in VIOs that are after the next one, if any, but in case of a conflict or a lack of resource, a route to a Target installed by the Root has precedence.<a href="#section-6.2-8" class="pilcrow">¶</a></p>
<p id="section-6.2-9">The process recurses till the P-DAO is propagated to ingress router of the segment, which answers with a DAO-ACK to the Root.<a href="#section-6.2-9" class="pilcrow">¶</a></p>
<p id="section-6.2-10">Also, the path indicated in a P-DAO may be loose, in which case the reachability to the next hop has to be asserted. Each router along the path indicated in a P-DAO is expected to be able to reach its successor, either with a connected route (direct neighbor), or by routing, for Instance following a route installed previously by a DAO or a P-DAO message.  If that route is not connected then a recursive lookup may take place at packet forwarding time to find the next hop to reach the Target(s).  If it does not and cannot reach the next router in the P-DAO, the router MUST answer to the Root with a negative DAO-ACK indicating the successor that is unreachable (suggested status 11 to be confirmed by IANA).<a href="#section-6.2-10" class="pilcrow">¶</a></p>
<p id="section-6.2-11">A Path Lifetime of 0 in a Via Information option is used to clean up the state. The P-DAO is forwarded as described above, but the DAO is interpreted as a No-Path DAO and results in cleaning up existing state as opposed to refreshing an existing one or installing a new one.<a href="#section-6.2-11" class="pilcrow">¶</a></p>
<p id="section-6.2-12">In case of a forwarding error along a Storing Mode Projected Route, the node that fails to forward SHOULD send an ICMP error with a code "Error in Projected Route" to the Root. Failure to do so may result in packet loss and wasted resources along the Projected Route that is broken.<a href="#section-6.2-12" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">This draft uses messages that are already present in RPL <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span> with optional secured versions. The same secured versions may be used with this draft, and whatever security is deployed for a given network also applies to the flows in this draft.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">TODO: should probably consider how P-DAO messages could be abused by a) rogue nodes b) via replay of messages c) if use of P-DAO messages could in fact deal with any threats?<a href="#section-7-2" class="pilcrow">¶</a></p>
</section>
<div id="IANAcon">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="RPLCtrlMsgOptionsReg">
<section id="section-8.1">
        <h3 id="name-new-rpl-control-codes">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-new-rpl-control-codes" class="section-name selfRef">New RPL Control Codes</a>
        </h3>
<p id="section-8.1-1">This document extends the IANA registry created by RFC 6550 for RPL Control Codes as follows:<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<span id="name-rpl-control-codes"></span><div id="ianaRPLCtrlMsgtbl">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-rpl-control-codes" class="selfRef">RPL Control Codes</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Code</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">0x0A</td>
              <td class="text-left" rowspan="1" colspan="1">Via Information option</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">0x0B</td>
              <td class="text-left" rowspan="1" colspan="1">Source-Routed Via Information option</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-8.1-3">This document is updating the registry created by RFC 6550 for the RPL 3-bit Mode of Operation (MOP) as follows:<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<span id="name-dio-mode-of-operation"></span><div id="ianaMOPtbl">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-dio-mode-of-operation" class="selfRef">DIO Mode of operation</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">MOP value</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">5</td>
              <td class="text-left" rowspan="1" colspan="1">Non-Storing mode of operation with Projected Routes</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-center" rowspan="1" colspan="1">6</td>
              <td class="text-left" rowspan="1" colspan="1">Storing mode of operation with Projected Routes</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="ICMPv6ErrPRoute">
<section id="section-8.2">
        <h3 id="name-error-in-projected-route-ic">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-error-in-projected-route-ic" class="section-name selfRef">Error in Projected Route ICMPv6 Code</a>
        </h3>
<p id="section-8.2-1">In some cases RPL will return an ICMPv6 error message when a message cannot be forwarded along a Projected Route.  This ICMPv6 error message is "Error in Projected Route".<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">IANA has defined an ICMPv6 "Code" Fields Registry for ICMPv6 Message Types. ICMPv6 Message Type 1 describes "Destination Unreachable" codes. This specification requires that a new code is allocated from the ICMPv6 Code Fields Registry for ICMPv6 Message Type 1, for "Error in Projected Route", with a suggested code value of 8, to be confirmed by IANA.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-acknowledgments">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-9-1">The authors wish to acknowledge JP Vasseur, James Pylakutty and Patrick Wetterwald for their contributions to the ideas developed here.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
<section id="section-10">
      <h2 id="name-normative-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC4443">[RFC4443]</dt>
      <dd>
<span class="refAuthor">Conta, A.</span><span class="refAuthor">, Deering, S.</span><span class="refAuthor">, and M. Gupta, Ed.</span>, <span class="refTitle">"Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 89</span>, <span class="seriesInfo">RFC 4443</span>, <span class="seriesInfo">DOI 10.17487/RFC4443</span>, <time datetime="2006-03">March 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4443">https://www.rfc-editor.org/info/rfc4443</a>&gt;</span>. </dd>
<dt id="RFC6550">[RFC6550]</dt>
      <dd>
<span class="refAuthor">Winter, T., Ed.</span><span class="refAuthor">, Thubert, P., Ed.</span><span class="refAuthor">, Brandt, A.</span><span class="refAuthor">, Hui, J.</span><span class="refAuthor">, Kelsey, R.</span><span class="refAuthor">, Levis, P.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, Struik, R.</span><span class="refAuthor">, Vasseur, JP.</span><span class="refAuthor">, and R. Alexander</span>, <span class="refTitle">"RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6550</span>, <span class="seriesInfo">DOI 10.17487/RFC6550</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6550">https://www.rfc-editor.org/info/rfc6550</a>&gt;</span>. </dd>
<dt id="RFC6554">[RFC6554]</dt>
      <dd>
<span class="refAuthor">Hui, J.</span><span class="refAuthor">, Vasseur, JP.</span><span class="refAuthor">, Culler, D.</span><span class="refAuthor">, and V. Manral</span>, <span class="refTitle">"An IPv6 Routing Header for Source Routes with the Routing Protocol for Low-Power and Lossy Networks (RPL)"</span>, <span class="seriesInfo">RFC 6554</span>, <span class="seriesInfo">DOI 10.17487/RFC6554</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6554">https://www.rfc-editor.org/info/rfc6554</a>&gt;</span>. </dd>
<dt id="RFC8025">[RFC8025]</dt>
      <dd>
<span class="refAuthor">Thubert, P., Ed.</span><span class="refAuthor"> and R. Cragie</span>, <span class="refTitle">"IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Paging Dispatch"</span>, <span class="seriesInfo">RFC 8025</span>, <span class="seriesInfo">DOI 10.17487/RFC8025</span>, <time datetime="2016-11">November 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8025">https://www.rfc-editor.org/info/rfc8025</a>&gt;</span>. </dd>
<dt id="RFC8138">[RFC8138]</dt>
      <dd>
<span class="refAuthor">Thubert, P., Ed.</span><span class="refAuthor">, Bormann, C.</span><span class="refAuthor">, Toutain, L.</span><span class="refAuthor">, and R. Cragie</span>, <span class="refTitle">"IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Routing Header"</span>, <span class="seriesInfo">RFC 8138</span>, <span class="seriesInfo">DOI 10.17487/RFC8138</span>, <time datetime="2017-04">April 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8138">https://www.rfc-editor.org/info/rfc8138</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
    <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-11">
      <h2 id="name-informative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC7102">[RFC7102]</dt>
      <dd>
<span class="refAuthor">Vasseur, JP.</span>, <span class="refTitle">"Terms Used in Routing for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 7102</span>, <span class="seriesInfo">DOI 10.17487/RFC7102</span>, <time datetime="2014-01">January 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7102">https://www.rfc-editor.org/info/rfc7102</a>&gt;</span>. </dd>
<dt id="RFC6997">[RFC6997]</dt>
      <dd>
<span class="refAuthor">Goyal, M., Ed.</span><span class="refAuthor">, Baccelli, E.</span><span class="refAuthor">, Philipp, M.</span><span class="refAuthor">, Brandt, A.</span><span class="refAuthor">, and J. Martocci</span>, <span class="refTitle">"Reactive Discovery of Point-to-Point Routes in Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6997</span>, <span class="seriesInfo">DOI 10.17487/RFC6997</span>, <time datetime="2013-08">August 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6997">https://www.rfc-editor.org/info/rfc6997</a>&gt;</span>. </dd>
<dt id="I-D.ietf-6tisch-architecture">[6TiSCH-ARCHI]</dt>
      <dd>
<span class="refAuthor">Thubert, P.</span>, <span class="refTitle">"An Architecture for IPv6 over the TSCH mode of IEEE 802.15.4"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6tisch-architecture-27</span>, <time datetime="2019-10-18">18 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6tisch-architecture-27">https://tools.ietf.org/html/draft-ietf-6tisch-architecture-27</a>&gt;</span>. </dd>
<dt id="I-D.pthubert-raw-problem-statement">[RAW-PS]</dt>
      <dd>
<span class="refAuthor">Thubert, P.</span><span class="refAuthor"> and G. Papadopoulos</span>, <span class="refTitle">"Reliable and Available Wireless Problem Statement"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-pthubert-raw-problem-statement-04</span>, <time datetime="2019-10-23">23 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-pthubert-raw-problem-statement-04">https://tools.ietf.org/html/draft-pthubert-raw-problem-statement-04</a>&gt;</span>. </dd>
<dt id="RFC8655">[RFC8655]</dt>
      <dd>
<span class="refAuthor">Finn, N.</span><span class="refAuthor">, Thubert, P.</span><span class="refAuthor">, Varga, B.</span><span class="refAuthor">, and J. Farkas</span>, <span class="refTitle">"Deterministic Networking Architecture"</span>, <span class="seriesInfo">RFC 8655</span>, <span class="seriesInfo">DOI 10.17487/RFC8655</span>, <time datetime="2019-10">October 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8655">https://www.rfc-editor.org/info/rfc8655</a>&gt;</span>. </dd>
<dt id="PCE">[PCE]</dt>
    <dd>
<span class="refAuthor">IETF</span>, <span class="refTitle">"Path Computation Element"</span>, <time>November 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/charter-ietf-pce/">https://datatracker.ietf.org/doc/charter-ietf-pce/</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-appendix.a">
      <h2 id="name-applications">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-applications" class="section-name selfRef">Applications</a>
      </h2>
<section id="section-a.1">
        <h2 id="name-loose-source-routing-in-non">
<a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-loose-source-routing-in-non" class="section-name selfRef">Loose Source Routing in Non-storing Mode</a>
        </h2>
<p id="section-a.1-1">A RPL implementation operating in a very constrained LLN typically uses the Non-Storing Mode of Operation as represented in <a href="#nost" class="xref">Figure 7</a>.  In that mode, a RPL node indicates a parent-child relationship to the Root, using a Destination Advertisement Object (DAO) that is unicast from the node directly to the Root, and the Root typically builds a source routed path to a destination down the DODAG by recursively concatenating this information.<a href="#section-a.1-1" class="pilcrow">¶</a></p>
<span id="name-rpl-non-storing-mode-of-ope"></span><div id="nost">
<figure id="figure-7">
          <div class="artwork art-text alignLeft" id="section-a.1-2.1">
<pre>
           ------+---------
                 |          Internet
                 |
              +-----+
              |     | Border Router
              |     |  (RPL Root)
              +-----+                      ^     |        |
                 |                         | DAO | ACK    |
           o    o   o    o                 |     |        | Strict
       o o   o  o   o  o  o o   o          |     |        | Source
      o  o o  o o    o   o   o  o  o       |     |        | Route
      o   o    o  o     o  o    o  o  o    |     |        |
     o  o   o  o   o         o   o o       |     v        v
     o          o             o     o
                       LLN
                       </pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-rpl-non-storing-mode-of-ope" class="selfRef">RPL non-storing mode of operation </a>
          </figcaption></figure>
</div>
<p id="section-a.1-3">Based on the parent-children relationships expressed in the non-storing DAO messages,the Root possesses topological information about the whole network, though this information is limited to the structure of the DODAG for which it is the destination.  A packet that is generated within the domain will always reach the Root, which can then apply a source routing information to reach the destination if the destination is also in the DODAG.  Similarly, a packet coming from the outside of the domain for a destination that is expected to be in a RPL domain reaches the Root.<a href="#section-a.1-3" class="pilcrow">¶</a></p>
<p id="section-a.1-4">It results that the Root, or then some associated centralized computation engine such as a PCE, can determine the amount of packets that reach a destination in the RPL domain, and thus the amount of energy and bandwidth that is wasted for transmission, between itself and the destination, as well as the risk of fragmentation, any potential delays because of a paths longer than necessary (shorter paths exist that would not traverse the Root).<a href="#section-a.1-4" class="pilcrow">¶</a></p>
<p id="section-a.1-5">As a network gets deep, the size of the source routing header that the Root must add to all the downward packets becomes an issue for nodes that are many hops away. In some use cases, a RPL network forms long lines and a limited amount of well-Targeted routing state would allow to make the source routing operation loose as opposed to strict, and save packet size.  Limiting the packet size is directly beneficial to the energy budget, but, mostly, it reduces the chances of frame loss and/or packet fragmentation, which is highly detrimental to the LLN operation. Because the capability to store a routing state in every node is limited, the decision of which route is installed where can only be optimized with a global knowledge of the system, a knowledge that the Root or an associated PCE may possess by means that are outside of the scope of this specification.<a href="#section-a.1-5" class="pilcrow">¶</a></p>
<p id="section-a.1-6">This specification enables to store source-routed or storing mode state in intermediate routers, which enables to limit the excursion of the source route headers in deep networks.  Once a P-DAO exchange has taken place for a given Target, if the Root operates in non storing mode, then it may elide the sequence of routers that is installed in the network from its source route headers to destination that are reachable via that Target, and the source route headers effectively become loose.<a href="#section-a.1-6" class="pilcrow">¶</a></p>
</section>
<section id="section-a.2">
        <h2 id="name-transversal-routes-in-stori">
<a href="#section-a.2" class="section-number selfRef">A.2. </a><a href="#name-transversal-routes-in-stori" class="section-name selfRef">Transversal Routes in storing and non-storing modes</a>
        </h2>
<p id="section-a.2-1">RPL is optimized for Point-to-Multipoint (P2MP) and Multipoint-to-Point (MP2P), whereby routes are always installed along the RPL DODAG respectively from and towards the DODAG Root. Transversal Peer to Peer (P2P) routes in a RPL network will generally suffer from some elongated (stretched) path versus the best possible path, since routing between 2 nodes always happens via a common parent, as illustrated in <a href="#stretch" class="xref">Figure 8</a>:<a href="#section-a.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-a.2-2.1">in non-storing mode, all packets routed within the DODAG flow all the way up to the Root of the DODAG. If the destination is in the same DODAG, the Root must encapsulate the packet to place a Routing Header that has the strict source route information down the DODAG to the destination. This will be the case even if the destination is relatively close to the source and the Root is relatively far off.<a href="#section-a.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-a.2-2.2">In storing mode, unless the destination is a child of the source, the packets will follow the default route up the DODAG as well.  If the destination is in the same DODAG, they will eventually reach a common parent that has a route to the destination; at worse, the common parent may also be the Root. From that common parent, the packet will follow a path down the DODAG that is optimized for the Objective Function that was used to build the DODAG.<a href="#section-a.2-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-a.2-3"><a href="#section-a.2-3" class="pilcrow">¶</a></p>
<span id="name-routing-stretch-between-s-a"></span><div id="stretch">
<figure id="figure-8">
          <div class="artwork art-text alignLeft" id="section-a.2-4.1">
<pre>
                   ------+---------
                    |          Internet
                    |
                 +-----+
                 |     | Border Router
                 |     |  (RPL Root)
                 +-----+
                    X
              ^    v   o    o
          ^ o   o  v   o  o  o o   o
         ^  o o  o v    o   o   o  o  o
         ^   o    o  v     o  o    o  o  o
        S  o   o  o   D         o   o o
        o          o             o     o
                          LLN
       </pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-routing-stretch-between-s-a" class="selfRef">Routing Stretch between S and D via common parent X</a>
          </figcaption></figure>
</div>
<p id="section-a.2-5">It results that it is often beneficial to enable transversal P2P routes, either if the RPL route presents a stretch from shortest path, or if the new route is engineered with a different objective.  For that reason, earlier work at the IETF introduced the <span><a href="#RFC6997" class="xref">"Reactive Discovery of Point-to-Point Routes in Low Power and Lossy Networks"</a> [<a href="#RFC6997" class="xref">RFC6997</a>]</span>, which specifies a distributed method for establishing optimized P2P routes. This draft proposes an alternate based on a centralized route computation.<a href="#section-a.2-5" class="pilcrow">¶</a></p>
<span id="name-projected-transversal-route"></span><div id="opti2">
<figure id="figure-9">
          <div class="artwork art-text alignLeft" id="section-a.2-6.1">
<pre>
              ------+---------
                    |          Internet
                    |
                 +-----+
                 |     | Border Router
                 |     |  (RPL Root)
                 +-----+
                    |
              o    o   o    o
          o o   o  o   o  o  o o   o
         o  o o  o o    o   o   o  o  o
         o   o    o  o     o  o    o  o  o
        S&gt;&gt;A&gt;&gt;&gt;B&gt;&gt;C&gt;&gt;&gt;D         o   o o
        o          o             o     o
                          LLN
       </pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-projected-transversal-route" class="selfRef">Projected Transversal Route</a>
          </figcaption></figure>
</div>
<p id="section-a.2-7">This specification enables to store source-routed or storing mode state in intermediate routers, which enables to limit the stretch of a P2P route and maintain the characteristics within a given SLA. An example of service using this mechanism oculd be a control loop that would be installed in a network that uses classical RPL for asynchronous data collection. In that case, the P2P path may be installed in a different RPL Instance, with a different objective function.<a href="#section-a.2-7" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-appendix.b">
      <h2 id="name-examples">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<section id="section-b.1">
        <h2 id="name-using-storing-mode-p-dao-in">
<a href="#section-b.1" class="section-number selfRef">B.1. </a><a href="#name-using-storing-mode-p-dao-in" class="section-name selfRef">Using storing mode P-DAO in non-storing mode MOP</a>
        </h2>
<p id="section-b.1-1">In non-storing mode, the DAG Root maintains the knowledge of the whole DODAG topology, so when both the source and the destination of a packet are in the DODAG, the Root can determine the common parent that would have been used in storing mode, and thus the list of nodes in the path between the common parent and the destination. For Instance in the diagram shown in <a href="#exmp" class="xref">Figure 10</a>, if the source is node 41 and the destination is node 52, then the common parent is node 22.<a href="#section-b.1-1" class="pilcrow">¶</a></p>
<span id="name-example-dodag-forming-a-log"></span><div id="exmp">
<figure id="figure-10">
          <div class="artwork art-text alignLeft" id="section-b.1-2.1">
<pre>
           ------+---------
                 |          Internet
                 |
              +-----+
              |     | Border Router
              |     |  (RPL Root)
              +-----+
               | \  \____
              /   \       \
            o 11   o 12     o  13
           /       |       /  \
         o 22      o 23   o 24  o 25
        /  \       | \      \
      o 31   o 32  o   o     o 35
     /      /      |    \    |    \
    o 41   o 42    o     o   o 45   o 46
    |      |       |     |    \     |
    o 51   o 52    o 53  o     o 55 o 56

                       LLN
       </pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-example-dodag-forming-a-log" class="selfRef">Example DODAG forming a logical tree topology</a>
          </figcaption></figure>
</div>
<p id="section-b.1-3">With this draft, the Root can install a storing mode routing states along a segment that is either from itself to the destination, or from one or more common parents for a particular source/destination pair towards that destination (in this particular example, this would be the segment made of nodes 22, 32, 42).<a href="#section-b.1-3" class="pilcrow">¶</a></p>
<p id="section-b.1-4">In the example below, say that there is a lot of traffic to nodes 55 and 56 and the Root decides to reduce the size of routing headers to those destinations. The Root can first send a DAO to node 45 indicating Target 55 and a Via segment (35, 45), as well as another DAO to node 46 indicating Target 56 and a Via segment (35, 46). This will save one entry in the routing header on both sides. The Root may then send a DAO to node 35 indicating Targets 55 and 56 a Via segment (13, 24, 35) to fully optimize that path.<a href="#section-b.1-4" class="pilcrow">¶</a></p>
<p id="section-b.1-5">Alternatively, the Root may send a DAO to node 45 indicating Target 55 and a Via segment (13, 24, 35, 45) and then a DAO to node 46 indicating Target 56 and a Via segment (13, 24, 35, 46), indicating the same DAO Sequence.<a href="#section-b.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-b.2">
        <h2 id="name-projecting-a-storing-mode-t">
<a href="#section-b.2" class="section-number selfRef">B.2. </a><a href="#name-projecting-a-storing-mode-t" class="section-name selfRef">Projecting a storing-mode transversal route</a>
        </h2>
<p id="section-b.2-1">In this example, say that a PCE determines that a path must be installed between node S and node D via routers A, B and C, in order to serve the needs of a particular application.<a href="#section-b.2-1" class="pilcrow">¶</a></p>
<p id="section-b.2-2">The Root sends a P-DAO with a Target option indicating the destination D and a sequence Via Information option, one for S, which is the ingress router of the segment, one for A and then for B, which are an intermediate routers, and one for C, which is the egress router.<a href="#section-b.2-2" class="pilcrow">¶</a></p>
<span id="name-p-dao-from-root"></span><div id="pdao2">
<figure id="figure-11">
          <div class="artwork art-text alignLeft" id="section-b.2-3.1">
<pre>
              ------+---------
                    |          Internet
                    |
                 +-----+
                 |     | Border Router
                 |     |  (RPL Root)
                 +-----+
                    | P-DAO message to C
              o    |   o    o
          o o   o |    o  o  o o   o
         o  o o  | o    o   o   o  o  o
         o   o   V  o     o  o    o  o  o
        S  A  B  C   D         o   o o
        o          o             o     o
                          LLN
       </pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-p-dao-from-root" class="selfRef">P-DAO from Root</a>
          </figcaption></figure>
</div>
<p id="section-b.2-4">Upon reception of the P-DAO, C validates that it can reach D, e.g. using IPv6 Neighbor Discovery, and if so, propagates the P-DAO unchanged to B.<a href="#section-b.2-4" class="pilcrow">¶</a></p>
<p id="section-b.2-5">B checks that it can reach C and of so, installs a route towards D via C.  Then it propagates the P-DAO to A.<a href="#section-b.2-5" class="pilcrow">¶</a></p>
<p id="section-b.2-6">The process recurses till the P-DAO reaches S, the ingress of the segment, which installs a route to D via A and sends a DAO-ACK to the Root.<a href="#section-b.2-6" class="pilcrow">¶</a></p>
<span id="name-p-dao-ack-to-root"></span><div id="pdao3">
<figure id="figure-12">
          <div class="artwork art-text alignLeft" id="section-b.2-7.1">
<pre>
              ------+---------
                    |          Internet
                    |
                 +-----+
                 |     | Border Router
                 |     |  (RPL Root)
                 +-----+
                  ^ P-DAO-ACK from S
              /    o   o    o
           /   o o    o  o  o o   o
         |  o o  o o    o   o   o  o  o
         |   o   o  o     o  o    o  o  o
        S  A  B  C   D         o   o o
        o          o             o     o
                          LLN
       </pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-p-dao-ack-to-root" class="selfRef">P-DAO-ACK to Root</a>
          </figcaption></figure>
</div>
<p id="section-b.2-8">As a result, a transversal route is installed that does not need to follow the DODAG structure.<a href="#section-b.2-8" class="pilcrow">¶</a></p>
<span id="name-projected-transversal-route-2"></span><div id="opti">
<figure id="figure-13">
          <div class="artwork art-text alignLeft" id="section-b.2-9.1">
<pre>
              ------+---------
                    |          Internet
                    |
                 +-----+
                 |     | Border Router
                 |     |  (RPL Root)
                 +-----+
                    |
              o    o   o    o
          o o   o  o   o  o  o o   o
         o  o o  o o    o   o   o  o  o
         o   o    o  o     o  o    o  o  o
        S&gt;&gt;A&gt;&gt;&gt;B&gt;&gt;C&gt;&gt;&gt;D         o   o o
        o          o             o     o
                          LLN
       </pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-projected-transversal-route-2" class="selfRef">Projected Transversal Route</a>
          </figcaption></figure>
</div>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pascal Thubert (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc</span></div>
<div dir="auto" class="left"><span class="street-address">Building D, 45 Allee des Ormes - BP1200</span></div>
<div dir="auto" class="left">
<span class="postal-code">06254</span> <span class="locality">Mougins - Sophia Antipolis</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+33%20497%2023%2026%2034" class="tel">+33 497 23 26 34</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:pthubert@cisco.com" class="email">pthubert@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rahul Arvind Jadhav</span></div>
<div dir="auto" class="left"><span class="org">Huawei Tech</span></div>
<div dir="auto" class="left"><span class="street-address">Kundalahalli Village, Whitefield,</span></div>
<div dir="auto" class="left">
<span class="locality">Bangalore</span> <span class="postal-code">560037</span>
</div>
<div dir="auto" class="left"><span class="region">Karnataka</span></div>
<div dir="auto" class="left"><span class="country-name">India</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+91-080-49160700" class="tel">+91-080-49160700</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:rahul.ietf@gmail.com" class="email">rahul.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matthew Gillmore</span></div>
<div dir="auto" class="left"><span class="org">Itron, Inc</span></div>
<div dir="auto" class="left"><span class="street-address">Building D, 2111 N Molter Road</span></div>
<div dir="auto" class="left">
<span class="locality">Liberty Lake</span>,  <span class="postal-code">99019</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+1.800.635.5461" class="tel">+1.800.635.5461</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:matthew.gillmore@itron.com" class="email">matthew.gillmore@itron.com</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>
</body>
</html>
