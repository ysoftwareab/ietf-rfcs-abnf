


                                                    Francois Le Faucheur 
                                                           Ramesh Uppili 
                                                     Cisco Systems, Inc.  
                                                                         
                                                          Alain Vedrenne 
                                                           Pierre Merckx 
                                                                  Equant 
                                                                         
                                                          Thomas Telkamp 
                                                         Global Crossing 
                                                                         
IETF Internet Draft 
Expires: January, 2002                                                
Document: draft-lefaucheur-te-metric-igp-00.txt         July, 2001 
 
 
 
                Use of IGP Metric as a second TE Metric 
 
 
 
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026. Internet-Drafts are 
   Working documents of the Internet Engineering Task Force (IETF), its 
   areas, and its working groups.  Note that other groups may also 
   distribute working documents as Internet-Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time. It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt. 
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
    
Abstract 
    
   This draft describes a common practice on how the existing IGP 
   Metric can be used as an alternative metric to the TE Metric for 
   Constraint Based Routing of MPLS TE Tunnels. This effectively 
   results in the ability to perform Constraint Based Routing with 
   optimization of one metric (e.g. link bandwidth) for some TE Tunnels 
   (e.g. Data Trunks) while optimizing another metric (e.g. propagation 
   delay) for some other TE Tunnels with different requirements (e.g. 
   Voice Trunks). 
    
   No protocol extensions or modifications are required. This text 
   documents current router implementations and deployment practices.  
  
Le Faucheur, et. al                                                  1 
 

 
                    IGP Metric as second TE Metric           July 2001 
 
    
1.      I-D Summary Information 
    
   This section contains the information submitted on the 
   "idsummary@subip.ietf.org" list of the Sub-IP area. 
    
   RELATED DOCUMENTS: 
   Complements: 
   http://www.ietf.org/internet-drafts/draft-fedyk-isis-ospf-te-
   metrics-01.txt 
   Compete: None. 
    
   WHERE DOES IT FIT IN THE PICTURE OF THE SUB-IP WORK: 
   This fits into TE-WG. 
    
   WHY IS IT TARGETED AT THIS WG 
   This directly addresses specific items of the TEWG charter: 
   "- BCP documents on ISP uses, requirements, desires (TEBCPs) 
   - TE interoperability & implementation informational notes (TEIMP) " 
    
   JUSTIFICATION 
   The draft directly addresses a items of the charter and relates to 
   existing implementations and planned deployments. 
    
    
2.      Introduction 
 
   IGP routing protocols (OSPF and IS-IS) as well as MPLS Signaling 
   protocols (RSVP-TE and CR-LDP) have been extended (as specified in 
   [ISIS-TE], [OSPF-TE], [RSVP-TE] and [CR-LDP]) in order to support 
   the traffic engineering functionality as defined in [TE-REQ]. 
    
   These IGP routing protocol extensions currently include 
   advertisement of a single additional TE Metric to be used for 
   Constraint Based Routing of TE Tunnels. 
    
   However, the objective of traffic engineering is to optimize the use 
   and the performance of the network. So it seems relevant that TE 
   tunnel placement may be optimized according to different 
   optimization criteria. For example, some Service Providers want to 
   perform traffic engineering of different classes of service 
   separately so that each class of Service is transported on a 
   different TE Tunnel. One example motivation for doing so is to apply 
   different fast restoration policies to the different Classes of 
   Service. Another example motivation is to take advantage of separate 
   Constraint Based Routing in order to meet the different QoS 
   objectives of each Class of Service. To achieve different QoS 
   objectives may require enforcement by Constraint Based Routing of 
   different bandwidth constraints for the different Classes of Service 
   as defined in [DS-TE]. In some Service Provider environments, it 
   also requires optimizing on a different metric during Constraint 
   Based Routing.  
 
 Le Faucheur et. al                                                  2 
 

 
                    IGP Metric as second TE Metric           July 2001 
 
    
   The most common scenario for a different metric calls for 
   optimization of a metric reflecting delay (mainly propagation delay) 
   when Constraint Based Routing TE LSPs that will be transporting 
   voice, while optimizing a more usual metric (e.g. reflecting link 
   bandwidth) when Constraint Based Routing TE LSPs that will be 
   transporting data. 
    
   [METRICS] proposes extensions so that multiple TE Metrics can be 
   advertised in the IGP. If/once those are fully specified and 
   implemented, they will address the above scenario. However this 
   draft describes how the above scenario is currently addressed in the 
   meantime by existing implementations and deployments, without any 
   additional IGP extensions beyond [ISIS-TE] and [OSPF-TE], by 
   effectively using the IGP Metric as a "second" TE Metric. 
    
    
3.      Common Practice 
    
   In current MPLS TE deployments, the metric used by network 
   administrators for Constraint Based Routing of TE LSPs carrying data 
   traffic is often the same as the metric used for Shortest Path 
   Routing. Where this is the case, the Constraint Based Routing 
   algorithm running on the Head-End LSR can use the IGP Metric 
   advertised in the IGP to compute paths for data TE LSPs instead of 
   the advertised TE Metric. The TE Metric can then be used to convey 
   another metric (e.g. a delay-based metric) which can be used by the 
   Constraint Based Routing algorithm on the Head-End LSR to compute 
   path for the TE LSPs with different requirements (e.g. Voice TE 
   LSP). 
    
   Other services providers use a delay-based metric as the IGP metric. 
   In that case, the Constraint Based Routing algorithm running on the 
   Head-End LSR can use the IGP Metric advertised in the IGP to compute 
   paths for delay-sensitive TE LSPs (e.g. Voice TE LSPs) instead of 
   the advertised TE Metric. The TE Metric can then be used to convey 
   another metric (e.g. bandwidth based metric) which can be used by 
   the Constraint Based Routing algorithm to compute paths for the data 
   TE LSPs. 
    
   More generally, the TE Metric can be used to carry any arbitrary 
   metric that may be useful for Constraint Based Routing of the set of 
   LSPs which need optimization on another metric than the IGP metric. 
    
3.1.    Head-End LSR Implementation Practice 
    
   A Head-End LSR implements the current practice by:  
   - Allowing configuration, for each TE LSP to be routed, of whether 
     the IGP Metric or the TE Metric is to be used by the Constraint 
     Based Routing algorithm. 


 
 Le Faucheur et. al                                                  3 
 

 
                    IGP Metric as second TE Metric           July 2001 
 
   - Enabling the Constraint Based Routing algorithm to make use of 
     either the TE Metric or the IGP Metric, depending on the above 
     configuration for the considered TE-LSP 
    
3.2.    Network Deployment Practice 
    
   A Service Provider deploys this practice by: 
   - Configuring, on every relevant link, the TE Metric to reflect 
     whatever  metric is appropriate (e.g. delay-based metric) for 
     Constraint Based Routing of some LSPs as an alternative metric to 
     the IGP Metric 
   - Configuring, for every TE LSP, whether this LSP is to be 
     constraint based routed according to the TE Metric or IGP Metric 
    
3.3.    Constraints 
 
   The practice described in this document has the following 
   constraints: 
   - it only allows TE Tunnels to be routed on either of two metrics 
     (i.e. it cannot allow TE Tunnels to be routed on one of three, or 
     more, metrics) 
   - it can only be used where the IGP Metric is appropriate as one of 
     the two metrics to be used for constraint based routing (i.e. it 
     cannot allow TE Tunnels to be routed on either of two metrics 
     while allowing IGP SPF to be based on a third metric). 
    
   Note that, as with [METRICS], this practice does not recommend that 
   the TE Metric and the IGP metric be used simultaneously during path 
   computation for a given LSP. This is known to be an NP-complete 
   problem. 
 
3.4.    Interoperability 
    
   Where path computation is entirely performed by the Head-End (e.g. 
   intra-area operations with path computation on Head-end), this 
   practice does not raise any interoperability issue among LSRs since 
   the use of one metric or the other is a matter purely local to the 
   Head-End LSR. 
    
   Where path computation involves another component than the Head-End 
   (e.g. with inter-area operations where path computation is shared 
   between the Head-End and Area Boundary Routers or a Path Computation 
   Server), this practice requires that which metric to optimize on be 
   signaled along with the other constraints (bandwidth, affinity) for 
   the LSP. See [PATH-COMP] for a proposal on how to signal with RSVP-
   TE which metric to optimize on. 
    
    
4.      Migration Considerations 
    
   Service Providers need to consider how to migrate from the current 
   implementation to the new one supporting this practice.  
 
 Le Faucheur et. al                                                  4 
 

 
                    IGP Metric as second TE Metric           July 2001 
 
    
   Although the head-end routers act independently from each other, 
   some migration scenarios may require that all head-end routers be 
   upgraded to the new implementation to avoid any disruption on 
   existing TE-LSPs before two metrics can effectively be used by TE. 
   The reason is that routers with current implementation are expected 
   to always use the TE metric for Constraint Based Routing of all 
   tunnels; so when the TE metric is reconfigured to reflect the 
   "second metric" (say to a delay-based metric) on links in the 
   network, then all TE-LSPs would get routed based on the delay-based 
   metric, while the intent may be that only the TE-LSPs explicitly 
   configured so should be routed based on the "second metric" (e.g. 
   delay-based). 
    
   A possible migration scenario would look like this: 
    
        1) upgrade software on all head-end routers in the network to 
           support this practice 
        2) change the TE-LSPs configuration on the head-end routers to 
           use the IGP metric (e.g. bandwidth-based) for Constraint 
           Based Routing rather than the TE metric 
        3) configure TE metric on the links to reflect the "second 
           metric" (e.g. delay-based) 
        4) modify the LSP configuration of TE-LSPs that should use the 
           "second metric" (e.g. delay-based) to be Constraint Based 
           Routed based on the TE Metric, and/or create new TE-LSPs 
           with such configuration 
    
   It is desirable that step 2 is non-disruptive (i.e. the routing of a 
   LSP will not be affected in any way, and the data transmission will 
   not be interrupted) by the change of LSP configuration to use "IGP 
   Metric" as long as the actual value of the "IGP Metric" and "TE 
   Metric" are equal on every link at the time of LSP reconfiguration 
   (as would be the case at step 2 in migration scenario above which 
   assumed that TE Metric was initially equal to IGP Metric).  
    
    
5.      Security Considerations 
    
    
   The practice described in this draft does not raise specific 
   security issues beyond those of existing TE. 
    
    
6.      Acknowledgment 
    
   This document has benefited from discussion with Jean-Philippe 
   Vasseur. 
    
    
 
References 
 
 Le Faucheur et. al                                                  5 
 

 
                    IGP Metric as second TE Metric           July 2001 
 
    
   [TE-REQ] Awduche et al, Requirements for Traffic Engineering over 
   MPLS, RFC2702, September 1999. 
    
   [OSPF-TE] Katz, Yeung, Traffic Engineering Extensions to OSPF, 
   draft-katz-yeung-ospf-traffic-05.txt, June 2001.  
    
   [ISIS-TE] Smit, Li, IS-IS extensions for Traffic Engineering, draft-
   ietf-isis-traffic-03.txt, June 2001. 
    
   [RSVP-TE] Awduche et al, "RSVP-TE: Extensions to RSVP for LSP 
   Tunnels", draft-ietf-mpls-rsvp-lsp-tunnel-08.txt, February 2001. 
    
   [CR-LDP] Jamoussi et al., "Constraint-Based LSP Setup using LDP", 
   draft-ietf-mpls-cr-ldp-05.txt, February 2001 
    
   [METRICS] Fedyk et al, "Multiple Metrics for Traffic Engineering 
   with IS-IS and OSPF", draft-fedyk-isis-ospf-te-metrics-01.txt, 
   November 2000. 
    
   [DS-TE] Le Faucheur et al, "Requirements for support of Diff-Serv-
   aware MPLS Traffic Engineering", draft-ietf-tewg-diff-te-reqts-
   01.txt, June 2001. 
    
   [PATH-COMP] Vasseur et al, "RSVP Path computation request and reply 
   messages",  draft-vasseur-mpls-path-computation-rsvp-te-00.txt, July 
   2001. 
    
    
Authors' Address: 
    
   Francois Le Faucheur 
   Cisco Systems, Inc. 
   Village d'Entreprise Green Side - Batiment T3 
   400, Avenue de Roumanille 
   06410 Biot-Sophia Antipolis 
   France 
   Phone: +33 4 97 23 26 19 
   Email: flefauch@cisco.com 
    
   Ramesh Uppili  
   Cisco Systems, Inc. 
   300 Apollo Drive 
   Chelmsford, Massachussets 01824 
   USA 
   Phone: +1 978 244-4949 
   Email: ruppili@cisco.com 
    
   Alain Vedrenne 
   EQUANT 
   400 Galleria Parkway 
   Atlanta, Georgia 30339 
 
 Le Faucheur et. al                                                  6 
 

 
                    IGP Metric as second TE Metric           July 2001 
 
   USA 
   Phone: +1 (678)-346-3466  
   Email: alain.vedrenne@equant.com 
    
   Pierre Merckx 
   EQUANT 
   1041 route des Dolines - BP 347 
   06906 SOPHIA ANTIPOLIS Cedex 
   FRANCE 
   Phone: +33 (0)492 96 6454 
   Email: pierre.merckx@equant.com 
    
   Thomas Telkamp 
   Global Crossing 
   Olympia 6 
   1213 NP Hilversum 
   The Netherlands 
   Phone: +31 35 655 651 
   E-mail: telkamp@gblx.net 
    































 
 Le Faucheur et. al                                                  7 
 

