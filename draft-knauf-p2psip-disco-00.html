<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A RELOAD Usage for Distributed Conference Control
    (DisCo)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A RELOAD Usage for Distributed Conference Control
    (DisCo)">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Knauf</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">G. Hege</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">T C. Schmidt</td></tr>
<tr><td class="header">Expires: December 30, 2010</td><td class="header">HAW Hamburg</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Waehlisch</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">link-lab &amp; FU Berlin</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 28, 2010</td></tr>
</table></td></tr></table>
<h1><br />A RELOAD Usage for Distributed Conference Control
    (DisCo)<br />draft-knauf-p2psip-disco-00</h1>

<h3>Abstract</h3>

<p>This document defines a RELOAD Usage for Distributed Conference
      Control (DisCo) with SIP. DisCo splits the semantic of identifier and
      locator of a SIP conference URI using a new Kind data structure.
      Conference members are enabled to select conference controllers based on
      proximity awareness. DisCo proposes call delegation to balance load at
      focus peers. The document addresses also aspects of security and trust,
      as well as compatibility for conference unaware clients.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 30, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#sec-o">3.</a>&nbsp;
Overview of DisCo<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-a">3.1.</a>&nbsp;
Reference Scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-iadc">3.2.</a>&nbsp;
Initiating a Distributed Conference<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-jac">3.3.</a>&nbsp;
Joining a Conference<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsubsec-cs">3.4.</a>&nbsp;
Conference State Synchronization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsubsec-cdar">3.5.</a>&nbsp;
Call delegation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-u">3.6.</a>&nbsp;
Resiliance<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsubsec-tatl">3.7.</a>&nbsp;
Topology Awareness<br />
<a href="#anchor3">4.</a>&nbsp;
RELOAD Usage for Distributed Conference Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.1.</a>&nbsp;
Kind Data Structure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-dc">4.2.</a>&nbsp;
Determining Coordinates<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-cc">4.3.</a>&nbsp;
Conference Creation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-pcp">4.4.</a>&nbsp;
Proximity-aware Conference Participation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-ada">4.5.</a>&nbsp;
Advertising Focus Ability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-riadc">4.6.</a>&nbsp;
Resiliance in a Distributed Conference<br />
<a href="#sec-fcco">5.</a>&nbsp;
Focus Call Control Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-baaf">5.1.</a>&nbsp;
Becoming an active Focus<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-delc">5.2.</a>&nbsp;
Delegating Calls<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.3.</a>&nbsp;
Synchronizing the Conference State<br />
<a href="#anchor6">6.</a>&nbsp;
DISCO Kind Definition<br />
<a href="#sec-csepe">7.</a>&nbsp;
Conference State Event Package Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsubsec-fse">7.1.</a>&nbsp;
The &lt;focus-states&gt; and &lt;focus&gt; elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-xmls">7.2.</a>&nbsp;
XML Schema<br />
<a href="#sec-cde">8.</a>&nbsp;
Configuration Document Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-lalh">8.1.</a>&nbsp;
The &lt;landmark&gt; and &lt;Landmark-host&gt; elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">8.2.</a>&nbsp;
Relax NG Grammar<br />
<a href="#anchor8">9.</a>&nbsp;
Example<br />
<a href="#anchor9">10.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-ls">10.1.</a>&nbsp;
Layered Security<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subsec-ta">10.2.</a>&nbsp;
Trust Aspects<br />
<a href="#anchor10">11.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document describes a RELOAD Usage for distributed conference
      control (DisCo) in a tightly coupled model with SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. The Usage provides self-organizing and
      scalable signaling that allows RELOAD peers and plain SIP user agents to
      participate in a managed P2P conference. DisCo defines the following
      functions:</p>
<ul class="text">
<li>A protocol scheme for distributed conference control
</li>
<li>RELOAD Usage and definition of conferencing Kind
</li>
<li>Mechanisms for conference synchronization and call delegation
</li>
<li>Mechanisms for proximity-aware routing for conference
          participants
</li>
<li>XML extension for the event package for conference state
</li>
<li>A graduated trust delegation system
</li>
</ul>

<p>In this document, the term distributed conferencing refers to a
      multiparty conversation in a tightly coupled model in which the point of
      control (i.e., the focus) is identified by unique URI, but the focus
      service is located at many independent entities. Multiple SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> user agents uniformly control and manage a
      multiparty session. This document defines a new Usage for RELOAD
      including an additional Kind code point with a corresponding data
      structure that complies the demands for distributed conferences. The
      data structure stores the mapping of a single conference to multiple
      conference controllers and thereby separates the conference URI from
      focus instantiations.
</p>
<p>Delay and jitter are critical issues in multimedia communications.
      The proposed conferencing scheme supports mechanisms to build an
      optimized interconnecting graph between conference participants and
      their responsible conference controllers. Conference members will be
      enabled to select the closest focus with respect to delay or jitter.
</p>
<p>DisCo extends conference control mechanisms to provide a consistent
      and reliable conferencing environment. Controlling peers maintain a
      consistent view of the entire conference state. The multiparty system
      can be re-structured based on call delegation operations.
</p>
<p>To provide secure mechanisms, which allows users to join or even
      control a distributed conference, this document describes a graduated
      trust delegation system. The proposed system guides implementors how to
      maintain privacy and trust to other peers in a distributed multiparty
      system.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.<br />
<br />

</p>
<p>The terminology and definitions from der RELOAD base <a class='info' href='#I-D.ietf-p2psip-base'>[I&#8209;D.ietf&#8209;p2psip&#8209;base]<span> (</span><span class='info'>Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;REsource LOcation And Discovery (RELOAD) Base Protocol,&rdquo; March&nbsp;2010.</span><span>)</span></a>, the peer-to-peer SIP concepts
      draft <a class='info' href='#I-D.ietf-p2psip-concepts'>[I&#8209;D.ietf&#8209;p2psip&#8209;concepts]<span> (</span><span class='info'>Bryan, D., Matthews, P., Shim, E., Willis, D., and S. Dawkins, &ldquo;Concepts and Terminology for Peer to Peer SIP,&rdquo; July&nbsp;2008.</span><span>)</span></a> and the
      terminology formed by the framework for conferencing with SIP <a class='info' href='#RFC4353'>[RFC4353]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Framework for Conferencing with the Session Initiation Protocol (SIP),&rdquo; February&nbsp;2006.</span><span>)</span></a>. Additionally the following terms are
      used:</p>
<blockquote class="text"><dl>
<dt>Coordinate Value:</dt>
<dd>An opaque string that describes a
          host's relative position in the network topology.
</dd>
<dt>Focus peer:</dt>
<dd>A RELOAD peer that provides SIP
          conferencing functions and implements the Usage for distributed
          conferencing. It can be 'active' if is already in signaling
          relations to conference participants. Otherwise it is 'potential' if
          it is only registered in a distributed conference data structure but
          not maintaining signaling relations yet.
</dd>
</dl></blockquote>

<a name="sec-o"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overview of DisCo</h3>

<a name="subsec-a"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Reference Scenario</h3>

<p>The reference scenario for the Distributed Conference Control
        (DisCo) is shown in <a class='info' href='#fig-disco-arch'>Figure&nbsp;1<span> (</span><span class='info'>Reference Scenario: Focus peers A,B maintain a distributed conference</span><span>)</span></a>. Peers are
        connected via a RELOAD <a class='info' href='#I-D.ietf-p2psip-base'>[I&#8209;D.ietf&#8209;p2psip&#8209;base]<span> (</span><span class='info'>Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;REsource LOcation And Discovery (RELOAD) Base Protocol,&rdquo; March&nbsp;2010.</span><span>)</span></a>
        instance, in which peers A and B are managing a single multiparty
        conference. The conference is identified by a unique conference URI,
        but located at peers A and B fulfilling the role of focus. The mapping
        of the conference URI to one or more responsible focus peers is stored
        in a new RELOAD Resource for distributed conferencing within a data
        structure denoted as DisCo-Registration. The owner O of the
        distributed conference resource holds this data.
</p>
<p>The focus peers A and B maintain SIP signaling relations to
        conference participants, which may have different conference protocol
        capabilities. In this example, peer A is the multiparty manager for
        the RELOAD peer C and the plain SIP user agent E whereas focus peer B
        serves for RELOAD peer D and the RELOAD client F.
</p>
<p>RELOAD peers and clients obtain the contact information for the
        conference from the owner O. In contrast, the user agent E receives
        the conference URI not by RELOAD mechanisms, but resolves the ID and
        joins the conference by plain SIP negotiation.
</p>
<p>Focus peers establish a SIP signaling relation among each other
        used for notification messages that synchronize the conference focus
        peers' knowledge about the entire conference state. Additionally,
        focus peers can transfer calls to each other by a call delegation
        mechanism.
</p><br /><hr class="insert" />
<a name="fig-disco-arch"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>                                    +----------+
                                    |DisCo Data|
                                    +----------+
                                   /
                             +-----+
                             |Owner|
         # # # # # # # # # # |Peer | # # # # # # # # # # #
        #                    |  O  |                      #
       #                     +-----+                       #
      #                                                     #
     #                                                       #
    #                                                         #
 +----+                                                     +----+
 |Peer| \               RELOAD Instance                     |Peer|
 | C  |  \                                                  | D  |
 +----+   \                                                 +----+
    #     SIP                                                 #
     #      \                                                #
      #      \                                              #
       #     +-------+                       +-------+     #(
        #    | Focus |                       | Focus |    #  )
         # # | Peer  | # # # # # # # # # # # | Peer  | # #  (
             |   A   | &lt;===Conf.Events/====&gt; |   B   |       )
             +-------+    Call delegation    +-------+    Overlay
            /                                        \     Comm.
           /                                          \     (
         SIP                                          SIP    )
         /                                              \   (
        /                                                \   )
   +----------+                                      +--------+
   |User Agent|                                      | Client |
   |    E     |                                      |   F    |
   +----------+                                      +--------+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Reference Scenario: Focus peers A,B maintain a distributed conference&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="subsec-iadc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Initiating a Distributed Conference</h3>

<p>To create a conference the initiating user agent announces itself
        as a focus for the conference. It stores its own contact information
        (Address-of-Record or Destination List) in the RELOAD overlay under
        DisCo-Registration Kind (cf., Figure <a class='info' href='#fig-overview-cf'>Figure&nbsp;2<span> (</span><span class='info'>DisCo Usage generic Call Flow</span><span>)</span></a>). The hashed conference URI is used
        as the Resource-ID. This data structure will later contain the contact
        IDs of all potential focus peers including optionally topological
        descriptors.
</p>
<a name="subsec-jac"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Joining a Conference</h3>

<p>A RELOAD-aware node (cf., Bob in Figure <a class='info' href='#fig-overview-cf'>Figure&nbsp;2<span> (</span><span class='info'>DisCo Usage generic Call Flow</span><span>)</span></a>) intending to join an existing
        conference retrieves the list of potential focus peers stored in the
        DisCo-Registration under the conference's Resource-ID. To join the
        conference it selects any of the focus peers (e.g., Alice) and
        establishes a connection using AppAttach. This transport is then used
        to send an INVITE to the conference applying the chosen focus as the
        contact. The selection of the focus peer to contact can optionally be
        based on proximity information if available.
</p>
<p>A node that is not aware of RELOAD uses common SIP signaling to
        retrieve the conference URI.
</p>
<p>A conference member proposes as a focus for subsequent participants
        by storing a mapping of the conference URI to his Address-of-Record or
        Destination List in the RELOAD overlay using the conference
        Resource-ID. This decision should incorporate bandwidth, power, and
        other constraints, but details are beyond the scope of this
        document.
</p><br /><hr class="insert" />
<a name="fig-overview-cf"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

Alice                          RELOAD                            Bob
(initiating peer)                                     (joining peer)
--------------------------------------------------------------------
  |                               |                               |
  |      Alice stores her mapping to register a conference        |
  | Store mapping(ConfURI, Alice) |                               |
  |------------------------------&gt;|                               |
  |                               |        Lookup ConfURI         |
  |                               |&lt;------------------------------|
  |                               |        Result ConfURI         |
  |                               |------------------------------&gt;|
  |                               |                               |
  |       Bob establishes transport connection to Alice           |
  |                           AppAttach                           |
  |&lt;--------------------------------------------------------------|
  |                           AppAttach                           |
  |--------------------------------------------------------------&gt;|
  |                            INVITE                             |
  |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
  |                              OK                               |
  |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&gt;|
  |                              ACK                              |
  |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
  |                             Media                             |
  |&lt;=============================================================&gt;|
  |                               |                               |
  |       Bob stores his mapping to become a focus peer too       |
  |                               |  Store mapping(ConfURI, Bob)  |
  |                               |&lt;------------------------------|
  |                               |                               |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: DisCo Usage generic Call Flow&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="subsubsec-cs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Conference State Synchronization</h3>

<p>Each focus of a conference maintains signaling connections to its
        related participants independently from other conference controllers.
        This distributed conference design effects that the entire SIP
        conference state is jointly held by all conference focus peers. In
        DisCo, state synchronization is based on SIP specific event
        notifications <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>.
</p>
<p>Each focus peer can complete its view of the entire conference
        state among the focus peers by subscribing all other focus peers for
        an XML event package for distributed conferences. This is defined in
        this document and based on the event package for conference state
        <a class='info' href='#RFC4575'>[RFC4575]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a>. Receivers of event notifications
        update their local conference state document to regain a valid view of
        current conference state.
</p>
<p>The event notification package for distributed conferences enables
        focus peers to synchronize the entire conference state. It is designed
        as an extension to the XML event package for conference state, which
        provides signaling and media parameters for each peer participating in
        the multiparty session. The extension defines additional XML elements
        and complex types (see <a class='info' href='#sec-csepe'>Section&nbsp;7<span> (</span><span class='info'>Conference State Event Package Extension</span><span>)</span></a> for more
        details), which allow views of the responsibilities of any focus peer
        in the conference. By providing these views each focus peer is enabled
        to perform additional load balancing operations and enhances the
        robustness against departures of focus peers.
</p>
<a name="subsubsec-cdar"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Call delegation</h3>

<p>The call delegation (see<a class='info' href='#subsec-delc'>Section&nbsp;5.2<span> (</span><span class='info'>Delegating Calls</span><span>)</span></a>.) is a
        feature used to transfer an incoming participation request to another
        focus peer. It can be applied to prevent an overloading of focus peers
        reaching its limit of serving new clients. Call delegation is realized
        through SIP REFER requests, which carry signaling and session
        description information of the callee to be transferred. A focus peer
        can decide to refer an incoming call to a less loaded remote focus.
        This feature is achieved transparently to the transferred user agent
        by using a source routing mechanism at SIP dialog establishment.
        Descriptions of overload detection are beyond the scope of this
        document.
</p>
<a name="subsec-u"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
Resiliance</h3>

<p>A focus peer can decide to leave the conference or may ungracefully
        fail. In a traditional conferencing scenario, a loss of the conference
        controller or the media distributor would cause a complete fail of the
        multiparty conversation. Distributed conferencing uses the redundancy
        by multiple focus peers to reconfigure a running multiparty.
        Participants that lost their entry point to the conference re-invite
        itself via the remaining focus peers or will be re-invited by the
        controllers. This option is based on the conference state and call
        delegation functions.
</p>
<a name="subsubsec-tatl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
Topology Awareness</h3>

<p>DisCo supports landmarking approaches based on an extension for the
        RELOAD XML configuration document (see <a class='info' href='#sec-cde'>Section&nbsp;8<span> (</span><span class='info'>Configuration Document Extension</span><span>)</span></a>)
        to construct topology-aware connections between focus and peers. Each
        peer intending to create or participate in a distributed conference
        SHOULD determine a topological descriptor that describes its relative
        position in the n-dimensional Cartesian space. Focus peers store these
        coordinate values as additional data field in the DisCo-Registration
        data structure. This enables peers joining the conference to select
        the closest focus with respect to its coordinate values.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
RELOAD Usage for Distributed Conference Control</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Kind Data Structure</h3>

<p>Each DisCo-Registration data structure stores the mappings for one
        conference to many focus peers and for each focus peer the related
        coordinates value. The data structure uses the RELOAD dictionary type
        whereas the DictionaryKey value is the Node-ID of the focus peer
        behind the dictionary entry. This allows a focus peer to update it
        mappings. The DisCo data structure of type DisCoRegistration is shown
        as follows:</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
  enum {
    sip_focus_uri (1),
    sip_focus_node_id (2), (255)
  } DisCoRegistrationtType;

  struct {
    opaque coordinate&lt;0..2^16-1&gt;

    select (DisCoRegistrationtType.type) {
      case sip_focus_uri: opaque uri&lt;0..2^16-1&gt;

      case sip_focus_node_id: Destination destination_list&lt;0..2^16-1&gt;

      /* This type can be extended */
    }

  } DisCoRegistrationData;

  struct {
    DisCoRegistrationtType type;
    uint16 length;
    DisCoRegistrationData data;
  } DisCoRegistration;</pre></div><p>

</p>
<p>The content of the DisCoRegistrationData structure are as
        follows:</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>type
    type of the registration
length
    the length of the registration PDU
data
    the conference registration data</pre></div><p>
 </p>
<ul class="text">
<li>If the DisCoRegistration is set to "sip_focus_uri", then it
            contains an Address-of-Record (AOR) as an opaque string and opaque
            "coordinates" string, that describes the relative network
            position. See more in section 4.4.
</li>
<li>If registration type is set to "sip_focus_node" then it
            contains the Destination list for the peer and an opaque string
            "coordinates" describing the focus' relative network position.
</li>
</ul>

<p>The structure is designed for enabling a peer to contact a focus of
        the conference that is the nearest to itself. A joining peer MUST
        select the focus peer, which coordinate value matches at most (see
        section <a class='info' href='#subsec-pcp'>Section&nbsp;4.4<span> (</span><span class='info'>Proximity-aware Conference Participation</span><span>)</span></a>) to its own. In this manner
        it reduces the problem of triangle inequality as without this feature
        a joining peer could choose an inadequate remote conference controller
        causing large signaling and may streaming delays.
</p>
<a name="subsec-dc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Determining Coordinates</h3>

<p>Each RELOAD peer within the context of a distributed conference
        SHOULD be aware of it's relative position in the network topology.
        Those position information can support a topology-aware conference
        construction avoiding long signaling and media delays. Providing this
        the Usage for distributed conference foresees the coordinates value
        within the DisCo-Registration data structure that allows focus peers
        to store a topological descriptor. It is a generic field that
        describes a peer's relative position in the network as an N value long
        position vector in the N-dimensional Cartesian space. Focus peers
        store this coordinate value together with their announcement as
        conference focus. Joining peers likewise SHOULD determine their
        coordinates value and then select a focus peer whose relative position
        matches at most (see section <a class='info' href='#subsec-pcp'>Section&nbsp;4.4<span> (</span><span class='info'>Proximity-aware Conference Participation</span><span>)</span></a>).
</p>
<p>Many algorithms determine topology information by measuring
        Round-Trip Times (RTT) towards a set on hosts serving as so called
        landmarks. To support such algorithms this document describes an
        extension to the RELOAD XML configuration document that allows to
        configure the set of Landmark hosts that peer must use for position
        estimation (see section <a class='info' href='#sec-cde'>Section&nbsp;8<span> (</span><span class='info'>Configuration Document Extension</span><span>)</span></a>). Once a focus
        peer has registered its mapping in the DisCo data structure, it also
        stores the according coordinates in the same mapping. These
        &lt;Node-ID,coordinates&gt; vectors are used by peers at conference
        join to select the focus peer that is relatively closest to
        itself.
</p>
<p>Because topology-awareness can be obtained by many differnt
        approaches a concrete algorithms is out of scope of this document.
</p>
<a name="subsec-cc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Conference Creation</h3>

<p>Before a peer registers to a new distributed conference, it is
        RECOMMENDED to ensure the initiating peer has a most up to date copy
        of the configuration document. In this way, the conference creator
        assures that all joining peers will equally determine their
        coordinates value if such a alogithm is used. The first peer that
        creates a distributed conference registers it in the RELOAD overlay
        following the steps as described in <a class='info' href='#fig-conf-create-cf'>Figure&nbsp;3<span> (</span><span class='info'>Creation of a Distributed Conference</span><span>)</span></a>:<br /><hr class="insert" />
<a name="fig-conf-create-cf"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
Enroll.Serv      Alice      Peer1     Overlay     PeerN   StoringPeer
-------------------------------------------------------------------
       |          |   StatReq Res:Conf-URI          |          |
       |          |----------&gt;|---------&gt;|---------&gt;|---------&gt;|
       |          |           StatAns    |          |          |
       |          |&lt;----------|&lt;---------|&lt;---------|&lt;---------|
       |&lt;==Cert===|           |          |          |          |
       |          |           |          |          |          |
       |===Cert==&gt;|   StoreReq Res:Conf-URI Kinds:DisCo[,SIP]  |
       |          |----------&gt;|---------&gt;|---------&gt;|---------&gt;|
       |          |           StoreAns   |          |          |
       |          |&lt;----------|&lt;---------|&lt;---------|&lt;---------|
       |          |           |          |          |          |</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Creation of a Distributed Conference&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
</p>
<ol class="text">
<li>The peer MUST determine its own coordinate value (if used).
</li>
<li>The peer MUST probe whether the desired conference URI is
            available. It therefore generates the Resource-ID of the
            conference URI with the overlay hash function and sends a RELOAD
            StatReq towards this address. By the corresponding StatAns
            response the peer knows whether the desired URI is occupied by
            another a DisCo Kind or even a SIP-Registration Kind <a class='info' href='#I-D.ietf-p2psip-sip'>[I&#8209;D.ietf&#8209;p2psip&#8209;sip]<span> (</span><span class='info'>Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;A SIP Usage for RELOAD,&rdquo; March&nbsp;2010.</span><span>)</span></a>. If it is, the user MUST
            choose another URI and repeat the availability checks. If no other
            DisCo or SIP-Registration Kind are stored at this Resource-ID it
            proceeds the registration.
</li>
<li>Storing a conference registration is like to register a new
            virtual user that has the conference URI as its Address-of-Record.
            Therefore, the conference initiator MUST request the enrollment
            server for a new overlay certificate that contains the conference
            URI as user name. A sample certificate is shown below: <br /><hr class="insert" />
<a name="fig-cert-sample"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
User name: conference@dht.example.com
Node-ID: 013456789abcdef
Serial: 0815
</pre></div>
</li>
<li>The peer finally registers the DisCo data structure signed with
            the above certificate by a Store request towards the storing peer
            (the owner of the address space for the Resource-ID of the
            conference URI).
</li>
</ol>

<p>The additional certificate is needed for 2 major purposes:</p>
<ul class="text">
<li>It separates the conference creator from the multiparty
            instance.
</li>
<li>It ensures the conference initiator's privacy. Because the
            DisCo data structure will be accessed by many peers using the same
            conference certificate. If they were using the conference
            creators&rsquo; certificate, they were permitted to write
            non-shared Resources of the creator.
</li>
</ul>

<p>The conference creator MAY registers the conference URI as
        SIP-Registration Kind as well. In this case, it also MUST sign the
        Store request with the private key that matches to the certificate
        obtained for the conference URI. This is necessary because in the case
        of the departure of the conference creator, the other focus peers are
        permitted to redirect the mapping to another focus peer still serving
        the conference. The SIP-Registration SHOULD be sent in the same
        StoreReq as the DisCo registration.
</p>
<p>The creator of a distributed conference MUST select on the access
        models as described in section <a class='info' href='#subsec-ls'>Section&nbsp;10.1<span> (</span><span class='info'>Layered Security</span><span>)</span></a> to
        define the desired privacy level of the multiparty conference.
</p>
<p>TODO: a description how a new certificate is generated in the
        RELOAD instance without enrollment server
</p>
<a name="subsec-pcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Proximity-aware Conference Participation</h3>

<p>A RELOAD peer intending to join a distributed conference follows
        the steps showed in <a class='info' href='#fig-conf-join-cf'>Figure&nbsp;5<span> (</span><span class='info'>Participation of a Distributed Conference</span><span>)</span></a> :<br /><hr class="insert" />
<a name="fig-conf-join-cf"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
  Bob      Peer1     Overlay     PeerN     OwnerOfID     Alice
--------------------------------------------------------------
   |   FetchReq Res:Conf-URI Kind:DisCo        |          |
   |---------&gt;|---------&gt;|---------&gt;|---------&gt;|          |
   |          |FetchAns  |          |          |          |
   |&lt;---------|&lt;---------|&lt;---------|&lt;---------|          |
   |          |          |          |          |          |
   |  Bob calculates Alice as closest Focus    |          |
   |          |          |          |          |          |
   |          |AppAttach--application:5060     |          |
   |---------&gt;|---------&gt;|---------&gt;|---------&gt;|---------&gt;|
   |          |AppAttach--application:5060     |          |
   |&lt;---------|&lt;---------|&lt;---------|&lt;---------|&lt;---------|
   |          |          |          |          |          |
   |&lt;-------------------ICE Checks-----------------------&gt;|
   |          |          |          |          |          |
   |          |         INVITE sip:Alice       |          |
   |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&gt;|
   |          |         200 OK      |          |          |
   |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
   |          |         ACK         |          |          |
   |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&gt;|
   |          |          |          |          |          |
   |  Optinally, Alice passes writing permission          |
   |          |          |          |          |          |
   |          |INFO content:Cert{DisCo-Resource}          |
   |&lt;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
   |          |          |          |          |          |</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Participation of a Distributed Conference&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
</p>
<ol class="text">
<li>The joining peer MUST determine its own coordinate value (if
            used).
</li>
<li>The joining peer sends a FetchReq message for the DisCo Kind to
            the Resource-ID that corresponds to the hash over the conference
            URI using the overlays hash-function. The FetchReq SHOULD NOT
            include any specific dictionary keys thus it will receive all
            potential -and active focus peers of the conference.
</li>
<li>Once the joining peer received the Fetch results, it calculates
            which of the focus peers is the relatively closest to itself by
            making the following calculation for each dictionary entry:
<ul class="text">
<li>For each coordinate entry, calculate the each difference Di
                = Fi &ndash; Pi, with Fi is the coordinates vector of the
                Focus peer and Pi the coordinates vector of the joining
                peer.
</li>
<li>For ech Di, calculate the scalar product of Di
</li>
</ul>
</li>
<li>The focus with the smallest scalar product SHOULD be chosen for
            establishing a SIP signaling relation.
</li>
</ol>

<p>Depending on which DisCo-Registration type the selected focus has
        stored its mapping, the joining Peer has the following 2
        possibilities:</p>
<ol class="text">
<li>If the DisCoRegistrationType is sip_focus_node_id, the joining
            peer uses RELOADs AppAttach request to establish a direct
            transport connection to the selected focus peer. The application
            field of the request MUST be set to 5060 indicating for SIP. This
            transport connection SHOULD be used to a form an ordinary SIP
            dialog. Further media session establishment is achieved by usual
            SIP mechanisms.
</li>
<li>If the DisCoRegistrationType is sip_focus_uri, the joining peer
            MUST use the SIP-Registration <a class='info' href='#I-D.ietf-p2psip-sip'>[I&#8209;D.ietf&#8209;p2psip&#8209;sip]<span> (</span><span class='info'>Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;A SIP Usage for RELOAD,&rdquo; March&nbsp;2010.</span><span>)</span></a> Usage to resolve the URI and form connectivity to the
            selected focus.
</li>
</ol>

<p>Note that in the second case a focus peer can have multiple
        locations for its SIP-registration. Therefore a focus MUST assure that
        its coordinate value corresponds to its current mapping AoR to
        location.
</p>
<p>Regardless of how the focus peer has registered its mapping in the
        overlay a joining peer MUST add it's coordinate value base64 encoded
        as URI-parameter in the contact-header field of the SIP INVITE
        request. An example contact URI is
        &ldquo;sip:alice@example.com;coord=YWxpY2VAZXhhbXBsZS5jb20=&rdquo;.
        The additional parameter is used by the requested focus peer as it is
        not capable of serving additional conference participants. It then it
        MUST delegate the call (see section <a class='info' href='#subsec-delc'>Section&nbsp;5.2<span> (</span><span class='info'>Delegating Calls</span><span>)</span></a>) to the focus peer whose coordinate value
        matches next best to the coordinates of the joining peer. The focus
        peer therefore uses the same calculation as described in the joining
        process.
</p>
<p>
</p>
<p>After the final SIP ACK request completes the signaling relation, a
        conference focus MAY passes the writing permission to the new
        participant. It therefore sends a SIP INFO request carrying the
        certificate for the DisCo Resource. The decision whether to pass
        writing permission depends on the selected security model for the
        distributed conference as described in section <a class='info' href='#subsec-ls'>Section&nbsp;10.1<span> (</span><span class='info'>Layered Security</span><span>)</span></a>.
</p>
<a name="subsec-ada"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Advertising Focus Ability</h3>

<p>All participants of a distributed conference can become a focus
        peer for their multiparty. The decision can depend on the capacities
        of the joining peer like sufficient processing power (CPU, Memory) for
        the desired media type and quality of the network connectivity.
        Additionally, a peer intending to become focus of a conference SHOULD
        NOT be located behind NAT or its IP SHOULD NOT belong to the private
        address range. The information whether a participant is behind NAT can
        be obtained by ICE connectivity checks during the conference joining
        process.
</p>
<p>If a participant is a candidate to become a focus of the conference
        it stores its mapping (Destination List or AoR) and coordinate value
        into the DisCo data structure. Because the DisCo Kind uses the
        USER-MATCH access control policy, the shared certificate passed by the
        participant's focus peer is sufficient to permit this peer to write
        the DisCo Resource. By storing the mapping into the data structure a
        participant becomes a potential focus.
</p>
<p>TODO: What to do if the set of Landmark hosts changes during
        conference?
</p>
<a name="subsec-riadc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Resiliance in a Distributed Conference</h3>

<p>The decentralized character of distributed conferences provide
        abilities to prevent the breakdown of the entire multiparty session in
        the case that a focus peer disappears. Two possibilities of a focus
        departure must be distinguished:</p>
<blockquote class="text"><dl>
<dt>Friendly leave:</dt>
<dd>A user whose peer is acting as
            conference focus decides to quit coonference participation.
</dd>
<dt>Unexpected leave:</dt>
<dd>Any case in which a peer serving
            as conference focus fails.
</dd>
</dl></blockquote>

<p>In the friendly case the leaving peer (lp) MUST accomplish the
        following procedure: </p>
<ul class="text">
<li>Lp deletes its mapping in the DisCo data structure by storing
            the "nonexisting" value as described in the RELOAD base document
            <a class='info' href='#I-D.ietf-p2psip-base'>[I&#8209;D.ietf&#8209;p2psip&#8209;base]<span> (</span><span class='info'>Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;REsource LOcation And Discovery (RELOAD) Base Protocol,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</li>
<li>Lp searches the conference state XML document (see section
            <a class='info' href='#sec-csepe'>Section&nbsp;7<span> (</span><span class='info'>Conference State Event Package Extension</span><span>)</span></a>) for 'active' focus peers that
            have free capacities to serve further participants. Additionally,
            it fetches the lastest DisCo data structure for this conference to
            obtain all 'potential' focus peers.
</li>
<li>The lp then calculates for all its related participants the
            closest focus peer using the algorithm described in <a class='info' href='#subsec-dc'>Section&nbsp;4.2<span> (</span><span class='info'>Determining Coordinates</span><span>)</span></a>.
</li>
<li>Based on the results from the previews step lp transfers all
            it's participants to their ascertained focus peers using the call
            delegation described in <a class='info' href='#subsec-delc'>Section&nbsp;5.2<span> (</span><span class='info'>Delegating Calls</span><span>)</span></a>
</li>
</ul>

<p>If an unexpected leave is detected by a participant (e.g. missing
        signaling and/or media packets) it MUST repeat the joining procedure
        as described in <a class='info' href='#subsec-pcp'>Section&nbsp;4.4<span> (</span><span class='info'>Proximity-aware Conference Participation</span><span>)</span></a>.
</p>
<p>Assuming unfavorably circumstances it can happen that the available
        capacities over all potential and active focus peers are insufficient
        to reassemble all lost participants. In this case it RECOMMENDED to
        reassemble as many participants as possible in a first come first
        serve algorithm and to fail the rest.
</p>
<a name="sec-fcco"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Focus Call Control Operations</h3>

<p>This section describes SIP call flows for third party call control
      for distributed conferences. Those operation comprise the call
      delegation and state synchronization mechanisms.
</p>
<a name="subsec-baaf"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Becoming an active Focus</h3>

<p>A conference participant that stored its mapping to the distributed
        DisCo data structure serves as potential focus for further
        participation requests by other peers. On incomming participation
        request a potential focus becomes an active focus and is then
        responsible to grant the joining peer access to the conference. Two
        differnt scenarios for participaton requests must be
        distinguished:</p>
<ul class="text">
<li>A joining peer requests the potential focus
</li>
<li>An already active focus peer transfers a participation request
            to the potential focus
</li>
</ul>

<p>The second case will be dicussed as part of the call delegation in
        <a class='info' href='#subsec-delc'>Section&nbsp;5.2<span> (</span><span class='info'>Delegating Calls</span><span>)</span></a>.
</p>
<p>For the case that a RELOAD peer directly requests a potential focus
        for participation the call flow in <a class='info' href='#fig-sip-direct-inv-cf'>Figure&nbsp;6<span> (</span><span class='info'>Pairwise subscription for conference state synchronization</span><span>)</span></a> describes the necessary
        procedure. The joing peer (JP) has already established a transport
        connection and sends a SIP INVITE request (1) to the contact address
        (IP) to its selected potential focus (PF). Note that JP is thereby
        unaware that PF does not serve any other participants yet. PF is
        participating the conference through its own active focus (AF) and is
        aware of the offered media types for the multiparty session. This PF
        offers the available media parameter to JP in (2). After finalizing
        the signaling in (3) and establishment of the media streams the PF in
        charge to synchronize the distributed conference state. As the first
        step of the pairwise subscrption (4) PF MUST send a SIP SUBSCRIBE
        <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> request to the AF that is the focus
        peer respoonsible for signaling with PF. It subscribes for the
        conference for the event package for conference state<a class='info' href='#RFC4575'>[RFC4575]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> with 'multi-focus' extension <a class='info' href='#sec-csepe'>Section&nbsp;7<span> (</span><span class='info'>Conference State Event Package Extension</span><span>)</span></a>. This document therefore defines a new
        content type "application/distributed-conference-info+xml" for a MIME
        entity that contains conference state information for distributed
        conferences. After confirming the subscription (5) AF informs PF about
        the entire conference state by sending a 'full' XML document. It
        includes the list of all participants, active focus peers and used
        media types. In the second step for in the subscription procudure (8)
        AF MUST subscribe PF for distributed conference. After confirmation in
        (9), PF MUST inform AF about the arrival of JP and also MUST advertise
        its own capacities. Pf therefore sends a NOTIFY request containing a
        'partial' conference state XML document that describes PF's local
        state (e.g. capabilities, responsibilities for JP). This step
        finalizes the promotion of PF to an active focus peer. <br /><hr class="insert" />
<a name="fig-sip-direct-inv-cf"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
JoiningPeer                PotentialFocus                ActiveFocus
--------------------------------------------------------------------
     |  (1) INVITE pot.Focus     |                             |
     |------------------------&gt;  |                             |
     |  (2) 200 OK               |                             |
     |&lt;--------------------------|                             |
     |  (3) ACK                  |                             |
     |--------------------------&gt;|                             |
     |          MEDIA            |                             |
     |&lt;=========================&gt;|                             |
     |                           |                             |
     |            Pot.Focus requests conference state XML      |
     |                           |                             |
     |                           |  (4) SUBSCRIBE-event:disco  |
     |                           |----------------------------&gt;|
     |                           |  (5) 200 OK                 |
     |                           |&lt;----------------------------|
     |                           |  (6) NOTFY conf.state XML   |
     |                           |&lt;----------------------------|
     |                           |  (7) 200 OK                 |
     |                           |----------------------------&gt;|
     |                           |                             |
     |            Active Focus completes pairwise subscription |
     |                           |                             |
     |                           |  (8) SUBSCRIBE event.disco  |
     |                           |&lt;----------------------------|
     |                           |  (9) 200 OK                 |
     |                           |----------------------------&gt;|
     |                           |                             |
     |            Pot.Focus notifies about the new member JP   |
     |                           |                             |
     |                           |  (10) NOTIFY conf.state XML |
     |                           |----------------------------&gt;|
     |                           |  (11) 200 OK                |
     |                           |&lt;----------------------------|</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Pairwise subscription for conference state synchronization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>Depending on whether AF has more subscriptions for the distributed
        conference event package it will synchronize all other focus peers
        sending notifications containing partial conference state XML document
        received from PF.
</p>
<p>Since PF is aware of the entire conference and MAY establishes more
        subscriptions to other active focus peers. This can reduce signaling
        delays and could serve as guideline for new routes for the media
        streams. A specification of how those new subscription should be done
        is a TODO in this document.
</p>
<a name="subsec-delc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Delegating Calls</h3>

<p>The call delegation feature described in this document provides
        focus peers the possibility to transfer an incoming participation
        request to another focus peer. A focus peer SHOULD delegate incoming
        participation requests if the number of participants it currently
        maintains is equal to the 'max_participants' value the focus
        advertised in the distributed conference XML document.
</p>
<p>A sample scenario for call delegation in shown in <a class='info' href='#fig-sip-refer-inv-cf'>Figure&nbsp;7<span> (</span><span class='info'>Call delegation to potential focus peer</span><span>)</span></a>. A joining peer (JP) requests
        the active focus (AF) for conference participation (1). AF has no more
        capacity to serve JP as focus peer and has to transfer the call. AF
        firstly temporally accepts the call (2-3) and then selects an adequate
        focus peer for call delegation based on JP's coordinate value (sent
        base64 encoded as URI parameter in (1) see section <a class='info' href='#subsec-pcp'>Section&nbsp;4.4<span> (</span><span class='info'>Proximity-aware Conference Participation</span><span>)</span></a>). AF fetches the lastest DisCo data
        structure (not shown in <a class='info' href='#fig-sip-refer-inv-cf'>Figure&nbsp;7<span> (</span><span class='info'>Call delegation to potential focus peer</span><span>)</span></a>)
        to obain all available potential and active focus peers. As shown in
        the exmaple, AF determines the potential focus (PF) as best candidate
        to become JP's focus and transfers the participation request to PF
        sending a SIP REFER request (4). The REFER request MUST contain the
        session identifier from JP as payload in the request body and the
        call-ID of (1) as parameter in the URI of the refer-to header field,
        e.g., 'Refer-To: &lt;sip:bob@dht.example;call-id=1234&gt;'
</p>
<p>Triggered by the REFER request PF is in charge to become JP's focus
        peer and to enter the conference state sychronization process. Because
        the call delegation operation should not interrupt JP's participation
        request PF MUST use the signaling and session information of (4). PF
        sends a re-INVITE request to JP that appears as it were orginated by
        AF with an additional Record-Route header field set to PF's contact
        address. By using this technique a distributed conference appeares as
        one single entity. The additional Record-Route header thereby ensures
        that further SIP signaling will be routed to PF. After the signaling
        process the negotiated media session can be established.
</p>
<p>PF then is in charge to enter the conference state synchronization
        mechanism by pairwise subscribting PF-&gt;AF, AF--&gt;PF for the event
        package for conference with multi-focus extension (9-14) as described
        <a class='info' href='#subsec-baaf'>Section&nbsp;5.1<span> (</span><span class='info'>Becoming an active Focus</span><span>)</span></a>. Note that PF could subscribe
        another active focus peer than AF since this is not necessarily the
        conference controller responsible for PF.<br /><hr class="insert" />
<a name="fig-sip-refer-inv-cf"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
JoiningPeer                 ActiveFocus               PotentialFocus
--------------------------------------------------------------------
     |  (1) INVITE act.Focus    |                           |
     |-------------------------&gt;|                           |
     |  (2) 200 OK              |                           |
     |&lt;-------------------------|                           |
     |  (3) ACK                 |                           |
     |-------------------------&gt;|                           |
     |                          |                           |
     |      AF reached its threshold for serving new calls  |
     |                          |                           |
     |                          | (4) REFER refer-to:JP     |
     |                          |--------------------------&gt;|
     |                          | (5) 200 OK                |
     |                          |&lt;--------------------------|
     |                          |                           |
     |      PF re-invites JP using AF's contact             |
     |                          |                           |
     |  (6) INVITE JP record-route:potentialFocus           |
     |&lt;-----------------------------------------------------|
     |  (7) 200 OK              |                           |
     |-----------------------------------------------------&gt;|
     |  (8) ACK                 |                           |
     |&lt;-----------------------------------------------------|
     |                        MEDIA                         |
     |&lt;====================================================&gt;|
     |                          | (9) SUBSCRIBE event:disco |
     |                          |&lt;------------------------- |
     |                          | (10) 200 OK               |
     |                          |-------------------------&gt; |
     |                          | (11) NOTIFY conf.state XML|
     |                          |-------------------------&gt; |
     |                          | (12) SUBSCRIBE event:disco|
     |                          |--------------------------&gt;|
     |                          | (13) 200 OK               |
     |                          |&lt;--------------------------|
     |                          | (14) NOTIFY conf.state XML|
     |                          |&lt;--------------------------|</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Call delegation to potential focus peer&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Synchronizing the Conference State</h3>

<p>The entire state of the distributed conference changes partly on
        every event that happens at an active focus peer. Most commenly those
        events refer to joins or lefts of conference participants. In order to
        maintain a coherent conference state all focus peers MUST send NOTIFY
        messages <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> to all subscribers (other
        focus peers) to synchronize the conference state. The payload of the
        notifications MUST only contain a partial state information about the
        changes in the state from the previews conference state.
</p>
<p>If the connection graph build by the pairwise subscriptions between
        the focus peers is not structured in a full mesh topology, state
        notifations MUST be forwarded by intermediate focus peers. The
        extension for the event package described in <a class='info' href='#sec-csepe'>Section&nbsp;7<span> (</span><span class='info'>Conference State Event Package Extension</span><span>)</span></a> therefore provides an XML element that
        allows every focus to reconstruct the connection graph among the focus
        peers.
</p>
<p>If a state notification is received multiple times a focus peer
        MUST NOT forward the dublicate state information for prevent
        loops.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
DISCO Kind Definition</h3>

<p>This section formally defines the DisCo kind.</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>Name
    DISCO-REGISTRATION

Kind IDs
    The Resource name DISCO-REGISTRATION Kind-ID is the AOR of the
    conference. The data stored is the DisCoRegistrationData, that
    contains a coordinates value describing a peers relative network
    position acting as focus for the conference. Additionally it
    contains either the peers URI or a Destination list.

Data Model
    The data model for the DISCO-REGISTRATION Kind-ID is dictionary.
    The dictionary key is
    the Node-ID of the peer action as focus.

Access Control
    USER-MATCH

The data stored for the Kind-ID DISCO-REGISTRATION is of type
DisCoRegistration. It contains a "coordinates" value, that
describes the peers relative network position and
XOR one of the two following data:

    sip_focus_uri
        the URI of the peer action as focus
    sip_focus_node_id
        the Destination list of the peer acting as focus</pre></div><p>

</p>
<a name="sec-csepe"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Conference State Event Package Extension</h3>

<p>This section presents the XML extension for the event package for
      conference state that enables a focus peer to have a view on the
      responsibilities of each other focus peer. The additional information by
      exentending the XML schema defined RFC4575 <a class='info' href='#RFC4575'>[RFC4575]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a> is can be used in the case of a focus departure
      and call delegations. The new &lt;focus-states&gt; element as shown in
      <a class='info' href='#fig-fsp'>Figure&nbsp;8</a> is placed as child-of the root-element
      &lt;conference-info&gt;. It's child element &lt;focus&gt; represents
      every conference participant that is in the role of an active focus peer
      to the conference.
</p><br /><hr class="insert" />
<a name="fig-fsp"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 conference-info
    |
    |-- conference-description
    |
    |-- host-info
    |
    |-- users
    |
    |-- focus-states
    |      |
    |      |-- focus
    |
    ..
    |-- ..</pre></div>
<a name="subsubsec-fse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
The &lt;focus-states&gt; and &lt;focus&gt; elements</h3>

<p>The &lt;focus-states&gt; element serves as container of the
        &lt;focus&gt; sub-elements, each describing the responsibilities of a
        conference participant acting as focus peer.
</p>
<p>The &lt;focus&gt; uses the following attributes:</p>
<blockquote class="text"><dl>
<dt>entity:</dt>
<dd>This attribute contains the AoR of the focus
            peer that is declared in the user name field in the RELOAD
            certificate. This AoR MUST correspond to the entity attribute
            defined in the focus peer's &lt;user&gt; element in the base
            conference event package. A user that whishes to lookup a focus
            peer's signaling information can retrieve it by looking at the
            corresponding &lt;user&gt; element with the same AoR in the entity
            attribute.
</dd>
<dt>state:</dt>
<dd>This attribute indicates whether the
            transmitted conference state for this focus peer is 'full',
            'partial' or 'deleted' and have to be interpreted as defined in
            <a class='info' href='#RFC4575'>[RFC4575]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a>.
</dd>
</dl></blockquote>

<p>The &lt;focus&gt; element uses the complex focus-type that contains
        the following child-elements:</p>
<blockquote class="text"><dl>
<dt>&lt;focus-capacity&gt; :</dt>
<dd>This element describes a
            focus peer's maximal number of participants it can serve
            respectively the maximal number media connections to other focus
            peers it can handle.
</dd>
<dt>&lt;participant&gt; :</dt>
<dd>Each participant element
            describes a conference member that has this focus peer as it's
            conference controller. It uses the 'entity' attribute that
            contains the AoR that this RELOAD peer uses as user name in the
            overlay certificate. It corresponds to the AoR in the &lt;user&gt;
            element in the base conference event XML document. Additionally,
            the &lt;participants&gt; element uses the 'state' attribute to
            provide the partial notification mechanism as defined in <a class='info' href='#RFC4575'>[RFC4575]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a>.
</dd>
<dt>&lt;graph&gt; :</dt>
<dd>Each &lt;graph&gt; element describes
            a conference state synchronization relation this focus peer
            maintains. By reference to this element each conference controller
            has a view of the entire synchronization topology over the focus
            peers. It uses the 'state' attribute as well.
</dd>
</dl></blockquote>

<a name="subsec-xmls"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
XML Schema</h3>

<p>The schema for XML extension is:<br /><hr class="insert" />
<a name="fig-inet-ci-multifocus"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema
  targetNamespace="http://www.example.org/inet-ci-multifocus-ext"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns="http://www.example.org/inet-ci-multifocus-ext"
  elementFormDefault="qualified" &gt;
  &lt;!--
       FOCUS STATES ELEMENT
  --&gt;
    &lt;xs:element name="focus-states" type="focus-states-type"/&gt;
    &lt;xs:complexType name="focus-states-type"&gt;
        &lt;xs:sequence&gt;
        &lt;!--
            FOCUS ELEMENT
        --&gt;
            &lt;xs:element name="focus" type="focus-type"
            maxOccurs="unbounded" minOccurs="0"/&gt;
            &lt;xs:any namespace="##other" processContents="lax"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="state" type="state-type"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;
    &lt;!--
        FOCUS TYPE
    --&gt;
    &lt;xs:complexType name="focus-type"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name="focus-capacity"
            type="focus-capacity-type" maxOccurs="1" minOccurs="0"/&gt;
            &lt;xs:element name="participant" type="participant-type"
            maxOccurs="unbounded" minOccurs="0"/&gt;
            &lt;xs:element name="graph" type="graph-type"
            maxOccurs="unbounded" minOccurs="0"/&gt;
            &lt;xs:any namespace="##other" processContents="lax"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="entity" type="xs:anyURI"/&gt;
        &lt;xs:attribute name="state" type="state-type"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;
    &lt;!--
        FOCUS-CAPACITY TYPE
    --&gt;
    &lt;xs:complexType name="focus-capacity-type"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name="max-participants" type="xs:int"
            maxOccurs="1" minOccurs="0"/&gt;
            &lt;xs:element name="max-focus-references" type="xs:int"
            maxOccurs="1" minOccurs="0"/&gt;
            &lt;xs:any namespace="##other" processContents="lax"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="state" type="state-type"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;
    &lt;!--
        PARTICIPANT TYPE
    --&gt;
    &lt;xs:complexType name="participant-type"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:any namespace="##other" processContents="lax"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="entity" type="xs:anyURI"/&gt;
        &lt;xs:attribute name="state" type="state-type"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;
    &lt;!--
        GRAPH TYPE
    --&gt;
    &lt;xs:complexType name="graph-type"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name="ref-to-focus" type="xs:anyURI"
        maxOccurs="1" minOccurs="0"/&gt;
            &lt;xs:any namespace="##other" processContents="lax"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="state" type="state-type"/&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;</pre></div><p>

</p>
<a name="sec-cde"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Configuration Document Extension</h3>

<p>This section defines an additional parameter for the
      &lt;configuration&gt; element that extends the RELOAD XML configuration
      document. The proposed &lt;landmarks&gt; element allows RELOAD provider
      to publish a set of accessible and reliable hosts that SHOULD be used if
      RELOAD peers use landmarking algorithms to determine relative position
      in the network topology.
</p>
<a name="subsec-lalh"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
The &lt;landmark&gt; and &lt;Landmark-host&gt; elements</h3>

<p>The &lt;landmarks&gt; element serves as container of the
        &lt;landmark-host&gt; sub-elements each representing a single host
        that serves a landmark. The &lt;landmark-host&gt; uses the following
        attributes:</p>
<blockquote class="text"><dl>
<dt>address:</dt>
<dd>The IP address (IPv4 or IPv6) of the
            landmark host.
</dd>
<dt>port:</dt>
<dd>The port on which the landmark host responses
            for distance estimation.
</dd>
</dl></blockquote><p> More than one landmark hosts SHOULD be present in the
        configuration document.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Relax NG Grammar</h3>

<p>The grammar for the Landmark configuration document extension
        is:
</p><br /><hr class="insert" />
<a name="fig-le"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;!--
    LANDMARKS ELEMENT
--&gt;
parameter &amp;amp;= element landmarks {
    attribute version { xsd:int }
    &lt;!--
        LANDMARK-HOST ELEMENT
    --&gt;
    element landmark-host {
        attribute address { xsd:string },
        attribute port { xsd:int }
    }*
}?</pre></div>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Example</h3>

<p>TODO: Call flow examples for joining, delegating
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<a name="subsec-ls"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
Layered Security</h3>

<p>TODO: An ad hoc conference can be set up to a layered security
        model. Three models: open access, focus authenticate, closed access
        model.
</p>
<a name="subsec-ta"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
Trust Aspects</h3>

<p>TODO: Describing the privacy level for a conference instance;
        define whether a joining user is allowed to become a member or even
        focus of a conference.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
IANA Considerations</h3>

<p>TODO: register Kind-ID code point at the IANA
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-p2psip-base">[I-D.ietf-p2psip-base]</a></td>
<td class="author-text">Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-p2psip-base-08.txt">REsource LOcation And Discovery (RELOAD) Base Protocol</a>,&rdquo; draft-ietf-p2psip-base-08 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-p2psip-base-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-p2psip-sip">[I-D.ietf-p2psip-sip]</a></td>
<td class="author-text">Jennings, C., Lowekamp, B., Rescorla, E., Baset, S., and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-p2psip-sip-04.txt">A SIP Usage for RELOAD</a>,&rdquo; draft-ietf-p2psip-sip-04 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-p2psip-sip-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4575">[RFC4575]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;<a href="http://tools.ietf.org/html/rfc4575">A Session Initiation Protocol (SIP) Event Package for Conference State</a>,&rdquo; RFC&nbsp;4575, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4575.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-p2psip-concepts">[I-D.ietf-p2psip-concepts]</a></td>
<td class="author-text">Bryan, D., Matthews, P., Shim, E., Willis, D., and S. Dawkins, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-p2psip-concepts-02.txt">Concepts and Terminology for Peer to Peer SIP</a>,&rdquo; draft-ietf-p2psip-concepts-02 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-p2psip-concepts-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4353">[RFC4353]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4353">A Framework for Conferencing with the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4353, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4353.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alexander Knauf</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">HAW Hamburg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Berliner Tor 7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hamburg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+4940428758067</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alexander.knauf@haw-hamburg.de">alexander.knauf@haw-hamburg.de</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inet.cpt.haw-hamburg.de/members/knauf">http://inet.cpt.haw-hamburg.de/members/knauf</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Gabriel Hege</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">HAW Hamburg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Berliner Tor 7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hamburg  D-20099</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+4940428758067</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hege@fhtw-berlin.de">hege@fhtw-berlin.de</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inet.cpt.haw-hamburg.de/members/hege">http://inet.cpt.haw-hamburg.de/members/hege</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Thomas C. Schmidt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">HAW Hamburg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Berliner Tor 7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hamburg  20099</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:schmidt@informatik.haw-hamburg.de">schmidt@informatik.haw-hamburg.de</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inet.cpt.haw-hamburg.de/members/schmidt">http://inet.cpt.haw-hamburg.de/members/schmidt</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Matthias Waehlisch</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">link-lab &amp; FU
      Berlin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hoenower Str. 35</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Berlin  D-10318</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mw@link-lab.net">mw@link-lab.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.inf.fu-berlin.de/~waehl">http://www.inf.fu-berlin.de/~waehl</a></td></tr>
</table>
</body></html>
