

   CCAMP                                                                     
   Internet Draft                                   Diego Caviglia (Marconi) 
                                                      Dino Bramanti (Marconi) 
                                                     Huub van Helvoort(Huawei 
                                                            Technologies Ltd) 
   Document: draft-caviglia-ccamp-gmpls-msspring-                            
   req-00 
   Expires: April 2006                                          October 2005 
       
       
                     GMPLS Requirements for MS-SPRing support 
       
      Status of this Memo 
       
      By submitting this Internet-Draft, each author represents that any  
      applicable patent or other IPR claims of which he or she is aware  
      have been or will be disclosed, and any of which he or she becomes  
      aware will be disclosed, in accordance with Section 6 of BCP 79.  
           
      Internet-Drafts are working documents of the Internet Engineering  
      Task Force (IETF), its areas, and its working groups.  Note that  
      other groups may also distribute working documents as Internet-  
      Drafts.  
           
      Internet-Drafts are draft documents valid for a maximum of six months  
      and may be updated, replaced, or obsoleted by other documents at any  
      time. It is inappropriate to use Internet-Drafts as reference  
      material or to cite them other than as ôwork in progressö.  
       
      The list of current Internet-Drafts can be accessed at  
      http://www.ietf.org/1id-abstracts.html  
           
      The list of Internet-Draft Shadow Directories can be accessed at  
      http://www.ietf.org/shadow.html  
       
      Abstract 
       
      GMPLS [1] provides ideally a robust and flexible control plane 
      protocols set designed for application over generalized transport 
      network. A typical application of GMPLS is, among others, the control 
      of transport networks based on SDH/SONET [2] technology. In this 
      scenario, the introduction of GMPLS based control plane should ensure 
      support of and/or compatibility with the most important and widely 
      exploited SDH/SONET features, making possible a seamless interworking 
      with inherent data plane requirements. In this document we focus on 
      one of the most attractive SDH/SONET protection mechanism, 
      implemented through MS-SPRing (G.841 [3]), a widely deployed ITU 
      standard for ring-shared protection.  
       
    
    
   Caviglia                 Expires - April 2006                 [Page 1] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
      In general, when setting up and configuring a data plane circuit 
      traversing a MS-SPRing ring (or segments of it) via traditional 
      management plane control, special constraints, which are specific to 
      this kind of technology, have to be considered in order to ensure its 
      correct operation. The same constraints have to be carefully taken 
      into account when the data plane circuit is no more set up in a 
      traditional way, but through a GMPLS based control plane.   
      The specific constraints imposed by MS-SPRing are related to: 
       
      . Time Slot Interchange (TSI) 
      . Ring Map filling in case of squelching 
       
      In this document a brief overview of MS-SPRing operation is 
      introduced and its specific requirements are explained, putting in 
      evidence the way they may impact when GMPLS is used as control plane.    
       
      Conventions used in this document 
       
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
      "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
      document are to be interpreted as described in RFC-2119 [4]. 
       
                                Table of Contents 
       
      1. MS-SPRing Bird Eye Overview...................................3 
      1.1 Information needed by MS-SPRing..............................5 
      1.2 MS-SPRing Example............................................6 
      1.3 Time Slot Interchange (TSI).................................11 
      1.4 Squelching..................................................11 
      2. GMPLS requirements imposed by MS-SPRing......................13 
      2.1 LSP Set-Up..................................................13 
      2.2 Data Plane and Control Plane misalignment...................13 
      2.3 Interworking between GMPLS restoration and MS-SPRing Protection14 
      3. Security Considerations......................................14 
      References......................................................14 
      Acknowledgments.................................................15 
      Author's Addresses..............................................15 
       











    
    
   Caviglia                 Expires - April 2006                 [Page 2] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
       
   1. MS-SPRing Bird Eye Overview 
       
      The main reference for this Section is ITU-T G.841.  G.841 defines 
      two different kinds of MS-SPRing namely two fibers and four fibers. 
       
      Two-fiber MS switched rings require only two fibers for each span of 
      the ring. Each fiber carries both working channels and protection 
      channels. On each fiber, up to half the channels are defined as 
      working channels and up to half are defined as protection channels.  
       
      It is possible that some channels are not protected at all, being 
      defined as Non-pre-emptible Unprotected Traffic (NUT) channels. 
      The traffic carried on working channels inside one fiber is protected 
      by channels going in the opposite direction around the ring.  This 
      allows for a bi-directional transport of normal traffic and makes 
      possible a sharing of the protection resources when needed.  
       
      The following picture illustrates the two fibers case, no NUT in this 
      example. 
      WPx links are 50% for worker traffic and 50% for protection traffic, 
      e.g. and STM-16 links have 8 AU-4 timeslot for worker traffic and 8 
      AU-4 timeslot for protection. 
       
       
            TNE A                     TNE B                     TNE C                
       +------------+            +------------+            +------------+ 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       |            |----------->|            |----------->|            | 
       |            |    WP1     |            |     WP2    |            | 
       |            |<-----------|            |<-----------|            | 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       +------------+            +------------+            +------------+ 
         ^     |                                               ^     | 
         |     |                                               |     | 
         |     |                                               |     | 
         | WP3 |             WP Links Resources are            | WP4 | 
         |     |                50% Worker                     |     | 
         |     |                50% Protection                 |     | 
         |     v                                               |     v 
       +------------+            +------------+            +------------+ 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       |            |----------->|            |----------->|            | 
    
    
   Caviglia                 Expires - April 2006                 [Page 3] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
       |            |    WP5     |            |    WP6     |            | 
       |            |<-----------|            |<-----------|            | 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       |            |            |            |            |            | 
       +------------+            +------------+            +------------+ 
           TNE F                     TNE E                      TNE D 
       
                Figure 1-1: MS-SPRing two fibers reference circuit 
       
      Four-fiber MS shared protection rings require four fibers for each 
      span of the ring. As illustrated in Figure 1-2, working and 
      protection channels are carried over different fibers: two multiplex 
      sections transmitting in opposite directions carry the working 
      channels while two multiplex sections, also transmitting in opposite 
      directions, carry the protection channels. This enables the bi-
      directional transport of normal traffic, sharing as well the 
      protection capability. 
       
      The following picture illustrates the reference circuit (four fiber 
      MS-SPRing) used in this Section.   
       
            TNE A                     TNE B                     TNE C                
       +------------+            +------------+            +------------+ 
       |            |            |            |            |            | 
       |            |----------->|            |----------->|            | 
       |            |     W1     |            |     W2     |            | 
       |            |<-----------|            |<-----------|            | 
       |            |            |            |            |            | 
       |            |===========>|            |===========>|            | 
       |            |     P1     |            |     P2     |            | 
       |            |<===========|            |<===========|            | 
       |            |            |            |            |            | 
       +------------+            +------------+            +------------+ 
         ^  |  ^  l                                          ^  l  ^  | 
         |  |  l  l                                          l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |W3|  lP3l       ------------ Working Link          lP4l  |W4| 
         |  |  l  l       llll and === Protection Link       l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |  v  l  v                                          l  v  |  v 
       +------------+            +------------+            +------------+ 
       |            |            |            |            |            | 
       |            |===========>|            |===========>|            | 
       |            |     P5     |            |     P6     |            | 
       |            |<===========|            |<===========|            | 
       |            |            |            |            |            | 
       |            |----------->|            |----------->|            | 
       |            |     W5     |            |     W6     |            | 
    
    
   Caviglia                 Expires - April 2006                 [Page 4] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
       |            |<-----------|            |<-----------|            | 
       |            |            |            |            |            | 
       +------------+            +------------+            +------------+ 
            TNE F                    TNE E                      TNE D 
       
         Figure 1-2: Reference circuit for MS-SPRing, four fibers variant 
                                          
       
   1.1 Information needed by MS-SPRing 
       
      The MS-SPRing protection mechanism is implemented via a SDH 
      signalling protocol known as Automatic Protection Switching (APS). 
      This protocol makes use of SDH overhead bytes (K1 and K2, MS overhead 
      bytes) as a means to transport its own information. APS is not 
      detailed here as it is outside the scope of this document. 
       
      Each node on the ring shall be assigned an ID that is a number from 0 
      to 15, allowing a maximum of 16 nodes on the ring. Such ID value is 
      not related to the position of corresponding node in the ring, i.e. 
      the order of the nodes is not tied to nodes ID assignment. 
       
      Each node has a ring topology map that associates a nodeÆs ID with 
      its address. 
       
      With respect to the Figures 1-1/2 the ring topology map is: 
       
                              TNE-ID   TNE-Address 
                                 1           B 
                                 2           F 
                                 3           A 
                                 4           E 
                                 5           C 
                                 6           D 
       
                           Table 1-1 Ring Topology map 
       
      The following tables represent the traffic matrix of the ring and the 
      squelching (for definition of squelching please refer to Section 1.4) 
      tables of the TNEs. 
       
       
      +------------------------------------------------------------------+ 
      |   AU   | <---- West               Nodes                East ---->| 
      | Number |  A         B          C        D        E        F     A| 
      +--------+---------------------------------------------------------+ 
      |  1     |  <--------> <------------------>                        | 
      |  2     |  <----------------------------->                        | 
      |  3     |  <--------------------><------------------------->      | 
      +------------------------------------------------------------------+ 
    
    
   Caviglia                 Expires - April 2006                 [Page 5] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
                                          
                             Table 1-2 Traffic Matrix 
       
      +---------------------------------+--------------------------------- 
                        TNE-A           |                TNE-B           
         AU       West           East   | AU       West              East 
               Src   Dst      Src   Dst |       Src   Dst         Src   Dst 
         1                     A     B  | 1      B     A           B     D 
         2                     A     D  | 2      D     A           A     D 
         3                     A     C  | 3      C     A           C     F 
      ----------------------------------+---------------------------------- 
       
       
      ----------------------------------+--------------------------------- 
                        TNE-C           |                TNE-D           
         AU       West           East   | AU       West              East 
               Src   Dst      Src   Dst |       Src   Dst         Src   Dst 
         1      D     B        B     D  | 1      D     B           B     D 
         2      D     A        A     D  | 2      D     A           A     D 
         3      C     A        C     F  | 3      F     C           C     F 
      ----------------------------------+--------------------------------- 
       
       
      ----------------------------------+--------------------------------- 
                        TNE-E           |                TNE-F           
         AU       West           East   | AU       West              East 
               Src   Dst      Src   Dst |       Src   Dst         Src   Dst 
         1                              | 1 
         2                              | 2 
         3      F     C        C     F  | 3      F     C           C      F 
      ----------------------------------+--------------------------------- 
       
                            Table 1-3 Squelching Table 
       
      When a node determines that a protection switch is required, it 
      sources the appropriate bridge request using the APS protocol to the 
      node at the far end of the affected MS (for more details on how APS 
      carries that information please refer to G.841 [4]). 
       
      WeÆll call Ring Map the sum of the information contained in all the 
      above Tables. 
       
   1.2 MS-SPRing Example 
       
      The worker circuit follows this path (4_fibers/2_fibers): 
       
      TNE-A <-Link W1/WP1-> TNE-B <-Link W2/WP2-> TNE-C <-Link W4/WP4-> 
      TNE-D : AU Timeslot 1 
       
    
    
   Caviglia                 Expires - April 2006                 [Page 6] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
      In four fibers scenario failure of Links W2 and P2 triggers the MS-
      SPRing protection.   
       
      Traffic is protected using this path:  
       
      TNE-A <-Link W1-> TNE-B [Internal Bridge] <-Link P1-> TNE-A <-Link 
      P3-> TNE F <-Link P5-> TNE-E <-Link P6-> TNE-D <-Link P4-> TNE-C 
      [Internal Bridge] <- Link W4 -> TNE-D: AU Timeslot 1. 
       
      The following picture illustrates the state of the network after the 
      recovery, by means of MS-SPRing, of the failure. 
       
       
       
                  1   
           TNE A  v                  TNE B                      TNE C                
       +----------|-+            +------------+            +------------+ 
       |          | |            |            |            |            | 
       |          +------------->----->----+  |XXXXXXXXXXXX| +--------+ | 
       |            |     W1     |         |  |     W2     | |        | | 
       |            |<-----------|         |  |XXXXXXXXXXXX| |        | | 
       |            |            |         v  |            | ^        v | 
       |            |===========>|         |  |XXXXXXXXXXXX| |        | | 
       |            |     P1     |         |  |     P2     | |        | | 
       |          +--<===========-----<----+  |XXXXXXXXXXXX| |        | | 
       |          | |            |            |            | |        | | 
       +----------|-+            +------------+            +-|--------|-+ 
         ^  |  ^  l                                          ^  l  ^  | 
         |  |  l  l                                          l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |W3|  lP3l       ------------ Working Link          lP4l  |W4| 
         |  |  l  l       llll and === Protection Link       l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |  v  l  v                                          l  v  |  v 
       +----------|-+            +------------+            +-|--------|-+ 
       |          | |            |            |            | |        | | 
       |          +--===========>------->------===========>--+        | | 
       |            |     P5     |            |     P6     |          | | 
       |            |<===========|            |<===========|          | | 
       |            |            |            |            |          v | 
       |            |----------->|            |----------->|          | | 
       |            |     W5     |            |     W6     |          | | 
       |            |<-----------|            |<-----------|          | | 
       |            |            |            |            |          | | 
       +------------+            +------------+            +----------|-+ 
        TNE F                     TNE E                     TNE D     v 
                                                                      1 
                 Figure 1-3: MS-SPRing four fibers ring-switching 
       
    
    
   Caviglia                 Expires - April 2006                 [Page 7] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
      The extra traffic in spans P1, P3, P4, P5 and P6 is affected. 
       
      Note that in this case working traffic passes the same section two 
      times, i.e. link W1 and link P1, link P4 and link W4. 
      If these sections are very long, e.g. in trans-oceanic applications, 
      the propagation delay is affected considerably and will result in a 
      degradation of performance. 
      For trans-oceanic applications intermediate nodes, not adjacent to an 
      affected section, will switch bridges as well. 
       
      Traffic is now protected using this path:  
       
      TNE-A [Internal Bridge] TNE-A <-Link P3-> TNE F <-Link P5-> TNE-E <-
      Link P6-> TNE-D [Internal Bridge] TNE-D: AU Timeslot 1. 
       
      The following picture illustrates the state of the network after the 
      recovery, by means of trans-oceanic MS-SPRing, of the failure. 
       
                  1   
           TNE A  v                  TNE B                      TNE C                
       +----------|-+            +------------+            +------------+ 
       |          | |            |            |            |            | 
       |          | |----------->|            |XXXXXXXXXXXX|            | 
       |          | |     W1     |            |     W2     |            | 
       |          | |<-----------|            |XXXXXXXXXXXX|            | 
       |          v |            |            |            |            | 
       |          | |===========>|            |XXXXXXXXXXXX|            | 
       |          | |     P1     |            |     P2     |            | 
       |          | |<===========|            |XXXXXXXXXXXX|            | 
       |          | |            |            |            |            | 
       +----------|-+            +------------+            +------------+ 
         ^  |  ^  l                                          ^  l  ^  | 
         |  |  l  l                                          l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |W3|  lP3l       ------------ Working Link          lP4l  |W4| 
         |  |  l  l       llll and === Protection Link       l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |  v  l  v                                          l  v  |  v 
       +----------|-+            +------------+            +------------+ 
       |          | |            |            |            |            | 
       |          +--===========>------->------===========>------>----+ | 
       |            |     P5     |            |     P6     |          | | 
       |            |<===========|            |<===========|          | | 
       |            |            |            |            |          v | 
       |            |----------->|            |----------->|          | | 
       |            |     W5     |            |     W6     |          | | 
       |            |<-----------|            |<-----------|          | | 
       |            |            |            |            |          | | 
       +------------+            +------------+            +----------|-+ 
    
    
   Caviglia                 Expires - April 2006                 [Page 8] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
        TNE F                     TNE E                     TNE D     v 
                                                                      1 
          Figure 1-4: MS-SPRing four fibers trans-oceanic ring-switching 
       
      Only the extra traffic in spans P3, P5 and P6 is affected. 
       
      Instead of bridging all working traffic to the protections channels 
      in the nodes adjacent to the failure in trans-oceanic ring-switching 
      the individual AU tributaries are switched in their ingress and 
      egress nodes using ring maps and APS information. Due to the transfer 
      and evaluation of the information more time is required for the 
      protection switch to complete, the objective is 300 ms or less.  
      Because tributaries are switched in their ingress and egress nodes no 
      squelching is required and protection channels not required for 
      protection may carry pre-empted extra traffic. 
      A mechanism is required to auto-provision the ring maps and maintain 
      their consistency. 
       
      In two fibers scenario failure of Links W2 and P2 triggers the MS-
      SPRing protection.   
       
      Traffic is protected using this path:  
       
      TNE-A <-Link WP1-> TNE-B [Internal Bridge] <-Link WP1-> TNE-A <-Link 
      WP3-> TNE F <-Link WP5-> TNE-E <-Link WP6-> TNE-D <-Link WP4-> TNE-C 
      [Internal Bridge] <- Link WP4 -> TNE-D: AU Timeslot 1 is used on all 
      the links. 
       
      The following picture illustrates the state of the network after the 
      recovery from the failure done by means of MS-SPRing mechanism. 
       
       
                  | 
         TNE A    v                    TNE B                     TNE C               
       +------------+            +------------+            +------------+ 
       |          | |            |            |            |            | 
       |          | |            |            |            |            | 
       |          | |            |            |            |            | 
       |          +-|----------->|------+     |xxxxxxxxxxx>|   +-----+  | 
       |            |    WP1     |      |     |     WP2    |   |     |  | 
       |       +----|<-----------|------+     |<-----------|   ^     v  | 
       |       |    |            |            |            |   |     |  | 
       |       |    |            |            |            |   |     |  | 
       |       |    |            |            |            |   |     |  | 
       +------------+            +------------+            +------------+ 
         ^     |                                               ^     | 
         |     |                                               |     | 
         |     |                                               |     | 
         | WP3 |             WP Links Resources are            | WP4 | 
    
    
   Caviglia                 Expires - April 2006                 [Page 9] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
         |     |                50% Worker                     |     | 
         |     |                50% Protection                 |     | 
         |     v                                               |     v 
       +------------+            +------------+            +------------+ 
       |       |    |            |            |            |   |     |  | 
       |       |    |            |            |            |   |     |  | 
       |       |    |            |            |            |   |     |  | 
       |       +----|----------->|------------|----------->|---+     |  | 
       |            |    WP5     |            |    WP6     |         |  | 
       |            |<-----------|            |<-----------|         |  | 
       |            |            |            |            |         |  | 
       |            |            |            |            |         |  | 
       |            |            |            |            |         |  | 
       +------------+            +------------+            +------------+ 
           TNE F                     TNE E                    TNE D  v 
       
                 Figure 1-5: MS-SPRing two fibers ring-switching 
       
      Figure 1-3 and 1-5 illustrates the so-called ôring-switchingö 
      protection. 
       
      In four-fiber MS-SPRing there exists also ôspan-switchingö and in 
      this case only the working fibers are cut while the protection fibers 
      remain intact. See figure 1-6. The protection switch affects the 
      extra traffic in span P2. 
       
                  1   
           TNE A  v                   TNE B                     TNE C                
       +----------|-+            +------------+            +------------+ 
       |          | |            |            |            |            | 
       |          +------------->----->----+  |XXXXXXXXXXXX| +--------+ | 
       |            |     W1     |         |  |     W2     | |        | | 
       |            |<-----------|         v  |XXXXXXXXXXXX| ^        | | 
       |            |            |         |  |            | |        | | 
       |            |===========>|         +---===========>--+        v | 
       |            |     P1     |            |     P2     |          | | 
       |            |<===========|            |<===========|          | | 
       |            |            |            |            |          | | 
       +------------+            +------------+            +----------|-+ 
         ^  |  ^  l                                          ^  l  ^  | 
         |  |  l  l                                          l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |W3|  lP3l       ------------ Working Link          lP4l  |W4| 
         |  |  l  l       llll and === Protection Link       l  l  |  | 
         |  |  l  l                                          l  l  |  | 
         |  v  l  v                                          l  v  |  v 
       +------------+            +------------+            +----------|-+ 
       |            |            |            |            |          | | 
       |            |===========>|            |===========>|          | | 
    
    
   Caviglia                 Expires - April 2006                [Page 10] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
       |            |     P5     |            |     P6     |          | | 
       |            |<===========|            |<===========|          | | 
       |            |            |            |            |          v | 
       |            |----------->|            |----------->|          | | 
       |            |     W5     |            |     W6     |          | | 
       |            |<-----------|            |<-----------|          | | 
       |            |            |            |            |          | | 
       +------------+            +------------+            +----------|-+ 
          TNE F                     TNE E                     TNE D   v 
                                                                      1 
       
                        Figure 1-6: MS-SPRing span-switch 
       
   1.3 Time Slot Interchange (TSI)  
       
      TSI is the connection function capability of changing the time slot 
      position of through-connected traffic (i.e. traffic that is not added 
      or dropped from the node). At present there is no TSI capability 
      specified in nodes belonging to a MS-SPRing sub network. Channels at 
      MS-SPRing nodeÆs egress are nailed to the same timeslot used by the 
      same channels at nodeÆs ingress. This is a currently required 
      condition to ensure MS-SPRing correct operation. 
       
   1.4 Squelching  
       
      Squelching is defined as the process of inserting AU-AIS in order to 
      prevent misconnections. The squelching process application over 
      traffic results in an ôall 1Æsö signal. 
       
   1.4.1 Squelching to avoid misconnected traffic 
       
      To perform a ring switch, the protection channels are essentially 
      shared among each span of the ring. Also, extra traffic may reside in 
      the protection channels when the protection channels are not 
      currently being used to restore normal traffic transported on the 
      working channels. Thus, each protection channel time slot is subject 
      to use by multiple services (services from the same time slot but on 
      different spans, and service from extra traffic). With no extra 
      traffic on the ring, under certain multiple point failures, such as 
      those that cause node(s) isolation, services (from the same time slot 
      but on different spans) may contend for access to the same protection 
      channel time slot. This yields a potential for misconnected traffic. 
      With extra traffic on the ring, even under single point failures, 
      normal traffic on the working channels may contend for access to the 
      same protection channel time slot that carries the extra traffic. 
      This also yields a potential for misconnected traffic. 
       
      Without a mechanism to prevent misconnection, the following failure 
      scenario would yield misconnections.  
    
    
   Caviglia                 Expires - April 2006                [Page 11] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
       
      Referring to Figure 1-1, two circuits traverse the MS-SPRing namely 
      circuit Q and R the path that they traverse is: 
       
      Circuit R:  TNE-A <-Link WP3 AU 1-> TNE-F  
      Circuit Q:  TNE-A <-Link WP1 AU 1-> TNE-B <-Link WP2 AU 1-> TNE-C 
       
      Suppose a cut in both the spans between nodes A and F and between 
      nodes A and B (isolating node A, that is the same as a TNE A failure)  
      causes circuits Q and R to attempt to access time slot #1P on the 
      protection channels.  The mechanism for the MS-SPRing protection is 
      as depicted in previous sub-section.   
       
      A potential misconnection is determined by identifying the nodes that 
      will act as the switching nodes for a bridge request, and by 
      examining the traffic that will be affected by the switch. The 
      switching nodes can be determined from the node addresses in the K1 
      and K2 bytes. The switching nodes determine the traffic affected by 
      the protection switch from the information contained in their ring 
      maps and from the identifications of the switching nodes. Potential 
      misconnections shall be squelched by inserting the appropriate AU-AIS 
      in those time slots where misconnected traffic could occur. 
      Specifically, the traffic that is sourced or dropped at the node(s) 
      isolated from the ring by the failure shall be squelched. For rings 
      operating at an AU-4 level, this squelching occurs at the switching 
      nodes. AU level squelching occurs for the normal or extra traffic 
      into or out of the protection channels (i.e. normal traffic into or 
      out of working channels is never squelched). 
       
      For example, consider a segment of a ring consisting of three nodes, 
      A, B, and C where B has failed. In a typical scenario, both A and C 
      will send bridge requests destined for B. When A sees the bridge 
      request from C, and sees that B is between A and C (from the node 
      map) it can deduce that B is isolated from the ring. A and C will use 
      their respective maps to find out which channels are added or dropped 
      by B. A and C will squelch these channels before the ring switch is 
      performed by inserting AU-AIS. Thus, any node on the ring that was 
      connected to B will now receive AIS on those channels. 
       
      Each of the ring maps, then, shall contain at minimum: 
      1. a ring map that contains information regarding the order in which 
         the nodes appear on the ring; 
      2. a cross-connect map that contains the AU-4 time-slot assignments 
         for traffic that is both terminated at that node and passed-
         through that node; 
      3. a squelch table that contains, for each of these AU-4 time slots, 
         the node addresses at which the traffic enters and exits the ring; 
         and 

    
    
   Caviglia                 Expires - April 2006                [Page 12] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
      4. an optional indication of whether the AU is being accessed at the 
         lower order VC level somewhere on the ring (not covered by this 
         Document) 
      An example of such ring maps and squelching table is given in Section 
      1.1. 
    
   2. GMPLS requirements imposed by MS-SPRing 
       
      When setting up (either via traditional management plane actions or 
      via GMPLS control plane protocols) a data plane circuit going across 
      parts of the network that include MS-SPRing based protection 
      mechanism, it MUST be done according to MS-SPRing specific needs as 
      explained in previous sections.  
       
   2.1 LSP Set-Up 
       
      When GMPLS is used for circuit setup, the presence of MS-SPRing rings 
      in the network results in a set of requirements that have to be 
      handled at control plane level. 
      Basically when setting up an LSP over a data plane that includes TNEs 
      connected in MS-SPRing scheme, the control plane taking care of 
      routing and signaling of such LSP has to behave in a way that 
       
      1. the label(corresponding to a SDH/SONET timeslot) must not be 
         changed within the MS-SPRing ring traversed; 
      2. involved TNE MUST have all the information necessary to fill the 
         Ring Map. 
       
      From the NMS point of view it is important to be able to univocally 
      identify a ring in the network, this leads to the Ring Identifier 
      (RingId) concept.  Even if the RingId is not needed for the MS-SPRing 
      operation it is needed for management issues. 
      Given the above there is the requirement to add the RingId 
      information to the information stored when an LSP traverses a node 
      that is part of a MS-SPRing. 
       
      The above requirements can be satisfied either via signaling only or 
      signaling plus routing. 
       
   2.2 Data Plane and Control Plane misalignment 
       
      When a failure affects an LSP that traverse an MS-SPRing protected 
      ring the data plane scenario is the same as in Figure 1-3. 
       
      Data Traffic is flowing through: 
      Node-A<-->Node-B<-->Node-A<-->Node-F<-->Node-E<-->Node-D<-->Node-C<--
      >Node-D while from a control plane perspective traffic is still 
      flowing through Node-A<-->Node-B<-->Node-C<-->Node-D. 
      It may be noted that the loop Node-A<-->Node-B<-->Node-A can be 
    
    
   Caviglia                 Expires - April 2006                [Page 13] 
                 draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
    
    
      bridged and releases the protection channels for use by extra traffic 
      thus increasing the availability of extra traffic, however this 
      requires an update to the Ring map. 
       
      The misalignment between control and data plane arises because the 
      control plane is un-aware of the failure. 
       
      In this case there is the need for a control plane data plane re-
      alignment. 
       
      When, without the intervention of the control plane, inherent 
      protection scheme changes some characteristic of an LSP there should 
      be a communication mechanism that re-aligns control plane and data 
      plane information. 
       
   2.3 Interworking between GMPLS restoration and MS-SPRing Protection 
    
      A hold-off timer e.g. 50 ms should be provided in order to allow MS-
      SPRing protection to react firstly to a failure. 
       
      In case of failures unrecoverable by MS-SPRing the hold-off elapse 
      triggering the control plane recovery mechanism, of course in order 
      to recover the traffic control plane and data plane must be aligned, 
      see above Section about control plane and data plane misalignment. 
     
   3. Security Considerations 
       
      This document does not introduce any additional Security issues. 
       
       
   References 
       
                        
      [1] Mannie, E. öGeneralized Multi-Protocol Label Switching (GMPLS)    
          Architectureö Standard Track, RFC 3945, October 2004 
        
      [2] ITU-T G.707 ôNetwork node interface for the synchronous digital 
          hierarchy (SDH)ö, December 2003 
       
      [3] ITU-T G.841 "Types and characteristics of SDH network protection 
          architectures", October 1998. 
       
      [4] Bradner, S., "The Internet Standards Process -- Revision 3", BCP  
          9, RFC 2026, October 1996 
    
    
    


    
    
   Caviglia                 Expires - April 2006                [Page 14] 
              draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
 
 
Acknowledgments 
    
   Greg Bernstein 
   Grotto Networking 
   Email: gregb@grotto-networking.com 
    
Author's Addresses 
    
   Diego Caviglia 
   Marconi 
   V. A. Negrone 16/A  
   16153 Cornigliano (GE) 
   Italy 
   Phone: +390106003736 
   Email: diego.caviglia@Marconi.com 
    
   Huub van Helvoort 
   Huawei Technologies Ltd. 
   Kolkgriend 38 
   NL-1356 BC  Almere 
   the Netherlands 
   Phone: +31365315076 
   Email: hhelvoort@chello.nl 
    
   Intellectual Property Rights Notices  
     
   The IETF takes no position regarding the validity or scope of any  
   Intellectual Property Rights or other rights that might be claimed to  
   pertain to the implementation or use of the technology described in  
   this document or the extent to which any license under such rights  
   might or might not be available; nor does it represent that it has  
   made any independent effort to identify any such rights. Information  
   on the procedures with respect to rights in RFC documents can be  
   found in BCP 78 and BCP 79.  
        
   Copies of IPR disclosures made to the IETF Secretariat and any  
   assurances of licenses to be made available, or the result of an  
   attempt made to obtain a general license or permission for the use of  
   such proprietary rights by implementers or users of this  
   specification can be obtained from the IETF on-line IPR repository at  
      http://www.ietf.org/ipr.  
        
   The IETF invites any interested party to bring to its attention any  
   copyrights, patents or patent applications, or other proprietary  
   rights that may cover technology that may be required to implement  
   this standard. Please address the information to the IETF at ietf- 
   ipr@ietf.org.  
        
        
 
 
Caviglia                 Expires - April 2006                [Page 15] 
              draft-caviglia-ccamp-GMPLS-MSSPRing-Req-00  October 2005 
 
 
   Full Copyright Statement  
        
   Copyright (C) The Internet Society (2005). This document is subject  
   to the rights, licenses and restrictions contained in BCP 78, and  
   except as set forth therein, the authors retain all their rights.  
        
   This document and the information contained herein are provided on an  
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS  
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET  
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,  
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE  
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED  
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  
    
    


































 
 
Caviglia                 Expires - April 2006                [Page 16] 
