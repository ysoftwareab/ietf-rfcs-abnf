<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Protocol for
    Diameter Quality of Service Application</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Protocol for
    Diameter Quality of Service Application">
<meta name="keywords" content="AAA, QoS, VoIP, SIP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">G. Zorn, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">P. McCann</td></tr>
<tr><td class="header">Expires: May 22, 2008</td><td class="header">Motorola Labs</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">T. Tsou</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Huawei</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Doria</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Lulea University of Technology</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">D. Sun</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Bell Labs/Alcatel-Lucent</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 19, 2007</td></tr>
</table></td></tr></table>
<h1><br />Protocol for
    Diameter Quality of Service Application<br />draft-ietf-dime-diameter-qos-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 22, 2008.</p>

<h3>Abstract</h3>

<p>This document describes the messages and procedures for the Diameter
      QoS application. The QoS application allows network elements to interact
      with Diameter servers when allocating QoS resources in the network. 
        In particular, two
      modes of operation - Pull and Push are defined.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Terminology<br />
<a href="#anchor2">3.</a>&nbsp;
Diameter QoS Authorization Session Establishment and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.1.</a>&nbsp;
Parties involved<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.2.</a>&nbsp;
Diameter QoS Authorization Session Establishment<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.1.</a>&nbsp;
QoS authorization session establishment for pull mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.2.2.</a>&nbsp;
QoS authorization session establishment for push mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.3.</a>&nbsp;
Discovery and selection of peer Diameter QoS application node<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#re-authz">3.3.</a>&nbsp;
QoS authorization session re-authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.1.</a>&nbsp;
Client-Side Initiated Re-Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.3.2.</a>&nbsp;
Server-Side Initiated Re-Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#session-termination">3.4.</a>&nbsp;
Session Termination<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.4.1.</a>&nbsp;
Client-Side Initiated Session Termination<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.4.2.</a>&nbsp;
Server-Side Initiated Session Termination<br />
<a href="#accounting">4.</a>&nbsp;
Accounting<br />
<a href="#anchor12">5.</a>&nbsp;
Diameter QoS Authorization Application Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.1.</a>&nbsp;
QoS-Authorization Request (QAR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.2.</a>&nbsp;
QoS-Authorization Answer (QAA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.3.</a>&nbsp;
QoS-Install Request (QIR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.4.</a>&nbsp;
QoS-Install Answer (QIA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">5.5.</a>&nbsp;
Re-Auth-Request (RAR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">5.6.</a>&nbsp;
Re-Auth-Answer (RAA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">5.7.</a>&nbsp;
Accounting Request (ACR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">5.8.</a>&nbsp;
Accounting Answer (ACA)<br />
<a href="#anchor21">6.</a>&nbsp;
Diameter QoS Authorization Application AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#diameter-base-avps">6.1.</a>&nbsp;
Diameter Base Protocol AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#credit-control-avps">6.2.</a>&nbsp;
Credit Control Application AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#accounting-avps">6.3.</a>&nbsp;
Accounting AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#qos-new-avps">6.4.</a>&nbsp;
Diameter QoS Application Defined AVPs<br />
<a href="#examples">7.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example_pull">7.1.</a>&nbsp;
Example call flow for pull mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example_push">7.2.</a>&nbsp;
Example call flow for push mode<br />
<a href="#iana">8.</a>&nbsp;
IANA Considerations<br />
<a href="#security">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor22">10.</a>&nbsp;
Acknowledgements<br />
<a href="#contributors">11.</a>&nbsp;
Contributors<br />
<a href="#open-issue">12.</a>&nbsp;
Open Issues<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document describes the messages and procedures for the Diameter
      QoS Application. The QoS Application allows network elements to interact
      with Diameter servers when allocating QoS resources in the network.
</p>
<p>In particular, two modes of operation are defined. In the first,
      called "Pull Mode", the network element queries the Diameter
      infrastructure for authorization based on some trigger (such as a QoS
      signaling protocol) that arrives along the data path to be used for the
      session. In the second, called "Push Mode", a Diameter server
      pro-actively sends a command to the network element(s) to install QoS
      authorization state. This could be triggered, for instance, by off-path
      signaling such as SIP-based call control.
</p>
<p>A set of command codes pertinent to this QoS application are
      specified that allows a single Diameter application to support both Pull
      and Push modes based on the requirements of network technologies,
      deployment scenarios and end-host's capabilities. In conjunction with
      parameters defined in other Diameter QoS documents, this document
      depicts basic call flow procedures to establish, modify and terminate a
      Diameter QoS application session.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>In addition to the terms defined in other relevant Diameter QoS
      documents (e.g., diameter-qos-framework), the following terms are used in
      this document:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Diameter QoS Application Server</dt>
<dd><br />
 A Diameter QoS application server is a logical
          Diameter node that supports the protocol interaction for QoS
          authorization. The Diameter QoS server resides in the authorizing
          entity and is able to respond to a Diameter session received from a
          Diameter QoS client, or initiate a Diameter session to a Diameter
          QoS client triggered by application signaling or local
          events.<br />
<br />

</dd>
<dt>Diameter QoS Application Client</dt>
<dd><br />
 A Diameter QoS application client is a logical
          Diameter node that supports the protocol interaction for QoS
          enforcement. The Diameter QoS client resides in the network element
          and is able to initiate a Diameter session triggered by a QoS
          signaling or other events, or respond to a Diameter session
          initiated by a Diameter QoS server.<br />
<br />

</dd>
<dt>Resource Requesting Entity</dt>
<dd><br />
 A
          resource requesting entity is a logical entity that supports the
          protocol interaction for QoS resources. The resource requesting
          entity resides in the end-host and is able to communicate with peer
          logicial entities in Authorizing Entity or Network element to
          trigger the QoS authorization process.<br />
<br />

</dd>
</dl></blockquote>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Diameter QoS Authorization Session Establishment and Management</h3>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Parties involved</h3>

<p>Authorization models supported by this application include three
        parties: </p>
<ul class="text">
<li>Resource requesting entity
</li>
<li>Network Elements (Diameter QoS application (DQA) client)
</li>
<li>Authorizing Entity (Diameter QoS application (DQA) server)
</li>
</ul>

<p>Note that the QoS resource requesting entity is only indirectly
        involved in the message exchange. This entity provides the trigger to
        initiate the Diameter QoS protocol interaction by transmitting QoS
        signaling messages. The Diameter QoS application is only executed
        between the Network Element (i.e., DQA client) and the Authorizing
        Entity (i.e., DQA server).
</p>
<p>The QoS resource requesting entity may communicate with the
        Authorizing Entity using application layer signaling for negotiation
        of service parameters. As part of this application layer protocol
        interaction, for example using SIP, authentication and authorization
        might take place. This message exchange is, however, outside the scope
        of this document. The protocol communication between the QoS resource
        requesting entity and the QoS Network Element might be accomplished
        using the NSIS protocol suite, RSVP or a link layer signaling
        protocol. A description of these protocols is also outside the scope
        of this document and a tight coupling with these protocols is not
        desirable since this applications aims to be generic.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Diameter QoS Authorization Session Establishment</h3>

<p>The Pull and Push modes use a different set of command codes for
        session establishment. For other operations, such as session
        modification and termination, they use the same set of command
        codes.
</p>
<p>The Pull mode or Push mode operation is invoked based on the
        trigger of QoS Authorization session. When a QAR with a new session ID
        is received, the Authorizing Entity operates in the pull mode; when
        other triggers are received, the Authorizing Entity operates in the
        push mode. Similarly, when a QIR with new session ID is received, the
        Network Element operates in the push mode; when other triggers are
        recevied, the Network Element operation in the pull mode.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
QoS authorization session establishment for pull mode</h3>

<p>A request for a QoS reservation or local events received by a
          Network Element can trigger the initiation of a Diameter QoS
          authorization session. The Network Element generates a
          QoS-Authorization-Request (QAR) message in which it maps required
          objects from the QoS signaling message to Diameter payload
          objects.
</p>
<p><a class='info' href='#fig-initial-qos-request-pull'>Figure&nbsp;1<span> (</span><span class='info'>Initial QoS Request Authorization for pull</span><span>)</span></a> shows the
          protocol interaction between a resource requesting entity, a Network
          Element and the Authorizing Entity.
</p>
<p>The Authorizing Entity's identity, information about the
          application session and/or identity and credentials of the QoS
          resource requesting entity, requested QoS parameters, signaling
          session identifier and/or QoS enabled data flows identifiers MAY be
          encapsulated into respective Diameter AVPs and included into the
          Diameter message sent to the Authorizing Entity. The QAR is sent to
          a Diameter server that can either be the home server of the QoS
          requesting entity or an application server.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+----------------------------------+-------------------------------+
| QoS specific Input Data          | Diameter QoS AVPs             |
+----------------------------------+-------------------------------+
| Authorizing entity ID (e.g.,     | Destination-Host              |
| taken from authorization token   | Destination-Realm             |
| or derived based on Network      |                               |
| Access ID (NAI) [RFC2486]        |                               |
| of the QoS requesting entity)    |                               |
+----------------------------------+-------------------------------+
| Authorization Token              | QoS-Authz-Data                |
| Credentials of                   | User-Name                     |
| the QoS requesting entity        |                               |
+----------------------------------+-------------------------------+
| QoS parameters                   | QoS-Resources                 |
+----------------------------------+-------------------------------+
</pre></div>
<p>
</p>
<p>Authorization processing starts at the Diameter QoS server when
          it receives the QAR. Based on the information in the
          QoS-Authentication-Data, User-Name and QoS-Resources AVPs the server
          determines the authorized QoS resources and flow state
          (enabled/disabled) from locally available information (e.g., policy
          information that may be previously established as part of an
          application layer signaling exchange, or the user's subscription
            profile). The QoS-Resources AVP is defined in <a class='info' href='#I-D.ietf-dime-qos-attributes'>[I&#8209;D.ietf&#8209;dime&#8209;qos&#8209;attributes]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a>.
            The authorization decision is then reflected in the
          response returned to the Diameter client with the
          QoS-Authorization-Answer message (QAA).
</p>
<p><br /><hr class="insert" />
<a name="fig-initial-qos-request-pull"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    +---QoS-Reserve----&gt;|                         |
    |                   +- - - - - QAR - - - - - &gt;|
    |                   |(QoS-Resources,Cost,     |
    |                   |   QoS-Auth-Data,User-ID)|
    |                   |                +--------+--------------+
    |                   |                |  Authorize request    |
    |                   |                |  Keep session data    |
    |                   |                |/Authz-time,Session-Id/|
    |                   |                +--------+--------------+
    |                   |&lt; - - - - QAA - - - - - -+
    |                   |(Result-Code,CC-Time,Cost|
    |                   |QoS-Resources,Authz-time)|
    |           +-------+---------+
    |           |Install QoS state|
    |           |       +         |
    |           | Authz. session  |
    |           | /Authz-time,    |                QoS Responder
    |           |  CC-Time,Cost/  |                    Node
    |           +-------+---------+                      |
    |                   +----------QoS-Reserve---....---&gt;|
    |                   |                                |
    |                   |&lt;---------QoS-Response--....----|
    |&lt;--QoS-Response----+                                |
    |                   |                                |
    |=====================Data Flow==============....===&gt;|
    |                   |
    |                   +- - - - - ACR - - - - - &gt;|
    |                   |(START,QoS-Resources,Cost|
    |                   |CC-Time,Acc-Multisess-id)|
    |                   |                +--------+--------------+
    |                   |                | Report for successful |
    |                   |                |   QoS reservation     |
    |                   |                |Update of reserved QoS |
    |                   |                |      resources        |
    |                   |                +--------+--------------+
    |                   |&lt; - - - - ACA - - - - - -+
    |                   |                         |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Initial QoS Request Authorization for pull&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The Authorizing Entity keeps authorization session state and
          SHOULD save additional information for management of the session
          (e.g., Acc-Multi-Session-Id, Signaling-Session-Id, authentication
          data) as part of the session state information. A
          Signaling-session-Id (if present) SHOULD be used together with the
          generated Acc-Multi-Session-Id AVP (see <a class='info' href='#accounting-avps'>Section&nbsp;6.3<span> (</span><span class='info'>Accounting AVPs</span><span>)</span></a>) for binding the authorization and
          the accounting session information in case of end host mobility
          (i.e., to correlate the Diameter sessions that are initiated for the
          same signaling session from different QoS NE).
</p>
<p>The final result of the authorization request is provided in the
          Result-Code AVP of the QAA message sent by the Authorizing Entity.
          In case of successful authorization (i.e., Result-Code =
          DIAMETER_LIMITED_SUCCESS, (see <a class='info' href='#diameter-base-avps'>Section&nbsp;6.1<span> (</span><span class='info'>Diameter Base Protocol AVPs</span><span>)</span></a>)), information about the
          authorized QoS resources and the status of the authorized flow
          (enabled/disabled) is provided in the QoS-Resources AVP of the QAA
          message. The QoS information provided via the QAA is installed by
          the QoS Traffic Control function of the Network Element. The value
          DIAMETER_LIMITED_SUCCESS indicates that the Authorizing entity
          expects confirmation via an accounting message for successful QoS
          resource reservation and for final reserved QoS resources (see
          below).
</p>
<p>One important piece of information returned from the Authorizing
          Entity is the authorization lifetime (carried inside the QAA). The
          authorization lifetime allows the Network Element to determine how
          long the authorization decision is valid for this particular QoS
          reservation. A number of factors may influence the authorized
          session duration, such as the user's subscription plan or currently
          available credits at the user's account (see <a class='info' href='#accounting'>Section&nbsp;4<span> (</span><span class='info'>Accounting</span><span>)</span></a>). The authorization duration is
          time-based as specified in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. For an
          extension of the authorization period, a new
          QoS-Authorization-Request/Answer message exchange SHOULD be
          initiated. Further aspects of QoS authorization session maintenance
          is discussed in <a class='info' href='#re-authz'>Section&nbsp;3.3<span> (</span><span class='info'>QoS authorization session re-authorization</span><span>)</span></a>, <a class='info' href='#session-termination'>Section&nbsp;3.4<span> (</span><span class='info'>Session Termination</span><span>)</span></a> and <a class='info' href='#accounting'>Section&nbsp;4<span> (</span><span class='info'>Accounting</span><span>)</span></a>.
</p>
<p>The indication of a successful QoS reservation and activation of
          the data flow is provided by the transmission of an Accounting
          Request (ACR) message, which reports the parameters of the
          established QoS state: reserved resources, duration of the
          reservation, identification of the QoS enabled flow/QoS signaling
          session and accounting parameters. The Diameter QoS server
          acknowledges the reserved QoS resources with the Accounting Answer
          (ACA) message where the Result-Code is set to 'DIAMETER_SUCCESS'.
          Note that the reserved QoS resources reported in the ACR message MAY
          be different than those initially authorized with the QAA message,
          due to the QoS signaling specific behavior (e.g., receiver-initiated
          reservations with One-Path-With-Advertisements) or specific process
          of QoS negotiation along the data path.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
QoS authorization session establishment for push mode</h3>

<p>The Diameter QoS server in the Authorizing Entity initiates a
          Diameter QoS authorization session upon the request for QoS
          reservation triggered by application layer signaling or by local
          events, and generates a QoS-Install-Request (QIR) message to
          Diameter QoS client in the NE in which it maps required objects to
          Diameter payload objects.
</p>
<p><a class='info' href='#fig-initial-qos-request-push'>Figure&nbsp;2<span> (</span><span class='info'>Initial QoS Request Authorization for push</span><span>)</span></a> shows the
          protocol interaction between the Authorizing Entity, a Network
          Element and a resource requesting entity.
</p>
<p>The Network Element's identity, information about the application
          session and/or identity and credentials of the QoS resource
          requesting entity, requested QoS parameters, signaling session
          identifier and/or QoS enabled data flows identifiers MAY be
          encapsulated into respective Diameter AVPs and included into the
          Diameter message sent from a Diameter QoS server in the Authorizing
          Entity to a Diameter QoS client in the NE. This requires that the
          Authorizing Entity has knowledge of specific information for
          allocating and identifying the Network Element that should be
          contacted and the data flow for which the QoS reservation should be
          established. This information can be statically configured or
          dynamically discovered, see section 3.2.3 for details.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+----------------------------------+-------------------------------+
| QoS specific Input Data          | Diameter QoS AVPs             |
+----------------------------------+-------------------------------+
| Network Element ID (e.g., from   | Destination-Host              |
| static configuration             | Destination-Realm             |
| or dynamically discovered, see   |                               |
| section 3.2.3 for details)       |                               |
+----------------------------------+-------------------------------+
| Authorization Token              | QoS-Authz-Data                |
| Credentials of                   | User-Name                     |
| the QoS requesting entity        |                               |
+----------------------------------+-------------------------------+
| QoS parameters                   | QoS-Resources                 |
+----------------------------------+-------------------------------+
</pre></div>
<p>
</p>
<p>Authorization processing starts at the Diameter QoS server when
          it receives the request from a resource requesting entity through
          application server (e.g. SIP Invite) or the trigger by local events
          (e.g. pre-configured timer). Based on the received information the
          server determines the authorized QoS resources and flow state
          (enabled/disabled) from locally available information (e.g., policy
          information that may be previously established as part of an
          application layer signaling exchange, or the user's subscription
          profile). The authorization decision is then reflected in the
          QoS-Install-Request message (QIR) to the Diameter QoS client.
</p>
<p><br /><hr class="insert" />
<a name="fig-initial-qos-request-push"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                          |
    |                   |                          |&lt;-- Trigger --
    |                   |                 +--------+--------------+
    |                   |                 |  Authorize request    |
    |                   |                 |  Keep session data    |
    |                   |                 |/Authz-time,Session-Id/|
    |                   |                 +--------+--------------+
    |                   |                          |
    |                   |&lt;-- - -- - QIR - - - - - -+
    |                   |(Initial Request,Decision |
    |                   |(QoS-Resources,Authz-time)|
    |           +-------+---------+
    |           |Install QoS state|
    |           |       +         |
    |           | Authz. session  |
    |           | /Authz-time,    |
    |           |  CC-Time,Cost/  |
    |           +-------+---------+
    |                   + - - - - QIA - - - - - -&gt;|
    |                   |    (Result-Code,        |
    |                   |     QoS-Resources)      |
    |                   |                +--------+--------------+
    |                   |                | Report for successful |
    |                   |                |   QoS reservation     |
    |                   |                |Update of reserved QoS |
    |                   |                |      resources        |
    |                   |                +--------+--------------+
    |                   |                         QoS Responder
    |                   |                               Node
    |                   |                                |
    |=====================Data Flow==============....===&gt;|
    |                   |
    |                   +- - - - - ACR - - - - - &gt;|
    |                   |(START,QoS-Resources,Cost|
    |                   |CC-Time,Acc-Multisess-id)|
    |                   |&lt; - - - - ACA - - - - - -+
    |                   |                         |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Initial QoS Request Authorization for push&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The Authorizing Entity keeps authorization session state and
          SHOULD save additional information for management of the session
          (e.g., Acc-Multi-Session-Id, Signaling-Session-Id, authentication
          data) as part of the session state information. A
          Signaling-session-Id (if present) SHOULD be used together with the
          generated Acc-Multi-Session-Id AVP (see <a class='info' href='#accounting-avps'>Section&nbsp;6.3<span> (</span><span class='info'>Accounting AVPs</span><span>)</span></a>) for binding the authorization and
          the accounting session information in case of end host mobility
          (i.e., to correlate the Diameter sessions that are initiated for the
          same signaling session from different QoS NE).
</p>
<p>The final result of the authorization decision is provided in the
          QoS-Resources AVP of the QIR message sent by the Authorizing Entity.
          The QoS information provided via the QIR is installed by the QoS
          Traffic Control function of the Network Element. In the case of
          successful enforcement, the Result-Code (= DIAMETER_SUCCESS, (see
          <a class='info' href='#diameter-base-avps'>Section&nbsp;6.1<span> (</span><span class='info'>Diameter Base Protocol AVPs</span><span>)</span></a>)) information is provided
          in the QIA message.
</p>
<p>One important piece of information from the Authorizing Entity is
          the authorization lifetime (carried inside the QIR). The
          authorization lifetime allows the Network Element to determine how
          long the authorization decision is valid for this particular QoS
          reservation. A number of factors may influence the authorized
          session duration, such as the user's subscription plan or currently
          available credits at the user's account (see <a class='info' href='#accounting'>Section&nbsp;4<span> (</span><span class='info'>Accounting</span><span>)</span></a>). The authorization duration is
          time-based as specified in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. For an
          extension of the authorization period, a new
          QoS-Install-Request/Answer message or
          QoS-Authorization-Request/Answer message exchange SHOULD be
          initiated. Further aspects of QoS authorization session maintenance
          is discussed in <a class='info' href='#re-authz'>Section&nbsp;3.3<span> (</span><span class='info'>QoS authorization session re-authorization</span><span>)</span></a>, <a class='info' href='#session-termination'>Section&nbsp;3.4<span> (</span><span class='info'>Session Termination</span><span>)</span></a> and <a class='info' href='#accounting'>Section&nbsp;4<span> (</span><span class='info'>Accounting</span><span>)</span></a>.
</p>
<p>The indication of a successful QoS reservation and activation of
          the data flow, is provided by the QoS-Install-Answer message. Note
          that the reserved QoS resources reported in the QIA message MAY be
          different than those initially authorized with the QIR message, due
          to the QoS signaling specific behavior (e.g., receiver-initiated
          reservations with One-Path-With-Advertisements) or specific process
          of QoS negotiation along the data path.
</p>
<p>In case of xxx = Acounting_Info in the QIR, it indicates the
          confirmation to an accounting server for successful QoS resource
          reservation and for final reserved QoS resources (see below). An ACR
          message reports the parameters of the established QoS state:
          reserved resources, duration of the reservation, identification of
          the QoS enabled flow/QoS signaling session and accounting parameters
          to accounting server. The accounting server acknowledges the
          reserved QoS resources with the Accounting Answer (ACA) message
          where the Result-Code is set to 'DIAMETER_SUCCESS'.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
Discovery and selection of peer Diameter QoS application node</h3>

<p>The Diameter QoS application node may obtain the location
          information of its peer nodes (i.e. FQDN or IP address) through
          static configuration or dynamic discovery as described in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. In particular, the Network Element shall
          perform the relevant operation for Pull mode; the Authorizing Entity
          shall perform the relevant operations for Push mode.
</p>
<p>Upon receipt of a trigger to initiate a new Diameter QoS
          authorization session, the Diameter QoS application node selects and
          retrieves the location information of the peer node and based on
          some index information provided by the resource requesting entity.
          For instance, it can be the Authorization Entity's ID stored in the
          authorization token, the end-host's identity (e.g. NAI <a class='info' href='#RFC2486'>[RFC2486]<span> (</span><span class='info'>Aboba, B. and M. Beadles, &ldquo;The Network Access Identifier,&rdquo; January&nbsp;1999.</span><span>)</span></a>) or globally routable IP address.
</p>
<a name="re-authz"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
QoS authorization session re-authorization</h3>

<p>Client and server-side initiated re-authorizations are considered
        in the design of the Diameter QoS application. Whether the
        re-authorization events are transparent for the resource requesting
        entity or result in specific actions in the QoS signaling protocol is
        outside the scope of the Diameter QoS application. It is directly
        dependent on the capabilities of the QoS signaling protocol.
</p>
<p>There are a number of options for policy rules according to which
        the NE (AAA client) contacts the Authorizing Entity for
        re-authorization. These rules depend on the semantics and contents of
        the QAA message sent by the Authorizing Entity:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>The QAA message contains the authorized parameters of the flow
            and its QoS and sets their limits (presumably upper). With these
            parameters the Authorizing Entity specifies the services that the
            NE can provide and will be financially compensated for. Therefore,
            any change or request for change of the parameters of the flow and
            its QoS that do not conform to the authorized limits requires
            contacting the Authorizing Entity for authorization.
</dd>
<dt>b.</dt>
<dd>The QAA message contains authorized parameters of the flow and
            its QoS. The rules that determine whether parameters&rsquo;
            changes require re-authorization are agreed out of band, based on
            a Service Level Agreement (SLA) between the domains of the NE and
            the Authorizing Entity.
</dd>
<dt>c.</dt>
<dd>The QAA message contains the authorized parameters of the flow
            and its QoS. Any change or request for change of these parameters
            requires contacting the Authorizing entity for
            re-authorization.
</dd>
<dt>d.</dt>
<dd>In addition to the authorized parameters of the flow and its
            QoS, the QAA message contains policy rules that determine the NEs
            actions in case of change or request for change in authorized
            parameters.
</dd>
</dl></blockquote>

<p>Provided options are not exhaustive. Elaborating on any of the
        listed approaches is deployment /solution specific and is not
        considered in the current document.
</p>
<p>In addition, the Authorizing Entity may use RAR to perform
        re-authorization with the authorized parameters directly when the
        re-authorization is triggered by service request or local
        events/policy rules.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
Client-Side Initiated Re-Authorization</h3>

<p>The Authorizing Entity provides the duration of the authorization
          session as part of the QoS-Authorization-Answer message (QAA). At
          any time before expiration of this period, a new
          QoS-Authorization-Request message (QAR) MAY be sent to the
          Authorizing Entity. The transmission of the QAR MAY be triggered
          when the Network Element receives a QoS signaling message that
          requires modification of the authorized parameters of an ongoing QoS
          session, when authorization lifetime expires or by an accounting
          event, see <a class='info' href='#accounting'>Section&nbsp;4<span> (</span><span class='info'>Accounting</span><span>)</span></a> and <a class='info' href='#fig-qos-request-re-authz'>Figure&nbsp;3<span> (</span><span class='info'>Client-side initiated QoS re-authorization</span><span>)</span></a>).
</p>
<p><br /><hr class="insert" />
<a name="fig-qos-request-re-authz"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    |=====================Data Flow==========================&gt;
    |                   |                         |
    |           +-------+----------+              |
    |           |Authz-time/CC-Time|              |
    |           |    expires       |              |
    |           +-------+----------+              |
    |                   +- - - - - QAR - - - - - &gt;|
    |                   |(QoS-Resources,Cost,     |
    |                   | QoS-Authz-Data,User-ID)|
                        |                +--------+--------------+
 NOTE:                  |                |  Authorize request    |
 Re-authorization       |                | Update session data   |
 is transparent to      |                |/Authz-time,Session-Id/|
 the End-Host           |                +--------+--------------+
                        |&lt; - - - - QAA - - - - - -+
    |                   |(Result-Code,CC-Time,Cost|
    |                   |QoS-Resources,Authz-time)|
    |           +-------+---------+               |
    |           |Update QoS state |               |
    |           |       +         |               |
    |           | Authz. session  |               |
    |           | /Authz-time,    |               |
    |           |  CC-Time,Cost/  |               |
    |           +-------+---------+               |
    |                   |                         |
    |                   +- - - - - ACR - - - - - &gt;|
    |                   |(INTRM,QoS-Resources,Cost|
    |                   |CC-Time,Acc-Multisess-id)|
    |                   |                +--------+--------------+
    |                   |                |Update of QoS resources|
    |                   |                |/CC-Time,Cost/ used    |
    |                   |                +--------+--------------+
    |                   |&lt; - - - - ACA - - - - - -+
    |                   |                         |
    |=====================Data Flow==========================&gt;
    |                   |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Client-side initiated QoS re-authorization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
Server-Side Initiated Re-Authorization</h3>

<p>The Authorizing Entity MAY initiate a QoS re-authorization by
          issuing a Re-Auth-Request message (RAR) as defined in the Diameter
          base protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>, which may include the
          parameters of the re-authorized QoS state: reserved resources,
          duration of the reservation, identification of the QoS enabled
          flow/QoS signaling session for re-installation of the resource state
          by the QoS Traffic Control function of the Network Element.
</p>
<p>A Network Element that receives such a RAR message with
          Session-Id matching a currently active QoS session acknowledges the
          request by sending the Re-Auth-Answer (RAA) message towards the
          Authorizing entity.
</p>
<p>If RAR does not include any parameters of the re-authorized QoS
          state, the Network Element MUST initiate a QoS re-authorization by
          sending a QoS-Authorization-Request (QAR) message towards the
          Authorizing entity.
</p>
<p><br /><hr class="insert" />
<a name="fig-qos-re-auth-server-side"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                          |
    |                   |                          |&lt;-- Trigger --
    |                   |                 +--------+--------------+
    |                   |                 |  Authorize request    |
    |                   |                 |  Keep session data    |
    |                   |                 |/Authz-time,Session-Id/|
    |                   |                 +--------+--------------+
    |                   |                          |
    |                   |&lt;-- - -- - RAR - - - - - -+
    |                   |(Request,Decision |
    |                   |(QoS-Resources,Authz-time)|
    |           +-------+---------+
    |           |Install QoS state|
    |           |       +         |
    |           | Authz. session  |
    |           | /Authz-time,    |
    |           |  CC-Time,Cost/  |
    |           +-------+---------+
    |                   + - - - - RAA - - - - - -&gt;|
    |                   |    (Result-Code,        |
    |                   |     QoS-Resources)      |
    |                   |                +--------+--------------+
    |                   |                | Report for successful |
    |                   |                |   QoS reservation     |
    |                   |                |Update of reserved QoS |
    |                   |                |      resources        |
    |                   |                +--------+--------------+
    |                   |                         |
    |                   +- - - - - ACR - - - - - &gt;|
    |                   |(INTRM,QoS-Resources,Cost|
    |                   |CC-Time,Acc-Multisess-id)|
    |                   |                +--------+--------------+
    |                   |                |Update of QoS resources|
    |                   |                |/CC-Time,Cost/ used    |
    |                   |                +--------+--------------+
    |                   |&lt; - - - - ACA - - - - - -+
    |                   |                         |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Server-side Initiated QoS re-authorization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="session-termination"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Session Termination</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.1"></a><h3>3.4.1.&nbsp;
Client-Side Initiated Session Termination</h3>

<p>The authorization session for an installed QoS reservation state
          MAY be terminated by the Diameter client by sending a
          Session-Termination-Request message (STR) to the Diameter server.
          This is a Diameter base protocol function and it is defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Session termination can be caused by a QoS
          signaling messaging requesting deletion of the existing QoS
          reservation state or it can be caused as a result of a soft-state
          expiration of the QoS reservation state. After a successful
          termination of the authorization session, final accounting messages
          MUST be exchanged (see <a class='info' href='#fig-client-termination'>Figure&nbsp;5<span> (</span><span class='info'>Client-Side Initiated Session Termination</span><span>)</span></a>). It should be noted that
          the two sessions (authorization and accounting) have independent
          management by the Diameter base protocol, which allows for
          finalizing the accounting session after the end of the authorization
          session.
</p>
<p><br /><hr class="insert" />
<a name="fig-client-termination"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    |==Data Flow==&gt;X /Stop of the data flow/      |
    |                   |                         |
    +---QoS-Reserve----&gt;|                         |
    |  (Delete QoS      +- - - - - STR - - - - - &gt;|
    |   reservation)    |                +--------+--------------+
    |                   |                | Remove authorization  |
    |&lt;--QoS-Response----+                | session state         |
    |                   |                +--------+--------------+
                        |&lt; - - - - STA - - - - - -+
                +-------+--------+                |
                |Delete QoS state|
                |  Report final  |
                | accounting data|                   QoS Responder
                +-------+--------+                       Node
                        +----------QoS-Reserve-----....---&gt;|
                        |         (Delete QoS              |
                        |          reservation)
                        |
                        +- - - - - ACR - - - - - &gt;|
                        |(FINAL,QoS-Resources,Cost|
                        |CC-Time,Acc-Multisess-id)|
                        |                +--------+--------------+
                        |                | Report for successful |
                        |                |  end of QoS session   |
                        |                +--------+--------------+
                        |&lt; - - - - ACA - - - - - -+
                        |
                        |                            QoS Responder
                        |                                Node
                        |&lt;---------QoS-Response----....----+
                        |                                  |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Client-Side Initiated Session Termination&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.2"></a><h3>3.4.2.&nbsp;
Server-Side Initiated Session Termination</h3>

<p>At anytime during a session the Authorizing Entity MAY send an
          Abort- Session-Request message (ASR) to the Network Element. This is
          a Diameter base protocol function and it is defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Possible reasons for initiating the ASR
          message to the Network Element are insufficient credits or session
          termination at the application layer. The ASR message results in
          termination of the authorized session, release of the reserved
          resources at the Network Element and transmission of an appropriate
          QoS signaling message indicating a notification to other Network
          Elements aware of the signaling session. A final accounting message
          exchange MUST be triggered as a result of this ASR message exchange
          (see <a class='info' href='#fig-server-termination'>Figure&nbsp;6<span> (</span><span class='info'>Server-Side Initiated Session Termination</span><span>)</span></a>).
</p>
<p><br /><hr class="insert" />
<a name="fig-server-termination"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                            Authorizing
  End-Host         Network Element             Entity
requesting QoS      ( Diameter              ( Diameter
                     QoS Client)             QoS Server)
    |                   |                         |
    |=====================Data Flow==========================&gt;
    |                   |
    |                   |&lt; - - - - ASR - - - - - -+
    |                   |                         |
    |====Data Flow=====&gt;X                         |  QoS Responder
    |                   |                         |      Node
    |&lt;--QoS-Notify------+----------QoS-Reserve-----....---&gt;|
    |                   |         (Delete QoS     |        |
                        |          reservation)   |
                +-------+--------+                |
                |Delete QoS state|                |
                |  Report final  |                |
                | accounting data|                |
                +-------+--------+                |
                        +- - - - - ASA - - - - - &gt;|
                        |                +--------+--------------+
                        |                | Remove authorization  |
                        |                |     session state     |
                        |                +--------+--------------+
                        +- - - - - ACR - - - - - &gt;|
                        |(FINAL,QoS-Resources,Cost|
                        |CC-Time,Acc-Multisess-id)|
                        |                +--------+--------------+
                        |                | Report for successful |
                        |                |  end of QoS session   |
                        |                +--------+--------------+
                        |&lt; - - - - ACA - - - - - -+
                        |                            QoS Responder
                        |                                Node
                        |&lt;---------QoS-Response----....----+
                        |                                  |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Server-Side Initiated Session Termination&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="accounting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Accounting</h3>

<p>The Diameter QoS application provides accounting for usage of
      reserved QoS resources. Diameter QoS accounting has built-in support for
      online, duration based accounting. This accounting is based on the
      notion that the Diameter QoS clients are in the best position to
      determine the cost of those resources.
</p>
<p>In the Diameter QoS application, the router MAY send a
      Cost-Information AVP (see <a class='info' href='#RFC4006'>[RFC4006]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>) in the QAR. If
      the Cost-Information AVP includes a Cost-Unit AVP (see <a class='info' href='#RFC4006'>[RFC4006]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>) then the Cost-Unit SHOULD be "minute". The
      Cost-Information AVPs represent the cost to allocate the resources
      requested in the QoS-Resources AVP included in the same QAR message. The
      QAR MAY optionally contain a Tariff-Time-Change AVP (see <a class='info' href='#RFC4006'>[RFC4006]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>) which is the time at which the cost will
      change, a second Cost-Information AVP, which is the cost of the reserved
      resources after the tariff time change, and a second Tariff-Time-Change,
      which is the time at which the tariff would change again. Either all
      three or none of these AVPs MUST be present in the QAR.
</p>
<p>The Resource Authorizing Entity returns a CC-Time AVP (see <a class='info' href='#RFC4006'>[RFC4006]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>) in the QAA message which is the total
      authorized gate-on time for the service. If the QAR included two
      Tariff-Time-Change AVPs, the current time plus the CC-Time AVP returned
      in the QAA MUST NOT exceed the second Tariff-Time-Change AVP from the
      QAR. Based on information in the Cost-Information AVPs, the Resource
      Authorizing Entity can use the CC-Time AVP to guarantee that the total
      cost of the session will not exceed a certain threshold, which allows,
      for example, support of prepaid users.
</p>
<p>Each ACR message contains a triplet of QoS-Resources AVP,
      Cost-Information AVP, and CC-Time AVP. This represents the total time
      consumed at the given cost for the given resources. Note that an ACR
      message MUST be sent separately for each interval defined by the
      Tariff-Time-Change AVPs and the expiration of the CC-Time returned in
      the QAA (see <a class='info' href='#fig-qos-request-re-authz'>Figure&nbsp;3<span> (</span><span class='info'>Client-side initiated QoS re-authorization</span><span>)</span></a>).
</p>
<p>The Network Element starts an accounting session by sending an
      Accounting-Request message (ACR) after successful QoS reservation and
      activation of the data flow (see <a class='info' href='#fig-initial-qos-request-pull'>Figure&nbsp;1<span> (</span><span class='info'>Initial QoS Request Authorization for pull</span><span>)</span></a>). After every successful
      re-authorization procedure the Network element MUST initiate an interim
      accounting message exchange (see <a class='info' href='#fig-qos-request-re-authz'>Figure&nbsp;3<span> (</span><span class='info'>Client-side initiated QoS re-authorization</span><span>)</span></a>). After successful session
      termination the Network element MUST initiate a final exchange of
      accounting messages for terminating of the accounting session and
      reporting final records for the usage of the QoS resources reserved (see
      <a class='info' href='#fig-client-termination'>Figure&nbsp;5<span> (</span><span class='info'>Client-Side Initiated Session Termination</span><span>)</span></a>).
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Diameter QoS Authorization Application Messages</h3>

<p>The Diameter QoS Application requires the definition of new mandatory
      AVPs and Command-codes (see Section 3 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>). Four new Diameter messages are defined along
      with Command-Codes whose values MUST be supported by all Diameter
      implementations that conform to this specification.
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Command-Name                  Abbrev.        Code      Reference
QoS-Authz-Request              QAR           [TBD]     Section 5.1
QoS-Authz-Answer               QAA           [TBD]     Section 5.2
QoS-Install-Request            QIR           [TBD]     Section 5.3
QoS-Install-Answer             QIA           [TBD]     Section 5.4
</pre></div><p>

</p>
<p>In addition, the following Diameter Base protocol messages are used
      in the Diameter QoS application:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Command-Name                  Abbrev.        Code      Reference
Accounting-Request             ACR            271       RFC 3588
Accounting-Request             ACR            271       RFC 3588
Accounting-Answer              ACA            271       RFC 3588
Re-Auth-Request                RAR            258       RFC 3588
Re-Auth-Answer                 RAA            258       RFC 3588
Abort-Session-Request          ASR            274       RFC 3588
Abort-Session-Answer           ASA            274       RFC 3588
Session-Term-Request           STR            275       RFC 3588
Session-Term-Answer            STA            275       RFC 3588
</pre></div><p>

</p>
<p>Diameter nodes conforming to this specification MAY advertise support
      by including the value of TBD in the Auth-Application-Id or the
      Acct-Application-Id AVP of the Capabilities-Exchange-Request and
      Capabilities-Exchange-Answer commands, see <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.
</p>
<p>The value of TBD MUST be used as the Application-Id in all QAR/QAA
      and QIR/QIA commands.
</p>
<p>The value of TBD MUST be used as the Application-Id in all ACR/ACA
      commands, because this application defines new, mandatory AVPs for
      accounting.
</p>
<p>The value of zero (0) SHOULD be used as the Application-Id in all
      STR/STA, ASR/ASA, and RAR/RAA commands, because these commands are
      defined in the Diameter base protocol and no additional mandatory AVPs
      for those commands are defined in this document.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
QoS-Authorization Request (QAR)</h3>

<p>The QoS-Authorization-Request message (QAR) indicated by the
        Command- Code field (see Section 3 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>)
        set to TBD and 'R' bit set in the Command Flags field is used by
        Network elements to request quality of service related resource
        authorization for a given flow.
</p>
<p>The QAR message MUST carry information for signaling session
        identification, Authorizing Entity identification, information about
        the requested QoS, and the identity of the QoS requesting entity. In
        addition, depending on the deployment scenario, an authorization token
        and credentials of the QoS requesting entity SHOULD be included.
</p>
<p>The message format, presented in ABNF form <a class='info' href='#RFC2234'>[RFC2234]<span> (</span><span class='info'>Crocker, D., Ed. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; November&nbsp;1997.</span><span>)</span></a>, is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;QoS-Request&gt; ::= &lt; Diameter Header: XXX, REQ, PXY &gt;
                      &lt; Session-Id &gt;
                      { Auth-Application-Id }
                      { Origin-Host }
                      { Origin-Realm }
                      { Destination-Realm }
                      { Auth-Request-Type }
                      [ Destination-Host ]
                      [ User-Name ]
                   *  [ QoS-Resources ]
                      [ QoS-Authz-Data ]
                      [ Cost-Information ]
                      [ Acc-Multisession-Id ]
                      [ Bound-Auth-Session-Id ]
                   *  [ AVP ]
</pre></div><p>

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
QoS-Authorization Answer (QAA)</h3>

<p>The QoS-Authorization-Answer message (QAA), indicated by the
        Command- Code field set to TBD and 'R' bit cleared in the Command
        Flags field is sent in response to the QoS-Authorization-Request
        message (QAR). If the QoS authorization request is successfully
        authorized, the response will include the AVPs to allow authorization
        of the QoS resources as well as accounting and transport plane gating
        information.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;QoS-Answer&gt; ::= &lt; Diameter Header: XXX, PXY &gt;
                  &lt; Session-Id &gt;
                  { Auth-Application-Id }
                  { Auth-Request-Type }
                  { Result-Code }
                  { Origin-Host }
                  { Origin-Realm }
               *  [ QoS-Resources ]
                  [ CC-Time ]
                  [ Acc-Multisession-Id ]
                  [ Session-Timeout ]
                  [ Authz-Session-Lifetime ]
                  [ Authz-Grace-Period ]
               *  [ AVP ]
</pre></div><p>

</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
QoS-Install Request (QIR)</h3>

<p>The QoS-Install Request message (QIR), indicated by the
        Command-Code field set to TDB and 'R' bit set in the Command Flags
        field is used by Authorizing entity to install or update the QoS
        parameters and the flow state of an authorized flow at the transport
        plane element.
</p>
<p>The message MUST carry information for signaling session
        identification or identification of the flow to which the provided QoS
        rules apply, identity of the transport plane element, description of
        provided QoS parameters, flow state and duration of the provided
        authorization.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;QoS-Install-Request&gt; ::= &lt; Diameter Header: XXX, REQ, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Destination-Realm }
                           { Auth-Request-Type }
                           [ Destination-Host ]
                        *  [ QoS-Resources ]
                           [ Session-Timeout ]
                           [ Authz-Session-Lifetime ]
                           [ Authz-Grace-Period ]
                           [ Authz-Session-Volume ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
QoS-Install Answer (QIA)</h3>

<p>The QoS-Install Answer message (QIA), indicated by the Command-Code
        field set to TBD and 'R' bit cleared in the Command Flags field is
        sent in response to the QoS-Install Request message (QIR) for
        confirmation of the result of the installation of the provided QoS
        reservation instructions.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;QoS-Install-Answer&gt; ::= &lt; Diameter Header: XXX, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Result-Code }
                        *  [ QoS-Resources ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Re-Auth-Request (RAR)</h3>

<p>The Re-Auth-Request message (RAR), indicated by the Command-Code
        field set to 258 and the 'R' bit set in the Command Flags field, is
        sent by the Authorizing Entity to the Network Element in order to
        initiate the QoS re-authorization from DQA server side. 
</p>
<p>If the RAR command is received by the Network Element without any
        parameters of the re-authorized QoS state, the Network Element MUST
        initiate a QoS re-authorization by sending a QoS-Authorization-Request
        (QAR) message towards the Authorizing entity.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;Re-Auth-Request&gt; ::= &lt; Diameter Header: 258, REQ, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Destination-Realm }
                           { Auth-Request-Type }
                           [ Destination-Host ]
                        *  [ QoS-Resources ]
                           [ Session-Timeout ]
                           [ Authz-Session-Lifetime ]
                           [ Authz-Grace-Period ]
                           [ Authz-Session-Volume ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Re-Auth-Answer (RAA)</h3>

<p>The Re-Auth-Answer message (RAA), indicated by the Command-Code
        field set to 258 and the 'R' bit cleared in the Command Flags field,
        is sent by the Network Element to the Authorizing Entity in response
        to the RAR command..
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;Re-Auth-Answer&gt; ::= &lt; Diameter Header: 258, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Result-Code }
                        *  [ QoS-Resources ]
                        *  [ AVP ]
</pre></div><p>

</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
Accounting Request (ACR)</h3>

<p>The Accounting Request message (ACR), indicated by the Command-Code
        field set to 271 and 'R' bit set in the Command Flags field is used by
        Network Element to report parameters of the authorized and established
        QoS reservation.
</p>
<p>The message MUST carry accounting information authorized QoS
        resources and its usage, e.g., QoS-Resources, CC-Time, CC-Cost,
        Acc-Multi-Session-Id.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;Accounting-Request&gt; ::= &lt; Diameter Header: XXX, REQ, PXY &gt;
                           &lt; Session-Id &gt;
                           { Acct-Application-Id }
                           { Destination-Realm }
                           [ Destination-Host ]
                           [ Accounting-Record-Type ]
                           [ Accounting-Record-Number ]
                         * [ QoS-Resources ]
                           [ Cost-Information ]
                           [ CC-Time ]
                           [ Acc-Multi-Session-Id ]
                         * [ AVP ]
</pre></div><p>

</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.8"></a><h3>5.8.&nbsp;
Accounting Answer (ACA)</h3>

<p>The Accounting Answer message (ACA), indicated by the Command-Code
        field set to 271 and 'R' bit cleared in the Command Flags field is
        sent in response to the Accounting Request message (ACR) as an
        acknowledgment of the ACR message and MAY carry additional management
        information for the accounting session, e.g. Acc-Interim-Interval
        AVP.
</p>
<p>The message format is defined as follows:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;Accounting-Answer&gt; ::= &lt; Diameter Header: XXX, PXY &gt;
                           &lt; Session-Id &gt;
                           { Acct-Application-Id }
                           [ Result-Code ]
                           [ Accounting-Record-Type ]
                           [ Accounting-Record-Number ]
                           [ Acc-Multi-Session-Id ]
                         * [ AVP ]
</pre></div><p>

</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Diameter QoS Authorization Application AVPs</h3>

<p>Each of the AVPs identified in the QoS-Authorization-Request/Answer
      and QoS-Install-Request/Answer messages and the assignment of their
      value(s) is given in this section.
</p>
<a name="diameter-base-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Diameter Base Protocol AVPs</h3>

<p>The Diameter QoS application uses a number of session management
        AVPs, defined in the Base Protocol (<a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>).
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Attribute Name                AVP Code     Reference [RFC3588]
Origin-Host                   264             Section 6.3
Origin-Realm                  296             Section 6.4
Destination-Host              293             Section 6.5
Destination-Realm             283             Section 6.6
Auth-Application-Id           258             Section 6.8
Result-Code                   268             Section 7.1
Auth-Request-Type             274             Section 8.7
Session-Id                    263             Section 8.8
Authz-Lifetime                291             Section 8.9
Authz-Grace-Period            276             Section 8.10
Session-Timeout                27             Section 8.13
User-Name                       1             Section 8.14
</pre></div><p>

</p>
<p>The Auth-Application-Id AVP (AVP Code 258) is assigned by IANA to
        Diameter applications. The value of the Auth-Application-Id for the
        Diameter QoS application is TBD.
</p>
<a name="credit-control-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Credit Control Application AVPs</h3>

<p>The Diameter QoS application provides accounting for usage of
        reserved QoS resources. Diameter QoS accounting has built-in support
        for online, duration based accounting. For this purpose it re-uses a
        number of AVPs defined in Diameter Credit Control application. <a class='info' href='#RFC4006'>[RFC4006]<span> (</span><span class='info'>Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;Diameter Credit-Control Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Attribute Name                AVP Code     Reference [RFC4006]
Cost-Information AVP          423             Section 8.7
Unit-Value AVP                445             Section 8.8
Currency-Code AVP             425             Section 8.11
Cost-Unit AVP                 424             Section 8.12
CC-Time AVP                   420             Section 8.21
Tariff-Time-Change AVP        451             Section 6.20
</pre></div><p>

</p>
<p>Usage of the listed AVPs is described in <a class='info' href='#accounting'>Section&nbsp;4<span> (</span><span class='info'>Accounting</span><span>)</span></a>
</p>
<p>Diameter QoS application is designed to independently provide
        credit control over the controlled QoS resources. However, deployment
        scenarios, where Diameter QoS application is collocated with Diameter
        Credit Control application, are not excluded. In such scenarios the
        credit control over the QoS resources might be managed by the Credit
        control application. Possible interworking approach might be a usage
        of Credit-Control AVP (AVP Code 426) with a newly defined value. It
        will indicate to the Diameter QoS entities that the credit control
        over the QoS resources would be handled in separate session by Credit
        Control application. An active cooperation of both applications would
        be required but it is not elaborated further in this document.
</p>
<a name="accounting-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Accounting AVPs</h3>

<p>The Diameter QoS application uses Diameter Accounting and
        accounting AVPs as defined in Section 9 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Additional description of the usage of some
        of them in the QoS authorization context is provided:
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Attribute Name                AVP Code     Reference [RFC3588]
Acct-Application-Id           259             Section 6.9
Accounting-Record-Type        480             Section 9.8.1
Accounting-Interim-Interval    85             Section 9.8.2
Accounting-Record-Number      485             Section 9.8.3
Accounting-Realtime-Required  483             Section 9.8.7
Acc-Multi-Session-ID           50             Section 9.8.5
</pre></div><p>

</p>
<p>The following AVPs need further explanation:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Acct-Application-Id AVP</dt>
<dd><br />

            The Acct-Application-Id AVP (AVP Code 259)is assigned by IANA to
            Diameter applications. The value of the Acct-Application-Id for
            the Diameter QoS application is TBD (TBD). <br />
<br />

</dd>
<dt>Acc-Multisession-ID</dt>
<dd><br />

            Acc-Multi-Session-ID AVP (AVP Code 50) SHOULD be used to link
            multiple accounting sessions together, allowing the correlation of
            accounting information. This AVP MAY be returned by the Diameter
            server in a QoS-Authorization-Answer message (QAA), and MUST be
            used in all accounting messages for the given session.
</dd>
</dl></blockquote>

<a name="qos-new-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Diameter QoS Application Defined AVPs</h3>

<p>This document reuses the AVPs defined in Section 4 of <a class='info' href='#I-D.ietf-dime-qos-attributes'>[I&#8209;D.ietf&#8209;dime&#8209;qos&#8209;attributes]<span> (</span><span class='info'>Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;Traffic Classification and Quality of Service Attributes for Diameter,&rdquo; December&nbsp;2009.</span><span>)</span></a>.
</p>
<p>This section lists the AVPs that are introduced specifically for
        the Diameter QoS application. The followig new AVPs are defined:
        Bound-Auth-Session-Id and the QoS-Authz-Data AVP.
</p>
<p>The following table describes the Diameter AVPs newly defined in
        this document for usage with the QoS Application, their AVP code
        values, types, possible flag values, and whether the AVP may be
        encrypted.
</p>
<p></p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                               +-------------------+
                                               |    AVP Flag rules |
+----------------------------------------------|----+---+----+-----+
|                       AVP  Section           |    |   |SHLD| MUST|
| Attribute Name        Code Defined Data Type |MUST|MAY| NOT|  NOT|
+----------------------------------------------+----+---+----+-----+
|QoS-Authz-Data         TBD    6.4  Grouped    | M  | P |    |  V  |
|Bound-Auth-Session-Id  TBD    6.4  UTF8String | M  | P |    |  V  |
+----------------------------------------------+----+---+----+-----+
|M - Mandatory bit. An AVP with "M" bit set and its value MUST be  |
|    supported and recognized by a Diameter entity in order the    |
|    message, which carries this AVP, to be accepted.              |
|P - Indicates the need for encryption for end-to-end security.    |
|V - Vendor specific bit that indicates whether the AVP belongs to |
|    a address space.                                              |
+------------------------------------------------------------------+
</pre></div><p>

</p>
<p>
</p>
<p></p>
<blockquote class="text"><dl>
<dt>QoS-Authz-Data</dt>
<dd><br />
 The
            QoS-Authz-Data AVP (AVP Code TBD) is of type OctetString. It is a
            container that carries application session or user specific data
            that has to be supplied to the Authorizing entity as input to the
            computation of the authorization decision. <br />
<br />

</dd>
<dt>Bound-Authentication-Session-Id</dt>
<dd><br />
 The Bound-Authentication-Session AVP (AVP Code
            TBD) is of type UTF8String. It carries the id of the Diameter
            authentication session that is used for the network access
            authentication (NASREQ authentication session). It is used to tie
            the QoS authorization request to a prior authentication of the end
            host done by a co-located application for network access
            authentication (Diameter NASREQ) at the QoS NE. <br />
<br />

</dd>
</dl></blockquote>

<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Examples</h3>

<a name="example_pull"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Example call flow for pull mode</h3>

<p>This section presents an example of the interaction between the end
        host and Diameter QoS application entities using Pull mode. The
        application layer signaling is, in this example, provided using SIP.
        Signaling for a QoS resource reservation is done using the QoS NSLP.
        The authorization of the QoS reservation request is done by the
        Diameter QoS application (DQA).<br /><hr class="insert" />
<a name="fig-example-pull"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  End-Host                                 SIP Server  Correspondent
requesting QoS                            (DQA Server)        Node

      |                                          |              |
    ..|....Application layer SIP signaling.......|..............|..
    . |  Invite (SDP)                            |              | .
    . +.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;              | .
    . |  100 Trying                              |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-+  Invite (SDP)| .
    . |                                          +-.-.-.....-.-.&gt; .
    . |                                          |  180 SDP'    | .
    . |                                          &lt;-.-.-.....-.-.+ .
    . |                                 +--------+--------+     | .
    . |                                 |Authorize session|     | .
    . |                                 |   parameters    |     | .
    . | 180 (Session parameters)        +--------+--------+     | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-+              | .
    ..|..........................................|... ..........|..
      |                                          |              |
      |           +------------+                 |              |
      |           |     NE     |                 |              |
      |           |(DQA Client)|                 |              |
      |           +------+-----+                 |              |
      |                  |                       |              |
      |QoS NSLP Reserve  |                       |              |
      +------------------&gt; QAR                   |              |
      | (POLICY_DATA&gt;v   +- - - - -&lt;&lt;AAA&gt;&gt;- - - -&gt;              |
      |  QSPEC)  v   &gt;===&gt;(Destination-Host,     |              |
      |      v   &gt;=======&gt;QoS-Authz-Data        ++------------+ |
      |      &gt;===========&gt;QoS-Resources,        |Authorize    | |
      |                  |Cost-Info)            |QoS resources| |
      |                  |                      ++------------+ |
      |                  | QAA                   |              |
      |                  &lt;- - - - -&lt;&lt;AAA&gt;&gt;- - - -+              |
      |                  |(Result-Code,          |              |
      |                  |QoS-Resources,         |              |
      |                  |CC-Time,               |              |
      |                  |Authz-Lifetime)        |              |
      |        +---------+--------+              |              |
      |        |Install QoS state1|              |              |
      |        |+ Authz. session  |              |              |
      |        +---------+--------+              |              |
      |                  |QoS NSLP Reserve                      |
      |                  +---------------..............---------&gt;
      |                  |                                      |
      |                  |                     QoS NSLP Response|
      |QoS NSLP Response &lt;---------------..............---------+
      &lt;------------------+                                      |
      |                  |                        QoS NSLP Query|
      |QoS NSLP Query    &lt;---------------..............---------+
      &lt;------------------+                                      |
      |QoS NSLP Reserve  |                                      |
      +------------------&gt; QAR                   |              |
      |                  +- - - - -&lt;&lt;AAA&gt;&gt;- - - -&gt;              |
      |                  |                   +---+---------+    |
      |                  |                   |Authorize    |    |
      |                  |                   |QoS resources|    |
      |                  | QAA               +---+---------+    |
      |                  &lt;- - - - -&lt;&lt;AAA&gt;&gt;- - - -+              |
      |        +---------+--------+              |              |
      |        |Install QoS state2|                             |
      |        |+ Authz. session  |                             |
      |        +---------+--------+                             |
      |                  |  QoS NSLP Reserve                    |
      |                  +---------------..............---------&gt;
      |                  |                     QoS NSLP Response|
      |QoS NSLP Response &lt;---------------..............---------+
      &lt;------------------+                                      |
      |                  |                                      |
      /------------------+--Data Flow---------------------------\
      \------------------+--------------------------------------/
      |                  |                                      |


      .-.-.-.-.  SIP signaling
      ---------  QoS NSLP signaling
      - - - - -  Diameter QoS Application messages
      =========  Mapping of objects between QoS and AAA protocol
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: QoS Authorization Example - Pull Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The communication starts with SIP signaling between the two end
        points and the SIP server for negotiation and authorization of the
        requested service and its parameters (see <a class='info' href='#fig-example-pull'>Figure&nbsp;7<span> (</span><span class='info'>QoS Authorization Example - Pull Mode</span><span>)</span></a>). As a part of the process, the SIP
        server verifies whether the user at Host A is authorized to use the
        requested service (and potentially the ability to be charged for the
        service usage). Negotiated session parameters are provided to the end
        host.
</p>
<p>Subsequently, Host A initiates a QoS signaling message towards Host
        B. It sends a QoS NSLP Reserve message, in which it includes
        description of the required QoS (QSPEC object) and authorization data
        for negotiated service session (part of the POLICY_DATA object).
        Authorization data includes, as a minimum, the identity of the
        authorizing entity (e.g., the SIP server) and an identifier of the
        application service session for which QoS resources are requested.
</p>
<p>A QoS NSLP Reserve message is intercepted and processed by the
        first QoS aware Network Element. The NE uses the Diameter QoS
        application to request authorization for the received QoS reservation
        request. The identity of the Authorizing Entity (in this case the SIP
        server that is co-located with a Diameter server) is put into the
        Destination-Host AVP, any additional session authorization data is
        encapsulated into the QoS-Authz-Data AVP and the description of the
        QoS resources is included into QoS-Resources AVP. In addition, the NE
        rates the requested QoS resources and announces the charging rate into
        the Cost-Information AVP. These AVPs are included into a QoS
        Authorization Request message, which is sent to the Authorizing
        entity.
</p>
<p>A Diameter QAR message will be routed through the AAA network to
        the Authorizing Entity. The Authorizing Entity verifies the requested
        QoS against the QoS resources negotiated for the service session and
        replies with QoS-Authorization answer (QAA) message. It carries the
        authorization result (Result-Code AVP) and the description of the
        authorized QoS parameters (QoS-Resources AVP), as well as duration of
        the authorization session (Authorization-Lifetime AVP) and duration of
        the time (CC-Time) for which the end-user should be charged with the
        rate announced in the QAR message. The NE interacts with the traffic
        control function and installs the authorized QoS resources and
        forwards the QoS NSLP Reserve message further along the data path.
</p>
<a name="example_push"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Example call flow for push mode</h3>

<p>This section presents an example of the interaction between the
        end-host and Diameter QoS application entities using Push Mode. The
        application layer signaling is, in this example, provided using SIP.
        Signaling for a QoS resource reservation is done using the QoS NSLP.
        The authorization of the QoS reservation request is done by the
        Diameter QoS application (DQA).<br /><hr class="insert" />
<a name="fig-example-push"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  End-Host              NE                  SIP Server  Correspondent
requesting QoS      (DQA Client)           (DQA Server)        Node

      |                  |                          |              |
    ..|....Application layer SIP signaling..........|..............|..
    . | Invite(SDP offer)|                          |              | .
    . +.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.&gt;              | .
    . |  100 Trying      |                          |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.+              | .
    . |.............................................|..............| .
      |                  |                +---------+-------------+|
      |                  |                |  Authorize request    ||
      |                  |                |  Keep session data    ||
      |                  |                |/Authz-time,Session-Id/||
      |                  |                +---------+-------------+|
      |                  |                          |              |
      |                  |&lt;-- - -- - QIR - -- - -- -+              |
      |                  |(Initial Request,Decision |              |
      |                  |(QoS-Resources,Authz-time)|              |
      |          +-------+---------+                |              |
      |          |Install QoS state|                |              |
      |          |       +         |                |              |
      |          | Authz. session  |                |              |
      |          | /Authz-time,    |                |              |
      |          |  CC-Time,Cost/  |                |              |
      |          +-------+---------+                |              |
      |                  + - - -- - QIA - - - - - -&gt;|              |
      |                  |     (Result-Code,        |              |
      |                  |      QoS-Resources)      |              |
      |                  |               +----------+------------+ |
      |                  |               | Report for successful | |
      |                  |               |   QoS reservation     | |
      |                  |               |Update of reserved QoS | |
      |                  |               |      resources        | |
      |                  |               +----------+------------+ |
    . |                  |                          | Invite (SDP) | .
    . |                  |                          +-.-.-.....-.-.&gt; .
    . | 180 (Ringing)                               |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.&lt;.-.-.-.-.-.-.-+ .
    . |                  |                          |  200 OK (SDP)| .
    . |                  |                          &lt;-.-.-.....-.-.+ .
      |                  |                 +--------+-----------+  |
      |                  |                 |re-Authorize session|  |
      |                  |                 |   parameters       |  |
      |                  |                 +--------+-----------+  |
      |                  &lt;- - - - - - RAR - - - - - +              |
      |        +---------+--------+                 |              |
      |        |Activate QoS state|                 |              |
      |        +---------+--------+                 |              |
      |                  +- - - - - - RAA - - - - - &gt;              |
    . | 200 (SDP answer) |                          |              | .
    . &lt;.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.+              | .
      |                  |                                         |
      /------------------+-----Data Flow---------------------------\
      \------------------+-----------------------------------------/
      |                  |                                         |

      .-.-.-.-.  SIP signaling
      - - - - -  Diameter QoS Application messages
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: QoS Authorization Example - Push Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>The communication starts with SIP signaling between the two end
        points and the SIP server for negotiation and authorization of the
        requested service and its parameters (see <a class='info' href='#fig-example-push'>Figure&nbsp;8<span> (</span><span class='info'>QoS Authorization Example - Push Mode</span><span>)</span></a>). As a part of the process, the SIP
        server verifies whether the user at Host A is authorized to use the
        requested service (and potentially the ability to be charged for the
        service usage). The DQA server is triggered to authorize the QoS
        request based on session parameters (i.e. SDP offer), initiate a
        Diameter QoS authorization session and install authorized QoS state to
        the Network Element via QIR message.
</p>
<p>The DQA server may obtain the info of peer DQA client from
        pre-configured information or query the DNS based on Host A's identity
        or IP address (In this case a DQA server is co-located with a SIP
        server and a DQA client is co-located with a Network element). The
        identity of Network Element is put into the Destination-Host AVP, the
        description of the QoS resources is included into QoS-Resources AVP,
        as well as duration of the authorization session
        (Authorization-Lifetime AVP) and duration of the time (CC-Time) for
        which the end-user should be charged with the rate announced in the
        QIR message. The NE interacts with the traffic control function and
        reserves the authorized QoS resources accordingly.
</p>
<p>With successful QoS authorization, the SDP offer in SIP Invite is
        forwared to Host B. Host B sends back a 18x (ringing) message towards
        Host A and processes the SDP. Once Host B accepts the call, it sends
        back a 200 OK, in which it includes description of the accepted
        session parameters (i.e. SDP answer).
</p>
<p>The DQA server may verifies the accepted QoS against the
        pre-authorized QoS resources, and sends a Diameter RAR message to the
        DQA client in the network element for activating the installed
        policies and commit the resource allocation. With successful QoS
        enforcement, the 200 OK is forwarded towards Host A.
</p>
<p>Note that the examples above show a sender-initiated reservation
        from the End-Host towards the corresponding node and a
        receiver-initiated reservation from the correspondent node towards the
        End-Host.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>TBD
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>TBD
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank John Loughney and Allison Mankin for
      their input to this document. In September 2005 Robert Hancock, Jukka
      Manner, Cornelia Kappler, Xiaoming Fu, Georgios Karagiannis and Elwyn
      Davies provided a detailed review. Robert also provided us with good
      feedback earlier in 2005. Jerry Ash provided us review comments late
      2005/early 2006. Rajith R provided some inputs to the document early
      2007
</p>
<p>[Editor's Note: Acknowledgements need to be updated.]
</p>
<a name="contributors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Contributors</h3>

<p>The authors would like to thank Tseno Tsenov (tseno.tsenov@gmail.com)
      and Frank Alfano (falfano@lucent.com) for starting the Diameter Quality
      of Service work within the IETF, for your significant draft
      contributions and for being the driving force for the first few draft
      versions.
</p>
<p>[Editor's Note: A bit of history needs to be included here.]
</p>
<a name="open-issue"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Open Issues</h3>

<p>Open issues related to this draft are listed at the issue tracker
      available at: http://www.tschofenig.com:8080/diameter-qos/
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-qos-attributes">[I-D.ietf-dime-qos-attributes]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-attributes-15.txt">Traffic Classification and Quality of Service Attributes for Diameter</a>,&rdquo; draft-ietf-dime-qos-attributes-15 (work in progress), December&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-qos-attributes-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2234">[RFC2234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@imc.org">Crocker, D., Ed.</a> and <a href="mailto:paulo@turnpike.com">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; RFC&nbsp;2234, November&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2234.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2234.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2234.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[RFC3588]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4005">[RFC4005]</a></td>
<td class="author-text">Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;<a href="http://tools.ietf.org/html/rfc4005">Diameter Network Access Server Application</a>,&rdquo; RFC&nbsp;4005, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4005.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4006">[RFC4006]</a></td>
<td class="author-text">Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and J. Loughney, &ldquo;<a href="http://tools.ietf.org/html/rfc4006">Diameter Credit-Control Application</a>,&rdquo; RFC&nbsp;4006, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4006.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-ntlp">[I-D.ietf-nsis-ntlp]</a></td>
<td class="author-text">Schulzrinne, H. and M. Stiemerling, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">GIST: General Internet Signalling Transport</a>,&rdquo; draft-ietf-nsis-ntlp-20 (work in progress), June&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-qos-nslp">[I-D.ietf-nsis-qos-nslp]</a></td>
<td class="author-text">Manner, J., Karagiannis, G., and A. McDonald, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-qos-nslp-18.txt">NSLP for Quality-of-Service Signaling</a>,&rdquo; draft-ietf-nsis-qos-nslp-18 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-qos-nslp-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2210">[RFC2210]</a></td>
<td class="author-text"><a href="mailto:jtw@lcs.mit.edu">Wroclawski, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2210">The Use of RSVP with IETF Integrated Services</a>,&rdquo; RFC&nbsp;2210, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2210.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2210.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2210.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2486">[RFC2486]</a></td>
<td class="author-text"><a href="mailto:bernarda@microsoft.com">Aboba, B.</a> and <a href="mailto:mbeadles@wcom.net">M. Beadles</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2486">The Network Access Identifier</a>,&rdquo; RFC&nbsp;2486, January&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2486.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2486.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2486.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2749">[RFC2749]</a></td>
<td class="author-text"><a href="mailto:herzog@iphighway.com">Herzog, S.</a>, <a href="mailto:jboyle@Level3.net">Boyle, J.</a>, <a href="mailto:ronc@cisco.com">Cohen, R.</a>, <a href="mailto:David.Durham@intel.com">Durham, D.</a>, <a href="mailto:rajan@research.att.com">Rajan, R.</a>, and <a href="mailto:asastry@cisco.com">A. Sastry</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2749">COPS usage for RSVP</a>,&rdquo; RFC&nbsp;2749, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2749.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2753">[RFC2753]</a></td>
<td class="author-text"><a href="mailto:raj.yavatkar@intel.com">Yavatkar, R.</a>, <a href="mailto:dimitris@watson.ibm.com">Pendarakis, D.</a>, and <a href="mailto:guerin@ee.upenn.edu">R. Guerin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2753">A Framework for Policy-based Admission Control</a>,&rdquo; RFC&nbsp;2753, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2753.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2865">[RFC2865]</a></td>
<td class="author-text">Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;<a href="http://tools.ietf.org/html/rfc2865">Remote Authentication Dial In User Service (RADIUS)</a>,&rdquo; RFC&nbsp;2865, June&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2865.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3313">[RFC3313]</a></td>
<td class="author-text">Marshall, W., &ldquo;<a href="http://tools.ietf.org/html/rfc3313">Private Session Initiation Protocol (SIP) Extensions for Media Authorization</a>,&rdquo; RFC&nbsp;3313, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3313.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3520">[RFC3520]</a></td>
<td class="author-text">Hamer, L-N., Gage, B., Kosinski, B., and H. Shieh, &ldquo;<a href="http://tools.ietf.org/html/rfc3520">Session Authorization Policy Element</a>,&rdquo; RFC&nbsp;3520, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3520.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3521">[RFC3521]</a></td>
<td class="author-text">Hamer, L-N., Gage, B., and H. Shieh, &ldquo;<a href="http://tools.ietf.org/html/rfc3521">Framework for Session Set-up with Media Authorization</a>,&rdquo; RFC&nbsp;3521, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3521.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4027">[RFC4027]</a></td>
<td class="author-text">Josefsson, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4027">Domain Name System Media Types</a>,&rdquo; RFC&nbsp;4027, April&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4027.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Glen Zorn (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:glenzorn@comcast.net">glenzorn@comcast.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peter J. McCann</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Motorola Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1301 E. Algonquin Rd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Schaumburg, IL  60196</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 847 576 3440</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pete.mccann@motorola.com">pete.mccann@motorola.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otto-Hahn-Ring 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Munich, Bavaria  81739</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.com">http://www.tschofenig.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tina Tsou</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shenzhen,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.C</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tena@huawei.com">tena@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avri Doria</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lulea University
        of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Arbetsvetenskap</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lulea,   SE-97187</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sweden</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:avri@ltu.se">avri@ltu.se</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dong Sun</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bell Labs/Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">101 Crawfords Corner Rd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Holmdel, NJ  07733</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dongsun@alcatel-lucent.com">dongsun@alcatel-lucent.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
