


Homenet                                                  T. Winters, Ed.
Internet-Draft                                                   UNH-IOL
Intended status: Informational                         February 14, 2014
Expires: August 16, 2014

                Service Provider Edge Router Interaction
               draft-winters-homenet-sper-interaction-01

Abstract

   This document describes the interaction between a Service Provider
   Gateway fixed at the home edge, and the Home Networking interior
   routers.  It assesses the interactions between existing routers
   implementing [RFC7084] and the Home Networking routers.  The document
   will also define the interactions between other Service Provider Edge
   Router  (eg.  HIPnet) and Home Networking router.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 16, 2014.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (http://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Simplified BSD License text
   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  2
     1.1.  Requirements Language  . . . . . . . . . . . . . . . . . .  2

Winters                 Expires August 16, 2014                 [Page 1]

Internet-Draft                    SPER                     February 2014

   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  2
   3.  Border Discovery . . . . . . . . . . . . . . . . . . . . . . .  3
     3.1.  All Ports Discovery  . . . . . . . . . . . . . . . . . . .  3
     3.2.  WAN Port defined As External . . . . . . . . . . . . . . .  4
   4.  Home Networking Scenarios  . . . . . . . . . . . . . . . . . .  4
     4.1.  7084 to Homenet  . . . . . . . . . . . . . . . . . . . . .  4
       4.1.1.  Addressing . . . . . . . . . . . . . . . . . . . . . .  4
       4.1.2.  Routing  . . . . . . . . . . . . . . . . . . . . . . .  4
       4.1.3.  Border . . . . . . . . . . . . . . . . . . . . . . . .  5
       4.1.4.  Service Discovery into the Homenet . . . . . . . . . .  5
     4.2.  Homenet to 7084  . . . . . . . . . . . . . . . . . . . . .  5
       4.2.1.  Addressing . . . . . . . . . . . . . . . . . . . . . .  6
       4.2.2.  Routing  . . . . . . . . . . . . . . . . . . . . . . .  6
       4.2.3.  Border . . . . . . . . . . . . . . . . . . . . . . . .  6
       4.2.4.  Service Discovery into the Homenet . . . . . . . . . .  6
     4.3.  Service Provider Edge Router (SPER) to Homenet . . . . . .  7
       4.3.1.  Addressing . . . . . . . . . . . . . . . . . . . . . .  7
       4.3.2.  Routing  . . . . . . . . . . . . . . . . . . . . . . .  7
       4.3.3.  Border . . . . . . . . . . . . . . . . . . . . . . . .  7
       4.3.4.  Service Discovery  . . . . . . . . . . . . . . . . . .  8
     4.4.  Homenet to SPER  . . . . . . . . . . . . . . . . . . . . .  8
       4.4.1.  Addressing . . . . . . . . . . . . . . . . . . . . . .  8
       4.4.2.  Routing  . . . . . . . . . . . . . . . . . . . . . . .  9
       4.4.3.  Border . . . . . . . . . . . . . . . . . . . . . . . .  9
       4.4.4.  Service Discovery into the Homenet . . . . . . . . . .  9
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  9
   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  9
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  9
     8.1.  Normative References . . . . . . . . . . . . . . . . . . .  9
     8.2.  Informative References . . . . . . . . . . . . . . . . . . 11
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 11

1.  Introduction

   This document defines the interactions between the future Homenet
   network and 7084 Routers and Service Provider Edge Routers (SPER).
   In the future the SPER will be full Homenet routers but there will be
   a period of transition.  This document specifies how currently
   deployed SPER will interact with Homenet architecture [I-D.ietf-
   homenet-arch].   The goal of this document is to make recommendations
   on issues uncovered to make the devices work with the future Homenet.
   These recommendations may result in requirements for the Homenet
   routers.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].







Winters                 Expires August 16, 2014                 [Page 2]

Internet-Draft                    SPER                     February 2014

2.  Terminology

   For purposes of this report the Design Team adopts the following
   terminology.

   o  Border: a point, typically resident on a router, between two
      networks.  A basic example is between the main internal homenet
      and a guest network.  This also defines point(s) at which
      filtering and forwarding policies for different types of traffic
      may be applied.  For the purpose of this document we use the
      Default Border Definition [I-D.kline-homenet-default-perimeter] to
      describe how the Border is discovered.

   o  SPER: Service Provider Edge Router: A border router intended for
      home or small-office use that forwards packet explicitly addressed
      as defined [I-D.grundemann-homenet-hipnet] or [BBF.TR124]
      connecting the homenet to a service provider network.

   o  Homenet: Home network consisting of routers interacting with each
      other using a dynamic routing protocol for prefix allocation and
      reachability.  Examples include Prefix Assignment [I-D.arkko-
      homenet-prefix-assignment] and OSPFv3 Auto-Configuration [I-D
      .ietf-ospf-ospfv3-autoconfig]

   o  Homenet Naming and Service Discovery: The Homenet supports the
      ability for users and devices to be able to discover devices and
      services available in the Homenet.  Currently the mechanism is
      undefined but methods such as DNSSD [RFC6763], [SSDP], Hybrid
      model using [I-D.cheshire-dnssd-hybrid] or DNS-Based Service
      Discovery using OSPFv3 [I-D.stenberg-homenet-dnssdext-hybrid-
      proxy-ospf] could be used to solve this issue.

   o  Internet Service Provider (ISP): An entity that provides access to
      the Internet.  In this document, a service provider specifically
      offers Internet access using IPv6, and may also offer IPv4
      Internet access.  The service provider can provide such access
      over a variety of different transport methods such as DSL, cable,
      wireless, and others.

   o  7084: A router intended for home or small-office use that forwards
      packet explicitly addressed to itself as defined in [RFC7084]

3.  Border Discovery

   According to [I-D.kline-homenet-default-perimeter] there are 3 types
   of product interfaces: external, internal, and mixed.   Border
   Discovery is the process of discovering the interface types.  Below
   we describe the the 3 choices.

3.1.  All Ports Discovery

   Border Discovery must be performed on all interfaces.  Legacy Routers
   that don't support Homenet will not participate in Border Discovery


Winters                 Expires August 16, 2014                 [Page 3]

Internet-Draft                    SPER                     February 2014

   and are considered to be external to the Homenet Border.

3.2.  WAN Port defined As External

   WAN ports are permanently defined as external requiring no discovery.
   LAN ports perform Border Discovery.  This requires that the user
   connect the WAN interface to the ISP or SPER defining the boundary.
   All other ports are in border discovery mode.  The advantage of this
   approach is that it allows the Homenet to have multiple egress ports.

4.  Home Networking Scenarios

4.1.  7084 to Homenet

                     +-----------+
                     |  Service  |
                     |  Provider |
                     |   Router  |
                     +-----+-----+
                           |
                           |
                           |  Customer
                           |  Internet Connection
                           |
                     +-----v-----+
                     |   7084    |
                     |  Router   |
                     |           |
                     +-----+-----+
                           |
                    +----+-+-------+
                    |              |
                    |              |
                +---+----+   +-----+------+
                |  IPv6  |   |  Homenet   |
                |  Host  |   |  Router    |
                |        |   |            |
                +--------+   +------------+

4.1.1.  Addressing

   A 7084 Router acquires addresses to provision the LAN through DHCP
   Prefix Delegation [RFC3633].  A 7084 Router will assign a separate /
   64 from the set of delegated prefix(es) for each LAN interfaces.
   The Router can assign addresses to the LAN hosts using either SLAAC
   or DHCP. There is no requirement for redistributing any unused
   prefix(es) that were delegated to the 7084 Router.  Support of IA_PD
   on the LAN interface is not required for a 7084 Router.  If a 7084
   Router does not support IA_PD on the LAN interface the Homenet will
   not receive a prefix allocation, and therefore will not have global
   addressing for the entire Homenet.

4.1.2.  Routing


Winters                 Expires August 16, 2014                 [Page 4]

Internet-Draft                    SPER                     February 2014


   A 7084 Router learns default routes through Router Advertisements on
   the WAN interface.  Routes are installed when a prefix is assigned to
   a LAN interface.  All other Home Routing information requires user
   configuration.

   A 7084 Router will NOT forward packets from an unrecognized source
   address.   Any IPv6 packets routed from the Homenet would receive an
   ICMPv6 Destination Unreachable message.   This restricts the Homenet
   to internal communications only.  Packets with unrecognized
   destination addresses in the Homenet MAY pass thru a 7084 Router if
   configured.  This configuration might be done thru the mechanism such
   a IA_PD or direct configuration.

4.1.3.  Border

   A 7084 Router does not have a method for participating in Homenet
   border discovery.   A 7084 Router and any hosts connected to the
   Router are considered to be as External to the Homenet.   A Homenet
   Router is recommended to support a configuration method that will
   allow the border to include the 7084 Router as Internal to the
   Homenet.

4.1.4.  Service Discovery into the Homenet

   For service discovery to works routers need to forward multicast
   traffic appropriately enabling server discovery across the home
   network.  A 7084 Router does not have any requirements for supporting
   multicast forwarding.  Based on this knowledge it is unlikely that
   Service Discovery between the 7084 and Homemnet will work.

4.2.  Homenet to 7084























Winters                 Expires August 16, 2014                 [Page 5]

Internet-Draft                    SPER                     February 2014


                      +-----------+
                      |  Service  |
                      |  Provider |
                      |   Router  |
                      +-----+-----+
                            |
                            |
                            |  Customer
                            |  Internet Connection
                            |
                      +-----v-----+
                      |  Homenet  |
                      |  Router   |
                      |           |
                      +-----+-----+
                            |
                    +----+-+-------+
                    |              |
                    |              |
                +---+----+   +-----+------+
                |  IPv6  |   |  7084      |
                |  Host  |   |  Router    |
                |        |   |            |
                +--------+   +------------+

4.2.1.  Addressing

   A 7084 Router needs to receive an IA_PD to allow devices on LAN
   interfaces to be addressed.  For addressing to work properly the
   Homenet must provide IA_PDs when requested.

4.2.2.  Routing

   When a Homenet Router is assigned an IA_PD it MUST install routes for
   the prefixes into the Homenet Routing infrastructure.  This will
   allow packets to be routed from the Homenet to the 7084 Router.   A
   7084 Router only needs a Router Advertisement with a valid Router
   Lifetime to route into the Homenet.

4.2.3.  Border

   A Homenet Router with the firewall on might not allow valid traffic
   from devices connected to the 7084 Router.  When a Homenet Router is
   assigned an IA_PD there needs to be a secure way for the Homenet
   Border to allow IPv6 traffic to flow from the 7084 router into the
   Homenet or Internet.

4.2.4.  Service Discovery into the Homenet






Winters                 Expires August 16, 2014                 [Page 6]

Internet-Draft                    SPER                     February 2014


   For service discovery to work routers need to forward multicast
   traffic appropriately enabling server discovery across the home
   network.  A 7084 Router does not have any requirements for supporting
   multicast forwarding.  Based on this knowledge it is unlikely that
   Service Discovery between the 7084 and Homemnet will work.

4.3.  Service Provider Edge Router (SPER) to Homenet

                       +-----------+
                       |  Service  |
                       |  Provider |
                       |   Router  |
                       +-----+-----+
                             |
                             |
                             |  Customer
                             |  Internet Connection
                             |
                       +-----+-----+
                       |   SPER    |
                       |           |
                       |           |
                       +-----+-----+
                             |
                      +----+-+-------+
                      |              |
                      |              |
                  +---+----+   +-----+------+
                  |  IPv6  |   |  Homenet   |
                  |  Host  |   |            |
                  |        |   |            |
                  +--------+   +------------+

4.3.1.  Addressing

   SPERs use DHCPv6 prefix sub-delegation to build the network [I-D
   .grundemann-homenet-hipnet].  If the prefix is larger then a single /
   64 prefix the SPER will subdivide the IPv6 prefix received via DHCPv6
   [RFC3315].  Using Recursive Prefix Delegation allows the Homenet to
   receive prefixes that can be used to address the network.

4.3.2.  Routing

   Leveraging the recursive prefix delegation method described above, a
   SPER installs a route to the WAN interface of the router which
   delegated the prefixes.  With this routing information the SPER is
   able to properly route packets to and from the Homenet.

4.3.3.  Border





Winters                 Expires August 16, 2014                 [Page 7]

Internet-Draft                    SPER                     February 2014


   A SPER implements a stateful [RFC6092] firewall which may be have it
   enabled.  This stateful firewall will allow homenet traffic to leave
   the network.  It is limited to only returning traffic originated from
   the Homenet.  No connections can be originated from outside of the
   Homenet.

   A Homenet Router with the firewall on might not allow valid traffic
   from devices connected to the HIPnet SPER.  A Homenet Router will be
   able to detect a SPER based on a CER_ID, [I-D.donley-dhc-cer-id-
   option], SPER MUST include an CER_ID option with an address that is
   not the unspecified address (::).   This allows for the Homenet
   Router to detect a SPER allowing native IPv6 traffic through the
   firewall so that traffic can flow between the SPER and Homenet.

4.3.4.  Service Discovery

   Both the Homenet and SPER have several common protocols that can be
   used for service discovery such as mDNS [RFC6762], DNS-SD [RFC6763],
   and [SSDP].   Both the SPER and Homenet Routers may have host
   directly connected that are using them as DNS servers.  If the SPER
   advertises itself as the DNS-SD server for connected host, the host
   could query the SPER.   The issue that arises with this configuration
   is the HIPnet Router currently has no method for finding the Homenet
   router to query when trying to resolve DNS.

4.4.  Homenet to SPER

                     +-----------+
                     |  Service  |
                     |  Provider |
                     |   Router  |
                     +-----+-----+
                           |
                           |
                           |  Customer
                           |  Internet Connection
                           |
                     +-----+-----+
                     |  Homenet  |
                     |           |
                     |           |
                     +-----+-----+
                           |
                    +------+-------+
                    |              |
                    |              |
                +---+----+   +-----+------+
                |  IPv6  |   |    SPER    |
                |  Host  |   |            |
                |        |   |            |
                +--------+   +------------+

4.4.1.  Addressing

Winters                 Expires August 16, 2014                 [Page 8]

Internet-Draft                    SPER                     February 2014


   A SPER needs to receive an IA_PD to address IPv6 host and routers
   behind it.  If a large enough prefix is assigned, /56 for example,
   the SPER will attempt further sub-delegation.  This will not be
   optimized for the network but will still function properly.  For
   addressing between the SPER and Homenet to work properly the Homenet
   must provide IA_PDs when requested.

4.4.2.  Routing

   When a Homenet Router assigns an IA_PD to the SPER it MUST install
   routes for the prefixes into the Homenet Routing infrastructure.
   This will allow packets to be routed from the Homenet to the SPER. If
   there are two ingress paths to the SPER, the sub-optimal path will be
   choosen based on the interface that assigned the IA_PD.

4.4.3.  Border

   A Homenet Router with the firewall enabled might not allow valid
   traffic from devices connected to the SPER or addressed by the SPER
   to enter the Homenet.  When a Homenet Router assigns an IA_PD there
   needs to be a secure way for the Homenet Border to allow IPv6 traffic
   to flow from the SPER into the Homenet or Internet.

4.4.4.  Service Discovery into the Homenet

   For service discovery to work routers need to forward multicast
   traffic appropriately enabling server discovery across the home
   network.

5.  Security Considerations

6.  IANA Considerations

   This document makes no request of IANA.

7.  Acknowledgements

   The Homenet Design Team: Mikael Abrahamsson, Ray Bellis, John
   Brzozowski, Lorenzo Colitti, Tim Chown, Chris Donley, Markus
   Stenberg, Andrew Yourtchecko, Erik Kline

8.  References

8.1.  Normative References

   [I-D.arkko-homenet-prefix-assignment]
              Arkko, J., Lindem, A. and B. Paterson, "Prefix Assignment
              in a Home Network", Internet-Draft draft-arkko-homenet-
              prefix-assignment-04, May 2013.

   [I-D.cheshire-dnssd-hybrid]



Winters                 Expires August 16, 2014                 [Page 9]

Internet-Draft                    SPER                     February 2014

              Cheshire, S., "Hybrid Unicast/Multicast DNS-Based Service
              Discovery", Internet-Draft draft-cheshire-dnssd-hybrid-01,
              January 2014.

   [I-D.donley-dhc-cer-id-option]
              Donley, C., Kloberdans, M., Brzozowski, J. and C.
              Grundemann, "Customer Edge Router Identification Option",
              Internet-Draft draft-donley-dhc-cer-id-option-02, January
              2014.

   [I-D.grundemann-homenet-hipnet]
              Grundemann, C., Donley, C., Brzozowski, J., Howard, L. and
              V. Kuarsingh, "A Near Term Solution for Home IP Networking
              (HIPnet)", Internet-Draft draft-grundemann-homenet-
              hipnet-01, February 2013.

   [I-D.ietf-homenet-arch]
              Chown, T., Arkko, J., Brandt, A., Troan, O. and J. Weil,
              "IPv6 Home Networking Architecture Principles", Internet-
              Draft draft-ietf-homenet-arch-11, October 2013.

   [I-D.ietf-ospf-ospfv3-autoconfig]
              Lindem, A. and J. Arkko, "OSPFv3 Auto-Configuration",
              Internet-Draft draft-ietf-ospf-ospfv3-autoconfig-05,
              October 2013.

   [I-D.kline-homenet-default-perimeter]
              Kline, E., "Default Border Definition", Internet-Draft
              draft-kline-homenet-default-perimeter-00, March 2013.

   [I-D.stenberg-homenet-dnssdext-hybrid-proxy-ospf]
              Stenberg, M., "Hybrid Unicast/Multicast DNS-Based Service
              Discovery Auto-Configuration Using OSPFv3", Internet-Draft
              draft-stenberg-homenet-dnssdext-hybrid-proxy-ospf-00, June
              2013.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C. and
              M. Carney, "Dynamic Host Configuration Protocol for IPv6
              (DHCPv6)", RFC 3315, July 2003.

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.

   [RFC6092]  Woodyatt, J., "Recommended Simple Security Capabilities in
              Customer Premises Equipment (CPE) for Providing
              Residential IPv6 Internet Service", RFC 6092, January
              2011.




Winters                 Expires August 16, 2014                [Page 10]

Internet-Draft                    SPER                     February 2014


   [RFC6204]  Singh, H., Beebee, W., Donley, C., Stark, B. and O. Troan,
              "Basic Requirements for IPv6 Customer Edge Routers", RFC
              6204, April 2011.

   [RFC6763]  Cheshire, S. and M. Krochmal, "DNS-Based Service
              Discovery", RFC 6763, February 2013.

   [RFC7084]  Singh, H., Beebee, W., Donley, C. and B. Stark, "Basic
              Requirements for IPv6 Customer Edge Routers", RFC 7084,
              November 2013.

8.2.  Informative References

   [BBF.TR124]
              Broadband Forum, "TR-124: Functional Requirements for
              Broadband Residental Gateways Devices", August 2012.

   [RFC6762]  Cheshire, S. and M. Krochmal, "Multicast DNS", RFC 6762,
              February 2013.

   [SSDP]     UPnP Forum, "Univeral Plug and Play (UPnP) Device
              Architecture 1.1", November 2008.

Author's Address

   Timothy Winters, editor
   UNH-IOL
   Durham, NH
   
   Email: twinters@iol.unh.edu























Winters                 Expires August 16, 2014                [Page 11]
