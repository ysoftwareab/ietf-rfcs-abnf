

Network Mobility                                              P. Thubert
Internet-Draft                                                     Cisco
Expires: August 8, 2005                                      R. Wakikawa
                                                         Keio University
                                                          V. Devarapalli
                                                                   Nokia
                                                        February 7, 2005


                        NEMO Home Network models
                 draft-ietf-nemo-home-network-models-02

Status of this Memo

   By submitting this Internet-Draft, I certify that any applicable
   patent or other IPR claims of which I am aware have been disclosed,
   and any of which I become aware will be disclosed, in accordance with
   RFC 3668.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 8, 2005.

Copyright Notice

   Copyright (C) The Internet Society (2005).  All Rights Reserved.

Abstract

   This paper documents some usage patterns and the associated issues
   when deploying a Home Network for NEMO-enabled Mobile Routers,
   conforming the NEMO Basic Support draft [8].  The aim here is
   specifically to provide some examples of organization of the Home
   Network, as they were discussed in NEMO related mailing lists.




Thubert, et al.          Expires August 8, 2005                 [Page 1]

Internet-Draft    Home Network models with NEMO basic      February 2005


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology and concepts . . . . . . . . . . . . . . . . . . .  5
   3.  General Expectations . . . . . . . . . . . . . . . . . . . . .  6
   4.  MIP Home Network . . . . . . . . . . . . . . . . . . . . . . .  7
   5.  NEMO Extended Home Network . . . . . . . . . . . . . . . . . .  8
     5.1   Configuration  . . . . . . . . . . . . . . . . . . . . . .  8
     5.2   Returning Home . . . . . . . . . . . . . . . . . . . . . .  9
     5.3   Home Address from MNP  . . . . . . . . . . . . . . . . . .  9
     5.4   Deployment Caveats . . . . . . . . . . . . . . . . . . . . 10
       5.4.1   MR side  . . . . . . . . . . . . . . . . . . . . . . . 10
     5.5   Applicability  . . . . . . . . . . . . . . . . . . . . . . 10
   6.  NEMO Aggregated Home Network . . . . . . . . . . . . . . . . . 11
     6.1   Configuration  . . . . . . . . . . . . . . . . . . . . . . 11
     6.2   Returning Home . . . . . . . . . . . . . . . . . . . . . . 11
       6.2.1   Returning Home by egress . . . . . . . . . . . . . . . 12
       6.2.2   Returning Home by ingress  . . . . . . . . . . . . . . 12
     6.3   Applicability  . . . . . . . . . . . . . . . . . . . . . . 13
     6.4   Deployment Caveats . . . . . . . . . . . . . . . . . . . . 13
       6.4.1   HA Side  . . . . . . . . . . . . . . . . . . . . . . . 13
       6.4.2   MR side  . . . . . . . . . . . . . . . . . . . . . . . 14
   7.  Virtual Home Network . . . . . . . . . . . . . . . . . . . . . 15
     7.1   Configuration  . . . . . . . . . . . . . . . . . . . . . . 15
     7.2   Applicability  . . . . . . . . . . . . . . . . . . . . . . 16
   8.  Mobile Home  . . . . . . . . . . . . . . . . . . . . . . . . . 17
     8.1   Configuration  . . . . . . . . . . . . . . . . . . . . . . 17
     8.2   Applicability  . . . . . . . . . . . . . . . . . . . . . . 18
   9.  Changes  . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
     9.1   Changes from version 00 to 01  . . . . . . . . . . . . . . 20
     9.2   Changes from version 01 to 02  . . . . . . . . . . . . . . 20
   10.   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . 21
   11.   References . . . . . . . . . . . . . . . . . . . . . . . . . 21
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 22
   A.  Returning Home emulation in the virtual case . . . . . . . . . 23
       Intellectual Property and Copyright Statements . . . . . . . . 24















Thubert, et al.          Expires August 8, 2005                 [Page 2]

Internet-Draft    Home Network models with NEMO basic      February 2005


1.  Introduction

   This document assumes that the reader is familiar with IPv6 Mobility
   as defined in [7], with the NEMO Basic Support [8] and with the NEMO
   terminology document [9].

   In order to read this document properly, the distinction between the
   concepts of Home Link and of Home Network must be very clear.  A Home
   Link is a physical or a virtual Link, attached to a Home Agent.  A
   Home Network is an aggregation that can be further subnetted.  As a
   result, the Home Network is not necessarily contained on a Home Link.
   In fact, the Mobile Network Prefixes are subnets of the Home Network.
   How the two concepts relate in a given deployment depend on the
   organization of the Home Network, as described below.

   Five different organizations of the Home Network including a
   hierarchical construction are documented:

   MIPv6 Home Network: A short reminder of what the Home Network is with
      Mobile IP, in order to help the reader figure out the evolution
      towards NEMO.

   NEMO Extended Home Network: In this disposition, the Home Network is
      only one subnet of a larger aggregation that encompasses the
      Mobile Networks, called extended Home Network.  When at Home, a
      Mobile Router performs normal routing between the Home Link and
      the Mobile Networks.  More in Section 5.

   NEMO Aggregated Home Network: In this disposition, the Home Network
      actually overlaps with the Mobile Networks.  When at Home, a
      Mobile Router acts as a bridge between the Home Link and the
      Mobile Networks.  More in Section 6.

   Virtual Home Network: In this disposition, there is no physical Home
      Link at all for the Mobile Routers to come back Home to.  More in
      Section 7.

   NEMO Mobile Home Network: In this disposition, there is a bitwise
      hierarchy of Home Networks.  A global Home Network is advertised
      to the infrastructure by a head Home Agent and further subnetted
      into Mobile Networks.  Each subnet is owned by a Mobile Router
      that registers it in a NEMO fashion while acting as a Home Agent
      for that network.  More in Section 8.

   In all cases, the Home Agents collectively advertise only the
   aggregation of the Mobile Networks.  The dichotomy is kept within the
   Home Agents and the Mobile Routers, as opposed to advertised by means
   of routing protocols to other parties.



Thubert, et al.          Expires August 8, 2005                 [Page 3]

Internet-Draft    Home Network models with NEMO basic      February 2005


   The examples provided here aim at illustrating the NEMO Basic Support
   [8] but do not aim at limiting its scope of application, and
   additional cases may be added in the future.
















































Thubert, et al.          Expires August 8, 2005                 [Page 4]

Internet-Draft    Home Network models with NEMO basic      February 2005


2.  Terminology and concepts

   The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be
   interpreted as described in RFC2119 [1].

   The following terms used in this document are defined in the IPv6
   Addressing Architecture document [5]:

      link-local unicast address

      link-local scope multicast address

   Most of the mobility related terms used in this document are defined
   in the Mobility Related Terminology document [6] and in the Mobile
   IPv6 (MIP6) specification [7].

   Additionally, some terms were created or extended for NEMO.  These
   specific terms are defined in the Mobile Network Terminology document
   [9]:

      Home Link

      Home Network

      Home Address

      MRHA Tunnel

      Mobile Aggregated Prefix

      Aggregated Home Network

      Extended Home Network

      Virtual Home Network

      Mobile Home Network













Thubert, et al.          Expires August 8, 2005                 [Page 5]

Internet-Draft    Home Network models with NEMO basic      February 2005


3.  General Expectations

   With  Mobile IPv6, the Home Network is generally a physical network
   interconnecting the Home Agents, and the Mobile Nodes that are at
   Home.  NEMO extends the concept of Home so that it is not only a flat
   subnet composed of Home Addresses but an aggregation that is itself
   subnetted in mobile and Home Networks.  This aggregation is still
   referred to as Home.

   As an example, say that the aggregation has a global routing prefix
   of m = 48 bits (A:B:C::/48), with subnet ID size of n = 16 bits ( n +
   m = 64).

   Say that a Mobile Router, MR1, owns the MNP A:B:C:1::/64: With NEMO
   Basic Support, and depending on the deployment, MR1 may register
   using a Home Address from the Home network, A:B:C:0::1, say, or a
   Home Address, A:B:C:1::1, say, from one of its MNPs.

   In a given deployment, one subnet may be reserved for the Home Link
   (say A:B:C:0::/64) while the others are attributed to Mobile Routers
   as Mobile Networks (as A:B:C:1::/64 for MR1).  Another approach could
   be to configure the Aggregation of Mobile Networks as the subnet on
   the Home Link, and let the Mobile Routers manage the overlapping
   networks.  Finally, the aggregation could be configured on a virtual
   network, with no physical Home Link at all, in which case Home means
   topologically and administratively close to the Home Agent that owns
   the virtual network.

   The following sections provide additional information on these forms
   of Home Network.





















Thubert, et al.          Expires August 8, 2005                 [Page 6]

Internet-Draft    Home Network models with NEMO basic      February 2005


4.  MIP Home Network

   With Mobile IPv6 (MIP6) specification [7] Mobile Nodes are at Home
   when they are connected to their Home Link, where they recognize
   their Home Prefix in Router Advertisement messages.  Also, a binding
   is checked using of Duplicate Address Detection on the Home Link, and
   Home Agents discover each other by means of Neighbor Discovery
   extensions over that link.

   The Home Prefix, that is advertized on the Home Link, is a final
   prefix, as opposed to an aggregation, and it may be used by hosts on
   the Home Link for autoconfiguration purposes.

   As we see, the concept of a Home Network for Mobile IPv6 is really a
   prefix on a link, served by one or more Home Agents as opposed to a
   routed mesh.  We will see in the next sections that NEMO needs
   additional prefixes for use by the Mobile Networks.  For that reason,
   NEMO extends the concept of Home Network into a more complex,
   aggregated structure.
































Thubert, et al.          Expires August 8, 2005                 [Page 7]

Internet-Draft    Home Network models with NEMO basic      February 2005


5.  NEMO Extended Home Network

5.1  Configuration

   One simple way of extending the MIP Home Network is to use additional
   prefixes, contiguous to the Home Link Prefix inherited from MIPv6, as
   Mobile Network Prefixes.  As this model trivially extends the MIP
   Home Network, the resulting aggregation is called a NEMO Extended
   Home Network.  It is depicted in Figure 1.


                          |
                route     v  /48                        A:B:C::/48

                          HA
                          | /64         Home Link: A:B:C:0::/64
               --+-----+--+- . -+- . -+--
                 |     |        |     |
                 MR1   MR2      MRi   MRN
                 |     |        |     |
              ------  ------  ------ ------
                /64   /64      /64   /64   MNP:  A:B:C:i::/64


                               Extended Home Network
             <----------------------------------------------------------->

               Home Net      Mobile Net    Mobile Net   ...   Mobile Net
             <------------><------------><------------> ... <------------>



                    Figure 1: Extended Home Network

   In that configuration:

   o  There is one physical Home Network and multiple Mobile Networks

   o  The Home and the MNPs are tailored to allow for IPv6 Stateless
      Address Autoconfiguration with typical interface identifier length
      for the type of interface (can be for example /64).

   o  The prefix length of the Extended Home Network is shorter than
      that of the Home Network and the MNPs, since it is an aggregation
      (can be for example /48).

   o  Since the Extended Home Network operations inherit trivially from
      MIPv6, it can be seen as natural that the Mobile Routers be



Thubert, et al.          Expires August 8, 2005                 [Page 8]

Internet-Draft    Home Network models with NEMO basic      February 2005


      assigned their Home Addresses from the prefix on the Home Link, as
      opposed to their own MNP, which is allowed by the NEMO
      specification.  In that case, a Home Agent can perform DAD on the
      Home Link as prescribed by Mobile IPv6 for the Mobile Router Home
      Addresses.


5.2  Returning Home

   In the Extended Home Network model, the Home Network is configured on
   a physical interface of the Home Agent, the Home Link.

   A Mobile Router returns Home by connecting directly to the Home Link,
   and dropping the MRHA tunnel.

   When at home, the Mobile Router ensures the connectivity of the
   Mobile Network using standard router operations.

   In implicit mode, the HA has the necessary information to continue
   routing to the MNPs in the absence of registration, and the
   participation of the MR to the Home IGP is not required.

   But in explicit mode, or if the MR uses an IGP over the MRHA tunnel,
   then it must resume its IGP operations on the Home Link in order to
   advertise its Mobile Networks.

   Alternate procedures for ensuring the connectivity of the Mobile
   Networks when at home are described in Section 7.

5.3  Home Address from MNP

   We saw that a natural extension of the MIP procedure is to derive the
   Home Address of a Mobile Router from the prefix on the Home Link.
   Alternatively, NEMO basic support allows that a Mobile Router forms
   its Home Address from one of its Mobile Network Prefixes.

   In that case, the Home Address does not match the Home Link Prefix,
   and there is a need to configure the HA in a specific mode with the
   support for the extended Home Network and the range of the Mobile
   Network Prefixes.  Based on that new configuration, the HA can accept
   a Home Address that is not from the Home Link, and it will know that
   it should not perform any DAD.

   Also, if the MR uses a Home Address that is derived from its MNP,
   some specific support is required on the MR as well.  In order to
   determine that it is at Home, the MR recognizes the well-known prefix
   of its Home Agent as opposed to matching the prefix on the Home Link
   with that of its Home Address.



Thubert, et al.          Expires August 8, 2005                 [Page 9]

Internet-Draft    Home Network models with NEMO basic      February 2005


   When connecting to the Home Link, the MR also need to autoconfigure
   an address on the egress interface as opposed to assigning its Home
   Address to the interface.

   For all these reasons, this submode of extended is no more a trivial
   extension to the MIPv6 Home Model, and it  might not be compatible
   with all implementations.

5.4  Deployment Caveats

5.4.1  MR side

   In explicit mode, the routing to the MNP via the MR must be restored
   when the MR is at Home.  This is normally performed by the MR by
   means of the existing IGP.  In that case, a specific support is
   required on the MR to control the routing protocol operation,
   enabling the participation to the IGP if and only if the MR is at
   home.  This support might not be present in all implementations.

5.5  Applicability

   The extended Home Network keeps the MIP6 concept of a Home Network
   for both Mobile Nodes and Mobile Routers to take their Home Address
   from.  Since there is no overlap between the prefixes that are
   affected to MNPs and prefix(es) that are dedicated to the Home Link,
   it is possible for MNs and MRs to coexist with that model.

   Also, when the Home Address is derived from the prefix on the Home
   Link, the HA behavior on the link trivially extends that of MIP and
   the support should for that configuration should be available with
   all implementations.




















Thubert, et al.          Expires August 8, 2005                [Page 10]

Internet-Draft    Home Network models with NEMO basic      February 2005


6.  NEMO Aggregated Home Network

6.1  Configuration

   One other approach is to consider that the Aggregation of all the
   MNPs is used plainly as the Home Link Prefix.  In this model, the
   Home Network is referred to as a NEMO Aggregated Home Network.  This
   means that the Mobile Aggregated Prefix is configured on the Home
   Link and advertised by the Home Agent as a subnet, as depicted in
   Figure 2.

                      HA
                       | /56                       Aggreg /56
            --+-----+--+- . -+- . -+--
              |     |        |     |
             MR1   MR2      MRi   MRN
              |     |        |     |
          ------  ------  ------ ------
              /64   /64     /64   /64         Aggreg|i /64  0 < i <= N


                            Aggregated Home
                            ==   Home Net
          <----------------------------------------------------------->

           Mobile Net    Mobile Net    Mobile Net    ...   Mobile Net
          <------------><------------><------------> ... <------------>


                       Figure 2: Aggregated Home

   In that model, it seems natural to subnet the whole range of
   addresses into Mobile Network prefixes, as opposed to reserving one
   prefix for the Home Link, which would boil down to the Extended Home
   Network model.  If the prefix on the Home Link is really an
   aggregation and not a final prefix, it should not be allowed for
   autoconfiguration or Home Address allocation.

   Note that in that case, it makes sense for a Mobile Router to
   register using a Home Address from one of its own MNPs.  Taking the
   Home Address from its own range guarantees the uniqueness of the
   suffix.  That uniqueness can be checked by the MR on its ingress
   network using DAD.

6.2  Returning Home

   The Aggregated Home Prefix is configured on a physical interface of
   the Home Agent, the Home Link.  As a consequence, the Home Agent has



Thubert, et al.          Expires August 8, 2005                [Page 11]

Internet-Draft    Home Network models with NEMO basic      February 2005


   a connected route to the Aggregated Home Network over the Home Link.

   A Mobile Router returns Home by connecting directly to the Home Link,
   and dropping the MRHA tunnel.  The Mobile Router recognizes its Home
   Link by a prefix match with its Home Agent.

   Note that it must expect a shorter prefix than that of its Mobile
   Networks, even if its Home Address is formed out of one of its MNPs,
   but that the Home Address still matches the Home Network Prefix.

6.2.1  Returning Home by egress

   A Mobile Router coming Home via its egress interface sees overlapping
   prefixes between the ingress and the egress interface and some
   specific support may be needed:

   When a Mobile Router connects to the Home Link using its egress
   interface, it might set up a bridge between its ingress interface(s)
   and the Home Link.

   Alternatively, the Mobile Router might perform ND proxying for all
   addresses in its MNPs, between the egress and the related ingress
   interface.  Since the prefixes on the egress and ingress interfaces
   are overlapping, routing is disallowed.

   On the positive side, the MR does not need to join the local IGP when
   returning Home, even if it is using the explicit Prefix Mode.  When
   the MR is not registered, the HA simply expects that all MNNs will be
   reachable over the Home Link.


                    HA
                    | /56                         Aggreg /56
         --+-----+--+- . -+- . -+--
           |     |        |     |
          MR1   MR2      MRi   MRN
        ------  ------  ------ ------
           /64   /64     /64    /64               Aggreg|i /64  0 < i <= N


             Figure 3: Bridging between egress and ingress


6.2.2  Returning Home by ingress

   Alternatively, if the MR has a single ingress Interface, the Mobile
   Router may use the NEMO-Link to connect to the Home Link, merging the
   two links in a single consistent network.



Thubert, et al.          Expires August 8, 2005                [Page 12]

Internet-Draft    Home Network models with NEMO basic      February 2005


                    HA
                    | /56                         Aggreg /56
          --+-----+--+- . -+- . -+--
           /64   /64     /64    /64               Aggreg|i /64  0 < i <= N
        ------  ------  ------ ------
           MR1   MR2      MRi   MRN
            |     |        |     |


           Figure 4: Merging the Home and the Mobile Networks

   This fits the connected route model, since the Aggregated Home is
   truly located on that network.  Note that in that case, it makes
   sense for a Mobile Router to register using a Home Address from one
   of its own MNPs.  .

6.3  Applicability

   With this model, there is no specific space for independent nodes as
   any address in the aggregation belongs to a MNP, and thus to a Mobile
   Router.  This configuration excludes the cohabitation with MIP6 MNs
   on the Home Link.

   A MR that is at Home must own an address from the aggregation on its
   egress interface and  an address from its MNP -a subnet of that
   aggregation- on its ingress interface.  A pure router will reject
   that configuration, and the MR needs to act as a bridge to enable it.
   In order to deploy the aggregated Home Network model, one must check
   whether that support is available in the MRs if returning Home is
   required.

6.4  Deployment Caveats

6.4.1  HA Side

   A node on the Home Link discovers that the Aggregated Home Network is
   actually a subnet on the Home Link and may use the prefix on the Home
   Link to autoconfigure a Home Address.  Such a node may also install a
   connected route to the Aggregated Home Network over the Home Link.

   As a result, unless the node has a better (longest match) route to a
   given Mobile Network Prefix, it will lookup all MNNs on that MNP
   using Neighbor Discovery over the Home Link.

   Thus, on the Home Link, the Home Agent MUST intercept all the packets
   to ALL the Mobile Network Nodes on the registered prefixes.  In order
   to do so, the Home Agent might perform some form of ND proxying for
   all addresses in all registered Mobile Network Prefixes.  The HA must



Thubert, et al.          Expires August 8, 2005                [Page 13]

Internet-Draft    Home Network models with NEMO basic      February 2005


   also protect the MNP space from autoconfiguration by uncontrolled
   visitors at Neighbor Discovery level.

   Alternatives based on a routing protocol or ICMP redirect may apply
   in some cases.

   In any case, there is a need to provide a specific configuration on
   the HA to specify that it operates in Aggregated Mode.  If a HA
   implementation is simply derived from that of MIP, then the
   capability to perform the required proxying might not exist, and the
   Aggregated Mode will not operate properly for nodes on the Home Link.

6.4.2  MR side

   If the MR returns Home by egress, a specific support is required to
   control the bridging operation depending on whether a MR is at Home
   or not.  This support might not be present in all implementations.

   Also, note that NEMO authorizes multiple registrations for a same MNP
   by different Mobile Routers.  This is a case of multihoming, and it
   normally means that the MRs are interconnected by the ingress network
   that bears the common MNP.  But there is no provision in NEMO basic
   support to test that this condition is met at binding time and
   maintained overtime.

   It is thus possible for 2 different MRs to register a same prefix
   with different Home Addresses, and this will cause an undetected
   problem if the corresponding ingress links are not connected.

   When the Home Address of a Mobile Router is derived from its MNP,
   there is thus an additional risk of an undetected misconfiguration if
   the Home Address is autoconfigured from the ingress link as opposed
   to statically assigned with the MNP itself.


















Thubert, et al.          Expires August 8, 2005                [Page 14]

Internet-Draft    Home Network models with NEMO basic      February 2005


7.  Virtual Home Network

7.1  Configuration

   The Home Link can be configured on the Home Agent on a virtual link,
   in which case there's no physical Home Link for Mobile Routers to
   return Home or for Home Agents to discover each others and perform
   the ND level interactions as described in Mobile IPv6. [7]


                    /48                       eg: A:B:C::/48
                    HA
                    | /64                         A:C:C:E::/64
         --+-----+--+- . -+- . -+--
           |     |        |     |
           MR1   MR2      MRi   MRN
           /64   /64      /64   /64               A:B:C:i::/64  0 < i <= N



                     Figure 5: Virtual Home Network

   The Extended Home Network and the Aggregated Home Network models can
   be adapted for virtual links.

   As in the case of a physical link, the Home Address of a Mobile
   router can be constructed based on a dedicated subnet of the Home
   Prefix or one of the MR MNPs.

   Note that since the Home Address is never checked for DAD, it makes
   the configuration easier to take it from the MNP as opposed to a
   specific subnet.

   There are certain advantages to making the Home Link a virtual link:

      A virtual link may not experience any disruption related to
      physical maintenance or to hardware problems, so it is more
      available than a physical link.  The high availability of the Home
      Link is critical for the mobility service.

      The Home Agent does not have to defend the Mobile Router's Home
      Address through Proxy Neighbor Discovery.  The Home Agent does not
      also have to perform Duplicate Address Detection (DAD) for the
      Mobile Router's Home Address when it receives a Binding Update
      from the Mobile Router.

      The Mobile Router does not have to implement the Returning Home
      procedure (section 11.5.4 of Mobile IPv6.  [7]).



Thubert, et al.          Expires August 8, 2005                [Page 15]

Internet-Draft    Home Network models with NEMO basic      February 2005


   In order for a Mobile Router to emulate returning Home, it can
   connect to one or more access link(s) configured for that purpose on
   the Home Agent.  The Mobile Router, after connecting to the access
   link, SHOULD not send any routing protocol updates on the egress
   interface because the routing information from the Mobile Router
   might adversely affect IPv6 route aggregation on the Home Network.
   However, the Mobile Router must register its binding as if it was
   accessing a foreign link.

   There are also some drawbacks to the virtual Home Link approach:

      There can be only one Home Agent since Mobile IPv6 relies on
      Neighbor Discovery on the Home Link for other HA discovery and for
      Duplicate Address Detection.

      The Home Agent must maintain a Binding Cache entry for a Mobile
      Router and forwarding state for its Mobile Network even when the
      Mobile Router is directly connected to it.  All traffic to and
      from the Mobile Network is sent through the bi-directional tunnel
      regardless of the Mobile Router location.  This results in a
      tunneling overhead even though the Mobile Router is connected to
      the Home Network.

   Some solutions can be proposed in order to perform an equivalent of
   returning Home on a virtual Home Network.  One such approach is
   sketched in appendix as an illustration.

7.2  Applicability

   At some point in the future, NEMO basic support may be extended to
   operate fully at L3 for instance if the HAHA protocol [11] gets
   standardized and deployed.  Until then, NEMO operations still inherit
   from mobile IPv6 [7] for the HA to HA communication, which is
   basically based on Neighbor Discovery extensions over the Home Link.
   Making that link virtual bars the deployment of multiple Home Agents,
   which may be desirable for reasons of load balancing.  Please refer
   to the NEMO multihoming issues [12] draft for more on this.

   Yet, for a deployment where a single HA is enough, making the Home
   Link virtual reduces the vulnerability to some attacks and to some
   hardware failures, while making the HA operation faster.

   One should check with the product specifications of an HA to see
   whether the implementation actually supports a Virtual Home Network,
   and if so, whether in that cases, it is optimized for faster DAD-less
   bindings.





Thubert, et al.          Expires August 8, 2005                [Page 16]

Internet-Draft    Home Network models with NEMO basic      February 2005


8.  Mobile Home

8.1  Configuration

   In this disposition, there is a bitwise hierarchy of Home Networks.
   A global Home Network is advertised to the infrastructure by a head
   Home Agent(s) and further subnetted into Mobile Networks.  As a
   result, only the Home Agent(s) responsible for the most global
   (shortest prefix) aggregation receive all the packets for all the
   MNPs, which are leaves in the hierarchy tree.

   Each subnet is owned by a Mobile Router that registers it in a NEMO
   fashion while acting as a Home Agent for that network.  This Mobile
   Router is at Home at the upper level of hierarchy.  This
   configuration is referred to as Mobile Home.

   An example of that is the Cab Co configuration.  Say a Taxi Company
   owns a /32 prefix.  This prefix is advertised at a fixed point, the
   Headquarters say.  Regional offices are deployed around the world.
   Even though these regional offices are relatively stable in terms of
   location and prefix requirement -say this changes every few years-
   making them mobile allows a simpler management when a move has to
   take place, or should the ISP service change.

         global Home Network   CAB:C0::/32  owned by HQ
    <------------------------------------------------------------------->

      HQ extended Home Net              Mobile Home for SFO office
          (casa)
      CAB:C0:CA5A::/48                          CAB:C0:5F0::/48
    <----------------------------> ... <-------------------------------->
                                                       |
      Home for offices        HQ                       |
     CAB:C0:CA5A:CA5A::/64    MN                       |
    <----------------------><---->                     |
     CAB:C0:CA5A:CA5A::CA5A                            |
     CAB:C0:CA5A:CA5A::CA5B                            |
     are HAs on link with for each office a route like |
                                                       |
     CAB:C0:CA5A:CA5A::5F0    <---------------------- via
       is the Home addr
       of SFO office

                Figure 6:  CAB Company HQ configuration

   Finally, each regional office owns a number of taxis, each one
   equipped with a mobile router and an associated /64 prefix.




Thubert, et al.          Expires August 8, 2005                [Page 17]

Internet-Draft    Home Network models with NEMO basic      February 2005


   For each Office, say San Francisco (SFO) as an example:


        Mobile Home Network CAB:C0:5F0::/48  owned by SFO office
    <------------------------------------------------------------------>

      SFO Home Network             Mobile Networks for taxis
        for taxis        <---------------------...--------------------->
     CAB:C0:5F0:5F0::/64  CAB:C0:5F0:CAB1::/64     CAB:C0:5F0:....::/6
    <-------------------><-------------------> ... <------------------->
     CAB:C0:5F0:5F0::5F0           |
     is HA on link with for        |
     each taxi a route like        |
                                   |
     CAB:C0:5F0:5F0::CAB1 <------ via
       is the Home addrSsync
       of CAB 1

             Figure 7:  CAB Company regional configuration

   Note that the hierarchy occurs at a configuration level and may not
   be reflected in the actual connection between nodes.  For instance in
   the Cab Co case, cabs are roaming within the city, each one attaching
   to a different hot spot, while the regional office is connected to
   the infrastructure using some ISP connection.

   But it is also possible to reflect the organizational hierarchy in a
   moving cloud of Mobile Router.  If a Mobile Home Agent acts as
   root-MR for a nested configuration of its own MRs, then the
   communication between MRs is confined within the nested structure.

   This can be illustrated in the case of a fleet at sea.  Say that now
   SFO is a communication ship of a fleet, using a satellite link to
   join the infrastructure, and that the cabs are Mobile Routers
   installed on smaller ships, equipped with low range radios.

   If SFO is also the root-MR of a nested structure of cabs, the
   communication between cabs is relayed by SFO and does not require the
   satellite link.  SFO recursively terminates the nested tunnels to the
   cabs and reencapsulates all the packets between the nested cloud and
   correspondents in the infrastructure in a single tunnel to CA5A, this
   providing for nested NEMO Route Optimization.

8.2  Applicability

   This complex topology applies to large distributed fleet, mostly if
   there is a single interchange point with the internet (e.g.  a NAT or
   a socks farm) where the super HA could be located.



Thubert, et al.          Expires August 8, 2005                [Page 18]

Internet-Draft    Home Network models with NEMO basic      February 2005


   One specific benefit is that when 2 MRs travel together with a common
   HA, the traffic between the 2 is not necessarily routed via the
   infrastructure, but can stay confined within the mobile cloud, the
   Mobile Home Agent acting as a rendez-vous point between the MRs.
   This applies particularly well for a fleet at sea when the long haul
   access may be as expensive as a satellite link.













































Thubert, et al.          Expires August 8, 2005                [Page 19]

Internet-Draft    Home Network models with NEMO basic      February 2005


9.  Changes

9.1  Changes from version 00 to 01

      Removed terminology (moved to the Nemo terminology draft).

      Added an applicability statement for all documented cases


9.2  Changes from version 01 to 02

   Issue 1: Editorial

   Issue 2: Added a caveat part in extended and aggregated sections.
      Also added a MIP Home Network section prior to those.

   Issue 4: Added a subsection to the extended case for the case when
      the mr takes a home address from its MNP

































Thubert, et al.          Expires August 8, 2005                [Page 20]

Internet-Draft    Home Network models with NEMO basic      February 2005


10.  Acknowledgements

   The authors wish to thank:

   Erik Nordmark, Kent Leung, Thierry Ernst, TJ Kniveton, Patrick
   Wetterwald, Alexandru Petrescu and David Binet.  for their
   contributions.

11  References

   [1]   Bradner, S., "Key words for use in RFCs to Indicate Requirement
         Levels", BCP 14, RFC 2119, March 1997.

   [2]   Deering, S. and R. Hinden, "Internet Protocol, Version 6 (IPv6)
         Specification", RFC 2460, December 1998.

   [3]   Narten, T., Nordmark, E. and W. Simpson, "Neighbor Discovery
         for IP Version 6 (IPv6)", RFC 2461, December 1998.

   [4]   Thomson, S. and T. Narten, "IPv6 Stateless Address
         Autoconfiguration", RFC 2462, December 1998.

   [5]   Hinden, R. and S. Deering, "Internet Protocol Version 6 (IPv6)
         Addressing Architecture", RFC 3513, April 2003.

   [6]   Manner, J. and M. Kojo, "Mobility Related Terminology", RFC
         3753, June 2004.

   [7]   Johnson, D., Perkins, C. and J. Arkko, "Mobility Support in
         IPv6", RFC 3775, June 2004.

   [8]   Devarapalli, V., Wakikawa, R., Petrescu, A. and P. Thubert,
         "Network Mobility (NEMO) Basic Support Protocol", RFC 3963,
         January 2005.

   [9]   Ernst, T. and H. Lach, "Network Mobility Support Terminology",
         draft-ietf-nemo-terminology-02 (work in progress), October
         2004.

   [10]  Ernst, T., "Network Mobility Support Goals and Requirements",
         draft-ietf-nemo-requirements-03 (work in progress), October
         2004.

   [11]  Thubert, P., "Global HA to HA protocol",
         draft-thubert-nemo-global-haha-00 (work in progress), October
         2004.

   [12]  Ernst, T., "Analysis of Multihoming in Network Mobility



Thubert, et al.          Expires August 8, 2005                [Page 21]

Internet-Draft    Home Network models with NEMO basic      February 2005


         Support", draft-ietf-nemo-multihoming-issues-01 (work in
         progress), October 2004.


Authors' Addresses

   Pascal Thubert
   Cisco Systems
   Village d'Entreprises Green Side
   400, Avenue de Roumanille
   Batiment T3
   Biot - Sophia Antipolis  06410
   FRANCE

   Phone: +33 4 97 23 26 34
   EMail: pthubert@cisco.com


   Ryuji Wakikawa
   Keio University and WIDE
   5322 Endo Fujisawa Kanagawa
   252-8520
   JAPAN

   EMail: ryuji@sfc.wide.ad.jp


   Vijay Devarapalli
   Nokia Research Center
   313 Fairchild Drive
   Mountain View, CA  94043
   USA

   EMail: vijay.devarapalli@nokia.com

















Thubert, et al.          Expires August 8, 2005                [Page 22]

Internet-Draft    Home Network models with NEMO basic      February 2005


Appendix A.  Returning Home emulation in the virtual case

   When a Home Link is virtual, all traffic to and from the Mobile
   Network is sent through the bi-directional tunnel even at the Home
   Link.  This section describes one possible mechanism that extends
   NEMO Basic Support to eliminate this tunneling overhead.

   Although the Home Link is virtual, the Home Agent has at least one
   physical link to communicate with the external world.  One or several
   of such links, called the virtual Home Access Links, are conceptually
   associated with the virtual Home Link and considered as part of Home.

   When accessing one of its virtual Home Access Links, a Mobile Router
   autoconfigures a Care-of Address from a Router Advertisement as it
   would do on any visited link, in order to perform the next binding
   flow.

   If the Mobile Router is configured to recognize the virtual Home
   Access Links as part of Home, it deregisters by sending a Binding
   update with null lifetime sourced at the CareOf.  Alternatively, the
   Home Agent may indicate that the MR has moved to the virtual Home
   Access Links as a status code in the binding acknowledgement.  The
   status code implies that Home Agent successsful de-register the
   binding at the virtual Home Access Link.  Detection of the virtual
   Home Access Links is achieved by a prefix comparison(s) between the
   care-of address and the prefix(es) on the virtual Home Access
   Link(s).

   With both approaches, the result of the binding flow is a
   deregistration.  Consequently, both the Mobile Router and the Home
   Agent disable the bi-directional tunnel.  At that point, the Home
   Agent configures its forwarding in order to reach the Mobile Router
   and its mobile networks at Home.  For instance, this may take the
   form of a route to the Mobile Network prefixes via the MR Home
   Address, and a connected host route to the MR Home Address via the
   virtual Home Access link.

   After successful binding de-registration, the Mobile Router MUST
   receive packets meant to the Mobile Router's Home Address at the
   Virtual Home Link.  How to intercept packets addressed to the Home
   Address depends on implementations of the Mobile Router.  If the Home
   Address is not configured at the egress interface, the Mobile Router
   MUST use proxy Neighbor Discovery to intercept all packets addressed
   to the Home Address on the virtual Home Link.  Otherwise, the Mobile
   Router does not have to perform any special operation at the virtual
   Home Link.





Thubert, et al.          Expires August 8, 2005                [Page 23]

Internet-Draft    Home Network models with NEMO basic      February 2005


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2005).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Thubert, et al.          Expires August 8, 2005                [Page 24]


