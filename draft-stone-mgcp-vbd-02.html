<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Media Gateway Control Protocol Voiceband Data Package and General Purpose Media Descriptor Parameter Package</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Media Gateway Control Protocol Voiceband Data Package and General Purpose Media Descriptor Parameter Package">
<meta name="keywords" content="MGCP, VBD">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network</td><td class="header">S. Sharma, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CableLabs</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">J. Stone</td></tr>
<tr><td class="header">Expires: May 19, 2008</td><td class="header">R. Kumar</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 16, 2007</td></tr>
</table></td></tr></table>
<h1><br />Media Gateway Control Protocol Voiceband Data Package and General Purpose Media Descriptor Parameter Package<br />draft-stone-mgcp-vbd-02</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 19, 2008.</p>

<h3>Abstract</h3>

<p>
This document defines Media Gateway Control Protocol (MGCP) packages that enable a Call Agent to authorize and monitor the transition of a connection to and from voiceband data (VBD) with or without redundancy and FEC (forward error correction). Although the focus is on VBD, the General-Purpose Media Descriptor Parameter package can be used to authorize other modes of operation, not relevant to VBD, for a particular codec. In addition to the definition of these new packages, this document describes the use of the Media Format Parameter package and Fax package with VBD, redundancy and FEC.
                
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#Terminology">2.</a>&nbsp;
Terminology<br />
<a href="#anchor2">3.</a>&nbsp;
Voiceband Data Package Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.1.</a>&nbsp;
Events and Signals<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.1.</a>&nbsp;
Gateway Controlled Voiceband Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.2.</a>&nbsp;
No Negotiated Procedure for Voiceband Data<br />
<a href="#anchor8">4.</a>&nbsp;
General-Purpose Media Descriptor Parameter Package Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.1.</a>&nbsp;
LocalConnectionOptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.1.1.</a>&nbsp;
General-Purpose Media Descriptor Parameter<br />
<a href="#anchor11">5.</a>&nbsp;
Use of Media Format Parameter Package with VBD and Redundancy<br />
<a href="#anchor12">6.</a>&nbsp;
Use of Media Format Parameter Package with VBD and FEC<br />
<a href="#anchor13">7.</a>&nbsp;
Use of Fax Package with VBD<br />
<a href="#anchor14">8.</a>&nbsp;
Call Flow Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">8.1.</a>&nbsp;
Modem Call with Gateway Controlled VBD<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">8.2.</a>&nbsp;
Fax Call with Gateway Controlled VBD and Call Agent Controlled T.38<br />
<a href="#anchor17">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor18">10.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor19">11.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor20">12.</a>&nbsp;
Summary of Changes<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
   The term voiceband data (or simply VBD) refers to the use of a suitable 
   voiceband codec (commonly G.711u or G.711a) for the transport of data 
   payloads using the RTP protocol defined in IETF RFC 3550 [RFC3550]. This 
   document defines Media Gateway Control Protocol (MGCP) [RFC3435] packages 
   that enable a Call Agent to authorize and monitor the transition of a 
   connection to and from VBD with or without redundancy [RFC2198] and FEC 
   (forward error correction) [RFC2733].

   <br />
<br />


   There are a number of different VBD procedures. These procedures vary in 
   terms of how the transition to and from VBD is coordinated end to end. Some 
   coordination techniques are mutually negotiated by the two Gateways using the 
   SDP [RFC4566]. These coordination techniques include,

   <br />
<br />


     ITU-T Recommendation V.150.1 State Signalling Event (SSE) [V1501]

     ITU-T Recommendation V.152 Payload Type Switching [V152]

   <br />
<br />



   Other coordination techniques are not negotiated. For example, the detection 
   of fax, modem and text tones in the direction from the IP to the GSTN network 
   MAY result in switch to VBD or a change (e.g., disable echo cancellation) to 
   the Gateway controlled VBD procedure already in place. The IP-side detected 
   tone serves as both a VBD stimulus and a coordination technique.


   <br />
<br />


   IETF RFC 4733 [RFC4733] and RFC 4734 [RFC4734] can be used to convey fax and modem events and tones. 
   As with IP-side tone detection, the telephone event MAY serve as both a VBD 
   stimulus and a coordination technique. Note that while the use of RFC 4733 and RFC 4734 to 
   convey fax and modem events and tones is negotiated, the use of RFC 4733 and RFC 4734 as a 
   Gateway VBD coordination technique (at present) is not.


   <br />
<br />


   The Voiceband Data (VBD) package is defined to support all VBD procedures. 
   This document does not address the relative merits of different procedures 
   nor advocate one procedure over another.


   <br />
<br />


   We will use the term VBD to refer to Voiceband Data in general. In referring 
   to VBD the package, we will use the term VBD package. We use the term "audio" 
   (with double quotes) to refer to the IANA media type. We use the term audio 
   (without double quotes) to refer to the use of the "audio" media type for 
   (most commonly) voice.

   <br />
<br />


   A package is defined for the General-Purpose Media Descriptor Parameter 
   [V152]. In the context of VBD, the General-Purpose Media Descriptor Parameter 
   (GPMD) package is used to authorize the negotiation of a particular codec for 
   use with VBD. The General-Purpose Media Descriptor Parameter is "general" in 
   nature and may be used in applications other than VBD.

   <br />
<br />


   The Media Format Parameter (FM) package [RFC3660] describes the use of the 
   standard audio MIME subtype "RED" in conjunction with the "fmtp" 
   LocalConnectionOption in order to authorize the negotiation of redundancy 
   [RFC2198], to identify the levels of redundancy and the media format 
   associated with each redundancy level. This document will further explore the 
   use of the FM package with VBD and redundancy.


   <br />
<br />


   This document will explore the use of the FM package with VBD and FEC.


   <br />
<br />


   The VBD package is intended to complement the MGCP Fax (FXR) package 
   [RFCABCD]. This document will explore the use of the FXR package with VBD.


   <br />
<br />


   The VBD package definition is provided in section 3. The GPMD package 
   definition is provided in section 4. In section 5, we discuss the use of the 
   FM package with VBD and redundancy. In section 6, we discuss the use of the 
   FM package with VBD and FEC. In section 7, we discuss the use of the FXR 
   package with VBD. In section 8, we provide two call flow examples showing how 
   to use the VBD and GPMD packages.  Security considerations are found in
   section 9, followed by the IANA considerations and references. 
			
		
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
                  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in  <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].        
	  	
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Voiceband Data Package Definition</h3>

<p>
   A package is defined for (Voiceband Data) VBD.  The package defines new 
   events as detailed below. 
    

   <br />
<br />


   Package Name:        VBD  

   <br />
<br />


   Package Version:     0 

			
		
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Events and Signals</h3>

<p>
 The following events are defined in support of the above: 

   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  -------------------------------------------------------------------
 | Symbol |   Definition                    |  R  |  S  |  Duration  |
 |--------|---------------------------------|-----|-----|------------|
 | gwvbd  | Gateway Controlled VBD          |  x  |     |            |
 | nopvbd | No Negotiated Procedure for VBD |  x  |     |            |
  -------------------------------------------------------------------

</pre></div><p>
 

   The definitions of the individual events are provided in the following 
   subsections. 


			
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Gateway Controlled Voiceband Data</h3>

<p>
   The "Gateway Controlled Voiceband Data" (or simply "gwvbd") event occurs when 
   a gwvbd procedure has been negotiated and VBD stimulus is detected. The 
   "gwvbd" event may occur when the gwvbd procedure is updated (e.g., upon 
   detecting new stimulus) and when the procedure fails. The "gwvbd" event 
   occurs when the gwvbd procedure ends. The gwvbd procedure MUST be negotiated 
   with the other side by passing and recognizing relevant parameters via the 
   LocalConnectionDescriptor and RemoteConnectionDescriptor. 

   <br />
<br />


  
   The following recommendations from MGCP [RFC3435] apply.


   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   In this section, we provide a formal description of the protocol
   syntax, following the "Augmented BNF for Syntax Specifications"
   defined in [RFC4234].  The syntax makes use of the core rules defined
   in [RFC4234], Section B.1 (Appendix B), which are not included here.
   Furthermore, the syntax follows the case-sensitivity rules of
   [RFC4234], i.e., MGCP is case-insensitive (but SDP is not). It should
   be noted, that ABNF does not provide for implicit specification of
   linear white space and MGCP messages MUST thus follow the explicit
   linear white space rules provided in the grammar below.  However, in
   line with general robustness principles, implementers are strongly
   encouraged to tolerate additional linear white space in messages
   received.

</pre></div><p>
 

   The RequestedEvent is encoded as,


   <br />
<br />


     GwVbdReqEvent = "gwvbd"


   <br />
<br />


   The ObservedEvent is encoded as,

   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  GwVbdObsEvent = GwVbdObsEventStart / GwVbdObsEventUpdate /
                  GwVbdObsEventStop / GwVbdObsEventFailure

  GwVbdObsEventStart   = "gwvbd(start" Rc [Codec] [Coord] [Dir] ")"
  GwVbdObsEventUpdate  = "gwvbd(update" Rc [Codec] [Dir] ")"
  GwVbdObsEventStop    = "gwvbd(stop" [Rc] [Codec] ")"
  GwVbdObsEventFailure = "gwvbd(failure" [Rc] [Codec] ")"

  Codec = "," *WSP "codec=" CodecString
  CodecString = (ALPHA / DIGIT) *(ALPHA / DIGIT / "-" / "_" / "." / "/")
  Coord = "," *WSP "coord=" CoordinationTechnique
  CoordinationTechnique = "v152ptsw" / "v150fw"
  Rc = "," *WSP "rc=" ReasonCode
  ReasonCode = 1*(ALPHA / DIGIT / "-" / "_" / "." / "/")
               ; Refer to the values listed in the tables below.
  Dir = "," *WSP "dir=" Direction
  Direction = "GstnToIp" / "IpToGstn"

</pre></div><p>
 

   ABNF does not provide for position independent parameters. The "rc", "codec", 
   "coord", and "dir" parameters, if present, MUST appear in the relative order
   shown. 


   <br />
<br />


   The "start", "update", "stop" and "failure" ObservedEvent parameters are 
   defined: 
    

   <br />
<br />


   * VBD Start (start)

   <br />
<br />


  
     The gwvbd procedure was initiated.  The Call Agent SHOULD refrain from 
     issuing media handling instructions to the Gateway until either a 
     "gwvbd(stop)" or "gwvbd(failure)" event is generated. One and only one 
     "gwvbd(stop)" or "gwvbd(failure)" event is generated corresponding to each
     "gwvbd(start)" event.
      

   <br />
<br />


   * VBD Update (update)


   <br />
<br />


     The gwvbd procedure was updated. The "gwvbd(update)" event MUST only be 
     generated after a "gwvbd(start)" event and before a "gwvbd(stop)" or 
     "gwvbd(failure)" event. 


   <br />
<br />


   * VBD Stop (stop)


   <br />
<br />


     The gwvbd procedure ended and the Gateway did not detect any errors. Note 
     that this does not necessarily imply a successful fax, modem, or text 
     transmission. It merely indicates that the gwvbd procedure has ended and 
     the procedure itself did not encounter any errors. The "stop" parameter may 
     correspond to a change from VBD to a non-VBD "audio" codec or from VBD to 
     another media type such as "image" or "text". This change may be under Call 
     Agent or Gateway control. For example, the Gateway may coordinate the 
     switch from VBD to "image/t38" through the exchange of SSEs [T38] and [V152]. 
     For an example involving Call Agent control, refer to the "MC" Reason Code. 
     In both examples, the gwvbd procedure ends with the media change. 


   <br />
<br />


   * VBD Failure (failure)

   <br />
<br />



     The gwvbd procedure ended abnormally. Some kind of problem was encountered 
     in the gwvbd procedure and the procedure ended.
    

   <br />
<br />


   When the "gwvbd" event is reported, exactly one of the "start", "update",
   "stop", or "failure" parameters MUST be present and MUST be the first
   parameter supplied.
    

   <br />
<br />


   The "rc", "codec", "coord" and "dir" ObservedEvent parameters are defined: 


   <br />
<br />


   * Coordination Technique (coord=&lt;CoordinationTechnique&gt;)
  

   <br />
<br />


     The technique used to coordinate the transition to and from VBD with the 
     remote endpoint. The Coordination Techniques are summarized in the 
     following table:



   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          ------------------------------------------------------
         | CoordinationTechnique | Description                  |
         |-----------------------|------------------------------|
         | v152ptsw              | V.152 Payload Type Switching |
         | v150fw                | V.150.1 SSE                  |
          ------------------------------------------------------

</pre></div><p>
 

     With the "v152ptsw" Coordination Technique, payload type switching [V152] 
     is used to coordinate the transition to and from VBD. 

   <br />
<br />



     With the "v150fw" Coordination Technique, state signalling events [V1501] 
     are used to coordinate the transition to and from VBD.


   <br />
<br />


     The list of Coordination Techniques may be extended to include values with 
     meaning mutually understood between the Gateway and the Call Agent.


   <br />
<br />


   * Reason Code (rc=&lt;ReasonCode&gt;)
  

   <br />
<br />


     With the "start" and "update" parameter, the reason for triggering the 
     switch/change to VBD. With the "stop" and "failure" parameter, the reason 
     for triggering the switch from VBD. The Reason Codes in the following 
     table, which are based on the ITU-T FAX/Textphone/Modem Tones Detection 
     package [H2482], ITU-T V.150.1 Amendment 1 [H1501A1] and ITU-T V.152 
     [V152], may be used with the "start" and "update" parameter:

   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    -------------------------------------------------------------------
   | ReasonCode | Description                                          |
   |------------|------------------------------------------------------|
   | CNG        | T.30 fax calling                                     |
   | V21flag    | V.21 tone and flags for fax answering                |
   | CIV18      | V.8 CI with V.18 call function                       |
   | XCI        | V.18 XCI                                             |
   | V18txp     | V.18 txp                                             |
   | Belltone   | Bell 103 carrier, high or low frequency channel      |
   |            | ITU-T Recommendation V.18)                           |
   | Baudot     | Baudot initial tone and character (ITU-T             |
   |            | Recommendation V.18)                                 |
   | Edt        | EDT initial tone and character (ITU-T Recommendation |
   |            | V.18)                                                |
   | CIdata     | V.8 CI with any data call function                   |
   | CT         | V.25 calling tone                                    |
   | CIfax      | V.8 CI with facsimile call function                  |
   | V21tone    | V.21 carrier, high or low frequency channel          |
   | V23tone    | V.23 carrier, high or low frequency channel          |
   | V8bis      | V.8 bis modem handshaking signal                     |
   | ANS        | V.25 ANS, equivalent to T.30 CED from answering      |
   |            | terminal                                             |
   | /ANS       | V.25 ANS with periodic phase reversals               |
   | ANSam      | V.8 ANSam                                            |
   | /ANSam     | V.8 ANSam with periodic phase reversals              |
   | CMFax      | V.8 CM sequence indicating fax call function         |
   | JMFax      | V.8 JM sequence indicating fax call function         |
   | CMData     | V.8 CM sequence indicating unspecified data call     |
   |            | function                                             |
   | JMData     | V.8 JM sequence indicating unspecified data call     |
   |            | function                                             |
   | CMText     | V.8 CM sequence indicating text call function        |
   | JMText     | V.8 JM sequence indicating text call function        |
   | PTSW       | Payload type switch as defined in V.152              |
    -------------------------------------------------------------------

</pre></div><p>
 

     For solutions involving textphones using a modulation with interspersed 
     text and speech on the same "channel" such as Baudot and EDT, the Call 
     Agent SHOULD interpret the ReasonCode parameter as part of the 
     "vbd/gwvbd(start)" event in order to differentiate between fax, modem and 
     text. In the case of interspersed text and speech the Call Agent SHOULD 
     remove the notification request for"vbd/gwvbd" upon receiving the 
     "vbd/gwvbd(start)" event in order to avoid large numbers of notifications. 
     For example,


   <br />
<br />


       vbd/gwvbd(start, rc=Baudot)


   <br />
<br />


     With a ReasonCode of "PTSW", the Call Agent cannot differentiate text from
     fax/modem. In this case, the Call Agent SHOULD adopt a policy which guards
     against large numbers of notifications. We consider several such policies.


   <br />
<br />


     The Call Agent MAY remove the notification request for "vbd/gwvbd" upon
     receiving the "vbd/gwvbd(start, rc=PTSW)" event. With this policy, 
     "update", "stop" and "failure" notifications will not be generated with 
     text AND fax/modem.


   <br />
<br />


     The Call Agent MAY wait for a subsequent "vbd/gwvbd(update)" event which
     differentiates text from fax/modem. If the ReasonCode indicates 
     interspersed text and speech, the Call Agent SHOULD remove the notification 
     request for "vbd/gwvbd". For example,


   <br />
<br />


       vbd/gwvbd(update, rc=Edt)


   <br />
<br />


     The Call Agent MAY remove the notification request for "vbd/gwvbd" upon
     receiving a "vbd/gwvbd(stop)" event without having differentiated between
     text and fax/modem.


   <br />
<br />


     The Call Agent MAY remove the notification request for "vbd/gwvbd" after
     having received a number of "vbd/gwvbd(start)" events without having
     differentiated between text and fax/modem. The specific number of events 
     after which the notification request is removed is considered an 
     implementation
     detail outside the scope of this specification.


   <br />
<br />


     Reason Codes applicable with the "stop" parameter:



   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

             ------------------------------------------------------
            | ReasonCode | Description                             |
            |------------|-----------------------------------------|
            | SIL        | Bidirectional silence                   |
            | Voice      | Voice signals                           |
            | PTSW       | Payload type switch as defined in V.152 |
            | MC         | Media change                            |
             ------------------------------------------------------


</pre></div><p>
 

     The "MC" Reason Code indicates that the media type has changed from "audio" 
     (to "image", "text", ...) or the "audio" media format has changed from a 
     VBD codec (for a reason other than "PTSW"). For example, the gwvbd
     procedure may be initiated upon detecting CED. Subsequently, the Call Agent 
     controlled T.38 procedure of the MGCP Fax (FXR) package [RFCABCD] may be 
     initiated upon detecting V.21 flags. Upon receipt of a "t38(start)" event, 
     the Call Agent will instruct the Gateway to switch from VBD to T.38 through 
     the use of a ModifyConnection command involving a LocalConnectionOption 
     encoding method of "L:a:image/t38" and/or a RemoteConnectionDescriptor with 
     an "image/t38" media description. This stops the gwvbd procedure. There is 
     no specific interdependency between the VBD package and the FXR package (or 
     any other package). The gwvbd procedure is stopped as a consequence of the 
     media change, not as a direct consequence of the T.38 procedure being 
     initiated. Note that in this situation the "t38(start)" event will be sent 
     before the "gwvbd(stop)" event. The Call Agent MAY choose to infer that the 
     gwvbd procedure has ended upon receiving the "t38(start)" event and disable 
     the notification of the "gwvbd" event. Refer to the example call flow in 
     section 8.2.

   <br />
<br />



     Reason Codes applicable with the "failure" parameter:


   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

              ----------------------------------------------------
             | ReasonCode | Description                           |
             |------------|---------------------------------------|
             | TO         | Indicates that a timeout has occurred |
              ----------------------------------------------------


</pre></div><p>
 

     The list of Reason Codes may be extended to include values with meaning 
     mutually understood between the Gateway and the Call Agent.


   <br />
<br />


   * Codec String (codec=&lt;CodecString&gt;)

   <br />
<br />



     With the "start" and "update" parameter, the MIME type associated with the 
     switch/change to VBD (e.g., "audio/RED", "audio/PCMU", "audio/PCMA", 
     "audio/G726-32", "audio/clearmode", ...). With the "stop" and "failure" 
     parameter, the MIME type associated with the switch from VBD (e.g., 
     "audio/G729", "image/t38", "text/t140", "audio/v150mr", ...). These strings 
     should be full MIME types as listed in,

   <br />
<br />



       http://www.iana.org/assignments/media-types

   <br />
<br />



   * Direction of Stimulus (dir=&lt;Direction&gt;)

   <br />
<br />



     With the "start" and "update" parameter, the direction of the stimulus 
     which resulted in the switch/change to VBD.


   			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                 -----------------------------------------------
                | Direction | Description                       |
                |-----------|-----------------------------------|
                | GstnToIp  | Stimulus detected from GSTN to IP |
                | IpToGstn  | Stimulus detected from IP to GSTN |
                 -----------------------------------------------


</pre></div><p>
 

   Call Agents and Gateways MUST implement the "start" and "stop" parameters and 
   MAY implement the "update" and "failure" parameters. Call Agents and Gateways
   MAY implement the "coord", "codec", and "dir" parameters. Call Agents MAY and
   Gateways MUST implement the "rc" parameter in conjunction with the "start" 
   and "update" parameters. Call Agents and Gateways MAY implement the "rc"
   parameter in conjunction with the "stop" and "failure" parameters. A Call
   Agent MUST ignore all unknown ObservedEvent parameters including parameters
   which are defined as part of this specification and not implemented.
				
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1.1"></a><h3>3.1.1.1.&nbsp;
Gateway Controlled Voiceband Data Examples</h3>

<p>

   The following examples illustrate the encoding of the "gwvbd(start)" event,
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/gwvbd(start, rc=ANS)
        O: vbd/gwvbd(start, rc=ANS, codec=audio/PCMU, coord=v152ptsw)
        O: vbd/gwvbd(start, rc=PTSW, codec=audio/RED)


</pre></div><p>
 


   The following example illustrates the encoding of the "gwvbd(update)" event,
   
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/gwvbd(update, rc=/ANSam, dir=IpToGstn)


</pre></div><p>
 


   The following examples illustrate the encoding of the "gwvbd(stop)" event,
   
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/gwvbd(stop)
        O: vbd/gwvbd(stop, rc=SIL, codec=audio/G729)
        O: vbd/gwvbd(stop, rc=MC, codec=image/t38)


</pre></div><p>
 

   The following examples illustrate the encoding of the "gwvbd(failure)" event,
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/gwvbd(failure, codec=audio/G729)
        O: vbd/gwvbd(failure, rc=TO, codec=audio/G729)


</pre></div><p>
 

					
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
No Negotiated Procedure for Voiceband Data</h3>

<p>

   The "No Negotiated Procedure for Voiceband Data" (or simply "nopvbd") event 
   occurs when a VBD procedure has not been negotiated and VBD stimulus is 
   detected. The "nopvbd" event may occur when the procedure is updated (e.g., 
   upon detecting new stimulus), when the procedure ends and when the procedure 
   fails.

   <br />
<br />


   The nopvbd procedure MAY involve VBD handling including but not limited to 
   adjusting gain and jitter, disabling voice activity detection and DC offset 
   filters. The nopvbd procedure MAY involve switching to another codec. The 
   Call Agent MAY have to issue further commands in response to the "nopvbd" 
   event in order to ensure a successful VBD call.

   <br />
<br />

  
   As with the "gwvbd" event, the same recommendations from MGCP [RFC3435] 
   regarding ABNF, general robustness principles and white space apply.

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   The RequestedEvent is encoded as,

     NopVbdReqEvent = "nopvbd"

   The ObservedEvent is encoded as,

     NopVbdObsEvent = NopVbdObsEventStart / NopVbdObsEventUpdate /
                      NopVbdObsEventStop / NopVbdObsEventFailure

     NopVbdObsEventStart   = "nopvbd(start" Rc [Codec] [Dir] ")"
     NopVbdObsEventUpdate  = "nopvbd(update" Rc [Codec] [Dir] ")"
     NopVbdObsEventStop    = "nopvbd(stop" [Rc] [Codec] ")"
     NopVbdObsEventFailure = "nopvbd(failure" [Rc] [Codec] ")"

</pre></div><p>
 

     The following ABNF notation is common with the "gwvbd" ObservedEvent.
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  Codec = "," *WSP "codec=" CodecString
  CodecString = (ALPHA / DIGIT) *(ALPHA / DIGIT / "-" / "_" / "." / "/")
  Rc = "," *WSP "rc=" ReasonCode
  ReasonCode = 1*(ALPHA / DIGIT / "-" / "_" / "." / "/")
               ; Refer to the values listed in the tables below.
  Dir = "," *WSP "dir=" Direction
  Direction = "GstnToIp" / "IpToGstn"


</pre></div><p>
 

   ABNF does not provide for position independent parameters. The "rc", "codec",
   and "dir" parameters, if present, MUST appear in the relative order shown. 

   <br />
<br />



   The "start", "update", "stop" and "failure" ObservedEvent parameters are 
   defined: 

   <br />
<br />


    
   * VBD Start(start)

   <br />
<br />



     The nopvbd procedure was initiated. The Call Agent may have to issue 
     further commands in order to ensure a successful VBD call (e.g., switch to 
     another codec). At most one "nopvbd(stop)" or "nopvbd(failure)" event MAY 
     be generated corresponding to each "nopvbd(start)" event. The Call Agent 
     MAY need to infer that the nopvbd procedure has ended.

   <br />
<br />


    
   * VBD Update (update)

   <br />
<br />



     The nopvbd procedure was updated. The "nopvbd(update)" event MUST only be 
     generated after a "nopvbd(start)" event and before a "nopvbd(stop)" or 
     "nopvbd(failure)" event. 

   <br />
<br />



   * VBD Stop (stop)


   <br />
<br />


     The nopvbd procedure ended and the Gateway did not detect any errors. Note 
     that this does not necessarily imply a successful fax, modem, or text 
     transmission. It merely indicates that the nopvbd procedure has ended and 
     the procedure itself did not encounter any errors. Refer to the definition 
     of the "stop" parameter from the "gwvbd" event in section 3.1.1 for 
     additional information.


   <br />
<br />


   * VBD Failure (failure)

   <br />
<br />



     The nopvbd procedure ended abnormally. Some kind of problem was encountered 
     in the nopvbd procedure and the procedure ended.

   <br />
<br />



    
   Call Agents and Gateways MUST implement the "start" parameter and MAY 
   implement the "update", "stop" and "failure" parameters. Call Agents MAY and
   Gateways MUST implement the "rc" parameter in conjunction with the "start" 
   and "update" parameters. Call Agents and Gateways MAY implement the "rc"
   parameter in conjunction with the "stop" and "failure" parameters. A Call
   Agent MUST ignore all unknown ObservedEvent parameters including parameters
   which are defined as part of this specification and not implemented.

   <br />
<br />


    
   The definitions of the "rc", "codec" and "dir" ObservedEvent parameters are 
   taken from the "gwvbd" event.


   <br />
<br />


   As with the "gwvbd" event, the same recommendations regarding interspersed 
   text and speech apply.


					
				
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2.1"></a><h3>3.1.2.1.&nbsp;
No Negotiated Procedure for Voiceband Data Examples</h3>

<p>
  The following examples illustrate the encoding of the "nopvbd(start)" event,
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/nopvbd(start, rc=ANS)
        O: vbd/nopvbd(start, rc=ANS, codec=audio/PCMU)


</pre></div><p>
 


   The following example illustrates the encoding of the "nopvbd(update)" event,
   
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/nopvbd(update, rc=/ANSam, dir=IpToGstn)


</pre></div><p>
 

   The following examples illustrate the encoding of the "nopvbd(stop)" event,
   
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/nopvbd(stop)
        O: vbd/nopvbd(stop, rc=SIL, codec=audio/G729)
        O: vbd/nopvbd(stop, rc=MC, codec=image/t38)


</pre></div><p>
 

   The following examples illustrate the encoding of the "nopvbd(failure)" 
   event,
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        O: vbd/nopvbd(failure, codec=audio/G729)
        O: vbd/nopvbd(failure, rc=TO, codec=audio/G729)


</pre></div><p>
 

					
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
General-Purpose Media Descriptor Parameter Package Definition</h3>

<p>

   A package is defined for the General-Purpose Media Descriptor Parameter 
   [V152].  The package defines a new LocalConnectionOption as detailed below. 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   Package Name:        GPMD
   Package Version:     0


</pre></div><p>
 

		
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
LocalConnectionOptions</h3>

<p>

   The following LocalConnectionOption is defined in support of the above: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    ------------------------------------------------------
   | Symbol |   Definition                                |
   |--------|---------------------------------------------|
   | gpmd   | General-Purpose Media Descriptor Parameter  |
    ------------------------------------------------------


</pre></div><p>
 

   The definition of the LocalConnectionOption is provided in the following 
   subsection. 
				
			
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
General-Purpose Media Descriptor Parameter</h3>

<p>
    The General-Purpose Media Descriptor Parameter LocalConnectionOption is 
    similar to the "gpmd" SDP [RFC4566] attribute defined in ITU-T 
    Recommendation V.152 [V152] and is applicable to all of the same media 
    formats that the corresponding SDP "gpmd" attribute could be used with.

   <br />
<br />



    The General-Purpose Media Descriptor Parameter is encoded as the keyword 
    "gpmd" or "o-gpmd", followed by a colon and a quoted string beginning with 
    the media format name (MIME subtype only) followed by a space, followed by 
    the media format parameters associated with that media format,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      gpmd/gpmd:"&lt;format&gt; &lt;parameter list&gt;"


</pre></div><p>
 



   <br />
<br />


    For simplicity, we will use the terms "codec" and "media format" 
    interchangeably in the following. Multiple media formats may be indicated by 
    either repeating the "gpmd" LocalConnectionOption multiple times, such as:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      L: a:codec1;codec2, gpmd/gpmd:"codec1 parameterX",
                          gpmd/gpmd:"codec2 parameterY"


</pre></div><p>
 

    or alternatively by having a single "gpmd" keyword followed by a colon, and 
    a semi-colon separated list of quoted strings for each General-Purpose Media
    Descriptor Parameter, as in:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      L: a:codec1;codec2, gpmd/gpmd:"codec1 parameterX";
                                    "codec2 parameterY"


</pre></div><p>
 

    The two formats may be mixed,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      L: a:codec1;codec2;codec3, gpmd/gpmd:"codec1 parameterX",
                                 gpmd/gpmd:"codec2 parameterY";
                                           "codec3 parameterZ"


</pre></div><p>
 

    The carriage returns above are included for formatting reasons only and are 
    not permissible in a real implementation. This holds true for all of the 
    examples in this document.


   <br />
<br />


    If it is possible for the same codec to be requested with and without the 
    "gpmd" parameter, the following could result:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      L: a:codec1;codec1, gpmd/gpmd:"codec1 parameterX"


</pre></div><p>
 

    However, it would not be clear if the "gpmd" parameter was to be applied to 
    the first or the second occurrence of the codec.  The problem with that is 
    that codec ordering is important (i.e., codecs are listed in preferred
    order), and the above syntax does not provide a way to indicate if 
    "parameterX" is preferred (i.e., associated with the first "codec1") or not 
    (i.e., associated with the second "codec1").  In order to resolve this 
    dilemma, the codec in the "gpmd" media format is followed by a colon and an 
    &lt;order&gt;, where &lt;order&gt; is a number from one to N for occurrences of the same 
    codec in the codec list i.e.:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      L:a:codec1;codec1, gpmd/gpmd:"codec1:2 parameterX"


</pre></div><p>
 


    indicates that "parameterX" is associated with the second instance of 
    "codec1" in the "a:codec1;codec1" list.  If an invalid instance number is 
    supplied (e.g., instance 3 where there are only two instances), then error 
    code 524 - inconsistency in local connection options will be returned. In 
    the absence of an &lt;order&gt;, the first instance is assumed.

   <br />
<br />



    Pre-pending "gpmd" with the string "o-" (i.e., "o-gpmd") indicates that the 
    parameter is optional.  In that case, the Gateway may decide not to use the 
    "gpmd" parameter specified, or only use it in part.


   <br />
<br />


    If the "gpmd" LocalConnectionOption parameter is not optional (i.e., does 
    not have "o-" in front of it), and the LocalConnectionOption parameter value 
    is either not recognized or not supported, then the associated codec is 
    considered "not supported".


   <br />
<br />


    When auditing capabilities, the "gpmd" LocalConnectionOption parameter MUST 
    be returned with a semi-colon separated list of supported formats and/or 
    multiple independent "gpmd" parameters as in:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      A: a:codec1;codec2, gpmd/gpmd:"codec1 parameterX";
                                    "codec2 parameterY"

    or,

      A: a:codec1;codec1, gpmd/gpmd:"codec1 parameterX"


</pre></div><p>
 

    One example uses the General-Purpose Media Descriptor Parameter 
    LocalConnectionOption in conjunction with Gateway controlled Voiceband Data 
    (or simply VBD) using payload type switching [V152]. In the context of VBD, 
    the &lt;format&gt; must be an RTP/AVP payload type. The &lt;parameter list&gt; is a  
    semicolon-separated list of "parameter=value" pairs,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  L: a:codec1, gpmd/gpmd:"codec1 parameterX=ValueA;parameterY=ValueB"


</pre></div><p>
 

    In the example below, G.729 is an audio codec and G.711u is a VBD codec,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      L: a:G729;PCMU, gpmd/gpmd:"PCMU vbd=yes"


</pre></div><p>
 


    The corresponding media description in the SDP as part of the connection 
    request acknowledgment might look like:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      m=audio 12345 RTP/AVP 18 96
      a=rtpmap:96 PCMU/8000
      a=gpmd:96 vbd=yes


</pre></div><p>
 

    If a request is made to audit the capabilities of an endpoint, and the 
    endpoint supports G.711u as both an audio and VBD codec, then the "gpmd" 
    LocalConnectionOption parameter might look like:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      A: a:PCMU, p:10-40, e:on, s:on,
         m:sendonly;recvonly;sendrecv;inactive
      A: a:PCMU, p:10-40, e:on, s:off,
         m:sendonly;recvonly;sendrecv;inactive,
         gpmd/gpmd:"PCMU vbd=yes"


</pre></div><p>
 

    Given that some parameters, such as e.g., silence suppression, are only 
    compatible with G.711u as an audio codec, then the Gateway MUST return 
    different capability sets corresponding to audio and VBD.


   <br />
<br />


    If we combine V.152 and redundancy [RFC2198], an example 
    LocalConnectionOption might look as follows. In the example below, G.729 is 
    an audio codec and G.711u is a VBD codec with a redundancy level of one:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  L: a:G729;RED;PCMU, gpmd/gpmd:"PCMU vbd=yes", fmtp:"RED PCMU/PCMU"


</pre></div><p>
 

    The corresponding media description in the SDP as part of the connection 
    request acknowledgment might look like:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      m=audio 12345 RTP/AVP 18 96 97
      a=rtpmap:96 RED/8000
      a=fmtp:96 97/97
      a=rtpmap:97 PCMU/8000
      a=gpmd:97 vbd=yes


</pre></div><p>
 

    Refer to section 5 for more examples involving V.152 and redundancy. 

				
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Use of Media Format Parameter Package with VBD and Redundancy</h3>

<p>

   The MGCP Media Format Parameter (FM) package [RFC3660] in conjunction with the 
   standard audio MIME subtype "RED" may be used by the Call Agent to authorize 
   the negotiation of redundancy [RFC2198], to identify the levels of redundancy 
   and the media format associated with each redundancy level. An example of
   this was demonstrated in section 4.


   <br />
<br />


   The FM package states that the "fmtp" LocalConnectionOption MUST be returned 
   when auditing capabilities. Applying this to VBD and redundancy might result 
   in:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      A: a:PCMU, p:10-40, e:on, s:on,
         m:sendonly;recvonly;sendrecv;inactive
      A: a:RED;PCMU, p:10-40, e:on, s:off,
         m:sendonly;recvonly;sendrecv;inactive,
         gpmd/gpmd:"PCMU vbd=yes",
         fmtp:"RED PCMU/PCMU"

   The FM package defines "instance syntax" in which,

     L:a:codec1;codec1, fmtp:"codec1:2 formatX"


</pre></div><p>
 

   indicates that "formatX" is associated with the second instance of "codec1" 
   in the "a:codec1;codec1" list. The examples in the FM package are limited to 
   the use of the instance syntax in conjunction with the media format. We 
   propose the use of the instance syntax in conjunction with the media format 
   parameters,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     L:a:codec1;codec2;codec3;codec2, fmtp:"codec3 codec2:2/codec2:2"


</pre></div><p>
 


   Let's build on the example of section 4. In the example below, G.729 is an 
   audio codec, G.711u is both an audio codec and a VBD codec with a redundancy 
   level of one:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     L: a:G729;PCMU;RED;PCMU, gpmd/gpmd:"PCMU:2 vbd=yes",
                              fmtp:"RED PCMU:2/PCMU:2"


</pre></div><p>
 

   The corresponding media description in the SDP as part of the connection 
   request acknowledgment might look like:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     m=audio 12345 RTP/AVP 18 0 96 97
     a=rtpmap:96 RED/8000
     a=fmtp:96 97/97
     a=rtpmap:97 PCMU/8000
     a=gpmd:97 vbd=yes


</pre></div><p>
 

   Note that the relative preference of the LocalConnectionOption encoding 
   methods is preserved in the "audio" media formats (i.e., payload types) as 
   part of the media description. In this example, this reflects a preference 
   for V.152 with redundancy versus without. No preference is inferred from the 
   relative order of the different LocalConnectionOptions, namely "a", 
   "gpmd/gpmd" and "fmtp".

   <br />
<br />



   A Call Agent can authorize the negotiation of audio codecs and VBD codecs 
   involving different levels of redundancy. In the example below, G.711u is a 
   VBD codec with a redundancy level of two (preferred) or one:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    L: a:G729;RED;RED;PCMU, fmtp:"RED PCMU/PCMU/PCMU",
                                 fmtp:"RED:2 PCMU/PCMU",
                                 gpmd/gpmd:"PCMU vbd=yes"


</pre></div><p>
 

   The corresponding media description in the SDP as part of the connection 
   request acknowledgment might look like:
  
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     m=audio 12345 RTP/AVP 18 96 97 98
     a=rtpmap:96 RED/8000
     a=fmtp:96 98/98/98
     a=rtpmap:97 RED/8000
     a=fmtp:97 98/98
     a=rtpmap:98 PCMU/8000
     a=gpmd:98 vbd=yes


</pre></div><p>
 

   Redundancy can be applied to both audio codecs and VBD codecs. In the example 
   below, G.729 is an audio codec with a redundancy level of two and G.711u is a 
   VBD codec with a redundancy level of one:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     L: a:RED;G729;RED;PCMU, fmtp:"RED G729/G729/G729",
                             fmtp:"RED:2 PCMU/PCMU",
                             gpmd/gpmd:"PCMU vbd=yes"


</pre></div><p>
 

   The corresponding media description in the SDP as part of the connection 
   request acknowledgment might look like:
  
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     m=audio 12345 RTP/AVP 96 18 97 98
     a=rtpmap:96 RED/8000
     a=fmtp:96 18/18/18
     a=rtpmap:97 RED/8000
     a=fmtp:97 98/98
     a=rtpmap:98 PCMU/8000
     a=gpmd:98 vbd=yes


</pre></div><p>
 

		
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Use of Media Format Parameter Package with VBD and FEC</h3>

<p>
  A Call Agent may authorize the negotiation of forward error correction (FEC) 
   [RFC2733] with the standard audio MIME subtype "parityfec",
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       L: a:PCMU;parityfec


</pre></div><p>
 


   By default, we assume that FEC packets are to be sent as a separate stream.   
   The corresponding media description in the SDP as part of the connection 
   request acknowledgment might look like:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      v=0
      c=IN IP4 192.0.2.0
      m=audio 49170 RTP/AVP 0 96
      a=rtpmap:96 parityfec/8000
      a=fmtp:96 49172 IN IP4 192.0.2.0


</pre></div><p>
 

   If FEC is to be sent as a secondary codec in the redundant codec payload 
   format [RFC2198], we again leverage the MGCP Media Format Parameter (FM)    
   package [RFC3660] in conjunction with the standard audio MIME subtype "RED",

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       L: a:G729;RED;PCMU;parityfec, gpmd/gpmd:"PCMU vbd=yes",
                                    fmtp:"RED PCMU/parityfec"

   The corresponding media description might look like:

      v=0
      c=IN IP4 192.0.2.0
      m=audio 49170 RTP/AVP 18 96 97 98
      a=rtpmap:96 RED/8000
      a=fmtp:96 97/98
      a=rtpmap:97 PCMU/8000
      a=gpmd:97 vbd=yes
      a=rtpmap:98 parityfec/8000


</pre></div><p>
 

   The FM package states that the "fmtp" LocalConnectionOption MUST be returned 
   when auditing capabilities. Applying this to VBD, redundancy and FEC might 
   result in:
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      A: a:PCMU, p:10-40, e:on, s:on,
         m:sendonly;recvonly;sendrecv;inactive
      A: a:RED;PCMU;parityfec, p:10-40, e:on, s:off,
         m:sendonly;recvonly;sendrecv;inactive,
         gpmd/gpmd:"PCMU vbd=yes",
         fmtp:"RED PCMU/parityfec"


</pre></div><p>
 


		
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Use of Fax Package with VBD</h3>

<p>

  The MGCP Fax (FXR) package [RFCABCD] is used by a Call Agent to authorize fax 
   handling including Call Agent controlled T.38 and Gateway procedures such as 
   V.152. With the FXR package, VBD falls into one of two categories: "special 
   fax handling" as part of the Gateway procedure (resulting in the "gwfax" 
   event); or "no special fax handling" as part of the Gateway and Off 
   procedures (resulting in the "nopfax" event). In order for a VBD procedure to 
   fall into the "special fax handling" category, support for it MUST be
   negotiated with the other side by passing and recognizing relevant parameters
   via the LocalConnectionDescriptor and RemoteConnectionDescriptor.

   <br />
<br />



   A Gateway controlled VBD procedure such as V.152 MUST fall into the category 
   of Gateway controlled mode involving "special fax handling". The resulting 
   "gwfax" event is what informs the Call Agent to refrain from issuing media 
   handling instructions which could otherwise have a negative impact on the 
   Gateway procedure.

   <br />
<br />



   Consider the following example (with shorthand SDP notation):

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        CRCX 2000 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        C: 1
        M: sendrecv
        L: a:G729;PCMU, gpmd/gpmd:"PCMU vbd=yes", fxr/fx:t38;gw
        X: 1
        R: fxr/t38, fxr/gwfax, fxr/nopfax

        v=0
        c=IN IP4 192.0.2.1
        m=audio 3456 RTP/AVP 18 96
        a=rtpmap:96 PCMU/8000
        a=gpmd:96 vbd=yes


        200 2000 OK
        I: 1

        v=0
        m=audio 1296 RTP/AVP 18 96
        a=rtpmap:96 PCMU/8000
        a=gpmd:96 vbd=yes


</pre></div><p>
 

   The RemoteConnectionDescriptor does not indicate support for "image/t38" as a 
   latent capability [RFC3407]. Consequently, the Gateway will not initiate the 
   T.38 strict fax procedure, "t38", upon detecting fax stimulus (i.e., CNG, 
   V.21 flags, ...). However, the two endpoints did successfully negotiate a 
   Gateway controlled VBD procedure (e.g., V.152), therefore, Gateway controlled 
   mode involving "special fax handling" is used. The "gwfax(start)" event will 
   be generated upon detecting VBD (including fax) stimulus.


   <br />
<br />


   A Call Agent can express a preference for a Gateway procedure involving 
   "special fax handling" over a T.38 procedure (strict or loose). For example,


   <br />
<br />


     L: fxr/fx:gw;t38


   <br />
<br />


   and,

   <br />
<br />



     L: fxr/fx:gw;t38-loose


   <br />
<br />


   However, with the existing syntax of the FXR package, a Call Agent cannot 
   express a preference for one Gateway procedure over another, each with 
   possibly different preferences relative to a T.38 procedure.


   <br />
<br />


   The FXR package allows a Gateway to implement additional fax handling
   parameters. We define just such a parameter by qualifying the existing "gw" 
   parameter with a list of one or more MIME types,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     Gateway  = "gw[" mimeType 0*("|" mimeType) "]"
     mimeType = mimeMediaType "/" mimeSubType
     ; mimeMediaType and mimeSubType from,
     ;   http://www.iana.org/assignments/media-types/


</pre></div><p>
 


   By qualifying the "gw" parameter with a list of MIME types, we narrow the 
   scope of the Gateway procedure. Consider the following examples in which the 
   Call Agent authorizes the use of a Gateway controlled fax handling procedure:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      - involving "image/t38" (e.g., T.38oUDPTL, T.38oTCP),

         L: a:G729, fxr/fx:gw[image/t38]

     - involving VBD (e.g., PCMU and V.152),

         L: a:G729;PCMU, gpmd/gpmd:"PCMU vbd=yes", fxr/fx:gw[audio/PCMU]

     - involving VBD with redundancy (e.g., PCMU, V.152 and RFC 2198),

     L: a:G729;RED;PCMU, fmtp:"RED PCMU/PCMU", gpmd/gpmd:"PCMU vbd=yes",
        fxr/fx:gw[audio/RED|audio/PCMU]


</pre></div><p>
 

   Only "special fax handling" involving one of the specified MIME types is 
   authorized. Support for "special fax handling" involving one of the specified 
   MIME types MUST be negotiated or this "instance" of the Gateway procedure is 
   not initiated. Consider the following example in which the Call Agent 
   authorizes the use of a Gateway controlled fax handling procedure:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     - involving "audio/t38" (e.g., T.38oRTP),

         L: a:G729;t38, fxr/fx:gw[audio/t38]


</pre></div><p>
 

   In this example, the call will fail if the Gateway fails to negotiate 
   "audio/t38".

   <br />
<br />



   The "fx" LocalConnectionOption MAY now involve multiple instances of the "gw" 
   parameter, each with a different list of MIME types. In order to authorize 
   "no special fax handling", the Call Agent MUST include: the "gw" parameter 
   without a MIME type; or the "off" parameter. The instance of the "gw"
   parameter without a MIME type should appear as the last instance of the "gw" 
   parameter. In the following example, 


   <br />
<br />


     L: a:G729;PCMU, fxr/fx:gw[image/t38];gw


   <br />
<br />


   the Call Agent authorizes the use of and expresses a preference for,


   <br />
<br />


      1. Gateway controlled image/t38 (e.g., T.38oUDPTL)

   <br />
<br />


      2. Any other Gateway procedure with "special fax handling"

   <br />
<br />


      3. No special fax handling

   <br />
<br />



   If present, the "off" parameter should appear as the last parameter. In the 
   following example, 

   <br />
<br />



     L: a:G729;PCMU;t38, fxr/fx:gw[audio/t38];off


   <br />
<br />


   the Call Agent authorizes the use of and expresses a preference for,


   <br />
<br />


      1. Gateway controlled audio/t38 (e.g., T.38oRTP)

   <br />
<br />


      2. No special fax handling

   <br />
<br />



   We can express relative preferences for different Gateway controlled fax 
   handling procedures, not only with respect to one another, but with respect 
   to T.38 procedures. Consider the following preferential list of fax handling 
   procedures,


   <br />
<br />


      1. Gateway controlled audio/t38 (e.g., T.38oRTP)

   <br />
<br />


      2. Gateway controlled image/t38 (e.g., T.38oUDPTL)

   <br />
<br />


      3. Call Agent Controlled image/t38

   <br />
<br />


      4. Gateway controlled VBD with Redundancy (e.g., PCMU, V.152 and RFC 2198)

   <br />
<br />


      5. Gateway controlled VBD without Redundancy (e.g., PCMU and V.152)

   <br />
<br />


      6. Any other Gateway procedure with "special fax handling"

   <br />
<br />


      7. No special fax handling

   <br />
<br />



   This would be expressed as,
  
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     L: a:G729;PCMU;t38;RED;PCMU,
        gpmd/gpmd:"PCMU:2 vbd=yes",
        fmtp:"RED PCMU:2/PCMU:2",
        fxr/fx:gw[audio/t38|image/t38];t38;gw[audio/RED|audio/PCMU:2];gw


</pre></div><p>
 

   Note that the bracketed form of the "gw" parameter is NOT defined as part of 
   the VBD package. The bracketed form of the "gw" parameter is defined as an 
   extension to the FXR package. Gateways that implement the bracketed form of 
   the "gw" parameter MUST return this form of the parameter when capabilities 
   are audited as illustrated by the following example:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     A: fxr/fx:t38;t38-loose;gw[audio/t38|image/t38];gw;off


</pre></div><p>
 

  
   Support for the bracketed "gw" parameter MAY be spread across multiple 
   capability lines,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     A: a:RED;PCMU, p:10-40, e:on, s:off,
        m:sendonly;recvonly;sendrecv;inactive,
        gpmd/gpmd:"PCMU vbd=yes",
          fmtp:"RED PCMU/PCMU",
          fxr/fx:gw[audio/RED|audio/PCMU]
     A: a:t38, fxr/fx:gw[audio/t38]
     A: a:image/t38, fxr/fx:t38;t38-loose;gw[image/t38]


</pre></div><p>
 

   A Call Agent SHOULD only attempt to leverage the bracketed form of the "gw" 
   parameter in conjunction with an endpoint which indicates support for the 
   bracketed syntax as part of the capabilities.


   <br />
<br />


   Call Agents and Gateways that do not support this form of the "gw" parameter 
   MUST ignore the bracketed MIME type information consistent with the MGCP 
   grammar [RFC3435].


		
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Call Flow Examples</h3>

<p>
   In this section, we provide two example call flows. The first one illustrates 
   a modem call under Gateway control using V.152.  The second one illustrates a 
   fax call under Gateway control using V.152 and Call Agent controlled T.38.
		
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Modem Call with Gateway Controlled VBD</h3>

<p>
   In this example, both sides support Gateway controlled VBD using V.152 with 
   redundancy. We assume the originating and terminating Call Agent communicate 
   via the Session Initiation Protocol (SIP) [RFC3261]: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    ------------------------------------------------------------------
   | #|     GW-o      |     CA-o      |      CA-t     |      GW-t     |
   |==|===============|===============|===============|===============|
   | 1|             &lt;-|CRCX           |               |               |
   | 2|     200(sdp-o)|-&gt;             |               |               |
   | 3|               |  INVITE(sdp-o)|-&gt;             |               |
   | 4|               |               |    CRCX(sdp-o)|-&gt;             |
   | 5|               |               |             &lt;-|200 (sdp-t)    |
   | 6|               |             &lt;-|200(sdp-t)     |               |
   | 7|             &lt;-|MDCX(sdp-t)    |               |               |
   | 8|            200|-&gt;             |               |               |
   |--|---------------|---------------|---------------|---------------|
   | 9|               |               |               |&lt;- ANS/T.30 CED|
   |10|               |               |           &lt;- NTFY(gwvbd start)|
   |11|               |               |            200|-&gt;             |
   |12|NTFY(gwvbd start) -&gt;           |               |               |
   |13|             &lt;-|200            |               |               |
   |--|---------------|---------------|---------------|---------------|
   |14|               |               |               | (modem ends)  |
   |15|               |               |           &lt;- NTFY(gwvbd stop) |
   |16|               |               |            200|-&gt;             |
   |17|NTFY(gwvbd stop) -&gt;            |               |               |
   |18|             &lt;-|200            |               |               |
    ------------------------------------------------------------------


</pre></div><p>
 

   Step 1: 

   <br />
<br />


    
   The Call Agent issues a CreateConnection command to the Gateway instructing 
   it to use G.729 media encoding and to notify it of the "gwvbd" and "nopvbd" 
   events. The Call Agent authorizes the negotiation of G.711u as a VBD codec 
   with a redundancy level of one:
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      CRCX 1000 ds/ds1-1/1@gw-o.whatever.net MGCP 1.0
      C: 1
      L: a:G729;RED;PCMU, gpmd/gpmd:"PCMU vbd=yes", fmtp:"RED PCMU/PCMU"
      M: recvonly
      R: vbd/gwvbd, vbd/nopvbd
      X: 1
      Q: process, loop


</pre></div><p>
 

    
   Step 2: 

   <br />
<br />


    
   The Gateway acknowledges the command and includes SDP with codec 
   information as well as V.152 and redundancy information: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 1000 OK
        I:1

        v=0
        o=- 25678 753849 IN IP4 192.0.2.1
        s=-
        c=IN IP4 192.0.2.1
        t=0 0
        m=audio 3456 RTP/AVP 18 96 97
        a=rtpmap:96 RED/8000
        a=fmtp:96 97/97
        a=rtpmap:97 PCMU/8000
        a=gpmd:97 vbd=yes


</pre></div><p>
 

   Step 3: 
    

   <br />
<br />


   The originating Call Agent sends a SIP INVITE message with the SDP to the 
   terminating Call Agent. 
    

   <br />
<br />


   Step 4: 
    

   <br />
<br />


   The terminating Call Agent issues a CreateConnection command to the 
   terminating Gateway instructing it to use G.729 media encoding and to notify 
   it of the "gwvbd" and "nopvbd" events. Again, the Call Agent authorizes the 
   negotiation of G.711u as a VBD codec with a redundancy level of one:
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      CRCX 2000 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
      C: 2
      L: a:G729;RED;PCMU, gpmd/gpmd:"PCMU vbd=yes", fmtp:"RED PCMU/PCMU"
      M: sendrecv
      R: vbd/gwvbd, vbd/nopvbd
      X: 20
      Q: process, loop

      v=0
      o=- 25678 753849 IN IP4 192.0.2.1
      s=-
      c=IN IP4 192.0.2.1
      t=0 0
      m=audio 3456 RTP/AVP 18 96 97
      a=rtpmap:96 RED/8000
      a=fmtp:96 97/97
      a=rtpmap:97 PCMU/8000
      a=gpmd:97 vbd=yes


</pre></div><p>
 

   Step 5: 

   <br />
<br />


    
   The terminating Gateway supports V.152 and redundancy, and the 
   RemoteConnectionDescriptor included indicates that the other side supports 
   V.152 and redundancy.  The terminating Gateway sends back a success response 
   with its SDP which also includes V.152 and redundancy information: 
   
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 2000 OK
        I:2

        v=0
        o=- 25678 753849 IN IP4 192.0.2.2
        s=-
        c=IN IP4 192.0.2.2
        t=0 0
        m=audio 1296 RTP/AVP 18 96 97
        a=rtpmap:96 RED/8000
        a=fmtp:96 97/97
        a=rtpmap:97 PCMU/8000
        a=gpmd:97 vbd=yes


</pre></div><p>
 

   Step 6: 
    

   <br />
<br />


   The terminating Call Agent sends back a SIP 200 OK response to the 
   originating Call Agent, which in turn sends a SIP ACK (not shown).  
    

   <br />
<br />


   Step 7: 

   <br />
<br />


    
   The originating Call Agent in turns sends a ModifyConnection command to the 
   originating Gateway: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        MDCX 1001 ds/ds1-1/1@gw-o.whatever.net MGCP 1.0
        C: 1
        I: 1
        M: sendrecv

        v=0
        o=- 25678 753849 IN IP4 192.0.2.2
        s=-
        c=IN IP4 192.0.2.2
        t=0 0
        m=audio 1296 RTP/AVP 18 96 97
        a=rtpmap:96 RED/8000
        a=fmtp:96 97/97
        a=rtpmap:97 PCMU/8000
        a=gpmd:97 vbd=yes


</pre></div><p>
 

   Since the RemoteConnectionDescriptor indicates the other side supports V.152 
   and redundancy, the Gateway will in fact be able to use the Gateway 
   controlled VBD procedure with redundancy. Had there not been any support for 
   V.152 in the RemoteConnectionDescriptor, then this command would still have 
   succeeded, however there would be no negotiated procedure for VBD handling.  

   <br />
<br />


    
   Step 8: 

   <br />
<br />


    
   The Gateway acknowledges the command.  At this point, a call is established 
   using G.729 encoding, and if a VBD call is detected, the Gateway controlled 
   VBD procedure will be initiated. 
    

   <br />
<br />


   Step 9-10: 
    

   <br />
<br />


   A modem call now occurs.  The terminating Gateway detects a T.30 CED tone 
   (a.k.a. V.25 ANS) in the GSTN to IP direction and begins transmitting RTP 
   packets with the negotiated redundant VBD payload type (96).
    

   <br />
<br />


   The "gwvbd(start)" event occurs and is notified to the Call Agent: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 2500 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        O: vbd/gwvbd(start, rc=ANS, codec=audio/RED, coord=v152ptsw)
        X: 20


</pre></div><p>
 

   Step 11: 
    

   <br />
<br />


   The Call Agent acknowledges the Notify command: 

   <br />
<br />


    
        200 2500 OK 

   <br />
<br />



   Step 12: 

   <br />
<br />


     
   Upon receiving a RTP packet with the redundant VBD payload type (96), the 
   originating Gateway begins transmitting RTP packets with the redundant VBD 
   payload type.

   <br />
<br />



   The "gwvbd(start)" event occurs and is notified to the Call Agent: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 1500 ds/ds1-1/1@gw-0.whatever.net MGCP 1.0
        O: vbd/gwvbd(start, rc=PTSW, codec=audio/RED)
        X: 1


</pre></div><p>
 

    
   Step 13:

   <br />
<br />



   The Call Agent acknowledges the Notify command: 

   <br />
<br />


    
        200 1500 OK 

   <br />
<br />



   Step 14 - 15: 

   <br />
<br />


    
   The modem call ends. The terminating Gateway detects bi-directional silence 
   and begins transmitting RTP packets with the negotiated audio payload type
   (18).

   <br />
<br />



   The "gwvbd(stop)" event occurs and is notified to the Call Agent: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 2501 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        O: vbd/gwvbd(stop, rc=SIL, codec=audio/G729)
        X: 20


</pre></div><p>
 

   Step 16: 

   <br />
<br />


    
   The Call Agent acknowledges the Notify command: 

   <br />
<br />


    
        200 2501 OK 

   <br />
<br />



   Step 17: 

   <br />
<br />


     
   Upon receiving a RTP packet with the audio payload type (18), the originating 
   Gateway begins transmitting RTP packets with the audio payload type.

   <br />
<br />



   The "gwvbd(stop)" event occurs and is notified to the Call Agent: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 1501 ds/ds1-1/1@gw-0.whatever.net MGCP 1.0
        O: vbd/gwvbd(stop, rc=PTSW, codec=audio/G729)
        X: 1


</pre></div><p>
 

   Step 18:

   <br />
<br />



   The Call Agent acknowledges the Notify command: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


        200 1501 OK


</pre></div><p>
 

    
   The modem call is now over.  
			
			
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Fax Call with Gateway Controlled VBD and Call Agent Controlled T.38</h3>

<p>
   In this example, both sides support Gateway controlled VBD using V.152 with 
   Redundancy and Call Agent controlled T.38. We assume the originating and 
   terminating Call Agent communicate via the Session Initiation Protocol (SIP) 
   [RFC3261]: 

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    ------------------------------------------------------------------
   | #|     GW-o      |     CA-o      |      CA-t     |      GW-t     |
   |==|===============|===============|===============|===============|
   | 1|             &lt;-|CRCX           |               |               |
   | 2|     200(sdp-o)|-&gt;             |               |               |
   | 3|               |  INVITE(sdp-o)|-&gt;             |               |
   | 4|               |               |    CRCX(sdp-o)|-&gt;             |
   | 5|               |               |             &lt;-|200 (sdp-t)    |
   | 6|               |             &lt;-|200(sdp-t)     |               |
   | 7|             &lt;-|MDCX(sdp-t)    |               |               |
   | 8|            200|-&gt;             |               |               |
   |--|---------------|---------------|---------------|---------------|
   | 9|               |               |               |&lt;- ANS/T.30 CED|
   |10|               |               |           &lt;- NTFY(gwvbd start)|
   |11|               |               |            200|-&gt;             |
   |12|NTFY(gwvbd start) -&gt;           |               |               |
   |13|             &lt;-|200            |               |               |
   |14|               |               |               &lt;- V.21 Preamble|
   |15|               |               |             &lt;- NTFY(t38 start)|
   |16|               |               |            200|-&gt;             |
   |17|               |               |      MDCX(t38)|-&gt;             |
   |18|               |               |             &lt;-|200(sdp-t2)    |
   |19|               |             &lt;-|INVITE(sdp-t2) |               |
   |20|             &lt;-|MDCX(sdp-t2)   |               |               |
   |21|    200(sdp-o2)|-&gt;             |               |               |
   |22|               |    200(sdp-o2)|-&gt;             |               |
   |23|               |               |   MDCX(sdp-o2)|-&gt;             |
   |24|               |               |             &lt;-|200            |
   |--|---------------|---------------|---------------|---------------|
   |25|               |               |               |   (fax ends)  |
   |26|               |               |             &lt;-|NTFY(t38 stop) |
   |27|               |               |            200|-&gt;             |
    ------------------------------------------------------------------


</pre></div><p>
 

   Step 1: 

   <br />
<br />


    
   The Call Agent issues a CreateConnection command to the Gateway instructing 
   it to use G.729 media encoding and to use either the strict T.38 procedure or 
   the Gateway procedure. Consequently, the Call Agent requests notification of 
   the "t38", "gwfax", "gwvbd" and "nopvbd" events. The Call Agent authorizes
   the negotiation of G.711u as a VBD codec with a redundancy level of one:
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     CRCX 1000 ds/ds1-1/1@gw-o.whatever.net MGCP 1.0
     C: 1
     L: a:G729;RED;PCMU, gpmd/gpmd:"PCMU vbd=yes", fmtp:"RED PCMU/PCMU",
        fxr/fx:t38;gw
     M: recvonly
     R: fxr/t38, fxr/gwfax, vbd/gwvbd, vbd/nopvbd
     X: 1
     Q: process, loop


</pre></div><p>
 

   Step 2: 

   <br />
<br />


    
   The Gateway acknowledges the command and includes SDP with codec 
   information as well as capability, V.152 and redundancy information: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 1000 OK
        I:1

        v=0
        o=- 25678 753849 IN IP4 192.0.2.1
        s=-
        c=IN IP4 192.0.2.1
        t=0 0
        a=pmft: T38
        m=audio 3456 RTP/AVP 18 96 97
        a=rtpmap:96 RED/8000
        a=fmtp:96 97/97
        a=rtpmap:97 PCMU/8000
        a=gpmd:97 vbd=yes
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cdsc: 4 image udptl t38


</pre></div><p>
 

   Note that V.152 requires the use of the session-level "a=pmft" SDP attribute
   in order to express a preference for T.38 over V.152 for fax handling.

   <br />
<br />


        
   Step 3: 

   <br />
<br />


    
   The originating Call Agent sends a SIP INVITE message with the SDP to the 
   terminating Call Agent. 

   <br />
<br />


    
   Step 4: 

   <br />
<br />


    
   The terminating Call Agent issues a CreateConnection command to the
   terminating Gateway instructing it to use G.729 media encoding and to use 
   either the strict T.38 procedure or the Gateway procedure.  Consequently, 
   the Call Agent requests notification of the "t38", "gwfax", "gwvbd" and 
   "nopvbd" events. Again, the Call Agent authorizes the negotiation of G.711u 
   as a VBD codec with a redundancy level of one:
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     CRCX 2000 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
     C: 2
     L: a:G729;RED;PCMU, gpmd/gpmd:"PCMU vbd=yes", fmtp:"RED PCMU/PCMU",
        fxr/fx:t38;gw
     M: sendrecv
     R: fxr/t38, fxr/gwfax, vbd/gwvbd, vbd/nopvbd
     X: 20
     Q: process, loop

     v=0
     o=- 25678 753849 IN IP4 192.0.2.1
     s=-
     c=IN IP4 192.0.2.1
     t=0 0
     a=pmft: T38
     m=audio 3456 RTP/AVP 18 96 97
     a=rtpmap:96 RED/8000
     a=fmtp:96 97/97
     a=rtpmap:97 PCMU/8000
     a=gpmd:97 vbd=yes
     a=sqn: 0
     a=cdsc: 1 audio RTP/AVP 18 96 97
     a=cdsc: 4 image udptl t38


</pre></div><p>
 

   Step 5: 

   <br />
<br />


   
   The terminating Gateway supports T.38, and the RemoteConnectionDescriptor 
   included indicates that the other side supports T.38 as well, so the strict 
   T.38 Call Agent controlled procedure requested can be used.  The terminating 
   Gateway supports V.152 and redundancy, and the RemoteConnectionDescriptor 
   included indicates that the other side supports V.152 and redundancy, so 
   Gateway controlled VBD using V.152 and redundancy can be used for modem and 
   text transmissions.  The terminating Gateway sends back a success response 
   with its SDP which also includes capability, V.152 and redundancy 
   information: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 2000 OK
        I:2

        v=0
        o=- 25678 753849 IN IP4 192.0.2.2
        s=-
        c=IN IP4 192.0.2.2
        t=0 0
        a=pmft: T38
        m=audio 1296 RTP/AVP 18 96 97
        a=rtpmap:96 RED/8000
        a=fmtp:96 97/97
        a=rtpmap:97 PCMU/8000
        a=gpmd:97 vbd=yes
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cdsc: 4 image udptl t38


</pre></div><p>
 

    
   Step 6: 

   <br />
<br />


    
   The terminating Call Agent sends back a SIP 200 OK response to the 
   originating Call Agent, which in turn sends a SIP ACK (not shown).  
    

   <br />
<br />


   Step 7: 

   <br />
<br />


    
   The originating Call Agent in turns sends a ModifyConnection command 
   to the originating Gateway: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        MDCX 1001 ds/ds1-1/1@gw-o.whatever.net MGCP 1.0
        C: 1
        I: 1
        M: sendrecv

        v=0
        o=- 25678 753849 IN IP4 192.0.2.2
        s=-
        c=IN IP4 192.0.2.2
        t=0 0
        a=pmft: T38
        m=audio 1296 RTP/AVP 18 96 97
        a=rtpmap:96 RED/8000
        a=fmtp:96 97/97
        a=rtpmap:97 PCMU/8000
        a=gpmd:97 vbd=yes
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cdsc: 4 image udptl t38


</pre></div><p>
 

   The ModifyConnection command does not repeat the LocalConnectionOptions sent 
   previously.  As far as fax handling is concerned, the Gateway therefore 
   attempts to continue using the current fax handling procedure, i.e. strict 
   Call Agent controlled T.38.  Since the capability information indicates the 
   other side supports T.38, the Gateway will in fact be able to use the strict 
   Call Agent controlled T.38 procedure.  Since the RemoteConnectionDescriptor 
   indicates the other side supports V.152 and redundancy, the Gateway will in 
   fact be able to use the V.152 VBD procedure with redundancy.

   <br />
<br />


     
   Step 8: 

   <br />
<br />


    
   The Gateway acknowledges the command.  At this point, a call is established 
   using G.729 encoding, and if a fax call is detected, the Call Agent 
   controlled T.38 procedure will be initiated. If a modem or text call is 
   detected, the V.152 VBD procedure will be initiated. 
    

   <br />
<br />


   Step 9-10: 

   <br />
<br />


        
   The terminating Gateway detects the T.30 CED tone (a.k.a. V.25 ANS). Since 
   both fax and modem calls can start with this sequence, it is not possible to 
   determine that this is a fax call until step 14, where the V.21 fax preamble 
   is detected. The terminating Gateway begins transmitting RTP packets with the 
   negotiated redundant VBD payload type (96).


   <br />
<br />


   The "gwvbd(start)" event occurs and is notified to the Call Agent: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 2500 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        O: vbd/gwvbd(start, rc=ANS, codec=audio/RED, coord=v152ptsw)
        X: 20


</pre></div><p>
 

   Step 11: 

   <br />
<br />


    
   The Call Agent acknowledges the Notify command: 
    
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 2500 OK


</pre></div><p>
 


   Step 12: 

   <br />
<br />


     
   Upon receiving a RTP packet with the redundant VBD payload type (96), the 
   originating Gateway begins transmitting RTP packets with the redundant VBD 
   payload type.

   <br />
<br />



   The "gwvbd(start)" event occurs and is notified to the Call Agent: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 1500 ds/ds1-1/1@gw-o.whatever.net MGCP 1.0
        O: vbd/gwvbd(start, rc=PTSW, codec=audio/RED)
        X: 1


</pre></div><p>
 

    
   Step 13:

   <br />
<br />



   The Call Agent acknowledges the Notify command: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 1500 OK


</pre></div><p>
 


   Step 14 - 15:

   <br />
<br />



   The terminating Gateway detects the V.21 fax preamble.

   <br />
<br />


 
   The terminating Gateway is using the Call Agent controlled T.38 strict
   procedure for fax calls, so the "t38(start)" event occurs: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        NTFY 2500 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        O: fxr/t38(start)
        X: 20


</pre></div><p>
 

   Step 16: 

   <br />
<br />


    
   The Call Agent acknowledges the Notify command: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 2500 OK


</pre></div><p>
 

   Step 17: 

   <br />
<br />


    
   The Call Agent then instructs the terminating Gateway to change to using the 
   "image/t38" MIME type instead: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        MDCX 2002 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        C: 2
        I: 2
        L: a:image/t38
        R: fxr/t38
        X: 21


</pre></div><p>
 

    
   Note that the Call Agent is no longer requesting notification of the "gwvbd" 
   event.

   <br />
<br />



   Step 18: 

   <br />
<br />


    
   The terminating Gateway sends back a success response with its SDP which also 
   includes the "image/t38" media description: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 2002 OK

        v=0
        o=- 25678 753850 IN IP4 192.0.2.2
        s=-
        c=IN IP4 192.0.2.2
        t=0 0
        m=image 1296 udptl t38
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cpar: a=rtpmap:96 RED/8000
        a=cpar: a=fmtp:96 97/97
        a=cpar: a=rtpmap:97 PCMU/8000
        a=cpar: a=gpmd:97 vbd=yes
        a=cdsc: 4 image udptl t38


</pre></div><p>
 

  
   The gwvbd procedure ends due to the media type change. The "gwvbd(stop)" 
   event would normally be notified at this point, however, the Call Agent is no 
   longer requesting notification of the "gwvbd" event. The Call Agent would 
   have inferred from the "t38(start)" event that the gwvbd procedure ended.

   <br />
<br />



   Step 19:

   <br />
<br />


    
   The terminating Call Agent sends a re-INVITE to the originating Call Agent 
   with the updated SDP.  

   <br />
<br />


    
   Step 20: 

   <br />
<br />


    
   The originating Call Agent then sends a ModifyConnection command to the 
   originating Gateway: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        MDCX 1003 ds/ds1-1/1@gw-o.whatever.net MGCP 1.0
        C: 1
        I: 1
        R: fxr/t38
        X: 2

        v=0
        o=- 25678 753850 IN IP4 192.0.2.2
        s=-
        c=IN IP4 192.0.2.2
        t=0 0
        m=image 1296 udptl t38
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cpar: a=rtpmap:96 RED/8000
        a=cpar: a=fmtp:96 97/97
        a=cpar: a=rtpmap:97 PCMU/8000
        a=cpar: a=gpmd:97 vbd=yes
        a=cdsc: 4 image udptl t38


</pre></div><p>
 

   Step 21: 

   <br />
<br />


    
   The originating Gateway changes to T.38 and sends back a success response 
   with updated SDP: 
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        200 1003 OK

        v=0
        o=- 25678 753850 IN IP4 192.0.2.1
        s=-
        c=IN IP4 192.0.2.1
        t=0 0
        m=image 3456 udptl t38
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cpar: a=rtpmap:96 RED/8000
        a=cpar: a=fmtp:96 97/97
        a=cpar: a=rtpmap:97 PCMU/8000
        a=cpar: a=gpmd:97 vbd=yes
        a=cdsc: 4 image udptl t38


</pre></div><p>
 


   Again, the gwvbd procedure ends due to the media type change. The
   "gwvbd(stop)" event would normally be notified at this point, however, the 
   Call Agent is no longer requesting notification of the "gwvbd" event.

   <br />
<br />



   Step 22:

   <br />
<br />



   The originating Call Agent sends a SIP 200 OK response with the updated SDP 
   to the terminating Call Agent, which in turn sends a SIP ACK (not shown).

   <br />
<br />



   Step 23:

   <br />
<br />



   The terminating Call Agent sends a ModifyConnection with the updated SDP to 
   the terminating Gateway:

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        MDCX 2002 ds/ds1-1/2@gw-t.whatever.net MGCP 1.0
        C: 2
        I: 2

        v=0
        o=- 25678 753850 IN IP4 192.0.2.1
        s=-
        c=IN IP4 192.0.2.1
        t=0 0
        m=image 3456 udptl t38
        a=sqn: 0
        a=cdsc: 1 audio RTP/AVP 18 96 97
        a=cpar: a=rtpmap:96 RED/8000
        a=cpar: a=fmtp:96 97/97
        a=cpar: a=rtpmap:97 PCMU/8000
        a=cpar: a=gpmd:97 vbd=yes
        a=cdsc: 4 image udptl t38


</pre></div><p>
 

   Step 24 - 29:

   These steps correspond to the Call Agent controlled T.38 strict procedure as
   defined in the MGCP Fax (FXR) package [RFCABCD].

			
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>
   The MGCP VBD package itself is not known to introduce any new security
   concerns.  VBD media is transported over RTP.  If security services are in 
   place to protect RTP media streams, these will also be in effect for the VBD 
   media stream.

   <br />
<br />



   The MGCP GPMD package does not require any further security considerations 
   beyond those indicated in MGCP [RFC3435].
		
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>
   The IANA is hereby requested to register the following MGCP packages,

			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      Package Title                               Name     Version
      -------------                               ----     -------
      Voiceband Data                              VBD      0
      General-Purpose Media Descriptor Parameter  GPMD     0


</pre></div><p>
 

   and the following LocalConnectionOption,
			</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      Field                                      Name
      -------                                    ----
      General-Purpose Media Descriptor Parameter gpmd


</pre></div><p>
 


		
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgements</h3>

<p>
   Several people have contributed to the development of the MGCP VBD and GPMD 
   packages and the use of the MIME subtypes "RED" and "parityfec" with the FM 
   package for VBD with redundancy and FEC. In particular, the authors would 
   like to thank Flemming Andreasen, John Atkinson, Bill Foster and the
   CableLabs PacketCable TGCP/NCS focus team for their contributions.

</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Summary of Changes</h3>

<p>
   
 Changes in 01:

   <br />
<br />


* Number of formatting corrections (mainly to remove extra blank lines)

   <br />
<br />


* Updated a number of internal section references (these were off by one due to addition of new section 2 Terminology as part of initial version 00 submission)

   <br />
<br />


* In section 3.1.2, corrected Start VBD to VBD Start

   <br />
<br />


   * In section 4.1.1, added text to clarify that the first instance is assumed in the absence of &lt;order&gt;

		
</p>
<p>
   
 Changes in 02:

   <br />
<br />


* Fix errors, warnings and comments reported by ID nits

		
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="H1501A1">[H1501A1]</a></td>
<td class="author-text">International Telecommunications Union - Telecommunication Standardization Sector, &ldquo;ITU-T Recommendation V.150.1 Amendment 1, "Modem-over-IP networks: Procedures for the end-to-end connection of V-series DCEs, Amendment 1: Modification to SSE reason identifier codes to support voice band data and text relay",,&rdquo; Jan&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="H2482">[H2482]</a></td>
<td class="author-text">International Telecommunications Union - Telecommunication Standardization Sector, &ldquo;ITU-T Recommendation H.248.2, "Gateway control protocol: Facsimile, text conversation and call discrimination packages",&rdquo; Nov&nbsp;2000.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2198">[RFC2198]</a></td>
<td class="author-text"><a href="mailto:c.perkins@cs.ucl.ac.uk">Perkins, C.</a>, <a href="mailto:i.kouvelas@cs.ucl.ac.uk">Kouvelas, I.</a>, <a href="mailto:o.hodson@cs.ucl.ac.uk">Hodson, O.</a>, <a href="mailto:v.hardman@cs.ucl.ac.uk">Hardman, V.</a>, <a href="mailto:mjh@isi.edu">Handley, M.</a>, <a href="mailto:bolot@sophia.inria.fr">Bolot, J.</a>, <a href="mailto:avega@sophia.inria.fr">Vega-Garcia, A.</a>, and <a href="mailto:sfosse@sophia.inria.fr">S. Fosse-Parisis</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2198">RTP Payload for Redundant Audio Data</a>,&rdquo; RFC&nbsp;2198, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2198.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2198.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2198.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2733">[RFC2733]</a></td>
<td class="author-text"><a href="mailto:jdrosen@dynamicsoft.com">Rosenberg, J.</a> and <a href="mailto:schulzrinne@cs.columbia.edu">H. Schulzrinne</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2733">An RTP Payload Format for Generic Forward Error Correction</a>,&rdquo; RFC&nbsp;2733, December&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2733.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3407">[RFC3407]</a></td>
<td class="author-text">Andreasen, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3407">Session Description Protocol (SDP) Simple Capability Declaration</a>,&rdquo; RFC&nbsp;3407, October&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3407.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3435">[RFC3435]</a></td>
<td class="author-text">Andreasen, F. and B. Foster, &ldquo;<a href="http://tools.ietf.org/html/rfc3435">Media Gateway Control Protocol (MGCP) Version 1.0</a>,&rdquo; RFC&nbsp;3435, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3435.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3660">[RFC3660]</a></td>
<td class="author-text">Foster, B. and F. Andreasen, &ldquo;<a href="http://tools.ietf.org/html/rfc3660">Basic Media Gateway Control Protocol (MGCP) Packages</a>,&rdquo; RFC&nbsp;3660, December&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3660.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4234">[RFC4234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@bbiw.net">Crocker, D., Ed.</a> and <a href="mailto:paul.overell@thus.net">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; RFC&nbsp;4234, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4234.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4234.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4234.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4733">[RFC4733]</a></td>
<td class="author-text">Schulzrinne, H. and T. Taylor, &ldquo;<a href="http://tools.ietf.org/html/rfc4733">RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals</a>,&rdquo; RFC&nbsp;4733, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4733.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4734">[RFC4734]</a></td>
<td class="author-text">Schulzrinne, H. and T. Taylor, &ldquo;<a href="http://tools.ietf.org/html/rfc4734">Definition of Events for Modem, Fax, and Text Telephony Signals</a>,&rdquo; RFC&nbsp;4734, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4734.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFCABCD">[RFCABCD]</a></td>
<td class="author-text">Andreasen, F., &ldquo;<a href="http://tools.ietf.org/html/rfc">Media Gateway Control Protocol Fax Package</a>,&rdquo; RFC&nbsp;ABCD (<a href="http://www.ietf.org/internet-drafts/draft-andreasen-mgcp-fax-06.txt">TXT</a>).<p>
Editor's Note: Please replace all references to ABCD with the RFC number of I-D draft-andreasen-mgcp-fax when it gets accepted
</p>
</td></tr>
<tr><td class="author-text" valign="top"><a name="V1501">[V1501]</a></td>
<td class="author-text">International Telecommunications Union - Telecommunication Standardization Sector, &ldquo;ITU-T Recommendation V.150.1, "Modem-over-IP networks: Procedures for the end-to-end connection of V-series DCEs",&rdquo; Jan&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="V152">[V152]</a></td>
<td class="author-text">International Telecommunications Union - Telecommunication Standardization Sector, &ldquo;ITU-T Recommendation V.152, "Procedures for supporting Voice-Band Data over IP Networks",&rdquo; Jan&nbsp;2005.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="T38">[T38]</a></td>
<td class="author-text">International Telecommunications Union - Telecommunication Standardization Sector, &ldquo;ITU-T Recommendation T.38, "Procedures for real-time Group 3 facsimile communication over IP networks",,&rdquo; April&nbsp;2004.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sandeep Sharma (Editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CableLabs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">858 Coal Creek Circle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louisville, Co  80027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:s.sharma@cablelabs.com">s.sharma@cablelabs.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cablelabs.com/">http://www.cablelabs.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Joe Stone</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2200 East President George Bush Highway</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richardson, Tx  75082</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:joestone@cisco.com">joestone@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cisco.com/">http://www.cisco.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rajesh Kumar</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">771 Alder Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Milpitas, CA  75082</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rkumar@cisco.com">rkumar@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cisco.com/">http://www.cisco.com/</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
