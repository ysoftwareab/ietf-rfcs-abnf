IETF URI Working Group                                        R. Denenberg
Internet-Draft                                                    J. Kunze
draft-ietf-uri-url-irp-02.txt                                    B. McLean
23 March 1995                                                      Editors


                  Uniform Resource Locators for Z39.50


1. Status of this Document

This document is an Internet-Draft.  Internet-Drafts are working documents
of the Internet Engineering Task Force (IETF), its Areas, and its Working
Groups.  Note that other groups may also distribute working documents as
Internet-Drafts.

Internet-Drafts are working documents valid for a maximum of six months.
Internet-Drafts may be updated, replaced, or obsoleted by other documents
at any time.  It is not appropriate to use Internet-Drafts as reference
material or to cite them other than as a ``working draft' or ``work in
progress.''

To learn the current status of any Internet-Draft, please check the
1id-abstracts.txt listing contained in the Internet-Drafts Shadow
Directories on ds.internic.net, nic.nordu.net, ftp.isi.edu, or
munnari.oz.au.

Distribution of this document is unlimited.  Please send comments to
jak@violet.berkeley.edu, or to the discussion lists uri@bunyip.com and
z3950iw@nervm.nerdc.ufl.edu.


2. Introduction

Z39.50 is an information retrieval protocol that does not fit neatly into
a retrieval model designed primarily around the stateless fetch of data.
Instead, it models a general user inquery as a session-oriented, multi-
step task, any step of which may be suspended temporarily while the
server requests additional parameters from the client before continuing.
Some, none, or all of these client/server interactions may require
participation of the client user, depending only on the client software
(the protocol itself makes no such requirements).

On the other hand, retrieval of "well-known" data may be performed in
a single step, that is, with a degenerate Z39.50 session consisting of
exactly one protocol search request and response.  Besides the basic
search sub-service, there are several ancillary sub-services (e.g., Scan,
Result Set Delete).  Among the functions covered by combinations of the
sub-services, two core functions emerge as appropriately handled by two
separate URL schemes:  the Session URL and the Retrieval URL.

Using two schemes instead of one makes a critical distinction between
a Z39.50 Session URL, which opens a client session -- leaving the user
to close it -- and a Z39.50 Retrieval URL, which opens and closes a client
session, then displays any retrieved results.  Making this distinction at
the scheme level allows the user interface to reflect it on to the user,
but without actually requiring the user display formatter to parse
otherwise opaque parts of the URL (consistent with current practice).


3. The Z39.50 Session URL

The Z39.50 Session and Retrieval URLs follow the Common Internet Scheme
Syntax as defined in RFC 1738, "Uniform Resource Locators (URL)" [1].
The specific syntax for the Session URL is:

	z39.50s://host[:port]
		[/database[+database...]
			[?[docid]
				[;esn=elementset]
				[;rs=recordsyntax[+recordsyntax...]]]]

This may be informally described as providing the mechanism to switch
the user of the browser to a window in which a Z39.50 client is running.

   -  Host is required.
   -  Port is optional, and defaults to 210.
   -  All other parameters are optional, however, if docid is present,
      then database must be present.
   -  The Z39.50 client will start a session to the specified host/port
      (alternatively, it need not explicitly start a session, but may
      instead utilize an already open session to the same host/port).
   -  If docid is included, the client will perform the specified search
      (in the same manner as for the retrieval URL, specified below).
   -  If docid is not included, and other parameters (besides host/port)
      are specified, the client may use those parameters as "hints".
      Various clients may choose to treat them as requirements, or as
      preferences, or ignore them.
   -  In any case (whether a search is performed or not), the client will
      leave the Z39.50 session open for the user, to do retrievals, new
      searches, etc.  This is the main distinction from the z39.50r URL.


4. The Z39.50 Retrieval URL

The specific syntax for the Retrieval URL is:

	z39.50r://host[:port]
		[/database[+database...]
			[?docid
				[;esn=elementset]
				[;rs=recordsyntax[+recordsyntax...]]]]

The model is designed for minimal interaction by the user with the Z39.50
session to be used as a transparent transfer mechanism if possible.  The
result of processing this URL should be a Result Set, which the client is
responsible for returning to the user's browser in an appropriate form
(e.g., HTML).

   -  Host, database, and docid are all required.
   -  The docid is server-defined and otherwise opaque.
   -  Port is optional, and defaults to 210.
   -  If element set name (esn) is not specified, it is client's choice.
      If esn is specified, it should be used either within the Search
      request for the value of small- and/or medium- set-element-set-names
      or within a Present request following a Search.  These terms and their
      use are defined within the Z39.50 Standard [2].
   -  If record syntax (rs) is not specified, it is client's choice.  If one
      or more record syntaxes are specified, the client should select one
      (preferably the first in the list that it supports) and use it within
      a Search or Present request as the value of PreferredRecordSyntax.
   -  The docid is placed into a type-1 query, as the single term, in
      the general format (tag 45), using the Bib-1 attribute set, with
      a Use attribute value of docid, and a structure attribute of URX.
      The docid string is completely opaque to the client.

Future extensions to these URLs will be of the form of [;keyword=value].


5. Security Considerations

The two Z39.50 URL schemes are subject to the same security implications
as the general URL scheme [1], so the usual precautions apply.  This means,
for example, that a locator might no longer point to the object that was
originally intended.  It also means that it may be possible to construct
a URL so that an attempt to perform a harmless idempotent operation such
as the retrieval of an object will in fact cause a possibly damaging
remote operation to occur.


6. Acknowledgements

The Z39.50 Implementors Group contributed the substance of this document.


7. References

   [1] Berners-Lee, T., Masinter, L., McCahill, M. (editors), "Uniform
       Resource Locators (URL)", soon to be RFC 1738, October 1994.
       ftp://ds.internic.net/rfc/rfc1738.txt

   [2] ANSI/NISO Z39.50-1994, "ANSI Z39.50:  Information Retrieval Service
       and Protocol", 1994.  ftp://ftp.loc.gov/pub/z3950/

   [3] ANSI/NISO Z39.50-1992, "ANSI Z39.50:  Information Retrieval Service
       and Protocol", 1992.
       ftp://ftp.cni.org/pub/NISO/docs/Z39.50-1992/www/Z39.50.toc.html
       (also available in hard copy from Omnicom Information Service,
       115 Park St., SE, Vienna, VA  22180).


7. Editors' Addresses

Ray Denenberg
Library of Congress
Collections Services
Network Development/MSO
Washington DC 20540
ray@rden.loc.gov
Voice: (202) 707-5795
Fax:   (202) 707-0115

John A. Kunze
Information Systems and Technology
University of California at Berkeley
293 Evans Hall
Berkeley, CA  94720
jak@violet.berkeley.edu
Voice: (510) 642-1530
Fax:   (510) 643-5385

Bradley McLean
Gaylord Information Systems
7272 Morgan Rd.
Liverpool, NY  13088
brad@bradpc.gaylord.com
Voice: (315) 457-5070
Fax:   (800) 272-3412
