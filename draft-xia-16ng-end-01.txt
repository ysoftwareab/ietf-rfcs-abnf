


Network Working Group                                             F. Xia
Internet-Draft                                               B. Sarikaya
Intended status: Standards Track                              Huawei USA
Expires: June 4, 2007                                           Dec 2006


    Duplicate Address Detection Optimization Using Enhanced Neighbor
                               Discovery
                         draft-xia-16ng-end-01

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 4, 2007.

Copyright Notice

   Copyright (C) The IETF Trust (2006).













Xia & Sarikaya            Expires June 4, 2007                  [Page 1]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


Abstract

   This draft describes a possible optimization to Duplicate Address
   Detection (DAD) which can be used to successfully terminate DAD
   early.  The method is based on a positive RA message sent by an
   Neighbor Discovery Relay Agent that knows all the IPv6 addresses of
   the nodes currently attached to it.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.  Scenario of Enhanced Neighbor Discovery  . . . . . . . . . . .  4
     3.1.  Address cache  . . . . . . . . . . . . . . . . . . . . . .  4
     3.2.  Enhanced Relay DAD procedure . . . . . . . . . . . . . . .  4
     3.3.  Available Address option . . . . . . . . . . . . . . . . .  5
     3.4.  Timing Analysis  . . . . . . . . . . . . . . . . . . . . .  6
   4.  Security Considerations  . . . . . . . . . . . . . . . . . . .  7
   5.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  8
     5.1.  Normative References . . . . . . . . . . . . . . . . . . .  8
     5.2.  Informative References . . . . . . . . . . . . . . . . . .  8
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  9
   Intellectual Property and Copyright Statements . . . . . . . . . . 10



























Xia & Sarikaya            Expires June 4, 2007                  [Page 2]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


1.  Introduction

   IPv6 nodes can statelessly auto configure their own IP addresses on a
   network, based on the information sent by the IPv6 router of that
   network.  When a node wishes to create a new address on an interface,
   it combines the network prefix obtained from the router with a suffix
   generated from its 64-bit Interface Identifier.  This new untested
   address is referred to as a Tentative Address (TA).  The node joins
   the appropriate solicited-node multicast group for this address, then
   sends a Neighbor Solicitation (NS) message containing the TA.  If the
   TA is already in use by another node, that node will reply with a
   Neighbor Advertisement (NA) defending the TA.

   Once it has sent the NS, the node waits for RetransTimer [DISCOVERY]
   milliseconds to see if a defending NA is forthcoming, and this
   solicit-and-wait process is repeated DupAddrDetectTransmits
   [DISCOVERY] times.  The default value of RetransTimer is 1000ms and
   by default the process is only done once, resulting a delay of 1000ms
   or 1s.

   This procedure provides a reasonable approach to checking address
   uniqueness in situations such as fixed installation, or even mobile
   web-browsing where 1s is not a significant delay.  However, it is not
   tolerable for some time-critical mobile applications like Voice Over
   IP (VoIP).


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14 [STANDARDS].

   SS - Subscriber Station (SS)

   ND Relay Agent - A function entity which all SSs attach to.  It
   maintains authoritative information about SSs' IPv6 addresses.

   END - Enhanced Neighbor Discovery












Xia & Sarikaya            Expires June 4, 2007                  [Page 3]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


3.  Scenario of Enhanced Neighbor Discovery

   In WiMAX architecture, A Bridge function entity is introduced in the
   Ethernet CS environment as per [EthernetCS].  The bridge acts as a ND
   Relay Agent.  The ND Relay Agent knows all the IPv6 addresses of the
   nodes currently attached to it.

3.1.  Address cache

   Address Cache is a conceptual data structure managed by an ND Relay
   Agent that contains a list of addresses that are being used by the
   SSs.  The cache is authoritative, and how to maintain it is beyond
   the scope of this memo.

3.2.  Enhanced Relay DAD procedure

       +-------+           +---------------+           +-------+
       |  SS1  |           | ND Relay Agent|           |  SS2  |
       +-------+           +---------------+           +-------+
           |                       |                       |
           |IPv6 Address           |                       |
           |Construction           |                       |
      (1)  |------+                |                       |
           |      |                |                       |
           |<-----+                |                       |
           |                       |                       |
           |       MLD Join        |                       |
      (2)  |---------------------->|                       |
           |                       |                       |
           |       DAD NS          |                       |
      (3)  |---------------------->|                       |
           |                       |Addr. Cache Lookup     |
      (4)  |                       |------+                |
           |                       |      |                |
           |                       |<-----+                |
           |          RA           |                       |
      (5)  |<----------------------|                       |
           |                       |                       |
           |                       |       DAD NS          |
      (6)  |                       |---------------------->|
           |                       |                       |
           |       DAD NA          |                       |
      (7)  |<----------------------|<----------------------|
           |                       |                       |
           |                       |                       |

                       Figure 1: Enhanced Relay DAD




Xia & Sarikaya            Expires June 4, 2007                  [Page 4]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


   1.  SS1 constructs an IPv6 Address.  The address can be created as
       per [ADDRCONF], or other alternatives.

   2.  SS1 constructs a solicited node multicast address for the
       corresponding IPv6 Address and sends MLD Join request for the
       solicited node multicast address.

   3.  SS1 starts verifying address uniqueness by sending a DAD NS.

   4.  ND Relay Agent looks into the authoritative address cache to
       check if the address is already in use.  If the address is not in
       use then step 5, else step 6.

   5.  The ND Relay Agent sends a RA with an Available Address option to
       indicate the uniqueness of the detected address.  The detail
       information about the new option is described later.  On
       receiving the positive RA, SS1 uses the address right now and
       stops the DAD procedure.

   6.  ND Relay Agent relays the DAD NS to the address owner (SS2) in
       case there is match in the address cache.

   7.  SS2 defends the address by sending DAD NA, which is relayed to
       SS1 via the ND Relay Agent.  Upon on receiving the DAD NA, it
       discards the tentative address and behaves as specified in
       [ADDRCONF]

3.3.  Available Address option

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |     Type      |    Length     |P|        Reserved1            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           Reserved2                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       +                                                               +
       |                                                               |
       +                  IPv6 Address                                 +
       |                                                               |
       +                                                               +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Figure 2: Available Address option

   Fields:



Xia & Sarikaya            Expires June 4, 2007                  [Page 5]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


   Type: TBD.

   Length: 3, in units of 8 octets.

   P: 1 bit.  When set, indicates the uniqueness of IPv6 address carried
   in the option.  When not set, the option should be ignored.

   Reserved1: 15-bit unused field.  It MUST be initialized to zero by
   the sender and MUST be ignored by the receiver.

   Reserved2: 32-bit unused field.  It MUST be initialized to zero by
   the sender and MUST be ignored by the receiver.

   IPv6 Address: Available IPv6 address.

3.4.  Timing Analysis

   In normal DAD, the process defined in [DISCOVERY] and [ADDRCONF],
   takes DupAddrDetectTransmits*RetransTimer before the SS can start
   using the address.  In Optimistic DAD process [OPTDAD], as soon as an
   address is configured on an interface, the address can be used.  That
   is, it takes 0 ms to use a tentative address with the risk of address
   collision.

   In case of END described in this memo, it takes a NS and RA round
   trip time so that an address can be determined unique in most cases.
   The round trip duration is much less than
   DupAddrDetectTransmits*RetransTimer.

   If END and [OPTDAD] are enabled, the SS will benefit from both the
   reliability and time advantages.




















Xia & Sarikaya            Expires June 4, 2007                  [Page 6]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


4.  Security Considerations

   There are existing security concerns with Neighbor Discovery and
   Stateless Address Auto configuration.  Secure Neighbor Discovery
   (SEND) [SEND] provides protection against the threats to Neighbor
   Discovery described in [NDTM].  This memo does not introduce any
   additional threats to Neighbor Discovery.

   In Relay DAD, ND Relay Agents relay NS and NA between SSs without
   modifying any contents of messages.  The target address in Neighbor
   Advertisement and in solicited Router Advertisement is equal to the
   source address of the packet.

   SS can use CGAs for it's own address as defined [SEND].  SS can also
   use Authorization Delegation Discovery [SEND] to find an authorized
   ND Relay Agent.



































Xia & Sarikaya            Expires June 4, 2007                  [Page 7]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


5.  References

5.1.  Normative References

   [ADDRCONF]
              Thomson, S. and T. Narten, "IPv6 Stateless Address
              Autoconfiguration", RFC 2462, December 1998,
              <ftp://ftp.isi.edu/in-notes/rfc2462>.

   [DISCOVERY]
              Narten, T., Nordmark, E., and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461,
              December 1998, <ftp://ftp.isi.edu/in-notes/rfc2461>.

   [MLD]      Vida, R., Costa, L., and B. Haberman, "Multicast Listener
              Discovery for IPv6", RFC 3810, June 2004,
              <ftp://ftp.isi.edu/in-notes/rfc3810>.

   [NDTM]     Nikander, P., Kempf, J., and E.  Nordmark, "IPv6 Neighbor
              Discovery (ND) Trust Models and Threats", RFC 3756,
              May 2004, <ftp://ftp.isi.edu/in-notes/rfc3756 >.

   [OPTDAD]   Moore, N., "Optimistic Duplicate Address Detection (DAD)
              for IPv6", RFC 4429, April 2006,
              <ftp://ftp.isi.edu/in-notes/rfc4429>.

   [PESAA]    Narten, T. and R. Draves, "Privacy Extensions for
              Stateless Address Autoconfiguration in IPv6", RFC 3041,
              January 2001, <ftp://ftp.isi.edu/in-notes/rfc3041>.

   [SEND]     Arkko, J., Kempf, J., Zill, B., and P. Nikander, "Secure
              Neighbor Discovery (SEND)", RFC 3971, March 2005,
              <ftp://ftp.isi.edu/in-notes/rfc3971>.

   [STANDARDS]
              Bradner, S., "Key words for use in RFCs to Indicate
              Requirement  Levels", RFC 2119, March 1997,
              <ftp://ftp.isi.edu/in-notes/rfc2119>.

5.2.  Informative References

   [EthernetCS]
              Jeon, H., Riegel, M., and S. Jeong, "Transmission of IP
              Packets over Ethernet over IEEE 802.16", Oct 2006, <http:/
              /www.watersprings.org/pub/id/
              draft-riegel-16ng-ip-over-eth-over-80216-01.txt(work in
              progress)>.




Xia & Sarikaya            Expires June 4, 2007                  [Page 8]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


Authors' Addresses

   Frank Xia
   Huawei USA
   1700 Alma Dr. Suite 100
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: xiayangsong@huawei.com


   Behcet Sarikaya
   Huawei USA
   1700 Alma Dr. Suite 100
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: sarikaya@ieee.org

































Xia & Sarikaya            Expires June 4, 2007                  [Page 9]

Internet-Draft         Enhanced Neighbor Discovery              Dec 2006


Full Copyright Statement

   Copyright (C) The IETF Trust (2006).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Xia & Sarikaya            Expires June 4, 2007                 [Page 10]


