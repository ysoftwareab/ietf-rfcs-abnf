IETF                                                             S. Brim
Internet Draft                                              B. Carpenter
April 1999

                 Per Hop Behavior Identification Codes

                             Copyright Notice

                      Placeholder for ISOC copyright.

                                 Abstract

                     draft-brim-diffserv-phbid-00.txt

   This document defines a 16 bit encoding mechanism for the identification
    of differentiated services Per Hop Behaviors in protocol messages.

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Brim + Carpenter         Expires October 1999                   [Page 1]

Internet Draft Connection of IPv6 Domains via IPv4 Clouds       Apr 1999

   Table of Contents:

      Status of this Memo.............................................1
      1. Introduction.................................................3
      2. Encoding.....................................................3
      3. IANA Considerations..........................................4
      4. Security considerations......................................5
      Acknowledgements................................................5
      References......................................................5
      Authors' Addresses..............................................5
      Intellectual Property...........................................6
      Full Copyright Statement........................................6

Brim + Carpenter         Expires October 1999                   [Page 2]

Internet Draft Connection of IPv6 Domains via IPv4 Clouds       Apr 1999

1. Introduction

   Differentiated Services [RFC 2474, RFC 2475] introduces the notion of
   Per Hop Behaviors (PHBs) that define how traffic belonging to a
   particular behavior aggregate is treated at an individual network
   node. In IP packet headers, PHBs are not indicated as such; instead
   Differentiated Services Codepoint (DSCP) values are used. There are
   only 64 possible DSCP values, but there is no such limit on the
   number of PHBs. In a given network domain, there is a locally defined
   mapping between DSCP values and PHBs. Standardized PHBs recommend a
   DSCP mapping, but network operators may choose alternative mappings.

   In some cases it is necessary or desirable to identify a particular
   PHB in a protocol message, such as a message negotiating bandwidth
   management or path selection. Examples where work is in progress
   include communication between bandwidth brokers, and MPLS support of
   diffserv.

   In certain cases, what needs to be identified is not an individual
   PHB, but a set of PHBs. One example is a set of PHBs that must follow
   the same physical path to prevent re-ordering.  An instance of this
   is the set of three PHBs belonging to a single Assured Forwarding
   class, such as the PHBs AF11, AF12 and AF13 [Assured].

   This document defines a binary encoding to uniquely identify PHBs
   and/or sets of PHBs in protocol messages. This encoding MUST be used
   when such identification is required.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

2. Encoding

   PHBs and sets of PHBs are encoded in an unsigned 16 bit binary field,
   using the same encoding. It is determined by context whether the
   encoding represents a PHB or a set of PHBs.

   The 16 bit field is arranged as follows:

   Case 1: PHBs defined by standards action, as per [RFC 2474].

   The encoding for a single PHB is the recommended DSCP value for that
   PHB, left-justified in the 16 bit field, with bits 6 through 15 set
   to zero.  Note that the recommended DSCP value MUST be used, even if
   the network in question has chosen a different mapping.

   The encoding for a set of PHBs is the numerically smallest of the set
   of encodings for the various PHBs in the set. (Thus for the AF1x
   PHBs, the encoding is that of the AF11 PHB.)

Brim + Carpenter         Expires October 1999                   [Page 3]

Internet Draft Connection of IPv6 Domains via IPv4 Clouds       Apr 1999

         0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
       |         DSCP          | 0   0   0   0   0   0   0   0   0   0 |
       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

   Case 2: PHBs not defined by standards action, i.e. experimental or
   local use PHBs as allowed by [RFC 2474]. In this case an arbitrary 12
   bit PHB identification code, assigned by the IANA, is placed left-
   justified in the 16 bit field, and bits 12 through 15 contain the
   value 0x1.

   A set of non-standard PHBs is identified by a single PHB
   identification code.

         0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
       |                      PHB id code              | 0   0   0   1 |
       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

   Bits 12 through 14 are reserved either for expansion of the PHB
   identification code, or for other use such as distinguishing PHB
   groups from individual PHBs, at some point in the future.

3. IANA Considerations

   IANA is requested to create a new assignment registry for "Per-Hop
   Behavior Identification Codes", initially allowing values in the
   range 0 to 4095 decimal.

   Assignment of values in this field require:

     -the identity of the assignee
     -a brief description of the new PHB, with enough detail to
      distinguish it from existing standardized and non-standardized
      PHBs. In the case of a set of PHBs, this description should cover
      all PHBs in the set.
     -a reference to a stable document describing the PHB in detail.

   During the first year of existence of this registry, IANA is
   requested to refer all requests to the IETF diffserv WG for review.
   Subsequently, requests should be reviewed by the IETF Transport Area
   Directors or by an expert that they designate.

   If the number of assignments begins to approach 4096, the Transport
   Area Directors should be alerted.

Brim + Carpenter         Expires October 1999                   [Page 4]

Internet Draft Connection of IPv6 Domains via IPv4 Clouds       Apr 1999

4. Security considerations

   This encoding in itself raises no security issues. However, users of
   this encoding should consider that modifying a PHB identification
   code may constitute theft or denial of service, so protocols using
   this encoding must be adequately protected.

Acknowledgements

   Useful comments were made by Francois Le Faucheur and others.

References

   [RFC 2119] Key words for use in RFCs to Indicate Requirement Levels,
   S. Bradner, RFC 2119, March 1997.

   [RFC 2474] Definition of the Differentiated Services Field (DS Field)
   in the IPv4 and IPv6 Headers. K. Nichols, S. Blake, F. Baker, D.
   Black, RFC 2474, December 1998.

   [RFC 2475] An Architecture for Differentiated Services. S. Blake, D.
   Black, M. Carlson, E. Davies, Z. Wang, W. Weiss, RFC 2475, December
   1998.

   [Assured] Assured Forwarding PHB Group, J. Heinanen, F. Baker, W.
   Weiss, J. Wroclawski, draft-ietf-diffserv-af-06.txt, work in
   progress.

Authors' Addresses

      Scott W. Brim
      146 Honness Lane
      Ithaca, NY 14850
      USA

      E-mail: swb@newbridge.com

      Brian E. Carpenter
      IBM United Kingdom Laboratories
      MP 185, Hursley Park
      Winchester, Hampshire SO21 2JN, UK

      E-mail: brian@hursley.ibm.com

Brim + Carpenter         Expires October 1999                   [Page 5]

Internet Draft Connection of IPv6 Domains via IPv4 Clouds       Apr 1999

Intellectual Property

   PLACEHOLDER for full IETF IPR Statement if needed.

Full Copyright Statement

   PLACEHOLDER for full ISOC copyright Statement if needed.

Brim + Carpenter         Expires October 1999                   [Page 6]
