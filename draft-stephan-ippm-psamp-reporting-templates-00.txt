
Network Working Group                                         E. Stephan
Internet-Draft                                            France Telecom
Expires: September 2, 2006                                     E. Moreau
                                                              QoSmetrics
                                                              March 2006


               2006IPFIX templates for common ISP usages
          draft-stephan-ippm-psamp-reporting-templates-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 2, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   Packets observations and active measurement provide raw measures for
   composition of metrics.  In this context, this memo proposes to
   standardize a set of IPFIX templates to facilitate the exchange of
   measurements information and the composition of metrics between ISP .






Stephan & Moreau        Expires September 2, 2006               [Page 1]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Motivations for common templates definitions  . . . . . . . . . 3
     2.1.  Collecting packet information . . . . . . . . . . . . . . . 3
     2.2.  Collecting measurement information  . . . . . . . . . . . . 3
     2.3.  Interdomain composition of metrics  . . . . . . . . . . . . 3
   3.  Template for exporting measurement information  . . . . . . . . 4
     3.1.  Exporting measurement information . . . . . . . . . . . . . 4
     3.2.  Exporting packet information for delay measurements . . . . 5
   4.  Fields ID to add in the info model  . . . . . . . . . . . . . . 5
     4.1.  Common measurement Field  . . . . . . . . . . . . . . . . . 5
       4.1.1.  metric ID . . . . . . . . . . . . . . . . . . . . . . . 5
       4.1.2.  ClockSynchronization  . . . . . . . . . . . . . . . . . 5
     4.2.  traceroute  . . . . . . . . . . . . . . . . . . . . . . . . 5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . . . 5
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 5
     6.1.  Normative References  . . . . . . . . . . . . . . . . . . . 5
     6.2.  Informative References  . . . . . . . . . . . . . . . . . . 6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 8
   Intellectual Property and Copyright Statements  . . . . . . . . . . 9






























Stephan & Moreau        Expires September 2, 2006               [Page 2]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


1.  Introduction

   Packets observations and active measurement provides raw measures for
   composition of metrics.  In this context, this memo proposes to
   standardize a set of IPFIX templates to facilitate the exchange
   measurements information and the composition of metrics between ISP
   ..

   The content of this memo is built on notions introduced and discussed
   in documents of the WG IPFIX, PSAMP and IPPM.  The reader should be
   familiar with these documents.


2.  Motivations for common templates definitions

   Netflow is massively deployed by ISP.  Consequently the potential of
   usage of IPFIX in the context of an ISP is very large.  As PSAMP make
   use of IPFIX and provides IPPM likre one way measure it makes sense
   to define common template to export raw measuremetn results.

2.1.  Collecting packet information

   PSAMP WG defines capabilities to sample packets in a way to support
   measurement.

   [I-D.boschi-export-perpktinfo] defines a method to collect packets
   information to measure instantaneous one-way delays without injecting
   test traffic.  It gives some direction to export packet information
   using IPFIX but does not define the templates needed to collect
   packets information.

2.2.  Collecting measurement information

   Measurement systems produce on the fly results at a rate that make
   them impossible to be polled.  One solution consists in using IPFIX
   to export measures results and statistics.

   To export such information in an interoperability way it is necessary
   to use standard templates.  Moreover it is possible to define common
   templates for active and passive techniques.  The benefit is to
   permit the collection of measurement information independently of the
   technique used while having the information to precisely indicated
   the metric performed.

2.3.  Interdomain composition of metrics

   The IPPM WG is working on the composition of metrics based on 3
   documents:



Stephan & Moreau        Expires September 2, 2006               [Page 3]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


   o  Frameworkfor composition [I-D.ietf-ippm-framework-compagg]

   o  Composition applicability [I-D.ietf-ippm-spatial-composition];

   o  Spatials and multicast metrics [I-D.ietf-ippm-multimetrics].

   o  Add Stan draft here

   Interdomain composition will combine metrics measured by IPPM probes
   using intrusive traffic (active) or by PSAMP meters observing end-
   user traffic (passive) and requires a minimal interoperability:

   o  to identify metrics to compose;

   o  to exchange metrics results;

   o  to exchange measurement contexts.


3.  Template for exporting measurement information

   ISPs need a common solution to export measurement results and
   statistics.  This section defines templates to export measurement
   results and measurement statistics metered either by a passive or an
   active measurement systems.

3.1.  Exporting measurement information

   This section defines template to export measurement results produced
   either using passive or active measure.

   Regarding ISP, the main benefit is to collect measurement information
   independently of the technique used while having the information to
   precisely indicated the metric performed.

   A trivial solution consists in standardizing a single template made
   up of measure parameters and measure results.  Actually such an
   approach repeats the measure parameters in each record.  Consequently
   it is not applicable because it does not benefit of the optimization
   IPFIX offers.

   To avoid this repetition, the proposal defines a Measure Template to
   carry the linkage between the measure parameters and the template
   used to export the measure results.  Practically, the exporter sends
   the Measure Template and a record of Measure Template that carries
   the measure parameters and the template ID of the result template
   which will carry this measurement results.  Then it sends the result
   template and it exports the results of this measure in records of



Stephan & Moreau        Expires September 2, 2006               [Page 4]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


   Result Template.

3.2.  Exporting packet information for delay measurements

   Passive measurement of the delay need to push packets' id and
   packets' observation time to concentrators which compute the delay.
   [I-D.boschi-export-perpktinfo] describes the usage of IPFIX to export
   per-packet information to a collecting process which compute the one-
   way delay.

   Its proposal relies on 2 templates too.  The first one defines the
   linkage between flow information and flow ID.  The second defines the
   results to be exported, the timestamp, the packet ID, the packet
   length and the flow ID.

   the usage of the 2 templates described above optimizes
   PacketPropTemplate size.  The field flowID is no more necessary
   because the result template ID carries the identifier of the flow.


4.  Fields ID to add in the info model

4.1.  Common measurement Field

4.1.1.  metric ID

4.1.2.  ClockSynchronization

4.2.  traceroute


5.  Security Considerations

   Security is a MUST in the context of exchange of information between
   ISP.

   As the security of the exchange relies mostly on the protocol used,
   UDP does not look appropriate to exchange information between ISP.


6.  References

6.1.  Normative References

   [I-D.ietf-ipfix-info]
              Quittek, J., "Information Model for IP Flow Information
              Export", draft-ietf-ipfix-info-11 (work in progress),
              September 2005.



Stephan & Moreau        Expires September 2, 2006               [Page 5]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


   [I-D.ietf-ipfix-protocol]
              Claise, B., "IPFIX Protocol Specification",
              draft-ietf-ipfix-protocol-21 (work in progress),
              April 2006.

   [RFC4148]  Stephan, E., "IP Performance Metrics (IPPM) Metrics
              Registry", BCP 108, RFC 4148, August 2005.

6.2.  Informative References

   [I-D.boschi-export-perpktinfo]
              Boschi, E. and L. Mark, "Use of IPFIX for Export of Per-
              Packet Information", draft-boschi-export-perpktinfo-01
              (work in progress), October 2005.

   [I-D.boschi-ipfix-biflow]
              Boschi, E. and B. Trammell, "Biflow implementation support
              in IPFIX", draft-boschi-ipfix-biflow-01 (work in
              progress), October 2005.

   [I-D.dressler-ipfix-aggregation]
              Dressler, F., "IPFIX Aggregation",
              draft-dressler-ipfix-aggregation-02 (work in progress),
              December 2005.

   [I-D.ietf-ippm-framework-compagg]
              Morton, A. and S. Berghe, "Framework for Metric
              Composition", draft-ietf-ippm-framework-compagg-00 (work
              in progress), February 2006.

   [I-D.ietf-ippm-multimetrics]
              Stephan, E., "IP Performance Metrics (IPPM) for spatial
              and multicast", draft-ietf-ippm-multimetrics-00 (work in
              progress), January 2006.

   [I-D.ietf-ippm-spatial-composition]
              Morton, A. and E. Stephan, "Spatial Composition of
              Metrics", draft-ietf-ippm-spatial-composition-00 (work in
              progress), February 2006.

   [I-D.quittek-ipfix-middlebox]
              Quittek, J., "Guidelines for IPFIX Implementations on
              Middleboxes", draft-quittek-ipfix-middlebox-00 (work in
              progress), February 2004.

   [NETFLOW_FMT]
              Cisco, "Netflow format".




Stephan & Moreau        Expires September 2, 2006               [Page 6]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


   [RFC2330]  Paxson, V., Almes, G., Mahdavi, J., and M. Mathis,
              "Framework for IP Performance Metrics", RFC 2330,
              May 1998.

   [RFC2679]  Almes, G., Kalidindi, S., and M. Zekauskas, "A One-way
              Delay Metric for IPPM", RFC 2679, September 1999.













































Stephan & Moreau        Expires September 2, 2006               [Page 7]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


Authors' Addresses

   Stephan Emile
   France Telecom division R&D
   2 avenue Pierre Marzin
   Lannion,   F-22307

   Fax:   +33 2 96 05 18 52
   Email: emile.stephan@francetelecom.com


   Moreau Eric
   QoSmetrics EMEA
   3-7 Rue du Theatre
   Massy,   F-91300

   Fax:   +33 1 64 53 27 61
   Email: eric_moreau@qosmetrics.net

































Stephan & Moreau        Expires September 2, 2006               [Page 8]

Internet-Draft    IPFIX templates for common ISP usages       March 2006


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Stephan & Moreau        Expires September 2, 2006               [Page 9]
