<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Network Address
    and Port Translation Control Application</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Network Address
    and Port Translation Control Application">
<meta name="keywords" content="ds-lite">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">F. Brockners</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">S. Bhandari</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Cisco</td></tr>
<tr><td class="header">Expires: September 9, 2010</td><td class="header">V. Singh</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Mavenir Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">V. Fajardo</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Telcordia Technologies</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 08, 2010</td></tr>
</table></td></tr></table>
<h1><br />Diameter Network Address
    and Port Translation Control Application<br />draft-ietf-dime-nat-control-02</h1>

<h3>Abstract</h3>

<p>This document describes the framework, messages, and procedures for
      the Diameter Network Address and Port Translation Control Application
      (DNCA), allowing for per-endpoint control of large scale NAT/NAPT
      devices, which are put in place to cope with IPv4-address space
      completion. The DNCA allows external devices to configure and manage a
      NAT device - expanding the existing Diameter-based AAA and policy
      control capabilities with a NAT/NAPT control component. These external
      devices can be network elements in the data plane such as a Network
      Access Server (NAS), or can be more centralized control plane devices
      such as AAA-servers. DNCA establishes a context to commonly identify and
      manage endpoints on a gateway or server, and a large scale NAPT/NAT
      device. This includes, for example, the control of the total number of
      NAT-bindings allowed or the allocation of a specific NAT-binding for a
      particular endpoint. In addition, it allows large scale NAT devices to
      provide information relevant to accounting purposes.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 9, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#Conventions">2.</a>&nbsp;
Conventions<br />
<a href="#framework">3.</a>&nbsp;
Deployment Framework<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.1.</a>&nbsp;
Deployment Scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.2.</a>&nbsp;
Diameter NAPT Control Application Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.3.</a>&nbsp;
Deployment Scenarios For The Diameter NAPT Control Application<br />
<a href="#sec-dnca">4.</a>&nbsp;
Diameter NAT Control Application Session Establishment and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.</a>&nbsp;
Parties Involved <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.2.</a>&nbsp;
Session Establishment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.3.</a>&nbsp;
Session Re-Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.4.</a>&nbsp;
Session And Binding Query<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.5.</a>&nbsp;
Session Termination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.6.</a>&nbsp;
DNCA Manager/Agent Failures<br />
<a href="#sec-diameter-base-use">5.</a>&nbsp;
Use Of The Diameter Base Protocol<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-diameter-messages">5.1.</a>&nbsp;
Securing Diameter Messages <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.2.</a>&nbsp;
Accounting Functionality<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.3.</a>&nbsp;
Use Of Sessions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.4.</a>&nbsp;
Routing Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.5.</a>&nbsp;
Advertising Application Support<br />
<a href="#sec-dnca-commands">6.</a>&nbsp;
Diameter NAT Control Application Commands<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-dnca-ncr">6.1.</a>&nbsp;
NAT-Control Request (NCR) Command<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-dnca-nca">6.2.</a>&nbsp;
NAT-Control Answer (NCA) Command<br />
<a href="#sec-dnca-avps">7.</a>&nbsp;
Diameter NAT Control Application AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">7.1.</a>&nbsp;
Reused Base Protocol AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec_result-codes">7.2.</a>&nbsp;
Additional Result-Code AVP Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">7.2.1.</a>&nbsp;
Success<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec_result-code-transient">7.2.2.</a>&nbsp;
Transient Failures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec_result-code-permanent">7.2.3.</a>&nbsp;
Permanent Failures <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">7.3.</a>&nbsp;
Reused NASREQ Diameter Application AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">7.4.</a>&nbsp;
Reused from RFC 4675 <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">7.5.</a>&nbsp;
Reused from Diameter QoS Application<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">7.6.</a>&nbsp;
Reused From ETSI ES 283 034, e4 Diameter Application<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">7.7.</a>&nbsp;
Diameter NAT Control Application Defined AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NC-Request-Type">7.7.1.</a>&nbsp;
NC-Request-Type AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Control-Install">7.7.2.</a>&nbsp;
NAT-Control-Install AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Control-Remove">7.7.3.</a>&nbsp;
NAT-Control-Remove AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Control-Definition">7.7.4.</a>&nbsp;
NAT-Control-Definition AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Internal-Address">7.7.5.</a>&nbsp;
NAT-Internal-Address AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-External-Address">7.7.6.</a>&nbsp;
NAT-External-Address AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_Max-NAT-Bindings">7.7.7.</a>&nbsp;
Max-NAT-Bindings<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Control-Binding-Rule">7.7.8.</a>&nbsp;
NAT-Control-Binding-Rule AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_Duplicate-Session-Id">7.7.9.</a>&nbsp;
Duplicate-Session-Id AVP<br />
<a href="#sec-accounting">8.</a>&nbsp;
Accounting Commands<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">8.1.</a>&nbsp;
NAT Control Accounting Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">8.2.</a>&nbsp;
NAT Control Accounting AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Control-Record">8.2.1.</a>&nbsp;
NAT-Control-Record<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_NAT-Control-Binding-Status">8.2.2.</a>&nbsp;
NAT-Control-Binding-Status<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avp_Current-NAT-Bindings">8.2.3.</a>&nbsp;
Current-NAT-Bindings<br />
<a href="#sec-avp-occurence-table">9.</a>&nbsp;
AVP Occurrence Table<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">9.1.</a>&nbsp;
DNCA AVP Table for NAT control initial and update requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">9.2.</a>&nbsp;
DNCA AVP Table for Session Query request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">9.3.</a>&nbsp;
DNCA AVP Table for NAT Control Terminate requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">9.4.</a>&nbsp;
DNCA AVP Table For Accounting Message<br />
<a href="#IANA">10.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">10.1.</a>&nbsp;
Command Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">10.2.</a>&nbsp;
AVP Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">10.3.</a>&nbsp;
AVP Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">10.3.1.</a>&nbsp;
Result-Code AVP Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">10.4.</a>&nbsp;
Application IDs<br />
<a href="#Security">11.</a>&nbsp;
Security Considerations<br />
<a href="#anchor33">12.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor34">13.</a>&nbsp;
Change History (to be removed prior to publication as an RFC) <br />
<a href="#rfc.references1">14.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">14.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">14.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Internet service providers have started to deploy Network Address
      Translators (NATs) and Network Address and Port Translators (NAPTs) at
      the edge of their networks to deal with the depletion of available
      public IPv4 addresses. This document defines a Diameter application for
      providers deploying such NATs and NAPT devices. The use of a Diameter
      application allows for simple integration into the existing AAA
      environment of a provider.
</p>
<p>The Diameter NAPT Control Application (DNCA) offers the following
      capabilities:
</p>
<p></p>
<ol class="text">
<li>Limit/Define the number of NAPT/NAT-bindings made available to an
          individual subscriber or end point.
</li>
<li>Support the allocation of specific NAPT/NAT-bindings. Two types
          of specific bindings can be distinguished:
<ul class="text">
<li>Allocation of a pre-defined NAT-binding. Both the internal as
              well as the external IP-address/port pair are specified within
              the request. Some deployment cases, such as access to a
              web-server within a user&rsquo;s home network with IP-address
              and port, benefit from statically configured bindings.
</li>
<li>Allocation of an external IP-address for a given internal
              IP-address. The allocated external IP-address will be reported
              back to the requestor. In some deployment scenarios, the
              application requires immediate knowledge of the allocated
              binding for a given internal IP-address but does not control the
              allocation of the external IP-address (e.g. SIP-proxy server
              deployments).
</li>
</ul>
</li>
<li>Define the external address-pool(s) to be used for allocating an
          external IP-address. External address-pools can either be pre-
          assigned at the NAPT/NAT, or specified within a request. If pre-
          assigned address-pools are used, a request needs to include a
          reference to identify the pool. Otherwise, the request will contain
          a description of the IP- address pool(s) to be used (e.g. list of
          IP-subnets).
</li>
<li>Accounting/Reporting: Report established bindings for a
          particular user. The collected information is used by accounting
          systems, for statistical purposes, etc.
</li>
<li>Query functionality to retrieve details about bindings on demand.
          This feature complements the previously mentioned accounting
          functionality mentioned above (see item 4). The query functionality
          complements alternative information query mechanisms such as
          SNMP-based mechanisms, if available.
</li>
<li>Common identification of a subscriber or endpoint on multiple
          network devices such as the NAPT/NAT device, the AAA server, or the
          Network Access Server (NAS). Endpoint identification is facilitated
          through a Global Endpoint ID. Endpoints are identified through a
          single or a set of classifiers such as IP address, VLAN identifier,
          or interface identifier which uniquely identify the traffic
          associated with a particular global endpoint
</li>
</ol>

<p>This document is structured as follows: Section 2 lists terminology,
      while Section 3 provides an introduction to the Diameter NAPT Control
      Application and its overall deployment framework. Sections 4 to 8 cover
      the DNCA specifics, with Section 4 describing session management,
      Section 5 the use of the Diameter base protocol, Section 6 new commands,
      Section 7 the respective AVPs used, and Section 8 accounting aspects.
      Section 9 presents an AVP occurance table. IANA and security
      considerations are addressed in Sections 10 and 11.
</p>
<a name="Conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>Abbreviations are used in this document:
</p>
<p></p>
<blockquote class="text">
<p>AAA: Authentication, Authorization, Accounting
</p>
<p>DNCA: Diameter NAT Control Application
</p>
<p>NAPT: Network Address and Port Translation
</p>
<p>NAT: Network Address Translation (NAT and NAPT are used in this
          document interchangeably)
</p>
<p>NAT-Binding or Binding: Association of two IP-address/port pairs
          (with one IP-address typically being private and the other one
          public) to facilitate NAT
</p>
<p>NAS: Network Access Server
</p>
</blockquote>

<a name="framework"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Deployment Framework</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Deployment Scenario</h3>

<p><a class='info' href='#fig-network-deployment'>Figure&nbsp;1<span> (</span><span class='info'>Typical network deployment for internet access</span><span>)</span></a> shows a typical
        network deployment for internet access. A user&rsquo;s IPv4-host gains
        access to the internet though a Network Access Server (NAS) which
        facilitates the authentication of the endpoint and configures the
        user&rsquo;s connection according to the authorization and
        configuration data received from the AAA-server upon successful
        authentication. Public IPv4 addresses are used throughout the
        network.
</p><br /><hr class="insert" />
<a name="fig-network-deployment"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                      +---------+
                      |         |
                      |   AAA   |
                      |         |
                      +---------+
                           |
                           |
                           |
                           |
 +---------+          +---------+             +----------+
 |  IPv4   |          |         |             |  IPv4    |
 |  Host   |----------|   NAS   |-------------| Internet |
 |         |          |         |             |          |
 +---------+          +---------+             +----------+

 &lt;-------------------- Public IPv4 ----------------------&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Typical network deployment for internet access&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#fig-LSN-deployment'>Figure&nbsp;2<span> (</span><span class='info'>Access network deployment with LSN</span><span>)</span></a> depicts the deployment
        scenario when a service provider introduces a NAT device to increase
        the efficiency of the global IPv4 address pool utilization. The
        objective is to provide the customer with connectivity to the public
        IPv4 Internet. The NAT device performs network address (and optionally
        protocol) translation, depending on whether the access network uses
        private IPv4 addresses or public IPv6 addresses, to public IPv4
        addresses. If the NAT device would be put in place without any
        endpoint awareness, the service offerings of the service provider
        would be hampered. Provisioning static NAT-bindings for particular
        endpoints, using different public IP-address pools for different set
        of endpoints (e.g. residential or business customers), as well as
        reporting on the allocated bindings on a per-endpoint basis would be
        burdensome for a service provider if the NAT device would not be aware
        of endpoints and allow for per-endpoint control and management which
        easily integrates with the already existing per-endpoint management
        infrastructure of the service provider.
</p><br /><hr class="insert" />
<a name="fig-LSN-deployment"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                +---------+
                |         |
                |   AAA   |
                |         |
                +---------+
                     |
                     |
                     |
                     |
  +--------+    +---------+    +---------+    +----------+
  |  IPv4  |    |         |    |         |    |  IPv4    |
  |  Host  |----|   NAS   |----|   NAT   |----| Internet |
  |        |    |         |    |         |    |          |
  +--------+    +---------+    +---------+    +----------+
  &lt;-------- Private IPv4 -----------&gt;&lt;--- Public IPv4 ---&gt;
  &lt;-------- Public  IPv6 -----------&gt;&lt;--- Public IPv4 ---&gt;</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Access network deployment with LSN&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Diameter NAPT Control Application Overview</h3>

<p>The Diameter NAT Control Application runs between a Diameter NAT
        Control Application Agent on the NAT and the Diameter NAT Control
        Application Manager. DNCA allows for per-endpoint control and
        management of a NAT. Being based on Diameter, DNCA integrates well
        with the suite of Diameter applications deployed for per-endpoint
        authentication, authorization, accounting, and policy control in
        service provider networks.
</p>
<p>DNCA offers request and answer commands to control the allowed
        number of NAT-bindings per endpoint, to request the allocation of
        specific bindings for an endpoint, to define the address pool to be
        used for an endpoint, to provide per endpoint reporting on the
        allocated NAT-bindings, as well as to provide for unique
        identification of an endpoint on both NAT, AAA-server and NAS, thus
        simplifying the correlation of accounting data streams.
</p>
<p>DNCA allows for controlling the behavior of a NAT device on a
        per-endpoint basis during initial session establishment as well as at
        later stages by providing an update procedure for already established
        sessions. Using DNCA, per-endpoint NAT-binding information can be
        retrieved either using accounting mechanisms or through an explicit
        session query to the NAT.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Deployment Scenarios For The Diameter NAPT Control Application</h3>

<p>Deployment dependent, the role of the Diameter NAT Control Manager
        can be fulfilled by either the NAS or by an external server such as an
        AAA-server. The two deployment scenarios are outlined in <a class='info' href='#fig-LSN-integrated-deployment'>Figure&nbsp;3<span> (</span><span class='info'>LSN Control deployment: Integrated deployment</span><span>)</span></a> (&ldquo;integrated
        deployment&rdquo;) and <a class='info' href='#fig-LSN-autonomous-deployment'>Figure&nbsp;4<span> (</span><span class='info'>LSN Control deployment: Autonomous deployment</span><span>)</span></a> (&ldquo;autonomous
        deployment&rdquo;).
</p>
<p>Within the figures (M) denotes the network element which takes on
        the DNCA manager role. Similarly, (A) identifies the network element
        which performs the DNCA agent role.
</p>
<p>The integrated deployment approach hides the existence of the NAT
        device from external servers such as the AAA-server as much as
        possible. It is suited for environments where minimal changes to the
        existing AAA deployment are desired. The NAS, taking the role of the
        DNCA manager, is in charge of initiating and managing the session to
        the NAT device, exchanging NAT specific configuration information as
        well as handling reporting and accounting information. The NAS
        receives reporting and accounting information from NAT device. This
        way the NAS can provide for a single accounting record for the user,
        offloading external accounting systems from correlating accounting
        information received from multiple sources.
</p>
<p>An example network attachment for an integrated NAT deployment
        could be described as follows: An endpoint connects to the network,
        with the NAS being the point of attachment. After successful
        authentication, NAS receives endpoint related authorization data from
        the AAA-server. A portion of the authorization data applies to
        per-endpoint configuration on the NAS itself, another portion
        describes authorization and configuration information for NAT control
        aimed at the NAT. NAS will initiate a DNCA session to the NAT and send
        the relevant authorization and configuration information for the
        particular endpoint to the NAT device. This could comprise e.g.
        NAT-bindings which have to be pre-established for the endpoint, or
        management related configuration, such as the maximum number of
        NAT-bindings allowed for the endpoint or accounting requirements. The
        NAT device will send its per-endpoint accounting information to the
        NAS which aggregates the accounting information received form the NAT
        with its local accounting information for the endpoint into a single
        accounting stream towards the AAA-server.
</p><br /><hr class="insert" />
<a name="fig-LSN-integrated-deployment"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                +---------+
                |         |
                |   AAA   |
                |         |
                +---------+
                     |
                     |
                     |
  +--------+    +---------+    +---------+    +----------+
  |  IPv4  |    |   (M)   |    |   (A)   |    |  IPv4    |
  |  Host  |----|   NAS   |----|   NAT   |----| Internet |
  |        |    |         |    |         |    |          |
  +--------+    +---------+    +---------+    +----------+
  &lt;-------- Public  IPv6 ----------&gt;&lt;--- Public IPv4 ----&gt;
  &lt;-------- Private IPv4 ----------&gt;&lt;--- Public IPv4 ----&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: LSN Control deployment: Integrated deployment&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The autonomous deployment approach decouples user management on NAS
        and NAT device. The AAA system performing the role of the DNCA manager
        manages the connection to the NAT device, controls the per-endpoint
        configuration, and also receives accounting and reporting information
        from the NAT device. Different from the integrated deployment
        scenario, the autonomous deployment scenario does not
        &ldquo;hide&rdquo; the existence of the NAT device from the AAA
        infrastructure. Here two accounting streams are received by the
        AAA-server for one particular endpoint, one from the NAS, and one from
        the NAT device.
</p><br /><hr class="insert" />
<a name="fig-LSN-autonomous-deployment"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                  +---------+
                  |   (M)   |
                  |   AAA   |
                  |         |
                  +---------+
                       |
                       |
                       |
    +--------+    +---------+    +---------+    +----------+
    |  IPv4  |    |         |    |   (A)   |    |  IPv4    |
    |  Host  |----|   NAS   |----|   NAT   |----| Internet |
    |        |    |         |    |         |    |          |
    +--------+    +---------+    +---------+    +----------+
    &lt;-------- Public  IPv6 ----------&gt;&lt;---- Public IPv4 ---&gt;
    &lt;-------- Private IPv4 ----------&gt;&lt;---- Public IPv4 ---&gt;</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: LSN Control deployment: Autonomous deployment&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="sec-dnca"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Diameter NAT Control Application Session Establishment and Management</h3>

<p>Note that this section forward references some of the commands and
      AVPs defined for the DNCA. Please refer to <a class='info' href='#sec-dnca-commands'>Section&nbsp;6<span> (</span><span class='info'>Diameter NAT Control Application Commands</span><span>)</span></a> and <a class='info' href='#sec-dnca-avps'>Section&nbsp;7<span> (</span><span class='info'>Diameter NAT Control Application AVPs</span><span>)</span></a> for details.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Parties Involved </h3>

<p>Authorization and control models supported by this application
        include the following parties: </p>
<ul class="text">
<li>Diameter NAT Control Application (DNCA) agent: The DNCA agent
            is part of the Large scale NAT (NAT) device
</li>
<li>Diameter NAT Control Application (DNCA) manager
</li>
</ul>

<p>The NAT control requesting entity is always the DNCA manager.
        Sessions will always be initiated, updated, or terminated by the DNCA
        manager. This mode of operation is sometimes also referred to as "push
        mode".
</p>
<p>DNCA manager can be NAS or AAA Server. DNCA manager will initiate a
        session with DNCA agent when it learns about the subscriber. DNCA
        manager may learn about a subscriber when it receives authentication,
        authorization or accounting request for that subscriber or by some
        other means such as on the box configuration to identify subscriber
        w.r.t IP packets.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Session Establishment</h3>

<p>The DNCA manager establishes a session to the DNCA agent to control
        the behavior of the NAT device. During session establishment, the DNCA
        manager will pass along configuration information to the DNCA agent.
        Session configuration information could for example comprise the
        maximum number of bindings allowed for the endpoint associated with
        this session, a set of pre-defined NAT-bindings to be established for
        this endpoint, or a description of the address pool, external
        addresses should be allocated from.
</p>
<p>The DNCA manager initiates the Diameter NAT Control session to the
        DNCA agent. The DNCA manager generates a NAT-Control Request (NCR)
        message to the DNCA agent with NC-Request-Type AVP set to
        INITIAL_REQUEST. On receipt of the NCR the DNCA agent will setup a new
        session for the endpoint associated with the endpoint classifier(s)
        contained in the NCR. The DNCA agent notifies the DNCA manager about
        successful session setup using a NAT-Control Answer (NCA) message with
        Result-Code set to DIAMETER_SUCCESS. <a class='info' href='#fig-session-establishment'>Figure&nbsp;5<span> (</span><span class='info'>Initial NAT Control request and session establishment  </span><span>)</span></a> shows the protocol
        interaction between the DNCA manager and the DNCA agent.
</p>
<p>The initial NAT-Control-Request can contain configuration
        information for the session which specifies the behavior of the NAT
        for the session. Configuration information which can be included
        comprises: </p>
<ul class="text">
<li>A list of NAT-bindings which should be pre-allocated for the
            session (e.g. in case a subscriber requires a fixed external IP-
            address/port pair for one of his applications).
</li>
<li>The maximum number of NAT bindings allowed for an endpoint.
</li>
<li>A description of the external address pool(s) to be used for
            the session.
</li>
<li>A reference to a predefined binding rule on DNCA agent that
            will be applied to the session. Such a predefined binding rule on
            DNCA agent may contain, for example, the name of the IP-address
            pool that external IP-addresses should be allocated from, maximum
            number of bindings permitted for the endpoint etc.
</li>
</ul>

<p>In certain cases, the DNCA agent may not be able to perform the
        tasks requested within the NCR. These include the following: </p>
<ul class="text">
<li>If a DNCA agent receives a NCR from a DNCA manager with NC-
            Request-Type AVP set to INITIAL_REQUEST that identifies an already
            existing session (i.e. DNCA manager and endpoint identifier match
            an already existing session), the DNCA agent will return NCA with
            Result-Code set to SESSION_EXISTS, and provides Session-Id of the
            existing session in Duplicate-Session-Id AVP.
</li>
<li>If a DNCA agent receives an NCR from a DNCA manager with NC-
            Request-Type AVP set to INITIAL_REQUEST that matches more than one
            of the already existing sessions (i.e. DNCA manager and endpoint
            identifier match already existing sessions), the DNCA agent will
            return a NCA with Result-Code set to Insufficient-Classifiers. In
            case a DNCA manager receives a NCA that reports
            Insufficient-Classifiers, it may choose to retry establishing a
            new session using additional/more specific classifiers.
</li>
<li>If the NCR contains a binding rule not defined on the NAT, the
            DNCA agent will return a NCA with Result-Code AVP set to
            UNKNOWN_BINDING_RULE.
</li>
<li>In case the DNCA agent is unable to establish all of the
            bindings requested in the NCR, it will return a NCA with
            Result-Code set to BINDING_FAILURE. The DNCA agent (i.e. NAT)
            treats a NCR as an atomic operation; hence none of the requested
            bindings will be established by NAT. Either all requested actions
            within a NCR are completed successfully, or the entire request
            fails.
</li>
<li>If DNCA agent does not have sufficient resources to process a
            request, it will return NCA with Result-Code set to
            RESOURCE_FAILURE.
</li>
<li>In case Max-NAT-Binding and Nat-Control-Definition are included
            in the NCR along with a reference to a binding rule (i.e. a
            predefined template on NAT) and the values in Max-NAT-Binding and
            NAT-Control-Definition contradict those specified in the pre-
            defined binding rule, Max-NAT-Binding and NAT-Control-Definition
            override the values specified in the binding rule.
</li>
</ul>
<br /><hr class="insert" />
<a name="fig-session-establishment"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>         DNCA Manager                             DNCA Agent
            |                                           |
            |                                           |
            |                                           |
         Trigger                                        |
            |                                           |
            |                   NCR                     |
            |------------------------------------------&gt;|
            | (INITIAL_REQUEST, endpoint classifier,    |
            |     session id, NAT control config data)  |
            |                                           |
            |                                           |
            |                                  Create session state
            |                                           |
            |                                           |
            |                     NCA                   |
            |&lt;------------------------------------------|
            |                 (result code)             |
            |                                           |
            |                                           |</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Initial NAT Control request and session establishment  &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Session Re-Authorization</h3>

<p>Session re-authorization is performed if the DNCA manager desires
        to change the behavior of the NAT for an existing session.
        Re-authorization could be used, for example, to change the number of
        allowed bindings for a particular session, or establish or remove a
        pre-defined binding.
</p>
<p>The DNCA manager generates a NAT-Control Request (NCR) message to
        the DNCA agent with NC-Request-Type AVP set to UPDATE_REQUEST upon
        receiving a trigger signal. In case the session is updated
        successfully, the DNCA agent notifies the DNCA manager about
        successful session update using a NAT-Control Answer (NCA) message
        with Result-Code set to DIAMETER_SUCCESS. <a class='info' href='#fig-session-re-auth'>Figure&nbsp;6<span> (</span><span class='info'>NAT Control request for session update </span><span>)</span></a> shows the protocol interaction
        between the DNCA manager and the DNCA agent.
</p>
<p>In certain cases, the DNCA agent may not be able to perform the
        tasks requested within the NCR. These include the following: </p>
<ul class="text">
<li>If DNCA agent receives a NCR update/query request for
            non-existent session it will set error code in answer, to
            DIAMETER_UNKNOWN_SESSION_ID.
</li>
<li>If the NCR contains a binding rule not defined on the NAT, the
            DNCA agent will return a NCA with Result-Code AVP set to
            UNKNOWN_BINDING_RULE.
</li>
<li>If the DNCA agent cannot establish the requested binding
            because the maximum number of allowed bindings has been reached
            for the Endpoint Classifier, it will return NCA with Result-Code
            AVP set to MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT.
</li>
<li>In case the DNCA agent cannot establish some or all of the
            bindings requested in a NCR, but has not yet reached the maximum
            number of allowed bindings for the subscriber, it will return a
            NCA with Result-Code set to BINDING_FAILURE. The DNCA agent (i.e.
            NAT) treats a NCR as an atomic operation; hence none of the
            requested bindings will be established by NAT. Either all
            requested actions within a NCR are completed successfully, or the
            entire request fails.
</li>
<li>If DNCA agent does not have sufficient resources to process a
            request, it will return a NCA with Result-Code set to
            RESOURCE_FAILURE.
</li>
<li>If a NCR redefines the maximum number of NAT bindings allowed
            for the endpoint, the new value will override any previously
            defined limit on NAT-bindings. It depends on the implementation of
            the NAT how NAT would cope with a case where the new value is
            lower than the actual number of allocated bindings. Typically the
            NAT would refrain from enforcing the new limit immediately (i.e.
            actively remove bindings) but rather disallow the establishment of
            new bindings until the current number of bindings is lower than
            the newly established maximum number of allowed bindings.
</li>
<li>If a NCR specifies a new binding rule, predefined on the DNCA
            agent, the binding rule will override any previously defined rules
            for the session.
</li>
<li>In case Max-NAT-Binding and Nat-Control-Definition AVPs are
            included in the NCR along with a reference to a binding rule (i.e.
            a predefined template on NAT) and the values in Max-NAT-Binding
            and Nat-Control-Definition AVPs contradict those specified in the
            pre-defined binding rule, Max-NAT-Binding and
            NAT-Control-Definition AVPs override the values specified in the
            binding rule.
</li>
</ul>
<br /><hr class="insert" />
<a name="fig-session-re-auth"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>         DNCA Manager                             DNCA Agent
            |                                           |
            |                                           |
            |                                           |
     Change of session                                  |
        attributes                                      |
            |                                           |
            |                   NCR                     |
            |------------------------------------------&gt;|
            |       (UPDATE_REQUEST session id,         |
            |         NAT control config data)          |
            |                                           |
            |                                           |
            |                                  Update session state
            |                                           |
            |                                           |
            |                     NCA                   |
            |&lt;------------------------------------------|
            |                 (result code)             |
            |                                           |
            |                                           |</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: NAT Control request for session update &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Session And Binding Query</h3>

<p>Session query can be used by the DNCA manager to either retrieve
        information on the current bindings for a particular session at the
        NAT or discover the session identifier for a particular external
        IP-address/port pair.
</p>
<p>The DNCA manager initiates a session query by sending a NAT-Control
        Request (NCR) message to the DNCA agent with NC-Request-Type AVP set
        to QUERY_REQUEST. <a class='info' href='#fig-session-query'>Figure&nbsp;7<span> (</span><span class='info'>Session Query</span><span>)</span></a> shows the
        protocol interaction between the DNCA manager and the DNCA agent.
</p>
<p>Two types of query requests exist. The first type of query request
        uses the session ID as input parameter to the query. It is to allow
        the DNCA manager retrieve the current set of bindings for a specific
        session. The second type of query request is used in to retrieve the
        session identifiers, along with the associated bindings, matching a
        criteria. This enables the DNCA manager to find out which sessions
        utilize a specific external IP address.
</p>
<p></p>
<ol class="text">
<li>Request a list of currently allocated NAT-bindings for a
            particular session: The DNCA agent will, on receipt of the NCR,
            lookup the session information for the session id contained in the
            NCR, and will report all currently active NAT-bindings for the
            session using a NAT-Control Answer (NCA) message with Result-Code
            set to DIAMETER_SUCCESS. In this case the NCR MUST NOT contain a
            NAT-Control-Definition AVP. Each NAT-Binding will be reported in a
            NAT-Control-Definition AVP. In case the session id is unknown to
            the DNCA agent a DIAMETER_UNKNOWN_SESSION_ID error is
            returned.
</li>
<li>Retrieve session ids and internal IP-address/port pairs for one
            or multiple external IP-address/port pairs: If the DNCA manager
            wishes to retrieve the session id(s) for one or multiple external
            IP-address/port pairs, it MUST include the external
            IP-address/port pair(s) as part of the NAT-Control-Definition AVP
            of the NCR. The session id used within the NCR is not meaningful
            for this type of a query. The DNCA agent will report the
            NAT-bindings and associated session ids corresponding to the
            external IP-address/port pairs in a NAT-Control Answer (NCA)
            message with Result-Code set to DIAMETER_SUCCESS and the same
            session id as the one used in the NCR. In case an external
            IP-address/port pair has no associated existing NAT-binding, the
            NAT-Control-Definition AVP contained in the reply just contains
            the NAT-External-Address AVP.
</li>
</ol>
<br /><hr class="insert" />
<a name="fig-session-query"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>         DNCA Manager                             DNCA Agent
            |                                           |
            |                                           |
            |                                           |
  DNCA Session Established                              |
            |                                           |
            |                   NCR                     |
            |------------------------------------------&gt;|
            |              (QUERY_REQUEST)              |
            |                                           |
            |                                           |
            |                                           |
            |                          Look up corresponding session
            |                            and associated NAT Bindings
            |                                           |
            |                     NCA                   |
            |&lt;------------------------------------------|
            |                 (result code)             |
            |                                           |
            |                                           |</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Session Query&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Session Termination</h3>

<p>The DNCA manager generates a NAT-Control Request (NCR) message to
        the DNCA agent with NC-Request-Type AVP set to TERMINATE_REQUEST upon
        receiving a trigger signal. The DNCA agent sends accounting stop
        record reporting all the bindings and notifies the DNCA manager about
        successful session termination using a NAT-Control Answer (NCA)
        message with Result-Code set to DIAMETER_SUCCESS. <a class='info' href='#fig-session-terminate'>Figure&nbsp;8<span> (</span><span class='info'>Terminate NAT Control session</span><span>)</span></a> shows the protocol interaction
        between the DNCA manager and the DNCA agent.
</p>
<p>If a DNCA agent receives a NCR from a DNCA manager with
        NC-Request-Type AVP set to TERMINATE_REQUEST and fails to find a
        matching session, the DNCA agent returns DIAMETER_UNKNOWN_SESSION_ID
        error.
</p><br /><hr class="insert" />
<a name="fig-session-terminate"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>         DNCA Manager                             DNCA Agent
            |                                            |
            |                                            |
         Trigger                                         |
            |                                            |
            |                   NCR                      |
            |-------------------------------------------&gt;|
            |       (TERMINATE_REQUEST, session id)      |
            |                                            |
            |                                            |
            |                                  Remove NAT bindings
            |                                       of session
            |                                            |
            |                                            |
            |           Send accounting stop             |
            |&lt;-------------------------------------------|
            |           for all session bindings         |
            |                                            |
            |                                  Terminate Session /
            |                                 Remove session state
            |                                            |
            |                                            |
            |                                            |
            |                     NCA                    |
            |&lt;-------------------------------------------|
            |                 (result code)              |
            |                                            |</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Terminate NAT Control session&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
DNCA Manager/Agent Failures</h3>

<p>This document does not cover details in case DNCA manager and DNCA
        agent go out of sync, which could happen for example due to DNCA
        manager or DNCA agent restart, (temporary) loss of network
        connectivity etc. DNCA application will rely on DNCA Manager and DNCA
        Agent to have builtin redundancy support to recover state in case of
        failure.
</p>
<p>Example failure cases include the following:
</p>
<p></p>
<ul class="text">
<li>The DNCA manager loses session state (e.g. due to a restart).
            In this case, 
<ul class="text">
<li>the DNCA agent may receive a NCR with NC-Request-Type AVP
                set to INITIAL_REQUEST that matches an existing session of
                DNCA agent. The DNCA agent will return an error that contains
                Duplicate-Session-Id AVP to report Session-Id of existing
                session. The DNCA manager may then send an explicit
                TERMINATE_REQUEST for the older session that was lost.
</li>
<li>the DNCA manager may receive accounting records for a
                session that does not exist. The DNCA manager will send an
                accounting answer with error-code set to
                DIAMETER_UNKNOWN_SESSION_ID. On receipt of which the DNCA
                agent clears the session and removes the associated session
                state.
</li>
</ul>
</li>
<li>The DNCA agent loses session state. In such a case, the DNCA
            agent could receive a NCR with NC-Request-Type AVP set to
            UPDATE_REQUEST for a non-existent session. The DNCA agent will
            return NCA with error code set to DIAMETER_UNKNOWN_SESSION_ID.
            State recovery procedures of the DNCA agent will be covered in a
            future version of this document.
</li>
<li>The DNCA manager is unreachable (as e.g. detected by Diameter
            watchdog) or down and accounting requests from the DNCA agent fail
            to get a response. The mechanism to ensure that a DNCA manager no
            longer has associated state for a session being cleared at the
            DNCA agent is beyond the scope of this document.
</li>
<li>The DNCA agent is unreachable or down and NCR requests fail to
            get a response. Handling of this case depends on the actual
            service offering of the service provider. The service provider
            could, for example, choose to terminate the access session to the
            endpoint.
</li>
</ul>

<a name="sec-diameter-base-use"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Use Of The Diameter Base Protocol</h3>

<p>The Diameter Base Protocol defined by <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>
      shall apply, with the clarifications listed in the present
      specification.
</p>
<a name="sec-diameter-messages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Securing Diameter Messages </h3>

<p>For secure transport of Diameter messages, IPSec MAY be used.
</p>
<p>The DNCA agent MAY verify the identity of the DNCA Manager during
        the Capabilities Exchange Request procedure.
</p>
<p>The DNCA agent MAY verify if the DNCA Manager that issues a NCR
        command is allowed to do so, based on: </p>
<ul class="text">
<li>The Identity of the DNCA Manager
</li>
<li>The Type of NCR Command
</li>
<li>The content of the NCR Command
</li>
<li>Any combination of the above
</li>
</ul>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Accounting Functionality</h3>

<p>Accounting functionality (Accounting Session State Machine, related
        command codes and AVPs) is defined in <a class='info' href='#sec-accounting'>Section&nbsp;8<span> (</span><span class='info'>Accounting Commands</span><span>)</span></a> below.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Use Of Sessions</h3>

<p>Each DNCA session MUST have a globally unique Session-Id as defined
        in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>, which MUST NOT be changed during
        the lifetime of a DNCA session. The Diameter Session-Id serves as the
        global endpoint identifier. The DNCA agent and DNCA manager maintain
        state associated with the Session-Id. This globally unique Session-Id
        is used for updating, accounting for and terminating the session. DNCA
        session MUST NOT have more than one outstanding request at any given
        instant. The DNCA agent sends an Abort-Session-Request as defined in
        <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> if it is unable to maintain sessions
        due to resource limitation.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Routing Considerations</h3>

<p>It is assumed that the DNCA manager knows the DiameterIdentity of
        the DNCA agent for a given endpoint. Both the Destination-Realm and
        Destination-Host AVPs are present in the Request from the DNCA manager
        to the DNCA agent.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Advertising Application Support</h3>

<p>Diameter applications conforming to this specification MUST
        advertise support by including the value of TBD in:
</p>
<p></p>
<ul class="text">
<li>Auth-Application-Id and Acct-Application-Id of
            Capabilities-Exchange-Request (CER)
</li>
<li>Auth-Application-Id of NC-request (NCR), NC-Answer (NCA),
            Abort-Session-Request(ASR), Abort-Session-Answer (AAA)
            messages
</li>
<li>Acct-Application-Id in Accounting-Request (ACR) and
            Accounting-Answer (AAA) messages.
</li>
</ul>

<a name="sec-dnca-commands"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Diameter NAT Control Application Commands</h3>

<p>The following commands are used to establish, maintain and clear NAT
      bindings.
</p>
<a name="sec-dnca-ncr"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
NAT-Control Request (NCR) Command</h3>

<p>The NAT-Control Request (NCR) command, indicated by the command
        field set to TBD and the "R" bit set in the Command Flags field, is
        sent from the DNCA manager to the DNCA agent in order to install NAT
        bindings.
</p>
<p>User-Name, Logical-Access-Id, Physical-Access-ID,
        Framed-IP-Address, Framed-IPv6-Prefix , Framed-Interface-Id,
        EGRESS-VLANID, NAS-Port-ID, Address-Realm, Calling-Station-ID AVPs
        serve as identifiers for the subscriber.
</p>
<p>Message Format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>   &lt; NC-Request &gt; ::= &lt; Diameter Header: TBD, REQ, PXY&gt;

                    &lt; Session-Id &gt;
                    { Auth-Application-Id }
                    { Origin-Host }
                    { Origin-Realm }
                    { Destination-Realm }
                    { Destination-Host }
                    { NC-Request-Type }
                    [ Origin-State-Id ]
                    [ Auth-Session-State ]
                  * [ NAT-Control-Remove ]
                  * [ NAT-Control-Install ]
                    [ User-Name ]
                    [ Logical-Access-Id ]
                    [ Physical-Access-ID ]
                    [ Framed-IP-Address ]
                    [ Framed-IPv6-Prefix ]
                    [ Framed-Interface-Id ]
                    [ EGRESS-VLANID]
                    [ NAS-Port-ID]
                    [ Address-Realm ]
                    [ Calling-Station-ID ]
                  * [ Proxy-Info ]
                  * [ Route-Record ]
                  * [ AVP ]
</pre></div>
<a name="sec-dnca-nca"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
NAT-Control Answer (NCA) Command</h3>

<p>The NAT-Control-Answer (NCA) command, indicated by the Command-Code
        field set to TBD and the "R" bit cleared in the Command Flags field,
        is sent by the DNCA agent in response to NAT-Control-Request
        command.
</p>
<p>Message Format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>   &lt;NC-Answer&gt; ::= &lt; Diameter Header: TBD, PXY &gt;
                   &lt; Session-Id &gt;
                   { Origin-Host }
                   { Origin-Realm }
                   { NC-Request-Type }
                   [ Result-Code ]
                 * [ NAT-Control-Definition ]
                   [ Current-NAT-Bindings   ]
                   [ Origin-State-Id ]
                   [ Error-Message ]
                   [ Error-Reporting-Host ]
                 * [ Failed-AVP ]
                 * [ Proxy-Info ]
                   [ Duplicate-Session-ID ]
                 * [ Redirect-Host]
                   [ Redirect-Host-Usage ]
                   [ Redirect-Max-Cache-Time ]
                 * [ Proxy-Info ]
                 * [ Route-Record ]
                 * [ Failed-AVP ]
                 * [ AVP ]
                 * [ AVP ]

</pre></div>
<a name="sec-dnca-avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Diameter NAT Control Application AVPs</h3>

<p>
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Reused Base Protocol AVPs</h3>

<p>AVPs reused from Diameter Base Protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> are listed below.
</p><br /><hr class="insert" />
<a name="tab-avps-from-diameter-base"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                                +-------------------+
                                                |  AVP Flag rules   |
+-----------------------------------------------|-----+---+---------+
|                           AVP                 |     |   |   May   |
| Attribute Name            Code     Data Type  |MUST |MAY| encrypt |
+-----------------------------------------------+-----+---+---------+
|Acct-Interim-Interval      85       Unsigned32 | M   | P |    Y    |
|Auth-Application-Id        258      Unsigned32 | M   | P |    N    |
|Auth-Session-State         277      Enumerated | M   | P |    N    |
|Destination-Host           293      DiamIdent  | M   | P |    N    |
|Destination-Realm          283      DiamIdent  | M   | P |    N    |
|Error-Message              281      UTF8String | M   | P |    N    |
|Error-Reporting-Host       294      DiamIdent  | M   | P |    N    |
|Failed-AVP                 279      Grouped    | M   | P |    N    |
|Origin-Host                264      DiamIdent  | M   | P |    N    |
|Origin-Realm               296      DiamIdent  | M   | P |    N    |
|Origin-State-Id            278      Unsigned32 | M   | P |    N    |
|Proxy-Info                 284      Grouped    | M   | P |    N    |
|Result-Code                268      Unsigned32 | M   | P |    N    |
|Route-Record               282      DiamIdent  | M   |   |    N    |
|Session-Id                 263      UTF8String | M   | P |    Y    |
|User-Name                  1        UTF8String | M   | P |    Y    |
+-----------------------------------------------+-----+---+---------+
|M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
|    supported and recognized by a Diameter entity in order the     |
|    message, which carries this AVP, to be accepted.               |
|P - Indicates the need for encryption for end-to-end security.     |
+-------------------------------------------------------------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: DIAMETER AVPs used from Diameter base &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Auth-Application-Id AVP (AVP Code 258) is assigned by IANA to
        Diameter applications. The value of the Auth-Application-Id for the
        Diameter NAT Control Application is TBD.
</p>
<a name="sec_result-codes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Additional Result-Code AVP Values</h3>

<p>This section defines new values for the Result-Code AVP which SHALL
        be supported by all Diameter implementations that conform to the
        present document.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1"></a><h3>7.2.1.&nbsp;
Success</h3>

<p>No new Result-Code AVP value is defined within this category.
</p>
<a name="sec_result-code-transient"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.2"></a><h3>7.2.2.&nbsp;
Transient Failures</h3>

<p>Result-Code AVP values that fall within the transient failures
          category are those used to inform a peer that the request could not
          be satisfied at the time that it was received. The request may be
          able to be satisfied in the future.
</p>
<p>The following new values of the Result-Code AVP are defined:
</p>
<p></p>
<blockquote class="text">
<p>RESOURCE_FAILURE (TBD)</p>
<blockquote class="text">
<p>The DNCA agent indicates that the binding could not be
                  installed or a new session could not be created due to
                  resource shortage.
</p>
</blockquote>

</blockquote>

<a name="sec_result-code-permanent"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.3"></a><h3>7.2.3.&nbsp;
Permanent Failures </h3>

<p>Result-Code AVP values that fall within the permanent failures
          category are used to inform the peer that the request failed, and
          should not be attempted again. The request may be able to be
          satisfied in the future.
</p>
<p>The following new values of the Result-Code AVP are defined:
</p>
<p></p>
<blockquote class="text">
<p>UNKNOWN_BINDING_RULE_NAME (TBD)</p>
<blockquote class="text">
<p>The DNCA agent indicates that the binding could not be
                  installed or a new session could not be created due to
                  resource shortage.
</p>
</blockquote>BINDING_FAILURE (TBD)
<blockquote class="text">
<p>The DNCA indicates that the requested binding(s) could
                  not be installed.
</p>
</blockquote>

<p>MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT (TBD)</p>
<blockquote class="text">
<p>The DNCA agent denies the request because the maximum
                  number of allowed bindings has been reached for the
                  specified Endpoint Classifier.
</p>
</blockquote>

<p>SESSION_EXISTS (TBD)</p>
<blockquote class="text">
<p>The DNCA agent denies request to initialize a new
                  session, if it already has a DNCA session that uses the same
                  set of classifiers as indicated by DNCA manager in the new
                  session init request.
</p>
</blockquote>

<p>INSUFFICIENT_CLASSIFIERS (TBD)</p>
<blockquote class="text">
<p>The DNCA agent defines request to initialize a new
                  session, if the classifiers in the request match more than
                  one of the existing sessions on DNCA agent.
</p>
</blockquote>

</blockquote>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Reused NASREQ Diameter Application AVPs</h3>

<p>The following AVPs are reused from Diameter Network Access Server
        Application <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="tab-avps-from-nasreq"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                       +---------------------+
                                       |    AVP Flag rules   |
+------------------+------+------------|----+-----+----+-----|----+
|                  | AVP  |            |    |     |SHLD| MUST|    |
| Attribute Name   | Code |  Value Type|MUST| MAY | NOT|  NOT|Encr|
|------------------|------|------------|----+-----+----+-----|----|
| NAS-Port         |   5  | Unsigned32 | M  |  P  |    |  V  | Y  |
| NAS-Port-Id      |  87  | UTF8String | M  |  P  |    |  V  | Y  |
| Calling-Station- |  31  | UTF8String | M  |  P  |    |  V  | Y  |
|   Id             |      |            |    |     |    |     |    |
| Framed-IP-Address|   8  | OctetString| M  |  P  |    |  V  | Y  |
| Framed-Interface-|  96  | Unsigned64 | M  |  P  |    |  V  | Y  |
|   ID             |      |            |    |     |    |     |    |
| Framed-IPv6-     |  97  | OctetString| M  |  P  |    |  V  | Y  |
|  Prefix          |      |            |    |     |    |     |    |
+------------------+------+------------|----+-----+----+-----|----+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: Reused NASREQ Diameter application AVPs&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Reused from RFC 4675 </h3>

<p>The following AVPs are reused from "RADIUS Attributes for Virtual
        LAN and Priority Support" specification <a class='info' href='#RFC4675'>[RFC4675]<span> (</span><span class='info'>Congdon, P., Sanchez, M., and B. Aboba, &ldquo;RADIUS Attributes for Virtual LAN and Priority Support,&rdquo; September&nbsp;2006.</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="tab-avps-from-rfc4675"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                       +---------------------+
                                       |    AVP Flag rules   |
+------------------+------+------------|----+-----+----+-----|----+
|                  | AVP  |            |    |     |SHLD| MUST|    |
| Attribute Name   | Code |  Value Type|MUST| MAY | NOT|  NOT|Encr|
|------------------|------|------------|----+-----+----+-----|----|
| Egress-VLANID    |  56  | OctetString| M  |  P  |    |  V  | Y  |
+------------------+------+------------|----+-----+----+-----|----+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: Reused attributes from RFC 4675&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
Reused from Diameter QoS Application</h3>

<p>The following AVPs are reused from the Diameter QoS Application
        <a class='info' href='#I-D.ietf-dime-diameter-qos'>[I&#8209;D.ietf&#8209;dime&#8209;diameter&#8209;qos]<span> (</span><span class='info'>Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;Diameter Quality of Service Application,&rdquo; February&nbsp;2010.</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="tab-avps-from-diameter-qos"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                                +-------------------+
                                                |  AVP Flag rules   |
+-----------------------------------------------|-----+---+---------+
|                           AVP                 |     |   |   May   |
| Attribute Name            Code     Data Type  |MUST |MAY| encrypt |
+-----------------------------------------------+-----+---+---------+
|Port                       TBD     Integer32   |  M  | P |    Y    |
|IP-Address-Mask            TBD     Grouped     |  M  | P |    Y    |
|Protocol                   TBD     Enumerated  |  M  | P |    Y    |
|Direction                  TBD     Enumerated  |  M  | P |    Y    |
+-----------------------------------------------+-----+---+---------+
|M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
|    supported and recognized by a Diameter entity in order the     |
|    message, which carries this AVP, to be accepted.               |
|P - Indicates the need for encryption for end-to-end security.     |
+-------------------------------------------------------------------+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12: Reused QoS-attributes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.6"></a><h3>7.6.&nbsp;
Reused From ETSI ES 283 034, e4 Diameter Application</h3>

<p>The following AVPs are reused from the Diameter e4 Application
        <a class='info' href='#ETSIES283034'>[ETSIES283034]<span> (</span><span class='info'>ETSI, &ldquo;Telecommunications and Internet Converged Services and           Protocols for Advanced Networks (TISPAN),Network Attachment           Sub-System (NASS),e4 interface based on the Diameter           protocol.,&rdquo; September&nbsp;2008.</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="tab-avps-from-diameter-e4"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                                +-------------------+
                                                |  AVP Flag rules   |
+-----------------------------------------------|-----+---+---------+
|                           AVP                 |     |   |   May   |
| Attribute Name            Code     Data Type  |MUST |MAY| encrypt |
+-----------------------------------------------+-----+---+---------+
|Address-Realm              301     OctetString | M,V |   |    Y    |
|Logical-Access-Id          302     OctetString |   V | M |    Y    |
|Physical-Access-ID         313     UTF8String  |   V | M |    Y    |
+-----------------------------------------------+-----+---+---------+
|M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
|    supported and recognized by a Diameter entity in order the     |
|    message, which carries this AVP, to be accepted.               |
|P - Indicates the need for encryption for end-to-end security.     |
|V - Indicates whether the optional Vendor-ID field is present      |
|    in the AVP header. Vendor-Id header of all AVPs in             |
|    this table will be set to ETSI (13019)                         |
+-------------------------------------------------------------------+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13: Reused AVPs from Diameter e4 application  &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7"></a><h3>7.7.&nbsp;
Diameter NAT Control Application Defined AVPs</h3>

<p>The following table describes the new Diameter AVPs used in the
        present document, their AVP Code values, types, possible flag values
        and whether the AVP may or not be encrypted.
</p><br /><hr class="insert" />
<a name="tab-new-avps"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                                +-------------------+
                                                |  AVP Flag rules   |
+-----------------------------------------------|-----+---+---------+
|                       AVP  Section            |     |   |   May   |
| Attribute Name        Code Defined Data Type  |MUST |MAY| encrypt |
+-----------------------------------------------+-----+---+---------+
|NC-Request-Type        TBD  7.7.1   Enumerated | M   | P |    Y    |
|NAT-Control-Install    TBD  7.7.2   Grouped    | M   | P |    Y    |
|NAT-Control-Remove     TBD  7.7.3   Grouped    | M   | P |    Y    |
|NAT-Control-Definition TBD  7.7.4   Grouped    | M   | P |    Y    |
|NAT-Internal-Address   TBD  7.7.5   Grouped    | M   | P |    Y    |
|NAT-External-Address   TBD  7.7.6   Grouped    | M   | P |    Y    |
|Max-NAT-Bindings       TBD  7.7.7   Unsigned32 | M   | P |    Y    |
|NAT-Control-           TBD  7.7.8   OctetString| M   | P |    Y    |
| Binding-Rule                                  |     |   |         |
|Duplicate-             TBD  7.7.9   UTF8String | M   | P |    Y    |
| Session-ID                                    |     |   |         |
|NAT-Control-Record     TBD  8.2.1   Grouped    | M   | P |    Y    |
|NAT-Control-           TBD  8.2.2   Enumerated | M   | P |    Y    |
| Binding-Status                                |     |   |         |
|Current-NAT-Bindings   TBD  8.2.3   Unsigned32 | M   | P |    Y    |
+-----------------------------------------------+-----+---+---------+
|M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
|    supported and recognized by a Diameter entity in order the     |
|    message, which carries this AVP, to be accepted.               |
|P - Indicates the need for encryption for end-to-end security.     |
|V - Vendor specific bit that indicates whether the optional        |
|    Vendor-ID field is present in the AVP header                   |
+-------------------------------------------------------------------+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;14: New Diameter AVPs&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="avp_NC-Request-Type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.1"></a><h3>7.7.1.&nbsp;
NC-Request-Type AVP</h3>

<p>The NC-Request-Type AVP (AVP Code TBD) is of type Enumerated and
          contains the reason for sending the NAT-Control-Request command. It
          shall be present in all NAT-Control-Request messages.
</p>
<p>The following values are defined: </p>
<blockquote class="text">
<p>INITIAL_REQUEST (1)</p>
<blockquote class="text">
<p>An Initial Request is used to install binding at the DNCA
                  agent on a successful access session setup.
</p>
</blockquote>UPDATE_REQUEST (2)
<blockquote class="text">
<p>An Update Request is used to update bindings previously
                  installed on a given access session, to add new binding on a
                  given access session, or to remove one or several binding(s)
                  activated on a given access session.
</p>
</blockquote>

<p>TERMINATION_REQUEST (3) </p>
<blockquote class="text">
<p>Termination Request is used to deactivate and remove all
                  bindings previously activated on a given access session.
</p>
</blockquote>

<p>QUERY_REQUEST (4)</p>
<blockquote class="text">
<p>Query Request is used to query the DNCA agent about the
                  currently installed bindings for an endpoint classifier.
</p>
</blockquote>

</blockquote>

<a name="avp_NAT-Control-Install"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.2"></a><h3>7.7.2.&nbsp;
NAT-Control-Install AVP</h3>

<p>The NAT-Control AVP (AVP code TBD) is of type Grouped, and it is
          used to activate or install NAT bindings. It also contains Max-NAT-
          Bindings that defines maximum number of NAT bindings to be allowed
          for a subscriber and NAT-Control-Binding-Rule that references
          predefined policy template on DNCA agent that may contain static
          bindings, maximum number of bindings to be allowed, address pool
          from which external binding address should be allocated.
</p>
<p>AVP format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  NAT-Control-Install ::= &lt; AVP Header: TBD &gt;
                           * [ NAT-Control-Definition ]
                             [ NAT-Control-Binding-Rule ]
                             [ Max-NAT-Bindings]
                           * [ AVP ]</pre></div>
<a name="avp_NAT-Control-Remove"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.3"></a><h3>7.7.3.&nbsp;
NAT-Control-Remove AVP</h3>

<p>The NAT-Control-Remove AVP (AVP code TBD) is of type Grouped, and
          it is used to deactivate or remove NAT bindings.
</p>
<p>AVP format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  NAT-Control-Remove ::= &lt; AVP Header: TBD &gt;
                          * [ NAT-Control-Definition ]
                            [ NAT-Control-Binding-Rule ]
                          * [ AVP ]</pre></div>
<a name="avp_NAT-Control-Definition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.4"></a><h3>7.7.4.&nbsp;
NAT-Control-Definition AVP</h3>

<p>The NAT-Control-Definition AVP (AVP code TBD) is of type Grouped,
          and it describes a binding.
</p>
<p>The NAT-Control-Definition AVP uniquely identifies the binding
          between the DNCA agent and the DNCA manager.
</p>
<p>If both the NAT-Internal-Address and NAT-External-Address AVP(s)
          are supplied, it is a pre-defined binding.
</p>
<p>The Protocol AVP describes the transport protocol for which the
          binding is created. Exactly zero or one Protocol AVP may be
          contained within NAT-Control-Definition AVP. If the Protocol AVP is
          omitted and if both internal and external address are specified then
          the binding reserves the addresses for all transport protocols.
</p>
<p>The Direction AVP is of type Enumerated and specifies in which
          direction to apply the binding. The values of the enumeration
          applicable in this context are: "IN","OUT". If Direction AVP is OUT
          or absent NAT-Internal-Address refers to the address of the
          subscriber device that needs to be translated. If Direction AVP is
          "IN" NAT-Internal-Address is the destination address that has to be
          translated.
</p>
<p>AVP format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  NAT-Control-Definition ::= &lt; AVP Header: TBD &gt;
                              { NAT-Internal-Address }
                              [ Protocol ]
                              [ Direction ]
                              [ NAT-External-Address ]
                              [ Session-Id ]
                            * [ AVP ]</pre></div>
<a name="avp_NAT-Internal-Address"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.5"></a><h3>7.7.5.&nbsp;
NAT-Internal-Address AVP</h3>

<p>The NAT-Internal-Address AVP (AVP code TBD) is of type Grouped,
          and it describes the internal IP address and port for a binding.
          Framed-IPV6-Prefix and Framed-IP-Address AVPs are mutually
          exclusive.
</p>
<p>AVP format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  NAT-Internal-Address ::= &lt; AVP Header: TBD &gt;
                            [ Framed-IP-Address ]
                            [ Framed-IPv6-Prefix ]
                            [ Port]
                          * [ AVP ]</pre></div>
<a name="avp_NAT-External-Address"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.6"></a><h3>7.7.6.&nbsp;
NAT-External-Address AVP</h3>

<p>The NAT-External-Address AVP (AVP code TBD) is of type Grouped,
          and it describes the external IP address and port for a binding.
          IP-Address-Mask AVP can only be specified when Framed-IP-Address AVP
          is present.
</p>
<p>AVP format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  NAT-External-Address ::= &lt; AVP Header: TBD &gt;
                            [ Framed-IP-Address ]
                            [ IP-Address-Mask ]
                            [ Port ]
                          * [ AVP ]</pre></div>
<a name="avp_Max-NAT-Bindings"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.7"></a><h3>7.7.7.&nbsp;
Max-NAT-Bindings</h3>

<p>The Max-NAT-Bindings AVP (AVP code TBD) is of type Unsigned32,
          and it indicates the maximum number of NAT bindings allowed.
</p>
<a name="avp_NAT-Control-Binding-Rule"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.8"></a><h3>7.7.8.&nbsp;
NAT-Control-Binding-Rule AVP</h3>

<p>The NAT-Control-Binding-Rule AVP (AVP code TBD) is of type is of
          type OctetString, and it defines a name for a policy template that
          will be predefined at NAT. Details on the contents and structure of
          the template as well as how it would be configured are outside the
          scope of this document. The policy to which this AVP refers to may
          contain NAT Bindings, address pool for external address allocation
          of NAT binding, maximum allowed NAT bindings etc.
</p>
<a name="avp_Duplicate-Session-Id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7.9"></a><h3>7.7.9.&nbsp;
Duplicate-Session-Id AVP</h3>

<p>The Duplicate-Session-Id AVP (AVP Code TBD) is of is of type
          UTF8String. It is used to report error and contains the Session-Id
          of an existing session.
</p>
<a name="sec-accounting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Accounting Commands</h3>

<p>The Diameter NAT Control Application reuses session based accounting
      as defined in Diameter Base Protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> to
      report the bindings used per endpoint. This reporting is achieved by
      sending Diameter Accounting Requests (ACR) [Start, Interim and Stop]
      from the DNCA agent to DNCA manager.
</p>
<p>The DNCA agent sends an ACR Start on receiving an NCR with
      NC-Request-Type AVP set to INITIAL_REQUEST received for a session, or on
      creation of the first binding for a session requested in an earlier NCR.
      The DNCA may send ACR Interim updates, if required, either due to a
      change in bindings resulting from an NCR with NC-Request-Type AVP set to
      UPDATE_REQUEST, or periodically as specified in Acct-Interim-Interval by
      DNCA Manager or when it creates/tears down bindings. An ACR Stop is sent
      by the DNCA agent on receiving an NCR with NC-Request-Type AVP set to
      TERMINATION_REQUEST.
</p>
<p>The function of correlating the multiple bindings used by an endpoint
      at any given time is relegated to the post processor.
</p>
<p>The DNCA agent may trigger an interim accounting record when maximum
      number of bindings, if received in NCR, is reached.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
NAT Control Accounting Messages</h3>

<p>The ACR and ACA messages are reused as defined in Diameter Base
        Protocol <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> for exchanging endpoint NAT
        binding details between the DNCA agent and the CDF. DNCA Application
        ID is used in the accounting commands. ACR will contain one or more
        optional NAT-Control-Record AVP to report the bindings. The DNCA agent
        indicates the number of the currently allocated NAT bindings to the
        DNCA manager using the Current-NAT-Bindings AVP. This number needs to
        match the number of bindings identified as active within the
        NAT-Control-Record AVP.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
NAT Control Accounting AVPs</h3>

<p>In addition to AVPs for ACR specified in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>, the DNCA agent must add the
        NAT-Control-Record AVP.
</p>
<a name="avp_NAT-Control-Record"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.1"></a><h3>8.2.1.&nbsp;
NAT-Control-Record</h3>

<p>The NAT-Control-Record AVP (AVP code TBD) is of type Grouped, and
          it describes a binding and its status. Event-Timestamp indicates the
          time at which binding was created if NAT-Control-Binding-Status is
          set to Created, or time at which the binding was removed if
          NAT-Control-Binding-Status is set to removed. If the
          NAT-Control-Binding-Status is active Event-Timestamp need not be
          present, if present it indicates that binding is active at the
          mentioned time.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  NAT-Control-Record ::= &lt; AVP Header: TBD &gt;
                         { NAT-Control-Definition }
                         { NAT-Control-Binding-Status }
                         [ Event-Timestamp ]</pre></div>
<a name="avp_NAT-Control-Binding-Status"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.2"></a><h3>8.2.2.&nbsp;
NAT-Control-Binding-Status</h3>

<p>The NAT-Control-Binding-Status AVP (AVP code TBD) is of type
          enumerated and it describes whether the binding being reported was
          created or removed or simply indicates that it is active.
</p>
<p>The following values are defined: </p>
<blockquote class="text">
<p>Created (1)</p>
<blockquote class="text">
<p>Indicates that NAT binding is created.
</p>
</blockquote>

<p>Active (2)</p>
<blockquote class="text">
<p>Indicates that NAT binding is active.
</p>
</blockquote>

<p>Removed (3)</p>
<blockquote class="text">
<p>Indicates that the NAT binding was removed.
</p>
</blockquote>

</blockquote>

<a name="avp_Current-NAT-Bindings"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.3"></a><h3>8.2.3.&nbsp;
Current-NAT-Bindings</h3>

<p>The Current-NAT-Bindings AVP (AVP code TBD) is of type
          Unsigned32, and it indicates number of NAT bindings active on
          NAT.
</p>
<a name="sec-avp-occurence-table"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
AVP Occurrence Table</h3>

<p>The following sections presents the AVPs defined in this document and
      specifies in which Diameter messages they MAY be present. Note that AVPs
      that can only be present within a Grouped AVP are not represented in
      this table.
</p>
<p>The table uses the following symbols:
</p>
<p></p>
<blockquote class="text">
<p></p>
<blockquote class="text"><dl>
<dt>0</dt>
<dd>The AVP MUST NOT be present in the message.
</dd>
<dt>0+</dt>
<dd>Zero or more instances of the AVP MAY be
              present in the message.
</dd>
<dt>0-1</dt>
<dd>Zero or one instance of the AVP MAY be present
              in the message. It is considered an error if there is more than
              one instance of the AVP.
</dd>
<dt>1</dt>
<dd>One instance of the AVP MUST be present in the
              message.
</dd>
<dt>1+</dt>
<dd>At least one instance of the AVP MUST be
              present in the message.
</dd>
</dl></blockquote>

</blockquote>

<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
DNCA AVP Table for NAT control initial and update requests</h3>

<p>The following table presents which NAT control application specific
        AVPs are to be present in NCR/NCA with NC-Request-Type set to
        INITIAL_REQUEST or UPDATE_REQUEST.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                    +-------------------+
                                    |  Command Code     |
+-----------------------------------+-------------------+
| Attribute Name                        NCR    NCA      |
+-------------------------------------------------------+
|NC-Request-Type                         1      1       |
|NAT-Control-Install                     0-1    0       |
|NAT-Control-Remove                      0-1    0       |
|NAT-Control-Definition                  0      0       |
|NAT-Control-Record                      0      0       |
|Current-NAT-Bindings                    0      0       |
|Duplicate-Session-Id                    0      0-1     |
+-------------------------------------------------------+</pre></div>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
DNCA AVP Table for Session Query request</h3>

<p>The following table presents which NAT control application specific
        AVPs are to be present in NCR/NCA with NC-Request-Type set to
        QUERY_REQUEST.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                    +-------------------+
                                    |  Command Code     |
+-----------------------------------+-------------------+
| Attribute Name                        NCR    NCA      |
+-------------------------------------------------------+
|NC-Request-Type                         1      1       |
|NAT-Control-Install                     0      0       |
|NAT-Control-Remove                      0      0       |
|NAT-Control-Definition                  0      0+      |
|NAT-Control-Record                      0      0       |
|Current-NAT-Bindings                    0      1       |
|Duplicate-Session-Id                    0      0       |
+-------------------------------------------------------+</pre></div>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
DNCA AVP Table for NAT Control Terminate requests</h3>

<p>The following table presents which NAT control application specific
        AVPs are to be present in NCR/NCA with NC-Request-Type set to
        TERMINATION_REQUEST.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                    +-------------------+
                                    |  Command Code     |
+-----------------------------------+-------------------+
| Attribute Name                        NCR    NCA      |
+-------------------------------------------------------+
|NC-Request-Type                         1      1       |
|NAT-Control-Install                     0      0       |
|NAT-Control-Remove                      0      0       |
|NAT-Control-Definition                  0      0       |
|NAT-Control-Record                      0      0       |
|Current-NAT-Bindings                    0      0       |
|Duplicate-Session-Id                    0      0       |
+-------------------------------------------------------+</pre></div>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
DNCA AVP Table For Accounting Message</h3>

<p>Following table presents which NAT control application specific
        AVPs May or May Not be present in ACR/ACA messages.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                                    +-------------------+
                                    |  Command Code     |
+-----------------------------------+-------------------+
| Attribute Name                        ACR    ACA      |
+-------------------------------------------------------+
|NC-Request-Type                         0      0       |
|NAT-Control-Install                     0      0       |
|NAT-Control-Remove                      0      0       |
|NAT-Control-Definition                  0      0       |
|NAT-Control-Record                      0+     0       |
|Current-NAT-Bindings                    1      0       |
|Duplicate-Session-Id                    0      0       |
+-------------------------------------------------------+
</pre></div>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>This section contains the namespaces that have either been created in
      this specification or had their values assigned to existing namespaces
      managed by IANA.
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
Command Codes</h3>

<p>IANA is requested to allocate command code values for the
        following.
</p>
<p>Registry:
</p><br /><hr class="insert" />
<a name="table_command-codes"></a>
<table class="full" align="right" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Code Value</th><th align="left">Name</th><th align="left">Reference</th></tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Request (NCR)</td>
<td align="left"><a class='info' href='#sec-dnca-ncr'>Section&nbsp;6.1<span> (</span><span class='info'>NAT-Control Request (NCR) Command</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Answer (NCA)</td>
<td align="left"><a class='info' href='#sec-dnca-nca'>Section&nbsp;6.2<span> (</span><span class='info'>NAT-Control Answer (NCA) Command</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Command codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
AVP Codes</h3>

<p>IANA is requested to allocate AVP codes for the following AVPs that
        are defined in this document.
</p>
<p>Registry:
</p><br /><hr class="insert" />
<a name="table_avp-codes"></a>
<table class="full" align="right" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Code Value</th><th align="left">Name</th><th align="left">Reference</th></tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NC-Request-Type</td>
<td align="left"><a class='info' href='#avp_NC-Request-Type'>Section&nbsp;7.7.1<span> (</span><span class='info'>NC-Request-Type AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Install</td>
<td align="left"><a class='info' href='#avp_NAT-Control-Install'>Section&nbsp;7.7.2<span> (</span><span class='info'>NAT-Control-Install AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Remove</td>
<td align="left"><a class='info' href='#avp_NAT-Control-Remove'>Section&nbsp;7.7.3<span> (</span><span class='info'>NAT-Control-Remove AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Definition</td>
<td align="left"><a class='info' href='#avp_NAT-Control-Definition'>Section&nbsp;7.7.4<span> (</span><span class='info'>NAT-Control-Definition AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Internal-Address</td>
<td align="left"><a class='info' href='#avp_NAT-Internal-Address'>Section&nbsp;7.7.5<span> (</span><span class='info'>NAT-Internal-Address AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-External-Address</td>
<td align="left"><a class='info' href='#avp_NAT-External-Address'>Section&nbsp;7.7.6<span> (</span><span class='info'>NAT-External-Address AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">Max-NAT-Bindings</td>
<td align="left"><a class='info' href='#avp_Max-NAT-Bindings'>Section&nbsp;7.7.7<span> (</span><span class='info'>Max-NAT-Bindings</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Binding-Rule</td>
<td align="left"><a class='info' href='#avp_NAT-Control-Binding-Rule'>Section&nbsp;7.7.8<span> (</span><span class='info'>NAT-Control-Binding-Rule AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">Duplicate-Session-Id</td>
<td align="left"><a class='info' href='#avp_Duplicate-Session-Id'>Section&nbsp;7.7.9<span> (</span><span class='info'>Duplicate-Session-Id AVP</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Record</td>
<td align="left"><a class='info' href='#avp_NAT-Control-Record'>Section&nbsp;8.2.1<span> (</span><span class='info'>NAT-Control-Record</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">NAT-Control-Binding-Status</td>
<td align="left"><a class='info' href='#avp_NAT-Control-Binding-Status'>Section&nbsp;8.2.2<span> (</span><span class='info'>NAT-Control-Binding-Status</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">Current-NAT-Bindings</td>
<td align="left"><a class='info' href='#avp_Current-NAT-Bindings'>Section&nbsp;8.2.3<span> (</span><span class='info'>Current-NAT-Bindings</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: AVP codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3"></a><h3>10.3.&nbsp;
AVP Values</h3>

<p>
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3.1"></a><h3>10.3.1.&nbsp;
Result-Code AVP Values</h3>

<p><a class='info' href='#sec_result-codes'>Section&nbsp;7.2<span> (</span><span class='info'>Additional Result-Code AVP Values</span><span>)</span></a> defines several new
          values for the Result-Code AVP for transient failures and permanent
          failures. IANA is requested to allocate the corresponding values
          from the ranges for transient (4xxx) and permantent (5xxx)
          failures.
</p><br /><hr class="insert" />
<a name="table_result-code-avps"></a>
<table class="full" align="right" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Code Value</th><th align="left">Name</th><th align="left">Reference</th></tr>
<tr>
<td align="left">to be assigned (4xxx)</td>
<td align="left">RESOURCE_FAILURE</td>
<td align="left"><a class='info' href='#sec_result-code-transient'>Section&nbsp;7.2.2<span> (</span><span class='info'>Transient Failures</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned (5xxx)</td>
<td align="left">UNKNOWN_BINDING_RULE_NAME</td>
<td align="left"><a class='info' href='#sec_result-code-permanent'>Section&nbsp;7.2.3<span> (</span><span class='info'>Permanent Failures </span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned (5xxx)</td>
<td align="left">BINDING_FAILURE</td>
<td align="left"><a class='info' href='#sec_result-code-permanent'>Section&nbsp;7.2.3<span> (</span><span class='info'>Permanent Failures </span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned (5xxx)</td>
<td align="left">MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT</td>
<td align="left"><a class='info' href='#sec_result-code-permanent'>Section&nbsp;7.2.3<span> (</span><span class='info'>Permanent Failures </span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned (5xxx)</td>
<td align="left">SESSION_EXISTS</td>
<td align="left"><a class='info' href='#sec_result-code-permanent'>Section&nbsp;7.2.3<span> (</span><span class='info'>Permanent Failures </span><span>)</span></a></td>
</tr>
<tr>
<td align="left">to be assigned (5xxx)</td>
<td align="left">INSUFFICIENT_CLASSIFIERS</td>
<td align="left"><a class='info' href='#sec_result-code-permanent'>Section&nbsp;7.2.3<span> (</span><span class='info'>Permanent Failures </span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: Result Code AVP Values&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.4"></a><h3>10.4.&nbsp;
Application IDs</h3>

<p>IANA is requested to allocate the following application ID using
        the next value from the 7-16777215 range.
</p>
<p>Registry:
</p><br /><hr class="insert" />
<a name="table_id-codes"></a>
<table class="full" align="right" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">ID Value</th><th align="left">Name</th><th align="left">Reference</th></tr>
<tr>
<td align="left">to be assigned</td>
<td align="left">Diameter NAT Control Application</td>
<td align="left"><a class='info' href='#sec-dnca'>Section&nbsp;4<span> (</span><span class='info'>Diameter NAT Control Application Session Establishment and Management</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4:  Diameter Application ID values&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Security Considerations</h3>

<p>Similar to what the Diameter QoS application (see <a class='info' href='#I-D.ietf-dime-diameter-qos'>[I&#8209;D.ietf&#8209;dime&#8209;diameter&#8209;qos]<span> (</span><span class='info'>Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;Diameter Quality of Service Application,&rdquo; February&nbsp;2010.</span><span>)</span></a>) does for authorization of
      QoS reservations, this document describes procedures for authorizing
      network address translation related attributes and parameters by an
      entity which is non-local to the device performing network address
      translation. The security considerations for the Diameter QoS
      application (see <a class='info' href='#I-D.ietf-dime-diameter-qos'>[I&#8209;D.ietf&#8209;dime&#8209;diameter&#8209;qos]<span> (</span><span class='info'>Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;Diameter Quality of Service Application,&rdquo; February&nbsp;2010.</span><span>)</span></a>
      section 11) apply in a similar way to the DNCA. Securing the information
      exchange between the authorizing entity (the DNCA manager) as well as
      the NAT device requires bilateral authentication of the involved
      parties, authorization of the involved parties to perform the required
      procedures and functions, as well as procedures to ensure integrity and
      confidentiality of the information exchange. DNCA makes use of the
      capabilities offered by Diameter as well as the underlying transport
      protocols to deliver on these requirements (see <a class='info' href='#sec-diameter-messages'>Section&nbsp;5.1<span> (</span><span class='info'>Securing Diameter Messages </span><span>)</span></a> ).
</p>
<p>It is assumed that the DNCA agent and DNCA manager are in the same
      domain and have a mutual trust set up. Authorization between the DNCA
      agent and DNCA manager is beyond the scope of this document.
</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank Jouni Korhonen, Avi Lior, Chris Metz,
      Hannes Tschofenig, Greg Weber, and Glen Zorn for their input on this
      document.
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Change History (to be removed prior to publication as an RFC) </h3>

<p>Changes from -00 to -01
</p>
<p></p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>new values for Result-Code AVP used - instead of
          Experimental-Result AVP
</dd>
<dt>b.</dt>
<dd>added support for transport specific binding (UDP/TCP)
</dd>
<dt>c.</dt>
<dd>added support for twice-NAT
</dd>
<dt>d.</dt>
<dd>clarified the use of the two different types of
          query-requests
</dd>
</dl></blockquote>

<p>Changes from -01 to -02
</p>
<p></p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>Reference to pull mode removed, session initiation event
          clarified in section 4.1
</dd>
<dt>b.</dt>
<dd>added Redirect-* AVPs in NCA command
</dd>
<dt>c.</dt>
<dd>Removed reference to Called-Station-Id AVP in NCR command
</dd>
<dt>d.</dt>
<dd>Editorial changes (shorted intro section
</dd>
<dt>e.</dt>
<dd>added support for bindings providing AFT (NAT64)
</dd>
</dl></blockquote>

<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ETSIES283034">[ETSIES283034]</a></td>
<td class="author-text">ETSI, &ldquo;Telecommunications and Internet Converged Services and
          Protocols for Advanced Networks (TISPAN),Network Attachment
          Sub-System (NASS),e4 interface based on the Diameter
          protocol.,&rdquo; September&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[RFC3588]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4675">[RFC4675]</a></td>
<td class="author-text">Congdon, P., Sanchez, M., and B. Aboba, &ldquo;<a href="http://tools.ietf.org/html/rfc4675">RADIUS Attributes for Virtual LAN and Priority Support</a>,&rdquo; RFC&nbsp;4675, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4675.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5777">[RFC5777]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M., and A. Lior, &ldquo;<a href="http://tools.ietf.org/html/rfc5777">Traffic Classification and Quality of Service (QoS) Attributes for Diameter</a>,&rdquo; RFC&nbsp;5777, February&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5777.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dime-diameter-qos">[I-D.ietf-dime-diameter-qos]</a></td>
<td class="author-text">Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A., and G. Zorn, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-diameter-qos-14.txt">Diameter Quality of Service Application</a>,&rdquo; draft-ietf-dime-diameter-qos-14 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dime-diameter-qos-14.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.narten-iana-considerations-rfc2434bis">[I-D.narten-iana-considerations-rfc2434bis]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-narten-iana-considerations-rfc2434bis-09.txt">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; draft-narten-iana-considerations-rfc2434bis-09 (work in progress), March&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-narten-iana-considerations-rfc2434bis-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.nishitani-cgn">[I-D.nishitani-cgn]</a></td>
<td class="author-text">Nishitani, T., Yamagata, I., Miyakawa, S., Nakagawa, A., and H. Ashida, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nishitani-cgn-03.txt">Common Functions of Large Scale NAT (LSN)</a>,&rdquo; draft-nishitani-cgn-03 (work in progress), November&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-nishitani-cgn-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4005">[RFC4005]</a></td>
<td class="author-text">Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;<a href="http://tools.ietf.org/html/rfc4005">Diameter Network Access Server Application</a>,&rdquo; RFC&nbsp;4005, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4005.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5624">[RFC5624]</a></td>
<td class="author-text">Korhonen, J., Tschofenig, H., and E. Davies, &ldquo;<a href="http://tools.ietf.org/html/rfc5624">Quality of Service Parameters for Usage with Diameter</a>,&rdquo; RFC&nbsp;5624, August&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5624.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="TS32299">[TS32299]</a></td>
<td class="author-text">&ldquo;3rd Generation Partnership Project; Technical Specification
          Group Service and System Aspects; Telecommunication management;
          Charging management; "Diameter charging applications", 3GPP TS
          32.299 Version 6.3.0.2,&rdquo; 2008.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Frank Brockners</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hansaallee 249, 3rd Floor</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">DUESSELDORF, NORDRHEIN-WESTFALEN  40549</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:fbrockne@cisco.com">fbrockne@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shwetha Bhandari</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cessna Business Park, Sarjapura Marathalli Outer Ring
          Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bangalore, KARNATAKA 560 087</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">India</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:shwethab@cisco.com">shwethab@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vaneeta Singh</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mavenir Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sharda Towers, 56/13 Nandidurga Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bangalore 560046</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">India</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vaneeta@mavenir.com">vaneeta@mavenir.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Victor Fajardo</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telcordia Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1 Telcordia Drive #1S-222</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Piscataway, NJ 08854</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vf0213@gmail.com">vf0213@gmail.com</a></td></tr>
</table>
</body></html>
