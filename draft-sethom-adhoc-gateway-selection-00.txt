

                                                                                       
                  Internet Draft                                       Kaouthar Sethom 
                                                                             INT-France 
                                                                           Hossam Afifi 
                  Document: draft-sethom-adhoc-gateway-                     INT-France 
                  selection-00.txt                                         Frank Y. Li 
                  Expires: January 2006                                   UniK, Norway 
                                                                       Andreas Hafslund 
                                                                          Thales,Norway 
                                                                                        
                                                                              July 2005 
                   
                   
                                                    
                                                    
                           Gateway Selection in Multi-homed Ad Hoc Networks 
                   
                   
               Status of this Memo 
                   
                   
                  By submitting this Internet-Draft, each author represents that any 
                  applicable patent or other IPR claims of which he or she is aware 
                  have been or will be disclosed, and any of which he or she becomes 
                  aware will be disclosed, in accordance with Section 6 of BCP 79. 
                   
                  This document is an Internet-Draft and is in full conformance with 
                  all provisions of Section 10 of RFC2026.  
                   
                  This document is an Internet-Draft and is NOT offered in accordance 
                  with Section 10 of RFC2026, and the author does not provide the IETF 
                  with any rights other than to publish as an Internet-Draft.  
                   
                  Internet-Drafts are working documents of the Internet Engineering 
                  Task Force (IETF), its areas, and its working groups.  Note that      
                  other groups may also distribute working documents as Internet-
                  Drafts. 
                   
                  Internet-Drafts are draft documents valid for a maximum of six months 
                  and may be updated, replaced, or obsoleted by other documents at any 
                  time.  It is inappropriate to use Internet-Drafts as reference 
                  material or to cite them other than as "work in progress." 
                   
                  The list of current Internet-Drafts can be accessed at 
                       http://www.ietf.org/ietf/1id-abstracts.txt 
                  The list of Internet-Draft Shadow Directories can be accessed at 
                       http://www.ietf.org/shadow.html. 
                   
                   
                
                
                Sethom                 Expires - January 2006                [Page 1] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                   
                   
                   
                   
                   
                   
               Abstract 
                   
                  When an ad hoc network is connected to the Internet, it is important 
                  for the mobile nodes to detect available gateways providing access to 
                  the Internet. Therefore, a gateway discovery and selection mechanism 
                  is required. Current ad hoc routing protocols have been extended to 
                  support gateway discovery. However, the selection process is based on 
                  the default gateway configuration. We here describe an extension to 
                  MANET protocols to enable the gateway selection according to usersÆ 
                  requirements, especially in the case where multiple gateways co-
                  exist.    
                   
                   
               Conventions used in this document 
                   
                  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
                  "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
                  document are to be interpreted as described in RFC-2119. 
                   
                   
               Table of Contents 
                   
                  1. Introduction...................................................2 
                  2. Terminology ...................................................4 
                  3. Protocol overview..............................................4 
                     3.1 GNA Message Format.........................................5 
                  4.  Addressing and auto-configuration considerations .............7 
                  5. IPv6 Considerations............................................8 
                  6.Security Considerations.........................................8 
                  References........................................................8 
                  AuthorsÆ Addresses................................................9 
                   
                   
               1. Introduction 
                   
                  An ad hoc network is a highly dynamical wireless network without the 
                  use  of  any  existing  network  infrastructure  or  centralised 
                  administration. An ad hoc network can operate either in a stand-alone 
                  mode or as a subnetwork to the global Internet. In the latter case, 
                  an ad hoc user does not only demand for Internet connectivity but 
                  also a certain level of QoS. To provide this connectivity, some ad 
                  hoc nodes act as ôgatewaysö which can be used by mobile terminals to 
                  seamlessly  communicate  with  other  nodes  in  external  networks. 
                
                
                Sethom                 Expires - January 2006                [Page 2] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                  Therefore, a user û even inside an ad hoc network - must be able to 
                  discover the gateway, and/or to select an optimal gateway in the 
                  presence  of  multiple  gateways,  according  to  its  application 
                  requirements. 
                   
                  In a simpler case where there is only one gateway available, the 
                  problem is simply how to discover the gateway and configure a 
                  globally valid address to the mobile node for incoming and outgoing 
                  traffic. In a more complicated case where several gateways co-exist, 
                  i.e., for multi-homed ad hoc networks, the availability of multiple 
                  gateways  provides  the  network  with  higher  robustness  and  more 
                  flexibility  for  global  Internet  connectivity.  Therefore,  it  is 
                  important, especially for a multi-homed network, to discover and 
                  select a gateway that is the æoptimalÆ one among all available 
                  gateways, according to certain criteria.   
                   
                  Methods  for  Internet  gateway  discovery  include  reactive  [1], 
                  proactive [2], or hybrid [3] approach. For multi-homed ad hoc 
                  networks, one specific problem is related to which gateway(s) a node 
                  should use. The challenge stems from the need to inform ad hoc nodes 
                  about available gateways and their associated capabilities in an 
                  infrastructure-less   and   extremely   dynamic   environment.   A 
                  straightforward solution for gateway selection is to select the 
                  gateway that has the shortest number of hops to the mobile node as 
                  the æworkingÆ gateway. This means that when a mobile node is closer 
                  to a new gateway than the previous one, the mobile node will usually 
                  switch to the second gateway for the global connectivity. If the 
                  mobile node already has a data connection up and running, this can 
                  impose problems. This is especially true when the gateways have 
                  deployed NAT or some specific security mechanisms. Mechanisms for 
                  gateway connection in multi-homed proactive ad hoc networks were 
                  discussed in [4].  Generally speaking, selecting a gateway based on 
                  only the shortest number of hops does not appear to be good enough. 
                  Another alternative is to consider both the distance in number of 
                  hops between mobile nodes and gateways and the traffic load of 
                  available gateways. The one that has the minimum weighted sum of 
                  Euclidean distance for these two factors will be selected as the 
                  gateway [5]. Other considerations for gateway selecting include load 
                  and congestion status in the gateways, delay for certain types of 
                  traffic flow, session continuity when shifting gateways etc. 
                   
                  In this draft, we present a gateway selection protocol for multi-
                  homed ad hoc networks. Other issues related to multi-homing for a 
                  MANET, such as addressing and auto-configuration, NAT deployed on the 
                  gateways, the use of Mobile IP, and security mechanisms, are not 
                  addressed in this draft. 
                   
                   

                
                
                Sethom                 Expires - January 2006                [Page 3] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
               2. Terminology 
                   
                  Multi-homed ad hoc network  
                   
                  An ad-hoc network which has more than one gateway connecting it to 
                  the global Internet. 
                   
                   
               3. Protocol overview 
                   
                  When a node wishes to offer Internet connectivity to other nodes in a 
                  MANET, it sends (or disseminates) Gateway and Network Association 
                  (GNA) messages. In the case of a proactive routing protocol this is 
                  done periodically.  A selected set of nodes that received a GNA 
                  packet shall forward it to their neighbours. GNA message is in this 
                  way flooded onto the entire ad hoc network. Duplicate retransmissions 
                  will be eliminated locally (i.e., each node maintains a duplicate 
                  table to prevent transmitting the same message twice). However, in 
                  the case of a reactive protocol the generation of GNA message is 
                  generally in response to some previous gateway discovery request 
                  message.  The GNA message follows then down the reverse path of the 
                  associated request to reach the querying node. 
                   
                  At each node in the network, all received GNA packets are registered 
                  in the gateway table. This information repository is re-freshed 
                  periodically. This means that entries are deleted as soon as their 
                  validity time expires. 
                   
                  GNA routing is done hop-by-hop. This means that when A (Figure 1) 
                  receives from B a GNA announcing connectivity to the Internet. It 
                  adds a route in its gateway table with the next-hop on the route to 
                  the gateway i.e B as the actual gateway and a route metric equal to 
                  2. 
                   
                                                      
                                  A   ---   B  ---   G  ------ Internet 
                                                    
                                                    
                                         Figure 1: GNA routing 
                                                      
                   
                   
                  When a GNA message is received, the node updates its gateway table 
                  either by updating an existing entry, or if no entry exists for the 
                  gateway address, creating a new entry. 
                   
                  All nodes in the ad hoc network must support GNA processing and route 
                  calculation for the actual GNA routing to work. If a node routes 
                
                
                Sethom                 Expires - January 2006                [Page 4] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                  Internet  traffic  to  an  intermediate  neighbor  based  on  GNA 
                  information, the intermediate neighbor must also have set up an 
                  Internet route for the traffic to be routed. Therefore, in the 
                  general case, the neighbor must support GNA functioning. 
                   
                  The present document is presented with IPv4 addresses. Considerations 
                  regarding IPv6 are given in section 5. 
                   
                   
               3.1 GNA Message Format  
                   
                  A GNA message contains triplets of (router interface characteristic, 
                  network address, netmask). 
                   
                  The proposed format of an GNA-message is (omitting IP and    UDP 
                  headers): 
                   
                  
                     0                   1                   2                   3 
                    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                Length         |    Message Sequence Number    | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   | Message Type |     Vtime      |  Time To Live |   Hop Count   | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                      Originator Address                       | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |Interface Type|     Cost       |      Throughput               | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                         Network Address                       | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                             Netmask                           | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |Interface Type|     Cost        |      Throughput              | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                         Network Address                       | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                             Netmask                           | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   |                              ...                              | 
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   
                   
                  Fields: 
                   

                
                
                Sethom                 Expires - January 2006                [Page 5] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                   
                    Length             The length (in bytes) of the packet 
                     
                     
                     
                    Sequence Number    The Message Sequence Number MUST be incremented 
                                       by  one  each  time  a  new  GNA  message  is 
                                       transmitted.  A separate Packet Sequence Number 
                                       is  maintained  for  each  interface  such  that 
                                       packets  transmitted  over  an  interface  are 
                                       sequentially enumerated. 
                     
                     
                     
                    Message Type       Set to GNA_MESSAGE 
                     
                     
                     
                    Vtime              This field indicates for how long time after 
                                       reception a node   MUST consider the information 
                                       contained in the message as   valid, unless a 
                                       more recent update to the information is 
                                       received. 
                     
                     
                     
                    TTL field          May be set from 1 to 255.  
                     
                     
                     
                    Hop Count         This field contains the number of hops a message 
                                       has attained. ItÆs particularly interesting to 
                                       have this information in the case of an adhoc 
                                       network;  to  know  how  far  the  gateway  is. 
                                       Initially, this is set to '0' by the originator 
                                       of the message 
                     
                     
                     
                    Originator Address   This field contains the address of the node, 
                                       which has         originally generated the GNA 
                                       message i.e the gateway.  This field SHOULD NOT 
                                       be confused with the source address from the IP 
                                       header, which is changed each time to the 
                                       address of the intermediate interface which is 
                                       re-transmitting this message.  The Originator 
                
                
                Sethom                 Expires - January 2006                [Page 6] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                                       Address  field  MUST  *NEVER*  be  changed  in 
                                       retransmissions 
                     
                     
                     
                    Interface Type     This field indicates the technology used by the 
                                       gateway Egress interface. Example Bluetooth, 
                                       802.11, Ethernet, UMTS à 
                     
                                       Type values can be encoded as follows: 
                                        
                                              0x00      Ethernet (default) 
                                              0x01      Bluetooth  
                                              0x10      UMTS 
                                              0x11      802.16 
                                               à 
                     
                     
                    Cost         This field indicates the communication cost 
                                       associated  with  the  use  of  the  interface 
                                       described in the interface Type field.  This 
                                       parameter can be a combination of different 
                                       metrics such as offered QoS, security issues, 
                                       price and possibly other preferences. 
                     
                     
                     
                    Throughput      This field indicates the throughput associated 
                                       with the gateway egress interface i.e. nominal 
                                       bandwidth/capacity/datarate. 
                     
                     
                     
                    Network Address   The network address associated with the egress 
                                       interface described in the interface Type field. 
                     
                     
                     
                    Netmask            The netmask, corresponding to the network 
                                       address immediately above. 
                   
                    
                   
                   
               4. Addressing and auto-configuration considerations  
                   

                
                
                Sethom                 Expires - January 2006                [Page 7] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                  When a mobile node has discovered a gateway, it will need to 
                  configure an address related to this gateway. Many suggestions assume 
                  that the mobile node will need to configure an address from the 
                  gatewayÆs network prefix. In this way, the node will be in an address 
                  subnetwork of that gateway. This new address must then be inserted 
                  into the ad hoc routing so the node is reachable on this address. The 
                  mobile node should also be reachable on other temporary addresses, 
                  and its home address. This imposes several more problems for the ad 
                  hoc routing. There exist several Internet-Drafts, e.g., [6][7], on 
                  addressing and auto-configuration in MANETs. Therefore, these issues, 
                  although closely associated with the gateway selection problems, are 
                  not discussed in this draft. 
                   
                   
               5. IPv6 Considerations 
                   
                   
                  All the operations and parameters described in this document used by 
                  GNA for IP version 4 are the same as those used by GNA for IP version 
                  6.  To operate with IP version 6, the only required change is to 
                  replace the IPv4 addresses with IPv6 addresses. 
                   
                   
               6. Security Considerations 
                   
                  This memo does not specify any security considerations. 
                   
                   
               References 
                   
                   
                   
                     [1] J. Jonsson, F. Alriksson, T. Larsson, P. Johansson, and G. 
                         Maguire, ôMIPMANET û Mobile IP for Mobile Ad Hoc Networksö, 
                         Proceedings of the first ACM Annual Workshop on Mobile Ad Hoc 
                         Networking and Computing (MobiHoc), 2000. 
                   
                   
                     [2]  T.  Clausen, and P.  Jacquet, ôOptimized Link State Routing 
                         Protocolö, RFC 3626, IETF, October 2003. 
                   
                   
                    [3] P. Ratanchandani, and R. Kravets, ôA Hybrid Approach to 
                         Internet Connectivity for Mobile Ad Hoc Networksö, Proceedings 
                         of IEEE Wireless Communications and Networking Conference 
                         (WCNC), March 2003.  
                   
                    

                
                
                Sethom                 Expires - January 2006                [Page 8] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                   
                    [4]  P. Engelstad, A. T°nnesen, A. Hafslund, and G. Egeland, 
                         öInternet Connectivity for Multi-Homed Proactive Ad Hoc 
                         Networksö, Proceedings of the IEEE Int. Conf. on 
                         Communications (ICC), June 2004. 
                   
                   
                     [5]  H. Ammari and H. El-Rewini, ôUsing Hybrid Selection Schemes 
                         to Support QoS when Providing Multihop Wireless Internet 
                         Access to Mobile Ad Hoc Networksö, Proceedings of the First 
                         IEEE Int. Conf.on Quality of Service in Heterogeneous 
                         Wired/Wireless Networks (QSHINE), Oct. 2004. 
                   
                   
                     [6]  C.  Adjih,  S.  Boudjit,  P.  Jacquet,  A.  Laouiti,  and  P. 
                         Muhlethaler,  ôAddress  autoconfiguration  in  Optimized  Link 
                         State Routing Protocolö, Internet-Draft (draft-laouiti-manet-
                         olsr-address-autoconf-00.txt), work-in-progress, Feb. 2005. 
                   
                   
                     [7]  T.  Clausen,  and  E.  Baccelli,  ôSimple  MANET  Address 
                         Autoconfigurationö,    Internet-Draft    (draft-clausen-manet-
                         address-autoconf-00.txt), work-in-progress, Jan. 2005. 
                   
                   
                   
               AuthorsÆ Addresses 
                   
                  Kaouthar Sethom 
                  INT-France 
                  9 rue charles fourrier 91011 evry cedex France 
                  Email: kaouthar.sethom@int-evry.fr 
                    
                  Hossam Afifi 
                  INT-France 
                  9 rue charles fourrier 91011 evry cedex France 
                  Email: hossam.afifi@int-evry.fr 
                   
                  Frank Y. Li 
                  UniK û University Graduate Center 
                  N-2027 Kjeller 
                  Norway 
                  Email: frank.li@unik.no 
                   
                  Andreas Hafslund 
                   Thales Norway AS 
                  P.O Box 22 Ûkern 
                  N-0508 Oslo, Norway 
                
                
                Sethom                 Expires - January 2006                [Page 9] 
                          Gateway Selection in Multi-homed Ad Hoc Networks  July 2005 
                
                
                  Email: andreha@unik.no 
                   
                   
                   
                   
                  Copyright (C) The Internet Society (2005) 
                   
                  This document is subject to the rights, licenses and restrictions 
                  contained in BCP 78, and except as set forth therein, the authors 
                  retain all their rights."  
                   
                  This document and the information contained herein are provided on an 
                  "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
                  OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET 
                  ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, 
                  INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE 
                  INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
                  WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 































                
                
                Sethom                 Expires - January 2006               [Page 10] 
