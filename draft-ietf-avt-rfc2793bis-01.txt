


AVT Working Group                                          G. Hellstrom
Internet Draft                                               Omnitor AB
<draft-ietf-avt-rfc2793bis-01.txt>
Expires: June 2004                                             P. Jones
                                                    Cisco Systems, Inc.
                                                          December 2003



                     RTP Payload for Text Conversation


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC 2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
        http://www.ietf.org/ietf/1id-abstracts.txt
   The list of Internet-Draft Shadow Directories can be accessed at
        http://www.ietf.org/shadow.html.

   [Note to RFC Editor: All references to RFC XXXX are to be replaced by
   references to the RFC number of this memo, when published. All
   references to RFC YYYY are to be replaced by references to the
   document that registers the text/red MIME type.]

Abstract

   This memo describes how to carry real time text conversation session
   contents in RTP packets. Text conversation session contents are
   specified in ITU-T Recommendation T.140 [1].

   Two payload formats are described. One for transmitting text on a
   separate RTP session dedicated for the transmission of text, and one
   for transmitting audio and text data within one single RTP session.

   This RTP payload description contains an optional possibility to
   include redundant text from already transmitted packets in order to


Hellstrom                Expires - June 2004                 [Page 1]

                  RTP Payload for Text Conversation     December 2003


   reduce the risk of text loss caused by packet loss. The redundancy
   coding follows RFC 2198.


Table of Contents

     1. Introduction..................................................2
     2. Conventions used in this document.............................4
     3. Usage of RTP..................................................4
        3.1 Payload Format for Transmission of text/t140 Data.........4
        3.2 Payload Format for Transmission of audio/t140 Data........4
        3.3 The "T140block"...........................................5
        3.4 Use of Redundancy.........................................5
        3.5 Use of Forward Error Correction...........................5
        3.6 Synchronization of Text with Other Media..................5
        3.7 RTP packet header.........................................6
        3.8 Additional Headers........................................6
        3.9 T.140 Text Structure......................................7
     4. Recommended Procedure.........................................7
        4.1 Recommended Basic Procedure...............................8
        4.2 Recommended Procedure for Compensation for Lost Packets...8
        4.3 Recommended Procedure for Compensation for Packets Out of
            Order.....................................................8
        4.4 Transmission During "Silent Periods" when Redundancy is
            Used......................................................9
     5. SDP Attribute for Character Transmission Rate.................9
     6. Examples.....................................................10
        6.1 RTP Packetization Examples for the text/t140 format......10
        6.2 RTP Packetization Examples for the audio/t140 format.....12
        6.3 SDP Examples.............................................14
     7. Security Considerations......................................15
     8. MIME Media Type Registrations................................15
        8.1 Registration of MIME Media Type text/t140................15
        8.2 Registration of MIME Media Type audio/t140...............16
     9. Authors' Addresses...........................................17
     10. Acknowledgements............................................17
     11. Normative References........................................17
     12. Informative References......................................18
     13. Intellectual Property Right Considerations..................18
     14. Full Copyright Statement....................................18


1. Introduction

   This document defines two payload types for carrying text
   conversation session contents in RTP packets. Text conversation
   session contents are specified in ITU-T Recommendation T.140 [1].


Hellstrom                Expires - June 2004                 [Page 2]

                  RTP Payload for Text Conversation     December 2003


   Text conversation is used alone or in connection to other
   conversational facilities such as video and voice, to form multimedia
   conversation services. Text in text conversation sessions is sent
   character-by-character as soon as it is available, or with a small
   delay for buffering.

   The text is supposed to be entered by human users from a keyboard,
   handwriting recognition, voice recognition or any other input method.
   The rate of character entry is usually at a level of a few characters
   per second or less, though text may be transmitted at a much higher
   rate (e.g., automated systems or "copy and paste" operations may
   produce a lot of text very rapidly). Therefore, it is generally
   expected number of characters to transmit is low. Only one or a few
   new characters are expected to be transmitted with each packet.

   T.140 specifies that text and other T.140 elements MUST be
   transmitted in ISO 10 646-1 code with UTF-8 transformation. That
   makes it easy to implement internationally useful applications, and
   to handle the text in modern information technology environments.
   The payload of an RTP packet following this specification consists of
   text encoded according to T.140 without any additional framing.  A
   common case will be a single ISO 10646 character, UTF-8 encoded.

   T.140 requires the transport channel to provide characters without
   duplication and in original order.  Text conversation users expect
   that text will be delivered with no or a low level of lost
   information. If lost information can be indicated, the willingness to
   accept loss is expected to be higher.

   Therefore a mechanism based on RTP is specified here. It gives text
   arrival in correct order, without duplications, and with detection
   and indication of losses. It also includes an optional possibility to
   repeat data for redundancy to lower the risk of loss. Since packet
   overhead is usually much larger than the T.140 contents, the increase
   in channel load by the redundancy scheme is minimal.

   By using RTP for text transmission in a multimedia conversation
   application, uniform handling of text and other media can be achieved
   in, as examples, conferencing systems, firewalls, and network
   translation devices.  This, in turn, eases the design and increases
   the possibility for prompt and proper media delivery.

   This document updates and extends RFC 2793.  The text clarifies
   ambiguities in RFC 2793, improves on the specific implementation
   requirements learned through development experience, gives explicit
   usage examples, and introduces a method of transporting text
   interleaved with voice within the same RTP session.




Hellstrom                Expires - June 2004                 [Page 3]

                  RTP Payload for Text Conversation     December 2003


2. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [4].

3. Usage of RTP

   Two payload formats for real time text transmission with RTP are
   described in this section, one for general text conversation use and
   another for use between gateways.

3.1 Payload Format for Transmission of text/t140 Data

   A text conversation RTP packet as specified by the text/t140 payload
   format consists of an RTP header as defined in RFC 3550 [2] followed
   immediately by a block of T.140 data, referred to as a "T140block"
   (see section 3.3).  There is no additional header specific to this
   payload format.

   The text/t140 format is primarily used when text is transmitted on a
   separate RTP session dedicated for the transmission of text and not
   shared with other media, such as audio, DTMF, etc.  IP textphone
   devices and IP multimedia conversation devices and network elements
   involved in communication with such devices most commonly use this
   format.

3.2 Payload Format for Transmission of audio/t140 Data

   A text conversation RTP packet as specified by the audio/t140 payload
   format consists of an RTP header as defined in RFC 3550 followed
   immediately by a 16-bit "t140block counter" (with the most
   significant bit transmitted first) followed by a "T140block" (see
   section 3.3).  There is no additional header specific to this payload
   format.

   The T140block counter MUST be initialized to zero the first time that
   a packet containing a T140block is transmitted and MUST be
   incremented by 1 each time that a new block is transmitted.  Once the
   counter reaches the value 0xFFFF, the counter is reset to 0 the next
   time the counter is incremented.  This T140block counter may be
   utilized to detect lost blocks.

   For the purposes of readability, the remainder of this document only
   refers to the T140block without making explicit reference to the
   T140block counter.  Readers should understand that when using the
   audio/t140 format, the T140block counter MUST always precede the
   actual T140block, including redundant data transmissions.



Hellstrom                Expires - June 2004                 [Page 4]

                  RTP Payload for Text Conversation     December 2003


   The primary purpose for the audio/t140 payload specification is to
   allow gateways that are interconnecting two PSTN networks to
   interleave, through a single RTP session, audio and text data
   received on the PSTN circuit.  This is comparable to the way in which
   DTMF is extracted and transmitted within an RTP session [9].

3.3 The "T140block"

   The T140block contains one or more T.140 code elements as specified
   in [1].  Most T.140 code elements are single ISO 10646 [5]
   characters, but some are multiple character sequences.  Each
   character is UTF-8 encoded [6] into one or more octets. This implies
   that each block MUST contain an integral number of UTF-8 encoded
   characters regardless of the number of octets per character. It also
   implies that any composite character sequence (CCS) SHOULD be placed
   within one block.

3.4 Use of Redundancy

   The T140blocks MAY be transmitted redundantly according to the
   payload format defined in RFC 2198 [3].  In that case, the RTP header
   is followed by one or more redundant data block headers, the same
   number of redundant data fields carrying T140blocks from previous
   packets, and finally the new (primary) T140block for this packet.

3.5 Use of Forward Error Correction

   When transmitting text via RTP it is possible to use other robustness
   mechanisms, including Forward Error Correction (FEC) as described in
   RFC 2733 [8].  In such applications, the same mechanisms may be
   employed with text as with other media formats.

3.6 Synchronization of Text with Other Media

   Usually, each medium in a session utilizes a separate RTP stream. In
   that case, if synchronization of the text and other media packets is
   important, the streams MUST be associated when the sessions are
   established and the streams MUST share the reference clock (refer to
   the description of the timestamp field as it relates to
   synchronization in section 5.1 of RFC 3550).  Association of RTP
   streams is dependent on the particular session application and is
   outside the scope of this document.

   When audio/t140 is used, it is generally transmitted as interleaved
   packets between voice packets or other kinds of audio packets.  One
   should observe the RTP timestamps of the voice, text, or other audio
   packets in order to reproduce the stream correctly when playing out
   the audio.  Note, also, that incoming text from a PSTN circuit might
   be at a higher bit-rate than can be played out on an egress PSTN


Hellstrom                Expires - June 2004                 [Page 5]

                  RTP Payload for Text Conversation     December 2003


   circuit.  As such, it is possible that, on the egress side, a gateway
   may not complete the play out of the text packets before it is time
   to play the next voice packet.  Given that this application is
   primarily for the benefit of deaf users utilizing PSTN textphone
   devices, it is strongly RECOMMENDED that all received text packets be
   properly reproduced on the egress gateway before considering any
   subsequent other audio packets.  If necessary, voice and other audio
   packets should be discarded in order to properly reproduce the text
   signals on the PSTN circuit.

3.7 RTP packet header

   Each RTP packet starts with a fixed RTP header. The following fields
   of the RTP fixed header are used for T.140 text streams:

   Payload Type (PT): The assignment of an RTP payload type is specific
     to the RTP profile under which this payload format is used.  For
     profiles that use dynamic payload type number assignment, this
     payload format can be identified by the MIME types "text/T140" and
     "audio/T140" (see section 8).  If redundancy is used per RFC 2198,
     another payload type number needs to be provided for the redundancy
     format. MIME types for identifying RFC 2198 are available in RFC
     3555 and RFC YYYY.

   Sequence number: The definition of sequence numbers is available in
     RFC 3550 [2]. When transmitting text using the payload format for
     text/t140, it is used for detection of packet loss and packets out
     of order, and can be used in the process of retrieval of redundant
     text, reordering of text and marking missing text.  (Character loss
     is detected through the T140block counter when using the audio/t140
     payload format.)

   Timestamp: The RTP Timestamp encodes the approximate instance of
     entry of the primary text in the packet. A clock frequency of 1000
     Hz MUST be used for text/t140.  For audio/T140, the clock frequency
     MAY be set to any value. If not specified by out of band mechanism,
     the frequency value is generally set to be 8000 Hz, as that is most
     common for audio.  Sequential packets MUST NOT use the same
     timestamp. Since packets do not represent any constant duration,
     the timestamp cannot be used to directly infer packet losses.

3.8 Additional Headers

   There are no additional headers defined specific to this payload
   format.

   When redundant transmission of the data according to RFC 2198 is
   desired, the RTP header is followed by one or more redundant data
   block headers, one for each redundant data block to be included.


Hellstrom                Expires - June 2004                 [Page 6]

                  RTP Payload for Text Conversation     December 2003


   Each of these headers provides the timestamp offset and length of the
   corresponding data block plus a payload type number indicating this
   payload format ("T140").  Redundant data older than 16383 divided by
   the clock frequency MUST not be transmitted.

3.9 T.140 Text Structure

   T.140 text is UTF-8 coded as specified in T.140 with no extra
   framing. When using the format with redundant data, the transmitter
   MAY select a number of T140block generations to retransmit in each
   packet. A higher number introduces better protection against loss of
   text but increases the data rate.

   Since packets are not generated at regular intervals and since the
   audio/t140 format allows for other media to be interleaved, the
   timestamp is not sufficient to identify a packet in the presence of
   loss unless extra information is provided. Since sequence numbers are
   not provided in the redundant header, some additional rules must be
   followed to allow the redundant data corresponding to missing primary
   data to be merged properly into the stream of primary data T140blocks
   when using the text/t140 payload format.  While the audio/t140
   payload format does not rely on the sequence numbers of packets to
   identify missing data, the same rules apply.  They are:

     - Each redundant data block MUST contain the same data as a
       T140block previously transmitted as primary data, and be
       identified with a timestamp offset equating to the original
       timestamp for that T140block.
     - The redundant data MUST be placed in age order with most recent
       redundant T140block last in the redundancy area.
     - All T140blocks from the oldest desired generation up through the
       generation immediately preceding the new (primary) T140block
       MUST be included.

   For the text/t140 payload format, these rules allow the sequence
   numbers for the redundant T140blocks to be inferred by counting
   backwards from the sequence number in the RTP header.  The result
   will be that all the text in the payload will be contiguous and in
   order.

4. Recommended Procedure

   This section contains RECOMMENDED procedures for usage of the payload
   format.  Based on the information in the received packets, the
   receiver can:

     - reorder text received out of order.
     - mark where text is missing because of packet loss.
     - compensate for lost packets by using redundant data.


Hellstrom                Expires - June 2004                 [Page 7]

                  RTP Payload for Text Conversation     December 2003



4.1 Recommended Basic Procedure

   Packets are transmitted only when there is valid T.140 data to
   transmit. The sequence number is used for sequencing of T.140 data.

   T.140 specifies that T.140 data MAY be buffered before transmission
   with a maximum buffering time of 500 ms. In order to keep the maximum
   bit rate usage for text at a reasonable level, it is RECOMMENDED to
   buffer T.140 data for transmission in 300 ms intervals. This time is
   selected so that text users will still perceive a real time text
   flow.

   On reception of text/t140 data, the RTP sequence number is compared
   with the sequence number of the last correctly received packet.  On
   receipt of audio/t140 data, the T140block counter is compared with
   the T140block counter of the last correctly received packet.  If they
   are consecutive, the (only or primary) T140block is retrieved from
   the packet.

4.2 Recommended Procedure for Compensation for Lost Packets

   For reduction of data loss in case of packet loss, redundant data MAY
   be included in the packets following to the procedures in RFC 2198.
   If network conditions are not known, it is RECOMMENDED to use three
   redundant T140blocks in each packet. If there is a gap in the RTP
   sequence numbers (for text/t140) or T140block counters (audio/t140),
   and redundant T140blocks are available in a subsequent packet, the
   sequence numbers or T140block counters for the redundant T140blocks
   should be inferred by counting backwards from the sequence number or
   T140block counter in the RTP header for that packet.  If there are
   redundant T140blocks with sequence numbers matching those that are
   missing, the redundant T140blocks may be substituted for the missing
   T140blocks.

   As an alternative (or in addition) to redundancy, Forward Error
   Correction mechanisms may be used when transmitting text, as per RFC
   2733.

   Both for the case when redundancy or FEC is used and not used,
   missing data SHOULD be marked by insertion of a missing text marker
   in the received stream for each missing T140block, as specified in
   ITU-T T.140 Addendum 1 [1].

4.3 Recommended Procedure for Compensation for Packets Out of Order

   For protection against packets arriving out of order, the following
   procedure MAY be implemented in the receiver.  If analysis of a
   received packet reveals a gap in the sequence and no redundant data


Hellstrom                Expires - June 2004                 [Page 8]

                  RTP Payload for Text Conversation     December 2003


   is available to fill that gap, the received packet SHOULD be kept in
   a buffer to allow time for the missing packet(s) to arrive.  It is
   RECOMMENDED that the waiting time be limited to 0.5 seconds.

   If a packet with a T140block belonging to the gap arrives before the
   waiting time expires, this T140block is inserted into the gap and
   then consecutive T140blocks from the leading edge of the gap may be
   consumed.  Any T140block which does not arrive before the time limit
   expires should be treated as lost.

4.4 Transmission During "Silent Periods" when Redundancy is Used

   When using the redundancy transmission scheme, and there is redundant
   data, but no new T.140 data to transmit after the transmit buffering
   interval described in section 4.1 has passed, a packet MUST be
   transmitted containing a zero-length primary T140block and the
   properly positioned redundant data.  When using the audio/t140
   payload format with an empty T140block, the T140block counter MUST
   also be absent (as there is no actual T140block).

   When using the text/t140 payload format, any zero-length T140blocks
   that are sent as primary data MUST be included as redundant
   T140blocks on subsequent packets just as normal text T140blocks would
   be so that sequence number inference for the redundant T140blocks
   will be correct, as explained in section 3.9.

   When using the audio/t140 payload format, zero-length T140blocks sent
   as primary data MUST NOT be included as redundant T140blocks, as it
   would simply be a waste of bandwidth to send them.

   Redundancy for the last T140block MUST NOT be implemented by
   repeatedly transmitting the same packet (with the same sequence
   number) because this will cause the packet loss count, as reported in
   RTCP, to decrement.

5. SDP Attribute for Character Transmission Rate

   In some cases, it is necessary to limit the rate at which characters
   are transmitted.  While the "b=" SDP attribute could be used to limit
   the rate of the RTP session, it may be that only the text stream in
   an interleaved audio/text session needs special handling.  For
   example, when a PSTN gateway is interworking between an IP device
   (not necessarily a textphone) and a PSTN textphone, it may be
   necessary to limit the character rate from the IP device in order to
   avoid throwing away characters at the PSTN gateway.  At the same
   time, no explicit bit rate restriction is necessarily applied to the
   audio stream. Despite the fact that character rate may be limited in
   a session, the instantaneous reception rate might be higher due to
   jitter.


Hellstrom                Expires - June 2004                 [Page 9]

                  RTP Payload for Text Conversation     December 2003



   To control the character transmission rate, the "fmtp" attribute [7]
   is used with the following syntax:

       a=fmtp:<format> cps=<integer>

   The <format> field is populated with the payload type that is used
   for text.  The <integer> field contains an integer representing the
   maximum number of characters that may be received per second.

   Devices in receipt of this parameter MUST adhere to the request to
   apply by transmitting characters at a rate at or below the specified
   <integer> value.

6. Examples

6.1 RTP Packetization Examples for the text/t140 format.

      This is an example of a T140 RTP packet without redundancy.
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X| CC=0  |M|   T140 PT   |       sequence number         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      timestamp (1000Hz)                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +                      T.140 encoded data                       +
      |                                                               |
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      This is an example of an RTP packet with one redundant T140block.
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X| CC=0  |M|  "RED" PT   |   sequence number of primary  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               timestamp of primary encoding "P"               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  timestamp offset of "R"  | "R" block length  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |0|   T140 PT   |                                               |
      +-+-+-+-+-+-+-+-+                                               +
      |                                                               |


Hellstrom                Expires - June 2004                [Page 10]

                  RTP Payload for Text Conversation     December 2003


      +               "R" T.140 encoded redundant data                +
      |                                                               |
      +                                               +---------------+
      |                                               |               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
      |                "P" T.140 encoded primary data                 |
      +                                                               +
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      This is an example of an RTP packet with one redundant T140block
      using text/t140 payload format.  The primary data block is
      empty, which is the case when transmitting a packet for the
      sole purpose of forcing the redundant data to be transmitted
      in the absence of any new data.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X| CC=0  |M|  "RED" PT   |   sequence number of primary  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               timestamp of primary encoding "P"               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  timestamp offset of "R"  | "R" block length  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |0|   T140 PT   |                                               |
      +-+-+-+-+-+-+-+-+                                               +
      |                                                               |
      +               "R" T.140 encoded redundant data                +
      |                                                               |
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      As a follow-on to the previous example, this example shows the
      next RTP packet in the sequence which does contain a real
      T140block when using the text/t140 payload format.  Note that the
      empty block is present in the redundant transmissions of the
      text/t140 payload format.  This example shows 2 levels of
      redundancy and one primary data block.  The value of the "R2
      block length" would be set to zero in order to
      represent the empty T140block.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


Hellstrom                Expires - June 2004                [Page 11]

                  RTP Payload for Text Conversation     December 2003


      |V=2|P|X| CC=0  |M|  "RED" PT   |   sequence number of primary  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               timestamp of primary encoding "P"               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  timestamp offset of "R1" | "R1" block length |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  timestamp offset of "R2" | "R2" block length |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |0|   T140 PT   |                                               |
      +-+-+-+-+-+-+-+-+                                               +
      |                                                               |
      +               "R1" T.140 encoded redundant data               +
      |                                                               |
      +                                               +---------------+
      |                                               |               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
      |                "P" T.140 encoded primary data                 |
      +                                                               +
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

6.2 RTP Packetization Examples for the audio/t140 format

      This is an example of a T140 RTP packet without redundancy.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X| CC=0  |M|   T140 PT   |       sequence number         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      timestamp (8000Hz)                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     T140block Counter         |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
      +                      T.140 encoded data                       +
      |                                                               |
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      This is an example of an RTP packet with one redundant T140block
      using audio/t140 payload format.  The primary data block is
      empty, which is the case when transmitting a packet for the
      sole purpose of forcing the redundant data to be transmitted


Hellstrom                Expires - June 2004                [Page 12]

                  RTP Payload for Text Conversation     December 2003


      in the absence of any new data.  Note that since this is the
      audio/t140 payload format, the redundant block of T.140 data is
      immediately preceded with a T140block Counter.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X| CC=0  |M|  "RED" PT   |   sequence number of primary  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               timestamp of primary encoding "P"               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  timestamp offset of "R"  | "R" block length  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |0|   T140 PT   |  T140block Counter            |               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
      |                                                               |
      +               "R" T.140 encoded redundant data                +
      |                                                               |
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      As a follow-on to the previous example, this example shows the
      next RTP packet in the sequence which does contain a new real
      T140block when using the audio/t140 payload format.  This
      example has 2 levels of redundancy and one primary data block.
      Since the previous primary block was empty, no redundant data
      is included for that block.  This is because when using the
      audio/t140 payload format, any previously transmitted "empty"
      T140blocks are NOT included as redundant data in subsequent
      packets.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X| CC=0  |M|  "RED" PT   |   sequence number of primary  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               timestamp of primary encoding "P"               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  timestamp offset of "R1" | "R1" block length |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |1|   T140 PT   |  T140block Counter            |               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
      |                                                               |
      +               "R1" T.140 encoded redundant data               +


Hellstrom                Expires - June 2004                [Page 13]

                  RTP Payload for Text Conversation     December 2003


      |                                                               |
      +                                               +---------------+
      |                                               |    T140block_ |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Counter       |     "P" T.140 encoded primary data            |
      +-+-+-+-+-+-+-+-+                                               +
      |                                                               |
      +                                               +---------------+
      |                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

6.3 SDP Examples

   Below is an example of SDP describing RTP text transport on port
   11000:

       m=text 11000 RTP/AVP 98
       a=rtpmap:98 t140/1000

   Below is an example of SDP similar to the above example, but also
   utilizing RFC 2198 to provide redundancy for the text packets:

       m=text 11000 RTP/AVP 98 100
       a=rtpmap:98 t140/1000
       a=rtpmap:100 red/1000
       a=fmtp:100 98/98

   Below is an example of SDP describing RTP text interleaved with G.711
   audio packets within the same RTP session from port 7200 and at a
   maximum text rate of 6 characters per second:

       m=audio 7200 RTP/AVP 0 98
       a=rtpmap:98 t140/8000
       a=fmtp:98 cps=6

   Below is an example using RFC 2198 to provide redundancy to just the
   text packets in an RTP session with interleaving text and G.711 at a
   text rate no faster than 6 characters per second:

       m=audio 7200 RTP/AVP 0 98 100
       a=rtpmap:98 t140/8000
       a=fmtp:98 cps=6
       a=rtpmap:100 red/8000
       a=fmtp:100 98/98

   Note - While these examples utilize the RTP/AVP profile, it is not
   intended to limit the scope of this memo to use with only that
   profile.  Rather, any appropriate profile may be used in conjunction
   with this memo.


Hellstrom                Expires - June 2004                [Page 14]

                  RTP Payload for Text Conversation     December 2003



7. Security Considerations

   Since the intention of the described payload format is to carry text
   in a text conversation, security measures in the form of encryption
   are of importance. The amount of data in a text conversation session
   is low and therefore any encryption method MAY be selected and
   applied to T.140 session contents or to the whole RTP packets. When
   redundant data is included, the same security considerations as for
   RFC 2198 apply.  Additionally, all of the security considerations
   from section 14 or RFC 3550 apply.

8. MIME Media Type Registrations

   This document defines an RTP payload named "t140" and two associated
   MIME types, "text/t140" and "audio/t140".

8.1 Registration of MIME Media Type text/t140

      MIME media type name: text

      MIME subtype name: t140

      Required parameters:
        rate: The RTP timestamp clock rate, which is equal to the
        sampling rate.  The only valid value is 1000.

      Optional parameters:
        cps: The maximum number of characters that may be received
        per second.

      Encoding considerations: T.140 text can be transmitted with RTP as
        specified in RFC XXXX.

      Security considerations: None

      Interoperability considerations: None

      Published specification: ITU-T T.140 Recommendation.
                               RFC XXXX.

      Applications which use this media type:
        Text communication terminals and text conferencing tools.

      Additional information: None

        Magic number(s): None
        File extension(s): None
        Macintosh File Type Code(s): None


Hellstrom                Expires - June 2004                [Page 15]

                  RTP Payload for Text Conversation     December 2003



      Person & email address to contact for further information:
        Gunnar Hellstrom
        E-mail: gunnar.hellstrom@omnitor.se

      Intended usage: COMMON

      Author                        / Change controller:
        Gunnar Hellstrom            | IETF avt WG
        gunnar.hellstrom@omnitor.se |

8.2 Registration of MIME Media Type audio/t140

      MIME media type name: audio

      MIME subtype name: t140

      Required parameters:
        rate: The RTP timestamp clock rate, which is equal to the
        sampling rate.

      Optional parameters:
        cps: The maximum number of characters that may be received
        per second.

      Encoding considerations: T.140 text can be transmitted with RTP as
        specified in RFC XXXX.

      Security considerations: None

      Interoperability considerations: None

      Published specification: ITU-T T.140 Recommendation.
                               RFC XXXX.

      Applications which use this media type:
        Text communication systems and text conferencing tools that
        transmit text associated with audio and within the same RTP
        session as the audio, such as PSTN gateways that transmit
        audio and text signals between two PSTN textphone users
        over an IP network.

      Additional information: None

        Magic number(s): None
        File extension(s): None
        Macintosh File Type Code(s): None

      Person & email address to contact for further information:


Hellstrom                Expires - June 2004                [Page 16]

                  RTP Payload for Text Conversation     December 2003


        Paul E. Jones
        E-mail: paulej@packetizer.com

      Intended usage: COMMON

      Author                        / Change controller:
        Paul E. Jones               | IETF avt WG
        paulej@packetizer.com       |

9. Authors' Addresses

   Gunnar Hellstrom
   Omnitor AB
   Renathvagen 2
   SE-121 37 Johanneshov
   Sweden
   Phone: +46 708 204 288 / +46 8 556 002 03
   Fax:   +46 8 556 002 06
   E-mail: gunnar.hellstrom@omnitor.se

   Paul E. Jones
   Cisco Systems, Inc.
   7025 Kit Creek Rd.
   Research Triangle Park, NC 27709
   Phone: +1 919 392 6948
   E-mail: paulej@packetizer.com

10. Acknowledgements

   The authors want to thank Stephen Casner, Magnus Westerlund and Colin
   Perkins for valuable support with reviews and advice on creation of
   this document, to Mickey Nasiri at Ericsson Mobile Communication for
   providing the development environment, and Michele Mizarro for
   verification of the usability of the payload format for its intended
   purpose.

11. Normative References

   [1] ITU-T Recommendation T.140 (1998) - Text conversation protocol
       for multimedia application, with amendment 1, (2000).

   [2] Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
       "RTP: A Transport Protocol for Real-Time Applications", RFC
       3550, July 2003.

   [3] Perkins, C., Kouvelas, I., Hardman, V., Handley, M. and J.
       Bolot, "RTP Payload for Redundant Audio Data", RFC 2198,
       September 1997.



Hellstrom                Expires - June 2004                [Page 17]

                  RTP Payload for Text Conversation     December 2003


   [4] Bradner, S., "Key words for use in RFCs to Indicate Requirement
       Levels", BCP 14, RFC 2119, March 1997.

   [5] ISO/IEC 10646-1: (1993), Universal Multiple Octet Coded
       Character Set.

   [6] Yergeau, F., "UTF-8, a transformation format of ISO 10646", RFC
       2279, January 1998.

   [7] Handley, M., Jacobson, V., "SDP: Session Description Protocol",
       RFC 2327, April 1998.

   [8] Rosenberg, J., Schulzrinne, H., "An RTP Payload Format for
       Generic Forward Error Correction", December 1999.

12. Informative References

   [9] Schulzrinne, H., Petrack, S., "RTP Payload for DTMF Digits,
       Telephony Tones and Telephony Signals", RFC 2833, May 2000.

13. Intellectual Property Right Considerations

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.

14. Full Copyright Statement

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published


Hellstrom                Expires - June 2004                [Page 18]

                  RTP Payload for Text Conversation     December 2003


   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

   Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.


























Hellstrom                Expires - June 2004                [Page 19]

