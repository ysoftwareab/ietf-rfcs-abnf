



INTERNET DRAFT                                             S Arun Prasad
                                              Motorola India Private Ltd
Expiration Date: March 2007
                                                          September 2006


                     MLDv1 and MVDv2 Optimization
                      draft-arun-ipv6-mld-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html

   This entire section has been prepended to this document automatically
   during formatting without any direct involvement by the author(s) of
   this draft.

Abstract

   This document describes an optimization for MLDv1 (RFC 2710) and
   MLDv2 (RFC 3810).
   As per this optimization, a new router on coming up will not send
   periodic "General Query" messages to get the list of multicast
   listeners. Instead, it will try to get the same from the Querier on
   the link. Only if no Querier are present on the link, will the new
   router move to Querier state and send "General Query" messages.
   This approach provides an advantage in eliminating possibly large
   number of "Multicast Listener Report" messages every time a new
   router comes up on a link. More the number of listeners on a link,
   more the advantage.
   



S Arun Prasad              [Expires March 2007]                 [Page 1]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


Table of Contents

          Abstract  ................................................   1
    1     Introduction  ............................................   3
    1.1     Present Behavior  ......................................   3
    1.2     Proposed Optimization  .................................   3
    2     Message Format  ..........................................   4
    2.1     Type  ..................................................   5
    2.2     Nr of Mcast Addresses (M)  .............................   5
    2.3     Multicast Address  .....................................   5
    3     Protocol Description  ....................................   5
    4     Router State Transition Diagram  .........................   7
    5     Timers, Counters and Default values  .....................   9
    6     Use case scenarios  ......................................  10
    7     Support for MLDv2  .......................................  11
    7.1     Message Format  ........................................  11
    7.11      Type  ................................................  12
    7.12      Nr of Mcast Records (M)  .............................  13
    7.13      Multicast Address Record  ............................  13
    7.2     Protocol Description  ..................................  13
    7.3     Inter operability with MLDv1  ..........................  14
    7.31      New Router is MLDv1 and Querier is MLDv2  ............  14
    7.32      New Router is MLDv2 and Querier is MLDv1  ............  14
    8     Normative References  ....................................  14
    Acknowledgement  ...............................................  15
    Author's Address  ..............................................  15
    Intellectual Property Statement  ...............................  15
    Copyright Statement  ...........................................  15

























S Arun Prasad              [Expires March 2007]                 [Page 2]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


1. Introduction

   The Multicast Listener Discovery Protocol (MLD) is used by IPv6
   routers to discover the presence of multicast listeners (i.e., nodes
   that wish to receive multicast packets) on their directly attached
   links, and to discover specifically which multicast addresses are of
   interest to those neighboring nodes.
   
   The MLDv2 protocol, when compared to MLDv1, adds support for "source
   filtering", i.e., the ability for a node to report interest in
   listening to packets *only* from specific source addresses, as
   required to support Source-Specific Multicast [RFC3569], or from *all
   but* specific source addresses, sent to a particular multicast
   address.  MLDv2 is designed to be interoperable with MLDv1.
   
   This draft tries to optimize the MLDv1 & MLDv2 protocol by providing
   new routers coming up on a link with the ability to discover the
   presence of multicast listeners on the link from the Querier.

   Every time a new router comes up on a link, a multiple "Report"
   messages is sent for every multicast address having a listener. In
   the proposed optimization, the Querier will send one single "Querier
   Report" message to the new router containing a list of all the
   multicast addresses having listeners on the link.
   Also, the Querier at any given point of time will have up-to-date
   and accurate information about the listeners and thus the same will
   be communicated to the new router.
   Only if there is no Querier on the link, will the new router move to
   Querier state and start sending "General Query" messages.   
   
1.1 Present Behavior

   When a new router comes up on a link, in order to quickly and
   reliably discover the presence of multicast listeners, it will move
   to the Querier state and send periodic "General Query" messages
   [Startup Query Count] with very small intervals [Startup Query
   Interval].

   This process will result in all the multicast listeners responding
   with "Report" message for every multicast address they are interested
   in.

1.2 Proposed Optimization

   When a new router comes up on a link, it will discover the presence
   of multicast listeners on a link from the current Querier on the
   link. It will then
      - move to Non-Querier state if the Querier IP address is lower
      than its own
      - move to Querier state if the Querier IP address is higher than
      its own. The Querier will move to Non-Querier state.


S Arun Prasad              [Expires March 2007]                 [Page 3]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


    If there is no Querier on the link, the new router will move to
    Querier state and discover the presence of multicast listeners by
    sending "General Query" messages.
    
    This process will result in only the Querier responding with a
    "Querier Report" message for all multicast address having listeners
    on the link.

2. Message Format

   Two new MLD messages are introduced in this proposal.
   They have the following format,

Multicast Listener Querier Query - 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Type = 154  | 	  Code      | 		Checksum            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | 	         Reserved	    | 		Reserved            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                      Multicast Address                        |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Multicast Listener Querier Report - 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Type = 155   |     Code      |           Checksum            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Reserved            |    Nr of Mcast Addresses (M)  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                      Multicast Address [1]                    |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                      Multicast Address [2]                    |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                               .                               |
    |                               .                               |
    |                               .                               |
    |                               .                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                      Multicast Address [M]                    |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


S Arun Prasad              [Expires March 2007]                 [Page 4]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


2.1 Type

   Multicast Listener Querier Query : ICMP type = 154 (decimal)

   Multicast Listener Querier Report : ICMP type = 155 (decimal)

   In the rest of this document, the above message types are referred to
   simply as "Querier Query" and "Querier Report".

2.2 Nr of Mcast Addresses (M)

   Number of multicast addresses field is valid only in "Querier Report"
   message and it signifies the number of multicast addresses being
   reported in this message.

2.3 Multicast Address

   In the "Querier Query" message, the multicast address field will be
   set to zero.

   In the "Querier Report" message, the multicast address fields are set
   to the multicast addresses being reported.  Thus a "Querier Report"
   message COULD be more than 24 octets long.

   If there are no multicast addresses to report, then "Nr of Mcast
   Addresses" is set to zero and the first multicast address field is
   also set to zero. Thus a "Querier Report" message will NEVER be less
   than 24 octets long.

3. Protocol Description

   A new router on startup, will move to the "Initial Non-Querier
   state". It will immediately send "Querier Query" message to
   link-scope all-routers multicast address FF02::2.
	
   The routers in the Non-Querier state on the link MUST ignore this
   "Querier Query" message.

   The router in the Querier state on the link will check if the source
   address in the "Query Querier" message is less than its own source
   address.
      - If YES, then it will immediately make a transition to the
      Non-Querier state. 
      - If NO, then it will continue to be in Querier state. and respond
      (without any delay) with a unicast "Querier Report" message to the
      new router. This "Querier Report" message will contain the list of
      multicast addresses for which there are listeners on the link.
      
   It will then respond (without any delay) with a unicast "Querier
   Report" message to the new router. This "Querier Report" message will
   contain the list of multicast addresses for which there are listeners
   on the link.

S Arun Prasad              [Expires March 2007]                 [Page 5]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


   When the new router receives the "Querier Report" message from the
   Querier, it will check if the source address in the "Querier Report"
   message is less than its own source address.
      - If YES, then it will immediately make a transition to the
      Non-Querier state and start the "Other Querier present" timer.
      - If NO, then it will immediately make a transition to the Querier
      state and start the "General Query Timer" (not the "Initial
      General Query timer" as it will be getting the list of multicast
      listeners on the link from this "Querier Report" message).
   
   
   It will then update (without any delay) its "multicast listeners"
   list with the multicast addresses present in the "Querier Report"
   message.

   If the new router does not receive any "Querier Report" message, this
   indicates that there is no Querier on the link. The new router will
   immediately make a transition to the Querier state, send the "General
   Query Message" and start the "Initial General Query timer" (as it
   needs to quickly and reliably discover the presence of multicast
   listeners on the link).

   NOTE:
      The new router in the "Initial Non-Querier state" will start a
      timer [Querier Query Response Interval] when sending the "Querier
      Query" message. If the "Querier Report" message is not received by
      this time, then it will re-send the "Querier Query" message
      "Querier Present Count" times before concluding that there is no
      Querier on the link.

      The router in Querier state will respond to the "Querier Query"
      message with the "Querier Report" message. If all multicast
      addresses having listeners on the link cannot be fitted into a
      single "Querier Report" message, then it will send additional
      "Querier Report" messages (without any delay) with the remaining
      multicast addresses.
      Each set of "Querier Report" messages will be sent [Robustness
      variable] times with a delay of [Querier Report Interval].















S Arun Prasad              [Expires March 2007]                 [Page 6]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006

4. Router State Transition Diagram

   --------------------- 
  |    Querier query    |
  |  resp. tmr expires  |
  |    (dec Querier     |
  |     pres. cnt.,     |
  | [if Querier pres.   |            Querier query
  |     cnt. > 0]       |          resp. tmr expires
  | send Querier query, |            (dec Querier
  |  start Querier q.   |             pres. cnt.,
  |    resp. tmr)       |          [if Querier pres.
  |                --------------      cnt. = 0]
   -------------->|              |  send gen. query,
                  |              |   start i. gen.
 ---------        |    Initial   |    query. tmr)         -------------
| Initial |------>|  Non-Querier |-------------------    |             |
 ---------        |              |                   |   | gen. q. tmr |
 (send Querier. q.|              |                   |   |   expired   |
    start Querier  --------------                    |   |(send gen. q,|
    q. resp tmr,    |    |                           |   |start gen. q.|
      dec Querier   |    |Querier report recd        |   |    tmr)     |
    present cnt.)   |    |with higher IP address     \/  |             |
                    |    |(update MLD record,       --------------     |
                    |    |start gen. q. tmr)       |              |<---
      Querier report|     ------------------------>|              |
                recd|                              |              |
       with lower IP|                              |   Querier    |
                addr|                              |              |
         (update MLD|     ------------------------>|              |
 record, start other|    |other Querier present    |              |<---
     Querier present|    |timer expired            |              |    |
                tmr)|    |(send gen. query,         --------------     |
                    |    |start gen. q. tmr)         |   |             |
                    \/   |                           |   |Querier query|
                   --------------                    |   |  recd with  |
                  |              |                   |   |  higher IP  |
                  |              |                   |   |   address   |
                  |              |                   |   |(send Querier|
                  |  Non-Querier |<------------------    |   report)   |
                  |              |   Querier query       |             |
                  |              |     recd with          -------------
   -------------->|              |  lower IP address
  |                --------------    (send Querier
  |   general query     |            report, start
  |     received        |            other Querier
  |    with a lower     |             present tmr)
  |     IP address      |                 /
  |   (start other      |           gen. query recd
  |      Querier        |        with lower IP address
  |    present tmr)     |         (start other Querier
  |                     |            present tmr)
   ---------------------
   
S Arun Prasad              [Expires March 2007]                 [Page 7]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


   A router may be in one of three possible states with respect to any
   single attached link:
	
      - "Initial Non-Querier", when the router comes up for the first
      time.
		
      - "Querier", when this router is designated to transmit MLD
      Queries on this link.
		
      - "Non-Querier", when there is another router designated to
      transmit MLD Queries on this link.

   The following six events can cause the router to change states:

      - "Querier report received from a router with lower IP address"
      occurs when a valid MLD Querier Report is received from a router
      on the same link with a lower IPv6 Source Address. To be valid,
      the Querier Report message MUST come from a link-local IPv6 Source
      Address, be at least 24 octets long, and have a correct MLD
      checksum. This event is significant only when in the "Initial
      Non-Querier" state.

      - "Querier report received from a router with higher IP address"
      occurs when a valid MLD Querier Report is received from a router
      on the same link with a higher IPv6 Source Address. To be valid,
      the Querier Report message MUST come from a link-local IPv6 Source
      Address, be at least 24 octets long, and have a correct MLD
      checksum. This event is significant only when in the "Initial
      Non-Querier" state.

      - "Querier query response timer expired" occurs when the timer set
      to receive the Querier Response from the current Querier on the
      link expires. This event is valid only when in "Initial
      Non-Querier" state.

      - "other Querier present timer expired" occurs when the timer set
      to note the presence of another Querier with a lower IP address on
      the link expires. This event is significant only when in the
      "Non-Querier" state.

      - "Querier query received from a router with a lower IP address"
      occurs when a valid MLD Querier Query is received from a router on
      the same link with a lower IPv6 Source Address. To be valid, the
      message MUST come from a link-local IPv6 Source Address, be at
      least 24 octets long, and have a correct MLD checksum.  This event
      is significant only when in the "Querier" state.







S Arun Prasad              [Expires March 2007]                 [Page 8]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


      - "General Querier received from a router with a lower IP address"
      occurs when a valid MLD General Query is received from a router on
      the same link with a lower IPv6 Source Address. To be valid, the
      message MUST come from a link-local IPv6 Source Address, be at
      least 24 octets long, and have a correct MLD checksum.  This event
      is significant only when in the "Querier" state.

   There are seven actions that may be taken in response to the above
   events:

      - "start other Querier present timer" for the attached link to
      [Other Querier Present Interval].

      - "send General Query" on the attached link. The General Query is
      sent to the link-scope all-nodes address (FF02::1), and has a
      Maximum Response Delay of [Query Response Interval].

      - "start General Query timer" for the attached link to [Query
      Interval].

      - "send Querier Query" on the attached link. The Querier query is
      sent to the link-scope all-router address (FF02::2). 

      - "start Querier Query response timer" for the attached link to
      [Query Response Interval].

      - "send Querier Report" on the attached link. The Querier Report
      is sent to the ipv6 unicast address from which the "Querier Query"
      message was received.

      - "decrement Querier present count" variable by one. The variable
      is decreased whenever "Querier Query response timer" expires.


5. Timers, Counters and Default values

5.1 Querier Query Response Interval

   The Querier Query Response Interval is the time interval between
   "Querier Query" messages sent by a router in the "Initial
   Non-Querier" state.
      Default: 1/16 the Query Interval.

5.2 Querier Present Count

   The Querier Present Count is the number of "Querier Query" messages
   sent by the router in "Initial Non-Querier" state.
       Default: Robustness variable.





S Arun Prasad              [Expires March 2007]                 [Page 9]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


5.3 Querier Report Interval

   Querier Report Interval is the time interval between re-transmission
   of the "Querier Report" message by the Querier to the new router.
      Default: 10 seconds.


6 Use case scenarios


6.1 New router comes up on a link. No other router present on the link.

   - New router will move to Querier state.

6.2 New router comes up on a link. Querier with a higher IP address
present on the link.

   - New router will get the multicast listeners list from the Querier.
   Querier will move to Non-Querier state. New router will move to
   Querier state. 

6.3 New router comes up on a link. Querier with a lower IP address
present on the link.

   - New router will get the multicast listeners list from the Querier.
   New router will move to Non-Querier state.

6.4 New router comes up on a link. Querier with a higher IP address
present on the link. "Querier Query" message gets lost on the link.

   - New router (after "Querier Present Count" retries) will move to
   Querier state and send periodic General Query messages. Querier on
   receiving this will move to Non-Querier state.

6.5 New router comes up on a link. Querier with a lower IP address
present on the link. "Querier Query" message gets lost on the link.

   - New router will move to Querier state and send periodic General
   Query messages. Querier will also send periodic General Query
   messages. New router on receiving this message will move to
   Non-Querier state.

6.6 New router comes up on a link. Querier with a higher IP address
present on the link. "Querier Report" message gets lost on the link.

   - New router (after "Querier Present Count" retries) will move to
   Querier state and send periodic General Query messages. Querier will
   have already moved to Non-Querier state.





S Arun Prasad              [Expires March 2007]                [Page 10]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


6.7 New router comes up on a link. Querier with a lower IP address
present on the link. "Querier Report" message gets lost on the link.

   - New router will move to Querier state and send periodic General
   Query messages. Querier will also send periodic General Query
   messages. New router on receiving this message will move to
   Non-Querier state.


7. Support for MLDv2

7.1 Message Format

   A 32 bit reserved field is appended at the end of MLDv1 "Querier
   Query" message in MLDv2.
		
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Type = 154  | 	  Code      | 		Checksum            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |            Reserved           |           Reserved            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                      Multicast Address                        |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                            Reserved                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


	A new MLDv2 "Querier Response" message is introduced.

    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Type = 156   |    Reserved   |           Checksum            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Reserved            |     Nr of Mcast Records (M)   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                  Multicast Address Record [1]                 .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                               .                               |
    .                               .                               .
    .                               .                               .
    |                               .                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                  Multicast Address Record [M]                 .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

S Arun Prasad              [Expires March 2007]                [Page 11]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


	Each Multicast Address Record has the following format,
	
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Record Type  |  Aux Data Len |     Number of Sources (N)     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                       Multicast Address                       |
    |                                                               |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                       Source Address [1]                      |
    |                                                               |
    +-                                                             -+
    |                                                               |
    |                                                               |
    |                       Source Address [2]                      |
    |                                                               |
    +-                                                             -+
    .                               .                               .
    .                               .                               .
    .                               .                               .
    +-                                                             -+
    |                                                               |
    |                                                               |
    |                       Source Address [N]                      |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                         Auxiliary Data                        .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


7.11 Type

   Multicast Listener Querier Query version 2: ICMP message type = 154
   (decimal)

   Multicast Listener Querier Report version 2 : ICMP message type = 156
   (decimal)

   In the rest of this document, the above message types are referred to
   simply as "Querier Query v2" and "Querier Report v2".

   The "Querier Query v2" message is identical to "Querier Query"
   message with only a 32 bit reserved field added at the end.



S Arun Prasad              [Expires March 2007]                [Page 12]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


7.12 Nr of Mcast Records (M)

   Number of multicast records specifies how many Multicast Address
   Records are present in this Querier Report.

7.13 Multicast Address Record

   Each Multicast Address Record is a block of fields that contain
   information about a single multicast address having listeners on a
   link and the sources they are interested in. It is valid only in the
   "Querier Report v2" message.

      - Record Type
      Record Type specifies the filter type of this Multicast Address
      Record. There are two types,
         - INCLUDE (value = 1) indicates the listeners of the
         corresponding multicast address are interested only in the
         source addresses listed in this Multicast Address Record.
         - EXCLUDE (value = 2) indicates the listeners of the
         corresponding multicast address are not interested in the
         source addresses listed in the Multicast Address Record.

      - Multicast Address
      The Multicast Address field contains the multicast address to
      which this Multicast Address Record pertains.

      - Number of Sources (N)
      The Number of Sources (N) field specifies how many source
      addresses are present in this Multicast Address Record.

      - Source Address
      The Source Address fields contains the source addresses associated
      with this Multicast Address Record.

7.2 Protocol Description

   Continuation from section 3 described in this draft.

   When a new router comes up on a link, it will go to the "Initial
   Non-Querier" state and send a "Querier Query v2" message. The Querier
   on the link will respond with the "Querier Report v2" message. If all
   multicast address records cannot be fitted into a single "Querier
   Report v2" message, then it will send additional "Querier Report v2"
   messages with the remaining multicast address records. A single
   multicast address record may be spread across multiple "Querier
   Report v2" messages.







S Arun Prasad              [Expires March 2007]                [Page 13]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


7.3 Inter operability with MLDv1

7.31 New router is MLDv2 capable and the Querier on the link is
operating in MLDv1 mode.

   When a new router (MLDv2 capable) comes up on a link, it will send
   the "Querier Query v2" message (28 octets). The Querier (in MLDv1
   mode) will read only the first 24 octets of the "Querier Query v2"
   message and respond with the "Querier Report v1 (type = 155)"
   message. The new router on receiving this message will come to know
   that the Querier is in MLDv1 mode. The new router will transit to
   Querier / Non-Querier state as described in section (3) of this
   draft. It will then update its multicast listeners list with the
   multicast addresses reported in  "Querier Report v1" message, with
   filter type EXCLUDE and empty source address.

   After this the behavior of the new router is as described in
   RFC-3810.
		
7.32 New router is MLDv1 capable and the Querier on the link is
operating in MLDv2 mode.

   When a new router (MLDv1 capable) comes up on a link, it will send a
   "Querier Query v1" message (24 octets). The Querier (in MLDv2 mode)
   will read the 24 octet "Querier Query v1" message and recognize the
   new router to be in MLDv1 mode. The Querier will transit to Querier /
   Non-Querier state as described in section (3) of this draft. It will
   respond with the "Querier Report v1 (type = 155)" message listing all
   the multicast address having listeners on the link. The new router
   will update its multicast listener list with the multicast addresses
   reported in the "Querier Report v1" message.

   After this the behavior of the old Querier (now may be in Querier or
   Non-Querier state) on the link is as described in RFC-3810.
			
   Inter operation with listeners in MLDv1 and MLDv2 modes are as
   described in RFC-3810. It is not impacted by this proposed
   enhancement.


8. Normative References

   [RFC2710]    Deering, S., Fenner, W. and B. Haberman, "Multicast
                Listener Discovery (MLD) for IPv6", RFC 2710, October
                1999.

   [RFC3810]    R. Vida and L. Costa, "Multicast Listener Discovery
                Version 2 (MLDv2) for IPv6", RFC 3810, June 2004





S Arun Prasad              [Expires March 2007]                [Page 14]

Internet Draft          draft-arun-ipv6-mld-00.txt        September 2006


Acknowledgment

   I would like to thank my "Motorola India Pvt Ltd" colleagues for
   their Guidelines and Support in helping me complete this draft.

Author's Address

   S Arun Prasad
   arun@motorola.com

Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.
   


S Arun Prasad              [Expires March 2007]                [Page 15]
   