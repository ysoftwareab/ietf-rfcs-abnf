<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Provider-Managed IRON</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 IRON Conceptual Model">
<link href="#rfc.section.3" rel="Chapter" title="3 Provider-Managed IRON">
<link href="#rfc.section.4" rel="Chapter" title="4 Dealing with NATs">
<link href="#rfc.section.5" rel="Chapter" title="5 Dealing with Mobility">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Internet Routing Overlay Network (IRON) is a new internetworking architecture based on encapsulation of inner network layer packets within outer network layer headers using a non-broadcast, multiple access (NBMA) virtual interface model. IRON suggests a third-party global deployment of servers and relays to achieve a Provider-Independent (PI) routing and addressing framework, but there may be instances in which an Internet Service Provider (ISP) wishes to manage its own IRON deployment. This document presents a Provider-Managed IRON framework that offers a fast path alternative for deployment of a long term solution." />
  <meta name="description" content="The Internet Routing Overlay Network (IRON) is a new internetworking architecture based on encapsulation of inner network layer packets within outer network layer headers using a non-broadcast, multiple access (NBMA) virtual interface model. IRON suggests a third-party global deployment of servers and relays to achieve a Provider-Independent (PI) routing and addressing framework, but there may be instances in which an Internet Service Provider (ISP) wishes to manage its own IRON deployment. This document presents a Provider-Managed IRON framework that offers a fast path alternative for deployment of a long term solution." />
  <meta name="keywords" content="I-D, Internet-Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">F. Templin, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Boeing Research &amp; Technology</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">May 23, 2011</td>
</tr>
<tr>
<td class="left">Expires: November 24, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Provider-Managed IRON<br />
  <span class="filename">draft-templin-iron-pm-01.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Internet Routing Overlay Network (IRON) is a new internetworking architecture based on encapsulation of inner network layer packets within outer network layer headers using a non-broadcast, multiple access (NBMA) virtual interface model. IRON suggests a third-party global deployment of servers and relays to achieve a Provider-Independent (PI) routing and addressing framework, but there may be instances in which an Internet Service Provider (ISP) wishes to manage its own IRON deployment. This document presents a Provider-Managed IRON framework that offers a fast path alternative for deployment of a long term solution.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted to IETF in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on November 24, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">IRON Conceptual Model</a>
</li>
<li>3.   <a href="#rfc.section.3">Provider-Managed IRON</a>
</li>
<li>4.   <a href="#rfc.section.4">Dealing with NATs</a>
</li>
<li>5.   <a href="#rfc.section.5">Dealing with Mobility</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">The Internet Routing Overlay Network (IRON) <a href="#RFC6179">[RFC6179]</a> is a new internetworking architecture based on encapsulation of inner network layer packets within outer network layer headers using a non-broadcast, multiple access (NBMA) virtual interface model. IRON suggests a third-party global deployment of servers and relays to achieve a Provider-Independent (PI) routing and addressing framework, but there may be instances in which an Internet Service Provider (ISP) wishes to manage its own Provider-Managed IRON deployment.</p>
<p id="rfc.section.1.p.2">By managing its own IRON deployment, an ISP can ensure optimal placement of servers and relays so that clients receive a high quality of service with minimal routing path stretch. The ISP can further delegate native IP prefixes to clients even if they are located behind one or several layers of NATs, and even if they move between different network points of attachment. Since most ISPs service limited regional areas, however, routing stretch may become significant for mobile users that travel far from their homes (e.g., to a different continent). This situation is no different than that for corporate travelers who establish Virtual Private Network (VPN) links to their home enterprise networks when they travel abroad, and can be mitigated by ISP placement of minimal support infrastructure outside of their primary coverage region.</p>
<p id="rfc.section.1.p.3">This document presents a Provider-Managed IRON framework, and shows that it can offer ISPs a fast path alternative for deployment of a long term solution.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#iron" id="iron">IRON Conceptual Model</a>
</h1>
<p id="rfc.section.2.p.1">IRON is descended from the RANGER architecture <a href="#RFC5720">[RFC5720]</a><a href="#RFC6139">[RFC6139]</a>; it uses Virtual Enterprise Traversal (VET) <a href="#I-D.templin-intarea-vet">[I-D.templin-intarea-vet]</a> and the Subnetwork Encapsulation and Adaptation Layer (SEAL) <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a> as its functional building blocks. IRON uses the VET NBMA virtual interface model for coordination between neighboring routers on a virtual overlay network. It also uses SEAL as an IP-in-IP encapsulation sublayer, and uses the SEAL Control Message Protocol (SCMP) for signaling between tunnel endpoints. In particular, IRON clients use SEAL and SCMP to establish bidirectional tunnels with IRON servers and to inform the servers of any outer network layer address changes. IRON clients can also establish unidirectional tunnels to servers that are closer to the final destination based on route optimization signaling.</p>
<p id="rfc.section.2.p.2">IRON clients connect End User Networks (EUNs) which are assigned EUN prefixes (EPs) taken from highly-aggregated IP prefixes known as Virtual Prefixes (VPs). IRON servers connect their clients to a virtual overlay network configured over an internetwork such as the global Internet.  IRON relays in turn connect the virtual overlay network to the native (i.e., non-IRON) Internet. The IRON relays in the virtual overlay network belong to a single Autonomous System (AS) and use eBGP to advertise the VPs externally into the native Internet default-free routing system. IRON relays and servers further use an interior routing protocol such as iBGP to track the EPs assigned to clients.</p>
<p id="rfc.section.2.p.3">To provide better service to clients, sufficient numbers of IRON relays and servers should be uniformly distributed throughout the internetwork over which the virtual overlay network is configured. Since the number of IRON servers needed may be very large, each server is required only to keep track of its own set of clients and to convey its client constituency to each of the relays. The iBGP peerings between servers and relays is therefore arranged as a partial mesh in which servers report their client constituencies to each relay but not to other servers. In this arrangement, servers have partial topology information and relays have full topology information. Routing within the virtual overlay network may therefore direct the initial packets in a flow through a suboptimal path that involves extraneous relays and servers as intermediate hops, but redirect messages will quickly inform the client of a better route.</p>
<p><a href="#OPT">Figure 1</a> below depicts an example Provider-Managed IRON deployment:</p>
<div id="#rfc.figure.1"></div>
<div id="#OPT"></div>
<pre>                                  .-.
                               ,-(  _)-.
                            .-(_    (_  )-.   +--------+
                           (_  Internet    )--| Host(C)|
                              `-(______)-'    +--------+
                                   |
                            +------------+
            ________________|    Relay   |________________
         .-(                +------+-----+                )-.
      .-(                    ^^    |   ||                     )-.
    .(                       ||    |   vv                       ).
  .(              +------------+   |  +------------+              ).
 (      +========&gt;| Server(A)  |&lt;--+  | Server(B)  |=======+        )
(       ||        +------------+      +------------+      ||         )
(       ||                                                vv         )
 ( +-----------+                                       +-----------+ )
   | Client(A) |                                       | Client(B) |
   +-----+-----+              ISP Network              +-----+-----+
         |    (                                          )   |
        .-.     .-(                                 .-)     .-.
     ,-(  _)-.      .-(_________________________)-.      ,-(  _)-.
  .-(_    (_  )-.                                     .-(_    (_  )-.
 (_  IRON EUN(A) )                                  (_  IRON EUN(B) )
    `-(______)-'                                       `-(______)-'
         |                                                  |
     +---+----+                                         +---+----+
     | Host(A)|                                         | Host(B)|
     +--------+                                         +--------+</pre>
<p></p>
<p></p>

<ol>
<li>From Host(A) in IRON EUN A to Host(B) in IRON EUN B (depicted in <a href="#OPT">Figure 1</a>)</li>
<li>From Host(A) in IRON EUN A to Host(C) in the Internet</li>
<li>From Host(C) in the Internet to Host(A) in IRON EUN A</li>
</ol>

<p>In case 1, the initial packets in the flow sourced from Host(A) are forwarded through EUN(A) to Client(A), which then forwards them via the bidirectional tunnel to Server (A). Server(A) then forwards the packets to a Relay, which returns redirect messages and tunnels the packets further to Server(B). Server(B) then forwards the packets via the bidirectional tunnel to Client(B), where they are forwarded across EUN(B) and delivered to Host B. Following the redirect messages, subsequent packets flow directly via a unidirectional tunnel from Client(A) to Server(B) with the Relay and Server(A) removed from the path.</p>
<p id="rfc.section.2.p.7">In case 2, packets sourced from Host(A) are forwarded through EUN(A) to Client(A), which forwards them via the bidirectional tunnel to Server(A). Server(A) then forwards them to a Relay, which in turn forwards them via normal Internet routing until they reach host C.</p>
<p id="rfc.section.2.p.8">In case 3, packets sourced from host C are forwarded through normal Internet routing until they reach a Relay that connects the Provider-Managed virtual overlay network to the rest of the Internet.  The Relay then forwards the packets to Server(A), where they are forwarded through the bidirectional tunnel to Client(A) then delivered to Host(A).</p>
<p id="rfc.section.2.p.9">These fundamental communication flow archetypes apply to the case of IRON virtual overlay networks configured over the unbounded global Internet when a third party supplies EUNs with PI prefixes. However, the same archetypes apply when the virtual overlay network is configured over a more limited topology such as an ISP's service network where the IP prefixes assigned to EUNs are Provider-Managed. The following section discusses a Provider-Managed IRON model.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Provider-Managed IRON</h1>
<p id="rfc.section.3.p.1">The generic IRON use case assumes that the internetwork over which IRON overlay networks will be configured is the Internet itself. In other words, the generic use case assumes a global deployment of relays and servers by a third-party agency that does not coordinate with any specific ISPs. In that case, the VPs/EPs served by the third party would be independent of any Provider-Managed prefix space, and hence would be PI. However, an ISP wishing to roll out a useful service for its customers could choose to establish an IRON deployment using its own service network as the internetwork over which the virtual overlay is configured. In that case, the VPs/EPs serviced by the ISP would be Provider-Managed and there would be no third-party agencies for customers to coordinate with. The ISP would also be in the best position to provide optimal or nearly-optimal placement of IRON relays and servers within its managed network.</p>
<p id="rfc.section.3.p.2">When an ISP deploys its own IRON virtual overlay system, it establishes relays at the border of the virtual overlay network that connect the overlay to the global Internet. These relays run eBGP on their Internet-facing interfaces, and advertise the VPs that have been delegated to the ISP. The ISP should only need to advertise a small number of VPs that would only very rarely need to be withdrawn and re-announced within the global routing system. The ISP also deploys servers close to its customer EUNs in sufficient numbers so that the customers receive a high quality of service. While the IRON architecture allows for the relay and server function to be deployed on the same physical platform, for reasons of scaling it is expected that they will often be deployed on separate platforms.</p>
<p id="rfc.section.3.p.3">In terms of scaling, in the limiting case in which all of the ISP's IRON routers provide both the relay and server function, the relay/servers would engage in a full mesh iBGP session the same as described in the Softwire Mesh Framework <a href="#RFC5565">[RFC5565]</a>.  However, a full mesh framework would present a limiting factor for scaling in multiple dimensions.</p>
<p id="rfc.section.3.p.4">First, each relay/server would only be able to service a limited set of customer client EUNs, since each client requires that the server maintain bidirectional tunnel state and engage in periodic keepalive exchanges. Second, since an ISP wishing to support a large number of customer clients would need to deploy a large number of relay/servers, the number of iBGP peering sessions between them would grow with the square of the number of relay/servers. This scaling situation can be addressed through the use of route reflectors, but the route reflectors cannot convey reachability state from one relay/server to another.  Moreover, there is no reason that each server needs to have full knowledge of all EPs assigned to all customer EUNs. Instead, it should only have to know about the EPs assigned to its own current set of client customers and maintain a default route pointing to the relay router anycast address.</p>
<p id="rfc.section.3.p.5">Hence, when the server and relay functions are deployed on separate platforms, the IRON system enables a "partial mesh" topology in which servers report only the EP-to-client relationships for all of their client customers and maintain default routes to relays. Relays in turn discover all EP-to-server relationships and thus have full topology knowledge of the EP distributions throughout the ISP network. Moreover, servers can be placed close to the customers to support optimal routes, and more servers can be added as the client load grows.</p>
<p id="rfc.section.3.p.6">As an example, assume that an ISP deploys a Provider-Managed IRON deployment using a single IPv6 ::/24 VP, from which it assigns IPv6 ::/56 EPs to its client customers. The ISP can establish a reasonable number of relays (e.g., 100) at the virtual overlay network border with the Internet. The ISP could then uniformly distribute a sufficient number of servers (e.g., 2^16) located close to customers throughout its network, where each server would be sized to serve 2^16 customers. Such a deployment would enable service for all 2^32 ::/56 EPs taken from the single ::/24 VP while advertising only a single VP into the global routing system. Each of the 100 relays would need to maintain iBGP peering sessions with each of the 2^16 servers to discover all client-to-server mappings in the IRON system. Each of the 2^16 servers would only need to report their client constituency via the 100 iBGP peering sessions and would not need to discover the client constituencies of other servers since they only require the relay router anycast address as the default route.</p>
<p id="rfc.section.3.p.7">Since the servers would have only partial topology information (i.e., they would only know about their own clients and about the relay anycast default route) packets originated by one of their clients A and destined to a client B that is serviced by a different server would need to be forwarded through a relay. Using the IRON secure redirection system, however, the relay would return a redirect message which the server would forward to the client customer. Thereafter, packets originating from client A and destined to client B would be forwarded directly to client B's server without involving either client A's server nor any relays. This technique is often known as route optimization, and is a fundamental requirement for any production-quality routing system.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Dealing with NATs</h1>
<p id="rfc.section.4.p.1">In typical ISP deployments, customer EUNs are located behind Customer Premises Equipment (CPE) routers that perform a Network Address Translation (NAT) function internally. With the impending runout of IPv4 addresses, ISPs are now also faced with a situation in which they may need to assign private-use IP addresses to the outward-facing interfaces of CPEs and perform a second level of NATing withing the ISP network.  Hence, devices in customer EUNs will be located behind one or several layers of NATs which impart special requirements on tunneling technologies. In particular, tunneling technologies will need to be configured over the UDP protocol which can traverse NATs.</p>
<p id="rfc.section.4.p.2">In the 6a44 proposal <a href="#I-D.despres-softwire-6a44">[I-D.despres-softwire-6a44]</a>, the authors present a novel method of supporting IPv6 clients in EUNs through stateless coordinations with servers in the ISP network. Each client in this model receives only a single address that is constructed based on the outer NAT address and port mapping values, however, and these values can change across NAT reboots and/or loss of state. Hence, it may not be practical for administrators to represent the 6a44 addresses in a static name resolution system such as the DNS and/or for communicating peers to rely on a stable address for session continuity.</p>
<p id="rfc.section.4.p.3">Using the Provider-Managed IRON approach and its constituent SEAL mechanism, however, a client device in the customer EUN can receive an EP from its service provider (e.g., an IPv6 ::/56) and then register this EP with a nearby server that it discovers through an anycast router solicitation. Once registered, the server distributes this new EP registration to all relays.</p>
<p id="rfc.section.4.p.4">This stateful registration establishes next hop information in the server which the client must refresh periodically by sending beacons which have the side effect of keeping state alive in any NATs on the path. Since NATs may lose state and create new mappings, however, the server does not rely on the IP address and port mapping information to identify the client. Instead it relies on the SEAL identification tags that were established when the client first registered with the server.  In this arrangement, it does not matter if the address and port mappings change periodically as long as the client sends beacons frequently enough to keep the NAT state synchronized with the server state.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Dealing with Mobility</h1>
<p id="rfc.section.5.p.1">When a client moves to a new network point of attachment, it simply sends a new anycast router solicitation message to register with a new server. Unlike the global IRON case, however, a client in a Provider-Managed IRON deployment can only discover a server in its home ISP even if it has moved far away from home. For example, if a customer from ISP A located in the United States takes their IRON client router to Beijing they can still continue to use their Provider-Managed EPs, but all traffic to and from the EPs would need to be routed through the relays and servers in the ISP A US-based network even if both correspondent hosts are located in Beijing. Although clearly not optimal, this situation is no different than for a corporate employee who takes their laptop to a distant country and uses a VPN to connect to their home office.</p>
<p id="rfc.section.5.p.2">However, if ISP A wishes to provide better mobility service to its customers, it can deploy additional relays and servers in the networks of other ISPs worldwide simply by leasing public IP addresses and establishing equipment in the foreign ISPs networks. In that case, the Provider-Managed IRON case begins to look identical to the Provider-Independent case, and mobile clients can achieve a high quality of service even if they have moved far away from their home network. It therefore becomes immaterial as to whether the customer would pay an ISP for their IRON services or pay some third party entity - the service they would receive would be equivalent and dependent only on the quality of the IRON deployment.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">There are no IANA considerations for this document.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#secure" id="secure">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">The security considerations in IRON <a href="#RFC6179">[RFC6179]</a> apply also to this document.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#ack" id="ack">Acknowledgements</a>
</h1>
<p id="rfc.section.8.p.1">The concept of a Provider-Specific version of IRON was inspired by discussions in the intarea working group during IETF79. The ideas were further motivated by related works authored by Brian Carpenter, Remi Despres and Sheng Jiang.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC6179">[RFC6179]</b></td>
<td class="top">
<a>Templin, F.</a>, "<a href="http://tools.ietf.org/html/rfc6179">The Internet Routing Overlay Network (IRON)</a>", RFC 6179, March 2011.</td>
</tr></tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5720">[RFC5720]</b></td>
<td class="top">
<a>Templin, F.</a>, "<a href="http://tools.ietf.org/html/rfc5720">Routing and Addressing in Networks with Global Enterprise Recursion (RANGER)</a>", RFC 5720, February 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5565">[RFC5565]</b></td>
<td class="top">
<a>Wu, J.</a>, <a>Cui, Y.</a>, <a>Metz, C.</a> and <a>E. Rosen</a>, "<a href="http://tools.ietf.org/html/rfc5565">Softwire Mesh Framework</a>", RFC 5565, June 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</b></td>
<td class="top">
<a>Templin, F</a>, "<a href="http://tools.ietf.org/html/draft-templin-intarea-seal-39">The Subnetwork Encapsulation and Adaptation Layer (SEAL)</a>", Internet-Draft draft-templin-intarea-seal-39, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.templin-intarea-vet">[I-D.templin-intarea-vet]</b></td>
<td class="top">
<a>Templin, F</a>, "<a href="http://tools.ietf.org/html/draft-templin-intarea-vet-31">Virtual Enterprise Traversal (VET)</a>", Internet-Draft draft-templin-intarea-vet-31, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.despres-softwire-6a44">[I-D.despres-softwire-6a44]</b></td>
<td class="top">
<a>Despres, R</a>, <a>Carpenter, B</a> and <a>S Jiang</a>, "<a href="http://tools.ietf.org/html/draft-despres-softwire-6a44-01">Native IPv6 Across NAT44 CPEs (6a44)</a>", Internet-Draft draft-despres-softwire-6a44-01, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6139">[RFC6139]</b></td>
<td class="top">
<a>Russert, S.</a>, <a>Fleischman, E.</a> and <a>F. Templin</a>, "<a href="http://tools.ietf.org/html/rfc6139">Routing and Addressing in Networks with Global Enterprise Recursion (RANGER) Scenarios</a>", RFC 6139, February 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Fred L. Templin</span> editor
	  <span class="n hidden">
		<span class="family-name">Templin</span>
	  </span>
	</span>
	<span class="org vcardline">Boeing Research & Technology</span>
	<span class="adr">
	  <span>P.O. Box 3707 MC 7L-49</span>

	  <span class="vcardline">
		<span class="locality">Seattle</span>,  
		<span class="region">WA</span> 
		<span class="code">98124</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fltemplin@acm.org">fltemplin@acm.org</a></span>

  </address>
</div>

</body>
</html>