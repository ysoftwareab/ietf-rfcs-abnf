<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RPL Objective Function 0</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Objective Function 0 Overview">
<link href="#rfc.section.4" rel="Chapter" title="4 OF0 operations">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Computing Rank">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Feasible successors selection">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Selection of the Preferred Parent">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Selection of the backup feasible successor">
<link href="#rfc.section.5" rel="Chapter" title="5 Abstract Interface with RPL core">
<link href="#rfc.section.6" rel="Chapter" title="6 OF0 Operands">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Variables">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Configurable parameters">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Constants">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Routing Protocol for Low Power and Lossy Networks (RPL) defines a generic Distance Vector protocol that is adapted to such networks. RPL requires a specific Objective Function to establish a desired routing topology.  This document specifies a basic Objective Function that relies only on RPL's basic Protocol Data Units; it does not use extensions such as RPL metric containers.  " />
  <meta name="description" content="The Routing Protocol for Low Power and Lossy Networks (RPL) defines a generic Distance Vector protocol that is adapted to such networks. RPL requires a specific Objective Function to establish a desired routing topology.  This document specifies a basic Objective Function that relies only on RPL's basic Protocol Data Units; it does not use extensions such as RPL metric containers.  " />
  <meta name="keywords" content="Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ROLL</td>
<td class="right">P. Thubert, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">May 05, 2011</td>
</tr>
<tr>
<td class="left">Expires: November 06, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RPL Objective Function 0<br />
  <span class="filename">draft-ietf-roll-of0-11</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Routing Protocol for Low Power and Lossy Networks (RPL) defines a generic Distance Vector protocol that is adapted to such networks. RPL requires a specific Objective Function to establish a desired routing topology.  This document specifies a basic Objective Function that relies only on RPL's basic Protocol Data Units; it does not use extensions such as RPL metric containers.  </p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on November 06, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Objective Function 0 Overview</a>
</li>
<li>4.   <a href="#rfc.section.4">OF0 operations</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Computing Rank</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Feasible successors selection</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Selection of the Preferred Parent</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Selection of the backup feasible successor</a>
</li>
<li>5.   <a href="#rfc.section.5">Abstract Interface with RPL core</a>
</li>
<li>6.   <a href="#rfc.section.6">OF0 Operands</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Variables</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Configurable parameters</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Constants</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p><a href="#I-D.ietf-roll-rpl">The Routing Protocol for Low Power and Lossy Networks </a> <cite title="NONE">[I-D.ietf-roll-rpl]</cite> was designed as a generic core that is agnostic to metrics and that is adapted to a given problem using Objective Functions (OF). This separation of Objective Functions from the core protocol specification allows RPL to adapt to meet the different optimization criteria required by the wide range of use cases.</p>
<p id="rfc.section.1.p.2">RPL forms Destination Oriented Directed Acyclic Graphs (DODAGs) within instances of the protocol.  Each instance is associated with a specialized Objective Function. A DODAG is periodically reconstructed in a new Version to enable a global reoptimization of the graph.</p>
<p id="rfc.section.1.p.3">An Objective Function selects the DODAG Version that a device joins within an instance, and a number of neighbor routers within that DODAG Version as parents or feasible successors.  The OF generates the Rank of the device, that represents an abstract distance to the root within the DODAG.  In turn, the Rank is used by the generic RPL core to enable a degree of loop avoidance and verify forward progression towards a destination, as specified in <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.</p>
<p id="rfc.section.1.p.4">The Objective Function 0 (OF0) corresponds to the Objective Code Point 0 (OCP0).  OF0 only requires the information in the RPL DIO base container, such as Rank and the DODAGPreference field that describes an administrative preference <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  The Rank of a node is obtained by adding a normalized scalar, rank_increase, to the Rank of a selected preferred parent.  OF0 uses a unit MinHopRankIncrease of rank_increase of 0x100 so that Rank value can be stored in one octet.  This allows up to at least 28 hops even when default settings are used and each hop has the worst rank_increase of 9.</p>
<p id="rfc.section.1.p.5">Since there is no default OF or metric container in the RPL main specification, it might happen that, unless two given implementations follow the same guidance for a specific problem or environment, those implementations will not support a common OF with which they could interoperate.  OF0 is designed to be common to all implementations that are not specifically designed to apply to a given case for which further guidance is provided.  This is why it is very abstract as to how the link properties are transformed into a rank_increase and leaves that responsibility to implementation; rather, OF0 enforces normalized values for the rank_increase of a normal link and its acceptable range, as opposed to formulating the details of its computation.  This is also why OF0 ignores metric containers.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#Terminology" id="Terminology">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The terminology used in this document is consistent with and incorporates that described in `Terminology in Low power And Lossy Networks' <a href="#I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</a> and <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.</p>
<p id="rfc.section.2.p.2">The term feasible successor is used to refer to a neighbor that can possibly be used as a next-hop for upwards traffic following the loop avoidance and forwarding rules that the nodes implements and that are defined outside of this specification, in particular in the RPL specification.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Objective Function 0 Overview</h1>
<p id="rfc.section.3.p.1">The core RPL specification describes constraints on how nodes select potential parents, called a parent set, from their neighbors.  All parents are feasible successors for upgoing traffic (towards the root). Additionally, RPL allows the use of parents in a subsequent Version of a same DODAG as feasible successors, in which case this node acts as a leaf in the subsequent DODAG Version.  Further specifications might extend the set of feasible successors, for instance to nodes of a same Rank, aka siblings.  </p>
<p id="rfc.section.3.p.2">The Goal of the OF0 is for a node to join a DODAG Version that offers connectivity to a specific set of nodes or to a larger routing infrastructure.  For the purpose of OF0, Grounded thus means that the root provides such connectivity. How that connectivity is asserted and maintained is out of scope.</p>
<p id="rfc.section.3.p.3">Objective Function 0 is designed to find the nearest Grounded root.  This can be achieved if the Rank of a node represents closely its distance to the root. This need is balanced with the other need of maintaining some path diversity.  In the absence of a Grounded root, LLN inner connectivity is still desirable and floating DAGs will form, rooted at the nodes with the highest administrative preference.</p>
<p id="rfc.section.3.p.4">OF0 selects a preferred parent and a backup feasible successor if one is available. All the upward traffic is normally routed via the preferred parent.  When the link conditions do not let an upward packet through the preferred parent, the packet is passed to the backup feasible successor.</p>
<p id="rfc.section.3.p.5">OF0 assigns a step_of_rank to each link to another node that it monitors.  The exact method for computing the step_of_rank is implementation-dependent.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> OF0 operations</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#comprank" id="comprank">Computing Rank</a>
</h1>
<p id="rfc.section.4.1.p.1">One trivial OF0 implementation might compute the step_of_rank from as a classical administrative cost that is assigned to the link.  Using a metric similar to hop count implies that the OF0 implementation only considers neighbors with good enough connectivity, for instance neighbors that are reachable over an Ethernet link, or a WIFI link in infrastructure mode.</p>
<p id="rfc.section.4.1.p.2">In most wireless networks, a Rank that is analogous to an unweighted hop count favors paths with long distance links and poor connectivity properties.  Other link properties such as the expected transmission count metric (ETX) <a href="#DeCouto03">[DeCouto03]</a> should be used instead to compute the step_of_rank.  For instance, <a href="#I-D.ietf-roll-minrank-hysteresis-of">the Minimum Rank Objective Function with Hysteresis </a> <cite title="NONE">[I-D.ietf-roll-minrank-hysteresis-of]</cite> provides guidance on how link cost can be computed and on how hysteresis can improve Rank stability.</p>
<p id="rfc.section.4.1.p.3">An implementation MAY allow to stretch the step_of_rank with a stretch_of_rank up to no more than MAXIMUM_RANK_STRETCH in order to enable the selection of a feasible successor and maintain path diversity.  The use of a stretch_of_rank augments the apparent distance from the node to the root and distorts the DODAG; it should be used with care so as to avoid instabilities due to greedy behaviours.  </p>
<p id="rfc.section.4.1.p.4">The step_of_rank is expressed in units of MINIMUM_STEP_OF_RANK.  As a result, the least significant octet in the RPL Rank is not used.  The default step_of_rank is DEFAULT_STEP_OF_RANK for each hop.  An implementation MUST maintain the stretched step_of_rank between MINIMUM_STEP_OF_RANK and MAXIMUM_STEP_OF_RANK, which allows to reflect a large variation of link quality.</p>
<p id="rfc.section.4.1.p.5">The gap between MINIMUM_STEP_OF_RANK and MAXIMUM_RANK_STRETCH may not be sufficient in every case to strongly distinguish links of different types or categories in order to favor, say, powered over battery-operated or wired over wireless, within a same DAG. </p>
<p id="rfc.section.4.1.p.6">An implementation SHOULD allow a configurable factor called Rank-factor and to apply the factor on all links and peers.  </p>
<p id="rfc.section.4.1.p.7">An implementation MAY recognizes sub-categories of peers and links, such as different MAC types, in which case it SHOULD be able to configure a more specific Rank-factor to those categories.  The Rank-factor SHOULD be set between MINIMUM_RANK_FACTOR and MAXIMUM_RANK_FACTOR.  </p>
<p id="rfc.section.4.1.p.8">The step_of_rank Sp that is computed for that link is multiplied by the Rank-factor Rf and then possibly stretched by a stretch_of_rank Sr.  The resulting rank_increase Ri is added to the Rank of preferred parent R(P) to obtain that of this node R(N): </p>
<p id="rfc.section.4.1.p.9">R(N) = R(P) + Ri where Ri = (Rf*Sp + Sr) * MinHopRankIncrease </p>
<p id="rfc.section.4.1.p.10">Optionally, the administrative preference of a root MAY be configured to supersede the goal to join a Grounded DODAG. In that case, nodes will associate to the root with the highest preference available, regardless of whether that root is Grounded or not. Compared to a deployment with a multitude of Grounded roots that would result in a same multitude of DODAGs, such a configuration may result in possibly less but larger DODAGs, as many as roots configured with the highest priority in the reachable vicinity.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Feasible successors selection</h1>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> Selection of the Preferred Parent</h1>
<p id="rfc.section.4.2.1.p.1">As it scans all the candidate neighbors, OF0 performs in order the following checks and keeps the parent that is the best for the first criterion that makes a difference: </p>

<ol>
<li>
<a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> spells out the generic rules for a node to reparent and in particular the boundaries to augment its Rank within a DODAG Version.  A candidate that would not satisfy those rules MUST NOT be considered.</li>
<li>An implementation should validate a router prior to selecting it as preferred. This validation process is implementation and link type dependent, and is out of scope. A router that has been validated is preferable.</li>
<li>When multiple interfaces are available, a policy might be locally configured to order them and that policy applies first; that is a router on a higher order interface in the policy is preferable.</li>
<li>If the administrative preference of the root is configured to supersede the goal to join a Grounded DODAG, a router that offers connectivity to a more preferable root SHOULD be preferred.</li>
<li>A router that offers connectivity to a grounded DODAG Version SHOULD be preferred over one that does not.</li>
<li>A router that offers connectivity to a more preferable root SHOULD be preferred.</li>
<li>When comparing 2 routers that belong to the same DODAG, a router that offers connectivity to the freshest DODAG Version SHOULD be preferred.</li>
<li>The parent that causes the lesser resulting Rank for this node, as specified in <a href="#comprank">Section 4.1</a>, SHOULD be preferred.</li>
<li>A DODAG Version for which there is an alternate parent SHOULD be preferred.  This check is optional. It is performed by computing the backup feasible successor while assuming that the router that is currently examined is finally selected as preferred parent.</li>
<li>The preferred parent that was in use already SHOULD be preferred.</li>
<li>A router that has announced a DIO message more recently SHOULD be preferred.</li>
</ol>

<p> </p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> Selection of the backup feasible successor</h1>
<p id="rfc.section.4.2.2.p.1">When selecting a backup feasible successor, the OF performs in order the following checks: </p>

<ol>
<li>When multiple interfaces are available, a router on a higher order interface is preferable.</li>
<li>The backup feasible successor MUST NOT be the preferred parent.</li>
<li>The backup feasible successor MUST be either in the same DODAG Version as this node or in an subsequent DODAG Version.</li>
<li>Along with RPL rules, a Router in the same DODAG Version as this node and with a Rank that is higher than the Rank computed for this node MUST NOT be selected as a feasible successor.  </li>
<li>A router with a lesser Rank SHOULD be preferred.</li>
<li>A router that has been validated as usable by an implementation dependant validation process SHOULD be preferred.</li>
<li>The backup feasible successor that was in use already SHOULD be preferred.</li>
</ol>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#API" id="API">Abstract Interface with RPL core</a>
</h1>
<p id="rfc.section.5.p.1">Objective Function 0 interacts with the core RPL in the following ways: </p>

<dl>
<dt>Processing DIO:</dt>
<dd style="margin-left: 8">This core RPL triggers the OF when a new DIO was received. OF0 analyses the information in the DIO and may select the source as a parent or sibling.</dd>
<dt>Providing DAG information:</dt>
<dd style="margin-left: 8">The OF is called to provide information about a given instance. This includes material from the DIO base header, the role (router, leaf), and the Rank of this node.</dd>
<dt>Providing a Parent List:</dt>
<dd style="margin-left: 8">The OF0 support can be required to provide the ordered list of the parents and feasible successors for a given instance to the RPL core.  This includes the material that is contained in the transit option for each entry.</dd>
<dt>Trigger:</dt>
<dd style="margin-left: 8">The OF0 support may trigger the RPL core to inform it that a change occurred. This can be used to indicate whether the change requires a new DIO to be fired or whether trickle timers need to be reset.</dd>
</dl>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#constvarpar" id="constvarpar">OF0 Operands</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#var" id="var">Variables</a>
</h1>
<p id="rfc.section.6.1.p.1">OF0 uses the following variables: </p>

<dl>
<dt>step_of_rank (unsigned integer):</dt>
<dd style="margin-left: 8">an intermediate computation based on the link properties with a certain neighbor.</dd>
<dt>rank-increase (unsigned integer):</dt>
<dd style="margin-left: 8">delta between the Rank of the preferred parent and self </dd>
</dl>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#parms" id="parms">Configurable parameters</a>
</h1>
<p id="rfc.section.6.2.p.1">OF0 can use the following optional parameters: </p>

<dl>
<dt>stretch_of_rank (unsigned integer):</dt>
<dd style="margin-left: 8">an optional augmentation to the step-of-rank of the preferred parent to allow the selection of additional parents.</dd>
<dt>rank_factor (unsigned integer):</dt>
<dd style="margin-left: 8">A configurable factor that is used to multiply the effect of the link properties in the rank_increase computation.</dd>
</dl>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#consts" id="consts">Constants</a>
</h1>
<p id="rfc.section.6.3.p.1">OF0 fixes the following constants: </p>

<dl>
<dt>MinHopRankIncrease:</dt>
<dd style="margin-left: 8">256</dd>
<dt>DEFAULT_STEP_OF_RANK:</dt>
<dd style="margin-left: 8">3</dd>
<dt>MINIMUM_STEP_OF_RANK:</dt>
<dd style="margin-left: 8">1</dd>
<dt>MAXIMUM_STEP_OF_RANK:</dt>
<dd style="margin-left: 8">9</dd>
<dt>DEFAULT_RANK_STRETCH:</dt>
<dd style="margin-left: 8">0</dd>
<dt>MAXIMUM_RANK_STRETCH:</dt>
<dd style="margin-left: 8">5</dd>
<dt>DEFAULT_RANK_FACTOR:</dt>
<dd style="margin-left: 8">1</dd>
<dt>MINIMUM_RANK_FACTOR:</dt>
<dd style="margin-left: 8">1</dd>
<dt>MAXIMUM_RANK_FACTOR:</dt>
<dd style="margin-left: 8">4</dd>
</dl>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This specification requires the assignment of an OCP for OF0. The value of 0 is suggested.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Sec" id="Sec">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">Security Considerations for OCP/OF are to be developed in accordance with recommendations laid out in, for example, <a href="#I-D.tsao-roll-security-framework">[I-D.tsao-roll-security-framework]</a>.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.9.p.1">Most specific thanks to Philip Levis and Phoebus Chen for their help in finalizing this document.</p>
<p id="rfc.section.9.p.2">Many thanks also to Tim Winter, JP Vasseur, Julien Abeille, Mathilde Durvy, Teco Boot, Navneet Agarwal and Henning Rogge for in-depth review and first hand implementer's feedback.</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr></tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</b></td>
<td class="top">
<a>Winter, T</a>, <a>Thubert, P</a>, <a>Brandt, A</a>, <a>Clausen, T</a>, <a>Hui, J</a>, <a>Kelsey, R</a>, <a>Levis, P</a>, <a>Pister, K</a>, <a>Struik, R</a> and <a>J Vasseur</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-rpl-19">RPL: IPv6 Routing Protocol for Low power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-rpl-19, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</b></td>
<td class="top">
<a>Vasseur, J</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-terminology-06">Terminology in Low power And Lossy Networks</a>", Internet-Draft draft-ietf-roll-terminology-06, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-routing-metrics">[I-D.ietf-roll-routing-metrics]</b></td>
<td class="top">
<a>Vasseur, J</a>, <a>Kim, M</a>, <a>Pister, K</a>, <a>Dejean, N</a> and <a>D Barthel</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-routing-metrics-19">Routing Metrics used for Path Calculation in Low Power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-routing-metrics-19, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.tsao-roll-security-framework">[I-D.tsao-roll-security-framework]</b></td>
<td class="top">
<a>Tsao, T</a>, <a>Alexander, R</a>, <a>Daza, V</a> and <a>A Lozano</a>, "<a href="http://tools.ietf.org/html/draft-tsao-roll-security-framework-02">A Security Framework for Routing over Low Power and Lossy Networks</a>", Internet-Draft draft-tsao-roll-security-framework-02, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-minrank-hysteresis-of">[I-D.ietf-roll-minrank-hysteresis-of]</b></td>
<td class="top">
<a>Gnawali, O</a> and <a>P Levis</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-minrank-hysteresis-of-04">The Minimum Rank Objective Function with Hysteresis</a>", Internet-Draft draft-ietf-roll-minrank-hysteresis-of-04, May 2011.</td>
</tr>
<tr>
<td class="reference"><b id="DeCouto03">[DeCouto03]</b></td>
<td class="top">
<a>De Couto, </a>, <a>Aguayo, </a>, <a>Bicket, </a> and <a> Morris</a>, "<a>A High-Throughput Path Metric for Multi-Hop Wireless Routing </a>", MobiCom '03 The 9th ACM International Conference on Mobile          Computing and Networking, San Diego, California,, 2003.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Pascal Thubert</span> editor
	  <span class="n hidden">
		<span class="family-name">Thubert</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>Village d'Entreprises Green Side</span>
<span>400, Avenue de Roumanille</span>
<span>Batiment T3</span>

	  <span class="vcardline">
		<span class="locality">Biot - Sophia Antipolis</span>,  
		<span class="region"></span>
		<span class="code">06410</span>
	  </span>
	  <span class="country-name vcardline">FRANCE</span>
	</span>
	<span class="vcardline">Phone: +33 497 23 26 34</span>

<span class="vcardline">EMail: <a href="mailto:pthubert@cisco.com">pthubert@cisco.com</a></span>

  </address>
</div>

</body>
</html>