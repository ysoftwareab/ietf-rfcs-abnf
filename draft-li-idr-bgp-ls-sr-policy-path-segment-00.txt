



Interdomain Routing Working Group                                  C. Li
Internet-Draft                                                   M. Chen
Intended status: Standards Track                                 J. Dong
Expires: October 6, 2018                                           Z. Li
                                                     Huawei Technologies
                                                           April 4, 2018


     SR Policies for Path Segment and Bi-directional Path in BGP-LS
             draft-li-idr-bgp-ls-sr-policy-path-segment-00

Abstract

   This document specifies the way of collecting configuration and
   states of SR policies carrying path ID and bi-directional path
   information by using BPG-LS.  Such information can be used by
   external conponents for many use cases such as performance
   measurement, path re-optimization and end-to-end protection.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 6, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Li, et al.               Expires October 6, 2018                [Page 1]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Carrying SR Path Sub-TLVs in BGP-LS . . . . . . . . . . . . .   3
     3.1.  SR Path ID Sub-TLV  . . . . . . . . . . . . . . . . . . .   4
     3.2.  Sub-TLVs for Bi-directional Path  . . . . . . . . . . . .   5
       3.2.1.  SR Bi-directional Path Sub-TLV  . . . . . . . . . . .   5
       3.2.2.  SR Reverse Path Segment List Sub-TLV  . . . . . . . .   5
   4.  Operations  . . . . . . . . . . . . . . . . . . . . . . . . .   6
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   Segment routing (SR) [I-D.ietf-spring-segment-routing] is a source
   routing paradigm that allows the ingress node steers packets into a
   specific path according to the Segment Routing Policy
   [I-D.filsfils-spring-segment-routing-policy].

   However, the SR Policies defined in
   [I-D.filsfils-spring-segment-routing-policy] only supports uni-
   directional SR paths and there is no path ID in a Segment List to
   identify an SR path.  For identifying an SR path and supporting bi-
   directional path [I-D.cheng-spring-mpls-path-segment], new policies
   carrying Path ID and bi-directional path information are defined in
   [I-D.li-idr-sr-policy-path-segment-distribution], as well as the
   extensions to BGP to distribute new SR policies.  The path ID can be
   a path segment in SR-MPLS [I-D.cheng-spring-mpls-path-segment] , or a
   path ID in SRv6 [I-D.li-spring-passive-pm-for-srv6-np], or other IDs
   that can identify a path.

   In many network scenarios, the configuration and state of each TE
   Policy is required by a controller which allows the network operator
   to optimize several functions and operations through the use of a



Li, et al.               Expires October 6, 2018                [Page 2]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


   controller aware of both topology and state information
   [I-D.ietf-idr-te-lsp-distribution].

   To collect the TE Policy information that is locally available in a
   router, [I-D.ietf-idr-te-lsp-distribution] describes a new mechanism
   by using BGP-LS update messages.

   Based on the mechanism defined in [I-D.ietf-idr-te-lsp-distribution],
   this document describes a mechanism to distribute configuration and
   states of the new SR policies defined in
   [I-D.li-idr-sr-policy-path-segment-distribution] to external
   components using BGP-LS.

2.  Terminology

   This memo makes use of the terms defined in
   [I-D.ietf-spring-segment-routing] and
   [I-D.ietf-idr-te-lsp-distribution].

3.  Carrying SR Path Sub-TLVs in BGP-LS

   A mechanism to collect states of SR Policies via BGP-LS is proposed
   by [I-D.ietf-idr-te-lsp-distribution].  The characteristics of an SR
   policy can be described by a TE Policy State TLV, which is carried in
   the optional non-transitive BGP Attribute "LINK_STATE Attribute"
   defined in [RFC7752].  The TE Policy State TLV contains several sub-
   TLVs such as SR TE Policy sub-TLVs.  Rather than replicating SR TE
   Policy sub-TLVs, [I-D.ietf-idr-te-lsp-distribution] reuses the
   equivalent sub-TLVs as defined in
   [I-D.ietf-idr-segment-routing-te-policy].

   As defined in [I-D.li-idr-sr-policy-path-segment-distribution], the
   new SR policies for bi-directional path has the following format:


















Li, et al.               Expires October 6, 2018                [Page 3]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


       SR Policy SAFI NLRI: <Distinguisher, Policy-Color, Endpoint>
           Attributes: Tunnel Encaps Attribute (23)
           Tunnel Type: SR Policy
               Binding SID
               Preference
               Bi-directioanl Path
                   Segment List
                       Weight
                       Path ID
                       Segment
                       Segment
                       ...
                   Reverse Segment List
                       Weight
                       Path ID
                       Segment
                       Segment
                       ...

             Figure 1. SR policy for Bi-directional path

   For collecting configuration and states of uni-directional and bi-
   directional SR policies defined in
   [I-D.li-idr-sr-policy-path-segment-distribution], new sub-TLVs in SR
   TE Policy sub-TLVs should be defined.  Likewise, rather than
   replicating SR Policy sub-TLVs, this document can reuse the
   equivalent sub-TLVs as defined in
   [I-D.li-idr-sr-policy-path-segment-distribution].

3.1.  SR Path ID Sub-TLV

   This section defines an SR Path ID sub-TLV to specify an SR path, and
   it is included in the Segment List sub-TLV as defined in
   [I-D.ietf-idr-te-lsp-distribution].

   An SR Path ID sub-TLV is associated with an SR path specified by a
   Segment List sub-TLV, and it MUST appear only once within a Segment
   List sub-TLV.  It has the following format:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      Type     |    Length     |    Flag       |      PIT      |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                       Path ID (Variable)                      |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                         Figure 2. Path ID sub-TLV




Li, et al.               Expires October 6, 2018                [Page 4]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


   All fields, including type and length, are defined in
   [I-D.li-idr-sr-policy-path-segment-distribution].

3.2.  Sub-TLVs for Bi-directional Path

   In some scenarios like mobile backhaul transport network, there are
   requirements to support bi-directional path.  In SR, a bi-directional
   path can be represented as a binding of two uni-directional SR paths
   [I-D.cheng-spring-mpls-path-segment].
   [I-D.li-idr-sr-policy-path-segment-distribution] defines new sub-TLVs
   to describe an SR bi-directional path.  An SR policy carrying SR bi-
   directional path information is expressed in Figure 1.

3.2.1.  SR Bi-directional Path Sub-TLV

   This section defines an SR bi-directional path sub-TLV to specify a
   bi-directional path, which contains a Segment List sub-TLV
   [I-D.ietf-idr-segment-routing-te-policy] and an associated Reverse
   Path Segment List as defined in
   [I-D.li-idr-sr-policy-path-segment-distribution].  The SR bi-
   directional path sub-TLV has the following format:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |    Type       |             Length            |   RESERVED    |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                        Sub-TLVs (Variable)                    |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                  Figure 3. SR Bi-directional path sub-TLV

   All fields, including type and length, are defined in
   [I-D.li-idr-sr-policy-path-segment-distribution].

3.2.2.  SR Reverse Path Segment List Sub-TLV

   This section defines an SR Reverse Path Segment List sub-TLV to
   specify an SR reverse path associated with the path specified by the
   Segment List in the same SR Bi-directional Path Sub-TLV, and it has
   the following format:











Li, et al.               Expires October 6, 2018                [Page 5]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |    Type       |             Length            |   RESERVED    |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                        Sub-TLVs (Variable)                    |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
               Figure 4. SR Reverse Path Segment List Sub-TLV

   All fields, including type and length, are defined in
   [I-D.li-idr-sr-policy-path-segment-distribution].

4.  Operations

   No new operation procedures are defined in this document, the
   operations procedures of [RFC7752] can apply to this document.

   Typically but not limited to, the uni/bi-directional SR policies
   carrying path identification information can be distributed by the
   ingress node.

   Generally, BGP-LS is used for collecting link states and
   synchronizing with the external component.  The consumer of the uni/
   bi-directional SR policies carrying path identification information
   is not BGP LS process by itself, and it can be any applications such
   as performance measurement and path re-coputation or re-optimization,
   etc.  The operation of sending information to other precesses is out
   of scope of this document.

5.  IANA Considerations

   TBA

6.  Security Considerations

   TBA

7.  Acknowledgements

   TBA

8.  Normative References

   [I-D.cheng-spring-mpls-path-segment]
              Cheng, W., Wang, L., Li, H., Chen, M., Zigler, R., and S.
              Zhan, "Path Segment in MPLS Based Sement Routing Network",
              draft-cheng-spring-mpls-path-segment-01 (work in
              progress), March 2018.



Li, et al.               Expires October 6, 2018                [Page 6]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


   [I-D.filsfils-spring-segment-routing-policy]
              Filsfils, C., Sivabalan, S., Raza, K., Liste, J., Clad,
              F., Talaulikar, K., Ali, Z., Hegde, S.,
              daniel.voyer@bell.ca, d., Lin, S., bogdanov@google.com,
              b., Krol, P., Horneffer, M., Steinberg, D., Decraene, B.,
              Litkowski, S., and P. Mattes, "Segment Routing Policy for
              Traffic Engineering", draft-filsfils-spring-segment-
              routing-policy-05 (work in progress), February 2018.

   [I-D.ietf-idr-segment-routing-te-policy]
              Previdi, S., Filsfils, C., Jain, D., Mattes, P., Rosen,
              E., and S. Lin, "Advertising Segment Routing Policies in
              BGP", draft-ietf-idr-segment-routing-te-policy-02 (work in
              progress), March 2018.

   [I-D.ietf-idr-te-lsp-distribution]
              Previdi, S., Dong, J., Chen, M., Gredler, H., and J.
              Tantsura, "Distribution of Traffic Engineering (TE)
              Policies and State using BGP-LS", draft-ietf-idr-te-lsp-
              distribution-08 (work in progress), December 2017.

   [I-D.ietf-spring-segment-routing]
              Filsfils, C., Previdi, S., Ginsberg, L., Decraene, B.,
              Litkowski, S., and R. Shakir, "Segment Routing
              Architecture", draft-ietf-spring-segment-routing-15 (work
              in progress), January 2018.

   [I-D.li-idr-sr-policy-path-segment-distribution]
              Li, C., Chen, M., Dong, J., and Z. Li, "Segment Routing
              Policies for Path Segment and Bi-directional Path", draft-
              li-idr-sr-policy-path-segment-distribution-00 (work in
              progress), April 2018.

   [I-D.li-spring-passive-pm-for-srv6-np]
              Li, C. and M. Chen, "Passive Performance Measurement for
              SRv6 Network Programming", draft-li-spring-passive-pm-for-
              srv6-np-00 (work in progress), March 2018.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.



Li, et al.               Expires October 6, 2018                [Page 7]

Internet-Draft  Path ID and Bi-directional Path in BGP-LS     April 2018


Authors' Addresses

   Cheng Li
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: chengli13@huawei.com


   Mach(Guoyi) Chen
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: Mach.chen@huawei.com


   Jie Dong
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: jie.dong@huawei.com


   Zhenbin Li
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: lizhenbin@huawei.com















Li, et al.               Expires October 6, 2018                [Page 8]
