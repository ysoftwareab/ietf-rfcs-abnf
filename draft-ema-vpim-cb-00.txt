


Internet Draft							D. Dunne
Document: draft-ema-vpim-cb-00.txt			 Nortel Networks
Category: Informational					      G. Parsons
Expires in Six Months					 Nortel Networks
							   July 14, 2000

                 Voice Messaging IMAP Client Behaviour


STATUS OF THIS MEMO:

   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time. It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   This document defines the expected behaviour of an IMAP client to 
   various aspects of a VPIM message.

Table of Contents

   1. Introduction
   1.1 Conventions Used in This Document
   2. Message Icon
   2.1 Proposed Mechanism
   3. Sender's Number Column
   3.1 Proposed Mechanism
   4. Message Size
   4.1 Proposed Mechanism
   5. Media Viewer
   5.1 Proposed Mechanism
   6. Mark Message Read only if Primary Content Read
   7. Security Considerations
   8. References
   9. Acknowledgements


Dunne & Parsons              Informational                      [Page 1]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


   10. Author's Address
   11. Full Copyright Statement




















































Dunne & Parsons              Informational                      [Page 2]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


1. Introduction

   As Internet messaging evolves into Unified messaging, the term "e-
   mail" no longer refers to text-only messages.  Today's "e-mail" can 
   also have voice and/or fax parts, as well as text.

   Each of voice, fax, and text have their own distinct characteristics,
   which are intuitive to the user.  For example, each of these 
   message types require a different media viewer (text editor for text,
   audio player for voice, and image viewer for fax), and the 
   dimensions of message size are also different for all three 
   (kilobytes for text, seconds for voice, and pages for fax).

   How the messaging client responds to, and acts on these differences 
   is termed "Client Behaviour".  This is heavily dependant on the 
   concept of "Primary Content" [2], which defines whether the message 
   is a voice mail, fax, or text message.  The client can utilize this 
   header to determine the appropriate behaviour for a particular 
   message.

   Note that this document deals only with IMAP clients.  Where 
   appropriate, this document suggests how some of the desired 
   behaviours may be implemented using IMAP, but these should be 
   properly defined in other specifications.

1.1 Conventions Used in This Document

   In examples, "C:" and "S:" indicate lines sent by the client and 
   server respectively.


2. Message Icon

   The preferred method to distinguish between voice, fax, and text 
   messages is with a visual cue, or icon.

   As it is possible for the message to contain more than one media 
   type, the icon should describe the primary message content, as 
   defined by the "Primary-Content" header.  Obvious choices for the 
   icon/message pairs would be a telephone for a voice message, a fax 
   machine for a fax message, and an envelope for a text message.

   This could be taken a step further, and have the icon change to 
   indicate that the message has been read (as is currently done in 
   many email clients).  For example, a telephone with the receiver off-
   hook could indicate that the voice message has been played.  A fax 
   machine with paper at the bottom, as opposed to the top, would show 
   that the fax had been viewed.  Finally, as is currently the norm, an 
   open envelope indicates that a text message has been read.

2.1 Proposed Mechanism



Dunne & Parsons              Informational                      [Page 3]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


   As the choice of icon is determined by the primary message type, the 
   client should obtain this information from the "Primary-Content" 
   message header.  This header is defined in the Internet Draft draft-
   burger-vpim-pc-00.txt [2].

3. Sender's Number Column

   As is the case with most email clients today, important message 
   information is organized into columns when presented to the user.  
   Typical columns include the message subject, and the date the 
   message was received.

   Another important piece of information for the user is the origin of 
   the message.  For a voice or fax message, the origin is typically a 
   telephone or fax machine respectively, each of which has an 
   associated telephone number.  This telephone number is critical to 
   the user if they wish to return the call.

3.1 Proposed Mechanism

   There is currently a proposal to add a new Internet message header 
   to hold the originating telephone number [3].  The client should 
   extract this information, and display it to the user in a column.  
   As this header is defined to only hold the digits of the telephone 
   number, it is left to the client to add any separating characters 
   (e.g. "-").

4. Message Size

   In the cases of large attachments, small clients and slow links 
   there is also a need for the client to see the length of the message 
   in a suitable format before opening it.

   Currently, message size is normally given in kilobytes (kB).  This 
   is sufficient for plain text messages, but it is not very useful in 
   terms of voice and fax.  Instead, the size should give an indication 
   of the length of the message, i.e. the duration (in seconds) of a 
   voice message, and the number of pages of a fax.  Again, the message 
   may contain multiple types, so the size displayed should be that of 
   the primary content type.

4.1 Proposed Mechanism

   There are three suggested methods to relay this information, of them,
   method 1 is favoured: 

   4.1.1  MIME Header Content-Duration as described in RFC 2424 [5]

   For fax messages a new MIME Header, Content-Page-Length, would be 
   defined, similar to Content-Duration with the exception that number 
   of pages would be specified, rather than number of seconds. (e.g. 
   Content-Page-Length:3).  This would be created at originator.


Dunne & Parsons              Informational                      [Page 4]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


   4.1.2  FETCH item USERSIZE similar to FETCH items described in  
   IMAP4rev1 [6].

   This would be created at reception.

   4.1.2.1  USERSIZE is a non-negative number.  Its meaning depends on 
   document type.

   C: abc FETCH 1:2 (USERSIZE)
   S: *1 FETCH (12)
   S: *2 FETCH (57)
   S: abc FETCH completed.

   4.1.2.2  USERSIZE is a pair of number and unit.  There is a small 
   set of unit tokens.

   C: abc FETCH 1:2 (USERSIZE)
   S: *1 FETCH (12 pages)
   S: *2 FETCH (57 seconds)
   S: abc FETCH completed.

   4.1.2.3  USERSIZE is a sequence of pairs, in case something extends 
   in more than one unit.

   C: abc FETCH 1:2 (USERSIZE)
   S: *1 FETCH (12 lines)
   S: *1 FETCH (57 pages 6 hours)
   S: abc FETCH completed.

   Servers that support USERSIZE SHOULD list the USERSIZE capability in 
   response to the CAPABILITY command.

   4.1.3  Message length indicated as a parameter of an existing Header 
   Field [7].

   This would be created at the source.  This method would allow the 
   message length to be passed to the client by default. 

   4.1.3.1  Content-Type Header Field

   Content-Type=audio/*; length=50
   Content-Type=image/tiff; pages=3

   4.1.3.2 Subject Header Field

   Subject=Voice Message (0:04)
   Subject=Fax Message (3)

   The advantage of the subject field is that it is automatically 
   displayed to the user.

5. Media Viewer


Dunne & Parsons              Informational                      [Page 5]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


   When a message is initially opened, the client should, by default, 
   open the proper media viewer to display the primary message content, 
   i.e. an audio player for voice messages, image viewer for fax, and 
   text editor for text messages.

   Where there is more than one body part, obviously the appropriate 
   viewer should be used depending on which body part the user has 
   selected.

   In the case where several viewers are available for a single media 
   type, the user should be prompted to select the desired viewer on 
   the first occasion that the message type is encountered.  That 
   viewer should then become the default viewer for that media type.

   The user should have the ability to change the default viewer for a 
   media type at any time.

5.1 Proposed Mechanism

   As mentioned, the default viewer displayed to the user should be the 
   appropriate one for the primary message type.  The client is able to 
   determine the primary message type from the "Primary-Content" 
   message header.  This header is defined in the Internet Draft draft-
   burger-vpim-pc-00.txt [2].

6. Mark Message as Read

   Obviously, the user must be able to know which messages they have 
   read, and which are unread.  This feature would also control the 
   message icon as mentioned in section 1.

   With the use of multipart messages there should be a separate BODY 
   PART READ indicator for each body part or, at least, to only 
   indicate READ when the primary body part has been read. There are 
   two suggested methods.  Favoured is method 2.

   IMAP4rev1 servers that support body part read indicators SHOULD list 
   the keyword SEEN-BY-PART in response to the CAPABILITY command.

6.1 Proposed Mechanism

   6.1.1  \SEEN per BODY PART

   For example, if a client retrieves the text part of a message 
   without looking at the audio attachment, the indicator would show 
   that only the text part had been read and not the entire message.

   6.1.2  \SEEN only after Primary Message Type has been opened. 

   Primary Message Type is discussed in VPIM Unified Message [8].  In 
   the case of multiple attachments the \SEEN flag would be set after 
   the first attachment of the primary content type has been opened.  


Dunne & Parsons              Informational                      [Page 6]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


   For example, if the primary content type is multipart/voice-message, 
   the \SEEN flag would be set after the first voice message is opened. 
   This could be the spoken name of the sender or the spoken subject as
   opposed to the actual voice message.

7. Security Considerations

   The desirable client behaviours described here are intended to 
   provide the user with a better desktop experience.  However, it is 
   open to the same risks as any IMAP client.  That is, the client is 
   not responsible for the format of the message received, it only 
   interprets.  As a result, messages could be spoofed or masqueraded 
   to look like a message they are not to elicit a desired client 
   behaviour.  This could be used to fool the end user, for example, 
   into thinking a message was a voice message (because of the icon) 
   when it was not.


8. References
   1. Parsons, G., Vaudreuil, G., "Voice Profile for Internet Mail - 
   version 2", draft-ema-vpim-vpimv2r2-02.txt, October 1999
   2. Burger, E., Candell, E., "Primary Content of Internet Mail", 
   draft-burger-vpim-pc-00.txt, Work in Progress
   3. Dunne, D., "Calling Line Identification for VPIM Messages", draft-
   ema-vpim-clid-00.txt, Work in Progress
   4. Parsons, G., "IMAP Voice Extensions", draft-ema-vpim-imap-01.txt, 
   June 1999
   5. Vaudreuil, G., Parsons, G., "Content Duration MIME Header 
   Definition", RFC2424, September 1998
   6. Crispin, M., "Internet Message Access Protocol - Version 4rev1", 
   RFC 2060, December 1996
   7. Freed, N., Borenstein, N., "Multipurpose Internet Mail Extensions 
   (MIME) Part One: Format of Internet Message Bodies", RFC 2045, 
   November 1996
   8. Parsons, G., Cohen, M., Vaudreuil, G., "VPIM Unified Message MIME 
   Sub-Type Registration", <draft-ema-vpim-um-01.txt>, Work In Progress
   9. Schulzrinne, H., Rao, A., Lanphier, R., "Real Time Streaming 
   Protocol (RTSP)", RFC 2326, April 1998
   10. Newman, C., "IMAP URL Scheme", RFC 2192, September 1997

9 Acknowledgements

   The "Proposed Mechanism" of sections 4 and 6 of this document are 
   borrowed from draft-ema-vpim-imap-01.txt [4].  The authors would 
   like to acknowledge all those who contributed to that document.

10. Author's Address

   Derrick Dunne
   Nortel Networks
   P.O. Box 3511, Station C
   Ottawa, ON 
   

Dunne & Parsons              Informational                      [Page 7]
Internet Draft   Voice Messaging IMAP Client Behaviour         July 2000


   K1Y 4H7

   Phone:+1-613-768-4087
   Fax: +1-613-763-4461
   Email:dunned@nortelnetworks.com

   Glenn Parsons 
   Nortel Networks 
   P.O. Box 3511, Station C
   Ottawa, ON 
   K1Y 4H7

   Phone: +1-613-763-7582 
   Fax: +1-613-763-4461 
   Email: gparsons@nortelnetworks.com

11. Full Copyright Statement

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph 
   are included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into languages other than 
   English.

   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an 
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.



















Dunne & Parsons              Informational                      [Page 8]
