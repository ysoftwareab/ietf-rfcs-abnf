<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Data Model for Static Context Header Compression (SCHC)</title>
<meta content="Ana Minaburo" name="author">
<meta content="Laurent Toutain" name="author">
<meta content="
       This document describes a YANG data model for the SCHC (Static Context Header Compression) 
compression and fragmentation rules. 
    " name="description">
<meta content="xml2rfc 3.11.1" name="generator">
<meta content="draft-ietf-lpwan-schc-yang-data-model-06" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.11.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.4
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.26.0
    setuptools 59.1.1
    six 1.16.0
-->
<link href="/tmp/file07-41kwta4q.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">LPWAN SCHC YANG module</td>
<td class="right">November 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Minaburo &amp; Toutain</td>
<td class="center">Expires 28 May 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">lpwan Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-lpwan-schc-yang-data-model-06</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-11-24" class="published">24 November 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-05-28">28 May 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Minaburo</div>
<div class="org">Acklio</div>
</div>
<div class="author">
      <div class="author-name">L. Toutain</div>
<div class="org">Institut MINES TELECOM; IMT Atlantique</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Data Model for Static Context Header Compression (SCHC)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a YANG data model for the SCHC (Static Context Header Compression) 
compression and fragmentation rules.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 May 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-schc-rules" class="xref">SCHC rules</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-compression-rules" class="xref">Compression Rules</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1" class="keepWithNext"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-identifier-generation" class="xref">Identifier generation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-field-identifier" class="xref">Field Identifier</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-field-length" class="xref">Field length</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="xref">2.5</a>.  <a href="#name-field-position" class="xref">Field position</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="xref">2.6</a>.  <a href="#name-direction-indicator" class="xref">Direction Indicator</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a href="#section-2.7" class="xref">2.7</a>.  <a href="#name-target-value" class="xref">Target Value</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8">
                <p id="section-toc.1-1.2.2.8.1"><a href="#section-2.8" class="xref">2.8</a>.  <a href="#name-matching-operator" class="xref">Matching Operator</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8.2.1">
                    <p id="section-toc.1-1.2.2.8.2.1.1"><a href="#section-2.8.1" class="xref">2.8.1</a>.  <a href="#name-matching-operator-arguments" class="xref">Matching Operator arguments</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9">
                <p id="section-toc.1-1.2.2.9.1"><a href="#section-2.9" class="xref">2.9</a>.  <a href="#name-compression-decompression-a" class="xref">Compression Decompression Actions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9.2.1">
                    <p id="section-toc.1-1.2.2.9.2.1.1"><a href="#section-2.9.1" class="xref">2.9.1</a>.  <a href="#name-compression-decompression-ac" class="xref">Compression Decompression Action arguments</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10">
                <p id="section-toc.1-1.2.2.10.1"><a href="#section-2.10" class="xref">2.10</a>. <a href="#name-fragmentation-rule" class="xref">Fragmentation rule</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10.2.1">
                    <p id="section-toc.1-1.2.2.10.2.1.1"><a href="#section-2.10.1" class="xref">2.10.1</a>.  <a href="#name-fragmentation-mode" class="xref">Fragmentation mode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10.2.2">
                    <p id="section-toc.1-1.2.2.10.2.2.1"><a href="#section-2.10.2" class="xref">2.10.2</a>.  <a href="#name-fragmentation-header" class="xref">Fragmentation Header</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10.2.3">
                    <p id="section-toc.1-1.2.2.10.2.3.1"><a href="#section-2.10.3" class="xref">2.10.3</a>.  <a href="#name-last-fragment-format" class="xref">Last fragment format</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10.2.4">
                    <p id="section-toc.1-1.2.2.10.2.4.1"><a href="#section-2.10.4" class="xref">2.10.4</a>.  <a href="#name-acknowledgment-behavior" class="xref">Acknowledgment behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10.2.5">
                    <p id="section-toc.1-1.2.2.10.2.5.1"><a href="#section-2.10.5" class="xref">2.10.5</a>.  <a href="#name-fragmentation-parameters" class="xref">Fragmentation Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10.2.6">
                    <p id="section-toc.1-1.2.2.10.2.6.1"><a href="#section-2.10.6" class="xref">2.10.6</a>.  <a href="#name-layer-2-parameters" class="xref">Layer 2 parameters</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-rule-definition" class="xref">Rule definition</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-compression-rule" class="xref">Compression rule</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-fragmentation-rule-2" class="xref">Fragmentation rule</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-yang-tree" class="xref">YANG Tree</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-security-considerations" class="xref">Security considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-yang-module" class="xref">YANG Module</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
    </h2>
</section>
</div>
<div id="schc-rules">
<section id="section-2">
      <h2 id="name-schc-rules">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-schc-rules" class="section-name selfRef">SCHC rules</a>
      </h2>
<p id="section-2-1">SCHC is a compression and fragmentation mechanism for constrained networks defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>.
It is based on a static context shared by two entities at the boundary of the constrained network.
<span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> provides a non formal representation of the rules used either for compression/decompression (or C/D)
or fragmentation/reassembly (or F/R). The goal of this document is to formalize the description of the rules to offer:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">the same definition on both ends, even if the internal representation is different.<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">an update of the other end to set up some specific values (e.g. IPv6 prefix, Destination address,...)<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">...<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-3">This document defines a YANG module to represent both compression and fragmentation rules, which leads to common representation for values for all the rules elements.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">SCHC compression is generic, the main mechanism does not refer
to a specific protocol. Any header field is abstracted through an ID, a position, a direction, and a value that can be a numerical
value or a string. <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> and <span>[<a href="#RFC8824" class="xref">RFC8824</a>]</span> specify fields for IPv6, UDP, CoAP and OSCORE.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">SCHC fragmentation requires a set of common parameters that are included in a rule. These parameters are defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>.<a href="#section-2-5" class="pilcrow">¶</a></p>
<div id="comp_types">
<section id="section-2.1">
        <h3 id="name-compression-rules">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-compression-rules" class="section-name selfRef">Compression Rules</a>
        </h3>
<p id="section-2.1-1"><span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> proposes a non formal representation of the compression rule.
A compression context for a device is composed of a set of rules. Each rule contains information to
describe a specific field in the header to be compressed.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<span id="name-compression-decompression-c"></span><div id="Fig-ctxt">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-2.1-2.1">
<pre>
  +-----------------------------------------------------------------+
  |                      Rule N                                     |
 +-----------------------------------------------------------------+|
 |                    Rule i                                       ||
+-----------------------------------------------------------------+||
|  (FID)            Rule 1                                        |||
|+-------+--+--+--+------------+-----------------+---------------+|||
||Field 1|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act||||
|+-------+--+--+--+------------+-----------------+---------------+|||
||Field 2|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act||||
|+-------+--+--+--+------------+-----------------+---------------+|||
||...    |..|..|..|   ...      | ...             | ...           ||||
|+-------+--+--+--+------------+-----------------+---------------+||/
||Field N|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act|||
|+-------+--+--+--+------------+-----------------+---------------+|/
|                                                                 |
\-----------------------------------------------------------------/

</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-compression-decompression-c" class="selfRef">Compression Decompression Context</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="identifier-generation">
<section id="section-2.2">
        <h3 id="name-identifier-generation">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-identifier-generation" class="section-name selfRef">Identifier generation</a>
        </h3>
<p id="section-2.2-1">Identifier used in the SCHC YANG Data Model are from the identityref statement to ensure to be globally unique and be easily augmented if needed.  The principle to define a new type based on a group of identityref is the following:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-2.1">define a main identity ending with the keyword base-type.<a href="#section-2.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.2">derive all the identity used in the Data Model from this base type.<a href="#section-2.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.3">create a typedef from this base type.<a href="#section-2.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-3">The example (<a href="#Fig-identityref" class="xref">Figure 2</a>) shows how an identityref is created for RCS algorithms used during SCHC fragmentation.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<span id="name-principle-to-define-a-type-"></span><div id="Fig-identityref">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-2.2-4.1">
<pre>
  // -- RCS algorithm types

  identity rcs-algorithm-base-type {
    description
      "Identify which algorithm is used to compute RSC.
       The algorithm also defines the size if the RSC field.";
  }

  identity rcs-RFC8724 {
    base rcs-algorithm-base-type;
    description
      "CRC 32 defined as default RCS in RFC8724.";
  }

  typedef rcs-algorithm-type {
    type identityref {
      base rcs-algorithm-base-type;
    }
    description
      "type used in rules";
  }

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-principle-to-define-a-type-" class="selfRef">Principle to define a type based on identityref.</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="field-identifier">
<section id="section-2.3">
        <h3 id="name-field-identifier">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-field-identifier" class="section-name selfRef">Field Identifier</a>
        </h3>
<p id="section-2.3-1">In the process of compression, the headers of the original packet are first parsed to create a list of fields. This list of fields is matched against the rules to find the appropriate rule and apply compression.  <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>  do not state how the field ID value can be constructed. 
In examples, identification is done through a string indexed by the protocol name (e.g. IPv6.version, CoAP.version,...).<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">The current YANG Data Model includes fields definitions found in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, <span>[<a href="#RFC8824" class="xref">RFC8824</a>]</span>.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3-3">Using the YANG model, each field MUST be identified through a global YANG identityref.
A YANG field ID for the protocol always derives from the fid-base-type. Then an identity 
for each protocol is specified using the naming convention fid-&lt;&lt;protocol name&gt;&gt;-base-type. 
All possible fields for this protocol MUST derive from the protocol identity. The naming 
convention is "fid" followed by the protocol name and the field name. If a field has 
to be divided into sub-fields, the field identity serves as a base.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
<p id="section-2.3-4">The full field-id definition is found in <a href="#annexA" class="xref">Section 7</a>. The example <a href="#Fig-ex-field-id" class="xref">Figure 3</a> 
gives the first field ID definitions. A type is defined for IPv6 protocol, and each 
field is based on it. Note that the DiffServ bits derives from the Traffic Class identity.<a href="#section-2.3-4" class="pilcrow">¶</a></p>
<span id="name-definition-of-identityref-f"></span><div id="Fig-ex-field-id">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-2.3-5.1">
<pre>
  identity fid-base-type {
    description
      "Field ID base type for all fields";
  }

  identity fid-ipv6-base-type {
    base fid-base-type;
    description
      "Field IP base type for IPv6 headers described in RFC 8200";
  }

  identity fid-ipv6-version {
    base fid-ipv6-base-type;
    description
      "IPv6 version field from RFC8200";
  }

  identity fid-ipv6-trafficclass {
    base fid-ipv6-base-type;
    description
      "IPv6 Traffic Class field from RFC8200";
  }

  identity fid-ipv6-trafficclass-ds {
    base fid-ipv6-trafficclass;
    description
      "IPv6 Traffic Class field from RFC8200,
       DiffServ field from RFC3168";
  }
  ...

</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-definition-of-identityref-f" class="selfRef">Definition of identityref for field IDs</a>
          </figcaption></figure>
</div>
<p id="section-2.3-6">The type associated to this identity is fid-type (cf. <a href="#Fig-field-id-type" class="xref">Figure 4</a>)<a href="#section-2.3-6" class="pilcrow">¶</a></p>
<span id="name-type-definition-for-field-i"></span><div id="Fig-field-id-type">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-2.3-7.1">
<pre>
  typedef fid-type {
    type identityref {
      base fid-base-type;
    }
    description
      "Field ID generic type.";
  }
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-type-definition-for-field-i" class="selfRef">Type definition for field IDs</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="field-length">
<section id="section-2.4">
        <h3 id="name-field-length">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-field-length" class="section-name selfRef">Field length</a>
        </h3>
<p id="section-2.4-1">Field length is either an integer giving the size of a field in bits or a specific function. <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines the
"var" function which allows variable length fields in byte and <span>[<a href="#RFC8824" class="xref">RFC8824</a>]</span> defines the "tkl" function for managing the CoAP
Token length field.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">The naming convention is "fl" followed by the function name.<a href="#section-2.4-2" class="pilcrow">¶</a></p>
<span id="name-definition-of-identityref-fo"></span><div id="Fig-ex-field-length">
<figure id="figure-5">
          <div class="alignLeft art-text artwork" id="section-2.4-3.1">
<pre>
  identity fl-base-type {
    description
      "Used to extend field length functions.";
  }

  identity fl-variable {
    base fl-base-type;
    description
      "Residue length in Byte is sent as defined in
       for CoAP in RFC 8824 (cf. 5.3).";
  }

  identity fl-token-length {
    base fl-base-type;
    description
      "Residue length in Byte is sent as defined in
       for CoAP in RFC 8824 (cf. 4.5).";
  }
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-definition-of-identityref-fo" class="selfRef">Definition of identityref for Field Length</a>
          </figcaption></figure>
</div>
<p id="section-2.4-4">Field ID, field length function can be defined as an identityref as shown in <a href="#Fig-ex-field-length" class="xref">Figure 5</a>.<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<p id="section-2.4-5">Therefore, the type for field length is a union between an integer giving in bits the size of the length and the identityref (cf. <a href="#Fig-ex-field-length-union" class="xref">Figure 6</a>).<a href="#section-2.4-5" class="pilcrow">¶</a></p>
<span id="name-type-definition-for-field-l"></span><div id="Fig-ex-field-length-union">
<figure id="figure-6">
          <div class="alignLeft art-text artwork" id="section-2.4-6.1">
<pre>
  typedef fl-type {
    type union {
      type int64; /* positive length in bits */
      type identityref { /* function */
        base fl-base-type;
      }
    }
    description
      "Field length either a positive integer giving the size in bits
       or a function defined through an identityref.";
  }

</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-type-definition-for-field-l" class="selfRef">Type definition for field Length</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="field-position">
<section id="section-2.5">
        <h3 id="name-field-position">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-field-position" class="section-name selfRef">Field position</a>
        </h3>
<p id="section-2.5-1">Field position is a positive integer which gives the position of a field, the default value is 1, and incremented at each repetition. 
value 0 indicates that the position is not important and is not considered during the rule selection process.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.5-2">Field position is a positive integer. The type is an uint8.<a href="#section-2.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="direction-indicator">
<section id="section-2.6">
        <h3 id="name-direction-indicator">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-direction-indicator" class="section-name selfRef">Direction Indicator</a>
        </h3>
<p id="section-2.6-1">The Direction Indicator (di) is used to tell if a field appears in both direction (Bi) or only uplink (Up) or Downlink (Dw).<a href="#section-2.6-1" class="pilcrow">¶</a></p>
<span id="name-definition-of-identityref-for"></span><div id="Fig-ex-field-DI">
<figure id="figure-7">
          <div class="alignLeft art-text artwork" id="section-2.6-2.1">
<pre>

  identity di-base-type {
    description
      "Used to extend direction indicators.";
  }

  identity di-bidirectional {
    base di-base-type;
    description
      "Direction Indication of bi directionality in
       RFC 8724 (cf. 7.1).";
  }

  identity di-up {
    base di-base-type;
    description
      "Direction Indication of upstream defined in
       RFC 8724 (cf. 7.1).";
  }

  identity di-down {
    base di-base-type;
    description
      "Direction Indication of downstream defined in
       RFC 8724 (cf. 7.1).";
  }

</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-definition-of-identityref-for" class="selfRef">Definition of identityref for direction indicators</a>
          </figcaption></figure>
</div>
<p id="section-2.6-3"><a href="#Fig-ex-field-DI" class="xref">Figure 7</a> gives the identityref for Direction Indicators. The naming convention is "di" followed by the Direction Indicator name.<a href="#section-2.6-3" class="pilcrow">¶</a></p>
<p id="section-2.6-4">The type is "di-type" (cf. <a href="#Fig-field-DI-type" class="xref">Figure 8</a>).<a href="#section-2.6-4" class="pilcrow">¶</a></p>
<span id="name-type-definition-for-directi"></span><div id="Fig-field-DI-type">
<figure id="figure-8">
          <div class="alignLeft art-text artwork" id="section-2.6-5.1">
<pre>
  typedef di-type {
    type identityref {
      base di-base-type;
    }
    description
      "Direction in LPWAN network, up when emitted by the device,
       down when received by the device, bi when emitted or
       received by the device.";
  }

</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-type-definition-for-directi" class="selfRef">Type definition for direction indicators</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="target-value">
<section id="section-2.7">
        <h3 id="name-target-value">
<a href="#section-2.7" class="section-number selfRef">2.7. </a><a href="#name-target-value" class="section-name selfRef">Target Value</a>
        </h3>
<p id="section-2.7-1">The Target Value is a list of binary sequences of any length, aligned on the left. <a href="#Fig-ex-TV" class="xref">Figure 9</a> gives the definition of a single element of a Target Value. In the rule, this will be used as a list, with position as a key. The highest position value is used to compute the size of the index sent in residue for LSB CDA. The position allows to specify several values:<a href="#section-2.7-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.7-2.1">For Equal and LSB, a single value is used, such as for the equal or LSB CDA, the position is set to 0.<a href="#section-2.7-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.7-2.2">For match-mapping, several of these values can be contained in a Target Value field.  Position values must start from 0 and be contiguous.<a href="#section-2.7-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<span id="name-definition-of-target-value"></span><div id="Fig-ex-TV">
<figure id="figure-9">
          <div class="alignLeft art-text artwork" id="section-2.7-3.1">
<pre>
  grouping tv-struct {
    description
      "Define the target value element. Always a binary type, strings
       must be converted to binary. field-id allows the conversion
       to the appropriate type.";
    leaf value {
      type binary;
      description
        "Target Value";
    }
    leaf position {
      type uint16;
      description
        "If only one element position is 0, otherwise position is the
         the position in the matching list.";
    }
  }
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-definition-of-target-value" class="selfRef">Definition of target value</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="matching-operator">
<section id="section-2.8">
        <h3 id="name-matching-operator">
<a href="#section-2.8" class="section-number selfRef">2.8. </a><a href="#name-matching-operator" class="section-name selfRef">Matching Operator</a>
        </h3>
<p id="section-2.8-1">Matching Operator (MO) is a function applied between a field value provided by the parsed header and the target value. <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines 4 MO as listed in <a href="#Fig-ex-MO" class="xref">Figure 10</a>.<a href="#section-2.8-1" class="pilcrow">¶</a></p>
<span id="name-definition-of-identityref-for-"></span><div id="Fig-ex-MO">
<figure id="figure-10">
          <div class="alignLeft art-text artwork" id="section-2.8-2.1">
<pre>
  identity mo-base-type {
    description
      "Used to extend Matching Operators with SID values";
  }

  identity mo-equal {
    base mo-base-type;
    description
      "Equal MO as defined RFC 8724 (cf. 7.3)";
  }

  identity mo-ignore {
    base mo-base-type;
    description
      "Ignore MO as defined RFC 8724 (cf. 7.3)";
  }

  identity mo-msb {
    base mo-base-type;
    description
      "MSB MO as defined RFC 8724 (cf. 7.3)";
  }

  identity mo-match-mapping {
    base mo-base-type;
    description
      "match-mapping MO as defined RFC 8724 (cf. 7.3)";
  }

</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-definition-of-identityref-for-" class="selfRef">Definition of identityref for Matching Operator</a>
          </figcaption></figure>
</div>
<p id="section-2.8-3">The naming convention is "mo" followed by the MO name.<a href="#section-2.8-3" class="pilcrow">¶</a></p>
<p id="section-2.8-4">The type is "mo-type" (cf. <a href="#Fig-MO-type" class="xref">Figure 11</a>)<a href="#section-2.8-4" class="pilcrow">¶</a></p>
<span id="name-type-definition-for-matchin"></span><div id="Fig-MO-type">
<figure id="figure-11">
          <div class="alignLeft art-text artwork" id="section-2.8-5.1">
<pre>
  typedef mo-type {
    type identityref {
      base mo-base-type;
    }
    description
      "Matching Operator (MO) to compare fields values with
      target values";
  }
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-type-definition-for-matchin" class="selfRef">Type definition for Matching Operator</a>
          </figcaption></figure>
</div>
<div id="matching-operator-arguments">
<section id="section-2.8.1">
          <h4 id="name-matching-operator-arguments">
<a href="#section-2.8.1" class="section-number selfRef">2.8.1. </a><a href="#name-matching-operator-arguments" class="section-name selfRef">Matching Operator arguments</a>
          </h4>
<p id="section-2.8.1-1">They are viewed as a list of tv-struct.<a href="#section-2.8.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="compression-decompression-actions">
<section id="section-2.9">
        <h3 id="name-compression-decompression-a">
<a href="#section-2.9" class="section-number selfRef">2.9. </a><a href="#name-compression-decompression-a" class="section-name selfRef">Compression Decompression Actions</a>
        </h3>
<p id="section-2.9-1">Compression Decompression Action (CDA) identified the function to use either for compression or decompression. 
<span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines 6 CDA.<a href="#section-2.9-1" class="pilcrow">¶</a></p>
<p id="section-2.9-2"><a href="#Fig-CDA-type" class="xref">Figure 13</a> gives some CDA definition, the full definition is in <a href="#annexA" class="xref">Section 7</a>.<a href="#section-2.9-2" class="pilcrow">¶</a></p>
<span id="name-definition-of-identityref-for-c"></span><div id="Fig-ex-CDA">
<figure id="figure-12">
          <div class="alignLeft art-text artwork" id="section-2.9-3.1">
<pre>
  identity cda-base-type {
    description
      "Compression Decompression Actions.";
  }

  identity cda-not-sent {
    base cda-base-type;
    description
      "not-sent CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-value-sent {
    base cda-base-type;
    description
      "value-sent CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-lsb {
    base cda-base-type;
    description
      "LSB CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-mapping-sent {
    base cda-base-type;
    description
      "mapping-sent CDA as defines in RFC 8724 (cf. 7.4).";
  }

    ....
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-definition-of-identityref-for-c" class="selfRef">Definition of identityref for  Compresion Decompression Action</a>
          </figcaption></figure>
</div>
<p id="section-2.9-4">The naming convention is "cda" followed by the CDA name.<a href="#section-2.9-4" class="pilcrow">¶</a></p>
<span id="name-type-definition-for-compres"></span><div id="Fig-CDA-type">
<figure id="figure-13">
          <div class="alignLeft art-text artwork" id="section-2.9-5.1">
<pre>
  typedef cda-type {
    type identityref {
      base cda-base-type;
    }
    description
      "Compression Decompression Action to compression or
      decompress a field.";
  }

</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-type-definition-for-compres" class="selfRef">Type definition for Compresion Decompression Action</a>
          </figcaption></figure>
</div>
<div id="compression-decompression-action-arguments">
<section id="section-2.9.1">
          <h4 id="name-compression-decompression-ac">
<a href="#section-2.9.1" class="section-number selfRef">2.9.1. </a><a href="#name-compression-decompression-ac" class="section-name selfRef">Compression Decompression Action arguments</a>
          </h4>
<p id="section-2.9.1-1">Currently no CDA requires arguments, but the future some CDA may require several arguments.
They are viewed as a list of target-values-type.<a href="#section-2.9.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="frag_types">
<section id="section-2.10">
        <h3 id="name-fragmentation-rule">
<a href="#section-2.10" class="section-number selfRef">2.10. </a><a href="#name-fragmentation-rule" class="section-name selfRef">Fragmentation rule</a>
        </h3>
<p id="section-2.10-1">Fragmentation is optional in the data model and depends on the presence of the "fragmentation" feature.<a href="#section-2.10-1" class="pilcrow">¶</a></p>
<p id="section-2.10-2">Most of parameters for fragmentation are defined in Annex D of <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>.<a href="#section-2.10-2" class="pilcrow">¶</a></p>
<p id="section-2.10-3">Since fragmentation rules work for a specific direction, they contain a mandatory direction.
The type is the same as the one used in compression entries, but the use of bidirectional is 
forbidden.<a href="#section-2.10-3" class="pilcrow">¶</a></p>
<div id="fragmentation-mode">
<section id="section-2.10.1">
          <h4 id="name-fragmentation-mode">
<a href="#section-2.10.1" class="section-number selfRef">2.10.1. </a><a href="#name-fragmentation-mode" class="section-name selfRef">Fragmentation mode</a>
          </h4>
<p id="section-2.10.1-1"><span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines 3 fragmentation modes:<a href="#section-2.10.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.10.1-2.1">No Ack: this mode is unidirectionnal, no acknowledgment is sent back.<a href="#section-2.10.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.1-2.2">Ack Always: each fragmentation window must be explicitly acknowledged before going to the next.<a href="#section-2.10.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.1-2.3">Ack on Error:  A window is acknowledged only when the receiver detects some missing fragments.<a href="#section-2.10.1-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.10.1-3"><a href="#Fig-frag-mode" class="xref">Figure 14</a> give the definition for identifiers from these three modes.<a href="#section-2.10.1-3" class="pilcrow">¶</a></p>
<span id="name-definition-of-fragmentation"></span><div id="Fig-frag-mode">
<figure id="figure-14">
            <div class="alignLeft art-text artwork" id="section-2.10.1-4.1">
<pre>
  identity fragmentation-mode-base-type {
    description
      "fragmentation mode.";
  }

  identity fragmentation-mode-no-ack {
    base fragmentation-mode-base-type;
    description
      "No Ack of RFC 8724.";
  }

  identity fragmentation-mode-ack-always {
    base fragmentation-mode-base-type;
    description
      "Ack Always of RFC8724.";
  }

  identity fragmentation-mode-ack-on-error {
    base fragmentation-mode-base-type;
    description
      "Ack on Error of RFC8724.";
  }

  typedef fragmentation-mode-type {
    type identityref {
      base fragmentation-mode-base-type;
    }
    description
      "type used in rules";
  }
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-definition-of-fragmentation" class="selfRef">Definition of fragmentation mode identifer</a>
            </figcaption></figure>
</div>
<p id="section-2.10.1-5">The naming convention is "fragmentation-mode" followed by the fragmentation mode name.<a href="#section-2.10.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="fragmentation-header">
<section id="section-2.10.2">
          <h4 id="name-fragmentation-header">
<a href="#section-2.10.2" class="section-number selfRef">2.10.2. </a><a href="#name-fragmentation-header" class="section-name selfRef">Fragmentation Header</a>
          </h4>
<p id="section-2.10.2-1">A data fragment header, directly following the rule ID can be sent on the fragmentation direction. 
The direction is mandatory and must be up or down. bidirectional is forbidden. The SCHC header may be composed of (cf. <a href="#Fig-frag-header-8724" class="xref">Figure 15</a>):<a href="#section-2.10.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.10.2-2.1">a Datagram Tag (Dtag) identifying the datagram being fragmented if the fragmentation applies concurrently on several datagrams. This field in optional and its length is defined by the rule.<a href="#section-2.10.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.2-2.2">a Window (W) used in Ack-Always and Ack-on-Error modes. In Ack-Always, its size is 1 and depends on the rule in Ack-on-Error. This field is not need in No-Ack mode.<a href="#section-2.10.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.2-2.3">a Fragment Compressed Number (FCN) indicating the fragment/tile position on the window. This field is mandatory on all modes defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>, its size is defined by the rule.<a href="#section-2.10.2-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-data-fragment-header-from-r"></span><div id="Fig-frag-header-8724">
<figure id="figure-15">
            <div class="alignLeft art-text artwork" id="section-2.10.2-3.1">
<pre>
|-- SCHC Fragment Header ----|
         |-- T --|-M-|-- N --|
+-- ... -+- ... -+---+- ... -+--------...-------+~~~~~~~~~~~~~~~~~~~~
| RuleID | DTag  | W |  FCN  | Fragment Payload | padding (as needed)
+-- ... -+- ... -+---+- ... -+--------...-------+~~~~~~~~~~~~~~~~~~~~

</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-data-fragment-header-from-r" class="selfRef">Data fragment header from RFC8724</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="last-fragment-format">
<section id="section-2.10.3">
          <h4 id="name-last-fragment-format">
<a href="#section-2.10.3" class="section-number selfRef">2.10.3. </a><a href="#name-last-fragment-format" class="section-name selfRef">Last fragment format</a>
          </h4>
<p id="section-2.10.3-1">The last fragment of a datagram is sent with an RCS (Reassembly Check Sequence) field to detect residual 
transmission error and possible losses in the last window. <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> defines a single algorithm based on Ethernet 
CRC computation. The identity of the RCS algorithm is shown in <a href="#Fig-frag-RCS" class="xref">Figure 16</a>.<a href="#section-2.10.3-1" class="pilcrow">¶</a></p>
<span id="name-type-definition-for-rcs"></span><div id="Fig-frag-RCS">
<figure id="figure-16">
            <div class="alignLeft art-text artwork" id="section-2.10.3-2.1">
<pre>
  // -- RCS algorithm types

  identity rcs-algorithm-base-type {
    description
      "Identify which algorithm is used to compute RSC.
       The algorithm also defines the size if the RSC field.";
  }

  identity rcs-RFC8724 {
    base rcs-algorithm-base-type;
    description
      "CRC 32 defined as default RCS in RFC8724.";
  }

  typedef rcs-algorithm-type {
    type identityref {
      base rcs-algorithm-base-type;
    }
    description
      "type used in rules.";
  }
</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-type-definition-for-rcs" class="selfRef">type definition for RCS</a>
            </figcaption></figure>
</div>
<p id="section-2.10.3-3">The naming convention is "rcs" followed by the algorithm name.<a href="#section-2.10.3-3" class="pilcrow">¶</a></p>
<p id="section-2.10.3-4">For Ack-on-Error mode, the All-1 fragment may just contain the RCS or can include a tile. The parameters defined in <a href="#Fig-frag-all1-data" class="xref">Figure 17</a> allows to define the 
behavior:<a href="#section-2.10.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.10.3-5.1">all1-data-no: the last fragment contains no data, just the RCS<a href="#section-2.10.3-5.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.3-5.2">all1-data-yes: the last fragment includes a single tile and the RCS<a href="#section-2.10.3-5.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.3-5.3">all1-data-sender-choice: the last fragment may or may not contain a single tile. The receiver can detect if a tile is present.<a href="#section-2.10.3-5.3" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-type-definition-for-rcs-2"></span><div id="Fig-frag-all1-data">
<figure id="figure-17">
            <div class="alignLeft art-text artwork" id="section-2.10.3-6.1">
<pre>
 // -- All1 with data types

  identity all1-data-base-type {
    description
      "Type to define when to send an Acknowledgment message.";
  }

  identity all1-data-no {
    base all1-data-base-type;
    description
      "All1 contains no tiles.";
  }

  identity all1-data-yes {
    base all1-data-base-type;
    description
      "All1 MUST contain a tile.";
  }

  identity all1-data-sender-choice {
    base all1-data-base-type;
    description
      "Fragmentation process choose to send tiles or not in all1.";
  }

  typedef all1-data-type {
    type identityref {
      base all1-data-base-type;
    }
    description
      "Type used in rules.";
  }
</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-type-definition-for-rcs-2" class="selfRef">type definition for RCS</a>
            </figcaption></figure>
</div>
<p id="section-2.10.3-7">The naming convention is "all1-data" followed by the behavior identifier.<a href="#section-2.10.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgment-behavior">
<section id="section-2.10.4">
          <h4 id="name-acknowledgment-behavior">
<a href="#section-2.10.4" class="section-number selfRef">2.10.4. </a><a href="#name-acknowledgment-behavior" class="section-name selfRef">Acknowledgment behavior</a>
          </h4>
<p id="section-2.10.4-1">A cknowledgment fragment header goes in the opposite direction of data. The header is composed of (see <a href="#Fig-frag-ack" class="xref">Figure 18</a>):<a href="#section-2.10.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.10.4-2.1">a Dtag (if present).<a href="#section-2.10.4-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.4-2.2">a mandatory window as in the data fragment.<a href="#section-2.10.4-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.4-2.3">a C bit giving the status of RCS validation.  In case of failure, a bitmap follows, indicating received fragment/tile. The size of the bitmap is given by the FCN value.<a href="#section-2.10.4-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.10.4-3">NOTE: IN THE DATA MODEL THERE IS A max-window-size FIELD TO LIMIT THE BITMAP SIZE, BUT IS NO MORE IN RFC8724! DO WE KEEP IT?<a href="#section-2.10.4-3" class="pilcrow">¶</a></p>
<span id="name-acknowledgment-fragment-hea"></span><div id="Fig-frag-ack">
<figure id="figure-18">
            <div class="alignLeft art-text artwork" id="section-2.10.4-4.1">
<pre>
|--- SCHC ACK Header ----|
         |-- T --|-M-| 1 |
+-- ... -+- ... -+---+---+~~~~~~~~~~~~~~~~~~
| RuleID |  DTag | W |C=1| padding as needed                (success)
+-- ... -+- ... -+---+---+~~~~~~~~~~~~~~~~~~

+-- ... -+- ... -+---+---+------ ... ------+~~~~~~~~~~~~~~~
| RuleID |  DTag | W |C=0|Compressed Bitmap| pad. as needed (failure)
+-- ... -+- ... -+---+---+------ ... ------+~~~~~~~~~~~~~~~

</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-acknowledgment-fragment-hea" class="selfRef">Acknowledgment fragment header for RFC8724</a>
            </figcaption></figure>
</div>
<p id="section-2.10.4-5">For Ack-on-Error, SCHC defined  when acknowledgment can be sent. This can be at any time defined by the layer 2, at the end of a window (FCN All-0) 
or at the end of the fragment (FCN All-1). The following identifiers (cf. <a href="#Fig-frag-ack-behavior" class="xref">Figure 19</a>) define the acknowledgment behavior.<a href="#section-2.10.4-5" class="pilcrow">¶</a></p>
<span id="name-bitmap-generation-behavior"></span><div id="Fig-frag-ack-behavior">
<figure id="figure-19">
            <div class="alignLeft art-text artwork" id="section-2.10.4-6.1">
<pre>
  // -- Ack behavior

  identity ack-behavior-base-type {
    description
      "Define when to send an Acknowledgment .";
  }

  identity ack-behavior-after-All0 {
    base ack-behavior-base-type;
    description
      "Fragmentation expects Ack after sending All0 fragment.";
  }

  identity ack-behavior-after-All1 {
    base ack-behavior-base-type;
    description
      "Fragmentation expects Ack after sending All1 fragment.";
  }

  identity ack-behavior-always {
    base ack-behavior-base-type;
    description
      "Fragmentation expects Ack after sending every fragment.";
  }

  typedef ack-behavior-type {
    type identityref {
      base ack-behavior-base-type;
    }
    description
      "Type used in rules.";
  }


</pre>
</div>
<figcaption><a href="#figure-19" class="selfRef">Figure 19</a>:
<a href="#name-bitmap-generation-behavior" class="selfRef">bitmap generation behavior</a>
            </figcaption></figure>
</div>
<p id="section-2.10.4-7">The naming convention is "ack-behavior" followed by the algorithm name.<a href="#section-2.10.4-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="fragmentation-parameters">
<section id="section-2.10.5">
          <h4 id="name-fragmentation-parameters">
<a href="#section-2.10.5" class="section-number selfRef">2.10.5. </a><a href="#name-fragmentation-parameters" class="section-name selfRef">Fragmentation Parameters</a>
          </h4>
<p id="section-2.10.5-1">The state machine requires some common values to handle fragmentation:<a href="#section-2.10.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.10.5-2.1">retransmission-timer gives in seconds the duration before sending an ack request (cf. section 8.2.2.4. of <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>). If specified, value must be higher or equal to 1.<a href="#section-2.10.5-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.5-2.2">inactivity-timer gives in seconds the duration before aborting (cf. section 8.2.2.4. of <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>), value of 0 explicitly indicates that this timer is disabled.<a href="#section-2.10.5-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.5-2.3">max-ack-requests gives the number of attempts before aborting (cf. section 8.2.2.4. of <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>).<a href="#section-2.10.5-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.5-2.4">maximum-packet-size gives in bytes the larger packet size that can be reassembled.<a href="#section-2.10.5-2.4" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.10.5-3">The are defined as unsigned integer, see <a href="#annexA" class="xref">Section 7</a>.<a href="#section-2.10.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="layer-2-parameters">
<section id="section-2.10.6">
          <h4 id="name-layer-2-parameters">
<a href="#section-2.10.6" class="section-number selfRef">2.10.6. </a><a href="#name-layer-2-parameters" class="section-name selfRef">Layer 2 parameters</a>
          </h4>
<p id="section-2.10.6-1">The data model includes two parameters needed for fragmentation:<a href="#section-2.10.6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.10.6-2.1">l2-word-size: <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span> base fragmentation on a layer 2 word which can be of any length. The default value is 8 and correspond 
to the default value for byte aligned layer 2. A value of 1 will indicate that there is no alignment and no need for padding.<a href="#section-2.10.6-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.10.6-2.2">maximum-packet-size: defines the maximum size of a uncompressed datagram. By default, the value is set to 1280 bytes.<a href="#section-2.10.6-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.10.6-3">They are defined as unsigned integer, see <a href="#annexA" class="xref">Section 7</a>.<a href="#section-2.10.6-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="rule-definition">
<section id="section-3">
      <h2 id="name-rule-definition">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-rule-definition" class="section-name selfRef">Rule definition</a>
      </h2>
<p id="section-3-1">A rule is either a C/D or an F/R rule. A rule is identified by the rule ID value and its associated length. 
The YANG grouping rule-id-type defines the structure used to represent a rule ID. Length of 0 is allowed to represent an implicit rule.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Three types of rules are defined in <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span>:<a href="#section-3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-3.1">Compression: a compression rule is associated to the rule ID.<a href="#section-3-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-3.2">No compression: nothing is associated to the rule ID.<a href="#section-3-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-3.3">Fragmentation: fragmentation parameters are associated to the rule ID. Fragmentation is optional and feature "fragmentation" should be set.<a href="#section-3-3.3" class="pilcrow">¶</a>
</li>
      </ul>
<span id="name-definition-of-a-schc-contex"></span><div id="Fig-yang-schc">
<figure id="figure-20">
        <div class="alignLeft art-text artwork" id="section-3-4.1">
<pre>
  grouping rule-id-type {
    leaf rule-id-value {
      type uint32;
      description
        "Rule ID value, this value must be unique combined with
        the length.";
    }
    leaf rule-id-length {
      type uint8 {
        range "0..32";
      }
      description
        "Rule ID length in bits, value 0 is for implicit rules.";
    }
    description
      "A rule ID is composed of a value and a length in bit.";
  }

  // SCHC table for a specific device.

  container schc {
    list rule {
      key "rule-id-value rule-id-length";
      uses rule-id-type;
      choice nature {
        case fragmentation {
          //if-feature "fragmentation";
          uses fragmentation-content;
        }
        case compression {
          uses compression-content;
        }
        case no-compression {
          description
            "RFC8724 allows a rule for uncompressed headers.";
        }
        description
          "A rule is either for compression, no compression or
          fragmentation.";
      }
      description
        "Set of rules compression, no compression or fragmentation
        rules identified by their rule-id.";
    }
    description
      "a SCHC set of rules is composed of a list of rule which are
       either compression or fragmentation.";
  }
}

</pre>
</div>
<figcaption><a href="#figure-20" class="selfRef">Figure 20</a>:
<a href="#name-definition-of-a-schc-contex" class="selfRef">Definition of a SCHC Context</a>
        </figcaption></figure>
</div>
<p id="section-3-5">To access to a specific rule, rule-id and its specific length is used as a key. The rule is either
a compression or a fragmentation rule.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">Each context can be identified though a version id.<a href="#section-3-6" class="pilcrow">¶</a></p>
<div id="compression-rule">
<section id="section-3.1">
        <h3 id="name-compression-rule">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-compression-rule" class="section-name selfRef">Compression rule</a>
        </h3>
<p id="section-3.1-1">A compression rule is composed of entries describing its processing (cf. <a href="#Fig-comp-entry" class="xref">Figure 21</a>). An entry  contains all the information defined in <a href="#Fig-ctxt" class="xref">Figure 1</a> with the types defined above.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">The compression rule described <a href="#Fig-ctxt" class="xref">Figure 1</a> is defined by compression-content. It defines a list of
compression-rule-entry, indexed by their field id, position and direction. The compression-rule-entry 
element represent a line of the table <a href="#Fig-ctxt" class="xref">Figure 1</a>. Their type reflects the identifier types defined in
<a href="#comp_types" class="xref">Section 2.1</a><a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">Some controls are made on the values:<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-4.1">target value must be present for MO different from ignore.<a href="#section-3.1-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-4.2">when MSB MO is specified, the matching-operator-value must be present<a href="#section-3.1-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<span id="name-definition-of-a-compression"></span><div id="Fig-comp-entry">
<figure id="figure-21">
          <div class="alignLeft art-text artwork" id="section-3.1-5.1">
<pre>
  grouping compression-rule-entry {
    description
      "These entries defines a compression entry (i.e. a line)
       as defined in RFC 8724 and fragmentation parameters.

    +-------+--+--+--+------------+-----------------+---------------+
    |Field 1|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act|
    +-------+--+--+--+------------+-----------------+---------------+

       An entry in a compression rule is composed of 7 elements:
       - Field ID: The header field to be compressed. The content is a
         YANG identifer.
       - Field Length : either a positive integer of a function
         defined as a YANF id.
       - Field Position: a positive (and possibly equal to 0) integer.
       - Direction Indicator: a YANG identifier giving the direction.
       - Target value: a value against which the header Field is
         compared.
       - Matching Operator: a YANG id giving the operation, paramters
         may be associated to that operator.
       - Comp./Decomp. Action: A YANG id giving the compression or
         decompression action, paramters may be associated to that
         action.
      ";
    leaf field-id {
      type schc:fid-type;
      mandatory true;
      description
        "Field ID, identify a field in the header with a YANG
         referenceid.";
    }
    leaf field-length {
      type schc:fl-type;
      mandatory true;
      description
        "Field Length in bit or through a function defined as a
        YANG referenceid.";
    }
    leaf field-position {
      type uint8;
      mandatory true;
      description
        "Field position in the header is a integer. If the field is not
        repeated in the header the value is 1, and incremented for each
        repetition of the field. Position 0 means that the position is
        not important and order may change when decompressed";
    }
    leaf direction-indicator {
      type schc:di-type;
      mandatory true;
      description
        "Direction Indicator, a YANG referenceid to say if the packet
        is bidirectional, up or down";
    }
    list target-value {
      key "position";
      uses tv-struct;
      description
        "A list of value to compare with the header field value.
         If target value is a singleton, position must be 0.
         For matching-list, should be consecutive position
         values starting from 1.";
    }
    leaf matching-operator {
      type schc:mo-type;
      must "../target-value or derived-from-or-self(., 'mo-ignore')" {
        error-message
          "mo-equal, mo-msb and mo-match-mapping need target-value";
        description
          "target-value is not required for mo-ignore";
      }
      must "not (derived-from-or-self(., 'mo-msb')) or
            ../matching-operator-value" {
        error-message "mo-msb requires length value";
      }
      mandatory true;
      description
        "MO: Matching Operator";
    }
    list matching-operator-value {
      key "position";
      uses tv-struct;
      description
        "Matching Operator Arguments, based on TV structure to allow
         several arguments.
         In RFC 8724, only MSB define a single argument: length in
         bits";
    }
    leaf comp-decomp-action {
      type schc:cda-type;
      mandatory true;
      description
        "CDA: Compression Decompression Action.";
    }
    list comp-decomp-action-value {
      key "position";
      uses tv-struct;
      description
        "CDA Arguments, based on TV structure to allow several
         arguments. In RFC 8724, no argument is defined for CDA.";
    }
  }

  grouping compression-content {
    list entry {
      key "field-id field-position direction-indicator";
      uses compression-rule-entry;
      description
        "A compression rule is a list of rule entry describing
         each header field. An entry is identifed through a field-id,
         its position in the packet and its direction.";
    }
    description
      "Define a compression rule composed of a list of entries.";
  }

</pre>
</div>
<figcaption><a href="#figure-21" class="selfRef">Figure 21</a>:
<a href="#name-definition-of-a-compression" class="selfRef">Definition of a compression entry</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="fragmentation-rule">
<section id="section-3.2">
        <h3 id="name-fragmentation-rule-2">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-fragmentation-rule-2" class="section-name selfRef">Fragmentation rule</a>
        </h3>
<p id="section-3.2-1">A Fragmentation rule is composed of entries describing the protocol behavior. Some on them are numerical entries,
others are identifiers defined in <a href="#frag_types" class="xref">Section 2.10</a>.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">The data model defines some relations between the entries:<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-3.1">direction must be either up or down (not bidirectional).<a href="#section-3.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-3.2">W size is only needed for Ack Always and Ack on Error modes.<a href="#section-3.2-3.2" class="pilcrow">¶</a>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-3.2-4">
<pre>
  grouping fragmentation-content {
    description
      "This grouping defines the fragmentation parameters for
       all the modes (No Ack, Ack Always and Ack on Error) specified in
       RFC 8724.";
    leaf l2-word-size {
      type uint8;
      default "8";
      description
        "Size in bit of the layer 2 word";
    }
    leaf direction {
      type schc:di-type;
      must "derived-from-or-self(., 'di-up') or
            derived-from-or-self(., 'di-down')" {
        error-message
          "direction for fragmentation rules are up or down.";
      }
      mandatory true;
      description
        "Should be up or down, bi directionnal is forbiden.";
    }
    leaf dtag-size {
      type uint8;
      default "0";
      description
        "Size in bit of the DTag field (T variable from RFC8724).";
    }
    leaf w-size {
      when "not(derived-from(../fragmentation-mode,
                             'fragmentation-mode-no-ack'))";
      type uint8;
      description
        "Size in bit of the window field (M variable from RFC8724).";
    }
    leaf fcn-size {
      type uint8;
      mandatory true;
      description
        "Size in bit of the FCN field (M variable from RFC8724).";
    }
    leaf rcs-algorithm {
      type rcs-algorithm-type;
      default "schc:rcs-RFC8724";
      description
        "Algoritm used for RCS";
    }
    leaf maximum-window-size {
      type uint16;
      description
        "By default 2^wsize - 1";
    }
    leaf retransmission-timer {
      type uint64 {
        range "1..max";
      }
      description
        "Duration in seconds of the retransmission timer.";
    }
    leaf inactivity-timer {
      type uint64;
      description
        "Duration is seconds of the inactivity timer,
        0 indicates the timer is disabled.";
    }
    leaf max-ack-requests {
      type uint8 {
        range "1..max";
      }
      description
        "The maximum number of retries for a specific SCHC ACK.";
    }
    leaf maximum-packet-size {
      type uint16;
      default "1280";
      description
        "When decompression is done, packet size must not
        strictly exceed this limit in Bytes.";
    }
    leaf fragmentation-mode {
      type schc:fragmentation-mode-type;
      mandatory true;
      description
        "which fragmentation mode is used (noAck, AckAlways,
        AckonError)";
    }
    choice mode {
      case no-ack;
      case ack-always;
      case ack-on-error {
        leaf tile-size {
          when "derived-from(../fragmentation-mode,
                             'fragmentation-mode-ack-on-error')";
          type uint8;
          description
            "Size in bit of tiles, if not specified or set to 0,
             tile fills the fragment.";
        }
        leaf tile-in-All1 {
          when "derived-from(../fragmentation-mode,
                             'fragmentation-mode-ack-on-error')";
          type schc:all1-data-type;
          description
            "When true, sender and receiver except a tile in
            All-1 frag.";
        }
        leaf ack-behavior {
          when "derived-from(../fragmentation-mode,
                             'fragmentation-mode-ack-on-error')";
          type schc:ack-behavior-type;
          description
            "Sender behavior to acknowledge, after All-0, All-1 or
             when the LPWAN allows it (Always).";
        }
      }
      description
        "RFC 8724 defines 3 fragmentation modes.";
    }
  }
</pre><a href="#section-3.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="yang-tree">
<section id="section-3.3">
        <h3 id="name-yang-tree">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-yang-tree" class="section-name selfRef">YANG Tree</a>
        </h3>
<div id="Fig-model-overview">
<figure id="figure-22">
          <div class="alignLeft art-text artwork" id="section-3.3-1.1">
<pre>
module: ietf-schc
  +--rw schc
     +--rw rule* [rule-id-value rule-id-length]
        +--rw rule-id-value                 uint32
        +--rw rule-id-length                uint8
        +--rw (nature)?
           +--:(fragmentation)
           |  +--rw l2-word-size?           uint8
           |  +--rw direction               schc:di-type
           |  +--rw dtag-size?              uint8
           |  +--rw w-size?                 uint8
           |  +--rw fcn-size                uint8
           |  +--rw rcs-algorithm?          rcs-algorithm-type
           |  +--rw maximum-window-size?    uint16
           |  +--rw retransmission-timer?   uint64
           |  +--rw inactivity-timer?       uint64
           |  +--rw max-ack-requests?       uint8
           |  +--rw maximum-packet-size?    uint16
           |  +--rw fragmentation-mode      schc:fragmentation-mode-type
           |  +--rw (mode)?
           |     +--:(no-ack)
           |     +--:(ack-always)
           |     +--:(ack-on-error)
           |        +--rw tile-size?        uint8
           |        +--rw tile-in-All1?     schc:all1-data-type
           |        +--rw ack-behavior?     schc:ack-behavior-type
           +--:(compression)
           |  +--rw entry* [field-id field-position direction-indicator]
           |     +--rw field-id                    schc:fid-type
           |     +--rw field-length                schc:fl-type
           |     +--rw field-position              uint8
           |     +--rw direction-indicator         schc:di-type
           |     +--rw target-value* [position]
           |     |  +--rw value?      binary
           |     |  +--rw position    uint16
           |     +--rw matching-operator           schc:mo-type
           |     +--rw matching-operator-value* [position]
           |     |  +--rw value?      binary
           |     |  +--rw position    uint16
           |     +--rw comp-decomp-action          schc:cda-type
           |     +--rw comp-decomp-action-value* [position]
           |        +--rw value?      binary
           |        +--rw position    uint16
           +--:(no-compression)

</pre>
</div>
<figcaption><a href="#figure-22" class="selfRef">Figure 22</a></figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-4">
      <h2 id="name-iana-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-4-1">This document has no request to IANA.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="SecConsiderations">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security considerations</a>
      </h2>
<p id="section-5-1">This document does not have any more Security consideration than the ones already raised on <span>[<a href="#RFC8724" class="xref">RFC8724</a>]</span><a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-6">
      <h2 id="name-acknowledgements">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-6-1">The authors would like to thank Dominique Barthel, Carsten Bormann, Alexander Pelov.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="annexA">
<section id="section-7">
      <h2 id="name-yang-module">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-yang-module" class="section-name selfRef">YANG Module</a>
      </h2>
<div id="Fig-schc">
<figure id="figure-23">
        <div class="alignLeft art-text artwork" id="section-7-1.1">
<pre>
&lt;code begins&gt; file ietf-schc@2021-11-10.yang
module ietf-schc {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-schc";
  prefix schc;

  organization
    "IETF IPv6 over Low Power Wide-Area Networks (lpwan) working group";
  contact
    "WG Web:   &lt;https://datatracker.ietf.org/wg/lpwan/about/&gt;
     WG List:  &lt;mailto:p-wan@ietf.org&gt;
     Editor:   Laurent Toutain
       &lt;mailto:laurent.toutain@imt-atlantique.fr&gt;
     Editor:   Ana Minaburo
       &lt;mailto:ana@ackl.io&gt;";
  description
    "
     Copyright (c) 2021 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Simplified BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.

     *****************************************************************

     Generic Data model for Static Context Header Compression Rule for
     SCHC, based on RFC 8724 and RFC8824. Include compression, no
     compression and fragmentation rules.

     This module is a YANG model for SCHC rules (RFc 8724).
     RFC 8724 describes a rule in a abstract way through a table.

     |-----------------------------------------------------------------|
     |  (FID)            Rule 1                                        |
     |+-------+--+--+--+------------+-----------------+---------------+|
     ||Field 1|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act||
     |+-------+--+--+--+------------+-----------------+---------------+|
     ||Field 2|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act||
     |+-------+--+--+--+------------+-----------------+---------------+|
     ||...    |..|..|..|   ...      | ...             | ...           ||
     |+-------+--+--+--+------------+-----------------+---------------+|
     ||Field N|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act||
     +-------+--+--+--+------------+-----------------+---------------+||
     |-----------------------------------------------------------------|

     This module proposes a global data model that can be used for rule
     exchanges or modification. It proposes both the data model format
     and the global identifiers used to describes some operations in
     fields.
     This data model applies both to compression and fragmentation.";

  revision 2021-11-10 {
    description
      "Initial version from RFC XXXX ";
    reference
      "RFC XXX: Data Model for Static Context Header Compression
      (SCHC)";
  }

  feature fragmentation {
    description
      "Fragmentation is usually required only at the transportation
      level.";
  }

  // -------------------------
  //  Field ID type definition
  //--------------------------
  // generic value TV definition

  identity fid-base-type {
    description
      "Field ID base type for all fields";
  }

  identity fid-ipv6-base-type {
    base fid-base-type;
    description
      "Field IP base type for IPv6 headers described in RFC 8200";
  }

  identity fid-ipv6-version {
    base fid-ipv6-base-type;
    description
      "IPv6 version field from RFC8200";
  }

  identity fid-ipv6-trafficclass {
    base fid-ipv6-base-type;
    description
      "IPv6 Traffic Class field from RFC8200";
  }

  identity fid-ipv6-trafficclass-ds {
    base fid-ipv6-trafficclass;
    description
      "IPv6 Traffic Class field from RFC8200,
       DiffServ field from RFC3168";
  }

  identity fid-ipv6-trafficclass-ecn {
    base fid-ipv6-trafficclass;
    description
      "IPv6 Traffic Class field from RFC8200,
       ECN field from RFC3168";
  }

  identity fid-ipv6-flowlabel {
    base fid-ipv6-base-type;
    description
      "IPv6 Flow Label field from RFC8200";
  }

  identity fid-ipv6-payloadlength {
    base fid-ipv6-base-type;
    description
      "IPv6 Payload Length field from RFC8200";
  }

  identity fid-ipv6-nextheader {
    base fid-ipv6-base-type;
    description
      "IPv6 Next Header field from RFC8200";
  }

  identity fid-ipv6-hoplimit {
    base fid-ipv6-base-type;
    description
      "IPv6 Next Header field from RFC8200";
  }

  identity fid-ipv6-devprefix {
    base fid-ipv6-base-type;
    description
      "correspond either to the source address or the desdination
              address prefix of RFC 8200. Depending if it is
              respectively a uplink or an downklink message.";
  }

  identity fid-ipv6-deviid {
    base fid-ipv6-base-type;
    description
      "correspond either to the source address or the desdination
       address prefix of RFC 8200. Depending if it is respectively
       a uplink or an downklink message.";
  }

  identity fid-ipv6-appprefix {
    base fid-ipv6-base-type;
    description
      "correspond either to the source address or the desdination
      address prefix of RFC 768. Depending if it is respectively
      a downlink or an uplink message.";
  }

  identity fid-ipv6-appiid {
    base fid-ipv6-base-type;
    description
      "correspond either to the source address or the desdination
       address prefix of RFC 768. Depending if it is respectively
       a downlink or an uplink message.";
  }

  identity fid-udp-base-type {
    base fid-base-type;
    description
      "Field IP base type for UDP headers described in RFC 768";
  }

  identity fid-udp-dev-port {
    base fid-udp-base-type;
    description
      "UDP length from RFC 768";
  }

  identity fid-udp-app-port {
    base fid-udp-base-type;
    description
      "UDP length from RFC 768";
  }

  identity fid-udp-length {
    base fid-udp-base-type;
    description
      "UDP length from RFC 768";
  }

  identity fid-udp-checksum {
    base fid-udp-base-type;
    description
      "UDP length from RFC 768";
  }

  identity fid-coap-base-type {
    base fid-base-type;
    description
      "Field IP base type for UDP headers described in RFC 768";
  }

  identity fid-coap-version {
    base fid-coap-base-type;
    description
      "CoAP version from RFC 7252";
  }

  identity fid-coap-type {
    base fid-coap-base-type;
    description
      "CoAP type from RFC 7252";
  }

  identity fid-coap-tkl {
    base fid-coap-base-type;
    description
      "CoAP token length from RFC 7252";
  }

  identity fid-coap-code {
    base fid-coap-base-type;
    description
      "CoAP code from RFC 7252";
  }

  identity fid-coap-code-class {
    base fid-coap-code;
    description
      "CoAP code class from RFC 7252";
  }

  identity fid-coap-code-detail {
    base fid-coap-code;
    description
      "CoAP code detail from RFC 7252";
  }

  identity fid-coap-mid {
    base fid-coap-base-type;
    description
      "CoAP message ID from RFC 7252";
  }

  identity fid-coap-token {
    base fid-coap-base-type;
    description
      "CoAP token from RFC 7252";
  }

  identity fid-coap-option-if-match {
    base fid-coap-base-type;
    description
      "CoAP option If-Match from RFC 7252";
  }

  identity fid-coap-option-uri-host {
    base fid-coap-base-type;
    description
      "CoAP option URI-Host from RFC 7252";
  }

  identity fid-coap-option-etag {
    base fid-coap-base-type;
    description
      "CoAP option Etag from RFC 7252";
  }

  identity fid-coap-option-if-none-match {
    base fid-coap-base-type;
    description
      "CoAP option if-none-match from RFC 7252";
  }

  identity fid-coap-option-observe {
    base fid-coap-base-type;
    description
      "CoAP option Observe from RFC 7641";
  }

  identity fid-coap-option-uri-port {
    base fid-coap-base-type;
    description
      "CoAP option Uri-Port from RFC 7252";
  }

  identity fid-coap-option-location-path {
    base fid-coap-base-type;
    description
      "CoAP option Location-Path from RFC 7252";
  }

  identity fid-coap-option-uri-path {
    base fid-coap-base-type;
    description
      "CoAP option Uri-Path from RFC 7252";
  }

  identity fid-coap-option-content-format {
    base fid-coap-base-type;
    description
      "CoAP option Content Format from RFC 7252";
  }

  identity fid-coap-option-max-age {
    base fid-coap-base-type;
    description
      "CoAP option Max-Age from RFC 7252";
  }

  identity fid-coap-option-uri-query {
    base fid-coap-base-type;
    description
      "CoAP option Uri-Query from RFC 7252";
  }

  identity fid-coap-option-accept {
    base fid-coap-base-type;
    description
      "CoAP option Max-Age from RFC 7252";
  }

  identity fid-coap-option-location-query {
    base fid-coap-base-type;
    description
      "CoAP option Location-Query from RFC 7252";
  }

  identity fid-coap-option-block2 {
    base fid-coap-base-type;
    description
      "CoAP option Block2 from RFC 7959";
  }

  identity fid-coap-option-block1 {
    base fid-coap-base-type;
    description
      "CoAP option Block1 from RFC 7959";
  }

  identity fid-coap-option-size2 {
    base fid-coap-base-type;
    description
      "CoAP option size2 from RFC 7959";
  }

  identity fid-coap-option-proxy-uri {
    base fid-coap-base-type;
    description
      "CoAP option Proxy-Uri from RFC 7252";
  }

  identity fid-coap-option-proxy-scheme {
    base fid-coap-base-type;
    description
      "CoAP option Proxy-scheme from RFC 7252";
  }

  identity fid-coap-option-size1 {
    base fid-coap-base-type;
    description
      "CoAP option Size1 from RFC 7252";
  }

  identity fid-coap-option-no-response {
    base fid-coap-base-type;
    description
      "CoAP option No response from RFC 7967";
  }

  identity fid-coap-option-oscore-flags {
    base fid-coap-base-type;
    description
      "CoAP option oscore flags (see draft schc coap, section 6.4)";
  }

  identity fid-coap-option-oscore-piv {
    base fid-coap-base-type;
    description
      "CoAP option oscore flags (see draft schc coap, section 6.4)";
  }

  identity fid-coap-option-oscore-kid {
    base fid-coap-base-type;
    description
      "CoAP option oscore flags (see draft schc coap, section 6.4)";
  }

  identity fid-coap-option-oscore-kidctx {
    base fid-coap-base-type;
    description
      "CoAP option oscore flags (see draft schc coap, section 6.4)";
  }


  //----------------------------------
  // Field Length type definition
  //----------------------------------

  identity fl-base-type {
    description
      "Used to extend field length functions.";
  }

  identity fl-variable {
    base fl-base-type;
    description
      "Residue length in Byte is sent as defined in
       for CoAP in RFC 8824 (cf. 5.3).";
  }

  identity fl-token-length {
    base fl-base-type;
    description
      "Residue length in Byte is sent as defined in
       for CoAP in RFC 8824 (cf. 4.5).";
  }

  //---------------------------------
  // Direction Indicator type
  //---------------------------------

  identity di-base-type {
    description
      "Used to extend direction indicators.";
  }

  identity di-bidirectional {
    base di-base-type;
    description
      "Direction Indication of bi directionality in
       RFC 8724 (cf. 7.1).";
  }

  identity di-up {
    base di-base-type;
    description
      "Direction Indication of upstream defined in
       RFC 8724 (cf. 7.1).";
  }

  identity di-down {
    base di-base-type;
    description
      "Direction Indication of downstream defined in
       RFC 8724 (cf. 7.1).";
  }

  //----------------------------------
  // Matching Operator type definition
  //----------------------------------

  identity mo-base-type {
    description
      "Used to extend Matching Operators with SID values";
  }

  identity mo-equal {
    base mo-base-type;
    description
      "Equal MO as defined RFC 8724 (cf. 7.3)";
  }

  identity mo-ignore {
    base mo-base-type;
    description
      "Ignore MO as defined RFC 8724 (cf. 7.3)";
  }

  identity mo-msb {
    base mo-base-type;
    description
      "MSB MO as defined RFC 8724 (cf. 7.3)";
  }

  identity mo-match-mapping {
    base mo-base-type;
    description
      "match-mapping MO as defined RFC 8724 (cf. 7.3)";
  }

  //------------------------------
  // CDA type definition
  //------------------------------

  identity cda-base-type {
    description
      "Compression Decompression Actions.";
  }

  identity cda-not-sent {
    base cda-base-type;
    description
      "not-sent CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-value-sent {
    base cda-base-type;
    description
      "value-sent CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-lsb {
    base cda-base-type;
    description
      "LSB CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-mapping-sent {
    base cda-base-type;
    description
      "mapping-sent CDA as defines in RFC 8724 (cf. 7.4).";
  }

  identity cda-compute-length {
    base cda-base-type;
    description
      "compute-length CDA as defines in RFC 8724 (cf. 7.4)";
  }

  identity cda-compute-checksum {
    base cda-base-type;
    description
      "compute-checksum CDA as defines in RFC 8724 (cf. 7.4)";
  }

  identity cda-deviid {
    base cda-base-type;
    description
      "deviid CDA as defines in RFC 8724 (cf. 7.4)";
  }

  identity cda-appiid {
    base cda-base-type;
    description
      "appiid CDA as defines in RFC 8724 (cf. 7.4)";
  }

  // -- type definition

  typedef fid-type {
    type identityref {
      base fid-base-type;
    }
    description
      "Field ID generic type.";
  }

  typedef fl-type {
    type union {
      type int64; /* positive length in bits */
      type identityref { /* function */
        base fl-base-type;
      }
    }
    description
      "Field length either a positive integer giving the size in bits
       or a function defined through an identityref.";
  }

  typedef di-type {
    type identityref {
      base di-base-type;
    }
    description
      "Direction in LPWAN network, up when emitted by the device,
       down when received by the device, bi when emitted or
       received by the device.";
  }

  typedef mo-type {
    type identityref {
      base mo-base-type;
    }
    description
      "Matching Operator (MO) to compare fields values with
      target values";
  }

  typedef cda-type {
    type identityref {
      base cda-base-type;
    }
    description
      "Compression Decompression Action to compression or
      decompress a field.";
  }

  // -- FRAGMENTATION TYPE
  // -- fragmentation modes

  identity fragmentation-mode-base-type {
    description
      "fragmentation mode.";
  }

  identity fragmentation-mode-no-ack {
    base fragmentation-mode-base-type;
    description
      "No Ack of RFC 8724.";
  }

  identity fragmentation-mode-ack-always {
    base fragmentation-mode-base-type;
    description
      "Ack Always of RFC8724.";
  }

  identity fragmentation-mode-ack-on-error {
    base fragmentation-mode-base-type;
    description
      "Ack on Error of RFC8724.";
  }

  typedef fragmentation-mode-type {
    type identityref {
      base fragmentation-mode-base-type;
    }
    description
      "type used in rules";
  }

  // -- Ack behavior

  identity ack-behavior-base-type {
    description
      "Define when to send an Acknowledgment .";
  }

  identity ack-behavior-after-All0 {
    base ack-behavior-base-type;
    description
      "Fragmentation expects Ack after sending All0 fragment.";
  }

  identity ack-behavior-after-All1 {
    base ack-behavior-base-type;
    description
      "Fragmentation expects Ack after sending All1 fragment.";
  }

  identity ack-behavior-always {
    base ack-behavior-base-type;
    description
      "Fragmentation expects Ack after sending every fragment.";
  }

  typedef ack-behavior-type {
    type identityref {
      base ack-behavior-base-type;
    }
    description
      "Type used in rules.";
  }

  // -- All1 with data types

  identity all1-data-base-type {
    description
      "Type to define when to send an Acknowledgment message.";
  }

  identity all1-data-no {
    base all1-data-base-type;
    description
      "All1 contains no tiles.";
  }

  identity all1-data-yes {
    base all1-data-base-type;
    description
      "All1 MUST contain a tile.";
  }

  identity all1-data-sender-choice {
    base all1-data-base-type;
    description
      "Fragmentation process choose to send tiles or not in all1.";
  }

  typedef all1-data-type {
    type identityref {
      base all1-data-base-type;
    }
    description
      "Type used in rules.";
  }

  // -- RCS algorithm types

  identity rcs-algorithm-base-type {
    description
      "Identify which algorithm is used to compute RSC.
       The algorithm also defines the size if the RSC field.";
  }

  identity rcs-RFC8724 {
    base rcs-algorithm-base-type;
    description
      "CRC 32 defined as default RCS in RFC8724.";
  }

  typedef rcs-algorithm-type {
    type identityref {
      base rcs-algorithm-base-type;
    }
    description
      "type used in rules.";
  }

  // --------  RULE ENTRY DEFINITION ------------

  grouping tv-struct {
    description
      "Define the target value element. Always a binary type, strings
       must be converted to binary. field-id allows the conversion
       to the appropriate type.";
    leaf value {
      type binary;
      description
        "Target Value";
    }
    leaf position {
      type uint16;
      description
        "If only one element position is 0, otherwise position is the
         the position in the matching list.";
    }
  }

  grouping compression-rule-entry {
    description
      "These entries defines a compression entry (i.e. a line)
       as defined in RFC 8724 and fragmentation parameters.

      +-------+--+--+--+------------+-----------------+---------------+
      |Field 1|FL|FP|DI|Target Value|Matching Operator|Comp/Decomp Act|
      +-------+--+--+--+------------+-----------------+---------------+

       An entry in a compression rule is composed of 7 elements:
       - Field ID: The header field to be compressed. The content is a
         YANG identifer.
       - Field Length : either a positive integer of a function defined
         as a YANF id.
       - Field Position: a positive (and possibly equal to 0) integer.
       - Direction Indicator: a YANG identifier giving the direction.
       - Target value: a value against which the header Field is
         compared.
       - Matching Operator: a YANG id giving the operation, paramters
         may be associated to that operator.
       - Comp./Decomp. Action: A YANG id giving the compression or
         decompression action, paramters may be associated to that
         action.
      ";
    leaf field-id {
      type schc:fid-type;
      mandatory true;
      description
        "Field ID, identify a field in the header with a YANG
         referenceid.";
    }
    leaf field-length {
      type schc:fl-type;
      mandatory true;
      description
        "Field Length in bit or through a function defined as a
        YANG referenceid.";
    }
    leaf field-position {
      type uint8;
      mandatory true;
      description
        "Field position in the header is a integer. If the field is not
        repeated in the header the value is 1, and incremented for each
        repetition of the field. Position 0 means that the position is
        not important and order may change when decompressed";
    }
    leaf direction-indicator {
      type schc:di-type;
      mandatory true;
      description
        "Direction Indicator, a YANG referenceid to say if the packet
        is bidirectional, up or down";
    }
    list target-value {
      key "position";
      uses tv-struct;
      description
        "A list of value to compare with the header field value.
         If target value is a singleton, position must be 0.
         For matching-list, should be consecutive position
         values starting from 1.";
    }
    leaf matching-operator {
      type schc:mo-type;
      must "../target-value or derived-from-or-self(., 'mo-ignore')" {
        error-message
          "mo-equal, mo-msb and mo-match-mapping need target-value";
        description
          "target-value is not required for mo-ignore";
      }
      must "not (derived-from-or-self(., 'mo-msb')) or
            ../matching-operator-value" {
        error-message "mo-msb requires length value";
      }
      mandatory true;
      description
        "MO: Matching Operator";
    }
    list matching-operator-value {
      key "position";
      uses tv-struct;
      description
        "Matching Operator Arguments, based on TV structure to allow
         several arguments.
         In RFC 8724, only MSB define a single argument: length in
         bits";
    }
    leaf comp-decomp-action {
      type schc:cda-type;
      mandatory true;
      description
        "CDA: Compression Decompression Action.";
    }
    list comp-decomp-action-value {
      key "position";
      uses tv-struct;
      description
        "CDA Arguments, based on TV structure to allow several
         arguments. In RFC 8724, no argument is defined for CDA.";
    }
  }

  grouping compression-content {
    list entry {
      key "field-id field-position direction-indicator";
      uses compression-rule-entry;
      description
        "A compression rule is a list of rule entry describing
         each header field. An entry is identifed through a field-id,
         its position in the packet and its direction.";
    }
    description
      "Define a compression rule composed of a list of entries.";
  }

  grouping fragmentation-content {
    description
      "This grouping defines the fragmentation parameters for
       all the modes (No Ack, Ack Always and Ack on Error) specified in
       RFC 8724.";
    leaf l2-word-size {
      type uint8;
      default "8";
      description
        "Size in bit of the layer 2 word";
    }
    leaf direction {
      type schc:di-type;
      must "derived-from-or-self(., 'di-up') or
            derived-from-or-self(., 'di-down')" {
        error-message
          "direction for fragmentation rules are up or down.";
      }
      mandatory true;
      description
        "Should be up or down, bi directionnal is forbiden.";
    }
    leaf dtag-size {
      type uint8;
      default "0";
      description
        "Size in bit of the DTag field (T variable from RFC8724).";
    }
    leaf w-size {
      when "not(derived-from(../fragmentation-mode,
                             'fragmentation-mode-no-ack'))";
      type uint8;
      description
        "Size in bit of the window field (M variable from RFC8724).";
    }
    leaf fcn-size {
      type uint8;
      mandatory true;
      description
        "Size in bit of the FCN field (M variable from RFC8724).";
    }
    leaf rcs-algorithm {
      type rcs-algorithm-type;
      default "schc:rcs-RFC8724";
      description
        "Algoritm used for RCS";
    }
    leaf maximum-window-size {
      type uint16;
      description
        "By default 2^wsize - 1";
    }
    leaf retransmission-timer {
      type uint64 {
        range "1..max";
      }
      description
        "Duration in seconds of the retransmission timer.";
    }
    leaf inactivity-timer {
      type uint64;
      description
        "Duration is seconds of the inactivity timer,
        0 indicates the timer is disabled.";
    }
    leaf max-ack-requests {
      type uint8 {
        range "1..max";
      }
      description
        "The maximum number of retries for a specific SCHC ACK.";
    }
    leaf maximum-packet-size {
      type uint16;
      default "1280";
      description
        "When decompression is done, packet size must not
        strictly exceed this limit in Bytes.";
    }
    leaf fragmentation-mode {
      type schc:fragmentation-mode-type;
      mandatory true;
      description
        "which fragmentation mode is used (noAck, AckAlways,
        AckonError)";
    }
    choice mode {
      case no-ack;
      case ack-always;
      case ack-on-error {
        leaf tile-size {
          when "derived-from(../fragmentation-mode,
                             'fragmentation-mode-ack-on-error')";
          type uint8;
          description
            "Size in bit of tiles, if not specified or set to 0,
             tile fills the fragment.";
        }
        leaf tile-in-All1 {
          when "derived-from(../fragmentation-mode,
                             'fragmentation-mode-ack-on-error')";
          type schc:all1-data-type;
          description
            "When true, sender and receiver except a tile in
            All-1 frag.";
        }
        leaf ack-behavior {
          when "derived-from(../fragmentation-mode,
                             'fragmentation-mode-ack-on-error')";
          type schc:ack-behavior-type;
          description
            "Sender behavior to acknowledge, after All-0, All-1 or
             when the LPWAN allows it (Always).";
        }
      }
      description
        "RFC 8724 defines 3 fragmentation modes.";
    }
  }

  // Define rule ID. Rule ID is composed of a RuleID value and a
  // Rule ID Length

  grouping rule-id-type {
    leaf rule-id-value {
      type uint32;
      description
        "Rule ID value, this value must be unique combined with
        the length.";
    }
    leaf rule-id-length {
      type uint8 {
        range "0..32";
      }
      description
        "Rule ID length in bits, value 0 is for implicit rules.";
    }
    description
      "A rule ID is composed of a value and a length in bit.";
  }

  // SCHC table for a specific device.

  container schc {
    list rule {
      key "rule-id-value rule-id-length";
      uses rule-id-type;
      choice nature {
        case fragmentation {
          //if-feature "fragmentation";
          uses fragmentation-content;
        }
        case compression {
          uses compression-content;
        }
        case no-compression {
          description
            "RFC8724 allows a rule for uncompressed headers.";
        }
        description
          "A rule is either for compression, no compression or
          fragmentation.";
      }
      description
        "Set of rules compression, no compression or fragmentation
        rules identified by their rule-id.";
    }
    description
      "a SCHC set of rules is composed of a list of rule which are
       either compression or fragmentation.";
  }
}
&lt;code ends&gt;
</pre>
</div>
<figcaption><a href="#figure-23" class="selfRef">Figure 23</a></figcaption></figure>
</div>
</section>
</div>
<section id="section-8">
      <h2 id="name-normative-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC8724">[RFC8724]</dt>
      <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, <span class="refAuthor">Gomez, C.</span>, <span class="refAuthor">Barthel, D.</span>, and <span class="refAuthor">JC. Zuniga</span>, <span class="refTitle">"SCHC: Generic Framework for Static Context Header Compression and Fragmentation"</span>, <span class="seriesInfo">RFC 8724</span>, <span class="seriesInfo">DOI 10.17487/RFC8724</span>, <time datetime="2020-04" class="refDate">April 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8724">https://www.rfc-editor.org/info/rfc8724</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8824">[RFC8824]</dt>
    <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, and <span class="refAuthor">R. Andreasen</span>, <span class="refTitle">"Static Context Header Compression (SCHC) for the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 8824</span>, <span class="seriesInfo">DOI 10.17487/RFC8824</span>, <time datetime="2021-06" class="refDate">June 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8824">https://www.rfc-editor.org/info/rfc8824</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ana Minaburo</span></div>
<div dir="auto" class="left"><span class="org">Acklio</span></div>
<div dir="auto" class="left"><span class="street-address">1137A avenue des Champs Blancs</span></div>
<div dir="auto" class="left"><span class="locality">35510 Cesson-Sevigne Cedex</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ana@ackl.io" class="email">ana@ackl.io</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Laurent Toutain</span></div>
<div dir="auto" class="left"><span class="org">Institut MINES TELECOM; IMT Atlantique</span></div>
<div dir="auto" class="left"><span class="street-address">2 rue de la Chataigneraie<br>CS 17607</span></div>
<div dir="auto" class="left"><span class="locality">35576 Cesson-Sevigne Cedex</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Laurent.Toutain@imt-atlantique.fr" class="email">Laurent.Toutain@imt-atlantique.fr</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
