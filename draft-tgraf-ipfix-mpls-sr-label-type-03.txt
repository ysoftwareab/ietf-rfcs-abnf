



Network Working Group                                            T. Graf
Internet-Draft                                                  Swisscom
Intended status: Standards Track                          March 29, 2020
Expires: September 30, 2020


        Export of MPLS Segment Routing Label Type Information in
                   IP Flow Information Export (IPFIX)
                draft-tgraf-ipfix-mpls-sr-label-type-03

Abstract

   This document introduces additional code points in the Information
   Element mplsTopLabelType for IS-IS, OSPFv2, OSPFv3 MPLS Segment
   Routing (SR) extensions and a new SID type element to enable Segment
   Routing label and segment type information in IP Flow Information
   Export (IPFIX).

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 RFC 2119 [RFC2119] RFC 8174 [RFC8174] when, and only when, they
   appear in all capitals, as shown here.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 30, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.




Graf                   Expires September 30, 2020               [Page 1]

Internet-Draft   IPFIX MPLS Segment Routing Information       March 2020


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  MPLS Segment Routing Top Label Type . . . . . . . . . . . . .   2
   3.  Segment Routing Segment Identifier Type . . . . . . . . . . .   3
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   3
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Besides existing MPLS control plane protocols such as BGP-4
   [RFC8277], LDP [RFC5036] and BGP VPN [RFC4364], three new routing-
   protocols, OSPFv2 Extensions [RFC8665], OSPFv3 Extensions [RFC8666]
   and IS-IS Extensions [RFC8667] had been added to propagate Segment
   Routing labels for the MPLS dataplane [RFC8660].

   Traffic Accounting in Segment Routing Networks
   [I-D.ali-spring-sr-traffic-accounting] describes how IPFIX can be
   leveraged to account traffic to MPLS-SR label dimensions within a
   Segment Routing domain.

   In the Information Model for IP Flow Information Export IPFIX
   [RFC5102], the information element #46 mplsTopLabelType describes
   which MPLS control plane protocol allocated the top-of-stack label in
   the MPLS label stack.  RFC 7012 section 7.2 [RFC7012] describes the
   IANA Information Element #46 SubRegistry [IANA-IPFIX-IE46] where new
   code points should be added.

2.  MPLS Segment Routing Top Label Type

   By introducing three new code points to information element #46
   mplsTopLabelType for IS-IS, OSPFv2 and OSPFv3, when Segment Routing
   with one of these three routing protocols is deployed, we get insight
   into which traffic is being forwarded based on which MPLS control
   plane protocol.



Graf                   Expires September 30, 2020               [Page 2]

Internet-Draft   IPFIX MPLS Segment Routing Information       March 2020


   A typical use case scenario is to monitor MPLS control plane
   migrations from LDP to IS-IS or OSPF.  By looking at the label value
   itself, it is not always clear as to which label protocol it belongs,
   since they could potentially share the same label allocation range.
   This is the case for IGP-Adjacency SID's and LDP as an example.

3.  Segment Routing Segment Identifier Type

   By introducing a new information element called SrSidType, which
   contains the Segment Routing Segment Identifier type according to
   Segment Routing Architectur [RFC8402], we get the intended Segment
   Routing forwarding behaviour in the forwarding plane.

   A typical use case scenario is to monitor the forwarding behaviour
   when Topology Independent Fast Reroute
   [I-D.ietf-rtgwg-segment-routing-ti-lfa] or micro loop avoidance
   [I-D.bashandy-rtgwg-segment-routing-uloop] tunnel traffic with IGP-
   Adjacency Segment SID's or when ECMP load balancing should occur with
   Anycast-SID's.

4.  IANA Considerations

   This document specifies three additional code points for IS-IS, OSPv2
   and OSPFv3 Segment Routing extension in the existing sub-registry
   "IPFIX MPLS label type (Value 46)" of the "IPFIX Information
   Elements" and one new "IPFIX Information Element" with a new sub-
   registry in the "IP Flow Information Export (IPFIX) Entities" name
   space.

            ----------------------------------------------
            | Value|       Description       | Reference |
            |--------------------------------------------|
            | TBD1 | OSPFv2 Segment Routing  |  RFC8665  |
            |--------------------------------------------|
            | TBD2 | OSPFv3 Segment Routing  |  RFC8666  |
            |--------------------------------------------|
            | TBD3 | IS-IS Segment Routing   |  RFC8667  |
            ----------------------------------------------

      Figure 1: Updates to "IPFIX Information Element #46" SubRegistry











Graf                   Expires September 30, 2020               [Page 3]

Internet-Draft   IPFIX MPLS Segment Routing Information       March 2020


    --------------------------------------------------------------------
    |ElementID|  Name   |Abstract |Data Type |  Description  |Reference|
    |         |         |Data Type|Semantics |               |         |
    |------------------------------------------------------------------|
    |  TBD4   |SrSidType|unsigned8|identifier|This field     | RFC8402 |
    |         |         |         |          |identifies the |         |
    |         |         |         |          |Segment Routing|         |
    |         |         |         |          |Identifier Type|         |
    |         |         |         |          |of the         |         |
    |         |         |         |          |top-of-stack.  |         |
    |         |         |         |          |SID types for  |         |
    |         |         |         |          |this field are |         |
    |         |         |         |          |listed in the  |         |
    |         |         |         |          |SR SID type    |         |
    |         |         |         |          |registry.      |         |
    --------------------------------------------------------------------

    Figure 2: New "IPFIX Information Element #TBD4"

              -------------------------------------
              | Value |  Description  | Reference |
              |-----------------------------------|
              | TBD5  | Prefix-SID    |  RFC8402  |
              |-----------------------------------|
              | TBD6  | Node-SID      |  RFC8402  |
              |-----------------------------------|
              | TBD7  | Anycast-SID   |  RFC8402  |
              |-----------------------------------|
              | TBD8  | Adjacency-SID |  RFC8402  |
              |-----------------------------------|
              | TBD9  | PeerNode-SID  |  RFC8402  |
              |-----------------------------------|
              | TBD10 | PeerAdj-SID   |  RFC8402  |
              |-----------------------------------|
              | TBD11 | PeerSet-SID   |  RFC8402  |
              -------------------------------------

        Figure 3: New "IPFIX Information Element #TBD4" SubRegistry

5.  Security Considerations

   The same security considerations apply as for the IPFIX Protocol
   RFC7012 [RFC7012].








Graf                   Expires September 30, 2020               [Page 4]

Internet-Draft   IPFIX MPLS Segment Routing Information       March 2020


6.  Acknowledgements

   I would like to thank Paul Aitken, Loa Andersson, Tianran Zhou,
   Pierre Francois, Bruno Decreane and Paolo Lucente for their review
   and valuable comments.

7.  References

7.1.  Normative References

   [IANA-IPFIX-IE46]
              "IANA IP Flow Information Export (IPFIX) Information
              Element #46 SubRegistry",
              <https://www.iana.org/assignments/ipfix/ipfix.xhtml#ipfix-
              mpls-label-type>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5102]  Quittek, J., Bryant, S., Claise, B., Aitken, P., and J.
              Meyer, "Information Model for IP Flow Information Export",
              RFC 5102, DOI 10.17487/RFC5102, January 2008,
              <https://www.rfc-editor.org/info/rfc5102>.

   [RFC7012]  Claise, B., Ed. and B. Trammell, Ed., "Information Model
              for IP Flow Information Export (IPFIX)", RFC 7012,
              DOI 10.17487/RFC7012, September 2013,
              <https://www.rfc-editor.org/info/rfc7012>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

7.2.  Informative References

   [I-D.ali-spring-sr-traffic-accounting]
              Filsfils, C., Talaulikar, K., Sivabalan, S., Horneffer,
              M., Raszuk, R., Litkowski, S., Voyer, D., and R. Morton,
              "Traffic Accounting in Segment Routing Networks", draft-
              ali-spring-sr-traffic-accounting-04 (work in progress),
              February 2020.








Graf                   Expires September 30, 2020               [Page 5]

Internet-Draft   IPFIX MPLS Segment Routing Information       March 2020


   [I-D.bashandy-rtgwg-segment-routing-uloop]
              Bashandy, A., Filsfils, C., Litkowski, S., Decraene, B.,
              Francois, P., and P. Psenak, "Loop avoidance using Segment
              Routing", draft-bashandy-rtgwg-segment-routing-uloop-08
              (work in progress), January 2020.

   [I-D.ietf-rtgwg-segment-routing-ti-lfa]
              Litkowski, S., Bashandy, A., Filsfils, C., Decraene, B.,
              Francois, P., Voyer, D., Clad, F., and P. Camarillo,
              "Topology Independent Fast Reroute using Segment Routing",
              draft-ietf-rtgwg-segment-routing-ti-lfa-03 (work in
              progress), March 2020.

   [RFC4364]  Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual Private
              Networks (VPNs)", RFC 4364, DOI 10.17487/RFC4364, February
              2006, <https://www.rfc-editor.org/info/rfc4364>.

   [RFC5036]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,
              "LDP Specification", RFC 5036, DOI 10.17487/RFC5036,
              October 2007, <https://www.rfc-editor.org/info/rfc5036>.

   [RFC8277]  Rosen, E., "Using BGP to Bind MPLS Labels to Address
              Prefixes", RFC 8277, DOI 10.17487/RFC8277, October 2017,
              <https://www.rfc-editor.org/info/rfc8277>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8660]  Bashandy, A., Ed., Filsfils, C., Ed., Previdi, S.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing with the MPLS Data Plane", RFC 8660,
              DOI 10.17487/RFC8660, December 2019,
              <https://www.rfc-editor.org/info/rfc8660>.

   [RFC8665]  Psenak, P., Ed., Previdi, S., Ed., Filsfils, C., Gredler,
              H., Shakir, R., Henderickx, W., and J. Tantsura, "OSPF
              Extensions for Segment Routing", RFC 8665,
              DOI 10.17487/RFC8665, December 2019,
              <https://www.rfc-editor.org/info/rfc8665>.

   [RFC8666]  Psenak, P., Ed. and S. Previdi, Ed., "OSPFv3 Extensions
              for Segment Routing", RFC 8666, DOI 10.17487/RFC8666,
              December 2019, <https://www.rfc-editor.org/info/rfc8666>.






Graf                   Expires September 30, 2020               [Page 6]

Internet-Draft   IPFIX MPLS Segment Routing Information       March 2020


   [RFC8667]  Previdi, S., Ed., Ginsberg, L., Ed., Filsfils, C.,
              Bashandy, A., Gredler, H., and B. Decraene, "IS-IS
              Extensions for Segment Routing", RFC 8667,
              DOI 10.17487/RFC8667, December 2019,
              <https://www.rfc-editor.org/info/rfc8667>.

Author's Address

   Thomas Graf
   Swisscom
   Binzring 17
   Zurich  8045
   Switzerland

   Email: thomas.graf@swisscom.com




































Graf                   Expires September 30, 2020               [Page 7]
