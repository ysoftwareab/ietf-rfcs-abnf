
     Internet Draft                                       Greg Vaudreuil 
     Expires in six months                           Lucent Technologies 
                                                        October 22, 2004  
                                 
                         Voice Message Routing Service 

                        <draft-ietf-vpim-routing-07.txt> 

                                         

  Status of this Memo 

     This document is an Internet-Draft and is subject to all provisions of 
     Section 10 of RFC 2026. 

     This document is an Internet Draft.  Internet Drafts are working 
     documents of the Internet Engineering Task Force (IETF), its Areas, 
     and its Working Groups.  Note that other groups may also distribute 
     working documents as Internet Drafts. 

     Internet Drafts are valid for a maximum of six months and may be 
     updated, replaced, or obsoleted by other documents at any time.  It is 
     inappropriate to use Internet Drafts as reference material or to cite 
     them other than as a "work in progress". 

     The list of current Internet-Drafts can be accessed at 
     http://www.ietf.org/1id-abstracts.html 

     The list of Internet-Draft Shadow Directories can be accessed at 
     http://www.ietf.org/shadow.html 

      

  Intellectual Property Notice 

     By submitting this Internet-Draft, I certify that any applicable 
     patent or other IPR claims of which I am aware have been disclosed, or 
     will be disclosed, and any of which I become aware will be disclosed, 
     in accordance with RFC 3668. 

  Copyright Notice 

     Copyright (C) The Internet Society (2004).  All Rights Reserved. 

     This Internet-Draft is in conformance with Section 10 of RFC2026. 

  Overview 

     Internet Draft            VPIM Routing             October 22, 2004 

     Voice messaging is traditionally addressed using telephone number 
     addressing. This document describes two techniques for routing voice 
     messages based on a telephone number.  The VPIM Directory service 
     provides a directory mechanism to lookup a VPIM email address with a 
     telephone number and confirm that the address is both valid and the 
     associated with the intended recipient.  However this service will 
     take time become widely deployed in the nearest term.  This document 
     also describes a more limited send-and-pray service useful simply to 
     route and deliver messages using only the ENUM telephone number 
     resolution service and the existing DNS mail routing facilies.  

     Please send comments on this document to the VPIM working group 
     mailing list <vpim@lists.neystadt.org> 





















     Vaudreuil                Expires 4/22/05                   [Page 2] 

     Internet Draft            VPIM Routing             October 22, 2004 

  Working Group Summary 

     This is a submission to the IETF VPIM working group. 

  Table of Contents 

  1.   ABSTRACT ..........................................................4 
  2.   DESIGN GOALS ......................................................4 
  3.   THE COMPLETE SERVICE ..............................................5 
    3.1  Specification of Service "E2U+Voice:DIR" ........................5 
    3.2  VPIM Directory Discovery ........................................5 
    3.3  Address Query ...................................................6 
  4.   THE BASIC SERVICE .................................................7 
    4.1  Specification of Service "E2U+VPIM:Mailto:" .....................7 
    4.2  Address Construction ............................................8 
    4.3  Interdomain Message Routing .....................................8 
    4.4  Intradomain Message Routing .....................................8 
  5.   SECURITY CONSIDERATIONS ..........................................10 
  6.   NORMATIVE REFERENCES .............................................10 
  7.   INTELLECTUAL PROPERTY NOTICE .....................................10 
  8.   COPYRIGHT NOTICE .................................................11 
  9.   AUTHORS' ADDRESSES ...............................................11 
     
















     Vaudreuil                Expires 4/22/05                   [Page 3] 

     Internet Draft            VPIM Routing             October 22, 2004 

  1. Abstract 

     This document describes two mechanisms by which a sending VPIM system 
     may determine the destination mailbox given a telephone number.  Both 
     mechanisms build upon ENUM.  One mechanism utilizes an LDAP query to 
     determine recipient capabilities and retrieve address confirmation 
     information such as a spoken or text name. 

  2. Design Goals 

     This profile is intended to provide a range of functional capabilities 
     for message routing based on one of two mechanisms.  The most complete 
     service should use the ENUM address resolution service to determine 
     the VPIM directory, and then use LDAP to retreive the VPIM-specific 
     email address to use for message routing.   

     The more basic send-and-pray message service uses only the ENUM 
     service and MX records to route the message to the intended 
     recipient's domain.  The intelligence to further route the message to 
     the intended recipient is placed within the message routing system of 
     the recipient's domain. 

     The basic mechanism may be used even when there is a VPIM directory 
     service avaiable.  The basic service is useful when LDAP queries are 
     not available, such as may be the case for disconnected mobile 
     terminals or because of firewall or information security policies. 

     The basic mechanism should facilitate the routing of VPIM messages to 
     a suitable internal destination with a minimum of configuration.  It 
     is an important goal to avoid any content-processing to determine the 
     nature of the message and its internal destination.  It should be 
     possible at a minimum to establish a simple mail forwarding rule to 
     send all inbound VPIM messages to a designated system while 
     facilitating the routing of FAX, SMS, or other telephone-addressed 
     messages to other potentially different systems.  

     It is a goal that the mechanisms outlined in this document be 
     extensible for all store-and-forward, telephone-number addressed 
     messaging services.  

     It is a goal that the VPIM directory discovery and VPIM directory 
     query steps occur within the timing constraints for user interfaces in 
     PSTN networks.  In general, that constraint can be generalized to be a 
     two-second response 95% of the time.  






     Vaudreuil                Expires 4/22/05                   [Page 4] 

     Internet Draft            VPIM Routing             October 22, 2004 

  3. The Complete Service 

     For the complete VPIM message routing service, the sending client 
     SHOULD query the VPIM directory for the VPIM-specific email address.  
     The client SHOULD use the ENUM service to retrieve the identity of the  
     VPIM Directory to query.  The client should then query that server for 
     the email address and any additional attributes desired. 

  3.1 Specification of Service "E2U+Voice:DIR" 

        * Service Name: E.164 to VPIM LDAP URL 

        * URI Type: "LDAP:" 

        * Type: Voice 

        * Subtype: DIR 

        * Functional Specification: See section 3.2 through 3.3 

        * Intended Usage: COMMON 

        * Author: Greg Vaudreuil (gregv@ieee.org) 

        * Security Considerations: 

          o Malicious Redirection 
              One of the fundamental dangers related to any service such 
              as this is that a malicious entry in a resolver's database 
              will cause clients to resolve the E.164 into the wrong URL. 
              The possible intent may be to cause the client to retrieve a 
              resource containing fraudulent or damaging material. 

          o Denial of Service 
              By removing the URL to which the E.164 maps, a malicious 
              intruder may remove the client's ability to access the 
              resource. 

      

  3.2 VPIM Directory Discovery 

     The VPIM directory server is found by using the ENUM protocol and 
     querying for the VPIMDIR service associated with the telephone number 
     of the recipient.   

     The DNS query name is created as described by [ENUM].  The telephone 
     number used for the directory location MAY contain additional sub-
     address information as additional digits. 

  Example: 


     Vaudreuil                Expires 4/22/05                   [Page 5] 

     Internet Draft            VPIM Routing             October 22, 2004 

            Query: 2.1.2.1.5.5.5.3.1.6.1.e164.arpa  
            Responses:  
              IN NAPTR  10 10 "U" "E2U+voice:DIR" \   
                   "!^.*$!ldap://vpimdir1.Zcorp.com/telephoneNumber=\1!" .  

              IN NAPTR  10 20 "U" " E2U+Voice:DIR" \  
                   "!^.*$!ldap://vpimdir2.Zcorp.com/telephoneNumber=\1!" . 
   

     It is recommended that VPIMDIR servers be deployed in a redundant 
     configuration.  NAPTR weight fields provide the ability to give two 
     records indicating the same service and preference a different weight.  
     The same weight can be specified for random distribution between the 
     two servers. See [NAPTR] 

  3.3 Address Query 

     Once the VPIM directory is discovered, the client SHOULD issue a LDAP 
     query for the vPIMrFC822Mailbox, that is, the address that SHOULD be 
     used as the value for both the RFC822 To: field and the SMTP RCPT 
     command. See [VPIMDIR] 

















     Vaudreuil                Expires 4/22/05                   [Page 6] 

     Internet Draft            VPIM Routing             October 22, 2004 

  4. The Basic Service 

     The basic service relies upon NAPTR rewrite rules to mechanically 
     construct a valid VPIM-specific email address.  In the recipient's 
     domain, the constructed address may be further routed using 
     intradomain mail routing techniques such as those defined in [LASER]. 

     To facilitate a full range of intradomain routing options, the 
     constructed email address indicates that the message is a VPIM 
     message.  For ease of processing in the recipient's intradomain mail 
     routing system, the indication that the message is a VPIM message 
     SHOULD be in the domain name portion. 

     Note, that no validation that the constructed address is valid, nor 
     that the constructed address corresponds to the intended recipient.  
     Because no capabilities information is provided about the recipient, 
     messages sent with this mechaism SHOULD be sent using only the media 
     and content types of the VPIM V2 profile. 

  4.1 Specification of Service "E2U+VPIM:Mailto:" 

        * Service Name: E.164 to VPIM MailTo: URL 

        * URI Type: "Mailto:" 

        * Type: VPIM 

        * Subtype: MAILTO 

        * Functional Specification: See section 4.2 through 4.4 

        * Intended Usage: COMMON 

        * Author: Greg Vaudreuil (gregv@ieee.org) 

        * Error Conditions: 
          o E.164 number not in the numbering plan 
          o E.164 number in the numbering plan, but no URLs exist for  
                that number 
          o E2U+VPIM:Mailto Service unavailable 

        * Security Considerations: 

          o Malicious Redirection 
              One of the fundamental dangers related to any service such 
              as this is that a malicious entry in a resolver's database 
              will cause clients to resolve the E.164 into the wrong URL. 
              The possible intent may be to cause the client to retrieve a 
              resource containing fraudulent or damaging material. 

          o Denial of Service 
              By removing the URL to which the E.164 maps, a malicious 
              intruder may remove the client's ability to access the 
              resource. 

     Vaudreuil                Expires 4/22/05                   [Page 7] 

     Internet Draft            VPIM Routing             October 22, 2004 

          o Unsolicited Bulk Email 
              The exposure of email addresses through the ENUM service 
              provides a bulk mailer access to large numbers of email 
              addresses where only the telephone number was previously 
              known.   
               

  4.2 Address Construction 

     Construct an VPIM email address using the address rewrite rules of the 
     NAPTR records associated with the VPIM service.  

      

  4.3 Interdomain Message Routing 

     The interdomain routing of a constructed VPIM address is mechanically 
     indistinguishable from existing email routing.  No changes to the 
     infrastructure are required.  The sending system consults the Domain 
     Name System for an MX record corresponding to the domain name and 
     forwards the message to the indicated system. 

      

  4.4 Intradomain Message Routing 

     Within the recipient's domain, the message may be further routed to 
     the appropriate messaging system. Two general mechanisms may be used 
     to further route the message to the intended system within a network. 

          Note: This section is strictly informational.  The mechanisms 
          for intradomain routing are an internal matter for the domain 
          and do not affect the protocol.  It is only necessary that the 
          addresses created by the NAPTR rewrite rules have meaning to the 
          domain advertising them.  However, a convention for the creation 
          and use of such address may be useful.   










     Vaudreuil                Expires 4/22/05                   [Page 8] 

     Internet Draft            VPIM Routing             October 22, 2004 

  4.4.1  Directory-Enabled Routing 

     Various proprietary directory mechanisms provide a means for an 
     inbound mail router of the recipient's domain to send a message to the 
     appropriate internal mail host.  In many cases, the local part of the 
     address is used to query for an internal mail address.  That internal 
     mail address is substituted for the SMTP RCPT address and used to 
     deliver the message to the recipient mailbox.  Note that the mailbox 
     does not need to have any knowledge of the mechanically-constructed 
     telephone number-based address. 

                 Example address: +12145551212@sp.net 

      

  4.4.2 Service-based Mail Routing 

     Alternately, a mail gateway may simply send all voice messages into a 
     separate messaging system.  That system may be a single voice 
     messaging server or a service-specific gateway into a larger 
     telephonenumber-based voice-messaging network. 

     Such a mail gateway may be provisioned with a simple rule or small set 
     of rules to forward all messages of a given service type to a pre-
     defined server.  This rule would check for the service name "VPIM" as 
     a prefix to the constructed domain name to reroute messages. 

                 Example address: +12145551212@VPIM.sp.net 

      













     Vaudreuil                Expires 4/22/05                   [Page 9] 

     Internet Draft            VPIM Routing             October 22, 2004 

  5. Security Considerations 

     There is little information disclosed to the sender of a message that 
     is not already disclosed using standard email protocols beyond the 
     ability to probe, via send-and-fail, the existance of a reachable 
     account associated with a telephone number, and via the NDN, determine 
     in which domain the account resides. 

     However, the use of ENUM records to create routeable email addresses 
     from telephone numbers provides bulk-emailers the capablities to send 
     email to a large set of recipients where only the telephone number is 
     known or where telephone numbers are guessed.  

      

  6. Normative References 

  [E164] CCITT Recommendation E.164 (1991), Telephone Network and ISDN 
      Operation, Numbering, Routing and Mobile Service - Numbering Plan for 
      the ISDN Era.   

  [ENUM] RFC 3761 

  [NAPTR] RFCs 3401, 3402, 3403, and 3404 

  [VPIM2] Vaudreuil, Greg, Parsons, Glen, "Voice Profile for Internet 
      Mail, Version 2", RFC 3801, June 2004. 

  [VPIMDIR] G. Vaudreuil "VPIM Directory Schema", work-in-progress, 
      <draft-ietf-vpim-vpimdir-08.txt>, October 12, 2004. 

   

  7. Intellectual Property Notice 

     The IETF takes no position regarding the validity or scope of any 
     intellectual property or other rights that might be claimed to pertain 
     to the implementation or use of the technology described in this 
     document or the extent to which any license under such rights might or 
     might not be available; neither does it represent that it has made any 
     effort to identify any such rights.  Information on the IETF's 
     procedures with respect to rights in standards-track and standards-
     related documentation can be found in BCP-11.  Copies of claims of 
     rights made available for publication and any assurances of licenses 
     to be made available, or the result of an attempt made to obtain a 
     general license or permission for the use of such proprietary rights 
     by implementors or users of this specification can be obtained from 
     the IETF Secretariat. 

     The IETF invites any interested party to bring to its attention any 
     copyrights, patents or patent applications, or other proprietary 
     rights which may cover technology that may be required to practice 
     this standard.  Please address the information to the IETF Executive 
     Director. 

     Vaudreuil                Expires 4/22/05                  [Page 10] 

     Internet Draft            VPIM Routing             October 22, 2004 

  8. Copyright Notice 

     "Copyright (C) The Internet Society (2004).  This document is subject 
     to the rights, licenses and restrictions contained in BCP 78, and 
     except as set forth therein, the authors retain all their rights." 

     "This document and the information contained herein are provided on an 
     "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
     OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET 
     ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, 
     INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE 
     INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
     WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE." 

      

  9. Authors' Addresses 

     Gregory M. Vaudreuil 
     Lucent Technologies 
     9489 Bartgis Ct  
     Frederick, MD 21702 
     Email: GregV@ieee.org 

      















     Vaudreuil                Expires 4/22/05                  [Page 11]
