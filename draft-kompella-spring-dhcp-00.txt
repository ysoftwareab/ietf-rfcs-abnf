



Network Working Group                                        K. Kompella
Internet-Draft                                                 R. Bonica
Intended status: Standards Track                        Juniper Networks
Expires: January 8, 2020                                    July 7, 2019


           Using DHCP to Manage Node and Ring SID Assignment
                     draft-kompella-spring-dhcp-00

Abstract

   Node and ring segment identifiers (SIDs) assignements in a particular
   domain (such as an IGP area) must follow certain rules: they must be
   allocated from a configured set of SID blocks; they must be unique;
   and the values should be sticky, i.e., the same value(s) should be
   assigned to a node should its assignment expire (as might happen if
   the node resets).  This memo suggests the use of the Dynamic Host
   Configuration Protocol to handle such assignments.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 8, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Kompella & Bonica        Expires January 8, 2020                [Page 1]

Internet-Draft           DHCP for Assigning SIDs               July 2019


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Operational Requirements  . . . . . . . . . . . . . . . . . .   2
   3.  Theory of Operation . . . . . . . . . . . . . . . . . . . . .   3
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   4
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   Fundamental to SPRING forwarding is the notion of Segment Identifiers
   (SIDs) [RFC8402].  At a high level, there are two types of SIDs:
   those that are locally assigned by the advertising node, such as
   adjacency and binding SIDs; and those that are globally unique within
   a given SPRING domain, such as node and ring SIDs.  Node SIDs are
   often manually configured on routers today; this is not only tedious,
   but error-prone as well; the addition of ring SIDs which must be
   managed per ring makes manual assignment even more fraught
   ([I-D.kompella-spring-rmr]).

   This document describes the use of the Dynamic Host Configuration
   Protocol (DHCP [RFC2132]) for managing global SID allocation.  The
   description is limited to the use of node and ring SIDs for MPLS
   ([I-D.ietf-spring-segment-routing-mpls]); other types of SID
   allocation, such as for SRv6+ ([I-D.bonica-spring-srv6-plus]) will be
   described in a future version.

2.  Operational Requirements

   Node SID assignments must satisfy the following properties:

      A SID allocation is an index within a block.  This block is
      defined by a base value (SRGB) and a range; the SID value MUST
      fall within the range.



Kompella & Bonica        Expires January 8, 2020                [Page 2]

Internet-Draft           DHCP for Assigning SIDs               July 2019


      SID assignments MUST be unique.  Duplicate assignments can have
      serious forwarding consequences, such as loops and packet
      misdelivery.

   and should have the following properties:

      Assignments SHOULD have a long lease time.

      Assignments SHOULD be "sticky", i.e., a node re-requesting a
      global SID of the same type that it had previously requested
      SHOULD be assigned the same SID (if possible).

      An expired SID SHOULD NOT be re-assigned to another node until
      sufficient time has passed.  This time SHOULD be configurable on
      the DHCP server.

3.  Theory of Operation

   A DHCP server to be used for global SID assignment SHOULD be told the
   following:

      The type of SID (node, anycast, ring, ...)

      The block or set of blocks for each type: SRGB and range.

      The default lease time and hold time (before re-assigning a SID to
      a different node).

   The DHCP server need know nothing about SID semantics; the only thing
   it needs to know is that ring SIDs are allocated in pairs, and all
   other SIDs are allocated singly.

   A node taking part in a SPRING network MAY be configured to use DHCP
   to get node SIDs.  This configuration should say whether to use DHCP
   for its loopback address, for anycast SIDs and/or for ring SIDs.

   A node configured to use DHCP to obtain a SID for its loopback and/or
   any other prefix sends a request to the DHCP server including the
   following information:

      the type of SID

      the prefix

   A node that participates in an RMR ring and is configured to use DHCP
   to obtain a pair of ring SIDs sends, once ring identification is
   complete ([I-D.ietf-mpls-rmr]), a DHCP request including:




Kompella & Bonica        Expires January 8, 2020                [Page 3]

Internet-Draft           DHCP for Assigning SIDs               July 2019


      the type of SID (ring SID)

      the ring ID

   The DHCP server replies to such requests by:

   1.  looking up the type of SID request;

   2.  checking if it has previously allocated a SID for this node and
       prefix (or pair of SIDs for this node and ring ID);

   3.  if so, checking if the same SID (or pair of SIDs) is available;
       if so, allocating that SID (or pair of SIDs) and returning.

   4.  Otherwise, allocating a new SID/pair of SIDs, noting this in its
       database, and returning.

4.  Security Considerations

   DHCP is a very widely used protocol, and thus ensuring its continuing
   secure and robust operation is vital.  When the requirements of DHCP
   in this context are better understood, this section will be filled
   out.

5.  IANA Considerations

   Should this document be deemed useful, relevant IANA code points
   would be requested.

6.  References

6.1.  Normative References

   [I-D.ietf-mpls-rmr]
              Kompella, K. and L. Contreras, "Resilient MPLS Rings",
              draft-ietf-mpls-rmr-11 (work in progress), June 2019.

   [I-D.ietf-spring-segment-routing-mpls]
              Bashandy, A., Filsfils, C., Previdi, S., Decraene, B.,
              Litkowski, S., and R. Shakir, "Segment Routing with MPLS
              data plane", draft-ietf-spring-segment-routing-mpls-22
              (work in progress), May 2019.

   [I-D.kompella-spring-rmr]
              Kompella, K., Deshmukh, A., and R. Torvi, "Resilient MPLS
              Rings", draft-kompella-spring-rmr-00 (work in progress),
              October 2018.




Kompella & Bonica        Expires January 8, 2020                [Page 4]

Internet-Draft           DHCP for Assigning SIDs               July 2019


   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC2132]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor
              Extensions", RFC 2132, DOI 10.17487/RFC2132, March 1997,
              <https://www.rfc-editor.org/info/rfc2132>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

6.2.  Informative References

   [I-D.bonica-spring-srv6-plus]
              Bonica, R., Hegde, S., Kamite, Y., Alston, A., Henriques,
              D., Halpern, J., and J. Linkova, "IPv6 Support for Segment
              Routing: SRv6+", draft-bonica-spring-srv6-plus-03 (work in
              progress), July 2019.

Authors' Addresses

   Kireeti Kompella
   Juniper Networks
   1194 N. Mathilda Ave.
   Sunnyvale, CA  94089
   US

   Email: kireeti.kompella@gmail.com


   Ron Bonica
   Juniper Networks
   1194 N. Mathilda Ave.
   Sunnyvale, CA  94089
   US

   Email: rbonica@juniper.net











Kompella & Bonica        Expires January 8, 2020                [Page 5]
