





MPLS Working Group                                           B. Jamoussi
Internet Draft                                               D. Jamieson
Expiration Date: February 1999                               P. Beaubien
                                          Nortel (Northern Telecom) Ltd.
                                                             August 1998

                         MPLS-VNS Interworking

                    <draft-jamoussi-mpls-vns-00.txt>

Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   To learn the current status of any Internet-Draft, please check the
   "1id-abstracts.txt" listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ftp.ietf.org (US East Coast), or
   ftp.isi.edu (US West Coast).

Abstract

   This document specifies MPLS [1,2] to VNS [3] interworking in an
   efficient manner that preserves the label switching property when
   crossing an MPLS/VNS boundary. The interworking function also ensures
   that COS characteristics of an LSP are preserved when going from VNS
   to MPLS and vice versa.

Table of Contents

   1       Introduction ............................................   2
   2       Interworking Through VNS ................................   3
   2.1     Label Distribution ......................................   3
   2.2     Label Stack Encoding ....................................   4
   3       Interworking Between MPLS and VNS .......................   5
   3.1     Label Distribution ......................................   5
   3.2     Label Stack Encoding ....................................   5
   4       Summary .................................................   5
   5       Security Considerations .................................   6
   6       Acknowledgement .........................................   6



Jamoussi, et. al,            August 7, 1998                     [Page 1]





Internet Draft       draft-jamoussi-mpls-vns-00.txt          August 1998


   7       References ..............................................   6
   8       Authors' Addresses ......................................   6

1. Introduction

   Nortel's Virtual Network Switching (VNS) is defined in [3].  VNS
   offers several unique capabilities such as the transport of IP, IPX
   and Bridging traffic in a multi-service network (voice, video, and
   data). It has been deployed in many live networks  around the globe.

   Multi-Protocol Label Switching (MPLS) architecture and framework are
   defined in [1] and [2] respectively. MPLS is an emerging protocol
   being standardized by the IETF. As the development of MPLS progresses
   and its deployment in customer networks takes place, it becomes
   necessary to provide a solution for interworking MPLS and VNS
   networks.

   MPLS and VNS are two technologies that forward IP traffic based on a
   fixed size label to avoid processing IP headers at tandem nodes
   between the source and the destination.

   This document specifies MPLS-VNS  interworking in an efficient manner
   that preserves the fast forwarding of packets based on labels when
   crossing an MPLS/VNS boundary. The interworking function also ensures
   that COS characteristics of an LSP are preserved when going from VNS
   to MPLS and vice versa.

   It is possible to interwork MPLS and VNS at the IP layer by
   terminating an MPLS label switched path (LSP), mapping the IP
   destination address to a VNS label, and forwarding packets inside the
   VNS domain based on the VNS label. However, this solution would
   invoke L3 forwarding at the boundary between MPLS and VNS.

   The solution described in this draft ensures that label forwarding is
   preserved at the interworking point between MPLS and VNS. Two
   interworking scenarios are identified. In the first scenario, traffic
   is exchanged between two MPLS nodes through a VNS network. For
   example between nodes 1 and 4 shown in Figure 1. In the second
   scenario, traffic is exchanged between an MPLS node and a VNS node
   (e.g., between nodes 1 and 2 of Figure 3).

   Interworking through VNS is described in Section 2. Interworking
   between VNS and MPLS is described in section 3. Section 4 concludes
   this draft.

   This document should be read along with a companion document,
   Nortel's Virtual Network Switching (VNS) Overview [3].




Jamoussi, et. al,            August 7, 1998                     [Page 2]





Internet Draft       draft-jamoussi-mpls-vns-00.txt          August 1998


2. Interworking through VNS

   This section describes the interworking functions that are required
   in order to connect two MPLS nodes through a VNS network. Section 2.1
   specifies the label distribution protocol. Section 2.2 specifies the
   label stack encoding.

                             LDP Sessions
                        +-------------------+
                        |                   |
    MPLS Domain         |     VNS Domain    |           MPLS Domain
    +------+         +------+            +------+         +------+
    |      |         |      |  +-----+   |      |         |      |
    |      |         |M    V|  |     |   |V    M|         |      |
    |      |---+-----|P    N|---     ----|N    P|---+-----|      |
    |      |         |L    S|  |     |   |S    L|         |      |
    |      |         |S     |  +-----+   |     S|         |      |
    |  1   |         |  2   |            |  3   |         |  4   |
    +------+         +------+            +------+         +------+

                     Figure 1. MPLS--VNS Interworking

2.1 Label Distribution Protocol

   In a VNS Network, three separate nodal functions are defined. An
   ingress function, an egress function, and a tandem (or core)
   function. The ingress and egress nodes define the boundary between an
   MPLS domain and the VNS domain as shown in Figure 1 (nodes 2 and 3).

   In MPLS, label to stream binding information is communicated through
   a label distribution protocol [4] between peer Label Switching
   Routers (LSRs).  In the example of Figure 1, nodes 2 and 3 are LDP
   peers. Therefore, in order for MPLS label information to be
   communicated across a VNS domain, an LDP session is established
   between all the ingress and egress VNS nodes of a logical network.
   Tandem (or core) VNS nodes do not need to participate in LDP.

   VNS supports a multicast forwarding service for traffic within a
   Logical Network (LN) [3] at the VNS layer.  Multicast packets are
   delivered to all nodes supporting the logical network to which the
   multicast packet belongs.

   The LDP session establishment takes advantage of this VNS multicast
   capability to send "Hello" packets. Edge nodes performing the VNS-
   MPLS interworking function are able to dynamically discover each
   other through VNS multicast.

   Inside the VNS network, VNS uses it own label distribution mechanism



Jamoussi, et. al,            August 7, 1998                     [Page 3]





Internet Draft       draft-jamoussi-mpls-vns-00.txt          August 1998


   which is based on a distributed serverless topology driven approach.
   Standard ARP is used to distribute a mapping between network layer
   addresses and VNS labels.

   As described in [3], a VNS Label is composed of the destination node
   ID and the Logical Network Number (LNN). When an ingress VNS node
   receives the ARP reply that maps an IP prefix to a VNS label, it
   initiates an LDP session with that destination node as specified in
   [4]. This LDP session is used to exchange MPLS label mappings to FECs
   between the two VNS edge nodes.

2.2 Label Stack Encoding

   When packets are carried in an MPLS domain, the standard label stack
   encoding defined in [5] is used. When packets enter a VNS network, a
   VNS label defined in [3] is pushed on top of the MPLS stack resulting
   in a stack depth of at least two labels. The top label is the VNS
   label. The bottom label is the MPLS shim encoding defined in [5].
   Packets are forwarded inside the VNS network based on the VNS header
   as defined in [3]. When a packet is about to leave a VNS network, the
   VNS header is popped and MPLS-based label forwarding is resumed.
   Figure 2. shows the label stack encoding of an IP packet as it
   traverses a VNS domain.

             +--------------+----+-------------+------------+
             | Data         | IP | MPLS Header | VNS Header |
             +--------------+----+-------------+------------+

                 Figure 2. MPLS/VNS Label Stack Encoding

   A Protocol Type field in the VNS header indicates the type of
   protocol being carried in the VNS packet. Examples include IP, IPX,
   and Bridging. If the packet is a multicast packet then this is
   indicated in this field.

   A new codepoint is defined in this Protocol Type field to indicate
   that the packet being carried by VNS is an MPLS packet.

   The MPLS shim encoding includes a 3-bit COS field used to indicate
   the Class of Service of the packet. The VNS header also includes a
   3-bit COS field. A mapping function between the MPLS and the VNS COS
   fields ensures that packets receive a consistent queuing and
   scheduling treatment in both the MPLS and the VNS domains.

   In addition, the VNS header includes a Discard Priority field that
   indicates the level of congestion at which the packet should be
   dropped. The MPLS shim encoding does not have a field that indicates
   the discard eligibility of a packet. Therefore, a mapping to the MPLS



Jamoussi, et. al,            August 7, 1998                     [Page 4]





Internet Draft       draft-jamoussi-mpls-vns-00.txt          August 1998


   COS field is necessary.

3. Interworking between VNS and MPLS

   This section describes the interworking functions required to
   preserve the label switching path when traffic is terminated on an
   MPLS node on one end and a VNS node on the other.

                MPLS Domain                   VNS Domain
                +------+                      +------+
                |      |       +------+       |      |
                |      |       |M    V|       |      |
                |      |-------|P    N|-------|      |
                |      |       |L    S|       |      |
                |  1   |       |S     |       |  2   |
                +------+       +------+       +------+

                     Figure 3. MPLS--VNS Interworking

3.1 Label Distribution

   In this interworking mode, labels are distributed within the MPLS
   domain as defined in [4] and within the VNS domain as defined in [3]
   independently of each other. At the node of intersection of the VNS
   and MPLS domains, the lack of an LDP session with a remote MPLS peer
   for a given stream indicates that  label swapping is to take place at
   that node. Therefore, the forwarding table is populated accordingly.

3.2 Label Stack Encoding

   Since in this mode of operation, traffic is terminating on a VNS node
   on one end and on an MPLS node on the other, label stack encoding
   defined in [5] is used within the MPLS domain and label encoding
   defined in [3] is used in the VNS domain. At the point of
   intersection, a swapping operation is performed between the VNS and
   MPLS labels.

4. Summary

   VNS uses a label switching scheme to forward IP packets in a VNS
   domain. Many live networks are running VNS to switch their IP
   traffic.  MPLS is an emerging standard that also uses label switching
   to carry IP traffic. As MPLS networks get deployed, it becomes
   necessary to provide an MPLS-VNS Interworking solution.

   This draft describes an architectural view of how MPLS and VNS
   interworking can be done in an efficient manner that preserves the
   label switching property at the MPLS/VNS boundary nodes.



Jamoussi, et. al,            August 7, 1998                     [Page 5]





Internet Draft       draft-jamoussi-mpls-vns-00.txt          August 1998


   Two interworking scenarios are identified.  In the first scenario,
   traffic is exchanged between two MPLS nodes through a VNS network. In
   this case, LDP is used to carry label bindings between MPLS peer
   nodes across a VNS domain. VNS uses its label distribution protocol
   to map IP reachability to VNS labels. At least a two-label-stack is
   used to carry traffic across a VNS domain. The top label is a VNS
   label (as defined in [3]) and the bottom label is an MPLS label (as
   defined in [5]).

   In the second interworking scenario, traffic is exchanged between an
   MPLS node and a VNS node. In this case, a label swapping function is
   invoked at the VNS-MPLS boundary.

5. Security Considerations

   Security issues are not discussed in this memo.

6. Acknowledgements

   The authors would like to acknowledge the valuable comments of Jerry
   Wu, Denis Fortier, Robert Eros, and Pierre Cousineau.

7. References

   [1] E. Rosen et al, "Multiprotocol Label Switching Architecture",
   draft-ietf-mpls-arch-01.txt, March 1998.

   [2] R. Callon, et. al., "A Framework for Multiprotocol Label
   Switching", draft-ietf-mpls-framework-02.txt, November 21, 1997.

   [3] B. Jamoussi, et. al., "Nortel's Virtual Network Switching (VNS)
   Overview", RFC 2340, May 1998.

   [4] L. Anderson, et. al., "Label Distribution Protocol", draft-mpls-
   ldp-00.txt, March 1998.

   [5] E. Rosen, et. al., "MPLS Label Stack Encoding", draft-ietf-mpls-
   label-encaps-01.txt, February 1998.

8. Authors' Addresses

   Bilel Jamoussi
   Nortel (Northern Telecom), Ltd.
   PO Box 3511 Station C
   Ottawa ON K1Y 4H7
   Canada

   EMail: jamoussi@nortel.com



Jamoussi, et. al,            August 7, 1998                     [Page 6]





Internet Draft       draft-jamoussi-mpls-vns-00.txt          August 1998


   Dwight Jamieson
   Nortel (Northern Telecom), Ltd.
   PO Box 3511 Station C
   Ottawa ON K1Y 4H7
   Canada

   EMail: djamies@nortel.com

   Paul Beaubien
   Nortel (Northern Telecom), Ltd.
   PO Box 3511 Station C
   Ottawa ON K1Y 4H7
   Canada

   EMail: beaubien@nortel.com




































Jamoussi, et. al,            August 7, 1998                     [Page 7]


