<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Mobile IPv6: Support for
         Network Access Server to Diameter Server Interaction</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Mobile IPv6: Support for
         Network Access Server to Diameter Server Interaction">
<meta name="keywords" content="Internet-Draft, Diameter, Mobile IPv6, Integrated Scenario">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Diameter Maintenance and</td><td class="header">J. Korhonen</td></tr>
<tr><td class="header">Extensions (DIME)</td><td class="header">TeliaSonera</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">J. Bournelle</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Orange Labs</td></tr>
<tr><td class="header">Expires: November 27, 2008</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">C. Perkins</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">K. Chowdhury</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Starent Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 26, 2008</td></tr>
</table></td></tr></table>
<h1><br />Diameter Mobile IPv6: Support for
         Network Access Server to Diameter Server Interaction<br />draft-ietf-dime-mip6-integrated-09.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on November 27, 2008.</p>

<h3>Abstract</h3>

<p>A Mobile IPv6 node requires a home agent address, a home address, and a security
            association with its home agent before it can start utilizing Mobile IPv6. RFC 3775
            requires that some or all of these parameters are statically configured. Mobile IPv6
            bootstrapping work aims to make this information dynamically available to the Mobile
            Node. An important aspect of the Mobile IPv6 bootstrapping solution is to support
            interworking with existing authentication, authorization and accounting infrastructure.
            This document describes the MIPv6 bootstrapping using the Diameter Network Access Server
            (NAS) to home Authentication, Authorization and Accounting server (HAAA) interface. 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#terms">2.</a>&nbsp;
Terminology and Abbreviations<br />
<a href="#anchor1">3.</a>&nbsp;
Overview<br />
<a href="#cmds">4.</a>&nbsp;
Commands, AVPs and Advertising Application Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#apps">4.1.</a>&nbsp;
Advertising Application Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">4.2.</a>&nbsp;
Command Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.3.</a>&nbsp;
Diameter-EAP-Request (DER)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.4.</a>&nbsp;
Diameter-EAP-Answer (DEA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.5.</a>&nbsp;
Attribute Value Pair Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.5.1.</a>&nbsp;
MIP6-Agent-Info<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.5.2.</a>&nbsp;
MIP-Home-Agent-Address AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.5.3.</a>&nbsp;
MIP-Home-Agent-Host AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.5.4.</a>&nbsp;
MIP6-Home-Link-Prefix AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#capability">4.5.5.</a>&nbsp;
MIP6-Feature-Vector AVP<br />
<a href="#anchor10">5.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.1.</a>&nbsp;
Home Agent Assignment by the NAS<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.2.</a>&nbsp;
Home Agent Assignment by the Diameter Server<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.3.</a>&nbsp;
Home Agent Assignment by NAS or Diameter Server<br />
<a href="#nasavpoccurance">6.</a>&nbsp;
AVP Occurrence Tables<br />
<a href="#anchor14">7.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">7.1.</a>&nbsp;
Registration of new AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">7.2.</a>&nbsp;
New Registry: Mobility Capability<br />
<a href="#anchor17">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor18">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Mobile IPv6 (MIPv6) specification <a class='info' href='#RFC3775'>[1]<span> (</span><span class='info'>Johnson, D., Perkins, C., and J. Arkko, &ldquo;Mobility Support in IPv6,&rdquo; June&nbsp;2004.</span><span>)</span></a> requires a Mobile Node
            (MN) to perform registration with a home agent (HA) with information about its current
            point of attachment (care-of address). The HA creates and maintains binding between the
            MN's Home Address and the MN's Care-of Address. 
</p>
<p>In order to register with a HA, the MN needs to know some information such as the Home
            Link prefix, the HA address, the Home Address(es), the Home Link prefix length and
            security association related information. 
</p>
<p>The aforementioned information may be statically configured. However, static
            provisioning becomes an administrative burden for an operator. Moreover, it does not
            address load balancing, failover, opportunistic home link assignment and assignment of
            local HAs in close proximity to the MN. Also the ability to react to sudden
            environmental or topological changes is minimal. Static provisioning may not be
            desirable, in light of these limitations. 
</p>
<p>Dynamic assignment of MIPv6 home registration information is a desirable feature for
            ease of deployment and network maintenance. For this purpose, the AAA infrastructure,
            which is used for access authentication, can be leveraged to assign some or all of the
            necessary parameters. The Diameter server in Access Service Provider's (ASP) or in
            Mobility Service Provider's (MSP) network may return these parameters to the AAA client.
            Regarding the bootstrapping procedures, the AAA client might either be the NAS, in case
            of the integrated scenario, or the HA, in case of the split scenario <a class='info' href='#RFC5026'>[7]<span> (</span><span class='info'>Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;Mobile IPv6 Bootstrapping in Split Scenario,&rdquo; October&nbsp;2007.</span><span>)</span></a>. The terms integrated and split are described in the terminology
            section and were introduced in <a class='info' href='#RFC4640'>[8]<span> (</span><span class='info'>Patel, A. and G. Giaretta, &ldquo;Problem Statement for bootstrapping Mobile IPv6 (MIPv6),&rdquo; September&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#I-D.ietf-mext-aaa-ha-goals'>[9]<span> (</span><span class='info'>Giaretta, G., Guardini, I., Demaria, E., Bournelle, J., and R. Lopez, &ldquo;AAA Goals for Mobile IPv6,&rdquo; May&nbsp;2008.</span><span>)</span></a>. 
</p>
<a name="terms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology and Abbreviations</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
            NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as
            described in RFC2119 <a class='info' href='#RFC2119'>[2]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. 
</p>
<p>General mobility terminology can be found in <a class='info' href='#RFC3753'>[10]<span> (</span><span class='info'>Manner, J. and M. Kojo, &ldquo;Mobility Related Terminology,&rdquo; June&nbsp;2004.</span><span>)</span></a>. The following
            additional terms, as defined in <a class='info' href='#RFC4640'>[8]<span> (</span><span class='info'>Patel, A. and G. Giaretta, &ldquo;Problem Statement for bootstrapping Mobile IPv6 (MIPv6),&rdquo; September&nbsp;2006.</span><span>)</span></a>, are used in this document: 
</p>
<p>
            </p>
<blockquote class="text"><dl>
<dt>Access Service Authorizer (ASA):</dt>
<dd>
                  <br />
A network operator that authenticates a MN and establishes
                  the MN's authorization to receive Internet service. 
</dd><br />

<dt>Access Service Provider (ASP):</dt>
<dd>
                  <br />
 A network operator that provides direct IP packet
                  forwarding to and from the MN. 
</dd><br />

<dt>Mobility Service Authorizer (MSA):</dt>
<dd>
                  <br />
 A service provider that authorizes MIPv6 service. 
</dd><br />

<dt>Mobility Service Provider (MSP):</dt>
<dd>
                  <br />
A service provider that provides MIPv6 service. In order
                  to obtain such service, the MN must be authenticated and authorized to obtain the
                  MIPv6 service. 
</dd><br />

<dt>Split scenario:</dt>
<dd>
                  <br />
A scenario where the mobility service and the network
                  access service are authorized by different entities. 
</dd><br />

<dt>Integrated Scenario:</dt>
<dd>
                  <br />
 A scenario where the mobility service and the network
                  access service are authorized by the same entity. 
</dd><br />

<dt>Network Access Server (NAS):</dt>
<dd>
                  <br />
A device that provides an access service for a user to a
                  network. 
</dd><br />

<dt>Home AAA (HAAA):</dt>
<dd>
                  <br />
 An authentication, authorization and accounting server
                  located in user's home network i.e., in the home realm. 
</dd><br />

<dt>Local AAA (LAAA):</dt>
<dd>
                  <br />
 An authentication, authorization and accounting proxy
                  located in the local (ASP) network. 
</dd><br />

<dt>Visited AAA (VAAA):</dt>
<dd>
                  <br />
 An authentication, authorization and accounting proxy
                  located in a visited network i.e., in the visited realm. In a roaming case, the
                  local Diameter proxy has the VAAA role.
</dd>
</dl></blockquote><p>
         
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overview</h3>

<p>This document addresses the authentication, authorization and accounting functionality
            required for the MIPv6 bootstrapping solutions outlined in <a class='info' href='#RFC4640'>[8]<span> (</span><span class='info'>Patel, A. and G. Giaretta, &ldquo;Problem Statement for bootstrapping Mobile IPv6 (MIPv6),&rdquo; September&nbsp;2006.</span><span>)</span></a> and
            focuses on the Diameter based AAA functionality for the NAS to HAAA communication. 
</p>
<p>In the integrated scenario MIPv6 bootstrapping is provided as part of the network access
            authentication procedure. <a class='info' href='#integrated-scenario'>Figure&nbsp;1<span> (</span><span class='info'>Mobile IPv6          Bootstrapping in the Integrated Scenario</span><span>)</span></a> shows the participating
            entities. 
</p>
<p>
            <br /><hr class="insert" />
<a name="integrated-scenario"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                   +---------------------------+  +-----------------+
                   |Access Service Provider    |  |ASA/MSA/(MSP)    |
                   |(Mobility Service Provider)|  |                 |
                   |                           |  |                 |
                   | +--------+                |  |    +--------+   |
                   | |Local   |      Diameter  |  |    |Home    |   |
                   | |Diameter|&lt;----------------------&gt;|Diameter|   |
                   | |Proxy   |         (*)    |  |    |Server  |   |
                   | +--------+                |  |    +--------+   |
                   |     ^ ^                   |  |        ^        |
                   |     | |                   |  |        |(+)     |
                   |     | |                   |  |        |        |
                   |   Diameter                |  |        v        |
                   |     | |(+)      +-------+ |  |    +-------+    |
                   |     | |         |Home   | |  |    |Home   |    |
                   |     | +--------&gt;|Agent  | |  |    |Agent  |    |
                   |  (*)|           |in ASP | |  |    |in MSP |    |
                   |     v           +-------+ |  |    +-------+    |
+-------+ IEEE     | +-----------+   +-------+ |  +-----------------+
|Mobile | 802.1X   | |NAS/Relay  |   |DHCPv6 | |
|Node   |------------|Diameter   |---|Server | |
|       | PANA,... | |Client     |(+)|       | |
+-------+ DHCP     | +-----------+   +-------+ |
          (+)      +---------------------------+

Legend:
  (*): Functionality in scope of this specification
  (+): Extensions described in other documents.
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Mobile IPv6
         Bootstrapping in the Integrated Scenario&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

         
</p>
<p>In a typical MIPv6 access scenario, a MN is attached to an
            ASP's network. During the network attachment procedure,
            the MN interacts with the NAS/Diameter
            client. Subsequently, the NAS/Diameter client interacts
            with the Diameter server over the NAS to HAAA interface.
         
</p>
<p>When the Diameter server performs the authentication and
            authorization for the network access it
            also determines whether the user is authorized to the
            MIPv6 service. Based on the MIPv6 service authorization
            and user's policy profile,
            the  Diameter server may return several MIPv6
            bootstrapping related parameters to the NAS. The NAS to
            HAAA interface described in this document is not tied to
            DHCPv6 as the only mechanism to convey MIPv6 related
            configuration parameters from the NAS/Diameter client to the
            mobile node.
         
</p>
<a name="cmds"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Commands, AVPs and Advertising Application Support</h3>

<a name="apps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Advertising Application Support</h3>

<p>This document does not define a new application. On the
               other hand it defines a number of MIPv6 bootstrapping
               NAS to HAAA interface (integrated scenario) related
               AVPs. These AVPs can be used with present and future Diameter
               applications, where permitted by the command ABNF. The
               examples using existing applications and their commands
               in the following sections are for informational
               purposes only. The  examples in this document reuse
               EAP <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> application and its respective
               commands. 
            
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Command Codes</h3>

<p> This document shows re-use of the Diameter EAP
               application commands <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> as an
               example of the MIPv6 bootstrapping NAS to HAAA
               interface. Refer to <a class='info' href='#nasavpoccurance'>Section&nbsp;6<span> (</span><span class='info'>AVP Occurrence Tables</span><span>)</span></a>
               and <a class='info' href='#nasavptable'>Figure&nbsp;6<span> (</span><span class='info'>Generic Request and Answer Commands AVP Table</span><span>)</span></a> for AVP
               occurance definitions in Diameter commands. The
               following commands are used to carry  
               MIPv6 related bootstrapping AVPs: 
</p>
<p>
               <br /><hr class="insert" />
<a name="cmd"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Command-Name             Abbrev.   Code     Reference  Application

Diameter-EAP-Request      DER       268      RFC 4072   EAP
Diameter-EAP-Answer       DEA       268      RFC 4072   EAP
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: MIPv6 Bootstrapping NAS to HAAA Interface
                     Command Codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            
</p>
<p>When the Re-Auth-Request (RAR), Re-Auth-Answer (RAA), Session-Termination-Request
               (STR), Session-Termination-Answer (STA), Abort-Session-Request (ASR),
               Abort-Session-Answer (ASA), Accounting-Request (ACR), and Accounting-Answer (ACA)
               commands are used together with the MIPv6 bootstrapping NAS to HAAA interface, they
               follow the rules defined in RFC 3588 <a class='info' href='#RFC3588'>[4]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> and the rules for the
               specific Diameter application the AVPs defined in this document are used with. The
               accounting commands use the Application Identifier value of 3 (Diameter Base
               Accounting); the others use 0 (Diameter Common Messages). 
</p>
<p>All request messages SHOULD contain the User-Name AVP containing the identity of the
               MN in NAI format. It is out of scope how the NAS finds out the MN identity. The NAS
               could, for example, use the MN identity provided by the network access authentication
               mechanism. 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Diameter-EAP-Request (DER)</h3>

<p>The Diameter-EAP-Request (DER) message <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>, indicated by the
               Command- Code field set to 268 and the 'R' bit set in the Command Flags field, is
               sent by the NAS to the Diameter server to initiate a network access authentication
               and authorization procedure. The DER message format is the same as defined in <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. The message MAY include optional MIPv6 bootstrapping AVPs: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;Diameter-EAP-Request&gt; ::= &lt; Diameter Header: 268, REQ, PXY &gt;
                             &lt; Session-Id &gt;
                             { Auth-Application-Id }
                             { Origin-Host }
                             { Origin-Realm }
                             { Destination-Realm }
                             { Auth-Request-Type }

                           * [ MIP6-Agent-Info ]
                           * [ MIP6-Home-Link-Prefix ]
                             [ MIP6-Feature-Vector ]

                             [ User-Name ]
                             [ Destination-Host ]
                             ...
                           * [ AVP ]
</pre></div><p>

            
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Diameter-EAP-Answer (DEA)</h3>

<p>The Diameter-EAP-Answer (DEA) message defined in <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>, indicated
               by the Command-Code field set to 268 and 'R' bit cleared in the Command Flags field,
               is sent in response to the Diameter-EAP-Request message (DER). If the network access
               authentication procedure was successful then the response MAY include any set of
               bootstrapping AVPs. 
</p>
<p>The DEA message format is the same as defined in <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> with an
               addition of optional MIPv6 bootstrapping AVPs: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;Diameter-EAP-Answer&gt; ::= &lt; Diameter Header: 268, PXY &gt;
                            &lt; Session-Id &gt;
                            { Auth-Application-Id }
                            { Auth-Request-Type }
                            { Result-Code }
                            { Origin-Host }
                            { Origin-Realm }

                          * [ MIP6-Agent-Info ]
                          * [ MIP6-Home-Link-Prefix ]
                            [ MIP6-Feature-Vector ]

                            [ User-Name ]
                            ...
                          * [ AVP ]
</pre></div><p>

            
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Attribute Value Pair Definitions</h3>

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.1"></a><h3>4.5.1.&nbsp;
MIP6-Agent-Info</h3>

<p>The MIP6-Agent-Info AVP (AVP code TBD) is type of Grouped and contains necessary
                  information to assign a HA to the MN. When the MIP6-Agent-Info AVP is present in a
                  message, it MUST contain either the MIP-Home-Agent-Address AVP or the
                  MIP-Home-Agent-Host AVP, or both AVPs. The grouped AVP has the following grammar: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;MIP6-Agent-Info&gt; ::= &lt; AVP Header: TBD &gt;
                      [ MIP-Home-Agent-Address ]
                      [ MIP-Home-Agent-Host ]
                    * [ AVP ]
</pre></div><p>

               
</p>
<p>If both MIP-Home-Agent-Address and
                  MIP-Home-Agent-Host APVs are present in the
                  MIP6-Agent-Info, the MIP-Home-Agent-Address SHOULD
                  have a precedence over the MIP-Home-Agent-Host. The
                  reason for this recommendation is that the
                  MIP-Home-Agent-Address points to a specific home
                  agent, where as the MIP-Home-Agent-Host may point to
                  a group of HAs located at within the same realm.
                  A Diameter client or an agent may use
                  the MIP-Home-Agent-Host AVP, for instance, to find
                  out the realm where the HA is located.
               
</p>
<p>This AVP MAY also be attached by the NAS or by intermediating Diameter
                  proxies in a request message when sent to the Diameter server 
                  as a hint of a locally assigned HA. This AVP MAY also be attached by the
                  intermediating Diameter proxies in a reply message from the Diameter server, 
                  if locally assigned HAs are authorized by the Diameter server.
               
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.2"></a><h3>4.5.2.&nbsp;
MIP-Home-Agent-Address AVP</h3>

<p>The MIP-Home-Agent-Address AVP (AVP Code 334 <a class='info' href='#RFC4004'>[5]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>) is of type
                  Address and contains the HA address. The Diameter server MAY decide to assign a HA
                  to the MN that is in close proximity to the point of attachment (e.g., determined
                  by the NAS-Identifier AVP). There may be other reasons for dynamically assigning
                  HAs to the MN, for example to share the traffic load. 
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.3"></a><h3>4.5.3.&nbsp;
MIP-Home-Agent-Host AVP</h3>

<p>The MIP-Home-Agent-Host AVP (AVP Code 348 <a class='info' href='#RFC4004'>[5]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>) is of type
                  Grouped and contains the identity of the assigned HA. Both the Destination-Realm
                  and the Destination-Host AVP of the HA are included in the grouped AVP. The usage
                  of this AVP is equivalent to the MIP-Home-Agent-Address AVP but offers an
                  additional level of indirection by using the DNS
                  infrastructure. 
               
</p>
<p>Depending on the actual deployment and DNS configuration the
                  Destination-Host AVP MAY represent one or more home
                  agents. It is RECOMMENDED that the Destination-Host
                  AVP identifies exactly one HA.
               
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.4"></a><h3>4.5.4.&nbsp;
MIP6-Home-Link-Prefix AVP</h3>

<p>The MIP6-Home-Link-Prefix AVP (AVP Code TBD) is of type OctetString and contains
                  the Mobile IPv6 home network prefix information in network byte order. The home
                  network prefix MUST be encoded as the 8-bit prefix length information followed by
                  the 128-bit field for the available home network prefix. 
</p>
<a name="capability"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5.5"></a><h3>4.5.5.&nbsp;
MIP6-Feature-Vector AVP</h3>

<p>The MIP6-Feature-Vector AVP (AVP Code TBD) is of type Unsigned64 and contains a 64
                  bit flags field of supported capabilities of the NAS/ASP. Sending and receiving
                  the MIP6-Feature-Vector AVP with value 0 MUST be supported, although that does not
                  provide much guidance about specific needs of bootstrapping. 
</p>
<p>The NAS MAY include this AVP to indicate capabilities of the NAS/ASP to the
                  Diameter server. For example, the NAS may indicate that a local HA can be
                  provided. Similarly, the Diameter server MAY include this AVP to inform the
                  NAS/ASP about which of the NAS/ASP indicated capabilities are supported or
                  authorized by the ASA/MSA(/MSP). 
</p>
<p>The following capabilities are defined in this document: 
</p>
<p>
                  </p>
<blockquote class="text"><dl><br />
<br />

<dt>MIP6_INTEGRATED (0x0000000000000001)</dt>
<dd>
                        <br />
When this flag is set by the NAS then it means that
                        the Mobile IPv6 integrated scenario bootstrapping functionality is supported
                        by the NAS. When this flag is set by the Diameter server then the Mobile
                        IPv6 integrated scenario bootstrapping is supported by the Diameter server. 
</dd><br />

<dt>LOCAL_HOME_AGENT_ASSIGNMENT (0x0000000000000002)</dt>
<dd>
                        <br />
 When this flag is set in the
                        request message, a local home
                        agent outside the home realm is requested and may be assigned
                        to the MN. When this flag is set by the Diameter 
                        server in the answer message, then the assignment of local HAs is
                        authorized by the Diameter server.
                        <br />
<br />

                        A local HA may be assigned by the NAS, LAAA or
                        VAAA depending on the network architecture and the
                        deployment.
                     
</dd>
</dl></blockquote><p>
               
</p>
<p>The following examples show how the LOCAL_HOME_AGENT_ASSIGNMENT capability and the
                  MIP-Agent-Info AVP are used to assign HAs,
                  either a local HA (L-HA) or a home network HA (H-HA). Below
                  is an example of a
                  request message combinations as seen by the HAAA:
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 LOCAL-bit  HA-Info  Meaning

   0          -      ASP or [LV]AAA is not able to assign a L-HA
   0         L-HA    Same as above. HA-Info must be ignored
   1          -      ASP or [LV]AAA can/wishes to assign a L-HA
   1         L-HA    Same as above but ASP or [LV]AAA also
                     provides a hint of the assigned L-HA
</pre></div><p>

               
</p>
<p>Then the same as above for an answer message
 combinations as seen by the NAS:
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 LOCAL-bit  HA-Info  Meaning

   0          -      No HA allowed -&gt; no mobility
   0         H-HA    L-HA is not allowed. HAAA assigns a H-HA
   1          -      L-HA is allowed. No HAAA or [LV]AAA assigned HA
   1         L-HA    L-HA is allowed. [LV]AAA also assigns a L-HA
   1         H-HA    L-HA is allowed. HAAA also assigns a HA
   1         H-HA    L-HA is allowed. HAAA assigns a H-HA and
           + L-HA    [LV]AAA also assigns also a L-HA
</pre></div><p>

               
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Examples</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Home Agent Assignment by the NAS</h3>

<p>In this scenario we consider the case where the NAS wishes to allocate a local HA to
               the MN. The NAS will also inform the Diameter server about the HA address it has
               assigned to the visiting MN (e.g., 2001:db8:1:c020::1). The Diameter-EAP-Request
               message therefore has the MIP6-Feature-Vector with the LOCAL_HOME_AGENT_ASSIGNMENT
               and the MIP6_INTEGRATED set. The MIP6-Agent-Info AVP contains the
               MIP-Home-Agent-Address AVP with the address of the proposed HA. 
</p>
<p>
               <br /><hr class="insert" />
<a name="example3"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                                             Diameter
NAS                                                            Server
 |                                                                 |
 |  Diameter-EAP-Request                                           |
 |  MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT               |
 |                       | MIP6_INTEGRATED)                        |
 |  MIP6-Agent-Info{                                               |
 |       MIP-Home-Agent-Address(2001:db8:1:c020::1)}               |
 |  }                                                              |
 |  Auth-Request-Type=AUTHORIZE_AUTHENTICATE                       |
 |  EAP-Payload(EAP Start)                                         |
 |----------------------------------------------------------------&gt;|
 |                                                                 |
 |                                                                 |
 :              ...more EAP Request/Response pairs...              :
 |                                                                 |
 |                                                                 |
 |                                            Diameter-EAP-Answer  |
 |               MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT  |
 |                                    | MIP6_INTEGRATED)           |
 |                                   Result-Code=DIAMETER_SUCCESS  |
 |                                       EAP-Payload(EAP Success)  |
 |                                         EAP-Master-Session-Key  |
 |                                           (authorization AVPs)  |
 |                                                           ...   |
 |&lt;----------------------------------------------------------------|
 |                                                                 |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Home Agent Assignment by NAS&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            
</p>
<p> Depending on the Diameter server configuration and user's subscription profile, the
               Diameter server either accepts or rejects the proposal of locally HA allocated by the
               NAS will be used. In our example, the Diameter server accepts the proposal and the
               the MIP6-Feature-Vector AVP with LOCAL_HOME_AGENT_ASSIGNMENT flag (together with the
               MIP6_INTEGRATED flag) is set and returned to the NAS. 
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Home Agent Assignment by the Diameter Server</h3>

<p>In this scenario we consider the case where the NAS supports the Diameter MIPv6
               integrated scenario as defined in this document but does not offer local HA
               assignment. Hence, the MIP6-Feature-Vector AVP only has the MIP6_INTEGRATED flag set.
               The Diameter server allocates a HA to the mobile node and conveys the address
               in the MIP-Home-Agent-Address AVP that is encapsulated in the MIP6-Agent-Info AVP.
               Additionally, the MIP6-Feature-Vector AVP has the MIP6_INTEGRATED flag set.
</p>
<p>
               <br /><hr class="insert" />
<a name="example2"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                                             Diameter
NAS                                                            Server
 |                                                                 |
 |  Diameter-EAP-Request                                           |
 |  MIP6-Feature-Vector=(MIP6_INTEGRATED)                          |
 |  Auth-Request-Type=AUTHORIZE_AUTHENTICATE                       |
 |  EAP-Payload(EAP Start)                                         |
 |----------------------------------------------------------------&gt;|
 |                                                                 |
 |                                                                 |
 :              ...more EAP Request/Response pairs...              :
 |                                                                 |
 |                                                                 |
 |                                            Diameter-EAP-Answer  |
 |                                               MIP6-Agent-Info{  |
 |         MIP-Home-Agent-Address(2001:db8:6000:302::1/64)         |
 |                                                              }  |
 |                          MIP6-Feature-Vector=(MIP6_INTEGRATED)  |
 |                                   Result-Code=DIAMETER_SUCCESS  |
 |                                       EAP-Payload(EAP Success)  |
 |                                         EAP-Master-Session-Key  |
 |                                           (authorization AVPs)  |
 |                                                           ...   |
 |&lt;----------------------------------------------------------------|
 |                                                                 |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Home Agent Assignment by Diameter Server&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Home Agent Assignment by NAS or Diameter Server</h3>

<p>This section shows a message flow for the MIPv6 integrated scenario bootstrapping
               where the NAS informs the Diameter server that it is able to locally assign a HA to
               the MN. The Diameter server is able to provide a HA to the MN but also authorizes the
               assignment of local HA. The Diameter server then replies to the NAS with HA related
               bootstrapping information.
</p>
<p>Whether the NAS/ASP then offers a locally assigned HA or the Diameter server assigned
               HA to the MN is, in this example, based on the local ASP policy. 
</p>
<p>
               <br /><hr class="insert" />
<a name="example1"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                                             Diameter
NAS                                                            Server
 |                                                                 |
 |  Diameter-EAP-Request                                           |
 |  MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT               |
 |                       | MIP6_INTEGRATED)                        |
 |  MIP6-Agent-Info{                                               |
 |       MIP-Home-Agent-Address(2001:db8:1:c020::1)}               |
 |  }                                                              |
 |  Auth-Request-Type=AUTHORIZE_AUTHENTICATE                       |
 |  EAP-Payload(EAP Start)                                         |
 |----------------------------------------------------------------&gt;|
 |                                                                 |
 |                                                                 |
 :              ...more EAP Request/Response pairs...              :
 |                                                                 |
 |                                                                 |
 |                                            Diameter-EAP-Answer  |
 |                                               MIP6-Agent-Info{  |
 |               MIP-Home-Agent-Address(2001:db8:6000:302::1/64)}  |
 |               MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT  |
 |                                    | MIP6_INTEGRATED)           |
 |                                   Result-Code=DIAMETER_SUCCESS  |
 |                                       EAP-Payload(EAP Success)  |
 |                                         EAP-Master-Session-Key  |
 |                                           (authorization AVPs)  |
 |                                                           ...   |
 |&lt;----------------------------------------------------------------|
 |                                                                 |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Home Agent Assignment by NAS or Diameter Server&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            
</p>
<p>If the Diameter server does not accept locally assigned HA, the Diameter returns the
               MIP6-Feature-Vector AVP with LOCAL_HOME_AGENT_ASSIGNMENT bit unset and HA address it
               plans to allocate for the MN.
</p>
<a name="nasavpoccurance"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
AVP Occurrence Tables</h3>

<p>The following table lists the additional MIPv6 bootstrapping NAS to HAAA interface
               AVPs that may be present in any Diameter
               application request and answer commands, where permitted by the
               command ABNF.
            
</p>
<p>
               <br /><hr class="insert" />
<a name="nasavptable"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                  +-----------+
                                  |  Command  |
                                  |-----+-----+
   Attribute Name                 | Req | Ans |
   -------------------------------|-----+-----|
   MIP6-Agent-Info                | 0+  | 0+  |
   MIP6-Feature-Vector            | 0-1 | 0-1 |
   MIP6-Home-Link-Prefix          | 0+  | 0+  |
                                  +-----+-----+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Generic Request and Answer Commands AVP Table&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Registration of new AVPs</h3>

<p>This specification defines the following new AVPs: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  MIP6-Agent-Info                is set to TBD
  MIP6-Feature-Vector            is set to TBD
  MIP6-Home-Link-Prefix          is set to TBD
</pre></div><p>

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
New Registry: Mobility Capability</h3>

<p>IANA is requested to create a new registry for the Mobility Capability as described
               in <a class='info' href='#capability'>Section&nbsp;4.5.5<span> (</span><span class='info'>MIP6-Feature-Vector AVP</span><span>)</span></a>. </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Token                             | Value                | Description
----------------------------------+----------------------+------------
MIP6_INTEGRATED                   | 0x0000000000000001   | [RFC TBD]
LOCAL_HOME_AGENT_ASSIGNMENT       | 0x0000000000000002   | [RFC TBD]
Available for Assignment via IANA | 2^x                  |
</pre></div><p>
 Allocation rule: Only numeric values that are 2^x (power of two) are
               allowed based on the allocation policy described below. 
</p>
<p> Following the policies outlined in <a class='info' href='#RFC3775'>[1]<span> (</span><span class='info'>Johnson, D., Perkins, C., and J. Arkko, &ldquo;Mobility Support in IPv6,&rdquo; June&nbsp;2004.</span><span>)</span></a> new values with a
               description of their semantic for usage with the MIP6-Feature-Vector AVP together
               with a Token will be assigned after Expert Review initiated by the O&amp;M Area
               Directors in consultation with the DIME working group chairs or the working group
               chairs of a designated successor working group. Updates can be provided based on
               expert approval only. A designated expert will be appointed by the O&amp;M Area
               Directors. No mechanism to mark entries as "deprecated" is envisioned. Based on
               expert approval it is possible to delete entries from the registry. 
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>The security considerations for the Diameter interaction required to accomplish the
            integrated scenario are described in <a class='info' href='#I-D.ietf-mip6-bootstrapping-integrated-dhc'>[11]<span> (</span><span class='info'>Chowdhury, K. and A. Yegin, &ldquo;MIP6-bootstrapping for the Integrated Scenario,&rdquo; April&nbsp;2008.</span><span>)</span></a>. Additionally, the security
            considerations of the Diameter base protocol <a class='info' href='#RFC3588'>[4]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>, Diameter NASREQ
            application <a class='info' href='#RFC4005'>[6]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> / Diameter EAP <a class='info' href='#RFC4072'>[3]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> application
            (with respect to network access authentication and the transport of keying material) are
            applicable to this document. This document does not introduce new security
            vulnerabilities. 
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>This document is heavily based on the ongoing work for RADIUS MIPv6 interaction. Hence,
            credits go to respective authors for their work with draft-ietf-mip6-radius.
            Furthermore, the author would like to thank the authors of
            draft-le-aaa-diameter-mobileipv6 (Franck Le, Basavaraj Patil, Charles E. Perkins,
            Stefano Faccin) for their work in context of MIPv6 Diameter interworking. Their work
            influenced this document. Jouni Korhonen would like to thank Academy of Finland and
            TEKES MERCoNe Project for providing funding to work on this document. Julien Bournelle
            would like to thank GET/INT since he began to work on this document while he was in
            their employ. Authors would also like to acknowledge Raymond Hsu for his valuable
            feedback on local HA assignment and Wolfgang Fritsche for his thorough review. Finally,
            we would like to Domagoj Premec for his review comments.
</p>
<p>We would like to thank Alper Yegin, Robert Marks, David Frascone for their comments at
            the second WGLC. 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3775">[1]</a></td>
<td class="author-text">Johnson, D., Perkins, C., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3775">Mobility Support in IPv6</a>,&rdquo; RFC&nbsp;3775, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3775.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[2]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4072">[3]</a></td>
<td class="author-text">Eronen, P., Hiller, T., and G. Zorn, &ldquo;<a href="http://tools.ietf.org/html/rfc4072">Diameter Extensible Authentication Protocol (EAP) Application</a>,&rdquo; RFC&nbsp;4072, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4072.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[4]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4004">[5]</a></td>
<td class="author-text">Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;<a href="http://tools.ietf.org/html/rfc4004">Diameter Mobile IPv4 Application</a>,&rdquo; RFC&nbsp;4004, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4004.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4005">[6]</a></td>
<td class="author-text">Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;<a href="http://tools.ietf.org/html/rfc4005">Diameter Network Access Server Application</a>,&rdquo; RFC&nbsp;4005, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4005.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC5026">[7]</a></td>
<td class="author-text">Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;<a href="http://tools.ietf.org/html/rfc5026">Mobile IPv6 Bootstrapping in Split Scenario</a>,&rdquo; RFC&nbsp;5026, October&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5026.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4640">[8]</a></td>
<td class="author-text">Patel, A. and G. Giaretta, &ldquo;<a href="http://tools.ietf.org/html/rfc4640">Problem Statement for bootstrapping Mobile IPv6 (MIPv6)</a>,&rdquo; RFC&nbsp;4640, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4640.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mext-aaa-ha-goals">[9]</a></td>
<td class="author-text">Giaretta, G., Guardini, I., Demaria, E., Bournelle, J., and R. Lopez, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mext-aaa-ha-goals-01.txt">AAA Goals for Mobile IPv6</a>,&rdquo; draft-ietf-mext-aaa-ha-goals-01 (work in progress), May&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mext-aaa-ha-goals-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3753">[10]</a></td>
<td class="author-text">Manner, J. and M. Kojo, &ldquo;<a href="http://tools.ietf.org/html/rfc3753">Mobility Related Terminology</a>,&rdquo; RFC&nbsp;3753, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3753.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mip6-bootstrapping-integrated-dhc">[11]</a></td>
<td class="author-text">Chowdhury, K. and A. Yegin, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mip6-bootstrapping-integrated-dhc-06.txt">MIP6-bootstrapping for the Integrated Scenario</a>,&rdquo; draft-ietf-mip6-bootstrapping-integrated-dhc-06 (work in progress), April&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mip6-bootstrapping-integrated-dhc-06.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jouni Korhonen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TeliaSonera</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Teollisuuskatu 13</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sonera  FIN-00051</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jouni.korhonen@teliasonera.com">jouni.korhonen@teliasonera.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Julien Bournelle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Orange Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">38-4O rue du general Leclerc</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Issy-Les-Moulineaux  92794</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:julien.bournelle@orange-ftgroup.com">julien.bournelle@orange-ftgroup.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Charles E. Perkins</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-650-496-4402</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:charliep@computer.org">charliep@computer.org</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kuntal Chowdhury</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Starent Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">30 International Place</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tewksbury  MA  01876</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 214 550 1416</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:kchowdhury@starentnetworks.com">kchowdhury@starentnetworks.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
