<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>HTTP Access to Email Stores</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="HTTP Access to Email Stores">
<meta name="keywords" content="http smtp imap pop3 atom email">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">L. Dusseault</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CommerceNet</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">October 24, 2008</td></tr>
<tr><td class="header">Expires: April 27, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />HTTP Access to Email Stores<br />draft-dusseault-httpmail-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 27, 2009.</p>

<h3>Abstract</h3>

<p>	This document proposes a standard format and a standard navigation 
		mechanism so that mail stores can provide interoperable access to 
		mailboxes and messages over HTTP.  Mailbox contents and listings of
		mailboxes are exposed as Atom Feeds, while messages themselves are 
		downloaded as a document of type message/822.  Each mailbox and each 
		message is assigned an HTTP URL, and if permissions checks are 
		satisfied, each message may be downloaded independently.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Summary of Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Existing Work.<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Applicability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">1.4.</a>&nbsp;
Issues in this Specification<br />
<a href="#anchor6">2.</a>&nbsp;
Message Downloads in HTTP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.1.</a>&nbsp;
Example Message Download<br />
<a href="#anchor8">3.</a>&nbsp;
Message listings as Atom feeds<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.1.</a>&nbsp;
Complete Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.2.</a>&nbsp;
Elements describing the feed<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.2.1.</a>&nbsp;
'title' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.2.2.</a>&nbsp;
'id' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.2.3.</a>&nbsp;
'author' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.2.4.</a>&nbsp;
'link' elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.3.</a>&nbsp;
Elements describing an entry/message<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">3.3.1.</a>&nbsp;
'id' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">3.3.2.</a>&nbsp;
'title element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">3.3.3.</a>&nbsp;
'updated' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">3.3.4.</a>&nbsp;
'published' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">3.3.5.</a>&nbsp;
'summary' element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">3.3.6.</a>&nbsp;
'link' elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#history">3.4.</a>&nbsp;
Feed History<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">3.5.</a>&nbsp;
Attachments<br />
<a href="#navigation">4.</a>&nbsp;
Navigating mailboxes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">4.1.</a>&nbsp;
Example feed document listing mailboxes<br />
<a href="#Acknowledgements">5.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">7.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Email access via the Web is ubiquitous.  The most common situation seen in 
	deployment is for a mail server administrator to setup IMAP, POP and Web access
	to the same mail store, giving users choice. The Web-based access seen today is 
	referred to in this document as "Web mail UI" to distinguish from HTTP mail access
	as defined in this document.  Note that HTTP use in Internet mail already goes 
	beyond Web mail UIs and can be quite sophisticated.  See "Existing Work".
</p>
<p>IMAP, POP and Web mail UIs already co-exist, and this proposal makes no attempt 
to replace any of these, but instead to augment them.  Different situations 
require different tools.  HTTP access will enable new use cases for both 
users and administrators, and foster new clients and helper applications.  Adoption 
may be found far from traditional rich email applications: in status bar applications, 
client utilities, administrative utilities, server-to-server communication or 
even mashups.  See "Applicability".
</p>
<p>The functionality specified here is quite limited and cannot, by itself, replace
POP or IMAP even if that were the intent.  The approach here is to combine what is 
easiest and most natural to do in HTTP with a quick analysis of use cases and 
take the intersection.  The features found in that intersection:

	</p>
<ul class="text">
<li>A persistent HTTP URL used to download a single message/rfc822 <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> object
</li>
<li>HTTP URLs and response formats to download full or partial mailbox content listings
</li>
<li>Persistent URLs and response formats to discover what mailboxes exist
</li>
<li>Use of DELETE to instruct the server to remove the email from normal visibility.
</li>
<li>Use of POST, together with a mailbox URL, to add an email to an existing mailbox.
</li>
</ul>

<p>The choice of how to provide mailbox content listings in HTTP 
responses is a difficult decision.  
While some deployed systems already use WebDAV PROPFIND responses for 
message listings, we believe that a few conventions for using Atom will 
be more easily implemented and used by clients and servers that do not already have
this functionality.  Atom offers more control to the server over how, and even what
entries to present in a feed, and can support search folders as well as traditional
mailboxes.  Simple operations are very simple indeed with Atom: a GET request leading to a 
single document in a well-known XML format. This document's current mappings even makes it possible for a
unmodified newsreader to browse mailboxes. 

Support for Atom does not preclude more sophisticated support for
WebDAV PROPFIND, REPORT or for HTTP-based search operations.  Indeed, if
this proposal sees any adoption, further work will likely be needed depending on 
which use cases crop up.
</p>
<p>Skip ahead to section 2 and the rest of this specification for 
further technical details on these allegedly easily accomplished 
features.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Summary of Requirements</h3>

<p>Servers MUST support:
		
		</p>
<blockquote class="text">
<p>HTTP <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, including REQUIRED support for strong ETags
</p>
<p>Atom Feed documents <a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a>, generated to show listings of messages
</p>
<p>Downloading messages in message/822 format <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a>
</p>
<p>Atom Feed history <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a>, to break up listings of messages
</p>
<p>TLS <a class='info' href='#RFC4346'>[RFC4346]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.1,&rdquo; April&nbsp;2006.</span><span>)</span></a>, REQUIRED unless all messages and mailboxes are publicly readable.
</p>
</blockquote><p>
			
	
</p>
<p>Clients MUST support:
		</p>
<blockquote class="text">
<p>HTTP 1.1 <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, including chunked transfer-encoding
		and all other required HTTP 1.1 features.  
</p>
<p>Clients MUST support TLS <a class='info' href='#RFC4346'>[RFC4346]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.1,&rdquo; April&nbsp;2006.</span><span>)</span></a>
		in order to be able to communicate with secure servers. 
</p>
</blockquote>

<p>Client support for other features depends on the usage.  For example, a status
		monitoring client might only need to know a bit of summary information about
		new or unread messages, and would not need to support message/822.  Some 
		examples of optional client features and consequences:
		
		</p>
<blockquote class="text">
<p>If the client does not support the Atom Feed format, it will
				be unable to parse message listings.  It may still be able to 
				access individual messages but finding the URLs to these messages
				would have to be done in some other way.
</p>
<p>If the client does not support message/822, it will be unable to 
				read messages on all servers, but may still be able to see
				message listings, and read messages if other formats are available.
</p>
<p>HTTP Cookies <a class='info' href='#RFC2109'>[RFC2109]<span> (</span><span class='info'>Kristol, D. and L. Montulli, &ldquo;HTTP State Management Mechanism,&rdquo; February&nbsp;1997.</span><span>)</span></a> MAY be used to maintain authentication
				status if the transport is secure.  
</p>
<p>If the client does not support feed history <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a>, it can only
				see some of the most recent messages in each mailbox.
</p>
</blockquote><p>
	
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Existing Work.</h3>

<p>[Note: This section should be deleted if this document is adopted by a WG or 
published as an RFC.  Information in this section may become inaccurate 
over time and is useful mainly to motivate starting this work in the 
form proposed.]
</p>
<p>Web access to email, as commonly experienced in 2008, involves presentation 
information (HTML, CSS, images and links) as well as mail content. 
</p>
<p>Some Web mail UIs do separate presentation from content under the surface. 
For example, some servers support an AJAX-like programming pattern so that the Web browser can be
instructed to download message listings or message bodies separately from downloading
templates, images or scripts. With this architecture,
different server processes or even different servers can handle the tasks
of serving presentation logic, presentation formats and mail store contents.
</p>
<p>Some commercial mail stores already have HTTP interfaces that are predictable 
to the point of being machine-readable.  Sometimes this interface is called a 
third-party programming interface, an interface that allows third-party or add-on
applications to access the mail store and provide some auxiliary service that the
site administrators wish to offer users. 
</p>
<p>Microsoft did some early work on HTTP access to email. The Outlook Express client 
application uses a fully HTTP-based interface to do all mail functions on
Exchange mail stores as well as Hotmail.  At the time, Hotmail could or did
not support IMAP.  The Microsoft API uses PROPFIND to list mailbox contents
(this mechanism predated Atom by several years). 
</p>
<p>The Yahoo Mail Web Service uses SOAP or JSON-RPC.  This adds a layer of 
complexity even to operations such as downloading an email body, which is 
retrieved inside a SOAP envelope.  In an indication that email providers see
value in enabling mashups, Yahoo announced this API at Yahoo
Hack Day "so programmers can develop extensions and new interfaces for 
Yahoo Mail".  
</p>
<p>Google's mail API is undocumented.  However, Google does have the GData
API, which extends Atom for access to many different types of 
user content other than email, and GData is similarly available for 
third-party developers.
</p>
<p>SquirrelMail is a Web mail UI that can work with a number of IMAP backends.
		This is interesting, and related, because it is a generic gateway
		from IMAP to an HTTP interface, albeit a human-readable one.  
		A machine-readable HTTP interface would be even more natural than IMAP as an interface
for a front-end like SquirrelMail.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Applicability</h3>

<p>The focus in this specification is on read-only access to the mailbox contents and
message contents stored in a mail store.  This specification does not cover sending  
email or handling email delivery status, managing spam or other filters on the
server, creating mailboxes, moving messages or even marking them as read.  These 
limitations clearly rule out many complex applications.  Still, there are many 
situations where this work may be applicable, and further work can build on this 
base.
</p>
<p>Associated clients and utilities: Users may install applications or utilities which are
not full-fledged email clients, but can benefit from access to mailbox listings and mail 
messages.  Some examples:

 	</p>
<ul class="text">
<li>A user might install a Challenge/Response spam-limiting system as a client tool, 
rather than use a server-hosted system.  The Challenge/Response utility 
can scan the Inbox periodically for mail from new senders.  It can use 
SMTP with the user's normal credentials to send the Challenge message, 
along with some Turing test such as an image to identify or 
describe. The same Inbox scans allow it to find responses from validating 
senders.  The main problem that this specification does not help with is how the 
Challenge/Response utility can then deal with the message that is now considered 
valid -- this specification does not explain how to use HTTP to change the message
flags or move it to another mailbox.  
</li>
<li>A calendar client might poll the Inbox for messages containing calendar contents
or calendar attachments, and automatically add these as "tentative" meetings.
</li>
<li>A productivity client (e.g. Chandler) may scan special folders that 
the user sets up to contain emails describing tasks or task information.  
</li>
<li>A custom spam detection engine, tuned or trained by the user, may be able to poll the 
user's Inbox and delete spam before the user gets to it.  This can help in situations
when the user is required to use an otherwise-adequate mail client/server with an 
insufficiently accurate spam filter.  While there are many spam solutions within the
traditional email framework, we (as protocol designers) have no reason to artificially
limit the means by which users attempt to manage spam in their own mailboxes.
</li>
</ul>

<p>The next category is third-party server applications and server 'mashups', where the 
user's existing email store and its functionality is augmented by a separate service.
The major differentiator within this category is whether the augmenting service is setup
and trusted by email administrators or not.

		</p>
<ul class="text">
<li>There already exist mail to Twitter gateways.  These could be easier to use
with (authorized) access to the user's own email account. This kind of service
is currently adopted by individual users, without assistance from email 
administrators. 
</li>
<li>Third-party applications to archive email, and apply email retention policies, 
are sometimes offered by different vendors than the email server itself.  This is
an example of a service setup and trusted by the email administrator.
</li>
</ul>

<p>The final category is new services: places where mail standards have not yet penetrated. 

 		</p>
<ul class="text">
<li>We see silos of personal messages in social interaction sites, career networking
   sites, volunteer coordination sites and even knitting sites. Perhaps some of these
   sites can offer a standard API as long as it's simple enough and under sufficient
   server control to be low-cost and low-risk for the site management. The good news is
   that the functionality required by such sites can be very small: list email, read
   email, and delete (which may or may not be implemented moving to trash.) Marking
   messages as 'read' may also be a requirement, and sending new messages may involve a
   POST to a well-known mailbox.  The benefit to users of even partial support by these
sites may simply mean that with a local client able to poll and access site messages, 
the user would be better able to keep abreast of conversations and maintain 
participation.
</li>
<li>Mailing list postings are delivered via SMTP, but the access to the 
public mailing list archive is as-yet unstandardized.  Most mailing list
software comes with HTTP access to archives, but these vary widely and 
don't allow easy "mashup" access.  A machine-readable HTTP interface to 
public mailing list archives would allow users to catch up on mailing 
list history and choose between Web UIs, email-style client UIs and newsreader
style client UIs.
</li>
</ul>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Issues in this Specification</h3>

<p>Analysis of use cases for helper applications and mashups (anything other
than a full, rich mail reader) shows that marking messages as "read" may be the most 
common requirement so far unmet by this specification.  Using IMAP to mark a 
message as "read" would involve a number of operations: establishing the session
and logging in if that's not already done, selecting the correct folder, 
selecting the correct message (e.g. in a SEARCH command), and storing the 
correct "Seen" flag.
</p>
<p></p>
<blockquote class="text">
<p>Note: Other message flag operations involve the same steps, but do not seem to be as 
	commonly required in the use cases.  One might consider removing the "Seen" flag to 
	be necessary to undo user errors in marking as "read".
</p>
</blockquote>

<p>The next most common use case requirement is that of submitting messages.  
While SMTP is a reasonable simple approach for many use cases, it is not 
universally acceptable. For example, the social networking
sites that offer site-specific messaging and mailboxes may have significant trouble
operating a fully standards-compliant SMTP server in order to provide mail sending
to their site members. In 
RESTful HTTP email interfaces, message submission has been modeled as the action of putting
a message into an outbox, possibly a write-once "Sent" folder.  This operation
does not fit as nicely into HTTP's methods as one would like.
</p>
<p>The third most common unmet use case is marking a message as 
spam. 
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Message Downloads in HTTP</h3>

<p>The message/rfc822 content type is registered and discussed in <a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a> and 
			<a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a>, but the format itself is defined in <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a>.
		 	<a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a> registers the MIME types message/rfc822 and message/partial. 
</p>
<p>Servers supporting this specification MUST offer messages in the message/rfc822 
			format, and MUST use this format if it is mentioned in an Accept 
			header in a GET request for the message.  
Servers MUST also serve the message as a Atom Entry document that can be used in clients such as existing newsreaders that do 
not accept message/rfc822. The Atom Entry document is handy as a default link to the message, which can
be used to find other links like the message/rfc822 version.  
Servers MAY offer 
other formats which can be obtained through content negotiation 
(HTTP headers) or by offering alternate URLs in message
metadata.  
</p>
<p>In addition to returning the entire message/rfc822 document,
with headers as well as text body and other attachments,
servers MUST support direct GET access to attachments.  This is described further in the section on 
entries in mailbox feed documents. 
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Example Message Download</h3>

<p>The request specifies that the user agent prefers message/rfc822.
</p>
<p>Request
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /progrium/msgs/48DA4852.8080707@example.net HTTP/1.1
User-Agent: curl/7.16.3 (powerpc-apple-darwin9.0) libcurl/7.16.3
Accept: message/rfc822
Host: example.com
Accept: */*</pre></div>
<p>Response
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Date: Thu, 09 Oct 2008 23:50:25 GMT
Server: Apache-Coyote/1.1
Accept-Ranges: bytes
Last-Modified: Thu, 09 Oct 2008 23:48:49 GMT
ETag: "3095486-3331683"
Cache-Control: private
Content-Type: message/rfc822
Content-Length: 592
Connection: close

Received: from mail.example.com ([64.170.98.32])
Message-ID: &lt;48DA4852.8080707@example.net&gt;
Date: Wed, 24 Sep 2008 10:01:54 -0400
From: Participant &lt;participant@example.net&gt;
MIME-Version: 1.0
To: ietf@example.com
Subject: Re: Call for review of proposed IESG Statement on Examples
References: &lt;48D584879F297C944CE2D568@JCK-ACR.example.com&gt;
In-Reply-To: &lt;002C61D09CE7B135B04EFCA@p3.example.com&gt;
List-Id: IETF-Discussion &lt;ietf.example.com&gt;
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"

+1

</pre></div>
<p>The same request without specifying message/822 format, results in an Atom entry instead.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;entry&gt;
  &lt;title&gt;Re: Last Call for proposed IESG Statement on Examples&lt;/title&gt;
  &lt;id&gt;48DA4852.8080707@example.net&lt;/id&gt;
  &lt;updated&gt;2008-08-24T10:01:54-04:00&lt;/updated&gt;
  &lt;link type="application/atom+xml" rel="self"
    href="http://progrium/msgs/48DA4852.8080707@example.net/atom"/&gt;
  &lt;link type="application/atom+xml" rel="related"
    href="http://progrium/msgs/002C61D09CE7B135B04EFCA@p3.example.com"/&gt;
  &lt;link type="message/rfc822" rel="alternate"
    href="http://progrium/msgs/48DA4852.8080707@example.net/rfc822"/&gt;
  &lt;summary&gt;

    +1
  &lt;/summary&gt;
  &lt;content&gt;

    +1
  &lt;/content&gt;
&lt;/entry&gt;
</pre></div>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Message listings as Atom feeds</h3>

<p>A list of messages, which may be the contents of a mailbox, is represented as an 
			Atom document with the 'feed' root element. 
			Within 'feed', there are separate 'entry' elements for each mail.  In addition,
			a number of elements directly inside 'feed' describe the feed itself, 
			in this context the mailbox or list of messages.  
</p>
<p>In Atom, the server can choose how many entries to put in a feed document.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Complete Example</h3>

<p>With this basic structure explained, here is an example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;feed xml:lang="en-US" xmlns="http://www.w3.org/2005/Atom"&gt;
  &lt;title&gt;INBOX&lt;/title&gt;
  &lt;id&gt;123456789321&lt;/id&gt;
  &lt;link type="application/atom+xml" rel="self"
	  href="http://example.com/progrium/INBOX.atom"/&gt;
  &lt;entry&gt;
    &lt;title&gt;Short notes to help you set up your presentation&lt;/title&gt;
    &lt;id&gt;000e0cd47d9@example.org&lt;/id&gt;
    &lt;published&gt;2008-10-18T05:08:13-07:00&lt;/published&gt;
    &lt;link type="message/rfc822" rel="self"
href="http://example.com/progrium/msgs/000e0cd47d9@example.org/rfc822"/&gt;
    &lt;link type="text/plain" rel="alternate"
href="http://example.com/progrium/msgs/000e0cd47d9@example.org/txt"/&gt;
    &lt;link type="text/html" rel="alternate"
href="http://example.com/progrium/msgs/000e0cd47d9@example.org/html"/&gt;
    &lt;summary&gt;Dear Jim,
        Here a few short notes, based on our experiences so far,
        to help you set up you ...&lt;/summary&gt;
    &lt;content type="text"&gt;Dear Jim,

        Here a few short notes, based on our experiences so far,
        to help you set up your presentation:

        * Please do not move, resize, close, or open pods in the
        rooms. The rooms have been setup for the conference.

        * If you haven't had a chance to, please watch the speaker
        orientation video, it will answer a number of common questions.
    &lt;/content&gt;
    &lt;author&gt;
        &lt;name&gt;alvin@example.org&lt;/email&gt;
        &lt;email&gt;alvin@example.org&lt;/email&gt;
    &lt;/author&gt;
  &lt;/entry&gt;
  &lt;entry&gt;
    &lt;title&gt;Re: Intro: Web Hooks&lt;/title&gt;
    &lt;id&gt;4304feb30810181219s322f27bcs570b8c80826a7da1@example.com&lt;/id&gt;
    &lt;published&gt;2008-10-18T12:19:45-07:00&lt;/published&gt;
    &lt;link type="message/rfc822" rel="self"
href="http://example.com/progrium/msgs/4304feb3081@example.com/rfc822"/&gt;
    &lt;link type="text/plain" rel="alternate"
href="http://example.com/progrium/msgs/4304feb3081@example.com/txt"/&gt;
    &lt;link type="text/html" rel="alternate"
href="http://example.com/progrium/msgs/4304feb3081@example.com/html"/&gt;
    &lt;summary&gt;Joe,
        Let's setup a time to talk about the role. we don't have many
        slides believe it or ...&lt;/summary&gt;
    &lt;content type="text"&gt;Joe,
        Let's setup a time to talk about the role. we don't have many
        slides believe it or not :-).

        Red
    &lt;/content&gt;
    &lt;author&gt;
        &lt;name&gt;Red Herring&lt;/name&gt;
        &lt;email&gt;red@example.com&lt;/email&gt;
    &lt;/author&gt;
  &lt;/entry&gt;
&lt;/feed&gt;
</pre></div>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Elements describing the feed</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
'title' element</h3>

<p>If the listing of messages maps directly to the contents
			of a single mailbox, the feed 
			title MUST be the mailbox name.  In IMAP this is
			limited to UTF7 and will always be a valid Atom title.  
</p>
<p>Example: "FORK"
</p>
<p>If the listing of messages is from a search or filter, 
			the feed title should contain a descriptive name. 
</p>
<p>Example: "Mail filtered by Sender containing 'leslie'"
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
'id' element</h3>

<p>Required by Atom to be permanent and universally unique.  Since
			IMAP allows users to RENAME mailboxes, it would be best if the id
						were based off something more permanent than the mailbox name. 
						In gateway use cases where the gateway can't tell the difference
						between a renamed mailbox and a new mailbox, the gateway MUST 
						treat the mailbox as new. Effectively this creates a new feed 
						(or more than one if the mailbox has inferior hierarchical names)
						and one or more old feeds are coincidentally removed.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
'author' element</h3>

<p>When the listing of messages is from a personal mailbox, 
									the 'author' element SHOULD identify the owner of the mailbox.  
									This helps distinguish from public mail archives.
									When the mailbox does have an owner or account represented in an 
									'author' element, the 'email' element MUST contain
									the full email address.  In some cases, the name will contain
									the email address again (it is used for display), but it MUST be present.
</p>
<p>Example author element:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;author&gt;
    &lt;name&gt;Jeffrey Lebowski&lt;/name&gt;
    &lt;email&gt;dude@example.com&lt;/email&gt;
  &lt;/author&gt;
</pre></div>
<p>Example for mailbox of messages sent to support@example.com:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;author&gt;
    &lt;name&gt;support@example.com&lt;/name&gt;
    &lt;email&gt;support@example.com&lt;/email&gt;
  &lt;/author&gt;
</pre></div>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.4"></a><h3>3.2.4.&nbsp;
'link' elements</h3>

<p>The feed itself contains several 'link' elements, with different 'rel' attribute values.
</p>
<p></p>
<ul class="text">
<li>rel=self: The URL to this feed.
</li>
<li>rel=alternate: MAY provide an IMAP mailbox URL if this feed represents
					 a mailbox listing..  Other URLs and 
					multiple values are also appropriate.
</li>
<li>rel=service:  The URL to the document that describes server features
					and other mailboxes (see <a class='info' href='#navigation'>Section&nbsp;4<span> (</span><span class='info'>Navigating mailboxes</span><span>)</span></a>).
</li>
</ul><p>
			
</p>
<p>The following link relations are from Feed paging <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a>, see <a class='info' href='#history'>Section&nbsp;3.4<span> (</span><span class='info'>Feed History</span><span>)</span></a>:
				</p>
<ul class="text">
<li>rel=current: The URL to the most recent entries in this feed
</li>
<li>rel=next: the URL to the next section of entries in this feed
</li>
<li>rel=prev: the URL to the previous section of entries in this feed
</li>
</ul><p>
			
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Elements describing an entry/message</h3>

<p>Within the feed, a number of 'entry' elements each contain
			further elements.  The minimal legal Atom entry
			consists of a 'title', a 'link', 'id', 'updated' and 'summary'.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
'id' element</h3>

<p>This MUST contain the core of the message-id used in IMAP and
 			SMTP, and generated by the originator of the message.  The 
			'message-id' syntax in <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> has surrounding whitespace and angle-brackets,
			which MUST be omitted.
</p>
<p>Example:&nbsp;&lt;id&gt;d691a2530810071141y757@mail.example.net&lt;/id&gt;
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
'title element</h3>

<p>This MUST contain the subject of the message.  It MUST be empty
				if the subject of the message is empty.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.3"></a><h3>3.3.3.&nbsp;
'updated' element</h3>

<p>For email received and unchanged, this contains the date received.  Otherwise,
				it should represent the last time the item was changed.  Given 
				that some email systems allow users to modify received messages,
				the inside of the message needs to be examined to get an accurate
				date received.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.4"></a><h3>3.3.4.&nbsp;
'published' element</h3>

<p>Contains the sent date.
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.5"></a><h3>3.3.5.&nbsp;
'summary' element</h3>

<p>This SHOULD be present and contain a piece of the body of the message.  100 
			characters or less is RECOMMENDED.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.6"></a><h3>3.3.6.&nbsp;
'link' elements</h3>

<p>The link elements provide both a link to a machine-readable 
						version of the complete email, to support rich and
						smart applications, and a human-readable version, so that this
						interface can be reasonably browsed in extant
						newsreader software.  Newsreaders display the rel=alternate
						link as the main link to the entry itself.  Attachments
						and other messages related by threading should also be 
						represented with link elements.  
			
</p>
<p></p>
<blockquote class="text"><dl>
<dt>self</dt>
<dd>The 'self' link is used for the link to the message in its default human-readable format.
</dd>
<dt>alternate</dt>
<dd>At least one 'alternate' link provides access to the message/rfc822 format.  Other
					formats can be provided in additional 'alternate' links.
</dd>
<dt>enclosure</dt>
<dd>Attachments are linked as enclosures.
</dd>
<dt>related</dt>
<dd>Maps directly to messages in the "References" header.
</dd>
<dt>in-reply-to</dt>
<dd>Maps directly to messages in the "In-Reply-To" header.  Defined in <a class='info' href='#RFC4685'>[RFC4685]<span> (</span><span class='info'>Snell, J., &ldquo;Atom Threading Extensions,&rdquo; September&nbsp;2006.</span><span>)</span></a>
</dd>
</dl></blockquote><p>
			
</p>
<p>The 'related' and 'in-reply-to' messages might be available on the same server store, 
				but they might not be.  If the replied-to message is available in the same store, 
				the URL MUST be an HTTP URL to the message entry (which gives links to the message/rfc822 
				format and other metadata). Otherwise, the 
			URL MAY be a 'mid' URL, see <a class='info' href='#RFC2392'>[RFC2392]<span> (</span><span class='info'>Levinson, E., &ldquo;Content-ID and Message-ID Uniform Resource Locators,&rdquo; August&nbsp;1998.</span><span>)</span></a>.
</p>
<p>Example
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;link rel="self" type="text/html"
  href="http://example.com/d691a25308@mail.example.net/html"/&gt;
&lt;link rel="alternate" type="message/822"
  href="http://example.com/d691a25308@mail.example.net/rfc822"/&gt;
&lt;link rel="related"
  href="mid:48D584879F297C944CE2D568@JCK-ACR.example.com"/&gt;
&lt;link rel="in-reply-to"
  href="http://example.com/002C61D09CE7B135B04EFCA@p3.example.com/&gt;

</pre></div>
<a name="history"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Feed History</h3>

<p>Servers MUST support Feed History <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a> Paged Feeds (Section 3.).  This gives servers the control
over how many messages to send to clients in one feed document.   Clients make
further requests if more of the feed history is desired, though in many use cases,
only the most recent feed page is needed.  
</p>
<p>Paged Feeds do not quite allow for synchronization or ensuring that all mails have been seen.  
	Archived feeds would, but are inappropriate for mailboxes
	because messages are frequently removed from mailboxes (and even if tombstones were used, an inbox
	might quickly fill up with thousands of tombstones and only a few undeleted messages). 
	A TODO for this draft is to consider whether a simple 
	extension to paged feeds could provide the message-ID for the last message on the previous page,
	and the first message on the next page.  By matching these up, clients could see that all messages
	had been seen.  
</p>
<p>Clients can usefully display a screenful of entries at a time.  This varies highly
depending on the display size, screen resolution and even font size chosen.  Twenty
is an absolute minimum number, whereas a forty to fifty entry display is a 
more common capacity.  Servers are RECOMMENDED to put at least fifty entries in
a page, unless fewer than fifty entries are available. Servers are RECOMMENDED
to apply paging if there are more than a hundred entries in a full logical feed.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Attachments</h3>

<p>Links directly to the attachments on the message
MUST be shown in the entry as 'link' elements with rel=enclosure.
</p>
<a name="navigation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Navigating mailboxes</h3>

<p>Clients need to be able to find out which mailboxes exist.  The 
		server creates a feed of feeds, a document that lists all mailboxes
		in a flattened namespace, along with other related feeds.  For example, a feed for
		all unread messages might behave as a "saved search", accessible to
		even very simple clients because it acts like a mailbox feed.
</p>
<p>This kind of feed, listing both mailboxes and other feeds, is not 
		suited to clients making changes, reorganizing email or authoring email.
		The Atom Service document format <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a> is more suited to that purpose, because
		along with listing workspaces and collections, it indicates what 
		kinds of resources may be created in those workspaces and collections. 
		However, this approach is simpler and does not preclude more careful
		design of a mapping to Atom Service documents in the future.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Example feed document listing mailboxes</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;feed xmlns="http://www.w3.org/2005/Atom"&gt;
  &lt;title&gt;progrium@example.com&lt;/title&gt;
  &lt;link href="http://example.com/progrium/"/&gt;
  &lt;updated&gt;2008-10-18T05:08:13-07:00&lt;/updated&gt;
  &lt;author&gt;
    &lt;name&gt;John Doe&lt;/name&gt;
    &lt;email&gt;progrium@example.com&lt;/email&gt;
  &lt;/author&gt;
  &lt;id&gt;urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af7&lt;/id&gt;

  &lt;entry&gt;
    &lt;title&gt;INBOX&lt;/title&gt;
    &lt;link href="http://example.com/progrium/INBOX.atom"/&gt;
    &lt;id&gt;123456789321&lt;/id&gt;
    &lt;updated&gt;2008-10-18T05:08:13-07:00&lt;/updated&gt;
  &lt;/entry&gt;
  &lt;entry&gt;
    &lt;title&gt;personal&lt;/title&gt;
    &lt;link href="http://example.com/progrium/personal.atom"/&gt;
    &lt;id&gt;123456789323&lt;/id&gt;
    &lt;updated&gt;2008-10-08T04:17:02-07:00&lt;/updated&gt;
  &lt;/entry&gt;
  &lt;entry&gt;
    &lt;title&gt;All unread mail&lt;/title&gt;
    &lt;link href="http://example.com/progrium/unread/"/&gt;
    &lt;id&gt;123456789322&lt;/id&gt;
    &lt;updated&gt;2008-10-18T05:08:13-07:00
  &lt;/entry&gt;

&lt;/feed&gt;
</pre></div>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgements</h3>

<p>Jeff Lindsay helped with initial modeling, early review and a very early prototype
		IMAP-HTTPMail proxy.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>No IANA Considerations arise in this document.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>	The biggest concern in offering HTTP access to mail stores is probably dealing with
		authentication differences between HTTP and IMAP/POP.  HTTP authentication mechanisms
		are not as powerful as SASL.  Solving this problem is both an implementation and an 
		administrative concern.  Common practice demonstrates that this concern can be met
		in implementations and deployments, at least to the satisfaction of administrators and
		users.  For example, the same password is commonly supplied in an HTML login form, and
		sent to the server over TLS, that the user types into an IMAP client interface for use
		in a SASL authentication interaction.  Naturally this approach weakens the security of 
		that password, and habituates the user to typing it into Web interfaces.  This 
		specification does not worsen that common situation.
</p>
<p>Privacy concerns dictate use of TLS in most cases.  Clients MUST support TLS,
			so that servers are free to secure private email in the confidence that 
			this will interoperate.
		
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2026">[RFC2026]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>,&rdquo; BCP&nbsp;9, RFC&nbsp;2026, October&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2026.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2045">[RFC2045]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>,&rdquo; RFC&nbsp;2045, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2045.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2109">[RFC2109]</a></td>
<td class="author-text"><a href="mailto:dmk@bell-labs.com">Kristol, D.</a> and <a href="mailto:montulli@netscape.com">L. Montulli</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2109">HTTP State Management Mechanism</a>,&rdquo; RFC&nbsp;2109, February&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2109.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2109.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2109.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2392">[RFC2392]</a></td>
<td class="author-text"><a href="mailto:XIson@cnj.digex.net">Levinson, E.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2392">Content-ID and Message-ID Uniform Resource Locators</a>,&rdquo; RFC&nbsp;2392, August&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2392.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2392.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2392.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4287">[RFC4287]</a></td>
<td class="author-text"><a href="mailto:mnot@pobox.com">Nottingham, M., Ed.</a> and <a href="mailto:rfsayre@boswijck.com">R. Sayre, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4287">The Atom Syndication Format</a>,&rdquo; RFC&nbsp;4287, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4287.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4287.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4287.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4346">[RFC4346]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc4346">The Transport Layer Security (TLS) Protocol Version 1.1</a>,&rdquo; RFC&nbsp;4346, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4346.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4685">[RFC4685]</a></td>
<td class="author-text">Snell, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4685">Atom Threading Extensions</a>,&rdquo; RFC&nbsp;4685, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4685.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5005">[RFC5005]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://tools.ietf.org/html/rfc5005">Feed Paging and Archiving</a>,&rdquo; RFC&nbsp;5005, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5005.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5023">[RFC5023]</a></td>
<td class="author-text">Gregorio, J. and B. de hOra, &ldquo;<a href="http://tools.ietf.org/html/rfc5023">The Atom Publishing Protocol</a>,&rdquo; RFC&nbsp;5023, October&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5023.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5322">[RFC5322]</a></td>
<td class="author-text"><a href="mailto:presnick@qualcomm.com">Resnick, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc5322">Internet Message Format</a>,&rdquo; RFC&nbsp;5322, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5322.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc5322.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc5322.xml">XML</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lisa Dusseault</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CommerceNet</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">169 University Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Palo Alto, CA  94301</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">1-650-279-7365</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ldusseault@commerce.net">ldusseault@commerce.net</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
