<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Multiplexing Multiple Media Types In a Single Real-Time Transport Protocol (RTP) Session </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Transmitting multiple types of media in a single RTP session">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Optimizations">
<link href="#rfc.section.4" rel="Chapter" title="4 Backward compatibility">
<link href="#rfc.section.5" rel="Chapter" title="5 Signaling">
<link href="#rfc.section.6" rel="Chapter" title="6 Protocols with SSRC semantics">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document describes mechanisms and recommended practice for transmitting media streams of multiple media types (e.g., audio and video) over a single Real-Time Transport Protocol (RTP) session, primarily for the use of Real-Time Communication for the Web (rtcweb).  " />
  <meta name="description" content="This document describes mechanisms and recommended practice for transmitting media streams of multiple media types (e.g., audio and video) over a single Real-Time Transport Protocol (RTP) session, primarily for the use of Real-Time Communication for the Web (rtcweb).  " />
  <meta name="keywords" content="I-D, Internet-Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">RTCWEB</td>
<td class="right">J. Lennox</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Vidyo</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">J. Rosenberg</td>
</tr>
<tr>
<td class="left">Expires: April 27, 2012</td>
<td class="right">Skype</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 25, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Multiplexing Multiple Media Types In a Single Real-Time Transport Protocol (RTP) Session <br />
  <span class="filename">draft-lennox-rtcweb-rtp-media-type-mux-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes mechanisms and recommended practice for transmitting media streams of multiple media types (e.g., audio and video) over a single Real-Time Transport Protocol (RTP) session, primarily for the use of Real-Time Communication for the Web (rtcweb).  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 27, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Transmitting multiple types of media in a single RTP session</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Optimizations</a>
</li>
<li>4.   <a href="#rfc.section.4">Backward compatibility</a>
</li>
<li>5.   <a href="#rfc.section.5">Signaling</a>
</li>
<li>6.   <a href="#rfc.section.6">Protocols with SSRC semantics</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Classically, multimedia sessions using the <a href="#RFC3550">Real-Time Transport Protocol (RTP)</a> <cite title="NONE">[RFC3550]</cite> have transported different media types (most commonly, audio and video) in different RTP sessions, each with in own transport flow.  At the time RTP was designed, this was a reasonable design decision, reducing system variability and adding flexibility (<a href="#RFC3550">[RFC3550]</a> discusses the motivation for this design decision in section 5.2).</p>
<p id="rfc.section.1.p.2">However, the de facto architecture of the Internet has changed substantially since RTP was originally designed, nearly twenty years ago.  In particular, Network Address Translators (NATs) and firewalls are now ubiquitous, and IPv4 address space scarcity is becoming more severe.  As a consequence, the network resources used up by an application, and its probability of failure, are directly proportional to the number of distinct transport flows it uses.</p>
<p id="rfc.section.1.p.3">Furthermore, applications have developed mechanisms (notably <a href="#RFC5245">Interactive Connectivity Establishment (ICE)</a> <cite title="NONE">[RFC5245]</cite>) to traverse NATs and firewalls.  The time such mechanisms need to perform the traversal process is proportional to the number of distinct transport flows in use.</p>
<p id="rfc.section.1.p.4">As a result, in the modern Internet, it is advisable and useful to revisit the transport-layer separation of media in a multimedia session.  Fortunately, the architecture of RTP allows this to be done in a straightforward and natural way: by placing multiple sources of different media types in the same RTP session.</p>
<p id="rfc.section.1.p.5">Since this is architecturally somewhat different from existing RTP deployments, however, this decision has some consequences that may be non-obvious.  Furthermore, it is somewhat complex to negotiate such flows in signaling protocols that assumed the older architecture, most notably <a href="#RFC4566">the Session Description Protocol (SDP)</a> <cite title="NONE">[RFC4566]</cite>.  The rest of this document discusses these issues.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite> and indicate requirement levels for compliant implementations.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Transmitting multiple types of media in a single RTP session</h1>
<p><a href="#RFC3550">RTP</a> <cite title="NONE">[RFC3550]</cite> supports the notion of multiple sources within a session. Historically, this was typically used for distinct users within a group to send media of the same type. Each source has its own synchronization source (SSRC) value and has a distinct sequence number and timestamp space. This document specifies that this same mechanism is used to allow sources of multiple media types in the same RTP session, even if they come from the same user. For example, in a call containing audio and video between two users, each sending a single audio and a single video source, there would be a single RTP session containing two sources (one audio, one video) from each user, for a total of four sources (and thus four SSRC values) within the RTP session.</p>
<p id="rfc.section.3.p.2">Transmitting multiple types of media in a single <a href="#RFC3550">RTP</a> <cite title="NONE">[RFC3550]</cite> session is done using the same RTP mechanisms as are used to transmit multiple sources of the same media type on a session.  Notably: </p>

<ul>
<li>Each stream (of every media type) is a distinct source (distinct stream of consecutive packets to be sent to a decoder) and is given a distinct synchronization source ID (SSRC), and has its own distinct timestamp and sequence number space.</li>
<li>Every media type (full media type and subtype, e.g. video/h264 or audio/pcmu) has a distinct payload type value.  The same payload type value mappings apply across all sources in the session.</li>
<li>RTP SSRCs, initial sequence numbers, and initial timestamps are chosen at random, independently for each source (of each media type).</li>
<li>RTCP bandwidth is five percent of the total RTP session bandwidth.</li>
<li>RTP session bandwidth and RTCP bandwidth are divided among all the sources in the session.</li>
<li>RTCP sender report (SR) or receiver report (RR) packets, and source description (SDES) packets, are sent periodically for every source in the session.</li>
</ul>

<p> </p>
<p id="rfc.section.3.p.3">In other words, no special RTP mechanisms are specifically needed for senders of multiplexed media.  The only constraint is that senders sources MUST NOT change the top-level media type (e.g. audio or video) of a given source.  (It remains valid to change a source's subtype, e.g. switching between audio/pcmu and audio/g729.)</p>
<p id="rfc.section.3.p.4">For a receiver, the primary complexity of multiplexing is knowing how to process a received source.  Without multiplexing, all sources in an RTP session can (in theory) be processed the same manner; e.g., all audio sources can be fed to an audio mixer, and all video sources displayed on a screen.  With multiplexing, however, receivers must apply additional knowledge.</p>
<p id="rfc.section.3.p.5">If the streams being multiplexed are simply audio and video, this processing can decision can be made based simply on a source's payload type.  For more complex situations (for example, simultaneous live-video and shared-application sources, both sent as video), signaling-level descriptions of sources would be needed, using a mechanism such as <a href="#RFC5576">SDP Source Descriptions</a> <cite title="NONE">[RFC5576]</cite>.</p>
<p id="rfc.section.3.p.6">Additionally, due to the large difference in typical bitrate between different media (video can easily use a bit rate an order of magnitude or more larger than audio), some complications arise with RTCP timing.  Because RTCP bandwidth is shared evenly among all sources in a session, the RTCP for an audio source can end up being sent significantly more frequently than it would in a non-multiplexed session.  (The RTCP for video will, correspondingly, be sent slightly less frequently; this is not nearly as serious an issue.)</p>
<p id="rfc.section.3.p.7">For RTP sessions that use RTP's recommended minimum fixed timing interval of 5 seconds, this problem is not likely to arise, as most sessions' bandwidth is not so low that RTCP timing exceeds this limit.  The <a href="#RFC3551">RTP/AVP</a> <cite title="NONE">[RFC3551]</cite> or <a href="#RFC3711">RTP/SAVP</a> <cite title="NONE">[RFC3711]</cite> profiles use this minimum interval by default, and do not have a mechanism in SDP to negotiate an alternate interval.</p>
<p id="rfc.section.3.p.8">For sessions using the <a href="#RFC4585">RTP/AVPF</a> <cite title="NONE">[RFC4585]</cite> and <a href="#RFC5124">RTP/SAVPF</a> <cite title="NONE">[RFC5124]</cite> profiles, however, endpoints SHOULD set the minimum RTCP regular reporting interval trr-int to 5000 (5 seconds), unless they explicitly need it to be lower.  This minimizes the excessive RTCP bandwidth consumption, as well as aiding compatibility with AVP endpoints.  Since this value only affects regular RTCP reports, not RTCP feedback, this does not prevent AVPF feedback messages from being sent as needed.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Optimizations</h1>
<p id="rfc.section.3.1.p.1">For multiple sources in the same session, several optimizations are possible.  (Most of these optimizations also apply to multiple sources of the same type in a session.)  In all cases, endpoints MUST be prepared for their peers to be using these optimizations.</p>
<p id="rfc.section.3.1.p.2">An endpoint sending multiple sources MAY, as needed, reallocate media bandwidth among the RTP sources it is sending.  This includes adding or removing sources as more or less bandwidth becomes available.</p>
<p id="rfc.section.3.1.p.3">An endpoint MAY choose to send multiple sources' RTCP messages in a single compound RTCP packet (though such compound packets SHOULD NOT exceed the path MTU, if avoidable and if it is known).  This will reduce the average compound RTCP packet size, and thus increase the frequency with which RTCP messages can be sent.  Regular (non-feedback) RTCP compound packets MUST still begin with an SR or RR packet, but otherwise may contain RTCP packets in any order.  Receivers MUST be prepared to receive such compound packets.</p>
<p id="rfc.section.3.1.p.4">An endpoint SHOULD NOT send reception reports from one of its own sources about another one ("cross-reports").  Such reports are useless (they would always indicate zero loss and jitter) and use up bandwidth that coud more profitably be used to send information about remote sources.  Endpoints receiving reception reports MUST be prepared that their peers might not be sending reception reports about their own sources.  (A naive RTCP monitor might think that there is a network disconnection between these sources; however, architecturally it is very unclear if such monitors actually exist, or would care about a disconnection of this sort.)</p>
<p id="rfc.section.3.1.p.5">Similarly, an endpoint sending multiple sources SHOULD NOT send reception reports about a remote source from more than one of its local sources.  Instead, it SHOULD pick one of its local sources as the "reporting" source for each remote source, which sends full report blocks; all its other sources SHOULD be treated as if they were disconnected, and never saw that remote source.  An endpoint MAY choose different local sources as the reporting source for different remote sources (for example, it could choose to send reports about remote audio sources from its local audio source, and reports about remote video sources from its local video source), or it MAY choose a single local source for all its reports.  If the reporting source leaves the session (sends BYE), another reporting source MUST be chosen.  This "reporting" source SHOULD also be the source for any AVPF feedback messages about its remote sources, as well.  Endpoints interpreting reception reports MUST be prepared to receive RTCP SR or RR messages where only one remote source is reporting about its sources.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Backward compatibility</h1>
<p id="rfc.section.4.p.1">In some circumstances, the offerer in <a href="#RFC3264">an offer/answer exchange</a> <cite title="NONE">[RFC3264]</cite> will not know whether the peer which will receive its offer supports media type multiplexing.</p>
<p id="rfc.section.4.p.2">In scenarios where endpoints can rely on their peers supporting <a href="#RFC5245">Interactive Connectivity Establishment (ICE)</a> <cite title="NONE">[RFC5245]</cite>, even if they might not support multiplexing, this should not be a problem.  An endpoint could construct a list of ICE candidates for its single session, and then offer that list, for backward compatibility, toward each of the peers; it would disambiguate the flows based on the ufrag fields in the received ICE connectivity checks.  (This would result in the chosen ICE candidates participating in multiple RTP sessions, in much the same manner as following a forked SIP offer.)  For RTCWeb, it is currently anticipated that ICE will be required in all cases, for consent verification.</p>
<p id="rfc.section.4.p.3">The more difficult case is if an offerer cannot reply on its potential peers supporting any features beyond baseline RTP (i.e., neither ICE nor multiplexing).  In this case, it would either need to be prepared to use only a single media type (e.g., audio) with such a peer, or else will need to do the pre-offer steps to set up all the non-multiplexed sessions.  Notably, this would include opening local ports, and doing ICE address gathering (collecting candidate addresses from STUN and/or TURN servers) for each session, even if it is anticipated that in most cases backward compatibility is not going to be necessary.</p>
<p id="rfc.section.4.p.4">If the signaling protocol in use supports sending additional ICE candidates for an ongoing ICE exchange, or updating the destination of a non-ICE RTP session, it is instead possible for an offerer to do such gathering lazily, e.g. opening only local host candidates for the non-default RTP sessions, and gathering and offering additional candidates or public relay addresses once it becomes clear that they are needed.  (With SIP, sending updated candidates or RTP destinations prior to the call being answered is possible only if both peers support the <a href="#RFC3262">SIP 100rel feature</a> <cite title="NONE">[RFC3262]</cite>, i.e. PRACK and UPDATE; otherwise, the initial offer cannot be updated until after the 200 OK response to the initial INVITE.)</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Signaling</h1>
<p id="rfc.section.5.p.1">There is a need to signal multiplexed media in the <a href="#RFC4566">Session Description Protocol (SDP)</a> <cite title="NONE">[RFC4566]</cite> -- for inter-domain federation in the case of RTCWeb, as well as for "pure" SIP endpoints that also want to use media-multiplexed sessions.</p>
<p id="rfc.section.5.p.2">To signal multiplexed sessions, two approaches seem to present themselves: either using the <a href="#RFC5888">SDP grouping framework</a> <cite title="NONE">[RFC5888]</cite>, as in <a href="#I-D.holmberg-mmusic-sdp-bundle-negotiation">[I-D.holmberg-mmusic-sdp-bundle-negotiation]</a>, or directly representing the multiplexed sessions in SDP.</p>
<p id="rfc.section.5.p.3">Directly encoded multiplexed sessions would have some grammar issues in SDP, as the syntax of SDP mixes together top-level media types and transport information in the m= line, splitting media types to be partially described in the m= line and partially in the a=rtpmap attribute.  New SDP attributes would need to be invented to describe the top-level media types for each source.</p>
<div id="#rfc.figure.1"></div>
<div id="#mux_mline_example"></div>
<pre>
m=multiplex 49170 RTP/AVP 96 97
a=mediamap:96 video
a=rtpmap:96 H264/90000
a=mediamap:97 audio
a=rtpmap:97 pcmu/8000
</pre>
<p id="rfc.section.5.p.4">If single-pass backward compatibility is (ever) a goal, directly encoding multiplexed sessions in SDP m= lines becomes much more complex, as it would require <a href="#RFC5939">SDP Capability Negotiation</a> <cite title="NONE">[RFC5939]</cite> in order to offer both the legacy and the multiplexed streams.</p>
<p id="rfc.section.5.p.5">Using SDP grouping seems to rule out the possibility of non-backward-compatible multiplexed streams.  Other than that, however, it seems that it would be the easier path to signal multiplexed sessions.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Protocols with SSRC semantics</h1>
<p id="rfc.section.6.p.1">There are some RTP protocols that impose semantics on SSRC values.  Most notably, there are several protocols (for instance, <a href="#RFC5109">FEC</a> <cite title="NONE">[RFC5109]</cite>, <a href="#RFC5583">layered codecs</a> <cite title="NONE">[RFC5583]</cite>, or <a href="#RFC4588">RTP retransmission</a> <cite title="NONE">[RFC4588]</cite>) have modes that require that sources in multiple RTP sessions have the same SSRC value.</p>
<p id="rfc.section.6.p.2">When multiplexing, this is impossible.  Fortunately, in each case, there are alternative ways to do this, by <a href="#RFC5576">explicitly signaling RTP SSRC values</a> <cite title="NONE">[RFC5576]</cite>.  Thus, when multiplexing, these modes need to be used instead.</p>
<p id="rfc.section.6.p.3">It is unclear how to signal this in a backward-compatible way (falling back to session-multiplexed modes) if SDP grouping semantics are used to described multiplexed sources in SDP.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">The security considerations of a muxed stream appear to be similar to those of multiple sources of the same media type in an RTP session.</p>
<p id="rfc.section.7.p.2">Notably, it is crucial that SSRC values are never used more than once with the same SRTP keys.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">The IANA actions required depend on the decision about how muxed streams are signaled.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4585">[RFC4585]</b></td>
<td class="top">
<a>Ott, J.</a>, <a>Wenger, S.</a>, <a>Sato, N.</a>, <a>Burmeister, C.</a> and <a>J. Rey</a>, "<a href="http://tools.ietf.org/html/rfc4585">Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF)</a>", RFC 4585, July 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5245">[RFC5245]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3264">[RFC3264]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3551">[RFC3551]</b></td>
<td class="top">
<a>Schulzrinne, H.</a> and <a>S. Casner</a>, "<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>", STD 65, RFC 3551, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3711">[RFC3711]</b></td>
<td class="top">
<a>Baugher, M.</a>, <a>McGrew, D.</a>, <a>Naslund, M.</a>, <a>Carrara, E.</a> and <a>K. Norrman</a>, "<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>", RFC 3711, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5124">[RFC5124]</b></td>
<td class="top">
<a>Ott, J.</a> and <a>E. Carrara</a>, "<a href="http://tools.ietf.org/html/rfc5124">Extended Secure RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/SAVPF)</a>", RFC 5124, February 2008.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.holmberg-mmusic-sdp-bundle-negotiation">[I-D.holmberg-mmusic-sdp-bundle-negotiation]</b></td>
<td class="top">
<a>Holmberg, C</a> and <a>H Alvestrand</a>, "<a href="http://tools.ietf.org/html/draft-holmberg-mmusic-sdp-bundle-negotiation-00">Multiplexing Negotiation Using Session Description Protocol (SDP) Port Numbers</a>", Internet-Draft draft-holmberg-mmusic-sdp-bundle-negotiation-00, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5576">[RFC5576]</b></td>
<td class="top">
<a>Lennox, J.</a>, <a>Ott, J.</a> and <a>T. Schierl</a>, "<a href="http://tools.ietf.org/html/rfc5576">Source-Specific Media Attributes in the Session Description Protocol (SDP)</a>", RFC 5576, June 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5888">[RFC5888]</b></td>
<td class="top">
<a>Camarillo, G.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc5888">The Session Description Protocol (SDP) Grouping Framework</a>", RFC 5888, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5939">[RFC5939]</b></td>
<td class="top">
<a>Andreasen, F.</a>, "<a href="http://tools.ietf.org/html/rfc5939">Session Description Protocol (SDP) Capability Negotiation</a>", RFC 5939, September 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5109">[RFC5109]</b></td>
<td class="top">
<a>Li, A.</a>, "<a href="http://tools.ietf.org/html/rfc5109">RTP Payload Format for Generic Forward Error Correction</a>", RFC 5109, December 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5583">[RFC5583]</b></td>
<td class="top">
<a>Schierl, T.</a> and <a>S. Wenger</a>, "<a href="http://tools.ietf.org/html/rfc5583">Signaling Media Decoding Dependency in the Session Description Protocol (SDP)</a>", RFC 5583, July 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4588">[RFC4588]</b></td>
<td class="top">
<a>Rey, J.</a>, <a>Leon, D.</a>, <a>Miyazaki, A.</a>, <a>Varsa, V.</a> and <a>R. Hakenberg</a>, "<a href="http://tools.ietf.org/html/rfc4588">RTP Retransmission Payload Format</a>", RFC 4588, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3262">[RFC3262]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3262">Reliability of Provisional Responses in Session Initiation Protocol (SIP)</a>", RFC 3262, June 2002.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jonathan Lennox</span> 
	  <span class="n hidden">
		<span class="family-name">Lennox</span>
	  </span>
	</span>
	<span class="org vcardline">Vidyo, Inc.  </span>
	<span class="adr">
	  <span>433 Hackensack Avenue</span>
<span>Seventh Floor</span>

	  <span class="vcardline">
		<span class="locality">Hackensack</span>,  
		<span class="region">NJ</span> 
		<span class="code">07601</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jonathan@vidyo.com">jonathan@vidyo.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jonathan Rosenberg</span> 
	  <span class="n hidden">
		<span class="family-name">Rosenberg</span>
	  </span>
	</span>
	<span class="org vcardline">Skype</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jdrosen@skype.net">jdrosen@skype.net</a></span>

<span class="vcardline">URI: <a href="http://www.jdrosen.net">http://www.jdrosen.net</a></span>

  </address>
</div>

</body>
</html>