<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Router Advertisements for Routing between Moving Networks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Router Advertisements for Routing between Moving Networks">
<meta name="keywords" content="I-D, XML">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">AUTOCONF</td><td class="header">A. Petrescu</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">C. Janneteau</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">CEA</td></tr>
<tr><td class="header">Expires: January 6, 2011</td><td class="header">July 5, 2010</td></tr>
</table></td></tr></table>
<h1><br />Router Advertisements for Routing between Moving Networks<br />draft-petrescu-autoconf-ra-based-routing-00.txt</h1>

<h3>Abstract</h3>

<p>
	This draft specifies extensions to the ICMPv6 Router
	Advertisement messages and processing.  Traditionally,
	prefixes contained in RAs are used for on-link determination,
	on-link address auto-configuration, but not for path setup
	towards multi-hop destinations.  The extensions proposed here
	still rely on RAs being communicated on a single link (not
	across several IP hops), but upon RA reception the prefixes
	are installed in the routing table; they are thus used for
	forwarding packets further than a single link (multi IP hop).
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 6, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#protocol">3.</a>&nbsp;
Protocol<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">3.1.</a>&nbsp;
Topology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.2.</a>&nbsp;
Operation on a Mobile Router<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.3.</a>&nbsp;
Message Exchange<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.4.</a>&nbsp;
Message Formats<br />
<a href="#seccons">4.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
<a href="#Acknowledgements">6.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#changelog">Appendix&nbsp;A.</a>&nbsp;
ChangeLog<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	This draft specifies extensions to the ICMPv6 Router
	Advertisement messages and processing.  Traditionally,
	prefixes contained in RAs are used for on-link determination,
	on-link address auto-configuration, but not for path setup
	towards multi-hop destinations.  The extensions proposed here
	still rely on RAs being communicated on a single link (not
	across several IP hops), but upon RA reception the prefixes
	are installed in the routing table; they are thus used for
	forwarding packets further than a single link (multi IP hop).
      
</p>
<p>
	We present the message exchange diagrams, message formats and
	algorithm executed by a node.  The scenarios implying route
	addition are: simultaneous power-up of 3 Mobile Routers,
	arrival of a MR in a zone where other MRs are present; and
	scenarios for route deletion: timeout expiration of route
	entry, and explicit deletion of route entry.
      
</p>
<p>
	These RA extensions are intended for path establishment
	between LFNs in separate moving networks.  The Mobile Routers
	in charge of moving networks exchange their prefixes (with
	RAs), and set up their routing tables.
      
</p>
<p>
	The mechanism presented in this draft is an evolution of an
	earlier work <a class='info' href='#I-D.petrescu-manemo-nano'>[I&#8209;D.petrescu&#8209;manemo&#8209;nano]<span> (</span><span class='info'>Petrescu, A. and C. Janneteau, &ldquo;The NANO Draft (Scene Scenario for Mobile Routers and MNP in RA),&rdquo; March&nbsp;2007.</span><span>)</span></a>.  This
	document adds the behaviour for MR arrival at a zone where
	other MRs are present, and the behaviour for route deletion.
      
</p>
<p>
	A similar mechanism is presented in "Mobile Network Prefix
	Provisioning" <a class='info' href='#I-D.jhlee-mext-mnpp'>[I&#8209;D.jhlee&#8209;mext&#8209;mnpp]<span> (</span><span class='info'>Tsukada, M., Ernst, T., and J. Lee, &ldquo;Mobile Network Prefix Provisioning,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  The
	'MNPP' draft addresses a specific need of inter-connecting
	vehicular networks; it considers use cases with or without
	fixed Access Point (infrastructure-based and
	infrastructure-less scenarios).  In this draft we do not
	consider the use of an Access Point, neither the
	infrastructure-based scenario.  On another hand, this draft
	describes additional route deletion scenarios, whereas the
	MNPP draft doesn't.
      
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
	The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
	NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
	"OPTIONAL" in this document are to be interpreted as described
	in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<p>
	Mobile Router (MR) - a Mobile Router.
      
</p>
<p>
	Mobile Network Prefix (MNP) - the Mobile Network Prefix is
	topologically correct on the ingress interface of a Mobile
	Router.
      
</p>
<p>
	Egress interface of MR - the interface sending the special
	Router Advertisements to other egress interface of other
	Mobile Routers (by this draft's recommendation).
      
</p>
<p>
	Ingress interface of MR - the interface towards the Local Fixed
	Nodes in the moving network and on which the Mobile Network
	Prefix (MNP) is topologically correct.
      
</p>
<a name="protocol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Protocol</h3>

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Topology</h3>

<p>
	These RA protocol extensions were conceived in a context of
	vehicular networks.  It was considered that a vehicle contains
	a moving network.  A moving network is composed of one Mobile
	Router (MR) and several Local Fixed Nodes (LFNs).  The MR has
	one egress interface and one ingress interface.  The egress
	interface is used to connect to other vehicles whereas the
	ingress interface connects to the LFNs in the vehicle.
      
</p>
<p>
	For example, two moving networks connecting via their egress
	interfaces are depicted below:
      
</p>
<p>
	</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

               Vehicle 1                          Vehicle 2

                      egress|              |egress
        ----     ----    ----              ----     ----    ----
       | LFN|   |LFN |  | MR |            | MR |   |LFN |  |LFN |
        ----     ----    ----              ----     ----    ----
          |        | ingress|              |ingress   |      |
         ---------------------             ---------------------
              2001:1::/24                       2001:2::/24


</pre></div><p>

      
</p>
<p>
	In this figure, the Mobile Network Prefix (MNP) deployed in
	vehicle 1 is 2001:1::/24, for example.  The problem is how to
	establish IP paths between the LFNs between the two vehicles;
	initially the MR in one vehicle only knows about the MNP in
	its own vehicle.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Operation on a Mobile Router</h3>

<p>
	We propose to use a special kind of prefixes in the Router
	Advertisements.  MR sends RA on its egress interface.  A
	receiving MR installs the pair MNP-LL in its forwarding
	information base (routing table, destination cache, tbd).
      
</p>
<p>
	Each Mobile Router maintains a forwarding information
	structure that contains entries of the form:
      
</p>
<p>
	</p>
<ul class="text">
<li>
	    Mobile Network Prefix
	  
</li>
<li>
	    Gateway address	    
	  
</li>
<li>
	    Lifetime
	  
</li>
<li>
	    Name of outgoing interface
	  
</li>
<li>
	    Optionally link-layer address of Gateway
	  
</li>
</ul><p>
      
</p>
<p>
	This data structure is managed mainly at the reception of the
	special Router Advertisements, and when timers expire.  This
	structure can be implemented as part of the Destination Cache,
	Binding Cache, Routing Table or Forwarding Information Base.
      
</p>
<p>
	We present more details of the MR operation in the following
	section.
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Message Exchange</h3>

<p>
	  The message exchange for the scenario of simultaneous
	  power-up of 3 MRs is pictured in the diagram below:
	
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>


              MR1                MR2                MR3
               |                  |                  |
               | MLD REPORT (LL1) |                  |
               |-----------------&gt;|-----------------&gt;|multicast
               |                  |MLD REPORT (LL3)  |
               |&lt;-----------------|&lt;-----------------|
               |               MLD|REPORT (LL2)      |
               |&lt;-----------------|-----------------&gt;|
               |                  |                  |
               |    Special RA    |                  |
               |-----------------&gt;|-----------------&gt;|
               |   (MNP1-LL1)     |                  |
               |                  |    Special RA    |
               |&lt;-----------------|&lt;-----------------|
               |                  |   (MNP3-LL3)     |
               |                  |                  |
               |           Special|RA                |
               |&lt;-----------------|-----------------&gt;|
               |           (MNP2-LL2)                |


</pre></div><p>

	
</p>
<p>
	  </p>
<ul class="text">
<li>
	      All Mobile Routers connect their egress interface with a
	      wireless MAC protocol, for example 802.11 MAC.  We
	      consider mainly the case where the "ad-hoc" mode is
	      used; we do not consider the presence of an Access Point
	      - the two moving networks should be able to connect to
	      each other without the use of fixed Access Points.
	    
</li>
<li>
	      Following link-layer successful connectivity, each
	      Mobile Router joins the all-routers multicast address on
	      the egress interface (typically using a link-local
	      address, pictured as LL1).
	    
</li>
<li>
	      Each Mobile Router multicasts special RAs on the egress
	      interface, containing the Mobile Network Prefix that is
	      assigned to its moving network.
	    
</li>
<li>
	      When receiving the special RA from another MR, a MR
	      parses the packet for the link-local address of the
	      sending MR, for the MNP sent by that MR and for the
	      lifetime.  It then installs the corresponding entry into
	      the data structure mentioned earlier.
	    
</li>
<li>
	      Before leaving the Fixed Scene, a Mobile Router sends
	      another special RA to all routers this time informing
	      them that the MNP-linklocaladdress pair is no longer
	      present at the scene (lifetime 0 as per <a class='info' href='#RFC4191'>[RFC4191]<span> (</span><span class='info'>Draves, R. and D. Thaler, &ldquo;Default Router Preferences and More-Specific Routes,&rdquo; November&nbsp;2005.</span><span>)</span></a>), so the other routers delete the
	      corresponding route.  It could also courteously
	      multicast a MLD REPORT to leave the all-routers
	      multicast group, if necessary.
	    
</li>
<li>
	      Operation of the Mobile Router when forwarding packets
	      (after installation of the MNP-ll route) is similar to
	      that of any router: for each packet not addressed to
	      itself, longest-prefix match the destination address of
	      the packet to an entry in the table, select the
	      'gateway' address, solicit that neighbour's MAC address
	      and put the received MAC address in the link-layer dst
	      address then send it.
	    
</li>
</ul><p>

	
</p>
<p>
	  With this mechanism, the various LFNs in the moving networks
	  are capable to exchange IP messages, routed by two Mobile
	  Routers each time.
	
</p>
<p>
	  For faster discovery of the Mobile NEtwork Prefixes of
	  the other Mobile Routers, a certain Mobile Router can
	  send a special Router Solicitation right after joining
	  the scene.
	
</p>
<p>
	  For the scenario of arrival of an MR in a zone where other
	  MRs are present, the message exchange diagram is depicted
	  below:
	
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>


              MR1                MR2                MR3
               |                  |                  |
               |             RA3 (MNP3-LL3)          |
               |&lt;-----------------o------------------|
               |             MLD "JOIN"              |
               |&lt;-----------------o------------------|
               |           RS     |                  |
               |&lt;-----------------o------------------|
               |                  |                  |
               |             RA1 (MNP1-LL1)          |
               |------------------o-----------------&gt;|
               |                  |                  |
               |                  | RA2 (MNP2-LL2)   |
               |                  o-----------------&gt;|
               |                  |                  |

</pre></div><p>

	
</p>
<p>
	  The arriving MR is the one using the Mobile Router MR3.  MR1
	  and MR2 have already exchanged their respective routes using
	  the message exchange presented in the previous scenario.
	  The algorithm executed by MR3 is the following: (1) Send an
	  RA containing the prefix(es) allocated to its subnets to
	  which the ingress interfaces are connected (2) "Join" the
	  all-routers multicast address with link-scope, on its egress
	  interface (3) Send a Router Solicitation (RS) on its egress
	  interface requesting RAs from MR1 and MR2 (4) Receive their
	  special RAs: RA1 and RA2 (5) For each received RA, extract
	  the source address and the prefixes and insert the
	  corresponding number of routing table entries; these entries
	  will help reach the LFNs in the moving networks of MR1 and
	  MR2.
	
</p>
<p>
	  For route deletion, we consider two scenarios: timeout
	  expiration of route entry, and explicit deletion of route
	  entry.  The following diagram depicts timeout expiration of
	  a route entry:
	
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>


              MR1                MR2                MR3
               |                  |                  |  \
               |                  |                  |  |
               |                  |                  |  |
               |                  |                  |  &gt; timeout
               |                  |                  |  |
               |      RS          |                  |  |
               |&lt;-----------------o------------------|  / deletion
               |                  |                  |  \
               |             RA1 (MNP1-LL1)          |  |
               |------------------o-----------------&gt;|  |
               |                  |                  |  &gt; renewal
               |                  | RA2 (MNP2-LL2)   |  |(eventually)
               |                  o-----------------&gt;|  |
               |                  |                  |  /

</pre></div><p>

	
</p>
<p>
	  This first scenario for deleting a routing table entry
	  consists in associating a timeout value on each entry
	  present in the routing table.  Such an entry typically
	  contains the destination prefix, the IP address of the next
	  hop gateway and eventually the interface name.  The new
	  timeout value is obtained from the "Lifetime" field of the
	  RA.  With this value, each MR executes the following
	  algorithm for each entry present in its routing table: (1)
	  Set variable lt to the contents of the timeout value of the
	  routing table entry (2) Decrement lt (3) Wait 1 milisecond
	  (4) If lt is different than 0 jump to step 2, otherwise jump
	  to step 5 (5) Delete this entry (6) Send an RS to the
	  next-hop IP address of this routing table entry (7) If an RA
	  is received then re-insert the routing table entry.
	
</p>
<p>
	  The second scenario for deleting routing table entries
	  consists in an explicit indication by a Mobile Router to
	  other Mobile Routers about its intention to quit the subnet,
	  instructing them to remove the routing table entries
	  relative to its subnets (their MNPs: Mobile Network
	  Prefixes).  The explicit indication is part of the same
	  special Router Advertisement.  In practice, this effect
	  could be achieved in two different ways: either specify a
	  'D' flag for a certain MNP, or alternatively use a lifetime
	  '0' attached to same MNP ('0' meaning that the deletion
	  request is immediate).
	
</p>
<p>
	  The message exchange for explicit deletion is depicted in
	  the figure below.  The Mobile Router MR1 sends RA1
	  containing the indication for immediate deletion (flag 'D',
	  or lifetime '0') and the mobile network prefix MNP1.  Upon
	  receipt of this message, MR2 and MR3 search their respective
	  routing tables for the MNP1 and then delete these routing
	  table entries.
	
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>


              MR1                MR2                MR3
               |                  |                  |
               |             RA1 (MNP1)              |
               |------------------o-----------------&gt;|
               |    ('D' flag or '0' lifetime)       |
               |                  |                  |
               |                  |                  |
               |                  | Upon reception of|
               |                  |this RA, MR2 and 3|
               |                  |delete their routes
               |                  |for MNP1 from     |
               |                  |their routing     |
               |                  |tables.           |
               |                  |                  |

</pre></div><p>

	
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Message Formats</h3>

<p>
	  Router Advertisement is a message format defined in <a class='info' href='#RFC4861'>[RFC4861]<span> (</span><span class='info'>Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;Neighbor Discovery for IP version 6 (IPv6),&rdquo; September&nbsp;2007.</span><span>)</span></a> as an ICMPv6 message.  The document <a class='info' href='#RFC5175'>[RFC5175]<span> (</span><span class='info'>Haberman, B. and R. Hinden, &ldquo;IPv6 Router Advertisement Flags Option,&rdquo; March&nbsp;2008.</span><span>)</span></a> proposes an option for RA extensibility:
	  IPv6 Router Advetisement Flags Option.  We propose to
	  reserve bit 16 for Mobile Network Prefixes.
	
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |    Length     |M|      Bit fields available ...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ... for assignment                                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><p>

	
</p>
<p>
	  'M' - Mobile Network Prefix present.  Set to 1 if this Router
	  Advertisement contains a Mobile Network Prefix.
	
</p>
<p>
	  If the RA Flags Option contais the flag M, and set to 1,
	  then the Router Advertisement MUST contain a Route
	  Information Option <a class='info' href='#RFC4191'>[RFC4191]<span> (</span><span class='info'>Draves, R. and D. Thaler, &ldquo;Default Router Preferences and More-Specific Routes,&rdquo; November&nbsp;2005.</span><span>)</span></a> followed
	  optionally by a Source-Link Layer Address Option <a class='info' href='#RFC4861'>[RFC4861]<span> (</span><span class='info'>Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;Neighbor Discovery for IP version 6 (IPv6),&rdquo; September&nbsp;2007.</span><span>)</span></a>.  (If this SLLAO option is used then it
	  avoids the necessity of doing NS/NA exchange for the
	  link-local address of the Gateway entry in the data
	  structure mentioned earlier.)
	
</p>
<p>
	  A complete diagram of the Router Advertisement is presented
	  in the figure below:
	
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

  Base Header (RFC 2460)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |Version| Traffic Class |           Flow Label                  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |         Payload Length        |  Next Header  |   Hop Limit   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                         Source Address                        +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                      Destination Address                      +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 RA (RFC 4861)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |     Code      |          Checksum             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Cur Hop Limit |M|O|H|Prf|Resvd|       Router Lifetime         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                         Reachable Time                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          Retrans Timer                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 IPv6 Router Advetisement Flags Option (RFC 5175)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |    Length     |M|      Bit fields available ...
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    ... for assignment                                              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 Route Information Option (RFC 4191)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |    Length     | Prefix Length |Resvd|Prf|Resvd|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        Route Lifetime                         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                   Prefix (Variable Length)                    |
    .                                                               .
    .                                                               .
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 SLLAO (RFC 4861)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |    Length     |    Link-Layer Address ...
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><p>

	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>Source Address</dt>
<dd>
	      <br />

	      IPv6 Link Layer Address of sending MR.  To be installed
	      as the Gateway address in the manemo forwarding
	      information structure.
	    
</dd>
<dt>Destination Address</dt>
<dd>
	      <br />

	      IPv6 all-routers multicast address with link-scope.
	      <br />
<br />

	    
</dd>
<dt>Prf</dt>
<dd>
	      <br />

	      Preference, value 0x09; this route should not be
	      preferred over other default routes.
	    
</dd>
<dt>Prefix (in Router Information Option)</dt>
<dd>
	      <br />

	      The Mobile Network Prefix of this Mobile Router.
	    
</dd>
<dt>Link-Layer Address (optional)</dt>
<dd>
	      <br />

	      Link-layer address of the egress interface of the MR.
	      The receiving MR can use this address for sending
	      packets to the MR that advertises a certain MNP.
	    
</dd>
</dl></blockquote><p>
	
</p>
<p>
	  A Mobile Router MUST not include Prefix Information Options
	  <a class='info' href='#RFC4861'>[RFC4861]<span> (</span><span class='info'>Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;Neighbor Discovery for IP version 6 (IPv6),&rdquo; September&nbsp;2007.</span><span>)</span></a> into the special Router
	  Advertisements so that the receiving Mobile Routers don't
	  auto-configure addresses based on these prefixes.
	
</p>
<p>
	  A Mobile Router MUST NOT auto-configure an address derived
	  from the Mobile Network Prefix found within a received
	  special Router Advertisement.
	
</p>
<a name="seccons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>
	RA security.
      
</p>
<p>
	It is of utmost importance that the Mobile Routers exchange the
	special Router Advertisements securely.
      
</p>
<p>
	SeND [RFC3971] permits to bind an address to a public key.  But not a
	prefix.  This may involve concepts of the prefix-ownership problem
	space.
      
</p>
<p>
	It is necessary to build a threat model for this scenario and
	mechanism, analyze the security tools offered by SeND and identify
	the potential risks and their mitigation.
      
</p>
<p>
	In some cases it is possible that a moving network is
	connected to the Internet, in addition to being connected to
	other moving networks.  If so, it may be advantageous to
	update PKI certificates, or similar operation, in order to
	ensure a more secure connectivity to other moving networks.
      
</p>
<p>
	Some kinds of link layers used for establishing the link
	connectivity between the egress interfaces (e.g. IEEE 802.11b)
	offer several means of authentication and confidentiality - at
	link-layer: e.g. WEP, WPA, more.  It may be advantageous to
	make use of these secure link-layer mechanisms.
      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>
	IANA no action.
      
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgements</h3>

<p>
	The authors would like to thank people who contributed
	stimulating discussion on the manemo@mobileip.jp list during
	November 2006 to February 2007: Pascal Thubert, Ryuji
	Wakikawa, Jim Bound, Jari Arkko, Roberto Baldessari, Ben
	McCarthy, Teco Boot, Nicolas Chevrollier, Jean Lorchat, Fred
	Templin, Carlos Jesus Bernardos Cano, Thierry Ernst, Bryan
	McLaughlin, Theo De Jongh, Thomas Heide Clausen, Lim Hyung
	Jin, David Binet, Samita Chakrabarti, Shubhranshu, Richard
	Bernhardt, Martin Dunmore, Emmanuel Baccelli.
      
</p>
<p>
	The authors would like to acknowledge a number of co-workers
	at Motorola who strongly supported work in this area several
	years ago.  Their names will appear when deemed necessary.
      
</p>
<p>
	Authors would like to thank several interns during July 2009
	to September 2010 for their support in implementing, testing
	and demonstrating the feasibility of the concepts presented in
	this draft: Maxence Dalmais, Miljan Babovic and Nicolas
	Gressin.
      
</p>
<p>
	Authors would like to thank Jong-Hyouk Lee for comments on the
	MEXT WG email list about a similar idea implemented at INRIA.
      
</p>
<p>
	The work presented in this draft was supported in part by the
	French ANR ("Agence Nationale de la Recherche", fr.)
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4191">[RFC4191]</a></td>
<td class="author-text">Draves, R. and D. Thaler, &ldquo;<a href="http://tools.ietf.org/html/rfc4191">Default Router Preferences and More-Specific Routes</a>,&rdquo; RFC&nbsp;4191, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4191.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4861">[RFC4861]</a></td>
<td class="author-text">Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;<a href="http://tools.ietf.org/html/rfc4861">Neighbor Discovery for IP version 6 (IPv6)</a>,&rdquo; RFC&nbsp;4861, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4861.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5175">[RFC5175]</a></td>
<td class="author-text">Haberman, B. and R. Hinden, &ldquo;<a href="http://tools.ietf.org/html/rfc5175">IPv6 Router Advertisement Flags Option</a>,&rdquo; RFC&nbsp;5175, March&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5175.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.jhlee-mext-mnpp">[I-D.jhlee-mext-mnpp]</a></td>
<td class="author-text">Tsukada, M., Ernst, T., and J. Lee, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-jhlee-mext-mnpp-00.txt">Mobile Network Prefix Provisioning</a>,&rdquo; draft-jhlee-mext-mnpp-00 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-jhlee-mext-mnpp-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.petrescu-manemo-nano">[I-D.petrescu-manemo-nano]</a></td>
<td class="author-text">Petrescu, A. and C. Janneteau, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-petrescu-manemo-nano-00.txt">The NANO Draft (Scene Scenario for Mobile Routers and MNP in RA)</a>,&rdquo; draft-petrescu-manemo-nano-00 (work in progress), March&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-petrescu-manemo-nano-00.txt">TXT</a>).</td></tr>
</table>

<a name="changelog"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
ChangeLog</h3>

<p>
	The changes are listed in reverse chronological order, most
	recent changes appearing at the top of the list.
      
</p>
<p>
	From draft-petrescu-autoconf-ra-based-routing-00.txt to:
	</p>
<ul class="text">
<li>
	    changed.
	  
</li>
</ul><p>
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alexandru Petrescu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CEA</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CEA, LIST, Communicating Systems Laboratory,
	    Point Courrier 94</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Gif-sur-Yvette, Essonne  F-91191</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+33 0169089223</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alexandru.petrescu@cea.fr">alexandru.petrescu@cea.fr</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Christophe Janneteau</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CEA</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CEA, LIST, Communicating Systems Laboratory,
	    Point Courrier 94</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Gif-sur-Yvette, Essonne  F-91191</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+33 0169089182</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alexandru.petrescu@cea.fr">alexandru.petrescu@cea.fr</a></td></tr>
</table>
</body></html>
