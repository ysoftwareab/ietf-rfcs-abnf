 



PCE Working Group                                               D. Dhody
Internet-Draft                                                  U. Palle
Intended status: Standards Track                     Huawei Technologies
Expires: March 31, 2016                                         R. Singh
                                                        Juniper Networks
                                                               R. Gandhi
                                                     Cisco Systems, Inc.
                                                                 L. Fang
                                                               Microsoft
                                                      September 29, 2015


  PCEP Extensions for MPLS-TE LSP Automatic Bandwidth Adjustment with
                              Stateful PCE
             draft-dhody-pce-stateful-pce-auto-bandwidth-06

Abstract

   The Path Computation Element Communication Protocol (PCEP) provides
   mechanisms for Path Computation Elements (PCEs) to perform path
   computations in response to Path Computation Clients (PCCs) requests.
    The stateful PCE extensions allow stateful control of Multi-Protocol
   Label Switching (MPLS) Traffic Engineering Label Switched Paths (TE
   LSPs) via PCEP.

   This document describes automatic bandwidth adjustment of such LSPs
   when employing an Active Stateful PCE.  In one of the models
   described, PCC computes the bandwidth to be adjusted and informs the
   PCE whereas in the second model, PCC reports the real-time bandwidth
   usage to a PCE and the PCE computes the adjustment bandwidth.

   This document also describes automatic bandwidth adjustment for
   stateful PCE-initiated LSPs.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."
 


Dhody, et al.            Expires March 31, 2016                 [Page 1]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Conventions Used in This Document  . . . . . . . . . . . . . .  5
     2.1.  Requirements Language  . . . . . . . . . . . . . . . . . .  5
     2.2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . .  5
   3.  Requirements for PCEP Extensions . . . . . . . . . . . . . . .  6
   4.  Architectural Overview . . . . . . . . . . . . . . . . . . . .  8
     4.1.  Auto-Bandwidth Overview  . . . . . . . . . . . . . . . . .  8
     4.2.  Theory of Operation  . . . . . . . . . . . . . . . . . . . 10
     4.3.  Scaling Considerations . . . . . . . . . . . . . . . . . . 11
   5.  Extensions to the PCEP . . . . . . . . . . . . . . . . . . . . 11
     5.1.  AUTO-BANDWIDTH-ATTRIBUTE TLV . . . . . . . . . . . . . . . 11
       5.1.1.  Sample-Interval sub-TLV  . . . . . . . . . . . . . . . 13
       5.1.2.  Adjustment-Interval sub-TLV  . . . . . . . . . . . . . 13
       5.1.3.  Adjustment Threshold . . . . . . . . . . . . . . . . . 13
         5.1.3.1.  Adjustment-Threshold sub-TLV . . . . . . . . . . . 14
         5.1.3.2.  Adjustment-Threshold-Percentage sub-TLV  . . . . . 14
       5.1.4.  Minimum and Maximum Bandwidth Values . . . . . . . . . 15
         5.1.4.1.  Minimum-Bandwidth sub-TLV  . . . . . . . . . . . . 15
         5.1.4.2.  Maximum-Bandwidth sub-TLV  . . . . . . . . . . . . 15
       5.1.5.  Overflow and Underflow Condition . . . . . . . . . . . 16
         5.1.5.1.  Overflow-Threshold sub-TLV . . . . . . . . . . . . 16
         5.1.5.2.  Overflow-Threshold-Percentage sub-TLV  . . . . . . 17
         5.1.5.3.  Underflow-Threshold sub-TLV  . . . . . . . . . . . 17
         5.1.5.4.  Underflow-Threshold-Percentage sub-TLV . . . . . . 18
     5.2.  BANDWIDTH-USAGE-ATTRIBUTE TLV  . . . . . . . . . . . . . . 19
       5.2.1.  Bandwidth-Usage-Report-Interval sub-TLV  . . . . . . . 20
       5.2.2.  Bandwidth-Usage-Report-Threshold sub-TLV . . . . . . . 20
       5.2.3.  Bandwidth-Usage-Report-Threshold-Percentage sub-TLV  . 21
       5.2.4.  Bandwidth-Usage-Report-Flow-Threshold sub-TLV  . . . . 21
 


Dhody, et al.            Expires March 31, 2016                 [Page 2]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


       5.2.5.  Bandwidth-Usage-Report-Flow-Threshold-Percent 
               sub-TLV  . . . . . . . . . . . . . . . . . . . . . . . 22
     5.3.  BANDWIDTH Object . . . . . . . . . . . . . . . . . . . . . 23
       5.3.1.  Auto-Bandwidth Adjusted Bandwidth  . . . . . . . . . . 23
       5.3.2.  Bandwidth-Usage Report . . . . . . . . . . . . . . . . 23
     5.4.  The PCRpt Message  . . . . . . . . . . . . . . . . . . . . 24
     5.5.  The PCInitiate Message . . . . . . . . . . . . . . . . . . 24
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . . 24
   7.  Manageability Considerations . . . . . . . . . . . . . . . . . 24
     7.1.  Control of Function and Policy . . . . . . . . . . . . . . 24
     7.2.  Information and Data Models  . . . . . . . . . . . . . . . 25
     7.3.  Liveness Detection and Monitoring  . . . . . . . . . . . . 25
     7.4.  Verify Correct Operations  . . . . . . . . . . . . . . . . 25
     7.5.  Requirements On Other Protocols  . . . . . . . . . . . . . 25
     7.6.  Impact On Network Operations . . . . . . . . . . . . . . . 25
   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 26
     8.1.  PCEP TLV Type Indicators . . . . . . . . . . . . . . . . . 26
     8.2.  AUTO-BANDWIDTH-ATTRIBUTE Sub-TLV . . . . . . . . . . . . . 26
     8.3.  BANDWIDTH-USAGE-ATTRIBUTE Sub-TLV  . . . . . . . . . . . . 26
     8.4.  BANDWIDTH Object . . . . . . . . . . . . . . . . . . . . . 27
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 27
     9.1.  Normative References . . . . . . . . . . . . . . . . . . . 27
     9.2.  Informative References . . . . . . . . . . . . . . . . . . 28
   Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . . . 29
   Contributors' Addresses  . . . . . . . . . . . . . . . . . . . . . 29
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 30


1.  Introduction

   [RFC5440] describes the Path Computation Element Protocol (PCEP) as a
   communication mechanism between a Path Computation Client (PCC) and a
   Path Control Element (PCE), or between PCE and PCE, that enables
   computation of Multi-Protocol Label Switching (MPLS) Traffic
   Engineering Label Switched Paths (TE LSPs).

   [I-D.ietf-pce-stateful-pce] specifies extensions to PCEP to enable
   stateful control of MPLS TE LSPs.  It describes two mode of
   operations - Passive Stateful PCE and Active Stateful PCE.  In this
   document, the focus is on Active Stateful PCE where LSPs are
   configured at the PCC and control over them is delegated to the PCE.
   Further [I-D.ietf-pce-pce-initiated-lsp] describes the setup,
   maintenance and teardown of PCE-initiated LSPs under the stateful PCE
   model.

   Over time, based on the varying traffic pattern, an LSP established
   with certain bandwidth may require to adjust the bandwidth, reserved
   in the network automatically.  Ingress Label Switch Router (LSR)
 


Dhody, et al.            Expires March 31, 2016                 [Page 3]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   collects the traffic rate at each sample interval to determine the
   bandwidth demand of the LSP.  This bandwidth information is then used
   to adjust the LSP bandwidth periodically.  This feature is commonly
   referred to as Auto-Bandwidth.

   Enabling Auto-Bandwidth feature on an LSP results in the LSP
   automatically adjusting its bandwidth reservation based on the actual
   traffic flowing through the LSP.  The initial LSP bandwidth can be
   set to an arbitrary value (including zero), in practice, it can be
   operator expected value based on design and planning.  Once the LSP
   is set-up, the LSP monitors the traffic flow and adjusts its
   bandwidth every adjustment-interval period.  The bandwidth adjustment
   uses the make-before-break signaling method so that there is no
   interruption to the traffic flow.  The Auto-Bandwidth is described in
   detail in Section 4.1.  [I-D.ietf-pce-stateful-pce-app] describes the
   use-case for Auto-Bandwidth adjustment for passive and active
   stateful PCE.


   In this document, following deployment models are considered for
   employing Auto-Bandwidth feature with active stateful PCE.

   o  Deployment model 1: PCC to decide adjusted bandwidth:

      *  In this model, the PCC (head-end of the LSP) monitors and
         calculates the new adjusted bandwidth.  The PCC reports the
         calculated bandwidth to be adjusted to the PCE.

      *  This approach would be similar to passive stateful PCE model,
         while the passive stateful PCE uses path request/reply
         mechanism, the active stateful PCE uses report/update mechanism
         to adjust the LSP bandwidth.

      *  For PCE-initiated LSP, the PCC is requested during the LSP
         initiation to monitor and calculate the new adjusted bandwidth.

   o  Deployment model 2: PCE to decide adjusted bandwidth:

      *  In this model, the PCE calculates the new adjusted bandwidth
         for the LSP.

      *  Active stateful PCE can use information such as historical
         trending data, application-specific information about expected
         demands and central policy information along with real-time
         bandwidth usage to make smarter bandwidth adjustment to the
         delegated LSPs.  Since the LSP has delegated control to the
         PCE, it is inherently suited that it should be the stateful PCE
         that decides the bandwidth adjustments.
 


Dhody, et al.            Expires March 31, 2016                 [Page 4]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


      *  For PCE-initiated LSP, the PCC is requested during initiation,
         to monitor and report the real-time bandwidth usage.

      *  This model does not exclude use of any other mechanism employed
         by stateful PCE to learn real-time bandwidth usage information.
          But at the same time, using the same protocol (PCEP in this
         case) for updating and reporting the adjustment parameters as
         well as to learn real-time bandwidth usage is operationally
         beneficial.

   This document defines extensions needed to support Auto-Bandwidth
   feature on the LSPs in a active stateful PCE model using PCEP.


2.  Conventions Used in This Document

2.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

2.2.  Terminology

   The following terminology is used in this document.

   Active Stateful PCE:  PCE that uses tunnel state information learned
      from PCCs to optimize path computations.  Additionally, it
      actively updates tunnel parameters in those PCCs that delegated
      control over their tunnels to the PCE.

   Delegation:  An operation to grant a PCE temporary rights to modify a
      subset of tunnel parameters on one or more PCC's tunnels.  Tunnels
      are delegated from a PCC to a PCE.

   PCC:  Path Computation Client.  Any client application requesting a
      path computation to be performed by a Path Computation Element.

   PCE:  Path Computation Element.  An entity (component, application,
      or network node) that is capable of computing a network path or
      route based on a network graph and applying computational
      constraints.

   TE LSP:  Traffic Engineering Label Switched Path.


   Note the Auto-Bandwidth feature specific terms defined in Section
   4.1.
 


Dhody, et al.            Expires March 31, 2016                 [Page 5]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


3.  Requirements for PCEP Extensions

   As discussed in Section 1, there are two deployment models considered
   in this document for automatic bandwidth adjustments in case of
   active stateful PCE.  In the model 1, where PCC decides the adjusted
   bandwidth, PCC reports the new adjusted bandwidth and an active
   stateful PCE updates the bandwidth of a delegated LSP via existing
   mechanisms defined in [I-D.ietf-pce-stateful-pce].  PCEP extensions
   required for both models are summarized in the following table.

   +-------------------------------------------------------------------+
   | Model 1: PCC decides adjusted BW                                  |
   +---------------------------------+---------------------------------+
   | PCC Initiated                   | PCE Initiated                   |
   +---------------------------------+---------------------------------+
   |                                 |                                 |
   | PCC monitors the traffic        | At the time of initiation,      |
   | and reports the calculated      | PCE request PCC to monitor      |
   | bandwidth to be adjusted        | the traffic and report the      |
   | to the PCE.                     | calculated bandwidth to be      |
   |                                 | adjusted to the PCE.            |
   |                                 |                                 |
   | No new extensions are needed.   | Extension is needed for PCE     |
   |                                 | to pass on the adjustment       |
   |                                 | parameters at the time of       |
   |                                 | Initiation.                     |
   |                                 |                                 |
   | Optionally AUTO-BANDWIDTH-      | Refer the AUTO-BANDWIDTH-       |
   | ATTRIBUTE TLV can be used       | ATTRIBUTE TLV (and sub-TLVs     |
   | to identify the LSP with        | e.g. Adjustment-Interval,       |
   | Auto-Bandwidth Feature          | Minimum-Bandwidth) in           |
   | enabled.                        | Section 5.1.                    |
   |                                 |                                 |
   +---------------------------------+---------------------------------+

   +-------------------------------------------------------------------+
   | Model 2: PCC reports bandwidth-usage, PCE decides adjusted BW     |
   +---------------------------------+---------------------------------+
   |  PCC Initiated                  | PCE Initiated                   |
   +---------------------------------+---------------------------------+
   |                                 |                                 |
   | PCC monitors bandwidth usage    | At the time of initiation,      |
   | and reports the real-time       | PCE request PCC to monitor      |
   | bandwidth usage to the PCE.     | the traffic and reports the     |
   | It is PCE that decides the      | real-time bandwidth usage to    |
   | calculated bandwidth to be      | the PCE.  It is PCE that decides|
   | adjusted and updates the        | the calculated bandwidth to     |
   | LSP accordingly.                | be adjusted and updates the     |
 


Dhody, et al.            Expires March 31, 2016                 [Page 6]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   |                                 | LSP accordingly.                |
   |                                 |                                 |
   | Extension is needed for         | Extension is needed for PCE     |
   | PCC to pass on the              | to pass on the real-time        |
   | adjustment parameters at        | bandwidth usage reporting       |
   | the time of delegation to       | parameters at the time of       |
   | PCE.                            | Initiation.                     |
   |                                 |                                 |
   | Refer the AUTO-BANDWIDTH-       | Refer the BANDWIDTH-USAGE-      |
   | ATTRIBUTE TLV (and sub-         | ATTRIBUTE TLV (and sub-TLVs     |
   | TLVs e.g. Adjustment-           | e.g. Bandwidth-Usage-Report-    |
   | Threshold) in Section 5.1.      | Interval, Bandwidth-Usage-      |
   |                                 | Report-Threshold) in Section    |
   |                                 | 5.2.                            |
   |                                 |                                 |
   | Further extension to            | Further extension to report     |
   | report the bandwidth-usage      | the bandwidth-usage to          |
   | to PCE are also                 | PCE are also needed (Refer      |
   | needed (Refer Bandwidth-        | Bandwidth-Usage type in         |
   | Usage type in Section           | Section 5.3.2).                 |
   | 5.3.2).                         |                                 |
   |                                 |                                 |
   +---------------------------------+---------------------------------+

                 Table 1: Auto-Bandwidth PCEP extensions

   Further Auto-Bandwidth deployment considerations are summarized
   below:

   o  It is required to identify and inform the PCEP peer, the LSP that
      are enabled with Auto-Bandwidth feature.  Not all LSPs in some
      deployments would like their bandwidth to be dependent on the
      real-time bandwidth usage but be constant as set by the operator.

   o  It is also required to identify and inform the PCEP peer the model
      of operation i.e. if PCC decides the adjusted bandwidth, or PCC
      reports the real-time bandwidth usage instead and the PCE decides
      the adjusted bandwidth.

      *  Note that PCEP extension for reporting real-time bandwidth
         usage, as specified in this document, is one of the ways for a
         PCE to learn this information.  But at the same time a stateful
         PCE may choose to learn this information from other means like
         management, performance tools, which are beyond the scope of
         this document.

   o  Further for the LSP with Auto-Bandwidth feature enabled, an
      operator should be able to specify the adjustment parameters (i.e.
 


Dhody, et al.            Expires March 31, 2016                 [Page 7]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


      configuration knobs) to control this feature (e.g.  minimum/
      maximum bandwidth range) and PCEP peer should be informed.



4.  Architectural Overview

4.1.  Auto-Bandwidth Overview

   Auto-Bandwidth feature allows an LSP to automatically and dynamically
   adjust its reserved bandwidth over time, i.e. without network
   operator intervention.  The bandwidth adjustment uses the
   make-before-break signaling method so that there is no interruption
   to the traffic flow.

   The new bandwidth reservation is determined by sampling the actual
   traffic flowing through the LSP.  If the traffic flowing through the
   LSP is lower than the configured or current bandwidth of the LSP, the
   extra bandwidth is being reserved needlessly and being wasted.
   Conversely, if the actual traffic flowing through the LSP is higher
   than the configured or current bandwidth of the LSP, it can
   potentially cause congestion or packet loss in the network.  With
   Auto-Bandwidth feature, the LSP bandwidth can be set to some
   arbitrary value (including zero) during initial setup time, and it
   will be periodically adjusted over time based on the actual bandwidth
   requirement.

   Note the following definitions of the Auto-Bandwidth terms:

   Maximum Average Bandwidth (MaxAvgBw):  The maximum average bandwidth
      represents the current traffic bandwidth demand during a time
      interval.  This is the maximum value of the averaged traffic
      bandwidth rate in a given adjustment-interval.

   Adjusted Bandwidth:  This is the Auto-Bandwidth computed bandwidth
      that needs to be adjusted for the LSP.

   Sample-Interval:  The periodic time interval at which the traffic
      rate is collected as a sample.

   Bandwidth-Sample (BwSample):  The bandwidth sample collected at every
      sample interval to measure the traffic rate.

   Adjustment-Interval:  The periodic time interval at which the
      bandwidth adjustment should be made using the MaxAvgBw.

   Maximum-Bandwidth:  The maximum bandwidth that can be reserved for
      the LSP.
 


Dhody, et al.            Expires March 31, 2016                 [Page 8]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   Minimum-Bandwidth:  The minimum bandwidth that can be reserved for
      the LSP.

   Adjustment-Threshold:  This value is used to decide when the
      bandwidth should be adjusted.  If the percentage or absolute
      difference between the current MaxAvgBw and the current bandwidth
      reservation is greater than or equal to the threshold value, the
      LSP bandwidth is adjusted to the current bandwidth demand
      (Adjusted Bandwidth) at the adjustment-interval expiry.

   Overflow-Count:  This value is used to decide when the bandwidth
      should be adjusted when there is a sudden increase in traffic
      demand.  This value indicates how many times consecutively, the
      percentage or absolute difference between the current MaxAvgBw and
      the current bandwidth reservation is greater than or equal to the
      Overflow-Threshold value.  

   Overflow-Threshold:  This value is used to decide when the bandwidth
      should be adjusted when there is a sudden increase in traffic
      demand.  If the percentage or absolute difference between the
      current MaxAvgBw and the current bandwidth reservation is greater
      than or equal to the threshold value, the overflow-condition is
      set to be met.  The LSP bandwidth is adjusted to the current
      bandwidth demand bypassing the adjustment-interval if the
      overflow-condition is met consecutively for the Overflow-Count.

   Underflow-Count:  This value is used to decide when the bandwidth
      should be adjusted when there is a sudden decrease in traffic
      demand.  This value indicates how many times consecutively, the
      percentage or absolute difference between the current MaxAvgBw and
      the current bandwidth reservation is greater than or equal to the
      Underflow-Threshold value.  

   Underflow-Threshold:  This value is used to decide when the bandwidth
      should be adjusted when there is a sudden decrease in traffic
      demand.  If the percentage or absolute difference between the
      current MaxAvgBw and the current bandwidth reservation is greater
      than or equal to the threshold value, the underflow-condition is
      set to be met.  The LSP bandwidth is adjusted to the current
      bandwidth demand bypassing the adjustment-interval if the
      underflow-condition is met consecutively for the Underflow-Count.

   Report-Interval:  This value indicates the periodic interval when the
      collected real-time bandwidth-usage samples (BwSample) should be
      reported to the stateful PCE via the PCRpt message.

   Report-Threshold:  This value is used to decide if the real-time
      bandwidth-usage samples collected should be reported.  Only if the
 


Dhody, et al.            Expires March 31, 2016                 [Page 9]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


      percentage or the absolute difference between at least one of the
      bandwidth samples collected and the current bandwidth reservation
      is greater than or equal to the threshold value, the bandwidth
      samples collected during the Report-Interval are reported
      otherwise the bandwidth sample(s) are skipped.

   Report-Flow-Threshold:  This value is used to decide when the real-
      time traffic bandwidth samples should be reported immediately when
      there is a sudden change in traffic demand.  If the percentage or
      absolute difference between the current bandwidth sample and the
      current bandwidth reservation is greater than or equal to the
      flow-threshold value, all the bandwidth samples collected so far
      are reported to the PCE immediately.

4.2.  Theory of Operation

   The traffic rate is periodically sampled at each sample-interval
   (which can be configured by the user and the default value as 5
   minutes) by the head-end node of the LSP.  The sampled traffic rates
   are accumulated over the adjustment-interval period (which can be
   configured by the user and the default value as 24 hours).  The PCEP
   peer which is in-charge of calculating the bandwidth to be adjusted,
   will adjust the bandwidth of the LSP to the highest sampled traffic
   rate (MaxAvgBw) amongst the set of bandwidth samples collected over
   the adjustment-interval.

   Note that the highest sampled traffic rate could be higher or lower
   than the current LSP bandwidth.  Only if the difference between the
   current bandwidth demand (MaxAvgBw) and the current bandwidth
   reservation is greater than or equal to the Adjustment-Threshold
   (percentage or absolute value), the LSP bandwidth is adjusted to the
   current bandwidth demand (MaxAvgBw).  Some LSPs are less eventful
   while other LSPs may encounter a lot of changes in the traffic
   pattern.  PCE sets the intervals for reporting and adjustment based
   on the traffic pattern of the LSP.

   In order to avoid frequent re-signaling, an operator may set a longer
   adjustment-interval value.  However, longer adjustment-interval can
   result in an undesirable effect of masking sudden changes in traffic
   demands of an LSP.  To avoid this, the Auto-Bandwidth feature may
   pre-maturely expire the adjustment-interval and adjust the LSP
   bandwidth to accommodate the sudden bursts of increase in traffic
   demand as an overflow condition or decrease in traffic demand as an
   underflow condition.

   In case of Deployment model 2, the PCC reports the real-time
   bandwidth-usage information and the PCE decides the adjusted
   bandwidth.  Multiple bandwidth samples are collected every report-
 


Dhody, et al.            Expires March 31, 2016                [Page 10]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   interval, and reported together to the PCE.  To avoid reporting minor
   changes in real-time bandwidth-usage, report-threshold is used, to
   suppress the sending of the collected samples during the report-
   interval.  The collected samples are reported if at least one sample
   crosses the Report-Threshold (percentage or absolute value).  In
   order to accommodate sudden changes in the bandwidth usage, report-
   flow-threshold is employed by pre-maturely expiry of the report-
   interval to report the unreported bandwidth samples collected so far.

   All thresholds in this document could be represented in both absolute
   value and percentage, and could be used together.

4.3.  Scaling Considerations

   There are potential scaling concerns for the model where PCC (ingress
   LSR) reports real-time bandwidth-usage information to the stateful
   PCE for a large number of LSPs.  It is recommended to combine
   multiple bandwidth samples (BwSamples) using larger report-interval
   and report them together to the PCE, thus reducing the number of
   PCRpt messages.  Further Report-Threshold can be use to skip
   reporting the bandwidth samples for small changes in the bandwidth.

   The processing cost of monitoring a large number of LSPs at the PCC
   and handling bandwidth change requests at PCE should be taken into
   consideration.  Note that, this will be implementation dependent.

5.  Extensions to the PCEP

5.1.  AUTO-BANDWIDTH-ATTRIBUTE TLV

   The AUTO-BANDWIDTH-ATTRIBUTE TLV can be included as an optional TLV
   in the LSPA Object (as described in [RFC5440]).  Whenever the LSP
   with Auto-Bandwidth feature enabled is delegated,
   AUTO-BANDWIDTH-ATTRIBUTE TLV is carried in PCRpt message in LSPA
   Object.  The TLV provides PCE with the 'configurable knobs' of this
   feature.  In case of PCE-Initiated LSP
   ([I-D.ietf-pce-pce-initiated-lsp]) with Auto-Bandwidth feature
   enabled, this TLV is included in LSPA Object with PCInitiate message.

   The format of the AUTO-BANDWIDTH-ATTRIBUTE TLV is shown in the
   following figure:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=[TBD1]         |           Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
 


Dhody, et al.            Expires March 31, 2016                [Page 11]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   //                            sub-TLVs                          //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    AUTO-BANDWIDTH-ATTRIBUTE TLV format

   Type: TBD1

   Length: Variable

   Value: This comprises one or more sub-TLVs.

   Following sub-TLVs are defined in this document:

   Type Len Name
   -------------------------------------------------------------------
    1   4   Sample-Interval sub-TLV
    2   4   Adjustment-Interval sub-TLV
    3   4   Adjustment-Threshold sub-TLV
    4   4   Adjustment-Threshold-Percentage sub-TLV
    5   4   Minimum-Bandwidth sub-TLV
    6   4   Maximum-Bandwidth sub-TLV
    7   8   Overflow-Threshold sub-TLV
    8   4   Overflow-Threshold-Percentage sub-TLV
    9   8   Underflow-Threshold sub-TLV
   10   4   Underflow-Threshold-Percentage sub-TLV

   Future specification can define additional sub-TLVs.

   The presence of AUTO-BANDWIDTH-ATTRIBUTE TLV in LSPA Object means
   that the automatic bandwidth adjustment feature is enabled.  All
   sub-TLVs are optional and any unrecognized sub-TLV MUST be silently
   ignored.  If a sub-TLV of same type appears more than once, only the
   first occurrence is processed and all others MUST be ignored.

   The AUTO-BANDWIDTH-ATTRIBUTE TLV can also be carried in PCUpd message
   in LSPA Object in order to make updates to auto-bandwidth attributes
   such as Adjustment-Interval.

   If sub-TLVs are not present, the default values based on the local
   policy are assumed.

   The sub-TLVs are encoded to inform the PCEP peer the various sampling
   and adjustment parameters, and serves the following purpose -

   o  For PCE-Initiated LSPs, inform the PCC of the various sampling and
      adjustment parameters.

 


Dhody, et al.            Expires March 31, 2016                [Page 12]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   o  For PCC-Initiated LSPs in the Deployment Model 2 (where PCE
      decides the adjusted bandwidth), inform the PCE of the various
      sampling and adjustment parameters.

   The following sub-sections describe the sub-TLVs which are currently
   defined to be carried within the AUTO-BANDWIDTH-ATTRIBUTE TLV.

5.1.1.  Sample-Interval sub-TLV

   The Sample-Interval sub-TLV specifies a time interval in seconds at
   which traffic samples are collected at the PCC.

   The Type is 1, Length is 4, and the value comprises of 4-octet time
   interval, the valid range is from 1 to 604800, in seconds.  The
   default value is 300 seconds.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=1              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Sample-Interval                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Sample-Interval sub-TLV format

5.1.2.  Adjustment-Interval sub-TLV

   The Adjustment-Interval sub-TLV specifies a time interval in seconds
   at which bandwidth adjustment should be made.

   The Type is 2, Length is 4, and the value comprises of 4-octet time
   interval, the valid range is from 1 to 604800, in seconds.  The
   default value is 300 seconds.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=2              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Adjustment-Interval                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Adjustment-Interval sub-TLV format

5.1.3.  Adjustment Threshold

   The sub-TLVs in this section are encoded to inform the PCEP peer the
 


Dhody, et al.            Expires March 31, 2016                [Page 13]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   adjustment threshold parameters.  An implementation MAY include both
   sub-TLVs for the absolute value and the percentage, in which case the
   bandwidth is adjusted when either of the adjustment threshold
   conditions are met.

5.1.3.1.  Adjustment-Threshold sub-TLV

   The Adjustment-Threshold sub-TLV is used to decide when the LSP
   bandwidth should be adjusted.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=3              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Adjustment Threshold                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Adjustment-Threshold sub-TLV format

   The Type is 3, Length is 4, and the value comprises of -

   o  Adjustment Threshold: The absolute Adjustment-Threshold bandwidth
      value, encoded in IEEE floating point format (see
      [IEEE.754.1985]), expressed in bytes per second.  Refer to Section
      3.1.2 of [RFC3471] for a table of commonly used values.

      If the difference between the current MaxAvgBw and the current
      bandwidth reservation is greater than or equal to the threshold
      value, the LSP bandwidth is adjusted to the current bandwidth
      demand.

5.1.3.2.  Adjustment-Threshold-Percentage sub-TLV

   The Adjustment-Threshold-Percentage sub-TLV is used to decide when
   the LSP bandwidth should be adjusted.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=4              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Reserved                       |  Percentage |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Adjustment-Threshold-Percentage sub-TLV format

   The Type is 4, Length is 4, and the value comprises of -
 


Dhody, et al.            Expires March 31, 2016                [Page 14]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.

   o  Percentage: The Adjustment-Threshold value, encoded in percentage
      (an integer from 0 to 100).  If the percentage difference between
      the current MaxAvgBw and the current bandwidth reservation is
      greater than or equal to the threshold percentage, the LSP
      bandwidth is adjusted to the current bandwidth demand.

5.1.4.  Minimum and Maximum Bandwidth Values

5.1.4.1.  Minimum-Bandwidth sub-TLV

   The Minimum-Bandwidth sub-TLV specify the minimum bandwidth allowed
   for the LSP, and is expressed in bytes per second.  The LSP bandwidth
   cannot be adjusted below the minimum bandwidth value.

   The Type is 5, Length is 4, and the value comprises of 4-octet
   bandwidth value encoded in IEEE floating point format (see
   [IEEE.754.1985]), expressed in bytes per second.  Refer to Section
   3.1.2 of [RFC3471] for a table of commonly used values.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=5              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Minimum-Bandwidth                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Minimum-Bandwidth sub-TLV format

5.1.4.2.  Maximum-Bandwidth sub-TLV

   The Maximum-Bandwidth sub-TLV specify the maximum bandwidth allowed
   for the LSP, and is expressed in bytes per second.  The LSP bandwidth
   cannot be adjusted above the maximum bandwidth value.

   The Type is 6, Length is 4, and the value comprises of 4-octet
   bandwidth value encoded in IEEE floating point format (see
   [IEEE.754.1985]), expressed in bytes per second.  Refer to Section
   3.1.2 of [RFC3471] for a table of commonly used values.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=6              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 


Dhody, et al.            Expires March 31, 2016                [Page 15]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   |                        Maximum-Bandwidth                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Maximum-Bandwidth sub-TLV format

5.1.5.  Overflow and Underflow Condition

   The sub-TLVs in this section are encoded to inform the PCEP peer the
   overflow and underflow threshold parameters.  An implementation MAY
   include sub-TLVs for the absolute value and the percentage for the
   threshold, in which case the bandwidth is immediately adjusted when
   either of the adjustment threshold conditions are met consecutively
   for the given count.

5.1.5.1.  Overflow-Threshold sub-TLV

   The Overflow-Threshold sub-TLV is used to decide if the bandwidth
   should be adjusted immediately.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=7              |           Length=8            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Reserved                     |      Count    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Overflow Threshold                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Overflow-Threshold sub-TLV format

   The Type is 7, Length is 4, and the value comprises of -

   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.

   o  Count: The Overflow-Count value, encoded in integer.  The value 0
      is considered to be invalid.  The number of consecutive samples
      for which the overflow condition MUST be met for the LSP bandwidth
      to be immediately adjusted to the current bandwidth demand,
      bypassing the adjustment-interval.

   o  Overflow Threshold: The absolute Overflow-Threshold bandwidth
      value, encoded in IEEE floating point format (see
      [IEEE.754.1985]), expressed in bytes per second.  Refer to Section
      3.1.2 of [RFC3471] for a table of commonly used values. If the
      increase of the current MaxAvgBw from the current bandwidth
      reservation is greater than or equal to the threshold value, the
 


Dhody, et al.            Expires March 31, 2016                [Page 16]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


      overflow condition is met.

5.1.5.2.  Overflow-Threshold-Percentage sub-TLV

   The Overflow-Threshold-Percentage sub-TLV is used to decide if the
   bandwidth should be adjusted immediately.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=8              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Percentage |    Reserved                     |      Count    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Overflow-Threshold-Percentage sub-TLV format

   The Type is 8, Length is 4, and the value comprises of -


   o  Percentage: The Overflow-Threshold value, encoded in percentage
      (an integer from 0 to 100).  If the percentage increase of the
      current MaxAvgBw from the current bandwidth reservation is greater
      than or equal to the threshold percentage, the overflow condition
      is met.

   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.

   o  Count: The Overflow-Count value, encoded in integer.  The value 0
      is considered to be invalid.  The number of consecutive samples
      for which the overflow condition MUST be met for the LSP bandwidth
      to be immediately adjusted to the current bandwidth demand,
      bypassing the adjustment-interval.

5.1.5.3.  Underflow-Threshold sub-TLV

   The Underflow-Threshold sub-TLV is used to decide if the bandwidth
   should be adjusted immediately.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=9              |           Length=8            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Reserved                     |      Count    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Underflow Threshold                      |
 


Dhody, et al.            Expires March 31, 2016                [Page 17]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Underflow-Threshold sub-TLV format

   The Type is 9, Length is 8, and the value comprises of -

   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.

   o  Count: The Underflow-Count value, encoded in integer.  The value 0
      is considered to be invalid.  The number of consecutive samples
      for which the underflow condition MUST be met for the LSP
      bandwidth to be immediately adjusted to the current bandwidth
      demand, bypassing the adjustment-interval.

   o  Underflow Threshold: The absolute Underflow-Threshold bandwidth
      value, encoded in IEEE floating point format (see
      [IEEE.754.1985]), expressed in bytes per second.  Refer to Section
      3.1.2 of [RFC3471] for a table of commonly used values.  If the
      decrease of the current MaxAvgBw from the current bandwidth
      reservation is greater than or equal to the threshold value, the
      underflow condition is met.

5.1.5.4.  Underflow-Threshold-Percentage sub-TLV

   The Underflow-Threshold-Percentage sub-TLV is used to decide if the
   bandwidth should be adjusted immediately.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=10             |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Percentage |    Reserved                     |      Count    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Underflow-Threshold-Percentage sub-TLV format

   The Type is 10, Length is 4, and the value comprises of -

   o  Percentage: The Underflow-Threshold value, encoded in percentage
      (an integer from 0 to 100).  If the percentage decrease of the
      current MaxAvgBw from the current bandwidth reservation is greater
      than or equal to the threshold percentage, the underflow condition
      is met.

   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.
 


Dhody, et al.            Expires March 31, 2016                [Page 18]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   o  Count: The Underflow-Count value, encoded in integer.  The value 0
      is considered to be invalid.  The number of consecutive samples
      for which the underflow condition MUST be met for the LSP
      bandwidth to be immediately adjusted to the current bandwidth
      demand, bypassing the adjustment-interval.

5.2.  BANDWIDTH-USAGE-ATTRIBUTE TLV

   The BANDWIDTH-USAGE-ATTRIBUTE TLV can be included as an optional TLV
   in the LSPA Object (as described in [RFC5440]).  Whenever the LSP
   Bandwidth Usage needs to be reported to the PCE, the BANDWIDTH-USAGE-
   ATTRIBUTE TLV is carried in PCRpt message in LSPA Object.  The TLV
   provides PCE with the 'configurable knobs' of this feature.  In case
   of PCE-Initiated LSP ([I-D.ietf-pce-pce-initiated-lsp]), this TLV is
   included in the LSPA Object with PCInitiate message.

   The format of the BANDWIDTH-USAGE-ATTRIBUTE TLV is shown in the
   following figure:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=[TBD2]         |           Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   //                            sub-TLVs                          //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    BANDWIDTH-USAGE-ATTRIBUTE TLV format

   Type: TBD2

   Length: Variable

   Value: This comprises one or more sub-TLVs.

   Following sub-TLVs are defined in this document:

   Type Len Name
   -------------------------------------------------------------------
   1    4   Bandwidth-Usage-Report-Interval sub-TLV
   2    4   Bandwidth-Usage-Report-Threshold sub-TLV
   3    4   Bandwidth-Usage-Report-Threshold-Percentage sub-TLV
   4    4   Bandwidth-Usage-Report-Flow-Threshold sub-TLV
   5    4   Bandwidth-Usage-Report-Flow-Threshold-Percentage sub-TLV

   Future specification can define additional sub-TLVs.
 


Dhody, et al.            Expires March 31, 2016                [Page 19]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   The presence of BANDWIDTH-USAGE-ATTRIBUTE TLV in LSPA Object means
   that the  bandwidth usage reporting to PCE is enabled.  All sub-TLVs
   are optional and any unrecognized sub-TLV MUST be silently ignored. 
   If a sub-TLV of same type appears more than once, only the first
   occurrence is processed and all others MUST be ignored.

   The BANDWIDTH-USAGE-ATTRIBUTE TLV can also be carried in PCUpd
   message in LSPA Object in order to make updates to the attributes
   such as Bandwidth-Usage-Report-Interval.

   If sub-TLVs are not present, the default values based on the local
   policy are assumed.

   The following sub-sections describe the sub-TLVs which are currently
   defined to be carried within the BANDWIDTH-USAGE-ATTRIBUTE TLV.

5.2.1.  Bandwidth-Usage-Report-Interval sub-TLV

   The Bandwidth-Usage-Report-Interval sub-TLV specifies a time interval
   in seconds in which collected bandwidth samples should be reported to
   PCE.

   The Type is 1, Length is 4, and the value comprises of 4-octet time
   interval, the valid range is from 1 to 604800, in seconds.  Default
   value is 3600 seconds.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=1              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Bandwidth-Usage-Report-Interval                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Bandwidth-Usage-Report-Interval sub-TLV format


5.2.2.  Bandwidth-Usage-Report-Threshold sub-TLV

   The Bandwidth-Usage-Report-Threshold sub-TLV is used to decide when
   the bandwidth samples collected so far should be reported
   immediately, bypassing the report-interval.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=2              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 


Dhody, et al.            Expires March 31, 2016                [Page 20]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   |              Bandwidth-Usage-Report Threshold                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Bandwidth-Usage-Report-Threshold sub-TLV format

   The Type is 2, Length is 4, and the value comprises of -

   o  Threshold: The absolute threshold bandwidth value, encoded in IEEE
      floating point format (see [IEEE.754.1985]), expressed in bytes
      per second.  Refer to Section 3.1.2 of [RFC3471] for a table of
      commonly used values.  If the increase or the decrease of at least
      one of the bandwidth samples (BwSamples) collected so far compared
      to the current bandwidth reservation is greater than or equal to
      the threshold value, the bandwidth samples collected so far are
      reported.

5.2.3.  Bandwidth-Usage-Report-Threshold-Percentage sub-TLV

   The Bandwidth-Usage-Report-Threshold-Percentage sub-TLV is used to
   decide when the bandwidth samples collected so far should be reported
   immediately, bypassing the report-interval.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=3              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Reserved                       |  Percentage |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

       Bandwidth-Usage-Report-Threshold-Percentage sub-TLV format

   The Type is 3, Length is 4, and the value comprises of -

   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.

   o  Percentage: The threshold value, encoded in percentage (an integer
      from 0 to 100).  If the percentage increase or the decrease of at
      least one of the bandwidth sample (BwSample) compared to the
      current bandwidth reservation is greater than or equal to the
      threshold percentage, the bandwidth samples collected so far are
      reported.

5.2.4.  Bandwidth-Usage-Report-Flow-Threshold sub-TLV

   The Bandwidth-Usage-Report-Flow-Threshold sub-TLV is used to decide
   when the bandwidth samples collected should be reported immediately,
 


Dhody, et al.            Expires March 31, 2016                [Page 21]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   bypassing the report-interval.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=4              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Bandwidth-Usage-Report-Flow Threshold               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          Bandwidth-Usage-Report-Flow-Threshold sub-TLV format

   The Type is 4, Length is 4, and the value comprises of -

   o  Threshold: The absolute flow threshold bandwidth value, encoded in
      IEEE floating point format (see [IEEE.754.1985]), expressed in
      bytes per second.  Refer to Section 3.1.2 of [RFC3471] for a table
      of commonly used values.  If the increase or the decrease of the
      current bandwidth sample (BwSample) compared to the current
      bandwidth reservation is greater than or equal to the flow
      threshold value, all the bandwidth samples collected so far are
      reported immediately, bypassing the report-interval.

5.2.5.  Bandwidth-Usage-Report-Flow-Threshold-Percent sub-TLV

   The Bandwidth-Usage-Report-Flow-Threshold-Percent sub-TLV is used to
   decide when the bandwidth samples collected should be reported
   immediately, bypassing the report-interval.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type=5              |           Length=4            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Reserved                       |  Percentage |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

     Bandwidth-Usage-Report-Flow-Threshold-Percentage sub-TLV format

   The Type is 5, Length is 4, and the value comprises of -

   o  Reserved: SHOULD be set to zero on transmission and MUST be
      ignored on receipt.

   o  Percentage: The flow threshold value, encoded in percentage (an
      integer from 0 to 100).  If the percentage increase or the
      decrease of the current bandwidth sample (BwSample) compared to
      the current bandwidth reservation is greater than or equal to the
 


Dhody, et al.            Expires March 31, 2016                [Page 22]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


      threshold percentage, all the bandwidth samples collected so far
      are reported immediately, bypassing the report-interval.

5.3.  BANDWIDTH Object

5.3.1.  Auto-Bandwidth Adjusted Bandwidth

   As per [RFC5440], the BANDWIDTH object is defined with two
   Object-Type values as following:

   o  Requested Bandwidth: BANDWIDTH Object-Type value is 1.

   o  Re-optimization Bandwidth: Bandwidth of an existing TE LSP for
      which a re-optimization is requested.  BANDWIDTH Object-Type value
      is 2.

   In the first model, where PCC calculates the adjusted bandwidth, PCC
   only reports the calculated bandwidth to be adjusted (MaxAvgBw) to
   the PCE.  This is done via the existing 'Requested Bandwidth with
   BANDWIDTH Object-Type as 1.

5.3.2.  Bandwidth-Usage Report

   A new BANDWIDTH object-type is defined to report the real-time
   bandwidth usage of a TE LSP.

   The Object-type is [TBD3], the object length is variable with
   multiples of 4 bytes.  The payload format is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        BwSample1                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           ...                                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        BwSampleN                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          Bandwidth-Usage format

   o  BwSample: The actual bandwidth usage, (the BwSample collected at
      the end of each sample-interval) encoded in IEEE floating point
      format (see [IEEE.754.1985]), expressed in bytes per second.

   The Bandwidth-Usage object-type is used in the second deployment
   model where PCC reports the TE LSP bandwidth usage and the PCE
   decides the Auto-Bandwidth adjusted bandwidth.
 


Dhody, et al.            Expires March 31, 2016                [Page 23]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   The Bandwidth-Usage object-type can also be used for TE LSPs without
   enabling the Auto-Bandwidth feature, to learn the actual bandwidth
   usage of the LSPs for other applications at the stateful PCE, details
   of which are beyond the scope of this document.


5.4.  The PCRpt Message

   When LSP is delegated to a PCE for the very first time, BANDWIDTH
   object of type 1 is used to specify the requested bandwidth in the
   PCRpt message.

   When the LSP is enabled with the Auto-Bandwidth feature, and
   BANDWIDTH-USAGE-ATTRIBUTE TLV is not present (Deployment model 1),
   PCC SHOULD include the BANDWIDTH object of type 1 to specify the
   calculated bandwidth to be adjusted to the PCE in the PCRpt message.

   When the LSP is enabled with the Auto-Bandwidth feature, and
   BANDWIDTH-USAGE-ATTRIBUTE TLV is present (Deployment model 2), PCC
   SHOULD include the BANDWIDTH object of type [TBD] to report the
   real-time bandwidth-usage to the PCE in the PCRpt message.

   The definition of the PCRpt message (see [I-D.ietf-pce-stateful-pce])
   is unchanged by this document.

5.5.  The PCInitiate Message

   For PCE-initiated LSP [I-D.ietf-pce-pce-initiated-lsp] with Auto-
   Bandwidth feature enabled, AUTO-BANDWIDTH-ATTRIBUTE TLV MUST be
   included in LSPA object with the PCInitiate message.  The rest of the
   processing remains unchanged.

6.  Security Considerations

   This document defines a new BANDWIDTH type, AUTO-BANDWIDTH-ATTRIBUTE
   TLV and BANDWIDTH-USAGE_ATTRIBUTE TLV which do not add any new
   security concerns beyond those discussed in [RFC5440] and
   [I-D.ietf-pce-stateful-pce].

   Some deployments may find the reporting of the real-time bandwidth-
   usage information as extra sensitive and thus should employ suitable
   PCEP security mechanisms like TCP-AO or [I-D.ietf-pce-pceps].

7.  Manageability Considerations

7.1.  Control of Function and Policy

   The Auto-Bandwidth feature MUST BE controlled per tunnel (at ingress
 


Dhody, et al.            Expires March 31, 2016                [Page 24]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


   (PCC) or PCE), the values for parameters like sample-interval,
   adjustment-interval, minimum-bandwidth, maximum-bandwidth,
   adjustment-threshold, report-interval, report-threshold SHOULD be
   configurable by an operator.

7.2.  Information and Data Models

   [RFC7420] describes the PCEP MIB, there are no new MIB Objects
   defined in this document.

7.3.  Liveness Detection and Monitoring

   Mechanisms defined in this document do not imply any new liveness
   detection and monitoring requirements in addition to those already
   listed in [RFC5440].

7.4.  Verify Correct Operations

   Mechanisms defined in this document do not imply any new operation
   verification requirements in addition to those already listed in
   [RFC5440].

7.5.  Requirements On Other Protocols

   Mechanisms defined in this document do not add any new requirements
   on other protocols.

7.6.  Impact On Network Operations

   Mechanisms defined in this document do not have any impact on network
   operations in addition to those already listed in [RFC5440].

















 


Dhody, et al.            Expires March 31, 2016                [Page 25]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


8.  IANA Considerations

8.1.  PCEP TLV Type Indicators

   This document defines the following new PCEP TLVs; IANA is requested
   to make the following allocations from this registry.
   http://www.iana.org/assignments/pcep/pcep.xhtml#pcep-tlv-type-
   indicators

   Value     Name                        Reference
   TBD1      AUTO-BANDWIDTH-ATTRIBUTE    [This I.D.]
   TBD2      BANDWIDTH-USAGE-ATTRIBUTE   [This I.D.]

8.2.  AUTO-BANDWIDTH-ATTRIBUTE Sub-TLV

   This document specifies the AUTO-BANDWIDTH-ATTRIBUTE Sub-TLVs.  IANA
   is requested to create an "AUTO-BANDWIDTH-ATTRIBUTE Sub-TLV Types"
   sub- registry in the "PCEP TLV Type Indicators" for the sub-TLVs
   carried in the AUTO-BANDWIDTH-ATTRIBUTE TLV.  This document defines
   the following types:

   Type Name                                           Reference
   --------------------------------------------------------------
    0   Reserved                                      [This I.D.]
    1   Sample-Interval sub-TLV                       [This I.D.]
    2   Adjustment-Interval sub-TLV                   [This I.D.]
    3   Adjustment-Threshold sub-TLV                  [This I.D.]
    4   Adjustment-Threshold-Percentage sub-TLV       [This I.D.]
    5   Minimum-Bandwidth sub-TLV                     [This I.D.]
    6   Maximum-Bandwidth sub-TLV                     [This I.D.]
    7   Overflow-Threshold sub-TLV                    [This I.D.]
    8   Overflow-Threshold-Percentage sub-TLV         [This I.D.]
    9   Underflow-Threshold sub-TLV                   [This I.D.]
   10   Underflow-Threshold-Percentage sub-TLV        [This I.D.]
   11-  Unassigned                                    [This I.D.]
   65535

8.3.  BANDWIDTH-USAGE-ATTRIBUTE Sub-TLV

   This document specifies the BANDWIDTH-USAGE-ATTRIBUTE Sub-TLVs.  IANA
   is requested to create an "BANDWIDTH-USAGE-ATTRIBUTE Sub-TLV Types"
   sub-registry in the "PCEP TLV Type Indicators" for the sub-TLVs
   carried in the BANDWIDTH-USAGE-ATTRIBUTE TLV.  This document defines
   the following types:

   Type Name                                           Reference
   --------------------------------------------------------------
    0   Reserved                                      [This I.D.]
 


Dhody, et al.            Expires March 31, 2016                [Page 26]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


    1   Bandwidth-Usage-Report-Interval sub-TLV       [This I.D.]
    2   Bandwidth-Usage-Report-Threshold sub-TLV      [This I.D.]
    3   Bandwidth-Usage-Report-Threshold-Percentage   [This I.D.]
        sub-TLV
    4   Bandwidth-Usage-Report-Flow-Threshold         [This I.D.]
        sub-TLV
    5   Bandwidth-Usage-Report-Flow-Threshold         [This I.D.]
        -Percentage sub-TLV
    6-  Unassigned                                    [This I.D.]
   65535


8.4.  BANDWIDTH Object

   This document defines new object type for the BANDWIDTH object; IANA
   is requested to make the following allocations from this registry.
   http://www.iana.org/assignments/pcep/pcep.xhtml#pcep-objects

   Object-Class Value   Name                               Reference
    5                   BANDWIDTH                          [This I.D.]
                        Object-Type
                        TBD3: Bandwidth-Usage Report


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5440]  Vasseur, JP. and JL. Le Roux, "Path Computation Element
              (PCE) Communication Protocol (PCEP)", RFC 5440, March
              2009.

   [I-D.ietf-pce-stateful-pce]
              Crabbe, E., Minei, I., Medved, J., and R. Varga, 
              "PCEP Extensions for Stateful PCE", 
              draft-ietf-pce-stateful-pce-11 (work in progress), 
              April 2015.

   [I-D.ietf-pce-pce-initiated-lsp]
              Crabbe, E., Minei, I., Sivabalan, S., and R. Varga, 
              "PCEP Extensions for PCE-initiated LSP Setup in a 
              Stateful PCE Model", draft-ietf-pce-pce-initiated-lsp-04
              (work in progress), April 2015.

   [IEEE.754.1985]
 


Dhody, et al.            Expires March 31, 2016                [Page 27]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


              Institute of Electrical and Electronics Engineers, 
              "Standard for Binary Floating-Point Arithmetic", 
              IEEE Standard 754, August 1985.


9.2.  Informative References

   [RFC3471]  Berger, L., "Generalized Multi-Protocol Label Switching
              (GMPLS) Signaling Functional Description", RFC 3471,
              January 2003.

   [RFC7420]  Koushik, A., Stephan, E., Zhao, Q., King, D., and J.
              Hardwick, "Path Computation Element Communication Protocol
              (PCEP) Management Information Base (MIB) Module", RFC
              7420, December 2014.

   [I-D.ietf-pce-stateful-pce-app]
              Zhang, X. and I. Minei, "Applicability of a Stateful Path 
              Computation Element (PCE)", 
              draft-ietf-pce-stateful-pce-app-04 (work in progress),
              April 2015.

   [I-D.ietf-pce-pceps]
              Lopez, D., Dios, O., Wu, W., and D. Dhody, "Secure 
              Transport for PCEP", draft-ietf-pce-pceps-04 (work 
              in progress), May 2015.






















 


Dhody, et al.            Expires March 31, 2016                [Page 28]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


Acknowledgments

   Authors would like to thank Venugopal Reddy, Reeja Paul, Sandeep
   Boina and Avantika for their useful comments and suggestions.


Contributors' Addresses

   He Zekun
   Tencent Holdings Ltd,
   Shenzhen P.R.China

   Email: kinghe@tencent.com


   Xian Zhang
   Huawei Technologies
   Research Area F3-1B,
   Huawei Industrial Base,
   Shenzhen, 518129
   China

   Phone: +86-755-28972645
   Email: zhang.xian@huawei.com


   Young Lee
   Huawei Technologies
   1700 Alma Drive, Suite 100
   Plano, TX  75075
   USA

   Phone: +1 972 509 5599 x2240
   Fax:   +1 469 229 5397
   EMail: leeyoung@huawei.com













 


Dhody, et al.            Expires March 31, 2016                [Page 29]

Internet-Draft          AUTO-BW for Stateful PCE      September 28, 2015


Authors' Addresses

   Dhruv Dhody
   Huawei Technologies
   Divyashree Techno Park, Whitefield
   Bangalore, Karnataka  560037
   India

   EMail: dhruv.ietf@gmail.com


   Udayasree Palle
   Huawei Technologies
   Divyashree Techno Park, Whitefield
   Bangalore, Karnataka  560037
   India

   EMail: udayasree.palle@huawei.com


   Ravi Singh
   Juniper Networks
   1194 N. Mathilda Ave.
   Sunnyvale, CA  94089
   USA

   EMail: ravis@juniper.net


   Rakesh Gandhi
   Cisco Systems, Inc.

   EMail: rgandhi@cisco.com


   Luyuan Fang
   Microsoft
   15590 NE 31st St
   Redmond, WA  98052
   USA

   EMail: lufang@microsoft.com









Dhody, et al.            Expires March 31, 2016                [Page 30]
