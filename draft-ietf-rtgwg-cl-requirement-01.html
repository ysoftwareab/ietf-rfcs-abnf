<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Requirements for MPLS Over a Composite Link</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Requirements for MPLS Over a Composite Link">
<meta name="keywords" content="MPLS, composite link, link aggregation, ECMP, link bundling, delay metric">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">RTGWG</td><td class="header">C. Villamizar, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Infinera Corporation</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">D. McDysan, Ed.</td></tr>
<tr><td class="header">Expires: January 9, 2011</td><td class="header">S. Ning</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Malis</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Verizon</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">L. Yong</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Huawei USA</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 8, 2010</td></tr>
</table></td></tr></table>
<h1><br />Requirements for MPLS Over a Composite Link<br />draft-ietf-rtgwg-cl-requirement-01</h1>

<h3>Abstract</h3>

<p>
	There is often a need to provide large aggregates of bandwidth
	that is best provided using parallel links between routers or
	MPLS LSR.  In core networks there is often no alternative
	since the aggregate capacities of core networks today far
	exceed the capacity of a single physical link or single packet
	processing element. Furthermore, links may be composed of
	network elements operating across multiple layers.
      
</p>
<p>
	The presence of parallel links, potentially comprised of
	multiple layers has resulted in a additional requirements.
	Certain services may benefit from being restricted to a subset
	of the set of composite link component links or a specific
	component link, where component link characteristics, such as
	latency, differ.  Certain services require that LSP be treated
	as atomic and avoid reordering.  Other services will continue
	to require only that reordering not occur with a microflow as
	is current practice.
      
</p>
<p>
	Current practice related to multipath is described briefly in
	an appendix.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 9, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements Language<br />
<a href="#assumptions">2.</a>&nbsp;
Assumptions<br />
<a href="#def">3.</a>&nbsp;
Definitions<br />
<a href="#FR">4.</a>&nbsp;
Network Operator Functional Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#it-works">4.1.</a>&nbsp;
Availability, Stability and Transient Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#layering">4.2.</a>&nbsp;
Component Links Provided by Lower Layer
	       Networks<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multipath-diff">4.3.</a>&nbsp;
Parallel Component Links with Different Characteristics<br />
<a href="#DR">5.</a>&nbsp;
Derived Requirements<br />
<a href="#Acknowledgements">6.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">7.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">8.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references3">9.3.</a>&nbsp;
Appendix References<br />
<a href="#story-time">Appendix&nbsp;A.</a>&nbsp;
More Details on Existing Network Operator
	     Practices and Protocol Usage<br />
<a href="#multipath-bcp">Appendix&nbsp;B.</a>&nbsp;
Existing Multipath Standards and Techniques<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multipath-common">B.1.</a>&nbsp;
Common Multpath Load Spliting Techniques<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multipath-active">B.2.</a>&nbsp;
Simple and Adaptive Load Balancing Multipath<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multipath-lag">B.3.</a>&nbsp;
Traffic Split over Parallel Links<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multipath-mp">B.4.</a>&nbsp;
Traffic Split over Multiple Paths<br />
<a href="#G.800-Definitions">Appendix&nbsp;C.</a>&nbsp;
ITU-T G.800 Composite Link Definitions and Terminology<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	The purpose of this document is to describe why network
	operators require certain functions in order to solve certain
	business problems (<a class='info' href='#assumptions'>Section&nbsp;2<span> (</span><span class='info'>Assumptions</span><span>)</span></a>). The intent
	is to first describe why things need to be done in terms of
	functional requirements that are as independent as possible of
	protocol specifications (<a class='info' href='#FR'>Section&nbsp;4<span> (</span><span class='info'>Network Operator Functional Requirements</span><span>)</span></a>). For certain
	functional requirements this document describes a set of
	derived protocol requirements (<a class='info' href='#DR'>Section&nbsp;5<span> (</span><span class='info'>Derived Requirements</span><span>)</span></a>).  Three
	appendices provide supporting details as a summary of
	existing/prior operator approaches, a summary of implementation
	techniques and relevant protocol standards, and a summary of G.800
	terminology used to define the concept of a composite link.
	(<a class='info' href='#multipath-bcp'>Appendix&nbsp;B<span> (</span><span class='info'>Existing Multipath Standards and Techniques</span><span>)</span></a>).
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Language</h3>

<p>
	  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
          "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
          and "OPTIONAL" in this document are to be interpreted as
          described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
	
</p>
<a name="assumptions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Assumptions</h3>

<p>
	The services supported include L3VPN, L2VPN (VPWS and VPLS),
	Internet traffic encapsulated by at least one MPLS label, and
	dynamically signaled MPLS-TP LSPs and pseudowires. The MPLS
	LSPs supporting these services may be pt-pt, pt-mpt, or
	mpt-mpt.
      
</p>
<p>
	The location in a network where these requirements apply are a
	Label Edge Router (LER) or a Label Switch Router (LSR) as
	defined in <a class='info' href='#RFC3031'>RFC 3031<span> (</span><span class='info'>Rosen, E., Viswanathan, A., and R. Callon, &ldquo;Multiprotocol Label Switching Architecture,&rdquo; January&nbsp;2001.</span><span>)</span></a> [RFC3031].
      
</p>
<p>
	The IP DSCP cannot be used for flow identification since L3VPN
	requires Diffserv transparency (see <a class='info' href='#RFC4031'>RFC
	4031 5.5.2<span> (</span><span class='info'>Carugi, M. and D. McDysan, &ldquo;Service Requirements for Layer 3 Provider Provisioned Virtual Private Networks (PPVPNs),&rdquo; April&nbsp;2005.</span><span>)</span></a> [RFC4031]), and in general network operators do not
	rely on the DSCP of Internet packets.

      
</p>
<a name="def"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Definitions</h3>

<p>
	</p>
<blockquote class="text"><dl>
<dt>Composite Link:</dt>
<dd>
	    
	    <a class='info' href='#ITU-T.G.800'>Section 6.9.2 of
	    ITU-T-G.800<span> (</span><span class='info'>ITU-T, &ldquo;Unified functional architecture of transport           networks,&rdquo; 2007.</span><span>)</span></a> [ITU&#8209;T.G.800] defines composite link as summarized in
	    Appendix
	    <a class='info' href='#G.800-Definitions'>Appendix&nbsp;C<span> (</span><span class='info'>ITU-T G.800 Composite Link Definitions and Terminology</span><span>)</span></a>. The following
	    definitions map the ITU-T G.800 terminology into IETF
	    terminology which is used in this document.
	    
<blockquote class="text"><dl>
<dt>Multiple parallel links:</dt>
<dd>
		When multiple parallel component links between the an
		LER/LSR and another LER/LSR.
	      
</dd>
<dt>Multi-layer Component Link:</dt>
<dd>
		A component link that is formed by other network
		elements at other layers.
	      
</dd>
</dl></blockquote>
	  
</dd>
<dt>Component Link:</dt>
<dd>
	    A physical link (e.g., Lambda, Ethernet PHY, SONET/SDH,
  	    OTN, etc.) with packet transport capability, or a logical
  	    link (e.g., MPLS LSP, Ethernet VLAN, MPLS-TP LSP, etc.)
	  
</dd>
<dt>Flow:</dt>
<dd>
	    A sequence of packets that must be transferred on one component
	    link.

	  
</dd>
<dt>Flow identification:</dt>
<dd>
	    The label stack and other information that uniquely
	    identifies a flow.  Other information in flow
	    identification may include an IP header, PW control word,
	    Ethernet MAC address, etc.  Note that an LSP may contain
	    one or more Flows or an LSP may be equivalent to a Flow.
	    Flow identification is used to locally select a component
	    link, or a path through the network toward the
	    destination.
	  
</dd>
</dl></blockquote><p>
      
</p>
<a name="FR"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Network Operator Functional Requirements</h3>

<p>
	The Functional Requirements in this section are grouped in
	subsections starting with the highest priority.
      
</p>
<a name="it-works"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Availability, Stability and Transient Response</h3>

<p>
	  Limiting the period of unavailability in response to
	  failures or transient events is extremely important as well
	  as maintaining stability. The transient period between some
	  service disrupting event and the convergence of the routing
	  and/or signaling protocols MUST occur within a time frame
	  specified by SLA objectives. The timeframes range from rapid
	  restoration, on the order of 100 ms or less (e.g., for
	  VPWS), to several minutes (e.g., for L3VPN) and may differ
	  among the set of customers within a single service.
	  </p>
<blockquote class="text"><dl>
<dt>FR#1</dt>
<dd>
	      The solution SHALL provide a means to summarize routing
	      advertisements regarding the characteristics of a
	      composite link such that the routing protocol
	      convergence within the timeframe needed to meet the SLA
	      objective..
	    
</dd>
<dt>FR#2</dt>
<dd>
	      The solution SHALL provide a means for aggregating
	      signaling such that in response to a failure in the
	      worst case cross section of the network that MPLS LSPs
	      are restored within the timeframe needed to meet the SLA
	      objective.
	    
</dd>
<dt>FR#3</dt>
<dd>
	      The solution SHALL provide to select a path for a flow
	      across a network that contains a number of paths
	      comprised of pairs of nodes connected by composite links
	      in such a way as to automatically distribute the load
	      over the network nodes connected by composite links
	      while meeting all of the other mandatory requirements
	      stated above. The solution SHOULD work in a manner
	      similar to that when the characteristics of the
	      individual component links are advertised.

	    
</dd>
<dt>FR#4</dt>
<dd>
	      If extensions to existing protocols are specified and/or
	      new protocols are defined, then the solution SHOULD
	      provide a means for a network operator to migrate an
	      existing deployment in a minimally disruptive manner.
	    
</dd>
<dt>FR#5</dt>
<dd>
	      Any automatic LSP routing and/or load balancing
	      solutions MUST not oscillate such that performance
	      observed by users changes such that an SLA is
	      violated. Since oscillation may cause reordering, there
	      MUST be means to control the frequency of changing the
	      component link over which a flow is placed.
	    
</dd>
<dt>FR#6</dt>
<dd>
	      Management and diagnostic protocols MUST be able to
	      operate over composite links.
	    
</dd>
</dl></blockquote><p>
	
</p>
<a name="layering"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Component Links Provided by Lower Layer
	       Networks</h3>

<p>
	  Case 3 as defined in <a class='info' href='#ITU-T.G.800'>[ITU&#8209;T.G.800]<span> (</span><span class='info'>ITU-T, &ldquo;Unified functional architecture of transport           networks,&rdquo; 2007.</span><span>)</span></a> involves
	  a component link supporting an MPLS layer network over
	  another lower layer network (e.g., circuit switched or
	  another MPLS network (e.g., MPLS-TP)). The lower layer
	  network may change the latency (and/or other performance
	  parameters) seen by the MPLS layer network. Network
	  Operators have SLAs of which some components are based on
	  performance parameters. Currently, there is no protocol for
	  the lower layer network to inform the higher layer network
	  of a change in a performance parameter. Communication of the
	  latency performance parameter is a very important
	  requirement. Communication of other performance parameters
	  (e.g., delay variation) is desirable.
          </p>
<blockquote class="text"><dl>
<dt>FR#7</dt>
<dd>
	      In order to support network SLAs and provide acceptable
	      user experience, the solution SHALL specify a protocol
	      means to allow a lower layer server network to
	      communicate latency to the higher layer client network.
	    
</dd>
<dt>FR#8</dt>
<dd>
	      The precision of latency reporting SHOULD be at least 10%
	      of the one way latency for latency of 1 ms or more.
	    
</dd>
<dt>FR#9</dt>
<dd>
	      The solution SHALL provide a means to limit the latency
	      on a per LSP basis between nodes within a network to
	      meet an SLA target when the path between these nodes
	      contains one or more pairs of nodes connected via a
	      composite link.  <br />
 The SLAs
	      differ across the services, and some services have
	      different SLAs for different QoS classes, for example,
	      one QoS class may have a much larger latency bound than
	      another. Overload can occur which would violate an SLA
	      parameter (e.g., loss) and some remedy to handle this
	      case for a composite link.
	    
</dd>
<dt>FR#10</dt>
<dd>
	      If the total demand offered by traffic flows exceeds the
	      capacity of the composite link, the solution SHOULD define
	      a means to cause the LSPs for some traffic flows to move
	      to some other point in the network that is not
	      congested. These "preempted LSPs" may not be restored if
	      there is no uncongested path in the network.
	    
</dd>
</dl></blockquote><p>
	
</p>
<a name="multipath-diff"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Parallel Component Links with Different Characteristics</h3>

<p>
	  Corresponding to Case 1 of <a class='info' href='#ITU-T.G.800'>[ITU&#8209;T.G.800]<span> (</span><span class='info'>ITU-T, &ldquo;Unified functional architecture of transport           networks,&rdquo; 2007.</span><span>)</span></a>, as
	  one means to provide high availability, network operators
	  deploy a topology in the MPLS network using lower layer
	  networks that have a certain degree of diversity at the
	  lower layer(s).
	  Many techniques have been developed to balance the
	  distribution of flows across component links that connect
	  the same pair of nodes (See <a class='info' href='#multipath-lag'>Appendix&nbsp;B.3<span> (</span><span class='info'>Traffic Split over Parallel Links</span><span>)</span></a>).  When the path for a flow can be chosen from a set of
	  candidate nodes connected via composite links, other
	  techniques have been developed (See
	  <a class='info' href='#multipath-mp'>Appendix&nbsp;B.4<span> (</span><span class='info'>Traffic Split over Multiple Paths</span><span>)</span></a>).


	  </p>
<blockquote class="text"><dl>
<dt>FR#11</dt>
<dd>
	      The solution SHALL measure traffic on a labeled traffic
	      flow and dynamically select the component link on which
	      to place this flow in order to balance the load so that
	      no component link in the composite link between a pair
	      of nodes is overloaded.
	    
</dd>
<dt>FR#12</dt>
<dd>
	      When a traffic flow is moved from one component link to
	      another in the same composite link between a set of
	      nodes (or sites), it MUST be done so in a minimally
	      disruptive manner.  <br />
 When a
	      flow is moved from a current link to a target link with
	      different latency, reordering can occur if the target
	      link latency is less than that of the current or
	      clumping can occur if target link latency is greater
	      than that of the current. Therefore, some flows (e.g.,
	      timing distribution, PW circuit emulation) are quite
	      sensitive to these effects, which may be specified in an
	      SLA or are needed to meet a user experience objective
	      (e.g. jitter buffer under/overrun).
	    
</dd>
<dt>FR#13</dt>
<dd>
	      The solution SHALL provide a means to identify flows
	      whose rearrangement frequency needs to be bounded by a
	      configured value.
	    
</dd>
<dt>FR#14</dt>
<dd>
	      The solution SHALL provide a means that communicates
	      whether the flows within an LSP can be split across
	      multiple component links. The solution SHOULD provide a
	      means to indicate the flow identification field(s) which
	      can be used along the flow path which can be used to
	      perform this function.

	    
</dd>
<dt>FR#15</dt>
<dd>
	      The solution SHALL provide a means to indicate that a
	      traffic flow shall select a component link with the
	      minimum latency value.
	    
</dd>
<dt>FR#16</dt>
<dd>
	      The solution SHALL provide a means to indicate that a
	      traffic flow shall select a component link with a
	      maximum acceptable latency value as specified by
	      protocol.

	    
</dd>
<dt>FR#17</dt>
<dd>
	      The solution SHALL provide a means to indicate that a
	      traffic flow shall select a component link with a
	      maximum acceptable delay variation value as specified by
	      protocol.
	    
</dd>
<dt>FR#18</dt>
<dd>
	      The solution SHALL provide a local means to a node which
	      automatically distribute flows across the component
	      links in the composite link that connects to the other
	      node such that SLA objectives are met.
	    
</dd>
<dt>FR#19</dt>
<dd>
	      The solution SHALL provide a means to distribute flows
	      from a single LSP across multiple component links to
	      handle at least the case where the traffic carried in an
	      LSP exceeds that of any component link in the composite
	      link.
	    
</dd>
</dl></blockquote><p>
	
</p>
<a name="DR"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Derived Requirements</h3>

<p>
	This section takes the next step and derives high-level
	requirements on protocol specification from the functional
	requirements.
	</p>
<blockquote class="text"><dl>
<dt>DR#1</dt>
<dd>
	    The solution SHOULD attempt to extend existing protocols
	    wherever possible, developing a new protocol only if this
	    adds a significant set of capabilities.
	    <br />
 The vast majority of network
	    operators have provisioned L3VPN services over LDP. Many
	    have deployed L2VPN services over LDP as well. TE
	    extensions to IGP and RSVP-TE are viewed as being overly
	    complex by some operators.

	  
</dd>
<dt>DR#2</dt>
<dd>
	    A solution SHOULD extend LDP capabilities to meet
	    functional requirements (without using TE methods as
	    decided in <a class='info' href='#RFC3468'>[RFC3468]<span> (</span><span class='info'>Andersson, L. and G. Swallow, &ldquo;The Multiprotocol Label Switching (MPLS) Working Group decision on MPLS signaling protocols,&rdquo; February&nbsp;2003.</span><span>)</span></a>).
	  
</dd>
<dt>DR#3</dt>
<dd>
	    Coexistence of LDP and RSVP-TE signaled LSPs MUST be
	    supported on a composite link. Other functional
	    requirements should be supported as independently of
	    signaling protocol as possible.
	  
</dd>
<dt>DR#4</dt>
<dd>
	    When the nodes connected via a composite link are in the
	    same MPLS network topology, the solution MAY define
	    extensions to the IGP.
	  
</dd>
<dt>DR#5</dt>
<dd>
	    When the nodes are connected via a composite link are in
	    different MPLS network topologies, the solution SHALL NOT
	    rely on extensions to the IGP.
	  
</dd>
<dt>DR#6</dt>
<dd>
	    When a worst case failure scenario occurs,the resulting
	    number of links advertised in the IGP causes IGP
	    convergence to occur, causing a period of unavailability
	    as perceived by users.  The convergence time of the
	    solution MUST meet the SLA objective for the duration of
	    unavailability.

	  
</dd>
<dt>DR#7</dt>
<dd>
	    The Solution SHALL summarize the characteristics of the
	    component links as a composite link IGP advertisement that
	    results in convergence time better than that of
	    advertising the individual component links.  This summary
	    SHALL be designed so that it represents the range of
	    capabilities of the individual component links such that
	    functional requirements are met, and also minimizes the
	    frequency of advertisement updates which may cause IGP
	    convergence to occur. Examples of advertisement update
	    tiggering events to be considered include: LSP
	    establishment/release, changes in component link
	    characteristics (e.g., latency, up/down state), and/or
	    bandwidth utilization.
	  
</dd>
<dt>DR#8</dt>
<dd>
	    When a worst case failure scenario occurs,the resulting
	    number of links advertised in the IGP causes IGP
	    convergence to occur, causing a period of unavailability
	    as perceived by users.  The convergence time of the
	    solution MUST meet the SLA objective for the duration of
	    unavailability.
	  
</dd>
<dt>DR#9</dt>
<dd>
	    When a worst case failure scenario occurs, the number of
	    RSVP-TE LSPs to be resignaled will cause a period of
	    unavailability as perceived by users. The resignaling time
	    of the solution MUST meet the SLA objective for the
	    duration of unavailability. The resignaling time of the
	    solution MUST not increase significantly as compared with
	    current methods.

	  
</dd>
</dl></blockquote><p>
      
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgements</h3>

<p>
	Frederic Jounay of France Telecom and Yuji Kamite of NTT
	Communications Corporation co-authored a version of this
	document.
      
</p>
<p>
	A rewrite of this document occurred after the IETF77 meeting.
	Dimitri Papadimitriou, Lou Berger, Tony Li, the WG chairs John
	Scuder and Alex Zinin, and others provided valuable guidance
	prior to and at the IETF77 RTGWG meeting.
      
</p>
<p>
	Tony Li and John Drake have made numerous valuable comments on
	the RTGWG mailing list that are reflected in versions
	following the IETF77 meeting.
      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
	This document specifies a set of requirements.  The
	requirements themselves do not pose a security threat.  If
	these requirements are met using MPLS signaling as commonly
	practiced today with authenticated but unencrypted OSPF-TE,
	ISIS-TE, and RSVP-TE or LDP, then the requirement to provide
	additional information in this communication presents
	additional information that could conceivably be gathered in a
	man-in-the-middle confidentiality breach.  Such an attack
	would require a capability to monitor this signaling either
	through a provider breach or access to provider physical
	transmission infrastructure.  A provider breach already poses
	a threat of numerous tpes of attacks which are of far more
	serious consequence.  Encrption of the signaling can prevent
	or render more difficult any confidentiality breach that
	otherwise might occur by means of access to provider physical
	transmission infrastructure.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ITU-T.G.800">[ITU-T.G.800]</a></td>
<td class="author-text">ITU-T, &ldquo;<a href="http://www.itu.int/rec/T-REC-G/recommendation.asp?parent=T-REC-G.800">Unified functional architecture of transport
          networks</a>,&rdquo; 2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2702">[RFC2702]</a></td>
<td class="author-text"><a href="mailto:awduche@uu.net">Awduche, D.</a>, <a href="mailto:jmalcolm@uu.net">Malcolm, J.</a>, <a href="mailto:ja@uu.net">Agogbua, J.</a>, <a href="mailto:mo@uu.net">O&#039;Dell, M.</a>, and <a href="mailto:jmcmanus@uu.net">J. McManus</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2702">Requirements for Traffic Engineering Over MPLS</a>,&rdquo; RFC&nbsp;2702, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2702.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3031">[RFC3031]</a></td>
<td class="author-text">Rosen, E., Viswanathan, A., and R. Callon, &ldquo;<a href="http://tools.ietf.org/html/rfc3031">Multiprotocol Label Switching Architecture</a>,&rdquo; RFC&nbsp;3031, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3031.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3468">[RFC3468]</a></td>
<td class="author-text">Andersson, L. and G. Swallow, &ldquo;<a href="http://tools.ietf.org/html/rfc3468">The Multiprotocol Label Switching (MPLS) Working Group decision on MPLS signaling protocols</a>,&rdquo; RFC&nbsp;3468, February&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3468.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3809">[RFC3809]</a></td>
<td class="author-text">Nagarajan, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3809">Generic Requirements for Provider Provisioned Virtual Private Networks (PPVPN)</a>,&rdquo; RFC&nbsp;3809, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3809.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4031">[RFC4031]</a></td>
<td class="author-text">Carugi, M. and D. McDysan, &ldquo;<a href="http://tools.ietf.org/html/rfc4031">Service Requirements for Layer 3 Provider Provisioned Virtual Private Networks (PPVPNs)</a>,&rdquo; RFC&nbsp;4031, April&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4031.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4665">[RFC4665]</a></td>
<td class="author-text">Augustyn, W. and Y. Serbest, &ldquo;<a href="http://tools.ietf.org/html/rfc4665">Service Requirements for Layer 2 Provider-Provisioned Virtual Private Networks</a>,&rdquo; RFC&nbsp;4665, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4665.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5254">[RFC5254]</a></td>
<td class="author-text">Bitar, N., Bocci, M., and L. Martini, &ldquo;<a href="http://tools.ietf.org/html/rfc5254">Requirements for Multi-Segment Pseudowire Emulation Edge-to-Edge (PWE3)</a>,&rdquo; RFC&nbsp;5254, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5254.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.3.&nbsp;Appendix References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-pwe3-fat-pw">[I-D.ietf-pwe3-fat-pw]</a></td>
<td class="author-text">Bryant, S., Filsfils, C., Drafz, U., Kompella, V., Regan, J., and S. Amante, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pwe3-fat-pw-03.txt">Flow Aware Transport of Pseudowires over an MPLS PSN</a>,&rdquo; draft-ietf-pwe3-fat-pw-03 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-pwe3-fat-pw-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IEEE-802.1AX">[IEEE-802.1AX]</a></td>
<td class="author-text">IEEE Standards Association, &ldquo;<a href="http://standards.ieee.org/getieee802/download/802.1AX-2008.pdf">IEEE Std 802.1AX-2008 IEEE Standard for
	    Local and Metropolitan Area Networks - Link Aggregation</a>,&rdquo; 2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU-T.Y.1541">[ITU-T.Y.1541]</a></td>
<td class="author-text">ITU-T, &ldquo;<a href="http://www.itu.int/rec/T-REC-Y.1541/en">Network performance objectives for IP-based services</a>,&rdquo; 2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1717">[RFC1717]</a></td>
<td class="author-text"><a href="mailto:sklower@CS.Berkeley.EDU">Sklower, K.</a>, <a href="mailto:brian@lloyd.com">Lloyd, B.</a>, <a href="mailto:glenn@lloyd.com">McGregor, G.</a>, and <a href="mailto:dcarr@Newbridge.COM">D. Carr</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1717">The PPP Multilink Protocol (MP)</a>,&rdquo; RFC&nbsp;1717, November&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1717.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2475">[RFC2475]</a></td>
<td class="author-text"><a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:black_david@emc.com">Black, D.</a>, <a href="mailto:mark.carlson@sun.com">Carlson, M.</a>, <a href="mailto:elwynd@nortel.co.uk">Davies, E.</a>, <a href="mailto:zhwang@bell-labs.com">Wang, Z.</a>, and <a href="mailto:wweiss@lucent.com">W. Weiss</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2475">An Architecture for Differentiated Services</a>,&rdquo; RFC&nbsp;2475, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2475.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2475.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2475.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2615">[RFC2615]</a></td>
<td class="author-text"><a href="mailto:malis@ascend.com">Malis, A.</a> and <a href="mailto:wsimpson@GreenDragon.com">W. Simpson</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2615">PPP over SONET/SDH</a>,&rdquo; RFC&nbsp;2615, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2615.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2991">[RFC2991]</a></td>
<td class="author-text">Thaler, D. and C. Hopps, &ldquo;<a href="http://tools.ietf.org/html/rfc2991">Multipath Issues in Unicast and Multicast Next-Hop Selection</a>,&rdquo; RFC&nbsp;2991, November&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2991.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2992">[RFC2992]</a></td>
<td class="author-text">Hopps, C., &ldquo;<a href="http://tools.ietf.org/html/rfc2992">Analysis of an Equal-Cost Multi-Path Algorithm</a>,&rdquo; RFC&nbsp;2992, November&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2992.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3260">[RFC3260]</a></td>
<td class="author-text">Grossman, D., &ldquo;<a href="http://tools.ietf.org/html/rfc3260">New Terminology and Clarifications for Diffserv</a>,&rdquo; RFC&nbsp;3260, April&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3260.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4201">[RFC4201]</a></td>
<td class="author-text">Kompella, K., Rekhter, Y., and L. Berger, &ldquo;<a href="http://tools.ietf.org/html/rfc4201">Link Bundling in MPLS Traffic Engineering (TE)</a>,&rdquo; RFC&nbsp;4201, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4201.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4301">[RFC4301]</a></td>
<td class="author-text">Kent, S. and K. Seo, &ldquo;<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>,&rdquo; RFC&nbsp;4301, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4301.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4385">[RFC4385]</a></td>
<td class="author-text">Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;<a href="http://tools.ietf.org/html/rfc4385">Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN</a>,&rdquo; RFC&nbsp;4385, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4385.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4928">[RFC4928]</a></td>
<td class="author-text">Swallow, G., Bryant, S., and L. Andersson, &ldquo;<a href="http://tools.ietf.org/html/rfc4928">Avoiding Equal Cost Multipath Treatment in MPLS Networks</a>,&rdquo; BCP&nbsp;128, RFC&nbsp;4928, June&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4928.txt">TXT</a>).</td></tr>
</table>

<a name="story-time"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
More Details on Existing Network Operator
	     Practices and Protocol Usage</h3>

<p>
	Network operators have SLAs for services that are comprised of
	numerical values for performance measures, principally
	availability, latency, delay variation.  See
	<a class='info' href='#ITU-T.Y.1541'>[ITU&#8209;T.Y.1541]<span> (</span><span class='info'>ITU-T, &ldquo;Network performance objectives for IP-based services,&rdquo; 2006.</span><span>)</span></a>, <a class='info' href='#RFC3809'>RFC
	3809, Section 4.9<span> (</span><span class='info'>Nagarajan, A., &ldquo;Generic Requirements for Provider Provisioned Virtual Private Networks (PPVPN),&rdquo; June&nbsp;2004.</span><span>)</span></a> [RFC3809] for examples of the form of such
	SLAs. Note that the numerical values of Y.1541 span multiple
	networks and may be looser than network operator SLAs.
	Applications and acceptable user experience have a
	relationship to these performance parameters.
      
</p>
<p>
	Consider latency as an example. In some cases, minimizing
	latency relates directly to the best customer experience
	(e.g., in TCP closer is faster). I other cases, user
	experience is relatively insensitive to latency, up to a
	specific limit at which point user perception of quality
	degrades significantly (e.g., interactive human voice and
	multimedia conferencing). A number of SLAs have. a bound on
	point-point latency, and as long as this bound is met, the SLA
	is met -- decreasing the latency is not necessary. In some
	SLAs, if the specified latency is not met, the user considers
	the service as unavailable. An unprotected LSP can be manually
	provisioned on a set of to meet this type of SLA, but this
	lowers availability since an alternate route that meets the
	latency SLA cannot be determined.
      
</p>
<p>
	Historically, when an IP/MPLS network was operated over a
	lower layer circuit switched network (e.g., SONET rings), a
	change in latency caused by the lower layer network (e.g., due
	to a maintenance action or failure) this was not known to the
	MPLS network. This resulted in latency affecting end user
	experience, sometimes violating SLAs or resulting in user
	complaints.
      
</p>
<p>
	A response to this problem was to provision IP/MPLS networks
	over unprotected circuits and set the metric and/or TE-metric
	proportional to latency. This resulted in traffic being
	directed over the least latency path, even if this was not
	needed to meet an SLA or meet user experience objectives. This
	results in reduced flexibility and increased cost for network
	operators. Using lower layer networks to provide restoration
	and grooming is expected to be more efficient, but the
	inability to communicate performance parameters, in particular
	latency, from the lower layer network to the higher layer
	network is an important problem to be solved before this can
	be done.
      
</p>
<p>
	Latency SLAs for pt-pt services are often tied closely to
	geographic locations, while latency for multipoint services may
	be based upon a worst case within a region.
      
</p>
<p>
	The presence of only three Traffic Class (TC) bits (previously
	known as EXP bits) in the MPLS shim header is limiting when a
	network operator needs to support QoS classes for multiple
	services (e.g., L2VPN VPWS, VPLS, L3VPN and Internet), each of
	which has a set of QoS classes that need to be supported. In
	some cases one bit is used to indicate conformance to some
	ingress traffic classification, leaving only two bits for
	indicating the service QoS classes. The approach that has been
	taken is to aggregate these QoS classes into similar sets on
	LER-LSR and LSR-LSR links.
      
</p>
<p>
	Labeled LSPs have been and use of link layer encapsulation
	have been standardized in order to provide a means to meet
	these needs.
      
</p>
<p>
	The IP DSCP cannot be used for flow identification since
	<a class='info' href='#RFC4301'>RFC 4301 Section 5.5<span> (</span><span class='info'>Kent, S. and K. Seo, &ldquo;Security Architecture for the Internet Protocol,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4301] requires
	Diffserv transparency, and in general network operators do not
	rely on the DSCP of Internet packets.
      
</p>
<p>
	A label is pushed onto Internet packets when they are carried
	along with L2/L3VPN packets on the same link or lower layer
	network provides a mean to distinguish between the QoS class
	for these packets.
      
</p>
<p>
	Operating an MPLS-TE network involves a different paradigm
	from operating an IGP metric-based LDP signaled MPLS
	network. The mpt-pt LDP signaled MPLS LSPs occur
	automatically, and balancing across parallel links occurs if
	the IGP metrics are set "equally" (with equality a locally
	definable relation).
      
</p>
<p>
	Traffic is typically comprised of a few large (some very
	large) flows and many small flows. In some cases, separate
	LSPs are established for very large flows. This can occur even
	if the IP header information is inspected by a router, for
	example an IPsec tunnel that carries a large amount of
	traffic. An important example of large flows is that of
    a L2/L3 VPN customer who has an access line bandwdith comparable to a
    client-client composite link bandwidth -- there could be flows that are
    on the order of the access line bandwdith.
      
</p>
<a name="multipath-bcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Existing Multipath Standards and Techniques</h3>

<p>
	Today the requirement to handle large aggregations of traffic,
	much larger than a single component link, can be handled by a
	number of techniques which we will collectively call
	multipath.  Multipath applied to parallel links between the
	same set of nodes includes Ethernet Link Aggregation
	<a class='info' href='#IEEE-802.1AX'>[IEEE&#8209;802.1AX]<span> (</span><span class='info'>IEEE Standards Association, &ldquo;IEEE Std 802.1AX-2008 IEEE Standard for 	    Local and Metropolitan Area Networks - Link Aggregation,&rdquo; 2006.</span><span>)</span></a>,
	<a class='info' href='#RFC4201'>link bundling<span> (</span><span class='info'>Kompella, K., Rekhter, Y., and L. Berger, &ldquo;Link Bundling in MPLS Traffic Engineering (TE),&rdquo; October&nbsp;2005.</span><span>)</span></a> [RFC4201], or other
	aggregation techniques some of which may be vendor specific.
	Multipath applied to diverse paths rather than parallel links
	includes Equal Cost MultiPath (ECMP) as applied to OSPF, ISIS,
	or even BGP, and equal cost LSP, as described
	in <a class='info' href='#multipath-mp'>Appendix&nbsp;B.4<span> (</span><span class='info'>Traffic Split over Multiple Paths</span><span>)</span></a>.  Various mutilpath techniques
	have strengths and weaknesses.
      
</p>
<p>
	The term composite link is more general than terms such as
	link aggregate which is generally considered to be specific to
	Ethernet and its use here is consistent with the broad
	definition in <a class='info' href='#ITU-T.G.800'>[ITU&#8209;T.G.800]<span> (</span><span class='info'>ITU-T, &ldquo;Unified functional architecture of transport           networks,&rdquo; 2007.</span><span>)</span></a>.  The term
	multipath excludes inverse multiplexing and refers to
	techniques which only solve the problem of large aggregations
	of traffic, without addressing the other requirements outlined
	in this document.
      
</p>
<a name="multipath-common"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Common Multpath Load Spliting Techniques</h3>

<p>
	  Identical load balancing techniqes are used for multipath
	  both over parallel links and over diverse paths.
	
</p>
<p>
	  Large aggregates of IP traffic do not provide explicit
	  signaling to indicate the expected traffic loads.  Large
	  aggregates of MPLS traffic are carried in MPLS tunnels
	  supported by MPLS LSP.  LSP which are signaled using RSVP-TE
	  extensions do provide explicit signaling which includes the
	  expected traffic load for the aggregate.  LSP which are
	  signaled using LDP do not provide an expected traffic load.
	
</p>
<p>
	  MPLS LSP may contain other MPLS LSP arranged hierarchically.
	  When an MPLS LSR serves as a midpoint LSR in an LSP carrying
	  other LSP as payload, there is no signaling associated with
	  these inner LSP.  Therefore even when using RSVP-TE
	  signaling there may be insufficient information provided by
	  signaling to adequately distribute load across a composite
	  link.
	
</p>
<p>
	  Generally a set of label stack entries that is unique across
	  the ordered set of label numbers can safely be assumed to
	  contain a group of flows.  The reordering of traffic can
	  therefore be considered to be acceptable unless reordering
	  occurs within traffic containing a common unique set of
	  label stack entries.  Existing load splitting techniques
	  take advantage of this property in addition to looking
	  beyond the bottom of the label stack and determining if the
	  payload is IPv4 or IPv6 to load balance traffic accordingly.
	
</p>
<p>
	  MPLS-TP OAM violates the assumption that it is safe to
	  reorder traffic within an LSP.  If MPLS-TP OAM is to be
	  accommodated, then existing multipth techniques must be
	  modified.  Such modifications are outside the scope of this
	  document.
	
</p>
<p>
	  For example a large aggregate of IP traffic may be
	  subdivided into a large number of groups of flows using a
	  hash on the IP source and destination addresses.  This is as
	  described in <a class='info' href='#RFC2475'>[RFC2475]<span> (</span><span class='info'>Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z., and W. Weiss, &ldquo;An Architecture for Differentiated Services,&rdquo; December&nbsp;1998.</span><span>)</span></a> and clarified in
	  <a class='info' href='#RFC3260'>[RFC3260]<span> (</span><span class='info'>Grossman, D., &ldquo;New Terminology and Clarifications for Diffserv,&rdquo; April&nbsp;2002.</span><span>)</span></a>.  For MPLS traffic carrying IP, a
	  similar hash can be performed on the set of labels in the
	  label stack.  These techniques are both examples of means to
	  subdivide traffic into groups of flows for the purpose of
	  load balancing traffic across aggregated link capacity.  The
	  means of identifying a flow should not be confused with the
	  definition of a flow.
	
</p>
<p>
	  Discussion of whether a hash based approach provides a
	  sufficiently even load balance using any particular hashing
	  algorithm or method of distributing traffic across a set of
	  component links is outside of the scope of this document.
	
</p>
<p>
	  The current load balancing techniques are referenced in
	  <a class='info' href='#RFC4385'>[RFC4385]<span> (</span><span class='info'>Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN,&rdquo; February&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#RFC4928'>[RFC4928]<span> (</span><span class='info'>Swallow, G., Bryant, S., and L. Andersson, &ldquo;Avoiding Equal Cost Multipath Treatment in MPLS Networks,&rdquo; June&nbsp;2007.</span><span>)</span></a>.
	  The use of three hash based approaches are described in
	  <a class='info' href='#RFC2991'>[RFC2991]<span> (</span><span class='info'>Thaler, D. and C. Hopps, &ldquo;Multipath Issues in Unicast and Multicast Next-Hop Selection,&rdquo; November&nbsp;2000.</span><span>)</span></a> and <a class='info' href='#RFC2992'>[RFC2992]<span> (</span><span class='info'>Hopps, C., &ldquo;Analysis of an Equal-Cost Multi-Path Algorithm,&rdquo; November&nbsp;2000.</span><span>)</span></a>.  A
	  mechanism to identify flows within PW is described in
	  <a class='info' href='#I-D.ietf-pwe3-fat-pw'>[I&#8209;D.ietf&#8209;pwe3&#8209;fat&#8209;pw]<span> (</span><span class='info'>Bryant, S., Filsfils, C., Drafz, U., Kompella, V., Regan, J., and S. Amante, &ldquo;Flow Aware Transport of Pseudowires over an MPLS PSN,&rdquo; January&nbsp;2010.</span><span>)</span></a>.  The use of hash
	  based approaches is mentioned as an example of an existing
	  set of techniques to distribute traffic over a set of
	  component links.  Other techniques are not precluded.
	
</p>
<a name="multipath-active"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
Simple and Adaptive Load Balancing Multipath</h3>

<p>
	  Simple multipath generally relies on the mathematical
	  probability that given a very large number of small
	  microflows, these microflows will tend to be distributed
	  evenly across a hash space.  A common simple multipath
	  implementation assumes that all members (component links)
	  are of equal capacity and perform a modulo operation across
	  the hashed value.  An alternate simple multipath technique
	  uses a table generally with a power of two size, and
	  distributes the table entries proportionally among members
	  according to the capacity of each member.
	  
</p>
<p>
	  Simple load balancing works well if there are a very large
	  number of small microflows (i.e., microflow rate is much
	  less than component link capacity).  However, the case where
	  there are even a few large microflows is not handled well by
	  simple load balancing.
	  
</p>
<p>
	  An adaptive multipath technique is one where the traffic
	  bound to each member (component link) is measured and the
	  load split is adjusted accordingly.  As long as the
	  adjustment is done within a single network element, then no
	  protocol extensions are required and there are no
	  interoperability issues.
	
</p>
<p>
	  Note that if the load balancing algorithm and/or its
	  parameters is adjusted, then packets in some flows may be
	  delivered out of sequence.
	
</p>
<a name="multipath-lag"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.3"></a><h3>B.3.&nbsp;
Traffic Split over Parallel Links</h3>

<p>
	  The load spliting techniques defined in
	  <a class='info' href='#multipath-common'>Appendix&nbsp;B.1<span> (</span><span class='info'>Common Multpath Load Spliting Techniques</span><span>)</span></a> and
	  <a class='info' href='#multipath-active'>Appendix&nbsp;B.2<span> (</span><span class='info'>Simple and Adaptive Load Balancing Multipath</span><span>)</span></a> are both used in
	  splitting traffic over parallel links between the same pair
	  of nodes.  The best known technique, though far from being
	  the first, is
	  <a class='info' href='#IEEE-802.1AX'>Ethernet Link
	  Aggregation<span> (</span><span class='info'>IEEE Standards Association, &ldquo;IEEE Std 802.1AX-2008 IEEE Standard for 	    Local and Metropolitan Area Networks - Link Aggregation,&rdquo; 2006.</span><span>)</span></a> [IEEE&#8209;802.1AX].  This same technique had been applied
	  much earlier using OSPF or ISIS Equal Cost MultiPath (ECMP)
	  over parallel links between the same
	  nodes.  <a class='info' href='#RFC1717'>Multilink PPP<span> (</span><span class='info'>Sklower, K., Lloyd, B., McGregor, G., and D. Carr, &ldquo;The PPP Multilink Protocol (MP),&rdquo; November&nbsp;1994.</span><span>)</span></a> [RFC1717] uses a
	  technique that provides inverse multiplexing, however a
	  number of vendors had provided proprietary extensions to
	  <a class='info' href='#RFC2615'>PPP over SONET/SDH<span> (</span><span class='info'>Malis, A. and W. Simpson, &ldquo;PPP over SONET/SDH,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2615] that
	  predated Ethernet Link Aggregation but are no longer used.
	
</p>
<p>
	  <a class='info' href='#RFC4201'>Link bundling<span> (</span><span class='info'>Kompella, K., Rekhter, Y., and L. Berger, &ldquo;Link Bundling in MPLS Traffic Engineering (TE),&rdquo; October&nbsp;2005.</span><span>)</span></a> [RFC4201] provides yet
	  another means of handling parallel LSP.  RFC4201 explicitly
	  allow a special value of all ones to indicate a split across
	  all members of the bundle.
	
</p>
<a name="multipath-mp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.4"></a><h3>B.4.&nbsp;
Traffic Split over Multiple Paths</h3>

<p>
	  OSPF or ISIS Equal Cost MultiPath (ECMP) is a well known
	  form of traffic split over multiple paths that may traverse
	  intermediate nodes.  ECMP is often incorrectly equated to
	  only this case, and multipath over multiple diverse paths is
	  often incorrectly equated to ECMP.
	
</p>
<p>
	  Many implementations are able to create more than one LSP
	  between a pair of nodes, where these LSP are routed
	  diversely to better make use of available capacity.  The
	  load on these LSP can be distributed proportionally to the
	  reserved bandwidth of the LSP.  These multiple LSP may be
	  advertised as a single PSC FA and any LSP making use of the
	  FA may be split over these multiple LSP.
	
</p>
<p>
	  <a class='info' href='#RFC4201'>Link bundling<span> (</span><span class='info'>Kompella, K., Rekhter, Y., and L. Berger, &ldquo;Link Bundling in MPLS Traffic Engineering (TE),&rdquo; October&nbsp;2005.</span><span>)</span></a> [RFC4201] component links
	  may themselves be LSP.  When this technique is used, any LSP
	  which specifies the link bundle may be split across the
	  multiple paths of the LSP that comprise the bundle.
	
</p>
<a name="G.800-Definitions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
ITU-T G.800 Composite Link Definitions and Terminology</h3>

<p>
	</p>
<blockquote class="text"><dl>
<dt>Composite Link:</dt>
<dd>
	    
	    <a class='info' href='#ITU-T.G.800'>Section 6.9.2 of
	    ITU-T-G.800<span> (</span><span class='info'>ITU-T, &ldquo;Unified functional architecture of transport           networks,&rdquo; 2007.</span><span>)</span></a> [ITU&#8209;T.G.800] defines composite link in terms of
	    three cases, of which the following two are relevant (the
	    one describing inverse (TDM) multiplexing does not
	    apply). Note that these case definitions are taken
	    verbatim from section 6.9, "Layer Relationships".
	    
<blockquote class="text"><dl>
<dt>Case 1:</dt>
<dd>
		"Multiple parallel links between the same subnetworks
		can be bundled together into a single composite
		link. Each component of the composite link is
		independent in the sense that each component link is
		supported by a separate server layer trail. The
		composite link conveys communication information using
		different server layer trails thus the sequence of
		symbols crossing this link may not be preserved. This
		is illustrated in Figure 14."
	      
</dd>
<dt>Case 3:</dt>
<dd>
		"A link can also be constructed by a concatenation of
		component links and configured channel forwarding
		relationships. The forwarding relationships must have
		a 1:1 correspondence to the link connections that will
		be provided by the client link. In this case, it is
		not possible to fully infer the status of the link by
		observing the server layer trails visible at the ends
		of the link. This is illustrated in Figure 16."
	      
</dd>
</dl></blockquote>
	  
</dd>
<dt>Subnetwork:</dt>
<dd>
	    A set of one or more nodes (i.e., LER or LSR) and links.
	    As a special case it can represent a site comprised of
	    multiple nodes.

	  
</dd>
<dt>Forwarding Relationship:</dt>
<dd>
	    Configured forwarding between ports on a subnetwork. It
	    may be connectionless (e.g., IP, not considered in this
	    draft), or connection oriented (e.g., MPLS signaled or
	    configured).

	  
</dd>
<dt>Component Link:</dt>
<dd>
	    A topolological relationship between subnetworks (i.e., a
	    connection between nodes), which may be a wavelength,
	    circuit, virtual circuit or an MPLS LSP.

	  
</dd>
</dl></blockquote><p>
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Curtis Villamizar (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Infinera Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">169 W. Java Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cvillamizar@infinera.com">cvillamizar@infinera.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dave McDysan (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Verizon</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">22001 Loudoun County PKWY</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ashburn, VA  20147</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dave.mcdysan@verizon.com">dave.mcdysan@verizon.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">So Ning</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Verizon</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2400 N. Glenville Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richardson, TX  75082</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 972-729-7905</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ning.so@verizonbusiness.com">ning.so@verizonbusiness.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Malis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Verizon</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">117 West St.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Waltham, MA  02451</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 781-466-2362</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:andrew.g.malis@verizon.com">andrew.g.malis@verizon.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lucy Yong</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei USA</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1700 Alma Dr. Suite 500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Plano, TX  75075</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 469-229-5387</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lucyyong@huawei.com">lucyyong@huawei.com</a></td></tr>
</table>
</body></html>
