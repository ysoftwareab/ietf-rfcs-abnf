<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Content Delivery Network Interconnection (CDNI) Control Interface / Triggers 2nd Edition</title>
<meta content="Ori Finkelman" name="author">
<meta content="Sanjay Mishra" name="author">
<meta content="Nir B. Sopher" name="author">
<meta content="
       
   This document obsoletes RFC8007. This document describes the part of the Content Delivery Network
   Interconnection (CDNI) Control interface that allows a CDN to trigger
   activity in an interconnected CDN that is configured to deliver
   content on its behalf.  The upstream CDN can use this mechanism to
   request that the downstream CDN pre-position metadata or content or
   to request that it invalidate or purge metadata or content.  The
   upstream CDN can monitor the status of activity that it has triggered
   in the downstream CDN. 
    " name="description">
<meta content="xml2rfc 3.9.1" name="generator">
<meta content="draft-sopher-cdni-ci-triggers-rfc8007bis-02" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.9.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.1
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.3.1
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 57.4.0
    six 1.16.0
-->
<link href="/tmp/draft-sopher-cdni-ci-triggers-rfc8007bis-02-nwkb_kqm.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">CDN Interconnect Triggers</td>
<td class="right">July 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Finkelman, et al.</td>
<td class="center">Expires 29 January 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-sopher-cdni-ci-triggers-rfc8007bis-02</dd>
<dt class="label-obsoletes">Obsoletes:</dt>
<dd class="obsoletes">
<a href="https://www.rfc-editor.org/rfc/rfc8007" class="eref">8007</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-07-28" class="published">28 July 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-01-29">29 January 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">O. Finkelman</div>
<div class="org">Qwilt</div>
</div>
<div class="author">
      <div class="author-name">S. Mishra</div>
<div class="org">Verizon</div>
</div>
<div class="author">
      <div class="author-name">N.B. Sopher</div>
<div class="org">Qwilt</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Content Delivery Network Interconnection (CDNI) Control Interface / Triggers 2nd Edition</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
   This document obsoletes RFC8007. This document describes the part of the Content Delivery Network
   Interconnection (CDNI) Control interface that allows a CDN to trigger
   activity in an interconnected CDN that is configured to deliver
   content on its behalf.  The upstream CDN can use this mechanism to
   request that the downstream CDN pre-position metadata or content or
   to request that it invalidate or purge metadata or content.  The
   upstream CDN can monitor the status of activity that it has triggered
   in the downstream CDN.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 29 January 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="ulEmpty ulBare toc compact">
<li class="ulEmpty ulBare toc compact" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-model-for-cdni-triggers" class="xref">Model for CDNI Triggers</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-timing-of-triggered-activit" class="xref">Timing of Triggered Activity</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-scope-of-triggered-activity" class="xref">Scope of Triggered Activity</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-multiple-interconnected-cdn" class="xref">Multiple Interconnected CDNs</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-trigger-results" class="xref">Trigger Results</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-collections-of-trigger-stat" class="xref">Collections of Trigger Status Resources</a></p>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-cdni-trigger-interface" class="xref">CDNI Trigger Interface</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-creating-triggers" class="xref">Creating Triggers</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-checking-status" class="xref">Checking Status</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-polling-trigger-status-reso" class="xref">Polling Trigger Status Resource Collections</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-polling-trigger-status-resou" class="xref">Polling Trigger Status Resources</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-canceling-triggers" class="xref">Canceling Triggers</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-deleting-triggers" class="xref">Deleting Triggers</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-expiry-of-trigger-status-re" class="xref">Expiry of Trigger Status Resources</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="xref">4.6</a>.  <a href="#name-loop-detection-and-preventi" class="xref">Loop Detection and Prevention</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.7">
                <p id="section-toc.1-1.4.2.7.1"><a href="#section-4.7" class="xref">4.7</a>.  <a href="#name-trigger-extensibility" class="xref">Trigger Extensibility</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.8">
                <p id="section-toc.1-1.4.2.8.1"><a href="#section-4.8" class="xref">4.8</a>.  <a href="#name-error-handling" class="xref">Error Handling</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.4.2.8.2.1">
                    <p id="section-toc.1-1.4.2.8.2.1.1"><a href="#section-4.8.1" class="xref">4.8.1</a>.  <a href="#name-error-propagation" class="xref">Error propagation</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.4.2.9">
                <p id="section-toc.1-1.4.2.9.1"><a href="#section-4.9" class="xref">4.9</a>.  <a href="#name-content-urls" class="xref">Content URLs</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-ci-t-object-properties-and-" class="xref">CI/T Object Properties and Encoding</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-ci-t-objects" class="xref">CI/T Objects</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="xref">5.1.1</a>.  <a href="#name-ci-t-commands" class="xref">CI/T Commands</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="xref">5.1.2</a>.  <a href="#name-trigger-status-resources" class="xref">Trigger Status Resources</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.1.2.3">
                    <p id="section-toc.1-1.5.2.1.2.3.1"><a href="#section-5.1.3" class="xref">5.1.3</a>.  <a href="#name-trigger-collections" class="xref">Trigger Collections</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-properties-of-ci-t-objects" class="xref">Properties of CI/T Objects</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="xref">5.2.1</a>.  <a href="#name-trigger-specification" class="xref">Trigger Specification</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="xref">5.2.2</a>.  <a href="#name-trigger-type" class="xref">Trigger Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="xref">5.2.3</a>.  <a href="#name-trigger-status" class="xref">Trigger Status</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.4">
                    <p id="section-toc.1-1.5.2.2.2.4.1"><a href="#section-5.2.4" class="xref">5.2.4</a>.  <a href="#name-patternmatch" class="xref">PatternMatch</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.5">
                    <p id="section-toc.1-1.5.2.2.2.5.1"><a href="#section-5.2.5" class="xref">5.2.5</a>.  <a href="#name-regexmatch" class="xref">RegexMatch</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.6">
                    <p id="section-toc.1-1.5.2.2.2.6.1"><a href="#section-5.2.6" class="xref">5.2.6</a>.  <a href="#name-playlist" class="xref">Playlist</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.7">
                    <p id="section-toc.1-1.5.2.2.2.7.1"><a href="#section-5.2.7" class="xref">5.2.7</a>.  <a href="#name-mediaprotocol" class="xref">MediaProtocol</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.8">
                    <p id="section-toc.1-1.5.2.2.2.8.1"><a href="#section-5.2.8" class="xref">5.2.8</a>.  <a href="#name-ci-t-trigger-extensions" class="xref">CI/T Trigger Extensions</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.9">
                    <p id="section-toc.1-1.5.2.2.2.9.1"><a href="#section-5.2.9" class="xref">5.2.9</a>.  <a href="#name-absolute-time" class="xref">Absolute Time</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.10">
                    <p id="section-toc.1-1.5.2.2.2.10.1"><a href="#section-5.2.10" class="xref">5.2.10</a>. <a href="#name-error-description" class="xref">Error Description</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.5.2.2.2.11">
                    <p id="section-toc.1-1.5.2.2.2.11.1"><a href="#section-5.2.11" class="xref">5.2.11</a>. <a href="#name-error-code" class="xref">Error Code</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-trigger-extension-objects" class="xref">Trigger Extension Objects</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-locationpolicy-extension" class="xref">LocationPolicy extension</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-timepolicy-extension" class="xref">TimePolicy Extension</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="xref">6.2.1</a>.  <a href="#name-utcwindow" class="xref">UTCWindow</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="xref">6.2.2</a>.  <a href="#name-localtimewindow" class="xref">LocalTimeWindow</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="xref">6.2.3</a>.  <a href="#name-datelocaltime" class="xref">DateLocalTime</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-footprint-and-capabilities" class="xref">Footprint and Capabilities</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-ci-t-playlist-protocol-capa" class="xref">CI/T Playlist Protocol Capability Object</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a href="#section-7.1.1" class="xref">7.1.1</a>.  <a href="#name-ci-t-playlist-protocol-capab" class="xref">CI/T Playlist Protocol Capability Object Serialization</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-ci-t-trigger-extension-capa" class="xref">CI/T Trigger Extension Capability Object</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="xref">7.2.1</a>.  <a href="#name-ci-t-trigger-extension-capab" class="xref">CI/T Trigger Extension Capability Object Serialization</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-examples" class="xref">Examples</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-creating-triggers-2" class="xref">Creating Triggers</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.1.2.1">
                    <p id="section-toc.1-1.8.2.1.2.1.1"><a href="#section-8.1.1" class="xref">8.1.1</a>.  <a href="#name-preposition" class="xref">Preposition</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.1.2.2">
                    <p id="section-toc.1-1.8.2.1.2.2.1"><a href="#section-8.1.2" class="xref">8.1.2</a>.  <a href="#name-invalidate" class="xref">Invalidate</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.1.2.3">
                    <p id="section-toc.1-1.8.2.1.2.3.1"><a href="#section-8.1.3" class="xref">8.1.3</a>.  <a href="#name-invalidation-with-regex" class="xref">Invalidation with Regex</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.1.2.4">
                    <p id="section-toc.1-1.8.2.1.2.4.1"><a href="#section-8.1.4" class="xref">8.1.4</a>.  <a href="#name-preposition-with-playlists" class="xref">Preposition with Playlists</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-examining-trigger-status" class="xref">Examining Trigger Status</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="xref">8.2.1</a>.  <a href="#name-collection-of-all-triggers" class="xref">Collection of All Triggers</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.2.2.2">
                    <p id="section-toc.1-1.8.2.2.2.2.1"><a href="#section-8.2.2" class="xref">8.2.2</a>.  <a href="#name-filtered-collections-of-tri" class="xref">Filtered Collections of Trigger Status Resources</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.2.2.3">
                    <p id="section-toc.1-1.8.2.2.2.3.1"><a href="#section-8.2.3" class="xref">8.2.3</a>.  <a href="#name-individual-trigger-status-r" class="xref">Individual Trigger Status Resources</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.2.2.4">
                    <p id="section-toc.1-1.8.2.2.2.4.1"><a href="#section-8.2.4" class="xref">8.2.4</a>.  <a href="#name-polling-for-changes-in-stat" class="xref">Polling for Changes in Status</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.2.2.5">
                    <p id="section-toc.1-1.8.2.2.2.5.1"><a href="#section-8.2.5" class="xref">8.2.5</a>.  <a href="#name-deleting-trigger-status-res" class="xref">Deleting Trigger Status Resources</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.8.2.2.2.6">
                    <p id="section-toc.1-1.8.2.2.2.6.1"><a href="#section-8.2.6" class="xref">8.2.6</a>.  <a href="#name-extensions-with-error-propa" class="xref">Extensions with Error Propagation</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-cdni-payload-type-parameter" class="xref">CDNI Payload Type Parameter Registrations</a></p>
<ul class="compact ulEmpty toc ulBare">
<li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.1">
                    <p id="section-toc.1-1.9.2.1.2.1.1"><a href="#section-9.1.1" class="xref">9.1.1</a>.  <a href="#name-cdni-ci-trigger-commandv2-p" class="xref">CDNI ci-trigger-command.v2 Payload Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.2">
                    <p id="section-toc.1-1.9.2.1.2.2.1"><a href="#section-9.1.2" class="xref">9.1.2</a>.  <a href="#name-cdni-ci-trigger-statusv2-pa" class="xref">CDNI ci-trigger-status.v2 Payload Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.3">
                    <p id="section-toc.1-1.9.2.1.2.3.1"><a href="#section-9.1.3" class="xref">9.1.3</a>.  <a href="#name-cdni-ci-trigger-collectionv" class="xref">CDNI ci-trigger-collection.v2 Payload Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.4">
                    <p id="section-toc.1-1.9.2.1.2.4.1"><a href="#section-9.1.4" class="xref">9.1.4</a>.  <a href="#name-cdni-ci-t-locationpolicy-tr" class="xref">CDNI CI/T LocationPolicy Trigger Extension Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.5">
                    <p id="section-toc.1-1.9.2.1.2.5.1"><a href="#section-9.1.5" class="xref">9.1.5</a>.  <a href="#name-cdni-ci-t-timepolicy-trigge" class="xref">CDNI CI/T TimePolicy Trigger Extension Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.6">
                    <p id="section-toc.1-1.9.2.1.2.6.1"><a href="#section-9.1.6" class="xref">9.1.6</a>.  <a href="#name-cdni-fci-ci-t-playlist-prot" class="xref">CDNI FCI CI/T Playlist Protocol Payload Type</a></p>
</li>
                  <li class="compact ulEmpty toc ulBare" id="section-toc.1-1.9.2.1.2.7">
                    <p id="section-toc.1-1.9.2.1.2.7.1"><a href="#section-9.1.7" class="xref">9.1.7</a>.  <a href="#name-cdni-fci-ci-t-extension-obj" class="xref">CDNI FCI CI/T Extension Objects Payload Type</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-cdni-ci-t-trigger-types-reg" class="xref">"CDNI CI/T Trigger Types" Registry</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="xref">9.3</a>.  <a href="#name-cdni-ci-t-error-codes-regis" class="xref">"CDNI CI/T Error Codes" Registry</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="xref">9.4</a>.  <a href="#name-cdni-media-protocol-types" class="xref">CDNI Media protocol types</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-authentication-authorizatio" class="xref">Authentication, Authorization, Confidentiality, Integrity Protection</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-denial-of-service" class="xref">Denial of Service</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-privacy" class="xref">Privacy</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="ulEmpty toc compact ulBare">
<li class="ulEmpty toc compact ulBare" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="ulEmpty toc compact ulBare" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-formalization-of-the-json-d" class="xref">Formalization of the JSON Data</a></p>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-B" class="xref"></a><a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="ulEmpty ulBare toc compact" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-C" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
   <span>[<a href="#RFC6707" class="xref">RFC6707</a>]</span> introduces the problem scope for Content Delivery Network
   Interconnection (CDNI) and lists the four categories of interfaces
   that may be used to compose a CDNI solution (Control, Metadata,
   Request Routing, and Logging).<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
   <span>[<a href="#RFC7336" class="xref">RFC7336</a>]</span> expands on the information provided in <span>[<a href="#RFC6707" class="xref">RFC6707</a>]</span> and
   describes each of the interfaces and the relationships between them
   in more detail.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
   This document describes the "CI/T" interface -- "CDNI Control interface / Triggers".  It does not consider those parts of the
   Control interface that relate to configuration, bootstrapping, or
   authentication of CDN Interconnect interfaces.  Section 4 of
   <span>[<a href="#RFC7337" class="xref">RFC7337</a>]</span> identifies the requirements specific to the CI/T interface;
   requirements applicable to the CI/T interface are CI-1 to CI-6.<a href="#section-1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-4.1">
          <a href="#sect-2" class="xref">Section 2</a> outlines the model for the CI/T interface at a high
      level.<a href="#section-1-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-4.2">
          <a href="#sect-3" class="xref">Section 3</a> describes collections of Trigger Status Resources.<a href="#section-1-4.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-4.3">
          <a href="#sect-4" class="xref">Section 4</a> defines the web service provided by the downstream CDN.<a href="#section-1-4.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-4.4">
          <a href="#sect-5" class="xref">Section 5</a> lists properties of CI/T Commands and Status Resources.<a href="#section-1-4.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-4.5">
          <a href="#sect-6" class="xref">Section 8</a> contains example messages.<a href="#section-1-4.5" class="pilcrow">¶</a>
</li>
      </ul>
<div id="sect-1.1">
<section id="section-1.1">
        <h3 id="name-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">
   This document reuses the terminology defined in <span>[<a href="#RFC6707" class="xref">RFC6707</a>]</span> and uses
   "uCDN" and "dCDN" as shorthand for "upstream CDN" and "downstream CDN", respectively.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Additionally, the following terms are used throughout this document
      and are defined as follows:<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-3.1">HLS - HTTP Live Streaming<a href="#section-1.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.2">DASH - Dynamic Adaptive Streaming Over HTTP<a href="#section-1.1-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-3.3">MSS - Microsoft Smooth Streaming<a href="#section-1.1-3.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-4">
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-model-for-cdni-triggers">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-model-for-cdni-triggers" class="section-name selfRef">Model for CDNI Triggers</a>
      </h2>
<p id="section-2-1">
   A CI/T Command, sent from the uCDN to the dCDN, is a request for the
   dCDN to do some work relating to data associated with content
   requests originating from the uCDN.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">
   There are two types of CI/T Commands: CI/T Trigger Commands and CI/T
   Cancel Commands.  The CI/T Cancel Command can be used to request
   cancellation of an earlier CI/T Trigger Command.  A CI/T Trigger
   Command is of one of the following types:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">preposition - used to instruct the dCDN to fetch metadata from the
      uCDN, or content from any origin including the uCDN.<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.2">invalidate - used to instruct the dCDN to revalidate specific
      metadata or content before reusing it.<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.3">purge - used to instruct the dCDN to delete specific metadata or
      content.<a href="#section-2-3.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-4">
   The CI/T interface is a web service offered by the dCDN.  It allows
   CI/T Commands to be issued and allows triggered activity to be
   tracked.  The CI/T interface builds on top of HTTP/1.1 <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>.
   References to URL in this document relate to HTTP/HTTPS URIs, as
   defined in Section 2.7 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">
   When the dCDN accepts a CI/T Command, it creates a resource
   describing the status of the triggered activity -- a Trigger Status
   Resource.  The uCDN can poll Trigger Status Resources to monitor
   progress.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">
   The dCDN maintains at least one collection of Trigger Status
   Resources for each uCDN.  Each uCDN only has access to its own
   collections, the locations of which are shared when CDNI is
   established.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">
   To trigger activity in the dCDN, the uCDN POSTs a CI/T Command to the
   collection of Trigger Status Resources.  If the dCDN accepts the CI/T
   Command, it creates a new Trigger Status Resource and returns its
   location to the uCDN.  To monitor progress, the uCDN can GET the
   Trigger Status Resource.  To request cancellation of a CI/T Trigger
   Command, the uCDN can POST to the collection of Trigger Status
   Resources or simply delete the Trigger Status Resource.<a href="#section-2-7" class="pilcrow">¶</a></p>
<p id="section-2-8">
   In addition to the collection of all Trigger Status Resources for the
   uCDN, the dCDN can maintain filtered views of that collection.  These
   filtered views are defined in <a href="#sect-3" class="xref">Section 3</a> and include collections of
   Trigger Status Resources corresponding to active and completed CI/T
   Trigger Commands.  These collections provide a mechanism for polling
   the status of multiple jobs.<a href="#section-2-8" class="pilcrow">¶</a></p>
<p id="section-2-9">
   Figure 1 is an example showing the basic message flow used by the
   uCDN to trigger activity in the dCDN and for the uCDN to discover the
   status of that activity.  Only successful triggering is shown.
   Examples of the messages are given in <a href="#sect-6" class="xref">Section 8</a>.<a href="#section-2-9" class="pilcrow">¶</a></p>
<span id="name-basic-cdni-message-flow-for"></span><div id="ure-basic-cdni-message-flow-for-triggers">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-2-10.1">
<pre>
   uCDN                                                   dCDN
    |    (1) POST https://dcdn.example.com/triggers/uCDN    |
   [ ] --------------------------------------------------&gt; [ ]--+
    |                                                      [ ]  | (2)
    |    (3) HTTP 201 Response                             [ ]&lt;-+
   [ ] &lt;-------------------------------------------------- [ ]
    |     Loc: https://dcdn.example.com/triggers/uCDN/123   |
    |                                                       |
    .                           .                           .
    .                           .                           .
    .                           .                           .
    |                                                       |
    |   (4) GET https://dcdn.example.com/triggers/uCDN/123  |
   [ ] --------------------------------------------------&gt; [ ]
    |                                                      [ ]
    |   (5) HTTP 200 Trigger Status Resource               [ ]
   [ ] &lt;-------------------------------------------------- [ ]
    |                                                       |
    |                                                       |
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-basic-cdni-message-flow-for" class="selfRef">Basic CDNI Message Flow for Triggers</a>
        </figcaption></figure>
</div>
<p id="section-2-11">
   The steps in Figure 1 are as follows:<a href="#section-2-11" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-12">
<li id="section-2-12.1">The uCDN triggers action in the dCDN by POSTing a CI/T Command to
       a collection of Trigger Status Resources --
       "https://dcdn.example.com/triggers/uCDN".  This URL was given to
       the uCDN when the CI/T interface was established.<a href="#section-2-12.1" class="pilcrow">¶</a>
</li>
        <li id="section-2-12.2">The dCDN authenticates the request, validates the CI/T Command,
       and, if it accepts the request, creates a new Trigger Status
       Resource.<a href="#section-2-12.2" class="pilcrow">¶</a>
</li>
        <li id="section-2-12.3">The dCDN responds to the uCDN with an HTTP 201 response status
       and the location of the Trigger Status Resource.<a href="#section-2-12.3" class="pilcrow">¶</a>
</li>
        <li id="section-2-12.4">The uCDN can poll, possibly repeatedly, the Trigger Status
       Resource in the dCDN.<a href="#section-2-12.4" class="pilcrow">¶</a>
</li>
        <li id="section-2-12.5">The dCDN responds with the Trigger Status Resource, describing
       the progress or results of the CI/T Trigger Command.<a href="#section-2-12.5" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-2-13">
   The remainder of this document describes the messages, Trigger Status
   Resources, and collections of Trigger Status Resources in more
   detail.<a href="#section-2-13" class="pilcrow">¶</a></p>
<div id="sect-2.1">
<section id="section-2.1">
        <h3 id="name-timing-of-triggered-activit">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-timing-of-triggered-activit" class="section-name selfRef">Timing of Triggered Activity</a>
        </h3>
<p id="section-2.1-1">
   Timing of the execution of CI/T Commands is under the dCDN's control,
   including its start time and pacing of the activity in the network.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">
   CI/T "invalidate" and "purge" commands MUST be applied to all data
   acquired before the command was accepted by the dCDN.  The dCDN
   SHOULD NOT apply CI/T "invalidate" and "purge" commands to data
   acquired after the CI/T Command was accepted, but this may not always
   be achievable, so the uCDN cannot count on that.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">
   If the uCDN wishes to invalidate or purge content and then
   immediately pre-position replacement content at the same URLs, it
   SHOULD ensure that the dCDN has completed the invalidate/purge before
   initiating the pre-positioning.  Otherwise, there is a risk that the
   dCDN pre-positions the new content, then immediately invalidates or
   purges it (as a result of the two uCDN requests running in parallel).<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">
   Because the CI/T Command timing is under the dCDN's control, the dCDN
   implementation can choose whether to apply CI/T "invalidate" and
   "purge" commands to content acquisition that has already started when
   the command is received.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-2.2">
<section id="section-2.2">
        <h3 id="name-scope-of-triggered-activity">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-scope-of-triggered-activity" class="section-name selfRef">Scope of Triggered Activity</a>
        </h3>
<p id="section-2.2-1">
   Each CI/T Command can operate on multiple metadata and content URLs.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">
   Multiple representations of an HTTP resource may share the same URL.
   CI/T Trigger Commands that invalidate or purge metadata or content
   apply to all resource representations with matching URLs.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<div id="sect-2.2.1">
<section id="section-2.2.1">
          <h4 id="name-multiple-interconnected-cdn">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-multiple-interconnected-cdn" class="section-name selfRef">Multiple Interconnected CDNs</a>
          </h4>
<p id="section-2.2.1-1">
   In a network of interconnected CDNs, a single uCDN will originate a
   given item of metadata and associated content.  It may distribute
   that metadata and content to more than one dCDN, which may in turn
   distribute that metadata and content to CDNs located further
   downstream.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.2.1-2">
   An intermediate CDN is a dCDN that passes on CDNI Metadata and
   content to dCDNs located further downstream.<a href="#section-2.2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.2.1-3">
   A "diamond" configuration is one where a dCDN can acquire metadata
   and content originated in one uCDN from that uCDN itself and an
   intermediate CDN, or via more than one intermediate CDN.<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.2.1-4">
   CI/T Commands originating in the single source uCDN affect metadata
   and content in all dCDNs; however, in a diamond configuration, it may
   not be possible for the dCDN to determine which uCDN it acquired
   content from.  In this case, a dCDN MUST allow each uCDN from which
   it may have acquired the content to act upon that content using CI/T
   Commands.<a href="#section-2.2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.2.1-5">
   In all other cases, a dCDN MUST reject CI/T Commands from a uCDN that
   attempts to act on another uCDN's content by using, for example,
   HTTP 403 ("Forbidden").<a href="#section-2.2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.2.1-6">
   Security considerations are discussed further in <a href="#sect-8" class="xref">Section 10</a>.<a href="#section-2.2.1-6" class="pilcrow">¶</a></p>
<p id="section-2.2.1-7">
   The diamond configuration may lead to inefficient interactions, but
   the interactions are otherwise harmless.  For example:<a href="#section-2.2.1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1-8.1">When the uCDN issues an "invalidate" CI/T Command, a dCDN will
      receive that command from multiple directly connected uCDNs.  The
      dCDN may schedule multiple such commands separately, and the last
      scheduled command may affect content already revalidated following
      execution of the "invalidate" command that was scheduled first.<a href="#section-2.2.1-8.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.2.1-8.2">If one of a dCDN's directly connected uCDNs loses its rights to
      distribute content, it may issue a CI/T "purge" command.  That
      purge may affect content the dCDN could retain because it's
      distributed by another directly connected uCDN.  But, that content
      can be reacquired by the dCDN from the remaining uCDN.<a href="#section-2.2.1-8.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.2.1-8.3">When the uCDN originating an item of content issues a CI/T purge
      followed by a pre-position, two directly connected uCDNs will pass
      those commands to a dCDN.  That dCDN implementation need not merge
      those operations or notice the repetition, in which case the purge
      issued by one uCDN will complete before the other.  The first uCDN
      to finish its purge may then forward the "preposition" trigger,
      and content pre-positioned as a result might be affected by the
      still-running purge issued by the other uCDN.  However, the dCDN
      will reacquire that content as needed, or when it's asked to
      pre-position the content by the second uCDN.  A dCDN
      implementation could avoid this interaction by knowing which uCDN
      it acquired the content from, or it could minimize the
      consequences by recording the time at which the
      "invalidate"/"purge" command was received and not applying it to
      content acquired after that time.<a href="#section-2.2.1-8.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="sect-2.3">
<section id="section-2.3">
        <h3 id="name-trigger-results">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-trigger-results" class="section-name selfRef">Trigger Results</a>
        </h3>
<p id="section-2.3-1">
   Possible states for a Trigger Status Resource are defined in
   <a href="#sect-5.2.3" class="xref">Section 5.2.3</a>.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">
   The CI/T Trigger Command MUST NOT be reported as "complete" until all
   actions have been completed successfully.  The reasons for failure,
   and URLs or patterns affected, SHOULD be enumerated in the Trigger
   Status Resource.  For more details, see <a href="#sect-4.7" class="xref">Section 4.8</a>.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3-3">
   If a dCDN is also acting as a uCDN in a cascade, it MUST forward CI/T
   Commands to any dCDNs that may be affected.  The CI/T Trigger Command
   MUST NOT be reported as "complete" in a CDN until it is "complete" in
   all of its dCDNs.  If a CI/T Trigger Command is reported as
   "processed" in any dCDN, intermediate CDNs MUST NOT report
   "complete"; instead, they MUST also report "processed".  A CI/T
   Command MAY be reported as "failed" as soon as it fails in a CDN or
   in any of its dCDNs.  A canceled CI/T Trigger Command MUST be
   reported as "cancelling" until it has been reported as "cancelled",
   "complete", or "failed" by all dCDNs in a cascade.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-collections-of-trigger-stat">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-collections-of-trigger-stat" class="section-name selfRef">Collections of Trigger Status Resources</a>
      </h2>
<p id="section-3-1">
   As described in <a href="#sect-2" class="xref">Section 2</a>, Trigger Status Resources exist in the dCDN
   to report the status of activity triggered by each uCDN.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">
   A collection of Trigger Status Resources is a resource that contains
   a reference to each Trigger Status Resource in that collection.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">
   The dCDN MUST make a collection of a uCDN's Trigger Status Resources
   available to that uCDN.  This collection includes all of the Trigger
   Status Resources created for CI/T Commands from the uCDN that have
   been accepted by the dCDN, and have not yet been deleted by the uCDN,
   or expired and removed by the dCDN (as described in <a href="#sect-4.4" class="xref">Section 4.4</a>).
   Trigger Status Resources belonging to a uCDN MUST NOT be visible to
   any other CDN.  The dCDN could, for example, achieve this by offering
   different collection URLs to each uCDN and by filtering the response
   based on the uCDN with which the HTTP client is associated.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">
   To trigger activity in a dCDN or to cancel triggered activity, the
   uCDN POSTs a CI/T Command to the dCDN's collection of the uCDN's
   Trigger Status Resources.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">
   In order to allow the uCDN to check the status of multiple jobs in a
   single request, the dCDN MAY also maintain collections representing
   filtered views of the collection of all Trigger Status Resources.
   These filtered collections are "optional-to-implement", but if they
   are implemented, the dCDN MUST include links to them in the
   collection of all Trigger Status Resources.  The filtered
   collections are:<a href="#section-3-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-6.1">Pending - Trigger Status Resources for CI/T Trigger Commands that
      have been accepted but not yet acted upon.<a href="#section-3-6.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.2">Active - Trigger Status Resources for CI/T Trigger Commands that
      are currently being processed in the dCDN.<a href="#section-3-6.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.3">Complete - Trigger Status Resources representing activity that
      completed successfully, and "processed" CI/T Trigger Commands for
      which no further status updates will be made by the dCDN.<a href="#section-3-6.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-6.4">Failed - Trigger Status Resources representing CI/T Commands that
      failed or were canceled by the uCDN.<a href="#section-3-6.4" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-cdni-trigger-interface">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-cdni-trigger-interface" class="section-name selfRef">CDNI Trigger Interface</a>
      </h2>
<p id="section-4-1">
   This section describes an interface to enable a uCDN to trigger
   activity in a dCDN.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">
   The CI/T interface builds on top of HTTP, so dCDNs may make use of
   any HTTP feature when implementing the CI/T interface.  For example,
   a dCDN SHOULD make use of HTTP's caching mechanisms to indicate that
   a requested response/representation has not been modified, reducing
   the uCDN's processing needed to determine whether the status of
   triggered activity has changed.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">
   All dCDNs implementing CI/T MUST support the HTTP GET, HEAD, POST,
   and DELETE methods as defined in <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">
   The only representation specified in this document is JSON <span>[<a href="#RFC8259" class="xref">RFC8259</a>]</span>.
   It MUST be supported by the uCDN and by the dCDN.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">
   The URL of the dCDN's collection of all Trigger Status Resources
   needs to be either discovered by or configured in the uCDN.  The
   mechanism for discovery of that URL is outside the scope of this
   document.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">
   CI/T Commands are POSTed to the dCDN's collection of all Trigger
   Status Resources.  If a CI/T Trigger Command is accepted by the dCDN,
   the dCDN creates a new Trigger Status Resource and returns its URI to
   the uCDN in an HTTP 201 response.  The triggered activity can then be
   monitored by the uCDN using that resource and the collections
   described in <a href="#sect-3" class="xref">Section 3</a>.<a href="#section-4-6" class="pilcrow">¶</a></p>
<p id="section-4-7">
   The URI of each Trigger Status Resource is returned to the uCDN when
   it is created, and URIs of all Trigger Status Resources are listed in
   the dCDN's collection of all Trigger Status Resources.  This means
   all Trigger Status Resources can be discovered by the uCDN, so dCDNs
   are free to assign whatever structure they desire to the URIs for
   CI/T resources.  Therefore, uCDNs MUST NOT make any assumptions
   regarding the structure of CI/T URIs or the mapping between CI/T
   objects and their associated URIs.  URIs present in the examples in
   this document are purely illustrative and are not intended to impose
   a definitive structure on CI/T interface implementations.<a href="#section-4-7" class="pilcrow">¶</a></p>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-creating-triggers">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-creating-triggers" class="section-name selfRef">Creating Triggers</a>
        </h3>
<p id="section-4.1-1">
   To issue a CI/T Command, the uCDN makes an HTTP POST to the dCDN's
   collection of all of the uCDN's Trigger Status Resources.  The
   request body of that POST is a CI/T Command, as described in
   <a href="#sect-5.1.1" class="xref">Section 5.1.1</a>.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">
   The dCDN validates the CI/T Command.  If the command is malformed or
   the uCDN does not have sufficient access rights, the dCDN MUST either
   respond with an appropriate 4xx HTTP error code and not create a
   Trigger Status Resource or create a "failed" Trigger Status Resource
   containing an appropriate Error Description.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">
   When a CI/T Trigger Command is accepted, the dCDN MUST create a new
   Trigger Status Resource that will convey a specification of the CI/T
   Command and its current status.  The HTTP response to the uCDN MUST
   have status code 201 and MUST convey the URI of the Trigger Status
   Resource in the Location header field <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>.  The HTTP response
   SHOULD include the content of the newly created Trigger Status
   Resource.  This is particularly important in cases where the CI/T
   Trigger Command has completed immediately.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">
   Once a Trigger Status Resource has been created, the dCDN MUST NOT
   reuse its URI, even after that Trigger Status Resource has been
   removed.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">
   The dCDN SHOULD track and report on the progress of CI/T Trigger
   Commands using a Trigger Status Resource (<a href="#sect-5.1.2" class="xref">Section 5.1.2</a>).  If the
   dCDN is not able to do that, it MUST indicate that it has accepted
   the request but will not be providing further status updates.  To do
   this, it sets the status of the Trigger Status Resource to
   "processed".  In this case, CI/T processing should continue as for a
   "complete" request, so the Trigger Status Resource MUST be added to
   the dCDN's collection of complete Trigger Status Resources.  The dCDN
   SHOULD also provide an estimated completion time for the request by
   using the "etime" property of the Trigger Status Resource.  This will
   allow the uCDN to schedule pre-positioning after an earlier delete of
   the same URLs is expected to have finished.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">
   If the dCDN is able to track the execution of CI/T Commands and a
   CI/T Command is queued by the dCDN for later action, the "status"
   property of the Trigger Status Resource MUST be "pending".  Once
   processing has started, the status MUST be "active".  Finally, once
   the CI/T Command is complete, the status MUST be set to "complete" or
   "failed".<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<p id="section-4.1-7">
   A CI/T Trigger Command may result in no activity in the dCDN if, for
   example, it is an "invalidate" or "purge" request for data the dCDN
   has not yet acquired, or a "preposition" request for data that it has
   already acquired and that is still valid.  In this case, the status
   of the Trigger Status Resource MUST be "processed" or "complete", and
   the Trigger Status Resource MUST be added to the dCDN's collection of
   complete Trigger Status Resources.<a href="#section-4.1-7" class="pilcrow">¶</a></p>
<p id="section-4.1-8">
   Once created, Trigger Status Resources can be canceled or deleted by
   the uCDN, but not modified.  The dCDN MUST reject PUT and POST
   requests from the uCDN to Trigger Status Resources by responding with
   an appropriate HTTP status code -- for example, 405 ("Method Not Allowed").<a href="#section-4.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-checking-status">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-checking-status" class="section-name selfRef">Checking Status</a>
        </h3>
<p id="section-4.2-1">
   The uCDN has two ways to check the progress of CI/T Commands it has
   issued to the dCDN, as described in Sections 4.2.1 and 4.2.2.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">
   To allow the uCDN to check for changes in the status of a Trigger
   Status Resource or collection of Trigger Status Resources without
   refetching the whole resource or collection, the dCDN SHOULD include
   entity-tags (ETags) for the uCDN to use as cache validators, as
   defined in <span>[<a href="#RFC7232" class="xref">RFC7232</a>]</span>.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">
   The dCDN SHOULD use the cache control headers for responses to GETs
   for Trigger Status Resources and Collections to indicate the
   frequency at which it recommends that the uCDN should poll for
   change.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<div id="sect-4.2.1">
<section id="section-4.2.1">
          <h4 id="name-polling-trigger-status-reso">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-polling-trigger-status-reso" class="section-name selfRef">Polling Trigger Status Resource Collections</a>
          </h4>
<p id="section-4.2.1-1">
   The uCDN can fetch the collection of its Trigger Status Resources or
   filtered views of that collection.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.2.1-2">
   This makes it possible to poll the status of all CI/T Trigger
   Commands in a single request.  If the dCDN moves a Trigger Status
   Resource from the active to the completed collection, the uCDN can
   fetch the result of that activity.<a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.1-3">
   When polling in this way, the uCDN SHOULD use HTTP ETags to monitor
   for change, rather than repeatedly fetching the whole collection.  An
   example of this is given in <a href="#sect-6.2.4" class="xref">Section 8.2.4</a>.<a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.2.2">
<section id="section-4.2.2">
          <h4 id="name-polling-trigger-status-resou">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-polling-trigger-status-resou" class="section-name selfRef">Polling Trigger Status Resources</a>
          </h4>
<p id="section-4.2.2-1">
   The uCDN has a URI provided by the dCDN for each Trigger Status
   Resource it has created.  It may fetch that Trigger Status Resource
   at any time.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2.2-2">
   This can be used to retrieve progress information and to fetch the
   result of the CI/T Command.<a href="#section-4.2.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2.2-3">
   When polling in this way, the uCDN SHOULD use HTTP ETags to monitor
   for change, rather than repeatedly fetching the Trigger Status
   Resource.<a href="#section-4.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.3">
<section id="section-4.3">
        <h3 id="name-canceling-triggers">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-canceling-triggers" class="section-name selfRef">Canceling Triggers</a>
        </h3>
<p id="section-4.3-1">
   The uCDN can request cancellation of a CI/T Trigger Command by
   POSTing a CI/T Cancel Command to the collection of all Trigger Status
   Resources.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">
   The dCDN is required to accept and respond to the CI/T Cancel
   Command, but the actual cancellation of a CI/T Trigger Command is
   optional-to-implement.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">
   The dCDN MUST respond to the CI/T Cancel Command appropriately -- for
   example, with HTTP status code 200 ("OK") if the cancellation has
   been processed and the CI/T Command is inactive, 202 ("Accepted") if
   the command has been accepted but the CI/T Command remains active, or
   501 ("Not Implemented") if cancellation is not supported by the dCDN.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">
   If cancellation of a "pending" Trigger Status Resource is accepted by
   the dCDN, the dCDN SHOULD NOT start the processing of that activity.
   Issuing a CI/T Cancel Command for a "pending" Trigger Status Resource
   does not, however, guarantee that the corresponding activity will not
   be started, because the uCDN cannot control the timing of that
   activity.  Processing could, for example, start after the POST is
   sent by the uCDN but before that request is processed by the dCDN.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">
   If cancellation of an "active" or "processed" Trigger Status Resource
   is accepted by the dCDN, the dCDN SHOULD stop processing the CI/T
   Command.  However, as with cancellation of a "pending" CI/T Command,
   the dCDN does not guarantee this.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.3-6">
   If the CI/T Command cannot be stopped immediately, the status in the
   corresponding Trigger Status Resource MUST be set to "cancelling",
   and the Trigger Status Resource MUST remain in the collection of
   Trigger Status Resources for active CI/T Commands.  If processing is
   stopped before normal completion, the status value in the Trigger
   Status Resource MUST be set to "cancelled", and the Trigger Status
   Resource MUST be included in the collection of failed CI/T Trigger
   Commands.<a href="#section-4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.3-7">
   Cancellation of a "complete" or "failed" Trigger Status Resource
   requires no processing in the dCDN.  Its status MUST NOT be changed
   to "cancelled".<a href="#section-4.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.4">
<section id="section-4.4">
        <h3 id="name-deleting-triggers">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-deleting-triggers" class="section-name selfRef">Deleting Triggers</a>
        </h3>
<p id="section-4.4-1">
   The uCDN can delete Trigger Status Resources at any time, using the
   HTTP DELETE method.  The effect is similar to cancellation, but no
   Trigger Status Resource remains afterwards.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">
   Once deleted, the references to a Trigger Status Resource MUST be
   removed from all Trigger Status Resource collections.  Subsequent
   requests to GET the deleted Trigger Status Resource SHOULD be
   rejected by the dCDN with an HTTP error.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.4-3">
   If a "pending" Trigger Status Resource is deleted, the dCDN
   SHOULD NOT start the processing of that activity.  Deleting a
   "pending" Trigger Status Resource does not, however, guarantee that
   it has not started, because the uCDN cannot control the timing of
   that activity.  Processing may, for example, start after the DELETE
   is sent by the uCDN but before that request is processed by the dCDN.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.4-4">
   If an "active" or "processed" Trigger Status Resource is deleted, the
   dCDN SHOULD stop processing the CI/T Command.  However, as with
   deletion of a "pending" Trigger Status Resource, the dCDN does not
   guarantee this.<a href="#section-4.4-4" class="pilcrow">¶</a></p>
<p id="section-4.4-5">
   Deletion of a "complete" or "failed" Trigger Status Resource requires
   no processing in the dCDN other than deletion of the Trigger Status
   Resource.<a href="#section-4.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.5">
<section id="section-4.5">
        <h3 id="name-expiry-of-trigger-status-re">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-expiry-of-trigger-status-re" class="section-name selfRef">Expiry of Trigger Status Resources</a>
        </h3>
<p id="section-4.5-1">
   The dCDN can choose to automatically delete Trigger Status Resources
   some time after they become "complete", "processed", "failed", or
   "cancelled".  In this case, the dCDN will remove the Trigger Status
   Resource and respond to subsequent requests for it with an HTTP
   error.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<p id="section-4.5-2">
   If the dCDN does remove Trigger Status Resources automatically, it
   MUST report the length of time after which it will do so, using a
   property of the collection of all Trigger Status Resources.  It is<a href="#section-4.5-2" class="pilcrow">¶</a></p>
<p id="section-4.5-3">
   RECOMMENDED that Trigger Status Resources are not automatically
   deleted by the dCDN for at least 24 hours after they become
   "complete", "processed", "failed", or "cancelled".<a href="#section-4.5-3" class="pilcrow">¶</a></p>
<p id="section-4.5-4">
   To ensure that it is able to get the status of its Trigger Status
   Resources for completed and failed CI/T Commands, it is RECOMMENDED
   that the uCDN polling interval is less than the time after which
   records for completed activity will be deleted.<a href="#section-4.5-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.6">
<section id="section-4.6">
        <h3 id="name-loop-detection-and-preventi">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-loop-detection-and-preventi" class="section-name selfRef">Loop Detection and Prevention</a>
        </h3>
<p id="section-4.6-1">
   Given three CDNs, A, B, and C, if CDNs B and C delegate delivery of
   CDN A's content to each other, CDN A's CI/T Commands could be passed
   between CDNs B and C in a loop.  More complex networks of CDNs could
   contain similar loops involving more hops.<a href="#section-4.6-1" class="pilcrow">¶</a></p>
<p id="section-4.6-2">
   In order to prevent and detect such CI/T loops, each CDN uses a CDN
   Provider ID (PID) to uniquely identify itself.  In every CI/T Command
   it originates or cascades, each CDN MUST append an array element
   containing its CDN PID to a JSON array under an entry named
   "cdn-path".  When receiving CI/T Commands, a dCDN MUST check the
   cdn-path and reject any CI/T Command that already contains its own
   CDN PID in the cdn-path.  Transit CDNs MUST check the cdn-path and
   not cascade the CI/T Command to dCDNs that are already listed in the
   cdn-path.<a href="#section-4.6-2" class="pilcrow">¶</a></p>
<p id="section-4.6-3">
   The CDN PID consists of the two characters "AS" followed by the CDN
   provider's Autonomous System number <span>[<a href="#RFC1930" class="xref">RFC1930</a>]</span>, then a colon (":") and
   an additional qualifier that is used to guarantee uniqueness in case
   a particular AS has multiple independent CDNs deployed -- for
   example, "AS64496:0".<a href="#section-4.6-3" class="pilcrow">¶</a></p>
<p id="section-4.6-4">
   If the CDN provider has multiple ASes, the same AS number SHOULD be
   used in all messages from that CDN provider, unless there are
   multiple distinct CDNs.<a href="#section-4.6-4" class="pilcrow">¶</a></p>
<p id="section-4.6-5">
   If the CDNI Request Routing Redirection interface (RI) described in
   <span>[<a href="#RFC7975" class="xref">RFC7975</a>]</span> is implemented by the dCDN, the CI/T interface and the RI
   SHOULD use the same CDN PID.<a href="#section-4.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="trigger-extensibility">
<section id="section-4.7">
        <h3 id="name-trigger-extensibility">
<a href="#section-4.7" class="section-number selfRef">4.7. </a><a href="#name-trigger-extensibility" class="section-name selfRef">Trigger Extensibility</a>
        </h3>
<p id="section-4.7-1">
             The CDNI Control Interface / Triggers <span>[<a href="#RFC8007" class="xref">RFC8007</a>]</span> defines a set of properties
             and objects used by the trigger commands. In this document we define an extension mechanism
             to the triggers interface that enables the application to add various functions that allow
             finer control over the trigger execution. This document specifies a generic trigger extension
             object wrapper for managing individual CDNI trigger extensions in an opaque manner.<a href="#section-4.7-1" class="pilcrow">¶</a></p>
<p id="section-4.7-2">This document also registers CDNI Payload Types <span>[<a href="#RFC7736" class="xref">RFC7736</a>]</span> under the namespace CIT
             for the initial set of trigger extension types:<a href="#section-4.7-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.7-3.1">CIT.LocationPolicy (for controlling the locations in which the trigger is executed)<a href="#section-4.7-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.7-3.2">CIT.TimePolicy (for scheduling a trigger to run in a specific time window)<a href="#section-4.7-3.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.7-4">Example use cases<a href="#section-4.7-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.7-5.1">Pre-position with cache location policy<a href="#section-4.7-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.7-5.2">Purge content with cache location policy<a href="#section-4.7-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.7-5.3">Pre-position at a specific time<a href="#section-4.7-5.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.7-5.4">Purge by content acquisition time (e.g. purge all content acquired in the past X hours)<a href="#section-4.7-5.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="sect-4.7">
<section id="section-4.8">
        <h3 id="name-error-handling">
<a href="#section-4.8" class="section-number selfRef">4.8. </a><a href="#name-error-handling" class="section-name selfRef">Error Handling</a>
        </h3>
<p id="section-4.8-1">
   A dCDN can signal rejection of a CI/T Command using HTTP status codes
   -- for example, 400 ("Bad Request") if the request is malformed, or
   403 ("Forbidden") or 404 ("Not Found") if the uCDN does not have
   permission to issue CI/T Commands or it is trying to act on another
   CDN's data.<a href="#section-4.8-1" class="pilcrow">¶</a></p>
<p id="section-4.8-2">
   If any part of the CI/T Trigger Command fails, the trigger SHOULD be
   reported as "failed" once its activity is complete or if no further
   errors will be reported.  The "errors" property in the Trigger Status
   Resource will be used to enumerate which actions failed and the
   reasons for failure, and can be present while the Trigger Status
   Resource is still "pending" or "active", if the CI/T Trigger Command
   is still running for some URLs or patterns in the Trigger
   Specification.<a href="#section-4.8-2" class="pilcrow">¶</a></p>
<p id="section-4.8-3">
   Once a request has been accepted, processing errors are reported in
   the Trigger Status Resource using a list of Error Descriptions.  Each
   Error Description is used to report errors against one or more of the
   URLs or patterns in the Trigger Specification.<a href="#section-4.8-3" class="pilcrow">¶</a></p>
<p id="section-4.8-4">
   If a Surrogate affected by a CI/T Trigger Command is offline in the
   dCDN or the dCDN is unable to pass a CI/T Command on to any of its
   cascaded dCDNs:<a href="#section-4.8-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.8-5.1">If the CI/T Command is abandoned by the dCDN, the dCDN SHOULD
      report an error.<a href="#section-4.8-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.8-5.2">A CI/T "invalidate" command may be reported as "complete" when
      Surrogates that may have the data are offline.  In this case,
      Surrogates MUST NOT use the affected data without first
      revalidating it when they are back online.<a href="#section-4.8-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.8-5.3">CI/T "preposition" and "purge" commands can be reported as
      "processed" if affected caches are offline and the activity will
      complete when they return to service.<a href="#section-4.8-5.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.8-5.4">Otherwise, the dCDN SHOULD keep the Trigger Status Resource in
      state "pending" or "active" until either the CI/T Command is acted
      upon or the uCDN chooses to cancel it.<a href="#section-4.8-5.4" class="pilcrow">¶</a>
</li>
        </ul>
<div id="error-propagation">
<section id="section-4.8.1">
          <h4 id="name-error-propagation">
<a href="#section-4.8.1" class="section-number selfRef">4.8.1. </a><a href="#name-error-propagation" class="section-name selfRef">Error propagation</a>
          </h4>
<p id="section-4.8.1-1">
             This subsection explains the mechanism for enabling the uCDN to traceback an error to the dCDN in which it occurred.
             CDNI triggers may be propagated over a chain of downstream CDNs. For example, an 
             upstream CDN A (uCDN-A) that is delegating to a downstream CDN B (dCDN-B) and dCDN-B is delegating 
             to a downstream CDN C (dCDN-C). Triggers sent from uCDN-A to dCDN-B may be redistributed 
             from dCDN-B to dCDN-C and errors can occur anywhere along the path. Therefore, it might be essential for 
             uCDN-A that sets the trigger, to be able to trace back an error to the downstream CDN where it occurred. 
             This document adds a mechanism to propagate the CDN Provider ID (PID) of the dCDN where the fault occurred, back to the 
             uCDN by adding the PID
             to the error description. When dCDN-B propagates a trigger to the further downstream dCDN-C, 
             it MUST also propagate back the errors received in the trigger status resource from dCDN-C by adding
             them to the errors array in its own status resource to be sent back to the originating uCDN-A.
             While propagating back the errors, and depending on the implementation, dCDN-B MAY also 
             specify the dCDN-C PID, indicating to which CDN the error relates spefically.
             The trigger originating upstream CDN will receive an array of errors that occurred 
             in all the CDNs along the execution path, where each error MAY be carrying its own CDN identifier.<a href="#section-4.8.1-1" class="pilcrow">¶</a></p>
<p id="section-4.8.1-2">
            <a href="#error-propagation-seq" class="xref">Figure 2</a> below is an example showing the message flow used by
            uCDN-A to trigger activity in the dCDN-B, followed by dCDN-C, as well as the discovery of the
            status of that activity, including the Error Propagation.<a href="#section-4.8.1-2" class="pilcrow">¶</a></p>
<span id="name-cdni-message-flow-for-trigg"></span><div id="error-propagation-seq">
<figure id="figure-2">
            <div class="artwork art-text alignLeft" id="section-4.8.1-3.1">
<pre>
uCDN-A                         dCDN-B                         dCDN-C
 |                              |                              |
 | (1) POST                     |                              |
 | https://dcdn-b.example.com   |                              |
 | /triggers/uCDN-A             |                              |
[ ]---------------------------&gt;[ ]--+                          |
 |                             [ ]  | (2)                      |
 |                             [ ]&lt;-+                          |
 | (3) HTTP 201 Response.      [ ]                             |
 |&lt;----------------------------[ ]                             |
 | Loc:                        [ ]                             |
 | https://dcdn-b.example.com  [ ] (4) POST                    |
 | /triggers/uCDN-A/123        [ ] https://dcdn-c.example.com  |
 |                             [ ] /triggers/uCDN-A            | (5)
 |                             [ ]---------------------------&gt;[ ]--+
 |                              |                             [ ]  |
 |                              |                             [ ]&lt;-+
 |                              | (6) HTTP 201 Response.      [ ]
 |                             [ ]&lt;---------------------------[ ]
 |                              |  Loc:                        |
 |                              |  https://dcdn-c.example.com  |
 |                              |  /triggers/dCDN-B/456        |
 |                              |                              |
 |                             [ ]--+                          |
 |                             [ ]  | (7.1)                    |
 |                             [ ]&lt;-+                         [ ]--+
 |                              |                       (7.2) [ ]  |
 |                              |                             [ ]&lt;-+
 |                              |                              |
 .                              .                              .
 .                              .                              .
 .                              .                              .
 |                              | (8) GET                      |
 |                              | https://dcdn-c.example.com   |
 |                              | /triggers/dCDN-B/456         |
 |                             [ ]---------------------------&gt;[ ]
 |                              |                             [ ]
 |                              | (9) HTTP 200                [ ]
 |                              | Trigger Status Resource     [ ]
 |                             [ ]&lt;---------------------------[ ]
 |                              |                              |
 .                              .                              .
 .                              .                              .
 .                              .                              .
 | (10) GET                     |                              |
 | https://dcdn-b.example.com   |                              |
 | /triggers/uCDN-A/123         |                              |
[ ]---------------------------&gt;[ ]                             |
 |                             [ ]                             |
 | (11) HTTP 200               [ ]                             |
 | Trigger Status Resource     [ ]                             |
[ ]&lt;---------------------------[ ]                             |
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-cdni-message-flow-for-trigg" class="selfRef">CDNI Message Flow for Triggers, Including Error Propagation</a>
            </figcaption></figure>
</div>
<p id="section-4.8.1-4">
          The steps in <a href="#error-propagation-seq" class="xref">Figure 2</a> are as follows:<a href="#section-4.8.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.8.1-5">
<li id="section-4.8.1-5.1">
 The uCDN-A triggers action in the dCDN-B by POSTing a CI/T Command to a collection of
 Trigger Status Resources "https://dcdn-b.example.com/triggers/uCDN-A". This URL was given to
 the uCDN-A when the CI/T interface was established.<a href="#section-4.8.1-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.2">
 The dCDN-B authenticates the request, validates the CI/T Command, and, if it accepts the request, creates a new Trigger Status Resource.<a href="#section-4.8.1-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.3">
 The dCDN-B responds to the uCDN-A with an HTTP 201 response status
 and the location of the Trigger Status Resource.<a href="#section-4.8.1-5.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.4">
 The dCDN-B triggers the action in the dCDN-C by POSTing a CI/T Command to
 a collection of Trigger Status Resources
 "https://dcdn-c.example.com/triggers/dCDN-B".  This URL was given to
 the uCDN-A when the CI/T interface was established.<a href="#section-4.8.1-5.4" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.5">
 The dCDN-C authenticates the request, validates the CI/T Command,
 and, if it accepts the request, creates a new Trigger Status Resource.<a href="#section-4.8.1-5.5" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.6">
 The dCDN-C responds to the dCDN-B with an HTTP 201 response status and
 the location of the Trigger Status Resource.<a href="#section-4.8.1-5.6" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.7">
 The dCDN-C acts upon the CI/T Command. However, the command fails at dCDN-C as,
 for example, the Tigger Specification contains a "type" that is not supported by dCDN-C.<a href="#section-4.8.1-5.7" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.8">
 The dCDN-B can poll, possibly repeatedly, the Trigger Status Resource in dCDN-C.<a href="#section-4.8.1-5.8" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.9">
 The dCDN-C responds with the Trigger Status Resource, describing the progress or results
 of the CI/T Trigger Command. In the described flow, the returned Status is "failed",
 with an Error Description Object holding an "eunsupported" Error Code reflecting the status response.<a href="#section-4.8.1-5.9" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.10">
 The uCDN-A can poll, possibly repeatedly, the Trigger Status Resource in dCDN-B.<a href="#section-4.8.1-5.10" class="pilcrow">¶</a>
</li>
            <li id="section-4.8.1-5.11">
 The dCDN-B responds with the Trigger Status Resource, describing the progress or results of
 the CI/T Trigger Command. In the flow described above, the returned Status is "failed",
 and the "eunsupported" error received in the trigger status resource from dCDN-C is propagated along with dCDN-C PID
                by adding it to the errors array in dCDN-B's own status resource to be sent back to the originating uCDN-A.<a href="#section-4.8.1-5.11" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="sect-4.8">
<section id="section-4.9">
        <h3 id="name-content-urls">
<a href="#section-4.9" class="section-number selfRef">4.9. </a><a href="#name-content-urls" class="section-name selfRef">Content URLs</a>
        </h3>
<p id="section-4.9-1">
   If content URLs are transformed by an intermediate CDN in a cascade,
   that intermediate CDN MUST similarly transform URLs in CI/T Commands
   it passes to its dCDN.<a href="#section-4.9-1" class="pilcrow">¶</a></p>
<p id="section-4.9-2">
   When processing Trigger Specifications, CDNs MUST ignore the URL
   scheme (HTTP or HTTPS) in comparing URLs.  For example, for a CI/T
   "invalidate" or "purge" command, content MUST be invalidated or
   purged regardless of the protocol clients used to request it.<a href="#section-4.9-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-ci-t-object-properties-and-">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-ci-t-object-properties-and-" class="section-name selfRef">CI/T Object Properties and Encoding</a>
      </h2>
<p id="section-5-1">
   The CI/T Commands, Trigger Status Resources, and Trigger Collections,
   as well as their properties, are encoded using JSON, as defined in
   Sections <a href="#sect-5.1.1" class="xref">Section 5.1.1</a>, <a href="#sect-5.1.2" class="xref">Section 5.1.2</a>, and <a href="#sect-5.1.3" class="xref">Section 5.1.3</a>.  They MUST use the MIME media type
   "application/cdni", with parameter "ptype" values as defined below
   and in <a href="#sect-7.1" class="xref">Section 9.1</a>.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">
   Names in JSON are case sensitive.  The names and literal values
   specified in the present document MUST always use lowercase.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">
   JSON types, including "object", "array", "number", and "string", are
   defined in <span>[<a href="#RFC8259" class="xref">RFC8259</a>]</span>.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">
   Unrecognized name/value pairs in JSON objects SHOULD NOT be treated
   as an error by either the uCDN or dCDN.  They SHOULD be ignored
   during processing and passed on by the dCDN to any further dCDNs in a
   cascade.<a href="#section-5-4" class="pilcrow">¶</a></p>
<div id="sect-5.1">
<section id="section-5.1">
        <h3 id="name-ci-t-objects">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-ci-t-objects" class="section-name selfRef">CI/T Objects</a>
        </h3>
<p id="section-5.1-1">
   The top-level objects defined by the CI/T interface are described in
   this section.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">
   The encoding of values used by these objects is described in
   <a href="#sect-5.2" class="xref">Section 5.2</a>.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<div id="sect-5.1.1">
<section id="section-5.1.1">
          <h4 id="name-ci-t-commands">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-ci-t-commands" class="section-name selfRef">CI/T Commands</a>
          </h4>
<p id="section-5.1.1-1">
   CI/T Commands MUST use a MIME media type of "application/cdni; ptype=ci-trigger-command".<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-2">
   A CI/T Command is encoded as a JSON object containing the following
   name/value pairs.<a href="#section-5.1.1-2" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.1.1-3.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.1.1-3.1.1">
                <dt id="section-5.1.1-3.1.1.1">Name: trigger.v2</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.1-3.1.1.2">
                  <p id="section-5.1.1-3.1.1.2.1">
 Description: A specification of the trigger type and a set of
         data to act upon.<a href="#section-5.1.1-3.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3.1.1.2.2">
 Value: A Trigger Specification, as defined in <a href="#sect-5.2.1" class="xref">Section 5.2.1</a>.<a href="#section-5.1.1-3.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3.1.1.2.3">
 Mandatory: No, but exactly one of "trigger" or "cancel" MUST be
         present in a CI/T Command.<a href="#section-5.1.1-3.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.1-3.1.1.3">Name: cancel</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.1-3.1.1.4">
                  <p id="section-5.1.1-3.1.1.4.1">
 Description: The URLs of Trigger Status Resources for CI/T
         Trigger Commands that the uCDN wants to cancel.<a href="#section-5.1.1-3.1.1.4.1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3.1.1.4.2">
 Value: A non-empty JSON array of URLs represented as JSON
         strings.<a href="#section-5.1.1-3.1.1.4.2" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3.1.1.4.3">
 Mandatory: No, but exactly one of "trigger" or "cancel" MUST be
         present in a CI/T Command.<a href="#section-5.1.1-3.1.1.4.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.1-3.1.1.5">Name: cdn-path</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.1-3.1.1.6">
                  <p id="section-5.1.1-3.1.1.6.1">
 Description: The CDN PIDs of CDNs that have already issued the
         CI/T Command to their dCDNs.<a href="#section-5.1.1-3.1.1.6.1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3.1.1.6.2">
 Value: A non-empty JSON array of JSON strings, where each
         string is a CDN PID as defined in <a href="#sect-4.6" class="xref">Section 4.6</a>.<a href="#section-5.1.1-3.1.1.6.2" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3.1.1.6.3">
 Mandatory: Yes.<a href="#section-5.1.1-3.1.1.6.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
</section>
</div>
<div id="sect-5.1.2">
<section id="section-5.1.2">
          <h4 id="name-trigger-status-resources">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-trigger-status-resources" class="section-name selfRef">Trigger Status Resources</a>
          </h4>
<p id="section-5.1.2-1">
   Trigger Status Resources MUST use a MIME media type of
   "application/cdni; ptype=ci-trigger-status".<a href="#section-5.1.2-1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-2">
   A Trigger Status Resource is encoded as a JSON object containing the
   following name/value pairs.<a href="#section-5.1.2-2" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.1.2-3.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.1.2-3.1.1">
                <dt id="section-5.1.2-3.1.1.1">Name: trigger</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.2-3.1.1.2">
                  <p id="section-5.1.2-3.1.1.2.1">
 Description: The Trigger Specification POSTed in the body of
         the CI/T Command.  Note that this need not be a byte-for-byte
         copy.  For example, in the JSON representation the dCDN may
         re-serialize the information differently.<a href="#section-5.1.2-3.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.2.2">
 Value: A Trigger Specification, as defined in <a href="#sect-5.2.1" class="xref">Section 5.2.1</a>.<a href="#section-5.1.2-3.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.2.3">
 Mandatory: Yes.<a href="#section-5.1.2-3.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.2-3.1.1.3">Name: ctime</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.2-3.1.1.4">
                  <p id="section-5.1.2-3.1.1.4.1">
 Description: Time at which the CI/T Command was received by the
         dCDN.  Time is determined by the dCDN; there is no requirement
         to synchronize clocks between interconnected CDNs.<a href="#section-5.1.2-3.1.1.4.1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.4.2">
 Value: Absolute Time, as defined in <a href="#sect-5.2.5" class="xref">Section 5.2.9</a>.<a href="#section-5.1.2-3.1.1.4.2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.4.3">
 Mandatory: Yes.<a href="#section-5.1.2-3.1.1.4.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.2-3.1.1.5">Name: mtime</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.2-3.1.1.6">
                  <p id="section-5.1.2-3.1.1.6.1">
 Description: Time at which the Trigger Status Resource was last
         modified.  Time is determined by the dCDN; there is no
         requirement to synchronize clocks between interconnected CDNs.<a href="#section-5.1.2-3.1.1.6.1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.6.2">
 Value: Absolute Time, as defined in <a href="#sect-5.2.5" class="xref">Section 5.2.9</a>.<a href="#section-5.1.2-3.1.1.6.2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.6.3">
 Mandatory: Yes.<a href="#section-5.1.2-3.1.1.6.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.2-3.1.1.7">Name: etime</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.2-3.1.1.8">
                  <p id="section-5.1.2-3.1.1.8.1">
 Description: Estimate of the time at which the dCDN expects to
         complete the activity.  Time is determined by the dCDN; there
         is no requirement to synchronize clocks between interconnected
         CDNs.<a href="#section-5.1.2-3.1.1.8.1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.8.2">
 Value: Absolute Time, as defined in <a href="#sect-5.2.5" class="xref">Section 5.2.9</a>.<a href="#section-5.1.2-3.1.1.8.2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.8.3">
 Mandatory: No.<a href="#section-5.1.2-3.1.1.8.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.2-3.1.1.9">Name: status</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.2-3.1.1.10">
                  <p id="section-5.1.2-3.1.1.10.1">
 Description: Current status of the triggered activity.<a href="#section-5.1.2-3.1.1.10.1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.10.2">
 Value: Trigger Status, as defined in <a href="#sect-5.2.3" class="xref">Section 5.2.3</a>.<a href="#section-5.1.2-3.1.1.10.2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.10.3">
 Mandatory: Yes.<a href="#section-5.1.2-3.1.1.10.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.2-3.1.1.11">Name: errors</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.2-3.1.1.12">
                  <p id="section-5.1.2-3.1.1.12.1">
 Description: Descriptions of errors that have occurred while
         processing a Trigger Command.<a href="#section-5.1.2-3.1.1.12.1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.12.2">
 Value: An array of Error Descriptions, as defined in
         <a href="#sect-5.2.6" class="xref">Section 5.2.10</a>.  An empty array is allowed and is equivalent to
         omitting "errors" from the object.<a href="#section-5.1.2-3.1.1.12.2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3.1.1.12.3">
 Mandatory: No.<a href="#section-5.1.2-3.1.1.12.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
</section>
</div>
<div id="sect-5.1.3">
<section id="section-5.1.3">
          <h4 id="name-trigger-collections">
<a href="#section-5.1.3" class="section-number selfRef">5.1.3. </a><a href="#name-trigger-collections" class="section-name selfRef">Trigger Collections</a>
          </h4>
<p id="section-5.1.3-1">
   Trigger Collections MUST use a MIME media type of "application/cdni; ptype=ci-trigger-collection".<a href="#section-5.1.3-1" class="pilcrow">¶</a></p>
<p id="section-5.1.3-2">
   A Trigger Collection is encoded as a JSON object containing the
   following name/value pairs.<a href="#section-5.1.3-2" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.1.3-3.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.1.3-3.1.1">
                <dt id="section-5.1.3-3.1.1.1">Name: triggers</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.3-3.1.1.2">
                  <p id="section-5.1.3-3.1.1.2.1">
 Description: Links to Trigger Status Resources in the
         collection.<a href="#section-5.1.3-3.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.1.3-3.1.1.2.2">
 Value: A JSON array of zero or more URLs, represented as JSON
         strings.<a href="#section-5.1.3-3.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.1.3-3.1.1.2.3">
 Mandatory: Yes.<a href="#section-5.1.3-3.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.1.3-3.1.1.3">Name: staleresourcetime</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.3-3.1.1.4">
                  <p id="section-5.1.3-3.1.1.4.1">
 Description: The length of time for which the dCDN guarantees
         to keep a completed Trigger Status Resource.  After this time,
         the dCDN SHOULD delete the Trigger Status Resource and all
         references to it from collections.<a href="#section-5.1.3-3.1.1.4.1" class="pilcrow">¶</a></p>
<p id="section-5.1.3-3.1.1.4.2">
 Value: A JSON number, which must be a positive integer,
         representing time in seconds.<a href="#section-5.1.3-3.1.1.4.2" class="pilcrow">¶</a></p>
<p id="section-5.1.3-3.1.1.4.3">
 Mandatory: Yes, in the collection of all Trigger Status
         Resources if the dCDN deletes stale entries.  If the property
         is present in the filtered collections, it MUST have the same
         value as in the collection of all Trigger Status Resources.<a href="#section-5.1.3-3.1.1.4.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
<span class="break"></span><dl class="dlParallel" id="section-5.1.3-4">
            <dt id="section-5.1.3-4.1"></dt>
            <dd style="margin-left: 1.5em" id="section-5.1.3-4.2">
      Names: coll-all, coll-pending, coll-active, coll-complete,
      coll-failed<a href="#section-5.1.3-4.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-5.1.3-5">
            <dt id="section-5.1.3-5.1"></dt>
            <dd style="margin-left: 3.0em" id="section-5.1.3-5.2">
         Description: Link to a Trigger Collection.<a href="#section-5.1.3-5.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-5.1.3-6">
            <dt id="section-5.1.3-6.1"></dt>
            <dd style="margin-left: 3.0em" id="section-5.1.3-6.2">
         Value: A URL represented as a JSON string.<a href="#section-5.1.3-6.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-5.1.3-7">
            <dt id="section-5.1.3-7.1"></dt>
            <dd style="margin-left: 3.0em" id="section-5.1.3-7.2">
         Mandatory: Links to all of the filtered collections are
         mandatory in the collection of all Trigger Status Resources, if
         the dCDN implements the filtered collections.  Otherwise,
         optional.<a href="#section-5.1.3-7.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.1.3-8.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.1.3-8.1.1">
                <dt id="section-5.1.3-8.1.1.1">Name: cdn-id</dt>
                <dd style="margin-left: 1.5em" id="section-5.1.3-8.1.1.2">
                  <p id="section-5.1.3-8.1.1.2.1">
 Description: The CDN PID of the dCDN.<a href="#section-5.1.3-8.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.1.3-8.1.1.2.2">
 Value: A JSON string, the dCDN's CDN PID, as defined in
         <a href="#sect-4.6" class="xref">Section 4.6</a>.<a href="#section-5.1.3-8.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.1.3-8.1.1.2.3">
 Mandatory: Only in the collection of all Trigger Status
         Resources, if the dCDN implements the filtered collections.
         Optional in the filtered collections (the uCDN can always find
         the dCDN's cdn-id in the collection of all Trigger Status
         Resources, but the dCDN can choose to repeat that information
         in its implementation of filtered collections).<a href="#section-5.1.3-8.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="sect-5.2">
<section id="section-5.2">
        <h3 id="name-properties-of-ci-t-objects">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-properties-of-ci-t-objects" class="section-name selfRef">Properties of CI/T Objects</a>
        </h3>
<p id="section-5.2-1">
   This section defines the values that can appear in the top-level
   objects described in <a href="#sect-5.1" class="xref">Section 5.1</a>, and their encodings.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<div id="sect-5.2.1">
<section id="section-5.2.1">
          <h4 id="name-trigger-specification">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-trigger-specification" class="section-name selfRef">Trigger Specification</a>
          </h4>
<p id="section-5.2.1-1">
   A Trigger Collection is encoded as a JSON object containing the
   following name/value pairs.<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-2">
   An unrecognized name/value pair in the Trigger Specification object
   contained in a CI/T Command SHOULD be preserved in the Trigger
   Specification of any Trigger Status Resource it creates.<a href="#section-5.2.1-2" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.1-3.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.2.1-3.1.1">
                <dt id="section-5.2.1-3.1.1.1">Name: type</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.2">
                  <p id="section-5.2.1-3.1.1.2.1">
 Description: Defines the type of the CI/T Trigger Command.<a href="#section-5.2.1-3.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.2.2">
 Value: Trigger Type, as defined in <a href="#sect-5.2.2" class="xref">Section 5.2.2</a>.<a href="#section-5.2.1-3.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.2.3">
 Mandatory: Yes.<a href="#section-5.2.1-3.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.3">Name: metadata.urls</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.4">
                  <p id="section-5.2.1-3.1.1.4.1">
 Description: The uCDN URLs of the metadata the CI/T Trigger
         Command applies to.<a href="#section-5.2.1-3.1.1.4.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.4.2">
 Value: A JSON array of URLs represented as JSON strings.<a href="#section-5.2.1-3.1.1.4.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.4.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty.<a href="#section-5.2.1-3.1.1.4.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.5">Name: content.urls</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.6">
                  <p id="section-5.2.1-3.1.1.6.1">
 Description: URLs of content the CI/T Trigger Command applies
         to.  See <a href="#sect-4.8" class="xref">Section 4.9</a>.<a href="#section-5.2.1-3.1.1.6.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.6.2">
 Value: A JSON array of URLs represented as JSON strings.<a href="#section-5.2.1-3.1.1.6.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.6.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty.<a href="#section-5.2.1-3.1.1.6.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.7">Name: content.ccid</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.8">
                  <p id="section-5.2.1-3.1.1.8.1">
 Description: The Content Collection IDentifier of content the
         trigger applies to.  The "ccid" is a grouping of content, as
         defined by <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-5.2.1-3.1.1.8.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.8.2">
 Value: A JSON array of strings, where each string is a Content
         Collection IDentifier.<a href="#section-5.2.1-3.1.1.8.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.8.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty.<a href="#section-5.2.1-3.1.1.8.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.9">Name: metadata.patterns</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.10">
                  <p id="section-5.2.1-3.1.1.10.1">
 Description: The metadata the trigger applies to.<a href="#section-5.2.1-3.1.1.10.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.10.2">
 Value: A JSON array of PatternMatch objects, as defined in
         <a href="#sect-5.2.4" class="xref">Section 5.2.4</a>.<a href="#section-5.2.1-3.1.1.10.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.10.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty, and metadata.patterns MUST NOT
         be present if the Trigger Type is "preposition".<a href="#section-5.2.1-3.1.1.10.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.11">Name: content.patterns</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.12">
                  <p id="section-5.2.1-3.1.1.12.1">
 Description: The content data the trigger applies to.<a href="#section-5.2.1-3.1.1.12.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.12.2">
 Value: A JSON array of PatternMatch objects, as defined in
         <a href="#sect-5.2.4" class="xref">Section 5.2.4</a>.<a href="#section-5.2.1-3.1.1.12.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.12.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty, and content.patterns MUST NOT be
         present if the Trigger Type is "preposition".<a href="#section-5.2.1-3.1.1.12.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.13">Name: content.regexs</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.14">
                  <p id="section-5.2.1-3.1.1.14.1">
 Description: Regexs of content URLs to which the CI/T trigger command applies.<a href="#section-5.2.1-3.1.1.14.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.14.2">
 Value: A JSON array of RegexMatch objects (see <a href="#regex-match" class="xref">Section 5.2.5</a>).<a href="#section-5.2.1-3.1.1.14.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.14.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty, and content.patterns MUST NOT be
         present if the Trigger Type is "preposition".<a href="#section-5.2.1-3.1.1.14.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.15">Name: content.playlists</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.16">
                  <p id="section-5.2.1-3.1.1.16.1">
 Description: Playlists of content the CI/T trigger command applies to.<a href="#section-5.2.1-3.1.1.16.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.16.2">
 Value: A JSON array of Playlist objects (see <a href="#playlist" class="xref">Section 5.2.6</a>).<a href="#section-5.2.1-3.1.1.16.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.16.3">
 Mandatory: No, but at least one of "metadata.*" or "content.*"
         MUST be present and non-empty, and content.patterns MUST NOT be
         present if the Trigger Type is "preposition".<a href="#section-5.2.1-3.1.1.16.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.1-3.1.1.17">Name: extensions</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.1-3.1.1.18">
                  <p id="section-5.2.1-3.1.1.18.1">
 Description: Array of trigger extension data.<a href="#section-5.2.1-3.1.1.18.1" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.18.2">
 Value:Array of GenericTriggerExtension objects (see <a href="#generic-extension-object" class="xref">Section 5.2.8.2</a>).<a href="#section-5.2.1-3.1.1.18.2" class="pilcrow">¶</a></p>
<p id="section-5.2.1-3.1.1.18.3">
 Mandatory: No. The default is no extensions.<a href="#section-5.2.1-3.1.1.18.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
</section>
</div>
<div id="sect-5.2.2">
<section id="section-5.2.2">
          <h4 id="name-trigger-type">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-trigger-type" class="section-name selfRef">Trigger Type</a>
          </h4>
<p id="section-5.2.2-1">
   Trigger Type is used in a Trigger Specification to describe trigger
   action.<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2.2-2">
   All trigger types MUST be registered in the IANA "CDNI CI/T Trigger Types" registry (see <a href="#sect-7.2" class="xref">Section 9.2</a>).<a href="#section-5.2.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2.2-3">
   A dCDN receiving a request containing a trigger type it does not
   recognize or does not support MUST reject the request by creating a
   Trigger Status Resource with a status of "failed" and the "errors"
   array containing an Error Description with error "eunsupported".<a href="#section-5.2.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2.2-4">
   The following trigger types are defined by this document:<a href="#section-5.2.2-4" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
            <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1"> JSON String</th>
                <th class="text-left" rowspan="1" colspan="1"> Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preposition</td>
                <td class="text-left" rowspan="1" colspan="1">A request for the dCDN to acquire metadata or</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">content.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">invalidate</td>
                <td class="text-left" rowspan="1" colspan="1">A request for the dCDN to invalidate metadata or</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">content.  After servicing this request, the dCDN</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">will not use the specified data without first</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">revalidating it using, for example, an</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">"If-None-Match" HTTP request.  The dCDN need not</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">erase the associated data.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">purge</td>
                <td class="text-left" rowspan="1" colspan="1">A request for the dCDN to erase metadata or</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">content.  After servicing the request, the</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">specified data MUST NOT be held on the dCDN (the</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">dCDN should reacquire the metadata or content from</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">the uCDN if it needs it).</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="sect-5.2.3">
<section id="section-5.2.3">
          <h4 id="name-trigger-status">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-trigger-status" class="section-name selfRef">Trigger Status</a>
          </h4>
<p id="section-5.2.3-1">
   Trigger Status describes the current status of the triggered
   activity.  It MUST be one of the JSON strings in the following table:<a href="#section-5.2.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
            <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1"> JSON String</th>
                <th class="text-left" rowspan="1" colspan="1"> Description </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">pending</td>
                <td class="text-left" rowspan="1" colspan="1">The CI/T Trigger Command has not yet been acted upon.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">active</td>
                <td class="text-left" rowspan="1" colspan="1">The CI/T Trigger Command is currently being acted</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">upon.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">complete</td>
                <td class="text-left" rowspan="1" colspan="1">The CI/T Trigger Command completed successfully.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">processed</td>
                <td class="text-left" rowspan="1" colspan="1">The CI/T Trigger Command has been accepted, and no</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">further status update will be made (can be used in</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">cases where completion cannot be confirmed).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">failed</td>
                <td class="text-left" rowspan="1" colspan="1">The CI/T Trigger Command could not be completed.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">cancelling</td>
                <td class="text-left" rowspan="1" colspan="1">Processing of the CI/T Trigger Command is still in</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">progress, but the CI/T Trigger Command has been</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">canceled by the uCDN.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">cancelled</td>
                <td class="text-left" rowspan="1" colspan="1">The CI/T Trigger Command was canceled by the uCDN.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="sect-5.2.4">
<section id="section-5.2.4">
          <h4 id="name-patternmatch">
<a href="#section-5.2.4" class="section-number selfRef">5.2.4. </a><a href="#name-patternmatch" class="section-name selfRef">PatternMatch</a>
          </h4>
<p id="section-5.2.4-1">
   A PatternMatch consists of a string pattern to match against a URI,
   and flags describing the type of match.<a href="#section-5.2.4-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.2.4-2">
            <dt id="section-5.2.4-2.1">It is encoded as a JSON object with the following name/value pairs:</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.4-2.2">
              <p id="section-5.2.4-2.2.1">
 Name: pattern<a href="#section-5.2.4-2.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.2">
 Description: A pattern for URI matching.<a href="#section-5.2.4-2.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.3">
 Value: A JSON string representing the pattern.  The pattern can
         contain the wildcards * and ?, where * matches any sequence of
         <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span> pchar or "/" characters (including the empty string)
         and ? matches exactly one <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span> pchar character.  The three
         literals $, * and ? MUST be escaped as $$, $* and $? (where $
         is the designated escape character).  All other characters are
         treated as literals.<a href="#section-5.2.4-2.2.3" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.4">
 Mandatory: Yes.<a href="#section-5.2.4-2.2.4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.2.4-2.2.5">
                <dt id="section-5.2.4-2.2.5.1">Name: case-sensitive</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.4-2.2.5.2">
                  <p id="section-5.2.4-2.2.5.2.1">
 Description: Flag indicating whether or not case-sensitive
         matching should be used.<a href="#section-5.2.4-2.2.5.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.5.2.2">
 Value: One of the JSON values "true" (the matching is case
         sensitive) or "false" (the matching is case insensitive).<a href="#section-5.2.4-2.2.5.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.5.2.3">
 Mandatory: No; default is case-insensitive match.<a href="#section-5.2.4-2.2.5.2.3" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-5.2.4-2.2.5.3">Name: match-query-string</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.4-2.2.5.4">
                  <p id="section-5.2.4-2.2.5.4.1">
 Description: Flag indicating whether to include the query part
         of the URI when comparing against the pattern.<a href="#section-5.2.4-2.2.5.4.1" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.5.4.2">
 Value: One of the JSON values "true" (the full URI, including
         the query part, should be compared against the given pattern)
         or "false" (the query part of the URI should be dropped before
         comparison with the given pattern).<a href="#section-5.2.4-2.2.5.4.2" class="pilcrow">¶</a></p>
<p id="section-5.2.4-2.2.5.4.3">
 Mandatory: No; default is "false".  The query part of the URI
         should be dropped before comparison with the given pattern.<a href="#section-5.2.4-2.2.5.4.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-5.2.4-3">
   Example of case-sensitive prefix match against
   "https://www.example.com/trailers/":<a href="#section-5.2.4-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.4-4">
<pre>
{
    "pattern": "https://www.example.com/trailers/*",
    "case-sensitive": true
}
</pre><a href="#section-5.2.4-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="regex-match">
<section id="section-5.2.5">
          <h4 id="name-regexmatch">
<a href="#section-5.2.5" class="section-number selfRef">5.2.5. </a><a href="#name-regexmatch" class="section-name selfRef">RegexMatch</a>
          </h4>
<p id="section-5.2.5-1">
             A RegexMatch consists of a regular expression string a URI is matched against,
             and flags describing the type of match. It is encoded as a JSON object with
             following properties:<a href="#section-5.2.5-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.5-2.1">
              <p id="section-5.2.5-2.1.1">Property: regex<a href="#section-5.2.5-2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.5-2.1.2.1">Description: A regular expression for URI matching.<a href="#section-5.2.5-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.1.2.2">Type: A regular expression to match against the URI, i.e against the path-absolute
                 and the query string parameters <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>. The regular expression
                 string MUST be compatible with <span><a href="#PCRE841" class="xref">PCRE</a> [<a href="#PCRE841" class="xref">PCRE841</a>]</span>.<a href="#section-5.2.5-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.1.2.3">Note: Because '\' has a special meaning in JSON <span>[<a href="#RFC8259" class="xref">RFC8259</a>]</span> as the escape
                 character within JSON strings, the regular expression character '\' MUST be escaped as '\\'.<a href="#section-5.2.5-2.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.1.2.4">Mandatory: Yes.<a href="#section-5.2.5-2.1.2.4" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="ulEmpty normal" id="section-5.2.5-2.2">
              <p id="section-5.2.5-2.2.1">Property: case-sensitive<a href="#section-5.2.5-2.2.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.5-2.2.2.1">Description: Flag indicating whether or not case-sensitive matching should be used.<a href="#section-5.2.5-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.2.2.2">Type: JSON boolean. Either "true" (the matching is case sensitive) or "false"
                 (the matching is case insensitive).<a href="#section-5.2.5-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.2.2.3">Mandatory: No; default is case-insensitive match (i.e., a value of "false").<a href="#section-5.2.5-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="ulEmpty normal" id="section-5.2.5-2.3">
              <p id="section-5.2.5-2.3.1">Property: match-query-string<a href="#section-5.2.5-2.3.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.5-2.3.2.1">Description: Flag indicating whether to include the query part of the URI when
                 comparing against the regex.<a href="#section-5.2.5-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.3.2.2">Type: JSON boolean. Either "true" (the full URI, including the query part,
                 should be compared against the regex) or "false" (the query part of the URI
                 should be dropped before comparison with the given regex).<a href="#section-5.2.5-2.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.5-2.3.2.3">Mandatory: No; default is "false".  The query part of the URI MUST be dropped
                 before comparison with the given regex. This makes the regular expression simpler
                 and safer for cases in which the query parameters are not relevant for the match.<a href="#section-5.2.5-2.3.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-5.2.5-3">Example of a case sensitive, no query parameters, regex match against:<a href="#section-5.2.5-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.5-4">
<pre>
"^(https:\/\/video\.example\.com)\/([a-z])\/
 movie1\/([1-7])\/*(index.m3u8|\d{3}.ts)$"
</pre><a href="#section-5.2.5-4" class="pilcrow">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-5.2.5-5">
<pre>
{
  "regex": "^(https:\\/\\/video\\.example\\.com)\\/([a-z])\\/movie1\
           \/([1-7])\\/*(index.m3u8|\\d{3}.ts)$",
  "case-sensitive": true,
  "match-query-string": false
}

</pre><a href="#section-5.2.5-5" class="pilcrow">¶</a>
</div>
<p id="section-5.2.5-6">This regex matches URLs of domain video.example.com where the path structure is
             /(single lower case letter)/(name-of-title)/(single digit between 1 to 7)/(index.m3u8 or a 3 digit number with ts extension).
             For example:<a href="#section-5.2.5-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.5-7">
<pre>
https://video.example.com/d/movie1/5/index.m3u8
or
https://video.example.com/k/movie1/4/013.ts
</pre><a href="#section-5.2.5-7" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="playlist">
<section id="section-5.2.6">
          <h4 id="name-playlist">
<a href="#section-5.2.6" class="section-number selfRef">5.2.6. </a><a href="#name-playlist" class="section-name selfRef">Playlist</a>
          </h4>
<p id="section-5.2.6-1">A Playlist consists of a full URL and a media protocol identifier.
             An implementation that supports a specific playlist media protocol MUST be able to parse playlist
             files of that protocol type and extract, possibly recursively, the URLs to all media objects
             and/or sub playlist files, and apply the trigger to each one of them separately.<a href="#section-5.2.6-1" class="pilcrow">¶</a></p>
<p id="section-5.2.6-2">Playlist is encoded as a JSON object with following properties:<a href="#section-5.2.6-2" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.6-3.1">
              <p id="section-5.2.6-3.1.1">Property: playlist<a href="#section-5.2.6-3.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.6-3.1.2.1">Description: A URL to the playlist file.<a href="#section-5.2.6-3.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.6-3.1.2.2">Type: A URL represented as a JSON string.<a href="#section-5.2.6-3.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.6-3.1.2.3">Mandatory: Yes.<a href="#section-5.2.6-3.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="ulEmpty normal" id="section-5.2.6-3.2">
              <p id="section-5.2.6-3.2.1">Property: media-protocol<a href="#section-5.2.6-3.2.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.6-3.2.2.1">Description: Media protocol to be when parsing and interpreting this playlist.<a href="#section-5.2.6-3.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.6-3.2.2.2">Type: MediaProtocol (see <a href="#media-protocol" class="xref">Section 5.2.7</a>).<a href="#section-5.2.6-3.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-5.2.6-3.2.2.3">Mandatory: Yes.<a href="#section-5.2.6-3.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-5.2.6-4">Example of a JSON serialized HLS playlist object:<a href="#section-5.2.6-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.6-5">
<pre>
{
  "playlist": "https://www.example.com/hls/title/index.m3u8",
  "media-protocol": "hls"
}

</pre><a href="#section-5.2.6-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="media-protocol">
<section id="section-5.2.7">
          <h4 id="name-mediaprotocol">
<a href="#section-5.2.7" class="section-number selfRef">5.2.7. </a><a href="#name-mediaprotocol" class="section-name selfRef">MediaProtocol</a>
          </h4>
<p id="section-5.2.7-1">Media Protocol objects are used to specify registered type of media protocol
             (see <a href="#IANA.CDNI.MediaProtocolReg" class="xref">Section 9.4</a>) used for protocol related
             operations like pre-position according to playlist.<a href="#section-5.2.7-1" class="pilcrow">¶</a></p>
<p id="section-5.2.7-2">Type: JSON string<a href="#section-5.2.7-2" class="pilcrow">¶</a></p>
<p id="section-5.2.7-3">Example:<a href="#section-5.2.7-3" class="pilcrow">¶</a></p>
<p id="section-5.2.7-4">"dash"<a href="#section-5.2.7-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="trigger-extensions">
<section id="section-5.2.8">
          <h4 id="name-ci-t-trigger-extensions">
<a href="#section-5.2.8" class="section-number selfRef">5.2.8. </a><a href="#name-ci-t-trigger-extensions" class="section-name selfRef">CI/T Trigger Extensions</a>
          </h4>
<p id="section-5.2.8-1">
            A "trigger.v2" object, as defined in <a href="#sect-5.2.1" class="xref">Section 5.2.1</a> includes an
            optional array of trigger extension objects. A trigger extension contain properties
            that are used as directives for dCDN when executing the trigger command -- for example,
            location policies, time policies and so on. Each such CDNI Trigger extension is a specialization
            of a CDNI GenericTriggerExtension object. The GenericTriggerExtension object abstracts the basic
            information required for trigger distribution from the specifics of any given property
            (i.e., property semantics, enforcement options, etc.). All trigger extensions are optional,
            and it is thus the responsibility of the extension specification to define a consistent default
            behavior for the case the extension is not present.<a href="#section-5.2.8-1" class="pilcrow">¶</a></p>
<div id="enforcement-options">
<section id="section-5.2.8.1">
            <h5 id="name-enforcement-options">
<a href="#section-5.2.8.1" class="section-number selfRef">5.2.8.1. </a><a href="#name-enforcement-options" class="section-name selfRef">Enforcement Options</a>
            </h5>
<p id="section-5.2.8.1-1">
             The trigger enforcement options concept is in accordance with the metadata enforcement options
             as defined in Section 3.2 of <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>.<a href="#section-5.2.8.1-1" class="pilcrow">¶</a></p>
<p id="section-5.2.8.1-2">
             The GenericTriggerExtension object defines the properties contained within it
             as well as whether or not the properties are "mandatory-to-enforce".
             If the dCDN does not understand or support a mandatory-to-enforce
             property, the dCDN MUST NOT execute the trigger command. If the extension is
             not mandatory-to-enforce, then that GenericTriggerExtension object can be
             safely ignored and the trigger command can be processed in accordance
             with the rest of the CDNI Trigger spec.<a href="#section-5.2.8.1-2" class="pilcrow">¶</a></p>
<p id="section-5.2.8.1-3">
             Although, a CDN MUST NOT execute a trigger command if a
             mandatory-to-enforce extension cannot be enforced, it could still be
             safe to redistribute that trigger (the "safe-to-redistribute"
             property) to another CDN without modification.  For example, in the
             cascaded CDN case, a transit CDN (tCDN) could convey
             mandatory-to-enforce trigger extension to a dCDN.  For a trigger extension
             that does not require customization or translation (i.e., trigger extension
             that is safe-to-redistribute), the data representation received off the wire
             MAY be stored and redistributed without being understood or supported
             by the tCDN.  However, for trigger extension that requires translation,
             transparent redistribution of the uCDN trigger values might not be
             appropriate.  Certain triggers extensions can be safely, though perhaps not
             optimally, redistributed unmodified.  For example, pre-position command might
             be executed in suboptimal times for some geographies if transparently
             redistributed, but it might still work.<a href="#section-5.2.8.1-3" class="pilcrow">¶</a></p>
<p id="section-5.2.8.1-4">
             Redistribution safety MUST be specified for each GenericTriggerExtension
             property. If a CDN does not understand or support a given
             GenericTriggerExtension property that is not safe-to-redistribute, the CDN
             MUST set the "incomprehensible" flag to true for that GenericTriggerExtension
             object before redistributing it.  The "incomprehensible"
             flag signals to a dCDN that trigger metadata was not properly transformed
             by the tCDN.  A CDN MUST NOT attempt to execute a trigger with an extension that has been
             marked as "incomprehensible" by a uCDN.<a href="#section-5.2.8.1-4" class="pilcrow">¶</a></p>
<p id="section-5.2.8.1-5">
             tCDNs MUST NOT change the value of mandatory-to-enforce or
             safe-to-redistribute when propagating a trigger to a dCDN.  Although a
             tCDN can set the value of "incomprehensible" to true, a tCDN MUST NOT
             change the value of "incomprehensible" from true to false.<a href="#section-5.2.8.1-5" class="pilcrow">¶</a></p>
<p id="section-5.2.8.1-6">
             <a href="#tcdn-actions" class="xref">Table 3</a> describes the action to be taken by a tCDN for the
             different combinations of mandatory-to-enforce ("MtE") and safe-to-redistribute
             ("StR") properties when the tCDN either does or does not understand the trigger
             extension object in question:<a href="#section-5.2.8.1-6" class="pilcrow">¶</a></p>
<span id="name-action-to-be-taken-by-a-tcd"></span><div id="tcdn-actions">
<table class="center" id="table-3">
              <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-action-to-be-taken-by-a-tcd" class="selfRef">Action to be taken by a tCDN for the different combinations of MtE and StR properties</a>
              </caption>
<thead>
                <tr>
                  <th class="text-left" rowspan="1" colspan="1">MtE</th>
                  <th class="text-left" rowspan="1" colspan="1">StR</th>
                  <th class="text-left" rowspan="1" colspan="1">Extension object understood by tCDN</th>
                  <th class="text-left" rowspan="1" colspan="1">Trigger action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute and redistribute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute and redistribute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute. MUST set "incomprehensible" to true when redistributing.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute. Can redistribute after transforming the trigger extension
                  (if the CDN knows how to do so safely); otherwise, MUST set
                  "incomprehensible" to true when redistributing.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute and redistribute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">MUST NOT execute but can redistribute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute. Can redistribute after transforming the trigger extension
                  (if the CDN knows how to do so safely); otherwise, MUST set
                  "incomprehensible" to true when redistributing.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">MUST NOT serve.  MUST set "incomprehensible" to true when redistributing.</td>
                </tr>
              </tbody>
            </table>
</div>
<p id="section-5.2.8.1-8">         
             <a href="#dcdn-actions" class="xref">Table 4</a> describes the action to be taken by a dCDN for the different
             combinations of mandatory-to-enforce and "incomprehensible" ("Incomp")
             properties, when the dCDN either does or does not understand
             the trigger extension object in question:<a href="#section-5.2.8.1-8" class="pilcrow">¶</a></p>
<span id="name-action-to-be-taken-by-a-dcd"></span><div id="dcdn-actions">
<table class="center" id="table-4">
              <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-action-to-be-taken-by-a-dcd" class="selfRef">Action to be taken by a dCDN for the different combinations of MtE and Incomp properties</a>
              </caption>
<thead>
                <tr>
                  <th class="text-left" rowspan="1" colspan="1">MtE</th>
                  <th class="text-left" rowspan="1" colspan="1">Incomp</th>
                  <th class="text-left" rowspan="1" colspan="1">Extension object understood by dCDN</th>
                  <th class="text-left" rowspan="1" colspan="1">Trigger action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute but MUST NOT interpret/apply any trigger extension marked as "incomprehensible".</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute but MUST NOT interpret/apply any trigger extension marked as "incomprehensible".</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">Can execute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">MUST NOT execute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">MUST NOT execute.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">True</td>
                  <td class="text-left" rowspan="1" colspan="1">False</td>
                  <td class="text-left" rowspan="1" colspan="1">MUST NOT execute.</td>
                </tr>
              </tbody>
            </table>
</div>
</section>
</div>
<div id="generic-extension-object">
<section id="section-5.2.8.2">
            <h5 id="name-genericextensionobject">
<a href="#section-5.2.8.2" class="section-number selfRef">5.2.8.2. </a><a href="#name-genericextensionobject" class="section-name selfRef">GenericExtensionObject</a>
            </h5>
<p id="section-5.2.8.2-1">A GenericTriggerExtension object is a wrapper for managing individual CDNI
               Trigger extensions in an opaque manner.<a href="#section-5.2.8.2-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.8.2-2.1">
                <p id="section-5.2.8.2-2.1.1">Property: generic-trigger-extension-type<a href="#section-5.2.8.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.8.2-2.1.2.1">Description: Case-insensitive CDNI Trigger extension object type.<a href="#section-5.2.8.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.1.2.2">Type: String containing the CDNI Payload Type <span>[<a href="#RFC7736" class="xref">RFC7736</a>]</span> of the object contained
                    in the generic-trigger-extension-value property (see table in <a href="#sect-7.1" class="xref">Section 9.1</a>).<a href="#section-5.2.8.2-2.1.2.2" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.1.2.3">Mandatory: Yes.<a href="#section-5.2.8.2-2.1.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="ulEmpty normal" id="section-5.2.8.2-2.2">
                <p id="section-5.2.8.2-2.2.1">Property: generic-trigger-extension-value<a href="#section-5.2.8.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.8.2-2.2.2.1">Description: CDNI Trigger extension object.<a href="#section-5.2.8.2-2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.2.2.2">Type: Format/Type is defined by the value of the
                    generic-trigger-extension-type property above.<a href="#section-5.2.8.2-2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.2.2.3">Mandatory: Yes.<a href="#section-5.2.8.2-2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="ulEmpty normal" id="section-5.2.8.2-2.3">
                <p id="section-5.2.8.2-2.3.1">Property: mandatory-to-enforce<a href="#section-5.2.8.2-2.3.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.8.2-2.3.2.1">Description: Flag identifying whether or not the enforcement of
                    this trigger extension is mandatory.<a href="#section-5.2.8.2-2.3.2.1" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.3.2.2">Type: Boolean<a href="#section-5.2.8.2-2.3.2.2" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.3.2.3">Mandatory: No.  Default is to treat the trigger extension as
                    mandatory-to-enforce (i.e., a value of True).<a href="#section-5.2.8.2-2.3.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="ulEmpty normal" id="section-5.2.8.2-2.4">
                <p id="section-5.2.8.2-2.4.1">Property: safe-to-redistribute<a href="#section-5.2.8.2-2.4.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.8.2-2.4.2.1">Description: Flag identifying whether or not this trigger extension 
                    can be safely redistributed without modification, even if 
                    the CDN fails to understand the extension.<a href="#section-5.2.8.2-2.4.2.1" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.4.2.2">Type: Boolean<a href="#section-5.2.8.2-2.4.2.2" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.4.2.3">Mandatory: No.  Default is to allow transparent
                    redistribution (i.e., a value of True).<a href="#section-5.2.8.2-2.4.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="ulEmpty normal" id="section-5.2.8.2-2.5">
                <p id="section-5.2.8.2-2.5.1">Property: incomprehensible<a href="#section-5.2.8.2-2.5.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.8.2-2.5.2.1">Description: Flag identifying whether or not any CDN in the
                    chain of delegation has failed to understand and/or failed to
                    properly transform this trigger extension object.  Note: This flag only
                    applies to trigger extension objects whose safe-to-redistribute property
                    has a value of False.<a href="#section-5.2.8.2-2.5.2.1" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.5.2.2">Type: Boolean<a href="#section-5.2.8.2-2.5.2.2" class="pilcrow">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-5.2.8.2-2.5.2.3">Mandatory: No.  Default is comprehensible (i.e., a
                    value of False).<a href="#section-5.2.8.2-2.5.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-5.2.8.2-3">Example of a JSON serialized GenericTriggerExtension object containing a specific trigger extension object:<a href="#section-5.2.8.2-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.8.2-4">
<pre>

{
  "generic-trigger-extension-type":
     &lt;Type of this trigger extension object&gt;,
  "generic-trigger-extension-value":
      {
        &lt;properties of this trigger extension object&gt;
      },
  "mandatory-to-enforce": true,
  "safe-to-redistribute": true,
  "incomprehensible": false
}

</pre><a href="#section-5.2.8.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="sect-5.2.5">
<section id="section-5.2.9">
          <h4 id="name-absolute-time">
<a href="#section-5.2.9" class="section-number selfRef">5.2.9. </a><a href="#name-absolute-time" class="section-name selfRef">Absolute Time</a>
          </h4>
<p id="section-5.2.9-1">
   A JSON number, seconds since the UNIX epoch (00:00:00 UTC on
   1 January 1970).<a href="#section-5.2.9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.2.6">
<section id="section-5.2.10">
          <h4 id="name-error-description">
<a href="#section-5.2.10" class="section-number selfRef">5.2.10. </a><a href="#name-error-description" class="section-name selfRef">Error Description</a>
          </h4>
<p id="section-5.2.10-1">
   An Error Description is used to report the failure of a CI/T Command
   or failure in the activity it triggered.  It is encoded as a JSON
   object with the following name/value pairs:<a href="#section-5.2.10-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.10-2.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.2.10-2.1.1">
                <dt id="section-5.2.10-2.1.1.1">Name: error</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.10-2.1.1.2">
                  <p id="section-5.2.10-2.1.1.2.1">
 Value: Error Code, as defined in <a href="#sect-5.2.7" class="xref">Section 5.2.11</a>.<a href="#section-5.2.10-2.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.10-2.1.1.2.2">
 Mandatory: Yes.<a href="#section-5.2.10-2.1.1.2.2" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
<span class="break"></span><dl class="dlParallel" id="section-5.2.10-3">
            <dt id="section-5.2.10-3.1"></dt>
            <dd style="margin-left: 1.5em" id="section-5.2.10-3.2">
      Names: metadata.urls, content.urls, metadata.patterns,
      content.patterns<a href="#section-5.2.10-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-5.2.10-4">
            <dt id="section-5.2.10-4.1"></dt>
            <dd style="margin-left: 3.0em" id="section-5.2.10-4.2">
         Description: Metadata and content references copied from the
         Trigger Specification.  Only those URLs and patterns to which
         the error applies are included in each property, but those URLs
         and patterns MUST be exactly as they appear in the request; the
         dCDN MUST NOT generalize the URLs.  (For example, if the uCDN
         requests pre-positioning of URLs
         "https://content.example.com/a" and
         "https://content.example.com/b", the dCDN must not generalize
         its error report to the pattern
         "https://content.example.com/*".)<a href="#section-5.2.10-4.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-5.2.10-5">
            <dt id="section-5.2.10-5.1"></dt>
            <dd style="margin-left: 3.0em" id="section-5.2.10-5.2">
         Value: A JSON array of JSON strings, where each string is
         copied from a "content.*" or "metadata.*" value in the
         corresponding Trigger Specification.<a href="#section-5.2.10-5.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-5.2.10-6">
            <dt id="section-5.2.10-6.1"></dt>
            <dd style="margin-left: 3.0em" id="section-5.2.10-6.2">
         Mandatory: At least one of these name/value pairs is mandatory
         in each Error Description object.<a href="#section-5.2.10-6.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.10-7.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.2.10-7.1.1">
                <dt id="section-5.2.10-7.1.1.1">Name: description</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.10-7.1.1.2">
                  <p id="section-5.2.10-7.1.1.2.1">
 Description: A human-readable description of the error.<a href="#section-5.2.10-7.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.10-7.1.1.2.2">
 Value: A JSON string, the human-readable description.<a href="#section-5.2.10-7.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.10-7.1.1.2.3">
 Mandatory: No.<a href="#section-5.2.10-7.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.10-8.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.2.10-8.1.1">
                <dt id="section-5.2.10-8.1.1.1">Name: content.regexs, content.playlists</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.10-8.1.1.2">
                  <p id="section-5.2.10-8.1.1.2.1">
 Description: Content Regex and Playlist references copied from the Trigger Specification.
                Only those regexs and playlists to which the error applies are included in each property,
                but those references MUST be exactly as they appear in the request; the dCDN MUST NOT change
                or generalize the URLs or Regexs. Note that these properties are added on top of the already
                existing properties: "metadata.urls", "content.urls", "metadata.patterns" and "content.patterns".<a href="#section-5.2.10-8.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.10-8.1.1.2.2">
 Value: A JSON array of JSON strings, where each string is copied from a "content.regexs" or
                "content.playlists" value in the corresponding Trigger Specification.<a href="#section-5.2.10-8.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.10-8.1.1.2.3">
 Mandatory: At least one of "content.regexs", "content.playlists", "metadata.urls", "content.urls",
                "metadata.patterns" or "content.patterns" is mandatory in each Error Description object.<a href="#section-5.2.10-8.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.10-9.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.2.10-9.1.1">
                <dt id="section-5.2.10-9.1.1.1">Name: extensions</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.10-9.1.1.2">
                  <p id="section-5.2.10-9.1.1.2.1">
 Description: Array of trigger extension objects copied from the corresponding "extensions" array
                from the Trigger Specification. Only those extensions to which the error applies are included, but 
                those extensions MUST be exactly as they appear in the request.<a href="#section-5.2.10-9.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.10-9.1.1.2.2">
 Value: Array of GenericTriggerExtension objects, where each extension object is copied
                from the "extensions" array values in the Trigger Specification.<a href="#section-5.2.10-9.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.10-9.1.1.2.3">
 Mandatory: No. The "extensions" array SHOULD be used only if the error relates to
                extension objects.<a href="#section-5.2.10-9.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2.10-10.1">
              <span class="break"></span><dl class="dlNewline" id="section-5.2.10-10.1.1">
                <dt id="section-5.2.10-10.1.1.1">Name: cdn</dt>
                <dd style="margin-left: 1.5em" id="section-5.2.10-10.1.1.2">
                  <p id="section-5.2.10-10.1.1.2.1">
 Description: The CDN PID of the CDN where the error occurred. The "cdn" property is used
                by the originating uCDN or by propagating dCDN in order to distinguish in which CDN the 
                error occurred.<a href="#section-5.2.10-10.1.1.2.1" class="pilcrow">¶</a></p>
<p id="section-5.2.10-10.1.1.2.2">
 Value:  A non-empty JSON string, where the string is a CDN PID as defined in Section 
                 <a href="#sect-4.6" class="xref">Section 4.6</a><a href="#section-5.2.10-10.1.1.2.2" class="pilcrow">¶</a></p>
<p id="section-5.2.10-10.1.1.2.3">
 Mandatory: Yes. In the case the dCDN does not like to expose this information, 
                 it should provide its own CDN PID.<a href="#section-5.2.10-10.1.1.2.3" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
          </ul>
<p id="section-5.2.10-11">Example of a JSON serialized Error Description object reporting a malformed Playlist:<a href="#section-5.2.10-11" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.10-12">
<pre>

{
   "content.playlists": [
      {
        "playlist": "https://www.example.com/hls/title/index.m3u8",
        "media-protocol": "hls"
      }
    ],
   "description": "Failed to parse HLS playlist",
   "error": "econtent",
   "cdn": "AS64500:0"
},
</pre><a href="#section-5.2.10-12" class="pilcrow">¶</a>
</div>
<p id="section-5.2.10-13">Example of a JSON serialized Error Description object reporting an unsupported extension object:<a href="#section-5.2.10-13" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2.10-14">
<pre>
{
  "errors.v2": [
   {
     "extensions": [
       {
        "generic-trigger-extension-type":
          &lt;Type of this erroneous trigger extension object&gt;,
        "generic-trigger-extension-value":
          {
           &lt;properties of this erroneous trigger extension object&gt;
          },
       }
     ],
     "description": "unrecognized extension &lt;type&gt;",
     "error": "eextension",
     "cdn": "AS64500:0"
   },
  ]
}
</pre><a href="#section-5.2.10-14" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sect-5.2.7">
<section id="section-5.2.11">
          <h4 id="name-error-code">
<a href="#section-5.2.11" class="section-number selfRef">5.2.11. </a><a href="#name-error-code" class="section-name selfRef">Error Code</a>
          </h4>
<p id="section-5.2.11-1">
   This type is used by the dCDN to report failures in trigger
   processing.  All Error Codes MUST be registered in the IANA "CDNI CI/T Error Codes" registry (see <a href="#sect-7.3" class="xref">Section 9.3</a>).  Unknown Error Codes
   MUST be treated as fatal errors, and the request MUST NOT be
   automatically retried without modification.<a href="#section-5.2.11-1" class="pilcrow">¶</a></p>
<p id="section-5.2.11-2">
   The following Error Codes are defined by this document and MUST be
   supported by an implementation of the CI/T interface.<a href="#section-5.2.11-2" class="pilcrow">¶</a></p>
<table class="center" id="table-5">
            <caption><a href="#table-5" class="selfRef">Table 5</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1"> Error Code</th>
                <th class="text-left" rowspan="1" colspan="1"> Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">emeta</td>
                <td class="text-left" rowspan="1" colspan="1">The dCDN was unable to acquire metadata required</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">to fulfill the request.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">econtent</td>
                <td class="text-left" rowspan="1" colspan="1">The dCDN was unable to acquire content (CI/T</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">"preposition" commands only).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">eperm</td>
                <td class="text-left" rowspan="1" colspan="1">The uCDN does not have permission to issue the</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">CI/T Command (for example, the data is owned by</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">another CDN).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">ereject</td>
                <td class="text-left" rowspan="1" colspan="1">The dCDN is not willing to fulfill the CI/T</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">Command (for example, a "preposition" request for</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">content at a time when the dCDN would not accept</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">Request Routing requests from the uCDN).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">ecdn</td>
                <td class="text-left" rowspan="1" colspan="1">An internal error in the dCDN or one of its dCDNs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">ecancelled</td>
                <td class="text-left" rowspan="1" colspan="1">The uCDN canceled the request.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">eunsupported</td>
                <td class="text-left" rowspan="1" colspan="1">The Trigger Specification contained a "type" that</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">is not supported by the dCDN.  No action was taken</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">by the dCDN other than to create a Trigger Status</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">Resource in state "failed".</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">eextension</td>
                <td class="text-left" rowspan="1" colspan="1">An error occurred while parsing a generic trigger</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">extension, or that the specific extension is not</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">supported by the CDN. The Trigger Specification</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1"></td>
                <td class="text-left" rowspan="1" colspan="1">contained a "type" that.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="trigger-extension-objects">
<section id="section-6">
      <h2 id="name-trigger-extension-objects">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-trigger-extension-objects" class="section-name selfRef">Trigger Extension Objects</a>
      </h2>
<p id="section-6-1">The objects defined below are intended to be used in the GenericTriggerExtension
         object's generic-trigger-extension-value field as defined in Section
         <a href="#generic-extension-object" class="xref">Section 5.2.8.2</a>, and their generic-trigger-extension-type
         property MUST be set to the appropriate CDNI Payload Type as defined in <a href="#sect-7.1" class="xref">Section 9.1</a> .<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="location-policy">
<section id="section-6.1">
        <h3 id="name-locationpolicy-extension">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-locationpolicy-extension" class="section-name selfRef">LocationPolicy extension</a>
        </h3>
<p id="section-6.1-1">A content operation may be relevant for a specific geographical region, or need to
           be excluded from a specific region. In this case, the trigger should be applied
           only to parts of the network that are either "included" or "not excluded" by the location policy.
           Note that the restrictions here are on the cache location rather than the client location.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">The LocationPolicy object defines which CDN or cache locations for which the trigger
           command is relevant.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">Example use cases:<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-4.1">Pre-position: Certain contracts allow for pre-positioning or availability
               of contract in all regions except for certain excluded regions in the world,
               including caches. For example, some content cannot ever knowingly touch
               servers in a specific country, including cached content. Therefore, these regions
               MUST be excluded from a pre-positioning operation.<a href="#section-6.1-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.1-4.2">Purge: In certain cases, content may have been located on servers in regions
               where the content must not reside. In such cases, a purge operation to
               remove content specifically from that region is required.<a href="#section-6.1-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.1-5">Object specification<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.1-6.1">
            <p id="section-6.1-6.1.1">Property: locations<a href="#section-6.1-6.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.1-6.1.2.1">Description: An Access List that allows or denies (blocks) the trigger execution
                    per cache location.<a href="#section-6.1-6.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.1-6.1.2.2">Type: Array of LocationRule objects (see Section 4.2.2.1 of <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>)<a href="#section-6.1-6.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.1-6.1.2.3">Mandatory: Yes.<a href="#section-6.1-6.1.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
        </ul>
<p id="section-6.1-7">
           If a location policy object is not listed within the trigger command, the default behavior is to
           execute the trigger in all available caches and locations of the dCDN.<a href="#section-6.1-7" class="pilcrow">¶</a></p>
<p id="section-6.1-8">
           The trigger command is allowed, or denied, for a specific cache location according to the
           action of the first location whose footprint matches against that cache's location.
           If two or more footprints overlap, the first footprint that matches against the cache's location
           determines the action a CDN MUST take. If the "locations" property is an empty list or if none of
           the listed footprints match the location of a specific cache location, then the result is equivalent
           to a "deny" action.<a href="#section-6.1-8" class="pilcrow">¶</a></p>
<p id="section-6.1-9">The following is an example of a JSON serialized generic trigger extension object containing a location policy
           object that allows the trigger execution in the US but blocks its execution in Canada:<a href="#section-6.1-9" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-10">
<pre>
{
   "generic-trigger-extension-type": "CIT.LocationPolicy",
   "generic-trigger-extension-value":
    {
       "locations": [
         {
           "action": "allow",
           "footprints": [
             {
               "footprint-type": "countrycode",
               "footprint-value": ["us"]
             }
           ]
         },
         {
           "action": "deny",
           "footprints": [
             {
               "footprint-type": "countrycode",
               "footprint-value": ["ca"]
             }
           ]
         }
       ]
    },
   "mandatory-to-enforce": true,
   "safe-to-redistribute": true,
   "incomprehensible": false
}
</pre><a href="#section-6.1-10" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="time-policy">
<section id="section-6.2">
        <h3 id="name-timepolicy-extension">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-timepolicy-extension" class="section-name selfRef">TimePolicy Extension</a>
        </h3>
<p id="section-6.2-1">A uCDN may wish to perform content management operations on the dCDN in a specific schedule.
           The TimePolicy extensions allows the uCDN to instruct the dCDN to execute the trigger command
           in a desired time window. For example, a content provider that wishes to pre-populate a new
           episode at off-peak time so that it would be ready on caches at prime time when the episode
           is released for viewing. A scheduled operation enables the uCDN to direct the dCDN in what
           time frame to execute the trigger.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">
           A uCDN may wish to to schedule a trigger such that the dCDN will execute it in local time,
           as it is measured in each region. For example, a uCDN may wish the dCDN to pull the content
           at off-peak hours, between 2AM-4AM, however, as a CDN is distributed across multiple time
           zones, the UTC definition of 2AM depends on the actual location.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">We define two alternatives for localized scheduling:<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-4.1">Regional schedule: When used in conjunction with the Location Policy defined
              in <a href="#location-policy" class="xref">Section 6.1</a>, the uCDN can trigger separate commands for
              different geographical regions, for each region using a different schedule. This allows
              the uCDN to control the execution time per region.<a href="#section-6.2-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-4.2">Local Time schedule: We introduce a "local time" version for Internet timestamps
              that follows the notation for local time as defined in Section 4.2.2 of <span>[<a href="#ISO8601" class="xref">ISO8601</a>]</span>.
              When local time is used, that dCDN SHOULD execute the triggers at different absolute times,
              according the local time of each execution location.<a href="#section-6.2-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.2-5">Object specification<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2-6.1">
            <p id="section-6.2-6.1.1">Property: unix-time-window<a href="#section-6.2-6.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2-6.1.2.1">Description: A UNIX epoch time window in which the trigger SHOULD be executed.<a href="#section-6.2-6.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.2-6.1.2.2">Type: TimeWindow object using UNIX epoch timestamps (see Section 4.2.3.2 of
                    <span>[<a href="#RFC8006" class="xref">RFC8006</a>]</span>)<a href="#section-6.2-6.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.2-6.1.2.3">Mandatory: No, but exactly one of "unixEpochWindow", "utcWindow"
                    or "localTimeWindow" MUST be present.<a href="#section-6.2-6.1.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="ulEmpty normal" id="section-6.2-6.2">
            <p id="section-6.2-6.2.1">Property: utc-window<a href="#section-6.2-6.2.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2-6.2.2.1">Description: A UTC time window in which the trigger SHOULD be executed.<a href="#section-6.2-6.2.2.1" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.2-6.2.2.2">Type: UTCWindow object as defined in <a href="#utc-window" class="xref">Section 6.2.1</a>.<a href="#section-6.2-6.2.2.2" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.2-6.2.2.3">Mandatory: No, but exactly one of "unixEpochWindow", "utcWindow"
                    or "localTimeWindow" MUST be present.<a href="#section-6.2-6.2.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="ulEmpty normal" id="section-6.2-6.3">
            <p id="section-6.2-6.3.1">Property: local-time-window<a href="#section-6.2-6.3.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2-6.3.2.1">Description: A local time window. The dCDN SHOULD execute the trigger at the
                    defined time frame, interpreted as the the local time per location.<a href="#section-6.2-6.3.2.1" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.2-6.3.2.2">Type: LocalTimeWindow object as defined in <a href="#local-time-window" class="xref">Section 6.2.2</a>.<a href="#section-6.2-6.3.2.2" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-6.2-6.3.2.3">Mandatory: No, but exactly one of "unixEpochWindow", "utcWindow"
                    or "localTimeWindow" MUST be present.<a href="#section-6.2-6.3.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
        </ul>
<p id="section-6.2-7">
             If a time policy object is not listed within the trigger command, the default behavior
             is to execute the trigger in a time frame most suitable to the dCDN taking under consideration
             other constrains and / or obligations.<a href="#section-6.2-7" class="pilcrow">¶</a></p>
<p id="section-6.2-8">Example of a JSON serialized generic trigger extension object containing a time policy object that schedules the
           trigger execution to a window between 09:00 01/01/2000 UTC and 17:00 01/01/2000 UTC, using
           the "unix-time-window" property:<a href="#section-6.2-8" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-9">
<pre>
{
   "generic-trigger-extension-type": "CIT.TimePolicy",
   "generic-trigger-extension-value":
    {
      "unix-time-window": {
         "start": 946717200,
         "end": 946746000
      }
    }
   "mandatory-to-enforce": true,
   "safe-to-redistribute": true,
   "incomprehensible": false
}
</pre><a href="#section-6.2-9" class="pilcrow">¶</a>
</div>
<div id="utc-window">
<section id="section-6.2.1">
          <h4 id="name-utcwindow">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-utcwindow" class="section-name selfRef">UTCWindow</a>
          </h4>
<p id="section-6.2.1-1">
             A UTCWindow object describes a time range in UTC or UTC and a zone offset that can
             be applied by a TimePolicy.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.1-2.1">
              <p id="section-6.2.1-2.1.1">Property: start<a href="#section-6.2.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.1-2.1.2.1">Description: The start time of the window.<a href="#section-6.2.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.1-2.1.2.2">Type: Internet date and time as defined in <span>[<a href="#RFC3339" class="xref">RFC3339</a>]</span>.<a href="#section-6.2.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.1-2.1.2.3">Mandatory: No, but at least one of "start" or "end"
                 MUST be present and non-empty.<a href="#section-6.2.1-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="ulEmpty normal" id="section-6.2.1-2.2">
              <p id="section-6.2.1-2.2.1">Property: end<a href="#section-6.2.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.1-2.2.2.1">Description: The end time of the window.<a href="#section-6.2.1-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.1-2.2.2.2">Type: Internet date and time as defined in <span>[<a href="#RFC3339" class="xref">RFC3339</a>]</span>.<a href="#section-6.2.1-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.1-2.2.2.3">Mandatory: No, but at least one of "start" or "end"
                 MUST be present and non-empty.<a href="#section-6.2.1-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-6.2.1-3">
           Example JSON serialized UTCWindow object that describes a time window from 02:30
           01/01/2000 UTC to 04:30 01/01/2000 UTC:<a href="#section-6.2.1-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2.1-4">
<pre>
{
  "start": 2000-01-01T02:30:00.00Z,
  "end": 2000-01-01T04:30:00.00Z,
}
</pre><a href="#section-6.2.1-4" class="pilcrow">¶</a>
</div>
<p id="section-6.2.1-5">
           Example JSON serialized UTCWindow object that describes a time window in New York time zone offset
           UTC-05:00 from 02:30 01/01/2000 to 04:30 01/01/2000:<a href="#section-6.2.1-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2.1-6">
<pre>
{
  "start": 2000-01-01T02:30:00.00-05:00,
  "end": 2000-01-01T04:30:00.00-05:00,
}
</pre><a href="#section-6.2.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="local-time-window">
<section id="section-6.2.2">
          <h4 id="name-localtimewindow">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-localtimewindow" class="section-name selfRef">LocalTimeWindow</a>
          </h4>
<p id="section-6.2.2-1">
             A LocalTimeWindow object describes a time range in local time. The reader of this
             object MUST interpret it as "the local time at the location of execution". For example,
             if the time window states 2AM to 4AM local time then a dCDN that has presence in
             both London (UTC) and New York (UTC-05:00) will execute the trigger at 2AM-4AM UTC
             in London and at 2AM-4AM UTC-05:00 in New York.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.2-2.1">
              <p id="section-6.2.2-2.1.1">Property: start<a href="#section-6.2.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.2-2.1.2.1">Description: The start time of the window.<a href="#section-6.2.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.2-2.1.2.2">Type: JSON string formatted as DateLocalTime as defined in
                 <a href="#date-local-time" class="xref">Section 6.2.3</a>.<a href="#section-6.2.2-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.2-2.1.2.3">Mandatory: No, but at least one of "start" or "end"
                 MUST be present and non-empty.<a href="#section-6.2.2-2.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="ulEmpty normal" id="section-6.2.2-2.2">
              <p id="section-6.2.2-2.2.1">Property: end<a href="#section-6.2.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.2-2.2.2.1">Description: The end time of the window.<a href="#section-6.2.2-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.2-2.2.2.2">Type: JSON string formatted as DateLocalTime as defined in
                 <a href="#date-local-time" class="xref">Section 6.2.3</a>.<a href="#section-6.2.2-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li class="ulEmpty normal" id="section-6.2.2-2.2.2.3">Mandatory: No, but at least one of "start" or "end"
                 MUST be present and non-empty.<a href="#section-6.2.2-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-6.2.2-3">
           Example JSON serialized LocalTimeWindow object that describes a local time window from 02:30
           01/01/2000 to 04:30 01/01/2000.<a href="#section-6.2.2-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2.2-4">
<pre>
{
  "start": 2000-01-01T02:30:00.00,
  "end": 2000-01-01T04:30:00.00,
}
</pre><a href="#section-6.2.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="date-local-time">
<section id="section-6.2.3">
          <h4 id="name-datelocaltime">
<a href="#section-6.2.3" class="section-number selfRef">6.2.3. </a><a href="#name-datelocaltime" class="section-name selfRef">DateLocalTime</a>
          </h4>
<p id="section-6.2.3-1">
            DateLocalTime is a timestamp that follows the date and local time notation in Section 4.3.2
            of <span>[<a href="#ISO8601" class="xref">ISO8601</a>]</span> as a complete date and time extended representation,
            where the time zone designator is omitted. In addition, for simplicity and as exact accuracy
            is not an objective in this case, this specification does not support the decimal fractions of
            seconds, and does not take leap second into consideration.<a href="#section-6.2.3-1" class="pilcrow">¶</a></p>
<p id="section-6.2.3-2">
             Type: JSON string using the format "date-local-time" as defined in <a href="#date-local-time-format" class="xref">Section 6.2.3.1</a>.<a href="#section-6.2.3-2" class="pilcrow">¶</a></p>
<div id="date-local-time-format">
<section id="section-6.2.3.1">
            <h5 id="name-date-and-local-time-format">
<a href="#section-6.2.3.1" class="section-number selfRef">6.2.3.1. </a><a href="#name-date-and-local-time-format" class="section-name selfRef">Date and Local Time Format</a>
            </h5>
<p id="section-6.2.3.1-1">
              The Date and Local Time format is specified here using the syntax description
              notation defined in <span>[<a href="#ABNF" class="xref">ABNF</a>]</span>.<a href="#section-6.2.3.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2.3.1-2">
<pre>
date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-59 leap seconds are not supported

local-time      = time-hour ":" time-minute ":" time-second
full-date       = date-fullyear "-" date-month "-" date-mday
date-local-time = full-date "T" local-time
</pre><a href="#section-6.2.3.1-2" class="pilcrow">¶</a>
</div>
<p id="section-6.2.3.1-3">Example time representing 09:00AM on 01/01/2000 local time:<a href="#section-6.2.3.1-3" class="pilcrow">¶</a></p>
<p id="section-6.2.3.1-4">2000-01-01T09:00:00.00<a href="#section-6.2.3.1-4" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-6.2.3.1-5.1">
                NOTE: Per <span>[<a href="#ABNF" class="xref">ABNF</a>]</span> and <span>[<a href="#ISO8601" class="xref">ISO8601</a>]</span>, the "T" character
                in this syntax may alternatively be lower case "t". For simplicity,
                Applications that generate the "date-local-time" format defined here,
                SHOULD only use the upper case letter "T".<a href="#section-6.2.3.1-5.1" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="date-local-time-restrictions">
<section id="section-6.2.3.2">
            <h5 id="name-restrictions">
<a href="#section-6.2.3.2" class="section-number selfRef">6.2.3.2. </a><a href="#name-restrictions" class="section-name selfRef">Restrictions</a>
            </h5>
<p id="section-6.2.3.2-1">
               The grammar element date-mday represents the day number within the
               current month.  The maximum value varies based on the month and year
               as follows:<a href="#section-6.2.3.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2.3.2-2">
<pre>
Month Number  Month/Year           Maximum value of date-mday
------------  ----------           --------------------------
01            January              31
02            February, normal     28
02            February, leap year  29
03            March                31
04            April                30
05            May                  31
06            June                 30
07            July                 31
08            August               31
09            September            30
10            October              31
11            November             30
12            December             31
</pre><a href="#section-6.2.3.2-2" class="pilcrow">¶</a>
</div>
<p id="section-6.2.3.2-3">
               See Appendix C of <span>[<a href="#RFC3339" class="xref">RFC3339</a>]</span> for a sample C code that determines if a year is
               a leap year.<a href="#section-6.2.3.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2.3.2-4">
               The grammar element time-second may have the values 0-59. The value of 60 that is used in
               <span>[<a href="#ISO8601" class="xref">ISO8601</a>]</span> to represent a leap second MUST NOT be used.<a href="#section-6.2.3.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2.3.2-5">
               Although <span>[<a href="#ISO8601" class="xref">ISO8601</a>]</span> permits the hour to be "24", this profile of <span>[<a href="#ISO8601" class="xref">ISO8601</a>]</span>
               only allows values between "00" and "23" for the hour in order to reduce confusion.<a href="#section-6.2.3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="footprint-and-capabilities">
<section id="section-7">
      <h2 id="name-footprint-and-capabilities">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-footprint-and-capabilities" class="section-name selfRef">Footprint and Capabilities</a>
      </h2>
<p id="section-7-1">
        This section covers the FCI objects required for advertisement of the extensions and properties
        introduced in this document.<a href="#section-7-1" class="pilcrow">¶</a></p>
<section id="section-7.1">
        <h3 id="name-ci-t-playlist-protocol-capa">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-ci-t-playlist-protocol-capa" class="section-name selfRef">CI/T Playlist Protocol Capability Object</a>
        </h3>
<p id="section-7.1-1">
           The CI/T Playlist Protocol capability object is used to indicate support for one or more
           MediaProtocol types listed in <a href="#IANA.CDNI.MediaProtocolReg" class="xref">Section 9.4</a> by the playlists
           property of the "trigger.v2" object.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-7.1-2.1">
            <p id="section-7.1-2.1.1">Property: media-protocols<a href="#section-7.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-7.1-2.1.2.1">Description: A list of media protocols.<a href="#section-7.1-2.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-7.1-2.1.2.2">Type: A list of MediaProtocol (from the CDNI Triggers media protocol types
                    <a href="#IANA.CDNI.MediaProtocolReg" class="xref">Section 9.4</a>)<a href="#section-7.1-2.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-7.1-2.1.2.3">Mandatory: No. The default, in case of a missing or an empty list, 
                    is none supported.<a href="#section-7.1-2.1.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
        </ul>
<div id="playlist-protocol-capability-object">
<section id="section-7.1.1">
          <h4 id="name-ci-t-playlist-protocol-capab">
<a href="#section-7.1.1" class="section-number selfRef">7.1.1. </a><a href="#name-ci-t-playlist-protocol-capab" class="section-name selfRef">CI/T Playlist Protocol Capability Object Serialization</a>
          </h4>
<p id="section-7.1.1-1">
             The following shows an example of a JSON serialized CI/T Playlist Protocol Capability object serialization
             for a dCDN that supports "hls" and "dash".<a href="#section-7.1.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.1.1-2">
<pre>

{
 "capabilities": [
   {
     "capability-type": "FCI.TriggerPlaylistProtocol",
     "capability-value": {
       "media-protocols": ["hls", "dash"]
     },
     "footprints": [
       &lt;Footprint objects&gt;
     ]
   }
 ]
}
</pre><a href="#section-7.1.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
<section id="section-7.2">
        <h3 id="name-ci-t-trigger-extension-capa">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-ci-t-trigger-extension-capa" class="section-name selfRef">CI/T Trigger Extension Capability Object</a>
        </h3>
<p id="section-7.2-1">
           The CI/T Generic Extension capability object is used to indicate support for one or more
           GenericExtensionObject types.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-7.2-2.1">
            <p id="section-7.2-2.1.1">Property: trigger-extension<a href="#section-7.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-7.2-2.1.2.1">Description: A list of supported CDNI CI/T GenericExtensionObject types.<a href="#section-7.2-2.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-7.2-2.1.2.2">Type: List of strings corresponding to entries from the "CDNI Payload Types" registry
                    <span>[<a href="#RFC7736" class="xref">RFC7736</a>]</span> that are under the CIT namespace, and that correspond to CDNI
                    CI/T GenericExtensionObject objects.<a href="#section-7.2-2.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="ulEmpty normal" id="section-7.2-2.1.2.3">Mandatory: No. The default, in case of a missing or an empty list, MUST be 
                    interpreted as "no GenericExtensionObject types are supported". A non-empty list MUST be 
                    interpreted as containing "the only GenericExtensionObject types that are supported".<a href="#section-7.2-2.1.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
        </ul>
<div id="trigger-extension-capability-object">
<section id="section-7.2.1">
          <h4 id="name-ci-t-trigger-extension-capab">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-ci-t-trigger-extension-capab" class="section-name selfRef">CI/T Trigger Extension Capability Object Serialization</a>
          </h4>
<p id="section-7.2.1-1">
             The following shows an example of a JSON serialized CI/T Trigger Extension Capability object serialization for
             a dCDN that supports the "CIT.LocationPolicy" and the "CIT.TimePolicy" objects.<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.2.1-2">
<pre>

{
 "capabilities": [
   {
     "capability-type": "FCI.TriggerGenericExtension",
     "capability-value": {
       "trigger-extension": ["CIT.LocationPolicy", "CIT.TimePolicy"]
     },
     "footprints": [
       &lt;Footprint objects&gt;
     ]
   }
 ]
}
</pre><a href="#section-7.2.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</section>
</div>
<div id="sect-6">
<section id="section-8">
      <h2 id="name-examples">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<p id="section-8-1">
   The following subsections provide examples of different CI/T objects
   encoded as JSON.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">
   Discovery of the CI/T interface is out of scope for this document.
   In an implementation, all CI/T URLs are under the control of the
   dCDN.  The uCDN MUST NOT attempt to ascribe any meaning to individual
   elements of the path.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">
   In examples in this section, the URL "https://dcdn.example.com/triggers" is used as the location of the collection of all Trigger
   Status Resources, and the CDN PID of the uCDN is "AS64496:1".<a href="#section-8-3" class="pilcrow">¶</a></p>
<div id="sect-6.1">
<section id="section-8.1">
        <h3 id="name-creating-triggers-2">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-creating-triggers-2" class="section-name selfRef">Creating Triggers</a>
        </h3>
<p id="section-8.1-1">
   Examples of the uCDN triggering activity in the dCDN:<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<div id="sect-6.1.1">
<section id="section-8.1.1">
          <h4 id="name-preposition">
<a href="#section-8.1.1" class="section-number selfRef">8.1.1. </a><a href="#name-preposition" class="section-name selfRef">Preposition</a>
          </h4>
<p id="section-8.1.1-1">
   Below is an example of a CI/T "preposition" command -- a POST to the
   collection of all Trigger Status Resources.<a href="#section-8.1.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1.1-2">
   Note that "metadata.patterns" and "content.patterns" are not allowed
   in a pre-position Trigger Specification.<a href="#section-8.1.1-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1.1-3">
<pre>
REQUEST:

  POST /triggers HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*
  Content-Type: application/cdni; ptype=ci-trigger-command
  Content-Length: 352

  {
    "trigger": {
      "type": "preposition",

      "metadata.urls": [ "https://metadata.example.com/a/b/c" ],
      "content.urls": [
          "https://www.example.com/a/b/c/1",
          "https://www.example.com/a/b/c/2",
          "https://www.example.com/a/b/c/3",
          "https://www.example.com/a/b/c/4"
        ]
    },
    "cdn-path": [ "AS64496:1" ]
  }

RESPONSE:

  HTTP/1.1 201 Created
  Date: Wed, 04 May 2016 08:48:10 GMT
  Content-Length: 467
  Content-Type: application/cdni; ptype=ci-trigger-status
  Location: https://dcdn.example.com/triggers/0
  Server: example-server/0.1

  {
      "ctime": 1462351690,
      "etime": 1462351698,
      "mtime": 1462351690,
      "status": "pending",
      "trigger": {
          "content.urls": [
              "https://www.example.com/a/b/c/1",
              "https://www.example.com/a/b/c/2",
              "https://www.example.com/a/b/c/3",
              "https://www.example.com/a/b/c/4"
          ],
          "metadata.urls": [
              "https://metadata.example.com/a/b/c"
          ],
          "type": "preposition"
      }
  }
</pre><a href="#section-8.1.1-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sect-6.1.2">
<section id="section-8.1.2">
          <h4 id="name-invalidate">
<a href="#section-8.1.2" class="section-number selfRef">8.1.2. </a><a href="#name-invalidate" class="section-name selfRef">Invalidate</a>
          </h4>
<p id="section-8.1.2-1">
   Below is an example of a CI/T "invalidate" command -- another POST to
   the collection of all Trigger Status Resources.  This instructs the
   dCDN to revalidate the content at "https://www.example.com/a/index.html", as well as any metadata and content whose URLs are
   prefixed by "https://metadata.example.com/a/b/" using
   case-insensitive matching, and "https://www.example.com/a/b/" using
   case-sensitive matching, respectively.<a href="#section-8.1.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1.2-2">
<pre>
REQUEST:

  POST /triggers HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*
  Content-Type: application/cdni; ptype=ci-trigger-command
  Content-Length: 387

  {
    "trigger": {
      "type": "invalidate",

      "metadata.patterns": [
          { "pattern": "https://metadata.example.com/a/b/*" }
        ],

      "content.urls": [ "https://www.example.com/a/index.html" ],
      "content.patterns": [
          { "pattern": "https://www.example.com/a/b/*",
            "case-sensitive": true
          }
        ]
    },
    "cdn-path": [ "AS64496:1" ]
  }

RESPONSE:

  HTTP/1.1 201 Created
  Date: Wed, 04 May 2016 08:48:11 GMT
  Content-Length: 545
  Content-Type: application/cdni; ptype=ci-trigger-status
  Location: https://dcdn.example.com/triggers/1
  Server: example-server/0.1

  {
      "ctime": 1462351691,
      "etime": 1462351699,
      "mtime": 1462351691,
      "status": "pending",
      "trigger": {
          "content.patterns": [
              {
                  "case-sensitive": true,
                  "pattern": "https://www.example.com/a/b/*"
              }
          ],
          "content.urls": [
              "https://www.example.com/a/index.html"
          ],
          "metadata.patterns": [
              {
                  "pattern": "https://metadata.example.com/a/b/*"
              }
          ],
          "type": "invalidate"
      }
  }
</pre><a href="#section-8.1.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="invalidate-with-regex">
<section id="section-8.1.3">
          <h4 id="name-invalidation-with-regex">
<a href="#section-8.1.3" class="section-number selfRef">8.1.3. </a><a href="#name-invalidation-with-regex" class="section-name selfRef">Invalidation with Regex</a>
          </h4>
<p id="section-8.1.3-1">
            In the following example a CI/T "invalidate" command uses the Regex property to specify the range of
            content objects for invalidation, the command is rejected by the dCDN due to regex complexity, and
            an appropriate error is reflected in the status response.<a href="#section-8.1.3-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1.3-2">
<pre>
REQUEST:

  POST /triggers HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: triggers.dcdn.example.com
  Accept: */*
  Content-Type: application/cdni; ptype=ci-trigger-command.v2
  {
    "trigger.v2": {
      "type": "invalidate",
      "content.regexs": [
        {
          "regex": "^(https:\\/\\/video\\.example\\.com)\\/
          ([a-z])\\/movie1\\/([1-7])\\/*(index.m3u8|\\d{3}.ts)$",
          "case-sensitive": true,
          "match-query-string": false
        },
        { &lt;RegexMatch #2&gt; },
        ...
        { &lt;RegexMatch #N&gt; },
      ],
    },
    "cdn-path": [ "AS64496:0" ]
  }

RESPONSE:

  HTTP/1.1 201 Created
  Date: Wed, 04 May 2016 08:48:10 GMT
  Content-Length: 467
  Content-Type: application/cdni; ptype=ci-trigger-status.v2
  Location: https://triggers.dcdn.example.com/triggers/0
  Server: example-server/0.1

  {
    "errors.v2": [
      {
        "content.regexs": [
          {
            "regex": "^(https:\\/\\/video\\.example\\.com)\\/
            ([a-z])\\/movie1\\/([1-7])\\/*(index.m3u8|\\d{3}.ts)$",
            "case-sensitive": true,
            "match-query-string": false
          },
        ],
        "description": "The dCDN rejected a regex due to complexity",
        "error": "ereject",
        "cdn": "AS64500:0"
      },
    ],
    "ctime": 1462351690,
    "etime": 1462351698,
    "mtime": 1462351690,
    "status": "failed",
    "trigger.v2": { &lt;content of trigger object from the command&gt; }
  }
</pre><a href="#section-8.1.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="preposition-with-playlists">
<section id="section-8.1.4">
          <h4 id="name-preposition-with-playlists">
<a href="#section-8.1.4" class="section-number selfRef">8.1.4. </a><a href="#name-preposition-with-playlists" class="section-name selfRef">Preposition with Playlists</a>
          </h4>
<p id="section-8.1.4-1">
            In the following example a CI/T "preposition" command uses the Playlist property to specify the full
            media library of a specific content. The command fails due to playlist parse error and an appropriate
            error is reflected in the status response.<a href="#section-8.1.4-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1.4-2">
<pre>
REQUEST:

  POST /triggers HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: triggers.dcdn.example.com
  Accept: */*
  Content-Type: application/cdni; ptype=ci-trigger-command.v2
  {
    "trigger.v2": {
      "type": "preposition",
      "content.playlists": [
       {
        "playlist": "https://www.example.com/hls/title/index.m3u8",
        "media-protocol": "hls"
       },
       { &lt;Playlist #2&gt; },
       ...
       { &lt;Playlist #N&gt; },
      ],
    },
    "cdn-path": [ "AS64496:0" ]
  }

RESPONSE:

  HTTP/1.1 201 Created
  Date: Wed, 04 May 2016 08:48:10 GMT
  Content-Length: 467
  Content-Type: application/cdni; ptype=ci-trigger-status.v2
  Location: https://triggers.dcdn.example.com/triggers/0
  Server: example-server/0.1

  {
    "errors.v2": [
      {
       "content.playlists": [
         {
          "playlist": "https://www.example.com/hls/title/index.m3u8",
          "media-protocol": "hls"
         },
        ],
       "description": "The dCDN was not able to parse the playlist",
       "error": "econtent",
       "cdn": "AS64500:0"
      },
    ],
    "ctime": 1462351690,
    "etime": 1462351698,
    "mtime": 1462351690,
    "status": "failed",
    "trigger.v2": { &lt;content of trigger object from the command&gt; }
  }
</pre><a href="#section-8.1.4-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="sect-6.2">
<section id="section-8.2">
        <h3 id="name-examining-trigger-status">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-examining-trigger-status" class="section-name selfRef">Examining Trigger Status</a>
        </h3>
<p id="section-8.2-1">
   Once Trigger Status Resources have been created, the uCDN can check
   their status as shown in the following examples.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<div id="sect-6.2.1">
<section id="section-8.2.1">
          <h4 id="name-collection-of-all-triggers">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-collection-of-all-triggers" class="section-name selfRef">Collection of All Triggers</a>
          </h4>
<p id="section-8.2.1-1">
   The uCDN can fetch the collection of all Trigger Status Resources it
   has created that have not yet been deleted or removed as expired.
   After creation of the "preposition" and "invalidate" triggers shown
   above, this collection might look as follows:<a href="#section-8.2.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.1-2">
<pre>
REQUEST:

  GET /triggers HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 341
  Expires: Wed, 04 May 2016 08:49:11 GMT
  Server: example-server/0.1
  ETag: "-936094426920308378"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:11 GMT
  Content-Type: application/cdni; ptype=ci-trigger-collection

  {
      "cdn-id": "AS64496:0",
      "coll-active": "/triggers/active",
      "coll-complete": "/triggers/complete",
      "coll-failed": "/triggers/failed",
      "coll-pending": "/triggers/pending",
      "staleresourcetime": 86400,
      "triggers": [
          "https://dcdn.example.com/triggers/0",
          "https://dcdn.example.com/triggers/1"
      ]
  }
</pre><a href="#section-8.2.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sect-6.2.2">
<section id="section-8.2.2">
          <h4 id="name-filtered-collections-of-tri">
<a href="#section-8.2.2" class="section-number selfRef">8.2.2. </a><a href="#name-filtered-collections-of-tri" class="section-name selfRef">Filtered Collections of Trigger Status Resources</a>
          </h4>
<p id="section-8.2.2-1">
   The filtered collections are also available to the uCDN.  Before the
   dCDN starts processing the two CI/T Trigger Commands shown above,
   both will appear in the collection of pending triggers.  For example:<a href="#section-8.2.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.2-2">
<pre>
REQUEST:

  GET /triggers/pending HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 152
  Expires: Wed, 04 May 2016 08:49:11 GMT
  Server: example-server/0.1
  ETag: "4331492443626270781"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:11 GMT
  Content-Type: application/cdni; ptype=ci-trigger-collection

  {
      "staleresourcetime": 86400,
      "triggers": [
          "https://dcdn.example.com/triggers/0",
          "https://dcdn.example.com/triggers/1"
      ]
  }
</pre><a href="#section-8.2.2-2" class="pilcrow">¶</a>
</div>
<p id="section-8.2.2-3">
   At this point, if no other Trigger Status Resources had been created,
   the other filtered views would be empty.  For example:<a href="#section-8.2.2-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.2-4">
<pre>
REQUEST:

  GET /triggers/complete HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 54
  Expires: Wed, 04 May 2016 08:49:11 GMT
  Server: example-server/0.1
  ETag: "7958041393922269003"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:11 GMT
  Content-Type: application/cdni; ptype=ci-trigger-collection

  {
      "staleresourcetime": 86400,
      "triggers": []
  }
</pre><a href="#section-8.2.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sect-6.2.3">
<section id="section-8.2.3">
          <h4 id="name-individual-trigger-status-r">
<a href="#section-8.2.3" class="section-number selfRef">8.2.3. </a><a href="#name-individual-trigger-status-r" class="section-name selfRef">Individual Trigger Status Resources</a>
          </h4>
<p id="section-8.2.3-1">
   The Trigger Status Resources can also be examined for details about
   individual CI/T Trigger Commands.  For example, for the CI/T
   "preposition" and "invalidate" commands from previous examples:<a href="#section-8.2.3-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.3-2">
<pre>
REQUEST:

  GET /triggers/0 HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 467
  Expires: Wed, 04 May 2016 08:49:10 GMT
  Server: example-server/0.1
  ETag: "6990548174277557683"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:10 GMT
  Content-Type: application/cdni; ptype=ci-trigger-status

  {
      "ctime": 1462351690,
      "etime": 1462351698,
      "mtime": 1462351690,
      "status": "pending",
      "trigger": {
          "content.urls": [
              "https://www.example.com/a/b/c/1",
              "https://www.example.com/a/b/c/2",
              "https://www.example.com/a/b/c/3",
              "https://www.example.com/a/b/c/4"
          ],
          "metadata.urls": [
              "https://metadata.example.com/a/b/c"
          ],
          "type": "preposition"
      }
  }

REQUEST:

  GET /triggers/1 HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 545
  Expires: Wed, 04 May 2016 08:49:11 GMT
  Server: example-server/0.1
  ETag: "-554385204989405469"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:11 GMT
  Content-Type: application/cdni; ptype=ci-trigger-status
  {
      "ctime": 1462351691,
      "etime": 1462351699,
      "mtime": 1462351691,
      "status": "pending",
      "trigger": {
          "content.patterns": [
              {
                  "case-sensitive": true,
                  "pattern": "https://www.example.com/a/b/*"
              }
          ],
          "content.urls": [
              "https://www.example.com/a/index.html"
          ],
          "metadata.patterns": [
              {
                  "pattern": "https://metadata.example.com/a/b/*"
              }
          ],
          "type": "invalidate"
      }
  }
</pre><a href="#section-8.2.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sect-6.2.4">
<section id="section-8.2.4">
          <h4 id="name-polling-for-changes-in-stat">
<a href="#section-8.2.4" class="section-number selfRef">8.2.4. </a><a href="#name-polling-for-changes-in-stat" class="section-name selfRef">Polling for Changes in Status</a>
          </h4>
<p id="section-8.2.4-1">
   The uCDN SHOULD use the ETags of collections or Trigger Status
   Resources when polling for changes in status, as shown in the
   following examples:<a href="#section-8.2.4-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.4-2">
<pre>
REQUEST:

  GET /triggers/pending HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*
  If-None-Match: "4331492443626270781"

RESPONSE:
   HTTP/1.1 304 Not Modified
   Content-Length: 0
   Expires: Wed, 04 May 2016 08:49:11 GMT
   Server: example-server/0.1
   ETag: "4331492443626270781"
   Cache-Control: max-age=60
   Date: Wed, 04 May 2016 08:48:11 GMT
   Content-Type: application/cdni; ptype=ci-trigger-collection

REQUEST:

  GET /triggers/0 HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*
  If-None-Match: "6990548174277557683"

RESPONSE:

  HTTP/1.1 304 Not Modified
  Content-Length: 0
  Expires: Wed, 04 May 2016 08:49:10 GMT
  Server: example-server/0.1
  ETag: "6990548174277557683"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:10 GMT
  Content-Type: application/cdni; ptype=ci-trigger-status
</pre><a href="#section-8.2.4-2" class="pilcrow">¶</a>
</div>
<p id="section-8.2.4-3">
   When the CI/T Trigger Command is complete, the contents of the
   filtered collections will be updated along with their ETags.  For
   example, when the two example CI/T Trigger Commands are complete, the
   collections of pending and complete Trigger Status Resources might
   look like:<a href="#section-8.2.4-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.4-4">
<pre>
REQUEST:

  GET /triggers/pending HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 54
  Expires: Wed, 04 May 2016 08:49:15 GMT
  Server: example-server/0.1
  ETag: "1337503181677633762"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:15 GMT
  Content-Type: application/cdni; ptype=ci-trigger-collection

  {
      "staleresourcetime": 86400,
      "triggers": []
  }

REQUEST:

  GET /triggers/complete HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 152
  Expires: Wed, 04 May 2016 08:49:22 GMT
  Server: example-server/0.1
  ETag: "4481489539378529796"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:22 GMT
  Content-Type: application/cdni; ptype=ci-trigger-collection

  {
      "staleresourcetime": 86400,
      "triggers": [
          "https://dcdn.example.com/triggers/0",
          "https://dcdn.example.com/triggers/1"
      ]
  }
</pre><a href="#section-8.2.4-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sect-6.2.5">
<section id="section-8.2.5">
          <h4 id="name-deleting-trigger-status-res">
<a href="#section-8.2.5" class="section-number selfRef">8.2.5. </a><a href="#name-deleting-trigger-status-res" class="section-name selfRef">Deleting Trigger Status Resources</a>
          </h4>
<p id="section-8.2.5-1">
   The uCDN can delete completed and failed Trigger Status Resources to
   reduce the size of the collections, as described in <a href="#sect-4.4" class="xref">Section 4.4</a>.  For
   example, to delete the "preposition" request from earlier examples:<a href="#section-8.2.5-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.5-2">
<pre>
REQUEST:

  DELETE /triggers/0 HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 204 No Content
  Date: Wed, 04 May 2016 08:48:22 GMT
  Content-Length: 0
  Content-Type: text/html; charset=UTF-8
  Server: example-server/0.1
</pre><a href="#section-8.2.5-2" class="pilcrow">¶</a>
</div>
<p id="section-8.2.5-3">
   This would, for example, cause the collection of completed Trigger
   Status Resources shown in the example above to be updated to:<a href="#section-8.2.5-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.5-4">
<pre>
REQUEST:

  GET /triggers/complete HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: dcdn.example.com
  Accept: */*

RESPONSE:

  HTTP/1.1 200 OK
  Content-Length: 105
  Expires: Wed, 04 May 2016 08:49:22 GMT
  Server: example-server/0.1
  ETag: "-6938620031669085677"
  Cache-Control: max-age=60
  Date: Wed, 04 May 2016 08:48:22 GMT
  Content-Type: application/cdni; ptype=ci-trigger-collection

  {
      "staleresourcetime": 86400,
      "triggers": [
          "https://dcdn.example.com/triggers/1"
      ]
  }
</pre><a href="#section-8.2.5-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="trigger-with-extensions">
<section id="section-8.2.6">
          <h4 id="name-extensions-with-error-propa">
<a href="#section-8.2.6" class="section-number selfRef">8.2.6. </a><a href="#name-extensions-with-error-propa" class="section-name selfRef">Extensions with Error Propagation</a>
          </h4>
<p id="section-8.2.6-1">
            In the following example a CI/T "preposition" command is using two extensions to control the
            way the trigger is executed. In this example the receiving dCDN identified as "AS64500:0"
            does not support the first extension in the extensions array. dCDN "AS64500:0" further
            distributes this trigger to another downstream CDN that is identified as "AS64501:0", which
            does not support the second extension in the extensions array. The error is propagated from
            "AS64501:0" to "AS64500:0" and the errors.v2 array reflects both errors.<a href="#section-8.2.6-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2.6-2">
<pre>
REQUEST:

  POST /triggers HTTP/1.1
  User-Agent: example-user-agent/0.1
  Host: triggers.dcdn.example.com
  Accept: */*
  Content-Type: application/cdni; ptype=ci-trigger-command.v2
  {
    "trigger.v2": {
      "type": "preposition",
      "content.playlists": [
       {
         "playlist": "https://www.example.com/hls/title/index.m3u8",
         "media-protocol": "hls"
       },
      ],
      "extensions": [
          {
            "generic-trigger-extension-type":
               &lt;Type of trigger extension object #1&gt;,
            "generic-trigger-extension-value":
                {
                  &lt;properties of trigger extension object #1&gt;
                },
            "mandatory-to-enforce": true,
            "safe-to-redistribute": true,
          },
          {
            "generic-trigger-extension-type":
               &lt;Type of trigger extension object #2&gt;,
            "generic-trigger-extension-value":
                {
                  &lt;properties of trigger extension object #2&gt;
                },
            "mandatory-to-enforce": true,
            "safe-to-redistribute": true,
          },
      ],
    },
    "cdn-path": [ "AS64496:0" ]
  }

RESPONSE:

  HTTP/1.1 201 Created
  Date: Wed, 04 May 2016 08:48:10 GMT
  Content-Length: 467
  Content-Type: application/cdni; ptype=ci-trigger-status.v2
  Location: https://triggers.dcdn.example.com/triggers/0
  Server: example-server/0.1

  {
     "errors.v2": [
       {
         "extensions": [
            {
              "generic-trigger-extension-type":
                 &lt;Type of trigger extension object #1&gt;,
              "generic-trigger-extension-value":
                  {
                    &lt;properties of trigger extension object #1&gt;
                  },
              "mandatory-to-enforce": true,
              "safe-to-redistribute": true,
            },
          ],
         "description": "unrecognized extension &lt;type&gt;",
         "error": "eextension",
         "cdn": "AS64500:0"
       },
       {
         "extensions": [
            {
              "generic-trigger-extension-type":
                 &lt;Type of trigger extension object #2&gt;,
              "generic-trigger-extension-value":
                  {
                    &lt;properties of trigger extension object #2&gt;
                  },
              "mandatory-to-enforce": true,
              "safe-to-redistribute": true,
            },
          ],
         "description": "unrecognized extension &lt;type&gt;",
         "error": "eextension",
         "cdn": "AS64501:0"
       },
     ],
     "ctime": 1462351690,
     "etime": 1462351698,
     "mtime": 1462351690,
     "status": "failed",
     "trigger.v2": { &lt;content of trigger object from the command&gt; }
  }
</pre><a href="#section-8.2.6-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-7">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="sect-7.1">
<section id="section-9.1">
        <h3 id="name-cdni-payload-type-parameter">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-cdni-payload-type-parameter" class="section-name selfRef">CDNI Payload Type Parameter Registrations</a>
        </h3>
<p id="section-9.1-1">
   The IANA is requested to register the following new Payload Types in
   the "CDNI Payload Types" registry defined by <span>[<a href="#RFC7736" class="xref">RFC7736</a>]</span>, for use with
   the "application/cdni" MIME media type.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-6">
          <caption><a href="#table-6" class="selfRef">Table 6</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1"> Payload Type</th>
              <th class="text-left" rowspan="1" colspan="1"> Specification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ci-trigger-collection</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ci-trigger-command.v2</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ci-trigger-status.v2</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CIT.LocationPolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CIT.TimePolicy</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.TriggerVersion</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.TriggerPlaylistProtocol</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FCI.TriggerGenericExtension</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
          </tbody>
        </table>
<p id="section-9.1-3">[RFC Editor: Please replace RFCthis with the published RFC
        number for this document.]<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<div id="IANA.CDNI.payload.ci-trigger-command.v2">
<section id="section-9.1.1">
          <h4 id="name-cdni-ci-trigger-commandv2-p">
<a href="#section-9.1.1" class="section-number selfRef">9.1.1. </a><a href="#name-cdni-ci-trigger-commandv2-p" class="section-name selfRef">CDNI ci-trigger-command.v2 Payload Type</a>
          </h4>
<p id="section-9.1.1-1">Purpose: TBD: The purpose of this payload type is to distinguish version 2 of the CI/T command
            (and any associated capability advertisement)<a href="#section-9.1.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1.1-2">Interface: CI/T<a href="#section-9.1.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1.1-3">Encoding: see <a href="#sect-5.1.1" class="xref">Section 5.1.1</a><a href="#section-9.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.payload.ci-trigger-status.v2">
<section id="section-9.1.2">
          <h4 id="name-cdni-ci-trigger-statusv2-pa">
<a href="#section-9.1.2" class="section-number selfRef">9.1.2. </a><a href="#name-cdni-ci-trigger-statusv2-pa" class="section-name selfRef">CDNI ci-trigger-status.v2 Payload Type</a>
          </h4>
<p id="section-9.1.2-1">Purpose: TBD: The purpose of this payload type is to distinguish version 2 of the CI/T status resource response
            (and any associated capability advertisement)<a href="#section-9.1.2-1" class="pilcrow">¶</a></p>
<p id="section-9.1.2-2">Interface: CI/T<a href="#section-9.1.2-2" class="pilcrow">¶</a></p>
<p id="section-9.1.2-3">Encoding: see <a href="#sect-5.1.2" class="xref">Section 5.1.2</a><a href="#section-9.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.payload.ci-trigger-collection">
<section id="section-9.1.3">
          <h4 id="name-cdni-ci-trigger-collectionv">
<a href="#section-9.1.3" class="section-number selfRef">9.1.3. </a><a href="#name-cdni-ci-trigger-collectionv" class="section-name selfRef">CDNI ci-trigger-collection.v2 Payload Type</a>
          </h4>
<p id="section-9.1.3-1">Purpose: TBD (came from 8007)<a href="#section-9.1.3-1" class="pilcrow">¶</a></p>
<p id="section-9.1.3-2">Interface: CI/T<a href="#section-9.1.3-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3-3">Encoding: see <a href="#sect-5.1.3" class="xref">Section 5.1.3</a><a href="#section-9.1.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.payload.CIT.LocationPolicy">
<section id="section-9.1.4">
          <h4 id="name-cdni-ci-t-locationpolicy-tr">
<a href="#section-9.1.4" class="section-number selfRef">9.1.4. </a><a href="#name-cdni-ci-t-locationpolicy-tr" class="section-name selfRef">CDNI CI/T LocationPolicy Trigger Extension Type</a>
          </h4>
<p id="section-9.1.4-1">Purpose: The purpose of this Trigger Extension type is to distinguish LocationPolicy CIT Trigger Extension objects.<a href="#section-9.1.4-1" class="pilcrow">¶</a></p>
<p id="section-9.1.4-2">Interface: CI/T<a href="#section-9.1.4-2" class="pilcrow">¶</a></p>
<p id="section-9.1.4-3">Encoding: see <a href="#location-policy" class="xref">Section 6.1</a><a href="#section-9.1.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.payload.CIT.TimePolicy">
<section id="section-9.1.5">
          <h4 id="name-cdni-ci-t-timepolicy-trigge">
<a href="#section-9.1.5" class="section-number selfRef">9.1.5. </a><a href="#name-cdni-ci-t-timepolicy-trigge" class="section-name selfRef">CDNI CI/T TimePolicy Trigger Extension Type</a>
          </h4>
<p id="section-9.1.5-1">Purpose: The purpose of this Trigger Extension type is to distinguish TimePolicy CI/T Trigger Extension objects.<a href="#section-9.1.5-1" class="pilcrow">¶</a></p>
<p id="section-9.1.5-2">Interface: CI/T<a href="#section-9.1.5-2" class="pilcrow">¶</a></p>
<p id="section-9.1.5-3">Encoding: see <a href="#time-policy" class="xref">Section 6.2</a><a href="#section-9.1.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.payload.FCI.PlaylistProtocol">
<section id="section-9.1.6">
          <h4 id="name-cdni-fci-ci-t-playlist-prot">
<a href="#section-9.1.6" class="section-number selfRef">9.1.6. </a><a href="#name-cdni-fci-ci-t-playlist-prot" class="section-name selfRef">CDNI FCI CI/T Playlist Protocol Payload Type</a>
          </h4>
<p id="section-9.1.6-1">Purpose: The purpose of this payload type is to distinguish FCI advertisement objects for
             CI/T Playlist Protocol objects<a href="#section-9.1.6-1" class="pilcrow">¶</a></p>
<p id="section-9.1.6-2">Interface: FCI<a href="#section-9.1.6-2" class="pilcrow">¶</a></p>
<p id="section-9.1.6-3">Encoding: see <a href="#playlist-protocol-capability-object" class="xref">Section 7.1.1</a><a href="#section-9.1.6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.payload.FCI.ExtensionObject">
<section id="section-9.1.7">
          <h4 id="name-cdni-fci-ci-t-extension-obj">
<a href="#section-9.1.7" class="section-number selfRef">9.1.7. </a><a href="#name-cdni-fci-ci-t-extension-obj" class="section-name selfRef">CDNI FCI CI/T Extension Objects Payload Type</a>
          </h4>
<p id="section-9.1.7-1">Purpose: The purpose of this payload type is to distinguish FCI advertisement objects for
             CI/T Extension objects<a href="#section-9.1.7-1" class="pilcrow">¶</a></p>
<p id="section-9.1.7-2">Interface: FCI<a href="#section-9.1.7-2" class="pilcrow">¶</a></p>
<p id="section-9.1.7-3">Encoding: see <a href="#trigger-extension-capability-object" class="xref">Section 7.2.1</a><a href="#section-9.1.7-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-7.2">
<section id="section-9.2">
        <h3 id="name-cdni-ci-t-trigger-types-reg">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-cdni-ci-t-trigger-types-reg" class="section-name selfRef">"CDNI CI/T Trigger Types" Registry</a>
        </h3>
<p id="section-9.2-1">
   The IANA is requested to create a new "CDNI CI/T Trigger Types"
   subregistry under the "Content Delivery Network Interconnection (CDNI) Parameters" registry.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2-2">
   Additions to the "CDNI CI/T Trigger Types" registry will be made via
   the RFC Required policy as defined in <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>.<a href="#section-9.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2-3">
   The initial contents of the "CDNI CI/T Trigger Types" registry
   comprise the names and descriptions listed in Section 5.2.2 of this
   document, with this document acting as the specification.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-7.3">
<section id="section-9.3">
        <h3 id="name-cdni-ci-t-error-codes-regis">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-cdni-ci-t-error-codes-regis" class="section-name selfRef">"CDNI CI/T Error Codes" Registry</a>
        </h3>
<p id="section-9.3-1">
   The IANA is requested to create a new "CDNI CI/T Error Codes"
   subregistry under the "Content Delivery Network Interconnection (CDNI) Parameters" registry.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<p id="section-9.3-2">
   Additions to the "CDNI CI/T Error Codes" registry will be made via
   the Specification Required policy as defined in <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>.  The
   Designated Expert will verify that new Error Code registrations do
   not duplicate existing Error Code definitions (in name or
   functionality), prevent gratuitous additions to the namespace, and
   prevent any additions to the namespace that would impair the
   interoperability of CDNI implementations.<a href="#section-9.3-2" class="pilcrow">¶</a></p>
<p id="section-9.3-3">
   The initial contents of the "CDNI CI/T Error Codes" registry comprise
   the names and descriptions of the Error Codes listed in Section 5.2.7
   of this document, with this document acting as the specification.<a href="#section-9.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA.CDNI.MediaProtocolReg">
<section id="section-9.4">
        <h3 id="name-cdni-media-protocol-types">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-cdni-media-protocol-types" class="section-name selfRef">CDNI Media protocol types</a>
        </h3>
<p id="section-9.4-1">The IANA is requested to create a new "CDNI MediaProtocol Types" subregistry
           in the "Content Delivery Networks Interconnection (CDNI) Parameters" registry.
           The "CDNI MediaProtocol Types" namespace defines the valid MediaProtocol object
           values in Section <a href="#media-protocol" class="xref">Section 5.2.7</a>, used by the Playlist object.
           Additions to the MediaProtocol namespace conform to the "Specification Required"
           policy as defined in Section 4.6 of <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>,  where the specification
           defines the MediaProtocol Type and the protocol to which it is associated.
           The designated expert will verify that new protocol definitions do not duplicate
           existing protocol definitions and prevent gratuitous additions to the namespace.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
<p id="section-9.4-2">The following table defines the initial MediaProtocol values corresponding
           to the HLS, MSS, and DASH protocols:<a href="#section-9.4-2" class="pilcrow">¶</a></p>
<table class="center" id="table-7">
          <caption><a href="#table-7" class="selfRef">Table 7</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">MediaProtocol Type</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Specification</th>
              <th class="text-left" rowspan="1" colspan="1">Protocol Specification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">hls</td>
              <td class="text-left" rowspan="1" colspan="1">HTTP Live Streaming</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#RFC8216" class="xref">RFC 8216</a> [<a href="#RFC8216" class="xref">RFC8216</a>]</span>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">mss</td>
              <td class="text-left" rowspan="1" colspan="1">Microsoft Smooth Streaming</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#MSS" class="xref">MSS</a> [<a href="#MSS" class="xref">MSS</a>]</span>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">dash</td>
              <td class="text-left" rowspan="1" colspan="1">Dynamic Adaptive Streaming over HTTP (MPEG-DASH)</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#MPEG-DASH" class="xref">MPEG-DASH</a> [<a href="#MPEG-DASH" class="xref">MPEG-DASH</a>]</span>
</td>
            </tr>
          </tbody>
        </table>
<p id="section-9.4-4">[RFC Editor: Please replace RFCthis with the published RFC number for this document.]<a href="#section-9.4-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-8">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">
   The CI/T interface provides a mechanism to allow a uCDN to generate
   requests into the dCDN and to inspect its own CI/T requests and their
   current states.  The CI/T interface does not allow access to, or
   modification of, the uCDN or dCDN metadata relating to content
   delivery or to the content itself.  It can only control the presence
   of that metadata in the dCDN, and the processing work and network
   utilization involved in ensuring that presence.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">
   By examining "preposition" requests to a dCDN, and correctly
   interpreting content and metadata URLs, an attacker could learn the
   uCDN's or content owner's predictions for future content popularity.
   By examining "invalidate" or "purge" requests, an attacker could
   learn about changes in the content owner's catalog.<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">
   By injecting CI/T Commands, an attacker or a misbehaving uCDN would
   generate work in the dCDN and uCDN as they process those requests.
   So would a man-in-the-middle attacker modifying valid CI/T Commands
   generated by the uCDN.  In both cases, that would decrease the dCDN's
   caching efficiency by causing it to unnecessarily acquire or
   reacquire content metadata and/or content.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">
   A dCDN implementation of CI/T MUST restrict the actions of a uCDN to
   the data corresponding to that uCDN.  Failure to do so would allow
   uCDNs to detrimentally affect each other's efficiency by generating
   unnecessary acquisition or reacquisition load.<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5">
   An origin that chooses to delegate its delivery to a CDN is trusting
   that CDN to deliver content on its behalf; the interconnection of
   CDNs is an extension of that trust to dCDNs.  That trust relationship
   is a commercial arrangement, outside the scope of the CDNI protocols.
   So, while a malicious CDN could deliberately generate load on a dCDN
   using the CI/T interface, the protocol does not otherwise attempt to
   address malicious behavior between interconnected CDNs.<a href="#section-10-5" class="pilcrow">¶</a></p>
<div id="sect-8.1">
<section id="section-10.1">
        <h3 id="name-authentication-authorizatio">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-authentication-authorizatio" class="section-name selfRef">Authentication, Authorization, Confidentiality, Integrity Protection</a>
        </h3>
<p id="section-10.1-1">
   A CI/T implementation MUST support Transport Layer Security (TLS)
   transport for HTTP (HTTPS) as per <span>[<a href="#RFC2818" class="xref">RFC2818</a>]</span> and <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">
   TLS MUST be used by the server side (dCDN) and the client side (uCDN)
   of the CI/T interface, including authentication of the remote end,
   unless alternate methods are used for ensuring the security of the
   information in the CI/T interface requests and responses (such as
   setting up an IPsec tunnel between the two CDNs or using a physically
   secured internal network between two CDNs that are owned by the same
   corporate entity).<a href="#section-10.1-2" class="pilcrow">¶</a></p>
<p id="section-10.1-3">
   The use of TLS for transport of the CI/T interface allows the dCDN
   and the uCDN to authenticate each other using TLS client
   authentication and TLS server authentication.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
<p id="section-10.1-4">
   Once the dCDN and the uCDN have mutually authenticated each other,
   TLS allows:<a href="#section-10.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1-5.1">The dCDN and the uCDN to authorize each other (to ensure that they
      are receiving CI/T Commands from, or reporting status to, an
      authorized CDN).<a href="#section-10.1-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-5.2">CDNI commands and responses to be transmitted with
      confidentiality.<a href="#section-10.1-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-5.3">Protection of the integrity of CDNI commands and responses.<a href="#section-10.1-5.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-10.1-6">
   When TLS is used, the general TLS usage guidance in <span>[<a href="#RFC7525" class="xref">RFC7525</a>]</span> MUST be
   followed.<a href="#section-10.1-6" class="pilcrow">¶</a></p>
<p id="section-10.1-7">
   The mechanisms for access control are dCDN-specific and are not
   standardized as part of this CI/T specification.<a href="#section-10.1-7" class="pilcrow">¶</a></p>
<p id="section-10.1-8">
   HTTP requests that attempt to access or operate on CI/T data
   belonging to another CDN MUST be rejected using, for example,
   HTTP 403 ("Forbidden") or 404 ("Not Found").  This is intended to
   prevent unauthorized users from generating unnecessary load in dCDNs
   or uCDNs due to revalidation, reacquisition, or unnecessary
   acquisition.<a href="#section-10.1-8" class="pilcrow">¶</a></p>
<p id="section-10.1-9">
   When deploying a network of interconnected CDNs, the possible
   inefficiencies related to the diamond configuration discussed in
   <a href="#sect-2.2.1" class="xref">Section 2.2.1</a> should be considered.<a href="#section-10.1-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-8.2">
<section id="section-10.2">
        <h3 id="name-denial-of-service">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-denial-of-service" class="section-name selfRef">Denial of Service</a>
        </h3>
<p id="section-10.2-1">
   This document does not define a specific mechanism to protect against
   Denial-of-Service (DoS) attacks on the CI/T interface.  However, CI/T
   endpoints can be protected against DoS attacks through the use of TLS
   transport and/or via mechanisms outside the scope of the CI/T
   interface, such as firewalling or the use of Virtual Private Networks
   (VPNs).<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">
   Depending on the implementation, triggered activity may consume
   significant processing and bandwidth in the dCDN.  A malicious or
   faulty uCDN could use this to generate unnecessary load in the dCDN.
   The dCDN should consider mechanisms to avoid overload -- for example,
   by rate-limiting acceptance or processing of CI/T Commands, or by
   performing batch processing.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-8.3">
<section id="section-10.3">
        <h3 id="name-privacy">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-privacy" class="section-name selfRef">Privacy</a>
        </h3>
<p id="section-10.3-1">
   The CI/T protocol does not carry any information about individual end
   users of a CDN; there are no privacy concerns for end users.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<p id="section-10.3-2">
   The CI/T protocol does carry information that could be considered
   commercially sensitive by CDN operators and content owners.  The use
   of mutually authenticated TLS to establish a secure session for the
   transport of CI/T data, as discussed in <a href="#sect-8.1" class="xref">Section 10.1</a>, provides
   confidentiality while the CI/T data is in transit and prevents
   parties other than the authorized dCDN from gaining access to that
   data.  The dCDN MUST ensure that it only exposes CI/T data related to
   a uCDN to clients it has authenticated as belonging to that uCDN.<a href="#section-10.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="ABNF">[ABNF]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1930">[RFC1930]</dt>
        <dd>
<span class="refAuthor">Hawkinson, J.</span> and <span class="refAuthor">T. Bates</span>, <span class="refTitle">"Guidelines for creation, selection, and registration of an Autonomous System (AS)"</span>, <span class="seriesInfo">BCP 6</span>, <span class="seriesInfo">RFC 1930</span>, <span class="seriesInfo">DOI 10.17487/RFC1930</span>, <time datetime="1996-03" class="refDate">March 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1930">https://www.rfc-editor.org/info/rfc1930</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
        <dd>
<span class="refAuthor">Klyne, G.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time datetime="2002-07" class="refDate">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3339">https://www.rfc-editor.org/info/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7230">[RFC7230]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"</span>, <span class="seriesInfo">RFC 7230</span>, <span class="seriesInfo">DOI 10.17487/RFC7230</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7230">https://www.rfc-editor.org/info/rfc7230</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7231">[RFC7231]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"</span>, <span class="seriesInfo">RFC 7231</span>, <span class="seriesInfo">DOI 10.17487/RFC7231</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7231">https://www.rfc-editor.org/info/rfc7231</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7232">[RFC7232]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests"</span>, <span class="seriesInfo">RFC 7232</span>, <span class="seriesInfo">DOI 10.17487/RFC7232</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7232">https://www.rfc-editor.org/info/rfc7232</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7525">[RFC7525]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span>, <span class="refAuthor">Holz, R.</span>, and <span class="refAuthor">P. Saint-Andre</span>, <span class="refTitle">"Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)"</span>, <span class="seriesInfo">BCP 195</span>, <span class="seriesInfo">RFC 7525</span>, <span class="seriesInfo">DOI 10.17487/RFC7525</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7525">https://www.rfc-editor.org/info/rfc7525</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8006">[RFC8006]</dt>
        <dd>
<span class="refAuthor">Niven-Jenkins, B.</span>, <span class="refAuthor">Murray, R.</span>, <span class="refAuthor">Caulfield, M.</span>, and <span class="refAuthor">K. Ma</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Metadata"</span>, <span class="seriesInfo">RFC 8006</span>, <span class="seriesInfo">DOI 10.17487/RFC8006</span>, <time datetime="2016-12" class="refDate">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8006">https://www.rfc-editor.org/info/rfc8006</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8007">[RFC8007]</dt>
        <dd>
<span class="refAuthor">Murray, R.</span> and <span class="refAuthor">B. Niven-Jenkins</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Control Interface / Triggers"</span>, <span class="seriesInfo">RFC 8007</span>, <span class="seriesInfo">DOI 10.17487/RFC8007</span>, <time datetime="2016-12" class="refDate">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8007">https://www.rfc-editor.org/info/rfc8007</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06" class="refDate">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
      <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.greevenbosch-appsawg-cbor-cddl">[I-D.greevenbosch-appsawg-cbor-cddl]</dt>
        <dd>
<span class="refAuthor">Birkholz, H.</span>, <span class="refAuthor">Vigano, C.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Concise data definition language (CDDL): a notational convention to express CBOR data structures"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-greevenbosch-appsawg-cbor-cddl-11</span>, <time datetime="2017-07-03" class="refDate">3 July 2017</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-greevenbosch-appsawg-cbor-cddl-11.txt">https://www.ietf.org/archive/id/draft-greevenbosch-appsawg-cbor-cddl-11.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ISO8601">[ISO8601]</dt>
        <dd>
<span class="refAuthor">ISO</span>, <span class="refTitle">"Data elements and interchange formats -- Information interchange -- Representation of dates and times"</span>, <span class="seriesInfo">ISO 8601:2004</span>, <span class="seriesInfo">Edition 3</span>, <time datetime="2004-12" class="refDate">December 2004</time>, <span>&lt;<a href="https://www.iso.org/standard/40874.html">https://www.iso.org/standard/40874.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="MPEG-DASH">[MPEG-DASH]</dt>
        <dd>
<span class="refAuthor">ISO</span>, <span class="refTitle">"Information technology -- Dynamic adaptive streaming over HTTP (DASH) -- Part 1: Media presentation description and segment format"</span>, <span class="seriesInfo">ISO/IEC 23009-1:2014</span>, <span class="seriesInfo">Edition 2</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.iso.org/standard/65274.html">https://www.iso.org/standard/65274.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="MSS">[MSS]</dt>
        <dd>
<span class="refAuthor">Microsoft</span>, <span class="refTitle">"[MS-SSTR]: Smooth Streaming Protocol"</span>, <span class="seriesInfo">Protocol Revision 8.0</span>, <time datetime="2017-09" class="refDate">September 2017</time>, <span>&lt;<a href="https://msdn.microsoft.com/en-us/library/ff469518.aspx">https://msdn.microsoft.com/en-us/library/ff469518.aspx</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PCRE841">[PCRE841]</dt>
        <dd>
<span class="refAuthor">Hazel, P.</span>, <span class="refTitle">"Perl Compatible Regular Expressions"</span>, <span class="seriesInfo">Version 8.41</span>, <time datetime="2017-07-05" class="refDate">5 July 2017</time>, <span>&lt;<a href="http://www.pcre.org/">http://www.pcre.org/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2818">[RFC2818]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"HTTP Over TLS"</span>, <span class="seriesInfo">RFC 2818</span>, <span class="seriesInfo">DOI 10.17487/RFC2818</span>, <time datetime="2000-05" class="refDate">May 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2818">https://www.rfc-editor.org/info/rfc2818</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6707">[RFC6707]</dt>
        <dd>
<span class="refAuthor">Niven-Jenkins, B.</span>, <span class="refAuthor">Le Faucheur, F.</span>, and <span class="refAuthor">N. Bitar</span>, <span class="refTitle">"Content Distribution Network Interconnection (CDNI) Problem Statement"</span>, <span class="seriesInfo">RFC 6707</span>, <span class="seriesInfo">DOI 10.17487/RFC6707</span>, <time datetime="2012-09" class="refDate">September 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6707">https://www.rfc-editor.org/info/rfc6707</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7336">[RFC7336]</dt>
        <dd>
<span class="refAuthor">Peterson, L.</span>, <span class="refAuthor">Davie, B.</span>, and <span class="refAuthor">R. van Brandenburg, Ed.</span>, <span class="refTitle">"Framework for Content Distribution Network Interconnection (CDNI)"</span>, <span class="seriesInfo">RFC 7336</span>, <span class="seriesInfo">DOI 10.17487/RFC7336</span>, <time datetime="2014-08" class="refDate">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7336">https://www.rfc-editor.org/info/rfc7336</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7337">[RFC7337]</dt>
        <dd>
<span class="refAuthor">Leung, K., Ed.</span> and <span class="refAuthor">Y. Lee, Ed.</span>, <span class="refTitle">"Content Distribution Network Interconnection (CDNI) Requirements"</span>, <span class="seriesInfo">RFC 7337</span>, <span class="seriesInfo">DOI 10.17487/RFC7337</span>, <time datetime="2014-08" class="refDate">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7337">https://www.rfc-editor.org/info/rfc7337</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7736">[RFC7736]</dt>
        <dd>
<span class="refAuthor">Ma, K.</span>, <span class="refTitle">"Content Delivery Network Interconnection (CDNI) Media Type Registration"</span>, <span class="seriesInfo">RFC 7736</span>, <span class="seriesInfo">DOI 10.17487/RFC7736</span>, <time datetime="2015-12" class="refDate">December 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7736">https://www.rfc-editor.org/info/rfc7736</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7975">[RFC7975]</dt>
        <dd>
<span class="refAuthor">Niven-Jenkins, B., Ed.</span> and <span class="refAuthor">R. van Brandenburg, Ed.</span>, <span class="refTitle">"Request Routing Redirection Interface for Content Delivery Network (CDN) Interconnection"</span>, <span class="seriesInfo">RFC 7975</span>, <span class="seriesInfo">DOI 10.17487/RFC7975</span>, <time datetime="2016-10" class="refDate">October 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7975">https://www.rfc-editor.org/info/rfc7975</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8216">[RFC8216]</dt>
      <dd>
<span class="refAuthor">Pantos, R., Ed.</span> and <span class="refAuthor">W. May</span>, <span class="refTitle">"HTTP Live Streaming"</span>, <span class="seriesInfo">RFC 8216</span>, <span class="seriesInfo">DOI 10.17487/RFC8216</span>, <time datetime="2017-08" class="refDate">August 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8216">https://www.rfc-editor.org/info/rfc8216</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="sect-a">
<section id="appendix-A">
      <h2 id="name-formalization-of-the-json-d">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-formalization-of-the-json-d" class="section-name selfRef">Formalization of the JSON Data</a>
      </h2>
<p id="appendix-A-1">
   This appendix is non-normative.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">
   The JSON data described in this document has been formalized using
   the CBOR Data Definition Language (CDDL) <span>[<a href="#I-D.greevenbosch-appsawg-cbor-cddl" class="xref">I-D.greevenbosch-appsawg-cbor-cddl</a>]</span> (where "CBOR"
   means "Concise Binary Object Representation"), as follows:<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="appendix-A-3">
<pre>
CIT-object = CIT-command / Trigger-Status-Resource / Trigger-Collection

CIT-command ; use media type application/cdni; ptype=ci-trigger-command
= {
  ? trigger: Triggerspec
  ? cancel: [* URI]
  cdn-path: [* Cdn-PID]
}

Trigger-Status-Resource ; application/cdni; ptype=ci-trigger-status
= {
  trigger: Triggerspec
  ctime: Absolute-Time
  mtime: Absolute-Time
  ? etime: Absolute-Time
  status: Trigger-Status
  ? errors: [* Error-Description]
}

Trigger-Collection ; application/cdni; ptype=ci-trigger-collection
= {
  triggers: [* URI]
  ? staleresourcetime: int ; time in seconds
  ? coll-all: URI
  ? coll-pending: URI
  ? coll-active: URI
  ? coll-complete: URI
  ? coll-failed: URI
  ? cdn-id: Cdn-PID
}

Triggerspec = { ; see Section 5.2.1
  type: Trigger-Type
  ? metadata.urls: [* URI]
  ? content.urls: [* URI]
  ? content.ccid: [* Ccid]
  ? metadata.patterns: [* Pattern-Match]
  ? content.patterns: [* Pattern-Match]
}

Trigger-Type = "preposition" / "invalidate"
   / "purge" ; see Section 5.2.2

Trigger-Status = "pending" / "active" / "complete" / "processed"
   / "failed" / "cancelling" / "cancelled" ; see Section 5.2.3

Pattern-Match = { ; see Section 5.2.4
  pattern: tstr
  ? case-sensitive: bool
  ? match-query-string: bool
}

Absolute-Time = number ; seconds since UNIX epoch (Section 5.2.5)

Error-Description = { ; see Section 5.2.6
  error: Error-Code
  ? metadata.urls: [* URI]
  ? content.urls: [* URI]
  ? metadata.patterns: [* Pattern-Match]
  ? content.patterns: [* Pattern-Match]
  ? description: tstr
}

Error-Code = "emeta" / "econtent" / "eperm" / "ereject"
   / "ecdn" / "ecancelled"  ; see Section 5.2.7

Ccid = tstr ; see RFC 8006

Cdn-PID = tstr .regexp "AS[0-9]+:[0-9]+"

URI = tstr
</pre><a href="#appendix-A-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-B">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-B-1">
   The authors thank Kevin Ma for his input, and Carsten Bormann for his
   review and formalization of the JSON data.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ori Finkelman</span></div>
<div dir="auto" class="left"><span class="org">Qwilt</span></div>
<div dir="auto" class="left"><span class="street-address">6, Ha'harash</span></div>
<div dir="auto" class="left">
<span class="locality">Hod HaSharon</span> <span class="postal-code">4524079</span>
</div>
<div dir="auto" class="left"><span class="country-name">Israel</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ori.finkelman.ietf@gmail.com" class="email">ori.finkelman.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Sanjay Mishra</span></div>
<div dir="auto" class="left"><span class="org">Verizon</span></div>
<div dir="auto" class="left"><span class="street-address">13100 Columbia Pike</span></div>
<div dir="auto" class="left">
<span class="locality">Silver Spring</span>, <span class="region">MD</span> <span class="postal-code">20904</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sanjay.mishra@verizon.com" class="email">sanjay.mishra@verizon.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Nir B. Sopher</span></div>
<div dir="auto" class="left"><span class="org">Qwilt</span></div>
<div dir="auto" class="left"><span class="street-address">6, Ha'harash</span></div>
<div dir="auto" class="left">
<span class="locality">Hod HaSharon</span> <span class="postal-code">4524079</span>
</div>
<div dir="auto" class="left"><span class="country-name">Israel</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:nir@apache.org" class="email">nir@apache.org</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
