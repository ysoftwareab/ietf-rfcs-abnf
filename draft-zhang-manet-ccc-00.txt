MANET Working Group                                        Y.F. Zhang 
Internet Draft                                           China Mobile 
Intended status: Informational                               JW. Wang 
Expires: Feb. 5, 2009                             Tsinghua University 
                                                             D.P. Liu 
                                                         China Mobile 
                                                            July 5, 2008 
 
 
                                      
     Cellular-based Central Control (CCC) Mechanism for Mobile Ad hoc 
                                 Networks 
                       draft-zhang-manet-ccc-00.txt 


 

Status of this Memo 

   By submitting this Internet-Draft, each author represents that       
   any applicable patent or other IPR claims of which he or she is       
   aware have been or will be disclosed, and any of which he or she       
   becomes aware will be disclosed, in accordance with Section 6 of       
   BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that other 
   groups may also distribute working documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on Feb 5, 2009. 

Copyright Notice 

   Copyright (C) The IETF Trust (2008). 

Abstract 

 
 
 
Y.F. Zhang, et al.       Expires Feb. 5,2009                  [Page 1] 

Internet-Draft                 CCC for MANET                   July 2008 
   This document discusses a cellular based central control 
   mechanism(CCC) for middle/small scale mobile Ad hoc networks. The 
   proposed mechanism can be used for the mobile operators to build a 
   central-controlled and manageable mobile Ad hoc network.  

Table of Contents 

    
   1. Introduction................................................2 
      1.1. Terminology............................................3 
   2. Scenarios of MANET in Mobile Operator's Network..............3 
   3. System architecture.........................................3 
      3.1. System overview.........................................4 
         3.1.1. Control Network....................................4 
         3.1.2. Transport Networks.................................5 
   4. Control Network.............................................6 
      4.1. Overview...............................................6 
      4.2. MANET node configuration................................6 
         4.2.1. MANET node IP address configuration................6 
         4.2.2. MANET node routing table construction..............7 
      4.3. Maintenance of the MANET................................7 
      4.4. Demolition of the MANET.................................8 
      4.5. Establishment of Multicast MANET........................8 
      4.6. Session Control.........................................8 
      4.7. Control Sequences of the Formation of a Connection.......8 
   5. Details of the Control Network...............................9 
      5.1. Client and Server.......................................9 
      5.2. Structure of Control Message in Terminal and Relay Nodes.9 
         5.2.1. Structure of Control Message in Terminal Nodes......9 
         5.2.2. Structure of Control Message in Relay Nodes........10 
      5.3. Interface between Control Network & Transportation Network11 
      5.4 Interface between Control network and APP...............11 
   6. Security Considerations.....................................12 
   7. IANA Considerations........................................12 
   8. Conclusions................................................12 
   9. Acknowledgments............................................12 
   10. References................................................13 
      10.1. Normative References..................................13 
      10.2. Informative References................................13 
   Author's Addresses............................................13 
   Intellectual Property Statement................................13 
   Disclaimer of Validity........................................14 
 
1. Introduction 

   Currently, mobile Ad hoc network (MANET) is more and more popularly 
   used in many civil scenarios. MANET has its advantages in that it 
   does not need any network infrastructure and can be deployed fast. 
   But the lack of control and management mechanism of MANET obstructs 
 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 2] 

Internet-Draft                 CCC for MANET                   July 2008 
   mobile operators to widely deploy MANET. In this document, we explore 
   CCC, a cellular based central control mechanism to make MANET 
   controllable and manageable by mobile operators to some extent. The 
   proposed mechanism includes IP address configuration, routing table 
   construction and QoS control of MANET. 

1.1. Terminology 

   In this document, the key words "MUST", "MUST NOT", "REQUIRED", 
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT 
   RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as 
   described RFC 2119 [1]. 

   This section defines some key concepts using in this document. 

   AP: Access Point. 

   CID: Control Identification. 

   PCT: Power Consumption Table. 

   TDT: Time Delay Table. 

   CCC: Cellular-Based Control. 

2. Scenarios of MANET in Mobile Operator's Network 

   The typical scenario to deploy MANET in Mobile operator's network is 
   a middle/small scale MANET applications (e.g. including some tens of 
   Ad hoc nodes) used by multi-mode mobile terminals (including current 
   operating mobile system GSM/3G and Ad hoc network). The reasons why 
   the scale is limited to a middle/small are as follows: 

   First, the operator views MANET as the supplement and of stretch of 
   reach. So it is suitable to keep a middle/small scale for the MANET 
   in mobile operator's network. 

   Second, the operator can control the MANET more easily by current 
   centralized cellular system with a middle/small scale. The tasks may 
   include IP address allocation, node management, MANET topology probe 
   and control and session management. 

   Last, the operator can easily execute charging and billing centrally 
   in a MANET of such scale. 

3. System architecture 

   This section describes the system architecture of the cellular based 
   MANET. 
 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 3] 

Internet-Draft                 CCC for MANET                   July 2008 
3.1. System overview 

   The proposed mechanism requires that the MANET node work in dual mode. 
   For example, a cell phone which has a 900/1800MHz GSM network 
   interface and a 2.4GHz IEEE 802.11 interface [2] can be used in the 
   above scenario. We use this GSM/802.11 dual mode cell phone as the 
   example in the following discussion. The GSM/3G network interface of 
   the MANET node enables it to access to the mobile operator's network 
   which controls and manages the MANET. We call this GSM/3G network 
   control network. And the 802.11 network that forms ad hoc connections 
   is called transport network.  

   The function of control network includes: IP address allocation, node 
   management, MANET topology probe and control, session management as 
   well as charging and billing. We shall discuss the charging and 
   billing mechanisms in the future draft.The transport network provides 
   civil MANET services, such as text transportation, audio 
   transportation and video transportation. 

   In the following sections the architecture and the functions of these 
   two kinds of networks a explored and we take GSM as the control 
   network.  

3.1.1. Control Network 

   The following picture demonstrates the architecture of the control 
   network. 





















 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 4] 

Internet-Draft                 CCC for MANET                   July 2008 
            +------------------------------------------------+ 
            |                                                | 
            |   +-----------+              +-----------+     | 
            |   |Cellphone1 |              |Cellphone2 |     | 
            |   +-----------+              +-----------+     | 
            |              \ GSM link       /                | 
            |               \              /                 | 
            |               +--------------+                 | 
            |               |Control Server|                 | 
            |               +--------------+                 | 
            |               /               \                | 
            |              /                 \               | 
            |   +-----------+              +-----------+     | 
            |   |Cellphone3 |              |Cellphone4 |     | 
            |   +-----------+              +-----------+     | 
            |                                                | 
            |                                                | 
            |                                                | 
            +------------------------------------------------+ 
                  Figure 1: Control Network Architecture 
    
   MANET nodes connect to the control server using GSM link. The control 
   server is located in the mobile operator's network and it takes the 
   responsibility of IP address allocation and configuration of the 
   MANET node. Meanwhile the MANET nodes send their transport network's 
   link status to the control server which uses this link status 
   information to form a routing path that can satisfy the QoS 
   requirement of the user. The control serve also calculates and 
   forming routing table for each MANET node and send the routing table 
   to the MANET node using GSM link. Session Control can also be 
   executed by this control network. 

3.1.2. Transport Networks 

   The MANET nodes use their 802.11 wireless interfaces to form ad hoc 
   transport connections with each other. The transport network is used 
   for application data such as text file, audio and video 
   transportation. In our scenario there are two kinds of routing tables, 
   primary routing table and secondary routing table. For the 
   convenience of management, different form conventional ad hoc network, 
   the primary routing tables of the MANET nodes is received from the 
   control server. The MANET nodes also maintain ad hoc routing table as 
   the secondary routing table from ad hoc routing protocol (such as 
   AODV) which can be used in the case of GSM link failure. 

   The following figure is an example of the transport network. 



 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 5] 

Internet-Draft                 CCC for MANET                   July 2008 
            +------------------------------------------------+ 
            |                                                | 
            |   +-----------+              +-----------+     | 
            |   |Cellphone1 |              |Cellphone2 |     | 
            |   +-----------+              +-----------+     | 
            |              \                     /           | 
            |               \                   /            | 
            |         +------------+           /             | 
            |         |Cellphone3  |          /              | 
            |         +------------+         /               | 
            |            /       \          /                | 
            |           /         \        /                 | 
            |   +-----------+     +-----------+              | 
            |   |Cellphone4 |     |Cellphone5 |              | 
            |   +-----------+     +-----------+              | 
            |                                                | 
            |                                                | 
            |                                                | 
            +------------------------------------------------+ 
                 Figure 2: Transport Network Architecture 
    

4. Control Network 

The transport network is same as the typical MANET. In this section we 
focus on the control network functions[3]. 

4.1. Overview 

  Every MANET node has a Control Identification, CID (i.e. cell phone 
number). The control server maintains a MANET node's neighboring CIDs 
table, a Power Consumption Table, PCT and Time Delay Table,TDT by the 
reports which are periodically sent by the MANET nodes.  

4.2. MANET node configuration 

This section describes in details about the MANET node configuration and 
ad hoc network construction. 

4.2.1. MANET node IP address configuration 

The MANET node IP address is configured by the control server. The 
control server has an IP address pool that can be dynamically allocated 
to the MANET node. The IP address used can be IPv4 or IPv6 address. The 
control server sends the IP address configuration information to the 
MANET node and the MANET node then uses this IP address to configure its 
MANET interface (802.11 wireless interface in this example). The IP 
address configuration policy can be configured by the mobile operator. 

 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 6] 

Internet-Draft                 CCC for MANET                   July 2008 
4.2.2. MANET node routing table construction 

When a MANET node wants to establish an ad hoc connection with another 
MANET node, it sends a request message to the control server. The 
control server then calculates a shortest path using Dijkstra algorithm 
[4] for that MANET node. In the routing table construction process, the 
QoS requirement is guaranteed according to the TDT. After forming the 
routing table, the control server sends it to the MANET nodes by the 
control network using GPRS link. Then the MANET node can use this IP 
address and routing table to communicate with its destination node in an 
ad hoc fashion.  

As demonstrated in figure 3, when node A wants to establish a connection 
with B, it sends a request to the control server. Before the connection 
is established, the control server calculates the shortest path by 
Dijkstra Algorithm, and allocates all the related node's IP address and 
routing table.  In figure 3, node A and B are the session nodes, node 2 
is the relay node, and node 3 and 5 are backup nodes in case of node 2 
fails. They agree to participate the session. However, the shortest path 
does not include them. 

            +------------------------------------------------+ 
            |                The shortest path               | 
            |   +-----------+              +-----------+     | 
            |   |Node A     |==============|Node 2     |     | 
            |   +-----------+              +-----------+     | 
            |        |     \                /     ||         | 
            |        |      \              /      ||The      | 
            |        |      +--------------+      ||shortest | 
             |        |      | Node 5       |      ||path     | 
            |        |      +--------------+      ||         | 
            |        |                            ||         | 
            |        |                            ||         | 
            |   +-----------+              +-----------+     | 
            |   |Node 3     |--------------|Node B     |     | 
            |   +-----------+              +-----------+     | 
            |                                                | 
            |                                                | 
            |                                                | 
            +------------------------------------------------+ 
                       Figure 3: Routing Management 
 

4.3. Maintenance of the MANET 

In the case of MANET topology changing, the control server will find the 
PCT changes, so it applies Dijkstra algorithm again and forming a new 
routing table. This procedure may include new IP address configuration 
and old IP address withdrawal. If the control network cannot be used due 
 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 7] 

Internet-Draft                 CCC for MANET                   July 2008 
to poor signal power, the MANET node will use its default ad hoc routing 
protocol to construct a new routing table. And when the control network 
can be used, the MANET node then send the network changes to the control 
server, the control server then updates its PCT and TDT. 

4.4. Demolition of the MANET 

When a MANET node wants to leave from a MANET, it sends a demolition 
request to the control server. The control serve then withdraws the IP 
address and updates its PCT and TDT. 

4.5. Establishment of Multicast MANET 

The control server uses the topology information of the MANET to first 
calculate the shortest path using Dijkstra algorithm in each pair of 
MANET nodes and then calculate a minimum weight sub-graph[4]. 

4.6. Session Control 

The control network can also interact with the application in session 
control. The details are illustrated in Section 5.4. 

4.7. Control Sequences of the Formation of a Connection 

The following figure demonstrated the control sequence of the process of 
a connection establishment. 

   +-------------------------------------------------------------------+ 
   |                                                                   | 
   | +-------+    +-------+     +--------+     +------+                | 
   | |Node A |    |Node 1 |     |Node B  |     |Server|                | 
   | +-------+    +-------+     +--------+     +------+                | 
   |     |            |              |             |                   | 
   |     |------------|--------------|-----------|A want to connect  | 
   |     |            |              |             |                   | 
   |     |            |              |             |Server calculate   | 
   |     |            |              |             |the shortest path  | 
   |     |            |              |             |and routing tables | 
   |     |<-----------|<-------------|<------------|                   | 
   |     |            |              |             |Server allocate IP | 
   |     |            |              |             |address and routing| 
   |     |            |              |             |tables             | 
   |     |<--------- |<----------- |<----------- |NodeA,NodeB,Node1  | 
   |     |            |              |             |transfer data      | 
   |     |            |              |             |                   | 
   +-------------------------------------------------------------------+ 
 

        Figure 4: Control Sequence of Connection Establishment 
 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 8] 

Internet-Draft                 CCC for MANET                   July 2008 
 

5. Details of the Control Network 

5.1. Client and Server 

   There are two kinds of terminals, client and server in a control 
   network. Client is installed on the cell phone while the server 
   resides in the mobile operator's network. The clients and server 
   communicate by the GPRS channel. Basically, Client sends the 
   information of nodes up to the server and communicates with transport 
   networks and the server calculates the routing table and send back 
   Control Messages. 

5.2. Structure of Control Message in Terminal and Relay Nodes 

5.2.1.  Structure of Control Message in Terminal Nodes 

The structure of control message includes header and body. The header is 
4 bytes long and the body  structure is decided by the header.   

The first Byte of the header is defined as the following: 

EstablishS     00000000      establish an ad hoc connection 
EstablishM     10000000      establish a network with multi-points 
Delete         11000000      delete the connection 
Refresh        11100000      request of renew the routing table 
Leave         11110000      request of leaving the network 
MyNeighbor     11111000      tell center the neighbouring points 
AckSNet        11111100      agree to join a ad hoc connection 
nAckSnet       11111110      disagree to join a ad hoc connection 
AckMNet        11111111      agree to join a multi-points connection 
nAckMNet       00000001      disagree to join a multi-points connection 
NetFlow        00000011      report the netflow of the point 
ParticipateNet 00000111      request of paricipation 
AllowIn        00001111      agree of the join of the CID 
nAllowIn       00011111      disagree of the join of the CID 

The second Byte is verification,which can be calculated by suming all 
bytes in the control message and using modular arithmetic with modulus 
11111111.The third Byte is the length of the control message except the 
header. The fourth Byte is the CID. 
 
The body definition is as follows. 
 
EstablishS    CID of the supposed opposite point 
EstablishM    number of CID and the CIDs 
 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                 [Page 9] 

Internet-Draft                 CCC for MANET                   July 2008 
Delete        the ID supposed to be deleted 
Refresh       null 
Leave         null 
MyNeighbor    number of CIDs and all the neighbouring CIDs 
AckSNet      ID established 
nAckSNet      ID established 
AckMNet       ID established 
nAckMNet      ID established 
NetFlow       flow of the net(by k) 
ParticipateNetID established 
AllowIn       ID established and CIDs permitted 
nAllowIn      ID established and CIDs not permitted 

5.2.2.  Structure of Control Message in Relay Nodes 

The structure of control message in relay nodes is similar to that of 
terminal nodes. 

The header is defined as follows:  

AckEstablishS   00000000   agree to establish a ad hoc connection 
nAckEstablishS  10000000   fail to establish a connection 
AckEstablishM   11000000   agree to establish a multi-points connection 
nAckEstablishM  11100000   fail to establish a multi-points connection 
AckDelete       11110000   agree to delete the connection 
nAckDelete      11111000   fail to delete the connection 
DistributeRoute 11111100   give a routing table to the point 
AckLeave        11111110   allow the point to leave 
IsPartiSNet     11111111   ask the point if it likes to join the 
 connection 
IsPartiMNet     00000001   ask the point if it likes to join the   
                             multi-points connection 
AckNetFlow      00000011   infos of flow 
AckMyNeighbor   00000111   neighbouring CIDs 
ToBeDeleted     00001111   the ID to be deleted 
AckParticipate  00011111   agree to join the network 
nAckParticiapte 00111111   disagree to join the network 
IsAllow         01111111   wether agree the CID's join 

The second Byte is verification,which can be calculated by suming all 
bytes in the control message and using modular arithmetic with modulus 
11111111.The third Byte is the length of the control message except the 
header. The fourth Byte is the CID. 

 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                [Page 10] 

Internet-Draft                 CCC for MANET                   July 2008 
The body definition is as follows. 
                                  st                            nd rd    AckEstablishS     ConnectionID in 1 byte, request/answer CID in 2 /3  
                   byte                  st  nd    nAckEstablishS    request/answer CID in 1  /2   byte                                       st    AckEstablishM     ConnectionID in 1 byte, Participants CID in following 
                  byte 
NAckEstablishM    Initiator's CID 
AckDelete         ConnectionID 
nAckDelete        ConnectionID 
DistributeRoute   Routing Table Information 
AckLeave          Leaving node CID st                      nd    IsPartiSNet       ConnectionID in 1  byte, request CID in 2  byte                                       st    IsPartiMNet       ConnectionID in 1 byte, Participants CID in following 
                  byte 
AckNetFlow         null 
AckMyNeighbor      null 
ToBeDeleted        ConnectionID to be deleted 
AckParticipate     ConnectionID 
NAckParticipate    ConnectionID    st                          nd    IsAllow            ConnectionID in 1 byte, Joining node CID in 2 byte 
5.3. Interface between Control Network & Transportation Network 

The senders receive the IP address of gateway from the control network, 
all the other messages received will be discarded except that from the 
right IP address.  

5.4 Interface between Control network and APP 

The message that control network sends to the APP is defined as follows. 

AckEstablishS    a connection's established 
nAckEstablishS   a connection's not established 
AckEstablishM    a connection's established 
nAckEstablishM   a connection's not established 
AckDelete        a connection's deleted 
nAckDelete       a connection's not deleted 
AckLeave         allow to leave 
IsPartiSNet      ask whether to join 
IsPartiMNet      ask whether to join 
ToBeDeleted      the connection will be deleted 
IsAllow          answer allow to join or not 
 
The message that the APP sends to the control network is defined as 
 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                [Page 11] 

Internet-Draft                 CCC for MANET                   July 2008 
follows. 
 
EstablishS     establish a ad hoc connection 
EstablishM     establish a multi-points connection 
Delete         delete the connection 
Leave          leave 
AckSNet        acknoledge to join a connection 
nAckSNet       disacknoledge to join a connection 
AckMNet        acknoledge to join a multi-points connection 
nAckMNet       disacknoledge to join a multi-points connection 
ParticipateNet participate a net of the ID 
AllowIn        allow a CID to join 
nAllowIn       not allow a CID to join 
 
6. Security Considerations 

The security mechanism of Control Network depend on the security 
mechanism that provided by the mobile operator's network. 

The control server takes the responsibility to authenticate and 
authorize the MANET node.  

The inter MANET node's data transportation should be protected by shared 
key and the data should be encrypted.  

7. IANA Considerations 

   This document makes no requests to IANA. 

8. Conclusions 

   This document discusses a cellular base central control system that 
   can be used for the mobile operator to control and mange a MANET 
   network. 

9. Acknowledgments 

   The authors would like to thank the following individuals for their 
   review, comments, and suggestions to improve the content of this 
   document. 

   Lin Zhang, Guijin Wang, Zhisheng Niu, Peng Kang, Wenxin Ning, Han 
   Wang. 




 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                [Page 12] 

Internet-Draft                 CCC for MANET                   July 2008 
10. References 

10.1. Normative References 

   [1] Bradner, S., "Key words for use in RFCs to Indicate Requirement 
       Levels", BCP 14, RFC 2119, March 1997. 

   [2] http://ieee802.org/11/ 

10.2. Informative References 

   [3] Wang Jingwu,''Design and implementation Operational Wireless Ad 
   hoc Control Server'', Tech. Report,Tsinghua University,May 2008. 

   [4] Thomas H.Cormen et al,''Introduction to Algorithms'', Second 
   Edition. MIT Press and McGraw-Hill, 2001. Section 24.3: Dijkstra's      
   algorithm, pp.595-                        -601 

Author's Addresses 

   Yunfei Zhang 
   China Mobile Communications Corporation 
      
   Phone: +86 10 66006688 
   Email: zhangyunfei@chinamobile.com 
    

Intellectual Property Statement 

   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed to 
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; nor does it represent that it has 
   made any independent effort to identify any such rights.  Information 
   on the procedures with respect to rights in RFC documents can be 
   found in BCP 78 and BCP 79. 

   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use of 
   such proprietary rights by implementers or users of this 
   specification can be obtained from the IETF on-line IPR repository at 
   http://www.ietf.org/ipr. 

   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 

 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                [Page 13] 

Internet-Draft                 CCC for MANET                   July 2008 
   this standard.  Please address the information to the IETF at 
   ietf-ipr@ietf.org. 

Disclaimer of Validity 

   This document and the information contained herein are provided on an 
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND 
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS 
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 

Copyright Statement 

   Copyright (C) The IETF Trust (2008). 

   This document is subject to the rights, licenses and restrictions 
   contained in BCP 78, and except as set forth therein, the authors 
   retain all their rights. 

Acknowledgment 

   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 























 
 
Y.F Zhang, et al.       Expires Feb. 5, 2009                [Page 14] 

