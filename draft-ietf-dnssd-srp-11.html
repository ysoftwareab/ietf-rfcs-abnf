<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Service Registration Protocol for DNS-Based Service Discovery</title>
<meta content="Ted Lemon" name="author">
<meta content="Stuart Cheshire" name="author">
<meta content="
       

        The Service Registration Protocol for DNS-Based Service Discovery uses the standard DNS Update mechanism to enable DNS-Based
        Service Discovery using only unicast packets.  This makes it possible to deploy DNS Service Discovery without multicast,
        which greatly improves scalability and improves performance on networks where multicast service is not an optimal choice,
        particularly 802.11 (Wi‑Fi) and 802.15.4 (IoT) networks.  DNS‑SD Service registration uses public keys and SIG(0)
        to allow services to defend their registrations against attack.

       
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="Multicast DNS" name="keyword">
<meta content="DNS-Based Service Discovery" name="keyword">
<meta content="DNS Update" name="keyword">
<meta content="SIG(0)" name="keyword">
<meta content="RFC" name="keyword">
<meta content="Request for Comments" name="keyword">
<meta content="I-D" name="keyword">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-dnssd-srp-11" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-dnssd-srp-ms167u3j.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Service Registration Protocol</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lemon &amp; Cheshire</td>
<td class="center">Expires 25 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-10-22" class="published">22 October 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-25">25 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Lemon</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">S. Cheshire</div>
<div class="org">Apple Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Service Registration Protocol for DNS-Based Service Discovery</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">

        The Service Registration Protocol for DNS-Based Service Discovery uses the standard DNS Update mechanism to enable DNS-Based
        Service Discovery using only unicast packets.  This makes it possible to deploy DNS Service Discovery without multicast,
        which greatly improves scalability and improves performance on networks where multicast service is not an optimal choice,
        particularly 802.11 (Wi‑Fi) and 802.15.4 (IoT) networks.  DNS‑SD Service registration uses public keys and SIG(0)
        to allow services to defend their registrations against attack.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 25 April 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-service-registration-protoc" class="xref">Service Registration Protocol</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-protocol-variants" class="xref">Protocol Variants</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1" class="keepWithNext"><a href="#section-2.1.1" class="xref">2.1.1</a>.  <a href="#name-full-featured-hosts" class="xref">Full-featured Hosts</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.2">
                    <p id="section-toc.1-1.2.2.1.2.2.1" class="keepWithNext"><a href="#section-2.1.2" class="xref">2.1.2</a>.  <a href="#name-constrained-hosts" class="xref">Constrained Hosts</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.3">
                    <p id="section-toc.1-1.2.2.1.2.3.1"><a href="#section-2.1.3" class="xref">2.1.3</a>.  <a href="#name-why-two-variants" class="xref">Why two variants?</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-protocol-details" class="xref">Protocol Details</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-what-to-publish" class="xref">What to publish</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a href="#section-2.2.2" class="xref">2.2.2</a>.  <a href="#name-where-to-publish-it" class="xref">Where to publish it</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.3">
                    <p id="section-toc.1-1.2.2.2.2.3.1"><a href="#section-2.2.3" class="xref">2.2.3</a>.  <a href="#name-how-to-publish-it" class="xref">How to publish it</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.3.2.1">
                        <p id="section-toc.1-1.2.2.2.2.3.2.1.1"><a href="#section-2.2.3.1" class="xref">2.2.3.1</a>.  <a href="#name-how-dnssd-service-registrat" class="xref">How DNS‑SD Service Registration differs from standard RFC2136 DNS Update</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.4">
                    <p id="section-toc.1-1.2.2.2.2.4.1"><a href="#section-2.2.4" class="xref">2.2.4</a>.  <a href="#name-how-to-secure-it" class="xref">How to secure it</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.4.2.1">
                        <p id="section-toc.1-1.2.2.2.2.4.2.1.1"><a href="#section-2.2.4.1" class="xref">2.2.4.1</a>.  <a href="#name-first-come-first-served-nam" class="xref">First-Come First-Served Naming</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.5">
                    <p id="section-toc.1-1.2.2.2.2.5.1"><a href="#section-2.2.5" class="xref">2.2.5</a>.  <a href="#name-service-behavior" class="xref">Service Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.5.2.1">
                        <p id="section-toc.1-1.2.2.2.2.5.2.1.1"><a href="#section-2.2.5.1" class="xref">2.2.5.1</a>.  <a href="#name-public-private-key-pair-gen" class="xref">Public/Private key pair generation and storage</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.5.2.2">
                        <p id="section-toc.1-1.2.2.2.2.5.2.2.1"><a href="#section-2.2.5.2" class="xref">2.2.5.2</a>.  <a href="#name-name-conflict-handling" class="xref">Name Conflict Handling</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.5.2.3">
                        <p id="section-toc.1-1.2.2.2.2.5.2.3.1"><a href="#section-2.2.5.3" class="xref">2.2.5.3</a>.  <a href="#name-record-lifetimes" class="xref">Record Lifetimes</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.5.2.4">
                        <p id="section-toc.1-1.2.2.2.2.5.2.4.1"><a href="#section-2.2.5.4" class="xref">2.2.5.4</a>.  <a href="#name-compression-in-srv-records" class="xref">Compression in SRV records</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.5.2.5">
                        <p id="section-toc.1-1.2.2.2.2.5.2.5.1"><a href="#section-2.2.5.5" class="xref">2.2.5.5</a>.  <a href="#name-removing-published-services" class="xref">Removing published services</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-srp-server-behavior" class="xref">SRP Server Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="xref">2.3.1</a>.  <a href="#name-validation-of-adds-and-dele" class="xref">Validation of Adds and Deletes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1.2.1">
                        <p id="section-toc.1-1.2.2.3.2.1.2.1.1"><a href="#section-2.3.1.1" class="xref">2.3.1.1</a>.  <a href="#name-service-discovery-instructi" class="xref">Service Discovery Instruction</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1.2.2">
                        <p id="section-toc.1-1.2.2.3.2.1.2.2.1"><a href="#section-2.3.1.2" class="xref">2.3.1.2</a>.  <a href="#name-service-description-instruc" class="xref">Service Description Instruction</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1.2.3">
                        <p id="section-toc.1-1.2.2.3.2.1.2.3.1"><a href="#section-2.3.1.3" class="xref">2.3.1.3</a>.  <a href="#name-host-description-instructio" class="xref">Host Description Instruction</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a href="#section-2.3.2" class="xref">2.3.2</a>.  <a href="#name-valid-srp-update-requiremen" class="xref">Valid SRP Update Requirements</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a href="#section-2.3.3" class="xref">2.3.3</a>.  <a href="#name-fcfs-name-and-signature-val" class="xref">FCFS Name And Signature Validation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.4">
                    <p id="section-toc.1-1.2.2.3.2.4.1"><a href="#section-2.3.4" class="xref">2.3.4</a>.  <a href="#name-handling-of-service-subtype" class="xref">Handling of Service Subtypes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.5">
                    <p id="section-toc.1-1.2.2.3.2.5.1"><a href="#section-2.3.5" class="xref">2.3.5</a>.  <a href="#name-srp-update-response" class="xref">SRP Update response</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.6">
                    <p id="section-toc.1-1.2.2.3.2.6.1"><a href="#section-2.3.6" class="xref">2.3.6</a>.  <a href="#name-optional-behavior" class="xref">Optional Behavior</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-ttl-consistency" class="xref">TTL Consistency</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-maintenance" class="xref">Maintenance</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-cleaning-up-stale-data" class="xref">Cleaning up stale data</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-source-validation" class="xref">Source Validation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-srp-server-authentication" class="xref">SRP Server Authentication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-required-signature-algorith" class="xref">Required Signature Algorithm</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-privacy-considerations" class="xref">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-delegation-of-servicearpa" class="xref">Delegation of 'service.arpa.'</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-registration-and-delegation" class="xref">Registration and Delegation of 'service.arpa' as a Special-Use Domain Name</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-dnssd-srp-service-name" class="xref">'dnssd-srp' Service Name</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-dnssd-srp-tls-service-name" class="xref">'dnssd-srp-tls' Service Name</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="xref">8.4</a>.  <a href="#name-anycast-address" class="xref">Anycast Address</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-implementation-status" class="xref">Implementation Status</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-testing-using-standard-rfc2" class="xref">Testing using standard RFC2136-compliant servers</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="xref">Appendix B</a>.  <a href="#name-how-to-allow-services-to-up" class="xref">How to allow services to update standard RFC2136-compliant servers</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="xref">Appendix C</a>.  <a href="#name-sample-bind9-configuration-" class="xref">Sample BIND9 configuration for default.service.arpa.</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">

        <span><a href="#RFC6763" class="xref">DNS-Based Service Discovery</a> [<a href="#RFC6763" class="xref">RFC6763</a>]</span> is a component of Zero Configuration Networking
        <span>[<a href="#RFC6760" class="xref">RFC6760</a>]</span> <span>[<a href="#ZC" class="xref">ZC</a>]</span> <span>[<a href="#I-D.cheshire-dnssd-roadmap" class="xref">I-D.cheshire-dnssd-roadmap</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
        This document describes an enhancement to <span><a href="#RFC6763" class="xref">DNS-Based Service Discovery</a> [<a href="#RFC6763" class="xref">RFC6763</a>]</span> that allows services to
 register their services using the DNS protocol rather than using <span><a href="#RFC6762" class="xref">Multicast DNS</a> [<a href="#RFC6762" class="xref">RFC6762</a>]</span>
        (mDNS).  There is already a large installed base of DNS‑SD clients that can discover services using the DNS protocol.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
        This document is intended for three audiences: implementors of software that provides services that should be advertised
        using DNS‑SD, implementors of DNS servers that will be used in contexts where DNS‑SD registration is needed, and
        administrators of networks where DNS‑SD service is required.  The document is intended to provide sufficient
        information to allow interoperable implementation of the registration protocol.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">
        DNS-Based Service Discovery (DNS‑SD) allows services to advertise the fact that they provide service, and to provide
        the information required to access that service.  DNS‑SD clients can then discover the set of services of a particular
        type that are available.  They can then select a service from among those that are available and obtain the information
        required to use it.  Although DNS-SD using the DNS protocol (as opposed to mDNS) can be more efficient and versatile, it is
        not common in practice, because of the difficulties associated with updating authoritative DNS services with service
        information.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">
 Existing practice for updating DNS zones is to either manually enter new data, or else use DNS Update
 <span>[<a href="#RFC2136" class="xref">RFC2136</a>]</span>. Unfortunately DNS Update requires either that the authoritative DNS server automatically trust
 updates, or else that the DNS Update client have some kind of shared secret or public key that is known to the DNS server
 and can be used to authenticate the update.  Furthermore, DNS Update can be a fairly chatty process, requiring multiple
 round trips with different conditional predicates to complete the update process.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">
 The SRP protocol adds a set of default heuristics for processing DNS updates that eliminates the need for DNS update
 conditional predicates: instead, the SRP server has a set of default predicates that are applied to the update, and the
 update either succeeds entirely, or fails in a way that allows the registering service to know what went wrong and construct
 a new update.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">
 SRP also adds a feature called First-Come, First-Served Naming, which allows the registering service to claim a name that is
 not yet in use, and, using SIG(0) <span>[<a href="#RFC2931" class="xref">RFC2931</a>]</span>, to authenticate both the initial claim and subsequent
 updates. This prevents name conflicts, since a second SRP service attempting to claim the same name will not possess the
 SIG(0) key used by the first service to claim it, and so its claim will be rejected and the second service will have to
 choose a new name.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">
 Finally, SRP adds the concept of a 'lease,' similar to leases in Dynamic Host Configuration Protocol
 <span>[<a href="#RFC8415" class="xref">RFC8415</a>]</span>.  The SRP registration itself has a lease which may be on the order of an hour; if the registering
 service does not renew the lease before it has elapsed, the registration is removed.  The claim on the name can have a longer
 lease, so that another service cannot claim the name, even though the registration has expired.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">
        The Service Registration Protocol for DNS‑SD (SRP), described in this document, provides a reasonably secure mechanism
        for publishing this information.  Once published, these services can be readily discovered by DNS‑SD clients using
        standard DNS lookups.<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10">
        The <span>DNS‑SD specification [<a href="#RFC6763" class="xref">RFC6763</a>], <a href="https://rfc-editor.org/rfc/rfc6763#section-10" class="relref">Section 10</a></span> ("Populating the DNS with
        Information"), briefly discusses ways that services can publish their information in the DNS namespace.  In the case of
        mDNS, it allows services to publish their information on the local link, using names in the ".local" namespace, which makes
        their services directly discoverable by peers attached to that same local link.<a href="#section-1-10" class="pilcrow">¶</a></p>
<p id="section-1-11">
        RFC6763 also allows clients to discover services using <span><a href="#RFC1035" class="xref">the DNS protocol</a> [<a href="#RFC1035" class="xref">RFC1035</a>]</span>.  This can be done by
        having a system administrator manually configure service information in the DNS, but manually populating DNS authoritative
        server databases is costly and potentially error-prone, and requires a knowledgable network administrator.  Consequently,
        although all DNS‑SD client implementations of which we are aware support DNS‑SD using DNS queries, in practice it
        is used much less frequently than mDNS.<a href="#section-1-11" class="pilcrow">¶</a></p>
<p id="section-1-12">
        The <span><a href="#RFC8766" class="xref">Discovery Proxy</a> [<a href="#RFC8766" class="xref">RFC8766</a>]</span> provides one way to automatically populate the DNS
        namespace, but is only appropriate on networks where services are easily advertised using mDNS.  This document describes a
        solution more suitable for networks where multicast is inefficient, or where sleepy devices are common, by supporting both
        offering of services, and discovery of services, using unicast.<a href="#section-1-12" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-service-registration-protoc">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-service-registration-protoc" class="section-name selfRef">Service Registration Protocol</a>
      </h2>
<p id="section-2-1">
        Services that implement SRP use DNS Update <span>[<a href="#RFC2136" class="xref">RFC2136</a>]</span> <span>[<a href="#RFC3007" class="xref">RFC3007</a>]</span> to publish service information
        in the DNS.  Two variants exist, one for full-featured hosts, and one for devices designed for "Constrained-Node Networks"
        <span>[<a href="#RFC7228" class="xref">RFC7228</a>]</span>. An SRP server is most likely an authoritative DNS server, or else is updating an authoritative
 DNS server. There is no requirement that the server that is receiving SRP requests be the same server that is answering
 queries that return records that have been registered.<a href="#section-2-1" class="pilcrow">¶</a></p>
<section id="section-2.1">
        <h3 id="name-protocol-variants">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-protocol-variants" class="section-name selfRef">Protocol Variants</a>
        </h3>
<section id="section-2.1.1">
          <h4 id="name-full-featured-hosts">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-full-featured-hosts" class="section-name selfRef">Full-featured Hosts</a>
          </h4>
<p id="section-2.1.1-1">
            Full-featured hosts are either configured manually with a registration domain, or use the
            "dr._dns‑sd._udp.&lt;domain&gt;" query (<span>[<a href="#RFC6763" class="xref">RFC6763</a>], <a href="https://rfc-editor.org/rfc/rfc6763#section-11" class="relref">Section 11</a></span>) to learn the default
     registration domain
            from the network.  RFC6763 says to discover the registration domain using either ".local" or a network-supplied domain name
            for &lt;domain&gt;.  Services using SRP MUST use the domain name received through the DHCPv4 Domain Name option
            (<span>[<a href="#RFC2132" class="xref">RFC2132</a>], <a href="https://rfc-editor.org/rfc/rfc2132#section-3.17" class="relref">Section 3.17</a></span>), if available, or the Neighbor Discovery DNS Search List option
            <span>[<a href="#RFC8106" class="xref">RFC8106</a>]</span>.  If the DNS Search List option contains more than one domain name, it MUST NOT be used.  If
            neither option is available, the Service Registration protocol is not available on the local network.<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1.1-2">
            Manual configuration of the registration domain can be done either by querying the list of available registration zones
            ("r._dns‑sd._udp") and allowing the user to select one from the UI, or by any other means appropriate to the particular
            use case being addressed.  Full-featured devices construct the names of the SRV, TXT, and PTR records describing their
            service(s) as subdomains of the chosen service registration domain.  For these names they then discover the zone apex of the
            closest enclosing DNS zone using SOA queries <span>[<a href="#RFC8765" class="xref">RFC8765</a>]</span>.  Having discovered the enclosing DNS
            zone, they query for the "_dnssd‑srp._tcp.&lt;zone&gt;" SRV record to discover the server to which they should send DNS
            updates.  Hosts that support SRP updates using TLS use the "_dnssd‑srp‑tls._tcp.&lt;zone&gt;" SRV record
            instead.<a href="#section-2.1.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.2">
          <h4 id="name-constrained-hosts">
<a href="#section-2.1.2" class="section-number selfRef">2.1.2. </a><a href="#name-constrained-hosts" class="section-name selfRef">Constrained Hosts</a>
          </h4>
<p id="section-2.1.2-1">
            For devices designed for Constrained-Node Networks <span>[<a href="#RFC7228" class="xref">RFC7228</a>]</span> some simplifications are available.  Instead of
            being configured with (or discovering) the service registration domain, the (proposed) special-use domain name (see
            <span>[<a href="#RFC6761" class="xref">RFC6761</a>]</span>) "default.service.arpa" is used.  The details of how SRP server(s) are discovered will be specific
            to the constrained network, and therefore we do not suggest a specific mechanism here.<a href="#section-2.1.2-1" class="pilcrow">¶</a></p>
<p id="section-2.1.2-2">
            SRP clients on constrained networks are expected to receive from the network a list of SRP servers with which to register.
            It is the responsibility of a Constrained-Node Network supporting SRP to provide one or more SRP server addresses.  It is
            the responsibility of the SRP server supporting a Constrained-Node Network to handle the updates appropriately.  In some
            network environments, updates may be accepted directly into a local "default.service.arpa" zone, which has only local
            visibility.  In other network environments, updates for names ending in "default.service.arpa" may be rewritten internally
            to names with broader visibility.<a href="#section-2.1.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.1.3">
          <h4 id="name-why-two-variants">
<a href="#section-2.1.3" class="section-number selfRef">2.1.3. </a><a href="#name-why-two-variants" class="section-name selfRef">Why two variants?</a>
          </h4>
<p id="section-2.1.3-1">
            The reason for these different assumptions is that low-power devices that typically use Constrained-Node Networks may have
            very limited battery power.  The series of DNS lookups required to discover an SRP server and then communicate with it will
            increase the power required to advertise a service; for low-power devices, the additional flexibility this provides does not
            justify the additional use of power.  It is also fairly typical of such networks that some network service information is
            obtained as part of the process of joining the network, and so this can be relied upon to provide nodes with the information
            they need.<a href="#section-2.1.3-1" class="pilcrow">¶</a></p>
<p id="section-2.1.3-2">
            Networks that are not constrained networks can have more complicated topologies at the Internet layer. Nodes connected
            to such networks can be assumed to be able to do DNSSD service registration domain discovery. Such networks are
            generally able to provide registration domain discovery and routing.  By requiring the use of TCP, the possibility of
            off-network spoofing is eliminated.<a href="#section-2.1.3-2" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.2">
        <h3 id="name-protocol-details">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-protocol-details" class="section-name selfRef">Protocol Details</a>
        </h3>
<p id="section-2.2-1">
          We will discuss several parts to this process: how to know what to publish, how to know where to publish it (under what
          name), how to publish it, how to secure its publication, and how to maintain the information once published.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<section id="section-2.2.1">
          <h4 id="name-what-to-publish">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-what-to-publish" class="section-name selfRef">What to publish</a>
          </h4>
<p id="section-2.2.1-1">
            We refer to the DNS Update message sent by services using SRP as an SRP update.  Three types of updates appear in an SRP
            update: Service Discovery records, Service Description records, and Host Description records.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2.1-2.1">
              Service Discovery records are one or more PTR RRs, mapping from the generic service type (or subtype) to the specific
              Service Instance Name.<a href="#section-2.2.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-2.2.1-2.2">
              Service Description records are exactly one SRV RR, exactly one KEY RR, and one or more TXT RRs, all with the same name,
              the Service Instance Name (<span>[<a href="#RFC6763" class="xref">RFC6763</a>], <a href="https://rfc-editor.org/rfc/rfc6763#section-4.1" class="relref">Section 4.1</a></span>).  In principle Service
              Description records can include other record types, with the same Service Instance Name, though in practice they rarely
              do.  The Service Instance Name MUST be referenced by one or more Service Discovery PTR records, unless it is a
              placeholder service registration for an intentionally non-discoverable service name.<a href="#section-2.2.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-2.2.1-2.3">
              The Host Description records for a service are a KEY RR, used to claim exclusive ownership of the service
              registration, and one or more RRs of type A or AAAA, giving the IPv4 or IPv6 address(es) of the host where the service
              resides.<a href="#section-2.2.1-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.2.1-3">
            RFC 6763 describes the details of what each of these types of updates contains and is the definitive source for
            information about what to publish; the reason for summarizing this here is to provide the reader with enough information
            about what will be published that the service registration process can be understood at a high level without first
            learning the full details of DNS‑SD.  Also, the "Service Instance Name" is an important aspect of first-come,
            first-serve naming, which we describe later on in this document.<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.2">
          <h4 id="name-where-to-publish-it">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-where-to-publish-it" class="section-name selfRef">Where to publish it</a>
          </h4>
<p id="section-2.2.2-1">
            Multicast DNS uses a single namespace, ".local", which is valid on the local link.  This convenience is not available for
            DNS‑SD using the DNS protocol: services must exist in some specific unicast namespace.<a href="#section-2.2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2-2">
            As described above, full-featured devices are responsible for knowing in what domain they should register their services.
            Devices made for Constrained-Node Networks register in the (proposed) special use domain name <span>[<a href="#RFC6761" class="xref">RFC6761</a>]</span>
            "default.service.arpa", and let the SRP server handle rewriting that to a different domain if necessary.<a href="#section-2.2.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.3">
          <h4 id="name-how-to-publish-it">
<a href="#section-2.2.3" class="section-number selfRef">2.2.3. </a><a href="#name-how-to-publish-it" class="section-name selfRef">How to publish it</a>
          </h4>
<p id="section-2.2.3-1">
            It is possible to issue a DNS Update that does several things at once; this means that it's possible to do all the work of
            adding a PTR resource record to the PTR RRset on the Service Name, and creating or updating the Service Instance Name and
            Host Description, in a single transaction.<a href="#section-2.2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.2.3-2">
            An SRP update takes advantage of this: it is implemented as a single DNS Update message that contains a service's Service
            Discovery records, Service Description records, and Host Description records.<a href="#section-2.2.3-2" class="pilcrow">¶</a></p>
<p id="section-2.2.3-3">
            Updates done according to this specification are somewhat different than regular DNS Updates as defined in RFC2136.  The
            RFC2136 update process can involve many update attempts: you might first attempt to add a name if it doesn't exist; if
            that fails, then in a second message you might update the name if it does exist but matches certain preconditions.
            Because the registration protocol uses a single transaction, some of this adaptability is lost.<a href="#section-2.2.3-3" class="pilcrow">¶</a></p>
<p id="section-2.2.3-4">
            In order to allow updates to happen in a single transaction, SRP updates do not include update prerequisites.  The
            requirements specified in <a href="#server_behavior" class="xref">Section 2.3</a> are implicit in the processing of SRP updates, and so there is
            no need for the service sending the SRP update to put in any explicit prerequisites.<a href="#section-2.2.3-4" class="pilcrow">¶</a></p>
<section id="section-2.2.3.1">
            <h5 id="name-how-dnssd-service-registrat">
<a href="#section-2.2.3.1" class="section-number selfRef">2.2.3.1. </a><a href="#name-how-dnssd-service-registrat" class="section-name selfRef">How DNS‑SD Service Registration differs from standard RFC2136 DNS Update</a>
            </h5>
<p id="section-2.2.3.1-1">
              DNS‑SD Service Registration is based on standard RFC2136 DNS Update, with some differences:<a href="#section-2.2.3.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.2.3.1-2.1">
 It implements first-come first-served name allocation, protected using SIG(0) <span>[<a href="#RFC2931" class="xref">RFC2931</a>]</span>.<a href="#section-2.2.3.1-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.2.3.1-2.2">
 It enforces policy about what updates are allowed.<a href="#section-2.2.3.1-2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.2.3.1-2.3">
 It optionally performs rewriting of "default.service.arpa" to some other domain.<a href="#section-2.2.3.1-2.3" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.2.3.1-2.4">
 It optionally performs automatic population of the address-to-name reverse mapping domains.<a href="#section-2.2.3.1-2.4" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.2.3.1-2.5">
 An SRP server is not required to implement general DNS Update prerequisite processing.<a href="#section-2.2.3.1-2.5" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.2.3.1-2.6">
 SRP clients are allowed to send updates to the generic domain "default.service.arpa"<a href="#section-2.2.3.1-2.6" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</section>
<section id="section-2.2.4">
          <h4 id="name-how-to-secure-it">
<a href="#section-2.2.4" class="section-number selfRef">2.2.4. </a><a href="#name-how-to-secure-it" class="section-name selfRef">How to secure it</a>
          </h4>
<p id="section-2.2.4-1">
            Traditional DNS update is secured using the TSIG protocol, which uses a secret key
            shared between the DNS Update client (which issues the update) and the server (which authenticates
            it).  This model does not work for automatic service registration.<a href="#section-2.2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.2.4-2">
            The goal of securing the DNS‑SD Registration Protocol is to provide the best possible security given the constraint
            that service registration has to be automatic.  It is possible to layer more operational security on top of what we
            describe here, but what we describe here is an improvement over the security of mDNS.  The goal is not to provide the
            level of security of a network managed by a skilled operator.<a href="#section-2.2.4-2" class="pilcrow">¶</a></p>
<div id="fcfs">
<section id="section-2.2.4.1">
            <h5 id="name-first-come-first-served-nam">
<a href="#section-2.2.4.1" class="section-number selfRef">2.2.4.1. </a><a href="#name-first-come-first-served-nam" class="section-name selfRef">First-Come First-Served Naming</a>
            </h5>
<p id="section-2.2.4.1-1">
              First-Come First-Serve naming provides a limited degree of security: a service that registers its service using
              DNS‑SD Registration protocol is given ownership of a name for an extended period of time based on the key used to
              authenticate the DNS Update.  As long as the registration service remembers the name and the key used to register that
              name, no other service can add or update the information associated with that.  FCFS naming is used to protect both the
              Service Description and the Host Description.<a href="#section-2.2.4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-2.2.5">
          <h4 id="name-service-behavior">
<a href="#section-2.2.5" class="section-number selfRef">2.2.5. </a><a href="#name-service-behavior" class="section-name selfRef">Service Behavior</a>
          </h4>
<section id="section-2.2.5.1">
            <h5 id="name-public-private-key-pair-gen">
<a href="#section-2.2.5.1" class="section-number selfRef">2.2.5.1. </a><a href="#name-public-private-key-pair-gen" class="section-name selfRef">Public/Private key pair generation and storage</a>
            </h5>
<p id="section-2.2.5.1-1">
       The service generates a public/private key pair.  This key pair MUST be stored in stable storage; if there is no
       writable stable storage on the SRP client, the SRP client MUST be pre-configured with a public/private key pair in
       read-only storage that can be used.  This key pair MUST be unique to the device.  This key pair MUST be unique to the
       device. A device with rewritable storage should retain this key indefinitely.  When the device changes ownership, it
       may be appropriate to erase the old key and install a new one. Therefore, the SRP client on the device SHOULD provide
       a mechanism to overwrite the key, for example as the result of a "factory reset."<a href="#section-2.2.5.1-1" class="pilcrow">¶</a></p>
<p id="section-2.2.5.1-2">
       When sending DNS updates, the service includes a KEY record containing the public portion of the key in each Host
       Description update and each Service Description update.  Each KEY record MUST contain the same public key.  The update
       is signed using SIG(0), using the private key that corresponds to the public key in the KEY record.  The lifetimes of
       the records in the update is set using the EDNS(0) Update Lease option <span>[<a href="#I-D.sekar-dns-ul" class="xref">I-D.sekar-dns-ul</a>]</span>.<a href="#section-2.2.5.1-2" class="pilcrow">¶</a></p>
<p id="section-2.2.5.1-3">
       The KEY record in Service Description updates MAY be omitted for brevity; if it is omitted, the SRP server MUST behave
       as if the same KEY record that is given for the Host Description is also given for each Service Description for which
       no KEY record is provided.  Omitted KEY records are not used when computing the SIG(0) signature.<a href="#section-2.2.5.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.5.2">
            <h5 id="name-name-conflict-handling">
<a href="#section-2.2.5.2" class="section-number selfRef">2.2.5.2. </a><a href="#name-name-conflict-handling" class="section-name selfRef">Name Conflict Handling</a>
            </h5>
<p id="section-2.2.5.2-1">
       Both Host Description records and Service Description Records can have names that result in name conflicts.
       Service Discovery records cannot have name conflicts. If any Host Description or Service Description record
       is found by the server to have a conflict with an existing name, the server will respond to the SRP Update
       with a YXDOMAIN rcode. In this case, the Service MUST either abandon the service registration attempt, or
       else choose a new name.<a href="#section-2.2.5.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2.5.2-2">
       There is no specific requirement for how this is done; typically, however, the service will append a number to the
       preferred name. This number could be sequentially increasing, or could be chosen randomly. One existing
       implementation attempts several sequential numbers before choosing randomly. So for instance, it might try
       host.service.arpa, then host-1.service.arpa, then host-2.service.arpa, then host-31773.service.arpa.<a href="#section-2.2.5.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.5.3">
            <h5 id="name-record-lifetimes">
<a href="#section-2.2.5.3" class="section-number selfRef">2.2.5.3. </a><a href="#name-record-lifetimes" class="section-name selfRef">Record Lifetimes</a>
            </h5>
<p id="section-2.2.5.3-1">
       The lifetime of the <span><a href="#RFC6763" class="xref">DNS‑SD PTR, SRV, A, AAAA and TXT records</a> [<a href="#RFC6763" class="xref">RFC6763</a>]</span> uses the LEASE field
       of the Update Lease option, and is typically set to two hours.  This means that if a device is disconnected from the
       network, it does not appear in the user interfaces of devices looking for services of that type for too long.<a href="#section-2.2.5.3-1" class="pilcrow">¶</a></p>
<p id="section-2.2.5.3-2">
       The lifetime of the KEY records is set using the KEY-LEASE field of the Update Lease Option, and should be set to a
       much longer time, typically 14 days.  The result of this is that even though a device may be temporarily unplugged,
       disappearing from the network for a few days, it makes a claim on its name that lasts much longer.<a href="#section-2.2.5.3-2" class="pilcrow">¶</a></p>
<p id="section-2.2.5.3-3">
       This means that even if a device is unplugged from the network for a few days, and its services are not available for
       that time, no other device can come along and claim its name the moment it disappears from the network.  In the event
       that a device is unplugged from the network and permanently discarded, then its name is eventually cleaned up and made
       available for re-use.<a href="#section-2.2.5.3-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2.5.4">
            <h5 id="name-compression-in-srv-records">
<a href="#section-2.2.5.4" class="section-number selfRef">2.2.5.4. </a><a href="#name-compression-in-srv-records" class="section-name selfRef">Compression in SRV records</a>
            </h5>
<p id="section-2.2.5.4-1">
       Although <span>[<a href="#RFC2782" class="xref">RFC2782</a>]</span> requires that the target name in the SRV record not be compressed, an SRP client
       SHOULD compress the target in the SRV record. The motivation for <em>not</em> compressing in RFC2782 is not stated,
       but is assumed to be because a caching resolver that does not understand the format of the SRV record might store it
       as binary data and thus return an invalid pointer in response to a query. This does not apply in the case of SRP: an
       SRP server needs to understand SRV records in order to validate the SRP update. Compression of the target potentially
       saves substantial space in the SRP update.<a href="#section-2.2.5.4-1" class="pilcrow">¶</a></p>
</section>
<div id="remove">
<section id="section-2.2.5.5">
            <h5 id="name-removing-published-services">
<a href="#section-2.2.5.5" class="section-number selfRef">2.2.5.5. </a><a href="#name-removing-published-services" class="section-name selfRef">Removing published services</a>
            </h5>
<div id="zero-lease">
<section id="section-2.2.5.5.1">
              <h6 id="name-removing-all-published-serv">
<a href="#section-2.2.5.5.1" class="section-number selfRef">2.2.5.5.1. </a><a href="#name-removing-all-published-serv" class="section-name selfRef">Removing all published services</a>
              </h6>
<p id="section-2.2.5.5.1-1">
 To remove all the services registered to a particular host, the SRP client retransmits its most recent update with an
 Update Lease option that has a LEASE value of zero. If the registration is to be permanently removed, KEY-LEASE should
 also be zero. Otherwise, it should have the same value it had previously; this holds the name in reserve for when the
 SRP client is once again able to provide the service.<a href="#section-2.2.5.5.1-1" class="pilcrow">¶</a></p>
<p id="section-2.2.5.5.1-2">
 SRP clients are normally expected to remove all service instances when removing a host.  However, in some cases a SRP
 client may not have retained sufficient state to know that some service instance is pointing to a host that it is
 removing.  This method of removing services is intended for the case where the client is going offline and does
 not want its services advertised. Therefore, it is sufficient for the client to send the
 <span><a href="#hdi" class="xref">Host Description Instruction</a> (<a href="#hdi" class="xref">Section 2.3.1.3</a>)</span>.<a href="#section-2.2.5.5.1-2" class="pilcrow">¶</a></p>
<p id="section-2.2.5.5.1-3">
 To support this, when removing services based on the lease time being zero, an SRP server MUST remove all service
 instances pointing to a host when a host is removed, even if the SRP client doesn't list them explicitly. If the
 key lease time is nonzero, the SRP server MUST NOT delete the KEY records for these SRP clients.<a href="#section-2.2.5.5.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2.2.5.5.2">
              <h6 id="name-removing-some-published-ser">
<a href="#section-2.2.5.5.2" class="section-number selfRef">2.2.5.5.2. </a><a href="#name-removing-some-published-ser" class="section-name selfRef">Removing some published services</a>
              </h6>
<p id="section-2.2.5.5.2-1">
 In some use cases a client may need to remove some specific service, without removing its other services.  This can
 be accomplished in one of two ways. To simply remove a specific service, the client sends a valid SRP update where
 the <span><a href="#servdis" class="xref">Service Discovery instruction</a> (<a href="#servdis" class="xref">Section 2.3.1.1</a>)</span> contains a single Delete an RR from an RRset
 (<span>[<a href="#RFC2136" class="xref">RFC2136</a>], <a href="https://rfc-editor.org/rfc/rfc2136#section-2.5.4" class="relref">Section 2.5.4</a></span>) update that deletes the PTR record whose target is
 the service instance name. The <span><a href="#servdesc" class="xref">Service Description instruction</a> (<a href="#servdesc" class="xref">Section 2.3.1.2</a>)</span> in this case contains
 a single Delete all RRsets from a Name (<span>[<a href="#RFC2136" class="xref">RFC2136</a>], <a href="https://rfc-editor.org/rfc/rfc2136#section-2.5.3" class="relref">Section 2.5.3</a></span>) update to
 the service instance name.<a href="#section-2.2.5.5.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2.5.5.2-2">
 The second alternative is used when some service is being replaced by a different service with a different service
 instance name. In this case, the old service is deleted as in the first alternative. The new service is added, just
 as it would be in an update that wasn't deleting the old service. Because both the removal of the old service and
 the add of the new service consist of a valid Service Discovery instruction and a valid Service Description
 instruction, the update as a whole is a valid SRP update, and will result in the old service being removed and the
 new one added, or, to put it differently, in the old service being replaced by the new service.<a href="#section-2.2.5.5.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2.5.5.2-3">
 It is perhaps worth noting that if a service is being updated without the service instance name changing, that will
 look very much like the second alternative above. The difference is that because the target for the PTR record in
 the Service Discovery instruction is the same for both the Delete An RR From An RRset update and the Add To An
 RRSet update, these will be seen as a single Service Description instruction, not as two instructions. The same
 would be true of the Service Description instruction.<a href="#section-2.2.5.5.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2.5.5.2-4">
 Whichever of these two alternatives is used, the host lease will be updated with the lease time provided in the SRP
 update. In neither of these cases is it permissible to delete the host. All services must point to a host. If a host
 is to be deleted, this must be done using the method described in <a href="#zero-lease" class="xref">Section 2.2.5.5.1</a>, which deletes the
 host and all services that have that host as their target.<a href="#section-2.2.5.5.2-4" class="pilcrow">¶</a></p>
</section>
</section>
</div>
</section>
</section>
<div id="server_behavior">
<section id="section-2.3">
        <h3 id="name-srp-server-behavior">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-srp-server-behavior" class="section-name selfRef">SRP Server Behavior</a>
        </h3>
<div id="add_validation">
<section id="section-2.3.1">
          <h4 id="name-validation-of-adds-and-dele">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-validation-of-adds-and-dele" class="section-name selfRef">Validation of Adds and Deletes</a>
          </h4>
<p id="section-2.3.1-1">
     The SRP server first validates that the DNS Update is a syntactically and semantically valid DNS Update according to
     the rules specified in RFC2136.<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
<p id="section-2.3.1-2">
     SRP Updates consist of a set of <em>instructions</em> that together add or remove one or more services. Each instruction
     consists some combination of delete updates and add updates. When an instruction contains a delete and an add, the
     delete MUST precede the add.<a href="#section-2.3.1-2" class="pilcrow">¶</a></p>
<p id="section-2.3.1-3">
     The SRP server checks each instruction in the SRP update to see that it is either a Service Discovery update, a
     Service Description update, or a Host Description update.  Order matters in DNS updates.  Specifically, deletes must
     precede adds for records that the deletes would affect; otherwise the add will have no effect.  This is the only
     ordering constraint; aside from this constraint, updates may appear in whatever order is convenient when constructing
     the update.<a href="#section-2.3.1-3" class="pilcrow">¶</a></p>
<p id="section-2.3.1-4">
     Because the SRP update is a DNS update, it MUST contain a single question that indicates the zone to be updated.
     Every delete and update in an SRP update MUST be within the zone that is specified for the SRP Update.<a href="#section-2.3.1-4" class="pilcrow">¶</a></p>
<div id="servdis">
<section id="section-2.3.1.1">
            <h5 id="name-service-discovery-instructi">
<a href="#section-2.3.1.1" class="section-number selfRef">2.3.1.1. </a><a href="#name-service-discovery-instructi" class="section-name selfRef">Service Discovery Instruction</a>
            </h5>
<p id="section-2.3.1.1-1">An instruction is a Service Discovery Instruction if it contains<a href="#section-2.3.1.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.3.1.1-2.1">exactly one "Add to an RRSet" or exactly one "Delete an RR from an RRSet"
 (<span>[<a href="#RFC2136" class="xref">RFC2136</a>], <a href="https://rfc-editor.org/rfc/rfc2136#section-2.5.1" class="relref">Section 2.5.1</a></span>) RR update,<a href="#section-2.3.1.1-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.1-2.2">which updates a PTR RR,<a href="#section-2.3.1.1-2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.1-2.3">the target of which is a Service Instance Name<a href="#section-2.3.1.1-2.3" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.1-2.4">for which name a Service Description Instruction is present in the SRP Update<a href="#section-2.3.1.1-2.4" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.1-2.5">if the Service Discovery Instruction is an "Add to an RRSet" instruction, the Service Description Instruction does
 not match if it does not contain an "Add to an RRset" update for the SRV RR describing that service.<a href="#section-2.3.1.1-2.5" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.1-2.6">if the Service Discovery Instruction is a "Delete an RR from an RRSet" update, the Service Description
 Instruction does not match if it contains an "Add to an RRset" update.<a href="#section-2.3.1.1-2.6" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.1-2.7">Service Discovery Instructions do not contain any other add or delete updates.<a href="#section-2.3.1.1-2.7" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
<div id="servdesc">
<section id="section-2.3.1.2">
            <h5 id="name-service-description-instruc">
<a href="#section-2.3.1.2" class="section-number selfRef">2.3.1.2. </a><a href="#name-service-description-instruc" class="section-name selfRef">Service Description Instruction</a>
            </h5>
<p id="section-2.3.1.2-1">An instruction is a Service Description Instruction if, for the appropriate Service Instance Name, it contains<a href="#section-2.3.1.2-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.3.1.2-2.1">
 exactly one "Delete all RRsets from a name" update for the service instance name
 (<span>[<a href="#RFC2136" class="xref">RFC2136</a>], <a href="https://rfc-editor.org/rfc/rfc2136#section-2.5.3" class="relref">Section 2.5.3</a></span>),<a href="#section-2.3.1.2-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.2">
 zero or one "Add to an RRset" SRV RR,<a href="#section-2.3.1.2-2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.3">
 zero or one "Add to an RRset" KEY RR that, if present, contains the public key corresponding to the private key
 that was used to sign the message (if present, the KEY MUST match the KEY RR given in the Host Description),<a href="#section-2.3.1.2-2.3" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.4">
 zero or more "Add to an RRset" TXT RRs,<a href="#section-2.3.1.2-2.4" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.5">
 If there is one "Add to an RRset" SRV update, there MUST be at least one "Add to an RRset" TXT update.<a href="#section-2.3.1.2-2.5" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.6">
 the target of the SRV RR Add, if present points to a hostname for which there is a Host Description Instruction in
 the SRP Update, or<a href="#section-2.3.1.2-2.6" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.7">
 if there is no "Add to an RRset" SRV RR, then either<a href="#section-2.3.1.2-2.7" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.2-2.8">
                <ul class="compact normal">
<li class="compact normal" id="section-2.3.1.2-2.8.1.1">the name to which the "Delete all RRsets from a name" applies does not exist, or<a href="#section-2.3.1.2-2.8.1.1" class="pilcrow">¶</a>
</li>
                  <li class="compact normal" id="section-2.3.1.2-2.8.1.2">there is an existing KEY RR on that name, which matches the key with which the SRP Update was
   signed.<a href="#section-2.3.1.2-2.8.1.2" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="compact" id="section-2.3.1.2-2.9">
 Service Descriptions Instructions do not modify any other RRs.<a href="#section-2.3.1.2-2.9" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-2.3.1.2-3">An SRP server MUST correctly handle compressed names in the SRV target.<a href="#section-2.3.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="hdi">
<section id="section-2.3.1.3">
            <h5 id="name-host-description-instructio">
<a href="#section-2.3.1.3" class="section-number selfRef">2.3.1.3. </a><a href="#name-host-description-instructio" class="section-name selfRef">Host Description Instruction</a>
            </h5>
<p id="section-2.3.1.3-1">An instruction is a Host Description Instruction if, for the appropriate hostname, it contains<a href="#section-2.3.1.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2.3.1.3-2.1">
 exactly one "Delete all RRsets from a name" RR,<a href="#section-2.3.1.3-2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.3-2.2">
 one or more "Add to an RRset" RRs of type A and/or AAAA,<a href="#section-2.3.1.3-2.2" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.3-2.3">
 A and/or AAAA records must be of sufficient scope to be reachable by all hosts that
 might query the DNS. If a link-scope address or IPv4 autoconfiguration address is provided
 by the SRP client, the SRP server MUST treat this as if no address records were received;
 that is, the Host Description is not valid.<a href="#section-2.3.1.3-2.3" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.3-2.4">
 exactly one "Add to an RRset" RR that adds a KEY RR that contains the public key corresponding to the private key
 that was used to sign the message,<a href="#section-2.3.1.3-2.4" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.3-2.5">
 there is a Service Instance Name Instruction in the SRP update for which the SRV RR that is added points to the
 hostname being updated by this update.<a href="#section-2.3.1.3-2.5" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-2.3.1.3-2.6">
 Host Description updates do not modify any other records.<a href="#section-2.3.1.3-2.6" class="pilcrow">¶</a>
</li>
            </ul>
</section>
</div>
</section>
</div>
<section id="section-2.3.2">
          <h4 id="name-valid-srp-update-requiremen">
<a href="#section-2.3.2" class="section-number selfRef">2.3.2. </a><a href="#name-valid-srp-update-requiremen" class="section-name selfRef">Valid SRP Update Requirements</a>
          </h4>
<p id="section-2.3.2-1">
     An SRP Update MUST include zero or more Service Discovery instructions. For each Service Discovery instruction, there
     MUST be at least one Service Description instruction. Note that in the case of SRP subtypes (<span><a href="https://rfc-editor.org/rfc/rfc6763#section-7.1" class="relref">Section 7.1</a> of [<a href="#RFC6763" class="xref">RFC6763</a>]</span>), it's quite possible that two Service Discovery instructions might reference the same Service
     Description instruction. For each Service Description instruction there MUST be at least one Service Discovery
     instruction with its service instance name as the target of its PTR record. There MUST be exactly one Host Description
     Instruction.  Every Service Description instruction must have that Host Description instruction as the target of its SRV
     record. A DNS Update that does not meet these constraints is not an SRP update.<a href="#section-2.3.2-1" class="pilcrow">¶</a></p>
<p id="section-2.3.2-2">
     A DNS Update that contains any additional adds or deletes that cannot be identified as Service Discovery, Service
     Description or Host Description instructions is not an SRP update. A DNS update that contains any prerequisites is not
     an SRP update.  Such messages should either be processed as regular RFC2136 updates, including access control checks and
     constraint checks, if supported, or else rejected with RCODE=REFUSED.<a href="#section-2.3.2-2" class="pilcrow">¶</a></p>
<p id="section-2.3.2-3">
     In addition, in order for an update to be a valid SRP update, the target of every Service Discovery Instruction MUST be
     a Service Description Instruction that is present in the SRP Update. There MUST NOT be any Service Description
     Instruction to which no Service Discovery Instruction points. The target of the SRV record in every Service Description
     instruction MUST be the single Host Description Instruction.<a href="#section-2.3.2-3" class="pilcrow">¶</a></p>
<p id="section-2.3.2-4">
     If the definitions of each of these instructions are followed carefully and the update requirements are validated
     correctly, many DNS Updates that look very much like SRP updates nevertheless will fail to validate.  For example, a DNS
     update that contains an RRset Add to a Service Name and an RRset Add to a Service Instance Name, where the Service Name
     does not reference the Service Instance Name, is not a valid SRP update message, but may be a valid RFC2136 update.<a href="#section-2.3.2-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.3">
          <h4 id="name-fcfs-name-and-signature-val">
<a href="#section-2.3.3" class="section-number selfRef">2.3.3. </a><a href="#name-fcfs-name-and-signature-val" class="section-name selfRef">FCFS Name And Signature Validation</a>
          </h4>
<p id="section-2.3.3-1">
     Assuming that a DNS Update message has been validated with these conditions and is a valid SRP Update, the server
     checks that the name in the Host Description Instruction exists.  If so, then the server checks to see if the KEY
     record on that name is the same as the KEY record in the Host Description Instruction.  The server performs the same
     check for the KEY records in any Service Description Instructions.  For KEY records that were omitted from Service
     Description Instructions, the KEY from the Host Description Instruction is used.  If any existing KEY record
     corresponding to a KEY record in the SRP Update does not match the KEY same record in the SRP Update (whether provided
     or taken from the Host Description Instruction), then the server MUST reject the SRP Update with the YXDOMAIN
     RCODE.<a href="#section-2.3.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3.3-2">
     Otherwise, the server validates the SRP Update using SIG(0) on the public key in the KEY record of the Host
     Description update.  If the validation fails, the server MUST reject the SRP Update with the REFUSED RCODE.
     Otherwise, the SRP update is considered valid and authentic, and is processed according to the method described in
     RFC2136.<a href="#section-2.3.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3.3-3">
     KEY record updates omitted from Service Description update are processed as if they had been explicitly present: every
     Service Description that is updated MUST, after the update, have a KEY RR, and it must be the same KEY RR that is
     present in the Host Description to which the Service Description refers.<a href="#section-2.3.3-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.4">
          <h4 id="name-handling-of-service-subtype">
<a href="#section-2.3.4" class="section-number selfRef">2.3.4. </a><a href="#name-handling-of-service-subtype" class="section-name selfRef">Handling of Service Subtypes</a>
          </h4>
<p id="section-2.3.4-1">
     SRP servers MUST treat the update instructions for a service type and all its subtypes as atomic. That is, when a
     service and its subtypes are being updated, whatever information appears in the SRP update is the entirety of
     information about that service and its subtypes. If any subtype appeared in a previous update but does not appear in
     the current update, then the DNS server MUST remove that subtype.<a href="#section-2.3.4-1" class="pilcrow">¶</a></p>
<p id="section-2.3.4-2">
     Similarly, there is no mechanism for deleting subtypes. A delete of a service deletes all of its subtypes. To delete an
     individual subtype, an SRP update must be constructed that contains the service type and all subtypes for that service.<a href="#section-2.3.4-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.5">
          <h4 id="name-srp-update-response">
<a href="#section-2.3.5" class="section-number selfRef">2.3.5. </a><a href="#name-srp-update-response" class="section-name selfRef">SRP Update response</a>
          </h4>
<p id="section-2.3.5-1">
     The status that is returned depends on the result of processing the update, and can be either SUCCESS or SERVFAIL: all
     other possible outcomes should already have been accounted for when applying the constraints that qualify the update
     as an SRP Update.<a href="#section-2.3.5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.6">
          <h4 id="name-optional-behavior">
<a href="#section-2.3.6" class="section-number selfRef">2.3.6. </a><a href="#name-optional-behavior" class="section-name selfRef">Optional Behavior</a>
          </h4>
<p id="section-2.3.6-1">
     The server MAY add a Reverse Mapping that corresponds to the Host Description.  This is not required because the
     Reverse Mapping serves no protocol function, but it may be useful for debugging, e.g. in annotating network packet
     traces or logs.  In order for the server to add a reverse mapping update, it must be authoritative for the zone or
     have credentials to do the update.  The SRP client MAY also do a reverse mapping update if it has credentials to do
     so.<a href="#section-2.3.6-1" class="pilcrow">¶</a></p>
<p id="section-2.3.6-2">
     The server MAY apply additional criteria when accepting updates.  In some networks, it may be possible to do
     out-of-band registration of keys, and only accept updates from pre-registered keys.  In this case, an update for a key
     that has not been registered should be rejected with the REFUSED RCODE.<a href="#section-2.3.6-2" class="pilcrow">¶</a></p>
<p id="section-2.3.6-3">
     There are at least two benefits to doing this rather than simply using normal SIG(0) DNS updates.  First, the same
     registration protocol can be used in both cases, so both use cases can be addressed by the same service
     implementation.  Second, the registration protocol includes maintenance functionality not present with normal DNS
     updates.<a href="#section-2.3.6-3" class="pilcrow">¶</a></p>
<p id="section-2.3.6-4">
     Note that the semantics of using SRP in this way are different than for typical RFC2136 implementations: the KEY used
     to sign the SRP update only allows the SRP client to update records that refer to its Host Description.  RFC2136
     implementations do not normally provide a way to enforce a constraint of this type.<a href="#section-2.3.6-4" class="pilcrow">¶</a></p>
<p id="section-2.3.6-5">
     The server may also have a dictionary of names or name patterns that are not permitted.  If such a list is used,
     updates for Service Instance Names that match entries in the dictionary are rejected with YXDOMAIN.<a href="#section-2.3.6-5" class="pilcrow">¶</a></p>
</section>
</section>
</div>
</section>
<section id="section-3">
      <h2 id="name-ttl-consistency">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-ttl-consistency" class="section-name selfRef">TTL Consistency</a>
      </h2>
<p id="section-3-1">
 All RRs within an RRset are required to have the same TTL
 (<span>Clarifications to the DNS Specification [<a href="#RFC2181" class="xref">RFC2181</a>], <a href="https://rfc-editor.org/rfc/rfc2181#section-5.2" class="relref">Section 5.2</a></span>).
 In order to avoid inconsistencies, SRP places restrictions on TTLs sent by services and requires that SRP servers enforce
 consistency.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">
 Services sending SRP updates MUST use consistent TTLs in all RRs within the SRP update.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">
 SRP update servers MUST check that the TTLs for all RRs within the SRP update are the same.  If they are not, the SRP
 update MUST be rejected with a REFUSED RCODE.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">
 Additionally, when adding RRs to an RRset, for example when processing Service Discovery records, the server MUST use the
 same TTL on all RRs in the RRset.  How this consistency is enforced is up to the implementation.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">
 TTLs sent in SRP updates are advisory: they indicate the SRP client's guess as to what a good TTL would be.  SRP servers may
 override these TTLs.  SRP servers SHOULD ensure that TTLs are reasonable: neither too long nor too short.  The TTL should
 never be longer than the lease time (<a href="#stale" class="xref">Section 4.1</a>).  Shorter TTLs will result in more frequent data refreshes;
 this increases latency on the DNS-SD client side, increases load on any caching resolvers and on the authoritative server,
 and also increases network load, which may be an issue for constrained networks.  Longer TTLs will increase the likelihood
 that data in caches will be stale.  TTL minimums and maximums SHOULD be configurable by the operator of the SRP server.<a href="#section-3-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4">
      <h2 id="name-maintenance">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-maintenance" class="section-name selfRef">Maintenance</a>
      </h2>
<div id="stale">
<section id="section-4.1">
        <h3 id="name-cleaning-up-stale-data">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-cleaning-up-stale-data" class="section-name selfRef">Cleaning up stale data</a>
        </h3>
<p id="section-4.1-1">Because the DNS‑SD registration protocol is automatic, and not managed by humans,
          some additional bookkeeping is required.  When an update is constructed by the SRP client,
          it MUST include an EDNS(0) Update Lease Option <span>[<a href="#I-D.sekar-dns-ul" class="xref">I-D.sekar-dns-ul</a>]</span>.
          The Update Lease Option contains two lease times: the Lease Time and the Key
          Lease Time.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">These leases are promises, similar to <span><a href="#RFC2131" class="xref">DHCP leases</a> [<a href="#RFC2131" class="xref">RFC2131</a>]</span>,
          from the SRP client that it will send a new update for the service registration before the
          lease time expires.  The Lease time is chosen to represent the time after the
          update during which the registered records other than the KEY record should be assumed
          to be valid.  The Key Lease time represents the time after the update during
          which the KEY record should be assumed to be valid.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">The reasoning behind the different lease times is discussed in the section on first-come, first-served naming
          (<a href="#fcfs" class="xref">Section 2.2.4.1</a>).  SRP servers may be configured with limits for these values.  A default limit of two hours for
          the Lease and 14 days for the SIG(0) KEY are currently thought to be good choices.  Constrained devices with limited
          battery that wake infrequently are likely to negotiate longer leases.  SRP clients that are going to continue to use names
          on which they hold leases should update well before the lease ends, in case the registration service is unavailable or
          under heavy load.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">
   The lease time applies specifically to the host. All service instances, and all service entries for such service
   instances, depend on the host. When the lease on a host expires, the host and all services that reference it MUST be
   removed at the same time-it is never valid for a service instance to remain when the host it references has been
   removed. If the KEY record for the host is to remain, the KEY record for any services that reference it MUST also
   remain. However, the service PTR record MUST be removed, since it has no key associated with it, and since it is never
   valid to have a service PTR record for which there is no service instance on the target of the PTR record.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">
   SRP Servers SHOULD also track a lease time per service instance. The reason for doing this is that a client may
   re-register a host with a different set of services, and not remember that some different service instance had
   previously been registered. In this case, when that service instance lease expires, the SRP server SHOULD
   remove the service instance (although the KEY record for the service instance SHOULD be retained until the key
   lease on that service expires). This is beneficial because if the SRP client continues to renew the host, but
   never mentions the stale service again, the stale service will continue to be advertised.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">The SRP server MUST include an EDNS(0) Update Lease option in the
          response if the lease time proposed by the service has been shortened or lengthened.  The service
          MUST check for the EDNS(0) Update Lease option in the response and MUST use the lease
          times from that option in place of the options that it sent to the server when
          deciding when to update its registration.   The times may be shorter or longer than
          those specified in the SRP update; the SRP client must honor them in either case.<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<p id="section-4.1-7">SRP clients should assume that each lease ends N seconds after the update was first
          transmitted, where N is the lease duration.  Servers should assume that each lease
          ends N seconds after the update that was successfully processed was received.  Because
          the server will always receive the update after the SRP client sent it, this avoids the
          possibility of misunderstandings.<a href="#section-4.1-7" class="pilcrow">¶</a></p>
<p id="section-4.1-8">SRP servers MUST reject updates that do not include an
          EDNS(0) Update Lease option.  Dual-use servers MAY accept updates that don't include
          leases, but SHOULD differentiate between SRP updates and
          other updates, and MUST reject updates that would otherwise be SRP updates
          if they do not include leases.<a href="#section-4.1-8" class="pilcrow">¶</a></p>
<p id="section-4.1-9">Lease times have a completely different function than TTLs.  On an authoritative
          DNS server, the TTL on a resource record is a constant: whenever that RR is served in
          a DNS response, the TTL value sent in the answer is the same.  The lease time is never
          sent as a TTL; its sole purpose is to determine when the authoritative DNS server will
          delete stale records.  It is not an error to send a DNS response with a TTL of 'n' when
          the remaining time on the lease is less than 'n'.<a href="#section-4.1-9" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-source-validation">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-source-validation" class="section-name selfRef">Source Validation</a>
        </h3>
<p id="section-5.1-1">SRP updates have no authorization semantics other than
   first-come, first-served.   This means that if an attacker from outside of the administrative
   domain of the server knows the server's IP address, it can in principle send updates to the server
   that will be processed successfully.   Servers should therefore be configured to reject updates
   from source addresses outside of the administrative domain of the server.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">For updates sent to an anycast IP address of an SRP server, this validation must be enforced by every router on the path
   from the Constrained-Device Network to the unconstrained portion of the network.  For TCP updates, the initial SYN-SYN+ACK
   handshake prevents updates being forged by an off-network attacker.  In order to ensure that this handshake happens,
   Service Discovery Protocol servers relying on three-way-handshake validation MUST NOT accept TCP Fast Open payloads.
   If the network infrastructure allows it, an SRP server MAY accept TCP Fast Open payloads if all such packets are validated
   along the path, and the network is able to reject this type of spoofing at all ingress points.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">Note that these rules only apply to the validation of SRP updates.
   A server that accepts updates from SRP
   clients may also accept other DNS updates, and those DNS updates may be validated
   using different rules.   However, in the case of a DNS service that accepts SRP
   updates, the intersection of the SRP update rules and
   whatever other update rules are present must be considered very carefully.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">For example, a normal, authenticated DNS update to any RR that was added using SRP, but that is authenticated using a
   different key, could be used to override a promise made by the registration protocol, by replacing all or part of the
   service registration information with information provided by an SRP client.  An implementation that allows both kinds of
   updates should not allow DNS Update clients that are using different authentication and authorization credentialsto to
   update records added by SRP clients.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2">
        <h3 id="name-srp-server-authentication">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-srp-server-authentication" class="section-name selfRef">SRP Server Authentication</a>
        </h3>
<p id="section-5.2-1">This specification does not provide a mechanism for validating responses from DNS servers to
   SRP clients.   In the case of Constrained Network/Constrained Node clients, such validation isn't
   practical because there's no way to establish trust.   In principle, a KEY RR could be used by
   a non-constrained SRP client to validate responses from the server, but this is not required,
   nor do we specify a mechanism for determining which key to use.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3">
        <h3 id="name-required-signature-algorith">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-required-signature-algorith" class="section-name selfRef">Required Signature Algorithm</a>
        </h3>
<p id="section-5.3-1">
   For validation, SRP servers MUST implement the ECDSAP256SHA256 signature algorithm.  SRP servers SHOULD implement the
   algorithms specified in <span>[<a href="#RFC8624" class="xref">RFC8624</a>], <a href="https://rfc-editor.org/rfc/rfc8624#section-3.1" class="relref">Section 3.1</a></span>, in the validation column of the
   table, that are numbered 13 or higher and have a "MUST", "RECOMMENDED", or "MAY" designation in the validation column of
   the table.
   SRP clients MUST NOT assume that any algorithm numbered lower than 13 is
   available for use in validating SIG(0) signatures.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-6">
      <h2 id="name-privacy-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-6-1">
 Because DNSSD SRP updates can be sent off-link, the privacy implications of SRP are different
 than for multicast DNS responses.  Host implementations that are using TCP SHOULD also use TLS
 if available.  Server implementations MUST offer TLS support.  The use of TLS with DNS is described
 in <span>[<a href="#RFC7858" class="xref">RFC7858</a>]</span> and <span>[<a href="#RFC8310" class="xref">RFC8310</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">
 Hosts that implement TLS support SHOULD NOT fall back to TCP; since servers are required to support
 TLS, it is entirely up to the host implementation whether to use it.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">
 Public keys can be used as identifiers to track hosts. SRP servers MAY elect not to return KEY records
 for queries for SRP registrations.<a href="#section-6-3" class="pilcrow">¶</a></p>
</section>
<div id="delegation">
<section id="section-7">
      <h2 id="name-delegation-of-servicearpa">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-delegation-of-servicearpa" class="section-name selfRef">Delegation of 'service.arpa.'</a>
      </h2>
<p id="section-7-1">In order to be fully functional, the owner of the 'arpa.' zone must add a delegation of 'service.arpa.' in the '.arpa.'
 zone <span>[<a href="#RFC3172" class="xref">RFC3172</a>]</span>. This delegation should be set up as was done for 'home.arpa', as a result of the
 specification in <span><a href="https://rfc-editor.org/rfc/rfc8375#section-7" class="relref">Section 7</a> of [<a href="#RFC8375" class="xref">RFC8375</a>]</span>.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-registration-and-delegation">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-registration-and-delegation" class="section-name selfRef">Registration and Delegation of 'service.arpa' as a Special-Use Domain Name</a>
        </h3>
<p id="section-8.1-1">IANA is requested to record the domain name 'service.arpa.' in the Special-Use Domain Names registry
   <span>[<a href="#SUDN" class="xref">SUDN</a>]</span>. IANA is requested, with the approval of IAB, to implement the delegation requested in
   <a href="#delegation" class="xref">Section 7</a>.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">IANA is further requested to add a new entry to the "Transport-Independent Locally-Served Zones" subregistry of the
   the "Locally-Served DNS Zones" registry <span>[<a href="#LSDZ" class="xref">LSDZ</a>]</span>.  The entry will be for the domain 'service.arpa.' with the
   description "DNS‑SD Registration Protocol Special-Use Domain", listing this document as the reference.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-8.2">
        <h3 id="name-dnssd-srp-service-name">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-dnssd-srp-service-name" class="section-name selfRef">'dnssd-srp' Service Name</a>
        </h3>
<p id="section-8.2-1">IANA is also requested to add a new entry to the Service Names and Port Numbers
   registry for dnssd-srp with a transport type of tcp.  No port number is to be assigned.
   The reference should be to this document, and the Assignee and Contact information should
   reference the authors of this document.  The Description should be as follows:<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">Availability of DNS Service Discovery Service Registration Protocol Service for a
   given domain is advertised using the "_dnssd‑srp._tcp.&lt;domain&gt;." SRV record gives
   the target host and port where DNSSD Service Registration Service is provided for the
   named domain.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-8.3">
        <h3 id="name-dnssd-srp-tls-service-name">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-dnssd-srp-tls-service-name" class="section-name selfRef">'dnssd-srp-tls' Service Name</a>
        </h3>
<p id="section-8.3-1">IANA is also requested to add a new entry to the Service Names and Port Numbers
   registry for dnssd-srp with a transport type of tcp.  No port number is to be assigned.
   The reference should be to this document, and the Assignee and Contact information should
   reference the authors of this document.  The Description should be as follows:<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">Availability of DNS Service Discovery Service Registration Protocol Service for a
   given domain over TLS is advertised using the "_dnssd‑srp‑tls._tcp.&lt;domain&gt;."
   SRV record gives the target host and port where DNSSD Service Registration Service is
   provided for the named domain.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-8.4">
        <h3 id="name-anycast-address">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-anycast-address" class="section-name selfRef">Anycast Address</a>
        </h3>
<p id="section-8.4-1">IANA is requested to allocate an IPv6 Anycast address from the IPv6 Special-Purpose Address Registry, similar to the Port
   Control Protocol anycast address, 2001:1::1. The value TBD should be replaced with the actual allocation in the table that
   follows. The values for the registry are:<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Attribute</td>
              <td class="text-left" rowspan="1" colspan="1">value</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Address Block</td>
              <td class="text-left" rowspan="1" colspan="1">2001:1::TBD/128</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Name</td>
              <td class="text-left" rowspan="1" colspan="1">DNS-SD Service Registration Protocol Anycast Address</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">RFC</td>
              <td class="text-left" rowspan="1" colspan="1">[this document]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Allocation Date</td>
              <td class="text-left" rowspan="1" colspan="1">[date of allocation]</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Termination Date</td>
              <td class="text-left" rowspan="1" colspan="1">N/A</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Source</td>
              <td class="text-left" rowspan="1" colspan="1">True</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Destination</td>
              <td class="text-left" rowspan="1" colspan="1">True</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Forwardable</td>
              <td class="text-left" rowspan="1" colspan="1">True</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Global</td>
              <td class="text-left" rowspan="1" colspan="1">True</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Reserved-by-protocol</td>
              <td class="text-left" rowspan="1" colspan="1">False</td>
            </tr>
          </tbody>
        </table>
</section>
</section>
<section id="section-9">
      <h2 id="name-implementation-status">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-9-1">[Note to the RFC Editor: please remove this section prior to publication.]<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">
 This section records the status of known implementations of the protocol defined by this specification at the time of
 posting of this Internet-Draft, and is based on a proposal described in RFC 7942.  The description of implementations in
 this section is intended to assist the IETF in its decision processes in progressing drafts to RFCs.  Please note that the
 listing of any individual implementation here does not imply endorsement by the IETF.  Furthermore, no effort has been spent
 to verify the information presented here that was supplied by IETF contributors.  This is not intended as, and must not be
 construed to be, a catalog of available implementations or their features.  Readers are advised to note that other
 implementations may exist.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">
 According to RFC 7942, "this will allow reviewers and working groups to assign due consideration to documents that have the
 benefit of running code, which may serve as evidence of valuable experimentation and feedback that have made the implemented
 protocols more mature.  It is up to the individual working groups to use this information as they see fit".<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">
 There are two known independent implementations of SRP clients:<a href="#section-9-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9-5.1">SRP Client for OpenThread: https://github.com/openthread/openthread/pull/6038<a href="#section-9-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-9-5.2">mDNSResponder open source project: https://github.com/Abhayakara/mdnsresponder<a href="#section-9-5.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-9-6">
 There are two related implementations of an SRP server. One acts as a DNS Update proxy, taking an SRP update and applying it
 to the specified DNS zone using DNS update. The other acts as an Advertising Proxy
 <span>[<a href="#I-D.sctl-advertising-proxy" class="xref">I-D.sctl-advertising-proxy</a>]</span>. Both are included in the mDNSResponder open source project mentioned above.<a href="#section-9-6" class="pilcrow">¶</a></p>
</section>
<section id="section-10">
      <h2 id="name-acknowledgments">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-10-1">Thanks to <span class="contact-name">Toke Høiland-Jørgensen</span>, Jonathan Hui, Esko Dijk, Kangping Dong and Abtin Keshavarzian for
 their thorough technical reviews. Thanks to Kangping and Abtin as well for testing the document by doing an independent
 implementation. Thanks to Tamara Kemper for doing a nice developmental edit, Tim Wattenberg for doing a SRP client
 proof-of-concept implementation at the Montreal Hackathon at IETF 102, and Tom Pusateri for reviewing during the hackathon
 and afterwards.<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
<section id="section-11">
      <h2 id="name-normative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.sekar-dns-ul">[I-D.sekar-dns-ul]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">T. Lemon</span>, <span class="refTitle">"An EDNS0 option to negotiate Leases on DNS Updates"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-sekar-dns-ul-03</span>, <time datetime="2021-07-27" class="refDate">27 July 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-sekar-dns-ul-03">https://datatracker.ietf.org/doc/html/draft-sekar-dns-ul-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2132">[RFC2132]</dt>
      <dd>
<span class="refAuthor">Alexander, S.</span> and <span class="refAuthor">R. Droms</span>, <span class="refTitle">"DHCP Options and BOOTP Vendor Extensions"</span>, <span class="seriesInfo">RFC 2132</span>, <span class="seriesInfo">DOI 10.17487/RFC2132</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2132">https://www.rfc-editor.org/info/rfc2132</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2136">[RFC2136]</dt>
      <dd>
<span class="refAuthor">Vixie, P., Ed.</span>, <span class="refAuthor">Thomson, S.</span>, <span class="refAuthor">Rekhter, Y.</span>, and <span class="refAuthor">J. Bound</span>, <span class="refTitle">"Dynamic Updates in the Domain Name System (DNS UPDATE)"</span>, <span class="seriesInfo">RFC 2136</span>, <span class="seriesInfo">DOI 10.17487/RFC2136</span>, <time datetime="1997-04" class="refDate">April 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2136">https://www.rfc-editor.org/info/rfc2136</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2931">[RFC2931]</dt>
      <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refTitle">"DNS Request and Transaction Signatures ( SIG(0)s )"</span>, <span class="seriesInfo">RFC 2931</span>, <span class="seriesInfo">DOI 10.17487/RFC2931</span>, <time datetime="2000-09" class="refDate">September 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2931">https://www.rfc-editor.org/info/rfc2931</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3172">[RFC3172]</dt>
      <dd>
<span class="refAuthor">Huston, G., Ed.</span>, <span class="refTitle">"Management Guidelines &amp; Operational Requirements for the Address and Routing Parameter Area Domain ("arpa")"</span>, <span class="seriesInfo">BCP 52</span>, <span class="seriesInfo">RFC 3172</span>, <span class="seriesInfo">DOI 10.17487/RFC3172</span>, <time datetime="2001-09" class="refDate">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3172">https://www.rfc-editor.org/info/rfc3172</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6763">[RFC6763]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">M. Krochmal</span>, <span class="refTitle">"DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 6763</span>, <span class="seriesInfo">DOI 10.17487/RFC6763</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6763">https://www.rfc-editor.org/info/rfc6763</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7858">[RFC7858]</dt>
      <dd>
<span class="refAuthor">Hu, Z.</span>, <span class="refAuthor">Zhu, L.</span>, <span class="refAuthor">Heidemann, J.</span>, <span class="refAuthor">Mankin, A.</span>, <span class="refAuthor">Wessels, D.</span>, and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Specification for DNS over Transport Layer Security (TLS)"</span>, <span class="seriesInfo">RFC 7858</span>, <span class="seriesInfo">DOI 10.17487/RFC7858</span>, <time datetime="2016-05" class="refDate">May 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7858">https://www.rfc-editor.org/info/rfc7858</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8106">[RFC8106]</dt>
      <dd>
<span class="refAuthor">Jeong, J.</span>, <span class="refAuthor">Park, S.</span>, <span class="refAuthor">Beloeil, L.</span>, and <span class="refAuthor">S. Madanapalli</span>, <span class="refTitle">"IPv6 Router Advertisement Options for DNS Configuration"</span>, <span class="seriesInfo">RFC 8106</span>, <span class="seriesInfo">DOI 10.17487/RFC8106</span>, <time datetime="2017-03" class="refDate">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8106">https://www.rfc-editor.org/info/rfc8106</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8375">[RFC8375]</dt>
      <dd>
<span class="refAuthor">Pfister, P.</span> and <span class="refAuthor">T. Lemon</span>, <span class="refTitle">"Special-Use Domain 'home.arpa.'"</span>, <span class="seriesInfo">RFC 8375</span>, <span class="seriesInfo">DOI 10.17487/RFC8375</span>, <time datetime="2018-05" class="refDate">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8375">https://www.rfc-editor.org/info/rfc8375</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8624">[RFC8624]</dt>
      <dd>
<span class="refAuthor">Wouters, P.</span> and <span class="refAuthor">O. Sury</span>, <span class="refTitle">"Algorithm Implementation Requirements and Usage Guidance for DNSSEC"</span>, <span class="seriesInfo">RFC 8624</span>, <span class="seriesInfo">DOI 10.17487/RFC8624</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8624">https://www.rfc-editor.org/info/rfc8624</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8765">[RFC8765]</dt>
      <dd>
<span class="refAuthor">Pusateri, T.</span> and <span class="refAuthor">S. Cheshire</span>, <span class="refTitle">"DNS Push Notifications"</span>, <span class="seriesInfo">RFC 8765</span>, <span class="seriesInfo">DOI 10.17487/RFC8765</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8765">https://www.rfc-editor.org/info/rfc8765</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SUDN">[SUDN]</dt>
      <dd>
<span class="refTitle">"Special-Use Domain Names Registry"</span>, <time datetime="2012-07" class="refDate">July 2012</time>, <span>&lt;<a href="https://www.iana.org/assignments/special-use-domain-names/special-use-domain-names.xhtml">https://www.iana.org/assignments/special-use-domain-names/special-use-domain-names.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="LSDZ">[LSDZ]</dt>
    <dd>
<span class="refTitle">"Locally-Served DNS Zones Registry"</span>, <time datetime="2011-07" class="refDate">July 2011</time>, <span>&lt;<a href="https://www.iana.org/assignments/locally-served-dns-zones/locally-served-dns-zones.xhtml">https://www.iana.org/assignments/locally-served-dns-zones/locally-served-dns-zones.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12">
      <h2 id="name-informative-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC1035">[RFC1035]</dt>
      <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1035">https://www.rfc-editor.org/info/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2131">[RFC2131]</dt>
      <dd>
<span class="refAuthor">Droms, R.</span>, <span class="refTitle">"Dynamic Host Configuration Protocol"</span>, <span class="seriesInfo">RFC 2131</span>, <span class="seriesInfo">DOI 10.17487/RFC2131</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2131">https://www.rfc-editor.org/info/rfc2131</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2181">[RFC2181]</dt>
      <dd>
<span class="refAuthor">Elz, R.</span> and <span class="refAuthor">R. Bush</span>, <span class="refTitle">"Clarifications to the DNS Specification"</span>, <span class="seriesInfo">RFC 2181</span>, <span class="seriesInfo">DOI 10.17487/RFC2181</span>, <time datetime="1997-07" class="refDate">July 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2181">https://www.rfc-editor.org/info/rfc2181</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2782">[RFC2782]</dt>
      <dd>
<span class="refAuthor">Gulbrandsen, A.</span>, <span class="refAuthor">Vixie, P.</span>, and <span class="refAuthor">L. Esibov</span>, <span class="refTitle">"A DNS RR for specifying the location of services (DNS SRV)"</span>, <span class="seriesInfo">RFC 2782</span>, <span class="seriesInfo">DOI 10.17487/RFC2782</span>, <time datetime="2000-02" class="refDate">February 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2782">https://www.rfc-editor.org/info/rfc2782</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3007">[RFC3007]</dt>
      <dd>
<span class="refAuthor">Wellington, B.</span>, <span class="refTitle">"Secure Domain Name System (DNS) Dynamic Update"</span>, <span class="seriesInfo">RFC 3007</span>, <span class="seriesInfo">DOI 10.17487/RFC3007</span>, <time datetime="2000-11" class="refDate">November 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3007">https://www.rfc-editor.org/info/rfc3007</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6760">[RFC6760]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">M. Krochmal</span>, <span class="refTitle">"Requirements for a Protocol to Replace the AppleTalk Name Binding Protocol (NBP)"</span>, <span class="seriesInfo">RFC 6760</span>, <span class="seriesInfo">DOI 10.17487/RFC6760</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6760">https://www.rfc-editor.org/info/rfc6760</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6761">[RFC6761]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">M. Krochmal</span>, <span class="refTitle">"Special-Use Domain Names"</span>, <span class="seriesInfo">RFC 6761</span>, <span class="seriesInfo">DOI 10.17487/RFC6761</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6761">https://www.rfc-editor.org/info/rfc6761</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6762">[RFC6762]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">M. Krochmal</span>, <span class="refTitle">"Multicast DNS"</span>, <span class="seriesInfo">RFC 6762</span>, <span class="seriesInfo">DOI 10.17487/RFC6762</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6762">https://www.rfc-editor.org/info/rfc6762</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7228">[RFC7228]</dt>
      <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, and <span class="refAuthor">A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7228">https://www.rfc-editor.org/info/rfc7228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8310">[RFC8310]</dt>
      <dd>
<span class="refAuthor">Dickinson, S.</span>, <span class="refAuthor">Gillmor, D.</span>, and <span class="refAuthor">T. Reddy</span>, <span class="refTitle">"Usage Profiles for DNS over TLS and DNS over DTLS"</span>, <span class="seriesInfo">RFC 8310</span>, <span class="seriesInfo">DOI 10.17487/RFC8310</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8310">https://www.rfc-editor.org/info/rfc8310</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8415">[RFC8415]</dt>
      <dd>
<span class="refAuthor">Mrugalski, T.</span>, <span class="refAuthor">Siodelski, M.</span>, <span class="refAuthor">Volz, B.</span>, <span class="refAuthor">Yourtchenko, A.</span>, <span class="refAuthor">Richardson, M.</span>, <span class="refAuthor">Jiang, S.</span>, <span class="refAuthor">Lemon, T.</span>, and <span class="refAuthor">T. Winters</span>, <span class="refTitle">"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"</span>, <span class="seriesInfo">RFC 8415</span>, <span class="seriesInfo">DOI 10.17487/RFC8415</span>, <time datetime="2018-11" class="refDate">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8415">https://www.rfc-editor.org/info/rfc8415</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8766">[RFC8766]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span>, <span class="refTitle">"Discovery Proxy for Multicast DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 8766</span>, <span class="seriesInfo">DOI 10.17487/RFC8766</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8766">https://www.rfc-editor.org/info/rfc8766</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.cheshire-dnssd-roadmap">[I-D.cheshire-dnssd-roadmap]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span>, <span class="refTitle">"Service Discovery Road Map"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-cheshire-dnssd-roadmap-03</span>, <time datetime="2018-10-23" class="refDate">23 October 2018</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-cheshire-dnssd-roadmap-03">https://datatracker.ietf.org/doc/html/draft-cheshire-dnssd-roadmap-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.cheshire-edns0-owner-option">[I-D.cheshire-edns0-owner-option]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">M. Krochmal</span>, <span class="refTitle">"EDNS0 OWNER Option"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-cheshire-edns0-owner-option-01</span>, <time datetime="2017-07-03" class="refDate">3 July 2017</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-cheshire-edns0-owner-option-01">https://datatracker.ietf.org/doc/html/draft-cheshire-edns0-owner-option-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.sctl-advertising-proxy">[I-D.sctl-advertising-proxy]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">T. Lemon</span>, <span class="refTitle">"Advertising Proxy for DNS-SD Service Registration Protocol"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-sctl-advertising-proxy-02</span>, <time datetime="2021-07-12" class="refDate">12 July 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-sctl-advertising-proxy-02">https://datatracker.ietf.org/doc/html/draft-sctl-advertising-proxy-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ZC">[ZC]</dt>
    <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">D.H. Steinberg</span>, <span class="refTitle">"Zero Configuration Networking: The Definitive Guide"</span>, <span class="seriesInfo">O'Reilly Media, Inc. </span>, <span class="seriesInfo">ISBN 0-596-10100-7</span>, <time datetime="2005-12" class="refDate">December 2005</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="appendix-A">
      <h2 id="name-testing-using-standard-rfc2">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-testing-using-standard-rfc2" class="section-name selfRef">Testing using standard RFC2136-compliant servers</a>
      </h2>
<p id="appendix-A-1">
        It may be useful to set up a DNS server for testing that does not implement SRP.  This can be done by configuring the
        server to listen on the anycast address, or advertising it in the _dnssd‑srp._tcp.&lt;zone&gt; SRV and
        _dnssd‑srp‑tls._tcp.&lt;zone&gt; record.  It must be configured to be authoritative for
        "default.service.arpa", and to accept updates from hosts on local networks for names under "default.service.arpa"
        without authentication, since such servers will not have support for FCFS authentication (<a href="#fcfs" class="xref">Section 2.2.4.1</a>).<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">
        A server configured in this way will be able to successfully accept and process SRP updates from services that send SRP
        updates.  However, no prerequisites will be applied, and this means that the test server will accept internally
        inconsistent SRP updates, and will not stop two SRP updates, sent by different services, that claim the same name(s),
        from overwriting each other.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">
        Since SRP updates are signed with keys, validation of the SIG(0) algorithm used by the client can be done by manually
        installing the client public key on the DNS server that will be receiving the updates.  The key can then be used to
        authenticate the client, and can be used as a requirement for the update.  An example configuration for testing SRP
        using BIND 9 is given in <a href="#bind-example" class="xref">Appendix C</a>.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
</section>
<section id="appendix-B">
      <h2 id="name-how-to-allow-services-to-up">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-how-to-allow-services-to-up" class="section-name selfRef">How to allow services to update standard RFC2136-compliant servers</a>
      </h2>
<p id="appendix-B-1">
        Ordinarily SRP updates will fail when sent to an RFC 2136-compliant server that does not implement SRP because the zone
        being updated is "default.service.arpa", and no DNS server that is not an SRP server should normally be configured to be
        authoritative for "default.service.arpa".  Therefore, a service that sends an SRP update can tell that the receiving server
        does not support SRP, but does support RFC2136, because the RCODE will either be NOTZONE, NOTAUTH or REFUSED, or because
        there is no response to the update request (when using the anycast address)<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">
        In this case a service MAY attempt to register itself using regular RFC2136 DNS updates. To do so, it must discover the
        default registration zone and the DNS server designated to receive updates for that zone, as described earlier, using the
        _dns‑update._udp SRV record.  It can then make the update using the port and host pointed to by the SRV record, and
        should use appropriate prerequisites to avoid overwriting competing records.  Such updates are out of scope for SRP, and a
        service that implements SRP MUST first attempt to use SRP to register itself, and should only attempt to use RFC2136
        backwards compatibility if that fails.  Although the owner name for the SRV record specifies the UDP protocol for updates,
        it is also possible to use TCP, and TCP should be required to prevent spoofing.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
</section>
<div id="bind-example">
<section id="appendix-C">
      <h2 id="name-sample-bind9-configuration-">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-sample-bind9-configuration-" class="section-name selfRef">Sample BIND9 configuration for default.service.arpa.</a>
      </h2>
<span id="name-zone-configuration-in-named"></span><figure id="figure-1">
        <div class="alignLeft art-text artwork" id="appendix-C-1.1">
<pre>
zone "default.service.arpa." {
  type master;
  file "/etc/bind/master/service.db";
  allow-update { key demo.default.service.arpa.; };
};
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-zone-configuration-in-named" class="selfRef">Zone Configuration in named.conf</a>
        </figcaption></figure>
<span id="name-example-zone-file"></span><figure id="figure-2">
        <div class="alignLeft art-text artwork" id="appendix-C-2.1">
<pre>
$ORIGIN .
$TTL 57600  ; 16 hours
default.service.arpa IN SOA          ns3.default.service.arpa.
                                     postmaster.default.service.arpa. (
                2951053287 ; serial
                3600       ; refresh (1 hour)
                1800       ; retry (30 minutes)
                604800     ; expire (1 week)
                3600       ; minimum (1 hour)
)
                        NS           ns3.default.service.arpa.
                        SRV 0 0 53   ns3.default.service.arpa.
$ORIGIN default.service.arpa.
$TTL 3600   ; 1 hour
_ipps._tcp              PTR          demo._ipps._tcp
$ORIGIN _ipps._tcp.default.service.arpa.
demo                    TXT          "0"
                        SRV 0 0 9992 demo.default.service.arpa.
$ORIGIN _udp.default.service.arpa.
$TTL 3600   ; 1 hour
_dns-update             PTR          ns3.default.service.arpa.
$ORIGIN _tcp.default.service.arpa.
_dnssd-srp              PTR          ns3.default.service.arpa.
$ORIGIN default.service.arpa.
$TTL 300    ; 5 minutes
ns3                     AAAA         2001:db8:0:1::1
$TTL 3600   ; 1 hour
demo                    AAAA         2001:db8:0:2::1
                        KEY 513 3 13 (
                           qweEmaaq0FAWok5//ftuQtZgiZoiFSUsm0srWREdywQU
                           9dpvtOhrdKWUuPT3uEFF5TZU6B4q1z1I662GdaUwqg==
                        ); alg = ECDSAP256SHA256 ; key id = 15008
                        AAAA    ::1
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-example-zone-file" class="selfRef">Example Zone file</a>
        </figcaption></figure>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ted Lemon</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino</span>, <span class="region">California</span> <span class="postal-code">95014</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mellon@fugue.com" class="email">mellon@fugue.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stuart Cheshire</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino</span>, <span class="region">California</span> <span class="postal-code">95014</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+1%20408%20974%203207" class="tel">+1 408 974 3207</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:cheshire@apple.com" class="email">cheshire@apple.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
