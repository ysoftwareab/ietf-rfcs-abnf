


Network Working Group                                          A. Morton
Internet-Draft                                                 AT&T Labs
Intended status: Standards Track                            July 6, 2008
Expires: January 7, 2009


             Independent Session Control Feature for TWAMP
                draft-morton-ippm-twamp-session-cntrl-00

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on January 7, 2009.

Abstract

   The IETF is completing its work on TWAMP - the Two-Way Active
   Measurement Protocol.  This memo describes a proposed feature for
   TWAMP, intended for discussion in the IP Performance Metrics WG.  The
   feature gives the sender the ability to start and stop one or more
   test sessions using the Session Identifiers.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].




Morton                   Expires January 7, 2009                [Page 1]

Internet-Draft            TWAMP Session Control                July 2008


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Purpose and Scope  . . . . . . . . . . . . . . . . . . . . . .  3
   3.  TWAMP Control Extensions . . . . . . . . . . . . . . . . . . .  4
     3.1.  Connection Setup with Individual Session Control . . . . .  4
     3.2.  Start-Sessions Command with Session Control  . . . . . . .  5
     3.3.  Stop-Sessions Command with Session Control . . . . . . . .  6
     3.4.  SERVWAIT Timer Operation . . . . . . . . . . . . . . . . .  6
     3.5.  Additional considerations  . . . . . . . . . . . . . . . .  7
   4.  TWAMP Test with Individual Session Control . . . . . . . . . .  7
     4.1.  Sender Behavior  . . . . . . . . . . . . . . . . . . . . .  7
     4.2.  Reflector Behavior . . . . . . . . . . . . . . . . . . . .  7
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . .  8
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  8
     6.1.  Registry Specification . . . . . . . . . . . . . . . . . .  8
     6.2.  Registry Management  . . . . . . . . . . . . . . . . . . .  9
     6.3.  Experimental Numbers . . . . . . . . . . . . . . . . . . .  9
     6.4.  Registry Contents  . . . . . . . . . . . . . . . . . . . .  9
   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 10
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 10
     8.1.  Normative References . . . . . . . . . . . . . . . . . . . 10
     8.2.  Informative References . . . . . . . . . . . . . . . . . . 11
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 11
   Intellectual Property and Copyright Statements . . . . . . . . . . 12


























Morton                   Expires January 7, 2009                [Page 2]

Internet-Draft            TWAMP Session Control                July 2008


1.  Introduction

   The IETF is completing its work on TWAMP - the Two-Way Active
   Measurement Protocol [I-D.ietf-ippm-twamp], which is an extension to
   the One-way Active Measurement Protocol, OWAMP [RFC4656].

   This memo describes a new proposed feature for TWAMP, so it can be
   discussed and interest to take-up the feature assessed.  TWAMP (and
   OWAMP) start all previously requested and accepted test sessions at
   once.  This feature allows the Control-Client to control the test
   sessions on the basis of their Session Identifier (SID).  The feature
   permits a short duration TWAMP test to start (and stop) during a
   longer test.  For example, this feature permits a specific diagnostic
   test to begin if intermediate results indicate that the test is
   warranted.

   This feature requires a Mode bit position assignment and the
   assignment of two new TWAMP command numbers (for the augmented Start
   and Stop commands).

   The relationship between this memo and TWAMP is intended to be an
   update to the TWAMP RFC when published.


2.  Purpose and Scope

   The purpose of this memo is to describe an additional function and
   feature for TWAMP [I-D.ietf-ippm-twamp].  The feature needs a clear
   description so it can be discussed and (hopefully) adopted in the IP
   Performance Metrics Charter.

   The scope of the memo is currently limited to specifications of the
   following features:

   1.  Extension of the modes of operation through assignment of a new
       value in the Mode field to communicate feature capability and
       use, the definition of augmented Start Session and Stop Session
       commands, and the definition of related procedures for TWAMP
       entities.  The motivation for this added feature is the ability
       to start and stop individual test sessions at will, using a
       single TWAMP-control connection.

   When new features are discussed and reach consensus, they may become
   chartered work items in IETF IPPM (and may appear in a different
   memo).






Morton                   Expires January 7, 2009                [Page 3]

Internet-Draft            TWAMP Session Control                July 2008


3.  TWAMP Control Extensions

   TWAMP-Control protocol is a derivative of the OWAMP-Control protocol,
   and provides two-way measurement capability.  TWAMP
   [I-D.ietf-ippm-twamp] uses the Mode field to identify and select
   specific communication capabilities, and this field is a recognized
   extension mechanism.  The following sections describe one such
   extension.

3.1.  Connection Setup with Individual Session Control

   TWAMP connection establishment follows the procedure defined in
   section 3.1 of [RFC4656].  The Individual Session Control mode
   requires one new bit position (and value) to identify the ability of
   the Server/Session-Reflector to start and stop specific sessions
   (according to their Session Identifier, or SID).  This new feature
   requires an additional TWAMP mode bit assignment as follows:

   Value  Description             Reference/Explanation
   0      Reserved
   1      Unauthenticated         RFC4656, Section 3.1
   2      Authenticated           RFC4656, Section 3.1
   4      Encrypted               RFC4656, Section 3.1
   8      Unauth. TEST protocol,  draft-...-more-twamp (3)
          Auth. CONTROL
   16     Unauth. TEST protocol,  draft-...-more-twamp (4)
          Encrypted CONTROL
   32     Auth. TEST protocol,    draft-...-more-twamp (5)
          Encrypted CONTROL
   --------------------------------------------------------
   zzz    Individual Session       this memo, bit position (Z)
          Control


   In the original OWAMP mode field, setting bit positions 0, 1 or 2
   indicated the security mode of the Control protocol, and the Test
   protocol inherited the same mode (see section 4 of [RFC4656]).  In
   the [I-D.morton-ippm-more-twamp] proposal, bit positions (3, 4 or 5)
   discontinue the inheritance of the security mode in the Test
   protocol.

   The Server sets the new bit position (possibly bit 8) in the Server
   Greeting message to indicate its capabilities and willingness to
   control sessions on an individual basis if desired.

   If the Control-Client intends to control sessions on an individual
   basis, it MUST set the mode bit corresponding to that mode in the
   Setup Response message.



Morton                   Expires January 7, 2009                [Page 4]

Internet-Draft            TWAMP Session Control                July 2008


3.2.  Start-Sessions Command with Session Control

   Having requested one or more test sessions and received affirmative
   Accept-Session responses, an OWAMP client MAY start the execution of
   the requested test sessions by sending a Start-Sessions message to
   the server.

   The format of this message is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      7        |                                               |
   +-+-+-+-+-+-+-+-+                                               +
   |                        MBZ (7 octets)                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Number of Sessions                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                   First  SID (16 octets)                      |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                remaining  SIDs (16 octets each)               |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                       HMAC (16 octets)                        |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Number of sessions field indicates the count of sessions that
   this Start command applies to.  The SID is as defined in OWAMP (and
   TWAMP) section 3.5 [RFC4656].

   The Server MUST respond with a Start-Ack message (which SHOULD be
   sent as quickly as possible).  Start-Ack messages have the format
   defined in section 3.7 of [RFC4656].

   The Control Client MUST NOT send a subsequent Start Sessions command
   until an outstanding message is acknowledged with a Start-Ack
   message.






Morton                   Expires January 7, 2009                [Page 5]

Internet-Draft            TWAMP Session Control                July 2008


3.3.  Stop-Sessions Command with Session Control

   The Stop-Sessions command can only be issued by the Control-Client.
   The message MUST contain at least one SID.  The message is terminated
   with a single block HMAC, to complete the Stop-Sessions Command.

   Thus, the TWAMP Stop-Sessions command for individual session control
   is constructed as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      8        |    Accept     |              MBZ              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Number of Sessions                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                   First  SID (16 octets)                      |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                remaining  SIDs (16 octets each)               |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        MBZ (8 octets)                         |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                       HMAC (16 octets)                        |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Number of sessions field indicates the count of sessions that
   this Stop command applies to.  The SID is as defined in OWAMP (and
   TWAMP) section 3.5 [RFC4656].

3.4.  SERVWAIT Timer Operation

   Section 3.1 of [I-D.ietf-ippm-twamp] describes the operation of the
   optional SERVWAIT timer.  In normal TWAMP operation, the Server
   suspends monitoring the SERVWAIT timer while test sessions are in
   progress.  When the Individual Session Control feature is utilized,
   this suspension is extended to cover the time when ANY test session
   is in progress.




Morton                   Expires January 7, 2009                [Page 6]

Internet-Draft            TWAMP Session Control                July 2008


   Thus, the Server SHALL suspend monitoring control connection activity
   after receiving any Start-Sessions command, and SHALL resume after
   receiving a Stop-Sessions command for all corresponding SIDs (and no
   test sessions are in-progress).

3.5.  Additional considerations

   The value of the Modes field sent by the Server (in the Server
   Greeting message) is the bit-wise OR of the mode values that it is
   willing to support during this session.

   If this feature is adopted, the last seven bits of the Modes 32-bit
   field are used.  The first 25 bits MUST be zero.  A client conforming
   to this version of the specification MUST ignore the values in the
   first 25 bits of the Modes value.  (This way, the bits are available
   for future protocol extensions.)

   Other ways in which TWAMP extends OWAMP are described in
   [I-D.ietf-ippm-twamp].


4.  TWAMP Test with Individual Session Control

   The TWAMP test protocol is similar to the OWAMP [RFC4656] test
   protocol with the exception that the Session-Reflector transmits test
   packets to the Session-Sender in response to each test packet it
   receives.  TWAMP [I-D.ietf-ippm-twamp] defines two different test
   packet formats, one for packets transmitted by the Session-Sender and
   one for packets transmitted by the Session-Reflector.  As with OWAMP-
   Test protocol there are three security modes: unauthenticated,
   authenticated, and encrypted.  Unauthenticated mode has one test
   packet format, while authenticated and encrypted modes use another
   (common) format.

4.1.  Sender Behavior

   The individual session control feature requires that the sender MUST
   manage test sessions according to their SID.  Otherwise, the sender
   behavior is as describe in section 4.1 of [I-D.ietf-ippm-twamp].

4.2.  Reflector Behavior

   The TWAMP Reflector follows the procedures and guidelines in section
   4.2 of [I-D.ietf-ippm-twamp], with the following additional functions
   required by this feature:






Morton                   Expires January 7, 2009                [Page 7]

Internet-Draft            TWAMP Session Control                July 2008


   o  The session reflector MUST manage test sessions according to their
      SID.

   o  Packets for a specific session/SID not received within the Timeout
      (following the Stop-Session command) MUST be ignored by the
      Reflector.  The Session-Reflector MUST NOT generate a test packet
      to the Session-Sender for packets that are ignored.

   o  If the optional REFWAIT timer is implemented, it SHOULD be
      enforced when any test session is in-progress (started and not
      stopped).


5.  Security Considerations

   These extended modes of operation permit stronger integrity
   protection on the TWAMP-Control protocol while simultaneously
   emphasizing accuracy or efficiency on the TWAMP-Test protocol, thus
   enhancing overall security when compared to the previous options.

   The security considerations that apply to any active measurement of
   live networks are relevant here as well.  See the security
   considerations in[RFC4656] and [I-D.ietf-ippm-twamp].


6.  IANA Considerations

   This memo requests assignment of one mode bit position/value to the
   IANA registry for the TWAMP Mode field, and describes behavior when
   the new mode is used.  This field is a recognized extension mechanism
   for TWAMP.

   This memo also requests assignment of two command numbers in the
   TWAMP-Control Command Number registry, and describes the use of the
   new commands.  The command number field is a recognized extension
   mechanism for TWAMP.

6.1.  Registry Specification

   IANA has created a TWAMP-Modes registry (as requested in
   [I-D.morton-ippm-more-twamp]).  TWAMP-Modes are specified in TWAMP
   Server Greeting messages and Set-up Response messages, as described
   in section 3.1 of [I-D.ietf-ippm-twamp], consistent with section 3.1
   of [RFC4656], and extended by this memo.  Modes are indicated by
   setting bits in the 32-bit Modes field.  Thus, this registry can
   contain a total of 32 possible values.

   IANA has also created a TWAMP-Control Command Number registry.



Morton                   Expires January 7, 2009                [Page 8]

Internet-Draft            TWAMP Session Control                July 2008


   TWAMP-Control commands are specified by the first octet in TWAMP-
   Control messages as specified in section 3.5 of
   [I-D.ietf-ippm-twamp], and augmented by this memo.  This registry may
   contain sixteen possible values.

6.2.  Registry Management

   Because the TWAMP-Control Command Number registry can contain only
   sixteen values, TWAMP-Modes can only contain thirty-two values, and
   because TWAMP is an IETF protocol, these registries must be updated
   only by "IETF Consensus" as specified in [RFC2434](an RFC documenting
   registry use that is approved by the IESG).  Management of these
   registries is described in section 8.2 of [I-D.ietf-ippm-twamp] and
   [I-D.morton-ippm-more-twamp].

   This memo proposes assignment of values 7 and 8.

6.3.  Experimental Numbers

   One experimental value has been assigned in the TWAMP-Control Command
   Number registry.

   No additional experimental values are assigned in the TWAMP-Modes
   registry.

6.4.  Registry Contents

   TWAMP-Control Command Number Registry

   Value  Description             Semantics Definition
    0      Reserved
    1      Forbidden
    2      Start-Sessions          RFC4656, Section 3.7
    3      Stop-Sessions           RFC4656, Section 3.8
    4      Reserved
    5      Request-TW-Session      draft-ietf-ippm-twamp, Section 3.5
    6      Experimentation         draft-ietf-ippm-twamp, Section 8.3
   ------------------------------------------------------------------
    7      Start-Sessions with     this memo, Section 3.2
           Individ. Session Cntrl.
    8      Stop-Sessions with      this memo, Section 3.3
           Individ. Session Cntrl.


   TWAMP-Modes Registry






Morton                   Expires January 7, 2009                [Page 9]

Internet-Draft            TWAMP Session Control                July 2008


   Value  Description             Reference/Explanation
   0      Reserved
   1      Unauthenticated         RFC4656, Section 3.1
   2      Authenticated           RFC4656, Section 3.1
   4      Encrypted               RFC4656, Section 3.1
   8      Unauth. TEST protocol,  draft-...-more-twamp (3)
          Auth. CONTROL
   16     Unauth. TEST protocol,  draft-...-more-twamp (4)
          Encrypted CONTROL
   32     Auth. TEST protocol,    draft-...-more-twamp (5)
          Encrypted CONTROL
   --------------------------------------------------------
   zzz    Individual Session       this memo, Section 3.1
          Control                  bit position (Z)


7.  Acknowledgements

   The author would like to thank Murtaza Chiba for suggesting this
   feature.


8.  References

8.1.  Normative References

   [I-D.ietf-ippm-twamp]
              Babiarz, J., "A Two-way Active Measurement Protocol
              (TWAMP)", draft-ietf-ippm-twamp-08 (work in progress),
              June 2008.

   [I-D.morton-ippm-more-twamp]
              Morton, A. and K. Hedayat, "More Features for TWAMP",
              draft-morton-ippm-more-twamp-00 (work in progress),
              February 2008.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2434]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 2434,
              October 1998.

   [RFC4656]  Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M.
              Zekauskas, "A One-way Active Measurement Protocol
              (OWAMP)", RFC 4656, September 2006.





Morton                   Expires January 7, 2009               [Page 10]

Internet-Draft            TWAMP Session Control                July 2008


8.2.  Informative References

   [x]        "".


Author's Address

   Al Morton
   AT&T Labs
   200 Laurel Avenue South
   Middletown,, NJ  07748
   USA

   Phone: +1 732 420 1571
   Fax:   +1 732 368 1192
   Email: acmorton@att.com
   URI:   http://home.comcast.net/~acmacm/


































Morton                   Expires January 7, 2009               [Page 11]

Internet-Draft            TWAMP Session Control                July 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.











Morton                   Expires January 7, 2009               [Page 12]


