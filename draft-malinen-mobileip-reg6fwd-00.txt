
Mobile IP Working Group                                  Jari T. Malinen
INTERNET DRAFT                                        Charles E. Perkins
1 March 2001                                       Nokia Research Center
Category:  Standards Track

                    Mobile IPv6 Regional Forwarding
                 draft-malinen-mobileip-reg6fwd-00.txt


Status of This Memo

   This document is a submission by the mobile-ip Working Group of the
   Internet Engineering Task Force (IETF).  Comments should be submitted
   to the MOBILE-IP@STANDARDS.NORTELNETWORKS.COM mailing list.

   Distribution of this memo is unlimited.

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at
   any time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at:
        http://www.ietf.org/ietf/1id-abstracts.txt
   The list of Internet-Draft Shadow Directories can be accessed at:
        http://www.ietf.org/shadow.html.


Abstract

   Data forwarding to a Mobile IPv6 mobile node employs either
   encapsulation or routing header -based forwarding, latter when using
   route optimization.  Forwarding through a domain with hierarchical
   extensions to Mobile IPv6 by default uses encapsulation to pass
   route-optimized packets over the last hop to the mobile node.
   However, it is highly desirable to avoid the overhead of sending
   an extra 40 byte encapsulation header per packet over the last
   hop.  This document describes Mobile IPv6 regional forwarding which
   is an optional optimized data forwarding method.  It avoids the
   encapsulation header and can be used e.g. with Mobile IPv6 Regional
   Registrations.








Malinen, Perkins            Expires 1 November 2001             [Page 1]

Internet Draft       Mobile IPv6 Regional Forwarding        1 March 2001


                                Contents


Status of This Memo                                                    1

Abstract                                                               1

 1. Introduction                                                       2

 2. Terms                                                              3

 3. Protocol Operation                                                 3

 4. New requirements for IPv6 Nodes                                    4
     4.1. Visited Domain Router Requirements  . . . . . . . . . . .    5
     4.2. Mobile Node Requirements  . . . . . . . . . . . . . . . .    5

 5. Security Considerations                                            5

 6. Intellectual Property Right Considerations                         5

Addresses                                                              6


1. Introduction

   Conserving last hop bandwidth is a major design goal in several
   types of radio access networks.  When using localized mobility
   extensions to the Mobile IPv6 [2], such as Mobile IPv6 Regional
   Registrations [5], the default propagation method uses encapsulation.

   Packets coming from the corresponding node to the mobile node are
   route-optimized after the corresponding node has received a binding
   update.  Almost all of the data traffic is route-optimized, since the
   mobile node sends a binding update to a corresponding node soon after
   receiving packets from the corresponding node, tunneled by the home
   agent.

   Each route-optimized packet carries a routing header with the home
   address in it and is destined to the registered care-of-address.
   When a localized mobility scheme is used, the care-of-address
   registered at the home network points to a gateway mobility agent.
   This receives the route-optimized data packet, processes the routing
   header, and then needs to find a route to the home address.

   Since link-distance cannot be guaranteed between regional-aware
   routers, or the gateway mobility agent and the mobile node, a host
   route to the home address points to a tunnel interface.  This results
   in encapsulation of the route-optimized packet to the mobile node.



Malinen, Perkins            Expires 1 November 2001             [Page 2]

Internet Draft       Mobile IPv6 Regional Forwarding        1 March 2001


   Such an encapsulation contains the outer encapsulation header, 40
   bytes, in addition to the routing header.

   To get rid of the extra encapsulation, our proposed protocol
   forwards the packet from the gateway down to the mobile node by
   making a slight change to the way routing headers are processed.
   The forwarding node inserts the care-of-address from the regional
   binding cache into the IP destination address.  Application of this
   operation in visited domain routers eventually propagates the packet
   unencapsulated down to the mobile node.  For authentication purposes,
   the mobile node finally returns the regional care-of-address to the
   IP destination address.


2. Terms

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [1].

   In addition, this document uses the following terms:

      Regional-aware Router
               A router following this specification.

      Regional Forwarding
               Forwarding of packets through a hierarchy of mobility
               agents such that the binding cache entries in the
               regional mobility agents are used for packet forwarding.

   This terminology is intended to conform to those that have been
   used in Mobile IP and other Internet protocols.  Basic Mobile IPv6
   terminology is used as defined in [2] and [5].


3. Protocol Operation

   When a corresponding node sends data packets to a mobile node to
   which it does not yet have an entry in its binding cache, these
   packets are intercepted by the home agent and encapsulated to
   the registered care-of-address mobile node, as specified in the
   basic Mobile IPv6.  However, this care-of-address is the regional
   care-of-address.

   When a corresponding node has received a binding update, it knows
   the regional care-of-address and sends packets to the mobile node
   using this address as the destination address.  The corresponding
   node includes a type 0 routing header to the packet so that the home




Malinen, Perkins            Expires 1 November 2001             [Page 3]

Internet Draft       Mobile IPv6 Regional Forwarding        1 March 2001


   address of the mobile node is the only entry in the routing header,
   as specified in the basic Mobile IPv6.

   A regional-aware router forwards a packet to the next lower
   regional-aware router in a special way.  If there is an entry in the
   regional binding cache for the home address in the routing header,
   the routing header is kept in its original state.  That is, the home
   address remains in the routing header entry, and the `segments left'
   field is not decreased.

   The packet is then forwarded using the regional binding cache
   entry.  The destination address of the packet is replaced with the
   care-of-address in the regional binding cache and the packet is then
   submitted back to the IP forwarding engine for further processing.

   When the mobile node receives the packet that has been forwarded
   using regional-aware data routing, it consumes the routing header
   after swapping the regional care-of-address as the IP destination.
   The mobile node sets the destination to be the home address,
   swaps the regional care-of-address from the binding update list to
   the place of the home address in the routing header, and finally
   decreases the segments left prior to submitting the packet to IPSec.
   The authentication header [4] integrity check calculation is then
   identical to what would be needed in a basic Mobile IP mobile node.

   From the received packet the mobile node also observes if packets
   have the encapsulation or routing header and can distinguish whether
   to send a binding update to a corresponding node, as in basic Mobile
   IPv6.

   When the mobile node sends packets to a correspondent node, the
   source address is the primary care-of-address of the mobile node,
   and the destination address is the corresponding node.  The packets
   contain the home address extension [3].  Thus, routing towards the
   correspondent node occurs exactly as with the basic Mobile IPv6.


4. New requirements for IPv6 Nodes

   The presented option requires modifications to the visited-domain
   routers and to the mobile node.  The option does pose no new
   requirements to the home agent, to correspondent nodes, or to other
   network elements than to the regional-aware routers in the visited
   domain and the mobile node.








Malinen, Perkins            Expires 1 November 2001             [Page 4]

Internet Draft       Mobile IPv6 Regional Forwarding        1 March 2001


4.1. Visited Domain Router Requirements

   The support of the protocol is optional.  The visited domain router
   needs a modification to the routing header processing such that a
   binding cache lookup precedes normal routing header processing.  If
   a care-of-address is found for the address in the routing header, no
   further routing header processing is done and the care-of-address is
   inserted to the destination address of the IP header.

   The protocol modifies the routing engine, but the only modification
   needed is almost trivial to a software-based IPv6 forwarding engine.


4.2. Mobile Node Requirements

   A regional-aware mobile node needs to perform the same operation
   for received packets as a visited domain router does.  This ensures
   the packet is correct for authentication.  A lookup based on a home
   address in a mobile node is fast because there usually are not many
   home addresses in a mobile node.


5. Security Considerations

   The regional-aware mobile uses IPsec authentication header for
   security as in basic Mobile IPv6.  The mobile node modification is
   needed to make the authentication header integrity check value (ICV)
   calculation to succeed.  This is achieved by returning the packet to
   such a state that it contains the same immutable elements as were in
   the packet when computing the AH ICV field by the sender.


6. Intellectual Property Right Considerations

   Nokia Corporation and/or its affiliates hereby declare that they are
   in conformance with Section 10 of RFC 2026.  Nokia's contributions
   may contain one or more patents or patent applications.  To the
   extent Nokia's contribution is adopted to the specification, Nokia
   undertakes to license patents technically necessary to implement the
   specification on fair, reasonable, and nondiscriminatory terms based
   on reciprocity.











Malinen, Perkins            Expires 1 November 2001             [Page 5]

Internet Draft       Mobile IPv6 Regional Forwarding        1 March 2001


References

   [1] S. Bradner.  Key words for use in RFCs to Indicate Requirement
       Levels.  Request for Comments (Best Current Practice) 2119,
       Internet Engineering Task Force, March 1997.

   [2] D. Johnson and C. Perkins.  Mobility Support in IPv6 (work in
       progress).  Internet Draft, Internet Engineering Task Force,
       November 2000.

   [3] D. Johnson and C. Perkins.  Mobility Support in IPv6 (work in
       progress).
       draft-ietf-mobileip-ipv6-13.txt, October 2000.

   [4] S. Kent and R. Atkinson.  IP Authentication Header.  Request for
       Comments (Proposed Standard) 2402, Internet Engineering Task
       Force, November 1998.

   [5] J. Malinen and C. Perkins.  Mobile IPv6 Regional Registrations
       (work in progress).  Internet Draft, Internet Engineering Task
       Force, March 2001.


Addresses

   The working group can be contacted via the current chairs:

        Basavaraj Patil                     Phil Roberts
        Nokia Corporation                   Motorola
        6000 Connection Drive               1501 West Shure Drive
        M/S M8-540
        Irving, Texas 75039                 Arlington Heights, IL 60004
        USA                                 USA
        Phone:  +1 972-894-6709             Phone:  +1 847-632-3148
        Fax :  +1 972-894-5349
        EMail:  Basavaraj.Patil@nokia.com   EMail:  QA3445@email.mot.com


   Questions about this memo can also be directed to the authors:

        Jari T. Malinen                 Charles E. Perkins
        Communications Systems Lab      Communications Systems Lab
        Nokia Research Center           Nokia Research Center
        313 Fairchild Drive             313 Fairchild Drive
        Mountain View, California 94043 Mountain View, California 94043
        USA                             USA
        Phone:  +1-650 625-2355         Phone:  +1-650 625-2986
        EMail:  jmalinen@iprg.nokia.com EMail:  charliep@iprg.nokia.com
        Fax:  +1 650 625-2502           Fax:  +1 650 625-2502



Malinen, Perkins            Expires 1 November 2001             [Page 6]
