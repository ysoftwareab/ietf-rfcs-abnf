<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Survey of proposed use cases for the IPv6 flow label</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Survey of proposed use cases for the IPv6 flow label">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Independent Submission</td><td class="header">Q. Hu</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">B. Carpenter</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">Univ. of Auckland</td></tr>
<tr><td class="header">Expires: February 19, 2011</td><td class="header">August 18, 2010</td></tr>
</table></td></tr></table>
<h1><br />Survey of proposed use cases for the IPv6 flow label<br />draft-hu-flow-label-cases-01</h1>

<h3>Abstract</h3>

<p>The IPv6 protocol includes a flow label in every packet header, but it is not used in practice. This paper describes the flow label standard and discusses the implementation issues that it raises. It then describes various published proposals for using the flow label, and shows that most of them are inconsistent with the standard. Methods to address this problem are briefly reviewed. We also question whether the standard should be revised.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on February 19, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Flow label definition and issues<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.1.</a>&nbsp;
Flow label properties<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.2.</a>&nbsp;
Dependency prohibition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.3.</a>&nbsp;
Other issues<br />
<a href="#anchor5">3.</a>&nbsp;
Documented proposals for the flow label<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.</a>&nbsp;
Specify the flow label as a pseudo-random value<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.</a>&nbsp;
Specify QoS parameters in the flow label<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.</a>&nbsp;
Use flow label to control switching<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.4.</a>&nbsp;
Diffserv use of IPv6 flow label<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.5.</a>&nbsp;
Other uses<br />
<a href="#anchor11">4.</a>&nbsp;
Discussion<br />
<a href="#anchor12">5.</a>&nbsp;
Conclusion<br />
<a href="#security">6.</a>&nbsp;
Security Considerations<br />
<a href="#iana">7.</a>&nbsp;
IANA Considerations<br />
<a href="#ack">8.</a>&nbsp;
Acknowledgements<br />
<a href="#changes">9.</a>&nbsp;
Change log<br />
<a href="#rfc.references1">10.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>For many years it has been recognized that real-time Internet traffic requires a different quality of service from general data traffic, and this remains true in the era of network neutrality. Thus an alternative to uniform best-effort service is needed, requiring packets to be classified as belonging to a particular class of service or flow. Currently, this leads to a layer violation problem, since a 5-tuple is often used to classify each packet. The 5-tuple includes source and destination addresses, port numbers, and the transport protocol type, so when we want to forward or process packets, we need to extract information from the layer above IP. This may be impossible when packets are encrypted such that port numbers are hidden, or when packets are fragmented, so
the layer violation is not an academic concern.

</p>
<p>
IPv6 will progressively replace the current IPv4 protocol. This will solve the Internet's address shortage, but it also offers a new feature to resolve the above difficulty, i.e., the flow label field in the IPv6 packet header. The flow label is not encrypted by IPsec, and is present in all fragments. It was reserved in the IPv6 packet header in 1995 <a class='info' href='#RFC1883'>[RFC1883]<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1995.</span><span>)</span></a>, and general rules governing its use were defined in 2004 <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>, but it is still rarely set in IPv6 packets.  This paper reviews the syntax and semantics of the flow label, and then describes various proposals that have been made for its use.

</p>
<p>
The original proposal for a random flow label has been attributed to Dave Clark
<a class='info' href='#Deering'>[Deering]<span> (</span><span class='info'>Deering, S., &ldquo;SIPP Overview and Issues,&rdquo; November&nbsp;1993.</span><span>)</span></a>. A flow label field was included in the IPv6 packet header during the preliminary design of IPv6, which followed an intense period of debate about several competing proposals. The final choice was made in 1994 <a class='info' href='#RFC1752'>[RFC1752]<span> (</span><span class='info'>Bradner, S. and A. Mankin, &ldquo;The Recommendation for the IP Next Generation Protocol,&rdquo; January&nbsp;1995.</span><span>)</span></a>. In particular, the IETF rejected a proposal known as CATNIP <a class='info' href='#RFC1707'>[RFC1707]<span> (</span><span class='info'>McGovern, M. and R. Ullmann, &ldquo;CATNIP: Common Architecture for the Internet,&rdquo; October&nbsp;1994.</span><span>)</span></a>, which included so-called 'cache handles' to identify the next hop in high performance routers. We recognize this today as a precursor of the MPLS label, and it introduced the notion of a header field that would be shared by all packets belonging to a flow, on a hop-by-hop basis. The IETF decided instead to develop a proposal known as SIPP into IP version 6. SIPP included "labeling of packets belonging to particular traffic 'flows' for which the sender requests special handling, such as non-default quality of service or 'real-time' service" <a class='info' href='#RFC1710'>[RFC1710]<span> (</span><span class='info'>Hinden, R., &ldquo;Simple Internet Protocol Plus White Paper,&rdquo; October&nbsp;1994.</span><span>)</span></a>.  
In 1994, this was a 28-bit flow label field. In 1995 it was down to 24 bits <a class='info' href='#RFC1883'>[RFC1883]<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1995.</span><span>)</span></a> and it was finally reduced to 20 bits <a class='info' href='#RFC2460'>[RFC2460]<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1998.</span><span>)</span></a> to accommodate the IPv6 Traffic Class, which is fully compatible with the IPv4 Type of Service byte.

</p>
<p>
There was considerable debate in the IETF about the very purpose of the flow label. Was it to be a handle for fast switching, as in CATNIP, or was it to be meaningful to applications and for quality of service? Must it be set by the sending host, or could it be set by routers? Could it be modified en route, or must it be delivered with no change? Because of these uncertainties, and more urgent work, the flow label was consistently ignored by implementors, and today is set to zero in almost every IPv6 packet. 
In fact, <a class='info' href='#RFC2460'>[RFC2460]<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1998.</span><span>)</span></a> defined it as "experimental and subject to change."
After preliminary work such as <a class='info' href='#I-D.metzler-ipv6-flowlabel'>[I&#8209;D.metzler&#8209;ipv6&#8209;flowlabel]<span> (</span><span class='info'>Metzler, J. and S. Hauth, &ldquo;An end-to-end usage of the IPv6 flow label,&rdquo; November&nbsp;2000.</span><span>)</span></a>, 
<a class='info' href='#I-D.conta-ipv6-flow-label'>[I&#8209;D.conta&#8209;ipv6&#8209;flow&#8209;label]<span> (</span><span class='info'>Conta, A. and B. Carpenter, &ldquo;A proposal for the IPv6 Flow Label Specification,&rdquo; July&nbsp;2001.</span><span>)</span></a>, 
<a class='info' href='#I-D.conta-diffserv-ipv6-fl-classifier'>[I&#8209;D.conta&#8209;diffserv&#8209;ipv6&#8209;fl&#8209;classifier]<span> (</span><span class='info'>Conta, A. and J. Rajahalme, &ldquo;Amodel for Diffserv use of the IPv6 Flow Label Specification,&rdquo; November&nbsp;2001.</span><span>)</span></a> and 
<a class='info' href='#I-D.itojun-ipv6-flowlabel-api'>[I&#8209;D.itojun&#8209;ipv6&#8209;flowlabel&#8209;api]<span> (</span><span class='info'>Hagino, J., &ldquo;Socket API for IPv6 flow label field,&rdquo; April&nbsp;2001.</span><span>)</span></a>, 
the standard <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> intended to clarify this situation by providing precise boundary conditions for use of the flow label.

</p>
<p>
This paper summarizes the resulting definition of the flow label and some open issues about its use, and then describes and analyses various use cases that have been proposed, before drawing conclusions and suggesting a strategy.

</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Flow label definition and issues</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Flow label properties</h3>

<p>
The flow label field occupies bits 12 through 31 of the IPv6 packet header, providing an easy way to mark a packet, identify a flow, and look up the flow state. This field is always present, so a phrase such
as "a packet with no flow label" refers to a packet whose flow label field contains 20 zero bits,
i.e., a flow label whose value is zero.
<a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> standardizes properties of the flow label, including:
</p>
<ul class="text">
<li>If the packets are not part of any flow, the flow label value is zero.


</li>
<li> The 3-tuple {source address, destination address, flow label} uniquely identifies which packets belong to which particular flow.


</li>
<li> Packets can receive flow-specific treatment if the node has been set up with flow-specific state.


</li>
<li> The flow label set by the source node must be delivered to the destination node. 


</li>
<li> The same pair of source and destination must not use the same flow label value again within 120 seconds or more.

</li>
</ul>
<p>
One effect of these rules is to avoid the layer violation problem mentioned in <a class='info' href='#intro'>Section&nbsp;1<span> (</span><span class='info'>Introduction</span><span>)</span></a>. By using the 3-tuple, we only use the IP layer to classify packets, without needing any transport layer information. Also we can reduce the lookup time if flow-based treatment is required, and we can do this even with IPsec encryption and fragmentation. Therefore, for traffic needing other than best-effort service, such as real-time applications, the flow label can be set to different values to represent different flows, and each node may provide different flow-specific treatments by looking at the flow label value. This is more fine-grained than differentiated services 
(Diffserv) <a class='info' href='#Carpenter'>[Carpenter]<span> (</span><span class='info'>Carpenter, B. and K. Nichols, &ldquo;Differentiated Services in the Internet,&rdquo; 2002.</span><span>)</span></a>, <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a> but need not be less efficient.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Dependency prohibition</h3>

<p>
An additional important rule in the standard <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> effectively forbids any encoding of meaning in the bits of the flow label. To be exact, the standard states that "IPv6 nodes MUST NOT assume any mathematical or other properties of the flow Label values assigned by source nodes." Without this rule, if a packet with a non-zero flow label that is not from a source using a particular encoding method reaches a node that is following that method, and if by chance the bits in the flow label would be meaningful in that method, the receiver would misinterpret the flow label.

</p>
<p>
The standard also states "Router performance SHOULD NOT be dependent on the distribution of the Flow Label values. Especially, the Flow Label bits alone make poor material for a hash key." The problem this rule is intended to avoid is that if a source uses a simple method of choosing flow labels (e.g., counting up from 1), any router that assumes pseudo-randomness, e.g., to choose alternative routes for load-balancing, will be misled.

</p>
<p>
Note that there is no easy escape from the combination of these two prohibitions, which we will call the dependency prohibition. Unlike Diffserv code points, flow labels are not locally significant within a single administrative domain; they must be preserved end-to-end. In general, a router cannot know whether a particular packet originated in a host supporting a specific usage of the flow label. Therefore, any method that breaks one or both of these rules will only work if there is some method for the routers concerned to determine at line speed which sources use the same method.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Other issues</h3>

<p>
How to use flow label most effectively is not discussed in <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> and remains the major open issue, but many researchers believe that it can be used with reserved bandwidth to achieve customized Quality of Service (QoS) provision.  Coupled with admission control at the edge router, this should limit congestion. However, as we will see below, this is not the only use case proposed.

</p>
<p>
We now introduce some other open issues.

</p>
<p>
Unknown flow labels: <a class='info' href='#RFC1809'>[RFC1809]<span> (</span><span class='info'>Partridge, C., &ldquo;Using the Flow Label Field in IPv6,&rdquo; June&nbsp;1995.</span><span>)</span></a> proposed that when a router receives a datagram with an unknown flow label, it should treat it as zero. However, the standard <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> is silent on this issue. Indeed, some methods of flow state establishment might choose to use an unknown label as the trigger for creating flow state.

</p>
<p>
Deleting old flow labels: When a flow finishes, how does the router know the flow label has expired? Should this be based on a timeout, on observation of the transport layer, or on explicit signalling? The standard defines a timeout (120 seconds) after which a receiving node should discard a previously recorded flow label if there is no more traffic. However, this will be unsatisfactory in the case of a very intermittent flow. In contrast, 
<a class='info' href='#I-D.banerjee-flowlabel-ipv6-qos'>[I&#8209;D.banerjee&#8209;flowlabel&#8209;ipv6&#8209;qos]<span> (</span><span class='info'>Banerjee, R., &ldquo;A Modified Specification for use of the IPv6 Flow Label for providing An  efficient Quality of Service using hybrid approach,&rdquo; April&nbsp;2002.</span><span>)</span></a> suggested that a router should send an ICMP message to the source to delete a particular label. The source node can then either send a KEEPALIVE message to the router, or it can allow the router to release that label.

</p>
<p>
Choosing when to set the flow label: For what kinds of application should we set up non-zero flow labels?  <a class='info' href='#RFC1809'>[RFC1809]<span> (</span><span class='info'>Partridge, C., &ldquo;Using the Flow Label Field in IPv6,&rdquo; June&nbsp;1995.</span><span>)</span></a> suggested not setting it for short flows containing few bytes, but using it for long TCP connections and some real-time applications. However, this does not really define clear use cases.

</p>
<p>
Can we modify the flow label? <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> states that the flow label must be delivered unchanged. There are several advantages of non-mutable flow labels, apart from respecting the standard: the rule is easy to understand, does not require extra processing in routers or a signalling protocol, and allows for very simple host implementations. Also, it is straightforward for hosts and routers to simply ignore the flow label. However, this rule does appear to exclude any MPLS-like or CATNIP-like use for optimized packet switching. Some authors have objected to this feature, suggesting that switches should change the flow label for routing purposes. We will describe these and other proposed mechanisms in next section,  and we will discuss their advantages and disadvantages.

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Documented proposals for the flow label</h3>

<p>In the following, we do not intend to recommend or criticise various proposals. The intention
is only to show the variety of proposals that have been published, and how they relate
to the standard.
We consider that published proposals for the flow label fall into three broad categories, i.e.,  (1) improve routing performance by using random flow label values; (2) define a QoS requirement in the flow label field; (3) use the flow label to extend existing QoS architectures such as Diffserv.  Across these categories, we observe various options to set up the flow label value.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Specify the flow label as a pseudo-random value</h3>

<p>
For example, <a class='info' href='#LinTseng'>[LinTseng]<span> (</span><span class='info'>Lin, C., Tseng, P., and W. Hwang, &ldquo;End-to-End QoS Provisioning by Flow Label in IPv6,&rdquo; 2006.</span><span>)</span></a> specifies a 17-bit pseudo-random value. The following figure shows the proposed flow label structure, which assumes that routers can support flow label and DiffServ architectures. 
</p>
<ul class="text">
<li> The Label Flag (LF) bit: 1 means this type of flow label is present. We note that this encoding breaks the dependency prohibition in <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>, since a source that does not use this method may also set the LF bit.

</li>
<li> The Label type (LT): 2 bits which describe the type of packet.

</li>
<li> The Label Number (LN): which is randomly generated by the source node.

</li>
</ul>
<p>
<a class='info' href='#LinTseng'>[LinTseng]<span> (</span><span class='info'>Lin, C., Tseng, P., and W. Hwang, &ldquo;End-to-End QoS Provisioning by Flow Label in IPv6,&rdquo; 2006.</span><span>)</span></a> also describes a signalling process between source, routing and destination nodes based on this label structure and on the IPv6 Traffic Class byte, in order to reserve and release router resources for a given flow within a given class of traffic. The pseudo-random LN value is used to uniquely identify a given flow.

</p>
<p>
Flow Label Specification (figure simplified from <a class='info' href='#LinTseng'>[LinTseng]<span> (</span><span class='info'>Lin, C., Tseng, P., and W. Hwang, &ldquo;End-to-End QoS Provisioning by Flow Label in IPv6,&rdquo; 2006.</span><span>)</span></a>)
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      +--+----+-----------------------------+
      | 1| 2  |              17 bits        |
      +--+----+-----------------------------+
      |LF| LT |              LN             |
      +--+----+-----------------------------+

LF   0  Disable
     1  Enable
LT  00  Flow label requested by source
    01  Flow label returned by destination
    10  Flow label for data delivery
    11  Flow label terminates connection
LN      Random number created by source

</pre></div><p>


</p>
<p>
<a class='info' href='#I-D.blake-ipv6-flow-label-nonce'>[I&#8209;D.blake&#8209;ipv6&#8209;flow&#8209;label&#8209;nonce]<span> (</span><span class='info'>Blake, S., &ldquo;Use of the IPv6 Flow Label as a Transport-Layer Nonce to Defend Against Off-Path Spoofing Attacks,&rdquo; October&nbsp;2009.</span><span>)</span></a> states that off-path spoofing attacks have become a big issue for TCP and other transport-layer applications, and proposes that in IPv6 we should set a random value in the flow label to make the packet header more complex and less easy for the attacker to guess.  The two ends of the session will agree on flow label values during the SYN/ACK exchange, but off-path attackers will be unlikely to guess the agreed value. Naturally, on-path attackers who can observe the flow labels in use can trivially defeat this protection.

</p>
<p>
There have been numerous informal discussions of using random flow labels to allow load-balancing or at least load-sharing. However, concerns about the dependency prohibition have generally prevented such proposals from being written up until recently <a class='info' href='#I-D.carpenter-flow-ecmp'>[I&#8209;D.carpenter&#8209;flow&#8209;ecmp]<span> (</span><span class='info'>Carpenter, B. and S. Amante, &ldquo;Using the IPv6 flow label for equal cost multipath routing and link aggregation in tunnels,&rdquo; April&nbsp;2010.</span><span>)</span></a>.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Specify QoS parameters in the flow label</h3>

<p>
<a class='info' href='#Prakash'>[Prakash]<span> (</span><span class='info'>Prakash, B., &ldquo;Using the 20 bit flow label field in the IPv6 header to indicate desirable quality of service on the internet,&rdquo; 2004.</span><span>)</span></a> proposes to utilize the flow label to indicate required QoS parameters in detail. It uses the first few bits of the flow label field as codes to support different approaches, as summarized in  following table. Again, this breaks the dependency prohibition in <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>, since a source that does not use this method may also set the first two bits to non-zero.

</p>
<p>Classification for various approaches (from <a class='info' href='#Prakash'>[Prakash]<span> (</span><span class='info'>Prakash, B., &ldquo;Using the 20 bit flow label field in the IPv6 header to indicate desirable quality of service on the internet,&rdquo; 2004.</span><span>)</span></a>)
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Bit Pattern   Approach
  ------------------------------------------------------------------
  00            No QoS requirement (Default QoS value)
  01            Pseudo-Random value used for the value of Flow-Label
  10            Support for Direct Parametric Representation
  1100          Support for the DiffServ Model
  1101          Reserved for future use
  111           Reserved for future use
</pre></div>
<p>
This method does allow for a pseudo-random option, but also adds options for a direct QoS request and for Diffserv.  In the direct QoS parameters approach, 18 bits are used to encode requirements for one way delay, IP delay variation, bandwidth and one way packet loss. The proposal appears to assume that RSVP
<a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>  mechanisms are used to actually implement these QoS parameters.

</p>
<p>
This proposal allows use of flow label for various important QoS models, so the end user and service provider can choose the most suitable model for their situation; <a class='info' href='#Prakash'>[Prakash]<span> (</span><span class='info'>Prakash, B., &ldquo;Using the 20 bit flow label field in the IPv6 header to indicate desirable quality of service on the internet,&rdquo; 2004.</span><span>)</span></a> claims that "this proposal is simple, scalable, modular and generic implementation to provide for QoS using the IPv6 flow label field".

</p>
<p>
Similarly, <a class='info' href='#LeeKim'>[LeeKim]<span> (</span><span class='info'>Lee, I. and S. Kim, &ldquo;A QoS Improvement Scheme for Real-Time Traffic Using IPv6 Flow Labels,&rdquo; 2004.</span><span>)</span></a> defines the flow label field in five parts, with the first 3 bits used as an approach type, because the authors have defined two approaches: a "random" scheme and a "hybrid" scheme. If the first 3 bits equal "001", the flow label will be used as the random identifier of the flow, but if they equal "101", the remaining bits will include the hybrid QoS requirement for this packet, subdivided into traffic type (stringent or best effort), bandwidth, buffer, and delay requirements. Once again the dependency prohibition in <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> is broken. This proposal also includes throughput monitoring and dynamic capacity allocation. Effectively this proposal uses the flow label both to signal Intserv-like QoS requirements and to classify traffic into Diffserv-like virtual label-switched paths. Packets with a "random" flow label are mapped into a generic (best effort) virtual path.

</p>
<p>
The authors simulated this architecture for a network of fourteen nodes, using the NS-2 simulator with a weighted fair queueing extension to support the "hybrid" scheme. Their results indicate that the "hybrid" scheme improves capacity utilization for QoS traffic and performance for real-time traffic, rather in the manner of differentiated services, whereas competing traffic using the "random" scheme simply experiences best effort service. It must be considered, however, that NS-2 does not accurately simulate the performance of typical high-performance routers.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Use flow label to control switching</h3>

<p>
<a class='info' href='#I-D.chakravorty-6lsa'>[I&#8209;D.chakravorty&#8209;6lsa]<span> (</span><span class='info'>Chakravorty, S., Bush, J., and J. Bound, &ldquo;IPv6 Label Switching Architecture,&rdquo; July&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#Chakravorty'>[Chakravorty]<span> (</span><span class='info'>Chakravorty, S., &ldquo;Challenges of IPv6 Flow Label implementation,&rdquo; 2008.</span><span>)</span></a> describe an architectural framework called "IPv6 Label Switching Architecture" (6LSA). In 6LSA, network components identify a flow by looking at the flow label field in the IPv6 packet header; all packets with the same flow label must receive the same treatment and be sent to the same next hop. However, 6LSA resembles MPLS by considering that a label only has meaning between 6LSA routers, and setting the flow label at each hop. If the original source sets a non-zero flow label, there is no mechanism to restore it before delivery, a fundamental breach of <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>. The authors of <a class='info' href='#I-D.chakravorty-6lsa'>[I&#8209;D.chakravorty&#8209;6lsa]<span> (</span><span class='info'>Chakravorty, S., Bush, J., and J. Bound, &ldquo;IPv6 Label Switching Architecture,&rdquo; July&nbsp;2008.</span><span>)</span></a> did at one stage discuss using an IPv6 hop-by-hop option to correct this problem, but this has not been documented. This is a more serious problem than simply  breaking the dependency prohibition

</p>
<p>
Unlike traditional routing algorithms, but like MPLS, 6LSA packets are classified into a Forwarding Equivalence Class (FEC), and routers forward packets on different paths by looking at the FEC. Like previous solutions, the authors divide the flow label field into three parts. The first 3 bits identify the FEC, which will help the router or 6LSA nodes to group the IP packets that receive the same forwarding treatment and forwarding them on the same virtual path. The following 4 bits describe the application type, and the final 13 bits (defined by each node or a group of nodes) specify the hop-specific label. From the table below, we can see the FEC has 6 major categories, each with up to 16 subcategories. 

</p>
<p>Flow Label Specification (shortened from <a class='info' href='#I-D.chakravorty-6lsa'>[I&#8209;D.chakravorty&#8209;6lsa]<span> (</span><span class='info'>Chakravorty, S., Bush, J., and J. Bound, &ldquo;IPv6 Label Switching Architecture,&rdquo; July&nbsp;2008.</span><span>)</span></a>)
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   +--------------------------+-------------+--------------------------+
   | FEC (First 3 Bits)       | Next 4 Bits | Purpose                  |
   +--------------------------+-------------+--------------------------+
   | No FEC (000)             | 0000        |                          |
   | Domain Specific (000)    | 0001 - 1111 |                          |
   | ------------------------ |             |                          |
   | VPN (001)                | 0001        | (IPSec - Tunnel Mode)    |
   |                          | 0010        | (IPSec - Transport Mode) |
   |                          | 0011        | (Special Encryption)     |
   |                          | 0100        | (VRF)                    |
   |                          | 0101        | (End Network Specific)   |
   |                          | 0110 - 1111 | (Reserved)               |
   | ------------------------ |             |                          |
   | TE Subset/               | 0001        | (DiffServ)               |
   | QoS Enhancement (010)    | 0010        | (RSVP)                   |
   . . .
   |                          | 1111        | (Reserved)               |
   | ------------------------ |             |                          |
   | Encapsulation (011)      | 0001        | (IPv6 in IPv6)           |
   |                          | 0010        | (IPv4 in IPv6)           |
   |                          | 0011        | (Other in IPv6)          |
   |                          | 0100        | (Enterprise Specific)    |
   |                          | 0101 - 1111 | (Reserved)               |
   | ------------------------ |             |                          |
   | Enterprise Specific(111) | 0000 - 1111 | (Reserved)               |
   +--------------------------+-------------+--------------------------+
</pre></div>
<p>
The authors claim that fast switching using 20-bit labels instead of 128-bit IPv6 addresses will provide memory and processing savings, as well as network management advantages.  "It also allows a network management entity updating available label tables, across the network to reduce man-in-the-middle attacks [sic]"
<a class='info' href='#I-D.chakravorty-6lsa'>[I&#8209;D.chakravorty&#8209;6lsa]<span> (</span><span class='info'>Chakravorty, S., Bush, J., and J. Bound, &ldquo;IPv6 Label Switching Architecture,&rdquo; July&nbsp;2008.</span><span>)</span></a>.

</p>
<p>
We note that a similar proposal for QoS-based switching of IPv6 packets <a class='info' href='#I-D.roberts-inband-qos-ipv6'>[I&#8209;D.roberts&#8209;inband&#8209;qos&#8209;ipv6]<span> (</span><span class='info'>Roberts, L. and J. Harford, &ldquo;In-Band QoS Signaling for IPv6,&rdquo; July&nbsp;2005.</span><span>)</span></a> is designed to use a hop-by-hop option, which has not so far been allocated by the IETF. Proposals related to this have been discussed by the Telecommunications Industry Association and the ITU-T <a class='info' href='#I-D.adams-tsvwg-flow-signalling-codepoint'>[I&#8209;D.adams&#8209;tsvwg&#8209;flow&#8209;signalling&#8209;codepoint]<span> (</span><span class='info'>song, j., Adams, J., and J. Joung, &ldquo;Progress and future development of Flow State Aware standards, and a  proposal for alerting nodes or end-systems on data related to a flow,&rdquo; June&nbsp;2008.</span><span>)</span></a>.

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Diffserv use of IPv6 flow label</h3>

<p>
<a class='info' href='#I-D.banerjee-flowlabel-ipv6-qos'>[I&#8209;D.banerjee&#8209;flowlabel&#8209;ipv6&#8209;qos]<span> (</span><span class='info'>Banerjee, R., &ldquo;A Modified Specification for use of the IPv6 Flow Label for providing An  efficient Quality of Service using hybrid approach,&rdquo; April&nbsp;2002.</span><span>)</span></a> uses the flow label field as a replacement for the IPv6 Traffic Class field; this proposal suggests the incoming flow label can indicate the QoS requirement by matching a Diffserv classifier. The authors have used the first three bits to indicate this, and the following 16 bits to indicate Differentiated Services Per-Hop Behavior Identification code (Diffserv PHB-ID) <a class='info' href='#RFC3140'>[RFC3140]<span> (</span><span class='info'>Black, D., Brim, S., Carpenter, B., and F. Le Faucheur, &ldquo;Per Hop Behavior Identification Codes,&rdquo; June&nbsp;2001.</span><span>)</span></a>; the last bit is reserved for future use.  This method too breaks the dependency prohibition in <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>.

</p>
<p>
<a class='info' href='#I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching'>[I&#8209;D.martinbeckman&#8209;ietf&#8209;ipv6&#8209;fls&#8209;ipv6flowswitching]<span> (</span><span class='info'>Beckman, M., &ldquo;IPv6 Dynamic Flow Label Switching (FLS),&rdquo; March&nbsp;2007.</span><span>)</span></a> blends the flow label as an MPLS-like switching tag with Diffserv. Unlike 6LSA, the method attempts to overcome the dependency prohibition by using one bit in the Diffserv Code Point <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a> to indicate that the flow label is a switching tag. In this way, a router can determine whether the flow label conforms to <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> or to <a class='info' href='#I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching'>[I&#8209;D.martinbeckman&#8209;ietf&#8209;ipv6&#8209;fls&#8209;ipv6flowswitching]<span> (</span><span class='info'>Beckman, M., &ldquo;IPv6 Dynamic Flow Label Switching (FLS),&rdquo; March&nbsp;2007.</span><span>)</span></a>. In <a class='info' href='#I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp'>[I&#8209;D.martinbeckman&#8209;ietf&#8209;ipv6&#8209;amp&#8209;ipv6hcamp]<span> (</span><span class='info'>Beckman, M., &ldquo;IPv6 Header Compression via Addressing Mitigation Protocol (IPv6 AMP),&rdquo; March&nbsp;2007.</span><span>)</span></a>, the same author proposes using the flow label as a way of compressing IPv6 headers by hashing the addresses into the flow label, again using the Diffserv Code Point to mark the packets accordingly.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Other uses</h3>

<p>
We are not aware of any proposals combining the flow label with the other two Internet QoS architectures (Integrated Services <a class='info' href='#RFC1633'>[RFC1633]<span> (</span><span class='info'>Braden, B., Clark, D., and S. Shenker, &ldquo;Integrated Services in the Internet Architecture: an Overview,&rdquo; June&nbsp;1994.</span><span>)</span></a> and Next Steps in Signaling (NSIS) <a class='info' href='#RFC4080'>[RFC4080]<span> (</span><span class='info'>Hancock, R., Karagiannis, G., Loughney, J., and S. Van den Bosch, &ldquo;Next Steps in Signaling (NSIS): Framework,&rdquo; June&nbsp;2005.</span><span>)</span></a>), except for generic recognition that the flow label can be inspected by a packet classifier. 

</p>
<p>
<a class='info' href='#I-D.donley-softwire-dslite-flowlabel'>[I&#8209;D.donley&#8209;softwire&#8209;dslite&#8209;flowlabel]<span> (</span><span class='info'>Donley, C. and K. Erichsen, &ldquo;Using the Flow Label with Dual-Stack Lite,&rdquo; July&nbsp;2010.</span><span>)</span></a> proposes a use case whereby certain flows
encapsulated in a particular type of IPv4-in-IPv6 tunnel would be distinguished at the remote
end of the tunnel by a specific flow label value. This would allow a service provider
to deliver a tailored quality of service. This usage appears to be completely compatible
with <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>.

</p>
<p>
There has been some discussion of possible flow label use in both the ROLL 
(Routing Over Low power and Lossy networks) <a class='info' href='#I-D.ietf-roll-rpl-07'>[I&#8209;D.ietf&#8209;roll&#8209;rpl&#8209;07]<span> (</span><span class='info'>Winter, T. and P. Thubert, &ldquo;RPL: IPv6 Routing Protocol for Low power and Lossy Networks,&rdquo; March&nbsp;2010.</span><span>)</span></a>
and MEXT (Mobility EXTensions for IPv6) working groups of the IETF. Such uses tend to encode
specific local meanings or routing-related tags in the label, so they appear to infringe the dependency
prohibition or the immutability of the flow label field. The ROLL group has indeed most recently opted not to use the flow label field for these reasons, despite having to add the undesirable overhead of an IPv6 hop-by-hop option instead <a class='info' href='#I-D.ietf-roll-rpl'>[I&#8209;D.ietf&#8209;roll&#8209;rpl]<span> (</span><span class='info'>Winter, T., Thubert, P., and R. Team, &ldquo;RPL: IPv6 Routing Protocol for Low power and Lossy Networks,&rdquo; July&nbsp;2010.</span><span>)</span></a>. 
Similarly, MEXT has defined a new mobility option to support flow bindings <a class='info' href='#I-D.ietf-mext-flow-binding'>[I&#8209;D.ietf&#8209;mext&#8209;flow&#8209;binding]<span> (</span><span class='info'>Tsirtsis, G., Soliman, H., Montavont, N., Giaretta, G., and K. Kuladinithi, &ldquo;Flow Bindings in Mobile IPv6 and NEMO Basic Support,&rdquo; August&nbsp;2010.</span><span>)</span></a>. It can be argued that ideally, the IPv6 Flow Label field should serve both these purposes.

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Discussion</h3>

<p>
Firstly we notice that three aspects of the current standard <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> have caused problems to many designers:
</p>
<ol class="text">
<li> The non-mutability of labels

</li>
<li> "Nodes MUST NOT assume any mathematical or other properties of the Flow Label" 

</li>
<li> "Router performance SHOULD NOT be dependent on the distribution of the Flow Label values."

</li>
</ol>
<p>
Taken together, these rules essentially forbid any encoding of the semantics of a flow, or of any information about its path, in the flow label. This was intentional, in accordance with the stateless nature of the Internet architecture and with the end-to-end principle <a class='info' href='#Saltzer'>[Saltzer]<span> (</span><span class='info'>Saltzer, J., Reed, D., and D. Clark, &ldquo;End-To-End Arguments in System Design,&rdquo; 1984.</span><span>)</span></a>, <a class='info' href='#RFC3724'>[RFC3724]<span> (</span><span class='info'>Kempf, J., Austein, R., and IAB, &ldquo;The Rise of the Middle and the Future of End-to-End: Reflections on the Evolution of the Internet Architecture,&rdquo; March&nbsp;2004.</span><span>)</span></a>. It was also felt that QoS encoding via Diffserv was sufficient, and that the requirement for high-speed switching could be met by MPLS. But this means that the majority of the proposals described above breach the standard and the intent of the standard. The authors often appear to be using the flow label either as an MPLS-like switching handle, or as an encoded QoS signal. In fact, we consider that only <a class='info' href='#I-D.blake-ipv6-flow-label-nonce'>[I&#8209;D.blake&#8209;ipv6&#8209;flow&#8209;label&#8209;nonce]<span> (</span><span class='info'>Blake, S., &ldquo;Use of the IPv6 Flow Label as a Transport-Layer Nonce to Defend Against Off-Path Spoofing Attacks,&rdquo; October&nbsp;2009.</span><span>)</span></a>, 
<a class='info' href='#I-D.donley-softwire-dslite-flowlabel'>[I&#8209;D.donley&#8209;softwire&#8209;dslite&#8209;flowlabel]<span> (</span><span class='info'>Donley, C. and K. Erichsen, &ldquo;Using the Flow Label with Dual-Stack Lite,&rdquo; July&nbsp;2010.</span><span>)</span></a> 
(and possibly <a class='info' href='#I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching'>[I&#8209;D.martinbeckman&#8209;ietf&#8209;ipv6&#8209;fls&#8209;ipv6flowswitching]<span> (</span><span class='info'>Beckman, M., &ldquo;IPv6 Dynamic Flow Label Switching (FLS),&rdquo; March&nbsp;2007.</span><span>)</span></a> and 
<a class='info' href='#I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp'>[I&#8209;D.martinbeckman&#8209;ietf&#8209;ipv6&#8209;amp&#8209;ipv6hcamp]<span> (</span><span class='info'>Beckman, M., &ldquo;IPv6 Header Compression via Addressing Mitigation Protocol (IPv6 AMP),&rdquo; March&nbsp;2007.</span><span>)</span></a>) strictly respect the intention of the standard. 
<a class='info' href='#I-D.carpenter-flow-ecmp'>[I&#8209;D.carpenter&#8209;flow&#8209;ecmp]<span> (</span><span class='info'>Carpenter, B. and S. Amante, &ldquo;Using the IPv6 flow label for equal cost multipath routing and link aggregation in tunnels,&rdquo; April&nbsp;2010.</span><span>)</span></a> is also intended to conform to the standard.

</p>
<p>
What would designers need to do, if they wish to respect the standard? There appear to be two choices. One is to simply accept the above rules at face value, which as noted appears to be the case in few proposals. This limits the application of the flow label. It can be used as a nonce as in <a class='info' href='#I-D.blake-ipv6-flow-label-nonce'>[I&#8209;D.blake&#8209;ipv6&#8209;flow&#8209;label&#8209;nonce]<span> (</span><span class='info'>Blake, S., &ldquo;Use of the IPv6 Flow Label as a Transport-Layer Nonce to Defend Against Off-Path Spoofing Attacks,&rdquo; October&nbsp;2009.</span><span>)</span></a> or as part of the material for a hash used to share load among alternate paths. It cannot be the only material for such a hash, because of the dependency prohibition. The flow label could also be used
consistently with <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>, if an application designer so chose, as a way to associate all packets belonging to a given application session between two hosts, across multiple transport sessions. This, however, would presumably exclude using the flow label to govern routing decisions in any way, and would have widespread implications that have never been explored.

</p>
<p>
The other choice, for designers who wish to use the flow label to control switching or QoS directly, is to bypass the rules within a given domain (a set of cooperating nodes) in a way that nodes outside the domain cannot detect. In this case, any deviation from <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a> has no possible effect outside the domain in question.

</p>
<p>
For example, to emulate the non-mutability of labels, we could arrange that within the domain all hosts set the label to zero, the routers set and interpret the label in any way they wish, and the last hop router always sets the label back to zero. If a packet arrives from outside the domain with a non-zero label, there would need to be a method (such as a special Diffserv code point) to mark this packet so that its label would be ignored and delivered unchanged. An alternative approach would be to standardize a hop-by-hop option to carry the original flow label across the domain, so that it could be changed within the domain but restored before forwarding the packet beyond the domain.

</p>
<p>
Once we have bypassed non-mutability, we can safely bypass the dependency prohibition for labels within the domain, because it is now possible to ensure that the bits in the label are set according to defined rules. Within the domain, we can treat the label as an expanded Diffserv field, or a 6LSA label, or a random value, etc. In fact most of the proposed designs discussed above could be "rescued."

</p>
<p>
Given the considerable number of designers who have proposed such solutions, and the almost complete lack of designs using the standard rules <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>, it seems reasonable to ask whether the current standard has value.

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Conclusion</h3>

<p>
As real time traffic increases, the  delay and packet loss problem for real time streams has become too serious to be neglected, and many researchers have claimed that the flow label field in the IPv6 header would be a possible solution.  Various proposals assert that the flow label field will improve QoS. However, we find that such proposals breach the current IETF standard for use of the flow label. More work is required to find a new structure which will respect the standard and also provide an effective way to use the flow label. If this cannot be achieved, this aspect of the IPv6 standard may need to be revised.

</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>The flow label is not protected in any way and can be forged by an on-path
attacker. Off-path attackers may be able to guess a valid flow label
unless a pseudo-random value is used. Specific usage models for the flow
label need to allow for these exposures. For further discussion, see <a class='info' href='#RFC3697'>[RFC3697]<span> (</span><span class='info'>Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;IPv6 Flow Label Specification,&rdquo; March&nbsp;2004.</span><span>)</span></a>.  
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This document requests no action by IANA. 
</p>
<a name="ack"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>An invaluable review of this document was performed by Bob Braden. Helpful comments
were made by Sheng Jiang.
</p>
<p>This document was produced using the xml2rfc tool
<a class='info' href='#RFC2629'>[RFC2629]<span> (</span><span class='info'>Rose, M., &ldquo;Writing I-Ds and RFCs using XML,&rdquo; June&nbsp;1999.</span><span>)</span></a>.
</p>
<a name="changes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Change log</h3>

<p>draft-hu-flow-label-cases-00: first I-D version, 2010-04-19
</p>
<p>draft-hu-flow-label-cases-01: updated following review comments, 2010-08-18
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Carpenter">[Carpenter]</a></td>
<td class="author-text">Carpenter, B. and K. Nichols, &ldquo;Differentiated Services in the Internet,&rdquo; Proc IEEE&nbsp;90 (9) 1479-1494, 2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="Chakravorty">[Chakravorty]</a></td>
<td class="author-text">Chakravorty, S., &ldquo;Challenges of IPv6 Flow Label implementation,&rdquo; Proc IEEE MILCOM2008&nbsp;, 2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Deering">[Deering]</a></td>
<td class="author-text">Deering, S., &ldquo;SIPP Overview and Issues,&rdquo; Minutes of the Joint Sessions of the SIP and PIP Working Groups&nbsp;, November&nbsp;1993.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.adams-tsvwg-flow-signalling-codepoint">[I-D.adams-tsvwg-flow-signalling-codepoint]</a></td>
<td class="author-text">song, j., Adams, J., and J. Joung, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-adams-tsvwg-flow-signalling-codepoint-00.txt">Progress and future development of Flow State Aware standards, and a  proposal for alerting nodes or end-systems on data related to a flow</a>,&rdquo; draft-adams-tsvwg-flow-signalling-codepoint-00 (work in progress), June&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-adams-tsvwg-flow-signalling-codepoint-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.banerjee-flowlabel-ipv6-qos">[I-D.banerjee-flowlabel-ipv6-qos]</a></td>
<td class="author-text">Banerjee, R., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-banerjee-flowlabel-ipv6-qos-03.txt">A Modified Specification for use of the IPv6 Flow Label for providing An  efficient Quality of Service using hybrid approach</a>,&rdquo; draft-banerjee-flowlabel-ipv6-qos-03 (work in progress), April&nbsp;2002 (<a href="http://www.ietf.org/internet-drafts/draft-banerjee-flowlabel-ipv6-qos-03.txt">TXT</a>, <a href="http://www.ietf.org/internet-drafts/draft-banerjee-flowlabel-ipv6-qos-03.ps">PS</a>, <a href="http://www.ietf.org/internet-drafts/draft-banerjee-flowlabel-ipv6-qos-03.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.blake-ipv6-flow-label-nonce">[I-D.blake-ipv6-flow-label-nonce]</a></td>
<td class="author-text">Blake, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-blake-ipv6-flow-label-nonce-02.txt">Use of the IPv6 Flow Label as a Transport-Layer Nonce to Defend Against Off-Path Spoofing Attacks</a>,&rdquo; draft-blake-ipv6-flow-label-nonce-02 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-blake-ipv6-flow-label-nonce-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.carpenter-flow-ecmp">[I-D.carpenter-flow-ecmp]</a></td>
<td class="author-text">Carpenter, B. and S. Amante, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-carpenter-flow-ecmp-02.txt">Using the IPv6 flow label for equal cost multipath routing and link aggregation in tunnels</a>,&rdquo; draft-carpenter-flow-ecmp-02 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-carpenter-flow-ecmp-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.chakravorty-6lsa">[I-D.chakravorty-6lsa]</a></td>
<td class="author-text">Chakravorty, S., Bush, J., and J. Bound, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-chakravorty-6lsa-03.txt">IPv6 Label Switching Architecture</a>,&rdquo; draft-chakravorty-6lsa-03 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-chakravorty-6lsa-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.conta-diffserv-ipv6-fl-classifier">[I-D.conta-diffserv-ipv6-fl-classifier]</a></td>
<td class="author-text">Conta, A. and J. Rajahalme, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-conta-diffserv-ipv6-fl-classifier-01.txt">Amodel for Diffserv use of the IPv6 Flow Label Specification</a>,&rdquo; draft-conta-diffserv-ipv6-fl-classifier-01 (work in progress), November&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.conta-ipv6-flow-label">[I-D.conta-ipv6-flow-label]</a></td>
<td class="author-text">Conta, A. and B. Carpenter, &ldquo;A proposal for the IPv6 Flow Label Specification,&rdquo; draft-conta-ipv6-flow-label-02&nbsp;(work in progress), July&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.donley-softwire-dslite-flowlabel">[I-D.donley-softwire-dslite-flowlabel]</a></td>
<td class="author-text">Donley, C. and K. Erichsen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-donley-softwire-dslite-flowlabel-00.txt">Using the Flow Label with Dual-Stack Lite</a>,&rdquo; draft-donley-softwire-dslite-flowlabel-00 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-donley-softwire-dslite-flowlabel-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mext-flow-binding">[I-D.ietf-mext-flow-binding]</a></td>
<td class="author-text">Tsirtsis, G., Soliman, H., Montavont, N., Giaretta, G., and K. Kuladinithi, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mext-flow-binding-09.txt">Flow Bindings in Mobile IPv6 and NEMO Basic Support</a>,&rdquo; draft-ietf-mext-flow-binding-09 (work in progress), August&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mext-flow-binding-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a></td>
<td class="author-text">Winter, T., Thubert, P., and R. Team, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-rpl-11.txt">RPL: IPv6 Routing Protocol for Low power and Lossy Networks</a>,&rdquo; draft-ietf-roll-rpl-11 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-rpl-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-rpl-07">[I-D.ietf-roll-rpl-07]</a></td>
<td class="author-text">Winter, T. and P. Thubert, &ldquo;RPL: IPv6 Routing Protocol for Low power and Lossy Networks,&rdquo; draft-ietf-roll-rpl-07&nbsp;(work in progress), March&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.itojun-ipv6-flowlabel-api">[I-D.itojun-ipv6-flowlabel-api]</a></td>
<td class="author-text">Hagino, J., &ldquo;Socket API for IPv6 flow label field,&rdquo; draft-itojun-ipv6-flowlabel-api-01&nbsp;(work in progress), April&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp">[I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp]</a></td>
<td class="author-text">Beckman, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-martinbeckman-ietf-ipv6-amp-ipv6hcamp-01.txt">IPv6 Header Compression via Addressing Mitigation Protocol (IPv6 AMP)</a>,&rdquo; draft-martinbeckman-ietf-ipv6-amp-ipv6hcamp-01 (work in progress), March&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-martinbeckman-ietf-ipv6-amp-ipv6hcamp-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching">[I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching]</a></td>
<td class="author-text">Beckman, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-martinbeckman-ietf-ipv6-fls-ipv6flowswitching-03.txt">IPv6 Dynamic Flow Label Switching (FLS)</a>,&rdquo; draft-martinbeckman-ietf-ipv6-fls-ipv6flowswitching-03 (work in progress), March&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-martinbeckman-ietf-ipv6-fls-ipv6flowswitching-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.metzler-ipv6-flowlabel">[I-D.metzler-ipv6-flowlabel]</a></td>
<td class="author-text">Metzler, J. and S. Hauth, &ldquo;An end-to-end usage of the IPv6 flow label,&rdquo; draft-metzler-ipv6-flowlabel-00&nbsp;(work in progress), November&nbsp;2000.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.roberts-inband-qos-ipv6">[I-D.roberts-inband-qos-ipv6]</a></td>
<td class="author-text">Roberts, L. and J. Harford, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-roberts-inband-qos-ipv6-00.txt">In-Band QoS Signaling for IPv6</a>,&rdquo; draft-roberts-inband-qos-ipv6-00 (work in progress), July&nbsp;2005 (<a href="http://www.ietf.org/internet-drafts/draft-roberts-inband-qos-ipv6-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="LeeKim">[LeeKim]</a></td>
<td class="author-text">Lee, I. and S. Kim, &ldquo;A QoS Improvement Scheme for Real-Time Traffic Using IPv6 Flow Labels,&rdquo; Lecture Notes in Computer Science&nbsp;Vol. 3043, 2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="LinTseng">[LinTseng]</a></td>
<td class="author-text">Lin, C., Tseng, P., and W. Hwang, &ldquo;End-to-End QoS Provisioning by Flow Label in IPv6,&rdquo; JCIS&nbsp;, 2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="Prakash">[Prakash]</a></td>
<td class="author-text">Prakash, B., &ldquo;Using the 20 bit flow label field in the IPv6
header to indicate desirable quality of service on the
internet,&rdquo; University of Colorado&nbsp;(M.Sc. Thesis), 2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1633">[RFC1633]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:ddc@LCS.MIT.EDU">Clark, D.</a>, and <a href="mailto:Shenker@PARC.XEROX.COM">S. Shenker</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1633">Integrated Services in the Internet Architecture: an Overview</a>,&rdquo; RFC&nbsp;1633, June&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1633.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc1633.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc1633.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1707">[RFC1707]</a></td>
<td class="author-text"><a href="mailto:scrivner@world.std.com">McGovern, M.</a> and <a href="mailto:rullmann@crd.lotus.com">R. Ullmann</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1707">CATNIP: Common Architecture for the Internet</a>,&rdquo; RFC&nbsp;1707, October&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1707.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1710">[RFC1710]</a></td>
<td class="author-text"><a href="mailto:hinden@eng.sun.com">Hinden, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1710">Simple Internet Protocol Plus White Paper</a>,&rdquo; RFC&nbsp;1710, October&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1710.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1752">[RFC1752]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a> and <a href="mailto:mankin@isi.edu">A. Mankin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1752">The Recommendation for the IP Next Generation Protocol</a>,&rdquo; RFC&nbsp;1752, January&nbsp;1995 (<a href="http://www.rfc-editor.org/rfc/rfc1752.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1809">[RFC1809]</a></td>
<td class="author-text"><a href="mailto:craig@aland.bbn.com">Partridge, C.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1809">Using the Flow Label Field in IPv6</a>,&rdquo; RFC&nbsp;1809, June&nbsp;1995 (<a href="http://www.rfc-editor.org/rfc/rfc1809.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1883">[RFC1883]</a></td>
<td class="author-text"><a href="mailto:deering@parc.xerox.com">Deering, S.</a> and <a href="mailto:hinden@ipsilon.com">R. Hinden</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1883">Internet Protocol, Version 6 (IPv6) Specification</a>,&rdquo; RFC&nbsp;1883, December&nbsp;1995 (<a href="http://www.rfc-editor.org/rfc/rfc1883.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2205">[RFC2205]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:lixia@cs.ucla.edu">Zhang, L.</a>, <a href="mailto:Berson@ISI.EDU">Berson, S.</a>, <a href="mailto:Herzog@WATSON.IBM.COM">Herzog, S.</a>, and <a href="mailto:jamin@EECS.UMICH.EDU">S. Jamin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2205">Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification</a>,&rdquo; RFC&nbsp;2205, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2205.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2205.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2205.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2460">[RFC2460]</a></td>
<td class="author-text"><a href="mailto:deering@cisco.com">Deering, S.</a> and <a href="mailto:hinden@iprg.nokia.com">R. Hinden</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>,&rdquo; RFC&nbsp;2460, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2460.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2460.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2460.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2474">[RFC2474]</a></td>
<td class="author-text"><a href="mailto:kmn@cisco.com">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:fred@cisco.com">Baker, F.</a>, and <a href="mailto:black_david@emc.com">D. Black</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>,&rdquo; RFC&nbsp;2474, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2474.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2474.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2474.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2629">[RFC2629]</a></td>
<td class="author-text"><a href="mailto:mrose@not.invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2629">Writing I-Ds and RFCs using XML</a>,&rdquo; RFC&nbsp;2629, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2629.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2629.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2629.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3140">[RFC3140]</a></td>
<td class="author-text">Black, D., Brim, S., Carpenter, B., and F. Le Faucheur, &ldquo;<a href="http://tools.ietf.org/html/rfc3140">Per Hop Behavior Identification Codes</a>,&rdquo; RFC&nbsp;3140, June&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3140.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3697">[RFC3697]</a></td>
<td class="author-text">Rajahalme, J., Conta, A., Carpenter, B., and S. Deering, &ldquo;<a href="http://tools.ietf.org/html/rfc3697">IPv6 Flow Label Specification</a>,&rdquo; RFC&nbsp;3697, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3697.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3724">[RFC3724]</a></td>
<td class="author-text">Kempf, J., Austein, R., and IAB, &ldquo;<a href="http://tools.ietf.org/html/rfc3724">The Rise of the Middle and the Future of End-to-End: Reflections on the Evolution of the Internet Architecture</a>,&rdquo; RFC&nbsp;3724, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3724.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4080">[RFC4080]</a></td>
<td class="author-text">Hancock, R., Karagiannis, G., Loughney, J., and S. Van den Bosch, &ldquo;<a href="http://tools.ietf.org/html/rfc4080">Next Steps in Signaling (NSIS): Framework</a>,&rdquo; RFC&nbsp;4080, June&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4080.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Saltzer">[Saltzer]</a></td>
<td class="author-text">Saltzer, J., Reed, D., and D. Clark, &ldquo;End-To-End Arguments in System Design,&rdquo; ACM TOCS&nbsp;2 (4) 277-288, 1984.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Qinwen Hu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Auckland</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PB 92019</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Auckland,   1142</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New Zealand</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:qhu009@aucklanduni.ac.nz">qhu009@aucklanduni.ac.nz</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brian Carpenter</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Auckland</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PB 92019</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Auckland,   1142</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New Zealand</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:brian.e.carpenter@gmail.com">brian.e.carpenter@gmail.com</a></td></tr>
</table>
</body></html>
