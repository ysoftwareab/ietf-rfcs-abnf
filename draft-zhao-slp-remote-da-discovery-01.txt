





INTERNET DRAFT                                            Weibin Zhao
draft-zhao-slp-remote-da-discovery-01.txt         Henning Schulzrinne
January 22, 2002                                  Columbia University
Expires: July 22, 2002                            Chatschik Bisdikian
                                                       William Jerome
                                                                  IBM


                        Remote Discovery in SLP


Status of This Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Copyright Notice

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

Abstract

   This document describes remote discovery in the Service Location
   Protocol (SLP) via DNS SRV. It defines the name of DNS SRV RR for the
   SLP service, and gives the steps for remote discovery in SLP. To map
   the SLP service, a medium SLP domain (SLPD) can list its Directory
   Agents (DAs) as DNS SRV RRs directly. But a small or large SLPD needs
   to deploy Gateway DAs (GDAs), and list these GDAs as DNS SRV RRs.







Zhao, et al.            Expires: July 22, 2002                  [Page 1]

Internet Draft            SLP Remote Discovery          January 22, 2002


1. Introduction

   The Service Location Protocol (SLP [1]) provides a lightweight
   mechanism for service discovery within one administrative domain. SLP
   is not designed for global service discovery as it uses multicast and
   flat scope names. However, beyond the local domain, SLP can be used
   for service discovery in specific remote domains. There are three
   configurations for an SLP domain (SLPD): small SLPD without Directory
   Agents (DAs), medium SLPD with all DAs in the same scope, and large
   SLPD with DAs in different scopes. The key issue for remote discovery
   in SLP is to enable a User Agent (UA) to learn about remote DAs (in a
   medium/large SLPD) or remote SAs (in a small SLPD) without relying on
   multicast.

   DNS SRV [2] is a mechanism to map a specific service in a specific
   domain to a list of server names. All servers in the list should be
   equivalent except for their priorities and weights for selection
   purpose. To map the SLP service, a medium SLPD can list its DAs as
   DNS SRV RRs directly. But a small or large SLPD cannot list its SAs
   or DAs as DNS SRV RRs because these SAs or DAs are not equivalent.
   Instead, a small or large SLPD needs to deploy Gateway DAs (GDAs),
   and list these GDAs as DNS SRV RRs. In this document, we describe how
   to deploy GDAs for small and large SLPDs, define the name of DNS SRV
   RR for the SLP service, and give the steps for remote discovery in
   SLP.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted according to RFC 2119 [3].

2. Gateway DA

   A GDA is a special DA. It MUST have an empty scope (""), have the
   "slpd-gateway" attribute, and be configured to serve in either a
   small SLPD or a large SLPD. In a small SLPD, a GDA listens for
   SAAdvert multicast, and records all SAAdverts in its SLPD. In a large
   SLPD, a GDA listens for DAAdvert multicast, and records all DAAdverts
   in its SLPD.

   A GDA does not accept any SrvReg or SrvDeReg from SAs as it has an
   empty scope.

   Like regular DAs, a GDA answers a "service:directory-agent" SrvRqst
   multicast with its own DAAdvert. But when a GDA receives a
   "service:directory-agent" or "service:service-agent" SrvRqst via TCP
   from a UA, it replies with a list of all DAAdverts or SAAdverts in
   its SLPD accordingly.




Zhao, et al.            Expires: July 22, 2002                  [Page 2]

Internet Draft            SLP Remote Discovery          January 22, 2002


3. DNS SRV for SLP service

   The name of DNS SRV RR for the SLP service has the following format:

       _slp._tcp.<domain>

   where <domain> is a domain name (such as example.com). Note that
   "slp" is the symbolic name for the SLP service in Assigned Numbers
   [4], as required by RFC 2782 [2]. For instance, if a UA makes a
   standard DNS query [5] for SRV RRs of the SLP service using the name:

       _slp._tcp.example.com

   then the UA will receive a list of SRV RRs (which matches the query)
   from a DNS reply, such as

       _slp._tcp.example.com  IN  SRV  0 0 427 gda1.example.com
       _slp._tcp.example.com  IN  SRV  0 0 427 gda2.example.com


4. Steps for Remote Discovery in SLP

   Assume that all services in domain D are maintained by SLP, and D
   uses DNS SRV to map its SLP service. The steps for a remote client C
   to discover services in D are as follows.

   (1) C makes a DNS query for SRV RRs of the SLP service in D, and
       gets a DA list (regular DAs for a medium SLPD, GDAs otherwise)
       from a DNS reply.

   (2) C selects one DA (say Z) from the DA list based on some metrics
       described in RFC 2782 [2] or randomly, then makes a TCP
       connection to Z.

   (3) C issues a "service:directory-agent" SrvRqst via TCP to Z,
       and gets a list of DAAdverts.

   (4) There are three cases for this DAAdvert list:

       o If it has one DAAdvert of a regular DA, then D is a medium
         SLPD.

       o If it only has DAAdverts of GDAs, then D is a small SLPD.

       o If it has DAAdverts of both GDAs and regular DAs, then D is
         a large SLPD.





Zhao, et al.            Expires: July 22, 2002                  [Page 3]

Internet Draft            SLP Remote Discovery          January 22, 2002


   (5) If D is a small SLPD, C issues a "service:service-agent" SrvRqst
       via TCP to Z, and gets a list of SAAdverts.

   (6) After finding out regular DAs or SAs in D, C can query these
       remote DAs or SAs via unicast to discover desired services.

5. Security Considerations

   To enable remote discovery in SLP, local domain information is
   exposed to external users. Thus, access control is important to
   protect valuable service information. Standard SLP authentication
   mechanism SHOULD be used.

   As this document describes a method for remote discovery in SLP via
   DNS SRV, the security considerations for DNS SRV are inherited by
   this document.

6. Acknowledgements

   Erik Guttman and Kevin Arnold provided valuable comments for this
   document.

7. References

   [1] E. Guttman, C. Perkins, J. Veizades and M. Day, "Service location
       protocol, version 2", RFC 2608, June 1999.

   [2] A. Gulbrandsen, P. Vixie and L. Esibov, "A DNS RR for specifying
       the location of services (DNS SRV)", RFC 2782, February 2000.

   [3] S. Bradner, "Key words for use in RFCs to indicate requirement
       levels", BCP 14, RFC 2119, March 1997.

   [4] J. Reynolds and J. Postel, "Assigned Numbers", STD 2, RFC 1700,
       October 1994.

   [5] P. Mockapetris, "Domain Names - Concepts and Facilities", STD
       13, RFC 1034, November 1987.

8. Authors' Addresses

   Weibin Zhao
   Henning Schulzrinne
   Department of Computer Science
   Columbia University
   1214 Amsterdam Avenue, MC 0401
   New York, NY 10027-7003
   Email: {zwb,hgs}@cs.columbia.edu



Zhao, et al.            Expires: July 22, 2002                  [Page 4]

Internet Draft            SLP Remote Discovery          January 22, 2002


   Chatschik Bisdikian
   William F. Jerome
   IBM T. J. Watson Research Center
   P.O.Box 218
   Yorktown Heights, NY 10598-0218
   Email: {bisdik,wfj}@us.ibm.com

9. Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

















Zhao, et al.            Expires: July 22, 2002                  [Page 5]
