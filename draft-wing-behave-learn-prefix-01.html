<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Learning the IPv6 Prefix of a
    NAT64</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Learning the IPv6 Prefix of a
    NAT64">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">BEHAVE Working Group</td><td class="header">D. Wing</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Cisco</td></tr>
<tr><td class="header">Intended status:  Standards Track</td><td class="header">March 09, 2009</td></tr>
<tr><td class="header">Expires:  September 10, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Learning the IPv6 Prefix of a
    NAT64<br />draft-wing-behave-learn-prefix-01</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 10, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>In some IPv6/IPv4 translation scenarios it is necessary for an IPv6
      host to know the IPv6 prefix used by its NAT64. In some of the IPv6/IPv4
      translation proposals, the prefix is not fixed; that is, the prefix is
      chosen by the network operator. This specification provides two methods
      for a host learn its NAT64's IPv6 prefix and length.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Terminology<br />
<a href="#introduction">2.</a>&nbsp;
Introduction<br />
<a href="#anchor2">3.</a>&nbsp;
Learning IPv6 Prefix and Length<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#learn_dns">3.1.</a>&nbsp;
Using DNS to Learn IPv6 Prefix and Length<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#learn_dhcp">3.2.</a>&nbsp;
Using DHCP to Learn IPv6 Prefix and Length<br />
<a href="#auth">4.</a>&nbsp;
Authenticating the Learned Prefix<br />
<a href="#security_considerations">5.</a>&nbsp;
Security Considerations<br />
<a href="#iana">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor3">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#anchor6">Appendix&nbsp;A.</a>&nbsp;
For future study<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">A.1.</a>&nbsp;
multi-homed hosts<br />
<a href="#anchor8">Appendix&nbsp;B.</a>&nbsp;
Changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">B.1.</a>&nbsp;
Changes from -00 to -01<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>AFT: Address Family Translator. A device that translates between IP
      address families.
</p>
<p>DNS64: The function of synthesizing an AAAA response from an A
      record.
</p>
<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<p>Several variations of Address Family Translators (AFT) have been
      proposed for IPv6/IPv6 coexistence. For IPv6 hosts to access IPv4 hosts,
      a DNS function exists which synthesizes DNS AAAA records -- this
      function generally called "DNS64" (also "DNS rewriting") <a class='info' href='#I-D.bagnulo-behave-dns64'>[I&#8209;D.bagnulo&#8209;behave&#8209;dns64]<span> (</span><span class='info'>Bagnulo, M., Sullivan, A., Matthews, P., Beijnum, I., and M. Endo, &ldquo;DNS64: DNS extensions for Network Address Translation from IPv6 Clients to  IPv4 Servers,&rdquo; March&nbsp;2009.</span><span>)</span></a>. The DNS64 function, when used
      in conjunction with an NAT64, allows a IPv6-only host to access
      IPv4-only hosts. This access, for the most part, is transparent to the
      IPv6 host -- to much the same degree that today's widely-deployed NATs
      are transparent to IPv4 hosts. But, like with today's NATs, there are
      applications which do not work with NAT64 or do not work with DNS64, and
      require IPv6 hosts to implement additional functionality.
</p>
<p>So far, two applications have been identified which can benefit from
      knowing the IPv6 prefix of the host's NAT64: </p>
<ul class="text">
<li>host-based DNSSEC validation (as described in Section 4.3 of 
<a class='info' href='#I-D.bagnulo-behave-dns64'>[I&#8209;D.bagnulo&#8209;behave&#8209;dns64]<span> (</span><span class='info'>Bagnulo, M., Sullivan, A., Matthews, P., Beijnum, I., and M. Endo, &ldquo;DNS64: DNS extensions for Network Address Translation from IPv6 Clients to  IPv4 Servers,&rdquo; March&nbsp;2009.</span><span>)</span></a>)
</li>
<li>BitTorrent (<a class='info' href='#I-D.wing-behave-nat64-referrals'>Section 2.2 of<span> (</span><span class='info'>Wing, D., &ldquo;Referrals Across an IPv6/IPv4 Translator,&rdquo; October&nbsp;2009.</span><span>)</span></a> [I&#8209;D.wing&#8209;behave&#8209;nat64&#8209;referrals])
</li>
</ul>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Learning IPv6 Prefix and Length</h3>

<p>Both the IPv6 prefix and the prefix length need to be learned This
      can be done using DNS or DHCP, as described in the following
      sections.
</p>
<a name="learn_dns"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Using DNS to Learn IPv6 Prefix and Length</h3>

<p>This specification defines a new <a class='info' href='#RFC4848'>U-NAPTR<span> (</span><span class='info'>Daigle, L., &ldquo;Domain-Based Application Service Location Using URIs and the Dynamic Delegation Discovery Service (DDDS),&rdquo; April&nbsp;2007.</span><span>)</span></a> [RFC4848] application to discover the NAT64's
        IPv6 prefix and length. The input domain name is the exact same as
        would be used for a reverse DNS lookup, derived from the host's IPv6
        in the ".ip6.arpa." tree and follows the construction rules in <a class='info' href='#RFC3596'>Section 2.5 of<span> (</span><span class='info'>Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;DNS Extensions to Support IP Version 6,&rdquo; October&nbsp;2003.</span><span>)</span></a> [RFC3596]. This is shortened to 20 labels
        (representing a /64 network prefix) and, if DNS returns an error is
        shortened to 16 labels (representing a /48 network prefix).
</p>
<p>If a NAT64 is present on the network, the successful result of one
        of those queries will produce a NAPTR record with the desired service
        tag "NAT64:" which contains the IPv6 prefix and prefix length o the
        NAT64, separated by a "/" (the same syntax as specified in <a class='info' href='#RFC4291'>Section 2.3 of<span> (</span><span class='info'>Hinden, R. and S. Deering, &ldquo;IP Version 6 Addressing Architecture,&rdquo; February&nbsp;2006.</span><span>)</span></a> [RFC4291]).
</p>
<p>For example, a host with the IP address 2001:db8:1:2:3:4:567:89ab
        would first send an NAPTR query for
        3.0.0.0.2.0.0.0.1.0.0.0.8.b.d.0.1.0.0.2.IP6.ARPA (20 elements,
        representing a /64 network prefix). If that fails (returns NXDOMAIN),
        it would send an NAPTR query for
        2.0.0.0.1.0.0.0.8.b.d.0.1.0.0.2.IP6.ARPA (16 elements, representing a
        /48 network prefix).</p>
<blockquote class="text">
<p>Note: Both /64 and /48 prefix lengths are shown in this
            version of the document for illustrative purposes. The
            number of elements of this query will depend on the prefix
            length(s) defined by the BEHAVE working group for a NAT64.
            If the BEHAVE working group decides that all NAT64's will
            have a certain prefix length, then only one DNS query is
            sent.
</p>
</blockquote>

<p>If the host needs to authenticate the prefix it just learned (e.g.,
        because the host is running a DNSSEC validator) the host performs the
        additional authentication steps described in <a class='info' href='#auth'>Section&nbsp;4<span> (</span><span class='info'>Authenticating the Learned Prefix</span><span>)</span></a>.
</p>
<a name="learn_dhcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Using DHCP to Learn IPv6 Prefix and Length</h3>

<p>A new DHCP option, OPTION_AFT_PREFIX, is defined. It contains the
        IPv6 prefix and its length.
</p><br /><hr class="insert" />
<a name="dhcp-option"></a>

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       OPTION_AFT_PREFIX       |         option-length         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| prefix-length |                                               |
+-+-+-+-+-+-+-+-+          IPv6 prefix                          |
|                        (up to 16 octets)                      |
|                                                               |
|                                                               |
|                                                               |
|               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               |
+-+-+-+-+-+-+-+-+

    option-code:      OPTION_AFT_PREFIX (TBD)

    option-length:    17

    prefix-length:    Length for this prefix in bits

    IPv6-prefix:      An IPv6 prefix</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: DHCP option OPTION_AFT_PREFIX&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In order to conserve space, it is RECOMMENDED that only the
        significant bits of the IPv6 prefix be sent in the DHCP option.
</p>
<p>If the host needs to authenticate the prefix it just learned (e.g.,
        because the host is running a DNSSEC validator) the host performs the
        additional authentication steps described in <a class='info' href='#auth'>Section&nbsp;4<span> (</span><span class='info'>Authenticating the Learned Prefix</span><span>)</span></a>.
</p>
<a name="auth"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Authenticating the Learned Prefix</h3>

<p>In some cases (e.g., a host performing DNSSEC validation), the host
      needs to authenticate the NAT64's IPv6 prefix learned via one of the
      mechanisms described earlier. To allow such authentication the operator
      of the NAT64 first creates a PTR record for the NAT64 (with 0's for the
      elements after the NAT64's IPv6 prefix) which points to a hostname. The
      hostname has a signed AAAA record for the same 0-padded IPv6 address
      returned by the PTR query. Once those configuration steps are done, a
      host can validate the NAT64 IPv6 prefix by performing the following
      steps: </p>
<blockquote class="text"><dl>
<dt>a.</dt>
<dd>The host sends a DNS PTR query for the IPv6 address of the NAT64
          (for "ipv6.arpa"), using 0 for the elements after the prefix length.
          This will return the fully-qualified hostname of that NAT64
          device.
</dd>
<dt>b.</dt>
<dd>Verify the full-qualified hostname is on the host's configured
          list of authorized translators (e.g.,
          seattle.nat64.example.net).
</dd>
<dt>c.</dt>
<dd>Send a DNS AAAA query for that hostname.
</dd>
<dt>d.</dt>
<dd>Verify the AAAA response matches the IPv6 address obtained in
          step 1.
</dd>
<dt>e.</dt>
<dd>Perform DNSSEC validation of the AAAA response.
</dd>
</dl></blockquote>

<p>For example, if the NAT64's IPv6 prefix length is /48, the host would
      send a PTR query for 2.0.0.0.1.0.0.0.0.0.0.0.1.2.3.4.IP6.ARPA which
      would return a hostname, seattle.nat64.example.net. The host verifies
      that seattle.nat64.example.net is on its configured list of authorized
      NAT64 hosts, as maintained in a text file. The host sends an AAAA query
      for seattle.nat64.example.net and verifies the AAAA response contains
      the same IPv6 address. The host then validates the DNSSEC signature for
      seattle.nat64.example.net.
</p>
<a name="security_considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>After learning the IPv6 prefix of its translator by following the
      procedures in this specification, the IPv6 host will utilize this
      information for subsequent actions (e.g., sending a packet to it, or
      using that information to synthesize DNS records or to perform DNSSEC
      validation). If an attacker provides a fraudulent IPv6 to the IPv6 host,
      the attacker can become on-path for traffic to/from that IPv6 host and
      preform passive or active eavesdropping or traffic analysis. To protect
      against this attack, it is RECOMMENDED that IPv6 hosts be configured
      with the names of authorized translators and RECOMMENDED that IPv6 hosts
      uses DNSSEC to validate that name matches the IPv6 prefix learned via
      DNS or DHCPv6, as described in <a class='info' href='#auth'>Section&nbsp;4<span> (</span><span class='info'>Authenticating the Learned Prefix</span><span>)</span></a>.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>A new DHCPv6 option, OPTION_AFT_PREFIX, needs to be assigned by
      IANA.
</p>
<p>The new NAPTR Application Service tag "NAT64" is registered with
      IANA.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>This draft was fostered by discussion on the 46translation mailing
      list and at the v4v6 Interim in Montreal. Special thanks to Iljitsch van
      Beijnum, Andrew Sullivan, Marcelo Bagnulo Braun, Fred Baker, and Xing Li
      for their comments and dialog.
</p>
<p>The mechanism to perform a shortened NAPTR query was described first
      by Martin Thomson <a class='info' href='#I-D.thomson-geopriv-res-gw-lis-discovery'>[I&#8209;D.thomson&#8209;geopriv&#8209;res&#8209;gw&#8209;lis&#8209;discovery]<span> (</span><span class='info'>Thomson, M. and R. Bellis, &ldquo;Location Information Server (LIS) Discovery using IP address and Reverse DNS,&rdquo; January&nbsp;2010.</span><span>)</span></a>.
</p>
<p>Thanks to Ralph Droms for his help with DHCPv6. Thanks to John
      Schnizlein for improving the DNS learning algorithm.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4848">[RFC4848]</a></td>
<td class="author-text">Daigle, L., &ldquo;<a href="http://tools.ietf.org/html/rfc4848">Domain-Based Application Service Location Using URIs and the Dynamic Delegation Discovery Service (DDDS)</a>,&rdquo; RFC&nbsp;4848, April&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4848.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.bagnulo-behave-dns64">[I-D.bagnulo-behave-dns64]</a></td>
<td class="author-text">Bagnulo, M., Sullivan, A., Matthews, P., Beijnum, I., and M. Endo, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bagnulo-behave-dns64-02.txt">DNS64: DNS extensions for Network Address Translation from IPv6 Clients to  IPv4 Servers</a>,&rdquo; draft-bagnulo-behave-dns64-02 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-bagnulo-behave-dns64-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.savolainen-mif-dns-server-selection">[I-D.savolainen-mif-dns-server-selection]</a></td>
<td class="author-text">Savolainen, T., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-savolainen-mif-dns-server-selection-02.txt">DNS Server Selection on Multi-Homed Hosts</a>,&rdquo; draft-savolainen-mif-dns-server-selection-02 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-savolainen-mif-dns-server-selection-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.thomson-geopriv-res-gw-lis-discovery">[I-D.thomson-geopriv-res-gw-lis-discovery]</a></td>
<td class="author-text">Thomson, M. and R. Bellis, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-thomson-geopriv-res-gw-lis-discovery-03.txt">Location Information Server (LIS) Discovery using IP address and Reverse DNS</a>,&rdquo; draft-thomson-geopriv-res-gw-lis-discovery-03 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-thomson-geopriv-res-gw-lis-discovery-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.wing-behave-nat64-referrals">[I-D.wing-behave-nat64-referrals]</a></td>
<td class="author-text">Wing, D., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-wing-behave-nat64-referrals-01.txt">Referrals Across an IPv6/IPv4 Translator</a>,&rdquo; draft-wing-behave-nat64-referrals-01 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-wing-behave-nat64-referrals-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3596">[RFC3596]</a></td>
<td class="author-text">Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;<a href="http://tools.ietf.org/html/rfc3596">DNS Extensions to Support IP Version 6</a>,&rdquo; RFC&nbsp;3596, October&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3596.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4291">[RFC4291]</a></td>
<td class="author-text">Hinden, R. and S. Deering, &ldquo;<a href="http://tools.ietf.org/html/rfc4291">IP Version 6 Addressing Architecture</a>,&rdquo; RFC&nbsp;4291, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4291.txt">TXT</a>).</td></tr>
</table>

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
For future study</h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
multi-homed hosts</h3>

<p>A multi-homed host may have different NAT64 devices available on
        each of its networks, and can learn those via DNS or via DHCP.
</p>
<p>When using DNS to learn the NAT64 prefix (<a class='info' href='#learn_dns'>Section&nbsp;3.1<span> (</span><span class='info'>Using DNS to Learn IPv6 Prefix and Length</span><span>)</span></a>) or using DNS to authenticate the NAT64
        prefix (<a class='info' href='#auth'>Section&nbsp;4<span> (</span><span class='info'>Authenticating the Learned Prefix</span><span>)</span></a>, it is possible a split horizon
        DNS exists. Such a split DNS requires the host to query the DNS server
        associated with that network prefix as described in <a class='info' href='#I-D.savolainen-mif-dns-server-selection'>[I&#8209;D.savolainen&#8209;mif&#8209;dns&#8209;server&#8209;selection]<span> (</span><span class='info'>Savolainen, T., &ldquo;DNS Server Selection on Multi-Homed Hosts,&rdquo; February&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Changes</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Changes from -00 to -01</h3>

<p></p>
<ul class="text">
<li>made clearer this is for NAT64 prefix (changed title and some
            text).
</li>
<li>changed from querying for "_aft_prefix" TXT record to querying
            ipv6.arpa NAPTR record.
</li>
<li>BitTorrent is another application that benefits from knowing
            the NAT64 prefix; previously only DNSSEC was listed.
</li>
<li>changed to standards track.
</li>
</ul>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dan Wing</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 West Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dwing@cisco.com">dwing@cisco.com</a></td></tr>
</table>
</body></html>
