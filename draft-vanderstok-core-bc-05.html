<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>CoAP Utilization for Building Control </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Motivation">
<link href="#rfc.section.2" rel="Chapter" title="2 URI structure">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Scheme part">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Authority part">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Path part">
<link href="#rfc.section.3" rel="Chapter" title="3 Group Naming and Addressing">
<link href="#rfc.section.4" rel="Chapter" title="4 Discovery">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Service discovery goals">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 DNS-Based Service Discovery">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Browsing for Services">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Resource vs Service Discovery">
<link href="#rfc.section.5" rel="Chapter" title="5 DNS record structure">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 DNS group example">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Operational use of DNS-SD">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Commissioning CoAP devices">
<link href="#rfc.section.5.3.1" rel="Chapter" title="5.3.1 DNS-SD server present">
<link href="#rfc.section.5.3.2" rel="Chapter" title="5.3.2 DNS-SD server not present">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Proxy discovery">
<link href="#rfc.section.6" rel="Chapter" title="6 Legacy data Representations in CoAP">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Network architectures">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Discovery of legacy gateways">
<link href="#rfc.section.7" rel="Chapter" title="7 Conclusions">
<link href="#rfc.section.8" rel="Chapter" title="8 Security considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgements">
<link href="#rfc.section.11" rel="Chapter" title="11 Changelog">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This draft describes an example use of the RESTful CoAP protocol for building automation and control (BAC) applications such as HVAC and lighting.  A few basic design assumptions are stated first, then URI structure is utilized to define group as well as unicast scope for RESTful operations.  " />
  <meta name="description" content="This draft describes an example use of the RESTful CoAP protocol for building automation and control (BAC) applications such as HVAC and lighting.  A few basic design assumptions are stated first, then URI structure is utilized to define group as well as unicast scope for RESTful operations.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">CoRE</td>
<td class="right">P.D.V. van der Stok</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Philips Research</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">K.E. Lynn</td>
</tr>
<tr>
<td class="left">Expires: May 03, 2012</td>
<td class="right">Consultant</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 31, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">CoAP Utilization for Building Control <br />
  <span class="filename">draft-vanderstok-core-bc-05</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This draft describes an example use of the RESTful CoAP protocol for building automation and control (BAC) applications such as HVAC and lighting.  A few basic design assumptions are stated first, then URI structure is utilized to define group as well as unicast scope for RESTful operations.  </p>
<p>This proposal supports the view that 1) service discovery is complementary to resource discovery and facilitates control network scaling, and 2) building control is likely to move in steps toward all-IP control networks based on the legacy efforts provided by DALI, LON, BACnet, ZigBee, and other standards.  </p>
<p>The authority portion of the URI is used to identify a device (group) and the resulting DNS name is bound to a unicast (multicast) address. Group addressing has consequence for the naming convention of the resources of a device.  Naming of URI is building or organization dependent, must be flexible, and SHOULD conform to some local convention.  Naming of resources MUST be standardised preferrable by a building control related organisation.  </p>
<p>It is shown that DNS-based service discovery can be used to locate URIs on the scale necessary in large commercial BAC deployments. The relation of DNS-SD and a Resource Directory is discussed. Finally, a method is proposed for mapping URIs onto legacy BAC resources, e.g., to discover application-layer gateways, proxies, and their dependent services.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Terminology</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Motivation</a>
</li>
<li>2.   <a href="#rfc.section.2">URI structure</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Scheme part</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Authority part</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Path part</a>
</li>
<li>3.   <a href="#rfc.section.3">Group Naming and Addressing</a>
</li>
<li>4.   <a href="#rfc.section.4">Discovery</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Service discovery goals</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">DNS-Based Service Discovery</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Browsing for Services</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Resource vs Service Discovery</a>
</li>
<li>5.   <a href="#rfc.section.5">DNS record structure</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">DNS group example</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Operational use of DNS-SD</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Commissioning CoAP devices</a>
</li>
<li>5.3.1.   <a href="#rfc.section.5.3.1">DNS-SD server present</a>
</li>
<li>5.3.2.   <a href="#rfc.section.5.3.2">DNS-SD server not present</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Proxy discovery</a>
</li>
<li>6.   <a href="#rfc.section.6">Legacy data Representations in CoAP</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Network architectures</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Discovery of legacy gateways</a>
</li>
<li>7.   <a href="#rfc.section.7">Conclusions</a>
</li>
<li>8.   <a href="#rfc.section.8">Security considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Acknowledgements</a>
</li>
<li>11.   <a href="#rfc.section.11">Changelog</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#sect-1" id="sect-1">Introduction</a>
</h1>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#sect-1.1" id="sect-1.1">Terminology</a>
</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in "Key words for use in RFCs to Indicate Requirement Levels" <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.1.1.p.2">In addition, the following conventions are used in this document: </p>
<p id="rfc.section.1.1.p.3">A CoAP end-point, or server, is identified by a unique {IP address, port} tuple and characterised by a protocol.  A server is completely specified by the authority part of a URI.  </p>
<p id="rfc.section.1.1.p.4">A device is the physical object that is connected to the network.  A device may host one or more CoAP servers.  </p>
<p id="rfc.section.1.1.p.5">A service (in the service discovery sense) is a related set of resources on a CoAP server.  A URI completely specifies the syntax of a service interface.  Metadata describe the semantics of the service interface.  The semantics may include the relation between service and the hardware connected to the device.  A CoAP server may expose one or more services.  </p>
<p id="rfc.section.1.1.p.6">In examples below involving URIs, the authority is preceded by double slashes "//" and path is preceded by a single slash "/".  The examples may make use of full or partial host names and the difference should be clear from the context.  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#sect-1.2" id="sect-1.2">Motivation</a>
</h1>
<p id="rfc.section.1.2.p.1">The CoAP protocol <a href="#I-D.ietf-core-coap">[I-D.ietf-core-coap]</a> aims at providing a user application protocol architecture for a network of devices with a low resource provision such as memory, CPU capacity, and energy.  In general, IT application manufacturers strive to provide the highest possible functionality and quality for a given price.  In contrast, the building automation controls market is highly price sensitive and manufacturers tend to compete by delivering a given functionality and quality for the lowest price. In the first market a decreasing memory price leads to more software functionality, while in the second market it leads to a lower Bill of Material (BOM).  </p>
<p id="rfc.section.1.2.p.2">The vast majority of devices in a typical building control application is resource constrained, making the standardization of a lightweight application protocol like CoAP a necessary requirement for IP to penetrate the device market.  The low energy consumption requirement of battery-less devices reinforces this approach.  Low resource budget implies low throughput and small packet size as for <a href="#IEEE.802.15.4">[IEEE.802.15.4]</a>.  Reduction of the packet size is obtained by using the header reduction of 6LoWPAN <a href="#RFC4944">[RFC4944]</a> and encouraging small payloads.  </p>
<p id="rfc.section.1.2.p.3">Several legacy building control standards (e.g. <a href="#BACnet">[BACnet]</a>, <a href="#DALI">[DALI]</a>, <a href="#KNX">[KNX]</a>, <a href="#LON">[LON]</a>, <a href="#ZigBee">[ZigBee]</a>, etc.) have been developed based on years of accumulated knowledge and industry cooperation.  These standards generally specify a data model, functional interfaces, packet formats, and sometimes a physical medium for data objects and function invocation.  Many of these industry standards also specify proprietary transport protocols, necessitating expensive stateful gateways for these standards to interoperate.  Many more recent building control network include IP-based standards for transport (at least to interconnect islands of functionality) and other functions such as naming and discovery.  CoAP will be successful in the building control market to the extent that it can represent a given standard's data objects and provide functions, e.g. resource discovery, that these standards depend on.  </p>
<p id="rfc.section.1.2.p.4">From the above the wanted basic syntax properties can be summarized as: </p>
<div id="#rfc.table.1"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">- </th>
<th class="left">Generate small payloads. </th>
</tr></thead>
<tbody>
<tr>
<td class="left">- </td>
<td class="left">Compatible with legacy standards (e.g. LON, BACnet, DALI, ZigBee Device Objects).</td>
</tr>
<tr>
<td class="left">- </td>
<td class="left">Service/resource discovery in agreement with legacy standards and naming conventions. </td>
</tr>
</tbody>
</table>
<p id="rfc.section.1.2.p.5">This submission defines an approach in which the payload contains messages with a syntax defined by legacy control standards. Accordingly, the syntax of the service/resource discovery messages encapsulates legacy control standard. The intention is a progressive approach to all-IP in building control. In a first stage standard IETF based protocols (e.g. CoAP, DNS-SD) are used for transport of control messages and discovery messages expressed in a legacy syntax.  This approach enables the reuse of controllers based on the semantics of the chosen control standard. In a later stage a complete redesign of the controllers can be envisaged guided by the accumulated experience with all-IP control.  </p>
<p id="rfc.section.1.2.p.6">Two concepts, hierarchy and group, are of prime importance in building control, particularly in lighting and HVAC.  Many control messages or events are multicast from one device to a group of devices (e.g. from a light switch to all lights in an area).  The scope of a multicast command or discovery message determines the group of devices that is targeted.  A group scope may be defined as link-local, as a tree maintained by an IP-multicast protocol, or an overlay that corresponds to the logical structure of a building or campus and is independent of the underlying network structure.  Techniques for group communication are discussed in <a href="#I-D.rahman-core-groupcomm">[I-D.rahman-core-groupcomm]</a>.  </p>
<p id="rfc.section.1.2.p.7">As described in "Commercial Building Applications Requirements" <a href="#I-D.martocci-6lowapp-building-applications">[I-D.martocci-6lowapp-building-applications]</a> it is typical practice to aggregate building control at the room, area, and supervisory levels.  Furthermore, networks for different subsystems (lights, HVAC, etc.) or based on different legacy standards have historically been isolated from each other in so-called "silos".  RESTful web services <a href="#Fielding">[Fielding]</a> represent one possible way to expose functionality and normalize data representations between silos in order to facilitate higher order applications such as campus-wide energy management.  </p>
<p id="rfc.section.1.2.p.8">Consequently, additional group properties are: </p>
<div id="#rfc.table.2"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">- </th>
<th class="left">Devices may be part of one or more groups. </th>
</tr></thead>
<tbody><tr>
<td class="left">- </td>
<td class="left">Resources addressed by a group must be uniformly and consistently named across all targeted devices.</td>
</tr></tbody>
</table>
<p id="rfc.section.1.2.p.9">For clarity, this I-D limits itself to two types of applications: (1) M2M control applications running within a building area without any human intervention after commissioning of a given network segment and (2) maintenance oriented applications where data are collected from devices in several building areas by devices inside or outside the building, and humans may intervene to change control settings. This I-D compares commercial building solutions with solutions for the home.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#sect-2" id="sect-2">URI structure</a>
</h1>
<p id="rfc.section.2.p.1">This I-D considers three elements of the URI: scheme, authority, and path, as defined in "Uniform Resource Identifier (URI): Generic Syntax" <a href="#RFC3986">[RFC3986]</a>.  The authority is defined within the context of standard DNS host naming, while the path is valid in relation to a fully qualified domain name (FQDN) plus optional port (and protocol is implicit, based on scheme). An example based on <a href="#RFC3986">[RFC3986]</a> is: foo://host.example.com:8042/over/there?name=ferret#nose, where "foo" is the scheme, "host.example.com:8042" is the authority, "/over/there" is the path, "name=ferret" is the query, and "nose" is the fragment. Fragments are not supported in CoAP.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#sect-2.1" id="sect-2.1">Scheme part</a>
</h1>
<p id="rfc.section.2.1.p.1">The CoAP URI scheme syntax is specified in section 6 of <a href="#I-D.ietf-core-coap">[I-D.ietf-core-coap]</a> and is compatible with the "http" scheme specification <a href="#RFC2616">[RFC2616]</a>. The scheme is implicit from the perspective of the service, but it indicates the protocol used to access the service to potential clients.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#sect-2.2" id="sect-2.2">Authority part</a>
</h1>
<p id="rfc.section.2.2.p.1">The authority part is either a literal IP address or a DNS name comprised of a local part, specifying an individual device or group of devices, and a global part specifying a (sub)domain that may reflect the logical hierarchical structure of the building control network.  The result is said to be a fully qualified domain name (FQDN) which is globally unique down to the group or device level.  An optional port number may be included in the authority following a single colon ":" if the service port is other than the default CoAP value.  The authority resolves to a {IP-address, port} tuple. The IP-address may be either unicast or multicast.  The authority therefore identifies an individual server or a named group of servers.  </p>
<p id="rfc.section.2.2.p.2">The CoAP spec <a href="#I-D.ietf-core-coap">[I-D.ietf-core-coap]</a> states "When a CoAP server is hosted by a 6LoWPAN device, it SHOULD also support a port in the 61616-61631 compressed UDP port space defined in [RFC4944]." As shown below, DNS-SD <a href="#I-D.cheshire-dnsext-dns-sd">[I-D.cheshire-dnsext-dns-sd]</a> is a viable technique for discovering dynamic host and port assignments for a given service.  However, the use of dynamic ports in URIs is likely to lead to brittle (non-durable) identifiers as there is no assurance that a CoAP server will consistently acquire the same dynamic port and different {IP-address, port} tuples conventionally represent different servers.  </p>
<p id="rfc.section.2.2.p.3">A building can be unambiguously addressed by it GPS coordinates or more functionally by its zip or postal code.  For example the Dutch Internet provider, KPN, assigns to each subscriber a host name based on its postcode. Analogously, an example authority for a building may be given by: //bldg.zipcode-localnr.Country/ or more concretely an imaginary address in the Netherlands as: //bldg.5533BA-125a.nl/.  The "bldg" prefix can specify the target device within the building. Arriving at the device identified by //bldg.5533BA-125a.nl, the receiving service can parse the path portion of the URI and perform the requested actions on the specified resource.  </p>
<p id="rfc.section.2.2.p.4">Buildings have a logical internal structure dependent on their size and function. This ranges from a single hall without any structure to a complex building with wings, floors, offices and possibly a structure within individual rooms. The naming of the building control equipment and the actual control strategy are intimately linked to the building structure. It is therefore natural to name the equipment based on their location within the building. Consequently, the local part of the URI identifying a piece of equipment is expressed in the building structure.  An example is: //light-27.floor-1.west-wing...  </p>
<p id="rfc.section.2.2.p.5">This proposal assumes a minimal level of cooperation between the IT and building management infrastructure, namely the ability of the former to delegate DNS subdomains to the latter.  This allows the building controls installer to implement an appropriate naming scheme with the required granularity.  For institutional real estate such as a college or corporate campus, the authority might be based on the organization's domain, e.g. //device-or-group.floor.wing.bldg.campus.example.com/.  In cases where subdomain delegation is not an option, structure can still be represented in a "flat" namespace, subject to the 63 octet limit for a DNS label: //group1-floor2-west-bldg3-campus.example.com.  </p>
<p id="rfc.section.2.2.p.6">Most communication is device to device (M2M) within the building. Often a device needs to communicate to all devices of a given type within a given area of the building.  For example a thermostat may access all radiator actuators in a zone.  A light switch located at room 25b006 of floor one, expressed as: //switch0.25b006.floor1.5533BA-125a.nl/, might specify a command to light1 within the same room with //light1.25b006.floor1.5533BA-125a.nl/.  This approach can lead to rather verbose URI strings in the packet, contrary to the small packet assumption. The question arises as to whether the syntax of the authority part needs to be standardized for building control. Given the naming flexibility provided by DNS, authority names for building control are more the concern of the building owner or the installer than a standardization concern.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#sect-2.3" id="sect-2.3">Path part</a>
</h1>
<p id="rfc.section.2.3.p.1">The path identifies the addressable attributes of the service at the highest possible granularity.  A set of paths defines the syntax of the service invocation and constitutes the interface description of the service.  Every network service attribute is completely identified by a URI scheme://authority/path. In analogy, the path part of the URI specifies the resource of a given server. The naming of the services and their associated attributes are typically subjects for standardization.  There is no widely accepted standard for uniformly naming building control services in a URI. A vigorous effort is undertaken by the oBIX working group of OASIS <a href="#oBIX">[oBIX]</a>, but its current impact is limited.  There is also an open source point naming effort underway called Project Haystack <a href="#HAYSTACK">[HAYSTACK]</a>.  </p>
<p id="rfc.section.2.3.p.2">The path is constructed like a file system path name. It consists of a sequence of one or more name fields, with each field preceded with a slash, like /func1/subf2/final.  The set of paths is structured as a tree. The last name in a name field sequence is called a leave of the tree, and the authority is the root of the path tree of a given host.  The semantics of a given sub-tree in the path tree is specified by the Interface Description (if=) attribute described in <a href="#I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</a>. As for file systems some tree naming with associated semantics can be standardized such as the de facto PC standard directory "documents and settings" with the sub-directories "My documents", "usradmin", etc. When a given body, e.g. XXX, has defined a name structure and semantics for the path tree, we say that "if = XXX" when the path tree conforms to the name structure defined by XXX.  </p>
<p id="rfc.section.2.3.p.3">When a GET method with an URI like "//t-sensor1.25b006.floor1.example.com/temperature" is sent, it represents an a priori understanding that the server with name t-sensor1 exists, provides a service of a given standard type (with associated semantics) (e.g. ZigBee temperature sensor), and that this standard type has the readable attribute: temperature. When commands are sent to a group of servers it MUST be the case that the targeted resource has the same path on all targeted servers.  Therefore, it is necessary to establish at least a local uniform path naming convention to achieve this.  One approach is to include the name of the standard, e.g. BACnet, as the first element in the path and then employ the standard's chosen data scheme (in the case of BACnet, /bacnet/device/object/property).  </p>
<p id="rfc.section.2.3.p.4">The organization responsible for defining a given industry standard XXX (e.g. BACnet, ZigBee, etc.) can register the /.well-known/XXX prefix and specify the allowable path-names for a server of a given type. The same body also defines the "if=XXX" attribute. This allows the standards development organization responsibile for XXX to define the name space and resources associated with the prefix together with the associated semantics.  The registered /.well-known/XXX URI effectively defines a standard object model, or schema, for services of the XXX application protocol.  Manufacturers may optionally define proprietary resources that can be discovered dynamically using methods described below.  </p>
<p id="rfc.section.2.3.p.5">Although the authority part names need not always be transported, the path names MUST be transported in the CoAP packets. Therefore, path names SHOULD be as short as possible, even at the detriment of the clarity of the meaning of the path name.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#sect-3" id="sect-3">Group Naming and Addressing</a>
</h1>
<p id="rfc.section.3.p.1">Within building control it is necessary to send the same command to a set of servers. Grouping allows to invoke the set of services with one application command to be executable within a specified time interval.  Given a network configuration, the network operator needs to define an appropriate set of groups which can be mapped to the building areas. Knowledge about the hierarchical structure of the building areas may assist in defining a network architecture which encourages an efficient group communication implementation.  IP-multicasting over the group is a possible approach for building control, although proxy-based methods may prove to be more appropriate in some deployments <a href="#I-D.rahman-core-groupcomm">[I-D.rahman-core-groupcomm]</a>.  </p>
<p id="rfc.section.3.p.2">Example device groups become: </p>
<div id="#rfc.table.3"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">URI authority </th>
<th class="left">Targeted group </th>
</tr></thead>
<tbody>
<tr>
<td class="left">//all.bldg6... </td>
<td class="left">"all devices in building 6"</td>
</tr>
<tr>
<td class="left">//all.west.bldg6... </td>
<td class="left">"all devices in west wing, building 6" </td>
</tr>
<tr>
<td class="left">//all.floor1.west.bldg6... </td>
<td class="left">"all devices on floor 1, west wing, ..." </td>
</tr>
<tr>
<td class="left">//all.bu036.floor1.west.bldg6... </td>
<td class="left">"all devices in office bu036, ..." </td>
</tr>
</tbody>
</table>
<p id="rfc.section.3.p.3">The granularity of this example is for illustration rather than a recommendation.  Experience will dictate the appropriate hierarchy for a given structure as well as the appropriate number of groups per subdomain. Note that in this example, the group name "all" is used to identify the group of all devices in each subdomain.  In practice, "all" could name an address record in each of the DNS zones shown above and would bind to a different multicast address <a href="#RFC3596">[RFC3596]</a> in each zone.  Highly granular multicast scopes are only practical using IPv6. The multicast address allocation strategy is beyond the scope of this I-D, but various alternatives have been proposed <a href="#RFC3306">[RFC3306]</a><a href="#RFC3307">[RFC3307]</a><a href="#RFC3956">[RFC3956]</a>.  </p>
<p id="rfc.section.3.p.4">To illustrate the concept of multiple group names within a building, consider the definition, as done with <a href="#DALI">[DALI]</a>, of scenes within the context of a floor or a single office. For example, the setting of all blue lights in office bu036 of floor 1 can be realized by multicasting a message to the group "//blue-lights.bu036.floor1". Each group is associated with a multicast IP address.  Consequently, when the application specifies the sending of an "on" message to all blue lights in the office, the message is multicast to the associated IP address.  </p>
<p id="rfc.section.3.p.5">The binding of a group FQDN to a multicast address (i.e., creation of the AAAA record in the DNS zone server) happens during the commissioning process.  Resolution of the group name to a multicast address happens at restart of a device.  A multicast address and associated group name in this context are assumed to be long-lived. It can happen that during operation the membership of the group changes (less or more lights) but its address is not altered and neither is its name. Group membership may be managed by a protocol such as Multicast Listener Discovery <a href="#RFC5790">[RFC5790]</a>.  </p>
<p id="rfc.section.3.p.6">Similarly, a group can identify a set of resources of one server. For examples a device contains four I/O channels. The device hosts one server with four resources to access each of the four individual channels separately. Commonly, it is also required to access all four channels as one group. An additional path identifies the group of services. An example set of services and service-group is: </p>
<div id="#rfc.table.4"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">URI path </th>
<th class="left">Targeted group </th>
</tr></thead>
<tbody>
<tr>
<td class="left">/IOchannel/1... </td>
<td class="left">"channel 1 of the IO channel device " </td>
</tr>
<tr>
<td class="left">/IOchannel/2... </td>
<td class="left">"channel 2 of the IO channel device " </td>
</tr>
<tr>
<td class="left">/IOchannel/3... </td>
<td class="left">"channel 3 of the IO channel device " </td>
</tr>
<tr>
<td class="left">/IOchannel/4... </td>
<td class="left">"channel 4 of the IO channel device " </td>
</tr>
<tr>
<td class="left">/IOchannel/... </td>
<td class="left">"channel 1 to 4 of the IO channel device " </td>
</tr>
</tbody>
</table>
<p id="rfc.section.3.p.7">A group defines a set of servers possibly containing a set of resources.  Grouping of the resources is provided by the device manufacturer.  Grouping of the servers is supported by DNS and multicast protocols.  The multicast address(es) identify the servers belonging to the group.  A given server might belong to a number of groups.  For example the server belonging to the "blue-lights" group in a given corridor might also belong to the groups: "whole building", "given wing", "given floor", "given corridor", and "lights in given corridor".  From the perspective of a server, the main consequence of joining a group is it should accept packets for an additional IP address.  The granularity of the domain names may have an impact on the complexity of the DNS infrastructure but not necessarily on the low-resource destinations or sources. Assuming that resolution of addresses only happens at device start-up, the complexity of the DNS server need not affect the responsiveness of the devices.  </p>
<p id="rfc.section.3.p.8">In summary, the authority portion of the URI resolves to an IP-address and port number, and identifies a server or group of servers.  Authority naming is building or organization dependent, must be flexible, and does not require standardization efforts but SHOULD conform to some uniform convention. Path naming SHOULD conform to the naming convention of a standardization body.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#sect-4" id="sect-4">Discovery</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#sect-4.1" id="sect-4.1">Service discovery goals</a>
</h1>
<p id="rfc.section.4.1.p.1">Service discovery in building control should rely on a minimal need for intervention by humans (or complete absence of humans) during system setup, bootstrapping, restart, configuration and daily operation.  The goals for service discovery area: </p>
<div id="#rfc.table.5"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Goal </th>
<th class="left">Goal description </th>
</tr></thead>
<tbody>
<tr>
<td class="left">Return_instance </td>
<td class="left">Return all instances of a given service type within a given domain</td>
</tr>
<tr>
<td class="left">Group_instance </td>
<td class="left">Group a set of instances within a group associated with a domain </td>
</tr>
<tr>
<td class="left">Instance_resolution </td>
<td class="left">Resolve the instance name to usable invocation information (e.g. IP address and port) </td>
</tr>
<tr>
<td class="left">Group_resolution </td>
<td class="left">resolve the group name to usable invocation information  (e.g. IP address and port) </td>
</tr>
</tbody>
</table>
<p id="rfc.section.4.1.p.2">These goals are necessary to support the operation of commercial building control. Returning the instances results in a list of names. For building control these names can be any sequence of characters as long as for each service instance these names are unique within the domain. In <a href="#I-D.cheshire-dnsext-dns-sd">[I-D.cheshire-dnsext-dns-sd]</a> the office equipment in the IT domain is recommended to use understandable and human-readable names.  The Home domain may have a need for human understandable names. This is not the case for the commercial building automation domain. However, uniqueness of the name is necessary for the application that needs to address the service in a consistent manner.  Given the large number of devices in a building (several hundreds to thousands) scaling is an important aspect of the service discovery. A set of central DNS servers will provide the scalability. The expectation is that names need to be managed consistently by a central authority which can be supported by the DNS server. Tools will assist the installer and operator of the network to do the installation, configuration and maintenance of the network structure. Small devices will use the DNS server to learn the communication partners providing a given service within their domain and to resolve the IP addresses of the communication partners.  </p>
<p id="rfc.section.4.1.p.3">Within the home it is more important that the names convey the purpose of the service to the user reading the names and selecting his favored service instance.  Non-unique names, although confusing, can probably be handled by the user of these names. Scalability is less of an issue because a smaller number of devices is implicated. The network in the home is probably more dynamic than its commercial counter-part, with many movements of devices and arrival or removal of devices.  </p>
<p id="rfc.section.4.1.p.4">Section 5 presents some examples of DNS structures to show how the choice of names influences the granularity of the discovery. In sections 5.1 and 5.3 a grouping example and a commissioning example, filling the DNS, are presented.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#sect-4.2" id="sect-4.2">DNS-Based Service Discovery</a>
</h1>
<p id="rfc.section.4.2.p.1">DNS-Based Service Discovery (DNS-SD) defines a conventional way to configure DNS PTR, SRV, and TXT records to facilitate discovery of services within a subdomain, re-using the existing DNS infrastructure.  This section gives a cursory overview of DNS-SD; see <a href="#I-D.cheshire-dnsext-dns-sd">[I-D.cheshire-dnsext-dns-sd]</a>  for a complete description.  </p>
<p id="rfc.section.4.2.p.2">A DNS-SD service instance name is of the form &lt;Instance&gt;.&lt;ServiceType&gt;.&lt;Location&gt;.  </p>
<p id="rfc.section.4.2.p.3">The Location part of the service name is identical to the DNS subdomain part of the authority in URIs that identify the resources of this server or group and may identify a building zone as in the examples above.  </p>
<p id="rfc.section.4.2.p.4">The ServiceType SHOULD have the form [_subtype._sub.]_type._proto (e.g. _temp._sub._bc._udp).  The _proto identifier provides a transport protocol hint as required by the SRV record definition <a href="#RFC2782">[RFC2782]</a> and, in the case of CoAP, it is always "_udp".  The _type identifier is determined by standards development organization (SDO) and MUST be registered with dns-sd.org <a href="#dns-sd">[dns-sd]</a> (e.g. _bc for building control).  The SDO is then free to specifiy one or more _subtype identifiers, which must be unique for a given _type (e.g. _temp).  The _subtype and _type labels are separated by the literal "._sub" label.The maximum length of the type and subtype fields is 14 octets, but shorter names are encouraged to reduce packet sizes.  </p>
<p id="rfc.section.4.2.p.5">A PTR record with the label "_type._proto" is defined for each server in a selected domain, and this record's value is set to the service instance name (which in turn identifies the SRV and TXT records for the CoAP server).  </p>
<p id="rfc.section.4.2.p.6">The Instance part of the service name may be changed during the commissioning process.  It must be unique for a given ServiceType within the subdomain.  The complete service name uniquely identifies an SRV and a TXT record in the DNS zone.  The granularity of a service name MAY be at the group or server level, or it could represent a particular resource within a CoAP server.  The SRV record contains the host (AAAA record) name and port of the service.  The path part of the URI MUST be placed in the TXT record (path=) when multiple resources belong to the same service.  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#sect-4.3" id="sect-4.3">Browsing for Services</a>
</h1>
<p id="rfc.section.4.3.p.1">Devices in a given Location with given ServiceType, _type._proto, may be enumerated by sending a DNS query for PTR records named _type._proto to the authoritative server for that zone associated with the Location.  A list of instance names for SRV records matching that &lt;ServiceType&gt;.&lt;Location&gt; is returned.  Each SRV record contains the host name and port of a CoAP server.  The IP address of the device is obtained by resolving the host name.  DNS-SD also specifies an optional TXT record, having the same name as the SRV record, which can contain "key=value" attributes.  Apart from defining standardized resources identified by if=XXX, the XXX organization may also define the standard "key=value" pairs present in the TXT record, e.g. type=switch.  By convention, the first pair is txtver=&lt;number&gt; so that different versions of the XXX schema may interoperate.  For example: A query is sent to DNS-SD to return all DALI lamps within the domain office5/mybuilding and with ServiceType: _lamp._sub._dali._udp. DNS-SD returns the list of all SRV records and AAAA records of the devices within the domain providing the wanted service.  </p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#sect-4.4" id="sect-4.4">Resource vs Service Discovery</a>
</h1>
<p id="rfc.section.4.4.p.1">Service discovery is concerned with finding the IP address, port, protocol, and possibly path of a named service. Resource discovery is a fine-grained enumeration of resources (path-names) of a server.  <a href="#I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</a> specifies a resource discovery pattern, such that sending a confirmable GET message for the /.well-known/core resource returns a set of links available from the server.  These links describe resources hosted on that server.  </p>
<p id="rfc.section.4.4.p.2">CoAP link format can be used to enumerate attributes and populate the DNS-SD database in a semi-automated fashion.  CoAP resource descriptions can be imported into DNS-SD for exposure to service discovery as described in <a href="#I-D.lynn-core-discovery-mapping">[I-D.lynn-core-discovery-mapping]</a>.  The values stored in the DNS-SD directory are extracted from the information stored in the resource directory associated with a set of CoAP hosts <a href="#I-D.shelby-core-resource-directory">[I-D.shelby-core-resource-directory]</a>.  The resources describe how the services can be manipulated in detail and in concreto.  </p>
<p id="rfc.section.4.4.p.3">It is assumed that a resource directory exists per 6LoWPAN <a href="#RFC4944">[RFC4944]</a>, possibly running on the edge router.  The DNS-SD provides a larger scope by storing the info of all services over a set of interconnected 6LoWPANs.  Where the resource directory is possibly completely adequate for home networks, handling of multiple resource directories can be quite cumbersome for the many 6LoWPANs envisaged for offices.  However, during network configuration, the resource directory can be used as long as the DNS is not yet accessible.  </p>
<p id="rfc.section.4.4.p.4">The DNS-SD approach is complementary to the more fine-grained resource discovery, fits better the concept of service by discovering servers with given properties.  DNS-SD supports a hierarchical approach to the naming of the services as discussed in section 3.  DNS-SD provides a directory structure that scales well with the network size as shown by its present-day operation.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#sect-5" id="sect-5">DNS record structure</a>
</h1>
<p id="rfc.section.5.p.1">An example is presented which explains the Resource Record (RR) structure on the DNS server.  This section follows the mapping specified in <a href="#I-D.lynn-core-discovery-mapping">[I-D.lynn-core-discovery-mapping]</a>, which defines how to fill the DNS-SD records from the link extension values.  Suppose the services are delivered by XXX building control devices. The example subtype- and context- names are assumed to be standardized by the XXX alliance.  All devices are situated in one office with location office4.bldg8.example.com.  The names in the examples are more verbose than recommended to make the examples more readable.  The table presents the services provided in the office control network: </p>
<div id="#rfc.table.6"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">service </th>
<th class="left">ServiceType </th>
<th class="left">Number </th>
</tr></thead>
<tbody>
<tr>
<td class="left">illumination </td>
<td class="left">_OnOff_light._sub._bc._udp   </td>
<td class="left">4 </td>
</tr>
<tr>
<td class="left">presence </td>
<td class="left">_occup_sensor._sub._bc._udp  </td>
<td class="left">1 </td>
</tr>
<tr>
<td class="left">temperature </td>
<td class="left">_temp_sensor._sub._bc._udp  </td>
<td class="left">1 </td>
</tr>
<tr>
<td class="left">shading </td>
<td class="left">_shade_control._sub._bc._udp  </td>
<td class="left">1 </td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.p.2">In DNS PTR records with as label the ServiceType have as value service instance names.  The unique Instance names identify the service instances. In the example, the names contain id-x, with x in natural numbers. The names are usually created at the factory floor and somehow attached to the product. The ServiceTypes have been suffixed with .04.b8 to represent office4 in building8.  The same suffix is used as PTR label to enemerate all instance of a given service, or within a given domain.  </p>
<div id="#rfc.table.7"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">_OnOff_light._sub._bc._udp.04.b8   </th>
<th class="left">PTR </th>
<th class="left">id-1._OnOff_light  </th>
</tr></thead>
<tbody>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-1._OnOff_light  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-1._OnOff_light  </td>
</tr>
<tr>
<td class="left">_OnOff_light._sub._bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-2._OnOff_light  </td>
</tr>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-2._OnOff_light  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-2._OnOff_light  </td>
</tr>
<tr>
<td class="left">_OnOff_light._sub._bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-3._OnOff_light </td>
</tr>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-3._OnOff_light  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-3._OnOff_light  </td>
</tr>
<tr>
<td class="left">_OnOff_light._sub._bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-4._OnOff_light  </td>
</tr>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-4._OnOff_light  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-4._OnOff_light  </td>
</tr>
<tr>
<td class="left">_occup_sensor._sub._bc._udp.04.b8   </td>
<td class="left">PTR   </td>
<td class="left">id-5._occup_sensor   </td>
</tr>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-5._occup_sensor  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-5._occup_sensor  </td>
</tr>
<tr>
<td class="left">_temp_sensor._sub._bc._udp.04.b8   </td>
<td class="left">PTR  </td>
<td class="left">id-6._temp_sensor </td>
</tr>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-6._temp_sensor  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-6._temp_sensor  </td>
</tr>
<tr>
<td class="left">_shade_control._sub._bc._udp.04.b8   </td>
<td class="left">PTR  </td>
<td class="left">id-7._temp_sensor </td>
</tr>
<tr>
<td class="left">bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-7._temp_sensor  </td>
</tr>
<tr>
<td class="left">04.b8   </td>
<td class="left">PTR </td>
<td class="left">id-7._temp_sensor  </td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.p.3">In the above example the id-x identifiers without the subtype suffix would be discriminating enough.  </p>
<p id="rfc.section.5.p.4">Discovery can be done with the following results. A query with the following argument returns </p>
<div id="#rfc.table.8"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">query argument   </th>
<th class="left">result list </th>
</tr></thead>
<tbody>
<tr>
<td class="left">.04.8   </td>
<td class="left">id-1._OnOff_light </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">....... </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">id-7._temp_sensor </td>
</tr>
<tr>
<td class="left">_bc._udp.04.b8   </td>
<td class="left">id-1._OnOff_light  </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">....... </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">id-7._temp_sensor </td>
</tr>
<tr>
<td class="left">_OnOff_light._sub._bc._udp.04.b8   </td>
<td class="left">id-1._OnOff_light </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">....... </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">id-4._OnOff_light  </td>
</tr>
<tr>
<td class="left">_occup_sensor._sub._bc._udp.04.b8   </td>
<td class="left">id-5._occup_sensor   </td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.p.5">When other offices are included in the database, the query argument 04.b8 selects those entries which are associated with office4 in building8 and rejects any others. The example shows clearly the query granularity that can be obtained and the care that must be exercised when defining the names of the ServiceTypes.  </p>
<p id="rfc.section.5.p.6">The service instances (value of PTR records) are the labels of the SRV, AAAA and TXT records describing the service instance. The SRV record specifies the location (authority) and the port number.  In the authority o4.b8 refers to office4 in building8.  The AAAA record specifies the IP-address, while the TXT record specifies the subtype and the data representation of the legacy parser (if = ZigBee).  </p>
<div id="#rfc.table.9"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">id-1._OnOff_light     </th>
<th class="left">SRV </th>
<th class="left">light1.o4.b8.example.com  </th>
<th class="left">Port-x </th>
</tr></thead>
<tbody>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1234 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-2._OnOff_light     </td>
<td class="left">SRV </td>
<td class="left">light2.o4.b8.example.com  </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1235 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-3._OnOff_light     </td>
<td class="left">SRV </td>
<td class="left">light3.o4.b8.example.com  </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1236 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-4._OnOff_light     </td>
<td class="left">SRV </td>
<td class="left">light4.o4.b8.example.com  </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1237 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-5._occup_sensor      </td>
<td class="left">SRV </td>
<td class="left">occup.o4.b8.example.com   </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1238 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-6._temp_sensor    </td>
<td class="left">SRV  </td>
<td class="left">temp.o4.b8.example.com   </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1239 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-7._shade_control </td>
<td class="left">SRV  </td>
<td class="left">shade.o4.b8.example.com </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1240 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.p.7">It is possible that the temperature sensor and occupancy sensor are delivered on one device.  The consequence is that one device hosts two services. In the DNS table the four lights and the shade controller are unaffected. However, the PTR records with the occupancy and temperature sensor point to the same unique identifier id-8 that is suffixed with the name of the subtype. This example shows that the subtype suffix is needed to discriminate between the two service instances.  </p>
<div id="#rfc.table.10"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">_occup_sensor._sub._bc._udp   </th>
<th class="left">PTR   </th>
<th class="left">id-8._occup_sensor   </th>
</tr></thead>
<tbody><tr>
<td class="left">_temp_sensor._sub._bc._udp   </td>
<td class="left">PTR  </td>
<td class="left">id-8._temp_sensor </td>
</tr></tbody>
</table>
<p id="rfc.section.5.p.8">Two SRV records with accompanying AAAA and TXT records describe the two servers, each providing one service, in more detail.  The servers share the same IP address but are connected to different ports, and do have a different paths names.  The TXT record is used to specify the path part with "path=".  </p>
<div id="#rfc.table.11"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">id-8._occup_sensor   </th>
<th class="left">SRV </th>
<th class="left">occup.o4.b8.example.com  </th>
<th class="left">Port-x </th>
</tr></thead>
<tbody>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1241 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">path=/os if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-8._temp_sensor   </td>
<td class="left">SRV </td>
<td class="left">temp.o4.b8.example.com  </td>
<td class="left">Port-y </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1241 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">path=/ts if=ZigBee </td>
<td class="left"></td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.p.9">The path names /ts and /os are short names for temperature_sensor and occupancy_sensor respectively.  Not all multi-function devices will use different ports for the individual functions. It is also quite common to use different IP interfaces with different IP addresses, reflected by the value of the AAAA records.  </p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#sect-5.1" id="sect-5.1">DNS group example</a>
</h1>
<p id="rfc.section.5.1.p.1">Another aspect is the grouping of servers. Where in the former section the names of the services are standardized names, this is less probable for the group names. Usually the group names are application specific or are standardized at the manufacturer.  For example, assume that a group all-light.o4.b8.example.com is created which contains all four lights inside office4. The accompanying ServiceType can be defined as _all_light._sub._bc._udp.  The ServiceType suffixed with 04.b8 points to a unique identifier defined as _all_light.04.b8, assuming that this is the only _all_light group within office 4 of building 8. The PTR record looks like: </p>
<div id="#rfc.table.12"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">_all_light._sub._bc._udp.04.b8   </th>
<th class="left">PTR </th>
<th class="left">_all_light.04.b8  </th>
</tr></thead>
<tbody><tr></tr></tbody>
</table>
<p id="rfc.section.5.1.p.2">It is assumed that the group all_light.o4.b8.example.com has received a multicast address: ff1e::148.  The accompanying SRV, AAAA, and TXT RR become: </p>
<div id="#rfc.table.13"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">_all_light.04.b8  </th>
<th class="left">SRV </th>
<th class="left">all_light.o4.b8.example.com  </th>
<th class="left">Port-z </th>
</tr></thead>
<tbody>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">ff1e::148 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee </td>
<td class="left"></td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.1.p.3">When a multicast message is sent to a group, the path of the accessed resource must be strictly the same for all servers.  The naming of the path is typically a responsibility for the standardisation organisations describing the command set for a given application area. However a constraint exits in the case of mult-function devices which host multiple resource of the same type. For example a device with three lamps with corresponding onoff attributes can be accessed via the three different paths: </p>
<div id="#rfc.table.14"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr><th class="left">/light/1/onoff </th></tr></thead>
<tbody>
<tr><td class="left">/light/2/onoff </td></tr>
<tr><td class="left">/light/3/onoff </td></tr>
</tbody>
</table>
<p id="rfc.section.5.1.p.4">A unique path to the onoff resource of all instances of light on this device can be provided by /light/onoff.  As this is logically the path to a single instance on a mono-function device. The corresponding unique paths for onoff to be used in the multicast message becomes /light/onoff. The corresponding resource records for a luminaire, named lm1, in DNS become: </p>
<div id="#rfc.table.15"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">_light._sub._bc._udp.04.b8   </th>
<th class="left">PTR </th>
<th class="left">_all_light.04.b8  </th>
<th class="left"></th>
</tr></thead>
<tbody>
<tr>
<td class="left">_light._sub._bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">_light_1.04.b8  </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">_light._sub._bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">_light_2.04.b8  </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">_light._sub._bc._udp.04.b8   </td>
<td class="left">PTR </td>
<td class="left">_light_3.04.b8  </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">_all_light.04.b8  </td>
<td class="left">SRV </td>
<td class="left">all_light.o4.b8.example.com  </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">ff1e::148 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee path=/light </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">_light_1.04.b8  </td>
<td class="left">SRV </td>
<td class="left">lm1.o4.b8.example.com  </td>
<td class="left">Port-z </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1234 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee path=/light/1</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">_light_2.04.b8  </td>
<td class="left">SRV </td>
<td class="left">lm1.o4.b8.example.com  </td>
<td class="left">Port-z </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1234 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee path=/light/2 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">_light_3.04.b8  </td>
<td class="left">SRV </td>
<td class="left">lm1.o4.b8.example.com  </td>
<td class="left">Port-z </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd::1234 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">if=ZigBee path=/light/3 </td>
<td class="left"></td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.1.p.5">The entries in DNS can be used to form groups with the light weight group management protocol and multicast listener discovery <a href="#RFC5790">[RFC5790]</a>.  </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#sect-5.2" id="sect-5.2">Operational use of DNS-SD</a>
</h1>
<p id="rfc.section.5.2.p.1">The populated DNS-SD server provides the necessary support for the applications to execute their control loops with minimum operator support. The operation of the office network can be split up in phases.  In a first phase the network is commissioned, such that a relation is established between the IP address, the servicetype and the domain. The servicetype can be extracted from the link-format as described in <a href="#I-D.shelby-core-resource-directory">[I-D.shelby-core-resource-directory]</a>.  After commissioning this information is stored in the DNS-SD files. In a second phase groups are formed and group names with their IP address are stored in the DNS-SD files. The IP multicast addresses are communicated to the members of the groups. In the third and final phase, applications query DNS-SD to find the IP addresses of the services within a given domain, and of the groups within a given domain.  </p>
<p id="rfc.section.5.2.p.2">In the home, a commissioning phase requiring the intervention of an installer (a "truck roll") is to be avoided if possible. Here the first phase consists of the booting up devices which insert their services resources to a link-format directory.  The information from the resource directory can be inserted into DNS-SD or into xmDNS <a href="#I-D.lynn-dnsext-site-mdns">[I-D.lynn-dnsext-site-mdns]</a> when appropriate.  In the second phase remote controllers or other hand-held devices can be used to discover the services of a given type, to group the services, and to store the group names into DNS-SD or xmDNS as appropriate. Pointing out the members of a group can be in any kind of manner from typing members in, selecting them from a browser list, etc.  </p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#sect-5.3" id="sect-5.3">Commissioning CoAP devices</a>
</h1>
<p id="rfc.section.5.3.p.1">For clarity it is assumed in this section that a device hosts one server.  A device has received a unique device identifier at the production plant.  Given the authority naming presented in section 2.2 the authority name represents the location of the host within the building.  </p>
<p id="rfc.section.5.3.p.2">Commissioning means the following three actions: </p>
<div id="#rfc.table.16"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">- </th>
<th class="left">Defining the URI (location) </th>
</tr></thead>
<tbody>
<tr>
<td class="left">- </td>
<td class="left">Assigning an IP address to the URI </td>
</tr>
<tr>
<td class="left">- </td>
<td class="left">mapping the unique device identifier to the URI </td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.3.p.3">Two cases of the office network are considered for commissioning: (1) no 6LBR and no DNS server connected, and (2) a 6LBR connects the office network to a DNS server.  </p>
<p id="rfc.section.5.3.p.4">When an architect has designed the building and described all light points, ventilators, heating- and cooling units, and sensors, it is necessary to identify all these devices spatially and functionally.  Storing the triple &lt;Instance&gt;.&lt;ServiceType&gt;.&lt;Location&gt; into DNS-SD represents the commissioning process.  The Instance is the unique identifier given to the device in the factory but which has no relation to its later location. The ServiceType together with the Location represent the spatial and functional aspects of the device as specified by the architect.  </p>
<p id="rfc.section.5.3.p.5">Design decision: A commissioning tool with access to the network is used for the commissioning phase.  </p>
<p id="rfc.section.5.3.p.6">For example, dependent on used technology and production process, the following situation (state) may exist in a host after physical installation of the devices and before commissioning: </p>

<dl>
<dt>- </dt>
<dd style="margin-left: 8">A given host is unaware of its Location.</dd>
<dt>- </dt>
<dd style="margin-left: 8">A given host knows its ServiceType and Instance. The Instance is also readable by bar code reader.</dd>
<dt>- </dt>
<dd style="margin-left: 8">The commissioning tool knows all Locations to which hosts need to be assigned.</dd>
<dt>- </dt>
<dd style="margin-left: 8">Each host has a (site-local) IP address.</dd>
</dl>

<p> Consider the commissioning process (1) with a central DNS-SD server and (2) without a central server using xmDNS.  The commissioning processes described below are just examples and should not be taken as working procedures for commissioning devices in a building.  </p>
<h1 id="rfc.section.5.3.1">
<a href="#rfc.section.5.3.1">5.3.1.</a> <a href="#sect-5.3.1" id="sect-5.3.1">DNS-SD server present</a>
</h1>
<p id="rfc.section.5.3.1.p.1">The installer reads with a bar code reader, attached to the commissioning tool, the identifier of the device to commission.  It is assumed that the tool can learn the IP address of the device with the given identifier.  The tool displays on a screen the physical lay-out of the devices within the building.  The installer selects, on the screen of the tool, the physical location of the chosen device. From the designated physical location the tool creates the URI of the selected device.  The tool inserts the URI and the IP address into the DNS server.  For example the light with URI light1.o4.b8.example.com is represented with an AAAA record: </p>
<div id="#rfc.table.17"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">light1.o4.b8.example.com  </th>
<th class="left">AAAA </th>
<th class="left">fdfd::1234  </th>
</tr></thead>
<tbody><tr></tr></tbody>
</table>
<p id="rfc.section.5.3.1.p.2">The tool reads the service name and type from the device using resource information stored according to the link-format <a href="#I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</a>. With this information the tool constructs the PTR, SRV and TXT records according to the example presented in section 5.  </p>
<p id="rfc.section.5.3.1.p.3">This is done for all devices within a given part of the building.  After the commissioning process, all resources of each device have an URI and IP address which are stored in the central DNS-SD server.  When devices are restarted, the DHCP server may allocate new IP addresses to the device and update the DNS server.  </p>
<h1 id="rfc.section.5.3.2">
<a href="#rfc.section.5.3.2">5.3.2.</a> <a href="#sect-5.3.2" id="sect-5.3.2">DNS-SD server not present</a>
</h1>
<p id="rfc.section.5.3.2.p.1">It is assumed that the building network is composed of independent network segments (possibly a single site) such that each device on a given segment can communicate directly with any other device on this segment. The segments are not connected to a 6LBR and have no access to DNS or other servers.  The installer knows these segments and has a list of devices for a given segment.  In the tool the installer selects the names which belong to the given building segment.  The selected names are converted to site-local authorities and stored in the tool.  All devices are assumed to have selected a site-local IP address. Assume that every device has a unique barcode within the building and that the corresponding device knows the bar code number.  The installer reads with a bar code reader, attached to the tool, the Instance name of the device to commission. The installer selects, on the screen of the tool, the physical location of the chosen device. The tool knows the authority of the selected device.  The tool broadcasts the bar code number and authority to all connected devices.  The device with the given barcode number, extends the authority with the path name of the resources.  For each resource, the device multicasts the site-local IP-address and the site-local URI to the xmDNS servers in the connected devices. This concludes the commissioning of a network segment.  All resources of each device have a site-local URI and a site-local IP address which are stored in the xmDNS servers.  </p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> <a href="#sect-5.4" id="sect-5.4">Proxy discovery</a>
</h1>
<p id="rfc.section.5.4.p.1">Proxies will be used in CoAP networks for at least two major reasons: (1) http/coap proxy, and (2) proxy of service on battery-less device. The first proxy is probably implemented as forward proxy, while the latter is probably implemented as backward proxy.  The battery-less device will at rare occasions (when it is not sleeping) and during installation answer the GET /.well-known/core request. The return data are used by the installation tool to make the proxy device return the same resource names on /.well-known/core as is returned by the sleeping device.  An installation tool installs on the proxy all the resources of the sleeping device for which the proxy is assumed to answer.  Consequently, the proxy is discovered as a multi-server host with as many path names as it proxies sleeping servers.  The servers on sleeping devices should not be discoverable via DNS-SD.  However, AAAA records are generated for the sleeping device host name. This host name is used by the proxy to subscribe to the "sporadic" services of the sleeping device.  For example assume two sleeping devices, an occupancy sensor and a temperature sensor, and one proxy.  Two service types are defined with PTR records in DNS-SD. The identifier id-1 of the proxy is used by the installation tool to define the Instances.  </p>
<div id="#rfc.table.18"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">_occup_sensor._sub._bc._udp.04.b8   </th>
<th class="left">PTR </th>
<th class="left">id-1._occup_sensor   </th>
</tr></thead>
<tbody><tr>
<td class="left">_temp_sensor._sub._bc._udp.04.b8   </td>
<td class="left">PTR  </td>
<td class="left">id-1._temp_sensor </td>
</tr></tbody>
</table>
<p id="rfc.section.5.4.p.2">Two SRV records with accompanying AAAA and TXT records describe the two services in more detail.  The services share the same IP address, are connected to the same port, but do have different paths names.  The TXT record is used to specify the path part with "path=".  </p>
<div id="#rfc.table.19"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">id-1._occup_sensor   </th>
<th class="left">SRV </th>
<th class="left">proxy.o4.b8.example.com  </th>
<th class="left">Port-x </th>
</tr></thead>
<tbody>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd:: 1241 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">path=/os if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">id-1._temp_sensor   </td>
<td class="left">SRV </td>
<td class="left">proxy.o4.b8.example.com  </td>
<td class="left">Port-x </td>
</tr>
<tr>
<td class="left"></td>
<td class="left">AAAA </td>
<td class="left">fdfd:: 1241 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left">TXT </td>
<td class="left">path=/ts if=ZigBee </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">sl-ts.o4.b8.example.com </td>
<td class="left">AAAA </td>
<td class="left">fdfd::1242 </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">sl-os.o4.b8.example.com  </td>
<td class="left">AAAA </td>
<td class="left">fdfd::1243 </td>
<td class="left"></td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.4.p.3">The path names /ts and /os are short names for temperature_sensor and occupancy_sensor respectively and were taken over from link-format information contained in the sleeping devices. Two AAAA records are provided for the two sleeping devices.  The proxy has used the domain names of the sleeping devices to subscribe to the publications of the two sleeping devices.  </p>
<p id="rfc.section.5.4.p.4">It is important to remark that there are now two services with the same resources present on two different devices: the sleeping device and its proxy. When a host invokes the /.well-known/core resource, it should be possible to distinguish between the proxy (to be invoked) and the sleeping device (not to be invoked). The distinction is necessary once the sleeping device is discoverable and the sleeping device is awake from time to time. It is suggested that the link-format syntax allows to make this distinction.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#sect-6" id="sect-6">Legacy data Representations in CoAP</a>
</h1>
<p id="rfc.section.6.p.1">Before CoAP devices can come to market, manufacturers must agree that the type and resources of the device can be interpreted according to some generally recognized syntax.  At this moment no such generally recognized syntax exists for CoAP devices. We do not expect an IETF working group to standardize such a syntax, and we are convinced that syntax standardization is the responsibility of industry standards organizations. Given the long history of building control, many groups have defined a data representation for building control devices for example BACnet, ZigBee, oBIX, LON, KNX, and many others. It is our belief that new representations will be defined and must coexist with the named legacy ones.  </p>
<p id="rfc.section.6.p.2">The CoAP protocol should transport any data representation, and certainly the legacy ones.It is expected that a CoAP client can handle one or more legacy representation. Given that a CoAP client can handle representation of standard XXX, this I-D proposes that such a CoAP device can communicate with legacy devices via a CoAP/legacy gateway (router).  </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#sect-6.1" id="sect-6.1">Network architectures</a>
</h1>
<div id="#rfc.figure.1"></div>
<pre>
  +------+                 +------+     +------+
  | yyy  |                 | zzz  |     | zzz  |
  | link |                 | CoAP |     | CoAP |
  +------+                 +------+     +------+
    |         +---------+
    |---------| CoAP    |--&gt;
    |         | gateway |
  +------+    +---------+        +-----------+
  | yyy  |                       | zzz ; yyy |
  | link |                       |   CoAP    |
  +------+                       +-----------+
        </pre>
<p id="rfc.section.6.1.p.1">Figure 1 represents the network architecture which is expected for the purpose of this I-D.  The CoAP gateway connects one link with two legacy devices -containing legacy data representation "yyy"- with the wireless CoAP network composed of three CoAP hosts. Two CoAP hosts contain the CoAP stack with a zzz representation and one host contains the CoAP stack with a zzz and an yyy representation. The yyy hosts can freely communicate according to the yyy link protocol over the yyy link. The zzz CoAP hosts, including the zzz;yyy host can freely exchange zzz data representations according to the CoAP protocol over the wireless 6LoWPAN network. The zzz;yyy host can send yyy data representations to the CoAP gateway which passes them on to the specified yyy legacy host. The yyy legacy device returns data to the requesting zzz;yyy CoAP host via the same gateway.  </p>
<p id="rfc.section.6.1.p.2">The CoAP hosts can address the legacy devices behind the gateway in at least 4 ways.  </p>

<dl>
<dt>- </dt>
<dd style="margin-left: 8">All devices of legacy network YYY share the URI with the CoAP gateway.  Every legacy device is a resource for the gateway as seen from the CoAP host. Consequently, the CoAP host sends the message to the IP address of the gateway and the gateway parses the URI-Path to determine the specified legacy device.</dd>
<dt>- </dt>
<dd style="margin-left: 8">All devices of legacy network YYY have IP addresses different from the IP address of the gateway.  Consequently, a CoAP host sends the message to the IP address of the specified device. The routing protocol on the CoAP network makes the message arrive at the CoAP gateway. The gateway determines the specified legacy device from the destination IP address.</dd>
<dt>- </dt>
<dd style="margin-left: 8">All devices of legacy network YYY have different authorities. The authorities of the legacy device resolve to an IP address of the gateway. This means that the possibly lengthy authority names need to be transmitted. The gateway recognizes the authorities and maps authority to legacy device.</dd>
<dt>- </dt>
<dd style="margin-left: 8">All devices of legacy network YYY have different ports. This can be expressed in two ways (1) as :port in the URI, or (2) in the DNS-SD records. In the latter case the port is defined in the UDP header and is efficient in packet header size.</dd>
</dl>

<p> The major advantage of all four approaches is that the gateway only handles the URI or IP address and port number to select the destination legacy device independent of the type of legacy device and the contents of the legacy payload of the message.  In Figure 1 the gateway connects to a single link. For example, this would be the case for DALI standard.  Other legacy standards, like BACnet, LON, allow networks composed of multiple links.  </p>
<p id="rfc.section.6.1.p.3">An example of an invocation of a ZZZ service (See figure 2).  The resource path /ZZZ identifies the parser of the ZZZ syntax. A 12 octet string completely describes the ZZZ command.  The host is completely identified by the authority in the URI. The ZZZ parser on the host is identified by the port number in the UDP header (not shown).  </p>
<div id="#rfc.figure.2"></div>
<pre>
          
    Client                                             CoAP/ZZZ
      |                                                  device 
      |  REQUEST                                           |
      |-------- CON [0x5577] PUT /ZZZ --------&gt;|
      |             binary 12 octet string                 |
      |                                                    |
      |  RESPONSE                                          |
      |&lt;---------- ACK [0x5577] 2.00 OK  ----------------- |
      |                                                    |
          
        </pre>
<p id="rfc.section.6.1.p.4">An example of an invocation of a DALI legacy device behind a gateway is given in figure 3.  The resource path /DALI identifies the DALI parser.  The application sets a value of 200 in the DALI device in the resource 256 defined by the DALI spec.  </p>
<div id="#rfc.figure.3"></div>
<pre>
          
    Client                                             DALI/CoAP
      |                                                 gateway 
      |  REQUEST                                           |
      |------- CON [0x5577] PUT /DALI --------&gt;|
      | binary 16 bit payload dt*256 + 200                 |
      |                                                    |
      |  RESPONSE                                          |
      |&lt;---------- ACK [0x5577] 2.00 OK  ----------------- |
      |                                                    |
          
        </pre>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#sect-6.3" id="sect-6.3">Discovery of legacy gateways</a>
</h1>
<p id="rfc.section.6.2.p.1">Discovery of legacy gateways is not very different from discovery of proxies in section 5.4. the consequences for discovery are listed for the four modes of addressing legacy devices via a gateway of section 6.1.  </p>

<dl>
<dt>- </dt>
<dd style="margin-left: 8">The gateway presents a list of resources representing the legacy devices. Discovery is done as for other CoAP devices.</dd>
<dt>- </dt>
<dd style="margin-left: 8">Each legacy device has a different IP address. The gateway must create entries in the DNS for as many legacy devices.  The authority of the legacy device is the authority of the gateway with a ServiceType to be specified by the gateway.</dd>
<dt>- </dt>
<dd style="margin-left: 8">All devices of legacy network YYY have different authorities.  In this case each legacy device has the same IP address as the gateway. The gateway must create entries in the DNS for as many legacy devices.</dd>
<dt>- </dt>
<dd style="margin-left: 8">All devices of legacy network YYY have different ports. The gateway must create entries in the DNS for as many legacy devices.  Each entry has the authority of the gateway with a different ServiceType and a different port number.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#conclusions" id="conclusions">Conclusions</a>
</h1>
<p id="rfc.section.7.p.1">This I-D explains how naming in building control is based on a hierarchical structure of the building areas. It is shown that DNS naming can be used to express this hierarchy in the authority portion of the URI, down to the group or device level.  The hierarchical naming scheme need not be standardized, but rather can be designed to suit the application.  However, it is recommended that the scheme be employed consistently throughout the delegated subdomain(s).  </p>
<p id="rfc.section.7.p.2">The authority portion of the URI is resolved by the client, using conventional DNS, into the unicast or multicast IP address of the targeted device(s).  Taking advantage of the CoAP design <a href="#I-D.ietf-core-coap">[I-D.ietf-core-coap]</a>, the URI-Host option need not be transmitted in requests to origin servers and thus there is no performance penalty for using descriptive naming schemes.  The CoAP design allows sending a short URI to distinguish between resources on a given device, resulting in very compact identifiers.  </p>
<p id="rfc.section.7.p.3">DNS-SD <a href="#I-D.cheshire-dnsext-dns-sd">[I-D.cheshire-dnsext-dns-sd]</a> can be used to scale up service discovery beyond the 6LoWPAN.  DNS-SD can be used to enumerate instances of a given service type within a given sub-domain.  This affords additional flexibility, such as the ability to discover dynamic port assignments for CoAP device, locate CoAP devices by subtype, or bind service names for particular CoAP URIs.  </p>
<p id="rfc.section.7.p.4">This I-D discusses the addressing, discovery and naming of legacy devices behind gateways.  The discovery of backward proxies of sleeping devices is handled in a similar fashion.  </p>
<p id="rfc.section.7.p.5">A targeted resource is specified by the path portion of the URI.  Again, this I-D does not mandate a universal naming standard for resources but uses examples to show how resources could be named for various legacy standards. An obvious requirement for resources that are accessed by multicast is that they MUST all share the same path.  It is shown that it is possible to transport legacy commands (e.g. expressed in BACnet, LON, DALI, ZigBee, etc.) inside a CoAP message body. Entering ServiceTypes particular to a given standard necessitates that the standardization body declares the ServiceType to dns.org.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#sec" id="sec">Security considerations</a>
</h1>
<p id="rfc.section.8.p.1">TBD: The detailed CoAP security analysis needs to encompass scenarios for building control applications.  </p>
<p id="rfc.section.8.p.2">Based on the programming model presented in this I-D, security scenarios for building control need to be stated. Appropriate methods to counteract the proposed threats may be based on the work done elsewhere, for example in the ZigBee over IP context.  </p>
<p id="rfc.section.8.p.3">Multicast messages are, by their nature, transmitted via UDP.  Any privacy applied to such messages must be block oriented and based on group keys shared by all targeted devices.  The CoRE security analysis must be broadened to include multicast scenarios.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#iana" id="iana">IANA considerations</a>
</h1>
<p id="rfc.section.9.p.1">This I-D proposes that associations which standardize device representations (like BACnet, ZigBee, DALI,...) contact IANA to reserve the prefix /.well-known/XXX for the standard XXX.  </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#ack" id="ack">Acknowledgements</a>
</h1>
<p id="rfc.section.10.p.1">This I-D has benefited from conversations with and comments from Andrew Tokmakoff, Emmanuel Frimout, Jamie Mc Cormack, Oscar Garcia, Dee Denteneer, Joop Talstra, Zach Shelby, Jerald Martocci, Anders Brandt, Matthieu Vial, Jerome Hamel, George Yianni, and Nicolas Riou.  </p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#change" id="change">Changelog</a>
</h1>
<p id="rfc.section.11.p.1">From bc-01 to bc-02 </p>
<p id="rfc.section.11.p.2">- Removed all references to multicast and multicast scope, given draft of rahman group communication.  </p>
<p id="rfc.section.11.p.3">- Adapted examples to CoAP-2 and core-link drafts.  </p>
<p id="rfc.section.11.p.4">- transport short URL for destination recognition.  </p>
<p id="rfc.section.11.p.5">- Elaborated legacy discovery under DNS-SD.  </p>
<p></p>
<p id="rfc.section.11.p.7">From bc-02 to bc-03 </p>
<p id="rfc.section.11.p.8">- Elaboration on gateways, commissioning and legacy networks.  </p>
<p id="rfc.section.11.p.9">- Recommendation to extend DNS-SD naming with sn, st, and ss attributes.  </p>
<p></p>
<p id="rfc.section.11.p.11">From bc-03 to bc-04 </p>
<p id="rfc.section.11.p.12">- moved core link extension sub-section to discovery mapping draft </p>
<p id="rfc.section.11.p.13">- extended use of service type </p>
<p id="rfc.section.11.p.14">- gave DNS record examples and worked out multifunction device </p>
<p id="rfc.section.11.p.15">- added proxy discovery and legacy gateway discovery </p>
<p id="rfc.section.11.p.16">- defined path tree and corresponding schema </p>
<p id="rfc.section.11.p.17">- reviewed definition of group, device, server, service (interface), resopurce, and attribute.  </p>
<p id="rfc.section.11.p.18">From bc-04 to bc-05 </p>
<p id="rfc.section.11.p.19">- extended and corrected examples for multi-function devicesw </p>
<p id="rfc.section.11.p.20">- syntax more compatible with other resource discovery I-Ds </p>
<p id="rfc.section.11.p.21">- abstract adapted </p>
<p id="rfc.section.11.p.22">- more stringent use of the words server, end point, service and devices </p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1034">[RFC1034]</b></td>
<td class="top">
<a title="Information Sciences Institute (ISI)">Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>", STD 13, RFC 1034, November 1987.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1123">[RFC1123]</b></td>
<td class="top">
<a href="mailto:Braden@ISI.EDU" title="University of Southern California (USC), Information Sciences Institute">Braden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1123">Requirements for Internet Hosts - Application and Support</a>", STD 3, RFC 1123, October 1989.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2782">[RFC2782]</b></td>
<td class="top">
<a href="mailto:arnt@troll.no" title="Troll Tech">Gulbrandsen, A.</a>, <a title="Internet Software Consortium">Vixie, P.</a> and <a href="mailto:levone@microsoft.com" title="Microsoft Corporation">L. Esibov</a>, "<a href="http://tools.ietf.org/html/rfc2782">A DNS RR for specifying the location of services (DNS SRV)</a>", RFC 2782, February 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3306">[RFC3306]</b></td>
<td class="top">
<a>Haberman, B.</a> and <a>D. Thaler</a>, "<a href="http://tools.ietf.org/html/rfc3306">Unicast-Prefix-based IPv6 Multicast Addresses</a>", RFC 3306, August 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3307">[RFC3307]</b></td>
<td class="top">
<a>Haberman, B.</a>, "<a href="http://tools.ietf.org/html/rfc3307">Allocation Guidelines for IPv6 Multicast Addresses</a>", RFC 3307, August 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3596">[RFC3596]</b></td>
<td class="top">
<a>Thomson, S.</a>, <a>Huitema, C.</a>, <a>Ksinant, V.</a> and <a>M. Souissi</a>, "<a href="http://tools.ietf.org/html/rfc3596">DNS Extensions to Support IP Version 6</a>", RFC 3596, October 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3629">[RFC3629]</b></td>
<td class="top">
<a>Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, November 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3956">[RFC3956]</b></td>
<td class="top">
<a>Savola, P.</a> and <a>B. Haberman</a>, "<a href="http://tools.ietf.org/html/rfc3956">Embedding the Rendezvous Point (RP) Address in an IPv6 Multicast Address</a>", RFC 3956, November 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3986">[RFC3986]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4944">[RFC4944]</b></td>
<td class="top">
<a>Montenegro, G.</a>, <a>Kushalnagar, N.</a>, <a>Hui, J.</a> and <a>D. Culler</a>, "<a href="http://tools.ietf.org/html/rfc4944">Transmission of IPv6 Packets over IEEE 802.15.4 Networks</a>", RFC 4944, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5198">[RFC5198]</b></td>
<td class="top">
<a>Klensin, J.</a> and <a>M. Padlipsky</a>, "<a href="http://tools.ietf.org/html/rfc5198">Unicode Format for Network Interchange</a>", RFC 5198, March 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5785">[RFC5785]</b></td>
<td class="top">
<a>Nottingham, M.</a> and <a>E. Hammer-Lahav</a>, "<a href="http://tools.ietf.org/html/rfc5785">Defining Well-Known Uniform Resource Identifiers (URIs)</a>", RFC 5785, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5790">[RFC5790]</b></td>
<td class="top">
<a>Liu, H.</a>, <a>Cao, W.</a> and <a>H. Asaeda</a>, "<a href="http://tools.ietf.org/html/rfc5790">Lightweight Internet Group Management Protocol Version 3 (IGMPv3) and Multicast Listener Discovery Version 2 (MLDv2) Protocols</a>", RFC 5790, February 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.cheshire-dnsext-dns-sd">[I-D.cheshire-dnsext-dns-sd]</b></td>
<td class="top">
<a>Cheshire, S</a> and <a>M Krochmal</a>, "<a href="http://tools.ietf.org/html/draft-cheshire-dnsext-dns-sd-10">DNS-Based Service Discovery</a>", Internet-Draft draft-cheshire-dnsext-dns-sd-10, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.cheshire-dnsext-multicastdns">[I-D.cheshire-dnsext-multicastdns]</b></td>
<td class="top">
<a>Cheshire, S</a> and <a>M Krochmal</a>, "<a href="http://tools.ietf.org/html/draft-cheshire-dnsext-multicastdns-14">Multicast DNS</a>", Internet-Draft draft-cheshire-dnsext-multicastdns-14, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-core-coap">[I-D.ietf-core-coap]</b></td>
<td class="top">
<a>Shelby, Z</a>, <a>Hartke, K</a>, <a>Bormann, C</a> and <a>B Frank</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-coap-08">Constrained Application Protocol (CoAP)</a>", Internet-Draft draft-ietf-core-coap-08, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</b></td>
<td class="top">
<a>Shelby, Z</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-link-format-09">CoRE Link Format</a>", Internet-Draft draft-ietf-core-link-format-09, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.martocci-6lowapp-building-applications">[I-D.martocci-6lowapp-building-applications]</b></td>
<td class="top">
<a>Martocci, J</a>, <a>Schoofs, A</a> and <a>P Stok</a>, "<a href="http://tools.ietf.org/html/draft-martocci-6lowapp-building-applications-01">Commercial Building Applications Requirements</a>", Internet-Draft draft-martocci-6lowapp-building-applications-01, July 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.rahman-core-groupcomm">[I-D.rahman-core-groupcomm]</b></td>
<td class="top">
<a>Rahman, A</a> and <a>E Dijk</a>, "<a href="http://tools.ietf.org/html/draft-rahman-core-groupcomm-07">Group Communication for CoAP</a>", Internet-Draft draft-rahman-core-groupcomm-07, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.shelby-core-resource-directory">[I-D.shelby-core-resource-directory]</b></td>
<td class="top">
<a>Shelby, Z</a> and <a>S Krco</a>, "<a href="http://tools.ietf.org/html/draft-shelby-core-resource-directory-02">CoRE Resource Directory</a>", Internet-Draft draft-shelby-core-resource-directory-02, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.lynn-core-discovery-mapping">[I-D.lynn-core-discovery-mapping]</b></td>
<td class="top">
<a>Lynn, K</a> and <a>Z Shelby</a>, "<a href="http://tools.ietf.org/html/draft-lynn-core-discovery-mapping-01">CoRE Link-Format to DNS-Based Service Discovery Mapping</a>", Internet-Draft draft-lynn-core-discovery-mapping-01, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.lynn-dnsext-site-mdns">[I-D.lynn-dnsext-site-mdns]</b></td>
<td class="top">
<a>Lynn, K</a> and <a>D Sturek</a>, "<a href="http://tools.ietf.org/html/draft-lynn-dnsext-site-mdns-01">Extended Multicast DNS</a>", Internet-Draft draft-lynn-dnsext-site-mdns-01, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="BACnet">[BACnet]</b></td>
<td class="top">
<a>Bender, J.</a> and <a>M. Newman</a>, "<a>BACnet/IP</a>", Web http://www.bacnet.org/Tutorial/BACnetIP/index.html, 2000.</td>
</tr>
<tr>
<td class="reference"><b id="ZigBee">[ZigBee]</b></td>
<td class="top">
<a>Tolle, G.</a>, "<a href="http://tools.ietf.org/html/draft-tolle-cap-00">A UDP/IP Adaptation of the ZigBee Application Protocol</a>", Internet-Draft draft-tolle-cap-00, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="LON">[LON]</b></td>
<td class="top">
<a>LONTalk protocol specification, version 3</a>", 1994.</td>, "</tr>
<tr>
<td class="reference"><b id="DALI">[DALI]</b></td>
<td class="top">
<a>DALI Manual</a>", Web http://www.dali-ag.org/c/manual_gb.pdf, 2001.</td>, "</tr>
<tr>
<td class="reference"><b id="KNX">[KNX]</b></td>
<td class="top">
<a>Kastner, W.</a>, <a>Neugschwandtner, G.</a> and <a>M. Koegler</a>, "<a>AN OPEN APPROACH TO EIB/KNX SOFTWARE DEVELOPMENT</a>", Web http://www.auto.tuwien.ac.at/~gneugsch/fet05-openapproach-preprint.pdf, 2005.</td>
</tr>
<tr>
<td class="reference"><b id="IEEE.802.15.4">[IEEE.802.15.4]</b></td>
<td class="top">
<a>Information technology - Telecommunications and information exchange between systems - Local and metropolitan area networks - Specific requirements - Part 15.4: Wireless Medium Access Control (MAC) and Physical Layer (PHY) Specifications for Low Rate Wireless Personal Area Networks (LR-WPANs) </a>", IEEE Std 802.15.4-2006, June 2006.</td>, "</tr>
<tr>
<td class="reference"><b id="HAYSTACK">[HAYSTACK]</b></td>
<td class="top">
<a>Project Haystack </a>", Web http://project-haystack.org/, 2011.</td>, "</tr>
<tr>
<td class="reference"><b id="oBIX">[oBIX]</b></td>
<td class="top">
<a>Frank, B.</a>, "<a>oBIX working group</a>", Web http://www.obix.org, 2006.</td>
</tr>
<tr>
<td class="reference"><b id="Fielding">[Fielding]</b></td>
<td class="top">
<a>Fielding, R.</a>, "<a>Architectural Styles and the Design of Network-based Software Architectures, Second Edition</a>", Doctoral dissertation , University of California, Irvine , Web http://www.ics.uci.edu/~fielding/pubs/dissertation/top.html, 2000.</td>
</tr>
<tr>
<td class="reference"><b id="ZigBee-IP">[ZigBee-IP]</b></td>
<td class="top">
<a>ZigBee Smart Energy Profile 2.0 Application Protocol Specification </a>", Draft ZigBee-11167, March 2011.</td>, "</tr>
<tr>
<td class="reference"><b id="dns-sd">[dns-sd]</b></td>
<td class="top">
<a>dns-sd servicetype registration </a>", Web http://www.dns-sd.org/ServiceTypes.html, 2011.</td>, "</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Peter van der Stok</span> 
	  <span class="n hidden">
		<span class="family-name">van der Stok</span>
	  </span>
	</span>
	<span class="org vcardline">Philips Research</span>
	<span class="adr">
	  <span>High Tech Campus 34-1</span>

	  <span class="vcardline">
		<span class="locality">Eindhoven</span>,  
		<span class="region"></span>
		<span class="code">5656 AA</span>
	  </span>
	  <span class="country-name vcardline">The Netherlands</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:peter.van.der.stok@philips.com">peter.van.der.stok@philips.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Kerry Lynn</span> 
	  <span class="n hidden">
		<span class="family-name">Lynn</span>
	  </span>
	</span>
	<span class="org vcardline">Consultant </span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">Phone: +1 978 460 4253 </span>

<span class="vcardline">EMail: <a href="mailto:kerlyn@ieee.org%20">kerlyn@ieee.org </a></span>

  </address>
</div>

</body>
</html>