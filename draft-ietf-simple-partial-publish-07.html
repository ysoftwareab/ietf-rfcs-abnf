<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Publication of
    Partial Presence Information</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Publication of
    Partial Presence Information">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIMPLE WG</td><td class="header">A. Niemi</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">M. Lonnfors</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Nokia</td></tr>
<tr><td class="header">Expires: August 23, 2008</td><td class="header">E. Leppanen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Individual</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 20, 2008</td></tr>
</table></td></tr></table>
<h1><br />Publication of
    Partial Presence Information<br />draft-ietf-simple-partial-publish-07</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 23, 2008.</p>

<h3>Abstract</h3>

<p>The Session Initiation Protocol (SIP) Extension for Event State
      Publication describes a mechanism with which a presence user
      agent is able to publish presence information to a presence
      agent. Using the Presence Information Data Format (PIDF),
      each presence publication contains full state, regardless of how
      much of that information has actually changed since the previous
      update. As a consequence, updating a sizeable presence document
      with small changes bears a considerable overhead and is therefore
      inefficient. Especially with low bandwidth and high latency
      links, this can constitue a considerable burden to the
      system. This memo defines a solution that aids in reducing the
      impact of those constraints and increases transport efficiency
      by introducing a mechanism that allows for publication of
      partial presence information.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#Conventions">2.</a>&nbsp;
Definitions and Document Conventions<br />
<a href="#overall-operation">3.</a>&nbsp;
Overall Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Publish-operation">3.1.</a>&nbsp;
Presence Publication<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Partial-Operation">3.2.</a>&nbsp;
Partial Presence Publication<br />
<a href="#clientserver">4.</a>&nbsp;
Client and Server Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#content-type">4.1.</a>&nbsp;
Content-type for Partial Publications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#publish">4.2.</a>&nbsp;
Generation of Partial Publications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#server">4.3.</a>&nbsp;
Processing of Partial Publications<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">4.3.1.</a>&nbsp;
Processing &lt;pidf-full&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">4.3.2.</a>&nbsp;
Processing &lt;pidf-diff&gt;<br />
<a href="#Security-Considerations">5.</a>&nbsp;
Security Considerations<br />
<a href="#Examples">6.</a>&nbsp;
Examples<br />
<a href="#Acknowledgements">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative references<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative references<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p><a class='info' href='#RFC3903'>Session Initiation
      Protocol (SIP) Extension for Event State Publication<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903]
      allows Presence User Agents ('PUA') to publish presence
      information of a user ('presentity'). The Presence Agent ('PA')
      collects publications from one or several presence user agents,
      and generates the composite event state of the presentity.
</p>
<p>The baseline format for presence information is defined in
      the <a class='info' href='#RFC3863'>Presence Information Data Format
      (PIDF)<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3863] and is by default used in presence
      publication. The PIDF uses <a class='info' href='#W3C.REC-xml'>Extensible
      Markup Language (XML)<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., and E. Maler, &ldquo;Extensible Markup Language (XML) 1.0 (2nd ed),&rdquo; October&nbsp;2000.</span><span>)</span></a> [W3C.REC&#8209;xml], and groups data into elements
      called tuples. In addition, <a class='info' href='#RFC4479'>[RFC4479]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Data Model for Presence,&rdquo; July&nbsp;2006.</span><span>)</span></a>, 
      <a class='info' href='#RFC4480'>[RFC4480]<span> (</span><span class='info'>Schulzrinne, H., Gurbani, V., Kyzivat, P., and J. Rosenberg, &ldquo;RPID: Rich Presence Extensions to the Presence Information Data Format (PIDF),&rdquo; July&nbsp;2006.</span><span>)</span></a>, 
      <a class='info' href='#RFC4481'>[RFC4481]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;Timed Presence Extensions to the Presence Information Data Format (PIDF) to Indicate Status Information for Past and Future Time Intervals,&rdquo; July&nbsp;2006.</span><span>)</span></a>,
      <a class='info' href='#RFC4482'>[RFC4482]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;CIPID: Contact Information for the Presence Information Data Format,&rdquo; July&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#I-D.ietf-simple-prescaps-ext'>[I&#8209;D.ietf&#8209;simple&#8209;prescaps&#8209;ext]<span> (</span><span class='info'>Lonnfors, M. and K. Kiss, &ldquo;Session Initiation Protocol (SIP) User Agent Capability Extension to  Presence Information Data Format (PIDF),&rdquo; May&nbsp;2008.</span><span>)</span></a> define extension
      elements that provide various additional features to PIDF.
</p>
<p>Presence publication by default uses the PIDF document
      format, and each publication contains full state regardless of
      how much of the presence information has actually changed since
      the previous update. As a consequence, updating a sizeable
      presence document especially with small changes bears a
      considerable overhead and is therefore inefficient. Publication
      of information over low bandwidth and high latency links further
      exacerbates this inefficiency.
</p>
<p>This memo specifies a mechanism with which the PUA is after
      an initial full state publication able to publish only those
      parts of the presence document that have changed since the
      previous update. This is accomplished using the <a class='info' href='#I-D.ietf-simple-partial-pidf-format'>partial PIDF<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format] document format to communicate a set of
      presence document changes to the PA, who then applies the
      changes in sequence to its version of the presence document.
</p>
<p>This memo is structured in the following way: <a class='info' href='#overall-operation'>Section&nbsp;3<span> (</span><span class='info'>Overall Operation</span><span>)</span></a> gives an overview of the partial
      publication mechanism; <a class='info' href='#clientserver'>Section&nbsp;4<span> (</span><span class='info'>Client and Server Operation</span><span>)</span></a> includes
      the detailed specification; <a class='info' href='#Security-Considerations'>Section&nbsp;5<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> includes discussion of
      security considerations; and <a class='info' href='#Examples'>Section&nbsp;6<span> (</span><span class='info'>Examples</span><span>)</span></a> includes
      examples of partial publication.
</p>
<a name="Conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definitions and Document Conventions</h3>

<p>In this document, the key words "MUST", "MUST NOT",
      "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
      "RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as
      described in RFC 2119, BCP 14 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>, and indicate
      requirement levels for compliant implementations.
</p>
<p>This document makes use of the vocabulary defined in <a class='info' href='#RFC2778'>the Model for Presence and Instant
      Messaging<span> (</span><span class='info'>Day, M., Rosenberg, J., and H. Sugano, &ldquo;A Model for Presence and Instant Messaging,&rdquo; February&nbsp;2000.</span><span>)</span></a> [RFC2778], <a class='info' href='#RFC3903'>the Event State
      Publication Extension to SIP<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903], and <a class='info' href='#I-D.ietf-simple-partial-pidf-format'>the PIDF Extension for
      Partial Presence<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format].
</p>
<a name="overall-operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overall Operation</h3>

<p>This section introduces the baseline functionality for
      presence publication, and gives an overview of the
      partial publication mechanism. This section is informational in
      nature. It does not contain any normative statements.
</p>
<a name="Publish-operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Presence Publication</h3>

<p>Event state publication is specified in <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</p>
<p>The publication of presence information consists of a
        presence user agent sending a SIP PUBLISH request
        <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> targeted to the address-of-record of
        the presentity, and serviced by a presence agent or
        compositor. The body of the PUBLISH request carries full event
        state in the form of a presence document.
</p>
<p>The compositor processes the PUBLISH request and stores the
        presence information. It also assigns an entity-tag that is
        used to identify the publication. This entity-tag is returned
        to the PUA in the response to the PUBLISH request.
</p>
<p>The PUA uses the entity-tag in the following PUBLISH
	request for identifying the publication that the request is
	meant to refresh, modify or remove. Presence information is
	stored in an initial publication, and maintained using the
	refreshing and modifying publications. Presence information
	disappears either by expilicitly removing it or when it meets
	its expiration time.
</p>
<a name="Partial-Operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Partial Presence Publication</h3>

<p>The partial publication mechanism enables the PUA to update
	only parts of its presence information, namely those sections
	of the presence document that have changed. The initial
	publication always carries full state. However, successive
	modifying publications to this initial presence state can
	communicate state deltas, i.e., one or more changes to the
	presence information since the previous update. Versioning of
	these partial publications is necessary to guarantee that the
	changes are applied in the correct
	order. The <a class='info' href='#RFC3903'>PUBLISH method<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903]
	already accomplishes this using entity-tags and conditional
	requests, which guarantee correct ordering of publication
	updates.
</p>
<p></p>
<blockquote class="text">
<p>Note that
	  the <a class='info' href='#I-D.ietf-simple-partial-pidf-format'>partial
	  PIDF format<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format] contains the 'version' attribute that
	  could be used for versioning as well. However, we chose not
	  to introduce an additional versioning mechanism to partial
	  publish, since that would only add ambiguity and a potential
	  undefined error case if the two versioning mechanisms were
	  to somehow contradict.
</p>
</blockquote>

<p>To initialize its publication of presence information, the
	PUA first publishes a full state initial publication. The
	consequent modifying publications can carry either state
	deltas or full state.  Both initial and modifying partial
	presence publications are accomplished using the
	'application/pidf-diff+xml' content type
	<a class='info' href='#I-D.ietf-simple-partial-pidf-format'>[I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format]<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a>, with
	the former using the &lt;pidf-full&gt; root element, and the
	latter using the &lt;pidf-diff&gt; or &lt;pidf-full&gt; root
	elements, respectively.
</p>
<p>While the &lt;pidf-full&gt; encapsulates a regular PIDF
        document, the &lt;pidf-diff&gt; can contain one or more
        operations for adding new elements or attributes (&lt;add&gt;
        elements), replacing elements or attributes whose content has
        changed (&lt;replace&gt; elements), or indications of removal
        of certain elements or attributes (&lt;remove&gt;
        elements). The PUA is free to decide the granularity by which
        changes in presence information are communicated to the
        composer. It may very well happen that there are enough
        changes to be communicated that it is more efficient to send a
        full state publication instead of a set of state
        deltas.
</p>
<p>When the presence compositor receives a partial publication
	it applies the included patch operations in sequence. The
	resulting changed (or patched) presence document is then
	submitted to the composition logic in the same manner as with
	a full state presence publication. Similarly, any changes to
	the publication expiration apply to the full, patched presence
	publication. In other words, there is no possibility to roll
	back to an earlier version, except by submitting a full state
	publication.
</p>
<a name="clientserver"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Client and Server Operation</h3>

<p>Unless otherwise specified in this document, the presence
      user agent and presence agent behavior are as defined in <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="content-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Content-type for Partial Publications</h3>

<p>The entities supporting the partial publication extension
	described in this document MUST support the
	'application/pidf-diff+xml' content type defined in <a class='info' href='#I-D.ietf-simple-partial-pidf-format'>the partial PIDF
	format<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format], in addition to the baseline
	'application/pidf+xml' content type defined in <a class='info' href='#RFC3863'>[RFC3863]<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a>.
</p>
<p>Listing the partial PIDF content type in the Accept 
	header field of a SIP response is an explicit indication of 
	support for the partial publication mechanism. The PUA can learn server 
	support either as a result of an explicit query, i.e., in a response to 
	an OPTIONS request; or by trial-and-error, i.e., after an 415 
	error response is returned to an attempted partial publication.
</p>
<a name="publish"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Generation of Partial Publications</h3>

<p>Whenever a PUA decides to begin publication of partial presence
	information, it first needs to make an initial
	publication. This intial publication always carries full
	state. After the initial publication, presence information can
	be updated using modifying publications; the modifications can carry
	state deltas as well as full state. Finally, the publication can
	be terminated by explicit removal, or by expiration.
</p>
<p>Both the initial and 
	modifying publications make use of the 
	<a class='info' href='#I-D.ietf-simple-partial-pidf-format'>partial
	presence document format<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format], and all follow the normal rules for 
	creating publications, as defined in 
	<a class='info' href='#RFC3903'>RFC 3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903], Section 4.
</p>
<p>If the initial PUBLISH request returns a 415 (Unsupported
	Media Type), it means that the compositor did not understand
	the partial publication format. In this case, the PUA MUST
	follow normal precedures for handling a 400-class response, as
	specified in Section 8.1.3.5 of <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. 
	Specifically, the PUA SHOULD retry the publication using the default 
	PIDF content type, namely 'application/pidf+xml'. In
	addition, to find out a priori whether a specific presence
	compositor supports partial presence publication, the PUA MAY
	use the OPTIONS method, as described in <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.
</p>
<p>To construct a full-state publication, the PUA uses the
	following process:

	</p>
<ul class="text">
<li>The Content-Type header field in the PUBLISH request MUST
	  be set to the value 'application/pidf-diff+xml'.
</li>
<li>The document in the body of the request is populated
	  with a &lt;pidf-full&gt; root element that includes the
	  'entity' attribute set to identify the presentity.
</li>
<li>Under the &lt;pidf-full&gt; root element exists all of 
	  the children of a <a class='info' href='#RFC3863'>PIDF<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3863] &lt;presence&gt; 
	  element. This document 
	  contains the full state of which the PUA is aware,
	  and MAY include elements from any extension namespace.
</li>
</ul>

<p>To construct a partial publication the following
	process is followed:

	</p>
<ul class="text">
<li>The Content-Type header field in the PUBLISH request MUST
          be set to the value 'application/pidf-diff+xml'
</li>
<li>The document in the body of the request is populated
          with a &lt;pidf-diff&gt; root element that includes the
          'entity' attribute identifying the presentity.
</li>
<li>Under the &lt;pidf-diff&gt; root element exists a set of patch operations
          that communicate the changes to the presentity's presence
          information. These operations MUST be constructed in
          sequence, and as defined in <a class='info' href='#I-D.ietf-simple-partial-pidf-format'>the partial
          PIDF format<span> (</span><span class='info'>Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;Presence Information Data format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;partial&#8209;pidf&#8209;format].
</li>
</ul>

<p>The PUA is free to decide the granularity by which changes
	in the presentity's presence information are communicated to
	the presence compositor. In order to reduce unnecessary
	network traffic, the PUA SHOULD batch several patch operations
	in a single PUBLISH request.

	</p>
<blockquote class="text">
<p>A reasonable granularity might be to batch state changes
	  resulting from related UI events together in a single
	  PUBLISH request. For example, when the user sets their
	  status to "Away",  several things including freetext notes,
	  service availability, and activities might change as a
	  result.
</p>
</blockquote>

<p>If the size of the delta state becomes more than the size
	of the full state, the PUA SHOULD instead send a modifying publication
	carrying full state, unless this size comparison is not possible.
	
	</p>
<blockquote class="text">
<p>To an implementation that generates state deltas directly out of 
	  its internal events, it may not be trivial to determine the size of 
	  the corresponding full state.
	  
</p>
</blockquote>

<a name="server"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Processing of Partial Publications</h3>

<p>For each resource, the compositor maintains a record for
	each of the publications. These are indexed using the
	entity-tag of the publications.
</p>
<p>Processing of publications generally follows the guidelines
	set in <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>. In addition, processing
	PUBLISH requests that contain 'application/pidf-diff+xml'
	require some extra processing that is dependant on whether the
	request contains full or partial state.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Processing &lt;pidf-full&gt;</h3>

<p>If the value of the Content-Type header field is
	  'application/pidf-diff+xml', and the document therein
	  contains a &lt;pidf-full&gt; root element, the publication contains
	  full presence information, and the next
	  step applies:
	  
	  </p>
<ul class="text">
<li>The compositor MUST take the received presence
	  document under the &lt;pidf-full&gt; as the local presence
	  document, replacing any previous publications.
</li>
</ul>

<p>If any errors are encountered before the entire
	  publication is completely processed, the compositor MUST
	  reject the request with a 500 (Server Internal Error)
	  response, and revert back to its original, locally stored
	  presence information.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Processing &lt;pidf-diff&gt;</h3>

<p>If the value of the Content-Type header field is
	  'application/pidf-diff+xml', and the document in the body
	  contains a &lt;pidf-diff&gt; root element, the publication
	  contains partial presence information (state delta), and the
	  next steps apply:

	  </p>
<ul class="text">
<li>If the publication containing the
	    &lt;pidf-diff&gt; root element is a modifying publication 
	    (i.e., contains an If-Match header field with a valid entity-tag), 
	    the compositor MUST apply the included patch operations in 
	    sequence against its locally stored presence document.
</li>
<li>Else, the publication is an initial publication, for which only
	    &lt;pidf-full&gt; is allowed. Therefore the publication MUST be 
	    rejected with an appropriate error response, such as a 400 
	    (Invalid Partial Publication).
</li>
</ul>

<p>If a publication carrying partial presence information
	  expires without the PUA refreshing it, the compositor MUST
	  clear the entire, full state publication. 

	  </p>
<blockquote class="text">
<p>This means that the compositor does not keep a record
	    of the applied patches, and consequently (unlike some versioning
	    systems), the compositor does not roll back to an earlier
	    version if a particular partial publication were to expire.
</p>
</blockquote>

<p>If the compositor encounters errors while processing the
	  'application/pidf-diff+xml' document, it MUST reject the
	  request with a 400 (Bad Request) response. In addition, the
	  compositor MAY include diagnostics information in the body
	  of the response, using an appropriate error condition
	  element defined in Section 5.1. of
	  <a class='info' href='#I-D.ietf-simple-xml-patch-ops'>[I&#8209;D.ietf&#8209;simple&#8209;xml&#8209;patch&#8209;ops]<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a>.
</p>
<p>If any other errors are encountered before the entire partial
	  publication is completely processed, including all of the
	  patch operations in the 'application/pidf-diff+xml' body, the
	  compositor MUST reject the request with a 500 (Server
	  Internal Error) response, and revert back to its original,
	  locally stored presence information.
</p>
<a name="Security-Considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>This specification relies on protocol behavior defined in
      <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>. General event state
      publication related security considerations are extensively
      discussed in that specification and all the
      identified security considerations apply to this document in
      entirety. In addition, this specification adds no new security
      considerations.
</p>
<a name="Examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Examples</h3>

<p>The following <a class='info' href='#example-flow'>message flow<span> (</span><span class='info'>Partial Publication Message Flow</span><span>)</span></a>
      shows an example of a presence system that applies the partial
      publication mechanism.
</p>
<p>First, the PUA sends an initial publication that contains
      full state. In return, it receives a 200 OK response containing
      an entity-tag. This entity-tag serves as a reference with which
      the initial full state can be updated using partial publications
      containing state deltas.
</p>
<p>Then at some point the resource state changes, and the PUA
      assembles these changes into a set of patch operations. It then
      sends a modifying publication containing the patch operations,
      using the entity-tag as a reference to the publication against
      which the patches are to be applied. The compositor
      applies the received patch operations to its local presence
      document in sequence, and returns a 200 OK which includes a new
      entity-tag.
</p><br /><hr class="insert" />
<a name="example-flow"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                          Presence Agent /
                  PUA                        Compositor
                   | (M1) PUBLISH                |
                   |----------------------------&gt;|
                   | (M2) 200 OK                 |
                   |&lt;----------------------------|
                   |                             |
                   |                             |
                   |                             |
                   | (M3) PUBLISH                |
                   |----------------------------&gt;|
                   | (M4) 200 OK                 |
                   |&lt;----------------------------|
                   |                             |
                  _|_                           _|_
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Partial Publication Message Flow&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Message details:
</p>
<p>(M1): PUA -> Compositor
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      PUBLISH sip:resource@example.com SIP/2.0
      ...
      Event: presence
      Expires: 3600
      Content-Type: application/pidf-diff+xml
      Content-Length: 1457

      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;p:pidf-full xmlns="urn:ietf:params:xml:ns:pidf"
             xmlns:p="urn:ietf:params:xml:ns:pidf-diff"
             xmlns:r="urn:ietf:params:xml:ns:pidf:rpid"
             xmlns:c="urn:ietf:params:xml:ns:pidf:caps"
             entity="pres:someone@example.com"&gt;

       &lt;tuple id="sg89ae"&gt;
        &lt;status&gt;
         &lt;basic&gt;open&lt;/basic&gt;
         &lt;r:relationship&gt;assistant&lt;/r:relationship&gt;
        &lt;/status&gt;
        &lt;c:servcaps&gt;
         &lt;c:audio&gt;true&lt;/c:audio&gt;
         &lt;c:video&gt;false&lt;/c:video&gt;
         &lt;c:message&gt;true&lt;/c:message&gt;
        &lt;/c:servcaps&gt;
        &lt;contact priority="0.8"&gt;tel:09012345678&lt;/contact&gt;
       &lt;/tuple&gt;

       &lt;tuple id="cg231jcr"&gt;
        &lt;status&gt;
         &lt;basic&gt;open&lt;/basic&gt;
        &lt;/status&gt;
        &lt;contact priority="1.0"&gt;im:pep@example.com&lt;/contact&gt;
       &lt;/tuple&gt;

       &lt;tuple id="r1230d"&gt;
        &lt;status&gt;
         &lt;basic&gt;closed&lt;/basic&gt;
         &lt;r:activity&gt;meeting&lt;/r:activity&gt;
        &lt;/status&gt;
        &lt;r:homepage&gt;http://example.com/~pep/&lt;/r:homepage&gt;
        &lt;r:icon&gt;http://example.com/~pep/icon.gif&lt;/r:icon&gt;
        &lt;r:card&gt;http://example.com/~pep/card.vcd&lt;/r:card&gt;
        &lt;contact priority="0.9"&gt;sip:pep@example.com&lt;/contact&gt;
       &lt;/tuple&gt;

       &lt;note xml:lang="en"&gt;Full state presence document&lt;/note&gt;

       &lt;r:person&gt;
        &lt;r:status&gt;
         &lt;r:activities&gt;
          &lt;r:on-the-phone/&gt;
          &lt;r:busy/&gt;
         &lt;/r:activities&gt;
        &lt;/r:status&gt;
       &lt;/r:person&gt;

       &lt;r:device id="urn:esn:600b40c7"&gt;
        &lt;r:status&gt;
         &lt;c:devcaps&gt;
          &lt;c:mobility&gt;
           &lt;c:supported&gt;
            &lt;c:mobile/&gt;
           &lt;/c:supported&gt;
          &lt;/c:mobility&gt;
         &lt;/c:devcaps&gt;
        &lt;/r:status&gt;
       &lt;/r:device&gt;

      &lt;/p:pidf-full&gt;
</pre></div>
<p>(M2): Compositor -> PUA
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      SIP/2.0 200 OK
      ...
      SIP-ETag: 61763862389729
      Expires: 3600
      Content-Length: 0
</pre></div>
<p>(M3): PUA -> Compositor
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      PUBLISH sip:resource@example.com SIP/2.0
      ...
      Event: presence
      SIP-If-Match: 61763862389729
      Expires: 3600
      Content-Type: application/pidf-diff+xml
      Content-Length: 778

      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;p:pidf-diff xmlns="urn:ietf:params:xml:ns:pidf"
                   xmlns:p="urn:ietf:params:xml:ns:pidf-diff"
                   xmlns:r="urn:ietf:params:xml:ns:pidf:rpid"
                   entity="pres:someone@example.com"&gt;

       &lt;p:add sel="presence/note" pos="before"&gt;&lt;tuple id="ert4773"&gt;
        &lt;status&gt;
         &lt;basic&gt;open&lt;/basic&gt;
        &lt;/status&gt;
        &lt;contact priority="0.4"&gt;mailto:pep@example.com&lt;/contact&gt;
        &lt;note xml:lang="en"&gt;This is a new tuple inserted
              between the last tuple and note element&lt;/note&gt;
       &lt;/tuple&gt;

       &lt;/p:add&gt;
       &lt;p:replace sel="*/tuple[@id='r1230d']/status/basic/text()"
        &gt;open&lt;/p:replace&gt;

       &lt;p:remove sel="*/r:person/r:status/r:activities/r:busy"/&gt;

       &lt;p:replace sel="*/tuple[@id='cg231jcr']/contact/@priority"
        &gt;0.7&lt;/p:replace&gt;

      &lt;/p:pidf-diff&gt;

</pre></div>
<p>(M4): Compositor -> PUA
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      SIP/2.0 200 OK
      ...
      SIP-ETag: 18764920981476
      Expires: 3600
      Content-Length: 0
</pre></div>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank Atle Monrad, Christian
      Schmidt, George Foti, Fridy Sharon-Fridman and Avshalom Houri
      for review comments.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[RFC3903]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3863">[RFC3863]</a></td>
<td class="author-text">Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3863">Presence Information Data Format (PIDF)</a>,&rdquo; RFC&nbsp;3863, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3863.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-partial-pidf-format">[I-D.ietf-simple-partial-pidf-format]</a></td>
<td class="author-text">Lonnfors, M., Leppanen, E., Khartabil, H., and J. Urpalainen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-partial-pidf-format-10.txt">Presence Information Data format (PIDF) Extension for Partial Presence</a>,&rdquo; draft-ietf-simple-partial-pidf-format-10 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-partial-pidf-format-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-xml-patch-ops">[I-D.ietf-simple-xml-patch-ops]</a></td>
<td class="author-text">Urpalainen, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-xml-patch-ops-04.txt">An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors</a>,&rdquo; draft-ietf-simple-xml-patch-ops-04 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-xml-patch-ops-04.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2778">[RFC2778]</a></td>
<td class="author-text"><a href="mailto:mday@alum.mit.edu">Day, M.</a>, <a href="mailto:jdrosen@dynamicsoft.com">Rosenberg, J.</a>, and <a href="mailto:suga@flab.fujitsu.co.jp">H. Sugano</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2778">A Model for Presence and Instant Messaging</a>,&rdquo; RFC&nbsp;2778, February&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2778.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4479">[RFC4479]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4479">A Data Model for Presence</a>,&rdquo; RFC&nbsp;4479, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4479.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4480">[RFC4480]</a></td>
<td class="author-text">Schulzrinne, H., Gurbani, V., Kyzivat, P., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4480">RPID: Rich Presence Extensions to the Presence Information Data Format (PIDF)</a>,&rdquo; RFC&nbsp;4480, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4480.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4481">[RFC4481]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc4481">Timed Presence Extensions to the Presence Information Data Format (PIDF) to Indicate Status Information for Past and Future Time Intervals</a>,&rdquo; RFC&nbsp;4481, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4481.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4482">[RFC4482]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc4482">CIPID: Contact Information for the Presence Information Data Format</a>,&rdquo; RFC&nbsp;4482, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4482.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-prescaps-ext">[I-D.ietf-simple-prescaps-ext]</a></td>
<td class="author-text">Lonnfors, M. and K. Kiss, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-prescaps-ext-10.txt">Session Initiation Protocol (SIP) User Agent Capability Extension to  Presence Information Data Format (PIDF)</a>,&rdquo; draft-ietf-simple-prescaps-ext-10 (work in progress), May&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-prescaps-ext-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml">[W3C.REC-xml]</a></td>
<td class="author-text"><a href="mailto:tbray@textuality.com">Bray, T.</a>, <a href="mailto:jeanpa@microsoft.com">Paoli, J.</a>, <a href="mailto:cmsmcq@uic.edu">Sperberg-McQueen, C.</a>, and <a href="mailto:eve.maler@east.sun.com">E. Maler</a>, &ldquo;<a href="http://www.w3.org/TR/REC-xml">Extensible Markup Language (XML) 1.0 (2nd ed)</a>,&rdquo; W3C&nbsp;REC-xml, October&nbsp;2000.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aki Niemi</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FIN 00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 71 8008000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:aki.niemi@nokia.com">aki.niemi@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mikko Lonnfors</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Itamerenkatu 11-13</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 71 8008000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mikko.lonnfors@nokia.com">mikko.lonnfors@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Eva Leppanen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Individual</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lempaala</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:eva.leppanen@saunalahti.fi">eva.leppanen@saunalahti.fi</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
