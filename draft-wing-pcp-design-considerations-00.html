<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>PCP Design
    Considerations</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="PCP Design
    Considerations">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">PCP Working Group</td><td class="header">D. Wing</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Cisco</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">September 17, 2010</td></tr>
<tr><td class="header">Expires: March 21, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />PCP Design
    Considerations<br />draft-wing-pcp-design-considerations-00</h1>

<h3>Abstract</h3>

<p>This document summarizes changes from NAT-PMP to support the needs of
      a large-scale NAT and support IPv6.
</p>
<p>This document is for discussion purposes.  It is not intended to
be published as an RFC.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 21, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Design Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.1.</a>&nbsp;
Add IPv6 Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.2.</a>&nbsp;
Open Pinhole for Another Host<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.3.</a>&nbsp;
Interworking with UPnP IGD<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.3.1.</a>&nbsp;
Creating a mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.3.2.</a>&nbsp;
Lifetime Maintenance<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.4.</a>&nbsp;
Protocol support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.5.</a>&nbsp;
Delete all mappings for a host<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.6.</a>&nbsp;
Delete all mappings for all hosts in a home<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">2.7.</a>&nbsp;
No Reservation of Ports in other protocol<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">2.8.</a>&nbsp;
Consolidate IP request and port request messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">2.9.</a>&nbsp;
NAT Changing Public Mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">2.10.</a>&nbsp;
Epoch<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">2.11.</a>&nbsp;
PCP Server Discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">2.12.</a>&nbsp;
Port number<br />
<a href="#security">3.</a>&nbsp;
Security Considerations<br />
<a href="#iana">4.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">5.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">5.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">5.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p><a class='info' href='#I-D.cheshire-nat-pmp'>NAT-PMP<span> (</span><span class='info'>Cheshire, S., &ldquo;NAT Port Mapping Protocol (NAT-PMP),&rdquo; April&nbsp;2008.</span><span>)</span></a> [I&#8209;D.cheshire&#8209;nat&#8209;pmp] is a lightweight,
      UDP-based request/response protocol that forms a good basis to obtain
      mappings from a NAT. This document describes how NAT-PMP can be extended
      to support a large-scale NAT (such as deployed by an ISP, <a class='info' href='#I-D.nishitani-cgn'>[I&#8209;D.nishitani&#8209;cgn]<span> (</span><span class='info'>Yamagata, I., Miyakawa, S., Nakagawa, A., and H. Ashida, &ldquo;Common requirements for IP address sharing schemes,&rdquo; July&nbsp;2010.</span><span>)</span></a>), support NAT64, and provide
      sufficient support to interwork between <a class='info' href='#UPnP-IGD'>UPnP
      IGD<span> (</span><span class='info'>UPnP Forum, &ldquo;Universal Plug and Play Internet Gateway Device,&rdquo; 2000.</span><span>)</span></a> [UPnP&#8209;IGD] and PCP.
</p>
<p>This document is for discussion purposes.  It is not intended to
be published as an RFC.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Design Considerations</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Add IPv6 Support</h3>

<p>Needs to support NAT44, NAPT44, stateless and stateful NAT64,
        NAT46, and IPv6 firewall.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Open Pinhole for Another Host</h3>

<p>Provide ability for another device, within same home, to open ports
        on behalf of another. This functionality also intended to be used by
        the operator of the NAT itself (e.g., the ISP) which is accessed by
        their technical support staff or is accessed by the end user.
</p>
<p>Use 0 as internal IP address to indicate 'this IP SRC address'.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Interworking with UPnP IGD</h3>

<p>In UPnP IGD, a 'control point' can request a specific port or can
        request a wildcard port, and there is no concept of a mapping
        lifetime. This model does not work well with NATs, especially large
        scale NATs.
</p><br /><hr class="insert" />
<a name="igd-interworking-function"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
+-------------+
| IGD Control |
|   Point     |-----+
+-------------+     |   +-----+       +--------+
                    +---| IGD-|       |Provider|
                        | PCP |-------|  NAT   |--&lt;Internet&gt;
                    +---| IWF |       |        |
+-------------+     |   +-----+       +--------+
| Local Host  |-----+
+-------------+
               LAN Side        External Side
&lt;======UPnP IGD==========&gt;&lt;======PCP=====&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: UPnP IGD to PCP Interworking Function&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.1"></a><h3>2.3.1.&nbsp;
Creating a mapping</h3>

<p>The Madatory bit, from draft-wing-softwire-port-control-protocol
          is not necessary, and will not be used in PCP. We had a lengthy
          discussion on this during our design meetings. The primary benefit
          of this bit is to ease interworking between UPnP IGD and PCP. As
          most people are aware, UPnP IGD mandates that UPnP IGD gateways
          implement the ability for a UPnP 'control point' (the computer
          inside the home) to obtain a mapping for a specific port. UPnP IGD
          includes optional support for the control point to request 'any'
          port, which allows the UPnP IGD gateway to choose the port number.
          However, this ability to request 'any' port seems to not be commonly
          used by UPnP IGD control points, is not available in the Windows
          UPnP API, and appears to also not be commonly implemented in UPnP
          IGD gateways (NATs). Thus, most UPnP IGD applications request a
          specific port. On a NAT with a lot of activity, such as a large
          scale NAT, any specific port number is probably already in use by
          another subscriber, so the UPnP IGD model does not work well.
</p>
<p>In our experience, UPnP IGD applications or the underlying
          library will attempt to try port+1, port+2, and so on. However, we
          can't recommend this behavior
          [draft-ietf-tsvwg-port-randomization].
</p>
<p>Thus, to interwork from UPnP IGD to PCP, our recommendation is
          that every UPnP request be forwarded to the PCP server. This works
          if the UPnP control point is incrementing the source port number,
          and also works if the UPnP control point is randomly choosing the
          source port number, and also works if it chooses 'any'. The UPnP
          IGD/PCP interworking function would request very short leases (e.g.,
          5 seconds) in order to avoid the chatter of a DELETE message
          (lifetime=0). Once a port can be allocated, its lifetime is
          extended. When interworking with UPnP IGD, the in-home CPE limits
          itself to sending one PCP message a second, which ensures there are
          only 5 outstanding PCP reserverations at a time; this avoids
          consuming all of that subscriber's NAT mappings while trying to find
          an available port via the UPnP IGD-&gt;PCP interworking
          function).
</p>
<p></p>
<blockquote class="text">
<p>Note: for this to work successfully, the PCP server (large
              NAT) make an attempt to honor the requested-external-port field
              in the PCP request.
</p>
</blockquote>
<br /><hr class="insert" />
<a name="message-flow"></a>

<p style='text-align: center'>Message flow would be similar to this:
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
 UPnP CP              in-home CPE                  PCP server
   |                       |                           |
   |-UPnP:give me port 80-&gt;|                           |
   |                       |-PCP:request port 80------&gt;|
   |                       |  with lease=5 seconds     |
   |                       |&lt;-PCP:here is port 51389---|
   |&lt;-UPnP: unavailable----|                           |
   |                       |                           |
   |-UPnP:give me port 81-&gt;|                           |
   |                       |-PCP:request port 81------&gt;|
   |                       |  with lease=5 seconds     |
   |                       |&lt;-PCP:here is port 23831---|
   |&lt;-UPnP: unavailable----|                           |
   |                       |                           |
  ...       ...           ...                         ...
   |                       |                           |
   |-UPnP:give me port 85-&gt;|                           |
   |                       |-PCP:request port 85------&gt;|
   |                       |  with lease=5 seconds     |
   |                       |&lt;-PCP:here is port 85------|
   |                       |                           |
   |                       |-PCP:extend lease,port=85-&gt;|
   |                       |&lt;-PCP:ok-------------------|
   |                       |                           |
   |&lt;-UPnP: ok, port 85----|                           |
   |                       |                           |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Message Flow for UPnP to PCP Interworking&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.2"></a><h3>2.3.2.&nbsp;
Lifetime Maintenance</h3>

<p>UPnP IGD does not provide a lifetime, so the UPnP IGD/PCP
          interworking function is responsible for extending the lifetime of
          mappings that are still interesting to the UPnP IGD device. We
          recommend the UPnP IGD/PCP function request a port mapping lifetime
          equal to the client's remaining DHCP lifetime. Th UPnP IGD/PCP
          interworking function is responsible for renewing the PCP lifetime
          as necessary. As long as client renews its DHCP lease, the PCP
          lifetime should also be extended. For clients not using DHCP, ping,
          ARP, or WiFi association can be used to discern liveliness of the
          UPnP IGD control point. It is not recommended to attempt to connect
          to the TCP or UDP port opened on the control point to determine if
          the host still wants to receive packets; the server could be
          temporarily down when tested, causing a false negative.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Protocol support</h3>

<p>Only TCP and UDP will be supported. Additional protocols can be
        defined later, using the protocol field.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Delete all mappings for a host</h3>

<p>PCP will allow deleting all mappings for a host. (This is already
        present in NAT-PMP.)
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.6"></a><h3>2.6.&nbsp;
Delete all mappings for all hosts in a home</h3>

<p>PCP will allow deleting all mappings for all hosts behind an
        in-home CPE, such as DS-Lite's "B4" element. This is to allow flushing
        PCP mappings when a subscriber is assigned an IP address belonging to
        a previous subscriber.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7"></a><h3>2.7.&nbsp;
No Reservation of Ports in other protocol</h3>

<p>When a port reservation is made, NAT-PMP currently reserves the
        same port in the other transport protocol for the same host. That is,
        if a mapping is made for TCP/12345, the port UDP/12345 will be
        reserved for a future mapping. This functionality will be removed from
        PCP.
</p>
<p>If a protocol requires the same mapping for UDP and TCP, it will
        need to issue separate requests (with short lifetimes) until it is
        assigned the same ports.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.8"></a><h3>2.8.&nbsp;
Consolidate IP request and port request messages</h3>

<p>NAT-PMP currently uses a separate message to obtain the public IP
        address and to obtain the port. In PCP, this will be consolidated into
        one message so that every port response includes the external address
        and lifetime. Once a host has an active PCP-created mapping on one
        port, it will get the same external address for all subsequent port
        requests.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.9"></a><h3>2.9.&nbsp;
NAT Changing Public Mapping</h3>

<p>Currently, NAT-PMP has a feature where the NAT can alert hosts on
        the local LAN if the NAT's public address changed or the NAT rebooted.
        This functionality will not be available in the initial functionality
        of PCP, but can be provided in a future document.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.10"></a><h3>2.10.&nbsp;
Epoch</h3>

<p>As in NAT-PMP, all NATs will implement epoch. NATs which retain
        their state will simply increase the epoch. This reduces
        implementation burden to deal with NATs-that-retain-state and
        NATs-which-lose-state, and also allows ISPs to renumber the public
        side of the NAT (and force epoch back to zero).
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.11"></a><h3>2.11.&nbsp;
PCP Server Discovery</h3>

<p>Currently we are considering a new DHCP option which indicates the
        PCP server's address, with a fallback to using the default gateway's
        address as the PCP server if the DHCP option isn't available.
</p>
<p>This requires the default gateway to support PCP -- either by
        processing PCP packets (or tunneling them), or by handling the new
        DHCP option.
</p>
<p>DHCP option is vulnerable to accidental or malicious breakage if
        the incorrect PCP server is sent in the DHCP option.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.12"></a><h3>2.12.&nbsp;
Port number</h3>

<p>Re-use the same port as NAT-PMP (5351).
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Security Considerations</h3>

<p>TBD.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>Re-use the IANA-assigned port number for NAT-PMP, 5351, changing its
      reference to read:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
pcp 5351/tcp   Port Control Protocol (was NAT Port Mapping Protocol)
pcp 5351/udp   Port Control Protocol (was NAT Port Mapping Protocol)
#              RFCnnnn (this RFC)
</pre></div>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>5.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.cheshire-nat-pmp">[I-D.cheshire-nat-pmp]</a></td>
<td class="author-text">Cheshire, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cheshire-nat-pmp-03.txt">NAT Port Mapping Protocol (NAT-PMP)</a>,&rdquo; draft-cheshire-nat-pmp-03 (work in progress), April&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-cheshire-nat-pmp-03.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>5.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.nishitani-cgn">[I-D.nishitani-cgn]</a></td>
<td class="author-text">Yamagata, I., Miyakawa, S., Nakagawa, A., and H. Ashida, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-nishitani-cgn-05.txt">Common requirements for IP address sharing schemes</a>,&rdquo; draft-nishitani-cgn-05 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-nishitani-cgn-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="UPnP-IGD">[UPnP-IGD]</a></td>
<td class="author-text">UPnP Forum, &ldquo;<a href="http://www.upnp.org/standardizeddcps/igd.asp">Universal Plug and Play Internet Gateway Device</a>,&rdquo; 2000.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dan Wing</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 West Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, California  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dwing@cisco.com">dwing@cisco.com</a></td></tr>
</table>
</body></html>
