

INTERNET-DRAFT                                          Paari Elangovan
draft-paari-ppvpn-vpls-mib-00.txt                 HCL Technologies Ltd.
Expires: January 2003                (Cisco Offshore Development Centre)

                                                              July 2002


                   Virtual Private LAN Service (VPLS)
                 Management Information Base Using SMIv2


1.0 Status of this Memo

This document is an Internet-Draft and  is in full  conformance with all 
provisions of Section 10 of RFC2026.

Internet-Drafts are  working documents of the  Internet Engineering
Task Force (IETF), its areas, and its working groups.  Note that other
groups may also distribute working documents as Internet-Drafts.

Internet-Drafts are  draft documents valid for a  maximum of  six
months and may be updated,  replaced,  or obsoleted by  other 
documents at any time.  It is inappropriate to use Internet- Drafts as
reference material or to cite them other than as "work in progress."

The list of current Internet-Drafts can be accessed at:
    http://www.ietf.org/ietf/1id-abstracts.txt

The list of Internet-Draft Shadow Directories can be accessed at:
    http://www.ietf.org/shadow.html.




2.0 Abstract

A Virtual Private LAN Service (VPLS) is defined as a service over a
provider managed IP or MPLS network which emulates a virtual private
LAN segment. All customer sites in the VPLS appear to be on the same
LAN regardless of their location.

This memo defines a portion of the Management Information Base (MIB)
for use with network management protocols in TCP/IP based internets.
In particular, it defines objects for managing networks using Virtual
Private Lan Service (VPLS).




3.0 Table of Contents
     
     1.0  Status of this Memo .................................... 01    


Paari                   Expires January 2003                  [Page 1]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


     2.0  Abstract ............................................... 01
     3.0  Table of Contents ...................................... 01
     4.0  Definitions ............................................ 02
     5.0  Introduction ........................................... 03
     6.0  The SNMP Network Management Framework .................. 03
     7.0  Overview of the VPLS MIB ............................... 04
     8.0  Definition of the Virtual Private Lan Service MIB ...... 06
     9.1  Where does it fit in the Picture of the Sub-IP Work .... 19
     9.2  Why is it Targeted at this WG .......................... 19
     9.3  Justification .......................................... 20
    10.0  References ............................................. 20
    11.0  Authors' Addresses ..................................... 20






4.0 Definitions

VPLS
   Virtual Private LAN Service

VPLS System
   A collection of communication equipment, related protocols, and 
   configuration elements that implements VPLS Services.

VLAN 
   A customer VLAN identification using some scheme such as IEEE 802.1Q 
   tags, port configuration or any other means. A VPLS service can be 
   extended to recognize customer VLANs

VPLS Virtual Switch
   The Virtual Switch is a logical switch which has logical ports(e.g.,
   virtual circuits) as its interfaces. Therefore, it has the ability
   to do regular bridge/switch functionality such as MAC address
   learning/aging,  flooding, forwarding (unicasting, ulticasting/
   broadcasting), and running STP (if needed) per broadcast domain but
   based on its logical ports.

VPLS Virtual Port
   The logical port of a virtual switch. It is connected to virtual
   circuit.

VPN
   Virtual Private Network






Paari                   Expires January 2003                  [Page 2]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


5.0 Introduction

The following diagram shows a typical VPLS architecture.


 +-----+                                        +------+    +-----+   
 + CE1 +--+                                 +---|PE-CLE|----| CE2 | 
 +-----+  |    .......................      |   +------+    +-----+ 
  VPLS A  | +-----+               +------+  |      |         VPLS A 
          +-| PE  |--- Service ---|PE-POP|--+      |       +-----+ 
            +-----+    Provider   +------+         +-------| CE2 | 
            / .        Backbone      . \                   +-----+ 
           /  .          |           .  \      +-----+      VPLS B 
 +-----+  /   .          |           .   \    /       \    
 + CE1 +-+    .          |           .    +--|L2 Access|  
 +-----+      .        +----+        .       | Network |  
  VPLS B      .........| PE |.........        \       /  
                       +----+                  +-----+  
                         |                        | 
                         |                        | 
                       +-----+                  +------+   +-----+ 
                       | CE3 |                  |PE-CLE|---| CE3 | 
                       +-----+                  +------+   +-----+ 
                        VPLS A                    |         VPLS B 
                                                  | 
                                                  |      +-----+ 
                                                  +------| CE4 | 
                                                         +-----+ 
                                                          VPLS B 
                                                                      
Following are the goals, in defining this MIB:

  - To have a means for Service Providers to provision VPLS service for
    subscribers, at the PE device.




6.0  The SNMP Network Management Framework

The SNMP Management Framework presently consists of five major
components:

  o  An overall architecture, described in RFC 2571 [1].


  o  Mechanisms for describing and naming objects and events for the
     purpose of management.  The first version of this Structure of
     Management Information (SMI) is called SMIv1 and described in



Paari                   Expires January 2003                  [Page 3]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


     STD 16, RFC 1155 [2], STD 16, RFC 1212 [3] and RFC 1215 [4].
     The second version, called SMIv2, is described in STD 58, which
     consists of RFC 2578 [5], RFC 2579 [6] and RFC 2580 [7].

  o  Message protocols for transferring management information.  The
     first version of the SNMP message protocol is called SNMPv1 and
     described in STD 15, RFC 1157 [8].  A second version of the
     SNMP message protocol, which is not an Internet standards track
     protocol, is called SNMPv2c and described in RFC 1901 [9] and
     RFC 1906 [10].  The third version of the message protocol is
     called SNMPv3 and described in RFC 1906 [10], RFC 2572 [11] and
     RFC 2574 [12].

  o  Protocol operations for accessing management information.  The
     first set of protocol operations and associated PDU formats is
     described in STD 15, RFC 1157 [8].  A second set of protocol
     operations and associated PDU formats is described in RFC 1905
     [13].

  o  A set of fundamental applications described in RFC 2573 [14]
     and the view-based access control mechanism described in RFC
     2575 [15].

A more detailed introduction to the current SNMP Management Framework
can be found in RFC 2570 [22].

Managed objects are accessed via a virtual information store, termed
the Management Information Base or MIB.  Objects in the MIB are
defined using the mechanisms defined in the SMI.

This memo specifies a MIB module that is compliant to the SMIv2.  A
MIB conforming to the SMIv1 can be produced through the appropriate
translations.  The resulting translated MIB must be semantically
equivalent, except where objects or events are omitted because no
translation is possible (e.g., use of Counter64).  Some machine
readable information in SMIv2 will be converted into textual
descriptions in SMIv1 during the translation process.  However, this
loss of machine readable information is not considered to change the
semantics of the MIB.




7.0 Overview of the VPLS MIB

This section gives an overview of some of the underlying concepts in
this MIB.





Paari                   Expires January 2003                  [Page 4]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


7.1 Creation and Deletion of VPLS Instances

The VPLS Instance Table is used for this purpose. This is a read-create
table. An entry will be made in this table when a new site joins the
VPLS system. Removing an entry from this table marks the deletion of a
VPLS Instance

7.2 Where the SNMP functionality reside - PE or PE-CLE ?

In the case of single PE architecture [SAJASSI-VPLS-ARCH], the PE
device performs both emulated signaling and auto discovery functions.
Hence the SNMP functionality resides in the PE itself.

In the case of distributed PE architecture, there are two types of 
PE-CLEs [SAJASSI-VPLS-ARCH]. The first type is an low cost Ethernet-
based PE-CLE which requires the PE-POP to perform both emulated
signaling and auto discovery. In this case the SNMP functionality
resides in the PE-POP.

The second type is an MPLS/IP-based PE-CLE, where the emulated
signaling is done at PE-CLE and auto discovery is done at PE-POP. In
this case the SNMP functionality resides in the PE-CLE.

7.3 Spanning Tree Protocol

If all the Virtual Switches are connected directly with each other in a
VPLS system through a full mesh of Emulated VCs, then there is no need
for running STP in the PE.

However, if the Virtual Switches are not directly connected with each
other, then loops can exist and STP is required to prevent loops.

7.4 Traps

This memo defines a vplsVpnFail trap which is generated when a VPN 
connected to a switch fails.

This memo also defines VirtualSwitchUp and VirtualSwitchDown traps
which are generated just after vplsVsStatus leaves, or just before
it enters, the down state, respectively.

This memo defines an object vplsVsTrapEnable which is used to enable or
disable the VirtualSwitchUp and VirtualSwitchDown traps by setting the 
vplsVsTrapEnable to true(1) or false(2), respectively.  The default
value of this object is true(1).







Paari                   Expires January 2003                  [Page 5]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


8.0 Definition of the VPLS MIB

-- *****************************************************************
-- 
-- *****************************************************************

VPLS-MIB DEFINITIONS ::= BEGIN

    IMPORTS
        TruthValue, TimeStamp, DisplayString, RowStatus,
        TEXTUAL-CONVENTION
            FROM SNMPv2-TC
        TimeTicks
            FROM SNMPv2-SMI
        InetAddress
            FROM INET-ADDRESS-MIB
        VPNId
            FROM PPVPN-TC-MIB
        InterfaceIndex
            FROM IF-MIB;

vplsMib MODULE-IDENTITY
    LAST-UPDATED "200207031200Z"
    ORGANIZATION
        "HCL Technologies Ltd."
    CONTACT-INFO
        "HCL Technologies Ltd.
        Cisco Offshore Development Centre
        158 Arcot Road
        Vadapalani
        Chennai 600 026
        India

        Tel.: +91-44-375-0171
        Fax : +91-44-375-0185
        Email: pelangov@cisco.com"

    DESCRIPTION
        "The MIB is the definition of the managed
        objects for the Virtual Private LAN Service."
    REVISION "200207031200Z"
    DESCRIPTION
        "Initial version of the VPLS-MIB."
--  ::= { experimental XXXX } -- To be assigned
    ::= { experimental 9999 } -- in case you want to compile


vplsObjects OBJECT IDENTIFIER 
    ::= { vplsMib 1 }



Paari                   Expires January 2003                  [Page 6]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


vplsNotifications OBJECT IDENTIFIER 
    ::= { vplsMib 2 }

vplsConformance OBJECT IDENTIFIER 
    ::= { vplsMib 3 }


vplsInstance OBJECT IDENTIFIER ::= { vplsObjects 1 }

-- VPLS Instance Config Table
    
vplsInstanceAttributesTable OBJECT-TYPE
    SYNTAX        SEQUENCE OF VplsInstanceEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "A list of VPLS instances present on the local system."
::= { vplsInstance 1 }

vplsInstanceEntry OBJECT-TYPE
    SYNTAX        VplsInstanceEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An entry (row) containing managment information
        applicable to a particular VPLS instance."
    INDEX { vplsInstIndex }
::= { vplsInstanceAttributesTable 1 }

VplsInstanceEntry ::= SEQUENCE {
    vplsInstIndex        Unsigned32,
    vplsInstCustId       OCTET STRING,
    vplsInstSiteId       OCTET STRING,
    vplsInstName         DisplayString,
    vplsInstDescr        DisplayString,
    vplsInstUpTime       TimeStamp,
    vplsVsTrapEnable     TruthValue,
    vplsInstRowStatus    RowStatus
}

vplsInstIndex OBJECT-TYPE
    SYNTAX        Unsigned32
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "This is a unique index for an entry in the
         vplsInstanceAttributesTable.
        "
::= { vplsInstanceEntry 1 }



Paari                   Expires January 2003                  [Page 7]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


vplsInstCustId OBJECT-TYPE
    SYNTAX        OCTET STRING (SIZE (8))
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        "This is an 8 octet integer identifier that uniquely represents
        a particular customer."
::= { vplsInstanceEntry 2 }

vplsInstSiteId OBJECT-TYPE
    SYNTAX        OCTET STRING (SIZE (2))
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        "This is a 2 octet integer identifier that represents a
        particular site of the VPLS service provider. It is unique 
        across a single VPLS service provider."
::= { vplsInstanceEntry 3 }

vplsInstName OBJECT-TYPE
    SYNTAX        DisplayString
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        " The human-readable name of this VPLS instance."
::= { vplsInstanceEntry 4 }

vplsInstDescr OBJECT-TYPE
    SYNTAX        DisplayString
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        "The description of this VPLS instance."
::= { vplsInstanceEntry 5 }

vplsInstUpTime OBJECT-TYPE
    SYNTAX        TimeStamp
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The value of the sysUpTime at which this VPLS instance entry
        was created."
::= { vplsInstanceEntry 6 }

vplsVsTrapEnable OBJECT-TYPE
    SYNTAX        TruthValue
    MAX-ACCESS    read-write
    STATUS        current




Paari                   Expires January 2003                  [Page 8]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


    DESCRIPTION
        "If this object is true, then it enables the generation 
        of all notifications defined in this MIB for this particular
        VPLS instance."
   DEFVAL { false }
::= { vplsInstanceEntry 7 }

vplsInstRowStatus OBJECT-TYPE
    SYNTAX        RowStatus
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        "The row status for this entry. This value is
        used to create a row in this table."
::= { vplsInstanceEntry 8 }

-- VPLS Instance Statistics Table
    
vplsInstanceStatsTable OBJECT-TYPE
    SYNTAX        SEQUENCE OF VplsInstanceStatsEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "A list of VPLS instance statistics. This table extends
        vplsInstanceAttributesTable."
::= { vplsInstance 2 }

vplsInstanceStatsEntry OBJECT-TYPE
    SYNTAX        VplsInstanceStatsEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An entry (row) containing managment information
        applicable to a particular VPLS instance."
    AUGMENTS { vplsInstanceEntry }
::= { vplsInstanceStatsTable 1 }

VplsInstanceStatsEntry ::= SEQUENCE {
    vplsInstStatus              INTEGER,
    vplsInstPeers               Unsigned32,
    vplsInstInBytes             Counter64,
    vplsInstOutBytes            Counter64,
    vplsInstInDiscardPkts       Counter32,
    vplsInstInDataRate          Gauge32,
    vplsInstOutDataRate         Gauge32,
    vplsInstServiceTime         TimeTicks,
    vplsInstNotInServiceTime    TimeTicks,
    vplsInstFailureCount        Unsigned32
}



Paari                   Expires January 2003                  [Page 9]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


vplsInstStatus OBJECT-TYPE
    SYNTAX        INTEGER {
                      up (1),
                      down (2)
                      }
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "Denotes whether a VPLS instance is operational or not.
        A VPLS instance is up(1) when at least one virtual
        switch associated with this VPLS instance, whose
        vplsVsStatus is up.
        A VPLS instance is down(2) when there does not exist at
        least one virtual switch interface associated with this
        VPLS instance  whose vplsVsStatus is up."
::= { vplsInstanceStatsEntry 1 }

vplsInstPeers OBJECT-TYPE
    SYNTAX        Unsigned32
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of peer sites available for this VPLS
        instance."
::= { vplsInstanceStatsEntry 2 }

vplsInstInBytes OBJECT-TYPE
    SYNTAX        Counter64
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of data bytes received from the customer
        attached to this VPLS instance."
::= { vplsInstanceStatsEntry 3 }

vplsInstOutBytes OBJECT-TYPE
    SYNTAX        Counter64
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of data bytes sent to the customer attached
        to this VPLS instance."
::= { vplsInstanceStatsEntry 4 }

vplsInstInDiscardPkts OBJECT-TYPE
    SYNTAX        Counter32
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION



Paari                   Expires January 2003                  [Page 10]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


        "The number of packets dropped, which were received from
        the customer  by this VPLS instance. There can be several
        reasons for the packet drop like duplicate packets, error
        packets etc."
::= { vplsInstanceStatsEntry 5 }

vplsInstInDataRate OBJECT-TYPE
    SYNTAX        Gauge32
    UNITS "bytes per second"
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of data bytes per second received from the
        customer attached to this VPLS instance."
::= { vplsInstanceStatsEntry 6 }

vplsInstOutDataRate OBJECT-TYPE
    SYNTAX        Gauge32
    UNITS "bytes per second"
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of data bytes per second sent to the customer
        attached to this VPLS instance."
::= { vplsInstanceStatsEntry 7 }

vplsInstServiceTime OBJECT-TYPE
    SYNTAX        TimeTicks
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The amount of time that this VPLS instance has been up.
        This is computed by summing up all the past up durations."
::= { vplsInstanceStatsEntry 8 }

vplsInstNotInServiceTime OBJECT-TYPE
    SYNTAX        TimeTicks
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The amount of time that this VPLS instance has been down.
        This is computed by summing up all the past down durations."
::= { vplsInstanceStatsEntry 9 }

vplsInstFailureCount OBJECT-TYPE
    SYNTAX        Unsigned32
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The number of times this VPLS instance was down."


Paari                   Expires January 2003                  [Page 11]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


::= { vplsInstanceStatsEntry 10 }

-- VPLS Instance Peer Table

vplsInstancePeerTable OBJECT-TYPE
    SYNTAX        SEQUENCE OF VplsInstancePeerEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "This table contains a list of peers for the list of 
        VPLS instances."
::= { vplsInstance 3 }

vplsInstancePeerEntry OBJECT-TYPE
    SYNTAX        VplsInstancePeerEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An entry (row) containing the information about the 
        peer entities of a particular VPLS instance."
    INDEX { vplsInstPeerIndex }
::= { vplsInstancePeerTable 1 }

VplsInstancePeerEntry ::= SEQUENCE {
    vplsInstPeerIndex   Unsigned32,
    vplsInstLocCustId   OCTET STRING,
    vplsInstCustId      OCTET STRING,
    vplsInstSiteId      OCTET STRING,
    vplsInstPeerAddress InetAddress
}

vplsInstPeerIndex OBJECT-TYPE
    SYNTAX        Unsigned32
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "This is a unique index for an entry in the
        vplsInstancePeerTable."
::= { vplsInstancePeerEntry 1 }

vplsInstLocCustId OBJECT-TYPE
    SYNTAX        OCTET STRING (SIZE (8))
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        "This is an 8 octet integer identifier that uniquely represents
        a local customer."
::= { vplsInstancePeerEntry 2 }




Paari                   Expires January 2003                  [Page 12]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


vplsInstCustId OBJECT-TYPE
    SYNTAX        OCTET STRING (SIZE (8))
    MAX-ACCESS    read-create
    STATUS        current
    DESCRIPTION
        "This is an 8 octet integer identifier that uniquely represents
        a particular customer."
::= { vplsInstancePeerEntry 3 }

vplsInstSiteId OBJECT-TYPE
    SYNTAX        OCTET STRING (SIZE (2))
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "This is a 2 octet integer identifier that represents a
        particular site of the VPLS service provider. It is unique 
        across a single VPLS service provider."
::= { vplsInstancePeerEntry 4 }

vplsInstPeerAddress OBJECT-TYPE
    SYNTAX        InetAddress
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "Denotes the peer site addresses for this particular VPLS
        instance."
::= { vplsInstancePeerEntry 5 }

vplsVirtualSwitch OBJECT IDENTIFIER ::= { vplsObjects 2 }

-- VPLS Virtual Switch Attributes Table
    
vplsVsAttributesTable OBJECT-TYPE
    SYNTAX        SEQUENCE OF VplsVsEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "This table contains a list of virtual switches present
        in the local system."
::= { vplsVirtualSwitch 1 }

vplsVsEntry OBJECT-TYPE
    SYNTAX        VplsVsEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An entry (row) containing managment information
        applicable to a particular virtual switch instance."
    INDEX { vplsInstIndex, vplsVsIndex }
::= { vplsVsAttributesTable 1 }


Paari                   Expires January 2003                  [Page 13]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


VplsVsEntry ::= SEQUENCE {
    vplsVsIndex          Unsigned32,
    vplsVsId             OCTET STRING,
    vplsVsAddress        MacAddress,
    vplsVsNumPorts       INTEGER,
    vplsVsStatus         INTEGER
}

vplsVsIndex OBJECT-TYPE
    SYNTAX        Unsigned32
    MAX-ACCESS     not-accessible
    STATUS        current
    DESCRIPTION
        "An arbitrary integer used to uniquely identify a particular
        virtual switch within a VPLS instance present on the local
        system."
::= { vplsVsEntry 1 }

vplsVsId OBJECT-TYPE
    SYNTAX        OCTET STRING (SIZE (8))
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "This is an 8 octet integer identifier that uniquely
        represents a virtual switch in a single VPLS service
        provider. Used in the STP operation"
::= { vplsVsEntry 2 }

vplsVsAddress OBJECT-TYPE
    SYNTAX        MacAddress
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The MAC address used by this virtual switch when it must be
        referred to in a unique fashion."
::= { vplsVsEntry 3 }

vplsVsNumPorts OBJECT-TYPE
    SYNTAX        INTEGER
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The number of virtual ports present in this virtual switch."
::= { vplsVsEntry 4 }

vplsVsStatus OBJECT-TYPE
    SYNTAX        INTEGER {
                      up(1),
                      down(2)
                      }


Paari                   Expires January 2003                  [Page 14]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The operational state of the virtual switch."
::= { vplsVsEntry 5 }

vplsVirtualPort OBJECT IDENTIFIER ::= { vplsObjects 3 }

-- VPLS Virtual Port Attributes Table
    
vplsVpAttributesTable OBJECT-TYPE
    SYNTAX        SEQUENCE OF VplsVpEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "This table contains a list of virtual ports present in
        the local system."
::= { vplsVirtualPort 1 }

vplsVpEntry OBJECT-TYPE
    SYNTAX        VplsVpEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An entry (row) containing managment information
        applicable to a particular virtual port."
    INDEX { vplsInstIndex, vplsVsIndex, vplsVpIndex }
::= { vplsVpAttributesTable 1 }

VplsVpEntry ::= SEQUENCE {
    vplsVpIndex        Unsigned32,
    vplsVpInterface    InterfaceIndex,
    vplsVpVpnId        VPNId
}

vplsVpIndex OBJECT-TYPE
    SYNTAX        Unsigned32
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An arbitrary integer used to uniquely identify a particular
        virtual port within a virtual switch present within a VPLS
        instance."
::= { vplsVpEntry 1 }

vplsVpInterface OBJECT-TYPE
    SYNTAX        InterfaceIndex
    MAX-ACCESS    read-only
    STATUS        current



Paari                   Expires January 2003                  [Page 15]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


    DESCRIPTION
        "The ifIndex value that identifies the local interface
        to which the virtual circuit of this virtual port is mapped
        to."
::= { vplsVpEntry 2 }

vplsVpVpnId       OBJECT-TYPE
    SYNTAX        VPNId
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The VPN ID as specified in RFC 2685 to which this virtual
        port is connected to."
::= { vplsVpEntry 3 }


-- VPLS Virtual Port Statistics Table
    
vplsVpStatsTable OBJECT-TYPE
    SYNTAX        SEQUENCE OF VplsVpStatsEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "This table contains a list of virtual port statistics. This
        table extends vplsVpAttributesTable"
::= { vplsVirtualPort 2 }

vplsVpStatsEntry OBJECT-TYPE
    SYNTAX        VplsVpStatsEntry
    MAX-ACCESS    not-accessible
    STATUS        current
    DESCRIPTION
        "An entry (row) containing managment information
        applicable to a particular virtual port."
    AUGMENTS { vplsVpEntry }
::= { vplsVpStatsTable 1 }

VplsVpStatsEntry ::= SEQUENCE {
    vplsVpInBytes       Counter64,
    vplsVpOutBytes      Counter64,
    vplsVpInDiscards    Counter32
}

vplsVpInBytes OBJECT-TYPE
    SYNTAX        Counter64
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of data bytes received from this virtual port."
::= { vplsVpStatsEntry 1 }


Paari                   Expires January 2003                  [Page 16]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


vplsVpOutBytes OBJECT-TYPE
    SYNTAX        Counter64
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "The total no of data bytes sent to this virtual port."
::= { vplsVpStatsEntry 2 }

vplsVpInDiscards OBJECT-TYPE
    SYNTAX        Counter32
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION
        "Count of valid packets received which were discarded."
::= { vplsVpStatsEntry 3 }


-- VPLS Notifications

vplsNotificationsPrefix OBJECT IDENTIFIER ::= { vplsNotifications 1 }

VirtualSwitchUp NOTIFICATION-TYPE
    OBJECTS   { vplsVsId }
    STATUS    current
    DESCRIPTION
        "This notification is generated when the specified
        virtual switch is about to be initialized or change the
        status from down to up."
::= { vplsNotificationsPrefix 1 }

VirtualSwitchDown NOTIFICATION-TYPE
    OBJECTS   { vplsVsId }
    STATUS    current
    DESCRIPTION
        "This notification is generated when the specified
        virtual switch is about to go down."
::= { vplsNotificationsPrefix 2 }

vplsVpnFail NOTIFICATION-TYPE
    OBJECTS   { vplsVpVpnId }
    STATUS    current
    DESCRIPTION
        "This notification is generated when the specified
        vpn is about to go down."
::= { vplsNotificationsPrefix 3 }


vplsCompliances OBJECT IDENTIFIER ::= { vplsConformance 1 }




Paari                   Expires January 2003                  [Page 17]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


vplsMIBCompliance MODULE-COMPLIANCE
    STATUS current
    DESCRIPTION
        "The compliance statement for entities that implement the
        VPLS-MIB."
    MODULE -- this module
    MANDATORY-GROUPS { vplsInstConfigGroup, vplsVsConfigGroup, 
                       vplsVpConfigGroup, vplsNotificationGroup }
::= { vplsCompliances 1 }

vplsGroups OBJECT IDENTIFIER ::= { vplsConformance 2 }

vplsInstConfigGroup OBJECT-GROUP
    OBJECTS { vplsInstCustId,
              vplsInstSiteId, vplsInstName,
              vplsInstDescr, vplsInstUpTime,
              vplsVsTrapEnable, vplsInstRowStatus }
    STATUS current
    DESCRIPTION
        "A collection of attributes that contain configuration of
        VPLS Instances."
::= { vplsGroups 1 }

vplsInstStatsGroup OBJECT-GROUP
    OBJECTS { vplsInstStatus, vplsInstPeers,
              vplsInstInBytes, vplsInstOutBytes,
              vplsInstInDiscardPkts, vplsInstInDataRate,
              vplsInstOutDataRate, vplsInstServiceTime,
              vplsInstNotInServiceTime, vplsInstFailureCount }
    STATUS current
    DESCRIPTION
        "A collection of attributes that contain stats of the
        VPLS Instances."
::= { vplsGroups 2 }

vplsInstPeerGroup OBJECT-GROUP
    OBJECTS { vplsInstPeerIndex, vplsInstLocCustId,
              vplsInstCustId, vplsInstSiteId,
              vplsInstPeerAddress }
    STATUS current
    DESCRIPTION
        "A collection of attributes that contain information of peers
        of the VPLS Instances."
::= { vplsGroups 3 }

vplsVsConfigGroup OBJECT-GROUP
    OBJECTS { vplsVsIndex, vplsVsId,
              vplsVsAddress, vplsVsNumPorts,
              vplsVsStatus }



Paari                   Expires January 2003                  [Page 18]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


    STATUS current
    DESCRIPTION
        "A collection of attributes that contain configuration of
        virtual switches."
::= { vplsGroups 4 }

vplsVpConfigGroup OBJECT-GROUP
    OBJECTS { vplsVpIndex, vplsVpInterface,
              vplsVpVpnId}
    STATUS current
    DESCRIPTION
        "A collection of attributes that contain configuration of
        virtual ports."
::= { vplsGroups 5 }

vplsVpStatsGroup OBJECT-GROUP
    OBJECTS { vplsVpInBytes, vplsVpOutBytes,
              vplsVpInDiscards    }
    STATUS current
    DESCRIPTION
        "A collection of attributes that contain statistics of
        virtual ports."
::= { vplsGroups 6 }

vplsNotificationGroup NOTIFICATION-GROUP
    NOTIFICATIONS { VirtualSwitchUp, VirtualSwitchDown,
                    vplsVpnFail }
    STATUS current
    DESCRIPTION
        "A collection of traps that are supported by the VPLS
        instance."
::= { vplsGroups 7 }

END




9.1 Where does it fit in the Picture of the Sub-IP Work

   This work fits in the PPVPN Working Group.

9.2 Why is it Targeted at this WG

   The WG is chartered with developing Provider Provisioned VPN
   solutions. This draft contributes to this.






Paari                   Expires January 2003                  [Page 19]


Internet Draft  draft-paari-ppvpn-vpls-mib-00.txt             July 2002


9.3 Justification

   The WG should consider this document since it provides a means to
   configure and manage Virtual Private LAN Service.




10.0 References

   [SAJASSI-VPLS-ARCH]   VPLS Architectures,
                         draft-sajassi-vpls-architectures-00.txt

   [DTLS]                Decoupled Virtual Private LAN Services, 
                         draft-kompella-ppvpn-dtls-01.txt, May 2002 
   
   [VPLS-REQ]            Requirements for Virtual Private LAN Services, 
                         draft-ietf-ppvpn-vpls-requirements-00.txt

   [AUG-VPLS-REQ]        Requirements for Virtual Private LAN Services,
                         draft-augustyn-vpls-requirements-02.txt

   [KOMPELLA-VPLS]       Virtual Private LAN Services over MPLS, 
                         draft-lasserre-vkompella-ppvpn-vpls-01.txt

   [MARTINI-L2]          Transport of Layer 2 Frames Over MPLS,
                         draft-martini-l2circuit-trans-mpls-09.txt

   [CONFORMANCE]         Conformance Statements for SMIv2, RFC-2580

   [VPN-ID]              Virtual Private Networks Identifier, RFC-2685

   [SMI-V2]              Structure of Management Information Version 2,
                         RFC-2578

   [AUG-L2VPN-REQ]       Requirements for Layer 2 Virtual Private
                         Network Services, Dec 2002
                         draft-augustyn-ppvpn-l2vpn-requirements-00.txt         




11.0 Authors' Addresses

  Paari Elangovan
  HCL Technologies Ltd.
  Cisco Offshore Development Centre
  158 Arcot Road Vadapalani
  Chennai 600 026
  India
  email: pelangov@cisco.com

Paari                   Expires January 2003                  [Page 20]
