<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>The Internet Routing Overlay Network (IRON)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 The Internet Routing Overlay Network">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 IRON Client">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 IRON Serving Router">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 IRON Relay Router">
<link href="#rfc.section.4" rel="Chapter" title="4 IRON Organizational Principles">
<link href="#rfc.section.5" rel="Chapter" title="5 IRON Control Plane Operation">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 IRON Client Operation">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 IRON Server Operation">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 IRON Relay Operation">
<link href="#rfc.section.6" rel="Chapter" title="6 IRON Forwarding Plane Operation">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 IRON Client Operation">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 IRON Server Operation">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 IRON Relay Operation">
<link href="#rfc.section.7" rel="Chapter" title="7 IRON Reference Operating Scenarios">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Both Hosts within Same IRON Instance">
<link href="#rfc.section.7.1.1" rel="Chapter" title="7.1.1 EUNs Served by Same Server">
<link href="#rfc.section.7.1.2" rel="Chapter" title="7.1.2 EUNs Served by Different Servers">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Mixed IRON and Non-IRON Hosts">
<link href="#rfc.section.7.2.1" rel="Chapter" title="7.2.1 From IRON Host A to Non-IRON Host B">
<link href="#rfc.section.7.2.2" rel="Chapter" title="7.2.2 From Non-IRON Host B to IRON Host A">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Hosts within Different IRON Instances ">
<link href="#rfc.section.8" rel="Chapter" title="8 Mobility, Multiple Interfaces, Multihoming, and Traffic Engineering">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Mobility Management and Mobile Networks">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Multiple Interfaces and Multihoming">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Traffic Engineering">
<link href="#rfc.section.9" rel="Chapter" title="9 Renumbering Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 NAT Traversal Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Multicast Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 Nested EUN Considerations">
<link href="#rfc.section.12.1" rel="Chapter" title="12.1 Host A Sends Packets to Host Z">
<link href="#rfc.section.12.2" rel="Chapter" title="12.2 Host Z Sends Packets to Host A">
<link href="#rfc.section.13" rel="Chapter" title="13 Implications for the Internet">
<link href="#rfc.section.14" rel="Chapter" title="14 Additional Considerations">
<link href="#rfc.section.15" rel="Chapter" title="15 Related Initiatives">
<link href="#rfc.section.16" rel="Chapter" title="16 Security Considerations">
<link href="#rfc.section.17" rel="Chapter" title="17 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="18 References">
<link href="#rfc.references.1" rel="Chapter" title="18.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="18.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A IRON Operation over Internetworks with Different Address Families">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Scaling Considerations">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Since the Internet must continue to support escalating growth due to increasing demand, it is clear that current routing architectures and operational practices must be updated. This document proposes an Internet Routing Overlay Network (IRON) architecture that supports sustainable growth while requiring no changes to end systems and no changes to the existing routing system. In addition to routing scaling, IRON further addresses other important issues including mobility management, mobile networks, multihoming, traffic engineering and NAT traversal. While business considerations are an important determining factor for widespread adoption, they are out of scope for this document." />
  <meta name="description" content="Since the Internet must continue to support escalating growth due to increasing demand, it is clear that current routing architectures and operational practices must be updated. This document proposes an Internet Routing Overlay Network (IRON) architecture that supports sustainable growth while requiring no changes to end systems and no changes to the existing routing system. In addition to routing scaling, IRON further addresses other important issues including mobility management, mobile networks, multihoming, traffic engineering and NAT traversal. While business considerations are an important determining factor for widespread adoption, they are out of scope for this document." />
  <meta name="keywords" content="I-D, Internet-Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">F. Templin, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Boeing Research &amp; Technology</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">November 18, 2011</td>
</tr>
<tr>
<td class="left">Expires: May 21, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">The Internet Routing Overlay Network (IRON)<br />
  <span class="filename">draft-templin-ironbis-08.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Since the Internet must continue to support escalating growth due to increasing demand, it is clear that current routing architectures and operational practices must be updated. This document proposes an Internet Routing Overlay Network (IRON) architecture that supports sustainable growth while requiring no changes to end systems and no changes to the existing routing system. In addition to routing scaling, IRON further addresses other important issues including mobility management, mobile networks, multihoming, traffic engineering and NAT traversal. While business considerations are an important determining factor for widespread adoption, they are out of scope for this document.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 21, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">The Internet Routing Overlay Network</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">IRON Client</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">IRON Serving Router</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">IRON Relay Router</a>
</li>
<li>4.   <a href="#rfc.section.4">IRON Organizational Principles</a>
</li>
<li>5.   <a href="#rfc.section.5">IRON Control Plane Operation</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">IRON Client Operation</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">IRON Server Operation</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">IRON Relay Operation</a>
</li>
<li>6.   <a href="#rfc.section.6">IRON Forwarding Plane Operation</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">IRON Client Operation</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">IRON Server Operation</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">IRON Relay Operation</a>
</li>
<li>7.   <a href="#rfc.section.7">IRON Reference Operating Scenarios</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Both Hosts within Same IRON Instance</a>
</li>
<li>7.1.1.   <a href="#rfc.section.7.1.1">EUNs Served by Same Server</a>
</li>
<li>7.1.2.   <a href="#rfc.section.7.1.2">EUNs Served by Different Servers</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Mixed IRON and Non-IRON Hosts</a>
</li>
<li>7.2.1.   <a href="#rfc.section.7.2.1">From IRON Host A to Non-IRON Host B</a>
</li>
<li>7.2.2.   <a href="#rfc.section.7.2.2">From Non-IRON Host B to IRON Host A</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Hosts within Different IRON Instances </a>
</li>
<li>8.   <a href="#rfc.section.8">Mobility, Multiple Interfaces, Multihoming, and Traffic Engineering</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Mobility Management and Mobile Networks</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Multiple Interfaces and Multihoming</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Traffic Engineering</a>
</li>
<li>9.   <a href="#rfc.section.9">Renumbering Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">NAT Traversal Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Multicast Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">Nested EUN Considerations</a>
</li>
<li>12.1.   <a href="#rfc.section.12.1">Host A Sends Packets to Host Z</a>
</li>
<li>12.2.   <a href="#rfc.section.12.2">Host Z Sends Packets to Host A</a>
</li>
<li>13.   <a href="#rfc.section.13">Implications for the Internet</a>
</li>
<li>14.   <a href="#rfc.section.14">Additional Considerations</a>
</li>
<li>15.   <a href="#rfc.section.15">Related Initiatives</a>
</li>
<li>16.   <a href="#rfc.section.16">Security Considerations</a>
</li>
<li>17.   <a href="#rfc.section.17">Acknowledgements</a>
</li>
<li>18.   <a href="#rfc.references">References</a>
</li>
<li>18.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>18.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">IRON Operation over Internetworks with Different Address Families</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Scaling Considerations</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Growth in the number of entries instantiated in the Internet routing system has led to concerns regarding unsustainable routing scaling <a href="#RFC4984">[RFC4984]</a><a href="#RADIR">[RADIR]</a>. Operational practices such as the increased use of multihoming with Provider-Independent (PI) addressing are resulting in more and more de-aggregated prefixes being injected into the routing system from more and more end user networks. Furthermore, depletion of the public IPv4 address space has raised concerns for both increased de-aggregation (leading to yet further routing system entries) and an impending address space run-out scenario. At the same time, the IPv6 routing system is beginning to see growth <a href="#BGPMON">[BGPMON]</a> which must be managed in order to avoid the same routing scaling issues the IPv4 Internet now faces. Since the Internet must continue to scale to accommodate increasing demand, it is clear that new methodologies and operational practices are needed.</p>
<p id="rfc.section.1.p.2">Several related works have investigated routing scaling issues.  Virtual Aggregation (VA) <a href="#GROW-VA">[GROW-VA]</a> and Aggregation in Increasing Scopes (AIS) <a href="#EVOLUTION">[EVOLUTION]</a> are global routing proposals that introduce routing overlays with Virtual Prefixes (VPs) to reduce the number of entries required in each router's Forwarding Information Base (FIB) and Routing Information Base (RIB).  Routing and Addressing in Networks with Global Enterprise Recursion (RANGER) <a href="#RFC5720">[RFC5720]</a> examines recursive arrangements of enterprise networks that can apply to a very broad set of use-case scenarios <a href="#RFC6139">[RFC6139]</a>. IRON specifically adopts the RANGER Non-Broadcast, Multiple Access (NBMA) tunnel virtual-interface model, and uses Virtual Enterprise Traversal (VET) <a href="#INTAREA-VET">[INTAREA-VET]</a> the Subnetwork Adaptation and Encapsulation Layer (SEAL) <a href="#INTAREA-SEAL">[INTAREA-SEAL]</a> and Asymmetric Extended Route Optimization <a href="#AERO">[AERO]</a> as its functional building blocks.</p>
<p id="rfc.section.1.p.3">This document proposes an Internet Routing Overlay Network (IRON) architecture with goals of supporting scalable routing and addressing while requiring no changes to the Internet's Border Gateway Protocol (BGP) interdomain routing system <a href="#RFC4271">[RFC4271]</a>. IRON observes the Internet Protocol standards <a href="#RFC0791">[RFC0791]</a><a href="#RFC2460">[RFC2460]</a>, while other network-layer protocols that can be encapsulated within IP packets (e.g., OSI/CLNP (Connectionless Network Protocol) <a href="#RFC1070">[RFC1070]</a>, etc.) are also within scope.</p>
<p id="rfc.section.1.p.4">IRON borrows concepts from VA and AIS, and further borrows concepts from the Internet Vastly Improved Plumbing (Ivip) <a href="#IVIP-ARCH">[IVIP-ARCH]</a> architecture proposal along with its associated Translating Tunnel Router (TTR) mobility extensions <a href="#TTRMOB">[TTRMOB]</a>. Indeed, the TTR model to a great degree inspired the IRON mobility architecture design discussed in this document. The Network Address Translator (NAT) traversal techniques adapted for IRON were inspired by the Simple Address Mapping for Premises Legacy Equipment (SAMPLE) proposal <a href="#SAMPLE">[SAMPLE]</a>.</p>
<p id="rfc.section.1.p.5">IRON is a global virtual routing system comprising Virtual Service Provider (VSP) overlay networks that service Aggregated Prefixes (APs) from which more-specific Client Prefixes (CPs) are delegated. IRON is motivated by a growing end user demand for mobility management, mobile networks, multihoming and traffic engineering while using stable addressing to minimize dependence on network renumbering <a href="#RFC4192">[RFC4192]</a><a href="#RFC5887">[RFC5887]</a>. IRON VSP overlay network instances use the existing IPv4 and IPv6 Internets as virtual NBMA links for tunneling inner network layer packets within outer network layer headers (see Section 3). Each IRON instance requires deployment of a small number of relays and servers in the Internet, as well as client devices that connect End User Networks (EUNs). No modifications to hosts, and no modifications to existing routers, are required. The following sections discuss details of the IRON architecture.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">This document makes use of the following terms:</p>
<p></p>

<dl>
<dt>Aggregated Prefix (AP):</dt>
<dd style="margin-left: 8">
<br>a short network-layer prefix (e.g., an IPv4 /16, an IPv6 /20, an OSI Network Service Access Protocol (NSAP) prefix, etc.) that is owned and managed by a Virtual Service Provider (VSP). The term "Aggregated Prefix (AP)" used in this document is the equivalent to the term "Virtual Prefix (VP)" used in Virtual Aggregation (VA) <a href="#GROW-VA">[GROW-VA]</a>.</dd>
<dt>Client Prefix (CP):</dt>
<dd style="margin-left: 8">
<br>a more-specific network-layer prefix (e.g., an IPv4 /28, an IPv6 /56, etc.) derived from an AP and delegated to a client end user network.</dd>
<dt>Client Prefix Address (CPA):</dt>
<dd style="margin-left: 8">
<br>a network-layer address belonging to a CP and assigned to an interface in an End User Network (EUN).</dd>
<dt>End User Network (EUN):</dt>
<dd style="margin-left: 8">
<br>an edge network that connects an end user's devices (e.g., computers, routers, printers, etc.) to the Internet. IRON EUNs are mobile networks, and can change their ISP attachments without having to renumber.</dd>
<dt>Internet Routing Overlay Network (IRON):</dt>
<dd style="margin-left: 8">
<br>the union of all VSP overlay network instances. Each such IRON instance supports routing within the overlay through encapsulation of inner packets within outer headers. Each IRON instance appears as a virtual enterprise network, and connects to the global Internet the same as for any Autonomous System (AS).</dd>
<dt>IRON Client Router/Host ("Client"):</dt>
<dd style="margin-left: 8">
<br>a customer device that logically connects EUNs to an IRON instance via an NBMA tunnel virtual interface. The device is normally a router, but may instead be a host if the "EUN" is a singleton end system.</dd>
<dt>IRON Serving Router ("Server"):</dt>
<dd style="margin-left: 8">
<br>a VSP's IRON instance router that provides forwarding and mapping services for Clients.</dd>
<dt>IRON Relay Router ("Relay"):</dt>
<dd style="margin-left: 8">
<br>a VSP's router that acts as a relay between the IRON instance and the (native) Internet.</dd>
<dt>IRON Agent (IA):</dt>
<dd style="margin-left: 8">
<br>generically refers to any of an IRON Client/Server/Relay.</dd>
<dt>IRON Instance:</dt>
<dd style="margin-left: 8">
<br>a set of IRON Agents deployed by a VSP to service EUNs through automatic tunneling over the Internet.</dd>
<dt>Internet Service Provider (ISP):</dt>
<dd style="margin-left: 8">
<br>a service provider that connects an IA to the Internet. In other words, an ISP is responsible for providing IAs with data link services for basic Internet connectivity.</dd>
<dt>Locator:</dt>
<dd style="margin-left: 8">
<br>an IP address assigned to the interface of a router or end system connected to a public or private network over which tunnels are formed. Locators taken from public IP prefixes are routable on a global basis, while locators taken from private IP prefixes <a href="#RFC1918">[RFC1918]</a> are made public via Network Address Translation (NAT).</dd>
<dt>Routing and Addressing in Networks with Global Enterprise Recursion (RANGER):</dt>
<dd style="margin-left: 8">
<br> an architectural examination of virtual overlay networks applied to enterprise network scenarios, with implications for a wider variety of use cases.</dd>
<dt>Subnetwork Encapsulation and Adaptation Layer (SEAL):</dt>
<dd style="margin-left: 8">
<br>an encapsulation sublayer that provides extended identification fields and control messages to ensure deterministic network-layer feedback.</dd>
<dt>Virtual Enterprise Traversal (VET):</dt>
<dd style="margin-left: 8">
<br>a method for discovering border routers and forming dynamic tunnel-neighbor relationships over enterprise networks (or sites) with varying properties.</dd>
<dt>Virtual Service Provider (VSP):</dt>
<dd style="margin-left: 8">
<br>a company that owns and manages a set of APs from which it delegates CPs to EUNs.</dd>
<dt>VSP Overlay Network:</dt>
<dd style="margin-left: 8">
<br>the same as defined above for IRON Instance.</dd>
</dl>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#iron" id="iron">The Internet Routing Overlay Network</a>
</h1>
<p id="rfc.section.3.p.1">The Internet Routing Overlay Network (IRON) is the union of all Virtual Service Provider (VSP) overlay networks (also known as "IRON instances"). IRON provides a number of important services to End User Networks (EUNs) that are not well supported in the current Internet architecture, including routing scaling, mobility management, mobile networks, multihoming, traffic engineering and NAT traversal. While the principles presented in this document are discussed within the context of the public global Internet, they can also be applied to any other form of autonomous internetwork (e.g., corporate enterprise networks, civil aviation networks, tactical military networks, etc.). Hence, the terms "Internet" and "internetwork" are used interchangeably within this document.</p>
<p id="rfc.section.3.p.2">Each IRON instance consists of IRON Agents (IAs) that automatically tunnel the packets of end-to-end communication sessions within encapsulating headers used for Internet routing. IAs use the Virtual Enterprise Traversal (VET) <a href="#INTAREA-VET">[INTAREA-VET]</a> virtual NBMA link model in conjunction with the Subnetwork Encapsulation and Adaptation Layer (SEAL) <a href="#INTAREA-SEAL">[INTAREA-SEAL]</a> to encapsulate inner network-layer packets within outer network layer headers, as shown in <a href="#encaps">Figure 1</a>.</p>
<div id="#rfc.figure.1"></div>
<div id="#encaps"></div>
<pre>                                      +-------------------------+
                                      |    Outer headers with   |
                                      ~     locator addresses   ~
                                      |     (IPv4 or IPv6)      |
                                      +-------------------------+
                                      |       SEAL Header       |
    +-------------------------+       +-------------------------+
    |   Inner Packet Header   |  --&gt;  |   Inner Packet Header   |
    ~    with CPA addresses   ~  --&gt;  ~    with CPA addresses   ~
    | (IPv4, IPv6, OSI, etc.) |  --&gt;  | (IPv4, IPv6, OSI, etc.) |
    +-------------------------+       +-------------------------+
    |                         |  --&gt;  |                         |
    ~    Inner Packet Body    ~  --&gt;  ~    Inner Packet Body    ~
    |                         |  --&gt;  |                         |
    +-------------------------+       +-------------------------+
                                      |       SEAL Trailer      |
                                      +-------------------------+

       Inner packet before                Outer packet after
        encapsulation                       encapsulation</pre>
<p></p>
<p id="rfc.section.3.p.4">VET specifies automatic tunneling and tunnel neighbor coordination mechanisms, where IAs appear as neighbors on an NBMA tunnel virtual link. SEAL specifies the format and usage of the SEAL encapsulating header and trailer. Additionally, Asymmetric Extended Route Optimization (AERO) <a href="#AERO">[AERO]</a> specifies the method for reducing routing path stretch. Together, these documents specify elements of a SEAL Control Message Protocol (SCMP) used to deterministically exchange and authenticate neighbor discovery messages, route redirections, indications of Path Maximum Transmission Unit (PMTU) limitations, destination unreachables, etc.</p>
<p id="rfc.section.3.p.5">Each IRON instance comprises a set of IAs distributed throughout the Internet to provide internetworking services for a set of Aggregated Prefixes (APs). (The APs may be owned either by the VSP, or by an enterprise network customer the hires the VSP to manage its APs.) VSPs delegate sub-prefixes from APs, which they provide to end users as Client Prefixes (CPs). In turn, end users assign CPs to Client IAs which connect their End User Networks (EUNs) to the VSP IRON instance.</p>
<p id="rfc.section.3.p.6">VSPs may have no affiliation with the ISP networks from which end users obtain their basic Internet connectivity. In that case, the VSP can service its end users without the need to coordinate its activities with ISPs or other VSPs. Further details on VSP business considerations are out of scope for this document.</p>
<p id="rfc.section.3.p.7">IRON requires no changes to end systems or to existing routers.  Instead, IAs are deployed either as new platforms or as modifications to existing platforms. IAs may be deployed incrementally without disturbing the existing Internet routing system, and act as waypoints (or "cairns") for navigating VSP overly networks. The functional roles for IAs are described in the following sections.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> IRON Client</h1>
<p id="rfc.section.3.1.p.1">An IRON Client (or, simply, "Client") is a router or host that logically connects EUNs to the VSP's IRON instance via tunnels, as shown in <a href="#IREP">Figure 2</a>. Clients obtain CPs from their VSPs and use them to number subnets and interfaces within the EUNs.</p>
<p id="rfc.section.3.1.p.2">Each Client connects to one or more Servers in the IRON instance which serve as default routers. The Servers in turn consider this class of Clients as "connected" Clients. Clients also dynamically discover destination-specific Servers through the receipt of Redirect messages. These destination-specific Servers in turn consider this class of Clients as "foreign" Clients.</p>
<p id="rfc.section.3.1.p.3">A Client can be deployed on the same physical platform that also connects EUNs to the end user's ISPs, but it may also be deployed as a separate router within the EUN. (This model applies even if the EUN connects to the ISP via a Network Address Translator (NAT) -- see Section 6.7). Finally, a Client may also be a simple end system that connects a singleton EUN and exhibits the outward appearance of a host.</p>
<div id="#rfc.figure.2"></div>
<div id="#IREP"></div>
<pre>                        .-.
                     ,-(  _)-.
     +--------+   .-(_    (_  )-.
     | Client |--(_     ISP      )
     +---+----+     `-(______)-' 
         |   &lt;= T         \     .-.
        .-.       u        \ ,-(  _)-.
     ,-(  _)-.       n     .-(_    (-  )-.
  .-(_    (_  )-.      n  (_   Internet   )
 (_     EUN      )       e   `-(______)- 
    `-(______)-'           l          ___
         |                   s =&gt;    (:::)-.
    +----+---+                   .-(::::::::)
    |  Host  |                .-(::: IRON :::)-.
    +--------+               (:::: Instance ::::)
                              `-(::::::::::::)-'
                                 `-(::::::)-'</pre>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> IRON Serving Router</h1>
<p id="rfc.section.3.2.p.1">An IRON serving router (or, simply, "Server") is a VSP's router that provides forwarding and mapping services within the IRON instance for the CPs that have been delegated to end user Clients. In typical deployments, a VSP will deploy many Servers for the IRON instance in a globally distributed fashion (e.g., as depicted in <a href="#IRVE">Figure 3</a>) around the Internet so that Clients can discover those that are nearby.</p>
<div id="#rfc.figure.3"></div>
<div id="#IRVE"></div>
<pre>          +--------+    +--------+
          | Boston |    | Tokyo  |
          | Server |    | Server |
          +--+-----+    ++-------+
  +--------+  \         /
  | Seattle|   \   ___ /
  | Server |    \ (:::)-.       +--------+
  +------+-+  .-(::::::::)------+ Paris  |
          \.-(::: IRON :::)-.   | Server |
          (:::: Instance ::::)  +--------+
           `-(::::::::::::)-'
+--------+ /  `-(::::::)-'  \     +--------+
| Moscow +          |        \--- + Sydney |
| Server |     +----+---+         | Server |
+--------+     | Cairo  |         +--------+
               | Server |
               +--------+</pre>
<p></p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> IRON Relay Router</h1>
<p id="rfc.section.3.3.p.1">An IRON Relay Router (or, simply, "Relay") is a router that connects the VSP's IRON instance to the Internet as an Autonomous System (AS). The Relay therefore also serves as an Autonomous System Border Router (ASBR) that is owned and managed by the VSP.</p>
<p id="rfc.section.3.3.p.2">Each VSP configures one or more Relays that advertise the VSP's APs into the IPv4 and/or IPv6 global Internet routing systems. Each Relay associates with the VSP's IRON instance Servers, e.g., via tunnel virtual links over the IRON instance, via a physical interconnect such as an Ethernet cable, etc. The Relay role is depicted in <a href="#IRGW">Figure 4</a>.</p>
<div id="#rfc.figure.4"></div>
<div id="#IRGW"></div>
<pre>
                   .-.
                ,-(  _)-.
             .-(_    (_  )-.
            (_   Internet   )
               `-(______)-'   |  +--------+
                     |        |--| Server |
                +----+---+    |  +--------+
                | Relay  |----|  +--------+
                +--------+    |--| Server |
                    _||       |  +--------+
                   (:::)-.  (Physical Interconnects)
               .-(::::::::)
+--------+  .-(::: IRON :::)-.  +--------+
| Server |=(:::: Instance ::::)=| Server |
+--------+  `-(::::::::::::)-'  +--------+
               `-(::::::)-'
                    ||      (Tunnels)
                +--------+
                | Server |
                +--------+</pre>
<p></p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#IBM" id="IBM">IRON Organizational Principles</a>
</h1>
<p id="rfc.section.4.p.1">The IRON consists of the union of all VSP overlay networks configured over the Internet. Each such IRON instance represents a distinct "patch" on the underlying Internet "quilt", where the patches are stitched together by standard Internet routing. When a new IRON instance is deployed, it becomes yet another patch on the quilt and coordinates its internal routing system independently of all other patches.</p>
<p id="rfc.section.4.p.2">Each IRON instance connects to the Internet as an AS in the Internet routing system using a public BGP Autonomous System Number (ASN). The IRON instance maintains a set of Relays that serve as ASBRs as well as a set of Servers that provide routing and addressing services to Clients.  <a href="#VON">Figure 5</a> depicts the logical arrangement of Relays, Servers, and Clients in an IRON instance.</p>
<div id="#rfc.figure.5"></div>
<div id="#VON"></div>
<pre>                           .-.
                        ,-(  _)-.
                     .-(_    (_  )-.
                    (__ Internet   _)
                       `-(______)-'

       &lt;------------     Relays      ------------&gt;
                 ________________________
                (::::::::::::::::::::::::)-.
            .-(:::::::::::::::::::::::::::::)
         .-(:::::::::::::::::::::::::::::::::)-.
        (::::::::::: IRON Instance :::::::::::::)
         `-(:::::::::::::::::::::::::::::::::)-'
            `-(::::::::::::::::::::::::::::)-'

       &lt;------------    Servers      ------------&gt;
       .-.                .-.                     .-.
    ,-(  _)-.          ,-(  _)-.               ,-(  _)-.
 .-(_    (_  )-.    .-(_    (_  )-.         .-(_    (_  )-.
(__   ISP A    _)  (__   ISP B    _)  ...  (__   ISP x    _)
   `-(______)-'       `-(______)-'            `-(______)-'
        &lt;-----------      NATs        ------------&gt;

        &lt;----------- Clients and EUNs -----------&gt;</pre>
<p></p>
<p id="rfc.section.4.p.4">In a simple VSP overlay network arrangement, each Server can be configured as an ASBR for a stub AS using a private ASN <a href="#RFC1930">[RFC1930]</a> to peer with each IRON instance Relay the same as for an ordinary eBGP neighbor. (The Server and Relay functions can instead be deployed together on the same physical platform as a unified gateway.) Each Server maintains a working set of connected Clients for which it caches CP-to-Client mappings in its forwarding table. Each Server also, in turn, propagates the list of CPs in its working set to its neighboring Relays via eBGP. Therefore, each Server only needs to track the CPs for its current working set of Clients, while each Relay will maintain a full CP-to-Server forwarding table that represents reachability information for all CPs in the IRON instance.</p>
<p id="rfc.section.4.p.5">Each Client obtains its basic Internet connectivity from ISPs, and connects to Servers to attach its EUNs to the IRON instance. Each EUN can further connect to the IRON instance via multiple Clients as long as the Clients coordinate with one another, e.g., to mitigate EUN partitions. Unlike Relays and Servers, Clients may use private addresses behind one or several layers of NATs. Each Client initially discovers a list of nearby Servers then forms a bidirectional tunnel-neighbor relationship with one or more Servers through an initial exchange followed by periodic keepalives.</p>
<p id="rfc.section.4.p.6">After a Client connects to Servers, it forwards initial outbound packets from its EUNs by tunneling them to a Server, which may, in turn, forward them to a nearby Relay within the IRON instance. The Client may subsequently receive Redirect messages informing it of a more direct route through a different Server within the IRON instance that serves the final destination EUN. This foreign Server in turn provides the Client with a unidirectional tunnel-neighbor egress for route optimization purposes,.</p>
<p id="rfc.section.4.p.7">IRON can also be used to support APs of network-layer address families that cannot be routed natively in the underlying Internetwork (e.g., OSI/CLNP over the public Internet, IPv6 over IPv4-only Internetworks, IPv4 over IPv6-only Internetworks, etc.). Further details for the support of IRON APs of one address family over Internetworks based on different address families are discussed in Appendix A.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#initialization" id="initialization">IRON Control Plane Operation</a>
</h1>
<p id="rfc.section.5.p.1">Each IRON instance supports routing through the control plane startup and runtime dynamic routing operation of IAs. The following sub-sections discuss control plane considerations for initializing and maintaining the IRON instance routing system.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#EUN" id="EUN">IRON Client Operation</a>
</h1>
<p id="rfc.section.5.1.p.1">Each Client obtains one or more CPs in a secured exchange with the VSP as part of the initial end user registration. Upon startup, the Client discovers a list of nearby VSP Servers via, e.g., a location broker, a well known website, a static map, etc.</p>
<p id="rfc.section.5.1.p.2">After the Client obtains a list of nearby Servers, it initiates short transactions to connect to one or more Servers, e.g., via secured TCP connections. During the transaction, each Server provides the Client with a CP and a symmetric secrey key that the Client will use to sign and authenticate messages. The Client in turn provides the Server with a set of link identifiers ("LINK_ID"s) that represent the Client's ISP connections. The protocol details of the transaction are specific to the VSP, and hence out of scope for this document.</p>
<p id="rfc.section.5.1.p.3">After the Client connects to Servers, it configures default routes that list the Servers as next hops on the tunnel virtual interface.  The Client may subsequently discover more-specific routes through receipt of Redirect messages.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> IRON Server Operation</h1>
<p id="rfc.section.5.2.p.1">In a simple VSP overlay network arrangement, each IRON Server is provisioned with the locators for Relays within the IRON instance. The Server is further configured as an ASBR for a stub AS and uses eBGP with a private ASN to peer with each Relay.</p>
<p id="rfc.section.5.2.p.2">Upon startup, the Server reports the list of CPs it is currently serving to the overlay network Relays. The Server then actively listens for Clients that register their CPs as part of their connection establishment procedure. When a new Client connects, the Server announces the new CP routes to its neighboring Relays; when an existing Client disconnects, the Server withdraws its CP announcements. This process can often be accommodated through standard router configurations, e.g., on routers that can announce and withdraw prefixes based on kernel route additions and deletions.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> IRON Relay Operation</h1>
<p id="rfc.section.5.3.p.1">Each IRON Relay is provisioned with the list of APs that it will serve, as well as the locators for Servers within the IRON instance.  The Relay is also provisioned with eBGP peerings with neighboring ASes in the Internet -- the same as for any ASBR.</p>
<p id="rfc.section.5.3.p.2">In a simple VSP overlay network arrangement, each Relay connects to each Server via IRON instance-internal eBGP peerings for the purpose of discovering CP-to-Server mappings, and connects to all other Relays using iBGP either in a full mesh or using route reflectors. (The Relay only uses iBGP to announce those prefixes it has learned from AS peerings external to the IRON instance, however, since all Relays will already discover all CPs in the IRON instance via their eBGP peerings with Servers.) The Relay then engages in eBGP routing exchanges with peer ASes in the IPv4 and/or IPv6 Internets the same as for any ASBR.</p>
<p id="rfc.section.5.3.p.3">After this initial synchronization procedure, the Relay advertises the APs to its eBGP peers in the Internet. In particular, the Relay advertises the IPv6 APs into the IPv6 Internet routing system and advertises the IPv4 APs into the IPv4 Internet routing system, but it does not advertise the full list of the IRON overlay's CPs to any of its eBGP peers. The Relay further advertises "default" via eBGP to its associated Servers, then engages in ordinary packet-forwarding operations.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#operation" id="operation">IRON Forwarding Plane Operation</a>
</h1>
<p id="rfc.section.6.p.1">Following control plane initialization, IAs engage in the cooperative process of receiving and forwarding packets. IAs forward encapsulated packets over the IRON instance using the mechanisms of VET <a href="#INTAREA-VET">[INTAREA-VET]</a>, AERO <a href="#AERO">[AERO]</a> and SEAL <a href="#INTAREA-SEAL">[INTAREA-SEAL]</a>, while Relays additionally forward packets to and from the native IPv6 and/or IPv4 Internets. IAs also use SCMP to coordinate with other IAs, including the process of sending and receiving Redirect messages, error messages, etc. Each IA operates as specified in the following sub-sections.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> IRON Client Operation</h1>
<p id="rfc.section.6.1.p.1">After connecting to Servers as specified in Section 5.1, the Client registers its active ISP connections with each Server. Thereafter, the Client sends periodic beacons (e.g., cryptographically signed SRS messages) to the Server via each ISP connection to maintain tunnel-neighbor address mapping state. The beacons should be sent at no more than 60 second intervals (subject to a small random delay) so that state in NATs on the path as well as on the Server itself is refreshed regularly. Although the Client may connect via multiple ISPs (each represented by a different LINK_ID), the CP itself is used to represent the bidirectional Client-to-Server tunnel neighbor association. The CP therefore names this "bundle" of ISP connections.</p>
<p id="rfc.section.6.1.p.2">If the Client ceases to receive acknowledgements from a Server via a specific ISP connection, it marks the Server as unreachable from that ISP. (The Client should also inform the Server of this outage via one of its working ISP connections.) If the Client ceases to receive acknowledgements from the Server via multiple ISP connections, it disconnects from the failing Server and connects to a new nearby Server. The act of disconnecting from old servers and connecting to new servers will soon propagate the appropriate routing information among the IRON instance's Relays.</p>
<p id="rfc.section.6.1.p.3">When an end system in an EUN sends a flow of packets to a correspondent in a different network, the packets are forwarded through the EUN via normal routing until they reach the Client, which then tunnels the initial packets to a Server as its default router. In particular, the Client encapsulates each packet in an outer header with its locator as the source address and the locator of the Server as the destination address.</p>
<p id="rfc.section.6.1.p.4">The Client uses the mechanisms specified in VET, SEAL and AERO to encapsulate each packet to be forwarded. The Client further accepts SCMP protocol messages from its Servers, including neighbor coordination exchanges, indications of PMTU limitations, Redirects and other control messages. When the Client is redirected to a foreign Server that serves a destination CP, it forms a unidirectional tunnel neighbor association with the foreign Server as the new next hop toward the CP.</p>
<p id="rfc.section.6.1.p.5">Note that Client-to-Client tunneling is not accommodated, since this could result in communication failures when one or both Clients are located behind a NAT, or when one or both Clients are mobile.  Therefore, Client-to-Client mobility binding updates are not required in the IRON model.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> IRON Server Operation</h1>
<p id="rfc.section.6.2.p.1">After the Server associates with nearby Relays, it accepts Client connections and authenticates the SRS messages it receives from its already-connected Clients. The Server discards any SRS messages that failed authentication, and responds to authentic SRS messages by returning signed SRAs.</p>
<p id="rfc.section.6.2.p.2">When the Server receives a SEAL-encapsulated data packet from one of its connected Clients, it uses normal longest-prefix-match rules to locate a forwarding table entry that matches the packet's inner destination address. The Server then re-encapsulates the packet (i.e., it removes the outer header and replaces it with a new outer header), sets the outer destination address to the locator address of the next hop and forwards the packet to the next hop.</p>
<p id="rfc.section.6.2.p.3">When the Server receives a SEAL-encapsulated data packet from a foreign Client, it accepts the packet only if the packet's signature is correct; otherwise, it silently drops the packet. The Server then locates a forwarding table entry that matches the packet's inner destination address. If the destination does not correspond to one of the Server's connected Clients, the Server silently drops the packet.  Otherwise, the Server re-encapsulates the packet and forwards it to the correct connected Client. If the Client is in the process of disconnecting (e.g., due to mobility), the Server also returns a Redirect message listing a NULL next hop to inform the foreign Client that the connected Client has moved.</p>
<p id="rfc.section.6.2.p.4">When the Server receives a SEAL-encapsulated data packet from a Relay, it again locates a forwarding table entry that matches the packet's inner destination. If the destination does not correspond to one of the Server's connected Clients, the Server drops the packet and sends a destination unreachable message. Otherwise, the Server re-encapsulates the packet and forwards it to the correct connected Client.</p>
<p id="rfc.section.6.2.p.5">The permissible data flow paths for tunneled packets that flow through a Server are shown diagrammatically in Section 7.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> IRON Relay Operation</h1>
<p id="rfc.section.6.3.p.1">After each Relay has synchronized its APs (see Section 5.3) it advertises them in the IPv4 and/or IPv6 Internet routing systems.  These APs will be represented as ordinary routing information in the interdomain routing system, and any packets originating from the IPv4 or IPv6 Internet destined to an address covered by one of the APs will be forwarded to one of the VSP's Relays.</p>
<p id="rfc.section.6.3.p.2">When a Relay receives a packet from the Internet destined to a CPA covered by one of its APs, it behaves as an ordinary IP router.  Specifically, the Relay looks in its forwarding table to discover a locator of a Server that serves the CP covering the destination address. The Relay then simply forwards the packet to the Server, e.g., via SEAL encapsulation over a tunnel virtual link, via a physical interconnect, etc.</p>
<p id="rfc.section.6.3.p.3">When a Relay receives a packet from a Server destined to a CPA serviced by a different Server, the Relay forwards the packet toward the correct Server while also sending a "predirect" indication as the initial leg in the AERO redirection procedure. When the target Server returns a Redirect message, the Relay proxies the Redirect by re-encapsulating it and forwarding it to the previous hop.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> IRON Reference Operating Scenarios</h1>
<p id="rfc.section.7.p.1">IRON supports communications when one or both hosts are located within CP-addressed EUNs. The following sections discuss the reference operating scenarios.</p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Both Hosts within Same IRON Instance</h1>
<p id="rfc.section.7.1.p.1">When both hosts are within EUNs served by the same IRON instance, it is sufficient to consider the scenario in a unidirectional fashion, i.e., by tracing packet flows only in the forward direction from source host to destination host. The reverse direction can be considered separately and incurs the same considerations as for the forward direction. The simplest case occurs when the EUNs that service the source and destination hosts are connected to the same server, while the general case occurs when the EUNs are connected to different Servers. The two cases are discussed in the following sections.</p>
<h1 id="rfc.section.7.1.1">
<a href="#rfc.section.7.1.1">7.1.1.</a> EUNs Served by Same Server</h1>
<p id="rfc.section.7.1.1.p.1">In this scenario, the packet flow from the source host is forwarded through the EUN to the source's IRON Client. The Client then tunnels the packets to the Server, which simply re-encapsulates and forwards the tunneled packets to the destination's Client. The destination's Client then removes the packets from the tunnel and forwards them over the EUN to the destination. <a href="#example0">Figure 6</a> depicts the sustained flow of packets from Host A to Host B within EUNs serviced by the same Server via a "hairpinned" route:</p>
<div id="#rfc.figure.6"></div>
<div id="#example0"></div>
<pre>               ________________________________________
            .-(                                         )-.
         .-(                                              )-.
      .-(                                                    )-.
    .(                                                          ).
  .(                                                              ).
.(                         +------------+                           ).
(     +===================&gt;| Server(S)  |=====================+      )
(    //                    +------------+                     \\     )
(   //  .-.                                                .-. \\    )
(  //,-(  _)-.                                          ,-(  _)-\\   )
( .||_    (_  )-.                                    .-(_    (_  ||. )
((_||  ISP A    .)                                  (__   ISP B  ||_))
(  ||-(______)-'                                       `-(______)||  )
(  ||    |                                                  |    vv  )
 ( +-----+-----+                                      +-----+-----+ )
   | Client(A) |                                      | Client(B) |
   +-----+-----+           VSP IRON Instance          +-----+-----+
   ^     |    (   (Overlaid on the Native Internet)     )   |     |
   |    .-.     .-(                                .-)     .-.    |
   | ,-(  _)-.      .-(________________________)-.      ,-(  _)-. |
  .|(_    (_  )-.                                    .-(_    (_  )|
 (_|   EUN A     )                                  (_    EUN B   |)
   |`-(______)-'                                       `-(______)-|
   |     |               Legend:                            |     |
   | +---+----+            ----&gt; == Native             +----+---+ |
   +-| Host A |            ====&gt; == Tunnel             | Host B |&lt;+
     +--------+                                        +--------+</pre>
<p><a href="#example0">Figure 6</a>, Host A sends packets destined to Host B via its network interface connected to EUN A.&#160; Routing within EUN A will direct the packets to Client(A) as a default router for the EUN, which then encapsulates them in outer IP/SEAL/* headers with its locator address as the outer source address, the locator address of Server(S) as the outer destination address, and the identifying information associated with its tunnel-neighbor state as the identity. Client(A) then simply forwards the encapsulated packets into the ISP network connection that provided its locator. The ISP will forward the encapsulated packets into the Internet without filtering since the (outer) source address is topologically correct. Once the packets have been forwarded into the Internet, routing will direct them to Server(S).</p>
<p id="rfc.section.7.1.1.p.3">Server(S) will receive the encapsulated packets from Client(A) then check its forwarding table to discover an entry that covers destination address B with Client(B) as the next hop. Server(S) then re-encapsulates the packets in a new outer header that uses the source address, destination address, and identification parameters associated with the tunnel-neighbor state for Client(B). Server(S) then forwards these re-encapsulated packets into the Internet, where routing will direct them to Client(B). Client(B) will, in turn, decapsulate the packets and forward the inner packets to Host B via EUN B.</p>
<h1 id="rfc.section.7.1.2">
<a href="#rfc.section.7.1.2">7.1.2.</a> EUNs Served by Different Servers</h1>
<p id="rfc.section.7.1.2.p.1">In this scenario, the initial packets of a flow produced by a source host within an EUN connected to the IRON instance by a Client must flow through both the Server of the source host and a nearby Relay, but route optimization can eliminate these elements from the path for subsequent packets in the flow. <a href="#example1">Figure 7</a> shows the flow of initial packets from Host A to Host B within EUNs of the same IRON instance:</p>
<div id="#rfc.figure.7"></div>
<div id="#example1"></div>
<pre>               ________________________________________
            .-(                                         )-.
         .-(               +------------+                 )-.
      .-(          +======&gt;|  Relay(R)  |=======+            )-.
    .(             ||      +*--*--*--*-*+      ||               ).
  .(               ||     *              *     vv                 ).
.(        +--------++--+*                  *+--++--------+          ).
(     +==&gt;| Server(A) *|                    | Server(B)  |====+      )
(    //   +----------*-+                    +------------+    \\     )
(   //  .-.         *                                      .-. \\    )
(  //,-(  _)-.      *                                   ,-(  _)-\\   )
( .||_    (_  )-.   *                                .-(_    (_  ||. )
((_||  ISP A    .)  *                               (__   ISP B  ||_))
(  ||-(______)-'    *                                  `-(______)||  )
(  ||    |          *                                       |    vv  )
 ( +-----+-----+   *                                  +-----+-----+ )
   | Client(A) |&lt;*                                    | Client(B) |
   +-----+-----+           VSP IRON Instance          +-----+-----+
   ^     |    (   (Overlaid on the Native Internet)     )   |     |
   |    .-.     .-(                                .-)     .-.    |
   | ,-(  _)-.      .-(________________________)-.      ,-(  _)-. |
  .|(_    (_  )-.                                    .-(_    (_  )|
 (_|   EUN A     )                                  (_    EUN B   |)
   |`-(______)-'                                       `-(______)-|
   |     |               Legend:                            |     |
   | +---+----+            ----&gt; == Native             +----+---+ |
   +-| Host A |            ====&gt; == Tunnel             | Host B |&lt;+
     +--------+            &lt;**** == Redirect           +--------+</pre>
<p><a href="#example1">Figure 7</a>, Host A sends packets destined to Host B via its network interface connected to EUN A.&#160; Routing within EUN A will direct the packets to Client(A) as a default router for the EUN, which then encapsulates them in outer IP/SEAL/* headers that use the source address, destination address, and identification parameters associated with the tunnel-neighbor state for Server(A). Client(A) then forwards the encapsulated packets into the ISP network connection that provided its locator, which will forward the encapsulated packets into the Internet where routing will direct them to Server(A).</p>
<p id="rfc.section.7.1.2.p.3">Server(A) receives the encapsulated packets from Client(A) and consults its forwarding table to determine that the most-specific matching route is via Relay(R) as the next hop. Server(A) then re-encapsulates the packets in outer headers that use the source address, destination address, and identification parameters associated with Relay (R), and forwards them into the Internet where routing will direct them to Relay(R). (Note that the Server could instead forward the packets directly to the Relay without encapsulation when the Relay is directly connected, e.g., via a physical interconnect.)</p>
<p id="rfc.section.7.1.2.p.4">Relay(R) receives the forwarded packets from Server(A) then checks its forwarding table to discover a CP entry that covers inner destination address B with Server(B) as the next hop. Relay(R) then sends a "predirect" indication forward to Server(B) to inform the server that a Redirect message must be returned (the "predirect" may be either a separate control message or an indication setting on the data packet itself). Relay(R) finally re-encapsulates the packets in outer headers that use the source address, destination address, and identification parameters associated with Server(B), then forwards them into the Internet where routing will direct them to Server(B).  (Note again that the Relay could instead forward the packets directly to the Server, e.g., via a physical interconnect.)</p>
<p id="rfc.section.7.1.2.p.5">Server(B) receives the "predirect" indication and forwarded packets from Relay(R), then checks its forwarding table to discover a CP entry that covers destination address B with Client(B) as the next hop. Server(B) returns a Redirect message to Relay(R), which proxies the message back to Server(A), which then proxies the message back to Client(A).</p>
<p id="rfc.section.7.1.2.p.6">Server(B) then re-encapsulates the packets in outer headers that use the source address, destination address, and identification parameters associated with Client(B), then forwards them into the Internet where routing will direct them to Client(B). Client(B) will, in turn, decapsulate the packets and forward the inner packets to Host B via EUN B.</p>
<p id="rfc.section.7.1.2.p.7">After the initial flow of packets, Client(A) will have received one or more Redirect messages listing Server(B) as a better next hop, and will establish unidirectional tunnel-neighbor state listing Server(B) as the next hop toward the CP that covers Host B.  Client(A) thereafter forwards its encapsulated packets directly to the locator address of Server(B) without involving either Server(A) or Relay(B), as shown in <a href="#example2">Figure 8</a>.</p>
<div id="#rfc.figure.8"></div>
<div id="#example2"></div>
<pre>               ________________________________________
            .-(                                         )-.
         .-(                                              )-.
      .-(                                                    )-.
    .(                                                          ).
  .(                                                              ).
.(                                          +------------+          ).
(     +====================================&gt;|  Server(B) |====+      )
(    //                                     +------------+    \\     )
(   //  .-.                                                .-. \\    )
(  //,-(  _)-.                                          ,-(  _)-\\   )
( .||_    (_  )-.                                    .-(_    (_  ||. )
((_||  ISP A    .)                                  (__   ISP B  ||_))
(  ||-(______)-'                                       `-(______)||  )
(  ||    |                                                  |    vv  )
 ( +-----+-----+                                      +-----+-----+ )
   | Client(A) |                                      | Client(B) |
   +-----+-----+             IRON Instance            +-----+-----+
   ^     |    (   (Overlaid on the Native Internet)     )   |     |
   |    .-.     .-(                                .-)     .-.    |
   | ,-(  _)-.      .-(________________________)-.      ,-(  _)-. |
  .|(_    (_  )-.                                    .-(_    (_  )|
 (_|   EUN A     )                                  (_    EUN B   |)
   |`-(______)-'                                       `-(______)-|
   |     |               Legend:                            |     |
   | +---+----+            ----&gt; == Native             +----+---+ |
   +-| Host A |            ====&gt; == Tunnel             | Host B |&lt;+
     +--------+                                        +--------+</pre>
<p></p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Mixed IRON and Non-IRON Hosts</h1>
<p id="rfc.section.7.2.p.1">The cases in which one host is within an IRON EUN and the other is in a non-IRON EUN (i.e., one that connects to the native Internet instead of the IRON) are described in the following sub-sections.</p>
<h1 id="rfc.section.7.2.1">
<a href="#rfc.section.7.2.1">7.2.1.</a> From IRON Host A to Non-IRON Host B</h1>
<p><a href="#example5">Figure 9</a> depicts the IRON reference operating scenario for packets flowing from Host A in an IRON EUN to Host B in a non-IRON EUN.</p>
<div id="#rfc.figure.9"></div>
<div id="#example5"></div>
<pre>               _________________________________________
            .-(         )-.                             )-.
         .-(      +-------)----+                           )-.
      .-(         |  Relay(A)  |--------------------------+   )-.
    .(            +------------+                           \     ).
  .(     +=======&gt;|  Server(A) |                            \     ).
.(     //         +--------)---+                             \     ).
(     //                   )                                  \     )
(    //         IRON       )                                   \    )
(   //  .-.   Instance     )                              .-.   \   )
(  //,-(  _)-.             )                           ,-(  _)-. \  )
( .||_    (_  )-.          ) The Native Internet    .- _    (_  )-| )
( _||  ISP A     )         )                       (_    ISP B    |))
(  ||-(______)-'           )                         `-(______)-' | )
(  ||    |             )-.                                  |     v )
 ( +-----+ ----+    )-.                               +-----+-----+ )
   | Client(A) |)-.                                   | Router(B) |
   +-----+-----+                                      +-----+-----+
   ^     |    (                                         )   |     |
   |    .-.     .-(                                .-)     .-.    |
   | ,-(  _)-.      .-(________________________)-.      ,-(  _)-. |
  .|(_    (_  )-.                                    .-(_    (_  )|
 (_|   EUN A     )                                 (      EUN B   |)
   |`-(______)-'                                       `-(______)-|
   |     |               Legend:                            |     |
   | +---+----+            ----&gt; == Native             +----+---+ |
   +-| Host A |            ====&gt; == Tunnel             | Host B |&lt;+
     +--------+                                        +--------+</pre>
<p></p>
<p id="rfc.section.7.2.1.p.3">In this scenario, Host A sends packets destined to Host B via its network interface connected to IRON EUN A.&#160; Routing within EUN A will direct the packets to Client(A) as a default router for the EUN, which then encapsulates them and forwards them into the Internet routing system where they will be directed to Server(A).</p>
<p id="rfc.section.7.2.1.p.4">Server(A) receives the encapsulated packets from Client(A) then forwards them to Relay(A), which simply forwards the unencapsulated packets into the Internet. Once the packets are released into the Internet, routing will direct them to the final destination B. (Note that for simplicity Server(A) and Relay(A) are depicted in <a href="#example5">Figure 9</a> as two concatenated "half-routers", and the forwarding between the two halves is via encapsulation, via a physical interconnect, via a shared memory operation when the two halves are within the same physical platform, etc.)</p>
<h1 id="rfc.section.7.2.2">
<a href="#rfc.section.7.2.2">7.2.2.</a> From Non-IRON Host B to IRON Host A</h1>
<p><a href="#example6">Figure 10</a> depicts the IRON reference operating scenario for packets flowing from Host B in an Non-IRON EUN to Host A in an IRON EUN.</p>
<div id="#rfc.figure.10"></div>
<div id="#example6"></div>
<pre>               _________________________________________
            .-(         )-.                             )-.
         .-(      +-------)----+                           )-.
      .-(         |  Relay(A)  |&lt;-------------------------+   )-.
    .(            +------------+                           \     ).
  .(     +========|  Server(A) |                            \     ).
.(     //         +--------)---+                             \     ).
(     //                   )                                  \     )
(    //         IRON       )                                   \    )
(   //  .-.   Instance     )                              .-.   \   )
(  //,-(  _)-.             )                           ,-(  _)-. \  )
( .||_    (_  )-.          ) The Native Internet    .- _    (_  )-| )
( _||  ISP A     )         )                       (_    ISP B    |))
(  ||-(______)-'           )                         `-(______)-' | )
(  vv    |             )-.                                  |     | )
 ( +-----+ ----+    )-.                               +-----+-----+ )
   | Client(A) |)-.                                   | Router(B) |
   +-----+-----+                                      +-----+-----+
   |     |    (                                         )   |     |
   |    .-.     .-(                                .-)     .-.    |
   | ,-(  _)-.      .-(________________________)-.      ,-(  _)-. |
  .|(_    (_  )-.                                    .-(_    (_  )|
 (_|   EUN A     )                                 (      EUN B   |)
   |`-(______)-'                                       `-(______)-|
   |     |               Legend:                            |     |
   | +---+----+            &lt;---- == Native             +----+---+ |
   +&gt;| Host A |            &lt;==== == Tunnel             | Host B |-+
     +--------+                                        +--------+</pre>
<p></p>
<p id="rfc.section.7.2.2.p.3">In this scenario, Host B sends packets destined to Host A via its network interface connected to non-IRON EUN B. Internet routing will direct the packets to Relay(A), which then forwards them to Server(A).</p>
<p id="rfc.section.7.2.2.p.4">Server(A) will then check its forwarding table to discover an entry that covers destination address A with Client(A) as the next hop. Server(A) then (re-)encapsulates the packets and forwards them into the Internet, where routing will direct them to Client(A).  Client(A) will, in turn, decapsulate the packets and forward the inner packets to Host A via its network interface connected to IRON EUN A.</p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Hosts within Different IRON Instances </h1>
<div id="#rfc.figure.11"></div>
<div id="#example7"></div>
<pre>               _________________________________________
            .-(         )-.                  .-(        )-.
         .-(      +-------)----+       +---(--------+      )-.
      .-(         |  Relay(A)  | &lt;---&gt; |  Relay(B)  |        )-.
    .(            +------------+       +------------+          ).
  .(     +=======&gt;|  Server(A) |       |  Server(B) |&lt;======+    ).
.(     //         +--------)---+       +---(--------+        \\   ).
(     //                   )               (                  \\   )
(    //          IRON      )               (     IRON          \\   )
(   //  .-.   Instance A   )               (  Instance B  .-.   \\  )
(  //,-(  _)-.             )               (           ,-(  _).  || )
( .||_    (_  )-.          )               (        .-'_    (_  )|| )
( _||  ISP A     )         )               (       (_    ISP B   ||))
(  ||-(______)-'           )               (          '-(______)-|| )
(  vv    |             )-.                   .-(            |    vv )
 ( +-----+ ----+    )-.                         .-(   +-----+-----+ )
   | Client(A) |)-.                                .-(| Client(B) |
   +-----+-----+           The Native Internet        +-----+-----+
   ^     |    (                                         )   |     ^
   |    .-.     .-(                                .-)     .-.    |
   | ,-(  _)-.      .-(________________________)-.      ,-(  _)-. |
  .|(_    (_  )-.                                    .-(_    (_  )|
 (_|   EUN A     )                                  (_    EUN B   |)
   |`-(______)-'                                       `-(______)-|
   |     |               Legend:                            |     |
   | +---+----+            &lt;---&gt; == Native             +----+---+ |
   +&gt;| Host A |            &lt;===&gt; == Tunnel             | Host B |&lt;+
     +--------+                                        +--------+</pre>
<p><a href="#example7">Figure 11</a> depicts the IRON reference operating scenario for packets flowing between Host A in an IRON instance A and Host B in a different IRON instance B. In that case, forwarding between hosts A and B always involves the Servers and Relays of both IRON instances, i.e., the scenario is no different than if one of the hosts was serviced by an IRON EUN and the other was serviced by a non-IRON EUN. </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Mobility, Multiple Interfaces, Multihoming, and Traffic Engineering</h1>
<p id="rfc.section.8.p.1">While IRON Servers and Relays are typically arranged as fixed infrastructure, Clients may need to move between different network points of attachment, connect to multiple ISPs, or explicitly manage their traffic flows. The following sections discuss mobility, multihoming, and traffic engineering considerations for IRON Clients.</p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> Mobility Management and Mobile Networks</h1>
<p id="rfc.section.8.1.p.1">When a Client changes its network point of attachment (e.g., due to a mobility event), it configures one or more new locators. If the Client has not moved far away from its previous network point of attachment, it simply informs its Server of any locator changes. This operation is performance sensitive and should be conducted immediately to avoid packet loss. This aspect of mobility can be classified as a "localized mobility event".</p>
<p id="rfc.section.8.1.p.2">If the Client has moved far away from its previous network point of attachment, however, it re-issues the Server discovery procedure described in Section 5.3. If the Client's current Server is no longer close by, the Client may wish to move to a new Server in order to reduce routing stretch. This operation is not performance critical, and therefore can be conducted over a matter of seconds/minutes instead of milliseconds/microseconds. This aspect of mobility can be classified as a "global mobility event".</p>
<p id="rfc.section.8.1.p.3">To move to a new Server, the Client first engages in the CP registration process with the new Server, as described in Section 5.3.  The Client then informs its former Server that it has departed; again, via a VSP-specific secured reliable transport connection. The former Server will then withdraw its CP advertisements from the IRON instance routing system and retain the (stale) forwarding table entries until their lifetime expires. In the interim, the former Server continues to deliver packets to the Client's last-known locator addresses for the short term while informing any unidirectional tunnel-neighbors that the Client has moved.</p>
<p id="rfc.section.8.1.p.4">Note that the Client may be either a mobile host or a mobile router. In the case of a mobile router, the Client's EUN becomes a mobile network, and can continue to use the Client's CPs without renumbering even as it moves between different network attachment points.</p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> Multiple Interfaces and Multihoming</h1>
<p id="rfc.section.8.2.p.1">A Client may register multiple ISP connections with each Server such that multiple interfaces are naturally supported. This feature results in the Client "harnessing" its multiple ISP connections into a "bundle" that is represented as a single entity at the network layer, and therefore allows for ISP independence at the link-layer.</p>
<p id="rfc.section.8.2.p.2">A Client may further register with multiple Servers for fault tolerance and reduced routing stretch. In that case, the Client should register its full bundle of ISP connections with each of its Servers unless it has a way of carefully coordinating its ISP-to-Server mappings.</p>
<p id="rfc.section.8.2.p.3">Client registration with multiple Servers results in "pseudo-multihoming", in which the multiple homes are within the same VSP IRON instance and hence share fate with the health of the IRON instance itself.</p>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> Traffic Engineering</h1>
<p id="rfc.section.8.3.p.1">A Client can dynamically adjust its ISP-to-Server mappings in order to influence inbound traffic flows. It can also change between Servers when multiple Servers are available, but should strive for stability in its Server selection in order to limit VSP network routing churn.</p>
<p id="rfc.section.8.3.p.2">A Client can select outgoing ISPs, e.g., based on current Quality-of-Service (QoS) considerations such as minimizing delay or variance.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Renumbering Considerations</h1>
<p id="rfc.section.9.p.1">As new link-layer technologies and/or service models emerge, end users will be motivated to select their basic Internet connectivity solutions through healthy competition between ISPs. If an end user's network-layer addresses are tied to a specific ISP, however, they may be forced to undergo a painstaking renumbering even if they wish to change to a different ISP <a href="#RFC4192">[RFC4192]</a><a href="#RFC5887">[RFC5887]</a>.</p>
<p id="rfc.section.9.p.2">When an end user Client obtains CPs from a VSP, it can change between ISPs seamlessly and without need to renumber the CPs. IRON therefore provides ISP independence at the link layer. If the end user is later compelled to change to a different VSP, however, it would be obliged to abandon its CPs and obtain new ones from the new VSP. In that case, the Client would again be required to engage in a painstaking renumbering event.</p>
<p id="rfc.section.9.p.3">In order to avoid all future renumbering headaches, a Client that is part of a cooperative collective (e.g., a large enterprise network) could join together with the collective to obtain a suitably large PI prefix then and hire a VSP to manage the prefix on behalf of the collective. If the collective later decides to switch to a new VSP, it simply revokes its PI prefix registration with the old VSP and activates its registration with the new VSP.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> NAT Traversal Considerations</h1>
<p id="rfc.section.10.p.1">The Internet today consists of a global public IPv4 routing and addressing system with non-IRON EUNs that use either public or private IPv4 addressing. The latter class of EUNs connect to the public Internet via Network Address Translators (NATs). When an IRON Client is located behind a NAT, it selects Servers using the same procedures as for Clients with public addresses and can then send SRS messages to Servers in order to get SRA messages in return. The only requirement is that the Client must configure its encapsulation format to use a transport protocol that supports NAT traversal, e.g., UDP, TCP, etc.</p>
<p id="rfc.section.10.p.2">Since the Server maintains state about its connected Clients, it can discover locator information for each Client by examining the transport port number and IP address in the outer headers of the Client's encapsulated packets. When there is a NAT in the path, the transport port number and IP address in each encapsulated packet will correspond to state in the NAT box and might not correspond to the actual values assigned to the Client. The Server can then encapsulate packets destined to hosts in the Client's EUN within outer headers that use this IP address and transport port number. The NAT box will receive the packets, translate the values in the outer headers, then forward the packets to the Client. In this sense, the Server's "locator" for the Client consists of the concatenation of the IP address and transport port number.</p>
<p id="rfc.section.10.p.3">In order to keep NAT and Server connection state alive, the Client sends periodic beacons to the server, e.g., by sending an SRS message to elicit an SRA message from the Server. IRON does not otherwise introduce any new issues to complications raised for NAT traversal or for applications embedding address referrals in their payload.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> Multicast Considerations</h1>
<p id="rfc.section.11.p.1">IRON Servers and Relays are topologically positioned to provide Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD) proxying for their Clients <a href="#RFC4605">[RFC4605]</a>. Further multicast considerations for IRON (e.g., interactions with multicast routing protocols, traffic scaling, etc.) are out of scope and will be discussed in a future document.</p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> Nested EUN Considerations</h1>
<p id="rfc.section.12.p.1">Each Client configures a locator that may be taken from an ordinary non-CPA address assigned by an ISP or from a CPA address taken from a CP assigned to another Client. In that case, the Client is said to be "nested" within the EUN of another Client, and recursive nestings of multiple layers of encapsulations may be necessary.</p>
<p id="rfc.section.12.p.2">For example, in the network scenario depicted in <a href="#nest">Figure 12</a>, Client(A) configures a locator CPA(B) taken from the CP assigned to EUN(B). Client(B) in turn configures a locator CPA(C) taken from the CP assigned to EUN(C). Finally, Client(C) configures a locator ISP(D) taken from a non-CPA address delegated by an ordinary ISP(D).</p>
<p id="rfc.section.12.p.3">Using this example, the "nested-IRON" case must be examined in which a Host A, which configures the address CPA(A) within EUN(A), exchanges packets with Host Z located elsewhere in a different IRON instance EUN(Z).</p>
<div id="#rfc.figure.12"></div>
<div id="#nest"></div>
<pre>                         .-.
              ISP(D)  ,-(  _)-.
   +-----------+   .-(_    (_  )-.
   | Client(C) |--(_    ISP(D)    )
   +-----+-----+     `-(______)-' 
         |   &lt;= T         \     .-.
        .-.       u        \ ,-(  _)-.
     ,-(  _)-.       n     .-(_    (-  )-.
  .-(_    (_  )-.      n  (_   Internet   )
 (_    EUN(C)    )       e   `-(______)-'
    `-(______)-'           l          ___
         | CPA(C)           s =&gt;     (:::)-.
   +-----+-----+                 .-(::::::::)
   | Client(B) |              .-(: Multiple :)-.    +-----------+
   +-----+-----+             (:::::: IRON ::::::)   |  Relay(Z) |
         |                    `-(: Instances:)-'    +-----------+
        .-.                      `-(::::::)-'       +-----------+
     ,-(  _)-.                                      | Server(Z) |
  .-(_    (_  )-.            +---------------+      +-----------+
 (_    EUN(B)    )           |Relay/Server(C)|      +-----------+
    `-(______)-'             +---------------+      | Client(Z) |
         | CPA(B)            +---------------+      +-----------+
   +-----+-----+             |Relay/Server(B)|          |
   | Client(A) |             +---------------+         .-.
   +-----------+             +---------------+      ,-(  _)-.
         |                   |Relay/Server(A)|   .-(_    (_  )-.
        .-.                  +---------------+  (_    EUN(Z)    )
     ,-(  _)-.  CPA(A)                             `-(______)-'
  .-(_    (_  )-.    +--------+                     +--------+
 (_    EUN(A)    )---| Host A |                     | Host Z |
    `-(______)-'     +--------+                     +--------+</pre>
<p></p>
<p id="rfc.section.12.p.5">The two cases of Host A sending packets to Host Z, and Host Z sending packets to Host A, must be considered separately, as described below.</p>
<h1 id="rfc.section.12.1">
<a href="#rfc.section.12.1">12.1.</a> Host A Sends Packets to Host Z</h1>
<p id="rfc.section.12.1.p.1">Host A first forwards a packet with source address CPA(A) and destination address Z into EUN(A). Routing within EUN(A) will direct the packet to Client(A), which encapsulates it in an outer header with CPA(B) as the outer source address and Server(A) as the outer destination address then forwards the once-encapsulated packet into EUN(B).</p>
<p id="rfc.section.12.1.p.2">Routing within EUN(B) will direct the packet to Client(B), which encapsulates it in an outer header with CPA(C) as the outer source address and Server(B) as the outer destination address then forwards the twice-encapsulated packet into EUN(C). Routing within EUN(C) will direct the packet to Client(C), which encapsulates it in an outer header with ISP(D) as the outer source address and Server(C) as the outer destination address. Client(C) then sends this triple-encapsulated packet into the ISP(D) network, where it will be routed via the Internet to Server(C).</p>
<p id="rfc.section.12.1.p.3">When Server(C) receives the triple-encapsulated packet, it forwards it to Relay(C) which removes the outer layer of encapsulation and forwards the resulting twice-encapsulated packet into the Internet to Server(B). Next, Server(B) forwards the packet to Relay(B) which removes the outer layer of encapsulation and forwards the resulting once-encapsulated packet into the Internet to Server(A). Next, Server(A) forwards the packet to Relay(A), which decapsulates it and forwards the resulting inner packet via the Internet to Relay(Z).  Relay(Z), in turn, forwards the packet to Server(Z), which encapsulates and forwards the packet to Client(Z), which decapsulates it and forwards the inner packet to Host Z.</p>
<h1 id="rfc.section.12.2">
<a href="#rfc.section.12.2">12.2.</a> Host Z Sends Packets to Host A</h1>
<p id="rfc.section.12.2.p.1">When Host Z sends a packet to Host A, forwarding in EUN(Z) will direct it to Client(Z), which encapsulates and forwards the packet to Server(Z). Server(Z) will forward the packet to Relay(Z), which will then decapsulate and forward the inner packet into the Internet.  Internet routing will convey the packet to Relay(A) as the next-hop towards CPA(A), which then forwards it to Server(A).</p>
<p id="rfc.section.12.2.p.2">Server (A) encapsulates the packet and forwards it to Relay(B) as the next-hop towards CPA(B) (i.e., the locator for CPA(A)). Relay(B) then forwards the packet to Server(B), which encapsulates it a second time and forwards it to Relay(C) as the next-hop towards CPA(C) (i.e., the locator for CPA(B)). Relay(C) then forwards the packet to Server(C), which encapsulates it a third time and forwards it to Client(C).</p>
<p id="rfc.section.12.2.p.3">Client(C) then decapsulates the packet and forwards the resulting twice-encapsulated packet via EUN(C) to Client(B). Client(B) in turn decapsulates the packet and forwards the resulting once-encapsulated packet via EUN(B) to Client(A). Client(A) finally decapsulates and forwards the inner packet to Host A.</p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> Implications for the Internet</h1>
<p id="rfc.section.13.p.1">The IRON architecture envisions a hybrid routing/mapping system that benefits from both the shortest-path routing afforded by pure dynamic routing systems and the routing-scaling suppression afforded by pure mapping systems. Therefore, IRON targets the elusive "sweet spot" that pure routing and pure mapping systems alone cannot satisfy.</p>
<p id="rfc.section.13.p.2">The IRON system requires a VSP deployment of new routers/servers throughout the Internet to maintain well-balanced virtual overlay networks. These routers/servers can be deployed incrementally without disruption to existing Internet infrastructure as long as they are appropriately managed to provide acceptable service levels to end users.</p>
<p id="rfc.section.13.p.3">End-to-end traffic that traverses an IRON instance may experience delay variance between the initial packets and subsequent packets of a flow. This is due to the IRON system allowing a longer path stretch for initial packets followed by timely route optimizations to utilize better next hop routers/servers for subsequent packets.</p>
<p id="rfc.section.13.p.4">IRON instances work seamlessly with existing and emerging services within the native Internet. In particular, end users serviced by an IRON instance will receive the same service enjoyed by end users serviced by non-IRON service providers. Internet services already deployed within the native Internet also need not make any changes to accommodate IRON end users.</p>
<p id="rfc.section.13.p.5">The IRON system operates between IAs within the Internet and EUNs.  Within these networks, the underlying paths traversed by the virtual overlay networks may comprise links that accommodate varying MTUs. While the IRON system imposes an additional per-packet overhead that may cause the size of packets to become slightly larger than the underlying path can accommodate, IAs have a method for naturally detecting and tuning out instances of path MTU underruns. In some cases, these MTU underruns may need to be reported back to the original hosts; however, the system will also allow for MTUs much larger than those typically available in current Internet paths to be discovered and utilized as more links with larger MTUs are deployed.</p>
<p id="rfc.section.13.p.6">Finally, and perhaps most importantly, the IRON system provides in-built mobility management, mobile networks, multihoming and traffic engineering capabilities that allow end user devices and networks to move about freely while both imparting minimal oscillations in the routing system and maintaining generally shortest-path routes. This mobility management is afforded through the very nature of the IRON service model, and therefore requires no adjunct mechanisms. The mobility management and multihoming capabilities are further supported by forward-path reachability detection that provides "hints of forward progress" in the same spirit as for IPv6 Neighbor Discovery (ND).</p>
<h1 id="rfc.section.14">
<a href="#rfc.section.14">14.</a> <a href="#research" id="research">Additional Considerations</a>
</h1>
<p id="rfc.section.14.p.1">Considerations for the scalability of Internet Routing due to multihoming, traffic engineering, and provider-independent addressing are discussed in <a href="#RADIR">[RADIR]</a>. Other scaling considerations specific to IRON are discussed in Appendix B.</p>
<p id="rfc.section.14.p.2">Route optimization considerations for mobile networks are found in <a href="#RFC5522">[RFC5522]</a>.</p>
<p id="rfc.section.14.p.3">In order to ensure acceptable end user service levels, the VSP should conduct a traffic scaling analysis and distribute sufficient Relays and Servers for the IRON instance globally throughout the Internet.</p>
<h1 id="rfc.section.15">
<a href="#rfc.section.15">15.</a> <a href="#init" id="init">Related Initiatives</a>
</h1>
<p id="rfc.section.15.p.1">IRON builds upon the concepts of the RANGER architecture <a href="#RFC5720">[RFC5720]</a> , and therefore inherits the same set of related initiatives. The Internet Research Task Force (IRTF) Routing Research Group (RRG) mentions IRON in its recommendation for a routing architecture <a href="#RFC6115">[RFC6115]</a>.</p>
<p id="rfc.section.15.p.2">Virtual Aggregation (VA) <a href="#GROW-VA">[GROW-VA]</a> and Aggregation in Increasing Scopes (AIS) <a href="#EVOLUTION">[EVOLUTION]</a> provide the basis for the Virtual Prefix concepts.</p>
<p id="rfc.section.15.p.3">Internet Vastly Improved Plumbing (Ivip) <a href="#IVIP-ARCH">[IVIP-ARCH]</a> has contributed valuable insights, including the use of real-time mapping. The use of Servers as mobility anchor points is directly influenced by Ivip's associated TTR mobility extensions <a href="#TTRMOB">[TTRMOB]</a>.</p>
<p><a href="#RO-CR">[RO-CR]</a> discusses a route optimization approach using a Correspondent Router (CR) model. The IRON Server construct is similar to the CR concept described in this work; however, the manner in which Clients coordinate with Servers is different and based on the NBMA virtual link model <a href="#RFC5214">[RFC5214]</a>.</p>
<p id="rfc.section.15.p.5">Numerous publications have proposed NAT traversal techniques. The NAT traversal techniques adapted for IRON were inspired by the Simple Address Mapping for Premises Legacy Equipment (SAMPLE) proposal <a href="#SAMPLE">[SAMPLE]</a>.</p>
<p id="rfc.section.15.p.6">The IRON Client-Server relationship is managed in essentially the same way as for the Tunnel Broker model <a href="#RFC3053">[RFC3053]</a>.  Numerous existing tunnel broker provider networks (e.g., Hurricane Electric, SixXS, freenet6, etc.) provide existence proofs that IRON-like overlay network services can be deployed and managed on a global basis <a href="#BROKER">[BROKER]</a>.</p>
<h1 id="rfc.section.16">
<a href="#rfc.section.16">16.</a> <a href="#secure" id="secure">Security Considerations</a>
</h1>
<p id="rfc.section.16.p.1">Security considerations that apply to tunneling in general are discussed in <a href="#RFC6169">[RFC6169]</a>. Additional considerations that apply also to IRON are discussed in RANGER <a href="#RFC5720">[RFC5720]</a> , VET <a href="#INTAREA-VET">[INTAREA-VET]</a> and SEAL <a href="#INTAREA-SEAL">[INTAREA-SEAL]</a>.</p>
<p id="rfc.section.16.p.2">The IRON system further depends on mutual authentication of IRON Clients to Servers and Servers to Relays. As for all Internet communications, the IRON system also depends on Relays acting with integrity and not injecting false advertisements into the Internet routing system (e.g., to mount traffic siphoning attacks).</p>
<p id="rfc.section.16.p.3">IRON Servers must perform source address verification on the packets they accept from IRON Clients. Clients must therefore include a signature on each packet that the Server can use to verify that the Client is authorized to use the source address. Source address verification considerations are discussed in <a href="#I-D.ietf-savi-framework">[I-D.ietf-savi-framework]</a>.</p>
<p id="rfc.section.16.p.4">IRON Servers must ensure that any changes in a Client's locator addresses are communicated only through an authenticated exchange that is not subject to replay. For this reason, Clients periodically send digitally-signed SRS messages to the Server. If the Client's locator address stays the same, the Server can accept the SRS message without verifying the signature. If the Client's locator address changes, the Server must verify the SRS message's signature before accepting the message. Once the message has been authenticated, the Server updates the Client's locator address to the new address.</p>
<p id="rfc.section.16.p.5">Each IRON instance requires a means for assuring the integrity of the interior routing system so that all Relays and Servers in the overlay have a consistent view of CP&lt;-&gt;Server bindings. Also, Denial-of-Service (DoS) attacks on IRON Relays and Servers can occur when packets with spoofed source addresses arrive at high data rates.  However, this issue is no different than for any border router in the public Internet today.</p>
<p id="rfc.section.16.p.6">Middleboxes can interfere with tunneled packets within an IRON instance in various ways. For example, a middlebox may alter a packet's contents, change a packet's locator addresses, inject spurious packets, replay old packets, etc. These issues are no different than for middlebox interactions with ordinary Internet communications. If man-in-the-middle attacks are a matter for concern in certain deployments, however, IRON Agents can use IPsec <a href="#RFC4301">[RFC4301]</a> or TLS/SSL <a href="#RFC5246">[RFC5246]</a> to protect the authenticity, integrity and (if necessary) privacy of their tunneled packets.</p>
<h1 id="rfc.section.17">
<a href="#rfc.section.17">17.</a> <a href="#ack" id="ack">Acknowledgements</a>
</h1>
<p id="rfc.section.17.p.1">The ideas behind this work have benefited greatly from discussions with colleagues; some of which appear on the RRG and other IRTF/IETF mailing lists. Robin Whittle and Steve Russert co-authored the TTR mobility architecture, which strongly influenced IRON. Eric Fleischman pointed out the opportunity to leverage anycast for discovering topologically close Servers. Thomas Henderson recommended a quantitative analysis of scaling properties.</p>
<p id="rfc.section.17.p.2">The following individuals provided essential review input: Jari Arkko, Mohamed Boucadair, Stewart Bryant, John Buford, Ralph Droms, Wesley Eddy, Adrian Farrel, Dae Young Kim, and Robin Whittle.</p>
<p id="rfc.section.17.p.3">Discussions with colleagues following the publication of RFC6179 have provided useful insights that have resulted in significant improvements to this, the Second Edition of IRON.</p>
<h1 id="rfc.references">
<a href="#rfc.references">18.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">18.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC0791">[RFC0791]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc791">Internet Protocol</a>", STD 5, RFC 791, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2460">[RFC2460]</b></td>
<td class="top">
<a href="mailto:deering@cisco.com" title="Cisco Systems, Inc.">Deering, S.E.</a> and <a href="mailto:hinden@iprg.nokia.com" title="Nokia">R.M. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>", RFC 2460, December 1998.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">18.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="GROW-VA">[GROW-VA]</b></td>
<td class="top">
<a>Francis, P</a>, <a>Xu, X</a>, <a>Ballani, H</a>, <a>Jen, D</a>, <a>Raszuk, R</a> and <a>L Zhang</a>, "<a>FIB Suppression with Virtual Aggregation</a>", Work in Progress, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="EVOLUTION">[EVOLUTION]</b></td>
<td class="top">
<a>Zhang, B</a>, <a>Zhang, L</a> and <a>L Wang</a>, "<a>Evolution Towards Global Routing Scalability</a>", Work in Progress, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="IVIP-ARCH">[IVIP-ARCH]</b></td>
<td class="top">
<a>Whittle, R</a>, "<a>Ivip (Internet Vastly Improved Plumbing) Architecture</a>", Work in Progress, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-savi-framework">[I-D.ietf-savi-framework]</b></td>
<td class="top">
<a>Wu, J</a>, <a>Bi, J</a>, <a>Bagnulo, M</a>, <a>Baker, F</a> and <a>C Vogt</a>, "<a href="http://tools.ietf.org/html/draft-ietf-savi-framework-05">Source Address Validation Improvement Framework</a>", Internet-Draft draft-ietf-savi-framework-05, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1070">[RFC1070]</b></td>
<td class="top">
<a href="mailto:hagens@cs.wisc.edu" title="University of Wisconsin, Madison, Computer Sciences Department">Hagens, R.</a>, <a href="mailto:nhall@cs.wisc.edu" title="University of Wisconsin, Madison, Computer Sciences Department">Hall, N.</a> and <a href="mailto:mrose@twg.com" title="The Wollongong Group">M. Rose</a>, "<a href="http://tools.ietf.org/html/rfc1070">Use of the Internet as a subnetwork for experimentation with the OSI network layer</a>", RFC 1070, February 1989.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1918">[RFC1918]</b></td>
<td class="top">
<a href="mailto:yakov@cisco.com" title="Cisco systems">Rekhter, Y.</a>, <a href="mailto:rgm3@is.chrysler.com" title="Chrysler Corporation">Moskowitz, R.</a>, <a href="mailto:Daniel.Karrenberg@ripe.net" title="RIPE Network Coordination Centre">Karrenberg, D.</a>, <a href="mailto:GeertJan.deGroot@ripe.net" title="RIPE Network Coordination Centre">Groot, G.</a> and <a href="mailto:lear@sgi.com" title="Silicon Graphics, Inc.">E. Lear</a>, "<a href="http://tools.ietf.org/html/rfc1918">Address Allocation for Private Internets</a>", BCP 5, RFC 1918, February 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1930">[RFC1930]</b></td>
<td class="top">
<a href="mailto:jhawk@bbnplanet.com" title="BBN Planet Corporation">Hawkinson, J.</a> and <a href="mailto:Tony.Bates@mci.net" title="MCI">T. Bates</a>, "<a href="http://tools.ietf.org/html/rfc1930">Guidelines for creation, selection, and registration of an Autonomous System (AS)</a>", BCP 6, RFC 1930, March 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3053">[RFC3053]</b></td>
<td class="top">
<a>Durand, A.</a>, <a>Fasano, P.</a>, <a>Guardini, I.</a> and <a>D. Lento</a>, "<a href="http://tools.ietf.org/html/rfc3053">IPv6 Tunnel Broker</a>", RFC 3053, January 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4192">[RFC4192]</b></td>
<td class="top">
<a>Baker, F.</a>, <a>Lear, E.</a> and <a>R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc4192">Procedures for Renumbering an IPv6 Network without a Flag Day</a>", RFC 4192, September 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4271">[RFC4271]</b></td>
<td class="top">
<a>Rekhter, Y.</a>, <a>Li, T.</a> and <a>S. Hares</a>, "<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>", RFC 4271, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4548">[RFC4548]</b></td>
<td class="top">
<a>Gray, E.</a>, <a>Rutemiller, J.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc4548">Internet Code Point (ICP) Assignments for NSAP Addresses</a>", RFC 4548, May 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5214">[RFC5214]</b></td>
<td class="top">
<a>Templin, F.</a>, <a>Gleeson, T.</a> and <a>D. Thaler</a>, "<a href="http://tools.ietf.org/html/rfc5214">Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)</a>", RFC 5214, March 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5522">[RFC5522]</b></td>
<td class="top">
<a>Eddy, W.</a>, <a>Ivancic, W.</a> and <a>T. Davis</a>, "<a href="http://tools.ietf.org/html/rfc5522">Network Mobility Route Optimization Requirements for Operational Use in Aeronautics and Space Exploration Mobile Networks</a>", RFC 5522, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="AERO">[AERO]</b></td>
<td class="top">
<a>Templin, F</a>, "<a>Asymmetric Extended Route Optimization (AERO)</a>", Work in Progress, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="INTAREA-SEAL">[INTAREA-SEAL]</b></td>
<td class="top">
<a>Templin, F</a>, "<a>The Subnetwork Encapsulation and Adaptation Layer (SEAL)</a>", Work in Progress, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="INTAREA-VET">[INTAREA-VET]</b></td>
<td class="top">
<a>Templin, F</a>, "<a>Virtual Enterprise Traversal (VET)</a>", Work in Progress, January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4984">[RFC4984]</b></td>
<td class="top">
<a>Meyer, D.</a>, <a>Zhang, L.</a> and <a>K. Fall</a>, "<a href="http://tools.ietf.org/html/rfc4984">Report from the IAB Workshop on Routing and Addressing</a>", RFC 4984, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4301">[RFC4301]</b></td>
<td class="top">
<a>Kent, S.</a> and <a>K. Seo</a>, "<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>", RFC 4301, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5246">[RFC5246]</b></td>
<td class="top">
<a>Dierks, T.</a> and <a>E. Rescorla</a>, "<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>", RFC 5246, August 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5720">[RFC5720]</b></td>
<td class="top">
<a>Templin, F.</a>, "<a href="http://tools.ietf.org/html/rfc5720">Routing and Addressing in Networks with Global Enterprise Recursion (RANGER)</a>", RFC 5720, February 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5743">[RFC5743]</b></td>
<td class="top">
<a>Falk, A.</a>, "<a href="http://tools.ietf.org/html/rfc5743">Definition of an Internet Research Task Force (IRTF) Document Stream</a>", RFC 5743, December 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5887">[RFC5887]</b></td>
<td class="top">
<a>Carpenter, B.</a>, <a>Atkinson, R.</a> and <a>H. Flinck</a>, "<a href="http://tools.ietf.org/html/rfc5887">Renumbering Still Needs Work</a>", RFC 5887, May 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4605">[RFC4605]</b></td>
<td class="top">
<a>Fenner, B.</a>, <a>He, H.</a>, <a>Haberman, B.</a> and <a>H. Sandick</a>, "<a href="http://tools.ietf.org/html/rfc4605">Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("IGMP/MLD Proxying")</a>", RFC 4605, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6115">[RFC6115]</b></td>
<td class="top">
<a>Li, T.</a>, "<a href="http://tools.ietf.org/html/rfc6115">Recommendation for a Routing Architecture</a>", RFC 6115, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6139">[RFC6139]</b></td>
<td class="top">
<a>Russert, S.</a>, <a>Fleischman, E.</a> and <a>F. Templin</a>, "<a href="http://tools.ietf.org/html/rfc6139">Routing and Addressing in Networks with Global Enterprise Recursion (RANGER) Scenarios</a>", RFC 6139, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6169">[RFC6169]</b></td>
<td class="top">
<a>Krishnan, S.</a>, <a>Thaler, D.</a> and <a>J. Hoagland</a>, "<a href="http://tools.ietf.org/html/rfc6169">Security Concerns with IP Tunneling</a>", RFC 6169, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RADIR">[RADIR]</b></td>
<td class="top">
<a>Narten, T</a>, "<a>On the Scalability of Internet Routing</a>", Work in Progress, February 2010.</td>
</tr>
<tr>
<td class="reference"><b id="SAMPLE">[SAMPLE]</b></td>
<td class="top">
<a>Carpenter, B</a> and <a>S Jiang</a>, "<a>Legacy NAT Traversal for IPv6: Simple Address Mapping for Premises Legacy Equipment (SAMPLE)</a>", Work in Progress, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RO-CR">[RO-CR]</b></td>
<td class="top">
<a>Bernardos, C</a>, <a>Calderon, M</a> and <a>I Soto</a>, "<a>Correspondent Router based Route Optimisation for NEMO (CRON)</a>", Work in Progress, July 2008.</td>
</tr>
<tr>
<td class="reference"><b id="BGPMON">[BGPMON]</b></td>
<td class="top">
<a>net, B</a>, "<a>BGPmon.net - Monitoring Your Prefixes, http://bgpmon.net/stat.php</a>", June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="TTRMOB">[TTRMOB]</b></td>
<td class="top">
<a>Whittle, R</a> and <a>S Russert</a>, "<a>TTR Mobility Extensions for Core-Edge Separation Solutions to the Internet's Routing Scaling Problem, http://www.firstpr.com.au/ip/ivip/TTR-Mobility.pdf</a>", August 2008.</td>
</tr>
<tr>
<td class="reference"><b id="BROKER">[BROKER]</b></td>
<td class="top">
<a>Wikipedia, W</a>, "<a>List of IPv6 Tunnel Brokers, http://en.wikipedia.org/wiki/List_of_IPv6_tunnel_brokers</a>", August 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> IRON Operation over Internetworks with Different Address Families</h1>
<p id="rfc.section.Appendix A.p.1">The IRON architecture leverages the routing system by providing generally shortest-path routing for packets with CPA addresses from APs that match the address family of the underlying Internetwork. When the APs are of an address family that is not routable within the underlying Internetwork, however, (e.g., when OSI/NSAP <a href="#RFC4548">[RFC4548]</a> APs are used over an IPv4 Internetwork) a global Master AP mapping database (MAP) is required. The MAP allows the Relays of the local IRON instance to map APs belonging to other IRON instances to addresses taken from companion prefixes of address families that are routable within the Internetwork. For example, an IPv6 AP (e.g., 2001:DB8::/32) could be paired with one or more companion IPv4 prefixes (e.g., 192.0.2.0/24) so that encapsulated IPv6 packets can be forwarded over IPv4-only Internetworks. (In the limiting case, the companion prefixes could themselves be singleton addresses, e.g., 192.0.2.1/32).</p>
<p id="rfc.section.Appendix A.p.2">The MAP is maintained by a globally managed authority, e.g. in the same manner as the Internet Assigned Numbers Authority (IANA) currently maintains the master list of all top-level IPv4 and IPv6 delegations.  The MAP can be replicated across multiple servers for load balancing using common Internetworking server hierarchies, e.g., the DNS caching resolvers, ftp mirror servers, etc.</p>
<p id="rfc.section.Appendix A.p.3">Upon startup, each Relay advertises IPv4 companion prefixes (e.g., 192.0.2.0/24) into the IPv4 Internetwork routing system and/or IPv6 companion prefixes (e.g., 2001:DB8::/64) into the IPv6 Internetwork routing system for the IRON instance that it serves. The Relay then selects singleton host numbers within the IPv4 companion prefixes (e.g., 192.0.2.1) and/or IPv6 companion prefixes (e.g., as 2001:DB8::0), and assigns the resulting addresses to its Internetwork interfaces. (When singleton companion prefixes are used (e.g., 192.0.2.1/32), the Relay does not advertise a the companion prefixes but instead simply assigns them to its Internetwork interfaces and allows standard Internet routing to direct packets to the interfaces.)</p>
<p id="rfc.section.Appendix A.p.4">The Relay then discovers the APs for other IRON instances by reading the MAP, either a priori or on-demand of data packets addressed to other AP destinations. The Relay reads the MAP from a nearby MAP server and periodically checks the server for deltas since the database was last read. The Relay can then forward packets toward CPAs belonging to other IRON instances by encapsulating them in an outer header of the companion prefix address family and using the Relay anycast address as the outer destination address.</p>
<p id="rfc.section.Appendix A.p.5">Possible encapsulations in this model include IPv6-in-IPv4, IPv4-in-IPv6, OSI/CLNP-in-IPv6, OSI/CLNP-in-IPv4, etc. Details of how the DNS can be used as a MAP are given in Section 5.4 of VET <a href="#INTAREA-VET">[INTAREA-VET]</a>.</p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Scaling Considerations</h1>
<p id="rfc.section.Appendix B.p.1">Scaling aspects of the IRON architecture have strong implications for its applicability in practical deployments. Scaling must be considered along multiple vectors, including Interdomain core routing scaling, scaling to accommodate large numbers of EUNs, traffic scaling, state requirements, etc.</p>
<p id="rfc.section.Appendix B.p.2">In terms of routing scaling, each VSP will advertise one or more APs into the global Internet routing system from which CPs are delegated to end users. Routing scaling will therefore be minimized when each AP covers many CPs. For example, the IPv6 prefix 2001:DB8::/32 contains 2^24 ::/56 CP prefixes for assignment to EUNs; therefore, the VSP could accommodate 2^32 ::/56 CPs with only 2^8 ::/32 APs advertised in the interdomain routing core. (When even longer CP prefixes are used, e.g., /64s assigned to individual handsets in a cellular provider network, many more EUNs can be represented within only a single AP.)</p>
<p id="rfc.section.Appendix B.p.3">In terms of traffic scaling for Relays, each Relay represents an ASBR of a "shell" enterprise network that simply directs arriving traffic packets with CPA destination addresses towards Servers that service the corresponding Clients. Moreover, the Relay sheds traffic destined to CPAs through redirection, which removes it from the path for the majority of traffic packets between Clients within the same IRON instance. On the other hand, each Relay must handle all traffic packets forwarded between the CPs it manages and the rest of the Internet. The scaling concerns for this latter class of traffic are no different than for ASBR routers that connect large enterprise networks to the Internet.  In terms of traffic scaling for Servers, each Server services a set of CPs. The Server services all traffic packets destined to its own CPs but only services the initial packets of flows initiated from its own CPs and destined to other CPs. Therefore, traffic scaling for CPA-addressed traffic is an asymmetric consideration and is proportional to the number of CPs each Server serves.</p>
<p id="rfc.section.Appendix B.p.4">In terms of state requirements for Relays, each Relay maintains a list of Servers in the IRON instance as well as forwarding table entries for the CPs that each Server handles. This Relay state is therefore dominated by the total number of CPs handled by the Relay's associated Servers. Keeping in mind that current day core router technologies are only capable of handling fast-path FIB cache sizes of O(1M) entries, a large-scale deployment may require that the total CP database for the VSP overlay be spread between the FIBs of a mesh of Relays rather than fully-resident in the FIB of each Relay. In that case, the techniques of Virtual Aggregation (VA) may be useful in bridging together the mesh of Relays. Alternatively, each Relay could elect to keep some or all CP prefixes out of the FIB and maintain them only in a slow-path forwarding table. In that case, considerably more CP entries could be kept in each Relay at the cost of incurring slow-path processing for the initial packets of a flow.</p>
<p id="rfc.section.Appendix B.p.5">In terms of state requirements for Servers, each Server maintains state only for the CPs it serves, and not for the CPs handled by other Servers in the IRON instance. Finally, neither Relays nor Servers need keep state for final destinations of outbound traffic.</p>
<p id="rfc.section.Appendix B.p.6">Clients source and sink all traffic packets originating from or destined to the CP. Therefore, traffic scaling considerations for Clients are the same as for any site border router. Clients also retain unidirectional tunnel-neighbor state for the Servers for final destinations of outbound traffic flows. This can be managed as soft state, since stale entries purged from the cache will be refreshed when new traffic packets are sent.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Fred L. Templin</span> editor
	  <span class="n hidden">
		<span class="family-name">Templin</span>
	  </span>
	</span>
	<span class="org vcardline">Boeing Research & Technology</span>
	<span class="adr">
	  <span>P.O. Box 3707 MC 7L-49</span>

	  <span class="vcardline">
		<span class="locality">Seattle</span>,  
		<span class="region">WA</span> 
		<span class="code">98124</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fltemplin@acm.org">fltemplin@acm.org</a></span>

  </address>
</div>

</body>
</html>