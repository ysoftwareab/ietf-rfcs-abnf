<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Requirements for Point-To-Multipoint Extensions to the Label Distribution Protocol</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Contributing Authors">
<link href="#rfc.section.2" rel="Chapter" title="2 Definitions">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Acronyms">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Introduction">
<link href="#rfc.section.4" rel="Chapter" title="4 Requirements overview">
<link href="#rfc.section.5" rel="Chapter" title="5 Application scenario">
<link href="#rfc.section.6" rel="Chapter" title="6 Detailed Requirements">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 P2MP LSPs">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 P2MP LSP FEC">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 P2MP LDP routing">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Setting up, tearing down and modifying P2MP LSPs">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 Label Advertisement">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 Data Duplication">
<link href="#rfc.section.6.7" rel="Chapter" title="6.7 Detecting and Avoiding Loops">
<link href="#rfc.section.6.8" rel="Chapter" title="6.8 P2MP LSP Re-routing">
<link href="#rfc.section.6.8.1" rel="Chapter" title="6.8.1 Rerouting upon Network Failure">
<link href="#rfc.section.6.8.2" rel="Chapter" title="6.8.2 Rerouting on a Better Path">
<link href="#rfc.section.6.8.3" rel="Chapter" title="6.8.3 Rerouting upon Planned Maintenance">
<link href="#rfc.section.6.9" rel="Chapter" title="6.9 Support for multi-access networks">
<link href="#rfc.section.6.10" rel="Chapter" title="6.10 Support for encapsulation in P2P and P2MP TE tunnels">
<link href="#rfc.section.6.11" rel="Chapter" title="6.11 Label spaces">
<link href="#rfc.section.6.12" rel="Chapter" title="6.12 IPv4/IPv6 support">
<link href="#rfc.section.6.13" rel="Chapter" title="6.13 Multi-Area/AS LSPs">
<link href="#rfc.section.6.14" rel="Chapter" title="6.14 OAM">
<link href="#rfc.section.6.15" rel="Chapter" title="6.15 Graceful Restart and Fault Recovery">
<link href="#rfc.section.6.16" rel="Chapter" title="6.16 Robustness">
<link href="#rfc.section.6.17" rel="Chapter" title="6.17 Scalability">
<link href="#rfc.section.6.17.1" rel="Chapter" title="6.17.1 Orders of magnitude expected in operational networks">
<link href="#rfc.section.6.18" rel="Chapter" title="6.18 Backward Compatibility">
<link href="#rfc.section.7" rel="Chapter" title="7 Shared Trees">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Requirements for MP2MP LSPs">
<link href="#rfc.section.8" rel="Chapter" title="8 Evaluation criteria">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Performance">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Complexity and Risks">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document lists a set of functional requirements that served as input to the design of Label Distribution Protocol (LDP) extensions for setting up point-to-multipoint (P2MP) Label Switched Paths (LSP), in order to deliver point-to-multipoint applications over a Multi Protocol Label Switching (MPLS) infrastructure." />
  <meta name="description" content="This document lists a set of functional requirements that served as input to the design of Label Distribution Protocol (LDP) extensions for setting up point-to-multipoint (P2MP) Label Switched Paths (LSP), in order to deliver point-to-multipoint applications over a Multi Protocol Label Switching (MPLS) infrastructure." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">MPLS</td>
<td class="right">J.-L. Le Roux, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">T. Morin, Ed.</td>
</tr>
<tr>
<td class="left">Intended status: Historic</td>
<td class="right">V. Parfaitnotfirstpage</td>
</tr>
<tr>
<td class="left">Expires: November 13, 2011</td>
<td class="right">France Telecom - Orange</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">L. Fangnotfirstpage</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Cisco</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">L. Wangnotfirstpage</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Telenor</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Y. Kamitenotfirstpage</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">NTT</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">S. Amantenotfirstpage</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Level3</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">May 12, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Requirements for Point-To-Multipoint Extensions to the Label Distribution Protocol<br />
  <span class="filename">draft-ietf-mpls-mp-ldp-reqs-07</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document lists a set of functional requirements that served as input to the design of Label Distribution Protocol (LDP) extensions for setting up point-to-multipoint (P2MP) Label Switched Paths (LSP), in order to deliver point-to-multipoint applications over a Multi Protocol Label Switching (MPLS) infrastructure.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on November 13, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Contributing Authors</a>
</li>
<li>2.   <a href="#rfc.section.2">Definitions</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Acronyms</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Introduction</a>
</li>
<li>4.   <a href="#rfc.section.4">Requirements overview</a>
</li>
<li>5.   <a href="#rfc.section.5">Application scenario</a>
</li>
<li>6.   <a href="#rfc.section.6">Detailed Requirements</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">P2MP LSPs</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">P2MP LSP FEC</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">P2MP LDP routing</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Setting up, tearing down and modifying P2MP LSPs</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">Label Advertisement</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">Data Duplication</a>
</li>
<li>6.7.   <a href="#rfc.section.6.7">Detecting and Avoiding Loops</a>
</li>
<li>6.8.   <a href="#rfc.section.6.8">P2MP LSP Re-routing</a>
</li>
<li>6.8.1.   <a href="#rfc.section.6.8.1">Rerouting upon Network Failure</a>
</li>
<li>6.8.2.   <a href="#rfc.section.6.8.2">Rerouting on a Better Path</a>
</li>
<li>6.8.3.   <a href="#rfc.section.6.8.3">Rerouting upon Planned Maintenance</a>
</li>
<li>6.9.   <a href="#rfc.section.6.9">Support for multi-access networks</a>
</li>
<li>6.10.   <a href="#rfc.section.6.10">Support for encapsulation in P2P and P2MP TE tunnels</a>
</li>
<li>6.11.   <a href="#rfc.section.6.11">Label spaces</a>
</li>
<li>6.12.   <a href="#rfc.section.6.12">IPv4/IPv6 support</a>
</li>
<li>6.13.   <a href="#rfc.section.6.13">Multi-Area/AS LSPs</a>
</li>
<li>6.14.   <a href="#rfc.section.6.14">OAM</a>
</li>
<li>6.15.   <a href="#rfc.section.6.15">Graceful Restart and Fault Recovery</a>
</li>
<li>6.16.   <a href="#rfc.section.6.16">Robustness</a>
</li>
<li>6.17.   <a href="#rfc.section.6.17">Scalability</a>
</li>
<li>6.17.1.   <a href="#rfc.section.6.17.1">Orders of magnitude expected in operational networks</a>
</li>
<li>6.18.   <a href="#rfc.section.6.18">Backward Compatibility</a>
</li>
<li>7.   <a href="#rfc.section.7">Shared Trees</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Requirements for MP2MP LSPs</a>
</li>
<li>8.   <a href="#rfc.section.8">Evaluation criteria</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Performance</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Complexity and Risks</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgments</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Contributing Authors</h1>
<p id="rfc.section.1.p.1">The following people contributed to the text and content of this document:</p>

<ul>
<li>Shane Amante, Level 3 Communications, LLC</li>
<li>Luyuan Fang, Cisco Systems</li>
<li>Yuji Kamite, NTT Communications Corporation</li>
<li>Jean-Louis Le Roux, France Telecom - Orange</li>
<li>Thomas Morin, France Telecom - Orange</li>
<li>Vincent Parfait, France Telecom - Orange, Orange Business Services</li>
<li>Lei Wang, Telenor</li>
</ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Definitions</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Acronyms</h1>
<p></p>

<dl>
<dt>P2P:</dt>
<dd style="margin-left: 8">Point-To-Point</dd>
<dt>MP2P:</dt>
<dd style="margin-left: 8">Multipoint-to-Point</dd>
<dt>P2MP:</dt>
<dd style="margin-left: 8">Point-To-MultiPoint</dd>
<dt>MP2MP:</dt>
<dd style="margin-left: 8">MultiPoint-To-Multipoint</dd>
<dt>LSP:</dt>
<dd style="margin-left: 8">Label Switched Path</dd>
<dt>LSR:</dt>
<dd style="margin-left: 8">Label Switching Router</dd>
<dt>PE:</dt>
<dd style="margin-left: 8">Provider Edge router</dd>
<dt>P:</dt>
<dd style="margin-left: 8">Provider router</dd>
<dt>IGP:</dt>
<dd style="margin-left: 8">Interior Gateway Protocol</dd>
<dt>AS:</dt>
<dd style="margin-left: 8">Autonomous System</dd>
</dl>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Terminology</h1>
<p id="rfc.section.2.2.p.1">The reader is assumed to be familiar with the terminology in <a href="#RFC3031">[RFC3031]</a>, <a href="#RFC5036">[RFC5036]</a>, and <a href="#RFC4026">[RFC4026]</a>.</p>
<p></p>

<dl>
<dt>Ingress LSR:</dt>
<dd style="margin-left: 8">
<br>Router acting as a sender of an LSP</dd>
<dt>Egress LSR:</dt>
<dd style="margin-left: 8">
<br>Router acting as a receiver of an LSP</dd>
<dt>P2P LSP:</dt>
<dd style="margin-left: 8">
<br>A LSP that has one unique Ingress LSR and one unique Egress LSR</dd>
<dt>MP2P LSP:</dt>
<dd style="margin-left: 8">
<br>A LSP that has one or more Ingress LSRs and one unique Egress LSR</dd>
<dt>P2MP LSP:</dt>
<dd style="margin-left: 8">
<br>A LSP that has one unique Ingress LSR and one or more Egress LSRs</dd>
<dt>MP2MP LSP:</dt>
<dd style="margin-left: 8">
<br>A LSP that as one or more Leaf LSRs acting indifferently as Ingress or Egress LSR</dd>
<dt>Leaf LSR:</dt>
<dd style="margin-left: 8">
<br>Egress LSR of a P2MP LSP or Ingress/Egress LSR of a MP2MP LSP</dd>
<dt>Transit LSR:</dt>
<dd style="margin-left: 8">
<br>A LSR of a P2MP or MP2MP LSP that has one or more Downstream LSRs</dd>
<dt>Branch LSR:</dt>
<dd style="margin-left: 8">
<br>A LSR of a P2MP or MP2MP LSP that has more than one downstream LSR</dd>
<dt>Bud LSR:</dt>
<dd style="margin-left: 8">
<br>A LSR of a P2MP or MP2MP LSP that is an egress but also has one or more directly connected downstream LSR(s)</dd>
<dt>P2MP tree:</dt>
<dd style="margin-left: 8">
<br>The ordered set of LSRs and links that comprise the path of a P2MP LSP from its ingress LSR to all of its egress LSRs.</dd>
</dl>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Introduction</h1>
<p id="rfc.section.3.p.1">Note that this document captures requirements that served as input to the design of <a href="#I-D.ietf-mpls-ldp-p2mp">[I-D.ietf-mpls-ldp-p2mp]</a> and is published with Historic status with the perspective of documenting the work done.</p>
<p id="rfc.section.3.p.2">LDP <a href="#RFC5036">[RFC5036]</a> has been deployed for setting up point-to-point (P2P) and multipoint-to-point (MP2P) LSPs, in order to offer point-to-point services in MPLS backbones.</p>
<p id="rfc.section.3.p.3">There are emerging requirements for supporting delivery of point-to-multipoint applications in MPLS backbones, such as those defined in <a href="#RFC4834">[RFC4834]</a> and <a href="#RFC5501">[RFC5501]</a>.</p>
<p id="rfc.section.3.p.4">For various reasons, including consistency with P2P applications, and taking full advantages of MPLS network infrastructure, it would be highly desirable to use MPLS LSPs for the delivery of multicast traffic.  This could be implemented by setting up a group of P2P or MP2P LSPs, but such an approach may be inefficient since it would result in data replication at the ingress LSR and duplicate data traffic within the network. Hence new mechanisms are required that would allow traffic from an Ingress LSR to be efficiently delivered to a number of Egress LSRs in an MPLS backbone on a point-to-multipoint LSP (P2MP LSP), avoiding duplicate copies of a packet on a given link and with MPLS traffic replication at some Branch LSRs.</p>
<p id="rfc.section.3.p.5">RSVP-TE extensions for setting up Point-To-Multipoint Traffic Engineered LSPs (P2MP TE LSPs), have been defined in <a href="#RFC4875">[RFC4875]</a>. They meet requirements expressed in <a href="#RFC4461">[RFC4461]</a>. This approach is useful, in network environments where P2MP Traffic Engineering capabilities are needed (Optimization, QoS, Fast recovery).</p>
<p id="rfc.section.3.p.6">However for operators who want to support point-to-multipoint traffic delivery on an MPLS backbone, without Traffic Engineering needs, and who have already deployed LDP for P2P traffic, an interesting and useful approach would be to rely on LDP extensions in order to setup point-to-multipoint (P2MP) LSPs. This would bring consistency with P2P MPLS applications and would ease the delivery of point-to-multipoint services in an MPLS backbone.</p>
<p id="rfc.section.3.p.7">This document focuses on the LDP approach for setting up P2MP LSPs.  It lists a detailed set of requirements for P2MP extensions to LDP, so as to deliver P2MP traffic over a LDP-enabled MPLS infrastructure. The original intent was that these requirements should be used as guidelines when specifying LDP extensions.</p>
<p id="rfc.section.3.p.8">Note that generic requirements for P2MP extensions to MPLS are out of the scope of this document. Rather this document describes solution specific requirements related to LDP extensions in order to set up P2MP LSPs.</p>
<p id="rfc.section.3.p.9">Note also that other mechanisms could be used for setting up P2MP LSPs, such as for instance PIM extensions, but these are out of the scope of this document. The objective is not to compare these mechanisms but rather to focus on the requirements for an LDP extension approach.</p>
<p id="rfc.section.3.p.10">The document is structured as follows:</p>

<ul>
<li>
<a href="#reqoverview">Section 4</a> is an overview of the requirements;</li>
<li>
<a href="#appscenario">Section 5</a> illustrates an application scenario;</li>
<li>
<a href="#detailedreqs">Section 6</a> addresses detailed requirements for P2MP LSPs;</li>
<li>
<a href="#sharedtrees">Section 7</a> finally discusses requirements for shared trees and MultiPoint-to-MultiPoint (MP2MP) LSPs.</li>
</ul>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#reqoverview" id="reqoverview">Requirements overview</a>
</h1>
<p id="rfc.section.4.p.1">The P2MP LDP mechanism MUST support setting up P2MP LSPs, i.e. LSPs with one Ingress LSR and one or more Egress LSRs, with traffic replication at some Branch LSRs.</p>
<p id="rfc.section.4.p.2">The P2MP LDP mechanism MUST allow the addition or removal of leaves associated with a P2MP LSP.</p>
<p id="rfc.section.4.p.3">The P2MP LDP mechanism MUST co-exist with current LDP mechanisms and inherit its capability sets from <a href="#RFC5036">[RFC5036]</a>. It is of paramount importance that the P2MP LDP mechanism MUST NOT impede the operation of existing P2P/MP2P LDP LSPs. Also the P2MP LDP mechanism MUST co-exist with P2P and P2MP RSVP-TE mechanisms <a href="#RFC3209">[RFC3209]</a>, <a href="#RFC4875">[RFC4875]</a>. It is of paramount importance that the P2MP LDP mechanism MUST NOT impede the operation of existing P2P and P2MP RSVP-TE LSPs.</p>
<p id="rfc.section.4.p.4">The P2MP LDP mechanism MAY also allow setting up multipoint-to-multipoint (MP2MP) LSPs connecting a group of Leaf LSRs acting indifferently as Ingress LSR or Egress LSR. This may allow a reduction in the amount of LDP state that needs to be maintained by a LSR.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#appscenario" id="appscenario">Application scenario</a>
</h1>
<p><a href="#fig1">Figure 1</a> below illustrates an LDP enabled MPLS provider network, used to carry both unicast and multicast traffic of VPN customers following for instance the architecture defined in <a href="#I-D.ietf-l3vpn-2547bis-mcast">[I-D.ietf-l3vpn-2547bis-mcast]</a> for BGP/MPLS VPNs, or the one defined in <a href="#I-D.ietf-l2vpn-vpls-mcast">[I-D.ietf-l2vpn-vpls-mcast]</a>.</p>
<p id="rfc.section.5.p.2">In this example, a set of MP2P LDP LSPs are setup between Provider Edge (PE) routers to carry unicast VPN traffic within the MPLS backbone.</p>
<p id="rfc.section.5.p.3">And in this example a set of P2MP LDP LSPs are setup between PE routers acting as Ingress LSRs and PE routers acting as Egress LSRs, so as to support multicast VPN traffic delivery within the MPLS backbone.</p>
<p id="rfc.section.5.p.4">For instance, a P2MP LDP LSP is setup between Ingress LSR PE1 and Egress LSRs PE2, PE3, and PE4. It is used to transport multicast traffic from PE1 to PE2, PE3 and PE4. P1 is a Branch LSR, it replicates MPLS traffic sent by PE1 to P2, P3 and PE2. P2 and P3 are non-branch transit LSRs, they forward MPLS traffic sent by P1 to PE3 and PE4 respectively.</p>
<div id="#rfc.figure.1"></div>
<div id="#fig1"></div>
<pre>
          PE1
          *|                *** P2MP LDP LSP
          *|*****
          P1-----PE2
         */ \*
        */   \*
   *****/     \******
PE3----P2      P3----PE4
       |       |
       |       |
       |       |
      PE5     PE6
</pre>
<p id="rfc.section.5.p.5">If later there are new receivers attached to PE5 and PE6, then PE5 and PE6 join the P2MP LDP LSP. P2 and P3 become Branch LSRs and replicate traffic received from P1, to PE3 and PE5, and to PE4 and PE6 respectively (see <a href="#fig2">Figure 2</a> below).</p>
<div id="#rfc.figure.2"></div>
<div id="#fig2"></div>
<pre>
          PE1
          *|               *** P2MP LDP LSP
          *|*****
          P1-----PE2
         */ \*
        */   \*
   *****/     \******
PE3----P2      P3----PE4
      *|       |*
      *|       |*
      *|       |*
      PE5     PE6
</pre>
<p id="rfc.section.5.p.6">The above example is provided for the sake of illustration. Note that P2MP LSPs ingress and egress LSRs may not necessarily be PE routers.  Also branch LSRs may not necessarily be P routers.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#detailedreqs" id="detailedreqs">Detailed Requirements</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> P2MP LSPs</h1>
<p id="rfc.section.6.1.p.1">The P2MP LDP mechanism MUST support setting up P2MP LSPs. Data plane aspects related to P2MP LSPs are those already defined in <a href="#RFC4461">[RFC4461]</a>. That is, a P2MP LSP has one Ingress LSR and one or more Egress LSRs. Traffic sent by the Ingress LSR is received by all Egress LSRs. The specific aspects related to P2MP LSPs is the action required at a Branch LSR, where data replication occurs.  Incoming labelled data is appropriately replicated to several outgoing interfaces which may use different labels.</p>
<p id="rfc.section.6.1.p.2">An LSR SHOULD NOT send more than one copy of a packet on any given link of a P2MP LSP. Exceptions to this are mentioned in <a href="#multiaccess">Section 6.9</a> and <a href="#backward">Section 6.18</a>.</p>
<p id="rfc.section.6.1.p.3">A P2MP LSP MUST be identified by a constant and unique identifier within the whole LDP domain, whatever the number of leaves, which may vary dynamically. This identifier will be used so as to add/remove leaves to/from the P2MP tree.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> P2MP LSP FEC</h1>
<p id="rfc.section.6.2.p.1">As with P2P MPLS technology <a href="#RFC5036">[RFC5036]</a>, traffic MUST be classified into a FEC in this P2MP extension. All packets which belong to a particular P2MP FEC and which travel from a particular node MUST use the same P2MP LSP.</p>
<p id="rfc.section.6.2.p.2">If existing FECs cannot be used for this purpose, a new LDP FEC that is suitable for P2MP forwarding MUST be specified.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> P2MP LDP routing</h1>
<p id="rfc.section.6.3.p.1">As with P2P and MP2P LDP LSPs, the P2MP LDP mechanism MUST support hop-by-hop LSP routing. P2MP LDP-based routing SHOULD rely upon the information maintained in LSR Routing Information Bases (RIB).</p>
<p id="rfc.section.6.3.p.2">It is RECOMMENDED that the P2MP LSP routing rely upon the unicast route to the Ingress LSR to build a reverse path tree.</p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Setting up, tearing down and modifying P2MP LSPs</h1>
<p id="rfc.section.6.4.p.1">The P2MP LDP mechanism MUST support the establishment, maintenance and teardown of P2MP LSPs in a scalable manner. This MUST include both the existence of a large amount of P2MP LSPs within a single network and a large amount of leaf LSRs for a single P2MP LSP (see also <a href="#scalability">Section 6.17</a> for scalability considerations and figures).</p>
<p id="rfc.section.6.4.p.2">In order to scale well with a large number of leaves it is RECOMMENDED to follow a leaf-initiated P2MP LSP setup approach. For that purpose, leaves will have to be aware of the P2MP LSP identifier.  The ways a Leaf LSR discovers P2MP LSPs identifiers rely on the applications that will use P2MP LSPs, and are out of the scope of this document.</p>
<p id="rfc.section.6.4.p.3">The P2MP LDP mechanism MUST allow the dynamic addition and removal of leaves to and from a P2MP LSP, without any restriction (provided there is network connectivity). It is RECOMMENDED that these operations be leaf-initiated. These operations MUST NOT impact the data transfer (packet loss, duplication, delay) towards other leaves.  It is RECOMMENDED that these operations do not cause any additional processing except on the path from the added/removed Leaf LSR to the Branch LSR.</p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> Label Advertisement</h1>
<p id="rfc.section.6.5.p.1">The P2MP LDP mechanism MUST support downstream unsolicited label advertisement mode. This is well suited to a leaf-initiated approach and is consistent with P2P/MP2P LDP operations.</p>
<p id="rfc.section.6.5.p.2">Other advertisement modes MAY also be supported.</p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> Data Duplication</h1>
<p id="rfc.section.6.6.p.1">Data duplication refers to the receipt of multiple copies of a packet by any leaf. Although this may be a marginal situation, it may also be detrimental for certain applications. Hence, data duplication SHOULD as much as possible be avoided, and limited to (hopefully rare) transitory conditions.</p>
<p id="rfc.section.6.6.p.2">Note, in particular, that data duplication might occur if P2MP LSP rerouting is being performed (See also <a href="#rerouting">Section 6.8</a>).</p>
<h1 id="rfc.section.6.7">
<a href="#rfc.section.6.7">6.7.</a> Detecting and Avoiding Loops</h1>
<p id="rfc.section.6.7.p.1">The P2MP LDP extension MUST have a mechanism to detect routing loops. This MAY rely on extensions to the LDP Loop detection mechanism defined in <a href="#RFC5036">[RFC5036]</a>. A loop detection mechanism MAY require recording the set of LSRs traversed on the P2MP Tree. The P2MP loop avoidance mechanism MUST NOT impact the scalability of the P2MP LDP solution.</p>
<p id="rfc.section.6.7.p.2">The P2MP LDP mechanism SHOULD have a mechanism to avoid routing loops in the data plane even during transient events.</p>
<p id="rfc.section.6.7.p.3">Furthermore, the P2MP LDP mechanism MUST avoid routing loops in the data plane, that may trigger unexpected non-localized exponential growth of traffic.</p>
<h1 id="rfc.section.6.8">
<a href="#rfc.section.6.8">6.8.</a> <a href="#rerouting" id="rerouting">P2MP LSP Re-routing</a>
</h1>
<p id="rfc.section.6.8.p.1">The P2MP LDP mechanism MUST support the rerouting of a P2MP LSP in the following cases:</p>

<ul>
<li>Network failure (link or node);</li>
<li>A better path exists (e.g. new link, metric change);</li>
<li>Planned maintenance.</li>
</ul>
<p id="rfc.section.6.8.p.2">Given that P2MP LDP routing should rely on the RIB, the achievement of the following requirements relies on the underlying routing protocols (IGP, etc.).</p>
<h1 id="rfc.section.6.8.1">
<a href="#rfc.section.6.8.1">6.8.1.</a> Rerouting upon Network Failure</h1>
<p id="rfc.section.6.8.1.p.1">The P2MP LDP mechanism MUST allow for rerouting of a P2MP LSP in case of link or node failure(s), by relying upon update of the routes in the RIB. The rerouting time SHOULD be minimized as much as possible so as to reduce traffic disruption.</p>
<p id="rfc.section.6.8.1.p.2">A mechanism MUST be defined to prevent constant P2MP LSP teardown and rebuild which may be caused by the instability of a specific link/node in the network. This can rely on IGP dampening but may be completed by specific dampening at the LDP level.</p>
<h1 id="rfc.section.6.8.2">
<a href="#rfc.section.6.8.2">6.8.2.</a> Rerouting on a Better Path</h1>
<p id="rfc.section.6.8.2.p.1">The P2MP LDP mechanism MUST allow for rerouting of a P2MP LSP in case a better path is created in the network, for instance as a result of a metric change, a link repair, or the addition of links or nodes. This will rely on update of the routes in the RIB.</p>
<h1 id="rfc.section.6.8.3">
<a href="#rfc.section.6.8.3">6.8.3.</a> Rerouting upon Planned Maintenance</h1>
<p id="rfc.section.6.8.3.p.1">The P2MP LDP mechanism MUST support planned maintenance operations. It MUST be possible to reroute a P2MP LSP before a link/node is deactivated for maintenance purposes. Traffic disruption and data duplication SHOULD be minimized as much as possible during such planned maintenance. P2MP LSP rerouting upon planned maintenance MAY rely on a make before break procedure.</p>
<h1 id="rfc.section.6.9">
<a href="#rfc.section.6.9">6.9.</a> <a href="#multiaccess" id="multiaccess">Support for multi-access networks</a>
</h1>
<p id="rfc.section.6.9.p.1">The P2MP LDP mechanism SHOULD provide a way for a Branch LSR to send a single copy of the data onto an interface to a multi-access network (e.g. an Ethernet LAN) and reach multiple adjacent downstream nodes. This requires that the same label be negotiated with all downstream LSRs for the LSP.</p>
<p id="rfc.section.6.9.p.2">When there are several candidate upstream LSRs on an interface to a multi-access LAN, the P2MP LDP mechanism SHOULD provide a way for all downstream LSRs of a given P2MP LSP to select the same upstream LSR, so as to avoid traffic replication. In addition, the P2MP LDP mechanism SHOULD allow for an efficient balancing of a set of P2MP LSPs among a set of candidate upstream LSRs on a LAN interface.</p>
<h1 id="rfc.section.6.10">
<a href="#rfc.section.6.10">6.10.</a> Support for encapsulation in P2P and P2MP TE tunnels</h1>
<p id="rfc.section.6.10.p.1">The P2MP LDP mechanism MUST support nesting P2MP LSPs into P2P and P2MP TE tunnels.</p>
<p id="rfc.section.6.10.p.2">The P2MP LDP mechanism MUST provide a way for a Branch LSR of a P2MP LSP, which is also a Head End LSR of a P2MP TE tunnel, to send a single copy of the data onto the tunnel and reach all downstream LSRs on the P2MP LSP, which are also Egress LSRs of the tunnel. As with LAN interfaces, this requires that the same label be negotiated with all downstream LSRs of the P2MP LDP LSP.</p>
<h1 id="rfc.section.6.11">
<a href="#rfc.section.6.11">6.11.</a> Label spaces</h1>
<p id="rfc.section.6.11.p.1">Labels for P2MP LSPs and P2P/MP2P LSPs MAY be assigned from shared or dedicated label spaces.</p>
<p id="rfc.section.6.11.p.2">Note that dedicated label spaces will require the establishment of separate P2P and P2MP LDP sessions.</p>
<h1 id="rfc.section.6.12">
<a href="#rfc.section.6.12">6.12.</a> IPv4/IPv6 support</h1>
<p id="rfc.section.6.12.p.1">The P2MP LDP mechanism MUST support the establishment of LDP sessions over both IPv4 and IPv6 control planes.</p>
<h1 id="rfc.section.6.13">
<a href="#rfc.section.6.13">6.13.</a> Multi-Area/AS LSPs</h1>
<p id="rfc.section.6.13.p.1">The P2MP LDP mechanism MUST support the establishment of multi-area P2MP LSPs, i.e. LSPs whose leaves do not all reside in the same IGP area as the Ingress LSR. This SHOULD be possible without requiring the advertisement of Ingress LSRs' addresses across IGP areas.</p>
<p id="rfc.section.6.13.p.2">The P2MP LDP mechanism MUST also support the establishment of inter-AS P2MP LSPs, i.e. LSPs whose leaves do not all reside in the same AS as the Ingress LSR. This SHOULD be possible without requiring the advertisement of Ingress LSRs' addresses across ASes.</p>
<h1 id="rfc.section.6.14">
<a href="#rfc.section.6.14">6.14.</a> OAM</h1>
<p id="rfc.section.6.14.p.1">LDP management tools (<a href="#RFC3815">[RFC3815]</a>, etc.) will have to be enhanced to support P2MP LDP extensions. This may yield a new MIB module, which may possibly be inherited from the LDP MIB.</p>
<p id="rfc.section.6.14.p.2">Built-in diagnostic tools MUST be defined to check the connectivity, trace the path and ensure fast detection of data plane failures on P2MP LDP LSPs.</p>
<p id="rfc.section.6.14.p.3">Further and precise requirements and mechanisms for P2MP MPLS OAM purpose are out of the scope of this document and are addressed in <a href="#RFC4687">[RFC4687]</a>.</p>
<h1 id="rfc.section.6.15">
<a href="#rfc.section.6.15">6.15.</a> Graceful Restart and Fault Recovery</h1>
<p id="rfc.section.6.15.p.1">LDP Graceful Restart mechanisms <a href="#RFC3478">[RFC3478]</a> and Fault Recovery mechanisms <a href="#RFC3479">[RFC3479]</a> SHOULD be enhanced to support P2MP LDP LSPs.</p>
<h1 id="rfc.section.6.16">
<a href="#rfc.section.6.16">6.16.</a> Robustness</h1>
<p id="rfc.section.6.16.p.1">A solution MUST be designed to re-establish connectivity for P2MP and MP2MP LSPs in the event of failures, provided there exists network connectivity between ingress and egress nodes (i.e. designed without introducing single points of failure).</p>
<h1 id="rfc.section.6.17">
<a href="#rfc.section.6.17">6.17.</a> <a href="#scalability" id="scalability">Scalability</a>
</h1>
<p id="rfc.section.6.17.p.1">Scalability is a key requirement for the P2MP LDP mechanism. It MUST be designed to scale well with an increase in the number of any of the following: </p>

<ul>
<li>number of Leaf LSRs per P2MP LSP;</li>
<li>number of Downstream LSRs per Branch LSR;</li>
<li>number of P2MP LSPs per LSR.</li>
</ul>
<p id="rfc.section.6.17.p.2">In order to scale well with an increase in the number of leaves, it is RECOMMENDED that the size of a P2MP LSP state on a LSR, for one particular LSP, depend only on the number of adjacent LSRs on the LSP.</p>
<h1 id="rfc.section.6.17.1">
<a href="#rfc.section.6.17.1">6.17.1.</a> Orders of magnitude expected in operational networks</h1>
<p id="rfc.section.6.17.1.p.1">Typical orders of magnitude that we expect should be supported are: </p>

<ul>
<li>tens of thousands of P2MP trees spread out across core network routers;</li>
<li>hundreds, or a few thousands, of leaves per tree;</li>
</ul>
<p id="rfc.section.6.17.1.p.2">See also section 4.2 of <a href="#RFC4834">[RFC4834]</a>.</p>
<h1 id="rfc.section.6.18">
<a href="#rfc.section.6.18">6.18.</a> <a href="#backward" id="backward">Backward Compatibility</a>
</h1>
<p id="rfc.section.6.18.p.1">In order to allow for a smooth migration, the P2MP LDP mechanism SHOULD offer as much backward compatibility as possible. In particular, the solution SHOULD allow the setup of a P2MP LSP along non-Branch Transit LSRs that do not support P2MP LDP extensions.</p>
<p id="rfc.section.6.18.p.2">Also, the P2MP LDP solution MUST co-exist with current LDP mechanisms and inherit its capability sets from <a href="#RFC5036">[RFC5036]</a>. The P2MP LDP solution MUST NOT impede the operation of P2P/MP2P LSPs. A P2MP LDP solution MUST be designed in such a way that it allows P2P/MP2P and P2MP LSPs to be signalled on the same interface.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#sharedtrees" id="sharedtrees">Shared Trees</a>
</h1>
<p id="rfc.section.7.p.1">For traffic delivery between a group of N LSRs that act as egress and/or egress nodes on different P2MP flows, it may be useful to setup a shared tree connecting all these LSRs, instead of having N P2MP LSPs.  This would reduce the amount of control and forwarding state that has to be maintained on a given LSR.</p>
<p id="rfc.section.7.p.2">There are actually two main options for supporting such shared trees:</p>

<ul>
<li>This could rely on the applications protocols that use LDP LSPs.  A shared tree could consist of the combination of a MP2P LDP LSP from Leafs LSRs to a given root node, with a P2MP LSP from this root to Leaf LSRs. For instance with Multicast L3 VPN applications, it would be possible to build a shared tree by combining (see <a href="#I-D.ietf-l3vpn-2547bis-mcast">[I-D.ietf-l3vpn-2547bis-mcast]</a>):<ul>
<li>a MP2P unicast LDP LSP, from each PE of the group to a particular root PE acting as tree root,</li>
<li>with a P2MP LDP LSP from this root PE to each PE of the group.</li>
</ul>
</li>
<li>Or this could rely on a specific LDP mechanism allowing to setup multipoint-to-multipoint MPLS LSPs (MP2MP LSPs).</li>
</ul>

<p>The former approach (Combination of MP2P and P2MP LSPs at the application level) is out of the scope of this document while the latter (MP2MP LSPs) belong to the scope of this document. Requirements for the set up of MP2MP LSPs are listed below.</p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Requirements for MP2MP LSPs</h1>
<p id="rfc.section.7.1.p.1">A Multipoint-to-multipoint (MP2MP) LSP is an LSP connecting a group of Leaf LSRs acting as Egress and/or Ingress LSRs. Traffic sent by any Leaf LSR is received by all other Leaf LSRs of the group.</p>
<p id="rfc.section.7.1.p.2">Procedures for setting up MP2MP LSPs with LDP SHOULD be specified.  An implementation that support P2MP LDP LSPs MAY also support MP2MP LDP LSP.</p>
<p id="rfc.section.7.1.p.3">The MP2MP LDP procedures MUST NOT impede the operations of P2MP LSP.</p>
<p id="rfc.section.7.1.p.4">Requirements for P2MP LSPs, set forth in <a href="#detailedreqs">Section 6</a>, apply equally to MP2MP LSPs. Particular attention should be given on the below requirements:</p>

<ul>
<li>The solution MUST support recovery upon link and transit node failure and be designed to re-establish connectivity for MP2MP LSPs in the event of failures, provided there exists network connectivity between ingress and egress nodes (i.e. designed without introducing single points of failure);</li>
<li>The size of MP2MP state on a LSR, for one particular MP2MP LSP, SHOULD only depend on the number of adjacent LSRs on the LSP;</li>
<li>Furthermore, the MP2MP LDP mechanism MUST avoid routing loops that may trigger exponential growth of traffic. Note that this requirement is more challenging with MP2MP LSPs as a LSR may need to receive traffic for a given LSP on multiple interfaces.</li>
</ul>
<p id="rfc.section.7.1.p.5">There are additional requirements specific to MP2MP LSPs:</p>

<ul>
<li>It is RECOMMENDED that a MP2MP MPLS LSP is built based on the unicast route to a specific LSR called root LSR;</li>
<li>It is RECOMMENDED to define several root LSRs (e.g. a primary and a backup) to ensure redundancy upon root LSR failure;</li>
<li>The receiver SHOULD NOT receive back a packet it has sent on the MP2MP LSP;</li>
<li>The solution SHOULD avoid that all traffic between any pair of leaves is traversing a root LSR (similarly to PIM-Bidir trees) and SHOULD provide the operator with means to minimize the delay between two leaves;</li>
<li>It MUST be possible to check connectivity of a MP2MP LSP in both directions.</li>
</ul>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#evalcriteria" id="evalcriteria">Evaluation criteria</a>
</h1>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> Performance</h1>
<p id="rfc.section.8.1.p.1">The solution will be evaluated with respect to the following criteria:</p>

<dl>
<dt>(1 )</dt>
<dd>Efficiency of network resource usage;</dd>
<dt>(2 )</dt>
<dd>Time to add or remove a Leaf LSR;</dd>
<dt>(3 )</dt>
<dd>Time to repair a P2MP LSP in case of link or node failure;</dd>
<dt>(4 )</dt>
<dd>Scalability (state size, number of messages, message size).</dd>
</dl>
<p id="rfc.section.8.1.p.2">Particularly the P2MP LDP mechanism SHOULD be designed with as key objective to minimize the additional amount of state and additional processing required in the network.</p>
<p id="rfc.section.8.1.p.3">Also, the P2MP LDP mechanism SHOULD be designed so that convergence times in case of link or node failure are minimized, in order to limit traffic disruption.</p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> Complexity and Risks</h1>
<p id="rfc.section.8.2.p.1">The proposed solution SHOULD NOT introduce complexity to the current LDP operations to such a degree that it would affect the stability and diminish the benefits of deploying such solution.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Security Considerations</h1>
<p id="rfc.section.9.p.1">It is expected that addressing the requirements defined in this document should not introduce any new security issue beyond those inherent to LDP, and that a P2MP LDP solution will rely on the security mechanisms defined in <a href="#RFC5036">[RFC5036]</a> (e.g. TCP MD5 Signature).</p>
<p id="rfc.section.9.p.2">An evaluation of the security features for MPLS networks may be found in <a href="#RFC5920">[RFC5920]</a>, and where issues or further work is identified by that document, new security features or procedures for the MPLS protocols will need to be developed.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> IANA Considerations</h1>
<p id="rfc.section.10.p.1">This informational document makes no requests to IANA for action.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> Acknowledgments</h1>
<p id="rfc.section.11.p.1">We would like to thank Christian Jacquenet, Hitoshi Fukuda, Ina Minei, Dean Cheng, and Benjamin Niven-Jenkins, for their highly useful comments and suggestions. We would also like to thank Adrian Farrel for reviewing this document before publication.</p>
<p id="rfc.section.11.p.2">We would also like to thank authors of <a href="#RFC4461">[RFC4461]</a> from which some of the text in this document has been inspired.</p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3031">[RFC3031]</b></td>
<td class="top">
<a>Rosen, E.</a>, <a>Viswanathan, A.</a> and <a>R. Callon</a>, "<a href="http://tools.ietf.org/html/rfc3031">Multiprotocol Label Switching Architecture</a>", RFC 3031, January 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5036">[RFC5036]</b></td>
<td class="top">
<a>Andersson, L.</a>, <a>Minei, I.</a> and <a>B. Thomas</a>, "<a href="http://tools.ietf.org/html/rfc5036">LDP Specification</a>", RFC 5036, October 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3815">[RFC3815]</b></td>
<td class="top">
<a>Cucchiara, J.</a>, <a>Sjostrand, H.</a> and <a>J. Luciani</a>, "<a href="http://tools.ietf.org/html/rfc3815">Definitions of Managed Objects for the Multiprotocol Label Switching (MPLS), Label Distribution Protocol (LDP)</a>", RFC 3815, June 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3478">[RFC3478]</b></td>
<td class="top">
<a>Leelanivas, M.</a>, <a>Rekhter, Y.</a> and <a>R. Aggarwal</a>, "<a href="http://tools.ietf.org/html/rfc3478">Graceful Restart Mechanism for Label Distribution Protocol</a>", RFC 3478, February 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3479">[RFC3479]</b></td>
<td class="top">
<a>Farrel, A.</a>, "<a href="http://tools.ietf.org/html/rfc3479">Fault Tolerance for the Label Distribution Protocol (LDP)</a>", RFC 3479, February 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4461">[RFC4461]</b></td>
<td class="top">
<a>Yasukawa, S.</a>, "<a href="http://tools.ietf.org/html/rfc4461">Signaling Requirements for Point-to-Multipoint Traffic-Engineered MPLS Label Switched Paths (LSPs)</a>", RFC 4461, April 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC4834">[RFC4834]</b></td>
<td class="top">
<a href="mailto:thomas.morin@orange-ftgroup.com" title="France Telecom R&amp;D">Morin, T</a>, "<a href="http://tools.ietf.org/html/rfc4834">Requirements for Multicast in Layer 3 Provider-Provisioned Virtual Private Networks (PPVPNs)</a>", RFC 4834, April 2007.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-mpls-ldp-p2mp">[I-D.ietf-mpls-ldp-p2mp]</b></td>
<td class="top">
<a>Minei, I</a>, <a>Wijnands, I</a>, <a>Kompella, K</a> and <a>B Thomas</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mpls-ldp-p2mp-13">Label Distribution Protocol Extensions for Point-to-Multipoint and Multipoint-to-Multipoint Label Switched Paths</a>", Internet-Draft draft-ietf-mpls-ldp-p2mp-13, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-l3vpn-2547bis-mcast">[I-D.ietf-l3vpn-2547bis-mcast]</b></td>
<td class="top">
<a>Aggarwal, R</a>, <a>Bandi, S</a>, <a>Cai, Y</a>, <a>Morin, T</a>, <a>Rekhter, Y</a>, <a>Rosen, E</a>, <a>Wijnands, I</a> and <a>S Yasukawa</a>, "<a href="http://tools.ietf.org/html/draft-ietf-l3vpn-2547bis-mcast-10">Multicast in MPLS/BGP IP VPNs</a>", Internet-Draft draft-ietf-l3vpn-2547bis-mcast-10, January 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-l2vpn-vpls-mcast">[I-D.ietf-l2vpn-vpls-mcast]</b></td>
<td class="top">
<a>Aggarwal, R</a>, <a>Kamite, Y</a>, <a>Fang, L</a> and <a>Y Rekhter</a>, "<a href="http://tools.ietf.org/html/draft-ietf-l2vpn-vpls-mcast-08">Multicast in VPLS</a>", Internet-Draft draft-ietf-l2vpn-vpls-mcast-08, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4687">[RFC4687]</b></td>
<td class="top">
<a>Yasukawa, S.</a>, <a>Farrel, A.</a>, <a>King, D.</a> and <a>T. Nadeau</a>, "<a href="http://tools.ietf.org/html/rfc4687">Operations and Management (OAM) Requirements for Point-to-Multipoint MPLS Networks</a>", RFC 4687, September 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4875">[RFC4875]</b></td>
<td class="top">
<a>Aggarwal, R.</a>, <a>Papadimitriou, D.</a> and <a>S. Yasukawa</a>, "<a href="http://tools.ietf.org/html/rfc4875">Extensions to Resource Reservation Protocol - Traffic Engineering (RSVP-TE) for Point-to-Multipoint TE Label Switched Paths (LSPs)</a>", RFC 4875, May 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4026">[RFC4026]</b></td>
<td class="top">
<a>Andersson, L.</a> and <a>T. Madsen</a>, "<a href="http://tools.ietf.org/html/rfc4026">Provider Provisioned Virtual Private Network (VPN) Terminology</a>", RFC 4026, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3209">[RFC3209]</b></td>
<td class="top">
<a>Awduche, D.</a>, <a>Berger, L.</a>, <a>Gan, D.</a>, <a>Li, T.</a>, <a>Srinivasan, V.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc3209">RSVP-TE: Extensions to RSVP for LSP Tunnels</a>", RFC 3209, December 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5920">[RFC5920]</b></td>
<td class="top">
<a>Fang, L.</a>, "<a href="http://tools.ietf.org/html/rfc5920">Security Framework for MPLS and GMPLS Networks</a>", RFC 5920, July 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5501">[RFC5501]</b></td>
<td class="top">
<a>Kamite, Y.</a>, <a>Wada, Y.</a>, <a>Serbest, Y.</a>, <a>Morin, T.</a> and <a>L. Fang</a>, "<a href="http://tools.ietf.org/html/rfc5501">Requirements for Multicast Support in Virtual Private LAN Services</a>", RFC 5501, March 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jean-Louis Le Roux</span> editor
	  <span class="n hidden">
		<span class="family-name">Le Roux</span>
	  </span>
	</span>
	<span class="org vcardline">France Telecom - Orange</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jeanlouis.leroux@orange-ftgroup.com">jeanlouis.leroux@orange-ftgroup.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas Morin</span> editor
	  <span class="n hidden">
		<span class="family-name">Morin</span>
	  </span>
	</span>
	<span class="org vcardline">France Telecom - Orange</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:thomas.morin@orange-ftgroup.com">thomas.morin@orange-ftgroup.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Vincent Parfait</span> notfirstpage
	  <span class="n hidden">
		<span class="family-name">Parfait</span>
	  </span>
	</span>
	<span class="org vcardline">France Telecom - Orange, Orange Business Services</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:vincent.parfait@orange-ftgroup.com">vincent.parfait@orange-ftgroup.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Luyuan Fang</span> notfirstpage
	  <span class="n hidden">
		<span class="family-name">Fang</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems, Inc.</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:lufang@cisco.com">lufang@cisco.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Lei Wang</span> notfirstpage
	  <span class="n hidden">
		<span class="family-name">Wang</span>
	  </span>
	</span>
	<span class="org vcardline">Telenor</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:lei.wang@telenor.com">lei.wang@telenor.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Yuji Kamite</span> notfirstpage
	  <span class="n hidden">
		<span class="family-name">Kamite</span>
	  </span>
	</span>
	<span class="org vcardline">NTT Communications Corporation</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:y.kamite@ntt.com">y.kamite@ntt.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Shane Amante</span> notfirstpage
	  <span class="n hidden">
		<span class="family-name">Amante</span>
	  </span>
	</span>
	<span class="org vcardline">Level 3 Communications, LLC</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:shane@level3.net">shane@level3.net</a></span>

  </address>
</div>

</body>
</html>