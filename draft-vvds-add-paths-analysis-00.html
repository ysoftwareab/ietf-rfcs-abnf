<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Analysis of paths selection modes for Add-Paths</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Analysis of paths selection modes for Add-Paths">
<meta name="keywords" content="I-D, Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header"> V. Van den Schrieck</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header"> P. Francois</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">Universite catholique de Louvain</td></tr>
<tr><td class="header">Expires: January 7, 2010</td><td class="header">July 06, 2009</td></tr>
</table></td></tr></table>
<h1><br />Analysis of paths selection modes for Add-Paths<br />draft-vvds-add-paths-analysis-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 7, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
    This document is aimed at discussing the various alternatives for
    the selection of the paths that are to be advertised with
    add-paths. The goal is to summarize the properties of those
    selection methods depending on which application they are used
    for.
  
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Potential uses of Add-Paths<br />
<a href="#anchor4">4.</a>&nbsp;
Evaluation criteria<br />
<a href="#AddPath_Modes">5.</a>&nbsp;
Paths selection modes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AddAllPaths">5.1.</a>&nbsp;
Advertise All Paths<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AddNPaths">5.2.</a>&nbsp;
Advertise N Paths<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AddBestsPaths">5.3.</a>&nbsp;
Advertise All AS-Wide Best Paths<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.4.</a>&nbsp;
Advertise Neighbor-AS Group Best Path<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">5.5.</a>&nbsp;
Best LocPref/Second Locpref<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.6.</a>&nbsp;
Advertise Paths at decisive step - 1<br />
<a href="#anchor8">6.</a>&nbsp;
Forwarding Modes<br />
<a href="#anchor9">7.</a>&nbsp;
IANA considerations<br />
<a href="#anchor10">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor11">9.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>For quite a long time, the IETF has been investigating solutions
  to let BGP speakers advertise multiple paths for a single prefix in
  iBGP instead of advertising their best path only <a class='info' href='#AddPath'>[AddPath]<span> (</span><span class='info'>D. Walton, A. Retana, and E. Chen, &ldquo;Advertisement of Multiple Paths in BGP,&rdquo; .</span><span>)</span></a>.
</p>
<p>The primary goal of add-paths is to increase the visibility of
  paths within an iBGP system, so as to improve various aspects of the
  behavior of (i)BGP. Add-paths increases the robustness in case of
  failure and reduces the number of BGP messages during such an
  event. Through careful selection of the paths to be
  advertised, Add-paths can also prevent routing oscillations.
</p>
<p><a class='info' href='#AddPath'>[AddPath]<span> (</span><span class='info'>D. Walton, A. Retana, and E. Chen, &ldquo;Advertisement of Multiple Paths in BGP,&rdquo; .</span><span>)</span></a> specifies how to encode the
  advertisement of multiple path towards the same NLRI over an iBGP
  session, and leaves complete freedom about the decision of which
  paths should be advertised.  In this document, we explore various
  alternatives for the selection of the multiple paths to be
  advertised, and discuss their related properties.
</p>
<p> The document is organized as follows.  First, we present the
  terminology used throughout this document.  Next, we discuss the
  potential applications of multiple paths advertisement, and list
  some criteria to evaluate the way multiple paths are selected.  We
  then describe different paths selection and, for each them, discuss
  its properties based on those criteria.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p> Backup / alternate path : A path toward a prefix that is
	not selected as best by a router, but that can be used as a
	replacement upon failure of the primary path. 
</p>
<p>Post-convergence path or optimal backup path : a path toward
	an affected prefix that will be selected as the best path by
	an affected router, when the link is shut down and the BGP
	convergence is completed.
</p>
<p> Loss of Connectivity (LoC) : the state when a router has
	no path towards an affected prefix.
</p>
<p> AS-Wide preferred paths : Paths that are considered as
	best when applying rules of the BGP decision process up to the
	IGP tie-break. 
</p>
<p>Path diversity : The property that a router has several
	paths with different nexthops for a given prefix. 
</p>
<p>Path visibility : The property that paths are not hidden by
	some routers, and are thus available to all routers in the
	AS. 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Potential uses of Add-Paths</h3>

<p><a class='info' href='#draft-mohapatra'>[draft&#8209;mohapatra]<span> (</span><span class='info'>Mohapatra, P., Fernando, R., Filsfils, C., and R. Raszuk, &ldquo;Fast Connectivity Restoration Using BGP Add-path,&rdquo; September&nbsp;2008.</span><span>)</span></a> presents the applications that would benefit from multiple paths advertisement in iBGP.  Those are  : 
</p>
<p>Fast Connectivity Restoration, thanks to the dissemination
	of backup paths. If a router has a backup path, it can directly selects that path as best upon failure of the primary path.  This minimizes packet loss on dataplane.  Sending multiple paths in iBGP allows routers to receive backup paths when path visibility is not sufficient with classical BGP.  This is especially useful when Route Reflection is used. 
</p>
<p>Load Balancing, across several BGP nexthops : Increased path diversity allows routers to install several paths in their Routing Table and to load balance traffic across those paths. 
</p>
<p>Churn reduction : As failures can be recovered locally
	when backup paths are available, BGP path exploration is reduced in iBGP,
	which results in less updates disseminated in eBGP. When the preferred backup path is the post-convergence path, churn is minimized.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Evaluation criteria</h3>

<p>Advertising multiple paths in iBGP has several impacts on
	the routing system.  In this section, we list some criteria
	for the evaluation of each proposal. 
</p>
<p>Control Plane Charge : As a router receives multiples paths
	for a prefix from an iBGP client, it has to store more paths
	in its Adj-Rib-Ins.
</p>
<p>Control Plane Stress : Coping with multiple iBGP paths has
	two implications on the computation that a router has to handle
	: First, it has to compute the paths to send to its peers,
	i.e. more than the best path.  Second, it also has to handle
	the potential churn related to the exchange of those multiple
	paths.
</p>
<p>MED/IGP oscillations : BGP sometimes suffers from routing
	oscillations when the physical topology differs from the
	logical topology, or when the MED attribute is used. This is
	due to the limited path visibility when a single path is
	advertised and Route Reflection is used. Increasing the path
	visibility by advertising multiple paths can help solving this
	issue. 
</p>
<p>Path optimality : When a single path is advertised, border
	routers do not always receive the path with the closest exit
	point, because the Route Reflectors send a single path chosen
	based on their own IGP tie-break. Increasing path visibility
	would also help routers to learn the path that is best suited
	for them w.r.t. the IGP tie-break. 
</p>
<p>Backup path optimality : Multiple paths advertisement gives
	routers the opportunity to have a backup path.  However, some
	backup paths are better than others.  Indeed, when a link
	failure occurs, if a router already knows its post-convergence
	path, the BGP reconvergence is straightforward and traffic is less
	impacted by the transient use of non-best forwarding paths.
</p>
<p>Convergence time : Advertising multiple paths in iBGP has an
	impact on the convergence time of the BGP system.  More paths
	need to be exchanged, but on the other hand, the routing
	information is propagated faster : With an increased path
	visibility, there is less path exploration during the
	convergence. Also, with the availability of backup paths,
	convergence time in case of failure is also reduced. 
</p>
<a name="AddPath_Modes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Paths selection modes</h3>

<a name="AddAllPaths"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Advertise All Paths</h3>

<p>A simple rule for advertising multiple paths in iBGP is to simply
  advertise to iBGP peers all received paths, provided they pass
  export filters. This solution is easy to implement, but the counter
  part is that all those paths need to be stored by all routers that
  receive them, which can be quite expensive. If a path to a prefix P
  is advertised to N border routers, with a FullMesh of iBGP sessions,
  all routers have N paths in their Adjribins.  If Route Reflection is
  used and each client is connected to 2 Route Reflectors, it may
  learn up to 2*N paths.
</p>
<p>This solution gives a perfect path visibility to all routers,
  thus limiting churn and losses of connectivity in case of
  failure. Indeed, this allows routers to select their optimal primary
  path, and to switch on their optimal backup path in case of
  failure.
</p>
<p>However, as more paths are exchanged, the number of BGP messages
  disseminated during the initial iBGP convergence can be high, and
  convergence may be slower. 
</p>
<p>Routing oscillations are prevented with this rule, because a
  router won't need to withdraw a previously advertised path when its
  best path changes.
</p>
<a name="AddNPaths"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Advertise N Paths</h3>

<p>Another cheaper solution is for a router to
  advertise a maximum of N paths to iBGP peers, N being chosen by the operators depending on 
  its needs.  Here, the
  computational cost is the selection of the N paths.  Indeed, there
  must be a ranking of the paths in order to advertise the most
  interesting ones.  A way for a router to select N paths is to run N
  times its decision process.  The memory cost is bounded : A router
  receives a maximum of N paths for each prefix from each peer.  
</p>
<p>With N equals to 2, all routers know at least two paths and can provide
  local recovery in case of failure.  If multipath routing is to be
  deployed in the AS, N can be increased to provide more alternate
  paths to the routers.  
</p>
<p>Path optimality and backup path optimality are not guaranteed,
  but as path diversity is better, the nexthops of the chosen primary and backup path are more likely 
  to be closer to the router than with classical BGP.    
</p>
<p>This solution helps to reduce routing oscillations, but not in
  all cases.  Indeed, path visibility is still constrained by the
  maximum number of paths, and configurations with routing
  oscillations still exist. 
</p>
<a name="AddBestsPaths"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Advertise All AS-Wide Best Paths</h3>

<p>Another choice is to advertise all paths with the same AS-wide
  preference <a class='info' href='#Basu-ibgp-osc'>[Basu&#8209;ibgp&#8209;osc]<span> (</span><span class='info'>Basu, A., Ong, C., Rasala, A., Sheperd, B., and G. Wilfong, &ldquo;Route oscillations in iBGP with Route Reflection,&rdquo; .</span><span>)</span></a>, i.e. the paths that all routers
  would select based on the rules of the decision process that are not
  router-dependent (i.e. Local-preference, ASPath length and MED
  rules). Thus, for a given router, those paths only differ by the IGP
  cost to the nexthop or by the tie-breaking rules. 
</p>
<p>The computational cost is reduced, as a router only has to send
  the paths remaining before applying the IGP tie-breaking rule.
  However, it is difficult to predict how many paths will be stored,
  as it depends on the number of eBGP sessions on which this prefix is
  advertised with the best AS-wide preference. 
</p>
<p>With this rule, the routing system is optimal : All routers can
  choose their best path (or best paths if multipath is used) 
  based on their router-specific preferences,
  i.e. the IGP cost to the nexthop.  Hot potato routing is respected.
  Also, MED oscillations are prevented, because the path visibility
  among the AS-wide preferred paths is total.
</p>
<p>The existence of a backup path is not guaranteed : If only one
  path with the  AS-wide best attributes exists, there is no backup
  path disseminated.  However, if such a path exists, it is optimal as
  it has the same AS-wide preference as the primary.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Advertise Neighbor-AS Group Best Path</h3>

<p><a class='info' href='#walton-osc'>[walton&#8209;osc]<span> (</span><span class='info'>Walton, D., Retana, A., and E. Chen, &ldquo;BGP Persistent Route Oscillation Solution,&rdquo; July&nbsp;2005.</span><span>)</span></a> proposes that a router groups its paths
  based on the neighbor AS from which it was learned, and to advertise the
  best path in each of those groups.
</p>
<p>The control plane stress induced by this solution is the
  computation of the per-neighbor path group, and the application of
  the decision process to each of them.  The Control-Plane charge is
  bounded by the number of neighboring ASes advertising a prefix,
  which cannot be known a-priori. 
</p>
<p>Path optimality and backup path optimality are not guaranteed, as
  the paths advertised are not all the AS-wide preferred paths.
  Backup path availability is not guaranteed. Indeed, if only one
  AS advertises this prefix, even on multiple eBGP sessions, only one
  of the paths may be selected and advertised.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Best LocPref/Second Locpref</h3>

<p>This selection method consists in grouping the paths by Local
  Preference.  A router sends to its peers all paths with the highest
  Local Preference.  If there is only a single path with the highest
  Local Preference, it also sends all paths with the second best Local
  Preference.  
</p>
<p>This method ensures that all routers know all paths with the best
  local preference.  As local preference are often related to the type
  of peering of the peer the path comes from, this ensures that in
  case of failure, routers have a backup path of equivalent quality.
  This prevents for example that a router switches temporarily on a
  peer path while an alternate path from a customer is available but
  hidden at the border of the AS.  Such a situation could result in a
  temporary withdrawal of the prefix on some eBGP sessions when the
  router selects the path via the peer.
</p>
<p>The advertisement of the Second Local Preference occurs when
  there is no alternate path with the same quality as the best path.
  This way, fast convergence is still ensured. Backup path is optimal,
  as it has the second AS-Wide preference, which becomes the AS-wide
  best preference upon failure of the primary one. 
</p>
<p>Sending all the paths with a given Local Preference also has a positive
  impact on routing optimality : Indeed, this allow border routers to
  have an increased path visibility and to choose their best path
  based on their own criteria. 
</p>
<p>The computational cost of this solution is reduced when there are
  several paths with the best local preference.  In this case, it is
  sufficient to stop the decision process after the first rule to have
  the set of paths to be advertised. When it is necessary to advertise
  the paths with second local-preference, the additional cost is to
  apply a second time the first rule of the decision process, which is
  still reasonable. The memory cost depends
  on the number of paths with the best local preference. 
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Advertise Paths at decisive step - 1</h3>

<p>When the goal is to provide fast recovery by advertising
  candidate post-reconvergence paths, one can choose to stop the
  decision process just before the step where only one path
  remains. If the decision process comes to IGP tie-break, all
  remaining paths are advertised.  This way, routers advertise as many
  paths as possible with a quality as similar as possible.
  
</p>
<p>This path selection is an intermediary solution between the two
  preceding ones.  Here, instead of stopping the decision process
  at the local preference step or the IGP step, we stop it before the rule
  that removes the best potential backup paths.  This way, we minimize
  the number of paths to advertise while guaranteeing the presence of
  a backup path.  Primary and backup path optimality is ensured, as
  all paths with the same AS-wide preference as the best paths are
  included in the set of paths advertised.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Forwarding Modes</h3>

<p>Forwarding from the ingress ASBR to the egress ASBR can be
  impacted by the application of Add-Path when encapsulation is not
  used and intermediate routers perform a lookup in BGP-fed FIBs to
  forward the packet.
</p>
<p>The analysis for this deployment scenario of add-paths is left
  for further version of the draft.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA considerations</h3>

<p>This document includes no request to IANA.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>	This document introduces no new security concerns to BGP or other
	   specifications referenced in this document.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgments</h3>

<p>	We would like to thank Olivier Bonaventure for his suggestions and comments.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="AddPath">[AddPath]</a></td>
<td class="author-text">D. Walton, A. Retana, and E. Chen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-walton-bgp-add-paths-06.txt.txt">Advertisement of Multiple Paths in BGP</a>,&rdquo; draft-walton-bgp-add-paths-06.txt (work in progress).</td></tr>
<tr><td class="author-text" valign="top"><a name="BestExternal">[BestExternal]</a></td>
<td class="author-text">Marques, P., Fernando, R., Chen, E., and P. Mohapatra, &ldquo;Advertisement of the best-external route to IBGP,&rdquo; &nbsp;draft-marques-idr-best-external-00.txt, July&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Basu-ibgp-osc">[Basu-ibgp-osc]</a></td>
<td class="author-text">Basu, A., Ong, C., Rasala, A., Sheperd, B., and G. Wilfong, &ldquo;Route oscillations in iBGP with Route Reflection,&rdquo; Sigcomm&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="draft-mohapatra">[draft-mohapatra]</a></td>
<td class="author-text">Mohapatra, P., Fernando, R., Filsfils, C., and R. Raszuk, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-pmohapat-idr-fast-conn-restore-00.txt.txt">Fast Connectivity Restoration Using BGP Add-path</a>,&rdquo; draft-pmohapat-idr-fast-conn-restore-00.txt (work in progress), September&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="walton-osc">[walton-osc]</a></td>
<td class="author-text">Walton, D., Retana, A., and E. Chen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-walton-bgp-route-oscillation-stop-01.txt.txt">BGP Persistent Route Oscillation Solution</a>,&rdquo; draft-walton-bgp-route-oscillation-stop-01.txt (work in progress), July&nbsp;2005.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Virginie Van den Schrieck</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Universite catholique de Louvain</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Place Ste Barbe, 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louvain-la-Neuve  1348</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BE</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:virginie.vandenschrieck@uclouvain.be">virginie.vandenschrieck@uclouvain.be</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inl.info.ucl.ac.be/vvandens">http://inl.info.ucl.ac.be/vvandens</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pierre Francois</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Universite catholique de Louvain</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Place Ste Barbe, 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louvain-la-Neuve  1348</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BE</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pierre.francois@uclouvain.be">pierre.francois@uclouvain.be</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://inl.info.ucl.ac.be/pfr">http://inl.info.ucl.ac.be/pfr</a></td></tr>
</table>
</body></html>
