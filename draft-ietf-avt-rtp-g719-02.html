<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RTP Payload format for
    G.719</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RTP Payload format for
    G.719">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Westerlund</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">I. Johansson</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Ericsson AB</td></tr>
<tr><td class="header">Expires: March 21, 2009</td><td class="header">September 17, 2008</td></tr>
</table></td></tr></table>
<h1><br />RTP Payload format for
    G.719<br />draft-ietf-avt-rtp-g719-02</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on March 21, 2009.</p>

<h3>Abstract</h3>

<p>This document specifies the payload format for packetization of the
      G.719 full-band codec encoded audio signals into the Real-time Transport
      Protocol (RTP). The payload format supports transmission of multiple
      channels, multiple frames per payload, and interleaving.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Definitions and Conventions<br />
<a href="#anchor3">3.</a>&nbsp;
G.719 Description<br />
<a href="#anchor4">4.</a>&nbsp;
Payload format Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.</a>&nbsp;
Multi-rate Encoding and Rate Adaptation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.2.</a>&nbsp;
Support for Multi-Channel Sessions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.3.</a>&nbsp;
Robustness against Packet Loss<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-fec">4.3.1.</a>&nbsp;
Use of Forward Error Correction (FEC)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-interleaving">4.3.2.</a>&nbsp;
Use of Frame Interleaving<br />
<a href="#sec-payload">5.</a>&nbsp;
Payload format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">5.1.</a>&nbsp;
RTP Header Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.2.</a>&nbsp;
Payload Structure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.2.1.</a>&nbsp;
Basic ToC element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.3.</a>&nbsp;
Basic mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.4.</a>&nbsp;
Interleaved mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.5.</a>&nbsp;
Audio Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.6.</a>&nbsp;
Implementation Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.6.1.</a>&nbsp;
Receiving Redundant Frames<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.6.2.</a>&nbsp;
Interleaving<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">5.6.3.</a>&nbsp;
Decoding Validation<br />
<a href="#sec-examples">6.</a>&nbsp;
Payload Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">6.1.</a>&nbsp;
3 mono frames with 2 different bitrates<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">6.2.</a>&nbsp;
2 stereo frame-blocks of the same bitrate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">6.3.</a>&nbsp;
4 mono frames interleaved<br />
<a href="#anchor21">7.</a>&nbsp;
Payload Format Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-media-type">7.1.</a>&nbsp;
Media Type Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">7.2.</a>&nbsp;
Mapping to SDP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">7.2.1.</a>&nbsp;
Offer/Answer Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">7.2.2.</a>&nbsp;
Declarative SDP Considerations<br />
<a href="#anchor25">8.</a>&nbsp;
IANA Considerations<br />
<a href="#sec-congestion">9.</a>&nbsp;
Congestion Control<br />
<a href="#sec-sec">10.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">10.1.</a>&nbsp;
Confidentiality<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">10.2.</a>&nbsp;
Authentication and Integrity<br />
<a href="#Acknowledgements">11.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Informative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document specifies the payload format for packetization of the
      G.719 full-band (FB) codec encoded audio signals into the Real-time
      Transport Protocol (RTP) <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>. The payload
      format supports transmission of multiple channels, multiple frames per
      payload, packet loss robustness methods using redundancy or
      interleaving.
</p>
<p>This document starts with conventions, a brief description of the
      codec, and the payload formats capabilities. The payload format is
      specified in <a class='info' href='#sec-payload'>Section&nbsp;5<span> (</span><span class='info'>Payload format</span><span>)</span></a>. Examples can be found
      in <a class='info' href='#sec-examples'>Section&nbsp;6<span> (</span><span class='info'>Payload Examples</span><span>)</span></a>. The media type and its mappings
      to SDP, usage in SDP offer/answer is then specified. The document ends
      with considerations around congestion control and security.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definitions and Conventions</h3>

<p>The term "frame-block" is used in this document to describe the
      time-synchronized set of audio frames in a multi-channel audio session.
      In particular, in an N-channel session, a frame-block will contain N
      audio frames, one from each of the channels, and all N speech frames
      represents exactly the same time period.
</p>
<p>This document contains depictions of bit fields. The most significant
      bit is always leftmost in the figure on each row and have the lowest
      enumeration. For fields that are depicted over multiple rows the upper
      row is more significant than the next.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
G.719 Description</h3>

<p>The ITU-T G.719 full-band codec is a transform coder based on
      Modulated Lapped Transform (MLT). G.719 is a low complexity full
      bandwidth codec for conversational speech and audio coding. The encoder
      input and decoder output are sampled at 48 kHz. The codec enables full
      bandwidth, from 20 Hz to 20 kHz, encoding of speech, music and general
      audio content at rates from 32 kbit/s up to 128 kbit/s. The codec
      operates on 20ms frames and has an algorithmic delay of 40 ms.
</p>
<p>The codec provides excellent quality for speech, music and other
      types of audio. Some of the applications for which this coder is
      suitable are:</p>
<ul class="text">
<li>Real-time communications such as video conferencing and
          telephony.
</li>
<li>Streaming audio
</li>
<li>Archival and messaging
</li>
</ul>

<p>The encoding and decoding algorithm can change the bit rate at any
      20ms frame boundary. The encoder receives the audio sampled at 48kHz.
      The support of other sampling rates is possible by re-sampling the input
      signal to the codec's sampling rate, i.e. 48kHz, however, this
      functionality is not part of the standard.
</p>
<p>The encoding is performed on equally sized frames. For each frame,
      the encoder decides on two encoding modes, a transient mode and a
      stationary mode. The decision is based on statistics derived from the
      input signal. The stationary mode uses a long MLT that leads to a
      spectrum of 960 coefficients while the transient encoding mode uses a
      short MLT (higher time resolution transform) which results in 4 spectra
      (4 x 240 = 960 coefficients). The encoding of the spectrum is done in
      two steps. First, the spectral envelope is computed, quantized and
      Huffman encoded. The envelope is computed on a non-uniform frequency
      subdivision. From the coded spectral envelope, a weighted spectral
      envelope is derived and is used for bit-allocation, this process is also
      repeated at the decoder, thus only the spectral envelope is transmitted.
      The output of the bit-allocation is used in order to quantize the
      spectra. In addition, for stationary frames the encoder estimates the
      amount of noise level. The decoder applies the reverse operation upon
      reception of the bit stream. The non-coded coefficients (i.e. no bits
      allocated) are replaced by entries of a noise codebook which is built
      based on the decoded coefficients.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Payload format Capabilities</h3>

<p>This payload format have a number of capabilities and this section
      discuss them in some detail.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Multi-rate Encoding and Rate Adaptation</h3>

<p>G.719 supports multi-rate encoding capability that enables on a per
        frame basis variation of the encoding rate. This enables support for
        bit-rate adaptation and congestion control. The possibility to
        aggregate multiple audio frames into a single RTP payload is another
        dimension of adaptation. The RTP and payload format overhead can thus
        be reduced by the aggregation at the cost of increased delay and
        reduced packet-loss robustness.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Support for Multi-Channel Sessions</h3>

<p>The RTP payload format defined in this document supports
        multi-channel audio content (e.g. stereophonic or surround audio
        sessions). Although the G.719 codec itself does not support encoding
        of multi-channel audio content into a single bit stream, it can be
        used to separately encode and decode each of the individual channels.
        To transport (or store) the separately encoded multi-channel content,
        the audio frames for all channels that are framed and encoded for the
        same 20 ms period are logically collected in a "frame-block".
</p>
<p>At the session setup, out-of-band signaling must be used to
        indicate the number of channels in the payload type. The order of the
        audio frames within the frame-block depends on the number of the
        channels and follows the definition in Section 4.1 in <a class='info' href='#RFC3551'>AVP<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3551]. When using SDP for signaling, the number
        of channels is specified in the rtpmap attribute.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Robustness against Packet Loss</h3>

<p>The payload format supports several means, including forward error
        correction (FEC) and frame interleaving, to increase robustness
        against packet loss.
</p>
<a name="sec-fec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Use of Forward Error Correction (FEC)</h3>

<p>Generic forward error correction within RTP is defined, for
          example, in RFC 5109 <a class='info' href='#RFC5109'>[RFC5109]<span> (</span><span class='info'>Li, A., &ldquo;RTP Payload Format for Generic Forward Error Correction,&rdquo; December&nbsp;2007.</span><span>)</span></a>. Audio
          redundancy coding is defined in RFC 2198 <a class='info' href='#RFC2198'>[RFC2198]<span> (</span><span class='info'>Perkins, C., Kouvelas, I., Hodson, O., Hardman, V., Handley, M., Bolot, J., Vega-Garcia, A., and S. Fosse-Parisis, &ldquo;RTP Payload for Redundant Audio Data,&rdquo; September&nbsp;1997.</span><span>)</span></a>. Either scheme can be used to add redundant
          information to the RTP packet stream and make it more resilient to
          packet losses, at the expense of a higher bit rate. Please see
          either RFCs for a discussion of the implications of the higher bit
          rate to network congestion.
</p>
<p>In addition to these media-unaware mechanisms, this memo
          specifies an optional G.719 specific form of audio redundancy
          coding, which may be beneficial in terms of packetization overhead.
          Conceptually, previously transmitted transport frames are aggregated
          together with new ones. A sliding window can be used to group the
          frames to be sent in each payload. However, irregular or
          non-consecutive patterns are also possible by inserting NO_DATA
          frames between primary and redundant transmissions. <a class='info' href='#fig-red'>Figure&nbsp;1<span> (</span><span class='info'>An example of redundant transmission</span><span>)</span></a> below shows an example.
</p><br /><hr class="insert" />
<a name="fig-red"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>--+--------+--------+--------+--------+--------+--------+--------+--
  | f(n-2) | f(n-1) |  f(n)  | f(n+1) | f(n+2) | f(n+3) | f(n+4) |
--+--------+--------+--------+--------+--------+--------+--------+--

   &lt;---- p(n-1) ----&gt;
            &lt;----- p(n) -----&gt;
                     &lt;---- p(n+1) ----&gt;
                              &lt;---- p(n+2) ----&gt;
                                       &lt;---- p(n+3) ----&gt;
                                                &lt;---- p(n+4) ----&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: An example of redundant transmission&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Here, each frame is retransmitted once in the following RTP
          payload packet. f(n-2)...f(n+4) denote a sequence of audio frames,
          and p(n-1)...p(n+4) a sequence of payload packets.
</p>
<p>The mechanism described does not really require signaling at the
          session setup. However, signalling has been defined to allow for the
          sender to voluntarily bounding the buffering and delay requirements.
          If nothing is signalled the use of this mechanism is allowed and
          unbounded. For a certain timestamp, the receiver may receive
          multiple copies of a frame containing encoded audio data, even at
          different encoding rates. The cost of this scheme is bandwidth and
          the receiver delay necessary to allow the redundant copy to
          arrive.
</p>
<p>This redundancy scheme provides a functionality similar to the
          one described in RFC 2198, but it works only if both original frames
          and redundant representations are G.719 frames. When the use of
          other media coding schemes is desirable, one has to resort to RFC
          2198.
</p>
<p>The sender is responsible for selecting an appropriate amount of
          redundancy based on feedback about the channel conditions, e.g., in
          the RTP Control Protocol (RTCP) <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>
          receiver reports. The sender is also responsible for avoiding
          congestion, which may be exacerbated by redundancy (see <a class='info' href='#sec-congestion'>Section&nbsp;9<span> (</span><span class='info'>Congestion Control</span><span>)</span></a> for more details).
</p>
<a name="sec-interleaving"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Use of Frame Interleaving</h3>

<p>To decrease protocol overhead, the payload design allows several
          audio transport frames to be encapsulated into a single RTP packet.
          One of the drawbacks of such an approach is that in case of packet
          loss several consecutive frames are lost. Consecutive frame loss
          normally renders error concealment less efficient and usually causes
          clearly audible and annoying distortions in the reconstructed audio.
          Interleaving of transport frames can improve the audio quality in
          such cases by distributing the consecutive losses into a number of
          isolated frame losses, which are easier to conceal. However,
          interleaving and bundling several frames per payload also increases
          end-to-end delay and sets higher buffering requirements. Therefore,
          interleaving is not appropriate for all use cases or devices.
          Streaming applications should most likely be able to exploit
          interleaving to improve audio quality in lossy transmission
          conditions.
</p>
<p>Note that this payload design supports the use of frame
          interleaving as an option. The usage of this feature needs to be
          negotiated in the session setup.
</p>
<p>The interleaving supported by this format is rather flexible. For
          example, a continuous pattern can be defined, as depicted in <a class='info' href='#fig-interleaving'>Figure&nbsp;2<span> (</span><span class='info'>An example of interleaving pattern that has constant delay</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="fig-interleaving"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>--+--------+--------+--------+--------+--------+--------+--------+--
  | f(n-2) | f(n-1) |  f(n)  | f(n+1) | f(n+2) | f(n+3) | f(n+4) |
--+--------+--------+--------+--------+--------+--------+--------+--

           [ p(n)   ]
  [ p(n+1) ]                 [ p(n+1) ]
                    [ p(n+2) ]                 [ p(n+2) ]
                                      [ p(n+3) ]
                                                        [ p(n+4) ]</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: An example of interleaving pattern that has constant delay&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In <a class='info' href='#fig-interleaving'>Figure&nbsp;2<span> (</span><span class='info'>An example of interleaving pattern that has constant delay</span><span>)</span></a> the consecutive
          frames, denoted f(n-2) to f(n+4), are aggregated into packets p(n)
          to p(n+4), each packet carrying two frames. This approach provides
          an interleaving pattern that allows for constant delay in both the
          interleaving and de-interleaving processes. The de-interleaving
          buffer needs to have room for at least three frames, including the
          one that is ready to be consumed. The storage space for three frames
          is needed, for example, when f(n) is the next frame to be decoded:
          since frame f(n) was received in packet p(n+2), which also carried
          frame f(n+3), both these frames are stored in the buffer.
          Furthermore, frame f(n+1) received in the previous packet, p(n+1),
          is also in the de-interleaving buffer. Note also that in this
          example the buffer occupancy varies: when frame f(n+1) is the next
          one to be decoded, there are only two frames, f(n+1) and f(n+3), in
          the buffer.
</p>
<p>
</p>
<p>
</p>
<a name="sec-payload"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Payload format</h3>

<p>The main purpose of the payload design for G.719 is to maximize the
      potential of the codec to its fullest degree with an as minimal overhead
      as possible. In the design both basic and interleaved modes have been
      included as the codec is suitable both for conversational and other low
      delay applications as well as streaming, where more delay is
      acceptable.
</p>
<p>The main structural difference between the basic and interleaved
      modes is the extension of the table of content entries with frame
      displacement fields in the interleaved mode. The basic mode supports
      aggregation of multiple consecutive frames in a payload. The interleaved
      mode supports aggregation of multiple frames that are non-consecutive in
      time. In both modes it is possible to have frames encoded with different
      frame types in the same payload.
</p>
<p>The payload format also supports the usage of G.719 for carrying
      multi-channel content using one discrete encoder per channel all using
      the same bit-rate. In this case a complete frame-block with data from
      all channels are included in the RTP payload. The data is the
      concatenation of all the encoded audio frames in the order specified for
      that number of included channels. Also interleaving is done on complete
      frame-blocks rather than individual audio frames.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
RTP Header Usage</h3>

<p>The RTP timestamp corresponds to the sampling instant of the first
        sample encoded for the first frame-block in the packet. The timestamp
        clock frequency SHALL be 48000 Hz. The timestamp is also used to
        recover the correct decoding order of the frame-blocks.
</p>
<p>The RTP header marker bit (M) SHALL be set to 1 whenever the first
        frame-block carried in the packet is the first frame-block in a
        talkspurt (see definition of the talkspurt in section 4.1 of <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>). For all other packets the marker bit SHALL
        be set to zero (M=0).
</p>
<p>The assignment of an RTP payload type for the format defined in
        this memo is outside the scope of this document. The RTP profiles in
        use currently mandates binding the payload type dynamically for this
        payload format. This is basically necessary due to that the payload
        type expresses the configuration of the payload itself, i.e. basic or
        interleaved mode and the number of channels carried.
</p>
<p>The remaining RTP header fields are used as specified in RFC 3550
        <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Payload Structure</h3>

<p>The payload consists of one or more table of contents (ToC) entires
        followed by the audio data corresponding to the ToC entries. The
        following sections describe both the basic mode and the interleaved
        mode. Each ToC entry MUST be padded to a byte boundary to ensure octet
        alignment. The rules regarding maximum payload size given in Section
        3.2 of <a class='info' href='#I-D.ietf-tsvwg-udp-guidelines'>[I&#8209;D.ietf&#8209;tsvwg&#8209;udp&#8209;guidelines]<span> (</span><span class='info'>Eggert, L. and G. Fairhurst, &ldquo;Unicast UDP Usage Guidelines for Application Designers,&rdquo; October&nbsp;2008.</span><span>)</span></a> SHOULD be
        followed.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Basic ToC element</h3>

<p>All the different formats and modes in this draft use a common
          basic ToC which may be extended in the different options described
          below.
</p><br /><hr class="insert" />
<a name="fig-toc"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|F|    L    |R|R|
+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Basic TOC element&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<blockquote class="text"><dl>
<dt>F (1 bit):</dt>
<dd>If set to 1, indicates that this ToC
              entry is followed by another ToC entry; if set to 0, indicates
              that this ToC entry is the last one in the ToC.
</dd>
<dt>L (5 bits):</dt>
<dd>A field that gives the frame length of
              each individual frame within the frame-block. <br /><hr class="insert" />
<a name="tab-l-values"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     L          length(bytes)
    ============================
     0           0 NO_DATA
     1-7         N/A (reserved)
     8-22        80+10*(L-8)
    23-27        240+20*(L-23)
    28-31        N/A (reserved)
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: How to map L values to frame lengths&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
L=0 (NO_DATA) is used to indicate an empty frame,
              this is useful if frames are missing e.g at re-packetization or
              to insert gaps when sending redundant frames together with
              primary frames in the same payload.The value range
              [1..7] and [28..31] inclusive is reserved for future use in this
              draft version, if these values occur in a ToC the entire packet
              SHOULD be treated as invalid and discarded.<br />
A few
              examples are given below where the frame size and the
              corresponding codec bitrate is computed based on the value
              L.<br /><hr class="insert" />
<a name="tab-l-examples"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      L    Bytes    Bitrate(kbps)
    =============================
      8      80        32
      9      90        36
     10     100        40
     12     120        48
     16     160        64
     22     220        88
     23     240        96
     25     280       112
     27     320       128
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Examples of L values and corresponding frame lengths&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
This encoding yields a granularity of 4kbps between
              32 and 88kbps and a granularity of 8kbps between 88 and 128kbps
              with a defined range of 32-128kbps.
</dd>
<dt>R (2bits):</dt>
<dd>Reserved bits. SHALL be set to 0 on
              sending and SHALL be ignored on reception.
</dd>
</dl></blockquote>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Basic mode</h3>

<p>The basic ToC element <a class='info' href='#fig-toc'>Figure&nbsp;3<span> (</span><span class='info'>Basic TOC element</span><span>)</span></a> is extended
        with a number of frame-blocks field (#frames) to form the ToC entry.
        The frame-blocks field tells how many frame-blocks of the same length
        the ToC entry relates to.
</p><br /><hr class="insert" />
<a name="fig-frames"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   +-+-+-+-+-+-+-+-+
   |    #frames    |
   +-+-+-+-+-+-+-+-+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Number of frame-blocks field&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Interleaved mode</h3>

<p>The basic ToC is extended with a number of frame-blocks field
        (#frames) and the DIS fields to form a ToC entry in interleaved mode.
        The frame-blocks field tells how many frame-blocks of the same length
        the ToC relates to. The DIS fields, one for each frame-block indicated
        by the #frames field, express the interleaving distance between audio
        frames carried in the payload. If necessary to achieve octet
        alignment, a 4-bit padding is added.
</p><br /><hr class="insert" />
<a name="fig-frames-interleave"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    #frames    | DIS1  |  ...  | DISi  |  ...  | DISn  | Padd  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Number of frame-block + interleave fields&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<blockquote class="text"><dl>
<dt>DIS1...DISn (4 bits):</dt>
<dd>A list of n (n=#frames)
            displacement fields indicating the displacement of the i:th
            (i=1..n) audio frame-block relative to the preceding frame-block
            in the payload, in units of 20 ms long audio frame-blocks). The
            four-bit unsigned integer displacement values may be between 0 and
            15 indicating the number of audio frame-blocks in decoding order
            between the (i-1):th and the i:th frame in the payload. Note that
            for the first ToC entry of the payload the value of DIS1 is
            meaningless. It SHALL be set to zero by a sender, and SHALL be
            ignored by a receiver. This frame-block's location in the decoding
            order is uniquely defined by the RTP timestamp. Note that for
            subsequent ToC entries DIS1 indicates the number of frames between
            the last frame of the previous group and the first frame of this
            group.
</dd>
<dt>Padd (4 bits):</dt>
<dd>To ensure octet alignment, four
            padding bits SHALL be included at the end of the ToC entry in case
            there is an odd number of frame-blocks in the group referenced by
            this ToC entry. These bits SHALL be set to zero and SHALL be
            ignored by the receiver. If a group containing an even number of
            frames is referenced by this ToC entry, these padding bits SHALL
            NOT be included in the payload.
</dd>
</dl></blockquote>

<p>
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Audio Data</h3>

<p>The audio data part follows the table of contents. All the octets
        comprising an audio frame SHALL be appended to the payload as a unit.
        For each frame-block the audio frames are concatenated in order
        indicated by table in Section 4.1 of <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>
        for the number of channels configured for the payload type in use. So
        the first channel (left most) indicated comes first followed by the
        next channel. The audio frame-blocks are packetized in increasing
        timestamp order within each group of frame-blocks (per ToC entry),
        i.e. oldest frame-block first. The groups of frame-blocks are
        packetized in the same order as their corresponding ToC entries.
</p>
<p>The audio frames are specified in ITU recommendation <a class='info' href='#ITU-T-G719'>[ITU&#8209;T&#8209;G719]<span> (</span><span class='info'>ITU-T, &ldquo;Specification : ITU-T G.719 extension for 20 kHz fullband           audio,&rdquo; April&nbsp;2008.</span><span>)</span></a>.
</p>
<p>The G.719 bit stream is split into a sequence of octets and
        transmitted in order from the left most (most significant&ndash;MSB)
        bit to the right most (least significant &ndash;LSB) bit.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Implementation Considerations</h3>

<p>An application implementing this payload format MUST understand all
        the payload parameters. Any mapping of the parameters to a signaling
        protocol MUST support all parameters. So an implementation of this
        payload format in an application using SDP is required to understand
        all the payload parameters in their SDP-mapped form. This requirement
        ensures that an implementation always can decide whether it is capable
        of communicating.
</p>
<p>Basic mode SHALL be implemented and the interleaved mode SHOULD be
        implemented. The implementation burden of both is rather small, and
        supporting both ensures interoperability. However, interleaving is not
        mandated as it has limited applicability for conversational
        application that requires tight delay boundaries.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.1"></a><h3>5.6.1.&nbsp;
Receiving Redundant Frames</h3>

<p>The reception of redundant audio frames, i.e. more than one audio
          frame from the same source for the same time slot, MUST be supported
          by the implementation. In the case that the receiver gets multiple
          audio frames in different bit-rates for the same time slot it is
          RECOMMENDED that the receiver keeps the one with the highest
          bit-rate.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.2"></a><h3>5.6.2.&nbsp;
Interleaving</h3>

<p>The use of interleaving requires further considerations. As
          presented in the example in <a class='info' href='#sec-interleaving'>Section&nbsp;4.3.2<span> (</span><span class='info'>Use of Frame Interleaving</span><span>)</span></a>,
          a given interleaving pattern requires a certain amount of the
          de-interleaving buffer. This buffer space, expressed in a number of
          transport frame slots, is indicated by the "interleaving" media type
          parameter. The number of frame slots needed can be converted into
          actual memory requirements by considering the 320 bytes per frame
          used by the highest bit-rate rate of G.719.
</p>
<p>The information about the frame buffer size is not always
          sufficient to determine when it is appropriate to start consuming
          frames from the interleaving buffer. Additional information is
          needed when the interleaving pattern changes. The "int-delay" media
          type parameter is defined to convey this information. It allows a
          sender to indicate the minimal media time that needs to be present
          in the buffer before the decoder can start consuming frames from the
          buffer. Because the sender has full control over the interleaving
          pattern, it can calculate this value. In certain cases (for example,
          if joining a multicast session with interleaving mid-session), a
          receiver may initially receive only part of the packets in the
          interleaving pattern. This initial partial reception (in frame
          sequence order) of frames can yield too few frames for acceptable
          quality from the audio decoding. This problem also arises when using
          encryption for access control, and the receiver does not have the
          previous key. Although the G.719 is robust and thus tolerant to a
          high random frame erasure rate, it would have difficulties handling
          consecutive frame losses at startup. Thus, some special
          implementation considerations are described.
</p>
<p>In order to handle this type of startup efficiently, decoding can
          start provided that:</p>
<ol class="text">
<li>There are at least two consecutive frames available.
</li>
<li>More than or equal to half the frames are available in the
              time period from where decoding was planned to start and the
              most forward received decoding.
</li>
</ol><p>After receiving a number of packets, in the worst case as
          many packets as the interleaving pattern covers, the previously
          described effects disappear and normal decoding is resumed. Similar
          issues arise when a receiver leaves a session or has lost access to
          the stream. If the receiver leaves the session, this would be a
          minor issue since playout is normally stopped. The sender can avoid
          this type of problem in many sessions by starting and ending
          interleaving patterns correctly when risks of losses occur. One such
          example is a key-change done for access control to encrypted
          streams. If only some keys are provided to clients and there is a
          risk of they receiving content for which they do not have the key,
          it is recommended that interleaving patterns do not overlap key
          changes.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.3"></a><h3>5.6.3.&nbsp;
Decoding Validation</h3>

<p>If the receiver finds a mismatch between the size of a received
          payload and the size indicated by the ToC of the payload, the
          receiver SHOULD discard the packet. This is recommended because
          decoding a frame parsed from a payload based on erroneous ToC data
          could severely degrade the audio quality.
</p>
<p>
</p>
<a name="sec-examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Payload Examples</h3>

<p>A few examples to highlight the payload format
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
3 mono frames with 2 different bitrates</h3>

<p>The first example is a payload consisting of 3 mono frames where
        the 2 first frames correspond to a bitrate of 32kbps (80byte/frame)
        and the last is 48kbps (120byte/frame).
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   The first 32 bits are ToC fields.
   Bit 0 is '1' as another ToC field follow.
   Bits 1..5 is 01000 = 80bytes/frame
   Bits 8..15 is 00000010 = 2 frame-blocks with 80bytes/frame
   Bit 16 is '0', no more ToC follows
   Bits 17..21 is 01100 = 120 bytes/frame
   Bits 24..31 = 00000001 = 1 frame-block with 120bytes/frame</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|0 1 0 0 0|0 0|0 0 0 0 0 0 1 0|0|0 1 1 0 0|0 0|0 0 0 0 0 0 0 1|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |d(0)   frame 1                                                 |
   .                                                               .
   |                                                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |d(0)   frame 2                                                 |
   .                                                               .
   |                                                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |d(0)   frame 3                                                 |
   .                                                               .
   |                                                         d(959)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre></div>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
2 stereo frame-blocks of the same bitrate</h3>

<p>A payload consisting of 2 stereo frames corresponding to a bitrate
        of 32kbps (80byte/frame) per channel. The receiver calculates the
        number of frames in the audio block by multiplying the value of the
        channels parameter (2) with the #frames field value (2) to derive that
        there are 4 audio frames in the payload.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   The first 16 bits is the ToC field.
   Bit 0 is '0' as no ToC field follow.
   Bits 1..5 is 01000 = 80bytes/frame
   Bits 8..15 is 00000010 = 2 frame-blocks with 80bytes/frame</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0|0 1 0 0 0|0 0|0 0 0 0 0 0 1 0| d(0) frame 1 left ch.         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   |                         d(639)| d(0) frame 1 right ch.        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   |                         d(639)| d(0) frame 2 left ch.         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   |                         d(639)| d(0) frame 2 right ch.        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre></div>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
4 mono frames interleaved</h3>

<p>A payload consisting of 4 mono frames corresponding to a bitrate of
        32kbps (80byte/frame) interleaved. A pattern of interleaving for
        constant delay when aggregating 4 frames is used in the below example.
        The actual packet illustrated is packet n, while the previous and
        following packets frame-block content is shown to illustrate the
        pattern.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Packet n-3:  1,  6, 11, 16
   Packet n-2:  5, 10, 15, 20
   Packet n-1:  9, 14, 19, 24
   Packet   n: 13, 18, 23, 28
   Packet n+1: 17, 22, 27, 32
   Packet n+2: 21, 26, 31, 36

   The first 16 bits is the ToC field.
   Bit 0 is '0' as there are no ToC field following.
   Bits 1..5 is 01000 = 80bytes/frame
   Bits 8..15 is 00000100 = 4 frame-blocks with 80bytes/frame
   Bits 16..19 is 0000 = DIS1 (0)
   Bits 20..23 is 0100 = DIS2 (4)
   Bits 24..27 is 0100 = DIS3 (4)
   Bits 28..31 is 0100 = DIS4 (4)</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0|0 1 0 0 0|0 0|0 0 0 0 0 1 0 0|0 0 0 0|0 1 0 0|0 1 0 0|0 1 0 0|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | d(0) frame 13                                                 |
   .                                                               .
   |                                                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | d(0) frame 18                                                 |
   .                                                               .
   |                                                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | d(0) frame 23                                                 |
   .                                                               .
   |                                                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | d(0) frame 28                                                 |
   .                                                               .
   |                                                         d(639)|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre></div>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Payload Format Parameters</h3>

<p>This RTP payload format is identified using the media type audio/g719
      which is registered in accordance with <a class='info' href='#RFC4855'>[RFC4855]<span> (</span><span class='info'>Casner, S., &ldquo;Media Type Registration of RTP Payload Formats,&rdquo; February&nbsp;2007.</span><span>)</span></a>
      and using the template of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
</p>
<a name="sec-media-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Media Type Definition</h3>

<p>The media type for the G.719 codec is allocated from the IETF tree
        since G.719 is a has the potential to become a widely used audio codec
        in general VoIP, teleconferencing and streaming applications. This
        media type registration covers real-time transfer via RTP.
</p>
<p>Note, any unspecified parameter MUST be ignored by the receiver to
        ensure that additional parameters can be added in the future.
</p>
<p>Type name: audio
</p>
<p>Subtype name: g719
</p>
<p>Required parameters: none
</p>
<p>Optional parameters: </p>
<blockquote class="text"><dl>
<dt>interleaving:</dt>
<dd>Indicates that interleaved mode SHALL
            be used for the payload. The parameter specifies the number of
            frame-block slots available in a de-interleaving buffer (including
            the frame that is ready to be consumed). Its value is equal to one
            plus the maximum number of frames that can precede any frame in
            transmission order and follow the frame in RTP timestamp order.
            The value MUST be greater than zero. If this parameter is not
            present, interleaved mode SHALL NOT be used.
</dd>
<dt>int-delay:</dt>
<dd>The minimal media time delay in
            milliseconds that is needed to avoid underrun in the
            de-interleaving buffer before starting decoding, i.e., the
            difference in RTP timestamp ticks between the earliest and latest
            audio frame present in the de-interleaving buffer expressed in
            milliseconds. The value is a stream property and provided per
            source. The allowed values are 0 to the largest value expressible
            by a unsigned 16 bit integer (65535). Please note that the in
            practice largest value that can be used is equal to the declared
            size of the interleaving buffer of the receiver. If the value for
            some reason is larger than the receiver buffer declared by or for
            the receiver this value defaults to the size of the receiver
            buffer. For sources for which this value hasn't been provided the
            value defaults to the size of the receiver buffer. The format is
            comma separated list of SSRC ":" RTP timestamp ticks pairs which
            in <a class='info' href='#RFC5234'>ABNF<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234] is expressed as: 
<blockquote class="text">
<p>int-delay = "int-delay:" source-delay *(","
                source-delay)
</p>
<p>source-delay = SSRC ":" delay-value 
</p>
<p>SSRC = 1*8HEXDIG ; The 32-bit SSRC encoded in hex
                format
</p>
<p>delay-value = 1*5DIGIT ; The delay value in RTP timestamp
                ticks
</p>
<p>Example: int-delay=ABCD1234:1000,4321DCB:640
</p>
<p>NOTE: No white space allowed in the parameter before the
                end of all the value pairs
</p>
</blockquote> 
</dd>
<dt>max-red:</dt>
<dd>The maximum duration in milliseconds that
            elapses between the primary (first) transmission of a frame and
            any redundant transmission that the sender will use. This
            parameter allows a receiver to have a bounded delay when
            redundancy is used. Allowed values are between 0 (no redundancy
            will be used) and 65535. If the parameter is omitted, no
            limitation on the use of redundancy is present.
</dd>
<dt>channels:</dt>
<dd>The number of audio channels. The possible
            values (1-6) and their respective channel order is specified in
            Section 4.1 in <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>. If omitted, it has
            the default value of 1.
</dd>
<dt>CBR:</dt>
<dd>Constant Bit Rate (CBR), indicates the exact
            codec-bitrate in bits per second (not including the overhead from
            packetization, RTP header or lower layers) that the codec MUST
            use. CBR is to be used when dynamic rate cannot be supported (one
            case is e.g gateway to H.320). CBR is mostly used for gateways to
            circuit switch networks. Therefore the CBR rate is the rate not
            including any FEC as specified in <a class='info' href='#sec-fec'>Section&nbsp;4.3.1<span> (</span><span class='info'>Use of Forward Error Correction (FEC)</span><span>)</span></a>.
            If FEC is to be used the b= parameter MUST be used to allow the
            extra bit rate needed to send the redundant information. It is
            RECOMMENDED that this parameter is only used when necessary to
            establish a working communication.
</dd>
<dt>ptime:</dt>
<dd>see <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>.
</dd>
<dt>maxptime:</dt>
<dd>see <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>.
</dd>
</dl></blockquote>

<p>Encoding considerations:</p>
<blockquote class="text">
<p>This media type is framed and binary, see section 4.8 in <a class='info' href='#RFC4288'>RFC4288<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4288].
</p>
</blockquote>

<p>Security considerations: </p>
<blockquote class="text">
<p>See <a class='info' href='#sec-sec'>Section&nbsp;10<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> of RFC XXXX.
</p>
</blockquote>

<p>Interoperability considerations:
</p>
<p>Published specification:</p>
<blockquote class="text">
<p>RFC XXXX
</p>
</blockquote>

<p>Applications that use this media type:</p>
<blockquote class="text">
<p>Real-time audio applications like voice over IP and
            teleconference, and multi-media streaming.
</p>
</blockquote>

<p>Additional information: none
</p>
<p>Person &amp; email address to contact for further information:</p>
<blockquote class="text">
<p>Payload format: IngemarJohansson
            &lt;ingemar.s.johansson@ericsson.com&gt;
</p>
<p>Codec spec.: Anisse Taleb
            &lt;anisse&lt;dot&gt;taleb&lt;AT&gt;ericsson&lt;dot&gt;com&gt;
</p>
</blockquote>

<p>Intended usage: COMMON
</p>
<p>Restrictions on usage:</p>
<blockquote class="text">
<p>This media type depends on RTP framing, and hence is only
            defined for transfer via RTP <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
            Transport within other framing protocols is not defined at this
            time.
</p>
</blockquote>

<p>Author: </p>
<blockquote class="text">
<p>Ingemar Johansson &lt;ingemar.s.johansson@ericsson.com&gt;
</p>
<p>Magnus Westerlund &lt;magnus.westerlund@ericsson.com&gt;
</p>
</blockquote>

<p>Change controller:</p>
<blockquote class="text">
<p>IETF Audio/Video Transport working group delegated from the
            IESG.
</p>
</blockquote>

<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Mapping to SDP</h3>

<p>The information carried in the media type specification has a
        specific mapping to fields in the Session Description Protocol (SDP)
        <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>, which is commonly used to describe RTP
        sessions. When SDP is used to specify sessions employing the G.719
        codec, the mapping is as follows: </p>
<ul class="text">
<li>The media type ("audio") goes in SDP "m=" as the media
            name.
</li>
<li>The media subtype (payload format name) goes in SDP "a=rtpmap"
            as the encoding name. The RTP clock rate in "a=rtpmap" MUST be
            48000, and the encoding parameters (number of channels) MUST
            either be explicitly set to N or omitted, implying a default value
            of 1. The values of N that are allowed are specified in Section
            4.1 in <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
</li>
<li>The parameters "ptime" and "maxptime" go in the SDP "a=ptime"
            and "a=maxptime" attributes, respectively.
</li>
<li>Any remaining parameters go in the SDP "a=fmtp" attribute by
            copying them directly from the media type parameter string as a
            semicolon-separated list of parameter=value pairs.
</li>
</ul>

<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1"></a><h3>7.2.1.&nbsp;
Offer/Answer Considerations</h3>

<p>The following considerations apply when using SDP Offer-Answer
          procedures to negotiate the use of G.719 payload in RTP: </p>
<ul class="text">
<li>Each combination of the RTP payload transport format
              configuration parameters (interleaving, and channels) is unique
              in its bit-pattern and not compatible with any other
              combination. When creating an offer in an application desiring
              to use the more advanced features (interleaving, or more than
              one channel), the offerer is RECOMMENDED to also offer a payload
              type containing only the configuration with a single channel. If
              multiple configurations are of interest to the application, they
              may all be offered; however, care should be taken not to offer
              too many payload types. An SDP answerer MUST include, in the SDP
              answer for a payload type, the following parameters unmodified
              from the SDP offer (unless it removes the payload type):
              "interleaving"; and "channels". However, the value of the
              Interleaving parameter MAY be changed. The SDP offerer and
              answerer MUST generate G.719 packets as described by these
              parameters.
</li>
<li>The "interleaving" and "int-delay" parameter's values have a
              specific relationship that needs to be considered. It also
              depends on the directionality of the streams and their delivery
              method. The high level explanation that can be understood from
              the definition is that the value of "interleaving" declares the
              size of the receiver buffer, while int-delay is a stream
              property provided by the sender to inform how much buffer space
              it in practice is using for the stream it sends.
<ul class="text">
<li>For media streams which is sent over multicast the value
                  of "interleaving" SHALL NOT be changed by the answerer. It
                  shall either be accepted or the payload type deleted. The
                  value of the "int-delay" parameter is a stream property and
                  provided by the offer/answer agent that intends to send
                  media with this payload type, and for each stream coming
                  from that agent (one or more). The value MUST be between 0
                  and what corresponds to the buffer size declared by the
                  value of the "interleaving" parameter.
</li>
<li>For unicast streams which the offerer declares as
                  send-only the value of the "interleaving" parameter is the
                  size that the answerer is RECOMMENDED to use by the offerer.
                  The answerer MAY change it to any allowed value. The
                  int-delay parameter value will be the one the offerer
                  intends to use unless the answerer reduce the value of the
                  interleaving parameter below what is needed for that
                  int-delay value. If the interleaving value in the answer is
                  smaller than the offer's int-delay, the int-delay value is
                  per default reduced to be corresponding to the interleaving
                  value. If the offerer is not satisfied with this he will
                  need to perform another round of offer/answer. As the
                  answerer will not send any media it doesn't include any
                  int-delay in the answer.
</li>
<li>For unicast streams which the offerer declares as
                  recvonly the value of interleaving in the offer will be the
                  offerer's size of the interleaving buffer. The answerer
                  indicate its preferred size of the interleaving buffer for
                  any future round of offer/answer. The offerer will not
                  provide any int-delay parameter as it is not sending any
                  media. The answerer is recommended in its answer include a
                  int-delay parameter to declare what the property is for the
                  stream it is going to send. As it already know the receivers
                  interleaving buffer size, there should be no issue with
                  providing a value that is between 0 and corresponding to a
                  full de-interleaving buffer. 
</li>
<li>For unicast streams which the offer declares as sendrecv
                  streams the value of the interleaving parameter in the offer
                  will be offerer's size of the interleaving buffer. The
                  answerer will in the answer indicate the size of its actual
                  interleaving buffer. It is recommended that this value is as
                  least as big as the offer's. The offerer is recommended to
                  include a int-delay parameter that is selected based on that
                  the answerer has at least as much interleaving space as the
                  offerer unless nothing else is known. As the offerer's
                  interleaving buffer size is not yet known this may fail, in
                  which cases the default rule is to downgrade the value of
                  the int-delay to correspond to the full size of the
                  answerer's interleaving buffer. If the offerer isn't
                  satisfied with this it will need to initiate another round
                  of offer/answer. The answerer is recommended in its answer
                  include a int-delay parameter to declare what the property
                  is for the stream(s) it is going to send. As it already know
                  the receivers interleaving buffer size, there should be no
                  issue with providing a value that is between 0 and
                  corresponding to a full de-interleaving buffer.
</li>
</ul> 
</li>
<li>In most cases, the parameters "maxptime" and "ptime" will not
              affect interoperability; however, the setting of the parameters
              can affect the performance of the application. The SDP offer-
              answer handling of the "ptime" parameter is described in <a class='info' href='#RFC3264'>[RFC3264]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a>. The "maxptime" parameter MUST be
              handled in the same way.
</li>
<li>The parameter "max-red" is a stream property parameter. For
              sendonly or sendrecv unicast media streams, the parameter
              declares the limitation on redundancy that the stream sender
              will use. For recvonly streams, it indicates the desired value
              for the stream sent to the receiver. The answerer MAY change the
              value, but is RECOMMENDED to use the same limitation as the
              offer declares. In the case of multicast, the offerer MAY
              declare a limitation; this SHALL be answered using the same
              value. A media sender using this payload format is RECOMMENDED
              to always include the "max-red" parameter. This information is
              likely to simplify the media stream handling in the receiver.
              This is especially true if no redundancy will be used, in which
              case "max-red" is set to 0.
</li>
<li>Any unknown parameter in an offer SHALL be removed in the
              answer.
</li>
<li>The b= SDP parameter SHOULD be used to negotiate the maximum
              bandwidth to be used for the audio stream. The offerer may offer
              a maximum rate and the answer may contain a lower rate. If no b=
              parameter is present in the offer or answer it implies a rate up
              to 128kbps
</li>
<li>The parameter "CBR" is a receiver capability. For recvonly
              and sendrecv streams, it indicates the desired constant bit rate
              that the receiver wants to accept. A sender MUST be able to send
              constant bit rate stream since it is a subset of the variable
              bit rate capability. If the offer includes this parameter the
              answerer SHOULD send at the constant bit rate if it is within
              the allowed call bit rate (b= parameter). The Answerer MAY
              change the value of CBR to a lower rate but it is RECOMMENDED to
              use the same rate. The answerer MAY add this parameter if it
              wants to receive at a constant bit rate even if the offer did
              not include the CBR parameter. In this case, the offerer SHALL
              send at the constant bit rate but SHALL be able to accept media
              at variable bit rate.
</li>
</ul>

<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.2"></a><h3>7.2.2.&nbsp;
Declarative SDP Considerations</h3>

<p>In declarative usage, like SDP in RTSP <a class='info' href='#RFC2326'>[RFC2326]<span> (</span><span class='info'>Schulzrinne, H., Rao, A., and R. Lanphier, &ldquo;Real Time Streaming Protocol (RTSP),&rdquo; April&nbsp;1998.</span><span>)</span></a> or SAP <a class='info' href='#RFC2974'>[RFC2974]<span> (</span><span class='info'>Handley, M., Perkins, C., and E. Whelan, &ldquo;Session Announcement Protocol,&rdquo; October&nbsp;2000.</span><span>)</span></a>, the
          parameters SHALL be interpreted as follows: </p>
<ul class="text">
<li>The payload format configuration parameters (interleaving,
              and channels) are all declarative, and a participant MUST use
              the configuration(s) that is provided for the session. More than
              one configuration may be provided if necessary by declaring
              multiple RTP payload types; however, the number of types should
              be kept small.
</li>
<li>It might not be possible to know the SSRC values that are
              going to be used by the sources at the time of sending the SDP.
              This is not a major issues as the size of the interleaving
              buffer can be tailored towards the values actually going to be
              used. Thus ensuring that the default values for int-delay is not
              resulting in to much extra buffering.
</li>
<li>Any "maxptime" and "ptime" values should be selected with
              care to ensure that the session's participants can achieve
              reasonable performance.
</li>
</ul>

<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>One media type (audio/g719) has been defined and needs registration
      in the media types registry; see <a class='info' href='#sec-media-type'>Section&nbsp;7.1<span> (</span><span class='info'>Media Type Definition</span><span>)</span></a>.
</p>
<a name="sec-congestion"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Congestion Control</h3>

<p>The general congestion control considerations for transporting RTP
      data apply; see RTP <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> and any applicable
      RTP profile like AVP <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>. However, the
      multi-rate capability of G.719 audio coding provides a mechanism that
      may help to control congestion, since the bandwidth demand can be
      adjusted (within the limits of the codec) by selecting a different
      encoding bit-rate.
</p>
<p>The number of frames encapsulated in each RTP payload highly
      influences the overall bandwidth of the RTP stream due to header
      overhead constraints. Packetizing more frames in each RTP payload can
      reduce the number of packets sent and hence the header overhead, at the
      expense of increased delay and reduced error robustness. If forward
      error correction (FEC) is used, the amount of FEC-induced redundancy
      needs to be regulated such that the use of FEC itself does not cause a
      congestion problem.
</p>
<p>The CBR signalling parameter allows a receiver to lock down a RTP
      payload type to use a single encoding rate. As this prevents the codec
      rate from being lowered when congestion is experienced, the sender is
      constrained to either change the packetization or abort the
      transmission. Since these responses to congestion are severely limited,
      it is RECOMMENDED to only use the CBR parameter in cases when it is
      necessary for establishing a working communication.
</p>
<a name="sec-sec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p>RTP packets using the payload format defined in this specification
      are subject to the general security considerations discussed in RTP
      <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> and any applicable profile such as AVP
      <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a> or SAVP <a class='info' href='#RFC3711'>[RFC3711]<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a>.
      As this format transports encoded audio, the main security issues
      include confidentiality, integrity protection, and data origin
      authentication of the audio itself. The payload format itself does not
      have any built-in security mechanisms. Any suitable external mechanisms,
      such as SRTP <a class='info' href='#RFC3711'>[RFC3711]<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a>, MAY be used.
</p>
<p>This payload format and the G.719 decoder do not exhibit any
      significant non-uniformity in the receiver-side computational complexity
      for packet processing, and thus are unlikely to pose a denial-of-service
      threat due to the receipt of pathological data.
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
Confidentiality</h3>

<p>In order to ensure confidentiality of the encoded audio, all audio
        data bits MUST be encrypted. There is less need to encrypt the payload
        header or the table of contents since they only carry information
        about the frame type. This information could also be useful to a third
        party, for example, for quality monitoring.
</p>
<p>The use of interleaving in conjunction with encryption can have a
        negative impact on confidentiality, for a short period of time.
        Consider the following packets (in brackets) containing frame numbers
        as indicated: {10, 14, 18}, {13, 17, 21}, {16, 20, 24} (a popular
        continuous diagonal interleaving pattern). The originator wishes to
        deny some participants the ability to hear material starting at time
        16. Simply changing the key on the packet with the timestamp at or
        after 16, and denying that new key to those participants, does not
        achieve this; frames 17, 18, and 21 have been supplied in prior
        packets under the prior key, and error concealment may make the audio
        intelligible at least as far as frame 18 or 19, and possibly
        further.
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
Authentication and Integrity</h3>

<p>To authenticate the sender of the audio-stream, an external
        mechanism MUST be used. It is RECOMMENDED that such a mechanism
        protects both the complete RTP header and the payload (audio and data
        bits). Data tampering by a man-in-the-middle attacker could replace
        audio content and also result in erroneous depacketization/decoding
        that could lower the audio quality.
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank Roni Even and Anisse Taleb for their
      help with this draft.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2198">[RFC2198]</a></td>
<td class="author-text"><a href="mailto:c.perkins@cs.ucl.ac.uk">Perkins, C.</a>, <a href="mailto:i.kouvelas@cs.ucl.ac.uk">Kouvelas, I.</a>, <a href="mailto:o.hodson@cs.ucl.ac.uk">Hodson, O.</a>, <a href="mailto:v.hardman@cs.ucl.ac.uk">Hardman, V.</a>, <a href="mailto:mjh@isi.edu">Handley, M.</a>, <a href="mailto:bolot@sophia.inria.fr">Bolot, J.</a>, <a href="mailto:avega@sophia.inria.fr">Vega-Garcia, A.</a>, and <a href="mailto:sfosse@sophia.inria.fr">S. Fosse-Parisis</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2198">RTP Payload for Redundant Audio Data</a>,&rdquo; RFC&nbsp;2198, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2198.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2198.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2198.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2326">[RFC2326]</a></td>
<td class="author-text"><a href="mailto:schulzrinne@cs.columbia.edu">Schulzrinne, H.</a>, <a href="mailto:anup@netscape.com">Rao, A.</a>, and <a href="mailto:robla@real.com">R. Lanphier</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2326">Real Time Streaming Protocol (RTSP)</a>,&rdquo; RFC&nbsp;2326, April&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2326.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2974">[RFC2974]</a></td>
<td class="author-text">Handley, M., Perkins, C., and E. Whelan, &ldquo;<a href="http://tools.ietf.org/html/rfc2974">Session Announcement Protocol</a>,&rdquo; RFC&nbsp;2974, October&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2974.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3711">[RFC3711]</a></td>
<td class="author-text">Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>,&rdquo; RFC&nbsp;3711, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3711.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4288">[RFC4288]</a></td>
<td class="author-text">Freed, N. and J. Klensin, &ldquo;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>,&rdquo; BCP&nbsp;13, RFC&nbsp;4288, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4288.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4855">[RFC4855]</a></td>
<td class="author-text">Casner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>,&rdquo; RFC&nbsp;4855, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4855.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5109">[RFC5109]</a></td>
<td class="author-text">Li, A., &ldquo;<a href="http://tools.ietf.org/html/rfc5109">RTP Payload Format for Generic Forward Error Correction</a>,&rdquo; RFC&nbsp;5109, December&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5109.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-tsvwg-udp-guidelines">[I-D.ietf-tsvwg-udp-guidelines]</a></td>
<td class="author-text">Eggert, L. and G. Fairhurst, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-udp-guidelines-11.txt">Unicast UDP Usage Guidelines for Application Designers</a>,&rdquo; draft-ietf-tsvwg-udp-guidelines-11 (work in progress), October&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-udp-guidelines-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU-T-G719">[ITU-T-G719]</a></td>
<td class="author-text">ITU-T, &ldquo;Specification : ITU-T G.719 extension for 20 kHz fullband
          audio,&rdquo; April&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3551">[RFC3551]</a></td>
<td class="author-text">Schulzrinne, H. and S. Casner, &ldquo;<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>,&rdquo; STD&nbsp;65, RFC&nbsp;3551, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3551.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Magnus Westerlund</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson AB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Torshamnsgatan 21-23</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SE-164 83 Stockholm</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SWEDEN</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+46 8 7190000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:magnus.westerlund@ericsson.com">magnus.westerlund@ericsson.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ingemar Johansson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson AB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Laboratoriegrand 11</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SE-971 28 Lulea</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SWEDEN</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+46 73 0783289</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ingemar.s.johansson@ericsson.com">ingemar.s.johansson@ericsson.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
