<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RTP Payload Format for G.718 Speech/Audio</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RTP Payload Format for G.718 Speech/Audio">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">G. Zorn, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Network Zen</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Y. Wang</td></tr>
<tr><td class="header">Expires: June 13, 2011</td><td class="header">Huawei Technologies</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Lakaniemi</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">December 10, 2010</td></tr>
</table></td></tr></table>
<h1><br />RTP Payload Format for G.718 Speech/Audio<br />draft-ietf-avt-rtp-g718-05.txt</h1>

<h3>Abstract</h3>

<p>
				This document specifies the Real-Time Transport Protocol (RTP)
				payload format for the Embedded Variable Bit-Rate (EV-VBR)
				speech/audio codec, specified in ITU-T G.718. A media type 
				registration for this RTP payload format is also included.
			
</p>
<h3>Status of This Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on June 13, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Requirements Language<br />
<a href="#anchor3">3.</a>&nbsp;
Background<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
The G.718 Codec<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Benefits of Layered Design<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
Transmitting Layered Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
Scaling Scenarios and Rate Control<br />
<a href="#G-R-P-F">4.</a>&nbsp;
G.718 RTP Payload Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#P-S">4.1.</a>&nbsp;
Payload Structure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#P-H">4.1.1.</a>&nbsp;
Payload Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#G-T-B">4.1.2.</a>&nbsp;
G.718 Transport Blocks<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#H-T-E-D">4.2.</a>&nbsp;
Handling The Encoded Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.3.</a>&nbsp;
G.718 Scaling<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#CRC-V">4.4.</a>&nbsp;
CRC Verification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.5.</a>&nbsp;
G.718 Session<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.6.</a>&nbsp;
Cross-stream/Cross-layer Timing Synchronization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.7.</a>&nbsp;
RTP Header Usage<br />
<a href="#anchor12">5.</a>&nbsp;
Payload Format Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#M-T-R">5.1.</a>&nbsp;
Media Type Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.2.</a>&nbsp;
Mapping to SDP Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.3.</a>&nbsp;
Offer/Answer Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.4.</a>&nbsp;
Declarative Usage of SDP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.5.</a>&nbsp;
SDP Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">5.5.1.</a>&nbsp;
Example 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">5.5.2.</a>&nbsp;
Example 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">5.5.3.</a>&nbsp;
Example 3<br />
<a href="#anchor20">6.</a>&nbsp;
Congestion Control<br />
<a href="#S-C">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor21">8.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor22">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#anchor25">Appendix&nbsp;A.</a>&nbsp;
Payload Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">A.1.</a>&nbsp;
Simple Payload Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">A.1.1.</a>&nbsp;
All The Layers in The Same Payload<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">A.1.2.</a>&nbsp;
Layers in Seperate RTP Streams<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">A.2.</a>&nbsp;
Advanced Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">A.2.1.</a>&nbsp;
Different Update Rate for Subset of Layers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">A.2.2.</a>&nbsp;
Redundant Frames With Limited Set of Layers<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
				The International Telecommunication Union (ITU-T) Recommendation
				G.718 <a class='info' href='#ITU.G718.2008'>[ITU.G718.2008]<span> (</span><span class='info'>International Telecommunications Union, &ldquo;Frame Error Robust Narrowband and Wideband Embedded Variable Bit-Rate Coding of Speech and Audio from 8-32 Kbit/s,&rdquo; May&nbsp;2008.</span><span>)</span></a>
				specifies the Embedded Variable Bit Rate (EV-VBR)
				speech/audio codec. This document specifies the Real-time Transport
				Protocol (RTP)  <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>
				payload format for this codec.
			
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements Language</h3>

<p>
				The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
				"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
				document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
			
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Background</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
The G.718 Codec</h3>

<p>
					G.718 is an embedded variable rate speech codec having a layered design. 
					The bitstream of the G.718 core codec consists of a core
					layer, denoted as L1, and four enhancement layers, denoted as L2-L5.
					The bit-rates of the G.718 core codec range from 8 kbit/s (core layer
					only) to 32 kbit/s (with all layers up to L5). Furthermore, the G.718
					codec also supports discontinuous transmission (DTX) and comfort
					noise generation (CNG) by sending Silence Descriptor (SID) frames
					during periods of non-active input signal, resulting in a reduced
					bit-rate. The sampling frequency of the core codec is 16 kHz and the
					codec operates on 20 ms frames. The G.718 codec is also capable of
					narrowband operation with audio input and/or output at 8 kHz sampling frequency.
				
</p>
<p>
					While transmitting/receiving the core layer L1 is enough for
					successful decoding of the audio content, each of the enhancement
					layers Ln (n being 2 to 5, inclusive) provides an improvement to
					reconstructed audio quality. Thus, the core layer ensures the basic
					communication while the enhancement layers can be used to improve the
					perceptual quality. Furthermore, enhancement layers are dependent on
					all the lower layers in a sense that successful decoding of layer Ln
					requires also all the layers Lm with m&lt;n to be available.
				
</p>
<p>
					The sizes, sampling rates and possible outputs of the G.718 core
					codec layers L1-L5 are summarized in Table 1
					below, where the "Bytes"
					column indicates the number of bytes per encoded data unit for a
					layer. NB and WB denote narrowband and wideband, respectively. The
					"Bytes" column in other tables has the same meaning. Note that for
					layers L1 and L2, the corresponding output may either be NB or WB,
					depending on the rendering device and the application requirement,
					regardless of the sampling rate of the encoded data.
					
<br /><hr class="insert" />
<a name="table_1"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
                     Table 1: G.718 Layers

  Layer   Bytes   Cumulative bit-rate   Sampling rate   Output
----------------------------------------------------------------
   L1'      32       12.8 kbit/s           16 kHz         WB
   L3'       9       16.4 kbit/s           16 kHz         WB
   L4       20       24.4 kbit/s           16 kHz         WB
   L5       20       32.4 kbit/s           16 kHz         WB
</pre></div><p>


					<br />
<br />

					The G.718 codec also includes an operating mode that is compatible
					with the Adaptive Multi-Rate Wideband (AMR-WB) codec 
					<a class='info' href='#AMR-WB'>[AMR&#8209;WB]<span> (</span><span class='info'>3GPP, &ldquo;Speech codec speech processing functions; Adaptive Multi-Rate - Wideband (AMR-WB) speech codec; General description,&rdquo; April&nbsp;2001.</span><span>)</span></a>, for
					which the RTP payload format is specified in <a class='info' href='#RFC4867'>[RFC4867]<span> (</span><span class='info'>Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs,&rdquo; April&nbsp;2007.</span><span>)</span></a>.
					In this AMR-
					WB interoperable mode, layers L1 and L2 are replaced by L1' consisting
					of AMR-WB encoded data and L3'
					is used instead of L3. The usage of layers L4 and L5 is not affected
					by transmitting AMR-WB data in the lower layers. If layer L3' is
					present in the encoded bit-stream, the base layer L1' must use the
					AMR-WB mode 2 with a bit-rate of 12.65 kbits/s. Otherwise (the
					encoded bit-stream contains only the L1' layer), any of the 9 AMR-WB
					coding modes 0, 1, 2, 3, 4, 5, 6, 7, and 8 correspond to the bit-
					rates of 6.60, 8.85, 12.65, 14.25, 15.85, 18.25, 19.85, 23.05, and
					23.85 kbit/s, respectively, may be in use. Table 2 summarizes the
					AMR-WB interoperable mode when more than one layer may be present.
				
</p><br /><hr class="insert" />
<a name="table_2"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
     Table 2: G.718 layers in the AMR-WB interoperable mode

  Layer   Bytes   Cumulative bit-rate   Sampling rate   Output
----------------------------------------------------------------
   L1'      32       12.8 kbit/s           16 kHz          WB
   L3'       9       16.4 kbit/s           16 kHz          WB
   L4       20       24.4 kbit/s           16 kHz          WB
   L5       20       32.4 kbit/s           16 kHz          WB
</pre></div>
<p>
					Note that the bit-rate for the raw bit-stream of AMR-WB mode 2 is
					12.65 kbits/s. However, after counting the padding bits to make each
					encoded data unit byte-aligned, as in the octet-aligned mode
					specified in <a class='info' href='#RFC4867'>[RFC4867]<span> (</span><span class='info'>Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs,&rdquo; April&nbsp;2007.</span><span>)</span></a>,
					the resulting bit-rate is then 12.8 kbits/s.
				
</p>
<p>
					In the AMR-WB interoperable mode, when the base layer L1' is
					transported in its own RTP packet stream, the packetisation specified in <a class='info' href='#RFC4867'>[RFC4867]<span> (</span><span class='info'>Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs,&rdquo; April&nbsp;2007.</span><span>)</span></a>
					MUST be used, to enable legacy RFC4867 receivers to
					receive the base layer L1'.
					<br />
<br />

					ITU-T SG16 is currently working on a set of extension layers in order
					to provide so-called super-wideband (SWB) audio and stereophonic
					encoding extensions on top of the G.718 core codec. Further details
					and the usage of these layers are undtermined at this time.
					<br />
<br />

					The main application of the G.718 codec is telephony. Other expected
					applications include audio/video conferencing and streaming.
				
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Benefits of Layered Design</h3>

<p>
					Layered design enables simple scalability of the transmitted
					stream simply by conveying a suitable number of layers. The number of
					layers used in a session may be selected for example based on the
					capacity of the transmission channel, current transmission conditions,
					characteristics of the source signal or available processing capacity.
					<br />
<br />

					Another obvious benefit of the layered codec design is the
					possibility to exploit the scalability to support congestion control
					by transmitting/dropping some of the (higher) enhancement layers in
					order to alleviate congestion in the network. See more detailed
					discussion on the congestion control in section 6.
					<br />
<br />

					Furthermore, the layered design also implicitly provides possibility
					for unequal error detection/protection by employing different levels
					of protection on core layer and enhancement layers.
				
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Transmitting Layered Data</h3>

<p>
					In principle there are two basic approaches to carry the data from a layered encoder:
					<br />
<br />

					</p>
<ol class="text">
<li>
							All the layers are carried within a single RTP session
							<br />
<br />

						
</li>
<li>
							The encoded data is divided over multiple RTP sessions, each  session carrying a subset of layers. 
							This is also referred to as Multi-Session Transmission (MST)
							<br />
<br />

						
</li>
</ol><p>
					The first choice is the most efficient in terms of exploitation of
					transmission bandwidth. Furthermore, using only one packet to carry
					all encoded data layers of a frame requires less resources also from
					the end-systems (and intermediate systems) since the number of
					packets is kept at minimum and only single RTP packet stream needs to
					be handled. However, this option requires any intermediate network
					element performing the scaling operation to be fully media-aware
					since removing encoded layers requires modification of the payload.
					Furthermore, the intermediate network element needs to be within the
					security context to enable the meaningful manipulation of the payload,
					in case secure transport is employed. This might not be feasible in
					all systems/scenarios, but some special-purpose devices such as e.g.
					media gateways in cellular telephone systems may be able to implement
					this kind of media-aware functionality.
					<br />
<br />

					The second alternative, transmitting selected subsets of layers in
					separate RTP sessions, facilitates simple scalability in intermediate
					network elements without the requirement of being fully media-aware.
					One use case of this alternative is layered multicast <a class='info' href='#McCanne'>[McCanne]<span> (</span><span class='info'>McCanne, S., Jacobson, V., and M. Vetterli, &ldquo;Receiver-driven layered multicast,&rdquo; October&nbsp;1996.</span><span>)</span></a>.
					On the other hand, this approach introduces separate packet header
					overhead for each subset of layers for those low-delay application
					scenarios wherein aggregation of data from multiple frames is not
					ideal. In this case, when the size of the encoded data block per
					single layer is in the range of 10 to 20 bytes, the packetisation may
					result in relatively high amount of protocol overhead, which might be
					an expensive solution on bandwidth-limited links. Another drawback of
					this approach is somewhat more complex session setup and the
					additional complexity associated with handling of several concurrent
					RTP sessions. However, this is a trade-off that enables simple
					scalability also by intermediate network elements that are not aware
					of the details of the transmitted media.
				
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Scaling Scenarios and Rate Control</h3>

<p>
					In principle there are three different ways to make use of the 
					layered design to control the bandwidth usage:
					<br />
<br />

					</p>
<ol class="text">
<li>
							A sender decides to change the number of layers it is transmitting
							(for example due to congestion control constraints)
							<br />
<br />

						
</li>
<li>
							A receiver or an intermediate network element instructs a sender
							to change the number of layers it is transmitting
							<br />
<br />

						
</li>
<li>
							An intermediate network element passes through only a subset of layers it receives
							<br />
<br />

						
</li>
</ol><p>
					The most appropriate mechanism depends on the application and the
					employed network topology. For example point-to-point conversational
					audio connection can easily introduce rate control by changing the
					number of transmitted layers, while in centralized audio/video
					conferencing scenario the conference server is a more appropriate
					point to implement the rate control instead of transmitting end-point.
					Please refer to RFC 5117 for extensive discussion on the different
					topologies and their implications to the transmission.
					However, the fundamental difference between these choices is that
					method 1 does not necessarily need any feedback from the receiver(s),
					while methods 2 and 3 require a signaling mechanism to support rate control.
				
</p>
<a name="G-R-P-F"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
G.718 RTP Payload Format</h3>

<p>
				The basic G.718 source data unit is one layer of an encoded frame.
				Since generally the term layer refers to time series of data
				representing certain encoding layer, in this specification we use the
				term Encoded Data Unit (EDU) to refer to a single layer of data from
				single encoded frame. Thus, each EDU has a (conceptual) frame number
				indicating its location in encoding/decoding order and a layer number
				indicating the encoding layer the EDU represents.
			
</p>
<a name="P-S"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Payload Structure</h3>

<p style='text-align: left'>
						The G.718 payload format consists of a payload header, followed by
						one or more transport blocks (TB) forming the actual payload data.
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+-----------------+----------+----------+- /// -+----------+
| Payload header  |  TB(1)   |  TB(2)   |          TB(n)   |
+-----------------+----------+----------+- /// -+----------+
</pre></div>
<a name="P-H"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Payload Header</h3>

<p>
						The payload header consists of an 8-bit payload CRC checksum:
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+-+-+-+-+-+-+-+-+
|     CRC       |
+-+-+-+-+-+-+-+-+
</pre></div><p>

						On the transmitting end the payload checksum is computed over the
						primary transport block (specified in <a class='info' href='#G-T-B'>Section&nbsp;4.1.2<span> (</span><span class='info'>G.718 Transport Blocks</span><span>)</span></a>) of the payload
						using the generator polynomial
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
C(z) = z^8 + z^4 + z^3 + z^2 + 1
</pre></div><p>

						Subsequent transport blocks are prepared in such a way that the
						payload checksum is valid for any integer number of contiguous
						transport blocks within one RTP packet starting from the beginning of
						the primary transport block.
						<br />
<br />

						On the receiving end the payload CRC checksum can be used to verify
						the correct reception of any contiguous subset of transport blocks
						within one RTP packet starting from the beginning of the primary
						transport block (see <a class='info' href='#CRC-V'>Section&nbsp;4.4<span> (</span><span class='info'>CRC Verification</span><span>)</span></a> for a detailed description).
					
</p>
<a name="G-T-B"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
G.718 Transport Blocks</h3>

<p>
						The basic building block of the G.718 RTP payload data is an G.718
						transport block (TB). There are two types of transport blocks:
						primary and secondary.
						<br />
<br />

						
						
<p style='text-align: left'>The structure of the primary transport block is depicted below.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+----------------------------+
|   L-ID    |NF | Encoded data               |
+-+-+-+-+-+-+-+-+----------------------------+

</pre></div>
						
						
<p style='text-align: left'>The structure of the secondary transport block is depicted below.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 0 1 2 3 4 5 6 7                              0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+----------------------------+-+-+-+-+-+-+-+-+
|   L-ID    |NF | Encoded Data               |     Tail      |
+-+-+-+-+-+-+-+-+----------------------------+-+-+-+-+-+-+-+-+

</pre></div>
						The layer ID (L-ID) and the NF fields form the transport block header.
						The L-ID field is used to identify the layer structure of the encoded
						data carried in this G.718 transport block, and the NF field
						indicates the number of encoded frames with this layer structure
						carried in the Encoded data part following the transport block header.
						The Tail field of the secondary transport block carries a modified 8-bit
						CRC checksum computed over the transport block, as specified below.
						<br />
<br />

						A G.718 RTP packet payload SHALL include exactly one primary
						transport block, which MAY be followed by one or more secondary
						transport blocks. The data fields of both transport block types are described below.
						<br />
<br />

						
<blockquote class="text"><dl>
<dt>L-ID (6 bits)</dt>
<dd>
								
								Identification of the encoded data carried in this transport block. 
								Table 3 below specifies the mapping between L-ID and the encoded data.
								Note that L-ID is treated as an unsigned integer.
								
<p style='text-align: center'>Table 3: Layer Identification (L-ID) Values
									
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
      L-ID    Encoded data
    --------------------------
        0     Empty frame
        1     L1
        2     L1-L2
        3     L1-L3
        4     L1-L4
        5     L1-L5
        6     L2
        7     L2-L3
        8     L2-L4
        9     L2-L5
       10     L3
       11     L3-L4
       12     L3-L5
       13     L4
       14     L4-L5
       15     L5
       16     L1'
       17     L1', L3'
       18     L1', L3', L4
       19     L1', L3', L4-L5
       20     G.718 SID
       21     AMR-WB SID
       22-63  Reserved
</pre></div>
							
</dd>
<dt>NF (2 bits)</dt>
<dd>
								
								Number of frames in this transport block (2 bits) decreased by
								one. The number of frames is equal to the value of NF
								incremented by one. For example, value NF=0 indicates that the
								transport block carries one frame, and value NF=3 indicate that
								the transport block carries four frames. If the sender wants to
								encapsulate more than four frames per payload, several
								transport blocks need to be used.
								<br />
<br />

							
</dd>
<dt>Encoded Data (variable length)</dt>
<dd>
								
								Encoded data consists of EDUs as specified by the values L-ID
								and NF fields, arranged according to the rules given in <a class='info' href='#H-T-E-D'>Section&nbsp;4.2<span> (</span><span class='info'>Handling The Encoded Data</span><span>)</span></a>.
								When L-ID is equal to 0 (empty frame), the encoded data field is not present.
								<br />
<br />

							
</dd>
<dt>Tail (8 bits)</dt>
<dd>
								
								The Tail field of the secondary transport block carries a
								bit field that is needed to modify the partial CRC checksum
								over the payload data up to the end of this TB to match the
								payload CRC field value carried in the payload header.
								<br />

								In the transmitter the Tail bits for a secondary TB(n) are
								computed by first computing the CRC checksum CRC(n) over the
								payload data from the beginning of the primary TB up to the end
								of TB(n) using the generator polynomial C(z) given above. The
								bits of the Tail field of TB(n) are set to zero value for the
								CRC computation. The transmitted value of the Tail field in
								TB(n) is obtained by bitwise XOR operation between the payload
								CRC field value carried in the payload header and the CRC(n)
								computed for TB(n).
							
</dd>
</dl></blockquote><p>
					
</p>
<a name="H-T-E-D"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Handling The Encoded Data</h3>

<p>
					In order to provide unique mapping of EDUs to encoded frames, the
					following rules on sequence of frames and sequence of layers need to
					be followed when creating a payload:
					<br />
<br />

					</p>
<ul class="text">
<li>
							The frames within a payload MUST form a set of contiguous frames
							in decoding order, i.e. if a payload carries frames n and n+N, all
							frames between n and n+N in decoding order MUST also be present in
							the payload.
							<br />
<br />

						
</li>
<li>
							The layers within a frame MUST form a contiguous set of layers,
							i.e. if layers Lx and Ly of a frame are included in the payload,
							all layers between Lx and Ly layers MUST also be present.
							<br />
<br />

						
</li>
</ul><p>
					The EDUs within a transport block are arranged according to the following rules:
					<br />
<br />

					</p>
<ul class="text">
<li>
							The EDUs within a transport block MUST be arranged in increasing order of layer number
							<br />
<br />

						
</li>
<li>
							The EDUs with the same layer number within a transport block MUST be arranged in decoding order
							<br />
<br />

						
</li>
</ul><p>
					Explicit timing information for the transport blocks is not needed,
					since the ordering of EDUs in the payload and their mapping to
					transport blocks can be used to implicitly carry this information.
					The following rules apply:
					<br />
<br />

					</p>
<ul class="text">
<li>
							If the highest layer carried in transport block k is n, and the
							lowest layer carried by transport block k+1 is n+1, then the EDUs
							of transport block k and k+1 belong to the same encoded frame.
							Furthermore, if transport blocks k and k+1 carry EDUs belonging to
							the same encoded frame(s), these transport blocks MUST include the
							same number of EDUs
							<br />
<br />

						
</li>
<li>
							If the highest layer carried in transport block k is n, and the
							lowest layer carried by transport block k+1 is smaller than or
							equal to n, the EDUs of transport block k and k+1 belong to the
							two separate encoded frames, which are contiguous in decoding order
							<br />
<br />

						
</li>
<li>
							Multiple copies of an EDU MUST NOT be included in the payload
							<br />
<br />

						
</li>
</ul><p>
					A set of EDUs can be allocated to transport blocks in several ways.
					For example each EDU can be encapsulated in its own transport block,
					all EDUs can be carried in single transport block, EDUs belonging to
					the same encoded frame can be encapsulated in dedicated transport
					block, or EDUs representing the same layer can be carried in their
					own transport blocks. Three examples on this with two frames with
					layers L1-L3 are given below. The first example illustrates the case
					using a single transport block for the whole payload, while the
					second payload example introduces separate transport blocks for each
					of the EDUs. The third example shows an approach where all layers are
					carried in dedicated transport blocks. The notation Fx-Ly is used to
					denote layer y of frame x.
					
<p style='text-align: left'>Example 1: All EDUs in a single transport block
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+---------+-----+-------+-------+-------+-------+-------+--------+
| L-ID=3  |NF=1 | F1-L1 | F2-L1 | F1-L2 | F2-L2 | F1-L3 | F2-L3  |
+---------+-----+-------+-------+-------+-------+-------+--------+
</pre></div>
					
<p style='text-align: left'>Example 2: All EDUs in separate transport blocks
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+---------+-----+-------+---------+-----+-------+
| L-ID=1  |NF=0 | F1-L1 | L-ID=1  |NF=0 | F2-L1 |
+---------+-----+-------+---------+-----+-------+
| L-ID=8  |NF=0 | F1-L2 | L-ID=8  |NF=0 | F2-L2 |
+---------+-----+-------+---------+-----+-------+
| L-ID=14 |NF=0 | F1-L3 | L-ID=14 |NF=0 | F2-L3 |
+---------+-----+-------+---------+-----+-------+
</pre></div>
					
<p style='text-align: left'>Example 3: Dedicated transport for EDUs of each layer
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+---------+-----+-------+-------+---------+-----+-------+-------+
| L-ID=1  |NF=1 | F1-L1 | F2-L1 | L-ID=6  |NF=1 | F1-L2 | F2-L2 |
+---------+-----+-------+-------+---------+-----+-------+-------+
| L-ID=10 |NF=1 | F1-L3 | F2-L3 |
+---------+-----+-------+-------+
</pre></div>
					While the first example carrying data from all layers in the same
					transport block obviously consumes less bandwidth, the second example
					using separate transport block for each EDU, and the third example
					using dedicated transport blocks for each layer provide simple
					scaling possibility: while in the first case the removal of e.g.
					layer L3 (from each frame in the payload) would require changing the
					value of the L-ID in addition to removing the corresponding EDU(s),
					in the second and third options it is enough to just remove all
					transport blocks carrying L3 data and the remaining part of the
					payload can be left untouched (however the packet size information in
					high-layer protocol headers needs change).
				

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
G.718 Scaling</h3>

<p>
					Some Media-Aware Network Elements (MANEs) MAY modify the G.718
					bitstream by dropping some of the layers in case congestion control
					or e.g. access link bandwidth requires such scaling to take place.
					Such MANEs are RTP translators (with the topology Topo-Translator as
					described in <a class='info' href='#RFC5117'>[RFC5117]<span> (</span><span class='info'>Westerlund, M. and S. Wenger, &ldquo;RTP Topologies,&rdquo; January&nbsp;2008.</span><span>)</span></a>,
					for which the rules for RTP translators specified in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> apply.
					<br />
<br />

					A payload can be either completely dropped or some of the transport
					blocks it carries can be discarded. In case full payloads are dropped
					to implement scaling, a packet containing the core layer L1 SHOULD
					NOT be discarded, since the decoding of higher layers of the same
					encoded frame is not possible without the core layer data being
					available. This means that payloads with L-ID values equal to 1 to 5,
					inclusive and 16 to 19, inclusive, SHOULD NOT be completely discarded.
					<br />
<br />

					</p>
<blockquote class="text">
<p>
							Author's note: To be checked whether the case of dropping a subset of the transport blocks in 
							one packet also strictly follows the topology Topo-Translator.
						
</p>
</blockquote><p>
					<br />
<br />

					In case the payload is forwarded with modified content, at least the
					primary transport block MUST be preserved in the payload, while some
					of the secondary transport blocks at the end of the payload MAY be
					discarded.
				
</p>
<a name="CRC-V"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
CRC Verification</h3>

<p>
					Both UDP-Lite <a class='info' href='#RFC3828'>[RFC3828]<span> (</span><span class='info'>Larzon, L-A., Degermark, M., Pink, S., Jonsson, L-E., and G. Fairhurst, &ldquo;The Lightweight User Datagram Protocol (UDP-Lite),&rdquo; July&nbsp;2004.</span><span>)</span></a>
					and DCCP <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>
					provide partial checksum
					options, in which partially damaged payloads can be delivered to the
					application layer.  In cases wherein such a transport layer operation
					is in use, and the partial checksum service by the transport layer
					protects up to the RTP header and the payload header, the CRC
					checksum provided in the payload header can be used to verify whether
					an RTP packet payload contains corrupt transport blocks.
					<br />
<br />

					On the receiving end the CRC verification is made in such a way that
					the CRC computation is started from the beginning of the primary TB,
					i.e. from the MSB of the first octet of the TB(1), and the
					computation is continued until the end of the payload data or until
					an erroneous TB is encountered. At the end of each TB a check MAY be
					performed: if the CRC value at the end of TB(n) matches the payload
					CRC value received in the payload header, the verification is
					successful and the data up TB(n) is valid. If the CRC value at the
					end of TB(n) does not match the payload CRC value received in the
					payload header, there is an error in the TB(n) and it MUST be
					discarded as corrupted. Furthermore, if the verification indicates
					corrupted TB(n), all subsequent transport blocks TB(m) with m>n MUST
					also be discarded.
				
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
G.718 Session</h3>

<p>
					A G.718 session consists of one or several RTP sessions carrying G.718 data encoded according to the 
					payload format specified in <a class='info' href='#P-S'>Section&nbsp;4.1<span> (</span><span class='info'>Payload Structure</span><span>)</span></a>.
				
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Cross-stream/Cross-layer Timing Synchronization</h3>

<p>
					In the case where a G.718 session consists of multiple RTP sessions, the RTP
					packets transmitted on separate RTP sessions need to be synchronized
					in order to enable reconstruction of the frames in the receiving end <a class='info' href='#RFC6051'>[RFC6051]<span> (</span><span class='info'>Perkins, C. and T. Schierl, &ldquo;Rapid Synchronisation of RTP Flows,&rdquo; November&nbsp;2010.</span><span>)</span></a>.
					Since each of the RTP sessions uses its own random initial value for
					the RTP timestamp, there is also a random offset between the RTP
					timestamps values carrying the EDUs belonging to the same encoded
					frame in different RTP sessions.
					<br />
<br />

					The receiver MUST use the traditional RTCP-based mechanism to
					synchronize streams by using the RTP and NTP timestamps of the RTCP
					Sender Reports (SR) it receives <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
				
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
RTP Header Usage</h3>

<p>
					   This section specifies the usage of some fields of the RTP header
						(<a class='info' href='#RFC3550'>specified in Section 5 of<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3550])
						with the G.718 RTP payload format.  The settings for other RTP header fields are as specified in
						<a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
						<br />
<br />

						The RTP timestamp corresponds to the sampling instant of the first
						encoded sample of the earliest frame in the payload. The timestamp
						clock frequency is 32 kHz.
						<br />
<br />

						The marker bit (M) of each of the RTP streams of the session SHALL be
						set to value 1 if the payload carries an EDU belonging to the first
						frame after an inactive period, i.e. an EDU from the first frame of a
						talkspurt. For all other packets the marker bit is set to value 0.
				
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Payload Format Parameters</h3>

<p>
				This section defines the parameters that may be used to configure
				optional features in the G.718 RTP transmission.
				<br />
<br />

				The parameters are defined here as part of the media subtype
				registration for the G.718 codec.  Mapping of the parameters into the
				Session Description Protocol (SDP) <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>
				is also provided for those applications that use SDP.  In control protocols that do not
				use MIME or SDP, the media type parameters MUST be mapped to the
				format used with that control protocol.
			
</p>
<a name="M-T-R"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Media Type Registration</h3>

<p>
					This registration is done using the template defined in RFC 4288 <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>
					and following RFC 4855 <a class='info' href='#RFC4855'>[RFC4855]<span> (</span><span class='info'>Casner, S., &ldquo;Media Type Registration of RTP Payload Formats,&rdquo; February&nbsp;2007.</span><span>)</span></a>.
					<br />
<br />

					</p>
<blockquote class="text"><dl>
<dt>Type name:</dt>
<dd>
							audio
							<br />

						
</dd>
<dt>Subtype name:</dt>
<dd>
							G718
							<br />

						
</dd>
<dt>Required parameters:</dt>
<dd>
							none
							<br />

						
</dd>
<dt>Optional parameters:</dt>
<dd>
							
<blockquote class="text">
<p>
									</p>
<blockquote class="text"><dl>
<dt>mode:</dt>
<dd>
											This parameter MAY be used to indicate whether the mode with layer L1 being present 
											or the AMR-WB
											compatible mode (with layer L1' being present) is in
											use. If this parameter is not present or the value of
											this parameter is equal to 0, the mode with layer L1
											being present is in use. Otherwise, the AMR-WB
											compatible mode is in use. When this parameter is
											present, the value MUST be either 0 or 1.
											
<blockquote class="text"><dl>
<dt>NOTE:</dt>
<dd>
													When the upcoming stereo and SWB options are present, 
													the semantics of this parameter may change.
												
</dd>
</dl></blockquote>
											<br />
<br />

										
</dd>
<dt>layers:</dt>
<dd>
											The numbers of the layers (in range from 1 to 5,
											denoting layers from L1 to L5, respectively) transmitted in this session, expressed as comma-
											separated list of layer numbers. If the parameter is 
											present, at least layer L1 or L1' MUST be included in
											the list of layers in one of the RTP sessions included
											in the G.718 session. If the parameter is not present,
											all layers up to layer L5 MAY be used in the session.
											
<blockquote class="text"><dl>
<dt>NOTE:</dt>
<dd>Why not use semantics similarly as L-ID?
</dd>
</dl></blockquote>
											<br />
<br />

										
</dd>
<dt>ptime:</dt>
<dd>
											The recommended length of time (in milliseconds) represented by the media in a packet.
											<a class='info' href='#RFC4566'>See Section 6 of<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4566].
											<br />

										
</dd>
<dt>maxptime:</dt>
<dd>
											The maximum length of time (in milliseconds) that can be encapsulated in a packet.  
											<a class='info' href='#RFC4566'>See Section 6 of<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4566].
											<br />

										
</dd>
</dl></blockquote>
								

</blockquote>
							
<blockquote class="text"><dl>
<dt>NOTE:</dt>
<dd>
									Some further study is needed to see if separate
									parameters for sending and receiving capabilities/preferences are
									needed -- especially for upcoming stereo and SWB options.
									<br />

								
</dd>
<dt>NOTE:</dt>
<dd>
									Support for upcoming SWB and stereo options
									needs to be taken into account. Basically we can either 1) extend
									the parameter "layers" to cover also this aspect, or 2) define
									separate parameter(s) for these new options when more details on
									the stereo/SWB support are available.
									<br />

								
</dd>
</dl></blockquote>
						
</dd>
<dt>Encoding considerations:</dt>
<dd>
							
							This media type is framed and contains binary data; see Section 4.8 of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
							<br />
<br />

						
</dd>
<dt>Security considerations:</dt>
<dd>
							See <a class='info' href='#S-C'>Section&nbsp;7<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> of RFC XXXX.
							
							[RFC Editor: Upon publication  as an RFC, please "XXXX" with the number assigned to this document 
							and remove this note.]
							<br />
<br />

						
</dd>
<dt>Interoperability considerations:</dt>
<dd>
							None.
							<br />

						
</dd>
<dt>Published specification:</dt>
<dd>
							RFC XXX.
							
							[RFC Editor: Upon publication  as an RFC, please "XXXX" with the number assigned to this document 
							and remove this note.]
							<br />
<br />

						
</dd>
<dt>Applications which use this media type:</dt>
<dd>
							
							For example: Voice over IP, audio and video conferencing, audio streaming and voice messaging.
							<br />
<br />

						
</dd>
<dt>Additional information:</dt>
<dd>
							None.
							<br />

						
</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd>
							
							Ari Lakaniemi, ari.lakaniemi@nokia.com
							<br />
<br />

						
</dd>
<dt>Intended usage:</dt>
<dd>
							COMMON
							<br />

						
</dd>
<dt>Restrictions on usage:</dt>
<dd>
							
							This media type depends on RTP framing, and hence is only defined for transfer via RTP <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.
							<br />
<br />

						
</dd>
<dt>Author:</dt>
<dd>
							Ari Lakaniemi, ari.lakaniemi@nokia.com
							<br />

						
</dd>
<dt>Change controller:</dt>
<dd>
							
							IETF Audio/Video Transport Working Group delegated from the IESG.
						
</dd>
</dl></blockquote><p>
				
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Mapping to SDP Parameters</h3>

<p>
					The information carried in the media type specification has a
					specific mapping to fields of the SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>,
					which is commonly used to describe RTP sessions.  When SDP is used to specify sessions
					employing the G.718 codec, the mapping is as follows:
					<br />
<br />

					</p>
<ul class="text">
<li>
							The media type ("audio") goes in SDP "m=" as the media name.
							<br />
<br />

						
</li>
<li>
							The media subtype ("G718") goes in SDP "a=rtpmap" as the encoding
							name.  The RTP clock rate in "a=rtpmap" MUST be 32000 for G.718.
							
<blockquote class="text"><dl>
<dt>NOTE:</dt>
<dd>
									The current choice for the RTP clock rate is a 'placeholder'. 
									The clock rate needs to be set according to SWB
									sampling rate, which is still T.B.D. Since the core codec employs
									16000 Hz sampling rate, an integer multiple of 16000 Hz seems to
									be a preferable choice.
									<br />

								
</dd>
</dl></blockquote>
						
</li>
<li>
							The parameters "ptime" and "maxptime" go in the SDP "a=ptime" and "a=maxptime" attributes, 
							respectively.
							<br />
<br />

						
</li>
<li>
							Any remaining parameters go in the SDP "a=fmtp" attribute by
							copying them directly from the media type string as a semicolon
							separated list of parameter=value pairs.
						
</li>
</ul><p>
				
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Offer/Answer Considerations</h3>

<p>
					The following considerations apply when using the SDP offer/answer <a class='info' href='#RFC3264'>[RFC3264]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a>
					mechanism to negotiate the G.718 transport. The parameter
					"layers" MAY be used to indicate the layer configuration for the each
					RTP session belonging to current G.718 session an end-point making
					the offer is ready to transmit and wishes to receive.
					<br />
<br />

					</p>
<ul class="text">
<li>
							In case the G.718 session consists of a single RTP session, it is
							RECOMMENDED not to impose any layer restrictions for the session
							but to use the rate control functionality to set possible
							restrictions on usage of the higher or highest layers. If the
							offer includes a layer configuration parameter, the answer MAY use
							different configuration, but the highest layer in the answer MUST
							NOT be higher than the highest layer of the offered configuration.
							
<blockquote class="text"><dl>
<dt>NOTE:</dt>
<dd>
									Support for answer modifying the layer configuration is FFS.
								
</dd>
</dl></blockquote>
							<br />
<br />

						
</li>
<li>
							In case the G.718 session consists of multiple RTP sessions, the
							answer MUST use the layer configurations provided in the offer for
							the sessions it accepts.
						
</li>
</ul><p>
				
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Declarative Usage of SDP</h3>

<p>
					In declarative usage, such as SDP in RTSP <a class='info' href='#RFC2326'>[RFC2326]<span> (</span><span class='info'>Schulzrinne, H., Rao, A., and R. Lanphier, &ldquo;Real Time Streaming Protocol (RTSP),&rdquo; April&nbsp;1998.</span><span>)</span></a>
					or SAP <a class='info' href='#RFC2974'>[RFC2974]<span> (</span><span class='info'>Handley, M., Perkins, C., and E. Whelan, &ldquo;Session Announcement Protocol,&rdquo; October&nbsp;2000.</span><span>)</span></a>,
					the parameter "layers" SHALL be interpreted to provide a set of
					layers that the sender MAY use in the session.
				
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
SDP Examples</h3>

<p>
					Some example SDP session descriptions utilizing G.718 encodings are provided below.
				
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.1"></a><h3>5.5.1.&nbsp;
Example 1</h3>

<p>
						The first example illustrates the simple case with the G.718 session employing a single RTP session and 
						the AVPF profile is offered, and the answer accepts the offer without any changes.
						<br />
<br />

						</p>
<blockquote class="text"><dl>
<dt>Offer:</dt>
<dd>
								<br />

								m=audio 49120 RTP/AVPF 97
								<br />

								a=rtpmap:97 G718/32000/1
								<br />
<br />

							
</dd>
<dt>Answer:</dt>
<dd>
								<br />

								m=audio 49120 RTP/AVPF 97
								<br />

								a=rtpmap:97 G718/32000/1
							
</dd>
</dl></blockquote><p>
					
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.2"></a><h3>5.5.2.&nbsp;
Example 2</h3>

<p>
						This example shows a bit more complex case where the G.718 session using a single RTP session and 	
						the AVPF profile is offered with the restriction to send/receive only with layers L1 and L2. The
						answer indicates that the other end-point is happy to receive (and send) layers up to L5.
						<br />
<br />

						</p>
<blockquote class="text"><dl>
<dt>Offer:</dt>
<dd>
								<br />

								m=audio 49120 RTP/AVPF 97
								<br />

								a=rtpmap:97 G718/32000/1
								<br />

								a=fmtp:97 layers=1,2
								<br />
<br />

							
</dd>
<dt>Answer:</dt>
<dd>
								<br />

								m=audio 49120 RTP/AVPF 97
								<br />

								a=rtpmap:97 G718/32000/1
								<br />

								a=fmtp:97 layers=1,2,3,4,5
							
</dd>
</dl></blockquote><p>
					
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.3"></a><h3>5.5.3.&nbsp;
Example 3</h3>

<p>
						The third example shows an G.718 session using multiple RTP sessions with the AVPF profile. The 
						answerer wishes to use only layers up to L3.
						<br />
<br />

						</p>
<blockquote class="text"><dl>
<dt>Offer:</dt>
<dd>
								<br />

								m=audio 49120 RTP/AVPF 97
								<br />

								a=rtpmap:97 G718/32000/1
								<br />

								a=fmtp:97 layers=1,2
								<br />

								a=mid=1
								<br />
<br />

								m=audio 49122 RTP/AVPF 98
								<br />

								a=rtpmap:98 G718/32000/1
								<br />

								a=fmtp:98 layers=3
								<br />

								a=mid=2
								<br />

								a=depend:lay 1
								<br />
<br />

								m=audio 49124 RTP/AVPF 99
								<br />

								a=rtpmap:99 G718/32000/1
								<br />

								a=fmtp:99 layers=4,5
								<br />

								a=mid=3
								<br />

								a=depend:lay 1 2
								<br />
<br />

							
</dd>
<dt>Answer:</dt>
<dd>
								<br />

								m=audio 49120 RTP/AVPF 97
								<br />

								a=rtpmap:97 G718/32000/1
								<br />

								a=fmtp:97 layers=1,2
								<br />

								a=mid=1
								<br />
<br />

								m=audio 49120 RTP/AVPF 98
								<br />

								a=rtpmap:98 G718/32000/1
								<br />

								a=fmtp:98 layers=3
								<br />

								a=mid=2
								<br />

								a=depend:lay 1
								<br />
<br />

							
</dd>
</dl></blockquote><p>
						Note that the dependency signaling described in <a class='info' href='#RFC5583'>[RFC5583]<span> (</span><span class='info'>Schierl, T. and S. Wenger, &ldquo;Signaling Media Decoding Dependency in the Session Description Protocol (SDP),&rdquo; July&nbsp;2009.</span><span>)</span></a>
						is used in the third example above to indicate the relationship between the
						layers distributed into separate RTP sessions.
					
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Congestion Control</h3>

<p>
				As a scalable codec, G.718 implicitly provides means for congestion
				control by providing a possibility for 'thinning' the bitstream. The
				RTP payload format according to this specification provides several
				different means for reducing the G.718 session bandwidth. The most
				appropriate mechanism (in terms of impact to the user experience)
				depends on the employed payload structure and also on the employed
				session configuration (single RTP session or multiple RTP sessions).
				The following means (in no particular order) can be used to assist
				congestion control procedures -- either by the sender or by the
				intermediate node.
				<br />
<br />

				</p>
<ul class="text">
<li>
						The payloads carrying the EDUs representing the highest layers in an G.718 session can be dropped, 
						along with all associated transport blocks
						<br />
<br />

					
</li>
<li>
						The transport blocks carrying the EDUs representing the highest layers within the payload can be dropped
						<br />
<br />

					
</li>
<li>
						Transport blocks or payloads carrying EDUs belonging to
						redundant frames included in the payload can be dropped
						<br />
<br />

					
</li>
</ul><p>
			
</p>
<a name="S-C"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
				RTP packets using the payload format defined in this specification
				are subject to the security considerations discussed in the RTP
				specification <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>, 
				and in any appropriate RTP profile (for
				example <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>
				or <a class='info' href='#RFC4585'>[RFC4585]<span> (</span><span class='info'>Ott, J., Wenger, S., Sato, N., Burmeister, C., and J. Rey, &ldquo;Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF),&rdquo; July&nbsp;2006.</span><span>)</span></a>.
				This implies that confidentiality
				of the media streams is achieved by encryption; for example, through
				the application of SRTP <a class='info' href='#RFC3711'>[RFC3711]<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a>.
				Because the data compression used
				with this payload format is applied end-to-end, any encryption needs
				to be performed after compression.
				<br />
<br />

				A potential denial-of-service threat exists for data encodings using
				compression techniques that have non-uniform receiver-end
				computational load.  The attacker can inject pathological datagrams
				into the stream that will increase the processing load of the decoder
				and may cause the receiver to be overloaded. For example inserting
				additional EDUs representing the higher enhancement layers on top of
				the ones actually transmitted may increase the decoder load. However,
				the G.718 codec is not particularly vulnerable to such an attack,
				since the majority of the computational load in an G.718 session is
				associated to the encoder.  Another form of possible attach might be
				forging of codec bit-rate control messages, which may result in
				encoder operating employing higher number of enhancement layers than
				originally intended and thereby requiring larger amount of
				computation resources. Therefore, the usage of data origin
				authentication and data integrity protection of at least the RTP
				packet is RECOMMENDED; for example, with SRTP <a class='info' href='#RFC3711'>[RFC3711]<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a>.
				<br />
<br />

				Note that the appropriate mechanism to ensure confidentiality and
				integrity of RTP packets and their payloads is very dependent on the
				application and on the transport and signaling protocols employed.
				Thus, although SRTP is given as an example above, other possible
				choices exist.
				<br />
<br />

				Note that end-to-end security with either authentication, integrity
				or confidentiality protection will prevent a network element not
				within the security context from performing media-aware operations
				other than discarding complete packets.  To allow any (media-aware)
				intermediate network element to perform its operations, it is
				required to be a trusted entity which is included in the security
				context establishment.
			
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>
				IANA is kindly requested to register a media type for the G.718 codec for RTP transport, as specified in 
				<a class='info' href='#M-T-R'>Section&nbsp;5.1<span> (</span><span class='info'>Media Type Registration</span><span>)</span></a>
				of this document.
			
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>
				Thanks to Qin Wu for useful review and commentary.
			
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="AMR-WB">[AMR-WB]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/26171.htm">Speech codec speech processing functions; Adaptive Multi-Rate - Wideband (AMR-WB) speech codec; General description</a>,&rdquo; 3GPP TS&nbsp;26.171 5.0.0, April&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU.G718.2008">[ITU.G718.2008]</a></td>
<td class="author-text">International Telecommunications Union, &ldquo;Frame Error Robust Narrowband and Wideband Embedded Variable Bit-Rate Coding of Speech and Audio from 8-32 Kbit/s,&rdquo; ITU-T&nbsp;Recommendation G.718, May&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3551">[RFC3551]</a></td>
<td class="author-text">Schulzrinne, H. and S. Casner, &ldquo;<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>,&rdquo; STD&nbsp;65, RFC&nbsp;3551, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3551.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3551.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3711">[RFC3711]</a></td>
<td class="author-text">Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>,&rdquo; RFC&nbsp;3711, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3711.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4288">[RFC4288]</a></td>
<td class="author-text">Freed, N. and J. Klensin, &ldquo;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>,&rdquo; BCP&nbsp;13, RFC&nbsp;4288, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4288.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4585">[RFC4585]</a></td>
<td class="author-text">Ott, J., Wenger, S., Sato, N., Burmeister, C., and J. Rey, &ldquo;<a href="http://tools.ietf.org/html/rfc4585">Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF)</a>,&rdquo; RFC&nbsp;4585, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4585.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4855">[RFC4855]</a></td>
<td class="author-text">Casner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>,&rdquo; RFC&nbsp;4855, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4855.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4867">[RFC4867]</a></td>
<td class="author-text">Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie, &ldquo;<a href="http://tools.ietf.org/html/rfc4867">RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs</a>,&rdquo; RFC&nbsp;4867, April&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4867.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5583">[RFC5583]</a></td>
<td class="author-text">Schierl, T. and S. Wenger, &ldquo;<a href="http://tools.ietf.org/html/rfc5583">Signaling Media Decoding Dependency in the Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;5583, July&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5583.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="McCanne">[McCanne]</a></td>
<td class="author-text">McCanne, S., Jacobson, V., and M. Vetterli, &ldquo;Receiver-driven layered multicast,&rdquo; ACM SIGCOMM Computer Communication Review&nbsp;Volume 26 Issue 4, October&nbsp;1996.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2326">[RFC2326]</a></td>
<td class="author-text"><a href="mailto:schulzrinne@cs.columbia.edu">Schulzrinne, H.</a>, <a href="mailto:anup@netscape.com">Rao, A.</a>, and <a href="mailto:robla@real.com">R. Lanphier</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2326">Real Time Streaming Protocol (RTSP)</a>,&rdquo; RFC&nbsp;2326, April&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2326.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2974">[RFC2974]</a></td>
<td class="author-text">Handley, M., Perkins, C., and E. Whelan, &ldquo;<a href="http://tools.ietf.org/html/rfc2974">Session Announcement Protocol</a>,&rdquo; RFC&nbsp;2974, October&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2974.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3828">[RFC3828]</a></td>
<td class="author-text">Larzon, L-A., Degermark, M., Pink, S., Jonsson, L-E., and G. Fairhurst, &ldquo;<a href="http://tools.ietf.org/html/rfc3828">The Lightweight User Datagram Protocol (UDP-Lite)</a>,&rdquo; RFC&nbsp;3828, July&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3828.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4340">[RFC4340]</a></td>
<td class="author-text">Kohler, E., Handley, M., and S. Floyd, &ldquo;<a href="http://tools.ietf.org/html/rfc4340">Datagram Congestion Control Protocol (DCCP)</a>,&rdquo; RFC&nbsp;4340, March&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4340.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5117">[RFC5117]</a></td>
<td class="author-text">Westerlund, M. and S. Wenger, &ldquo;<a href="http://tools.ietf.org/html/rfc5117">RTP Topologies</a>,&rdquo; RFC&nbsp;5117, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5117.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6051">[RFC6051]</a></td>
<td class="author-text">Perkins, C. and T. Schierl, &ldquo;<a href="http://tools.ietf.org/html/rfc6051">Rapid Synchronisation of RTP Flows</a>,&rdquo; RFC&nbsp;6051, November&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc6051.txt">TXT</a>).</td></tr>
</table>

<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Payload Examples</h3>

<p>
				The G.718 payload structure enables flexible transport either by
				carrying all layers in the same payload or separating the layers into
				separate payloads. The following subsections illustrate different
				possibilities for transport by simple examples. Note that examples do
				not show the full payload structure to keep the illustration simple.
			
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Simple Payload Examples</h3>

<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.1"></a><h3>A.1.1.&nbsp;
All The Layers in The Same Payload</h3>

<p style='text-align: left'>
						The illustration below shows layers L1-L3 from two encoded frames
						encapsulated into separate payloads using single transport block.
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+------+------+------+
 | RTP1  | L-ID=3 |NF=0 |F1-L1 |F1-L2 |F1-L3 |
 +-------+--------+-----+------+------+------+

 +-------+--------+-----+------+------+------+
 | RTP2  | L-ID=3 |NF=0 |F2-L1 |F2-L2 |F2-L3 |
 +-------+--------+-----+------+------+------+
</pre></div>
<p style='text-align: left'>
						In the case where the same layers from two input frames are encapsulated into
						one payload using single transport block, the structure is as shown below.
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+------+------+------+------+------+------+
 | RTP1  | L-ID=3 |NF=1 |F1-L1 |F2-L1 |F1-L2 |F2-L2 |F3-L3 |F2-L3 |
 +-------+--------+-----+------+------+------+------+------+------+
</pre></div>
<p style='text-align: left'>
						The third example illustrates the case where the layers L1-L3 from
						two input frames are encapsulated into one payload using two separate
						transport blocks, the first one carrying L1 and the other one
						containing L2 and L3.
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+------+------+
 | RTP1  | L-ID=1 |NF=1 |F1-L1 |F2-L1 |
 +-------+--------+-----+------+------+------+------+
         | L-ID=7 |NF=1 |F1-L2 |F2-L2 |F2-L2 |F2-L3 |
         +--------+-----+------+------+------+------+
</pre></div>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.2"></a><h3>A.1.2.&nbsp;
Layers in Seperate RTP Streams</h3>

<p>
						In this case the data for each layer is transmitted in its own payload.
						
<p style='text-align: left'>
								In the first example each transport block including a single EDU is carried in its own RTP payload.
							
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+-----+    +-------+--------+-----+-----+
 | RTP1a | L-ID=1 |NF=0 |F1-L1|    | RTP1b | L-ID=6 |NF=0 |F1-L2|
 +-------+--------+-----+-----+    +-------+--------+-----+-----+

 +-------+--------+-----+-----+    +-------+--------+-----+-----+
 | RTP1c |L-ID=10 |NF=0 |F1-L3|    | RTP2a | L-ID=1 |NF=0 |F2-L1|
 +-------+--------+-----+-----+    +-------+--------+-----+-----+

 +-------+--------+-----+-----+    +-------+--------+-----+-----+
 | RTP2b | L-ID=6 |NF=0 |F2-L2|    | RTP2c |L-ID=10 |NF=0 |F2-L3|
 +-------+--------+-----+-----+    +-------+--------+-----+-----+
</pre></div>
						
<p style='text-align: left'>
								If the payloads carry data from two consecutive input frames, the
								same encoded data as in the previous example is arranged as follows.
							
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+-------+--------+-----+-----+-----+
 | RTP1a | L-ID=1 |NF=1 |F1-L1|F2-L1|
 +-------+--------+-----+-----+-----+

 +-------+--------+-----+-----+-----+
 | RTP1b | L-ID=6 |NF=1 |F1-L2|F2-L2|
 +-------+--------+-----+-----+-----+

 +-------+--------+-----+-----+-----+
 | RTP1c |L-ID=10 |NF=1 |F1-L3|F2-L3|
 +-------+--------+-----+-----+-----+
</pre></div>
					

<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Advanced Examples</h3>

<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2.1"></a><h3>A.2.1.&nbsp;
Different Update Rate for Subset of Layers</h3>

<p style='text-align: left'>
							An example employing different update rates (i.e. different number of
							frames per packet) for selected subsets of layers. In these examples
							all core codec layers L1-L5 are shown.
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+-----+-----+-----+-----+
 | RTP1  | L-ID=1 |NF=3 |F1-L1|F2-L1|F3-L1|F4-L1|
 +-------+--------+-----+-----+-----+-----+-----+

 +-------+--------+-----+-----+-----+-----+-----+
 | RTP2a | L-ID=7 |NF=1 |F1-L2|F2-L2|F1-L3|F2-L3|
 +-------+--------+-----+-----+-----+-----+-----+

 +-------+--------+-----+-----+-----+
 | RTP3a |L-ID=14 |NF=0 |F1-L4|F1-L5|
 +-------+--------+-----+-----+-----+

 +-------+--------+-----+-----+-----+
 | RTP3b |L-ID=14 |NF=0 |F2-L4|F2-L5|
 +-------+--------+-----+-----+-----+

 +-------+--------+-----+-----+-----+-----+-----+
 | RTP2b | L-ID=7 |NF=1 |F3-L2|F4-L2|F3-L3|F4-L3|
 +-------+--------+-----+-----+-----+-----+-----+

 +-------+--------+-----+-----+-----+
 | RTP3c |L-ID=14 |NF=0 |F3-L4|F3-L5|
 +-------+--------+-----+-----+-----+

 +-------+--------+-----+-----+-----+
 | RTP3d |L-ID=14 |NF=0 |F4-L4|F4-L5|
 +-------+--------+-----+-----+-----+
</pre></div>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2.2"></a><h3>A.2.2.&nbsp;
Redundant Frames With Limited Set of Layers</h3>

<p style='text-align: left'>
							An example transmitting layers L1-L3 as primary data and L1 (of the
							previous frame) as redundant data is shown below. Each payload
							carries one primary (i.e. new) frame in one transport block and one
							redundant frame, which in this example is the frame preceding the
							primary frame, in another transport block.
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+-----+--------+-----+-----+-----+-----+
 | RTP1  | L-ID=1 |NF=0 |F0-L1| L-ID=3 |NF=0 |F1-L1|F1-L2|F1-L3|
 +-------+--------+-----+-----+--------+-----+-----+-----+-----+

 +-------+--------+-----+-----+--------+-----+-----+-----+-----+
 | RTP2  | L-ID=1 |NF=0 |F1-L1| L-ID=3 |NF=0 |F2-L1|F2-L2|F2-L3|
 +-------+--------+-----+-----+--------+-----+-----+-----+-----+

 +-------+--------+-----+-----+--------+-----+-----+-----+-----+
 | RTP3  | L-ID=1 |NF=0 |F2-L1| L-ID=3 |NF=0 |F3-L1|F3-L2|F3-L3|
 +-------+--------+-----+-----+--------+-----+-----+-----+-----+
</pre></div>
<p style='text-align: left'>
							Alternatively, the payload carrying also redundant data for a subset
							of layers can be arranged differently, as shown in the example below.
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 +-------+--------+-----+-----+-----+-----+--------+-----+-----+
 | RTP1  | L-ID=3 |NF=0 |F0-L1|F0-L2|F0-L3| L-ID=1 |NF=0 |F1-L1|
 +-------+--------+-----+-----+-----+-----+--------+-----+-----+

 +-------+--------+-----+-----+-----+-----+--------+-----+-----+
 | RTP2  | L-ID=3 |NF=0 |F1-L1|F1-L2|F1-L3| L-ID=1 |NF=0 |F2-L1|
 +-------+--------+-----+-----+-----+-----+--------+-----+-----+

 +-------+--------+-----+-----+-----+-----+--------+-----+-----+
 | RTP3  | L-ID=3 |NF=0 |F2-L1|F2-L2|F2-L3| L-ID=1 |NF=0 |F3-L1|
 +-------+--------+-----+-----+-----+-----+--------+-----+-----+
</pre></div>
<p style='text-align: left'>
							Now the first transport block carries the primary data and the second
							transport block carries the redundant data, which in this case covers
							the frame following the primary frame. The benefit of this approach
							is that the redundant data is included in the last (secondary)
							transport block of the payload, which might be beneficial for
							possible payload scaling operation within the network.
						
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Glen Zorn (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Network Zen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">227/358 Thanon Sanphawut</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bang Na, Bangkok  10260</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Thailand</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+66 (0) 87-040-4617</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:gwz@net-zen.net">gwz@net-zen.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ye-Kui Wang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">400 Somerset Corp Blvd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Suite 402</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bridgewater, NJ  08807</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 (908) 541-3518</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:yekuiwang@huawei.com">yekuiwang@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ari Lakaniemi</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FIN-00045 Nokia Group</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358-71-8008000</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:ari.lakaniemi@nokia.com">ari.lakaniemi@nokia.com</a></td></tr>
</table>
</body></html>
