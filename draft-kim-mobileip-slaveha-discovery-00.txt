


INTERNET-DRAFT					         Pyungsoo Kim
Expires: June 2003				  Soohong Daniel Park    
						        Youngkeun Kim
						  Samsung Electronics
						        December 2002
                                             	
                                             	
                                             	 

      Efficient and Fast Discovery of Slave Home Agent's Address
             <draft-kim-mobileip-slaveha-discovery-00.txt>


                         Status of This Memo

   This document is an Internet-Draft and is subject to all provisions
   of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other
   documents at any time.  It is inappropriate to use Internet-Drafts
   as reference material or to cite them other than as "work in
   progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html. 

   
   
   
   
   
   
   
                                ABSTRACT
   
   This document proposes a new mechanism in Mobile IPv6, which allows 
   a mobile node to discover promptly a suitable slave home agent's 
   address on its home link when the mobile node may not know a master
   home agent's address due to some reasons. To implement the proposed
   mechanism, new Binding Update/Acknowledgement messages are defined.
   The proposed mechanism might be more efficient and general, and 
   faster than the existing Home Agent Address Discovery in [1].
  
   
      
   



         



Kim, Park, Kim               Expires June 2003                 [Page 1]

Internet Draft         Discovery of slave HA's address         Dec 2002

                               Table of Contents

 1. Introduction......................................................2                                   
 2. Terminology.......................................................4 
 3. Efficient and Fast Discovery of Slave Home Agent's Address........4
    3.1. New Binding Update/Acknowledgement Message Formats...........4
       3.1.1. New Binding Update Message Format.......................4
       3.1.2. New Binding Acknowledgement Message Format..............5
    3.2. Operation Procedure..........................................6   
 4. Advantages........................................................8
 5. Authors' Addresses................................................8

 

1. Introduction

   In Mobile IPv6, after deciding to change its primary care-of 
   address, a mobile node sends a Binding Update to its home agent and
   receives a Binding Acknowledgment from its home agent in order to 
   register the care-of address. Then, the mobile node needs to send a
   Binding Update to its home agent periodically according to the 
   lifetime. However, sometimes, the mobile node may not know the 
   address of a home agent for it. For example, the home agent of the 
   mobile node has been broken, or repaired, or reconfigured while the 
   mobile node has been away from home, such that the home agent has 
   been replaced by a different router serving this role.   
   
   In this case, the mobile node may attempt to discover a suitable 
   home agent's address on its home link. To do so, in [1] the mobile 
   node sends a Home Agent Address Discovery Request message to the 
   Mobile IPv6 Home-Agents anycast address [2] for its home IP subnet 
   prefix. Then, the home agent on its home link that receives this 
   request message will return a Home Agent Address Discovery Reply 
   message, giving the Home Agent List which has all home agents' 
   addresses operating on the home link. Figure 1 shows the message
   flow for the existing mechanism in [1].

   However, in the existing mechanism [1], the mobile node might select 
   generally the most preferred home agent address or the one of more 
   preferred ones from the Home Agent List. This means that one or a 
   few home agent addresses could be sufficient for the mobile node 
   which discovers a suitable home agent's address. Therefore, it is 
   somewhat inefficient that the mobile node receives the Home Agent 
   List with all home agents' addresses operating on the home link.
   In addition, in the existing mechanism, it is recommended that the
   home agent's preference is configured manually by a system 
   administrator. Therefore, it could be noted that the preference 
   order in the Home Agent List will not be varied frequently.
   
   In this document, an efficient and general mechanism will be 
   proposed newly for the mobile node to discover promptly a suitable 
   home agent's address on its home link. Hereafter, a home agent which
   is now doing binding will be called the "master home agent" and the
   home agent which can do binding in future will be called the "slave 
   home agent".   

 
 
 



Kim, Park, Kim               Expires June 2003                 [Page 2]

Internet Draft         Discovery of slave HA's address         Dec 2002

   Firstly, new Binding Update/Acknowledgment messages are defined to
   implement the proposed mechanism. Then, using these messages, the 
   mobile node performs the Binding Update/Acknowledgment to register
   the care-of address or to renew binding periodically according to 
   the lifetime. When the mobile node registers the care-of address in
   the first Binding Update/Acknowledgment, the mobile node sends a 
   newly defined Binding Update message with the request of a slave 
   home agent's address to the master home agent. Then, the master 
   home agent will reply a newly defined Binding Acknowledgment message
   with only one or a few slave home agents' addresses according to 
   preference. Then, the mobile node might select the most preferred 
   slave home agent's address or the one of slave home agents' 
   addresses.
   
   The proposed mechanism provides several advantages over the existing
   mechanism in [1]. The proposed mechanism can omit the Home Agent 
   Address Discovery Request/Reply used in the existing one. This means
   the proposed mechanism can provide the faster discovery of the slave
   home agent's address than the existing one. The omission of the Home
   Agent Address Discovery Request/Reply might reduce amount of traffic
   when there are many mobile nodes that are now doing binding with the
   master home agent. In addition, the proposed mechanism requires only
   one or a few slave home agents' addresses while the existing one 
   requires all slave home agents' addresses. This means the proposed 
   mechanism can be more efficient than the existing one. Moreover, the
   proposed mechanism can be implemented as the existing one according
   to setting bit or status code, which means the generality of the 
   proposed mechanism.


                                                    Current   Other 
            MN                                        HA       HAs
       1st   |--------------BU (normally)------------->|        |
     BU/BACK |                                         |        | 
             |<------------BACK (normally)-------------|        |
             |                                         |        | 
     Before  |--------------BU (normally)------------->|        |
   Expiration|                                         |        | 
             |<------------BACK (normally)-------------|        |
             |                   :                     |        |
             |                   :                     |        |
     Before  |--------------BU (normally)------------->|        |
   Expiration|                                         |        |
             |<--------ICMP Error (Unreachable)        |        |
             |                                         |        |
             |-------Discovery Request (Anycast)------>|        |
             |                                         |        |   
     Select  |<--Discovery Reply (all HAs' addresses)--|        |
   HA address|                                               Current
             |                                                 HA
      1st    |------------------BU (normally)------------------>|  
     BU/BACK |                                                  |
             |<----------------BACK (normally)------------------|  
    
            
             Figure 1 : Message flow for existing mechanism






Kim, Park, Kim               Expires June 2003                 [Page 3]

Internet Draft         Discovery of slave HA's address         Dec 2002

2. Terminology

   Mobile Node 
       A Mobile IPv6 host capable of moving its point of attachment
       to the Internet. 

   Home Agent
       A router on a mobile node's home link with which the mobile 
       node has registered its current care-of address.

   Master Home Agent
       A home agent that is now doing binding.

   Slave Home Agent
       A home agent that can do binding in future.


3. Efficient and Fast Discovery of Slave Home Agent's Address

   In this document, an efficient and general mechanism will be 
   proposed newly for the mobile node to discover promptly a suitable 
   home agent's address on its home link. Hereafter, a home agent which
   is now doing binding will be called the "master home agent" and the
   home agent which can do binding in future will be called the "slave 
   home agent".   
          
3.1. New Binding Update/Acknowledgement Message Formats

   Firstly, new Binding Update/Acknowledgment messages are defined to 
   implement the proposed mechanism. Then, using these messages, the 
   mobile node performs the Binding Update/Acknowledgment to register 
   the care-of address or to renew binding periodically according to
   the lifetime. 
  
3.1.1. New Binding Update Message Format

   The Binding Update (BU) message is used by a mobile node to notify
   other nodes of a new care-of address for itself.  

                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |          Sequence #           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |A|H|S|D|L|R|    Reserved       |           Lifetime            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                        Mobility options                       .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      Slave Request (R)

         The Slave Request (R) bit is set by the sending mobile node
         to request a Binding Acknowledgement with one or a few slave
         home agents' addresses.
         
      Other Fields

     	 Their definitions can be shown in [1].


Kim, Park, Kim               Expires June 2003                 [Page 4]

Internet Draft         Discovery of slave HA's address         Dec 2002

3.1.2. New Binding Acknowledgement Message Format

   The Binding Acknowledgement (BACK) is used to acknowledge receipt of 
   a Binding Update.  
    
                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |    Status     |Reser'd| Number|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Sequence #          |           Lifetime            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .    
    .          Addresses of slave HAs (Preference Ordering)         .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                        Mobility Options                       .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 
      Status

         8-bit unsigned integer indicating the disposition of the
         Binding Update. The following Status codes are defined newly
         or additionally:

              0   accepts Binding Update, but will not reply slave 
                  home agents' addresses.
              1   accepts Binding Update, and will reply slave 
                  home agents' addresses.

      Number

         The number of slave home agents' addresses. The maximum value
         is 8. However, this value is usually set by 1 because it might 
         be general that the mobile node selects the most preferred 
         slave home agent's address.

      Addresses of slave HAs

         A list of one or a few slave home agents' addresses on the
         home link for the mobile node. These addresses are ordered 
         according to the preference of slave home agents. Note that 
         the preference of slave home agents are recommended to be
         configured manually by a system administrator as shown in
         the existing mechanism [1].
             
      Other Fields

         Their definitions can be shown in [1].                  










Kim, Park, Kim               Expires June 2003                 [Page 5]

Internet Draft         Discovery of slave HA's address         Dec 2002

3.2. Operation Procedure
           
   In Mobile IPv6, after deciding to change its primary care-of 
   address, a mobile node sends a Binding Update to its master home 
   agent and receives a Binding Acknowledgment from its home agent in 
   order to register the care-of address. In this time, if the mobile 
   node wants to request a suitable slave home agent's address, the 
   Slave Request (R) bit is set in the Binding Update message.    
   
   The master home agent node that receives this request message
   will reply a newly defined Binding Acknowledgment message to the 
   mobile node. Assume the master home agent accepts the Binding 
   Update. In this time, if the master home agent wants to reply one or
   a few slave home agents' addresses according to the preference, 
   Status code is set by 1 in the Binding Acknowledgment message.    
   Note that the preference of slave home agents are recommended to be
   configured manually by a system administrator as shown in the 
   existing mechanism [1], which could mean that the preference order
   will not be varied frequently.   
      
   The mobile node that receives this reply message checks the Status 
   code firstly. If Status code is 1, the mobile node selects and 
   caches the most preferred slave home agent's address or the one of 
   slave home agents' addresses.  As mentioned previously, the mobile 
   node might select and cache usually the most preferred slave home 
   agent's address
   
   After then, if the mobile node wants the services of the master home
   agent beyond the current registration period (the lifetime), 
   the mobile node sends a new Binding Update to it well before the 
   expiration of this period, even if it is not changing its primary 
   care-of address. In this case, the Binding Update/Acknowledgment is 
   operated normally. That is, the Slave Request (R) bit in the Binding 
   Update message must be cleared.
  
   However, sometimes, the mobile node may not know the address of a 
   master home agent for it. For example, the master home agent has 
   been broken, or repaired, or reconfigured while the mobile node has
   been away from home, such that the master home agent has been 
   replaced by a different router serving this role.    
   
   In this time, the mobile node can acquire the most preferred slave 
   home agent's address which was cached before. The selected slave 
   home agent becomes the new master home agent for the mobile node. 
   Then, the mobile node repeats above procedure. Figure 2 shows the
   message flow for the proposed mechanism.

   The proposed mechanism can be equivalent to the existing one 
   according to setting the Slave Request (R) bit or Status code. For 
   example, if the mobile node doesn't want to request a suitable slave
   home agent's address, the Slave Request (R) bit is cleared in the 
   Binding Update message. In addition, regardless of the Slave Request
   (R) bit, if the master home agent wants to reply one or a few slave 
   home agents' addresses according to the preference, Status code is 
   set by 0 in the Binding Acknowledgment message. Figure 3 shows the 
   message flow for the proposed mechanism in this case. This means the
   generality of the proposed mechanism.





Kim, Park, Kim               Expires June 2003                 [Page 6]

Internet Draft         Discovery of slave HA's address         Dec 2002


                                                    Master    Slave
            MN                                        HA       HAs
       1st   |--------------BU (R is set)------------->|        |
     BU/BACK |                                         |        | 
             |<------------BACK (Status=1)-------------|        |
             |                                         |        | 
     Before  |--------------BU (normally)------------->|        |
   Expiration|                                         |        | 
             |<------------BACK (normally)-------------|        |
             |                   :                     |        |
             |                   :                     |        |
     Before  |--------------BU (normally)------------->|        |
   Expiration|                                         |        |
             |<--------ICMP Error (Unreachable)        |        |
     Select  |                                               Master
   HA address|                                                 HA
             |-------------BU (R is set or cleared)------------>|  
       1st   |                                                  |
     BU/BACK |<-----------BACK (Status=1 or Status=0)-----------|  
  
        
           Figure 2 : Message flow for proposed mechanism




                                                    Master    Slave
              MN                                      HA       HAs
       1st   |------------BU (R is cleared)----------->|        |
     BU/BACK |                                         |        | 
             |<------------BACK (Status=0)-------------|        |
             |                                         |        | 
     Before  |--------------BU (normally)------------->|        |
   Expiration|                                         |        | 
             |<------------BACK (normally)-------------|        |
             |                   :                     |        |
             |                   :                     |        |
     Before  |--------------BU (normally)------------->|        |
   Expiration|                                         |        |
             |<--------ICMP Error (Unreachable)        |        |
             |                                         |        |
             |-------Discovery Request (Anycast)------>|        |
             |                                         |        |   
     Select  |<--Discovery Reply (all HAs' addresses)--|        |
   HA address|                                               Master
             |                                                 HA
      1st    |-------------BU (R is set or cleared)------------>|  
     BU/BACK |                                                  |
             |<-----------BACK (Status=1 or Status=0)-----------|  
  

      Figure 3 : Message flow for proposed mechanism equivalent to 
                 existing mechanism








Kim, Park, Kim               Expires June 2003                 [Page 7]

Internet Draft         Discovery of slave HA's address         Dec 2002
  
  
4. Advantages
 
   The proposed mechanism provides several advantages over the existing
   mechanism in [1]. The proposed mechanism can omit the Home Agent 
   Address Discovery Request/Reply used in the existing one. This means
   the proposed mechanism can provide the faster discovery of the slave
   home agent's address than the existing one. The omission of the Home
   Agent Address Discovery Request/Reply might reduce amount of traffic
   when there are many mobile nodes that are now doing binding with the
   master home agent. In addition, the proposed mechanism requires only
   one or a few slave home agents' addresses while the existing one 
   requires all slave home agents' addresses. This means the proposed 
   mechanism can be more efficient than the existing one. Moreover, the
   proposed mechanism can be equivalent to the existing one according 
   to setting bit or status code, which means the generality of the 
   proposed mechanism.


5. References
    
[1]  D. Johnson, C. Perkins and J. Arkko, Mobility Support in IPv6,
     draft-ietf-mobileip-ipv6-19.txt, Oct 2002
[2]  D. Johnson and S. Deering.  Reserved IPv6 Subnet Anycast
     Addresses.  Request for Comments (Proposed Standard) 2526,
     Internet Engineering Task Force, March 1999.


6. Authors' Addresses

  Pyungsoo Kim
  Samsung Electronics
  Digital Media R&D Center
  416, Maetan-3Dong,Paldal-Gu,
  Suwon City, Gyeonggi-Do,Korea
  Phone: +82-31-200-4635
  Email:kimps@samsung.com


  Soohong Daniel Park
  Samsung Electronics
  Digital Media R&D Center
  416, Maetan-3Dong,Paldal-Gu,
  Suwon City, Gyeonggi-Do,Korea
  Phone: +82-31-200-3728
  Email:soohong.park@samsung.com


  Youngkeun Kim
  Samsung Electronics
  Digital Media R&D Center
  416, Maetan-3Dong,Paldal-Gu,
  Suwon City, Gyeonggi-Do,Korea
  Phone: +82-31-200-3772
  Email:ykksam@samsung.com



 


 
Kim, Park, Kim               Expires June 2003                 [Page 8]
