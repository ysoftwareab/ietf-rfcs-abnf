<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>With-defaults capability for NETCONF</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="With-defaults capability for NETCONF">
<meta name="keywords" content="with-defaults, XML">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">NETCONF</td><td class="header">A. Bierman</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">InterWorking Labs</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">B. Lengyel</td></tr>
<tr><td class="header">Expires: December 11, 2010</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 9, 2010</td></tr>
</table></td></tr></table>
<h1><br />With-defaults capability for NETCONF<br />draft-ietf-netconf-with-defaults-09</h1>

<h3>Abstract</h3>

<p>
	The NETCONF protocol defines ways to read and edit configuration data
	from a NETCONF server.  In some cases, part of this data may not be set 
        by the NETCONF client, but rather a default value known to the server
        is used instead.  In many situations the 
	NETCONF client has a priori knowledge about default data, so the NETCONF 
	server does not need to save it in a NETCONF datastore or 
        send it to the client in a retrieval operation reply. In other situations the 
	NETCONF client will need this data from the server.
        Not all server implementations treat this default data the same way.  

	This document defines a capability-based extension to 
	the NETCONF protocol that allows the NETCONF client to 
        identify how defaults are processed by the server, and
        also defines new mechanisms for client control of
        server processing of default data.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 11, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Defaults Handling Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Client Controlled Retrieval of Default Data<br />
<a href="#basicHandling">2.</a>&nbsp;
Defaults Handling Basic Modes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.</a>&nbsp;
'report-all' Basic Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.1.1.</a>&nbsp;
'report-all' Basic Mode Retrieval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.1.2.</a>&nbsp;
'report-all' &lt;with-defaults&gt; Retrieval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.1.3.</a>&nbsp;
'report-all' &lt;edit-config&gt; and &lt;copy-config&gt; Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.2.</a>&nbsp;
'trim' Basic Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">2.2.1.</a>&nbsp;
'trim' Basic Mode Retrieval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">2.2.2.</a>&nbsp;
'trim' &lt;with-defaults&gt; Retrieval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">2.2.3.</a>&nbsp;
'trim' &lt;edit-config&gt; and &lt;copy-config&gt; Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">2.3.</a>&nbsp;
'explicit' Basic Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">2.3.1.</a>&nbsp;
'explicit' Basic Mode Retrieval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">2.3.2.</a>&nbsp;
'explicit' &lt;with-defaults&gt; Retrieval<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">2.3.3.</a>&nbsp;
'explicit' &lt;edit-config&gt; and &lt;copy-config&gt; Behavior<br />
<a href="#retrievalHandling">3.</a>&nbsp;
Retrieval of Default Data<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reportAllRetrievalMode">3.1.</a>&nbsp;
'report-all' Retrieval Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#trimRetrievalMode">3.2.</a>&nbsp;
'trim' Retrieval Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#explicitRetrievalMode">3.3.</a>&nbsp;
'explicit' Retrieval Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reportAllTaggedRetrievalMode">3.4.</a>&nbsp;
'report-all-tagged' Retrieval Mode<br />
<a href="#WDCAP">4.</a>&nbsp;
With-defaults Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.3.</a>&nbsp;
Conformance<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#capabilityIdChapter">4.4.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.5.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">4.6.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#copyConfigOperation">4.6.1.</a>&nbsp;
&lt;get&gt;, &lt;get-config&gt;, and &lt;copy-config&gt; Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#editConfigOperation">4.6.2.</a>&nbsp;
&lt;edit-config&gt; Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">4.6.3.</a>&nbsp;
Other Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">4.7.</a>&nbsp;
Interactions with Other Capabilities<br />
<a href="#YANGMOD">5.</a>&nbsp;
YANG Module for the &lt;with-defaults&gt; Parameter<br />
<a href="#ATTRXSD">6.</a>&nbsp;
XSD for the 'wd:default' Attribute<br />
<a href="#IANA">7.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor24">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
Normative References<br />
<a href="#anchor26">Appendix&nbsp;A.</a>&nbsp;
Usage Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#EXAMPLEMOD">A.1.</a>&nbsp;
Example YANG Module<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#DATASET">A.2.</a>&nbsp;
Example Data Set<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">A.3.</a>&nbsp;
Protocol Operation Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">A.3.1.</a>&nbsp;
&lt;with-defaults&gt; = 'report-all'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">A.3.2.</a>&nbsp;
&lt;with-defaults&gt; = 'report-all-tagged'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">A.3.3.</a>&nbsp;
&lt;with-defaults&gt; = 'trim'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">A.3.4.</a>&nbsp;
&lt;with-defaults&gt; = 'explicit'<br />
<a href="#anchor32">Appendix&nbsp;B.</a>&nbsp;
Change Log<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">B.1.</a>&nbsp;
08-09<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">B.2.</a>&nbsp;
07-08<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor35">B.3.</a>&nbsp;
06-07<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">B.4.</a>&nbsp;
05-06<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor37">B.5.</a>&nbsp;
04-05<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor38">B.6.</a>&nbsp;
03-04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor39">B.7.</a>&nbsp;
02-03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor40">B.8.</a>&nbsp;
01-02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor41">B.9.</a>&nbsp;
00-01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor42">B.10.</a>&nbsp;
-00<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	The NETCONF protocol <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> defines ways to read 
        configuration and state data from a NETCONF server. 
        Part of the configuration data may not be set by the NETCONF client, 
	but rather by a default value from the data model. In many situations the 
	NETCONF client has a priori knowledge about default data, so the NETCONF 
	server does not need to send it to the client. A priori knowledge can be
        obtained, e.g., a document formally describing the data models supported by 
        the NETCONF server. 
      
</p>
<p>
        It can be important for a client to know exactly how a server
        implementation will handle default data.  There are subtle
        differences in some protocol operations where the defaults
        handling behavior of the server will affect the outcome
        of the operation.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Terminology</h3>

<p>
	  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
	  "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
	  and "OPTIONAL" in this document are to be interpreted as
	  described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>Data model schema:</dt>
<dd>
	      A document or set of documents describing the 
	      data models supported by the NETCONF server.
	    
</dd>
<dt>Management Application:</dt>
<dd>
              A computer program running outside the NETCONF server  
              that configures or supervises the NETCONF server. 
              A management application can reach the device e.g. 
              via NETCONF, CLI or SNMP.
	    
</dd>
<dt>Schema default data:</dt>
<dd>
              Data specified in the data model schema as default, 
              that is set or used by the device whenever the NETCONF client or 
              other management application/user does not provide a specific 
              value for the relevant data node.             
              Schema default data MAY or may not be stored as part of a 
              configuration datastore, depending on the basic mode
              used by a particular server.
	    
</dd>
<dt>Default data:</dt>
<dd>
              Conceptual data representing a default value.
              Default data is not kept in
              a configuration datastore.  Not all servers use the
              same criteria to decide if a data node is actually
              instantiated in a database.  If a data node is not
              present in a database, and a schema default definition
              is in use by the server instead, then it is considered 
              to be a default data node.
	    
</dd>
<dt>Explicitly set data:</dt>
<dd>
              Data that is set to any value by a NETCONF client or 
              other management application by the way of an explicit
              management operation,
              including any data model schema default value.
              Any value set by the NETCONF server which is not 
              the schema defined default value
              is also considered explicitly set data.
	    
</dd>
<dt>&lt;with-defaults&gt; retrieval:</dt>
<dd>
              Refers to a protocol operation which includes the
              &lt;with-default&gt; parameter to control the handling
              of default data.
            
</dd>
<dt>:with-defaults:</dt>
<dd>
              The shorthand notation for the with-defaults capability identifier.
            
</dd>
</dl></blockquote><p>
	
</p>
<p>
	  The following terms are defined in <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>:
	  </p>
<ul class="text">
<li>client
</li>
<li>datastore
</li>
<li>operation
</li>
<li>server
</li>
</ul><p>
	
</p>
<p>
	  The following term is defined in <a class='info' href='#I-D.ietf-netmod-yang'>[I&#8209;D.ietf&#8209;netmod&#8209;yang]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for the Network Configuration Protocol (NETCONF),&rdquo; June&nbsp;2010.</span><span>)</span></a>:
	  </p>
<ul class="text">
<li>data node
</li>
</ul><p>
	
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Defaults Handling Behavior</h3>

<p>
          The defaults handling behavior used by a server will
          impact NETCONF protocol operations in two ways:
	  <br />
<br />

          </p>
<ol class="text">
<li>
              Data retrieval:  A server is normally allowed to
              exclude data nodes which it considers to contain
              the default value.  The actual nodes omitted depends
              on the defaults handling behavior used by the server.
	      <br />
<br />

            
</li>
<li>
              Create and delete operations: The &lt;edit-config&gt;
              'operation' attribute can be used to create
              and/or delete specific data nodes.  These
              operations depend on whether the target node
              currently exists or not.  The server's
              defaults handling behavior will determine whether the
              requested node currently exists in the datastore or not.
	      <br />
<br />

            
</li>
</ol><p>
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Client Controlled Retrieval of Default Data</h3>

<p>
	  A networking device may have a large number of default values. 
	  Often the default values are not interesting or specifically defined 
	  with a "reasonable" value, so that the management user does not 
          have to handle them.
	  For these reasons it is quite common for networking devices to
	  suppress the output of parameters having the default value.
        
</p>
<p>
	  However, there are use-cases when a NETCONF client 
	  will need the default data from the server:
	  <br />
<br />

	  </p>
<ul class="text">
<li>
              The management application often needs a single, definitive 
              and complete set of configuration values that determine 
              how the a networking device works.
            
</li>
<li>
              Documentation about default values can be unreliable or unavailable.
            
</li>
<li>
              Some management applications might not have the capabilities to 
	      correctly parse and interpret formal data models.
            
</li>
<li>
              Human users might want to understand the received 
	      data without consultation of the documentation.
            
</li>
</ul><p>
        
</p>
<p>
	  In all these cases, the NETCONF client will need a mechanism
          to retrieve default data from a NETCONF server.
	  <br />
<br />

	  This document defines a NETCONF protocol capability to identify
          the server defaults handling behavior, an XML attribute to identify
          default data, and a YANG module extension to 
	  the NETCONF protocol that allows the NETCONF client to control whether
	  default data is returned by the server.
        
</p>
<a name="basicHandling"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Defaults Handling Basic Modes</h3>

<p>
        Not all server implementations treat default data in the same way.
        Instead of forcing a single implementation strategy, this
        document allows a server to advertise a particular
        style of defaults handling, and the client can adjust
        accordingly. 
      
</p>
<p>
	NETCONF servers report default data in different ways. This 
	document specifies three standard defaults handling
        basic modes that a server implementor may choose from:
	<br />
<br />

        </p>
<ul class="text">
<li>report-all
</li>
<li>trim
</li>
<li>explicit
</li>
</ul><p>
      
</p>
<p>
        A server MUST select one of the three basic modes defined
        in this section for handling default data.  
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
'report-all' Basic Mode</h3>

<p>
          A server which uses the 'report-all' basic mode
          does not consider any data node to
          be default data, even schema default data.
        
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1"></a><h3>2.1.1.&nbsp;
'report-all' Basic Mode Retrieval</h3>

<p>
            When data is retrieved from a server using the 'report-all' basic
            mode, and the &lt;with-defaults&gt; parameter is not present, all data
            nodes MUST be reported.
          
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.2"></a><h3>2.1.2.&nbsp;
'report-all' &lt;with-defaults&gt; Retrieval</h3>

<p>
            The server MUST support the &lt;with-defaults&gt; parameter
            with a value equal to 'report-all', as specified in 
            <a class='info' href='#reportAllRetrievalMode'>Section&nbsp;3.1<span> (</span><span class='info'>'report-all' Retrieval Mode</span><span>)</span></a>.
          
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.3"></a><h3>2.1.3.&nbsp;
'report-all' &lt;edit-config&gt; and &lt;copy-config&gt; Behavior</h3>

<p>
            The server MUST consider every data node to exist,
            even those represented by a schema default value.
            A valid 'create' operation attribute for a data node that contains its
            schema default value MUST fail with a 'data-exists' error-tag.
            A valid 'delete' operation attribute for a data node that contains
            its schema default value MUST succeed, even though the data node is
            immediately replaced by the server with the default value.
          
</p>
<p>
            A server which uses the 'report-all' basic-mode has no 
            concept of a default node, so the 'report-all-tagged' &lt;with-defaults&gt;
            retrieval mode is not relevant.  There will never be any tagged nodes,
            since there are no nodes which are omitted in a basic-mode retrieval
            operation.  If the wd:default attribute is present in any
            configuration data, the server MUST return an &lt;rpc-error&gt; response
            with an 'unknown-attribute' error-tag.
          
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
'trim' Basic Mode</h3>

<p>
          A server which uses the 'trim' basic mode MUST consider
          any data node set to its schema default value to
          be default data.
        
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
'trim' Basic Mode Retrieval</h3>

<p>
            When data is retrieved from a server using the 'trim' basic
            mode, and the &lt;with-defaults&gt; parameter is not present, 
            data nodes MUST NOT be reported if they match the schema default value.
            Non-configuration data nodes containing the 
            schema default value MUST NOT be reported.
          
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
'trim' &lt;with-defaults&gt; Retrieval</h3>

<p>
            The server MUST support the &lt;with-defaults&gt; parameter
            with a value equal to 'trim', as specified in 
            <a class='info' href='#reportAllRetrievalMode'>Section&nbsp;3.1<span> (</span><span class='info'>'report-all' Retrieval Mode</span><span>)</span></a>.
          
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.3"></a><h3>2.2.3.&nbsp;
'trim' &lt;edit-config&gt; and &lt;copy-config&gt; Behavior</h3>

<p>
            The server MUST consider any data node 
            that does not contain its schema default value to exist.
            A valid 'create' operation attribute for a data node that has a schema default
            value defined MUST succeed.
            A valid 'delete' operation attribute for a missing data node that has a schema default
            value MUST fail.  The server MUST return an &lt;rpc-error&gt;
            response with a 'data-missing' error-tag.
          
</p>
<p>
            If a client sets a data node to its schema default value, using any valid
            operation, it MUST succeed, although the data node MUST NOT be saved 
            in the NETCONF datastore.  This has the same effect as removing the
            data node and treating it as default data.
          
</p>
<p>
            If the server supports the 'report-all-tagged' value for the
            &lt;with-defaults&gt; parameter, then the 'wd:default' attribute MUST be
            accepted in configuration input, as described in 
            <a class='info' href='#copyConfigOperation'>Section&nbsp;4.6.1<span> (</span><span class='info'>&lt;get&gt;, &lt;get-config&gt;, and &lt;copy-config&gt; Operations</span><span>)</span></a> and
            <a class='info' href='#editConfigOperation'>Section&nbsp;4.6.2<span> (</span><span class='info'>&lt;edit-config&gt; Operation</span><span>)</span></a>.
          
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
'explicit' Basic Mode</h3>

<p>
          A server which uses the 'explicit' basic mode MUST consider
          any data node that is not explicitly set data to be default data.
        
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.1"></a><h3>2.3.1.&nbsp;
'explicit' Basic Mode Retrieval</h3>

<p>
            If a client sets a data node to its schema default value,
            it MUST always be reported.
            If the server sets a data node to its schema default value,
            it MUST NOT be reported.
            Non-configuration data nodes containing the 
            schema default value MUST be reported.
          
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.2"></a><h3>2.3.2.&nbsp;
'explicit' &lt;with-defaults&gt; Retrieval</h3>

<p>
            The server MUST support the &lt;with-defaults&gt; parameter
            with a value equal to 'explicit', as specified in 
            <a class='info' href='#explicitRetrievalMode'>Section&nbsp;3.3<span> (</span><span class='info'>'explicit' Retrieval Mode</span><span>)</span></a>.
          
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.3"></a><h3>2.3.3.&nbsp;
'explicit' &lt;edit-config&gt; and &lt;copy-config&gt; Behavior</h3>

<p>
            The server considers any data node 
            that is explicitly set data to exist.
            A valid 'create' operation attribute for a data node that has been set by
            a client to its schema default value MUST fail
            with a 'data-exists' error-tag.
            A valid 'create' operation attribute for a data node that has been set by
            the server to its schema default value MUST succeed.
            A valid 'delete' operation attribute for a data node that has been set
            by a client to its schema default value MUST succeed.
            A valid 'delete' operation attribute for a data node that has been set
            by the server to its schema default value MUST 
            fail with a 'data-missing' error-tag.
          
</p>
<p>
            If the server supports the 'report-all-tagged' retrieval mode in
            its :with-defaults capability, then the 'wd:default' attribute MUST be
            accepted in configuration input. If all NETCONF &lt;edit-config&gt;
            or &lt;copy-config&gt;  parameters are valid, then the server 
            will treat a wd:default="true" tagged data node
            as a request to return that node to default data.  If this request
            is valid within the context of the requested NETCONF operation,
            then the data node is removed and returned to its default value.
            The data node within the NETCONF message MUST contain a
            value in this case, which MUST be equal to the schema default value. 
            If not, the server MUST return an &lt;rpc-error&gt; response
            with a 'invalid-value' error-tag.
          
</p>
<a name="retrievalHandling"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Retrieval of Default Data</h3>

<p>
        This document defines a new parameter, called &lt;with-defaults&gt;,
        which can be added to specific NETCONF operation request
        messages to control how retrieval of default data is
        treated by the server.
      
</p>
<p>
        A server which implements this specification MUST 
        accept the &lt;with-defaults&gt; parameter
        containing the enumeration for any of the defaults 
        handling modes it supports.
        The &lt;with-defaults&gt; parameter contains one of the four
        enumerations defined in this section.
      
</p>
<a name="reportAllRetrievalMode"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
'report-all' Retrieval Mode</h3>

<p>
          When data is retrieved with a &lt;with-defaults&gt; parameter equal to
          'report-all', all data nodes MUST be reported, including any data
          nodes considered to be default data by the server.
        
</p>
<a name="trimRetrievalMode"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
'trim' Retrieval Mode</h3>

<p>
          When data is retrieved with a &lt;with-defaults&gt; parameter equal to
          'trim', data nodes MUST NOT be reported if they match the schema default value.
          Non-configuration data nodes containing the 
          schema default value MUST NOT be reported.
        
</p>
<a name="explicitRetrievalMode"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
'explicit' Retrieval Mode</h3>

<p>
          When data is retrieved with a &lt;with-defaults&gt; parameter equal to
          'explicit', a data node which was set by a client to its schema default value
          MUST be reported.  A conceptual data node which would be set by the 
          server to the schema default value MUST NOT be reported.
          Non-configuration data nodes containing the 
          schema default value MUST be reported.
        
</p>
<a name="reportAllTaggedRetrievalMode"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
'report-all-tagged' Retrieval Mode</h3>

<p>
          In addition to the basic modes, a special variant
          of the 'report-all' basic mode is available
          called 'report-all-tagged'.  This mode MUST be supported
          on a server if the 'also-supported'
          parameter in the :with-defaults capability
          contains the 'report-all-tagged' option.
          Refer to <a class='info' href='#WDCAP'>Section&nbsp;4<span> (</span><span class='info'>With-defaults Capability</span><span>)</span></a> for encoding details
          for this capability.
        
</p>
<p>
          In this mode the server returns all data nodes,
          just like the 'report-all' mode, except
          a data node that is considered by the server to contain
          default data will include an XML attribute to indicate
          this condition.  This is useful
          for an application to determine which nodes are considered
          to contain default data by the server, within a single
          retrieval operation.
        
</p>
<p>
          A server which supports 'report-all-tagged' MUST also
          accept the 'wd:default' XML attribute within configuration
          input to the &lt;edit-config&gt; or &lt;copy-config&gt; operations.
          Refer to <a class='info' href='#ATTRXSD'>Section&nbsp;6<span> (</span><span class='info'>XSD for the 'wd:default' Attribute</span><span>)</span></a> for XML encoding details
          of the 'wd:default' XML attribute.
        
</p>
<a name="WDCAP"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
With-defaults Capability</h3>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Overview</h3>

<p>
	  The :with-defaults capability indicates which
          defaults handling basic mode is supported by the server.  It may
          also indicate support for additional defaults retrieval modes.
          These retrieval modes allow a NETCONF client to control whether 
          default data is returned by the server.
          The capability affects both configuration and state data 
          (while acknowledging that the usage of default 
	  values for state data is less prevalent). 
	  Sending of default data is controlled for each individual 
          operation separately. 
        
</p>
<p>
	  A NETCONF server implementing the :with-defaults capability:
	  <br />
<br />

          </p>
<ul class="text">
<li>
              MUST indicate its basic mode behavior by including the
              'basic-mode' parameter in the capability URI, as defined
              in <a class='info' href='#capabilityIdChapter'>Section&nbsp;4.4<span> (</span><span class='info'>Capability Identifier</span><span>)</span></a>.
            
</li>
<li>
              MUST support the YANG module defined in 
              <a class='info' href='#YANGMOD'>Section&nbsp;5<span> (</span><span class='info'>YANG Module for the &lt;with-defaults&gt; Parameter</span><span>)</span></a>.
            
</li>
<li>
              SHOULD support the 'report-all' or 'report-all-tagged'
              defaults handling mode.
            
</li>
<li>
              MAY support additional defaults handling modes.
            
</li>
</ul><p>
        
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Dependencies</h3>

<p>None
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Conformance</h3>

<p>Every NETCONF server SHOULD implement this capability.
</p>
<a name="capabilityIdChapter"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Capability Identifier</h3>

<p>
	  urn:ietf:params:netconf:capability:with-defaults:1.0
	  <br />
<br />

	  The identifier MUST have a parameter: "basic-mode". This indicates how 
	  the server will treat default data, as defined in 
          <a class='info' href='#basicHandling'>Section&nbsp;2<span> (</span><span class='info'>Defaults Handling Basic Modes</span><span>)</span></a>.
	  The allowed values of this parameter are 
	  'report-all', 'trim', and
          'explicit', as defined in <a class='info' href='#basicHandling'>Section&nbsp;2<span> (</span><span class='info'>Defaults Handling Basic Modes</span><span>)</span></a>. 
	
</p>
<p>
	  The identifier MAY have another parameter: "also-supported". 
          This parameter 
	  indicates which additional default handling modes the server supports. 
	  The value of the parameter is a comma separated list of one or more modes 
	  that are supported beside the mode indicated in the 'basic-mode' parameter.
	  Possible modes are 'report-all', 'report-all-tagged', 'trim', and
          'explicit', as defined in <a class='info' href='#retrievalHandling'>Section&nbsp;3<span> (</span><span class='info'>Retrieval of Default Data</span><span>)</span></a>.
	
</p>
<p>
          Note that this protocol capability URI is separate from the 
          YANG module capability URI
          for the YANG module in <a class='info' href='#YANGMOD'>Section&nbsp;5<span> (</span><span class='info'>YANG Module for the &lt;with-defaults&gt; Parameter</span><span>)</span></a>.  A server which 
          implements this  module MUST also advertise a YANG module 
          capability URI according to the rules specified in
          <a class='info' href='#I-D.ietf-netmod-yang'>[I&#8209;D.ietf&#8209;netmod&#8209;yang]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for the Network Configuration Protocol (NETCONF),&rdquo; June&nbsp;2010.</span><span>)</span></a>.          
        
</p>
<p>Examples:
	  <br />
<br />

	  urn:ietf:params:netconf:capability:with-defaults:1.0?basic-mode=explicit
	  <br />
<br />

	  urn:ietf:params:netconf:capability:with-defaults:1.0?basic-mode=explicit&amp;also-supported=report-all,report-all-tagged
	
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
New Operations</h3>

<p>None
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Modifications to Existing Operations</h3>

<a name="copyConfigOperation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.1"></a><h3>4.6.1.&nbsp;
&lt;get&gt;, &lt;get-config&gt;, and &lt;copy-config&gt; Operations</h3>

<p>
	    A new &lt;with-defaults&gt; XML
	    element is added to the input for the
	    &lt;get&gt;, &lt;get-config&gt; and &lt;copy-config&gt; operations.
	    If the  &lt;with-defaults&gt; element is present, it controls the 
	    reporting of default data. The server MUST return 
	    default data in the NETCONF &lt;rpc-reply&gt; messages 
            according to the value of this element, if the server
            supports the specified retrieval mode.
	  
</p>
<p>
            This parameter only controls these specified
            retrieval operations, and does not impact any other
            operations or the non-volatile storage of
            configuration data.
          
</p>
<p>
	    The &lt;with-defaults&gt; element is defined in the XML namespace for the
	    ietf-netconf-with-defaults.yang module in <a class='info' href='#YANGMOD'>Section&nbsp;5<span> (</span><span class='info'>YANG Module for the &lt;with-defaults&gt; Parameter</span><span>)</span></a>, 
	    not the XML namespace for the &lt;get&gt;, &lt;get-config&gt; and 
            &lt;copy-config&gt; operations.
	  
</p>
<p>
	    Allowed values of the with-defaults element are taken from 
	    the 'with-defaults-type' typedef in <a class='info' href='#YANGMOD'>Section&nbsp;5<span> (</span><span class='info'>YANG Module for the &lt;with-defaults&gt; Parameter</span><span>)</span></a>. 
            The allowed values for a particular server are restricted to the 
            values that the server indicates it supports within the :with-defaults
            capability, in the 'basic-mode' and 'also-supported' parameters.
	  
</p>
<p>
	    If an unsupported value is used, the NETCONF server MUST
	    return an &lt;rpc-error&gt; response with an 'invalid-value' error-tag.
	  
</p>
<p>
	    If the &lt;with-defaults&gt; element is not present, 
	    the server MUST follow its basic mode behavior as indicated 
	    by the :with-defaults capability identifier's 'basic-mode' parameter,
            defined in <a class='info' href='#capabilityIdChapter'>Section&nbsp;4.4<span> (</span><span class='info'>Capability Identifier</span><span>)</span></a>.
	  
</p>
<p>
            The &lt;get&gt; and &lt;get-config&gt; operations support a separate
            filtering mechanism, using the &lt;filter&gt; parameter.  The
            defaults filtering is conceptually done before the &lt;filter&gt; parameter
            is processed.  For example, if the &lt;with-defaults&gt;
            parameter is equal to 'report-all', then the &lt;filter&gt; parameter
            is conceptually applied to all data nodes and all default data.
          
</p>
<p> 
	    The &lt;copy-config&gt; operation is only affected by the
            &lt;with-defaults&gt; parameter if the target 
            of the operation is specified with the &lt;url&gt; parameter.
	    If the target is a NETCONF datastore (i.e., running, candidate or startup), the 
	    &lt;with-defaults&gt; parameter has no effect.  The server MUST use its basic mode
            when copying data to a NETCONF datastore.
	    If the &lt;with-defaults&gt; parameter is present in this case, 
            it MUST be silently ignored by the server.
          
</p>
<p>
            If the server supports the 'report-all-tagged' mode,
            then the 'wd:default' attribute defined in 
            <a class='info' href='#ATTRXSD'>Section&nbsp;6<span> (</span><span class='info'>XSD for the 'wd:default' Attribute</span><span>)</span></a> also impacts the &lt;copy-config&gt;
            operation.  If the wd:default attribute is present 
            and set to 'true', then the server MUST treat the
            new data node as a request to return that node to its
            default value (i.e., remove it from the database).
            The data node within the NETCONF message MUST contain a
            value in this case, which MUST be equal to the schema default value. 
            If not, the server MUST return an &lt;rpc-error&gt; response
            with a 'invalid-value' error-tag.
          
</p>
<a name="editConfigOperation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2"></a><h3>4.6.2.&nbsp;
&lt;edit-config&gt; Operation</h3>

<p>
           The &lt;edit-config&gt; operation has several editing modes.
           The 'create' and 'delete' editing operations are affected
           by the defaults handling basic mode. The other enumeration values
           for the NETCONF operation attribute are not affected.
          
</p>
<p>
            If the operation attribute contains the value 'create', 
            and  the data node already exists in the target database,
            then the server MUST return an  &lt;rpc-error&gt; response
            with a 'invalid-value' error-tag.
          
</p>
<p>
            If the client sets a data node to its schema default value,
            the server MUST accept the request if it is valid.
            The server MUST keep or discard the new value based on
            its defaults handling basic mode. For the 'trim' basic mode, 
            all schema default values are discarded, otherwise a
            client-provided schema default value is saved in
            a NETCONF datastore.
          
</p>
<p>
            If the server supports the 'report-all-tagged' mode,
            then the 'wd:default' attribute defined in 
            <a class='info' href='#ATTRXSD'>Section&nbsp;6<span> (</span><span class='info'>XSD for the 'wd:default' Attribute</span><span>)</span></a> also impacts the &lt;edit-config&gt;
            operation.  If the wd:default attribute is present 
            and set to 'true', then the server MUST treat the
            new data node as a request to return that node to its
            default value (i.e., remove it from the database).
            The data node within the NETCONF message MUST contain a
            value in this case, which MUST be equal to the schema default value. 
            If not, the server MUST return an &lt;rpc-error&gt; response
            with a 'invalid-value' error-tag.
          
</p>
<p>
            If the wd:default attribute is present, then the effective
            operation for the target data node MUST be
            'create', 'merge' or 'replace'.  If not, then
            the server MUST return an &lt;rpc-error&gt; response
            with an 'invalid-value' error-tag.  For example,
            if 'create' is the
            effective operation, then the create request must
            be valid on its own (e.g., current data node MUST NOT exist).
            The procedure for determining the effective operation
            is defined in <a class='info' href='#I-D.ietf-netconf-4741bis'>[I&#8209;D.ietf&#8209;netconf&#8209;4741bis]<span> (</span><span class='info'>Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman, &ldquo;Network Configuration Protocol (NETCONF),&rdquo; February&nbsp;2010.</span><span>)</span></a>.
            It is derived from the 'default-operation' parameter and/or
            any operation attributes that
            are present in the data node or any of its ancestor nodes,
            within the &lt;edit-config&gt; request.
          
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.3"></a><h3>4.6.3.&nbsp;
Other Operations</h3>

<p>
	    Other operations that return configuration data SHOULD 
            also handle default data according to the rules set in 
            this document, and explicitly state this in their documentation. 
	    If this is not specified in the document defining the
            respective operation, the default handling rules described 
            herein do not affect these operations.
	  
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Interactions with Other Capabilities</h3>

<p>None
</p>
<a name="YANGMOD"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
YANG Module for the &lt;with-defaults&gt; Parameter</h3>

<p>
	The following YANG module defines the addition of the with-defaults element 
	to the &lt;get&gt;,  &lt;get-config&gt;, and &lt;copy-config&gt; operations. 
	The YANG language is defined in <a class='info' href='#I-D.ietf-netmod-yang'>[I&#8209;D.ietf&#8209;netmod&#8209;yang]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for the Network Configuration Protocol (NETCONF),&rdquo; June&nbsp;2010.</span><span>)</span></a>.
	The above operations are defined in YANG in 
        <a class='info' href='#I-D.ietf-netconf-4741bis'>[I&#8209;D.ietf&#8209;netconf&#8209;4741bis]<span> (</span><span class='info'>Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman, &ldquo;Network Configuration Protocol (NETCONF),&rdquo; February&nbsp;2010.</span><span>)</span></a>.
	Every NETCONF server which supports the :with-defaults capability
        MUST implement this YANG module.
      
</p>
<p>
	</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;CODE BEGINS&gt; file="ietf-netconf-with-defaults@2010-06-09.yang"

module ietf-netconf-with-defaults {

   namespace "urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults";

   prefix ncwd;

   import ietf-netconf { prefix nc; }

   organization
    "IETF NETCONF (Network Configuration Protocol) Working Group";

   contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;mailto:netconf@ietf.org&gt;

     WG Chair: Bert Wijnen
               &lt;mailto:bertietf@bwijnen.net&gt;

     WG Chair: Mehmet Ersue
               &lt;mailto:mehmet.ersue@nsn.com&gt;

     Editor: Andy Bierman
             &lt;mailto:andyb@iwl.com&gt;

     Editor: Balazs Lengyel
             &lt;mailto:balazs.lengyel@ericsson.com&gt;";

   description
    "This module defines an extension to the NETCONF protocol
     that allows the NETCONF client to control how default
     values are handled by the server in particular NETCONF operations.

     Copyright (c) 2010 IETF Trust and the persons identified as
     the document authors.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";
   // RFC Ed.: replace XXXX with actual RFC number and remove this note

   // RFC Ed.: remove this note
   // Note: extracted from draft-ietf-netmod-with-defaults-09.txt

   revision 2010-06-09 {
     description
       "Initial version.";
     reference
      "RFC XXXX: With-defaults capability for NETCONF";
   }
   // RFC Ed.: replace XXXX with actual
   // RFC number and remove this note

   typedef with-defaults-mode {
      description
        "Possible modes to report default data.";
      reference
         "RFC XXXX; section 3.";
         // RFC Ed.: replace XXXX with actual
         // RFC number and remove this note

      type enumeration {
         enum report-all {
             description
               "All default data is reported.";
             reference
               "RFC XXXX; section 3.1";
               // RFC Ed.: replace XXXX with actual
               // RFC number and remove this note

         }
         enum report-all-tagged {
             description
               "All default data is reported.
                Any nodes considered to be default data
                will contain a 'wd:default' XML attribute,
                set to 'true'.";
             reference
               "RFC XXXX; section 3.4";
               // RFC Ed.: replace XXXX with actual
               // RFC number and remove this note
         }
         enum trim {
             description
               "Values are not reported if they match the default.";
             reference
               "RFC XXXX; section 3.2";
               // RFC Ed.: replace XXXX with actual
               // RFC number and remove this note

         }
         enum explicit {
             description
               "Report values that match the definition of
                explicitly set data.";
             reference
               "RFC XXXX; section 3.3";
               // RFC Ed.: replace XXXX with actual
               // RFC number and remove this note
         }
     }
   }

   grouping with-defaults-parameters {
     description
       "Contains the &lt;with-defaults&gt; parameter for control
        of defaults in NETCONF retrieval operations.";

     leaf with-defaults {
       description
         "The explicit defaults processing mode requested.";
       reference
         "RFC XXXX; section 4.6.1";
         // RFC Ed.: replace XXXX with actual
         // RFC number and remove this note

       type with-defaults-mode;
     }
   }

   // extending the get-config operation
   augment /nc:get-config/nc:input {
       description
         "Adds the &lt;with-defaults&gt; parameter to the
          input of the NETCONF &lt;get-config&gt; operation.";
       reference
         "RFC XXXX; section 4.6.1";
         // RFC Ed.: replace XXXX with actual
         // RFC number and remove this note

       uses with-defaults-parameters;
   }

   // extending the get operation
   augment /nc:get/nc:input {
       description
         "Adds the &lt;with-defaults&gt; parameter to
          the input of the NETCONF &lt;get&gt; operation.";
       reference
         "RFC XXXX; section 4.6.1";
         // RFC Ed.: replace XXXX with actual
         // RFC number and remove this note

       uses with-defaults-parameters;
   }

   // extending the copy-config operation
   augment /nc:copy-config/nc:input {
       description
         "Adds the &lt;with-defaults&gt; parameter to
          the input of the NETCONF &lt;copy-config&gt; operation.";
       reference
         "RFC XXXX; section 4.6.1";
         // RFC Ed.: replace XXXX with actual
         // RFC number and remove this note

       uses with-defaults-parameters;
   }

}

&lt;CODE ENDS&gt;
</pre></div><p>

	<br />
<br />

      
</p>
<a name="ATTRXSD"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
XSD for the 'wd:default' Attribute</h3>

<p>
	The following XML Schema document defines the 'default' attribute,
        described within this document.  This XSD is only relevant if
        the server supports the 'report-all-tagged' defaults retrieval mode.
      
</p>
<p>
	</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;CODE BEGINS&gt; file="defaults.xsd"

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="urn:ietf:params:xml:ns:netconf:default:1.0"
           targetNamespace="urn:ietf:params:xml:ns:netconf:default:1.0"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified"
           xml:lang="en"&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      This schema defines the syntax for the 'default' attribute
      described within this document.
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;

  &lt;!--
    default attribute
    --&gt;
  &lt;xs:attribute name="default" type="xs:boolean" default="false"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        This attribute indicates whether the data node represented
        by the XML element containing this attribute is considered
        by the server to be default data.  If set to 'true' then
        the data node is default data.  If 'false', then the
        data node is not default data.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
  &lt;/xs:attribute&gt;

&lt;/xs:schema&gt;

&lt;CODE ENDS&gt;
</pre></div><p>

      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>
        This document registers the following capability identifier 
        URN in the 'Network Configuration Protocol
        Capability URNs registry':
	<br />
<br />

        </p>
<blockquote class="text">
<p>
            urn:ietf:params:netconf:capability:with-defaults:1.0
          
</p>
</blockquote><p>
	<br />
<br />

	Note that the capability URN is compliant to 
        <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> section 10.3.
      
</p>
<p>
        This document registers two XML namespace URNs
	in the 'IETF XML registry', following the format 
        defined in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>. 
	<br />
<br />

        </p>
<blockquote class="text">
<p>URI: urn:ietf:params:xml:ns:netconf:default:1.0
</p>
<p>URI: urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults
</p>
</blockquote><p>
	<br />
<br />

        Registrant Contact: The NETCONF WG of the IETF.
	<br />
<br />

        XML: N/A, the requested URIs are XML namespaces.
      
</p>
<p>
	This document registers one module name 
        in the 'YANG Module Names' registry,
	defined in <a class='info' href='#I-D.ietf-netmod-yang'>[I&#8209;D.ietf&#8209;netmod&#8209;yang]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for the Network Configuration Protocol (NETCONF),&rdquo; June&nbsp;2010.</span><span>)</span></a> .  
	<br />
<br />

        </p>
<blockquote class="text">
<p>name: ietf-netconf-with-defaults
</p>
<p>prefix: ncwd
</p>
<p>namespace: urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults
</p>
<p>RFC: XXXX // RFC Ed.: replace XXXX and remove this comment
</p>
</blockquote><p>
      
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
	This document defines an extension to existing
	NETCONF protocol operations. It does not introduce
	any new or increased security risks into the management system.
      
</p>
<p>
        The 'with-defaults' capability gives clients control over the
        retrieval of default data from a configuration datastore. The
        security consideration of <a class='info' href='#I-D.ietf-netconf-4741bis'>[I&#8209;D.ietf&#8209;netconf&#8209;4741bis]<span> (</span><span class='info'>Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman, &ldquo;Network Configuration Protocol (NETCONF),&rdquo; February&nbsp;2010.</span><span>)</span></a> apply
        to this document as well. 
      
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>
        Thanks to Martin Bjorklund, Sharon Chisholm, Phil Shafer, 
        Juergen Schoenwaelder, Washam Fan and 
	many other members of the NETCONF WG for providing important 
        input to this document.
      
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4741">[RFC4741]</a></td>
<td class="author-text">Enns, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>,&rdquo; RFC&nbsp;4741, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4741.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netconf-4741bis">[I-D.ietf-netconf-4741bis]</a></td>
<td class="author-text">Enns, R., Bjorklund, M., Schoenwaelder, J., and A. Bierman, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netconf-4741bis-02.txt">Network Configuration Protocol (NETCONF)</a>,&rdquo; draft-ietf-netconf-4741bis-02 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netconf-4741bis-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netmod-yang">[I-D.ietf-netmod-yang]</a></td>
<td class="author-text">Bjorklund, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-13.txt">YANG - A data modeling language for the Network Configuration Protocol (NETCONF)</a>,&rdquo; draft-ietf-netmod-yang-13 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-13.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml-20081126">[W3C.REC-xml-20081126]</a></td>
<td class="author-text">Yergeau, F., Sperberg-McQueen, C., Maler, E., Paoli, J., and T. Bray, &ldquo;<a href="http://www.w3.org/TR/2008/REC-xml-20081126">Extensible Markup Language (XML) 1.0 (Fifth Edition)</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xml-20081126, November&nbsp;2008 (<a href="http://www.w3.org/TR/2008/REC-xml-20081126">HTML</a>).</td></tr>
</table>

<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Usage Examples</h3>

<a name="EXAMPLEMOD"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Example YANG Module</h3>

<p>
	  The following YANG module defines an example interfaces table
	  to demonstrate how the &lt;with-defaults&gt; parameter behaves
	  for a specific data model.
        
</p>
<p>
	  Note that this is not a real module, and implementation
	  of this module is not required for conformance to the
	  :with-defaults capability, defined in <a class='info' href='#WDCAP'>Section&nbsp;4<span> (</span><span class='info'>With-defaults Capability</span><span>)</span></a>.
          This module is not to be registered with IANA, and is not
          considered to be a code component.  It is
          intentionally very terse, and includes few descriptive statements.
        
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  module example {

  namespace "http://example.com/ns/interfaces";

  prefix exam;

  typedef status-type {
     description "Interface status";
     type enumeration {
       enum ok;
       enum 'waking up';
       enum 'not feeling so good';
       enum 'better check it out';
       enum 'better call for help';
     }
     default ok;
  }

  container interfaces {
      description "Example interfaces group";

      list interface {
        description "Example interface entry";
        key name;

        leaf name {
          description
            "The administrative name of the interface.
             This is an identifier which is only unique
             within the scope of this list, and only
	     within a specific server.";
          type string {
            length "1 .. max";
          }
        }

        leaf mtu {
          description
            "The maximum transmission unit (MTU) value assigned to
	     this interface.";
          type uint32;
          default 1500;
        }

        leaf status {
          description
            "The current status of this interface.";
          type status-type;
          config false;
        }
      }
    }
  }

</pre></div><p>

	  <br />
<br />

        
</p>
<a name="DATASET"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Example Data Set</h3>

<p>
          The following data element shows the conceptual contents of the
          example server for the protocol operation examples in the
          next section.  This includes all the configuration data nodes,
          non-configuration data nodes, and default leafs.
        
</p>
<p>
	  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;interfaces xmlns="http://example.com/ns/interfaces"&gt;
        &lt;interface&gt;
          &lt;name&gt;eth0&lt;/name&gt;
          &lt;mtu&gt;8192&lt;/mtu&gt;
          &lt;status&gt;up&lt;/status&gt;
        &lt;/interface&gt;
        &lt;interface&gt;
          &lt;name&gt;eth1&lt;/name&gt;
          &lt;mtu&gt;1500&lt;/mtu&gt;
          &lt;status&gt;up&lt;/status&gt;
        &lt;/interface&gt;
        &lt;interface&gt;
          &lt;name&gt;eth2&lt;/name&gt;
          &lt;mtu&gt;9000&lt;/mtu&gt;
          &lt;status&gt;not feeling so good&lt;/status&gt;
        &lt;/interface&gt;
        &lt;interface&gt;
          &lt;name&gt;eth3&lt;/name&gt;
          &lt;mtu&gt;1500&lt;/mtu&gt;
          &lt;status&gt;waking up&lt;/status&gt;
        &lt;/interface&gt;
      &lt;/interfaces&gt;
    &lt;/data&gt;

</pre></div><p>

	
</p>
<p>
          In this example, the 'mtu' field for each interface entry
          is set in the following manner:
        
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="20%"><col align="left" width="20%"><col align="left" width="20%">
<tr><th align="left">name</th><th align="left">set by</th><th align="left">mtu</th></tr>
<tr>
<td align="left">eth0</td>
<td align="left">client</td>
<td align="left">8192</td>
</tr>
<tr>
<td align="left">eth1</td>
<td align="left">server</td>
<td align="left">1500</td>
</tr>
<tr>
<td align="left">eth2</td>
<td align="left">client</td>
<td align="left">9000</td>
</tr>
<tr>
<td align="left">eth3</td>
<td align="left">client</td>
<td align="left">1500</td>
</tr>
</table>
<br clear="all" />

<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>A.3.&nbsp;
Protocol Operation Examples</h3>

<p>
	  The following examples shows some &lt;get&gt; operations
	  using the 'with-defaults' element.
	  The data model used for these examples is defined in 
	  <a class='info' href='#EXAMPLEMOD'>Appendix&nbsp;A.1<span> (</span><span class='info'>Example YANG Module</span><span>)</span></a>.
        
</p>
<p>
	  The client is retrieving all the data nodes within the 'interfaces' object,
          filtered with the &lt;with-defaults&gt; parameter.
        
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.1"></a><h3>A.3.1.&nbsp;
&lt;with-defaults&gt; = 'report-all'</h3>

<p>
	    The behavior of the &lt;with-defaults&gt;
	    parameter handling for the value 'report-all'
	    is demonstrated in this example.
	  
</p>
<p>
	    </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;rpc message-id="101"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;get&gt;
        &lt;filter type="subtree"&gt;
          &lt;interfaces xmlns="http://example.com/ns/interfaces"/&gt;
        &lt;/filter&gt;
        &lt;with-defaults
         xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults"&gt;
          report-all
        &lt;/with-defaults&gt;
      &lt;/get&gt;
    &lt;/rpc&gt;

    &lt;rpc-reply message-id="101"
               xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;data&gt;
        &lt;interfaces xmlns="http://example.com/ns/interfaces"&gt;
          &lt;interface&gt;
            &lt;name&gt;eth0&lt;/name&gt;
            &lt;mtu&gt;8192&lt;/mtu&gt;
            &lt;status&gt;up&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth1&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
            &lt;status&gt;up&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth2&lt;/name&gt;
            &lt;mtu&gt;9000&lt;/mtu&gt;
            &lt;status&gt;not feeling so good&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth3&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
            &lt;status&gt;waking up&lt;/status&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/data&gt;
    &lt;/rpc-reply&gt;


</pre></div><p>

	  
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.2"></a><h3>A.3.2.&nbsp;
&lt;with-defaults&gt; = 'report-all-tagged'</h3>

<p>
	    The behavior of the &lt;with-defaults&gt;
	    parameter handling for the value 'report-all-tagged'
	    is demonstrated in this example.  A 'tagged' data node
            is an element that contains the wd:default
            XML attribute, set to 'true'.
	  
</p>
<p>
            The actual data nodes tagged by the server depends on the 
            defaults handling basic mode used by the server.
            Only the data nodes that are considered to be default data
            will be tagged.
          
</p>
<p>
            In this example, the server's basic mode is equal to 'trim',
            so all data nodes that would contain the schema default value
            are tagged.  If the server's basic mode is 'explicit', 
            then only data nodes that are not explicitly set data 
            are tagged.  If the server's basic mode is 'report-all', 
            then no data nodes are tagged. 
          
</p>
<p>
	    </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;rpc message-id="102"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;get&gt;
        &lt;filter type="subtree"&gt;
          &lt;interfaces xmlns="http://example.com/ns/interfaces"/&gt;
        &lt;/filter&gt;
        &lt;with-defaults
         xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults"&gt;
          report-all-tagged
        &lt;/with-defaults&gt;
      &lt;/get&gt;
    &lt;/rpc&gt;

    &lt;rpc-reply message-id="102"
               xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
               xmlns:wd="urn:ietf:params:xml:ns:netconf:default:1.0"&gt;
      &lt;data&gt;
        &lt;interfaces xmlns="http://example.com/ns/interfaces"&gt;
          &lt;interface&gt;
            &lt;name&gt;eth0&lt;/name&gt;
            &lt;mtu&gt;8192&lt;/mtu&gt;
            &lt;status wd:default="true"&gt;up&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth1&lt;/name&gt;
            &lt;mtu wd:default="true"&gt;1500&lt;/mtu&gt;
            &lt;status wd:default="true"&gt;up&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth2&lt;/name&gt;
            &lt;mtu&gt;9000&lt;/mtu&gt;
            &lt;status&gt;not feeling so good&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth3&lt;/name&gt;
            &lt;mtu wd:default="true"&gt;1500&lt;/mtu&gt;
            &lt;status&gt;waking up&lt;/status&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/data&gt;
    &lt;/rpc-reply&gt;


</pre></div><p>

	  
</p>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.3"></a><h3>A.3.3.&nbsp;
&lt;with-defaults&gt; = 'trim'</h3>

<p>
	    The behavior of the &lt;with-defaults&gt;
	    parameter handling for the value 'trim'
	    is demonstrated in this example.
	  
</p>
<p>
	    </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;rpc message-id="103"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;get&gt;
        &lt;filter type="subtree"&gt;
          &lt;interfaces xmlns="http://example.com/ns/interfaces"/&gt;
        &lt;/filter&gt;
        &lt;with-defaults
         xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults"&gt;
	  trim
        &lt;/with-defaults&gt;
      &lt;/get&gt;
    &lt;/rpc&gt;

    &lt;rpc-reply message-id="103"
               xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;data&gt;
        &lt;interfaces xmlns="http://example.com/ns/interfaces"&gt;
          &lt;interface&gt;
            &lt;name&gt;eth0&lt;/name&gt;
            &lt;mtu&gt;8192&lt;/mtu&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth1&lt;/name&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth2&lt;/name&gt;
            &lt;mtu&gt;9000&lt;/mtu&gt;
            &lt;status&gt;not feeling so good&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth3&lt;/name&gt;
            &lt;status&gt;waking up&lt;/status&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/data&gt;
    &lt;/rpc-reply&gt;

</pre></div><p>

	  
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.4"></a><h3>A.3.4.&nbsp;
&lt;with-defaults&gt; = 'explicit'</h3>

<p>
	    The behavior of the &lt;with-defaults&gt;
	    parameter handling for the value 'explicit'
	    is demonstrated in this example.
	  
</p>
<p>
	    </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;rpc message-id="104"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;get&gt;
        &lt;filter type="subtree"&gt;
          &lt;interfaces xmlns="http://example.com/ns/interfaces"/&gt;
        &lt;/filter&gt;
        &lt;with-defaults
         xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-with-defaults"&gt;
          explicit
        &lt;/with-defaults&gt;
      &lt;/get&gt;
    &lt;/rpc&gt;

    &lt;rpc-reply message-id="104"
               xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;data&gt;
        &lt;interfaces xmlns="http://example.com/ns/interfaces"&gt;
          &lt;interface&gt;
            &lt;name&gt;eth0&lt;/name&gt;
            &lt;mtu&gt;8192&lt;/mtu&gt;
            &lt;status&gt;up&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth1&lt;/name&gt;
            &lt;status&gt;up&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth2&lt;/name&gt;
            &lt;mtu&gt;9000&lt;/mtu&gt;
            &lt;status&gt;not feeling so good&lt;/status&gt;
          &lt;/interface&gt;
          &lt;interface&gt;
            &lt;name&gt;eth3&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
            &lt;status&gt;waking up&lt;/status&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/data&gt;
    &lt;/rpc-reply&gt;

</pre></div><p>

	  
</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Change Log</h3>

<p>
	-- RFC Ed.: remove this section before publication.
      
</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
08-09</h3>

<p>
          Removed non-volatile server requirements.
        
</p>
<p>
          Moved some text from basic-mode section into
          the the retrieval modes section.
        
</p>
<p>
          Added description and reference statements to the YANG module.
        
</p>
<p>
          Many bugfixes and clarifications, based on WGLC review comments.
        
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
07-08</h3>

<p>
          Added report-all-tagged mode.
        
</p>
<p>
          Changed conformance so report-all or
          report-all-tagged mode SHOULD be supported.
        
</p>
<p>
          Clarified capability requirements for each mode,
          for edit-config and NV storage requirements.
        
</p>
<p>
          Changed rpc-error details for unsupported with-defaults
          value.
        
</p>
<p>
          Added XSD for wd:default attribute
        
</p>
<p>
          Expanded example to show report-all-tagged for
          a basic-mode=trim server.
        
</p>
<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.3"></a><h3>B.3.&nbsp;
06-07</h3>

<p>
          Removed text in capability identifier section about adding
          YANG module capability URI parameters.
        
</p>
<p>Changed YANG module namespace to match YANG format,
          and updated examples to use this new namespace.
</p>
<p>Fixed some typos.
</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.4"></a><h3>B.4.&nbsp;
05-06</h3>

<p>Removed ':1.0' from capability URI.
</p>
<p>Removed open issues section because all known issues are closed.
</p>
<p>Moved examples to a separate appendix, and expanded them.
</p>
<p>Added example.yang as an appendix to properly explain
	  the examples used within the document.
	
</p>
<p>Replaced normative term 'SHALL' with 'MUST' to be consistent within
          this document.
        
</p>
<p>Clarified &lt;with-defaults&gt; behavior for non-configuration data nodes.
</p>
<p>Clarified various sections based on WGLC comments on mailing list.
</p>
<p>Removed some unused terms.
</p>
<p>Reversed the order of the change log sections so the
          most recent changes are shown first.
        
</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.5"></a><h3>B.5.&nbsp;
04-05</h3>

<p>Updated I-D and YANG module boiler-plate.
</p>
<p>Removed redundant 'with-defaults' YANG feature.
</p>
<p>Changed definition of 'explicit' mode to match the YANG definition
</p>
<p>Removed XSD because the YANG is normative and the XSD is unconstrained,
          and does not properly extend the 3 affected NETCONF operations.
	
</p>
<p>Made the YANG module a normative section instead of non-normative appendix.
</p>
<p>Changed YANG from an informative to a normative reference,
</p>
<p>Changed 4741bis from an informative to a normative reference because the YANG
          module imports the ietf-netconf module in order to augment some operations.
</p>
<p>Updated capability requirements to include YANG module capability parameters.
</p>
<p>Added a description statement to the with-defaults leaf definition.
</p>
<p>Update open issues section; ready to close all open issues.
</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.6"></a><h3>B.6.&nbsp;
03-04</h3>

<p>Clarifications
</p>
<p>Added non-netconf interfaces to the definition of explicitly set default data
</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.7"></a><h3>B.7.&nbsp;
02-03</h3>

<p>Clarifications
</p>
<p>YAM added
</p>
<p>Use the same URN for the capability and the XML namespace to 
          accommodate YANG, and avoid two separate URN/URIs being advertised 
          in the HELLO message, for such a small function.
</p>
<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.8"></a><h3>B.8.&nbsp;
01-02</h3>

<p>report-all made mandatory
</p>
<p>Placeholder for YAM added, XSD will be removed when 4741 provides the NETCONF YAM
</p>
<p>with-defaults is valid for state data as well 
          (if state data has a defined default which might not be so frequent).
          The definition of explicit was modified for state data.
	
</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.9"></a><h3>B.9.&nbsp;
00-01</h3>

<p>Changed value set of with-default capability and element
</p>
<p>Added version to URI
</p>
<a name="anchor42"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.10"></a><h3>B.10.&nbsp;
-00</h3>

<p>Created from draft-bierman-netconf-with-defaults-01.txt
</p>
<p>
          It was decided by the NETCONF mailing list, that with-defaults should be a 
          sub-element of each affected operation. 
          While this violates the XSD of RFC4741 this is acceptable and follows 
          the ideas behind NETCONF and YANG.
          <br />
<br />

          Hopefully it will be clarified in the 4741bis RFC whether such extensions are allowed.
	
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andy Bierman</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">InterWorking Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Scotts Valley, CA  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 831 460 7010</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:andyb@iwl.com">andyb@iwl.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Balazs Lengyel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Budapest,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hungary</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:balazs.lengyel@ericsson.com">balazs.lengyel@ericsson.com</a></td></tr>
</table>
</body></html>
