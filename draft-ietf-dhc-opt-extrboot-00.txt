Network Working Group                     Vijayabhaskar A Kalusivalingam
Internet-Draft                                 Senthil K Balasubramanian
Expires: August 2004                                     Hewlett-Packard
                                                                Feb 2004

            The Extended Remote Boot Option for DHCPv4
                draft-ietf-dhc-opt-extrboot-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 2004.

Copyright Notice

   Copyright (C) The Internet Society (2004).  All Rights Reserved.

Abstract

   Single TFTP [2] server for huge number of diskless clients is prone
   to single point of failure.  So, Multiple TFTP servers are needed for
   high availability.  Moreover, some of the clients need multiple
   bootfiles for boot up.  This document provides a new DHCPv4 option
   for clients to obtain information about multiple TFTP [2] servers and
   bootfiles.

1. Introduction

   DHCPv4 (Dynamic Host Configuration Protocol Version for IPv4)
   provides a framework for passing configuration information to hosts
   on an IPv4 network.  However, DHCPv4 does not provide a way to send
   more than one TFTP server address and bootfile names.  This document
   defines a new option to provide more than one TFTP server and
   bootfile names.  This option is required for clients, which are
   booting over a network and require more than one file to be
   downloaded and executed.  The multiple TFTP servers are needed for
   high availability.  Network booting is widely used mechanism for


Vijay, Senthil              Expires August 2004                [Page 1]

Internet-Draft     The Extended Remote Boot Option for DHCPv4  Feb 2004

   booting up of the clients, because of their advantages; softwares
   will be in central server and requires maintenance at only one
   location rather than maintaining individual systems separately.
   Also, switching between different operating systems becomes easy when
   network booting is being used.  The additional boot files may be used
   as supporting software for the boot image.  Different Operating
   System vendors use different way of handling this.

2. Requirements

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in this
   document, are to be interpreted as described in RFC 2119 [3]

3. Terminology

   This document uses terminology specific to DHCPv4 as defined in 
   "Terminology" section of the DHCPv4 specification [1].

4. Extended Remote Boot Option

   The Extended Remote Boot Option is used to carry the parameters
   needed for remote boot of the DHCPv4 [1] clients.  Using the
   information provided by this option, the clients will be able to
   bootp up.
   
   The format of the Remote Boot Option is as shown below:

        Code     Len   Extended Remote Boot Information Field
     +-------+------+------+------+------+------+--...-+------+
     |  TBD  |   N  |  r1  |  r2  |  r3  |  r4  |      |  rN  |
     +-------+------+------+------+------+------+--...-+------+

   The length N gives the total number of octets in the Extended Remote 
   Boot Information Field. The length N should be at least 4 bytes.

   r1, r2 .. rN are Remote Boot Information suboptions which contain 
   information needed for boot up of the clients. They should be 
   listed in the increasing order of preferences.

   The Remote Boot Information suboption is explained in the Section 5.

5. Remote Boot Information suboption

   The DHCP server uses the Remote Boot Information suboption to convey the   
   client about the TFTP Server [4] names and list of boot files needed for 
   booting of the clients.  The clients are supposed to contact the TFTP 
   Server, obtain the boot files one by one and boot up using these files.

   The format of the Remote Boot Information suboption is as shown below:

        Code     Len       Remote Boot Information Field
     +-------+------+------+------+------+------+--...-+------+
     |   1   |   N  |  ts  |  f1  |  f2  |  f3  |      |  fN  |
     +-------+------+------+------+------+------+--...-+------+


Vijay, Senthil              Expires August 2004                [Page 2]

Internet-Draft     The Extended Remote Boot Option for DHCPv4  Feb 2004


   The length N gives the total number of octets in the Remote 
   Boot Information Field. The length N should be at least 2 bytes.

   'ts' field consists of either TFTP server name (option 66) [5]
   or the TFTP Server Address suboption suboption represented in the
   Opt/Length/Value tuples.  The format of the TFTP Server Address
   suboption is given below:

       Code   Len    TFTP Server address
     +-----+-----+-----+-----+-----+-----+
     |  1  |  n  |  a1 |  a2 |  a3 |  a4 |
     +-----+-----+-----+-----+-----+-----+

   The TFTP Server Address suboption gives IPv4 address of the one of
   the TFTP Server available for the client.  a1, a2, a3 and a4 refer
   the quadrants of the IPv4 address of TFTP Server address in the
   network byte order.  The length of the option will be 4 octets.

   f1, f2 ...  fN are sequence of Bootfile name (option 67) [5]
   represented in the Opt/Length/Value tuples.

   If Bootfile name option is not following the TFTP Server name/address
   suboption, then, bootfiles corresponding to the TFTP server specified
   in the 'ts' field defaults to the boot file names from the previous
   Remote Boot Information suboption which has non empty 'fn' fields.

   Thus, TFTP server name/address and Bootfile name are sent as
   suboption to Remote Boot Information option here.

   If multiple boot files are provided by the server, then, they should
   appear in the order of their execution in the client. The first
   appearing Bootfile name should be downloaded and executed first for 
   boot up, then the next and so on.

6. Precedence of the options

   This specification recommends the following precedence for the
   various remote boot options, including the ones specified in [5].

     Option name/Field name                  Precedence
     ----------------------                  ----------
    Extended Remote Boot Option               Highest
       options 66 and 67 [5]                  Medium
      'sname' and 'fname' [1]                 Lowest
   
   Thus, if Extended Remote Boot Option is received by the client and
   'sname' and 'file' fields are not overloaded, the client MUST ignore
   the 'sname' and 'file' fields.  If TFTP server name/address and/or
   Bootfile name are received in the reply the server, along with the
   Extended Remote Boot Option, then, the client MUST ignore TFTP server
   name/address and/or Bootfile name options.





Vijay, Senthil              Expires August 2004                [Page 3]

Internet-Draft     The Extended Remote Boot Option for DHCPv4  Feb 2004

7. Server behavior

   If the server receives the request for TFTP server name and/or
   Bootfile name along with the Extended Remote Boot Option, the server
   SHOULD ignore the TFTP server name and/or Bootfile name option and
   reply back with Extended Remote Boot Option.

   When the DHCP server is replying back with Extended Remote Boot
   Option, the 'sname' and 'file' field SHOULD be used to overload the
   options.

   If the length of any of these options exceed the maximum permissible
   within a single option (254 octets), then they MUST be represented in
   the DHCP message as specified in [2].

8. Client behavior

   The client MUST NOT request for TFTP server name and/or Bootfile name
   along with the Extended Remote Boot Option.

9. Security Considerations

   The Remote Boot Option may be used by an intruder DHCPv4 server to 
   provide to cause DHCPv4 clients to contact rogue TFTP server (or) to
   send invalid file names. This will make booting up of DHCP clients
   to fail. This will have a greater impact, if the clients are running
   some time critical applications.  It has a direct impact on the
   security of the networks, if the clients are running any security
   applications.

   To avoid attacks through this option, the DHCP client SHOULD use 
   authentication mechanism for DHCP [6].

10. IANA Considerations

   IANA is requested to assign an option code to the following options
   from the option-code space defined for public DHCP Options in 
   RFC 2939 [7].

         Option Name              Value    Described in
   Extended Remote Boot Option     tbd       Section 4

11. Acknowledgements

   Thanks to Barr Hibbs and Bernie Volz for the valuable comments on
   this work.

12. Normative References

   [1] Droms, R., "Dynamic Host Configuration Protocol", RFC 2131, March
       1997.

   [2] T. Lemon, S. Cheshire, Encoding Long Options in the Dynamic Host 
       Configuration Protocol (DHCPv4), RFC 3396, November 2002.



Vijay, Senthil              Expires August 2004                [Page 4]

Internet-Draft     The Extended Remote Boot Option for DHCPv4  Feb 2004


   [3] Bradner, S., "Key words for use in RFCs to Indicate Requirement
       Levels", BCP 14, RFC 2119, March 1997.

13. Informative References

   [4] K. Sollins, The TFTP Protocol (Revision 2), RFC 1350, July 1992.
  
   [5] Alexander, S. and R. Droms, "DHCP options and BOOTP Vendor
       Extensions", RFC 2132, March 1997.

   [6] Droms, R. and W. Arbaugh, "Authentication for DHCP Messages",
        RFC 3118, June 2001.

   [7] R. Droms, Procedures and IANA Guidelines for Definition of New 
       DHCP Options and Message Types, RFC 2939, September 2000. 
   
Authors' Addresses

   Vijayabhaskar A Kalusivalingam
   Hewlett-Packard STSD-I
   29, Cunningham Road
   Bangalore - 560052
   India

   Phone: +91-80-2205-3085
   E-Mail: vijayak@india.hp.com

   Senthil K Balasubramanian
   Hewlett-Packard STSD-I
   29, Cunningham Road
   Bangalore - 560052
   India

   Phone: +91-80-2205-3103
   E-Mail: ksenthil@india.hp.com

Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.





Vijay, Senthil              Expires August 2004                [Page 5]

Internet-Draft     The Extended Remote Boot Option for DHCPv4  Feb 2004

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.




















































Vijay, Senthil              Expires August 2004                [Page 6]

Internet-Draft     The Extended Remote Boot Option for DHCPv4  Feb 2004

Full Copyright Statement

   Copyright (C) The Internet Society (2004).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society. 


























Vijay, Senthil              Expires August 2004                [Page 7]

