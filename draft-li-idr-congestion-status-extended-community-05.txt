



IDR                                                                Z. Li
Internet-Draft                                              China Mobile
Updates: 4271, 4360, 7153 (if approved)                          J. Dong
Intended status: Experimental                        Huawei Technologies
Expires: January 1, 2018                                   June 30, 2017


           Carry congestion status in BGP extended community
          draft-li-idr-congestion-status-extended-community-05

Abstract

   A new extended community, called congestion status extended
   community, is introduced in this document to carry the link
   congestion status, especially for the exit link of one AS.
   Congestion status extended community can be used by the BGP speakers
   to steer the AS-outgoing traffic among the exit links.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 1, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Li & Dong                Expires January 1, 2018                [Page 1]

Internet-Draft    congestion status extended community         June 2017


   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Congestion Status Extended Community  . . . . . . . . . . . .   4
   3.  Application Considerations  . . . . . . . . . . . . . . . . .   5
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   5
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Knowing the congestion status of the AS exit links is useful for
   traffic steering, especially for steering the AS outgoing traffic
   among the exit links.

   AS A, as shown in the following figure, has multiple exit links
   connected to AS B.  Both AS A and B has exit link to AS C, and AS B
   provides transit service for AS A.  Due to cost or some other
   reasons, AS A prefers using AS B to transmit its' traffic to AS C,
   not the directly connected link between AS A and C.  If the exit
   routers, Router 7 and 8, in AS A tell their iBGP peers the congestion
   status of the exit links, the peers in turn can steer some outgoing
   traffic toward the less loaded exit link.  If AS A knows the link
   between AS B and AS C is congested, it can steer some traffic towards
   AS C from AS B to the directly connected link by applying some route
   policies.













Li & Dong                Expires January 1, 2018                [Page 2]

Internet-Draft    congestion status extended community         June 2017


     +-------------------------------------------+
     |                   AS C                    |
     |  +----------+               +----------+  |
     +--| Router 1 |---------------| Router 2 |--+
        +----------+               +----------+
             |                          |
             |                          |
             |                     +----------+
             |            +--------| Router 3 |----------+
             |            |        +----------+          |
             |            |             AS B             |
             |            | +----------+    +----------+ |
             |            +-| Router 4 |----| Router 5 |-+
             |              +----------+    +----------+
             |                   |                |
             |                   |                |
        +----------+        +----------+    +----------+
     +--| Router 6 |--------| Router 7 |----| Router 8 |-+
     |  +----------+        +----------+    +----------+ |
     |                      AS A                         |
     +---------------------------------------------------+

   In [constrained-multiple-path], authors from France Telecom also
   specified the requirement to know the congestion status of a link.

   This document introduces a new extended community [RFC4360] to
   deliver the congestion status of the exit link to other BGP speakers.
   The BGP receiver can then use this extended community to deploy route
   policy, thus steer AS outgoing traffic according to the congestion
   status of the exit links.  This mechanisum can be used by both iBGP
   and eBGP.

   In a network deployed SDN (Software Defined Network) controller,
   congestion status extended community can be used by the controller to
   steer the AS outgoing traffic among all the exit links from the
   perspective of the whole network.

   For the network with Route Reflectors (RRs) [RFC4456], RRs by default
   only advertise the best route for a specific prefix to their clients.
   Thus RR clients has no opportunity to compare the congestion status
   among all the exit links.  In this situation, to allow RR clients
   learning all the routes for a specific prefix from all the exit
   links, RRs are RECOMMENDED to enable add-path functionality
   [RFC7911].







Li & Dong                Expires January 1, 2018                [Page 3]

Internet-Draft    congestion status extended community         June 2017


2.  Congestion Status Extended Community

   As described in [RFC4360], the extended community attribute is an
   8-octet value with the first one or two octets to indicate the type
   of this attribute.  Since congestion status extended community needs
   to be delivered from on AS to other ASes, and used by the BGP
   speakers both in other ASes and within the same AS as the sender, it
   MUST be a transitive extended community, i.e. the T bit in the first
   octet MUST be zero.

   We only define the congestion status extended community for four-
   octet AS number [RFC6793], since all the BGP speakers can handle
   four-octet AS number now and the two-octet AS numbers can be mapped
   to four-octet AS numbers by setting the two high-order octets of the
   four-octet field to zero, as per [RFC6793].

   Congestion status extended community is a sub-type allocated from
   Transitive Four-Octet AS-Specific Extended Community Sub-Types
   defined in section 5.2.4 of [RFC7153].  Its format is as Figure 1.

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Type =0x02   |    Sub-Type   |        Sender AS Number       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Sender AS Number (cont.)   |    Bandwidth    | Utilization |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 1: Congestion status extended community

      The "Type" field MUST be 0x02, which indicate this is a Transitive
      Four-Octet AS-Specific Extended Community.

      The "Sub-Type" field is used to indicate this is a Congestion
      Status Extended Community.  Its value is to be assigned by IANA.

      The "Sender AS Number" field is 4 octets.  Its value is the AS
      number of the BGP speaker who generates this congestion status
      extended community.  If the generator has 2-octct AS number, it
      MUST encode its AS number in the last (low order) two bytes and
      set the first (high order) two bytes to zero, as per [RFC6793].

      The "Bandwidth" field is 1 octet.  Its value is the bandwidth of
      the exit link in unit of 10 gbps (gigabits per second).  The link
      with bandwidth less than 10 gbps is not suitable to use this
      feature.





Li & Dong                Expires January 1, 2018                [Page 4]

Internet-Draft    congestion status extended community         June 2017


      The "Utilization" field is 1 octet.  Its value is the utilization
      of the exit link in unit of percent.  We can use the "Utilization"
      field together with the "Bandwidth" field to calculate the traffic
      load that we can further steer to this exit link.

3.  Application Considerations

   To avoid route oscillation, the exit router SHOULD set a threshold.
   When the utilization change reaches the threshold, the exit router
   SHOULD generate a BGP update message with congestion status extended
   community.  Implementations SHOULD further reduce the BGP update
   messages trigered by link utilization change using the method similar
   to BGP Route Flap Damping [RFC2439].  When link utilization change by
   small amounts that fall under thresholds that would cause the
   announcement of BGP update message, implementations SHOULD suppress
   the announcement and set the penalty value accordingly.

   To avoid traffic oscillation, i.e. more traffic than expected is
   attracted to the low utilized link, and some traffic has to be
   steered back to other links, route policy can be set at the exit
   router.  Congestion status extended community is only conveyed for
   some specific routes or only for some specific BGP peers.  Congestion
   status extended community can also be used in a SDN network.  The SDN
   controller uses the exit link utilization information to steer the
   Internet access traffic among all the exit links from the perspective
   of the whole network.

4.  Security Considerations

   This document only defines a new extended communities to carry the
   congestion status of the exit link.  This new extended community does
   not directly introduce any new security issues.  The same security
   considerations as for the BGP extended community [RFC4360] applies.

5.  IANA Considerations

   One sub-type is solicited to be assigned from Transitive Four-Octet
   AS-Specific Extended Community Sub-Types registry to indicate the
   Congestion Status Extended Community defined in this document.

6.  Acknowledgments

   Many thanks to Rudiger Volk, Susan Hares, John Scudder, Randy Bush
   for their review and comments to improve this document.







Li & Dong                Expires January 1, 2018                [Page 5]

Internet-Draft    congestion status extended community         June 2017


7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC4271]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A
              Border Gateway Protocol 4 (BGP-4)", RFC 4271,
              DOI 10.17487/RFC4271, January 2006,
              <http://www.rfc-editor.org/info/rfc4271>.

   [RFC4360]  Sangli, S., Tappan, D., and Y. Rekhter, "BGP Extended
              Communities Attribute", RFC 4360, DOI 10.17487/RFC4360,
              February 2006, <http://www.rfc-editor.org/info/rfc4360>.

   [RFC7153]  Rosen, E. and Y. Rekhter, "IANA Registries for BGP
              Extended Communities", RFC 7153, DOI 10.17487/RFC7153,
              March 2014, <http://www.rfc-editor.org/info/rfc7153>.

7.2.  Informative References

   [constrained-multiple-path]
              Boucadair, M. and C. Jacquenet, "Constrained Multiple BGP
              Paths", October 2010.

   [RFC2439]  Villamizar, C., Chandra, R., and R. Govindan, "BGP Route
              Flap Damping", RFC 2439, DOI 10.17487/RFC2439, November
              1998, <http://www.rfc-editor.org/info/rfc2439>.

   [RFC4456]  Bates, T., Chen, E., and R. Chandra, "BGP Route
              Reflection: An Alternative to Full Mesh Internal BGP
              (IBGP)", RFC 4456, DOI 10.17487/RFC4456, April 2006,
              <http://www.rfc-editor.org/info/rfc4456>.

   [RFC6793]  Vohra, Q. and E. Chen, "BGP Support for Four-Octet
              Autonomous System (AS) Number Space", RFC 6793,
              DOI 10.17487/RFC6793, December 2012,
              <http://www.rfc-editor.org/info/rfc6793>.

   [RFC7911]  Walton, D., Retana, A., Chen, E., and J. Scudder,
              "Advertisement of Multiple Paths in BGP", RFC 7911,
              DOI 10.17487/RFC7911, July 2016,
              <http://www.rfc-editor.org/info/rfc7911>.





Li & Dong                Expires January 1, 2018                [Page 6]

Internet-Draft    congestion status extended community         June 2017


Authors' Addresses

   Zhenqiang Li
   China Mobile
   No.32 Xuanwumenxi Ave., Xicheng District
   Beijing  100032
   P.R. China

   Email: li_zhenqiang@hotmail.com


   Jie Dong
   Huawei Technologies
   Huawei Campus, No.156 Beiqing Rd.
   Beijing  100095
   P.R. China

   Email: jie.dong@huawei.com

































Li & Dong                Expires January 1, 2018                [Page 7]
