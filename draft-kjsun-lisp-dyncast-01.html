<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>LISP Support for Dynamic Anycast Routing</title>
<meta content="Kyoungjae Sun" name="author">
<meta content="Younghan Kim" name="author">
<meta content="
       Dynamic Anycast (Dyncast) is a new routing approach to support equivalent services running in distributed geolocations and connect to them by considering both network-related metric and service-related metric. In LISP, it is possible to support anycast EIDs and/or anycast RLOCs without any modification, so it is suitable for providing dyncast routing. In this document, it describes the LISP-based dyncast architecture and related standard works to meet dyncast requirements. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-kjsun-lisp-dyncast-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-kjsun-lisp-dyncast-01-h1wonqvy.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">LISP Anycast</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Sun &amp; Kim</td>
<td class="center">Expires 28 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-kjsun-lisp-dyncast-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-10-25" class="published">25 October 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-28">28 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Sun</div>
<div class="org">Soongsil University</div>
</div>
<div class="author">
      <div class="author-name">Y. Kim</div>
<div class="org">Soongsil University</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">LISP Support for Dynamic Anycast Routing</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Dynamic Anycast (Dyncast) is a new routing approach to support equivalent services running in distributed geolocations and connect to them by considering both network-related metric and service-related metric. In LISP, it is possible to support anycast EIDs and/or anycast RLOCs without any modification, so it is suitable for providing dyncast routing. In this document, it describes the LISP-based dyncast architecture and related standard works to meet dyncast requirements.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 April 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-architecture-overview" class="xref">Architecture Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-addressing-dyncast-requirem" class="xref">Addressing Dyncast Requirements with LISP</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-anycast-based-service-addre" class="xref">Anycast-based Service Addressing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-instance-affinity" class="xref">Instance Affinity</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-encoding-and-signaling-of-m" class="xref">Encoding and Signaling of Metric</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-dynamic-routing-decisions-b" class="xref">Dynamic Routing Decisions based using Metrics</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-supporting-service-dynamism" class="xref">Supporting Service Dynamism</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
     In an environment where equivalent services are distributed in multiple geographic locations, Dynamic-Anycast (Dyncast) enables to perform resource-efficient anycast routing. To support dyncast described in <span>[<a href="#draft-liu-dyncast-ps-usecases" class="xref">draft-liu-dyncast-ps-usecases</a>]</span>, a unique service identifier that can be assigned to multiple instances in multiple edge environments should be able to be mapped as an actual routable unicast address. Since this concept is similar to the Location/ID separation method already used in the LISP design basis, the LISP protocol can be considered as one of the candidate protocols that can implement dyncast. This draft is proposed to design the LISP-based architecture for Dyncast and analyze the extension method of LISP to meet the requirements defined in <span>[<a href="#draft-liu-dyncast-reqs" class="xref">draft-liu-dyncast-reqs</a>]</span> for realizing dynamic anycasting between different LISP sites.<a href="#section-1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document is to be interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>. This document uses the terminology described in <span>[<a href="#RFC6830" class="xref">RFC6830</a>]</span>, <span>[<a href="#draft-liu-dyncast-ps-usecases" class="xref">draft-liu-dyncast-ps-usecases</a>]</span>, <span>[<a href="#draft-liu-dyncast-reqs" class="xref">draft-liu-dyncast-reqs</a>]</span>. Detailed definition of terminologies are written below.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">
     Dyncast : As defined in <span>[<a href="#draft-liu-dyncast-ps-usecases" class="xref">draft-liu-dyncast-ps-usecases</a>]</span>, Dynamic Anycast, taking the dynamic nature of computing resource metrics into account to steer an anycast routing decision.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">
     D-Router: A node supporting Dyncast functionalities as described in this document. Namely it is able to understand both network-related and service-instances-related metrics, take forwarding decision based upon and manitain instance affinity, i.e., forwards packets belonging to the same service demand to the same instance.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">
     Dyncast Metric Agent (D-MA): A dyncast specific agent able to gather and send metric updates (from both network and instance prespective) but not performing forwarding decisions. May run on a D-Router, but it can be also implementated as a separate module (e.g., a software library) collocated with a service instance.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">
     Dyncast Service Endpoint ID (DSEID) : Anycast IP address assigned to the service running on distributed locations. DSEID cannot be routed globally, and it is unique for specific service. Multiple service instances which are same service have a same DSEID.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">
     D-BID: Dyncast Binding D-Node, an address to reach a service instance for a given DSEID. It is usually a unicast IP where service instances are attached. Different service instances provide the same service identified through D-SID but with different Dyncast Binding IDs. In the LISP architecture, D-BIDs of same service are replaced to RLOC-set of DSEID.<a href="#section-2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-architecture-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-architecture-overview" class="section-name selfRef">Architecture Overview</a>
      </h2>
<p id="section-3-1">
      Figure 1 describes the Dyncast architecture based on LISP. In the LISP architecture <span>[<a href="#draft-ietf-lisp-introduction-13" class="xref">draft-ietf-lisp-introduction-13</a>]</span>, each edge network has one or more LISP routers deployed. For anycast address, <span>[<a href="#RFC6830" class="xref">RFC6830</a>]</span> defines that anycast address can be assigned for both Endpoint ID (EID) and Routing Locator (RLOC) within each of their address spaces. In this draft, we called EID for dynamic anycasting as Dyncast Service Endpoint ID (DSEID), which is assigned to equivalent services across the multiple LISP sites. Similar to the common EID definition, the DSEID cannot be routed globally by itself, and the same DSEID cannot be assigned to different services. In order to forward a packet destined for a DSEID between LISP edges, the addresses of the LISP Egress Tunnel Router (ETR) are used as RLOC-set, which was difined as a Dyncast Binding ID (D-BID) in <span>[<a href="#draft-li-dyncast-architecture" class="xref">draft-li-dyncast-architecture</a>]</span>. Unlike D-BID which is routable and unique for all each service instance, RLOC-set is routable in the underlay but it is not unique values per each service instances. When multiple services are running in the same LISP site, they can be assigned the same RLOC which is xTR of their LISP site. Map-server/resolver of the LISP control plane can manage mapping information for DESID-to-RLOC-set mappings together with existing EID-to-RLOC mappings.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">
      For resource-efficient forwarding decisions across multiple service instances, <span>[<a href="#draft-li-dyncast-architecture" class="xref">draft-li-dyncast-architecture</a>]</span> defines Dyncast Metric Agent (D-MA) which collects metrics related network and service instances. Actual packet forwarding is handled in the Dyncast Router (D-Router) based upon collected metrics with maintaining instance affinity. In the LISP architecture, the D-Router function can be implemented on the LISP xTR, and the D-MA can be deployed as a separate component within the edge for managing service instances, or it can be deployed in combination with the LISP xTR. The LISP control plane is logically centralized and it provides an interface with each LISP router to exchange mapping information. However, it does not mean that the LISP control plane is located in a single physical location, several mechanisms for distributing the mapping system already have been defined.<a href="#section-3-2" class="pilcrow">¶</a></p>
<span id="name-lisp-based-dyncast-architec"></span><div id="Architecture">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-3-3.1">
<pre>

  LISP Edge 1                                   LISP Edge 2
''''''''''''''''                                '''''''''''''''
' +----------+ '                                ' +----------+'
' |  Service |  '                               ' |  Service |'
' | Instance |  '                               ' | Instance |'
' |  (DSEID) |  '                               ' |  (DSEID) |'
' +----------+  '                               ' +----------+'
'      |         '   +---------------------+    '      |      '
'      |         '   |  LISP Control Plane |    '      |      '
' +----------+"""'"""+---------------------+"   '      |      '
' |   D-MA   |   '""  "                      "  '      |      '
' +----------+   "   "                       "  '      |      '
'      |       " '  "                        "  ' +----------+'
'      |      " '  "                         "    |   D-MA   |'
' +----------+ '  " +--------------------+    '"  +----------+'
' | LISP-xTR |RLOC" |    Core Network    |RLOC'   | LISP-xTR |'
' |(D-Router)|----"-|    (RLOC-Space)    |--------|(D-Router)|'
' +----------+ '  " +--------------------+    '   +----------+'
'      |       '  "  '''''''''|'''''''''''
'      |        '  "'         |RLOC       '   '        |      '
'      |        ' '"+--------------------+ '  '        |      '
'      |        ' ' | LISP-xTR (D-Router)| '  '        |      '
'      |        ' ' +--------------------+ '  '        |      '
' +----------+  '  '          |            '  '   +----------+'
' |  Client  | '   '     +----------+     '   '   |  Client  |'
' |  (EID)   | '    '    |  Client  |    '    '   |  (EID)   |'
' +----------+ '   '     |  (EID)   |   '     '   +----------+'
'              '    '    +----------+  '        '             '
 ''''''''''''''      ''''''''''''''''''          ''''''''''''''
                          LISP Edge 3
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-lisp-based-dyncast-architec" class="selfRef">LISP-based Dyncast Architecture</a>
        </figcaption></figure>
</div>
<p id="section-3-4">
      Figure 3 shows an example of LISP-based dyncast deployment where two services each deployed two instances at different edges. In this scenario, two services are assigned an RLOC according to the ETR address of the LISP site. Both Service_A and Service_B instances connected to ETR_2 are assigned RLOC2, which is the RLOC of ETR_2, as a binding ID. According this figure, DSEID-to-RLOC-set mappings can be configured as an example below.<a href="#section-3-4" class="pilcrow">¶</a></p>
<span id="name-dseid-to-rloc-set-example"></span><figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-3-5.1">
<pre>

     DSEID                 RLOC-set
     -----------------------------------------------------------
     DSEID_A          RLOC-set_A ({RLOC2, metric}, {RLOC3, metric})
     DSEID_B          RLOC-set_B ({RLOC2, metric}, {RLOC3, metric})

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-dseid-to-rloc-set-example" class="selfRef">DSEID-to-RLOC-set Example</a>
        </figcaption></figure>
<p id="section-3-6">
      In addition to these examples, the RLOC-set can also be used in the form of Explicit Locator Path (ELP) or Run-Length Encoding (RLE) for the encap-path between ETR and ITR.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">
   In the case of the edge where ETR_2 is located, as an edge composed only of service instances, the LISP Router function can be operated by being strongly coupled to the edge computing server. In this case, the D-MA function can be implemented on the ETR to insert service-instance-related metrics directly into the LISP protocol packet. In case that a service instance and a client co-exist like an edge where ETR_3 is located, the D-MA entity can be independently deployed proximity of the service instance is running, transparent from the LISP operation for clients. Mapping information update for DSEID is performed through the LISP protocol Map-Register message, and service-instance-related metric can be delivered through in the LISP protocol header or other methods. A method of inserting service-instance-related metric information into the LISP protocol will be discussed later. When the ITR_1 receives a packet destined for the DSEID of the service by service request from the Host_1, the ITR can acquire the RLOC-set of the requested DSEID from the LISP control-plane through the Map-Request message. At the control plane, it may select a proper RLOC on the collected metric information and return it to the ITR or return the RLOC-set of multiple service instances with metric information to the ITR so the ITR selects the proper RLOC in the set. A method for determining an appropriate RLOC will be discussed later.<a href="#section-3-7" class="pilcrow">¶</a></p>
<span id="name-lisp-based-dyncast-example-"></span><div id="Example">
<figure id="figure-3">
        <div class="alignLeft art-text artwork" id="section-3-8.1">
<pre>

                                                             Service_A
                                                              +-------+
                  Map-Register              D-Router        +-|DSEID_A|
                (DSEID_A, RLOC2, &lt;metric&gt;) +-------+------+ | +-------+
                (DESID_B, RLOC2, ,metric&gt;) | ETR_2 | D-MA |-|
                                           +-------+------+ | +-------+
                                               |            +-|DSEID_B|
                         +------------------+  | RLOC2        +-------+
  Host_1     D-Router    | +--------------+ |--+             Service_B
+--------+  +-------+    | |     LISP     | |
| EID_H1 |--| ITR_1 |----| | Control Plane| | Map-Register
+--------+  +-------+    | +--------------+ |(DSEID_A, RLOC3, &lt;metric&gt;)
                    RLOC1|    RLOC-Space    |(DSEID_B, RLOC3, &lt;metric&gt;)
                         |                  |--+ RLOC3
                   &lt;---- +------------------+  |
          Map-Reply                        D-Router      Host_2
         (DSEID_A, RLOC-set_A, &lt;metric&gt;)   +-------+   +--------+
         (DSEID_B, RLOC-set_B, &lt;metric&gt;)   | ETR_3 |---| EID_H2 |
                                           +-------+   +--------+
                                               |
                                            +------+
                                            | D-MA |
                                            +------+
                                               |
                                         +-----+-----+
                                         |           |
                                     +-------+     +-------+
                                     |DSEID_A|     |DSEID_B|
                                     +-------+     +-------+
                                     Service_A    Service_B

</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-lisp-based-dyncast-example-" class="selfRef">LISP-based Dyncast Example Scenario</a>
        </figcaption></figure>
</div>
</section>
<section id="section-4">
      <h2 id="name-addressing-dyncast-requirem">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-addressing-dyncast-requirem" class="section-name selfRef">Addressing Dyncast Requirements with LISP</a>
      </h2>
<div id="Addressing">
<section id="section-4.1">
        <h3 id="name-anycast-based-service-addre">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-anycast-based-service-addre" class="section-name selfRef">Anycast-based Service Addressing</a>
        </h3>
<p id="section-4.1-1">
      To support dyncast routing, the system must provide a method for searching a service identifier allocated as an anycast address and mapping it to a specific unicast address. From this point of view, the LISP is a suitable protocol for separating ID/Location of service and managing mapping information. When the system allocates the same DSEID to each service instance for service equivalency, the LISP can define an anycast address space for the DSEID and assign it to service instances created across multiple sites. Also, the D-BID can be replaced to an RLOC address of LISP xTR that can be routed between edges as unicast. That is, it is necessary to define a separate space for anycast address within the existing EID space and to allocate it in advance so that it can be used in all edge networks where the service instances are located. In the LISP definition, the EID assigned to each service has a globally unique value and, in particular, <span>[<a href="#RFC6830" class="xref">RFC6830</a>]</span> defines that anycast address can be assigned within an EID or RLOC block spaces. In each LISP site, same as the EID which is defined to enable internal routing, the DSEID can be able to be routed without the RLOC encapsulation process to the EID within a single site.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">  
  One of alternative addressing solution is to use anycast-SEID-to-anycast-RLOC mapping. Using this, it is required to register from one place (an SDN controller) or each ETR registering the same RLOC without any merge semantics. So the service is chosen by destination address in a packet (the anycast-EID) which maps to an anycast-RLOC where the underlay takes you to the "closest" LISP site. However, in the dyncast, routing selection is not depending on just distance but also computing resources of each service location. Depending on dynamics of these metrics, anycast-RLOC should be registered/deregistered at the ETR depending on the absence of specific anycast-EID. Further discussion is required which is more efficient rather than using indirection mapping and update it with unicast-RLOC with metric information.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Affinity">
<section id="section-4.2">
        <h3 id="name-instance-affinity">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-instance-affinity" class="section-name selfRef">Instance Affinity</a>
        </h3>
<p id="section-4.2-1">
      For dyncast routing, it is required that the system must set "Instance Affinity" for one or several service requests to provide routing to the same service instance for the same flow. In LISP, the RLOC mapping information for the destination EID is stored in a local cache called Map-cache in the ITR for a certain period of time, and it is maintained for a set time-to-live (TTL) time. Therefore, mapping information for a specific service once requested from a client is generally maintained in the ITR until the corresponding session expires and can be delivered to the RLOC stored in the map-cache entry. However, in order to have a flexible selection of service instances between different flows at the same point, it is additionally required to assign different RLOCs for different flows depending on metrics dynamically changed. For that, it is necessary to enhance ITR Map-cache to maintain destination RLOC for each flow. In <span>[<a href="#draft-rodrigueznatal-lisp-multi-tuple-eids" class="xref">draft-rodrigueznatal-lisp-multi-tuple-eids</a>]</span>, it can be supported to store Multi-Tuple Extend-EID mappings. With Multi-Tuple EID mappings, it is possible to provide RLOC affinity depending on its destination DSEID as well as other information such as source EID, protocol or port number. For that, it is required to support multi-stage lookup process, where the multi-tuple EID mappings that point to an DSEID and then there is a DSEID mapping that points to RLOC-set.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">
      In addition, although the general TTL value in LISP ITR is defined as 24 hours, in dyncast the system requires a shorter TTL time for changing network path depending on dynamically updated network-related and service-instance-related metrics. The LISP support to send a refresh Map-Request before removing map-cache entry. If it needs a shorter TTL to update the map-cache, two options are possible. First option is to send Solicit Map-Request(SMR) for refreshing cache, and another option is to use Pub/Sub which is described in <span>[<a href="#draft-ietf-lisp-pubsub" class="xref">draft-ietf-lisp-pubsub</a>]</span>.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Encoding">
<section id="section-4.3">
        <h3 id="name-encoding-and-signaling-of-m">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-encoding-and-signaling-of-m" class="section-name selfRef">Encoding and Signaling of Metric</a>
        </h3>
<p id="section-4.3-1">
      In dyncast routing, the one of most important requirements is that it should be able to collect various metrics of service-instances-related as well as network-related, and include them in-network routing decisions. For that, it is necessary to define how to collect these metrics and forward them, and also where to make a decision. In the LISP environment, since that the entire EID-RLOC mapping information is managed in the control plane, one possible scenario is that the D-MA function which collects service-instance-related metrics updates them to the DSEID mapping entry in the LISP control plane. For that, it can be used an encoding method proposed in <span>[<a href="#draft-farinacci-lisp-name-encoding" class="xref">draft-farinacci-lisp-name-encoding</a>]</span> that defines to insert specific information such as parameters for a specific EID or RLOC using an ASCII string. Using that, it is possible to encode a string that is pre-defined of a specific metric to interpret in the control plane and send a Map-Request message so that the control plane can select an appropriate RLOC based on it. Another possible option is to use policy distribution by a network controller, which is proposed in <span>[<a href="#draft-kowal-lisp-policy-distribution" class="xref">draft-kowal-lisp-policy-distribution</a>]</span>. Using network controller, the ITR could receive and apply the QoS policies that would shape traffic to the correct rate on each ITR RLOC interface. In order to insert service-instance-related metrics from the DSEID side, the D-MA must forward the metrics of the requested service to the LISP ITR so that the metric can be inserted into the header of the Map-Register message. This metric information encoded into the Map-Register message can help the LISP control plane to make multi-tuple mapping entry and sent it to the requested ITR. Once the requested ITR receives these information, it can make a routing decision based on the multi-tuple parameters.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Decision">
<section id="section-4.4">
        <h3 id="name-dynamic-routing-decisions-b">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-dynamic-routing-decisions-b" class="section-name selfRef">Dynamic Routing Decisions based using Metrics</a>
        </h3>
<p id="section-4.4-1">
      The dyncast system is required that in must make routing decisions for all service requests, and this must be done under an understanding of all metrics. Routing decisions in the LISP can be done with two options which is done in the control plane or ITR by specifying priority and weight values for each RLOC. In case that routing decisions are made in the control plane, the Map-Resolver dynamically sets the priority and weight values of each mapped RLOCs collected from D-MAs, selects a proper RLOC based on them, and forward it to the requested ITR using the Map-Reply message. However, since this centralized approach may not be calculated based on point of requested ITR, the actual routing path may not be optimal. In case that routing decision is determined at the ITR, the LISP control plane may return one or more RLOC values for the requested DSEID to the ITR, including priority and weight values based on the collected metrics. After receiving multiple DBIDs, the ITR stores them in map-cache entry and selects an appropriate one to forward the data packet. For that, a mechanism for estimating appropriate priority and weight values based on both network-related and service-instance-related metrics is required for the control plane or ITR. When DSEID-to-RLOC-set mapping is used, it is noted that if RLOCs in the set have equal priority, the ITR can load-split traffic across RLOCs and that cause to break session connection. So, an ITR that is configured that a particular EID in its map-cache is an DSEID, it should be cared to use an RLOC-set above with each RLOC priority=1.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">
      In the dyncast architecture described in <span>[<a href="#draft-li-dyncast-architecture" class="xref">draft-li-dyncast-architecture</a>]</span>, the D-Router collects metrics by exchanging metric information of the service identifier between another edge D-Routers and make a decision itself. This approach can minimize the signaling for routing decisions by decentralizing the authority for the anycast routing decision to an entity in the actual packet path, but the signaling for collecting metrics between each D-Router is bound to increase. In contrast, when the LISP is used, it can reduce effectively signaling of collecting metrics from the ITR since that the mapping information for DSEID and RLOC-set can be managed in a centralized control plane. However, if the metrics change too much then the contents of the RLOC-set changes which requires more frequent map-cache updates. So analyzing in depth of this tradeoff remains further studies.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Dynamism">
<section id="section-4.5">
        <h3 id="name-supporting-service-dynamism">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-supporting-service-dynamism" class="section-name selfRef">Supporting Service Dynamism</a>
        </h3>
<p id="section-4.5-1">
      For service dynamism, the dyncast system should support different selections for each flow according to a dynamically changing metric while considering various requirements in the selection of a service instance. As mentioned in <a href="#Affinity" class="xref">Section 4.2</a>, <span>[<a href="#draft-rodrigueznatal-lisp-multi-tuple-eids" class="xref">draft-rodrigueznatal-lisp-multi-tuple-eids</a>]</span> can provide the map-cache to be maintained for each flow, so the forwarding path can be dynamically changed to the different service instances by allocating target RLOC to the map-cache entry per-flow according to dynamic changes of metrics. In order to refresh the DSEID-to-RLOC-set mapping upon changing metric, the Solicit Map-Request(SMR) message can be used to update so that the ITR can update the weight and priority for the RLOC which is already received from the Map-server. Additionally, as proposed in <span>[<a href="#draft-farinacci-lisp-telemetry" class="xref">draft-farinacci-lisp-telemetry</a>]</span>, telemetry data can be collected between Encapsulating/Decapsulating xTRs of the current flow, which is expected to be used for dynamic service path reselection.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-5-1"> 
       TBD<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-references">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-informative-references">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="draft-farinacci-lisp-name-encoding">[draft-farinacci-lisp-name-encoding]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refTitle">"LISP Distinguished Name Encoding"</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-farinacci-lisp-name-encoding/">https://datatracker.ietf.org/doc/draft-farinacci-lisp-name-encoding/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-farinacci-lisp-telemetry">[draft-farinacci-lisp-telemetry]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Ouissal, S.</span>, and <span class="refAuthor">E. Nordmark</span>, <span class="refTitle">"LISP Data-Plane Telemetry"</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-farinacci-lisp-telemetry/">https://datatracker.ietf.org/doc/draft-farinacci-lisp-telemetry/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-lisp-introduction-13">[draft-ietf-lisp-introduction-13]</dt>
        <dd>
<span class="refAuthor">Cabellos, A.</span> and <span class="refAuthor">D. Saucez</span>, <span class="refTitle">"An Architectural Introduction to the Locator/ID Separation Protocol (LISP)"</span>, <time datetime="2015-04" class="refDate">April 2015</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-ietf-lisp-introduction/">https://datatracker.ietf.org/doc/draft-ietf-lisp-introduction/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-ietf-lisp-pubsub">[draft-ietf-lisp-pubsub]</dt>
        <dd>
<span class="refAuthor">Rodrigues-Natal, A.</span>, <span class="refAuthor">Ermagan, V.</span>, <span class="refAuthor">Cabellos, A.</span>, <span class="refAuthor">Barkai, S.</span>, and <span class="refAuthor">M. Boucadair</span>, <span class="refTitle">"Publish/Subscribe Functionality for LISP"</span>, <time datetime="2021-06" class="refDate">June 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-ietf-lisp-pubsub/">https://datatracker.ietf.org/doc/draft-ietf-lisp-pubsub/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-kowal-lisp-policy-distribution">[draft-kowal-lisp-policy-distribution]</dt>
        <dd>
<span class="refAuthor">Kowal, M.</span>, <span class="refAuthor">Portoles, M.</span>, <span class="refAuthor">Jain, A.</span>, and <span class="refAuthor">D. Farinacci</span>, <span class="refTitle">"LISP Transport for Policy Distribution"</span>, <time datetime="2021-09" class="refDate">September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-kowal-lisp-policy-distribution/">https://datatracker.ietf.org/doc/draft-kowal-lisp-policy-distribution/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-li-dyncast-architecture">[draft-li-dyncast-architecture]</dt>
        <dd>
<span class="refAuthor">Li, Y.</span>, <span class="refAuthor">Iannone, L.</span>, <span class="refAuthor">Trossen, D.</span>, and <span class="refAuthor">P. Liu</span>, <span class="refTitle">"Dynamic-Anycast Architecture"</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-li-dyncast-architecture/">https://datatracker.ietf.org/doc/draft-li-dyncast-architecture/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-liu-dyncast-ps-usecases">[draft-liu-dyncast-ps-usecases]</dt>
        <dd>
<span class="refAuthor">Liu, P.</span>, <span class="refAuthor">Willis, P.</span>, and <span class="refAuthor">D. Trossen</span>, <span class="refTitle">"Dynamic-Anycast (Dyncast) Use Cases; Problem Statement"</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-liu-dyncast-ps-usecases/">https://datatracker.ietf.org/doc/draft-liu-dyncast-ps-usecases/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-liu-dyncast-reqs">[draft-liu-dyncast-reqs]</dt>
        <dd>
<span class="refAuthor">Liu, P.</span>, <span class="refAuthor">Willis, P.</span>, and <span class="refAuthor">D. Trossen</span>, <span class="refTitle">"Dynamic-Anycast (Dyncast) Requirements"</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-liu-dyncast-reqs/">https://datatracker.ietf.org/doc/draft-liu-dyncast-reqs/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="draft-rodrigueznatal-lisp-multi-tuple-eids">[draft-rodrigueznatal-lisp-multi-tuple-eids]</dt>
        <dd>
<span class="refAuthor">Rodrigues-Natal, A.</span>, <span class="refAuthor">Cabellos-Aparicio, A.</span>, <span class="refAuthor">Barkai, S.</span>, <span class="refAuthor">Ermagan, V.</span>, <span class="refAuthor">Lewis, D.</span>, <span class="refAuthor">Maino, F.</span>, and <span class="refAuthor">D. Farinacci</span>, <span class="refTitle">"LISP support for Multi-Tuple EIDs"</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-rodrigueznatal-lisp-multi-tuple-eids/">https://datatracker.ietf.org/doc/draft-rodrigueznatal-lisp-multi-tuple-eids/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">RFC 2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/rfc2119/">https://datatracker.ietf.org/doc/rfc2119/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6830">[RFC6830]</dt>
      <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Fuller, V.</span>, <span class="refAuthor">Meyer, D.</span>, and <span class="refAuthor">D. Lewis</span>, <span class="refTitle">"The Locator/ID Separation Protocol (LISP)"</span>, <span class="seriesInfo">RFC 6830</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/rfc6830/">https://datatracker.ietf.org/doc/rfc6830/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kyoungjae Sun</span></div>
<div dir="auto" class="left"><span class="org">Soongsil University</span></div>
<div dir="auto" class="left"><span class="street-address">369, Sangdo-ro, Dongjak-gu</span></div>
<div dir="auto" class="left"><span class="locality">Seoul</span></div>
<div dir="auto" class="left"><span class="postal-code">06978</span></div>
<div dir="auto" class="left"><span class="country-name">Republic of Korea</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+82%2010%203643%205627" class="tel">+82 10 3643 5627</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:gomjae@dcn.ssu.ac.kr" class="email">gomjae@dcn.ssu.ac.kr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Younghan Kim</span></div>
<div dir="auto" class="left"><span class="org">Soongsil University</span></div>
<div dir="auto" class="left"><span class="street-address">369, Sangdo-ro, Dongjak-gu</span></div>
<div dir="auto" class="left"><span class="locality">Seoul</span></div>
<div dir="auto" class="left"><span class="postal-code">06978</span></div>
<div dir="auto" class="left"><span class="country-name">Republic of Korea</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+82%2010%202691%200904" class="tel">+82 10 2691 0904</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:younghak@ssu.ac.kr" class="email">younghak@ssu.ac.kr</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
