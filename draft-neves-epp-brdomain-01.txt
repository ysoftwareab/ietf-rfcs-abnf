


Network Working Group                                           F. Neves
Internet-Draft                                              H. Kobayashi
Expires: August 28, 2006                                     Registro.br
                                                       February 24, 2006


    BR Domain Mapping for the Extensible Provisioning Protocol (EPP)
                    draft-neves-epp-brdomain-01.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 28, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This document describes an Extensible Provisioning Protocol (EPP)
   extension mapping for the provisioning and management of .br Internet
   domain names stored in a shared central repository.  Specified in
   XML, this mapping extends the EPP domain name mapping to provide
   additional features required for the provisioning of .br domain
   names.





Neves & Kobayashi        Expires August 28, 2006                [Page 1]

Internet-Draft            EPP BR Domain Mapping            February 2006


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1.  Conventions Used In This Document  . . . . . . . . . . . .  3
   2.  Object Attributes  . . . . . . . . . . . . . . . . . . . . . .  3
     2.1.  Ticket Number  . . . . . . . . . . . . . . . . . . . . . .  3
     2.2.  Organization Identifier  . . . . . . . . . . . . . . . . .  4
     2.3.  Release Process  . . . . . . . . . . . . . . . . . . . . .  4
       2.3.1.  Flags  . . . . . . . . . . . . . . . . . . . . . . . .  4
     2.4.  Host Status  . . . . . . . . . . . . . . . . . . . . . . .  4
     2.5.  Pending  . . . . . . . . . . . . . . . . . . . . . . . . .  4
       2.5.1.  Documentation Pending  . . . . . . . . . . . . . . . .  4
       2.5.2.  DNS Pending  . . . . . . . . . . . . . . . . . . . . .  5
       2.5.3.  Release Process Pending  . . . . . . . . . . . . . . .  5
     2.6.  Domain Equivalence . . . . . . . . . . . . . . . . . . . .  5
   3.  EPP Command Mapping  . . . . . . . . . . . . . . . . . . . . .  5
     3.1.  EPP Query Commands . . . . . . . . . . . . . . . . . . . .  5
       3.1.1.  EPP <check> Command  . . . . . . . . . . . . . . . . .  5
       3.1.2.  EPP <info> Command . . . . . . . . . . . . . . . . . .  9
       3.1.3.  EPP <transfer> Command . . . . . . . . . . . . . . . . 14
     3.2.  EPP Transform Commands . . . . . . . . . . . . . . . . . . 15
       3.2.1.  EPP <create> Command . . . . . . . . . . . . . . . . . 15
       3.2.2.  EPP <delete> Command . . . . . . . . . . . . . . . . . 19
       3.2.3.  EPP <renew> Command  . . . . . . . . . . . . . . . . . 19
       3.2.4.  EPP <transfer> Command . . . . . . . . . . . . . . . . 19
       3.2.5.  EPP <update> Command . . . . . . . . . . . . . . . . . 19
   4.  Formal Syntax  . . . . . . . . . . . . . . . . . . . . . . . . 24
   5.  Internationalization Considerations  . . . . . . . . . . . . . 30
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 30
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . . 31
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 31
     8.1.  Normative References . . . . . . . . . . . . . . . . . . . 31
     8.2.  Informative References . . . . . . . . . . . . . . . . . . 32
   Appendix A.  Changes from version 00 . . . . . . . . . . . . . . . 32
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 33
   Intellectual Property and Copyright Statements . . . . . . . . . . 34















Neves & Kobayashi        Expires August 28, 2006                [Page 2]

Internet-Draft            EPP BR Domain Mapping            February 2006


1.  Introduction

   This document describes a .br Internet domain name mapping for
   version 1.0 of the Extensible Provisioning Protocol (EPP).  This
   mapping, an extension of the domain name mapping described in
   [I-D.hollenbeck-epp-rfc3731bis], is specified using the Extensible
   Markup Language (XML) 1.0, as described in [W3C.REC-xml-20040204],
   and XML Schema notation, as described in [W3C.REC-xmlschema-1-
   20041028] and [W3C.REC-xmlschema-2-20041028].

   The EPP core protocol specification [I-D.hollenbeck-epp-rfc3730bis]
   provides a complete description of EPP command and response
   structures.  A thorough understanding of the base protocol
   specification is necessary to understand the mapping described in
   this document.

1.1.  Conventions Used In This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   In examples, "C:" represents lines sent by a protocol client and "S:"
   represents lines returned by a protocol server.  Indentation and
   white spaces in examples is provided only to illustrate element
   relationships and is not a REQUIRED feature of this protocol.

   XML is case sensitive.  Unless stated otherwise, XML specifications
   and examples provided in this document MUST be interpreted in the
   character case presented to develop a conforming implementation.


2.  Object Attributes

   This extension adds elements to the EPP domain name mapping
   [I-D.hollenbeck-epp-rfc3731bis].  Only new element descriptions are
   described here.

2.1.  Ticket Number

   A ticket is the unique sequential identifier that represents and
   guarantees the principle of first come first served operations for a
   .br domain name registration.  A ticket represents a .br domain name
   registration request that has a "pendingCreate" status.

   Multiple concurrent tickets for the same or equivalent domain object,
   representing requests made by different organizations, MAY be active
   at the same time.



Neves & Kobayashi        Expires August 28, 2006                [Page 3]

Internet-Draft            EPP BR Domain Mapping            February 2006


2.2.  Organization Identifier

   Organization identifiers are unique internal or external to the
   repository identifiers represented by character strings with a
   specified minimum length, and a specified maximum length.
   Organization identifiers use the "orgIDType" syntax described in
   [I-D.neves-epp-brorg].

2.3.  Release Process

   When a domain name is deleted it does not return to the free name
   space.  It need to pass a so called "Release Process", that offers
   these names for a fixed period of time to the public.  Depending on
   the number of interested parties for each domain name and the
   demonstration of specific rights to it, at the end of the process, a
   name could be assigned to an interested party, return to the free
   name space, or return to a list to be offered again in a future
   release process.

2.3.1.  Flags

   This document defines 3 generic flags to be used during the release
   process.  The semantics of these flags are announced before the
   beginning of each process.  The purpose of these flags is to signal
   specific rights of an organization on a requested domain name.

2.4.  Host Status

   Before a name server is accepted as a delegated server for a given
   .br domain name, it MUST be configured to answer DNS queries
   authoritatively for this domain name.

   The status of a name server is checked by the server upon receipt of
   a command that add new name servers to a domain object.

2.5.  Pending

   Registration requests MAY have their status set as "pendingCreate"
   due to some off-line procedures.  There are 3 kinds of pending that
   may require off-line procedures by the registrant, the sponsoring
   client or the registry.

2.5.1.  Documentation Pending

   Depending on the category of the domain name, some proof of
   eligibility MAY be required.  In this case, a doc pending will be set
   until the list of documents is sent by the registrant.




Neves & Kobayashi        Expires August 28, 2006                [Page 4]

Internet-Draft            EPP BR Domain Mapping            February 2006


2.5.2.  DNS Pending

   Authoritative servers MUST be provided to complete the domain
   registration.  If the delegated servers does not answer
   authoritatively at registration time, a dns pending will be set until
   problem is solved.

2.5.3.  Release Process Pending

   This pending signals the end and the result of the release process.

2.6.  Domain Equivalence

   For registration purposes, an equivalence mapping for the comparison
   of domain names is established.  The mapping is carried through
   changing the accented characters and "c" cedilla, respectively, for
   their not accented versions and the "c" character, and discarding
   hyphens.  The valid characters table for IDNA [RFC3490] in the .br
   registry is describe in [BR-Portuguese-Table].

   A given domain name X is considered equivalent to another domain name
   Y if, after applying the equivalence mapping, the resulting domain
   names X' and Y' are equal.


3.  EPP Command Mapping

   A detailed description of the EPP syntax and semantics can be found
   in the EPP core protocol specification [I-D.hollenbeck-epp-
   rfc3730bis].  The command mappings described here are specifically
   for use in provisioning and managing .br Internet domain names via
   EPP.

3.1.  EPP Query Commands

   EPP provides three commands to retrieve object information: <check>
   to determine if an object is known to the server, <info> to retrieve
   detailed information associated with an object, and <transfer> to
   retrieve object transfer status information.

3.1.1.  EPP <check> Command

   This extension defines additional elements to the EPP <check> command
   and EPP <check> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

   The EPP <check> command is used to determine if an object can be
   provisioned within a repository.  In addition to the EPP command



Neves & Kobayashi        Expires August 28, 2006                [Page 5]

Internet-Draft            EPP BR Domain Mapping            February 2006


   elements described in the EPP domain mapping [I-D.hollenbeck-epp-
   rfc3731bis], the <check> command MAY contain an <extension> element.
   The <extension> element MUST contain a child element <brdomain:check>
   element that identifies the extension namespace and the location of
   the extension schema.  The <brdomain:check> element contains the
   following child element:

   -  A <brdomain:organization> element that contains the identifier for
      the organization object that MAY be associated with the domain
      object as the object registrant.  The EPP mapping for organization
      objects is described in [I-D.neves-epp-brorg].

   Example <check> command with organization object:

   C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   C:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   C:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   C:     epp-1.0.xsd">
   C:  <command>
   C:    <check>
   C:      <domain:check
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   C:       domain-1.0.xsd">
   C:        <domain:name>example.com.br</domain:name>
   C:        <domain:name>example.net.br</domain:name>
   C:        <domain:name>example.org.br</domain:name>
   C:      </domain:check>
   C:    </check>
   C:    <extension>
   C:      <brdomain:check
   C:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   C:       brdomain-1.0.xsd">
   C:       <brdomain:organization>
   C:         005.506.560/0001-36
   C:       </brdomain:organization>
   C:      </brdomain:check>
   C:    </extension>
   C:    <clTRID>ABC-12345</clTRID>
   C:  </command>
   C:</epp>

   When a <check> command has been processed successfully, the EPP
   <resData> element MUST contain child elements as described in the EPP
   domain mapping [I-D.hollenbeck-epp-rfc3731bis].  In addition, the EPP
   <response> element MUST contain a child <extension> element if there



Neves & Kobayashi        Expires August 28, 2006                [Page 6]

Internet-Draft            EPP BR Domain Mapping            February 2006


   is any unavailable domain object.  The <extension> element MUST
   contain a child <brdomain:chkData> element that identifies the
   extension namespace and the location of the extension schema.  The
   <brdomain:chkData> element contains one or more of the following
   child element:

   -  One or more <brdomain:cd> elements.  Each <brdomain:cd>element
      contains OPTIONAL hasConcurrent and inReleaseProcess attributes to
      indicate if there is any request for this domain name registration
      or if the domain name is being offered in the release process,
      respectively.  The <brdomain:cd> element contains the following
      child elements:

      -  A <brdomain:name> element that contains the fully qualified
         name of the queried domain object.

      -  An OPTIONAL <brdomain:equivalentName> element that contains the
         fully qualified name of the equivalent domain object that is
         restricting the availability of the queried domain object.
         This element MUST NOT be present if the exact queried object is
         unavailable.

      -  An OPTIONAL <brdomain:organization> element that contains the
         identifier for the organization object that is associated with
         the queried or equivalent domain object.  This element MUST be
         present if the queried object is available.  The EPP mapping
         for organization objects is described in [I-D.neves-epp-brorg].

      -  Zero or more <brdomain:ticketNumber> elements that contain the
         identifiers of existing domain registration requests for
         equivalent domain name objects.  This element MUST NOT be
         present if the queried object is unavailable.

   Example <check> response with <extension> element:

   S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   S:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   S:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   S:     epp-1.0.xsd">
   S:  <response>
   S:    <result code="1000">
   S:      <msg>Command completed successfully</msg>
   S:    </result>
   S:    <resData>
   S:      <domain:chkData
   S:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0



Neves & Kobayashi        Expires August 28, 2006                [Page 7]

Internet-Draft            EPP BR Domain Mapping            February 2006


   S:       domain-1.0.xsd">
   S:        <domain:cd>
   S:          <domain:name avail="0">e-xample.net.br</domain:name>
   S:          <domain:reason>In use</domain:reason>
   S:        </domain:cd>
   S:        <domain:cd>
   S:          <domain:name avail="0">example.org.br</domain:name>
   S:        </domain:cd>
   S:        <domain:cd>
   S:          <domain:name avail="1">example.com.br</domain:name>
   S:        </domain:cd>
   S:        <domain:cd>
   S:          <domain:name avail="1">example.ind.br</domain:name>
   S:        </domain:cd>
   S:      </domain:chkData>
   S:    </resData>
   S:    <extension>
   S:      <brdomain:chkData
   S:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   S:       brdomain-1.0.xsd">
   S:        <brdomain:cd>
   S:          <brdomain:name>e-xample.net.br</brdomain:name>
   S:          <brdomain:equivalentName>
   S:             example.net.br
   S:          </brdomain:equivalentName>
   S:          <brdomain:organization>
   S:            043.828.151/0001-45
   S:          </brdomain:organization>
   S:        </brdomain:cd>
   S:        <brdomain:cd>
   S:          <brdomain:name>example.org.br</brdomain:name>
   S:          <brdomain:organization>
   S:            043.828.151/0001-45
   S:          </brdomain:organization>
   S:        </brdomain:cd>
   S:        <brdomain:cd hasConcurrent="1" inReleaseProcess="0">
   S:          <brdomain:name>example.com.br</brdomain:name>
   S:          <brdomain:ticketNumber>123456</brdomain:ticketNumber>
   S:        </brdomain:cd>
   S:        <brdomain:cd hasConcurrent="0" inReleaseProcess="1">
   S:          <brdomain:name>example.ind.br</brdomain:name>
   S:        </brdomain:cd>
   S:      </brdomain:chkData>
   S:    </extension>
   S:    <trID>
   S:      <clTRID>ABC-12345</clTRID>
   S:      <svTRID>54322-XYZ</svTRID>



Neves & Kobayashi        Expires August 28, 2006                [Page 8]

Internet-Draft            EPP BR Domain Mapping            February 2006


   S:    </trID>
   S:  </response>
   S:</epp>

   An EPP error response MUST be returned if an extended <check> command
   can not be processed for any reason.

3.1.2.  EPP <info> Command

   This extension defines additional elements to the EPP <info> command
   and EPP <info> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

   The EPP <info> command is used to retrieve information associated
   with a domain object.  In addition to the EPP command elements
   described in the EPP domain mapping [I-D.hollenbeck-epp-rfc3731bis],
   the <info> command MAY contain an <extension> element.  The
   <extension> element MUST contain a child element <brdomain:info>
   element that identifies the extension namespace and the location of
   the extension schema.  The <brdomain:info> element contains the
   following child element:

   -  A <brdomain:ticketNumber> element that contains the identifier of
      the domain registration request.



























Neves & Kobayashi        Expires August 28, 2006                [Page 9]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <info> command with ticket number:

   C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   C:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   C:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   C:     epp-1.0.xsd">
   C:  <command>
   C:    <info>
   C:      <domain:info
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   C:       domain-1.0.xsd">
   C:        <domain:name hosts="all">example.com.br</domain:name>
   C:      </domain:info>
   C:    </info>
   C:    <extension>
   C:      <brdomain:info
   C:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   C:       brdomain-1.0.xsd">
   C:       <brdomain:ticketNumber>123456</brdomain:ticketNumber>
   C:    </extension>
   C:    <clTRID>ABC-12345</clTRID>
   C:  </command>
   C:</epp>

   The <extension> element MUST only be used for domain objects with the
   "pendingCreate" status:

   When an <info> command has been processed successfully, the EPP
   <resData> element MUST contain child elements as described in the EPP
   domain mapping [I-D.hollenbeck-epp-rfc3731bis].  In addition, the EPP
   <response> element MUST contain a child <extension> element.  The
   <extension> element MUST contain a child <brdomain:infData> element
   that identifies the extension namespace and the location of the
   extension schema.  The <brdomain:infData> element contains the
   following child elements:

   -  An OPTIONAL <brdomain:ticketNumber> element that contains the
      identifier of the domain registration request.  This element MUST
      be present if the command contains this element.

   -  An <brdomain:organization> element that contains the identifier
      for the organization object associated with the domain object as
      the object registrant.  The EPP mapping for organization objects
      is described in [I-D.neves-epp-brorg].




Neves & Kobayashi        Expires August 28, 2006               [Page 10]

Internet-Draft            EPP BR Domain Mapping            February 2006


   -  An OPTIONAL <brdomain:releaseProcessFlags> element that contains
      flags for the release process.  This element MUST NOT be present
      if the request does not contain a <brdomain:ticketNumber> element.
      At least one of its attributes flag1, flag2, or flag3 MUST be
      provided.

   -  An OPTIONAL <brdomain:pending> element that contains pending
      information to be resolved before the registration request can be
      completed.  This element MUST NOT be present if the request does
      not contain a <brdomain:ticketNumber> element.  The <brdomain:
      pending> element contains the following child elements:

      -  Zero or more <brdomain:doc> elements that contains information
         about documents that MUST be sent by an off-line procedure.
         Each element MUST contain a status attribute.  A <brdomain:doc>
         element contains the following child elements:

         -  A <brdomain:docType> element that contains the type of
            document.

         -  A <brdomain:limit> element that contains the date and time
            limit of this pending.

         -  A <brdomain:description> element that has a description of
            the required document in human readable format.

      -  Zero or more <brdomain:dns> elements that contains DNS pending
         information.  Each element MUST contain a status attribute.  A
         <brdomain:dns> element contains the following child elements:

         -  A <brdomain:hostName> element that contains the fully
            qualified name of a host.

         -  A <brdomain:limit> element that contains the date and time
            limit of this pending.

      -  An OPTIONAL <brdomain:releaseProc> element.  This element MUST
         contain a status attribute.  A <brdomain:releaseProc> element
         contains the following child elements:

         -  A <brdomain:limit> element that contains the date and time
            limit of this pending.

   -  Zero or more <brdomain:ticketNumberConc> elements that contain the
      identifiers of concurrent domain registration requests for
      equivalent domain objects.  This element MUST NOT be present if
      the request does not contain a <brdomain:ticketNumber> element.




Neves & Kobayashi        Expires August 28, 2006               [Page 11]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <info> response of a command with ticket number:

   S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   S:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   S:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   S:     epp-1.0.xsd">
   S:  <response>
   S:    <result code="1000">
   S:      <msg>Command completed successfully</msg>
   S:    </result>
   S:    <resData>
   S:      <domain:infData
   S:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   S:       domain-1.0.xsd">
   S:        <domain:name>example.com.br</domain:name>
   S:        <domain:roid>EXAMPLE1-REP</domain:roid>
   S:        <domain:status s="pendingCreate"/>
   S:        <domain:contact type="admin">fan</domain:contact>
   S:        <domain:contact type="tech">fan</domain:contact>
   S:        <domain:contact type="billing">fan</domain:contact>
   S:        <domain:ns>
   S:          <domain:hostAttr>
   S:            <domain:hostName>ns1.example.com.br</domain:hostName>
   S:            <domain:hostAddr ip="v4">192.0.2.1</domain:hostAddr>
   S:          </domain:hostAttr>
   S:          <domain:hostAttr>
   S:            <domain:hostName>ns1.example.net.br</domain:hostName>
   S:          </domain:hostAttr>
   S:        </domain:ns>
   S:        <domain:clID>ClientX</domain:clID>
   S:        <domain:crID>ClientX</domain:crID>
   S:        <domain:crDate>2006-01-30T22:00:00.0Z</domain:crDate>
   S:        <domain:upID>ClientX</domain:upID>
   S:        <domain:upDate>2006-01-31T09:00:00.0Z</domain:upDate>
   S:      </domain:infData>
   S:    </resData>
   S:    <extension>
   S:      <brdomain:infData
   S:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   S:       brdomain-1.0.xsd">
   S:       <brdomain:ticketNumber>123456</brdomain:ticketNumber>
   S:       <brdomain:organization>
   S:         005.506.560/0001-36
   S:       </brdomain:organization>
   S:       <brdomain:pending>



Neves & Kobayashi        Expires August 28, 2006               [Page 12]

Internet-Draft            EPP BR Domain Mapping            February 2006


   S:         <brdomain:dns status="queryTimeOut">
   S:           <brdomain:hostName>
   S:             ns1.example.com.br
   S:           </brdomain:hostName>
   S:           <brdomain:limit>2006-02-13T22:00:00.0Z</brdomain:limit>
   S:         </brdomain:dns>
   S:         <brdomain:doc status="notReceived">
   S:           <brdomain:docType>CNPJ</brdomain:docType>
   S:           <brdomain:limit>2006-03-01T22:00:00.0Z</brdomain:limit>
   S:           <brdomain:description lang="pt">
   S:             Cadastro Nacional da Pessoa Juridica
   S:           </brdomain:description>
   S:         </brdomain:doc>
   S:         <brdomain:releaseProc status="waiting">
   S:           <brdomain:limit>2006-02-01T22:00:00.0Z</brdomain:limit>
   S:         </brdomain:releaseProc>
   S:       </brdomain:pending>
   S:       <brdomain:ticketNumberConc>
   S:         123451
   S:       </brdomain:ticketNumberConc>
   S:       <brdomain:ticketNumberConc>
   S:         123455
   S:       </brdomain:ticketNumberConc>
   S:      </brdomain:infData>
   S:    </extension>
   S:    <trID>
   S:      <clTRID>ABC-12345</clTRID>
   S:      <svTRID>54322-XYZ</svTRID>
   S:    </trID>
   S:  </response>
   S:</epp>

   Example <info> response of a command without ticket number:

   S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   S:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   S:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   S:     epp-1.0.xsd">
   S:  <response>
   S:    <result code="1000">
   S:      <msg>Command completed successfully</msg>
   S:    </result>
   S:    <resData>
   S:      <domain:infData
   S:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   S:       domain-1.0.xsd">



Neves & Kobayashi        Expires August 28, 2006               [Page 13]

Internet-Draft            EPP BR Domain Mapping            February 2006


   S:        <domain:name>example.com.br</domain:name>
   S:        <domain:roid>EXAMPLE1-REP</domain:roid>
   S:        <domain:status s="ok"/>
   S:        <domain:contact type="admin">fan</domain:contact>
   S:        <domain:contact type="tech">fan</domain:contact>
   S:        <domain:contact type="billing">fan</domain:contact>
   S:        <domain:ns>
   S:          <domain:hostAttr>
   S:            <domain:hostName>ns1.example.com.br</domain:hostName>
   S:            <domain:hostAddr ip="v4">192.0.2.1</domain:hostAddr>
   S:          </domain:hostAttr>
   S:          <domain:hostAttr>
   S:            <domain:hostName>ns1.example.net.br</domain:hostName>
   S:          </domain:hostAttr>
   S:        </domain:ns>
   S:        <domain:clID>ClientX</domain:clID>
   S:        <domain:crID>ClientX</domain:crID>
   S:        <domain:crDate>2006-02-03T12:00:00.0Z</domain:crDate>
   S:        <domain:upID>ClientX</domain:upID>
   S:        <domain:upDate>2006-02-03T12:00:00.0Z</domain:upDate>
   S:      </domain:infData>
   S:    </resData>
   S:    <extension>
   S:      <brdomain:infData
   S:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   S:       brdomain-1.0.xsd">
   S:       <brdomain:organization>
   S:         005.506.560/0001-36
   S:       </brdomain:organization>
   S:      </brdomain:infData>
   S:    </extension>
   S:    <trID>
   S:      <clTRID>ABC-12345</clTRID>
   S:      <svTRID>54322-XYZ</svTRID>
   S:    </trID>
   S:  </response>
   S:</epp>

   An EPP error response MUST be returned if an extended <info> command
   can not be processed for any reason.

3.1.3.  EPP <transfer> Command

   This extension does not add any elements to the EPP <transfer>
   command or <transfer> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].




Neves & Kobayashi        Expires August 28, 2006               [Page 14]

Internet-Draft            EPP BR Domain Mapping            February 2006


3.2.  EPP Transform Commands

   EPP provides five commands to transform objects: <create> to create
   an instance of an object, <delete> to delete an instance of an
   object, <renew> to extend the validity period of an object,
   <transfer> to manage object sponsorship changes, and <update> to
   change information associated with an object.

3.2.1.  EPP <create> Command

   This extension defines additional elements to the EPP <create>
   command and EPP <create> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

   The EPP <create> command provides a transform operation that allows a
   client to create a domain object.  In addition to the EPP command
   elements described in the EPP domain mapping [I-D.hollenbeck-epp-
   rfc3731bis], the <create> command MUST contain an <extension>
   element.  The <extension> element MUST contain a child <brdomain:
   create> element that identifies the extension namespace and the
   location of the extension schema.  The <brdomain:create> element
   contains the following child elements:

   -  A <brdomain:organization> element that contains the identifier for
      the organization object that the domain object will be associated.
      This object identifier MUST be known to the server before the
      domain object can be associated with the organization object.  The
      EPP mapping for organization objects is described in [I-D.neves-
      epp-brorg].

   -  An OPTIONAL <brdomain:releaseProcessFlags> element that contains
      flags for the release process.  At least one of its attributes
      flag1, flag2, or flag3 MUST be provided.


















Neves & Kobayashi        Expires August 28, 2006               [Page 15]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <create> command:

   C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   C:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   C:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   C:     epp-1.0.xsd">
   C:  <command>
   C:    <create>
   C:      <domain:create
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   C:       domain-1.0.xsd">
   C:        <domain:name>example.com.br</domain:name>
   C:        <domain:ns>
   C:          <domain:hostAttr>
   C:            <domain:hostName>ns1.example.com.br</domain:hostName>
   C:            <domain:hostAddr ip="v4">192.0.2.1</domain:hostAddr>
   C:          </domain:hostAttr>
   C:          <domain:hostAttr>
   C:            <domain:hostName>ns1.example.net.br</domain:hostName>
   C:          </domain:hostAttr>
   C:        </domain:ns>
   C:        <domain:contact type="admin">fan</domain:contact>
   C:        <domain:contact type="tech">fan</domain:contact>
   C:        <domain:contact type="billing">fan</domain:contact>
   C:        <domain:authInfo>
   C:          <domain:pw>2fooBAR</domain:pw>
   C:        </domain:authInfo>
   C:      </domain:create>
   C:    </create>
   C:    <extension>
   C:      <brdomain:create
   C:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   C:       brdomain-1.0.xsd">
   C:       <brdomain:organization>
   C:         005.506.560/0001-36
   C:       </brdomain:organization>
   C:       <brdomain:releaseProcessFlags flag1="1"/>
   C:      </brdomain:create>
   C:    </extension>
   C:    <clTRID>ABC-12345</clTRID>
   C:  </command>
   C:</epp>

   When a <create> command has been processed successfully, the EPP
   <resData> element MUST contain child elements as described in the EPP



Neves & Kobayashi        Expires August 28, 2006               [Page 16]

Internet-Draft            EPP BR Domain Mapping            February 2006


   domain mapping [I-D.hollenbeck-epp-rfc3731bis].  In addition, the EPP
   <response> element MUST contain a child <extension> element.  The
   <extension> element MUST contain a child <brdomain:creData> element
   that identifies the extension namespace and the location of the
   extension schema.  The <brdomain:creData> element contains the
   following child elements:

   -  A <brdomain:ticketNumber> element that contains the identifier of
      the domain registration request.

   -  An OPTIONAL <brdomain:pending> element that contains pending
      information to be resolved before the registration request can be
      completed.  The <brdomain:pending> element contains the following
      child elements:

      -  Zero or more <brdomain:doc> elements that contains information
         about documents that MUST be sent by an off-line procedure.
         Each element MUST contain a status attribute.  A <brdomain:doc>
         element contains the following child elements:

         -  a <brdomain:docType> element that contains the type of
            document.

         -  a <brdomain:limit> element that contains the date and time
            limit of this pending.

         -  a <brdomain:description> element that has a description of
            the required document in human readable format.

      -  Zero or more <brdomain:dns> elements that contains DNS pending
         information.  Each element MUST contain a status attribute.  A
         <brdomain:dns> element contains the following child elements:

         -  a <brdomain:hostName> element that contains the fully
            qualified name of a host.

         -  a <brdomain:limit> element that contains the date and time
            limit of this pending.

      -  an OPTIONAL <brdomain:releaseProc> element.  This element MUST
         contain a status attribute.  A <brdomain:releaseProc> element
         contains the following child elements:

         -  a <brdomain:limit> element that contains the date and time
            limit of this pending.

   Example <create> response:




Neves & Kobayashi        Expires August 28, 2006               [Page 17]

Internet-Draft            EPP BR Domain Mapping            February 2006


   S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   S:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   S:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   S:     epp-1.0.xsd">
   S:  <response>
   S:    <result code="1001">
   S:      <msg>Command completed successfully; action pending</msg>
   S:    </result>
   S:    <resData>
   S:      <domain:creData
   S:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   S:       domain-1.0.xsd">
   S:        <domain:name>example.com.br</domain:name>
   S:        <domain:crDate>2006-01-30T22:00:00.0Z</domain:crDate>
   S:      </domain:creData>
   S:    </resData>
   S:    <extension>
   S:      <brdomain:creData
   S:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   S:       brdomain-1.0.xsd">
   S:       <brdomain:ticketNumber>123456</brdomain:ticketNumber>
   S:       <brdomain:pending>
   S:         <brdomain:dns status="queryTimeOut">
   S:           <brdomain:hostName>
   S:             ns1.example.com.br
   S:           </brdomain:hostName>
   S:           <brdomain:limit>2006-02-13T22:00:00.0Z</brdomain:limit>
   S:         </brdomain:dns>
   S:         <brdomain:doc status="notReceived">
   S:           <brdomain:docType>CNPJ</brdomain:docType>
   S:           <brdomain:limit>2006-03-01T22:00:00.0Z</brdomain:limit>
   S:           <brdomain:description lang="pt">
   S:             Cadastro Nacional da Pessoa Juridica
   S:           </brdomain:description>
   S:         </brdomain:doc>
   S:       </brdomain:pending>
   S:      </brdomain:creData>
   S:    </extension>
   S:    <trID>
   S:      <clTRID>ABC-12345</clTRID>
   S:      <svTRID>54321-XYZ</svTRID>
   S:    </trID>
   S:  </response>
   S:</epp>




Neves & Kobayashi        Expires August 28, 2006               [Page 18]

Internet-Draft            EPP BR Domain Mapping            February 2006


   An EPP error response MUST be returned if an extended <create>
   command can not be processed for any reason.

3.2.2.  EPP <delete> Command

   This extension does not add any elements to the EPP <delete> command
   or <delete> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

3.2.3.  EPP <renew> Command

   This extension does not add any elements to the EPP <renew> command
   or <renew> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

3.2.4.  EPP <transfer> Command

   This extension does not add any elements to the EPP <transfer>
   command or <transfer> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

3.2.5.  EPP <update> Command

   This extension defines additional elements for the EPP <update>
   command and EPP <update> response described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis].

   The EPP <update> command provides a transform operation that allows a
   client to change the state of a domain object.  In addition to the
   EPP command elements described in the EPP domain mapping
   [I-D.hollenbeck-epp-rfc3731bis], the <update> command MAY contain a
   child <extension> element.  The <extension> element MUST contain a
   child <brdomain:update> element that identifies the extension
   namespace and the location of the extension schema.  The <brdomain:
   update> element contains the following child elements:

   -  A <brdomain:ticketNumber> element that contains the identifier of
      the domain registration request.

   -  An OPTIONAL <brdomain:chg> element that contains object attribute
      values to be changed.  A <brdomain:chg> element contains the
      following child element:

      -  A <brdomain:releaseProcessFlags> element that contains flags
         for the release process.  At least one of its attributes flag1,
         flag2, or flag3 MUST be provided.





Neves & Kobayashi        Expires August 28, 2006               [Page 19]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <update> command with an <extension> element:

   C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   C:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   C:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   C:     epp-1.0.xsd">
   C:  <command>
   C:    <update>
   C:      <domain:update
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   C:       domain-1.0.xsd">
   C:        <domain:name>example.com.br</domain:name>
   C:        <domain:add>
   C:          <domain:ns>
   C:            <domain:hostAttr>
   C:              <domain:hostName>ns2.example.com</domain:hostName>
   C:            </domain:hostAttr>
   C:          </domain:ns>
   C:          <domain:contact type="tech">hkk</domain:contact>
   C:        </domain:add>
   C:        <domain:rem>
   C:          <domain:ns>
   C:            <domain:hostAttr>
   C:              <domain:hostName>ns1.example.com.br</domain:hostName>
   C:            </domain:hostAttr>
   C:          </domain:ns>
   C:          <domain:contact type="tech">fan</domain:contact>
   C:        </domain:rem>
   C:      </domain:update>
   C:    </update>
   C:    <extension>
   C:      <brdomain:update
   C:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   C:       brdomain-1.0.xsd">
   C:       <brdomain:ticketNumber>123456</brdomain:ticketNumber>
   C:       <brdomain:chg>
   C:         <brdomain:releaseProcessFlags flag2="1"/>
   C:       </brdomain:chg>
   C:      </brdomain:update>
   C:    </extension>
   C:    <clTRID>ABC-12345</clTRID>
   C:  </command>
   C:</epp>





Neves & Kobayashi        Expires August 28, 2006               [Page 20]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <update> command with no <extension> element:

   C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   C:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   C:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   C:     epp-1.0.xsd">
   C:  <command>
   C:    <update>
   C:      <domain:update
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"
   C:       xsi:schemaLocation="urn:ietf:params:xml:ns:domain-1.0
   C:       domain-1.0.xsd">
   C:        <domain:name>example.com.br</domain:name>
   C:        <domain:add>
   C:          <domain:ns>
   C:            <domain:hostAttr>
   C:              <domain:hostName>ns2.example.com</domain:hostName>
   C:            </domain:hostAttr>
   C:          </domain:ns>
   C:          <domain:contact type="tech">hkk</domain:contact>
   C:        </domain:add>
   C:        <domain:rem>
   C:          <domain:ns>
   C:            <domain:hostAttr>
   C:              <domain:hostName>ns1.example.com.br</domain:hostName>
   C:            </domain:hostAttr>
   C:          </domain:ns>
   C:          <domain:contact type="tech">fan</domain:contact>
   C:        </domain:rem>
   C:      </domain:update>
   C:    </update>
   C:    <clTRID>ABC-12345</clTRID>
   C:  </command>
   C:</epp>

   When an <update> command has been processed successfully, the EPP
   <resData> element MUST contain child elements as described in the EPP
   domain mapping [I-D.hollenbeck-epp-rfc3731bis].  In addition, the
   <update> response MAY contain a child EPP <extension> element.  The
   EPP <extension> element MUST contain a child <brdomain:updData>
   element that identifies the extension namespace and the location of
   the extension schema.  The <brdomain:updData> element contains the
   following child elements:







Neves & Kobayashi        Expires August 28, 2006               [Page 21]

Internet-Draft            EPP BR Domain Mapping            February 2006


   -  An OPTIONAL <brdomain:ticketNumber> element that contains the
      identifier of the domain registration request.  This element MAY
      be present only if the <update> command contains an <extension>
      element.

   -  An OPTIONAL <brdomain:pending> element that contains pending
      information to be resolved before the registration request can be
      completed.  This element MAY be present only if the <update>
      command contains an <extension> element.  The <brdomain:pending>
      element contains the following child elements:

      -  Zero or more <brdomain:doc> elements that contains information
         about documents that MUST be sent by an off-line procedure.
         Each element MUST contain a status attribute.  A <brdomain:doc>
         element contains the following child elements:

         -  A <brdomain:docType> element that contains the type of
            document.

         -  A <brdomain:limit> element that contains the date and time
            limit of this pending.

         -  A <brdomain:description> element that has a description of
            the required document in human readable format.

      -  Zero or more <brdomain:dns> elements that contains DNS pending
         information.  Each element MUST contain a status attribute.  A
         <brdomain:dns> element contains the following child elements:

         -  A <brdomain:hostName> element that contains the fully
            qualified name of a host.

         -  A <brdomain:limit> element that contains the date and time
            limit of this pending.

      -  An OPTIONAL <brdomain:releaseProc> element.  This element MUST
         contain a status attribute.  A <brdomain:releaseProc> element
         contains the following child elements:

         -  a <brdomain:limit> element that contains the date and time
            limit of this pending.

   -  An OPTIONAL <brdomain:hostStatus> element that contains
      information on DNS queries made to the hosts been modified.  This
      element MAY be present only if the <update> command does not
      contain an <extension> element.





Neves & Kobayashi        Expires August 28, 2006               [Page 22]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <update> response of a command with <extension> element:

   S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   S:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   S:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   S:     epp-1.0.xsd">
   S:  <response>
   S:    <result code="1000">
   S:      <msg>Command completed successfully</msg>
   S:    </result>
   S:    <extension>
   S:      <brdomain:updData
   S:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   S:       brdomain-1.0.xsd">
   S:       <brdomain:ticketNumber>123456</brdomain:ticketNumber>
   S:       <brdomain:pending>
   S:         <brdomain:doc status="notReceived">
   S:           <brdomain:docType>CNPJ</brdomain:docType>
   S:           <brdomain:limit>2006-03-01T22:00:00.0Z</brdomain:limit>
   S:           <brdomain:description lang="pt">
   S:             Cadastro Nacional da Pessoa Juridica
   S:           </brdomain:description>
   S:         </brdomain:doc>
   S:       </brdomain:pending>
   S:      </brdomain:updData>
   S:    </extension>
   S:    <trID>
   S:      <clTRID>ABC-12345</clTRID>
   S:      <svTRID>54321-XYZ</svTRID>
   S:    </trID>
   S:  </response>
   S:</epp>

















Neves & Kobayashi        Expires August 28, 2006               [Page 23]

Internet-Draft            EPP BR Domain Mapping            February 2006


   Example <update> response of a command with no <extension> element:

   S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
   S:     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   S:     xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
   S:     epp-1.0.xsd">
   S:  <response>
   S:    <result code="2308">
   S:      <msg>Data management policy violation</msg>
   S:    </result>
   S:    <extension>
   S:      <brdomain:updData
   S:       xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
   S:       xsi:schemaLocation="urn:ietf:params:xml:ns:brdomain-1.0
   S:       brdomain-1.0.xsd">
   S:       <brdomain:hostStatus>
   S:         <brdomain:hostName>ns2.example.com</brdomain:hostName>
   S:         <brdomain:dnsAnswer>Query refused</brdomain:dnsAnswer>
   S:       </brdomain:hostStatus>
   S:      </brdomain:updData>
   S:    </extension>
   S:    <trID>
   S:      <clTRID>ABC-12345</clTRID>
   S:      <svTRID>54321-XYZ</svTRID>
   S:    </trID>
   S:  </response>
   S:</epp>

   An EPP error response MUST be returned if an extended <update>
   command can not be processed for any reason.


4.  Formal Syntax

   An EPP object mapping is specified in XML Schema notation.  The
   formal syntax presented here is a complete schema representation of
   the object mapping suitable for automated validation of EPP XML
   instances.  The BEGIN and END tags are not part of the schema; they
   are used to note the beginning and ending of the schema for URI
   registration purposes.

   BEGIN
   <?xml version="1.0" encoding="UTF-8"?>

   <schema targetNamespace="urn:ietf:params:xml:ns:brdomain-1.0"
           xmlns:brdomain="urn:ietf:params:xml:ns:brdomain-1.0"
           xmlns:brorg="urn:ietf:params:xml:ns:brorg-1.0"



Neves & Kobayashi        Expires August 28, 2006               [Page 24]

Internet-Draft            EPP BR Domain Mapping            February 2006


           xmlns:epp="urn:ietf:params:xml:ns:epp-1.0"
           xmlns:eppcom="urn:ietf:params:xml:ns:eppcom-1.0"
           xmlns="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified">

     <!--
         Import common element types
     -->
     <import namespace="urn:ietf:params:xml:ns:epp-1.0"
             schemaLocation="epp-1.0.xsd"/>
     <import namespace="urn:ietf:params:xml:ns:eppcom-1.0"
             schemaLocation="eppcom-1.0.xsd"/>
     <import namespace="urn:ietf:params:xml:ns:brorg-1.0"
             schemaLocation="brorg-1.0.xsd"/>

     <annotation>
       <documentation>
         Extensible Provisioning Protocol v1.0
         domain name extension schema for .br domain provisioning.
       </documentation>
     </annotation>

     <!--
         Global elements
     -->
     <complexType name="pendingType">
       <sequence>
         <element name="doc" type="brdomain:pDocType" minOccurs="0"/>
         <element name="dns" type="brdomain:pDnsType" minOccurs="0"/>
         <element name="releaseProc" type="brdomain:pReleaseProcType"
                  minOccurs="0"/>
       </sequence>
     </complexType>

     <complexType name="pDocType">
       <sequence>
         <element name="docType" type="token"/>
         <element name="limit" type="dateTime"/>
         <element name="description" type="epp:msgType"/>
       </sequence>
       <attribute name="status" type="brdomain:pDocStatusType"
                  use="required"/>
     </complexType>

     <complexType name="pDnsType">
       <sequence>
         <element name="hostName" type="eppcom:labelType"
                  minOccurs="0"/>



Neves & Kobayashi        Expires August 28, 2006               [Page 25]

Internet-Draft            EPP BR Domain Mapping            February 2006


         <element name="limit" type="dateTime"/>
       </sequence>
       <attribute name="status" type="brdomain:pDnsStatusType"
                  use="required"/>
     </complexType>

     <complexType name="pReleaseProcType">
       <sequence>
         <element name="limit" type="dateTime"/>
       </sequence>
       <attribute name="status" type="brdomain:pReleaseProcStatusType"
                  use="required"/>
     </complexType>

     <complexType name="releaseProcessFlagsType">
       <attribute name="flag1" type="boolean"/>
       <attribute name="flag2" type="boolean"/>
       <attribute name="flag3" type="boolean"/>
     </complexType>

     <complexType name="hostStatusType">
       <sequence>
         <element name="hostName" type="eppcom:labelType"/>
         <element name="dnsAnswer" type="token"/>
       </sequence>
     </complexType>

     <simpleType name="pDocStatusType">
       <restriction base="token">
         <enumeration value="received"/>
         <enumeration value="notReceived"/>
         <enumeration value="invalid"/>
         <enumeration value="incorrect"/>
       </restriction>
     </simpleType>

     <simpleType name="pDnsStatusType">
       <restriction base="token">
         <enumeration value="authoritativeAnswer"/>
         <enumeration value="queryTimeOut"/>
         <enumeration value="nonAuthoritativeAnswer"/>
         <enumeration value="unknownDomainName"/>
         <enumeration value="unknownHostName"/>
         <enumeration value="queryRefused"/>
         <enumeration value="connectionRefused"/>
         <enumeration value="canonicalName"/>
         <enumeration value="soaVersionNotInSync"/>
         <enumeration value="dnsProtocolLevelError"/>



Neves & Kobayashi        Expires August 28, 2006               [Page 26]

Internet-Draft            EPP BR Domain Mapping            February 2006


         <enumeration value="notInformed"/>
         <enumeration value="other"/>
       </restriction>
     </simpleType>

     <simpleType name="pReleaseProcStatusType">
       <restriction base="token">
         <enumeration value="resolved"/>
         <enumeration value="waiting"/>
         <enumeration value="denied"/>
       </restriction>
     </simpleType>

     <!--
         Child elements found in EPP commands.
     -->
     <element name="check" type="brdomain:mNameType"/>
     <element name="create" type="brdomain:createType"/>
     <element name="info" type="brdomain:infoType"/>
     <element name="update" type="brdomain:updateType"/>

     <!--
          Child elements of the <check> command.
     -->
     <complexType name="mNameType">
       <sequence>
         <element name="organization" type="brorg:orgIDType"/>
       </sequence>
     </complexType>

     <!--
         Child elements of the <create> command.
     -->
     <complexType name="createType">
       <sequence>
         <element name="organization" type="brorg:orgIDType"/>
         <element name="releaseProcessFlags"
                  type="brdomain:releaseProcessFlagsType"
                  minOccurs="0"/>
       </sequence>
     </complexType>

     <!--
         Child elements of the <info> command
     -->
     <complexType name="infoType">
       <sequence>
         <element name="ticketNumber" type="unsignedInt"



Neves & Kobayashi        Expires August 28, 2006               [Page 27]

Internet-Draft            EPP BR Domain Mapping            February 2006


                  minOccurs="0"/>
       </sequence>
     </complexType>

     <!--
         Child elements of the <update> command
     -->
     <complexType name="updateType">
       <sequence>
         <element name="ticketNumber" type="unsignedInt"/>
         <element name="chg" type="brdomain:chgType"
                  minOccurs="0"/>
       </sequence>
     </complexType>

     <complexType name="chgType">
       <sequence>
         <element name="releaseProcessFlags"
                  type="brdomain:releaseProcessFlagsType"
                  minOccurs="0"/>
       </sequence>
     </complexType>

     <!--
          Child response elements.
     -->
     <element name="chkData" type="brdomain:chkDataType"/>
     <element name="creData" type="brdomain:creDataType"/>
     <element name="infData" type="brdomain:infDataType"/>
     <element name="updData" type="brdomain:updDataType"/>

     <!--
         <check> response elements.
     -->
     <complexType name="chkDataType">
       <sequence>
         <element name="cd" type="brdomain:checkType"
                  maxOccurs="unbounded"/>
       </sequence>
     </complexType>

     <complexType name="checkType">
       <sequence>
         <element name="name" type="eppcom:labelType"/>
         <element name="equivalentName" type="eppcom:labelType"
                  minOccurs="0"/>
         <element name="organization" type="brorg:orgIDType"
                  minOccurs="0"/>



Neves & Kobayashi        Expires August 28, 2006               [Page 28]

Internet-Draft            EPP BR Domain Mapping            February 2006


         <element name="ticketNumber" type="unsignedInt"
                  minOccurs="0" maxOccurs="unbounded"/>
       </sequence>
       <attribute name="hasConcurrent" type="boolean"/>
       <attribute name="inReleaseProcess" type="boolean"/>
     </complexType>

     <!--
         <create> response elements.
     -->
     <complexType name="creDataType">
       <sequence>
         <element name="ticketNumber" type="unsignedInt"
                  minOccurs="0"/>
         <element name="pending" type="brdomain:pendingType"
                  minOccurs="0"/>
       </sequence>
     </complexType>

     <!--
         <info> response elements.
     -->
     <complexType name="infDataType">
       <sequence>
         <element name="ticketNumber" type="unsignedInt"
                  minOccurs="0"/>
         <element name="releaseProcessFlags"
                  type="brdomain:releaseProcessFlagsType"
                  minOccurs="0"/>
         <element name="organization" type="brorg:orgIDType"/>
         <element name="hostStatus" type="brdomain:hostStatusType"
                  minOccurs="0"/>
         <element name="pending" type="brdomain:pendingType"
                  minOccurs="0"/>
         <element name="ticketNumberConc" type="unsignedInt"
                  minOccurs="0" maxOccurs="unbounded"/>
       </sequence>
     </complexType>

     <!--
         <update> response elements
     -->
     <complexType name="updDataType">
       <sequence>
         <element name="ticketNumber" type="unsignedInt"
                  minOccurs="0"/>
         <element name="pending" type="brdomain:pendingType"
                  minOccurs="0"/>



Neves & Kobayashi        Expires August 28, 2006               [Page 29]

Internet-Draft            EPP BR Domain Mapping            February 2006


         <element name="hostStatus" type="brdomain:hostStatusType"
                  minOccurs="0"/>
       </sequence>
     </complexType>
   </schema>
   END


5.  Internationalization Considerations

   EPP is represented in XML, which provides native support for encoding
   information using the Unicode character set and its more compact
   representations, including UTF-8 [RFC3629].  Conformant XML
   processors recognize both UTF-8 and UTF-16 [RFC2781].  Though XML
   includes provisions to identify and use other character encodings
   through use of an "encoding" attribute in an <?xml?> declaration, use
   of UTF-8 is RECOMMENDED in environments where parser encoding support
   incompatibility exists.

   As an extension of the EPP domain mapping [I-D.hollenbeck-epp-
   rfc3731bis], the elements, element content, attributes, and attribute
   values described in this document MUST inherit the
   internationalization conventions used to represent higher-layer
   domain and core protocol structures present in an XML instance that
   includes this extension.


6.  IANA Considerations

   This document uses URNs to describe XML namespaces and XML schemas
   conforming to a registry mechanism described in [RFC3688].  Two URI
   assignments have been requested to IANA:

   Registration request for the extension namespace:

      URI: urn:ietf:params:xml:ns:brdomain-1.0

      Registrant Contact: See the "Author's Address" section of this
      document.

      XML: None.  Namespace URIs do not represent an XML specification.

   Registration request for the extension XML schema:








Neves & Kobayashi        Expires August 28, 2006               [Page 30]

Internet-Draft            EPP BR Domain Mapping            February 2006


      URI: urn:ietf:params:xml:schema:brdomain-1.0

      Registrant Contact: See the "Author's Address" section of this
      document.

      XML: See the "Formal Syntax" section of this document.


7.  Security Considerations

   The mapping extensions described in this document do not provided any
   security services beyond those described by EPP [I-D.hollenbeck-epp-
   rfc3730bis], the EPP domain name mapping [I-D.hollenbeck-epp-
   rfc3731bis], and protocol layers used by EPP.


8.  References

8.1.  Normative References

   [I-D.hollenbeck-epp-rfc3730bis]
              Hollenbeck, S., "Extensible Provisioning Protocol (EPP)",
              draft-hollenbeck-epp-rfc3730bis-01 (work in progress),
              November 2005.

   [I-D.hollenbeck-epp-rfc3731bis]
              Hollenbeck, S., "Extensible Provisioning Protocol (EPP)
              Domain Name Mapping", draft-hollenbeck-epp-rfc3731bis-01
              (work in progress), November 2005.

   [I-D.neves-epp-brorg]
              Neves, F. and H. Kobayashi, "BR Organization Mapping for
              the Extensible Provisioning Protocol (EPP)",
              draft-neves-epp-brorg-01 (work in progress),
              February 2006.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              January 2004.

   [W3C.REC-xml-20040204]
              Yergeau, F., Paoli, J., Sperberg-McQueen, C., Bray, T.,
              and E. Maler, "Extensible Markup Language (XML) 1.0 (Third
              Edition)", W3C REC REC-xml-20040204, February 2004.

   [W3C.REC-xmlschema-1-20041028]



Neves & Kobayashi        Expires August 28, 2006               [Page 31]

Internet-Draft            EPP BR Domain Mapping            February 2006


              Maloney, M., Beech, D., Thompson, H., and N. Mendelsohn,
              "XML Schema Part 1: Structures Second Edition", W3C
              REC REC-xmlschema-1-20041028, October 2004.

   [W3C.REC-xmlschema-2-20041028]
              Malhotra, A. and P. Biron, "XML Schema Part 2: Datatypes
              Second Edition", W3C REC REC-xmlschema-2-20041028,
              October 2004.

8.2.  Informative References

   [BR-Portuguese-Table]
              Neves, F., "BR Portuguese Language Table", August 2005,
              <http://www.iana.org/assignments/idn/br-portuguese.html>.

   [RFC2781]  Hoffman, P. and F. Yergeau, "UTF-16, an encoding of ISO
              10646", RFC 2781, February 2000.

   [RFC3490]  Faltstrom, P., Hoffman, P., and A. Costello,
              "Internationalizing Domain Names in Applications (IDNA)",
              RFC 3490, March 2003.

   [RFC3629]  Yergeau, F., "UTF-8, a transformation format of ISO
              10646", STD 63, RFC 3629, November 2003.


Appendix A.  Changes from version 00

   1.  Fixed indentation of <brdomain:ticketNumberConc> element in
       <brdomain:info> response.

   2.  Removed <brdomain:releaseProcessFlags> element from the text of
       <brdomain:update> response.

   3.  Fixed definition of updateType in schema.
















Neves & Kobayashi        Expires August 28, 2006               [Page 32]

Internet-Draft            EPP BR Domain Mapping            February 2006


Authors' Addresses

   Frederico A. C. Neves
   NIC.br / Registro.br
   Av. das Nacoes Unidas, 11541, 7
   Sao Paulo, SP  04578-000
   BR

   Phone: +55 11 5509 3511
   Email: fneves@registro.br
   URI:   http://registro.br/


   Hugo Koji Kobayashi
   NIC.br / Registro.br
   Av. das Nacoes Unidas, 11541, 7
   Sao Paulo, SP  04578-000
   BR

   Phone: +55 11 5509 3511
   Email: koji@registro.br
   URI:   http://registro.br/





























Neves & Kobayashi        Expires August 28, 2006               [Page 33]

Internet-Draft            EPP BR Domain Mapping            February 2006


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Neves & Kobayashi        Expires August 28, 2006               [Page 34]

