



JMAP                                                     R. Ouazana, Ed.
Internet-Draft                                                  Linagora
Intended status: Standards Track                           July 25, 2018
Expires: January 26, 2019


                   Sending an MDN Response with JMAP
                         draft-ietf-jmap-mdn-00

Abstract

   This document specifies a data model for handling [RFC8098] MDN
   messages with a server using JMAP.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 26, 2019.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






Ouazana                 Expires January 26, 2019                [Page 1]

Internet-Draft              JMAP MDN handling                  July 2018


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Notational conventions  . . . . . . . . . . . . . . . . .   2
     1.2.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   2
     1.3.  Addition to the capabilities object . . . . . . . . . . .   2
   2.  Email/createMDN . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  JMAP Capability Registration for "mdn"  . . . . . . . . .   4
   4.  Normative References  . . . . . . . . . . . . . . . . . . . .   4
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   JMAP <https://tools.ietf.org/html/draft-ietf-jmap-core-06> is a
   generic protocol for synchronising data, such as mail, calendars or
   contacts, between a client and a server.  It is optimised for mobile
   and web environments, and aims to provide a consistent interface to
   different data types.

   This specification defines a method helping to send MDN (Message
   Disposition Nodification) messages.  MDN are defined in [RFC8098] and
   are used as "read receipts", "acknowledgements", or "receipt
   notifications".

1.1.  Notational conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   Type signatures, examples and property descriptions in this document
   follow the conventions established in Section 1.1 of
   <https://tools.ietf.org/html/draft-ietf-jmap-core-06>.  Email object
   and methods are defined in <https://tools.ietf.org/html/draft-ietf-
   jmap-mail-06>.

1.2.  Terminology

   The same terminology is used in this document as in the core JMAP
   specification.

1.3.  Addition to the capabilities object

   The capabilities object is returned as part of the standard JMAP
   Session object; see the JMAP spec.  Servers supporting _this_
   specification MUST add a property called "urn:ietf:params:jmap:mdn"
   to the capabilities object.



Ouazana                 Expires January 26, 2019                [Page 2]

Internet-Draft              JMAP MDN handling                  July 2018


2.  Email/createMDN

   The Email/createMDN method create a [RFC5322] message from MDN
   properties.

   It takes the following arguments:

   o  *accountId*: "String|null" The id of the account to use for this
      call.  If "null", defaults to the "urn:ietf:params:jmap:mail"
      primary account.

   o  *mdns*: "String[MDN]" A map of creation id (client specified) to
      MDN objects

   An *MDN* object has the following properties:

   o  *referencedMessageId*: "String" Message Id of the received message
      the user wants to create an MDN for.

   o  *subject*: "String" Subject that will be used as "Subject" header
      for this MDN.

   o  *textBody*: "String" Human readable part of the MDN, as plain
      text.

   o  *reportingUA*: "String" Name of the MUA creating this MDN.  It is
      used to build the MDN Report part of the MDN.

   o  *disposition*: "Disposition" Object containing the diverse MDN
      disposition options.

   A *Disposition* object has the following properties:

   o  *actionMode*: "String" This MUST be one of the following strings:
      "manual-action" / "automatic-action"

   o  *sendingMode*: "String" This MUST be one of the following strings:
      "MDN-sent-manually" / "MDN-sent-automatically"

   o  *type*: "String" This MUST be one of the following strings:
      "deleted" / "dispatched" / "displayed" / "processed"

   See [RFC8098] for the exact meaning of these different fields.

   If the _referencedMessageId_, _subject_, _textBody_, _reportingUA_,
   _disposition_ properties are invalid (e.g. missing, wrong type, id
   not found), the server MUST reject the import with an
   "invalidProperties" SetError.



Ouazana                 Expires January 26, 2019                [Page 3]

Internet-Draft              JMAP MDN handling                  July 2018


   If the email cannot be created because it would take the account over
   quota, the creation should be rejected with a "maxQuotaReached"
   SetError.

   The response has the following arguments:

   o  *accountId*: "String" The id of the account used for this call.

   o  *created*: "String[Email]" A map of the creation id to an object
      build from the referenced properties.  The _blobId_ field of the
      Email objects can then be used to effectively send the MDN.

   o  *notCreated*: "String[SetError]" A map of creation id to a
      SetError object for each Email that failed to be created.  The
      possible errors are defined above.

3.  IANA Considerations

3.1.  JMAP Capability Registration for "mdn"

   IANA will register the "mdn" JMAP Capability as follows:

   Capability Name: "urn:ietf:params:jmap:mdn"

   Specification document: this document

   Intended use: common

   Change Controller: IETF

   Security and privacy considerations: this document, section 4.

4.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5322]  Resnick, P., Ed., "Internet Message Format", RFC 5322,
              DOI 10.17487/RFC5322, October 2008,
              <https://www.rfc-editor.org/info/rfc5322>.

   [RFC8098]  Hansen, T., Ed. and A. Melnikov, Ed., "Message Disposition
              Notification", STD 85, RFC 8098, DOI 10.17487/RFC8098,
              February 2017, <https://www.rfc-editor.org/info/rfc8098>.





Ouazana                 Expires January 26, 2019                [Page 4]

Internet-Draft              JMAP MDN handling                  July 2018


Author's Address

   Raphael Ouazana (editor)
   Linagora
   100 Terrasse Boieldieu - Tour Franklin
   Paris - La Defense CEDEX  92042
   France

   Email: rouazana@linagora.com
   URI:   https://www.linagora.com









































Ouazana                 Expires January 26, 2019                [Page 5]
