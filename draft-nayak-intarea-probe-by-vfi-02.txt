



INTAREA WG                                                      M. Nayak
Internet-Draft                                                  R. Bonica
Updates: 8335 (if approved)                                     R. Puttur
Intended status: Standards Track                         Juniper Networks
Expires: August 13, 2020                                 February 14, 2020


            Probing IP Interfaces By Vendor Specific Identifiers
                  draft-nayak-intarea-probe-by-vfi-02

Abstract

   This document enhances the PROBE diagnostic tool so that it can
   identify the probed interface by Vendor Specific Identifiers. 
   In order to achieve that goal, this document also extends the 
   Interface Identification Object.  The Interface Identification 
   Object is an ICMP Extension Object class.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 13, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Nayak, et al.             Expires August 13, 2020                 [Page 1]

Internet-Draft                Probe By VSI                  February 2020


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Problem Statement . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Requirements Language . . . . . . . . . . . . . . . . . . . .   2
   3.  ICMP Extended Echo Request Message  . . . . . . . . . . . . .   3
   4.  Interface Identification Object . . . . . . . . . . . . . . .   3
   5.  ICMP Extended Echo Reply Message  . . . . . . . . . . . . . .   4
   6.  ICMP Message Processing . . . . . . . . . . . . . . . . . . .   4
   7.  Updates To RFC 8335 . . . . . . . . . . . . . . . . . . . . .   4
   8.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   9.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   10. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     11.1.  Normative References . . . . . . . . . . . . . . . . . .   5
     11.2.  Informative References . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Problem Statement

   PROBE [RFC8335] is a diagnostic tool that can be used to query the
   status of an interface.  PROBE sends an ICMP Extended Echo Request
   message to a proxy interface.  The ICMP Extended Echo Request message
   contains an ICMP Extension Structure and the ICMP Extension Structure
   contains an Interface Identification Object.  The Interface
   Identification Object identifies the probed interface by name,
   ifIndex or address.

   When the proxy interface receives the ICMP Extended Echo Request, the
   node upon which it resides executes access control procedures as per 
   [RFC8335] security considerations.  If access is granted, the node 
   determines the status of the probed interface and returns an ICMP 
   Extended Echo Reply message.  The ICMP Extended Echo Reply indicates
   the status of the probed interface.

   Virtualized instance of the network adapter are created out of a 
   Network Interface Card to enable efficient sharing of Network 
   Interface Card in a virtualization environment. These Virtualized 
   instances of the network adapter are implemented in the hardware and
   assigned a Vendor Specific Identifier to uniquely identify the 
   Virtualized instance of the network adapter.

   This document enhances the PROBE so that it can identify the probed
   interface by Vendor Specific Identifiers. This probe type is 
   necessary when none of the other probe types of PROBE (i.e., probe
   interface by name, probe interface by address, etc) work.
   Virtual Function Index (VFI) [SR-IOV] is one (but not the only) 
   instance of Vendor Specific Identifiers. Vendor Specific Identifiers, 
   hereinafter referred to as VSI in the remaining part of this document.
   In order to achieve PROBE's enhancement, this document extends the 
   Interface Identification Object. The Interface Identification Object 
   is an ICMP Extension Object class.

2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP




Nayak, et al.             Expires August 13, 2020                 [Page 2]

Internet-Draft                Probe By VSI                  February 2020


   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  ICMP Extended Echo Request Message

   Section 2 of [RFC8335] defines the ICMP Extended Echo Request
   message.  As per [RFC8335], the ICMP Extended Echo Request message
   contains the following fields:

   o  Type

   o  Code

   o  Checksum

   o  Identifier

   o  Reserved

   o  L (local)

   o  ICMP Extension Structure

   Section 7 of [RFC4884] defines the ICMP Extension Structure.  As per
   [RFC4884], the Extension Structure contains exactly one Extension
   Header followed by one or more objects.  When applied to the ICMP
   Extended Echo Request message, the ICMP Extension Structure contains
   exactly one instance of the Interface Identification Object.
   Section 2.1 of [RFC8335] defines the Interface Identification Object.
   Section 4 of this document extends that definition.

   If the L-bit is set, the Interface Identification Object can identify
   the probed interface by name, index, address or VFI.  If the L-bit is
   clear, the Interface Identification Object identifies the probed
   interface by address.

4.  Interface Identification Object

   Section 2.1 of [RFC8335] defines the Interface Identification Object.
   The Interface Identification Object identifies the probed interface
   by name, index, or address.  Like any other ICMP Extension Object, it
   contains an Object Header and Object Payload.  The Object Header
   contains the following fields:

   o  Class-Num: Interface Identification Object.  The value is 3.

   o  C-Type: Determines how the probed interface is identified.




Nayak, et al.             Expires August 13, 2020                 [Page 3]

Internet-Draft                Probe By VSI                  February 2020


   o  Length: Length of the object, measured in octets, including the
      Object Header and Object Payload.

   Currently, the following values are defined for C-Type:

   o  (0) Reserved

   o  (1) Identifies Interface by Name

   o  (2) Identifies Interface by Index

   o  (3) Identifies Interface by Address

   This document defines the following, new C-Type:

   o  (value TBD by IANA) Identifies Interfaces by Vendor Specific
      Identifier (VSI)

   Every vendor specific ID needs to be N-bits long and the vendor 
   gets to have exactly one of them (i.e, either VFI or some other 
   Vendor Specific Identifiers). If the Interface Identification 
   Object identifies the probed interface by VSI (Vendor Specific 
   Identfier), the payload is as depicted in Figure 1.

       0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                   enterprise-number                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Identifier Length |            Reserved                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                                  .
    .             identifier(variable length)                       .
    .                                                               .
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 1: VSI Format

   This VSI consists of the 4-octet vendor's registered Private
   Enterprise Number as maintained by IANA [IANA-PEN] followed by a 
   unique identifier assigned by the vendor. 
      
   Payload fields are defined as follows: 

   o  Identifier Length: Number of significant bytes contained by the
      VSI. (The VSI field contains significant bytes and padding 
      bytes.)

   o  Reserved: This field MUST be set to 0 and ignored upon receipt.

   o  Identifier: This variable-length field represents an Identifier
      associated with the probed interface.  If the Identifier field 
      would not otherwise terminate on a 32-bit boundary, it MUST be 
      padded with zeroes.




Nayak, et al.             Expires August 13, 2020                [Page 4]


Internet-Draft                Probe By VSI                  February 2020


5.  ICMP Extended Echo Reply Message

   Section 3 of [RFC8335] defines the ICMP Extended Echo Reply message.
   This document does not change that definition.

6.  ICMP Message Processing

   Section 4 of [RFC8335] defines the ICMP message processing.  This
   document does not change that definition.

7.  Updates To RFC 8335

   Section 2 of [RFC8335] states:

   "If the L-bit is set, the Interface Identification Object can
   identify the probed interface by name, index, or address.  If the
   L-bit is clear, the Interface Identification Object MUST identify the
   probed interface by address."

   This document updates that text as follows:

   "If the L-bit is set, the Interface Identification Object can
   identify the probed interface by name, index, address, or Vendor
   Specific Identifier (VSI).  If the L-bit is clear, the Interface
   Identification Object MUST identify the probed interface by address."


8.  IANA Considerations

   IANA is requested to add the following a new C-type:

   o  (value TBD by IANA) Identifies Interfaces by Vendor Specific
      Identifier (VSI)

   This new C-Type is to be added to the Interface Identification Object
   under the "ICMP Extension Object Classes and Class Sub-types"
   registry.

9.  Security Considerations

   This document neither extends nor mitigates any of the security
   considerations mentioned in [RFC8335].

10.  Acknowledgements

   The authors wish to acknowledge Ross Callon for his helpful comments.

11.  References

11.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4884]  Bonica, R., Gan, D., Tappan, D., and C. Pignataro,
              "Extended ICMP to Support Multi-Part Messages", RFC 4884,
              DOI 10.17487/RFC4884, April 2007,
              <https://www.rfc-editor.org/info/rfc4884>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8335]  Bonica, R., Thomas, R., Linkova, J., Lenart, C., and M.
              Boucadair, "PROBE: A Utility for Probing Interfaces",
              RFC 8335, DOI 10.17487/RFC8335, February 2018,
              <https://www.rfc-editor.org/info/rfc8335>




Nayak, et al.             Expires August 13, 2020                 [Page 5]

Internet-Draft                Probe By VSI                  February 2020



11.2.  Informative References

   [SR-IOV]   PCI-SIG, ., "Single Root I/O Virtualization and Sharing
              Specification Revision 1.1", January 2010,
              <https://members.pcisig.com/wg/PCI-SIG/document/
              download/8238>.



Authors' Addresses

   Manoj Nayak
   Juniper Networks
   Bangalore, KA  560103
   India

   Email: manojnayak@juniper.net


   Ron Bonica
   Juniper Networks
   Herndon, Virginia  20171
   USA

   Email: rbonica@juniper.net

   
   Rafik Puttur
   Juniper Networks
   Bangalore, KA  560103
   India

   Email: rafikp@juniper.net























Nayak, et al.             Expires August 13, 2020                [Page 6]