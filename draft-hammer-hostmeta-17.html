<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Web Host Metadata</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Example">
<link href="#rfc.section.1.1.1" rel="Chapter" title="1.1.1 Processing Resource-Specific Information">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Notational Conventions">
<link href="#rfc.section.2" rel="Chapter" title="2 Obtaining host-meta Documents">
<link href="#rfc.section.3" rel="Chapter" title="3 The host-meta Document">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 XML Document format">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 The 'Link' Element">
<link href="#rfc.section.3.1.1.1" rel="Chapter" title="3.1.1.1 Template Syntax">
<link href="#rfc.section.4" rel="Chapter" title="4 Processing host-meta Documents">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Host-Wide Information">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Resource-Specific Information">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 The 'host-meta' Well-Known URI">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 The 'host-meta.json' Well-Known URI">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 The 'lrdd' Relation Type">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This specification describes a method for locating host metadata as well as information about individual resources controlled by the host.  " />
  <meta name="description" content="This specification describes a method for locating host metadata as well as information about individual resources controlled by the host.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">E. Hammer-Lahav, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Yahoo!</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">B. Cook</td>
</tr>
<tr>
<td class="left">Expires: March 18, 2012</td>
<td class="right">September 15, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Web Host Metadata<br />
  <span class="filename">draft-hammer-hostmeta-17</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This specification describes a method for locating host metadata as well as information about individual resources controlled by the host.  </p>
<h1><a>Editorial Note (to be removed by RFC Editor)</a></h1>
<p>Please discuss this draft on the <a href="https://www.ietf.org/mailman/listinfo/apps-discuss">apps-discuss@ietf.org</a> mailing list.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on March 18, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Example</a>
</li>
<li>1.1.1.   <a href="#rfc.section.1.1.1">Processing Resource-Specific Information</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Notational Conventions</a>
</li>
<li>2.   <a href="#rfc.section.2">Obtaining host-meta Documents</a>
</li>
<li>3.   <a href="#rfc.section.3">The host-meta Document</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">XML Document format</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">The 'Link' Element</a>
</li>
<li>3.1.1.1.   <a href="#rfc.section.3.1.1.1">Template Syntax</a>
</li>
<li>4.   <a href="#rfc.section.4">Processing host-meta Documents</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Host-Wide Information</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Resource-Specific Information</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">The 'host-meta' Well-Known URI</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">The 'host-meta.json' Well-Known URI</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">The 'lrdd' Relation Type</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Web-based protocols often require the discovery of host policy or metadata, where "host" is not a single resource but the entity controlling the collection of resources identified by Uniform Resource Identifiers (URI) with a common URI host <a href="#RFC3986">[RFC3986]</a>, which can be served by one or more servers </p>
<p id="rfc.section.1.p.2">While web protocols have a wide range of metadata needs, they often use metadata that is concise, has simple syntax requirements, and can benefit from storing their metadata in a common location used by other related protocols.  </p>
<p id="rfc.section.1.p.3">Because there is no URI or representation available to describe a host, many of the methods used for associating per-resource metadata (such as HTTP headers) are not available. This often leads to the overloading of the root HTTP resource (e.g. 'http://example.com/') with host metadata that is not specific or relevant to the root resource itself.  </p>
<p id="rfc.section.1.p.4">This document defines a lightweight metadata document format for describing hosts (thus the name "host-meta"), intended for use by web-based protocols. This document also registers the well-known URI suffix <samp>host-meta</samp> in the Well-Known URI Registry established by <a href="#RFC5785">[RFC5785]</a>.  </p>
<p id="rfc.section.1.p.5">In addition, there are times when a host-wide scope for policy or metadata is too coarse-grained. host-meta provides two mechanisms for providing resource-specific information: </p>

<ul>
<li>Link Templates - links using a URI template instead of a fixed target URI, providing a way to define generic rules for generating resource-specific links by applying the individual resource URI to the template.  </li>
<li>Link-based Resource Descriptor Documents (LRDD, pronounced 'lard') - descriptor documents providing resource-specific information, typically information that cannot be expressed using link templates. LRDD documents are linked to resources or host-meta documents using link templates with the <samp>lrdd</samp> relation type.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Example</h1>
<p id="rfc.section.1.1.p.1">The following is a simple host-meta document including both host-wide and resource-specific information for the 'example.com' host: </p>
<div id="#rfc.figure.1"></div>
<pre>
            
  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;XRD xmlns='http://docs.oasis-open.org/ns/xri/xrd-1.0'&gt;
        
    &lt;!-- Host-wide Information --&gt;
    
    &lt;Property type='http://protocol.example.net/version'&gt;1.0&lt;/Property&gt;
        
    &lt;Link rel='copyright'
     href='http://example.com/copyright' /&gt;
        
    &lt;!-- Resource-specific Information --&gt;
        
    &lt;Link rel='hub'
     template='http://example.com/hub' /&gt;

    &lt;Link rel='lrdd'
     type='application/xrd+xml'
     template='http://example.com/lrdd?uri={uri}' /&gt;
        
    &lt;Link rel='author'
     template='http://example.com/author?q={uri}' /&gt;
     
  &lt;/XRD&gt;

          </pre>
<p id="rfc.section.1.1.p.2">The host-wide information which applies to host in its entirety provided by the document includes: </p>

<ul>
<li>A <samp>http://protocol.example.net/version</samp> host property with a value of <samp>1.0</samp>.  </li>
<li>A link to the host's copyright policy (<samp>copyright</samp>).  </li>
</ul>

<p> </p>
<p id="rfc.section.1.1.p.3">The resource-specific information provided by the document includes: </p>

<ul>
<li>A link template for receiving real-time updates (<samp>hub</samp>) about individual resources. Since the template does not include a template variable, the target URI is identical for all resources.  </li>
<li>A LRDD document link template (<samp>lrdd</samp>) for obtaining additional resource-specific information contained in a separate document for each individual resource.  </li>
<li>A link template for finding information about the author of individual resources (<samp>author</samp>).  </li>
</ul>

<p> </p>
<h1 id="rfc.section.1.1.1">
<a href="#rfc.section.1.1.1">1.1.1.</a> <a href="#resource_example" id="resource_example">Processing Resource-Specific Information</a>
</h1>
<p id="rfc.section.1.1.1.p.1">When looking for information about the an individual resource, for example, the resource identified by 'http://example.com/xy', the resource URI is applied to the templates found, producing the following links: </p>
<div id="#rfc.figure.2"></div>
<pre>
              
  &lt;Link rel='hub'
   href='http://example.com/hub' /&gt;
        
  &lt;Link rel='lrdd'
   type='application/xrd+xml'
   href='http://example.com/lrdd?uri=http%3A%2F%2Fexample.com%2Fxy' /&gt;
        
  &lt;Link rel='author'
   href='http://example.com/author?q=http%3A%2F%2Fexample.com%2Fxy' /&gt;

            </pre>
<p id="rfc.section.1.1.1.p.2">The LRDD document for 'http://example.com/xy' (obtained via an HTTP <samp>GET</samp> request): </p>
<div id="#rfc.figure.3"></div>
<pre>
              
  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;XRD xmlns='http://docs.oasis-open.org/ns/xri/xrd-1.0'&gt;
  
    &lt;Subject&gt;http://example.com/xy&lt;/Subject&gt;

    &lt;Property type='http://spec.example.net/color'&gt;red&lt;/Property&gt;

    &lt;Link rel='hub'
     href='http://example.com/another/hub' /&gt;
        
    &lt;Link rel='author'
     href='http://example.com/john' /&gt;
  &lt;/XRD&gt;

            </pre>
<p id="rfc.section.1.1.1.p.3">Together, the information available about the individual resource (presented as an XRD document for illustration purposes) is: </p>
<div id="#rfc.figure.4"></div>
<pre>
              
  &lt;?xml version='1.0' encoding='UTF-8'?&gt;
  &lt;XRD xmlns='http://docs.oasis-open.org/ns/xri/xrd-1.0'&gt;
  
    &lt;Subject&gt;http://example.com/xy&lt;/Subject&gt;

    &lt;Property type='http://spec.example.net/color'&gt;red&lt;/Property&gt;

    &lt;Link rel='hub'
     href='http://example.com/hub' /&gt;

    &lt;Link rel='hub'
     href='http://example.com/another/hub' /&gt;
        
    &lt;Link rel='author'
     href='http://example.com/john' /&gt;
          
    &lt;Link rel='author'
     href='http://example.com/author?q=http%3A%2F%2Fexample.com%2Fxy' /&gt;
     
  &lt;/XRD&gt;

            </pre>
<p id="rfc.section.1.1.1.p.4">Note that the order of links matters and is based on their original order in the host-meta and LRDD documents. For example, the <samp>hub</samp> link obtained from the host-meta link template has a higher priority than the link found in the LRDD document because the host-meta link appears before the <samp>lrdd</samp> link.  </p>
<p id="rfc.section.1.1.1.p.5">On the other hand, the <samp>author</samp> link found in the LRDD document has a higher priority than the link found in the host-meta document because it appears after the <samp>lrdd</samp> link.  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Notational Conventions</h1>
<p id="rfc.section.1.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.1.2.p.2">This document uses the Augmented Backus-Naur Form (ABNF) notation of <a href="#RFC5234">[RFC5234]</a>.  Additionally, the following rules are included from <a href="#RFC3986">[RFC3986]</a>: reserved, unreserved, and pct-encoded.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Obtaining host-meta Documents</h1>
<p id="rfc.section.2.p.1">The client obtains the host-meta document for a given host by sending an HTTP <a href="#RFC2616">[RFC2616]</a> or an HTTPS <a href="#RFC2818">[RFC2818]</a> GET request to the host for the <samp>/.well-known/host-meta</samp> path, using the default ports defined for each protocol (e.g. port 80 for HTTP and port 443 for HTTPS). The scope and meaning of host-meta documents obtained via other protocols or ports is undefined.  </p>
<p id="rfc.section.2.p.2">The server MUST support at least one protocol but MAY support both. If both protocols are supported, they MUST produce the same document.  </p>
<p id="rfc.section.2.p.3">The decision as to which protocol is used to obtain the host-meta document has significant security ramifications as described in <a href="#security">Section 5</a>.  </p>
<div id="#rfc.figure.5"></div>
<p>For example, the following request is used to obtain the host-meta document for the 'example.com' host: </p>
<pre>
          
  GET /.well-known/host-meta HTTP/1.1
  Host: example.com
  
        </pre>
<p id="rfc.section.2.p.4">If the server response indicates that the host-meta resource is located elsewhere (a 301, 302, or 307 response status code), the client SHOULD try to obtain the resource from the location provided in the response. This means that the host-meta document for one host MAY be retrieved from another host. Likewise, if the resource is not available or does not exist (e.g. a 404 or 410 response status codes), the client should infer that metadata is not available via this mechanism.  </p>
<p id="rfc.section.2.p.5">The host-meta document SHOULD be served with the <samp>application/xrd+xml</samp> media type.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> The host-meta Document</h1>
<p id="rfc.section.3.p.1">The host-meta document uses the XRD 1.0 document format as defined by <a href="#OASIS.XRD-1.0">[OASIS.XRD-1.0]</a>, which provides a simple and extensible XML-based schema for describing resources. This specification defines additional processing rules needed to describe hosts. Documents MAY include any elements included in the XRD 1.0 schema which are not explicitly excluded by this specification.  </p>
<p id="rfc.section.3.p.2">The server MAY offer alternative representations of any XRD document it serves (host-meta, LRDD, or other XRD-based documents). The client MAY request a particular representation using the HTTP <samp>Accept</samp> request header field. If no <samp>Accept</samp> request header field is included with the request, or if the client requests a <samp>application/xrd+xml</samp> representation, the server MUST respond using the REQUIRED XRD 1.0 XML representation described in <a href="#format">Section 3.1</a>.  </p>
<p id="rfc.section.3.p.3">Applications using the host-meta document MAY require the server to provide a specific alternative representation in addition to the XRD 1.0 XML representation when explicitly requested by the client.  </p>
<p id="rfc.section.3.p.4">JRD - A JavaScript Object Notation (JSON) XRD 1.0 representation is described in <a href="#json">[json]</a>. It is RECOMMENDED that servers offer the JRD representation in addition to the XRD representation.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#format" id="format">XML Document format</a>
</h1>
<p id="rfc.section.3.1.p.1">The host-meta document root MUST be an <samp>XRD</samp> element. The document SHOULD NOT include a <samp>Subject</samp> element, as at this time no URI is available to identify hosts. The use of the <samp>Alias</samp> element in host-meta is undefined and NOT RECOMMENDED.  </p>
<p id="rfc.section.3.1.p.2">The subject (or "context resource" as defined by <a href="#RFC5988">[RFC5988]</a>) of the XRD <samp>Property</samp> and <samp>Link</samp> elements is the host described by the host-meta document. However, the subject of <samp>Link</samp> elements with a <samp>template</samp> attribute is the individual resource whose URI is applied to the link template as described in <a href="#Link%20element">Section 3.1.1</a>.  </p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> <a href="#Link%20element" id="Link element">The 'Link' Element</a>
</h1>
<p id="rfc.section.3.1.1.p.1">The XRD <samp>Link</samp> element, when used with the <samp>href</samp> attribute, conveys a link relation between the host described by the document and a common target URI.  </p>
<div id="#rfc.figure.6"></div>
<p>For example, the following link declares a common copyright license for the entire scope: </p>
<pre>
              
  &lt;Link rel='copyright' href='http://example.com/copyright' /&gt;

            </pre>
<p id="rfc.section.3.1.1.p.2">However, a <samp>Link</samp> element with a <samp>template</samp> attribute conveys a relation whose context is an individual resource within the host-meta document scope, and whose target is constructed by applying the context resource URI to the template. The template string MAY contain a URI string without any variables to represent a resource-level relation that is identical for every individual resource.  </p>
<div id="#rfc.figure.7"></div>
<p>For example, a blog with multiple authors can provide information about each article's author by providing an endpoint with a parameter set to the URI of each article. Each article has a unique author, but all share the same pattern of where that information is located: </p>
<pre>
              
  &lt;Link rel='author'
   template='http://example.com/author?article={uri}' /&gt;
  
            </pre>
<h1 id="rfc.section.3.1.1.1">
<a href="#rfc.section.3.1.1.1">3.1.1.1.</a> <a href="#template_syntax" id="template_syntax">Template Syntax</a>
</h1>
<p id="rfc.section.3.1.1.1.p.1">This specification defines a simple template syntax for URI transformation.  A template is a string containing brace-enclosed ("{}") variable names marking the parts of the string that are to be substituted by the corresponding variable values.  </p>
<p id="rfc.section.3.1.1.1.p.2">Before substituting template variables, values MUST be encoded using UTF-8 and any character other than unreserved (as defined by <a href="#RFC3986">[RFC3986]</a>) MUST be percent-encoded per <a href="#RFC3986">[RFC3986]</a>.  </p>
<p id="rfc.section.3.1.1.1.p.3">This specification defines a single variable - <samp>uri</samp> - as the entire context resource URI. Protocols MAY define additional relation-specific variables and syntax rules, but SHOULD only do so for protocol-specific relation types, and MUST NOT change the meaning of the <samp>uri</samp> variable. If a client is unable to successfully process a template (e.g. unknown variable names, unknown or incompatible syntax) the parent <samp>Link</samp> element SHOULD be ignored.  </p>
<div id="#rfc.figure.8"></div>
<p>The template syntax ABNF: </p>
<pre>
                
  URI-Template =  *( uri-char / variable )
  variable     =  "{" var-name "}"
  uri-char     =  ( reserved / unreserved / pct-encoded )
  var-name     =  %x75.72.69 / ( 1*var-char ) ; "uri" or other names
  var-char     =  ALPHA / DIGIT / "." / "_"
  
              </pre>
<div id="#rfc.figure.9"></div>
<p>For example: </p>
<pre>
                
  Input:    http://example.com/r?f=1
  Template: http://example.org/?q={uri}
  Output:   http://example.org/?q=http%3A%2F%2Fexample.com%2Fr%3Ff%3D1
  
              </pre>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Processing host-meta Documents</h1>
<p id="rfc.section.4.p.1">Once the host-meta document has been obtained, the client processes its content based on the type of information desired: host-wide or resource-specific.  </p>
<p id="rfc.section.4.p.2">Clients usually look for a link with a specific relation type or other attributes. In such cases, the client does not need to process the entire host-meta document and all linked LRDD documents, but instead, process the various documents in their prescribed order until the desired information is found.  </p>
<p id="rfc.section.4.p.3">Protocols using host-meta must indicate whether the information they seek is host-wide or resource-specific. For example, "obtain the first host-meta resource-specific link using the 'author' relation type". If both types are used for the same purpose (e.g. first look for resource-specific, then look for host-wide), the protocol must specify the processing order.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Host-Wide Information</h1>
<p id="rfc.section.4.1.p.1">When looking for host-wide information, the client MUST ignore any <samp>Link</samp> elements with a <samp>template</samp> attribute, as well as any link using the <samp>lrdd</samp> relation type.  All other elements are scoped as host-wide.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Resource-Specific Information</h1>
<p id="rfc.section.4.2.p.1">Unlike host-wide information which is contained solely within the host-meta document, resource-specific information is obtained from host-meta link templates, as well as from linked LRDD documents.  </p>
<p id="rfc.section.4.2.p.2">When looking for resource-specific information, the client constructs a resource descriptor by collecting and processing all the host-meta link templates. For each link template: </p>

<ol>
<li>The client applies the URI of the desired resource to the template, producing a resource-specific link.  </li>
<li>If the link's relation type is other than <samp>lrdd</samp>, the client adds the link to the resource descriptor in order.  </li>
<li>If the link's relation type is <samp>lrdd</samp>: <dl>
<dt>3.1 </dt>
<dd>The client obtains the LRDD document by following the scheme-specific rules for the LRDD document URI. If the document URI scheme is <samp>http</samp> or <samp>https</samp>, the document is obtained via an HTTP <samp>GET</samp> request to the identified URI. If the HTTP response status code is 301, 302, or 307, the client MUST follow the redirection response and repeat the request with the provided location.  </dd>
<dt>3.2 </dt>
<dd>The client adds any links found in the LRDD document to the resource descriptor in order, except for any link using the <samp>lrdd</samp> relation type (processing is limited to a single level of inclusion). When adding links, the client SHOULD retain any extension attributes and child elements if present (e.g.  &lt;Property&gt; or &lt;Title&gt; elements).  </dd>
<dt>3.3 </dt>
<dd>The client adds any resource properties found in the LRDD document to the resource descriptor in order (e.g. &lt;Alias&gt; or &lt;Property&gt; child elements of the LRDD document &lt;XRD&gt; root element).  </dd>
</dl>
<p> </p>
</li>
</ol>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.5.p.1">The host-meta document is designed to be used by other applications explicitly "opting-in" to use the facility. Therefore, any such application MUST review the specific security implications of using host-meta documents. By itself, this specification does not provide any protections or guarantees that any given host-meta document is under the control of the appropriate entity as required by each application.  </p>
<p id="rfc.section.5.p.2">The metadata returned by the host-meta resource is presumed to be under the control of the appropriate authority and representative of all the resources described by it. If this resource is compromised or otherwise under the control of another party, it may represent a risk to the security of the server and data served by it, depending on the applications using it.  </p>
<p id="rfc.section.5.p.3">Applications utilizing the host-meta document where the authenticity of the information is necessary MUST require the use of the HTTPS protocol and MUST NOT produce a host-meta document using other means. In addition, such applications MUST require that any redirection leading to the retrieval of a host-meta document also utilize the HTTPS protocol.  </p>
<p id="rfc.section.5.p.4">Since the host-meta document is authoritative for the entire host, not just the authority (combination of scheme, host, and port) of the host-meta document server, applications MUST ensure that using a host-meta document for another URI authority does not represent a potential security exploit.  </p>
<p id="rfc.section.5.p.5">Protocols using host-meta templates must evaluate the construction of their templates as well as any protocol-specific variables or syntax to ensure that the templates cannot be abused by an attacker. For example, a client can be tricked into following a malicious link due to a poorly constructed template which produces unexpected results when its variable values contain unexpected characters.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> IANA Considerations</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> The 'host-meta' Well-Known URI</h1>
<p id="rfc.section.6.1.p.1">This specification registers the <samp>host-meta</samp> well-known URI in the Well-Known URI Registry as defined by <a href="#RFC5785">[RFC5785]</a>.  </p>

<dl>
<dt>URI suffix:</dt>
<dd style="margin-left: 8">host-meta </dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">IETF </dd>
<dt>Specification document(s):</dt>
<dd style="margin-left: 8">[[ this document ]] </dd>
<dt>Related information:</dt>
<dd style="margin-left: 8">The <samp>host-meta</samp> documents obtained from the same host using the HTTP and HTTPS protocols (using default ports) MUST be identical.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> The 'host-meta.json' Well-Known URI</h1>
<p id="rfc.section.6.2.p.1">This specification registers the <samp>host-meta.json</samp> well-known URI in the Well-Known URI Registry as defined by <a href="#RFC5785">[RFC5785]</a>.  </p>

<dl>
<dt>URI suffix:</dt>
<dd style="margin-left: 8">host-meta.json </dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">IETF </dd>
<dt>Specification document(s):</dt>
<dd style="margin-left: 8">[[ this document ]] </dd>
<dt>Related information:</dt>
<dd style="margin-left: 8">The <samp>host-meta.json</samp> documents obtained from the same host using the HTTP and HTTPS protocols (using default ports) MUST be identical.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> The 'lrdd' Relation Type</h1>
<p id="rfc.section.6.3.p.1">This specification registers the <samp>lrdd</samp> relation type in the Link Relation Type Registry defined by <a href="#RFC5988">[RFC5988]</a>: </p>

<dl>
<dt>Relation Name:</dt>
<dd style="margin-left: 8">lrdd </dd>
<dt>Description:</dt>
<dd style="margin-left: 8">Refers to further information about the link's context, expressed as a LRRD ("Link-based Resource Descriptor Document") resource. See [[ this specification ]] for information about processing this relation type in host-meta documents. When used elsewhere, it refers to additional links and other metadata. Multiple instances indicate additional LRRD resources. LRRD resources MUST have an <samp>application/xrd+xml</samp> representation, and MAY have others.  </dd>
<dt>Reference:</dt>
<dd style="margin-left: 8">[[ This specification ]] </dd>
</dl>

<p> </p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2818">[RFC2818]</b></td>
<td class="top">
<a>Rescorla, E.</a>, "<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>", RFC 2818, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3986">[RFC3986]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4627">[RFC4627]</b></td>
<td class="top">
<a>Crockford, D.</a>, "<a href="http://tools.ietf.org/html/rfc4627">The application/json Media Type for JavaScript Object Notation (JSON)</a>", RFC 4627, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5785">[RFC5785]</b></td>
<td class="top">
<a>Nottingham, M.</a> and <a>E. Hammer-Lahav</a>, "<a href="http://tools.ietf.org/html/rfc5785">Defining Well-Known Uniform Resource Identifiers (URIs)</a>", RFC 5785, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5988">[RFC5988]</b></td>
<td class="top">
<a>Nottingham, M.</a>, "<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>", RFC 5988, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="OASIS.XRD-1.0">[OASIS.XRD-1.0]</b></td>
<td class="top">
<a title="Yahoo!">Hammer-Lahav, E.H</a> and <a title="Internet2">W.N Norris</a>, "<a>Extensible Resource Descriptor (XRD) Version 1.0</a>", .</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Eran Hammer-Lahav</span> editor
	  <span class="n hidden">
		<span class="family-name">Hammer-Lahav</span>
	  </span>
	</span>
	<span class="org vcardline">Yahoo! </span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:eran@hueniverse.com">eran@hueniverse.com</a></span>

<span class="vcardline">URI: <a href="http://hueniverse.com">http://hueniverse.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Blaine Cook</span> 
	  <span class="n hidden">
		<span class="family-name">Cook</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:romeda@gmail.com">romeda@gmail.com</a></span>

<span class="vcardline">URI: <a href="http://romeda.org">http://romeda.org</a></span>

  </address>
</div>

</body>
</html>