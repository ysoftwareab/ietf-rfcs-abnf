



SPRING WG                                                         Y. Liu
Internet-Draft                                                   S. Peng
Intended status: Standards Track                         ZTE Corporation
Expires: July 31, 2021                                  January 27, 2021


                       SR Policy for Reverse Path
               draft-lp-spring-sr-policy-reverse-path-00

Abstract

   This document introduces a method of dynamically configuring the
   return path for an SR path.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on July 31, 2021.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






Liu & Peng                Expires July 31, 2021                 [Page 1]

Internet-Draft     SR Policy for Reverse Segment List       January 2021


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  SR Policy for Bidirectional Path  . . . . . . . . . . . . . .   2
     2.1.  BGP Extensions for Advertising Segment List . . . . . . .   3
     2.2.  Illustration  . . . . . . . . . . . . . . . . . . . . . .   4
     2.3.  Difference from Path Segment  . . . . . . . . . . . . . .   5
   3.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   5.  Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   Echo-BFD [RFC5880] can be used to monitor an SR Policy between the
   local and the remote BFD peers.  As defined in [RFC5880], the remote
   BFD system does not process the payload of an Echo BFD.

   A BSID can be used to specify the return path of an Echo BFD packet.

   As introduced in [I-D.ietf-spring-bfd], the sender MAY use a Binding
   SID (BSID) [RFC8402] that has been bound with the SR Policy that
   ensures the return of a packet to that particular node and a BSID MAY
   be associated with the SR Policy that is the reverse to the SR Policy
   programmed onto the BFD Echo packet by the sender.

   One way to implement this is through static configuration, e.g,
   configure the BSID corresponding to the return path for each segment
   list when enable BFD for an SR policy or an segment list.

   This document introduces a method of dynamically configuring the
   return path for an SR path, which can be used to specify the return
   path in Echo BFD for SR, ICMPv6 for SRv6, etc.

2.  SR Policy for Bidirectional Path

   In order to specify the return path for an segment list when
   delivering the SR Policy, and the tail node can return the packet
   according to the specified return path, this document proposes
   extensions of SR Policy.  It allows the segment list to have its own
   BSID.

   When delivering SR policy, the BSID of the segment list and the
   corresponding BSID of the return segment list can be carried
   together.






Liu & Peng                Expires July 31, 2021                 [Page 2]

Internet-Draft     SR Policy for Reverse Segment List       January 2021


2.1.  BGP Extensions for Advertising Segment List

   Segment List sub-TLV is introduced in
   [I-D.ietf-idr-segment-routing-te-policy] and it includes the elements
   of the paths (i.e., segments).

   This document introduces two optional sub-sub-tlvs of Segment List
   sub-TLV, Binding SID Sub-TLV and Reverse Binding SID Sub-TLV.

   The Binding SID sub-TLV has the following format:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |   Length      |     Flags     |   RESERVED    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Binding SID (variable, optional)                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       Figure 1: Binding SID Sub-TLV

   where:

   Type: TBD.

   Length: specifies the length of the value field not including Type
   and Length fields.

   Binding SID: the BSID of the segment list.

   The Reverse Binding SID sub-TLV has the following format:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |   Length      |     Flags     |   RESERVED    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Reverse  Binding SID (variable, optional)           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                   Figure 2: Reverse Binding SID Sub-TLV

   where:

   Type: TBD

   Length: specifies the length of the value field not including Type
   and Length fields.



Liu & Peng                Expires July 31, 2021                 [Page 3]

Internet-Draft     SR Policy for Reverse Segment List       January 2021


   Reverse Binding SID: the BSID of the reverse SR path.  If it is
   encapsulated in the packet, the Reverse Binding SID must the last
   segment to be processed.

   The extended SR Policy Encoding structure is as follows:

   SR Policy SAFI NLRI: <Distinguisher, Policy-Color, Endpoint>
      Attributes:
         Tunnel Encaps Attribute (23)
            Tunnel Type: SR Policy
                Binding SID
                SRv6 Binding SID
                Preference
                Priority
                Policy Name
                Policy Candidate Path Name
                Explicit NULL Label Policy (ENLP)
                Segment List
                    Binding SID
                    Reverse Binding SID
                    Weight
                    Segment
                    Segment
                    ...

   Whether to carry RBSID in the packet can be configured according to
   service requirements.  For example, when echo BFD packets are
   encapsulated, RBSID is carried in segment list, while packets of
   other services do not carry RBSID by default.  Thus BFD packets and
   common service packets can share the same SR Policy.

2.2.  Illustration

               +-+      +-+      +-+      +-+
               |A|------|B|------|C|------|D|
               +-+      +-+      +-+      +-+

                       Figure 3: Reference Topology

   The content of Segment List1 in SR Policy1 received by A is:

   Segment List1
           Reverse Binding SID D1
           Segment B
           Segment C
           Segment D

   The content of Segment List2 in SR Policy2 received by D is:



Liu & Peng                Expires July 31, 2021                 [Page 4]

Internet-Draft     SR Policy for Reverse Segment List       January 2021


   Segment List2
           Binding SID D1
           Segment C
           Segment B
           Segment A

   The SID-List of the BFD ECHO sent by A is < B, C, D, D1 >.

   After the packet arrives at node D, D1 is Segment List2 BSID.  BFD
   packets are returned from node D according to segment list < C, B, A
   >.

2.3.  Difference from Path Segment

   TBD

3.  Security Considerations

   Procedures and protocol extensions defined in this document do not
   affect the security considerations discussed in
   [I-D.ietf-idr-segment-routing-te-policy] and
   [I-D.ietf-spring-segment-routing-policy].

4.  IANA Considerations

   TBD

5.  Normative References

   [I-D.ietf-idr-segment-routing-te-policy]
              Previdi, S., Filsfils, C., Talaulikar, K., Mattes, P.,
              Rosen, E., Jain, D., and S. Lin, "Advertising Segment
              Routing Policies in BGP", draft-ietf-idr-segment-routing-
              te-policy-11 (work in progress), November 2020.

   [I-D.ietf-spring-bfd]
              Mirsky, G., Tantsura, J., Varlashkin, I., Chen, M., and J.
              Wenying, "Bidirectional Forwarding Detection (BFD) in
              Segment Routing Networks Using MPLS Dataplane", draft-
              ietf-spring-bfd-00 (work in progress), September 2020.

   [I-D.ietf-spring-segment-routing-policy]
              Filsfils, C., Talaulikar, K., Voyer, D., Bogdanov, A., and
              P. Mattes, "Segment Routing Policy Architecture", draft-
              ietf-spring-segment-routing-policy-09 (work in progress),
              November 2020.





Liu & Peng                Expires July 31, 2021                 [Page 5]

Internet-Draft     SR Policy for Reverse Segment List       January 2021


   [RFC5880]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", RFC 5880, DOI 10.17487/RFC5880, June 2010,
              <https://www.rfc-editor.org/info/rfc5880>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Liu Yao
   ZTE Corporation
   Nanjing
   China

   Email: liu.yao71@zte.com.cn


   Peng Shaofu
   ZTE Corporation
   Nanjing
   China

   Email: peng.shaofu@zte.com.cn


























Liu & Peng                Expires July 31, 2021                 [Page 6]
