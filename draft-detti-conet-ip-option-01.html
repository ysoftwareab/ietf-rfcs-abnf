<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>An IPv4 Option to support Content Networking</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 CONET IP Option">
<link href="#rfc.section.3" rel="Chapter" title="3 CONET protocol">
<link href="#rfc.section.4" rel="Chapter" title="4 Procedures">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Interest CONET Information Unit (Interest CIU)">
<link href="#rfc.section.4.1.1" rel="Chapter" title="4.1.1 Processing in the end node">
<link href="#rfc.section.4.1.2" rel="Chapter" title="4.1.2 Processing in the serving node">
<link href="#rfc.section.4.1.3" rel="Chapter" title="4.1.3 Processing in the border node">
<link href="#rfc.section.4.1.4" rel="Chapter" title="4.1.4 Processing in the intermediate node">
<link href="#rfc.section.4.1.5" rel="Chapter" title="4.1.5 Processing in the legacy routers">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Named data CONET Information Unit (Named data CIU)">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Processing in the responding node">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Processing in a border node">
<link href="#rfc.section.4.2.3" rel="Chapter" title="4.2.3 Processing in an intermediate node">
<link href="#rfc.section.4.2.4" rel="Chapter" title="4.2.4 Processing in the legacy routers">
<link href="#rfc.section.5" rel="Chapter" title="5 Routing by name framework">
<link href="#rfc.section.6" rel="Chapter" title="6 CONET default namespaces">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgments">
<link href="#rfc.section.8" rel="Chapter" title="8 Performance Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Content Centric Networking paradigm, also known as Named Data Networking, shifts the focus of networking from providing connections between hosts to efficiently providing content to the users. The work on CCN has traditionally been performed looking at "clean-slate" solutions which aims to replace IP with a new paradigm. On the other hand, in this memo we propose an "integration" approach to Content Centric Networking, i.e. we extend the IP protocol using a new IP Option. The new IP option is used by routers to support networking based on content rather than (or better in addition to) end-point addresses. " />
  <meta name="description" content="The Content Centric Networking paradigm, also known as Named Data Networking, shifts the focus of networking from providing connections between hosts to efficiently providing content to the users. The work on CCN has traditionally been performed looking at "clean-slate" solutions which aims to replace IP with a new paradigm. On the other hand, in this memo we propose an "integration" approach to Content Centric Networking, i.e. we extend the IP protocol using a new IP Option. The new IP option is used by routers to support networking based on content rather than (or better in addition to) end-point addresses. " />
  <meta name="keywords" content="I-D, Internet-Draft, HTTP, HTTP Streaming, Long Polling" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">A. Detti</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">S. Salsano</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">N. Blefari-Melazzi</td>
</tr>
<tr>
<td class="left">Expires: April 02, 2012</td>
<td class="right">Univ. of Rome "Tor Vergata"</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">September 30, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">An IPv4 Option to support Content Networking<br />
  <span class="filename">draft-detti-conet-ip-option-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Content Centric Networking paradigm, also known as Named Data Networking, shifts the focus of networking from providing connections between hosts to efficiently providing content to the users. The work on CCN has traditionally been performed looking at "clean-slate" solutions which aims to replace IP with a new paradigm. On the other hand, in this memo we propose an "integration" approach to Content Centric Networking, i.e. we extend the IP protocol using a new IP Option. The new IP option is used by routers to support networking based on content rather than (or better in addition to) end-point addresses. </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 02, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">CONET IP Option</a>
</li>
<li>3.   <a href="#rfc.section.3">CONET protocol</a>
</li>
<li>4.   <a href="#rfc.section.4">Procedures</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Interest CONET Information Unit (Interest CIU)</a>
</li>
<li>4.1.1.   <a href="#rfc.section.4.1.1">Processing in the end node</a>
</li>
<li>4.1.2.   <a href="#rfc.section.4.1.2">Processing in the serving node</a>
</li>
<li>4.1.3.   <a href="#rfc.section.4.1.3">Processing in the border node</a>
</li>
<li>4.1.4.   <a href="#rfc.section.4.1.4">Processing in the intermediate node</a>
</li>
<li>4.1.5.   <a href="#rfc.section.4.1.5">Processing in the legacy routers</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Named data CONET Information Unit (Named data CIU)</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Processing in the responding node</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Processing in a border node</a>
</li>
<li>4.2.3.   <a href="#rfc.section.4.2.3">Processing in an intermediate node</a>
</li>
<li>4.2.4.   <a href="#rfc.section.4.2.4">Processing in the legacy routers</a>
</li>
<li>5.   <a href="#rfc.section.5">Routing by name framework</a>
</li>
<li>6.   <a href="#rfc.section.6">CONET default namespaces</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgments</a>
</li>
<li>8.   <a href="#rfc.section.8">Performance Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">In this memo we propose a new approach to Content Centric Networking <a href="#Koponen07">[Koponen07]</a><a href="#Jacobson09">[Jacobson09]</a>, based on extending the IP protocol by using a new IP Option <a href="#RFC0791">[RFC0791]</a> called CONET IP option. The CONET IP option can be used by routers to support content aware networking, in addition to classical address based networking. The proposed solution has been described in <a href="#CONET11">[CONET11]</a>.  </p>
<p id="rfc.section.1.p.2">The CONET IP option is used to identify the content which is the object of the data transfer. Its usage allows efficient in-network caching and replication of content.  </p>
<p id="rfc.section.1.p.3">The architecture foresees end hosts, serving nodes and CONET nodes. End hosts require for content. Serving nodes provide content. CONET nodes: i) route requests from end hosts to serving nodes; ii) deliver content from serving nodes to end hosts; iii) may cache content and therefore provide it to end hosts without contacting the serving node. CONET nodes can be further classified in Border nodes and Internal nodes. Border nodes are able to perform both "routing-by-name" and caching, Internal nodes are not able to perform "routing-by-name" (but only plain IP routing) and can only perform caching.  </p>
<div id="#rfc.figure.1"></div>
<div id="#architecture"></div>
<pre>

              requests for content
              -------------------&gt;
              content is provided
              &lt;-------------------
  +----+                              +----+      +----+
  |    |                            --|    |------|    | 
  +----+\                         /   +----+      +----+
         \    +----+      +----+ /                       
          ----|    |------|    |/                        
              +----+      +----+                        
end node      legacy    intermediate   border     serving
              router       node        node        node
    |                                   |
    +---------CONET next hop-----------&gt;+

		   </pre>
<p id="rfc.section.1.p.4">In addition to the new CONET IP option, the proposed solution needs a new Internet Protocol Number to identify the CONET protocol.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#anchor-section-1" id="anchor-section-1">CONET IP Option</a>
</h1>
<p id="rfc.section.2.p.1">The CONET IP option has the following format:</p>
<div id="#rfc.figure.2"></div>
<div id="#ipoption"></div>
<pre>

                 +--------+--------+--------+--------+
                 |100xxxxx|yyyyyyyy|ppppLLCr|  NID   |
                 +--------+--------+--------+--------+
                 |         NID (variable length)     |
                 |                ...                |
                 +--------+--------+--------+--------+
                 | CSN    |optional CSN cont.   ...  |
                 +--------+--------+--------+--------+
           </pre>
<div id="#rfc.figure.3"></div>
<pre>
Type:
  Copied flag:  1 (all fragments must carry the option)
  Option class: 0 (control)
  Option number: xxxxx (decimal) TO BE ALLOCATED BY IANA

Length:
  yyyyyyyy: variable length of IP option in bytes (including the 
            Type and Length bytes
           </pre>
<p id="rfc.section.2.p.2">pppp : CONET Information Unit Type - This four bits field is used to differentiate between different types of CONET Information Units (CIUs) </p>
<div id="#rfc.figure.4"></div>
<pre>

   0     Reserved
   1     Interest CONET Information Unit (Interest CIU)
   2     Named-data CONET Information Unit (Named-data CIU)
   2-15  Reserved
           </pre>
<p id="rfc.section.2.p.3">LL : NID Length Specification - This two bits field provides the length of Network Identifier (NID) field or specifies how the NID length is provided.  </p>
<div id="#rfc.figure.5"></div>
<pre>

   0  16 bytes length
   1  Reserved
   2  NID starts with a one byte length field (NID length in bytes)
   3  Reserved
           </pre>
<p id="rfc.section.2.p.4">C : cache indication - This one bit field is used to control cache operations.  </p>
<div id="#rfc.figure.6"></div>
<pre>

   0  No cache
   1  Cache
 </pre>
<p id="rfc.section.2.p.5">Within Information Units that request for content (e.g. interest CIU), if the bit is set to "No cache" it indicates to the crossed nodes not to look for the content in the cache, but to forward the request toward the source. Within Information Units that carry content (e.g. named-data CIU), if the bit is set to "No cache" it indicates to the crossed nodes not to cache the content.  </p>
<p id="rfc.section.2.p.6">r : reserved - The last bit of the first byte after the option length is reserved.  </p>
<p id="rfc.section.2.p.7">NID : Network Identifier (NID) field - The NID is a unique identifier for the content. The NID is carried in the NID field. How to determine the length of this field is defined by the NID Length Specification field. If the NID Length Specification field determines the field length, the NID field only carries the NID. If the NID Length Specification field indicates that the field length is carried in the field itself, the NID field starts with a one byte field that determines its length.  </p>
<div id="#rfc.figure.7"></div>
<pre>

If NID Length Specification = 0 (i.e. 16 bytes len),
the NID field is as follows:

             +--------+--------+--------+--------+
             |                NID                |
             +--------+--------+--------+--------+
             |                                   |
             +--------+--------+--------+--------+
             |                                   |
             +--------+--------+--------+--------+
             |                                   |
             +--------+--------+--------+--------+

If NID Length Specification = 2 (i.e. NID starts with a one byte
length field), the NID field is as follows:

             +--------+--------+--------+--------+
             | length |        NID               |
             +--------+--------+--------+--------+
             |                ...                |
             +--------+--------+--------+--------+
             |                ...                |
           </pre>
<p id="rfc.section.2.p.8">The NID starts with a two bytes field called NID namespace ID that determines the structure of the rest of the NID. NID namespace values needs to be assigned by the IANA. Note that in most circumstances, the NID can be processed by the routers as an opaque object, as described in <a href="#anchor-procedures">Section 4</a>. This is why the NID namespace ID has been included at the beginning of the NID itself. In other cases the nodes are requested to perform a routing-by-name procedure, which may require a semantic understanding of the NID.  </p>
<div id="#rfc.figure.8"></div>
<pre>

             +--------+--------+--------+--------+
             | NID namespace ID|       ...       |
             +--------+--------+--------+--------+
             |                ...                |
             +--------+--------+--------+--------+
             |                ...                |
             +--------+--------+--------+--------+
             |                ...                |
             +--------+--------+--------+--------+
           </pre>
<p id="rfc.section.2.p.9">CSN : Chunk Sequence Number - This field carries the Chunk Sequence Number that identifies a portion of the content. The assumption here is that the content is split in a sequence of smaller unit called "chunks". The Chunk Sequence Number is represented with a variable number of bytes. An initial bit pattern determines the length of the CSN field.  </p>
<div id="#rfc.figure.9"></div>
<pre>

1 byte CSN (7 bits CSN range)
    +--------+
    |0       | 
    +--------+

2 bytes CSN (15 bit CSN range)
    +--------+--------+
    |10               | 
    +--------+--------+

3 bytes CSN (21 bit CSN range)
    +--------+--------+--------+
    |110     |        |        |
    +--------+--------+--------+

4 bytes CSN (28 bit CSN range)
    +--------+--------+--------+--------+
    |1110    |        |        |        |
    +--------+--------+--------+--------+

5 bytes CSN (32 bit CSN range)
    +--------+--------+--------+--------+
    |11110000|        |        |        |
    +--------+--------+--------+--------+
    |        |
    +--------+

6 bytes CSN (40 bit CSN range)
    +--------+--------+--------+--------+
    |11110001|        |        |        |
    +--------+--------+--------+--------+
    |        |        |
    +--------+--------+

           </pre>
<p id="rfc.section.2.p.10">Binary patterns from 11110010 to 11111111 are reserved. They can be used to extend the CSN range if needed. With the above defined option, we can have up to 2^40 chunks in a content. Assuming a relatively small chunk size of 1 KBytes, it is possible to have a content of 1099 TeraBytes, while assuming a more reasonable chunk size of 256 Kbyte it is possible to have a content of 281474 TeraBytes (218 PetaBytes).  </p>
<p id="rfc.section.2.p.11">The rationale for having a variable length encoding is the following. The CSN range for a given content is determined by the content size divided by the chunk size. As content of very different sizes can be transmitted, the CSN range can be very different. Therefore it is not efficient to dimension this field considering the maximum number of chunks in which a content can be split.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#anchor-CONET-protocol" id="anchor-CONET-protocol">CONET protocol</a>
</h1>
<p id="rfc.section.3.p.1">In the previous section, we have seen the description of the CONET IP option that is carried in the header of IP packets. The payload of IP packets is the CONET protocol and a specific IP protocol number is assigned to it: </p>
<p id="rfc.section.3.p.2">CONET IP protocol number : xxx (to be assigned by IANA).  </p>
<p id="rfc.section.3.p.3">The figure below shows the CONET protocol stack. CONET protocol is divided in two sub-layers, whose data unit are respectively denoted as "Carrier Packets" and "CONET Information Units". A CONET Information Unit (CIU) can be split into different Carrier Packets. Each Carrier Packet is transported by an IP packet. There are different types of CONET Information Units, the CIU type information is carried in the CONET Information Unit Type field in the CONET IP option.  </p>
<div id="#rfc.figure.10"></div>
<pre>

    +--------+--------+--------+ \
    | CONET Information Units  |  |
    +--------+--------+--------+  |- CONET protocol
    |     Carrier Packets      |  |
    +--------+--------+--------+ /
    | IP (with CONET IP option)|
    +--------+--------+--------+
           </pre>
<p id="rfc.section.3.p.4">The generic structure of a Carrier Packet (CP) is reported hereafter: </p>
<div id="#rfc.figure.11"></div>
<pre>

    +-------------------------+
    |    CP Payload header    |
    +-------------------------+
    |       CP Payload        |
    +-------------------------+
    |      CP Path state      |
    +-------------------------+
   </pre>
<p id="rfc.section.3.p.5">The information contained in the CP Payload header is specific for each CIU type. It will be described in other specification documents. The CP payload header contains the length of the CP Payload and allows to identify the start of the CP Path state field. The CP Path state field is used in end nodes, border nodes and serving nodes to assist in the forwarding operation of carrier packet, therefore it is described here.  </p>
<p id="rfc.section.3.p.6">The CP Path State field stores the end node address and the addresses of the set of crossed border nodes in the path from end node to the serving node (or to a border or intermediate node that provides a requested content). The format of the CP path state field is reported hereafter (assuming that IPv4 addresses are carried).  </p>
<div id="#rfc.figure.12"></div>
<pre>

    CP Path State field

             +--------+--------+--------+--------+
             |0  len  | pointer| ad-type| addr 1 |
             +--------+--------+--------+--------+
             | addr 2 | addr 3 | addr 4 | ad-type|
             +--------+--------+--------+--------+
             | addr 1 | addr 2 | addr 3 | addr 4 |
             +--------+--------+--------+--------+
             |                ...                |
             +--------+--------+--------+--------+

             +--------+--------+--------+--------+
             |1      len       |     pointer     |
             +--------+--------+--------+--------+
             | ad-type| addr 1 | addr 2 | addr 3 | 
             +--------+--------+--------+--------+
             | addr 4 | ad-type| addr 1 | addr 2 |
             +--------+--------+--------+--------+
             | addr 3 | addr 4 |
             +--------+--------+
		   
		   </pre>
<p id="rfc.section.3.p.7">The length field specifies the length of the CP Path State field in bytes. If the first bit of the len field is 0, the remaining 7 bits of the first byte are used as len field and both the length field and the pointer field are one byte length. In this case the maximum value of the length of the CP Path State field is 127. If the first bit of the len field is 1, both the length field and the pointer field are two bytes length. In this case the maximum value of the length of the CP Path State field is 32767.  </p>
<p id="rfc.section.3.p.8">The pointer field specifies the offset, starting from the start of the CP Path State field where the last address has been inserted.  </p>
<p id="rfc.section.3.p.9">Each address is represented as a couple (ad-type, address) it could be represented by a triple (ad-type, ad-length, address) if the address type is of variable length. The ad-type field is one byte size and currently admitted values are: </p>
<div id="#rfc.figure.13"></div>
<pre>

   0     Reserved
   1     Public IPv4 address (len is 4 bytes, no ad-length needed)
   2     Public Ipv6 address (len is 16 bytes, no ad-length needed))
   3     Ethernet address (len is 6 bytes, no ad-length needed))
   4-255 Reserved
           </pre>
<p id="rfc.section.3.p.10">Note that in the context of this document, only the IPv4 case is covered. The definition of CONET protocols and procedures for IPv6 and for direct mapping into Ethernet are out of the scope.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#anchor-procedures" id="anchor-procedures">Procedures</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#anchor-interest" id="anchor-interest">Interest CONET Information Unit (Interest CIU)</a>
</h1>
<h1 id="rfc.section.4.1.1">
<a href="#rfc.section.4.1.1">4.1.1.</a> <a href="#anchor-interest-endnode" id="anchor-interest-endnode">Processing in the end node</a>
</h1>
<p id="rfc.section.4.1.1.p.1">An end-node that wants to retrieve a content (or better a Chunk of a content) issues an Interest CIU, the NID and the Chunk Sequence Number of the required Content are respectively transported in the Network Identifier (NID) field and in the CSN field of the CONET IP option. The end-node stores its IP address in CP path state field, initializing the pointer field. Assuming for simplicity that the Interest CIU will fit into a single Carrier Packet, the Interest CIU will be included in the Carrier Packet that in turn is inserted into an IP packet.  </p>
<p id="rfc.section.4.1.1.p.2">The end-node must now determine the destination IP address for the Carrier Packet. The end-node performs a routing-by-name, trying to associate the NID with a next hop (i.e. with the IP address of the next hop). The next hop can be the Serving Node (if the Serving node is in the same CONET subnet of the end-node) or a Border Node of the CONET subnet (if the Serving node is in a different CONET subnet). Typically the end-node does not participate to the routing-by-name protocols, therefore it cannot resolve the NID into the address of the next hop, but it has to ask a name server. The name server is a part of the so called Name System. Once this information is retrieved by the name server, the end-note can fill the IP destination address in the IP header and sends the packet. The end-node may cache the mapping (NID -&gt; next hop) into its memory as well.  </p>
<h1 id="rfc.section.4.1.2">
<a href="#rfc.section.4.1.2">4.1.2.</a> <a href="#anchor-interest-serving" id="anchor-interest-serving">Processing in the serving node</a>
</h1>
<p id="rfc.section.4.1.2.p.1">If the Serving Node is in the same CONET than the end-node, the serving node IP address will be used a destination IP address by the end-node. The Serving node will receive an IP packet directed to itself, whose IP protocol number is "CONET". Therefore the packet will be internally dispatched toward the "CONET entity" in the Serving Node. The CONET entity reads the CONET information unit type from the CONET IP options and recognizes that the received packet is an interest packet. Then it reads the NID and Chunk Sequence Number in the CONET IP option, the NID will correspond to a content provided by the Serving Node. The CONET entity will then process the CONET transport protocol information carried in the IP payload, which may for example specify a requested offset within the chunk. Finally the CONET entity will respond to the interest packet by sending the requested named-data CIU.  </p>
<h1 id="rfc.section.4.1.3">
<a href="#rfc.section.4.1.3">4.1.3.</a> <a href="#anchor-interest-border" id="anchor-interest-border">Processing in the border node</a>
</h1>
<p id="rfc.section.4.1.3.p.1">If the Serving Node is in a different CONET than the end-node, the address of a CONET border node will be used a destination IP address by the end-node. The border node will receive an IP packet directed to itself, whose IP protocol number is "CONET". Therefore the packet will be internally dispatched toward the "CONET entity" in the border node. The CONET entity reads the CONET information unit type from the CONET IP options and recognizes that the received packet is an interest packet. Then it reads the NID and Chunk Sequence Number in the CONET IP option and is able to understand which content and which part of the available content it needs to provide. If the Cache indication field is set to "No Cache" or if the field is set to "Cache" but the chunk is not available in the cache, the border node starts the routing-by-name process. It will resolve the next hop of the interest packet, which can be a serving node in a different CONET subnet (with respect to the one from which the interest packet was received) connected to the Border Node, or another Border Node in the path toward the serving node. Before sending out the packet, the border node adds its IP address in the CP Path State field and updates the pointer field. Note that these procedures needs to be performed in the "fast path" of the border node (in this case the CONET entity in the border node can be seen as an integral part of the enhanced IP protocol). If the Cache indication field is set to "Cache" and the border node has found that the chunk corresponding to the NID/CSN is available in its cache, the border node will process the CONET transport protocol information carried in the IP payload, which may for example specify a requested offset within the chunk and it will respond to the interest packet by sending the requested named-data CIU.  </p>
<h1 id="rfc.section.4.1.4">
<a href="#rfc.section.4.1.4">4.1.4.</a> <a href="#anchor-interest-intermediate" id="anchor-interest-intermediate">Processing in the intermediate node</a>
</h1>
<p id="rfc.section.4.1.4.p.1">When a packet is sent to the CONET next hop (as selected by the end node or by a border node) using the IP destination address of the next hop resolved by the routing-by-name, it can cross different IP routers in the path from the sending node and the next hop. A crossed router that is aware of the CONET IP option, is a CONET intermediate node. This node may have cached the the chunk that is requested by the interest packet. The intermediate node works as follows. When processing the IP header for the received packet, it finds that the packet contains the CONET IP option. If the Cache indication field is set to "No Cache", the intermediate node forwards the packet using the destination IP address. If the Cache indication field is set to "Cache", the intermediate node checks the presence of the chunk in its cache before forwarding the IP packet. Therefore, it reads the NID and Chunk Sequence Number in the CONET IP option and checks if the chunk is present in its cache. If the chunk is not present, the normal IP processing is continued. Note that these operations needs to be performed in the "fast path" of the router and they only require information that is transported in the IP option. If the chunk is present in the CONET router cache, the router will process the CONET transport protocol information carried in the IP payload, which may for example specify a requested offset within the chunk and it will respond to the interest packet by sending the requested named-data CIU.  </p>
<h1 id="rfc.section.4.1.5">
<a href="#rfc.section.4.1.5">4.1.5.</a> <a href="#anchor-interest-legacy" id="anchor-interest-legacy">Processing in the legacy routers</a>
</h1>
<p id="rfc.section.4.1.5.p.1">When a packet is sent to the CONET next hop (as selected by the end node or by a border node) using the IP destination address of the next hop resolved by the routing-by-name, it can cross different IP routers in the path from the sending node and the next hop. If a crossed router is a legacy router not aware of the CONET IP option, it will simply forward the packet looking at the IP destination address. Note that a requirement for such legacy router is to be configured not to drop IP packets carrying unidentified IP options.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#anchor-sec-named-data" id="anchor-sec-named-data">Named data CONET Information Unit (Named data CIU)</a>
</h1>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> <a href="#anchor-nd-serving" id="anchor-nd-serving">Processing in the responding node</a>
</h1>
<p id="rfc.section.4.2.1.p.1">The responding node is the node that is able to provide a content (identified by NID and Chunk Sequence Number) to a requesting end-node. Therefore the responding node can be a serving node which provides an original copy of the content, or a border node / intermediate node that provide a cached copy of the content. The responding node will use the Path State information contained in the received carrier packet carrying the Interest CIU to route back the carrier packets containing the named-data CIU towards the requesting end-node. In particular, it will use the pointer field to read the last address in the list and will use it as IP destination address for the Carrier packet carrying the named-data CIU. We can denote this address as "CONET previous hop". Then it will update the pointer field  so that the next node will use the previous address in the list. It may choose to strip the used address from the list in the CP Path state, thereby reducing the CP Path State field length.  </p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> <a href="#anchor-nd-border" id="anchor-nd-border">Processing in a border node</a>
</h1>
<p id="rfc.section.4.2.2.p.1">The border node will receive an IP packet directed to itself, whose IP protocol number is "CONET". Therefore the packet will be internally dispatched toward the "CONET entity" in the border node. The CONET entity reads the CONET information unit type from the CONET IP options and recognizes that the received packet is a named-data packet. Again, we stress that this processing should be performed in the fast path. Being a named-data packet, the border node will read the CP Path State field in the Carrier Packet and by using the pointer field will identify the CONET previous hop in the path towards the requesting end-node. Before sending out the packet, it will update the pointer field in the CP Path State field. The destination IP address of the packet will be set to the CONET previous hop retrieved from the CP Path State field. If the Cache indication bit in the IP option is set to "Cache", the border node may choose to cache the CIU that is transported by the carried packet. In this case, it is reccomended that the border node dispatches the packet as soon as possible and operates on a local copy to perform cache related operations.  </p>
<h1 id="rfc.section.4.2.3">
<a href="#rfc.section.4.2.3">4.2.3.</a> <a href="#anchor-nd-intermediate" id="anchor-nd-intermediate">Processing in an intermediate node</a>
</h1>
<p id="rfc.section.4.2.3.p.1">An intermediate node, i.e. a router in the path between a serving node or a border node and the CONET previous hop, which is aware of the CONET option, may decide to cache the named data CIU transported by a carrier packet. The intermediate node will receive an IP packet with an IP destination equal to the CONET previous hop and will immediately forward this packet using IP routing. Then, if the Cache indication bit in the IP option is set to "Cache", the intermediate node may choose to cache the CIU that is transported by the carried packet.  </p>
<h1 id="rfc.section.4.2.4">
<a href="#rfc.section.4.2.4">4.2.4.</a> <a href="#anchor-nd-legacy" id="anchor-nd-legacy">Processing in the legacy routers</a>
</h1>
<p id="rfc.section.4.2.4.p.1">When a packet is sent to the CONET previous hop (as selected by the serving node or by a border node) using the IP destination address of the previous hop obtained using the CP Path State information, it can cross different IP routers in the path from the sending node and the previous hop. If a crossed router is a legacy router not aware of the CONET IP option, it will simply forward the packet looking at the IP destination address. Note that a requirement for such legacy router is to be configured not to drop IP packets carrying unidentified IP options.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#anchor-route-by-name" id="anchor-route-by-name">Routing by name framework</a>
</h1>
<p id="rfc.section.5.p.1">The routing-by-name process is performed in the end-node and in border nodes in order to resolve a NID into the next hop towards a serving node for the given NID. This document provides a framework under which the routing-by-name procedures can be performed, and assures that different routing-by-name procedures and approaches may coexist. These different approaches needs to be separately specified. The format and the semantic of the NID may need to be specified when defining a specific routing-by-name approach. This is made possible by the concept of NID name space ID, which is carried within the NID.  </p>
<p id="rfc.section.5.p.2">The basic procedure that a routing-by-name framework needs to offer is called resolveNID, it takes as input the NID and returns the next_hop_address. This procedure is performed by end-nodes and by border nodes that are not able to provide a cached response for a content requested by an end node.  </p>
<p id="rfc.section.5.p.3">resolveNid (NID) -&gt; next_hop_address </p>
<p id="rfc.section.5.p.4">The tables on which the routing-by-name procedures are based are populated by serving nodes and by border nodes. The procedure is initiated by serving nodes that advertize the hosted content with the advertizeNID procedure. In turn, the procedure is replicated by the border nodes that spread the received advertising toward other border nodes. This procedure takes as input a NID, the address of the node performing the procedure, and the path information towards the serving node as seen by the node performing the procedure. Depending on the specific routing-by-name approach, the path information can be simply an hop count, or it could be the path list (as in the BGP AS-PATH).  </p>
<p id="rfc.section.5.p.5">advertizeNid (NID, node_address, path_info) </p>
<p id="rfc.section.5.p.6">In the following section we define two CONET default name spaces. It could be more appropriate that in future version of this document this specification is provided in a separate document.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#anchor-def-namespace" id="anchor-def-namespace">CONET default namespaces</a>
</h1>
<p id="rfc.section.6.p.1">We define two default NID name spaces for CONET, one is based on variable length strings as NID, as it was proposed in <a href="#Jacobson09">[Jacobson09]</a>, the second one is based on fixed length hashes. The two namespaces are assigned the following NID name space IDs.  </p>
<div id="#rfc.figure.14"></div>
<pre>

+----------------------------------------------------------------+
| Namespace ID |                                                 |
+----------------------------------------------------------------+
|        1     | VLL (Variable Length Label) NID namespace       |
+----------------------------------------------------------------+
|        2     | PLHB (Principal/Label Hash Based) NID namespace |
+----------------------------------------------------------------+

		   </pre>
<p id="rfc.section.6.p.2">In the VLL (Variable Length Label) CONET namespace the NID is simply the string representation of a resource. As described in <a href="#Jacobson09">[Jacobson09]</a> NIDs are hierarchically structured so that an individual name is composed of a number of components (see <a href="#Jacobson09">[Jacobson09]</a> for further details. An authority is needed to ensure the uniqueness of the NIDs. The approach should be similar on how the uniqueness of DNS names is granted in today's Internet.  </p>
<p id="rfc.section.6.p.3">In the Principal/Label Hash Based CONET namespace the NID is the composition of two hash values, as follows: </p>
<p id="rfc.section.6.p.4">NID = ( hash (Principal) , hash (Label) ) </p>
<p id="rfc.section.6.p.5">In the Principal/Label Hash Based CONET namespace the Hash(principal) is a 8 bytes hash of a string representing the Principal. The Label is a 6 bytes hash of a string representing the label. A central authority is needed to ensure the uniqueness of the Hash(principal), i.e. a Principal cannot be assigned if its hash collides with an already assigned hash. The Principal is responsible to ensuring that each Hash(Label) belonging to the Principal are unique. Therefore a Label cannot be used by a Principal if its hash collides with the Hash of an already used Label.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Acknowledgments</h1>
<p id="rfc.section.7.p.1">We acknowledge the financial support by the EU in the context of the CONVERGENCE research project.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#perf-consider" id="perf-consider">Performance Considerations</a>
</h1>
<p id="rfc.section.8.p.1">IP Options have often been criticized because their support in current routers would impose a performance penalty, but we can assume here that routers will be modified to support Content Centric Networking. Compared with "clean slate" approaches where CCN nodes could be completely different with respect to routers, we believe that we are able to provide all the functionality we need for Content Centric Networking, with reasonable modification in router architectures and preserving all the functionality of current IP networking.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.9.p.1">This document requires the allocation of one IP option by the IANA.</p>
<p id="rfc.section.9.p.2">This document requires the allocation of one IP protocol number by the IANA.</p>
<p id="rfc.section.9.p.3">This document requires that IANA will maintain the registry of CONET namespaces.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.10.p.1">Security considerations to be provided</p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC0791">[RFC0791]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc791">Internet Protocol</a>", STD 5, RFC 791, September 1981.</td>
</tr></tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Koponen07">[Koponen07]</b></td>
<td class="top">
<a>T. Koponen et al., </a>, "<a>A data-oriented (and beyond) network architecture</a>", Proc. of ACM SIGCOMM 2007 , 2007.</td>
</tr>
<tr>
<td class="reference"><b id="Jacobson09">[Jacobson09]</b></td>
<td class="top">
<a>V. Jacobson, et al., </a>, "<a>Networking named content</a>", Proc. of ACM CoNEXT 2009 , 2009.</td>
</tr>
<tr>
<td class="reference"><b id="CONET11">[CONET11]</b></td>
<td class="top">
<a>A. Detti, et al., </a>, "<a>CONET: A Content Centric Inter-Networking Architecture</a>", ACM SIGCOMM Workshop on Information-Centric Networking (ICN-2011), Toronto, Canada , August 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Andrea Detti</span> 
	  <span class="n hidden">
		<span class="family-name">Detti</span>
	  </span>
	</span>
	<span class="org vcardline">Univ. of Rome "Tor Vergata"</span>
	<span class="adr">
	  <span>Via del Politecnico, 1</span>

	  <span class="vcardline">
		<span class="locality">Rome</span>,  
		<span class="region"></span>
		<span class="code">00133</span>
	  </span>
	  <span class="country-name vcardline">Italy</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:andrea.detti@uniroma2.it">andrea.detti@uniroma2.it</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Stefano Salsano</span> 
	  <span class="n hidden">
		<span class="family-name">Salsano</span>
	  </span>
	</span>
	<span class="org vcardline">Univ. of Rome "Tor Vergata"</span>
	<span class="adr">
	  <span>Via del Politecnico, 1</span>

	  <span class="vcardline">
		<span class="locality">Rome</span>,  
		<span class="region"></span>
		<span class="code">00133</span>
	  </span>
	  <span class="country-name vcardline">Italy</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:stefano.salsano@uniroma2.it">stefano.salsano@uniroma2.it</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Nicola Blefari-Melazzi</span> 
	  <span class="n hidden">
		<span class="family-name">Blefari-Melazzi</span>
	  </span>
	</span>
	<span class="org vcardline">Univ. of Rome "Tor Vergata"</span>
	<span class="adr">
	  <span>Via del Politecnico, 1</span>

	  <span class="vcardline">
		<span class="locality">Rome</span>,  
		<span class="region"></span>
		<span class="code">00133</span>
	  </span>
	  <span class="country-name vcardline">Italy</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:blefari@uniroma2.it">blefari@uniroma2.it</a></span>

  </address>
</div>

</body>
</html>