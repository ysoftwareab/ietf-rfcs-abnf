

Internet Engineering Task Force                             H. Levkowetz
Internet-Draft                                               ipUnplugged
Expires: August 23, 2002                               February 22, 2002


                DHCP Option for Mobile IP Foreign Agents
                  <draft-levkowetz-dhc-mip-fa-00.txt>

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 23, 2002.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   This document defines a new Dynamic Host Configuration Protocol
   (DHCP) option which is passed from the DHCP Server to the DHCP Client
   to announce the presence of one or more Mobile IP Foreign Agents.
   For each announced Foreign Agent, information is provided which is
   the same as that of the Mobile IP Agent Advertisement extension to
   ICMP Router Advertisements.









Levkowetz                Expires August 23, 2002                [Page 1]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


Table of Contents

   1. Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . 3

   2. Requirements terminology . . . . . . . . . . . . . . . . . . . . 3

   3. Foreign Agent Option Definition  . . . . . . . . . . . . . . . . 3

   4. Foreign Agent Option Usage . . . . . . . . . . . . . . . . . . . 6

   5. Security Considerations  . . . . . . . . . . . . . . . . . . . . 6

   6. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . . 6

   7. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . 6
      References . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
      Author's Address . . . . . . . . . . . . . . . . . . . . . . . . 7
      Full Copyright Statement . . . . . . . . . . . . . . . . . . . . 8

































Levkowetz                Expires August 23, 2002                [Page 2]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


1. Introduction

   There already exists a DHCP option to announce Mobile IP Home Agent
   addresses, described in RFC 2132 [5].  There is, however, no option
   available to announce Mobile IP Foreign Agents.

   Announcement of available Mobile IP Foreign Agents by means of DHCP
   provides possibilities for selective and individual assignment of
   Foreign Agents to Mobile Nodes.  This in turn makes load-sharing and
   selective service offerings easier.  This draft describes a DHCP
   option for announcing Foreign Agents to DHCP Clients.

2. Requirements terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [3].

   The Mobile IP related terminology used in this document is described
   in RFC 3220 [8].

3. Foreign Agent Option Definition

   The Foreign Agent DHCP option contains the address of one or more
   foreign agents, together with all the information about the foreign
   agent which is normally found in a  Mobile IP Agent Advertisement
   extension to ICMP Router Advertisements as described in RFC 3220 [8].

   All fields are defined so as to correspond to fields of the same name
   in a Mobility Agent Advertisement Extension as described in RFC 3220
   [8], and if in the future additional bits are allocated from the
   'reserved' field for the Mobility Agent Advertisement Extension, they
   should be equally valid in a DHCP Foreign Agent option.

   This option may contain announcements of one or more Mobility Agents,
   in sequence.  Each Mobility Agent announcement will require 8+4N
   bytes, where N is the number of care-of addresses in the individual
   mobility agent announcement.  The number N may be different for each
   individual mobility agent announcement.  The total lenght is 4 + the
   aggregated length of the mobility agent announcements, where 4
   accounts for the Option code, Length and Reserved-0 fields.










Levkowetz                Expires August 23, 2002                [Page 3]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


   The format of the option is as follows:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Option code  |    Length     |          Reserved-0           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                  Mobility Agent IP Address                    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |  Adv-Length   |        Sequence Number        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |    Registration Lifetime      |R|B|H|F|M|G|r|T|   reserved    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                  zero or more care-of addresses               |
    |                              ...                              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |    zero or more additional mobility agent announcements       |
    |                              ...                              |

      Option code

               DHCP_FA_OPTION (to be assigned by IANA)

      Length   Length in bytes of this option, not including the Option
               code and Length bytes.

      Agent IP Address

               The address trough which the Mobile Node may reach the
               announced Foreign Agent in order to do a Mobile IP
               registration.

      Type     16.  This is the same value as for the type field in a
               Mobility Agent Advertisement Extension as described in
               RFC 3220 [8].  If other Mobility Agent Advertisement
               Extensions are defined in the future, this field will
               make it possible to differentiate between them without
               using new DHCP option numbers.

      Reserved-0

               Sent as zero; ignored on reception.

      Adv-Length

               (6 + 4*N), where 6 accounts for the number of bytes in
               the Sequence Number, Registration Lifetime, flags, and
               reserved fields, and N is the number of care-of addresses



Levkowetz                Expires August 23, 2002                [Page 4]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


               advertised for the Foreign Agent.

      Sequence Number

               The count of Foreign Agent DHCP announcements made since
               the DHCP server was initialized (RFC 3220, Section 2.3.2
               [8]).

      Registration Lifetime

               The longest lifetime (measured in seconds) that this
               agent is willing to accept in any Registration Request.
               A value of 0xffff indicates infinity.

      R        Registration required.  Registration with this foreign
               agent (or another foreign agent listed in this DHCP
               option) is required even when using a co-located care-of
               address.

      B        Busy.  The foreign agent will not accept registrations
               from additional mobile nodes.

      H        Home agent.  This agent offers service as a home agent on
               the link on which this mobility agent announcement is
               sent.

      F        Foreign agent.  This agent offers service as a foreign
               agent on the link on which this mobility agent
               announcement is sent.

      M        Minimal encapsulation.  This agent implements receiving
               tunneled datagrams that use minimal encapsulation [2].

      G        GRE encapsulation.  This agent implements receiving
               tunneled datagrams that use GRE encapsulation [1].

      r        Sent as zero; ignored on reception.  SHOULD NOT be
               allocated for any other uses.

      T        Foreign agent supports reverse tunneling [7].

      reserved

               Sent as zero; ignored on reception.

      Care-of Address(es)

               The foreign agent care-of address(es) provided by this



Levkowetz                Expires August 23, 2002                [Page 5]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


               foreign agent.  An DHCP Foreign Agent Announcement MUST
               include at least one care-of address if the 'F' bit is
               set.  The number of care-of addresses present is
               determined by the Length field in the Extension.


4. Foreign Agent Option Usage

   The DHCP Foreign Agent option MAY be used by a DHCP server in
   DHCPOFFER and DHCPACK messages.  It MAY be requested by a DHCP client
   in the Parameter Request List option, and if so, the DHCP server MAY
   respond with the Foreign Agent option present.

5. Security Considerations

   DHCP currently provides no authentication or security mechanisms.
   Potential exposures to attack are discussed is section 7 of the
   protocol specification RFC 2131 [4].

   Likewise, according to RFC 3220 [8], no authentication is required
   for Agent Advertisement and Agent Solicitation messages.

   By providing Agent Advertisements by means of DHCP as an alternative
   to extended ICMP Router Advertisement messages it is possible to do
   so more selectively, and it does not offer any new threat to the
   internet.

6. IANA Considerations

   The value for the DHCP_FA_OPTION code must be assigned from the
   numbering space defined for public DHCP Options in RFC 2939 [6].
   This must not conflict with any other numbers already allocated in
   this numbering space.

7. Acknowledgements

References

   [1]  Hanks, S., Li, T., Farinacci, D. and P. Traina, "Generic Routing
        Encapsulation (GRE)", RFC 1701, October 1994.

   [2]  Perkins, C., "Minimal Encapsulation within IP", RFC 2004,
        October 1996.

   [3]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [4]  Droms, R., "Dynamic Host Configuration Protocol", RFC 2131,



Levkowetz                Expires August 23, 2002                [Page 6]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


        March 1997.

   [5]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor
        Extensions", RFC 2132, March 1997.

   [6]  Droms, R., "Procedures and IANA Guidelines for Definition of New
        DHCP Options and Message Types", BCP 43, RFC 2939, September
        2000.

   [7]  Montenegro, G., "Reverse Tunneling for Mobile IP, revised", RFC
        3024, January 2001.

   [8]  Perkins, C., "IP Mobility Support for IPv4", RFC 3220, January
        2002.


Author's Address

   Henrik Levkowetz
   ipUnplugged AB
   Arenavagen 33
   Stockholm  S-121 28
   SWEDEN

   Phone: +46 8 725 9513
   EMail: henrik@levkowetz.com

























Levkowetz                Expires August 23, 2002                [Page 7]

Internet-Draft       DHCP Option for Foreign Agents        February 2002


Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Levkowetz                Expires August 23, 2002                [Page 8]

