Internet Engineering Task Force                 Jieyun (Jessica) Yu
INTERNET DRAFT                                CoSine Communications
Expires February, 2001                                 August, 2000


                IPv6 Multihoming with Route Aggregation
           draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt 

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt. The list of Internet-
   Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   Distribution of this memo is unlimited.

   Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   With the growing requirements for reliable Internet connectivity,
   increasing number of enterprises choose to acquire Internet
   connectivity from more than one Internet Service Providers (ISPs) for
   the purpose of connectivity redundancy and traffic load distribution.

   The potential of large number of multi-connection sites impose direct
   challenge on routing aggregation and consequently on scalability of
   the global Internet routing. Hence a solution is highly desirable
   which provides the benefit of multi-connection as well as the better
   scalability of the global routing system. In addition, such solution
   needs to be simple enough to be operationally manageable. With the
   fast growth of ISP networks as well as enterprise networks, network
   manageability is becoming an increasingly important requirement. This



Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 1]





Internet Draft  IPv6 Multihoming with Route Aggregation     August, 2000


   document describes a solution which achieves the stated goals.

1. Motivations

   With the growing requirements for reliable Internet connectivity,
   increasing number of enterprises choose to acquire Internet
   connectivity from more than one Internet Service Providers (ISPs) for
   the purpose of connectivity redundancy and traffic load distribution.

   This type of Internet connection arrangement is referred to as
   multihoming and such enterprise network is referred to as multi-homed
   site.

   Large numbers of Multi-homed sites impose a direct challenge on
   routing aggregation and consequently on global Internet routing
   scalability. As is well known, the keys to scaling of huge global
   Internet routing system including routing information abstraction and
   aggregation. The IPv6 unicast address format described in [1] enables
   the strategy of allocating a large block of IPv6 address space to a
   service provider and letting the service provider further assign
   sub-blocks of the IP addresses to its customers. This provider based
   IP address assignment strategy makes it possible for route
   aggregation at the provider level and thus facilitates the scaling of
   the global Internet routing system.

   However, the current common mechanism to route to a multi-homed site
   is to make the route specifically associated with the site visible in
   the global Internet routing system. This practice prevents route
   aggregation at the provider level and imposes challenge to a scalable
   global routing. Therefore, a solution is needed for IPv6 multihoming
   which provides the desired benefits of a multihoming connection such
   as redundancy and load sharing, and at the same time, enables better
   scaling of the global global routing system. In addition, such a
   solution needs to be simple enough to be operationally manageable.
   With the fast growth of ISP networks as well as enterprise networks,
   network manageability is becoming an increasingly important
   requirement. In today's Internet, manageability of a solution should
   be one of the top considerations.

   This document describes a scheme that supports IPv6 multihoming and
   also achieves the followings:

      a. Providing redundancy and load sharing for the multi-homed sites

      b. Facilitating the scalability of the global IPv6 Internet
      routing table

      c. Simple and operationally manageable



Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 2]





Internet Draft  IPv6 Multihoming with Route Aggregation     August, 2000


   This mechanism is a routing approach for multihoming. It uses
   existing routing protocol and implementation thus no new protocol or
   changes are needed.

   The mechanism described in this document can also be applied to IPv4
   Internet.

2. The Multihoming Mechanism

   Multihoming connections in general can be categorized into two
   different types: a) a site multi-homed to a single ISP, commonly at
   different geography locations and b) a site multi-homed to more than
   one ISPs.

   In scenario a), the specific routes associated with the multihomed
   site will not be visible outside of the particular ISP network and
   thus there is no real impact on the global routing. Therefore, no
   special mechanism is needed for multihoming in this scenario. The
   mechanism described in this document addresses the situation of a
   multi-homed site connects to more than one ISPs.

   The mechanism is described with an example of a multi-homed site with
   two ISPs connections since two-connection multihoming represents the
   majority of the multihoming cases and it simplifies the discussion.
   The mechanism, however, can be extended to apply to multi-homed sites
   with more than two ISP connections.

2.1. Address Assignment

   To obtain IP addresses, a multi-homed site will designate one of its
   ISPs as its primary ISP and receive IP address assignment from the
   primary ISP's IPv6 aggregation block.

   Figure-1 illustrates an example of a multi-homed site (Customer-A)
   with connectivity to ISP-1 and ISP-2. ISP-1 is chosen as the primary
   ISP for customer-A and assigns Addr-1-A from its address block
   (Addr-1) to the customer.



                              ISP-3 ---- ISP-4
                                |      /  |
                                |    /    |
                                |  /      |
                              ISP-1 ---- ISP-2
                                \        /
                         link-1  \      /  link-2
                                 Customer-A



Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 3]





Internet Draft  IPv6 Multihoming with Route Aggregation     August, 2000


                      Figure 1: Example of Multihomed Site

2.2. Routing

   In order for Internet traffic destinated to Customer-A to reach the
   targeted destinations, Customer-A will advertise addr-1-A to ISP-1
   and ISP-2 respectively. ISP-2 will advertise Addr-1-A to ISP-1 and to
   ISP-1 only. ISP-1 will, of course, advertise its own aggregation
   Addr-1 to the entire Internet.

   As a result of this routing advertisement, inbound traffic destinated
   to Customer-A and originating within ISP-1 or ISP-2 will be forwarded
   to Customer-A using link-1 or link-2 respectively. Traffic originated
   from anywhere else in the Internet will first be forwarded to ISP-1
   since it advertises the route to Addr-1 which contains Addr-1-A.
   ISP-1 will then forward the traffic destined to Customer-A via its
   connection(s) to ISP-2 and/or via its direct link to customer-A,
   according to the preset routing polices. The commonly used policy is
   to use the shortest exit by utilizing IGP metric as a tier break in
   BGP route selection process. By using both connections to forward
   traffic to Customer-A, load sharing among the multiple links used by
   Customer-A for connecting to the Internet is achieved.

   For outbound traffic originated from Customer-A, ISP-1 and ISP-2
   would announce default route and/or a selected set of specific
   prefixes to Customer-A based on the requirements of Customer-A. As a
   result of the advertisement, traffic originated from Customer-A to
   the Internet will be forwarded accordingly and load sharing can be
   accomplished.

   In the aspect of redundancy, when the link between customer-A and
   ISP-2 (link-2 in Figure 1) fails, all traffic will go in and out via
   the connection between Customer-A and ISP-1 (i.e. via link-1 as shown
   in Figure 1). Likewise, when link-1 is experiencing an outage, link-2
   will be used for transmitting the traffic. This is because ISP-1 will
   continue announcing its aggregate block Addr-1 to the entire Internet
   and ISP-2 will still advertise Addr-1-A to ISP-1. All of the inbound
   traffic to the customer will utilize link-2 by taking the path of
   ISP-1 -> ISP-2 -> Customer-A. Outbound traffic from Customer-A will
   automatically fall to link-2. This way, when one of the two links
   fails, the other will be used for traffic in and out from the multi-
   homed site. Redundancy is thus accomplished.

   As one would observe, with this mechanism, the specific route
   associated with the multi-homed site is only visible to ISP-1 and
   ISP-2 in the example. Only the multi-homed sites directly connected
   ISPs, not the rest of the Internet will have to obtain the specific
   route(s) associated with a multi-homed site. This results in better



Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 4]





Internet Draft  IPv6 Multihoming with Route Aggregation     August, 2000


   scaling of the global Internet routing.

   The same mechanism can be extended to sites multihoming to more than
   two ISPs. Again, only those ISPs that the customer directly connected
   to would carry the more specific prefix assigned to the multi-homed
   customer.

3. Discussions


   Characteristics of a multihoming mechanism described in this document
   include:

      - Improved scaling of the global routing system without loosing
      the benefits expected from multihoming.

      - Does not require new protocol or routing software changes to
      deploy the scheme.

      - Simple and thus manageable. In addition, operationally, it has
      less chances of generating errors compared to more complicated
      solutions.

      - Due to its simpleness, the requirement of having sophisticated
      network administrator onsite is greatly reduced, which can be an
      attractive choice for a variety of multi-homed sites.

      - The primary ISP of a multi-homed site such as ISP-1 in Figure-1
      would need to do more work in terms of distributing traffic among
      the other ISP the multi-homed site directly connect to and its
      direct link to the site. It will also carry more traffic for the
      multi-homed customer. However, this can be considered as a value
      added service from the ISP to the customer and the primary ISP
      could charge for such services accordingly.

      - If the two involved ISPs has no direct connection, the more
      specific route associated with the multi-homed site would need to
      be carried by other ISP(s) in the path thus it would result in
      less effective aggregation. However, it seems to be lesser of a
      problem since ISP assigned with an Internet visible aggregate
      block or Top Level Aggregator (TLA) usually are top tiered ISPs
      and all such ISPs generally have direct connections to each other
      either via private peering or public peering points.

      - The primary ISP is the sole interface for the multi-homed
      customer to the Internet with the exception of the ISPs the
      customer has direct connection with. Outages such as one between
      ISP-1 and ISP-4 in Figure-1 would impact the reachability from



Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 5]





Internet Draft  IPv6 Multihoming with Route Aggregation     August, 2000


      customers of ISP-4 to Customer-A even though ISP-2 still has good
      connection to ISP-4.

   However, if the primary ISP is a good quality ISP, this sort of
   situation should rarely happen. It's common practice that an ISP,
   especially a good quality one, to have multiple connections to other
   big ISPs at different geographical locations. Good quality ISPs also
   have robust internal network design to prevent any failure from
   impacting the entire network. Choosing a good quality ISP as primary
   ISP is a good practice for multi-homed sites adopting this solution.

4. Conclusions

   It wouldn't be hard to understand that even those enterprises
   desiring multiple Internet connections may have different criteria
   and resource constraints for implementing such connection. Some may
   require absolute redundancy while most may only desire reasonable
   redundancy. This document offers a viable multihoming solution for an
   enterprise to choose based on its particular requirements and
   constraints. The multihoming mechanism described in this document is
   applicable to various multihoming scenarios, the most suitable
   environment for deploying it are:

      a. ISPs serving the multi-homed site have direct connection(s) to
      each other. Although such direct connection is not required, it
      would make arrangement simpler and will also improve aggregation
      by limiting specific routes visible only to ISPs serving the
      multi-homed site.

      b. Enterprises with requirements for good redundancy but not
      absolute redundancy.

      c. Enterprises with limited to resource for onsite sophisticated
      network administrators

      d. Enterprises able to choose a robust ISP as primary provider.

   Although not the main focus, the mechanism described in this document
   can also be used to improve routing scalability within networks
   shares one aggregation block or Top Level Aggregator (TLA).

5. Security Considerations

   BGP security applies to the work presented. No added security risk is
   known.

6. Acknowledgements




Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 6]





Internet Draft  IPv6 Multihoming with Route Aggregation     August, 2000


   Many thanks to Guy Davis, Robert J. Rockell and Akira Kato for their
   insightful comments.

7. Reference

   [1] R. Hinden, M. O'Dell and S. Deering, "An IPv6 Aggregatable Global
   Unicast Address Format." RFC2374, July 1998. ftp://ftp.isi.edu/in-
   notes/rfc2374.txt

8. Author's Address

   Jieyun (Jessica) Yu
   CoSine Communications
   1200 Bridge Parkway
   Redwood City, CA 94065

   Email: jyy@cosinecom.com


































Yu         draft-ietf-ipngwg-ipv6multihome-with-aggr-01.txt     [Page 7]


