<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Interface description with WADL in CoRE</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Requirements Language">
<link href="#rfc.section.3" rel="Chapter" title="3 WADL in a CoRE environment">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 CoAP adaptations">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Methods">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Status code">
<link href="#rfc.section.3.1.3" rel="Chapter" title="3.1.3 HTTP header parameters">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 CoRE resources">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Semantic description">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Binary XML format">
<link href="#rfc.section.4" rel="Chapter" title="4 Use cases">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 WADL resource type identifiers">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Description of query parameters">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Interface description and associated semantic">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Collection of resources">
<link href="#rfc.section.5" rel="Chapter" title="5 Acknowledgements">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document provides guidelines to use the Web Application Description Language (WADL) in Constrained RESTful environments.  The document mainly focuses on how to combine WADL with the CoRE Link Format to describe a REST interface." />
  <meta name="description" content="This document provides guidelines to use the Web Application Description Language (WADL) in Constrained RESTful environments.  The document mainly focuses on how to combine WADL with the CoRE Link Format to describe a REST interface." />
  <meta name="keywords" content="WADL, REST, M2M, Web linking" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Constrained RESTful Environments</td>
<td class="right">M.V. Vial</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Schneider-Electric</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">Z. Shelby</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Sensinode</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Sept 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Interface description with WADL in CoRE<br />
  <span class="filename">draft-vial-core-link-format-wadl-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document provides guidelines to use the Web Application Description Language (WADL) in Constrained RESTful environments.  The document mainly focuses on how to combine WADL with the CoRE Link Format to describe a REST interface.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Requirements Language</a>
</li>
<li>3.   <a href="#rfc.section.3">WADL in a CoRE environment</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">CoAP adaptations</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">Methods</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Status code</a>
</li>
<li>3.1.3.   <a href="#rfc.section.3.1.3">HTTP header parameters</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">CoRE resources</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Semantic description</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Binary XML format</a>
</li>
<li>4.   <a href="#rfc.section.4">Use cases</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">WADL resource type identifiers</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Description of query parameters</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Interface description and associated semantic</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Collection of resources</a>
</li>
<li>5.   <a href="#rfc.section.5">Acknowledgements</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The Constrained RESTful Environments (CoRE) working group aims at providing a comprehensive suite of standards that will make it possible to build a REST architecture for M2M applications with highly constrained nodes and networks.</p>
<p id="rfc.section.1.p.2">The <a href="#I-D.ietf-core-link-format">CoRE Link Format</a> <cite title="NONE">[I-D.ietf-core-link-format]</cite> which is part of this suite defines a format to be used by CoAP servers to list hosted resources using the Web linking technique defined in <a href="#RFC5988">RFC 5988</a> <cite title="NONE">[RFC5988]</cite>. More specically the 'if' attribute of Link Format allows an interface designer indicate a description of the behavior, the parameters, the representation and eventually the set of sub-resources associated to a given CoRE resource. One way to describe the interface to a resource is using the Web Application Description Language (WADL).</p>
<p id="rfc.section.1.p.3">The first part of this document will explain how to benefit from WADL to describe the REST interface of CoRE resources. Then the second part of the document will show how the previous guidelines are applied in different use cases.</p>
<p id="rfc.section.1.p.4">The reader should keep in mind that this document does not suggest in any way constrained nodes would be able to retrieve and parse a WADL description. The interface description is rather considered as documentation with a standard and machine-processable language that will help implementors to understand an interface and eventually generate stub code.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Requirements Language</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#wadl_core" id="wadl_core">WADL in a CoRE environment</a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#adaptation" id="adaptation">CoAP adaptations</a>
</h1>
<p id="rfc.section.3.1.p.1">The WADL language is primilarily designed to describe HTTP-based web applications. WADL is not strongly tied to the <a href="#RFC2616">HTTP protocol</a> <cite title="NONE">[RFC2616]</cite> and any HTTP-like web protocol can be described with WADL. In a CoRE environment the <a href="#I-D.ietf-core-coap">CoAP protocol</a> <cite title="NONE">[I-D.ietf-core-coap]</cite> is deployed in place of the HTTP protocol as an optimized web transfer protocol. An interface designer must take into consideration the specifity of CoAP while writing the WADL definition.</p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> <a href="#methods" id="methods">Methods</a>
</h1>
<p id="rfc.section.3.1.1.p.1">CoAP only supports a subset of HTTP methods. So a WADL description deployed in a CoRE environment MUST only make use of methods available in CoAP namely GET, PUT, POST and DELETE.</p>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> <a href="#status" id="status">Status code</a>
</h1>
<p id="rfc.section.3.1.2.p.1">CoAP decorrelates the response code representation from the actual value of the code.  Hence the response code 2.00 has the value 64. When a CoAP response code is associated to the description of a response in WADL, it is RECOMMENDED to use the response code labels.</p>
<h1 id="rfc.section.3.1.3">
<a href="#rfc.section.3.1.3">3.1.3.</a> <a href="#http_header" id="http_header">HTTP header parameters</a>
</h1>
<p id="rfc.section.3.1.3.p.1">CoAP does not support user-defined options in the base specification.  So as a rule of thumb, header parameters are discouraged with CoAP.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#resources" id="resources">CoRE resources</a>
</h1>
<p id="rfc.section.3.2.p.1">The WADL language describes a REST resource with a resource element which associates a REST behavior to a URI. WADL offers language elements to describe the following aspects of a REST behavior: allowed methods, query string parameters, media type of the request and response content, URI of the resource and the subordinate resources. The description of the behavior can either be a reference to a resource_type element or child elements if the description is inline.</p>
<p id="rfc.section.3.2.p.2">When WADL is combined with the CoRE Link Format it is RECOMMENDED to write definitions with resource_type elements. Then a Web link can reference a resource_type with the Interface Description 'if' attribute.  So a Web link plays the same role as the resource element of WADL in the sense that the Web link instantiates a resource_type by linking it to an URI.</p>
<p id="rfc.section.3.2.p.3">Because the resource_type element is referenced outside of the WADL description, the rules of section 2.5.1 in <a href="#wadl">WADL</a> <cite title="NONE">[wadl]</cite> are not applicable. Instead the target URI of the Web link where the resource_type element is referenced MUST be used as the base URI to construct each child resource identifiers.</p>
<p id="rfc.section.3.2.p.4">The 'if' attribute of a Web link SHOULD reference a resource_type AND a WADL document to avoid potential ambiguities. resource_type elements are identified by their XML id.  The 'if' attribute MAY take the form of an URI. The path of the URI specify the WADL document while the fragment part of the URI points to a resource_type. The full URI notation may add significant overhead in a link format description thus several formats are acceptable depending on the risk of identifier conflicts. Here are few examples of 'if' attributes.</p>
<p></p>

<ul>
<li>http://www.example.org/interface.wadl#resourceType</li>
<li>interface.wadl#resourceType</li>
<li>resourceType</li>
</ul>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#semantic" id="semantic">Semantic description</a>
</h1>
<p id="rfc.section.3.3.p.1">The main goal of the WADL description in a CoRE environment is to describe the actions that can be performed on a REST resource. The WADL document may include a grammar element with a schema to offer a detailed description of data representations hence semantically refining the description.  But this mechanism is not applicable to all data representations especially if the data is not XML-based. Moreover the interface description is not meant to be directly interpreted by CoRE nodes. Thus it is RECOMMENDED to associate the semantic description of a resource with a resource type 'rt' attribute without relying only on the 'if' attribute. This separation of concerns allows an interface designer to reuse the same interface description for resources that grasp different concepts.</p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#binary_xml" id="binary_xml">Binary XML format</a>
</h1>
<p id="rfc.section.3.4.p.1">Because CoRE deals with constrained networks, traditional XML data representations may be superseded with a more compact format for the XML information set.  <a href="#exi">Efficient XML Interchange</a> <cite title="NONE">[exi]</cite> is an example of such binary XML format which heavily relies on a XML schema to achieve the best compression performances.  The schema identifier can be carried inline with the binary stream or specified out-of-band. If there is no schema identifier present in the data stream but the WADL definition of the representation has a reference to grammar element, one MUST assume that the data stream is schema-informed.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#usecases" id="usecases">Use cases</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#uc_identifier" id="uc_identifier">WADL resource type identifiers</a>
</h1>
<p id="rfc.section.4.1.p.1">Let's consider an organization which has defined two application profiles in two separate WADL documents. The first profile targets Home Automation applications while the second deals with Energy Management. One CoRE device may implement REST services from both profiles.</p>
<p id="rfc.section.4.1.p.2">The WADL descriptions are versioned to support future evolutions of the interface. The profiles have a class/type structure with a dot notation for REST resource types. They also share some concepts but with different implementations. <a href="#figure1">Figure 1</a> and <a href="#figure2">Figure 2</a> are short extracts of possible WADL descriptions for such profiles.</p>
<div id="#rfc.figure.1"></div>
<div id="#figure1"></div>
<pre>
&lt;application xmlns="http://wadl.dev.java.net/2009/02"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://wadl.dev.java.net/2009/02 wadl.xsd"&gt;
  &lt;resource_type id="sensor.temperature"&gt;
    &lt;method name="GET"&gt;
      &lt;doc&gt;GetTemperature&lt;/doc&gt;
      &lt;response&gt;
        &lt;representation mediaType="text/plain" /&gt;
      &lt;/response&gt;
    &lt;/method&gt;
  &lt;/resource_type&gt;
  &lt;resource_type id="parameter.threshold"&gt;
    &lt;method name="PUT"&gt;
      &lt;doc&gt;SetThreshold&lt;/doc&gt;
      &lt;request&gt;
        &lt;representation mediaType="text/plain" /&gt;
      &lt;/request&gt;
    &lt;/method&gt;
 &lt;/resource_type&gt;
&lt;/application&gt;
            </pre>
<p>Home Automation WADL sample (ha1.wadl)</p>
<div id="#rfc.figure.2"></div>
<div id="#figure2"></div>
<pre>
&lt;application xmlns="http://wadl.dev.java.net/2009/02"
xmlns:em2="http://www.example.org/EnergyManagement/2"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://wadl.dev.java.net/2009/02 wadl.xsd"&gt;
  &lt;grammars&gt;
    &lt;include href="http://www.example.org/EnergyManagement/2/em2.xsd"/&gt;
  &lt;/grammars&gt;
  &lt;resource_type id="meter.power"&gt;
    &lt;method name="GET"&gt;
      &lt;doc&gt;GetPower&lt;/doc&gt;
      &lt;response&gt;
      &lt;representation mediaType="application/xml" element="em2:Power"/&gt;
      &lt;/response&gt;
    &lt;/method&gt;
  &lt;/resource_type&gt;
  &lt;resource_type id="parameter.threshold"&gt;
    &lt;method name="PUT"&gt;
      &lt;doc&gt;SetThreshold&lt;/doc&gt;
      &lt;request&gt;
  &lt;representation mediaType="application/xml" element="em2:Threshold"/&gt;
      &lt;/request&gt;
    &lt;/method&gt;
  &lt;/resource_type&gt;
&lt;/application&gt;
            </pre>
<p>Energy Management WADL sample (em2.wadl)</p>
<p id="rfc.section.4.1.p.3">In a home network, the devices share the same infrastructure but usually come from different vendors and may implement many application profiles. In this context it is useful to reference a WADL interface with an absolute URI.</p>
<div id="#rfc.figure.3"></div>
<pre>
REQ: GET /.well-known/core
RES: 2.00 OK
&lt;/tmp&gt;;rt="AirTemperature";
if="http://www.example.org/ha1.wadl#sensor.temperature",
&lt;/tmp/thr&gt;;rt="TemperatureAlarm";
if="http://www.example.org/ha1.wadl#parameter.threshold"
&lt;/pwr&gt;;rt="PowerConsumption";
if="http://www.example.org/em2.wadl#meter.power",
&lt;/pwr/thr&gt;;rt="PowerAlarm";
if="http://www.example.org/em2.wadl#parameter.threshold"
            </pre>
<p id="rfc.section.4.1.p.4">If a deployment of devices is known to implement only REST services from one organization the resource_type identifiers may be shortened. It is however indispensable to clearly indicate a WADL document because the resource_type identifiers are only unique within a single WADL document. The example below reflects how these assumptions are actually applied.</p>
<div id="#rfc.figure.4"></div>
<pre>
REQ: GET /.well-known/core
RES: 2.00 OK
&lt;/tmp&gt;;rt="AirTemperature";if="ha1.wadl#sensor.temperature",
&lt;/tmp/thr&gt;;rt="TemperatureAlarm";if="ha1.wadl#parameter.threshold"
&lt;/pwr&gt;;rt="PowerConsumption";if="em2.wadl#meter.power",
&lt;/pwr/thr&gt;;rt="PowerAlarm";if="em2.wadl#parameter.threshold"
            </pre>
<p id="rfc.section.4.1.p.5">If the network is dedicated to a specific application profile it is acceptable to omit the reference to the WADL description which is supposed to be known out-of-band. Web links may have the following format:</p>
<div id="#rfc.figure.5"></div>
<pre>
REQ: GET /.well-known/core
RES: 2.00 OK
&lt;/tmp&gt;;rt="AirTemperature";if="sensor.temperature",
&lt;/thr&gt;;rt="TemperatureAlarm";if="parameter.threshold"
            </pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#uc_query" id="uc_query">Description of query parameters</a>
</h1>
<p id="rfc.section.4.2.p.1">A typical usage of WADL is to provide a detailed description of how a client can build the query string component of a URI to access a parametrized resource. Below is an example that describes how a client can select the unit for a temperature sensor.</p>
<div id="#rfc.figure.6"></div>
<div id="#figure3"></div>
<pre>
&lt;application xmlns="http://wadl.dev.java.net/2009/02"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://wadl.dev.java.net/2009/02 wadl.xsd"&gt;
  &lt;resource_type id="sensor.temperature"&gt;
    &lt;method name="GET"&gt;
      &lt;doc&gt;GetTemperature&lt;/doc&gt;
      &lt;request&gt;
        &lt;param name="unit" style="query" default="C" required="no"&gt;
          &lt;option value="C"&gt;&lt;doc&gt;Celsius&lt;/doc&gt;&lt;/option&gt;
          &lt;option value="K"&gt;&lt;doc&gt;Kelvin&lt;/doc&gt;&lt;/option&gt;
          &lt;option value="F"&gt;&lt;doc&gt;Farenheit&lt;/doc&gt;&lt;/option&gt;
        &lt;/param&gt;
      &lt;/request&gt;
      &lt;response&gt;
        &lt;representation mediaType="text/plain" /&gt;
      &lt;response&gt;
    &lt;/method&gt;
  &lt;/resource_type&gt;
&lt;/application&gt;
            </pre>
<p>Definition of an optional query string</p>
<p id="rfc.section.4.2.p.2">This description give information about four valid URIs that are exposed in the following CoAP exchange.</p>
<div id="#rfc.figure.7"></div>
<pre>
REQ: GET /.well-known/core
RES: 2.00 OK
&lt;/tmp&gt;;if="sensor.temperature"

REQ: GET /tmp
RES: 2.00 OK
20

REQ: GET /tmp?unit=C
RES: 2.00 OK
20

REQ: GET /tmp?unit=K
RES: 2.00 OK
293.15

REQ: GET /tmp?unit=F
RES: 2.00 OK
68
            </pre>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#uc_semantic" id="uc_semantic">Interface description and associated semantic</a>
</h1>
<p id="rfc.section.4.3.p.1">The same interface description can often be reused for similar but distinct concepts. For example a temperature sensor may be able to produce the traditional air temperature but also the effective temperature which is a combination of air temperature and wind speed. Then the definition in <a href="#figure3">Figure 6</a> is valid for both concepts and the device description could look like depicted below.</p>
<div id="#rfc.figure.8"></div>
<pre>
REQ: GET /.well-known/core
RES: 2.00 OK
&lt;/tmp&gt;;rt="DryBulbTemperature";if="sensor.temperature",
&lt;/eff&gt;;rt="EffectiveTemperature";if="sensor.temperature"
            </pre>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#uc_collection" id="uc_collection">Collection of resources</a>
</h1>
<p id="rfc.section.4.4.p.1">Repeating an interface definition attribute with the same identifier for a collection of resources is especially inefficient and laborious with link format. Hopefully WADL supports templated path definitions to describe sub-resources. The template style of parameters allows an interface designer to specify the dynamic path elements of a URI thanks to a curly brace notation.  It is also possible to precisely determine the data type associated to a variable path element. Below is an example of how a list of pending alarms can be described with this feature.</p>
<div id="#rfc.figure.9"></div>
<div id="#figure4"></div>
<pre>
&lt;application xmlns="http://wadl.dev.java.net/2009/02"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:app="http://www.example.org/2011/app"
xsi:schemaLocation="http://wadl.dev.java.net/2009/02 wadl.xsd"&gt;
  &lt;grammars&gt;
    &lt;include href="http://www.example.org/2011/app/app.xsd"/&gt;
  &lt;/grammars&gt;
  &lt;resource_type id="list.alarms"&gt;
    &lt;method name="GET"&gt;
      &lt;doc&gt;GetAlarmList&lt;/doc&gt;
      &lt;response&gt;
        &lt;representation mediaType="application/link-format"/&gt;
      &lt;/response&gt;
    &lt;/method&gt;
    &lt;method name="POST"&gt;
      &lt;doc&gt;AddAlarm&lt;/doc&gt;
      &lt;request&gt;
        &lt;representation mediaType="application/xml" 
            element="Alarm"/&gt;
      &lt;/request&gt;
    &lt;/method&gt;
    &lt;resource path="{alarmId}"&gt;
      &lt;param name="alarmId" style="template" type="xsd:int"/&gt;
      &lt;method name="GET"&gt;
        &lt;doc&gt;GetAlarm&lt;/doc&gt;
        &lt;response&gt;
          &lt;representation mediaType="application/xml" 
              element="app:Alarm"/&gt;
        &lt;/response&gt;
      &lt;/method&gt;
      &lt;method name="DELETE"&gt;
        &lt;doc&gt;RemoveAlarm&lt;/doc&gt;
        &lt;request&gt;
        &lt;/request&gt;
      &lt;/method&gt;
    &lt;/resource&gt;
  &lt;/resource_type&gt;
&lt;/application&gt;
            </pre>
<p>Definition of a collection of resources</p>
<p id="rfc.section.4.4.p.2">Then the resource_type is referenced only once but provides an interface description for the whole collection of resources.</p>
<div id="#rfc.figure.10"></div>
<pre>
REQ: GET /.well-known/core
RES: 2.00 OK
&lt;/tmp&gt;;rt="DryBulbTemperature";if="sensor.temperature",
&lt;/alrm&gt;;rt="TemperatureAlarms";if="list.alarms",

REQ: GET /alrm
RES: 2.00 OK
&lt;/alrm/1&gt;,
&lt;/alrm/2&gt;

REQ: GET /alrm/1
RES: 2.00 OK
&lt;Alarm time="" type="GreaterThan" threshold="28" /&gt;
            </pre>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.5.p.1">Thanks to Linyi Tian for its feedback on the document.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This document requests no actions from IANA.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This document has no known security implications.</p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="wadl">[wadl]</b></td>
<td class="top">
<a title="Sun Microsystems Inc.">Hadley, M.J.H</a>, "<a>Web Application Description Language (WADL)</a>", 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</b></td>
<td class="top">
<a>Shelby, Z</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-link-format-09">CoRE Link Format</a>", Internet-Draft draft-ietf-core-link-format-09, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-core-coap">[I-D.ietf-core-coap]</b></td>
<td class="top">
<a>Shelby, Z</a>, <a>Hartke, K</a>, <a>Bormann, C</a> and <a>B Frank</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-coap-08">Constrained Application Protocol (CoAP)</a>", Internet-Draft draft-ietf-core-coap-08, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5988">[RFC5988]</b></td>
<td class="top">
<a>Nottingham, M.</a>, "<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>", RFC 5988, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="exi">[exi]</b></td>
<td class="top">
<a>W3C</a>, "<a>Efficient XML Interchange (EXI) Format 1.0</a>", 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr></tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthieu Vial</span> 
	  <span class="n hidden">
		<span class="family-name">Vial</span>
	  </span>
	</span>
	<span class="org vcardline">Schneider-Electric</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Grenoble</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">FRANCE</span>
	</span>
	<span class="vcardline">Phone: +33 (0)47657 6522</span>

<span class="vcardline">EMail: <a href="mailto:matthieu.vial@schneider-electric.com">matthieu.vial@schneider-electric.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Zach Shelby</span> 
	  <span class="n hidden">
		<span class="family-name">Shelby</span>
	  </span>
	</span>
	<span class="org vcardline">Sensinode </span>
	<span class="adr">
	  <span>Kidekuja 2</span>

	  <span class="vcardline">
		<span class="locality">Vuokatti</span>,  
		<span class="region"></span>
		<span class="code">88600</span>
	  </span>
	  <span class="country-name vcardline">FINLAND</span>
	</span>
	<span class="vcardline">Phone: +358407796297</span>

<span class="vcardline">EMail: <a href="mailto:zach@sensinode.com">zach@sensinode.com</a></span>

  </address>
</div>

</body>
</html>