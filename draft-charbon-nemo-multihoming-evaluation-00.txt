

NEMO Working Group                                            J. Charbon
Internet-Draft                            Keio university, Louis Pasteur
Expires: December 30, 2003                           university and WIDE
                                                                 C-W. Ng
                                                Panasonic Singapore Labs
                                                              K. Mitsuya
                                                                T. Ernst
                                                Keio university and WIDE
                                                            July 1, 2003


         Evaluating Multi-homing Support in NEMO Basic Solution
              draft-charbon-nemo-multihoming-evaluation-00

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 30, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

Abstract

   This draft describes and explains prerequisites for NEMO Basic to
   support Multi-homing.  We study those prerequisites with respect to
   each case of a taxonomy proposed to the NEMO WG and we analyze how
   the NEMO basic support solution fits with them.  The analysis of each
   case listed in this taxonomy is broken into three parts,
   prerequisites, comments, and solution behaviors.



Charbon, et al.        Expires December 30, 2003                [Page 1]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
   1.1 Context and Motivations  . . . . . . . . . . . . . . . . . . .  4
   1.2 Terms and Abbreviations  . . . . . . . . . . . . . . . . . . .  4
   1.3 Multi-Homing & Support levels  . . . . . . . . . . . . . . . .  4
   1.4 Organization . . . . . . . . . . . . . . . . . . . . . . . . .  5

   2.  Case (0,0,0) . . . . . . . . . . . . . . . . . . . . . . . . .  7
   2.1 Prerequisites  . . . . . . . . . . . . . . . . . . . . . . . .  7
   2.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . .  8
   2.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 10

   3.  Case (1,0,0) . . . . . . . . . . . . . . . . . . . . . . . . . 12
   3.1 Prerequisites  . . . . . . . . . . . . . . . . . . . . . . . . 12
   3.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
   3.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 13

   4.  Case (0,1,0) . . . . . . . . . . . . . . . . . . . . . . . . . 14
   4.1 Prerequisites  . . . . . . . . . . . . . . . . . . . . . . . . 14
   4.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
   4.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 16

   5.  Case (1,1,0) . . . . . . . . . . . . . . . . . . . . . . . . . 17
   5.1 Prerequisites  . . . . . . . . . . . . . . . . . . . . . . . . 17
   5.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
   5.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 17

   6.  Case (0,0,1) . . . . . . . . . . . . . . . . . . . . . . . . . 18
   6.1 Prerequisites  . . . . . . . . . . . . . . . . . . . . . . . . 18
   6.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
   6.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 18

   7.  Case (1,0,1) . . . . . . . . . . . . . . . . . . . . . . . . . 19
   7.1 Solution requirements  . . . . . . . . . . . . . . . . . . . . 19
   7.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
   7.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 20

   8.  Case (0,1,1) . . . . . . . . . . . . . . . . . . . . . . . . . 21
   8.1 Solution requirements  . . . . . . . . . . . . . . . . . . . . 21
   8.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
   8.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 21

   9.  Case (1,1,1) . . . . . . . . . . . . . . . . . . . . . . . . . 22
   9.1 Solution requirements  . . . . . . . . . . . . . . . . . . . . 22
   9.2 Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
   9.3 Solution behaviors . . . . . . . . . . . . . . . . . . . . . . 22




Charbon, et al.        Expires December 30, 2003                [Page 2]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


   10. Conclusions  . . . . . . . . . . . . . . . . . . . . . . . . . 23

   11. Security Considerations  . . . . . . . . . . . . . . . . . . . 24

   12. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 25

       References . . . . . . . . . . . . . . . . . . . . . . . . . . 26

       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 27

       Intellectual Property and Copyright Statements . . . . . . . . 29








































Charbon, et al.        Expires December 30, 2003                [Page 3]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


1. Introduction

1.1 Context and Motivations

   As specified in the NEMO Basic Support in Requirement R.12 [Section
   5.  NEMO Basic Support One-liner Requirements] [2], the NEMO WG must
   ensure that the basic solution produced does not prevent the use of
   Multi-homing.  However the NEMO Basic support solution [1] does not
   specify any particular mechanism to manage Multi-homing, but
   discussion on this purpose is still open (see [Section 7. Extended
   Home Network] [1]).

   This draft complements [4], analyzes the behavior of NEMO Basic
   Support [1] and deployment issues in different Multi-homing
   scenarios.  This analysis can provide a preliminary evaluation of the
   NEMO basic support solution with respect to Multi-homing support for
   further discussions.

   It is assumed that the readers are familiar with the NEMO terminology
   specified in [3] and the taxonomy described in [4].

1.2 Terms and Abbreviations

   In addition to the terms defined in [3], we use the following
   abbreviations in this memo:

   Prefix-BU: Mobile Network Prefix Binding Update


1.3 Multi-Homing & Support levels

   In order to evaluate the NEMO basic solution, the Multi-homing
   support can be classified into three main categories:

   o Fault-Tolerance/Redundancy:

      As long as the Mobile Network maintains at least one connection to
      the Internet, connectivity for all Mobile Nodes is guaranteed.
      This behavior is separated into two sub-classes:

      - Without transparency: The lost of one connection to the Internet
         breaks transport sessions that use it; however, new transport
         sessions are possible.

      - With transparency: The lost of one connection to the Internet is
         transparent for Layer 4 and above, i.e.  lost of one connection
         does not disrupt transport sessions.




Charbon, et al.        Expires December 30, 2003                [Page 4]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


   o Load-Sharing:

      This is achieved when the traffic load is distributed among
      different connections between the mobile network and the Internet.
      Here, we do not indulge into the more exotic forms of load
      balancing such as random selection, round-robin per-packet,
      per-connection etc.  As long as the protocol uses all active
      connections simultaneously, Load-sharing will have been deemed
      achieved.

      The benefits of load sharing is studied for inbound and outbound
      traffic.

   o Policy:

      The management of traffic can be done by any possible mechanism.
      For example, it may depend on:

      *  The kind/cost of connection.

      *  Social policy based on schedule.

      *  The class of the avian carriers [8].

      In fact, we only consider whether the solution provides a
      mechanism to carry some policy informations - such as the Flow
      Label in IPv6 header (see [Section 6.  Flow Labels] [7]) - because
      going deeper into analyzing the solutions for all policy cases is
      too complex.


1.4 Organization

   In the remaining sections of this draft, we will analyze the behavior
   of NEMO basic support in each scenario from the Multi-homing taxonomy
   [4].  The analysis of each is broken into three parts:

   1.  Prerequisites: Prerequisites for Multi-homing support and its
       benefits against each classes defined above.

   2.  Comments: About prerequisites and deployment issues and other
       things related.

   3.  Solution Behaviors: How the NEMO Basic current solution support
       theses prerequisites.

   The "Prerequisites" part is syntactical in nature, the "Comments"
   part detailed, and the "Solution Behaviors" one technical.



Charbon, et al.        Expires December 30, 2003                [Page 5]


   The first case is a long description since we have to explain the
   prerequisites in detail.  Thereafter, in subsequent sections we will
   aggregate the prerequisites as much as possible.


















































Charbon, et al.        Expires December 30, 2003                [Page 6]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


2. Case (0,0,0)

   Illustration of the case:


                        _____
        _    p      _  |     |
       |_|-|<-_  |-|_|-|     |-|        _
        _  |-|_|=|     |_____| |  _  |-|_|
       |_|-|     |             |-|_|-|
                                     |

       MNNs   MR   AR  Internet  AR    HA



2.1 Prerequisites

   o Redundancy:

      If an interface/link is broken, use the other: No additional
      prerequisites at NEMO level.  But for efficient support of this
      benefit the layer 2 have to send interface/link informations or
      orders to NEMO.  And this redundancy is always transparent: Read
      "Fault-Tolerance and the MNNs" in (Section 2.2).

      But this behavior is not sufficient to respect the requirements:
      Read "Load-sharing & Requirements" in (Section 2.2).

   o Load-Sharing:

      For this class the solution MUST at least:

      1.  Allows the use of several active bi-directional tunnels
          simultaneously between MR and HA.

      2.  Allows the binding of multiple CoAs against the same MNP.

      3.  Provides a method to identify which CoA a Prefix-BU is meant
          to update.  Read "CoA Identification" in (Section 2.2).

      In this case the MR and the HA MUST use the two bi-directional
      tunnels simultaneously.  Read "Load-sharing & Requirements" in
      (Section 2.2).

      * Outbound Traffic: The MR distributes between its CoAs.

         There is no assumption on the distribution mechanism.



Charbon, et al.        Expires December 30, 2003                [Page 7]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


      * Inbound Traffic: The HA distributes between MR's CoAs.

         The distribution can be statically fixed or be more dynamic: A
         preference can be sent with each Prefix-BU to mark the
         preference of each CoA in the HA's Binding Cache.

   o Policy:

      * Outbound Traffic: This behavior depends on the NEMO
         implementation.  No way to impose an algorithm.

      * Inbound Traffic: Provide a policy field or policy sub-option
         with each Prefix-BU to indicate a policy management for each
         CoA to the HA.


2.2 Comments

   o CoA Identification:

      To illustrate this prerequisite, we consider the following
      example:

         The MR has two CoAs: CoA-1 and CoA-2.  The HA have in its "NEMO
         Binding Cache" - Here this is a logical view of this cache :


           +=========================+=================+
           | MNP/Prefix Length       | Care Of Address |
           +=========================+=================+
           | MNP-1/Length-1          | CoA-1           |
           +-------------------------+-----------------+
           | MNP-1/Length-1          | CoA-2           |
           +=========================+=================+


          Then the HA receives a Prefix-BU which contains:


           +=========================+=================+
           | MNP/Prefix Length       | Care Of Address |
           +=========================+=================+
           | MNP-1/Length-1          | CoA-New         |
           +=========================+=================+


          The question is: Which CoA should CoA-New updates? CoA-1 or
         CoA-2? The solution needs a way to differentiate each CoA



Charbon, et al.        Expires December 30, 2003                [Page 8]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


         binding.

   o Load-sharing & Requirements:

      Fault-Tolerance is not sufficient, in all configuration cases, to
      conform to the Multi-Homing requirements defined in NEMO:

         Referring to [Section 5.  Multi-homing] [3] the definition of a
         Multi-homed Mobile Router is:

            A MR is multi-homed when it has simultaneously more than one
            active connection to the Internet, [...]

         And according to [Section 5. NEMO Basic Support One-liner
         Requirements] [2]:

            R12: The solution MUST function for multi-homed MR and
            multi-homed mobile networks as defined in [NEMO-TERMS]).
            Particularly:

               R12.1: The solution MUST function for multi-MR mobile
               networks

         Thus the NEMO solution MUST manage network traffic
         simultaneously through the several connection of a same MR.

   o MR is the only one:

      Here only the MR is Multi-Homed and thus depending on the desired
      level of Multi-Homing, there exists several solutions to deal with
      this case, such as [5] and [6] deal with Multi-Interface issue and
      Mobility.

   o Fault-Tolerance and the MNNs:

      This configuration does not change anything on the behavior of
      MNNs: the MNNs always send their packets to the same interface -
      i.e.  the ingress interface of MR.  Thus the Fault-Tolerance with
      Transparency benefit is naturally provided to the MNNs.

   o Load-Sharing mechanisms:

      The MR can use many algorithms to share the outbound traffic
      according to administrator wishes.  Same remark for each (0,*,*)
      case.

      For the inbound one, a preference can be sent with each Prefix-BU
      to mark preference of each CoA in the HA's binding table, and thus



Charbon, et al.        Expires December 30, 2003                [Page 9]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


      HA can perform load sharing according to MR's preference.  Same
      remark for each (*,0,*) cases.


2.3 Solution behaviors

   o Against Load-Sharing:

      1.  Doesn't specify the simultaneous use of several bi-directional
          tunnels but doesn't prevent it.

      2.  Doesn't specify the binding of multiple CoAs against the same
          MNP but doesn't prevent it.

      3.  Doesn't provides a method to identify each CoA but doesn't
          prevent it:

      Here an explanation of one of possibility of this management:

      As long as there is no specific field for a CoA ID, the solution
      have to use a field present in current Prefix-BU definition.  The
      only common field is each type of Prefix-BU - Implicit, Explicit
      and Explicit combined - is the Home Address Option in the
      Destination Option Header [Section 6.3 Home Address Option] [13].

      Thus a NEMO implementation can create a Home Address for each
      egress interface.  And when a CoA on an egress interface change,
      use in Prefix-BU the corresponding Home Address in the Home
      Address Option.  An example to make clear this behavior:

      HA Routing Table & Binding Cache before:


        +===============+=================+=========================+
        | Home Address  | Care-of Address | MN Prefix/Prefix Length |
        +===============+=================+=========================+
        |  HoA-1        |  CoA-1          | MNP-1/Length-1          |
        |  HoA-2        |  CoA-2          | MNP-1/Length-1          |
        +===============+=================+=========================+


       Here HoA-x is the Home Address corresponding to the egress
      interface x on which is assigned CoA-x.  Now the HA receives a
      Prefix-BU because CoA-1 has changed to CoA-New.







Charbon, et al.        Expires December 30, 2003               [Page 10]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


      The Prefix-BU:


        +===============+=================+=========================+
        | Home Address  | Care-of Address | MN Prefix/Prefix Length |
        +===============+=================+=========================+
        |  HoA-1        |  CoA-New        | MNP-1/Length-1          |
        +===============+=================+=========================+


       The HA updates the HoA-1 entry, and thus the CoA-1 binding.

      Routing Table & Binding Cache after:


        +===============+=================+=========================+
        | Home Address  | Care-of Address | MN Prefix/Prefix Length |
        +===============+=================+=========================+
        |  HoA-1        |  CoA-New        | MNP-1/Length-1          |
        |  HoA-2        |  CoA-2          | MNP-1/Length-1          |
        +===============+=================+=========================+


       You can see the difference with "CoA Identification" (Section
      2.2).

      And an example of creation of Home Address according to egress
      interface can be:

            Egress Interface 1 -> EUI-64-1 ->
              Home Address for this interface: MNP:EUI-64-1

            Egress Interface 2 -> EUI-64-2 ->
              Home Address for this interface: MNP:EUI-64-2

       Maybe the solution should specify this behavior because it is
      very specific to NEMO.

   o Against dynamic Load-sharing and Policy:

      The solution didn't specify anything about a kind of preference/
      policy field, but maybe an NEMO implementation can use some part
      of the reserved field in the MNP Option [Section 4.3. Mobile
      Network Prefix Option] [1] or in a sub-option.







Charbon, et al.        Expires December 30, 2003               [Page 11]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


3. Case (1,0,0)

   Illustration of the case:


             MR2

             p
            <-_  |
        _  |-|_|-|  _____
       |_|-|     |-|     |
        _  |       |     |-|        _
       |_|-|  _  |-|_____| |  _  |-|_|
           |-|_|-|         |-|_|-|
            <-   |               |
             p

       MNNs  MR1   Internet  AR    HA



3.1 Prerequisites

   For this case the solution MUST at least support all prerequisites
   from (Section 2.1).

   Differences with (0,0,0) case:

   o Load-sharing:

      For outbound traffic the MNNs distribute outgoing packets between
      the MRs.

      This kind of sharing is out of scope of NEMO WG.  Read
      "Load-Sharing for Outbound Traffic" in (Section 3.2).


3.2 Comments

   o Fault-Tolerance is already done:

      Here all MNNs operate a selection of default router [Section
      6.3.6.  Default Router Selection] [9] which provide
      Fault-Tolerance benefit.

      Note: Depending on the implementation and the type of traffic this
      mechanism can be acceptable or too slow [Section 7.3. Neighbor
      Unreachability Detection] [9].



Charbon, et al.        Expires December 30, 2003               [Page 12]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


   o Load-Sharing for Outbound Traffic:

      In this case, how to provide this benefit is not in the scope of
      NEMO Working Group.  Anyway a good idea can be: [Default Router
      Preferences, More-Specific Routes, and Load Sharing] [10].  This
      solution can be considered for each (1,*,*) cases.


3.3 Solution behaviors

   Same behaviors as in (Section 2.3).








































Charbon, et al.        Expires December 30, 2003               [Page 13]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


4. Case (0,1,0)

   Illustration of the case:


                                 AR    HA2 [Manage CoAx]
                                  _  |
                               |-|_|-|  _
                        _____  |     |-|_|
        _    p      _  |     |-|
       |_|-|<-_ x|-|_|-|     |
        _  |-|_|=|     |_____|-|        _
       |_|-|    y|             |  _  |-|_|
                               |-|_|-|
                                     |
       MNNs  MR    AR  Internet  AR    HA1 [Manage CoAy]



4.1 Prerequisites

   o Redundancy:

      Same as "Reduncancy" in (Section 2.1).

   o Load-Sharing:

      In this case the MR and the HAs MUST use the two bi-directional
      tunnels simultaneously.  Read "Load-sharing & Requirements" in
      (Section 2.2).

      * Outbound Traffic: The MR distribute between its CoAs.

         There is no assumption on the distribution mechanism.

      * Inbound Traffic: The CNs distribute between the two HAs.

         No prerequisites at NEMO level for static Load-sharing and for
         dynamic one read "Interaction with routing protocols" in
         (Section 4.2).

   o Policy:

      * Outbound Traffic: This behavior is dependent on the NEMO
         implementation.  No way to impose an algorithm.






Charbon, et al.        Expires December 30, 2003               [Page 14]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


      * Inbound Traffic: Close to Load-sharing prerequisite.  Thus read
         "Interaction with routing protocols" in (Section 4.2).


4.2 Comments

   o Interaction with routing protocols:

      The main goal of this case is to provide HA redundancy and a kind
      of Routing Optimization.  And here both HAs announce the same MNP.
      So:

      * The two HAs are in the same IGP domain:

         Each HA advertise the same MNP via the IGP routing protocol.
         The metric/cost used for these advertisements can be statically
         configured on the HA or dynamically by MR which sending a kind
         of "priority" - to make the difference with the "preference"
         field cited above - information to each HAs.  For example this
         information can inside the Prefix-BU as sub-option.  This idea
         come from Ryuji Wakikawa.

      * Is possible that theses HAs can be in different AS?

         Yes, read [Section 5.1.2. Possibly Multihomed, An Identical
         Prefix from a Different Origin] [11].

         Advantage:

         +  The inbound traffic always going to the cheapest HA
            according to the BGP policy of the CN domain.


         Inconvenient:

         +  This route should be published in the Internet Route
            Registry for the two AS.  Elsewhere, these announcement can
            be deleted by mechanism which are used to fight "route
            hijacking" in BGP.

         +  The route optimization effect is only available for the
            inbound traffic.

         +  The BGP protocol announce only one route, thus the CN has no
            "real" choice.  The choice is made by the border router of
            the CN's AS.





Charbon, et al.        Expires December 30, 2003               [Page 15]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


   o Routing Optimization:

      If the goal is to provide a pure Routing Optimization - for
      inbound and outbound traffic - the solution has to establish a
      kind of Inter-HA protocol.  But it's too early to say if this
      behavior have to be supported by NEMO Basic Support.

   In conclusion, there is no strong prerequisite at NEMO level, but
   some at deployment one.

4.3 Solution behaviors

   o Against Redundancy:

      The proposed solution should work without any changes.

   o Against Load-sharing and Policy:

      The solution doesn't provide any "priority" carriage to the HAs to
      influence the routing announces thus dynamic Load-sharing for
      inbound traffic is not provided.






























Charbon, et al.        Expires December 30, 2003               [Page 16]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


5. Case (1,1,0)

   Illustration of the case:


             MR2             AR    HA2 [Manage MR2]

             p                _  |
            <-_  |         |-|_|-|  _
        _  |-|_|-|  _____  |     |-|_|
       |_|-|     |-|     |-|
        _  |       |     |
       |_|-|  _  |-|_____|-|        _
           |-|_|-|         |  _  |-|_|
            <-   |         |-|_|-|
             p                   |

       MNNs  MR1   Internet  AR    HA1 [Manage MR1]



5.1 Prerequisites

   For this case the solution just have to:

   o  Refer to "Comments" in (Section 4.2) and in "Fault-Tolerance is
      already done" at (Section 3.2).


5.2 Comments

   Load-Sharing distribution:

      For Outbound Traffic:

         The MNNs distribute traffic between the two MRs.

      For Inbound Traffic:

         The CNs distribute traffic between the two HAs.


5.3 Solution behaviors

   Same behaviors as in (Section 4.3).






Charbon, et al.        Expires December 30, 2003               [Page 17]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


6. Case (0,0,1)

   Illustration of the case:


                        _____
        _   p1,p2   _  |     |
       |_|-|<-_  |-|_|-|     |-|        _
        _  |-|_|=|     |_____| |  _  |-|_|
       |_|-|     |             |-|_|-|
                                     |

       MNNs   MR    AR Internet  AR    HA



6.1 Prerequisites

   For this case the solution MUST at least support all prerequisites
   from (Section 2.1).

6.2 Comments

    o Source Address selection:

      Each MNN gets two global addresses and thus performs Source
      Address Selection [12].

   o Load-Sharing distribution:

      For Outbound Traffic:

         The MR distributes traffic between its two CoAs.

      For Inbound Traffic:

         The HA distributes traffic between the two MR's CoAs.


6.3 Solution behaviors

   Same behaviors as in (Section 2.3).









Charbon, et al.        Expires December 30, 2003               [Page 18]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


7. Case (1,0,1)

   Illustration of the case:


             MR2

             p2
            <-_  |
        _  |-|_|-|  _____
       |_|-|     |-|     |
        _  |       |     |-|        _
       |_|-|  _  |-|_____| |  _  |-|_|
           |-|_|-|         |-|_|-|
            <-   |               |
             p1

       MNNs  MR1   Internet  AR    HA



7.1 Solution requirements

   For this case, the solution MUST at least do nothing special because
   for the HA, the Mobile Network is seen like two distinct Mobile
   Network.

7.2 Comments

   o Source Address selection:

      Each MNN gets two global addresses and thus performs Source
      Address selection.  However, the MRs or the HA can apply some kind
      of Ingress Filtering - like Reverse Path Filtering or other - and
      depending on the routing protocol configuration, a MR/the HA can
      refuse to forward packets with a different source prefix other
      than the MR advertised MNP.  In [Section 7. Interactions with
      Routing] [12]:

      "Implementations may also use the choice of router to influence
      the choice of source address.  For example, suppose a host is on a
      link with two routers.  One router is advertising a global prefix
      A and the other router is advertising global prefix B.  Then when
      sending via the first router, the host may prefer source addresses
      with prefix A and when sending via the second router, prefer
      source addresses with prefix B."

      Thus care must be taken when configuring MRs and routing protocol



Charbon, et al.        Expires December 30, 2003               [Page 19]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


      behavior between MRs and HA.

   o Redundancy without transparency:

      Suppose MR1 or the tunnel between MR1 and HA goes down, the MNNs
      that choose the p1 prefixed source address will lose their
      connections because they - if ingress filtering - can't send
      theses packets to MR2.  But new connections are still possible by
      using the other source address corresponding to the prefix
      advertised by MR2 (i.e.  p2).  But the time to switch source
      address can be very long: the non-usable source address will have
      to become deprecated [5.  Source Address Selection] [12].

      Providing this kind of transparency is out of scope of NEMO Basic.
      For MNNs that act as a Mobile Host this issue should be solved in
      the Mobile-IP Working Group.

   o Load-Sharing distribution:

      For Outbound Traffic:

         The MNNs distribute traffic between the two MRs.

      For Inbound Traffic:

         The HA distributes traffic between the CoAs of each MR.


7.3 Solution behaviors

   The default behavior is enough to support this case.




















Charbon, et al.        Expires December 30, 2003               [Page 20]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


8. Case (0,1,1)

   Illustration of the case:


                                 AR    HA2 [Manage p2]
                                  _  |
                               |-|_|-|  _
                        _____  |     |-|_|
        _   p1,p2   _  |     |-|
       |_|-|<-_  |-|_|-|     |
        _  |-|_|=|     |_____|-|        _
       |_|-|     |             |  _  |-|_|
                               |-|_|-|
                                     |
       MNNs  MR    AR  Internet  AR    HA1 [Manage p1]



8.1 Solution requirements

   Nothing special because each HA see the same Mobile Network but
   through its own Mobile Network Prefix.

8.2 Comments

   o Redundancy without transparency:

      If HA1 or the tunnel between HA1 and the MR goes down, the MNNs
      that choose p1 prefixed source address will lose theirs
      connections because MR can't forward these packets to the HAy -
      because of the Ingress Filtering made by ISP of HA2.  But new
      connections are possible by switching to the source address with
      the other mobile network prefix (i.e.  p2).  Again, we have the
      penalty of switching source addresses.

   o Load-Sharing distribution:

      For Outbound Traffic:

         The MR distributes traffic between its two CoAs.

      For Inbound Traffic: The CNs distribute between the two HAs.


8.3 Solution behaviors

   The default behavior is enough to support this case.



Charbon, et al.        Expires December 30, 2003               [Page 21]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


9. Case (1,1,1)

   Illustration of the case:


             MR2             AR    HA2 [Manage MR2]

             p2               _  |
            <-_  |         |-|_|-|  _
        _  |-|_|-|  _____  |     |-|_|
       |_|-|     |-|     |-|
        _  |       |     |
       |_|-|  _  |-|_____|-|        _
           |-|_|-|         |  _  |-|_|
            <-   |         |-|_|-|
             p1                  |

       MNNs  MR1   Internet  AR    HA1 [Manage MR1]



9.1 Solution requirements

   Nothing special because each HA see the same Mobile Network but
   through its own MR.

9.2 Comments

   o Redundancy without transparency:

      If MR1 or HA1 or the tunnel between MR1 and HA1 goes down, the
      MNNs that choose p1 prefixed source address will lose their
      connections because they can't send theses packets to the MR2 -
      the Ingress Filtering made by ISP of HA2.  But new connections are
      possible by using the source address corresponding to the MNP
      advertised by MR2 (i.e.  p2).

   o Load-Sharing distribution:

      For Outbound Traffic: The MNNs distribute between the two MRs.

      For Inbound Traffic: The CNs distribute between the two HAs.


9.3 Solution behaviors

   The default behavior is enough to support this case.




Charbon, et al.        Expires December 30, 2003               [Page 22]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


10. Conclusions

   In this draft, we explore the level of Multi-homing support available
   in the NEMO Basic proposed solution with respect to Multi-homing
   requirements, the main goal being:

   "Do not prevent Multi-homing configurations/benefits by the using of
   NEMO Basic Support."

   and this goal is mainly respected.  However, based on our analysis,
   we propose some improvements.

   o Preference & Priority:

      Theses two informations permit to manage the sharing/the policy of
      the Inbound traffic to the Mobile Network through several CoAs
      and/or several HAs.

      Theses information could be added to the Prefix-BU, and the
      proposed solution specify a field/an sub-option to permit some
      implementation to provide this benefit; or specify in the next
      release of NEMO protocol.

   o Multiple CoAs for the same MNP:

      The proposed solution doesn't have to specify anything one this
      subject, just to support it.  But a paragraph on this purpose can
      be helpful for implementation's developers.

   The problem of Multi-homing in Network Mobility covers many
   specifications and network domains, which makes the ideas about this
   subject interesting but difficult to fix.  We hope that this document
   can trigger further discussions on the Multi-homing aspect of NEMO
   basic solution.

















Charbon, et al.        Expires December 30, 2003               [Page 23]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


11. Security Considerations

   This document is an on-going work to evaluate the degree of
   Multi-homing support in NEMO solutions.  There should be a separate
   draft produced by the working group to analyze security threats for
   network in motion.  As such, no special security considerations is
   listed here.  However, since this memo also looks into the analysis
   of problems in a Multi-homed mobile network, we will add problems
   related to security threat here as and when they are encountered.  We
   also encourage interested readers to contribute to this part.









































Charbon, et al.        Expires December 30, 2003               [Page 24]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


12. Acknowledgements

   The authors would like express their appreciation to Ryuji Wakikawa
   and Pascal Thubert for their significant comments on this document.
   The authors would also like to extend their gratitude to people who
   have given valuable comments on various Multi-homing issues on the
   mailing list.












































Charbon, et al.        Expires December 30, 2003               [Page 25]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


References

   [1]   Devarapalli, V., Wakikawa, R., Pestrescu, A. and P. Thubert,
         "Nemo Basic Support Protocol", Internet Draft:
         draft-ietf-nemo-basic-support-00.txt, Work In Progress, June
         2003.

   [2]   Ernst, T., et al, "Network Mobility Support Goals and
         Requirements", Internet Draft:
         draft-ietf-nemo-requirements-01.txt, Work In Progress, May
         2003.

   [3]   Ernst, T. and H-Y. Lach, "Network Mobility Support
         Terminology", Internet Draft:
         draft-ietf-nemo-terminology-00.txt, Work In Progress, May 2003.

   [4]   Ng, C-W. and J. Charbon, "Multi-Homing Issues in Bi-directional
         Tunneling", Internet Draft:
         draft-ng-nemo-multihoming-issues-01, Work In Progress, May
         2003.

   [5]   Wakikawa, R., Uehara, K. and T. Ernst, "Multiple
         Care-of-Address Registration on Mobile IPv6", Internet Draft:
         draft-wakikawa-mobileip-multiplecoa-01.txt, Work In Progress,
         June 2003.

   [6]   Montavont, N. and T. Noel, "MIPv6 for Multiple Interfaces",
         Internet Draft: draft-montavont-mobileip-mmi-00.txt, Work
         Expired, Jully 2002.

   [7]   Deering, S. and R. Hinden, "Internet Protocol, Version 6 (IPv6)
         Specification", RFC 2460, December 1998.

   [8]   Waitzman, D., "IP over Avian Carriers with Quality of Service",
         RFC 2549, April 1999.

   [9]   Narten, T., Nordmark, E. and W. Simpson, "Neighbor Discovery
         for IP Version 6 (IPv6)", RFC 2461, December 1998.

   [10]  Draves, R. and R. Hinden, "Default Router Preferences,
         More-Specific Routes, and Load Sharing", Internet Draft:
         draft-ietf-ipv6-router-selection-02.txt, Work In Progress, June
         2002.

   [11]  Savola, P., "Examining Site Multi-homing in Finnish Networks",
         Master's Thesis. , April 2003.

   [12]  Draves, R., "Default Address Selection for Internet Protocol



Charbon, et al.        Expires December 30, 2003               [Page 26]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


         version 6 (IPv6)", RFC 3484, February 2003.

   [13]  David, D., Charles, C. and J. Jari, "Mobility Support in IPv6",
         Internet Draft: draft-ietf-mobileip-ipv6-23.txt, Work In
         Progress, May 2003.


Authors' Addresses

   Julien Charbon
   Keio university, Murai Lab, Louis Pasteur university and WIDE project
   Keio University.
   5322 Endo
   Fujisawa-shi, Kanagawa  252-8520
   Japan

   Phone: +81-466-49-3529
   Fax:   +81-466-49-1101
   EMail: julien@sfc.wide.ad.jp
   URI:   http://www.sfc.wide.ad.jp/~julien/


   Chan-Wah Ng
   Panasonic Singapore Laboratories Pte Ltd
   Blk 1022 Tai Seng Ave #06-3530
   Tai Seng Industrial Estate
   Singapore  534415
   SG

   Phone: +65 65505420
   EMail: cwng@psl.com.sg


   Koshiro Mitsuya
   Keio university and WIDE project
   Keio University.
   5322 Endo
   Fujisawa-shi, Kanagawa  252-8520
   Japan

   Phone: +81-466-49-3529
   Fax:   +81-466-49-1101
   EMail: mitsuya@sfc.wide.ad.jp
   URI:   http://www.sfc.wide.ad.jp/~mitsuya/







Charbon, et al.        Expires December 30, 2003               [Page 27]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


   Thierry Ernst
   Keio university and WIDE project
   Keio University.
   5322 Endo
   Fujisawa-shi, Kanagawa  252-8520
   Japan

   Phone: +81-466-49-1395
   Fax:   +81-466-49-1100
   EMail: julien@sfc.wide.ad.jp
   URI:   http://www.sfc.wide.ad.jp/~ernst/








































Charbon, et al.        Expires December 30, 2003               [Page 28]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Charbon, et al.        Expires December 30, 2003               [Page 29]

Internet-Draft    Multi-homing in NEMO Basic Solution          July 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Charbon, et al.        Expires December 30, 2003               [Page 30]

