


Individual Submission                                           J. Snell
Internet-Draft                                         February 15, 2008
Expires: August 18, 2008


                         Prefer Header for HTTP
                       draft-snell-http-prefer-02

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 18, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2008).

Abstract

   This specification defines a new HTTP header that can be used by a
   client to request that certain behaviors be implemented by a server
   while processing a request.









Snell                    Expires August 18, 2008                [Page 1]

Internet-Draft                 HTTP Prefer                 February 2008


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  The Prefer Request Header . . . . . . . . . . . . . . . . . . . 3
   3.  The Preference-Applied Response Header  . . . . . . . . . . . . 3
   4.  The "return-no-content" Preference  . . . . . . . . . . . . . . 4
   5.  The "return-content" Preference . . . . . . . . . . . . . . . . 4
   6.  The "return-status" Preference  . . . . . . . . . . . . . . . . 4
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 4
     7.1.  The Registry of Preferences . . . . . . . . . . . . . . . . 4
   8.  Security Considerations . . . . . . . . . . . . . . . . . . . . 5
   9.  Normative References  . . . . . . . . . . . . . . . . . . . . . 5
   Appendix A.  Acknowledgements . . . . . . . . . . . . . . . . . . . 5
   Appendix B.  Changes  . . . . . . . . . . . . . . . . . . . . . . . 5
   Appendix C.  Notes to RFC Editor  . . . . . . . . . . . . . . . . . 6
   Appendix D.  Editorial Notes  . . . . . . . . . . . . . . . . . . . 6
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . . . 6
   Intellectual Property and Copyright Statements  . . . . . . . . . . 7

































Snell                    Expires August 18, 2008                [Page 2]

Internet-Draft                 HTTP Prefer                 February 2008


1.  Introduction

   This specification defines a new HTTP header that can be used by a
   client to request that certain behaviors be implemented by a server
   while processing a request.

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in [RFC2119].


2.  The Prefer Request Header

   The Prefer request-header is used to indicate that particular server
   behaviors are preferred, but not required, by the client.  Prefer is
   similar in nature to the Expect header defined by [RFC2616] with the
   exception that servers are allowed to ignore a clients stated
   preferences.

     Prefer       =  "Prefer" ":" 1#preference

     preference   =  "return-no-content" |
                     "return-content" |
                     "return-status" |
                     preference-extension
     preference-extension =  token [ "=" ( token | quoted-string )
                             *prefer-params ]
     prefer-params =  ";" token [ "=" ( token | quoted-string ) ]

   This header is defined with an extensible syntax to allow for future
   values included in the Registry of Preferences (see Section 7.1).  A
   server that does not recognize or is unable to comply with particular
   preference values in the Prefer header of a request MUST ignore those
   values and MUST NOT stop processing or signal an error.

   Comparison of preference values is case-insensitive for unquoted
   tokens and is case-sensitive for quoted-string preference-extensions.

   An HTTP proxy MAY choose to honor a preference even if the origin
   server does not.  The Prefer request-header MUST be forwarded by the
   proxy if the request is forwarded.


3.  The Preference-Applied Response Header

   The Preference-Applied response header MAY be included in the
   response message to indicate which Prefer request header values were
   honored by the server and applied to the request.



Snell                    Expires August 18, 2008                [Page 3]

Internet-Draft                 HTTP Prefer                 February 2008


     Prefer       =  "Preference-Applied" ":" 1#preference


4.  The "return-no-content" Preference

   The "return-no-content" token indicates that the client prefers that
   the server not include an entity in the response to a successful
   request.  Typically, such responses would use the 204 No Content
   status code as defined in Section 10.2.5 of [RFC2616], but other
   status codes can be used as appropriate.


5.  The "return-content" Preference

   The "return-content" token indicates that the client prefers that the
   server include an entity representing the current state of the
   resource in the response to a successful request.


6.  The "return-status" Preference

   The "return-status" token indicates that the client prefers that the
   server include an entity describing the status of the request in the
   response to a successful request.


7.  IANA Considerations

   The 'Prefer' request header should be added to the permanent registry
   (see [RFC3864]).


       Header field name: Prefer

       Applicable Protocol: HTTP

       Status: standard

       Author/Change controller: IETF

       Specification document: this specification

7.1.  The Registry of Preferences

   This registry is maintained by IANA and initially contains three
   values: "return-no-content", "return-content" and "return-status".
   New assignments are subjects to IESG approval, as outlined in
   [RFC2434].  Requests should be made by email to IANA, which will then



Snell                    Expires August 18, 2008                [Page 4]

Internet-Draft                 HTTP Prefer                 February 2008


   forward the request to the IESG, requesting approval.  The request
   should use the following template:

   o  Preference: (A value for the Prefer request header that conforms
      to the syntax rule given in Section 2)
   o  Description:
   o  Expected server behavior:
   o  Security considerations:


8.  Security Considerations

   Specific preferences requested by a client can introduce security
   considerations and concerns beyond those discussed in [RFC2616].
   Implementors must refer to the specifications and descriptions of
   those preferences to determine the security considerations relevant
   to each.


9.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2434]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 2434,
              October 1998.

   [RFC2616]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
              Masinter, L., Leach, P., and T. Berners-Lee, "Hypertext
              Transfer Protocol -- HTTP/1.1", RFC 2616, June 1999.

   [RFC3864]  Klyne, G., Nottingham, M., and J. Mogul, "Registration
              Procedures for Message Header Fields", BCP 90, RFC 3864,
              September 2004.


Appendix A.  Acknowledgements

   The author greatfully acknowledges the input from the IETF HTTP
   mailing list on the development of this document.


Appendix B.  Changes

   TODO





Snell                    Expires August 18, 2008                [Page 5]

Internet-Draft                 HTTP Prefer                 February 2008


Appendix C.  Notes to RFC Editor

   The RFC Editor should remove this section and the Changes section.


Appendix D.  Editorial Notes

   We need to determine how new preference codes are created/registered


Author's Address

   James M Snell


   Phone:
   Email: jasnell@gmail.com
   URI:   http://www.snellspace.com

































Snell                    Expires August 18, 2008                [Page 6]

Internet-Draft                 HTTP Prefer                 February 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Snell                    Expires August 18, 2008                [Page 7]

