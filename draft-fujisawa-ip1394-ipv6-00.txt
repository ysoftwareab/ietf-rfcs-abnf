

Internet-Draft						  Kenji Fujisawa
<draft-fujisawa-ip1394-ipv6-00.txt>			Sony Corporation
Expires: January, 1999



	Transmission of IPv6 Packets over IEEE 1394 Networks


Status of this memo

     This document is an Internet-Draft.  Internet-Drafts are working
     documents of the Internet Engineering Task Force (IETF), its
     areas, and its working groups.  Note that other groups may also
     distribute working documents as Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsoleted by other
     documents at any time.  It is inappropriate to use Internet-
     Drafts as reference material or to cite them other than as
     ``work in progress.''

     To view the entire list of current Internet-Drafts, please check
     the "1id-abstracts.txt" listing contained in the Internet-Drafts
     Shadow Directories on ftp.is.co.za (Africa), ftp.nordu.net
     (Northern Europe), ftp.nis.garr.it (Southern Europe), munnari.oz.au
     (Pacific Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu
     (US West Coast).


Abstract

   IEEE Std 1394-1995 is a standard for a High Performance Serial Bus.
   This document proposes the frame format for transmission of IPv6
   [IPV6] packets and the method of forming IPv6 link-local addresses
   and statelessly autoconfigured addresses on IEEE1394 networks.
   It also proposes the content of the Source/Target Link-layer 
   Address option used in Neighbor Discovery [DISC] when the messages
   are transmitted on an IEEE1394 network.
















K. Fujisawa                Expires January 1999                [Page 1] 
Internet Draft        draft-fujisawa-ip1394-ipv6-00.txt        July 1998


1. INTRODUCTION

   IEEE Std 1394-1995 is a standard for a High Performance Serial Bus.
   IETF IP1394 Working Group is standardizing the method to carry IPv4
   datagrams and ARP packets over IEEE1394 subnetwork [IP1394].

   This document proposes the frame format for transmission of IPv6
   [IPV6] packets and the method of forming IPv6 link-local addresses
   and statelessly autoconfigured addresses on IEEE1394 networks.
   It also proposes the content of the Source/Target Link-layer 
   Address option used in Neighbor Discovery [DISC] when the messages
   are transmitted on an IEEE1394 network.


2. IPv6-CAPABLE NODES

   An IPv6-capable node shall fulfill the requirements descrived
   in "3. IP-CAPABLE NODES" of [IP1394].

   Following lists are excerpted from [IP1394] for convenience.

   - the max_rec field in its bus information block shall be at least 8;
     this indicates an ability to accept write requests with data
     payload of 512 octets. The same ability shall also apply to read
     requests; that is, the node shall be able to transmit a response
     packet with a data payload of 512 octets;

   - it shall be isochronous resource manager capable, as specified by
     1394;

   - it shall support both reception and transmission of asynchronous
     streams as specified by P1394a;

   - it shall implement the NETWORK_CHANNELS register; and

   - it shall be network protocol manager (NPM) capable.


3. LINK ENCAPSULATION AND FRAGMENTATION

   The encapsulation and fragmentation mechanism should be the same
   with "6. LINK ENCAPSULATION AND FRAGMENTATION" of [IP1394].

   The ether_type value for IPv6 is 0x86dd.

   The default MTU size for IPv6 packets on an IEEE1394 network is 1500
   octets.  This size may be reduced by a Router Advertisement [DISC]
   containing an MTU option which specifies a smaller MTU, or by manual
   configuration of each node.  If a Router Advertisement received on
   an IEEE1394 interface has an MTU option specifying an MTU larger
   than 1500, or larger than a manually configured value, that MTU



K. Fujisawa                Expires January 1999                [Page 2] 
Internet Draft        draft-fujisawa-ip1394-ipv6-00.txt        July 1998


   option may be logged to system management but must be otherwise
   ignored. The mechanism to extend MTU size between particular two
   nodes is for further study.


4. STATELESS AUTOCONFIGURATION

   The Interface Identifier [AARCH] for an IEEE1394 interface is 
   formed from the interface's built-in EUI-64 by complementing 
   the "Universal/Local" (U/L) bit, which is the next-to-lowest 
   order bit of the first octet of the EUI-64.  Complementing
   this bit will generally change a 0 value to a 1, since an
   interface's built-in address is expected to be from a universally
   administered address space and hence have a globally unique value.
   A universally administered EUI-64 is signified by a 0 in the U/L 
   bit position, while a globally unique IPv6 Interface Identifier
   is signified by a 1 in the corresponding position.  
   For further discussion on this point, see [AARCH].

   An IPv6 address prefix used for stateless autoconfiguration [ACONF]
   of an IEEE1394 interface must have a length of 64 bits.


5. LINK-LOCAL ADDRESSES

   The IPv6 link-local address [AARCH] for an IEEE1394 interface is
   formed by appending the Interface Identifier, as defined above, to
   the prefix FE80::/64.

       10 bits            54 bits                  64 bits
     +----------+-----------------------+----------------------------+
     |1111111010|         (zeros)       |    Interface Identifier    |
     +----------+-----------------------+----------------------------+


6. ADDRESS MAPPING FOR UNICAST

    The procedure for mapping IPv6 unicast addresses into IEEE1394
    link-layer addresses uses the Neighbor Discovery [DISC].
    The Source/Target Link-layer Address option has the following 
    form when the link layer is IEEE1394.













K. Fujisawa                Expires January 1999                [Page 3] 
Internet Draft        draft-fujisawa-ip1394-ipv6-00.txt        July 1998


                         1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type      |  Length = 3   |            reserved           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     +---                      node_unique_ID                     ---+
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            node_ID            |        unicast_FIFO_hi        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         unicast_FIFO_lo                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |    max_rec    |      sspd     |            reserved           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Type        1 for Source Link-layer address.
               2 for Target Link-layer address.

   Length      3 (in units of 8 octets).

   The meaning of 'node_unique_ID', 'node_ID', 'unicast_FIFO', 'max_rec'
   and 'spd' sub-fields are specified in [IP1394].

   Note that 'node_ID' may change when 1394 bus-reset occurs. The mapping
   cache held in the node should be cleared on 1394 bus-reset.


7. IPv6 MULTICAST

   By default, all best-effort IPv6 multicast shall use asynchronous
   stream packets whose channel number is equal to the channel field
   from the NETWORK_CHANNELS register.

   Best-effort IPv6 multicast for particular multicast group addresses
   may utilize a different channel number if such a channel number is
   allocated and advertised prior to use, by the multicast channel
   allocation protocol (MCAP), as described in [IP1394]. The 'type'
   field in MCAP group address descriptor shall be 2 to indicate an
   IPv6 group address descriptor.


8. OPEN ISSUES

   a) The mechanism to extend MTU size between particular two nodes.

   b) The mechanism to allocate and distribute a 1394 isochronous
      channel number for isochronous transmission of IPv6 packets,
      for an unicast or multicast flow.





K. Fujisawa                Expires January 1999                [Page 4] 
Internet Draft        draft-fujisawa-ip1394-ipv6-00.txt        July 1998


Security Considerations

   Security issues are not discussed in this document.


References

 [IP1394] IP1394 Working Group, "IPv4 over IEEE 1394", currently 
          draft-ietf-ip1394-ipv4-09.txt.

 [IPV6]   S. Deering, R. Hinden, "Internet Protocol, Version 6 (IPv6)
          Specification", currently draft-ietf-ipngwg-ipv6-spec-v2-
          01.txt.

 [AARCH]  R. Hinden, S. Deering "IP Version 6 Addressing
          Architecture", currently draft-ietf-ipngwg-addr-arch-v2-
          07.txt.

 [ACONF]  S. Thomson, T. Narten, "IPv6 Stateless Address
          Autoconfiguration", currently draft-ietf-ipngwg-addrconf-
          v2-02.txt.

 [DISC]   T. Narten, E. Nordmark, W. A. Simpson, "Neighbor Discovery
          for IP Version 6 (IPv6)", currently draft-ietf-ipngwg-
          discovery-v2-02.txt.



Author's address

   Kenji Fujisawa
   Sony Corporation
   IT Laboratories, Computer Systems Laboratory
   6-7-35, Kitashinagawa,
   Shinagawa-ku, Tokyo, 141-0001 Japan
   Phone: +81-3-5448-4602
   E-mail: fujisawa@sm.sony.co.jp

















K. Fujisawa                Expires January 1999                [Page 5] 
