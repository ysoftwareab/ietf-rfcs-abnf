

Network Working Group                                       K. Ishiguro
Internet Draft                                         IP Infusion Inc.
Expiration Date: February 2004                                T. Takada
                                                       IP Infusion Inc.
                                                            August 2003


            Traffic Engineering Extensions to OSPF version 3

                 draft-ietf-ospf-ospfv3-traffic-01.txt


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   This document describes extensions to OSPFv3 to support intra-area 
   Traffic Engineering (TE).

   This document extends OSPFv2 TE to both IPv4 and IPv6 networks. A  
   new TLV and several new sub-TLVs are defined to support IPv6 
   networks.  The use of the new TLV and sub-TLVs is not limited 
   to OSPFv3. They may also be used in OSPFv2.
 
Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in 
   this document are to be interpreted as described in RFC-2119 [5]. 


    
Ishiguro                  Expires February 2004                 [Page 1]

Internet Draft    draft-ietf-ospf-ospfv3-traffic-01.txt      August 2003


1. Applicability

   OSPFv3 has a very flexible mechanism for adding new LS types.
   Unknown LS types are flooded properly based on the flooding scope
   bits in the LS type [1]. This document proposes the addition of 
   the Intra-Area-TE LSA to OSPFv3.

   For Traffic Engineering, this document uses "Traffic Engineering
   Extensions to OSPF" [2] as a base for TLV definitions.  New sub-TLVs
   are added to [2] to extend TE capabilities to IPv6 networks.  Some 
   TLVs require clarification for OSPFv3 applicabilty. The new sub-TLVs
   described in this document can also be carried in OSPFv2 as described
   in [2].

   GMPLS [3] and the Diff-Serv aware MPLS Extensions [4] are based on
   [2]. These functions can also be extended to OSPFv3 by utilizing the
   TLV and sub-TLVs described in this document.

2. Router Address TLV

   In OSPFv3, the Router Address TLV value should be a Router ID of the
   advertising router. [2] states that the Router Address TLV is 
   "a stable IP address of the advertising router that is always 
   reachable if there is any connectivity to it".  An OSPFv3 router's
   Router ID is not an IPv6 address and is not reachable in an IPv6 
   network. 

   The Router Identifier TLV has type 1, length 4, and a value 
   containing the the four octet OSPFv3 Router ID.  It MUST appear in 
   exactly one Traffic Engineering LSA originated by an OSPFv3 router 
   supporting the TE extentions.

3. Router IPv6 Address TLV

   The Router IPv6 Address TLV will advertise a reachable IPv6 address.
   This is a stable IPv6 address that is always reachable if there 
   is connectivity to the OSPFv3 router.

   The Router IPv6 Address TLV has type 3, length 16, and a value
   containing a 16 octet local IPv6 address. It MUST appear in exactly 
   one Traffic Engineering LSA originated by an OSPFv3 router 
   supporting the TE extentions.

4. Link TLV

   The Link TLV describes a single link and consists a set of
   sub-TLVs [2].  All of sub-TLVs in [2] other than the Link ID 
   sub-TLV are applicable to OSPFv3.  The Link ID sub-TLV can't be used
   in OSPFv3 due to the protocol differences between OSPFv2 and OSPFv3.




Ishiguro                  Expires February 2004                 [Page 2]

Internet Draft    draft-ietf-ospf-ospfv3-traffic-01.txt      August 2003


   Three new sub-TLVs for the Link TLV are defined: 

     17 - Neighbor ID (8 octets)
     18 - Local Interface IPv6 Address (16N octets)
     19 - Remote Interface IPv6 Address (16N octets)



4.1 Link ID

   The Link ID sub-TLV is used in OSPFv2 to identify the other end of 
   the link.  In OSPFv3, the Neighbor ID sub-TLV should be used for 
   link identification. In OSPFv3, The Link ID sub-TLV should not 
   be sent and should be ignored upon receipt.

4.2 Neighbor ID

   In OSPFv2, the Link ID is used to identify the other end of 
   a link.  In OSPFv3, the combination of Neighbor Interface ID 
   and Neighbor Router ID are used for neighbor link 
   identification. Both are advertised in the Neighbor ID 
   Sub-TLV.

   The Neighbor ID sub-TLV has type 17, length 8, and contains the
   4 octet Neighbor Interface ID and the 4 octet Neighbor Router
   ID.  Neighbor Interface ID and Neighbor Router ID values are the 
   same as described in RFC 2740 [1] A.4.3 Router-LSAs.

   In OSPFv2, the Neighbor ID sub-TLV should not be sent and should 
   be ignored upon receipt.

4.3 Local Interface IPv6 Address

   The Local Interface IPv6 Address sub-TLV specifies the IPv6
   address(es) of the interface corresponding to this link.  If there
   are multiple local addresses on the link, they are all listed in 
   this sub-TLV.  Link-local address should not be included in this 
   sub-TLV.

   The Local Interface IPv6 Address sub-TLV has type 18, length 16N 
   (where N is the number of local addresses), and contains the link's
   local addresses.


4.4 Remote Interface IPv6 Address

   The Remote Interface IPv6 Address sub-TLV advertises the IPv6
   address(es) associated with neighbor's interface.
   This Sub-TLV and the Local Interface IPv6 address Sub-TLV are used
   to discern amongst parallel links between OSPFv3 routers.  If the 



Ishiguro                  Expires February 2004                 [Page 3]

Internet Draft    draft-ietf-ospf-ospfv3-traffic-01.txt      August 2003


   Link Type is multi-access, the Remote Interface IPv6 Address is 
   set to ::.  Link-local addresses should not be contained in this 
   sub-TLV.

   The Remote Interface IPv6 Address sub-TLV has type 19, length 16N 
   (where N is the number of local addresses), and contains the link
   neighbor's local addresses.

5. Intra-Area-TE-LSA

   A new LS type is defined for the Intra-Area-TE LSA. The LSA 
   function code is 10, the U bit is set, and the scope is 
   Area-scoping. When the U bit is set to 1 an OSPFv3 router must 
   flood the LSA at its defined flooding scope even if it does not 
   recognize the LS type [1].


     LSA function code  LS Type   Description
     ---------------------------------------------------------------
     10                 0xa00a    Intra-Area-TE-LSA


   The Link State ID of an Intra-Area-TE LSA will be the Interface ID 
   of the link.


6. Security Considerations

   This memo does not create any new security issues for the OSPFv3
   protocol [1] or OSPFv2 Traffic Engineering extenstions [2]. 
   Security considerations for OSPFv2 Traffic Engineering are  
   covered in [2].

7. Acknowledgements

   Thanks to Vishwas Manral, Kireeti Kompella, and Alex Zinin for their
   comments.

8. Normative References

   [1] R, Coltun, D. Ferguson, and J. Moy, "OSPF for IPv6", RFC 2740.

   [2] Katz, D., Yeung, D., Kompella, K., "Traffic Engineering
       Extensions to OSPF", draft-katz-yeung-ospf-traffic-09.txt, work
       in progress.


Ishiguro                  Expires February 2004                 [Page 4]

Internet Draft    draft-ietf-ospf-ospfv3-traffic-01.txt      August 2003


9. Informative References

   [3] K. Kompella, Y. Rekhter, "OSPF Extensions in Support of
       Generalized MPLS", draft-ietf-ccamp-ospf-gmpls-extensions-09.txt,
       work in progress.

   [4] F. L. Faucheur, J. Boyle,  K. Kompella, W. Townsend, D. Skalecki,
       "Protocol extensions for support of Diff-Serv-aware MPLS Traffic
       Engineering", draft-ietf-tewg-diff-te-proto-02.txt, work in
       progress.

   [5] Bradner, S., "Key words for use in RFCs to Indicate Requirement 
       Level", BCP 14, RFC 2119, March 1997. 
    
10. Author's Address

   Kunihiro Ishiguro
   IP Infusion Inc.
   111 W. St. John Street, Suite 910
   San Jose CA 95113
   e-mail: kunihiro@ipinfusion.com

   Toshiaki Takada
   IP Infusion Inc.
   111 W. St. John Street, Suite 910
   San Jose CA 95113
   e-mail: takada@ipinfusion.com





















Ishiguro                  Expires February 2004                 [Page 5]




