xmlns="urn:ietf:params:xml:ns:lost1"
serviceBoundary="value"
recursive="true">

expires="2007-01-01T01:44:33Z"
lastUpdated="2006-11-01T01:00:00Z"
source="authoritative.example"
sourceId="7e3f40b098c711dbb6060800200c9a66">
recursive="true" serviceBoundary="value">
xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr">
expires="2007-01-01T01:44:33Z"
lastUpdated="2006-11-01T01:00:00Z"
source="esgw.ueber-110.de.example"
sourceId="e8b05a41d8d1415b80f2cdbb96ccf109">
profile="civic">
xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr">
xmlns="urn:ietf:params:xml:ns:lost1"
recursive="true"
validateLocation="true"
serviceBoundary="value">
xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr">
expires="2007-01-01T01:44:33Z"
lastUpdated="2006-11-01T01:00:00Z"
source="authoritative.example"
sourceId="4db898df52b84edfa9b6445ea8a0328e">
xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr">
xmlns="urn:ietf:params:xml:ns:lost1"
recursive="true"
serviceBoundary="reference">
expires="2007-01-01T01:44:33Z"
lastUpdated="2006-11-01T01:00:00Z"
source="authoritative.example"
sourceId="7e3f40b098c711dbb6060800200c9a66">
source="authoritative.example"
key="7214148E0433AFE2FA2D48003D31172E"/>
key="7214148E0433AFE2FA2D48003D31172E"/>

xmlns="urn:ietf:params:xml:ns:lost1">
        <serviceBoundary profile="geodetic-2d">
          <p2:Polygon srsName="urn:ogc:def::crs:EPSG::4326">
            <p2:exterior>
              <p2:LinearRing>
                <p2:pos>37.775 -122.4194</p2:pos>
                <p2:pos>37.555 -122.4194</p2:pos>
                <p2:pos>37.555 -122.4264</p2:pos>
                <p2:pos>37.775 -122.4264</p2:pos>
                <p2:pos>37.775 -122.4194</p2:pos>
              </p2:LinearRing>
            </p2:exterior>
          </p2:Polygon>
        </serviceBoundary>
xmlns="urn:ietf:params:xml:ns:lost1">
xmlns="urn:ietf:params:xml:ns:lost1">
xmlns="urn:ietf:params:xml:ns:lost1"
recursive="true">
xmlns="urn:ietf:params:xml:ns:lost1">
xmlns="urn:ietf:params:xml:ns:lost1"
recursive="true"
serviceBoundary="value">
profile="not-yet-standardized-prism-profile">
xmlns="urn:ietf:params:xml:ns:lost1"
expires="2007-01-01T01:44:33Z"
lastUpdated="2006-11-01T01:00:00Z"
source="authoritative.example"
sourceId="cf19bbb038fb4ade95852795f045387d">
source="resolver.example">
      <internalError message="Software bug." xml:lang="en"/>
expires="2007-01-01T01:44:33Z"
lastUpdated="2006-11-01T01:00:00Z"
source="authoritative.example"
sourceId="fb8ed888433343b7b27865aeb38f3a99">
message="Unable to determine PSAP for the given location;
                using default PSAP"
target="eastpsap.example"
source="westpsap.example"
message="We have temporarily failed over." xml:lang="en"/>

                 Figure 19: Example of a redirect response

start =
  findService
  | listServices
  | listServicesByLocation
  | getServiceBoundary
  | findServiceResponse
  | listServicesResponse
  | listServicesByLocationResponse
  | getServiceBoundaryResponse
  | errors
  | redirect

findService =
    element findService {
      requestLocation,
      commonRequestPattern,
      attribute validateLocation {
        xsd:boolean >> a:defaultValue [ "false" ]
      }?,
      attribute serviceBoundary {
        ("reference" | "value") >> a:defaultValue [ "reference" ]
      }?,
      attribute recursive { xsd:boolean >> a:defaultValue [ "false" ] }?
    }
listServices = element listServices { commonRequestPattern }
listServicesByLocation =
    element listServicesByLocation {
      requestLocation,
      commonRequestPattern,
      attribute recursive { xsd:boolean >> a:defaultValue [ "true" ] }?
    }
getServiceBoundary =
    element getServiceBoundary { serviceBoundaryKey, extensionPoint }
findServiceResponse =
    element findServiceResponse {
      mapping+, locationValidation?, commonResponsePattern, locationUsed
    }
listServicesResponse =
    element listServicesResponse { serviceList, commonResponsePattern }
listServicesByLocationResponse =
    element listServicesByLocationResponse {
      serviceList, commonResponsePattern, locationUsed
    }
getServiceBoundaryResponse =
    element getServiceBoundaryResponse {
      serviceBoundary, commonResponsePattern
    }
commonRequestPattern = service, path?, extensionPoint
commonResponsePattern = warnings*, path, extensionPoint
requestLocation =
    element location {
      attribute id { xsd:token },
      locationInformation
    }+
locationInformation =
    extensionPoint+,
    attribute profile { xsd:NMTOKEN }?
serviceBoundary = element serviceBoundary { locationInformation }+
serviceBoundaryReference =
    element serviceBoundaryReference {
      source, serviceBoundaryKey, extensionPoint
    }
serviceBoundaryKey = attribute key { xsd:token }
path =
    element path {
      element via { source, extensionPoint }+
    }
locationUsed =
    element locationUsed {
      attribute id { xsd:token }
    }?
expires =
    attribute expires { xsd:dateTime | "NO-CACHE" | "NO-EXPIRATION" }
qnameList = list { xsd:QName* }
mapping =
    element mapping {
      element displayName {
        xsd:string,
        attribute xml:lang { xsd:language }
      }*,
      service,
      (serviceBoundary | serviceBoundaryReference)?,
      element uri { xsd:anyURI }*,
      element serviceNumber {
        xsd:token { pattern = "[0-9*#]+" }
      }?,
      extensionPoint,
      expires,
      attribute lastUpdated { xsd:dateTime },
      source,
      attribute sourceId { xsd:token },
      message
    }
locationValidation =
    element locationValidation {
      element valid { qnameList }?,
      element invalid { qnameList }?,
      element unchecked { qnameList }?,
      extensionPoint
    }
exceptionContainer =
    (badRequest?
     & internalError?
     & serviceSubstitution?
     & defaultMappingReturned?
     & forbidden?
     & notFound?
     & loop?
     & serviceNotImplemented?
     & serverTimeout?
     & serverError?
     & locationInvalid?
     & locationProfileUnrecognized?),
    extensionPoint,
    source
errors = element errors { exceptionContainer }
warnings = element warnings { exceptionContainer }
basicException = message, extensionPoint
badRequest = element badRequest { basicException }
internalError = element internalError { basicException }
serviceSubstitution = element serviceSubstitution { basicException }
defaultMappingReturned =
    element defaultMappingReturned { basicException }
forbidden = element forbidden { basicException }
notFound = element notFound { basicException }
loop = element loop { basicException }
serviceNotImplemented =
    element serviceNotImplemented { basicException }
serverTimeout = element serverTimeout { basicException }
serverError = element serverError { basicException }
locationInvalid = element locationInvalid { basicException }
locationValidationUnavailable =
    element locationValidationUnavailable { basicException }
locationProfileUnrecognized =
    element locationProfileUnrecognized {
      attribute unsupportedProfiles { xsd:NMTOKENS },
      basicException
    }
redirect =
    element redirect {
      attribute target { appUniqueString },
      source,
      message,
      extensionPoint
    }
message =
    (attribute message { xsd:token },
     attribute xml:lang { xsd:language })?
service = element service { xsd:anyURI }?
appUniqueString =
    xsd:token { pattern = "([a-zA-Z0-9\-]+\.)+[a-zA-Z0-9]+" }
source = attribute source { appUniqueString }
serviceList =
    element serviceList {
      list { xsd:anyURI* }
    }
notLost = element * - (ns1:* | ns1:*) { anyElement }

anyElement =
    (element * { anyElement }
     | attribute * { text }
     | text)*

extensionPoint = notLost*
content="text/html;charset=iso-8859-1"/>
xmlns="http://relaxng.org/ns/structure/1.0"
datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">

