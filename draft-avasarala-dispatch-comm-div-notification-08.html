<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>None</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Applicability Statement">
<link href="#rfc.section.4" rel="Chapter" title="4 Abbreviations and Definitions">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Abbreviations">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Definitions">
<link href="#rfc.section.5" rel="Chapter" title="5 Requirements">
<link href="#rfc.section.6" rel="Chapter" title="6 Package Definition">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Event Package Name">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Event Package Parameters">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 SUBSCRIBE bodies">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Subscription Duration">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 Notify bodies">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 Notifier Processing of SUBSCRIBE requests">
<link href="#rfc.section.6.6.1" rel="Chapter" title="6.6.1 Authentication">
<link href="#rfc.section.6.6.2" rel="Chapter" title="6.6.2 Authorization">
<link href="#rfc.section.6.7" rel="Chapter" title="6.7 Notifier Generation of NOTIFY requests">
<link href="#rfc.section.6.8" rel="Chapter" title="6.8 Subscriber Processing of NOTIFY Requests">
<link href="#rfc.section.6.9" rel="Chapter" title="6.9 Handling of Forked Requests">
<link href="#rfc.section.6.10" rel="Chapter" title="6.10 Rate of Notifications">
<link href="#rfc.section.6.11" rel="Chapter" title="6.11 State Agents">
<link href="#rfc.section.7" rel="Chapter" title="7 Comm-div-info filter and notifier documents">
<link href="#rfc.section.8" rel="Chapter" title="8 Structure of Comm-div-info filter and notifier formats">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Comm-div-info Element">
<link href="#rfc.section.8.1.1" rel="Chapter" title="8.1.1 comm-div-subs-info Element">
<link href="#rfc.section.8.1.1.1" rel="Chapter" title="8.1.1.1 comm-div-selection-criteria">
<link href="#rfc.section.8.1.1.1.1" rel="Chapter" title="8.1.1.1.1 originating-user-selection-criteria">
<link href="#rfc.section.8.1.1.1.1.1" rel="Chapter" title="8.1.1.1.1.1 user-info">
<link href="#rfc.section.8.1.1.1.1.1.1" rel="Chapter" title="8.1.1.1.1.1.1 User-name">
<link href="#rfc.section.8.1.1.1.1.1.2" rel="Chapter" title="8.1.1.1.1.1.2 User-URI">
<link href="#rfc.section.8.1.1.1.2" rel="Chapter" title="8.1.1.1.2 diversion-time-selection-criteria">
<link href="#rfc.section.8.1.1.1.2.1" rel="Chapter" title="8.1.1.1.2.1 time-range">
<link href="#rfc.section.8.1.1.1.2.1.1" rel="Chapter" title="8.1.1.1.2.1.1 start-time">
<link href="#rfc.section.8.1.1.1.2.1.2" rel="Chapter" title="8.1.1.1.2.1.2 end-time">
<link href="#rfc.section.8.1.1.1.3" rel="Chapter" title="8.1.1.1.3 diverting-user-selection-criteria">
<link href="#rfc.section.8.1.1.1.4" rel="Chapter" title="8.1.1.1.4 diverted-to-user-selection-criteria">
<link href="#rfc.section.8.1.1.1.5" rel="Chapter" title="8.1.1.1.5 diversion-reason-selection-criteria">
<link href="#rfc.section.8.1.1.1.5.1" rel="Chapter" title="8.1.1.1.5.1 diversion-reason-info">
<link href="#rfc.section.8.1.1.1.6" rel="Chapter" title="8.1.1.1.6 number-of-diversions-selection-criteria">
<link href="#rfc.section.8.1.1.1.7" rel="Chapter" title="8.1.1.1.7 number-of-notifications-selection-criteria">
<link href="#rfc.section.8.1.1.2" rel="Chapter" title="8.1.1.2 comm-div-ntfy-trigger-criteria">
<link href="#rfc.section.8.1.1.2.1" rel="Chapter" title="8.1.1.2.1 notification-time-selection-criteria">
<link href="#rfc.section.8.1.1.2.2" rel="Chapter" title="8.1.1.2.2 presence-status-selection-criteria">
<link href="#rfc.section.8.1.1.2.2.1" rel="Chapter" title="8.1.1.2.2.1 presence-selection-info">
<link href="#rfc.section.8.1.1.2.3" rel="Chapter" title="8.1.1.2.3 notification-buffer-interval">
<link href="#rfc.section.8.1.2" rel="Chapter" title="8.1.2 Comm-div-ntfy-info Element">
<link href="#rfc.section.8.1.2.1" rel="Chapter" title="8.1.2.1 originating-user-info">
<link href="#rfc.section.8.1.2.2" rel="Chapter" title="8.1.2.2 diverting-user-info">
<link href="#rfc.section.8.1.2.3" rel="Chapter" title="8.1.2.3 diverted-to-user-info">
<link href="#rfc.section.8.1.2.4" rel="Chapter" title="8.1.2.4 diversion-time-info">
<link href="#rfc.section.8.1.2.5" rel="Chapter" title="8.1.2.5 diversion-reason-info">
<link href="#rfc.section.8.1.2.6" rel="Chapter" title="8.1.2.6 previous cdivn state">
<link href="#rfc.section.8.1.3" rel="Chapter" title="8.1.3 Comm-div-info-selection-criteria">
<link href="#rfc.section.8.1.3.1" rel="Chapter" title="8.1.3.1 disable-originating-user-info">
<link href="#rfc.section.8.1.3.2" rel="Chapter" title="8.1.3.2 disable-diverting-user-info">
<link href="#rfc.section.8.1.3.3" rel="Chapter" title="8.1.3.3 disable-diverted-to-user-info">
<link href="#rfc.section.8.1.3.4" rel="Chapter" title="8.1.3.4 disable-diversion-time-info">
<link href="#rfc.section.8.1.3.5" rel="Chapter" title="8.1.3.5 disable-diversion-reason">
<link href="#rfc.section.8.1.3.6" rel="Chapter" title="8.1.3.6 disable-diversion-rule">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Sample comm-div-info subscription and notification body">
<link href="#rfc.section.8.2.1" rel="Chapter" title="8.2.1 Instance of communication diversion subscription filter document">
<link href="#rfc.section.8.2.2" rel="Chapter" title="8.2.2 Instance of communication diversion notification document">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Schema">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 IANA Considerations">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Communication Diversion Information Event Package Registration">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.references.1" rel="Chapter" title="12.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="12.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Change log">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="3GPP and TISPAN are defining the protocol specification for the Communication Diversion (CDIV) service using IP Multimedia (IM) Core Network (CN) subsystem supplementary service.  As part of CDIV, a SIP based Event package framework is used for notifying users about diversions (re-directions or forwarding) of their incoming communication sessions.  This document proposes a new SIP event package for allowing users to subscribe to and receive such notifications.  Users can further define filters to control the rate and content of such notifications.  The proposed event package is applicable to the CDIV supplementary service in IMS and may not be applicable to the general internet.  .  " />
  <meta name="description" content="3GPP and TISPAN are defining the protocol specification for the Communication Diversion (CDIV) service using IP Multimedia (IM) Core Network (CN) subsystem supplementary service.  As part of CDIV, a SIP based Event package framework is used for notifying users about diversions (re-directions or forwarding) of their incoming communication sessions.  This document proposes a new SIP event package for allowing users to subscribe to and receive such notifications.  Users can further define filters to control the rate and content of such notifications.  The proposed event package is applicable to the CDIV supplementary service in IMS and may not be applicable to the general internet.  .  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">DISPATCH</td>
<td class="right">R. Avasarala, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Polycom</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">J. Bakker</td>
</tr>
<tr>
<td class="left">Expires: April 22, 2012</td>
<td class="right">Research in Motion Corporation</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 20, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">None<br />
  <span class="filename">A Session Initiation Protocol (SIP) Event Package for Communication Diversion Information in support of the Communication Diversion (CDIV) Notification (CDIVN) CDIV service  draft-avasarala-dispatch-comm-div-notification-08.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>3GPP and TISPAN are defining the protocol specification for the Communication Diversion (CDIV) service using IP Multimedia (IM) Core Network (CN) subsystem supplementary service.  As part of CDIV, a SIP based Event package framework is used for notifying users about diversions (re-directions or forwarding) of their incoming communication sessions.  This document proposes a new SIP event package for allowing users to subscribe to and receive such notifications.  Users can further define filters to control the rate and content of such notifications.  The proposed event package is applicable to the CDIV supplementary service in IMS and may not be applicable to the general internet.  .  </p>
<p>The IETF has been notified of intellectual property rights claimed in regard to some or all of the specification contained in this document.  For more information consult the online list of claimed rights.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 22, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Applicability Statement</a>
</li>
<li>4.   <a href="#rfc.section.4">Abbreviations and Definitions</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Abbreviations</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Definitions</a>
</li>
<li>5.   <a href="#rfc.section.5">Requirements</a>
</li>
<li>6.   <a href="#rfc.section.6">Package Definition</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Event Package Name</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Event Package Parameters</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">SUBSCRIBE bodies</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Subscription Duration</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">Notify bodies</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">Notifier Processing of SUBSCRIBE requests</a>
</li>
<li>6.6.1.   <a href="#rfc.section.6.6.1">Authentication</a>
</li>
<li>6.6.2.   <a href="#rfc.section.6.6.2">Authorization</a>
</li>
<li>6.7.   <a href="#rfc.section.6.7">Notifier Generation of NOTIFY requests</a>
</li>
<li>6.8.   <a href="#rfc.section.6.8">Subscriber Processing of NOTIFY Requests</a>
</li>
<li>6.9.   <a href="#rfc.section.6.9">Handling of Forked Requests</a>
</li>
<li>6.10.   <a href="#rfc.section.6.10">Rate of Notifications</a>
</li>
<li>6.11.   <a href="#rfc.section.6.11">State Agents</a>
</li>
<li>7.   <a href="#rfc.section.7">Comm-div-info filter and notifier documents</a>
</li>
<li>8.   <a href="#rfc.section.8">Structure of Comm-div-info filter and notifier formats</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Comm-div-info Element</a>
</li>
<li>8.1.1.   <a href="#rfc.section.8.1.1">comm-div-subs-info Element</a>
</li>
<li>8.1.1.1.   <a href="#rfc.section.8.1.1.1">comm-div-selection-criteria</a>
</li>
<li>8.1.1.1.1.   <a href="#rfc.section.8.1.1.1.1">originating-user-selection-criteria</a>
</li>
<li>8.1.1.1.1.1.   <a href="#rfc.section.8.1.1.1.1.1">user-info</a>
</li>
<li>8.1.1.1.1.1.1.   <a href="#rfc.section.8.1.1.1.1.1.1">User-name</a>
</li>
<li>8.1.1.1.1.1.2.   <a href="#rfc.section.8.1.1.1.1.1.2">User-URI</a>
</li>
<li>8.1.1.1.2.   <a href="#rfc.section.8.1.1.1.2">diversion-time-selection-criteria</a>
</li>
<li>8.1.1.1.2.1.   <a href="#rfc.section.8.1.1.1.2.1">time-range</a>
</li>
<li>8.1.1.1.2.1.1.   <a href="#rfc.section.8.1.1.1.2.1.1">start-time</a>
</li>
<li>8.1.1.1.2.1.2.   <a href="#rfc.section.8.1.1.1.2.1.2">end-time</a>
</li>
<li>8.1.1.1.3.   <a href="#rfc.section.8.1.1.1.3">diverting-user-selection-criteria</a>
</li>
<li>8.1.1.1.4.   <a href="#rfc.section.8.1.1.1.4">diverted-to-user-selection-criteria</a>
</li>
<li>8.1.1.1.5.   <a href="#rfc.section.8.1.1.1.5">diversion-reason-selection-criteria</a>
</li>
<li>8.1.1.1.5.1.   <a href="#rfc.section.8.1.1.1.5.1">diversion-reason-info</a>
</li>
<li>8.1.1.1.6.   <a href="#rfc.section.8.1.1.1.6">number-of-diversions-selection-criteria</a>
</li>
<li>8.1.1.1.7.   <a href="#rfc.section.8.1.1.1.7">number-of-notifications-selection-criteria</a>
</li>
<li>8.1.1.2.   <a href="#rfc.section.8.1.1.2">comm-div-ntfy-trigger-criteria</a>
</li>
<li>8.1.1.2.1.   <a href="#rfc.section.8.1.1.2.1">notification-time-selection-criteria</a>
</li>
<li>8.1.1.2.2.   <a href="#rfc.section.8.1.1.2.2">presence-status-selection-criteria</a>
</li>
<li>8.1.1.2.2.1.   <a href="#rfc.section.8.1.1.2.2.1">presence-selection-info</a>
</li>
<li>8.1.1.2.3.   <a href="#rfc.section.8.1.1.2.3">notification-buffer-interval</a>
</li>
<li>8.1.2.   <a href="#rfc.section.8.1.2">Comm-div-ntfy-info Element</a>
</li>
<li>8.1.2.1.   <a href="#rfc.section.8.1.2.1">originating-user-info</a>
</li>
<li>8.1.2.2.   <a href="#rfc.section.8.1.2.2">diverting-user-info</a>
</li>
<li>8.1.2.3.   <a href="#rfc.section.8.1.2.3">diverted-to-user-info</a>
</li>
<li>8.1.2.4.   <a href="#rfc.section.8.1.2.4">diversion-time-info</a>
</li>
<li>8.1.2.5.   <a href="#rfc.section.8.1.2.5">diversion-reason-info</a>
</li>
<li>8.1.2.6.   <a href="#rfc.section.8.1.2.6">previous cdivn state</a>
</li>
<li>8.1.3.   <a href="#rfc.section.8.1.3">Comm-div-info-selection-criteria</a>
</li>
<li>8.1.3.1.   <a href="#rfc.section.8.1.3.1">disable-originating-user-info</a>
</li>
<li>8.1.3.2.   <a href="#rfc.section.8.1.3.2">disable-diverting-user-info</a>
</li>
<li>8.1.3.3.   <a href="#rfc.section.8.1.3.3">disable-diverted-to-user-info</a>
</li>
<li>8.1.3.4.   <a href="#rfc.section.8.1.3.4">disable-diversion-time-info</a>
</li>
<li>8.1.3.5.   <a href="#rfc.section.8.1.3.5">disable-diversion-reason</a>
</li>
<li>8.1.3.6.   <a href="#rfc.section.8.1.3.6">disable-diversion-rule</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Sample comm-div-info subscription and notification body</a>
</li>
<li>8.2.1.   <a href="#rfc.section.8.2.1">Instance of communication diversion subscription filter document</a>
</li>
<li>8.2.2.   <a href="#rfc.section.8.2.2">Instance of communication diversion notification document</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Schema</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">IANA Considerations</a>
</li>
<li>10.1.   <a href="#rfc.section.10.1">Communication Diversion Information Event Package Registration</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li>12.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>12.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Change log</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">3GPP is currently maintaining and specifying communication diversion mechanisms which allow users to forward and/or redirect incoming communications to other destinations.  The intention of such mechanisms is to provide users with sufficient flexibility to manage their incoming communications in a better way.  The most common example is Communication Forward On Busy (CFB) where in users can forward any incoming calls, whilst they are busy on some other call, to their voice mail or a suitable alternative (e.g. some other user).  Similarly other variants of communication diversion are well defined and used in practice such as Communication Forward on No Answer (CFNA), Communication Forward Unconditional (CFU).  Similarly 3GPP is currently maintaining and specifying a mechanism for Users to configure Communication Diversion Services ([1] and [2]) for their incoming communications.  The intention of such mechanisms is to provide Users with sufficient flexibility to manage their incoming communications in a better way <br><br> However, with the increasing usage of Communication Diversion services, users may have many different variants and configurations active at the same time.  For instance, a user may have various CFU services configured differently based on the time-of-the-day and the Calling party's identity, or CFB based on the time-of-the-day.  This is possible by having various such configured diversions by subscribing to different Communication Diversion (CDIV) services as specified by 3GPP.  Though, there has been quite active work in the area of better customization and configuration of such Communication Diversion mechanisms, not much attention has been paid to how the Users can manage these services in an effective manner.  With the various advanced options and high flexibility provided, it is possible that the user loses track of the various Communication Diversion configurations or services they have registered for <br><br> One of the basic ways, by which a user can manage a CDIV service is to be informed of which services they have registered for.  For example, [1] and [2] allow for such indications to be received by the subscriber, at the time of initiating an outgoing call.  However, simply showing the registered services is not sufficient, since each service may be customized in numerous and different ways for different criteria.  For example various instantiations of CFB may be configured for different times-of-the-day and different calling party identities.  Even if subscribers are shown information about all the Communication Diversion services and their variants that they are registered for, they may not be able to make sense or verify that each of them is correct as per their expectation.  Such a mismatch in terms of service behavior expectation and actual execution, may happen due to incorrect configuration on behalf of the User, which cannot be easily detected if there are various communication diversion services and their different configurations for handling incoming connections.  <br><br> A probable and suitable instance, when the subscriber may easily judge whether a communication diversion is correct, is when it actually takes place.  The subscriber is already aware of the current conditions (time-of-day, current presence and availability etc) and hence is in a position to decide, whether the communication diversion which just occurred, was indeed as per their expectation.  For e.g.  the subscriber wanted to divert all incoming calls to voice-mail, between 3.00 p.m. to 4.00 p.m.  Yet, by mistake she configures the time-duration as 3.00 to 4.00 p.m.  It would be very difficult for her to spot this error while manually reviewing her complete set of communication diversion services, with their various configurations.  Instead, if the subscriber receives a real-time notification of any communication diversion occurring after 4 p.m., she would be able to immediately guess that something is 'wrong' or not as per her intention and take corrective action.  Such corrective action could be manual verification of the specific rule which triggered the communication diversion, wherein she will be able to spot the "mistake" more easily.  <br><br> Thus, for effective subscriber services management of multiple configurations of various Communication Diversion services, a notification-based mechanism may work well.  Such a mechanism would involve notifying subscribers about diversions of their incoming communications, as and when the communication diversion happens or with a slight delay (as per subscriber service configuration).  As such diversion-related information is conveyed almost instantly or within a small time-frame, the subscribers can verify whether the particular communication diversion is indeed correct at that instant of time.  <br><br> This document defines a SIP event package that allows a SIP User Agents to subscribe to and be notified of communication diversions enacted on their behalf.  <br><br> </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">In this document, the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as described in RFC 2119 <a href="#RFC2119">[RFC2119]</a> and indicate requirement levels for compliant implementations.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Applicability Statement</h1>
<p id="rfc.section.3.p.1">It is believed that the SIP event package defined here is not applicable to the general Internet and has been designed to serve the architecture of the CDIV service in IMS core networks. The aim of this memo is to follow the procedure indicated in RFC 5727.  <a href="#RFC5727">[RFC5727]</a> and to register a new event package with event name "comm-div-info" with IANA.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Abbreviations and Definitions</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Abbreviations</h1>
<p></p>

<ul class="empty">
<li>CDIV: Communication Diversion. </li>
<li>CDIVN: Communication Diversion Notification. </li>
<li>TISPAN: Telecommunications and Internet Converged Services and Protocols for Advanced Networking. </li>
</ul>

<p> </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Definitions</h1>
<p></p>

<ul class="empty">
<li>Subscriber - The User Agent who has subscribed to the Communication diversion notification service. </li>
<li>User - Another term for the subscriber. </li>
<li>Diverting User - The User Agent who has configured a Communication Diversion. This could be the User Agent who has configured the Communication DIversion service rules in the network. </li>
<li>Diverted-To Entity/User - The User Agent who is the new target of the incoming communication, post execution of any configured Communication Diversion service.</li>
<li>Originating User - The User Agent who is the originator of the incoming communication, which was initially targeted towards the Diverting User, but finally sent to the Diverted-To User.  The Originating User is also referred to as the Caller. </li>
<li>IMS Core Network - This refers to the IMS based SIP based network that conforms to the <a href="#3GPP.24.229">[3GPP.24.229]</a> and not the general SIP network as defined in <a href="#RFC3261">[RFC3261]</a>.</li>
</ul>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Requirements</h1>
<p id="rfc.section.5.p.1">The Communication Diversion Notification (CDIVN) service enables a user to receive notification about the diversion of any of his/her incoming communications, which were addressed to the user's address. A comprehensive description of all the requirements that affect the CDIVN service developed by 3GPP and TIPSAN is found in <a href="#3GPP.22.173">[3GPP.22.173]</a> and <a href="#3GPP.24.604">[3GPP.24.604]</a> </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Package Definition</h1>
<p id="rfc.section.6.p.1">This section fills in the details needed for an event package as defined in Section 4.4 of <a href="#RFC3265">[RFC3265]</a>.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Event Package Name</h1>
<p id="rfc.section.6.1.p.1">The SIP Events specification requires package definitions to specify the name of their package or template-package.  <br><br> The name of this package is "comm-div-info". As specified in <a href="#RFC3265">[RFC3265]</a>, this value appears in the Event header present in SUBSCRIBE and NOTIFY requests. </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Event Package Parameters</h1>
<p id="rfc.section.6.2.p.1">The SIP Events specification <a href="#RFC3265">[RFC3265]</a> allows packages to define additional parameters. This event package "comm-div-info" does not define additional parameters.  . </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> SUBSCRIBE bodies</h1>
<p id="rfc.section.6.3.p.1">The SIP Events specification requires package or template-package definitions to define the usage, if any, of bodies in SUBSCRIBE requests.  <br><br> A SUBSCRIBE for Communication Diversion event MAY contain a body. The purpose of the body depends on its type. Subscriptions to the Comm-div-info event package SHALL only include a body of MIME type "application/comm-div-info-filter+xml".  <br><br> A body of the SUBSCRIBE request with content type set to MIME type "application/comm-div-info-filter+xml" contains information about the communication diversion notification information filter criteria and notification trigger criteria.  The subscriber SHALL also verify that this information conforms to a valid XML document as defined in [11].  The subscriber SHALL also verify that the information contained in the XML document contains elements defined in <a href="#sel">Section 8.1.1.1</a> only.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Subscription Duration</h1>
<p id="rfc.section.6.4.p.1">The default expiration time for subscriptions within this package is 3600 seconds.  As per <a href="#RFC3265">[RFC3265]</a>, the subscriber MAY specify an alternate expiration in the Expires header field.  </p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> Notify bodies</h1>
<p id="rfc.section.6.5.p.1">The SIP Events specification requires package definitions to define a default value for subscription durations, and to discuss reasonable choices for durations when they are explicitly specified.  <br><br> The NOTIFY message contains bodies.  This body is a format listed in the Accept header field of the SUBSCRIBE request or a package specific default format if the Accept header field was omitted from the SUBSCRIBE request <br><br> In this event package, the body of the notification contains the communication diversion information pertaining to the diversion that occurred in the network on behalf of the subscriber. The format of the communication diversion information is an XML document as per elements defined in <a href="#comm-div-ntfy-info">Section 8.1.2</a>.  <br><br> All subscribers of "comm-div-info" event package who wish to add filter criteria to their subscription requests MUST support the application/comm-div-info-filter+xml" data format as described in <a href="#comm-div-subs-info">Section 8.1.1</a> while the notifiers SHALL support the "application/comm-div-info+xml" data format as described in <a href="#comm-div-ntfy-info">Section 8.1.2</a>.  The SUBSCRIBE request MAY contain an Accept header field.  If no such header field is present, it has a default value of "application/comm-div-info-ntfy+xml" (assuming Event header has a value of "comm-div-info-ntfy").  If the Accept header field is present, it MUST contain the value "application/comm-div-info-ntfy+xml" only.  </p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> <a href="#NotifierP" id="NotifierP">Notifier Processing of SUBSCRIBE requests</a>
</h1>
<p id="rfc.section.6.6.p.1">The contents of a document containing comm-div-info information can contain sensitive information that can reveal some privacy information.  Therefore, such comm-div-info documents MUST only be sent to authorized subscribers. In order to determine if a subscription originates in an authorized user, the subscriber MUST be authenticated as described in <a href="#Auth">Section 6.6.1</a> and then the user MUST be authorized to be a subscriber as described in <a href="#Autho">Section 6.6.2</a>.  <br><br> The Notifier MUST check if the SUBSCRIBE request contains a body. If there is a body, the Notifier MUST do the following.  <br><br> NOTE: It could be possible that the state information be empty as this is the first notification sent towards the subscriber in response to the SUBSCRIBE request and no communication diversions have occurred yet.  </p>

<ul class="empty">
<li>Check if the SUBSCRIBE request body conforms to application/comm-div-info-filter+xml document. If not, trigger a error response. E.g. 415 Media Type Unsupported response. </li>
<li>If the body conforms to application/comm-div-info-filter+xml document, then the Notifier process the filter criteria and generates notifications accordingly. </li>
<li>If the SUBSCRIBE request contains a request body and if the Notifier does not support it, it simply ignores it. The notifications are sent as if there was no filter criteria.</li>
</ul>

<p> </p>
<h1 id="rfc.section.6.6.1">
<a href="#rfc.section.6.6.1">6.6.1.</a> <a href="#Auth" id="Auth">Authentication</a>
</h1>
<p id="rfc.section.6.6.1.p.1">Notifiers MUST authenticate all subscription requests.  This authentication can be done using any of the mechanisms defined in <a href="#RFC3261">[RFC3261]</a> and other authentication extensions.  </p>
<h1 id="rfc.section.6.6.2">
<a href="#rfc.section.6.6.2">6.6.2.</a> <a href="#Autho" id="Autho">Authorization</a>
</h1>
<p id="rfc.section.6.6.2.p.1">Once authenticated, the notifier makes an authorization decision.  A notifier MUST NOT accept a subscription unless authorization has been provided by the user.  The means by which authorization are provided are outside the scope of this document.  Authorization may have been provided ahead of time through access lists, perhaps specified in a web page.  Authorization may have been provided by means of uploading some kind of standardized access control list document </p>
<h1 id="rfc.section.6.7">
<a href="#rfc.section.6.7">6.7.</a> <a href="#NotifierG" id="NotifierG">Notifier Generation of NOTIFY requests</a>
</h1>
<p id="rfc.section.6.7.p.1">The SIP Events specification details the formatting and structure of NOTIFY messages. However, packages are mandated to provide detailed information on when to send a NOTIFY, how to compute the state of the resource, how to generate neutral or fake state information, and whether state information is complete or partial.  This section describes those details for the "comm-div-info" event package.  <br><br> A notifier sends a NOTIFY request when a communication diversion is enacted on behalf of the user. If there is a stored filter criteria for the user, then the notifier MUST look into the filter criteria before generating the NOTIFY request towards the user. If the filter criteria matches, then the notifier generates the NOTIFY request and sends the NOTIFY request to the user. If the filter criteria does not match the enacted communication diversion, then the notifier does not send any notification towards the subscriber.  <br><br> The body of the NOTIFY MUST be sent using the type "application/comm-div-info-ntfy+xml" and must contain the elements defined in <a href="#comm-div-ntfy-info">Section 8.1.2</a> only. The Content-Type header field MUST be set to "application/comm-div-info-ntfy+xml".  <br><br> Notifiers could detect that a communication diversion was enacted on behalf of the subscriber via a "History-Info" header field <a href="#RFC4244">[RFC4244]</a> value, per <a href="#3GPP.24.404">[3GPP.24.404]</a> or <a href="#3GPP.24.604">[3GPP.24.604]</a>, sent from an application server hosting the CDIV service.  </p>
<h1 id="rfc.section.6.8">
<a href="#rfc.section.6.8">6.8.</a> Subscriber Processing of NOTIFY Requests</h1>
<p id="rfc.section.6.8.p.1">The SIP Events specification expects event packages to describe the process followed by the subscriber upon receipt of a NOTIFY request. In this specification, each NOTIFY request contains a comm-div-info document </p>
<h1 id="rfc.section.6.9">
<a href="#rfc.section.6.9">6.9.</a> Handling of Forked Requests</h1>
<p id="rfc.section.6.9.p.1">The SIP Events specification requires each package to describe handling of forked Requests.  <br><br> This specification only allows a single dialog to be constructed as a result of emitting an initial SUBSCRIBE request. This guarantees that only a single notifier is generating notifications for a particular subscription to a particular user.  <br><br> But if forking is allowed, then the server that receives multiple subscriptions should be able to generate a single dialog on behalf of all the subscriptions that are received. Any subsequent subscriptions should be mapped to the generated dialog. Similarly when the server receives a single notification for the generated dialog, it should be generate the corresponding number of notifications towards the received notifications.  </p>
<h1 id="rfc.section.6.10">
<a href="#rfc.section.6.10">6.10.</a> Rate of Notifications</h1>
<p id="rfc.section.6.10.p.1">The SIP Events specification requires each package to specify maximum rate at which notifications can be sent .  <br><br> Comm-div-info notifiers SHOULD NOT generate notifications for a single subscription at a rate of more than once every five seconds.  </p>
<h1 id="rfc.section.6.11">
<a href="#rfc.section.6.11">6.11.</a> <a href="#state" id="state">State Agents</a>
</h1>
<div id="#rfc.figure.1"></div>
<div id="#Figure 1"></div>
<pre>
     
+------------+  Diversion  +---------------+
|            +--+---------&gt;+               |
|   IDLE     |  ^          |   DIVERSION   |
|            |  |  +------&gt;+   DETECTED    |
+------------+  |  |       +--+----+-------+
                |  | no match      |  |filter
                +------------------+  |match
                   |                  v
                   |          +-------+-------+
                   |          |   DIVERSION   |
                   |          |    NOTIFIED   |
                   |          +-----+---------+
                   |    Diversion   |
                   +----------------+
          
  </pre>
<p id="rfc.section.6.11.p.1">An FSM associated with the subscriber is created in the "IDLE" state, e.g. upon receiving filter criteria.  When a communication diversion is detected for a URI of the subscriber, a state transition to the "DIVERSION_DETECTED" state occurs.  In this state, if present the filter criteria are used to determine whether notification information needs to be sent to the subscriber or not. If notification information needs to be sent, the Notifier generates the notification information and sends the information to the subscriber.  Additionally, a state transition to the "DIVERSION_NOTIFIED" state occurs.  <br><br> The FSM for CDIVN is shown in below Figure.  </p>
<p id="rfc.section.6.11.p.2">The subscriber could receive, as part of the notification information, the state the FSM was in prior to detecting the diversion.  </p>

<ul>
<li>[IDLE]: meaning that there have been no missed diversions since setting the present "filter".</li>
<li>[DIVERSION_NOTIFIED]: meaning that there have been no missed diversions. </li>
<li>[DIVERSION_DETECTED]: meaning that there have been some missed diversions. </li>
</ul>

<p> </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Comm-div-info" id="Comm-div-info">Comm-div-info filter and notifier documents</a>
</h1>
<p id="rfc.section.7.p.1">Comm-div-info document is an XML document <a href="#W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a> that MUST be well-formed and SHOULD be valid. Communication Diversion Information documents MUST be based on XML 1.0 and MUST be encoded using UTF-8 <a href="#RFC4745">[RFC4745]</a>.   </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#comm-div-info-doc" id="comm-div-info-doc">Structure of Comm-div-info filter and notifier formats</a>
</h1>
<p id="rfc.section.8.p.1">A Communications Diversion Information document starts with a "comm-div-info" element.  The comm-div-info element has a series of elements describing the particular communication diversion or the filter criteria for receiving the communication diversion information.  </p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#comm-div-info-ele" id="comm-div-info-ele">Comm-div-info Element</a>
</h1>
<p id="rfc.section.8.1.p.1">The comm-div-info element gives information about the specific communication diversion or it could give information about a particular selection criteria for the user receiving the communication diversion information.   </p>
<h1 id="rfc.section.8.1.1">
<a href="#rfc.section.8.1.1">8.1.1.</a> <a href="#comm-div-subs-info" id="comm-div-subs-info">comm-div-subs-info Element</a>
</h1>
<p id="rfc.section.8.1.1.p.1">The comm-div-subs-info element is used by the subscribing user to specify the communication diversion information selection criteria and the communication diversion notification trigger criteria. It contains the following elements: </p>
<h1 id="rfc.section.8.1.1.1">
<a href="#rfc.section.8.1.1.1">8.1.1.1.</a> <a href="#sel" id="sel">comm-div-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.p.1">This element contains information about communication diversion information selection criteria. It contains following sub-elements for specifying the selection criteria. </p>
<h1 id="rfc.section.8.1.1.1.1">
<a href="#rfc.section.8.1.1.1.1">8.1.1.1.1.</a> <a href="#orig" id="orig">originating-user-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.1.p.1">This element specifies the originating user information for the communication i.e. the caller. This is specified in the form of "user-name" and "user-uri". E.g. sip:Alice@domain.com. The Username as well as User-URI specified will be compared with the originating user information of the current user and if there is a match, then information about the diversion of this specific communication would be selected for notification to the Diverting user. It consists of the following sub-elements. </p>
<h1 id="rfc.section.8.1.1.1.1.1">
<a href="#rfc.section.8.1.1.1.1.1">8.1.1.1.1.1.</a> <a href="#ui-info" id="ui-info">user-info</a>
</h1>
<p id="rfc.section.8.1.1.1.1.1.p.1">This element gives user details like username and URI. This element has further sub-elements for describing username and user URI</p>
<h1 id="rfc.section.8.1.1.1.1.1.1">
<a href="#rfc.section.8.1.1.1.1.1.1">8.1.1.1.1.1.1.</a> <a href="#uu" id="uu">User-name</a>
</h1>
<p id="rfc.section.8.1.1.1.1.1.1.p.1">This element gives Username. "Alice". </p>
<h1 id="rfc.section.8.1.1.1.1.1.2">
<a href="#rfc.section.8.1.1.1.1.1.2">8.1.1.1.1.1.2.</a> <a href="#ui" id="ui">User-URI</a>
</h1>
<p id="rfc.section.8.1.1.1.1.1.2.p.1">This element gives User URI. E.g "sip:Alice@domain.com". It takes the form of any URI scheme like sip.  sips, tel or any other URI scheme</p>
<h1 id="rfc.section.8.1.1.1.2">
<a href="#rfc.section.8.1.1.1.2">8.1.1.1.2.</a> <a href="#div-time-sel" id="div-time-sel">diversion-time-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.2.p.1">This element specifies the time range for receiving notifications. It contains following additional elements .</p>
<h1 id="rfc.section.8.1.1.1.2.1">
<a href="#rfc.section.8.1.1.1.2.1">8.1.1.1.2.1.</a> <a href="#time" id="time">time-range</a>
</h1>
<p id="rfc.section.8.1.1.1.2.1.p.1">This element specifies the time range at which notifications for communication diversions can be sent to the subscriber. This could be specified in the form of a time-interval to enable periodic triggering of notifications of communication diversions which took place in that time-interval.  <br><br> NOTE: If the time-range element is not specified, then notifications about every communication diversion that occurs is sent to the subscriber.  </p>
<h1 id="rfc.section.8.1.1.1.2.1.1">
<a href="#rfc.section.8.1.1.1.2.1.1">8.1.1.1.2.1.1.</a> <a href="#start" id="start">start-time</a>
</h1>
<p id="rfc.section.8.1.1.1.2.1.1.p.1">This element specifies the start time for receiving notifications. Its value is expressed in YYYY:MM:DDTHH:MM:SSZ format.</p>
<h1 id="rfc.section.8.1.1.1.2.1.2">
<a href="#rfc.section.8.1.1.1.2.1.2">8.1.1.1.2.1.2.</a> <a href="#end" id="end">end-time</a>
</h1>
<p id="rfc.section.8.1.1.1.2.1.2.p.1">This element specifies the end time for receiving notifications. Its value is expressed in YYYY:MM:DDTHH:MM:SSZ format.  </p>
<h1 id="rfc.section.8.1.1.1.3">
<a href="#rfc.section.8.1.1.1.3">8.1.1.1.3.</a> <a href="#diving-user-sel" id="diving-user-sel">diverting-user-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.3.p.1">This element gives details of diverting user. This element could contain the value present in P-Called-Party-ID header field and by including the identity in the "diverting-user-info", the receiving UE would know if the call was diverted because a rule associated with e.g. the "work" public user identities was triggered. The URI specified over here will be compared with the Request URI of the diverting user for whom a communication has been diverted.  Only if there is a  match, then information about the diversion of this specific communication would be selected for notification to the diverting user.  This is an optional parameter.  If absent, then communication diversions towards all registered contacts of the subscribing user would be considered for notification, subject to other filter criteria. This element consists of sub-elements defined for "user-info" element <a href="#uu">Section 8.1.1.1.1.1.1</a> </p>
<h1 id="rfc.section.8.1.1.1.4">
<a href="#rfc.section.8.1.1.1.4">8.1.1.1.4.</a> <a href="#dived-user-sel" id="dived-user-sel">diverted-to-user-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.4.p.1">This element gives details of the final target of the communication, the divered-to user.  The URI specified in the Request URI of the new request is compared with the specified diverted-to URI. Only if there is a match, then information about the diversion of this specific communication would be selected for notification to the Diverting user. This element consists of sub-elements defined for "user-info" element <a href="#uu">Section 8.1.1.1.1.1.1</a>.  </p>
<h1 id="rfc.section.8.1.1.1.5">
<a href="#rfc.section.8.1.1.1.5">8.1.1.1.5.</a> <a href="#div-rea-sel" id="div-rea-sel">diversion-reason-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.5.p.1">This element contains the reason for communication diversion. It contains following sub-element: </p>
<h1 id="rfc.section.8.1.1.1.5.1">
<a href="#rfc.section.8.1.1.1.5.1">8.1.1.1.5.1.</a> <a href="#div-reason" id="div-reason">diversion-reason-info</a>
</h1>
<p id="rfc.section.8.1.1.1.5.1.p.1">This element gives the actual reason for the communication diversion. E.g. "Call Forward on Busy".</p>
<h1 id="rfc.section.8.1.1.1.6">
<a href="#rfc.section.8.1.1.1.6">8.1.1.1.6.</a> <a href="#div-num-sel" id="div-num-sel">number-of-diversions-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.6.p.1">This element contains the total number of diversions that occurred in network on behalf of the user till then. </p>
<h1 id="rfc.section.8.1.1.1.7">
<a href="#rfc.section.8.1.1.1.7">8.1.1.1.7.</a> <a href="#div-not-sel" id="div-not-sel">number-of-notifications-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.1.7.p.1">This element contains the total number of communication diversion notifications sent by the network to user till then. </p>
<h1 id="rfc.section.8.1.1.2">
<a href="#rfc.section.8.1.1.2">8.1.1.2.</a> <a href="#comm-div-ntfy-tri" id="comm-div-ntfy-tri">comm-div-ntfy-trigger-criteria</a>
</h1>
<h1 id="rfc.section.8.1.1.2.1">
<a href="#rfc.section.8.1.1.2.1">8.1.1.2.1.</a> <a href="#ntfy-time-sel" id="ntfy-time-sel">notification-time-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.2.1.p.1">This element informs the server about the time at which the notification should be triggered. </p>
<h1 id="rfc.section.8.1.1.2.2">
<a href="#rfc.section.8.1.1.2.2">8.1.1.2.2.</a> <a href="#pres-sel" id="pres-sel">presence-status-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.1.2.2.p.1">This element gives the presence status of the subscriber, based on which the decision can be made, whether the subscriber wishes to receive notification information or not. </p>
<h1 id="rfc.section.8.1.1.2.2.1">
<a href="#rfc.section.8.1.1.2.2.1">8.1.1.2.2.1.</a> <a href="#pres-info" id="pres-info">presence-selection-info</a>
</h1>
<p id="rfc.section.8.1.1.2.2.1.p.1">This element specifies the presence status of the subscriber within which the subscriber expects to receive notifications about communication diversions.  </p>
<h1 id="rfc.section.8.1.1.2.3">
<a href="#rfc.section.8.1.1.2.3">8.1.1.2.3.</a> <a href="#not-bu" id="not-bu">notification-buffer-interval</a>
</h1>
<p id="rfc.section.8.1.1.2.3.p.1">This element specifies an optional element (in seconds) to overwrite the CDIVN Buffer Timer for which the CDIVN Application Server should store the CDIV Notification, if it cannot be delivered to the subscriber, For example this would be required for buffering the notifications, if the user is logged out and the diversion is triggered due to CFNL/CFNRc, resulting in CDIVN for that diversion. The user may set Notification Buffer Interval value in seconds to a maximum value of 1 day. Also, if not configured by the user, the default value of 1 day (as configured by the network provider) is applicable.  </p>
<h1 id="rfc.section.8.1.2">
<a href="#rfc.section.8.1.2">8.1.2.</a> <a href="#comm-div-ntfy-info" id="comm-div-ntfy-info">Comm-div-ntfy-info Element</a>
</h1>
<p id="rfc.section.8.1.2.p.1">This element gives the notification information. This element has following sub-elements: </p>
<h1 id="rfc.section.8.1.2.1">
<a href="#rfc.section.8.1.2.1">8.1.2.1.</a> originating-user-info</h1>
<p id="rfc.section.8.1.2.1.p.1">Refer to <a href="#orig">Section 8.1.1.1.1</a> for details of this element. </p>
<h1 id="rfc.section.8.1.2.2">
<a href="#rfc.section.8.1.2.2">8.1.2.2.</a> <a href="#diving-user" id="diving-user">diverting-user-info</a>
</h1>
<p id="rfc.section.8.1.2.2.p.1">This element gives details of the diverting user.  This is an optional element and would be present only if the subscriber has requested it. If absent, it is assumed that the diversion occurred at one of the registered contacts.  </p>
<h1 id="rfc.section.8.1.2.3">
<a href="#rfc.section.8.1.2.3">8.1.2.3.</a> <a href="#dived-user" id="dived-user">diverted-to-user-info</a>
</h1>
<p id="rfc.section.8.1.2.3.p.1">This element gives details of the final target of the communication i.e. the diverted-to user.  This element consists of sub-elements defined for "user-info" element. </p>
<h1 id="rfc.section.8.1.2.4">
<a href="#rfc.section.8.1.2.4">8.1.2.4.</a> <a href="#div-time" id="div-time">diversion-time-info</a>
</h1>
<p id="rfc.section.8.1.2.4.p.1">This element gives the time of communication diversion. Its value is expressed in YYYY:MM:DDTHH:MM:SS format.  </p>
<h1 id="rfc.section.8.1.2.5">
<a href="#rfc.section.8.1.2.5">8.1.2.5.</a> <a href="#div-reas" id="div-reas">diversion-reason-info</a>
</h1>
<p id="rfc.section.8.1.2.5.p.1">This element contains an integer value and gives the actual reason for the communication diversion.  The integer value of the element is mapped to the causes defined in <a href="#RFC4458">[RFC4458]</a>.  Specifically, the integer value is derived from the cause-param parameter in the History-info header field.  The subscriber converts the integer value of the element into a localized diversion reason according to locale settings (i.e. preferred language)..</p>
<h1 id="rfc.section.8.1.2.6">
<a href="#rfc.section.8.1.2.6">8.1.2.6.</a> <a href="#prev-state" id="prev-state">previous cdivn state</a>
</h1>
<p id="rfc.section.8.1.2.6.p.1">This element gives the previous state of CDIVN FSM. </p>
<h1 id="rfc.section.8.1.3">
<a href="#rfc.section.8.1.3">8.1.3.</a> <a href="#comm-div-info-sel" id="comm-div-info-sel">Comm-div-info-selection-criteria</a>
</h1>
<p id="rfc.section.8.1.3.p.1">This element gives the subscriber various options to select communication diversion information. This element has following sub-elements. </p>
<h1 id="rfc.section.8.1.3.1">
<a href="#rfc.section.8.1.3.1">8.1.3.1.</a> <a href="#dis-orig" id="dis-orig">disable-originating-user-info</a>
</h1>
<p id="rfc.section.8.1.3.1.p.1">This element gives the subscriber option of adding originating user information to the notification information. The default value is false which means the subscriber wants the originating-user-info element to be present in the notification information.  </p>
<h1 id="rfc.section.8.1.3.2">
<a href="#rfc.section.8.1.3.2">8.1.3.2.</a> <a href="#dis-divi-u" id="dis-divi-u">disable-diverting-user-info</a>
</h1>
<p id="rfc.section.8.1.3.2.p.1">This element gives the subscriber option of adding diverting-user information to the notification information.  The default value is false which means the subscriber wants the diverting-user-info element to be present in the notification information.  </p>
<h1 id="rfc.section.8.1.3.3">
<a href="#rfc.section.8.1.3.3">8.1.3.3.</a> <a href="#dis-divt-u" id="dis-divt-u">disable-diverted-to-user-info</a>
</h1>
<p id="rfc.section.8.1.3.3.p.1">This element gives the subscriber option of adding diverting-to-user information to the notification information.  The default value is false which means the subscriber wants the diverted-to-user-info element to be present in the notification information.  </p>
<h1 id="rfc.section.8.1.3.4">
<a href="#rfc.section.8.1.3.4">8.1.3.4.</a> <a href="#dis-div-time" id="dis-div-time">disable-diversion-time-info</a>
</h1>
<p id="rfc.section.8.1.3.4.p.1">This element gives the subscriber option of adding diversion-time information to the notification information.  The default value is false which means the subscriber wants the diversion-time-info to be present in the notification information.  </p>
<h1 id="rfc.section.8.1.3.5">
<a href="#rfc.section.8.1.3.5">8.1.3.5.</a> <a href="#dis-div-rea" id="dis-div-rea">disable-diversion-reason</a>
</h1>
<p id="rfc.section.8.1.3.5.p.1">This element gives the subscriber option of adding diversion-reason information to the notification information.   The default value is false which means the subscriber wants the diversion-reason information to be present in the notification information.  </p>
<h1 id="rfc.section.8.1.3.6">
<a href="#rfc.section.8.1.3.6">8.1.3.6.</a> <a href="#dis-div-rule" id="dis-div-rule">disable-diversion-rule</a>
</h1>
<p id="rfc.section.8.1.3.6.p.1">This element gives the subscriber option of adding diversion-rule information to the notification information. The default value is false which means the subscriber wants the diversion-rule information to be present in the notification information.  </p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#samnot" id="samnot">Sample comm-div-info subscription and notification body</a>
</h1>
<h1 id="rfc.section.8.2.1">
<a href="#rfc.section.8.2.1">8.2.1.</a> Instance of communication diversion subscription filter document</h1>
<div id="#rfc.figure.2"></div>
<pre>
          
&lt;comm-div-info&gt;
  &lt;comm-div-subs-info&gt;
      &lt;comm-div-selection-criteria&gt;
         &lt;originating-user-selection-criteria&gt;
           &lt;user-info&gt;
             &lt;user-name&gt;Boss&lt;/user-name&gt;
             &lt;user-URI&gt;
               sip:boss@office.com
             &lt;/user-URI&gt;
           &lt;/user-info&gt;
         &lt;/originating-user-selection-criteria&gt;
         &lt;diversion-time-selection-criteria&gt;
           &lt;time-range&gt;
            &lt;start-time&gt;1999-05-31T13:20:00-05:00Z&lt;/start-time&gt;
            &lt;end-time&gt;2006-05-06T13:20:00-05:00Z&lt;/end-time&gt;
           &lt;/time-range&gt;
         &lt;/diversion-time-selection-criteria&gt;
         &lt;diversion-reason-selection-criteria&gt;
           &lt;diversion-reason-info&gt;404&lt;/diversion-reason-info&gt;
         &lt;/diversion-reason-selection-criteria&gt;
       &lt;/comm-div-selection-criteria&gt;
       &lt;comm-div-ntfy-trigger-criteria&gt;
         &lt;notification-time-selection-criteria&gt;
           &lt;time-range&gt;
            &lt;start-time&gt;1999-05-31T13:20:00-05:00Z&lt;/start-time&gt;
            &lt;end-time&gt;2006-05-06T13:20:00-05:00Z&lt;/end-time&gt;
           &lt;/time-range&gt;
         &lt;/notification-time-selection-criteria&gt;
       &lt;/comm-div-ntfy-trigger-criteria&gt;
   &lt;/comm-div-subs-info&gt;
&lt;/comm-div-info&gt;
         
       </pre>
<h1 id="rfc.section.8.2.2">
<a href="#rfc.section.8.2.2">8.2.2.</a> Instance of communication diversion notification document</h1>
<div id="#rfc.figure.3"></div>
<pre>
          
&lt;comm-div-info&gt;
  &lt;comm-div-ntfy-info&gt;
    &lt;originating-user-info&gt;
      &lt;user-name&gt;Boss&lt;/user-name&gt;
      &lt;user-URI&gt;sip:boss@office.com&lt;/user-URI&gt;
    &lt;/originating-user-info&gt;
    &lt;diverting-user-info&gt;
      sip:alice@office.com
    &lt;/diverting-user-info&gt;
    &lt;diverted-to-user-info&gt;
      sip:bob@office.com
    &lt;/diverted-to-user-info&gt;
    &lt;diversion-time-info&gt;1999-06-01T13:20:00-05:00Z
    &lt;/diversion-time-info&gt;
    &lt;diversion-reason-info&gt;404&lt;/diversion-reason-info&gt;
  &lt;/comm-div-ntfy-info&gt;
&lt;/comm-div-info&gt;
          
       </pre>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> <a href="#schema" id="schema">Schema</a>
</h1>
<div id="#rfc.figure.4"></div>
<pre>
     
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;xs:schema 
  targetNamespace="http://uri.etsi.org/ngn/params/xml/comm-div-info"  
  xmlns:tns="http://uri.etsi.org/ngn/params/xml/comm-div-info"  
  xmlns:xs="http://www.w3.org/2001/XMLSchema"  
  xmlns="http://uri.etsi.org/ngn/params/xml/comm-div-info" 
  elementFormDefault="qualified" 
  attributeFormDefault="unqualified"&gt;
  &lt;!--
  This import brings in the XML language definition
  --&gt;
  &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
    schemaLocation="http://www.w3.org/2001/03/xml.xsd"/&gt;
  &lt;!-- 
  Communication Diversion Information. This is the top-level XML element 
  --&gt;
  &lt;xs:element name="comm-div-info" 
    type="comm-div-info-type" /&gt; 
  &lt;!--
  Communication Diversion Information Type. This is the top-level XML
  element 
  --&gt;
  &lt;xs:complexType name="comm-div-info-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="comm-div-subs-info"
        type="comm-div-subs-info-type" minOccurs="0" /&gt;
      &lt;xs:element name="comm-div-ntfy-info"
        type="comm-div-ntfy-info-type" minOccurs="0" /&gt;
      &lt;xs:any namespace="##other" processContents="lax"
        minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="entity" type="xs:anyURI" 
      use="required"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!---
  Communication Diversion Subscription Type.
  Used at Subscription time to
        select Communication Diversions for notification,
        when to notify them and
        what to notify.
  --&gt;
  &lt;xs:complexType name="comm-div-subs-info-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="comm-div-selection-criteria"
        type="comm-div-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="comm-div-ntfy-trigger-criteria"
        type="comm-div-ntfy-trigger-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="comm-div-info-selection-criteria"
        type="comm-div-info-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="previous_cdivn-state"
        type="cdivn-states-types" maxOccurs="0" /&gt;
      &lt;xs:any namespace="##other" processContents="lax"
        minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!---
  Communication Diversion Notification Information Type
  Used while notifying the User about the Communication Diversion
  --&gt;
  &lt;xs:complexType name="comm-div-ntfy-info-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="originating-user-info"
        type="user-info-type" minOccurs="0" /&gt;
      &lt;xs:element name="diverting-user-info"
        type="xs:anyURI" minOccurs="0" /&gt;
      &lt;xs:element name="diverted-to-user-info"
        type="xs:anyURI" minOccurs="0" /&gt;
      &lt;xs:element name="diversion-time-info" 
        type="xs:dateTime" minOccurs="0" /&gt;
      &lt;xs:element name="diversion-reason-info"
        type="diversion-reason-info-type" minOccurs="0" /&gt;
      &lt;xs:element name="diversion-rule-info"
        type="diversion-rule-info-type" minOccurs="0" /&gt;
      &lt;xs:any namespace="##other" processContents="lax"
        minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  COMMUNICATION DIVERSION SELECTION CRITERIA
  --&gt;
  &lt;xs:complexType name="comm-div-selection-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="originating-user-selection-criteria"
        type="user-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="diverting-user-selection-criteria"
        type="xs:anyURI" 
        minOccurs="0" /&gt;
      &lt;xs:element name="diverted-to-user-selection-criteria"
        type="xs:anyURI" 
        minOccurs="0" /&gt;
      &lt;xs:element name="diversion-time-selection-criteria"
        type="time-range-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="diversion-reason-selection-criteria"
        type="diversion-reason-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:any namespace="##other" processContents="lax"
        minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  COMMUNICATION DIVERSION NOTIFICATION TRIGGER CRITERIA
  --&gt;
  &lt;xs:complexType name="comm-div-ntfy-trigger-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="notification-time-selection-criteria"
        type="time-range-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="presence-status-selection-criteria"
        type="presence-status-selection-criteria-type" 
        minOccurs="0" /&gt;
      &lt;xs:element name="notification-buffer-interval" minOccurs="0" 
      default="86400"&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base="xs:integer"&gt;
            &lt;xs:maxInclusive value="86400"/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:element&gt;
      &lt;xs:any namespace="##other" processContents="lax"
        minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  COMMUNICATION DIVERSION INFORMATION SELECTION CRITERIA
  --&gt;
  &lt;xs:complexType name="comm-div-info-selection-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="disable-originating-user-info"
        type="xs:boolean" default="false" minOccurs="0" /&gt;
      &lt;xs:element name="disable-diverting-user-info"
        type="xs:boolean" default="false" minOccurs="0" /&gt;
      &lt;xs:element name="disable-diverted-to-user-info"
        type="xs:boolean" default="false" minOccurs="0" /&gt;
      &lt;xs:element name="disable-diversion-time-info"
        type="xs:boolean" default="false" minOccurs="0" /&gt;
      &lt;xs:element name="disable-diversion-reason-info"
        type="xs:boolean" default="false" minOccurs="0" /&gt;
      &lt;xs:element name="disable-diversion-rule-info"
        type="xs:boolean" default="false" minOccurs="0" /&gt;
      &lt;xs:any namespace="##other" processContents="lax"
        minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- User Info Type --&gt;
  &lt;xs:complexType name="user-info-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="user-name" type="xs:string" minOccurs="0" 
      maxOccurs="1"/&gt;
      &lt;xs:element name="user-URI" type="xs:anyURI"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  CDIVN FSM STATES
  --&gt;
    &lt;xs:simpleType name="cdivn-states-types"&gt;
        &lt;xs:list itemType="cdivn-states-type"/&gt;
    &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="cdivn-states-type"&gt;
        &lt;xs:restriction base="xs:string"&gt;
            &lt;xs:enumeration value="IDLE"/&gt;
            &lt;xs:enumeration value="DIVERSION_NOTIFIED"/&gt;
            &lt;xs:enumeration value="DIVERSION_DETECTED"/&gt;
        &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;!--    
  DIVERSION REASON INFO
  --&gt;
    &lt;xs:simpleType name="diversion-reason-info-types"&gt;
        &lt;xs:list itemType="diversion-reason-info-type"/&gt;
    &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="diversion-reason-info-type"&gt;
        &lt;xs:restriction base="xs:integer"&gt;
            &lt;xs:enumeration value="404"/&gt;
            &lt;xs:enumeration value="486"/&gt;
            &lt;xs:enumeration value="408"/&gt;
            &lt;xs:enumeration value="302"/&gt;
            &lt;xs:enumeration value="487"/&gt;
            &lt;xs:enumeration value="480"/&gt;
            &lt;xs:enumeration value="503"/&gt;
        &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;!--    
  DIVERSION RULE INFO
  --&gt;
  &lt;xs:complexType name="diversion-rule-info-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="diversion-rule" type="xs:string"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  ORIGINATING USER SELECTION CRITERIA
  --&gt;
  &lt;xs:complexType name="user-selection-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="user-info" 
        type="user-info-type" minOccurs="0"
        maxOccurs="unbounded" /&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  DIVERSION REASON SELECTION CRITERIA
  --&gt;
  &lt;xs:complexType name="diversion-reason-selection-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="diversion-reason-info" 
        type="diversion-reason-info-types"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  TIME RANGE SELECTION CRITERIA
  --&gt;
  &lt;xs:complexType name="time-range-selection-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="time-range" 
        type="time-range-type" minOccurs="0" 
        maxOccurs="unbounded" /&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  TIME RANGE INFO
  --&gt;
  &lt;xs:complexType name="time-range-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="start-time" type="xs:dateTime" /&gt;
      &lt;xs:element name="end-time" type="xs:dateTime" /&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  PRESENCE STATUS SELECTION CRITERIA
  --&gt;
  &lt;xs:complexType name="presence-status-selection-criteria-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="presence-status-info" 
        type="presence-status-info-type" minOccurs="0"
        maxOccurs="unbounded" /&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
  PRESENCE STATUS INFO
  --&gt;
  &lt;xs:complexType name="presence-status-info-type"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="presence-status" type="xs:string" /&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
     
   </pre>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#sec-cond" id="sec-cond">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">Authentication and authorization of subscriptions have been discussed in <a href="#NotifierP">Section 6.6</a>.  Lack of authentication or authorization may provide comm-div-info information to unauthorized parties and can reveal sensitive information with regards to the user's call receiving patterns.  For example, who calls the user and at what time, etc.  <br><br> Integrity protection and confidentiality of notifications are also discussed in <a href="#NotifierG">Section 6.7</a>.  If a notifier does not encrypt bodies of NOTIFY requests, an eavesdropper could learn the status of a SIP user agent and use it to create malicious sessions.  If the notifier does not integrity protect the bodies of NOTIFY requests, a man-in- the-middle attacker or malicious SIP proxy could modify the contents of the comm-div-info event package notification.  Although this does not cause harm, it can create annoyances. </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> IANA Considerations</h1>
<p id="rfc.section.10.p.1">This document registers the new SIP Event Package. </p>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> Communication Diversion Information Event Package Registration</h1>
<div id="#rfc.figure.5"></div>
<pre>
     
Package Name: Comm-div-info

Type: Package

Contact:  Jon Merdith, &lt;John.meredith@3gpp.org&gt;

Published Specification: RFC XXXX (Note to RFC Editor)
     
    </pre>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> Acknowledgements</h1>
<p id="rfc.section.11.p.1">The authors would like to thank Mary Barnes, Samir Saklikar, Subir Saha, Ban Al-Bakri, Roland Jesske, Jose Miguel Torres, Paul Kyzivat, John Elwell , Keith Drage , Gonzalo Camarillo and Dean Willis for their valuable comments and suggestions. </p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">12.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="1">[1]</b></td>
<td class="top">
<a>3GPP</a>, "<a>Communication Diversion (CDIV) using IP Multimedia (IM) Core Network (CN) subsystem;  Protocol specification</a>", 3GPP TS 24.604 10.2.0, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="2">[2]</b></td>
<td class="top">
<a>3GPP</a>, "<a>TISPAN; PSTN/ISDN simulation services: Communication Diversion (CDIV); Protocol specification</a>", 3GPP TS 24.404 7.5.0, June 2009.</td>
</tr>
<tr>
<td class="reference"><b id="3">[3]</b></td>
<td class="top">
<a>3GPP</a>, "<a>IP Multimedia Core Network Subsystem (IMS) Multimedia Telephony Service and supplementary services; Stage 1</a>", 3GPP TS 22.173 10.3.0, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="4">[4]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="5">[5]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="6">[6]</b></td>
<td class="top">
<a>Peterson, J.</a>, <a>Jennings, C.</a> and <a>R. Sparks</a>, "<a href="http://tools.ietf.org/html/rfc5727">Change Process for the Session Initiation Protocol (SIP) and the Real-time Applications and Infrastructure Area</a>", BCP 67, RFC 5727, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="7">[7]</b></td>
<td class="top">
<a>Roach, A.B.</a>, "<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>", RFC 3265, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="8">[8]</b></td>
<td class="top">
<a>Barnes, M.</a>, "<a href="http://tools.ietf.org/html/rfc4244">An Extension to the Session Initiation Protocol (SIP) for Request History Information</a>", RFC 4244, November 2005.</td>
</tr>
<tr>
<td class="reference"><b id="9">[9]</b></td>
<td class="top">
<a>Jennings, C.</a>, <a>Audet, F.</a> and <a>J. Elwell</a>, "<a href="http://tools.ietf.org/html/rfc4458">Session Initiation Protocol (SIP) URIs for Applications such as Voicemail and Interactive Voice Response (IVR)</a>", RFC 4458, April 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">12.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="1">[1]</b></td>
<td class="top">
<a>3GPP</a>, "<a>IP multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3</a>", 3GPP TS 24.229 10.5.0, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="2">[2]</b></td>
<td class="top">
<a>Maler, E.</a>, <a>Paoli, J.</a>, <a>Bray, T.</a> and <a>C. Sperberg-McQueen</a>, "<a>Extensible Markup Language (XML) 1.0 (Second Edition)</a>", World Wide Web Consortium FirstEdition REC-xml-20001006, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="3">[3]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Tschofenig, H.</a>, <a>Morris, J.</a>, <a>Cuellar, J.</a>, <a>Polk, J.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/rfc4745">Common Policy: A Document Format for Expressing Privacy Preferences</a>", RFC 4745, February 2007.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Change log</h1>
<div id="#rfc.figure.6"></div>
<pre>
    
[RFC EDITOR NOTE: Please remove this section when publishing]
       
    </pre>
<p id="rfc.section.Appendix A.p.1">Changes from draft-avasarala-dispatch-comm-div-notification-07 </p>

<ul>
<li>Added MIME type for communication diversion filter criteria.</li>
<li>Updated the State Agents section to add state diagram for CDIVN Service.</li>
<li>Updated the schema for CDIVN notification document. </li>
<li>Updated the Acknowledgements section.</li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.2">Changes from draft-avasarala-dispatch-comm-div-notification-06 </p>

<ul>
<li>Changed the namespace for XML schema to "http://urn.etsi.org" aligning with 3GPP TS 24.504</li>
<li>Updated the XML schema and removed the word "optional" for "diverting-user-info" </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.3">Changes from draft-avasarala-dispatch-comm-div-notification-05 </p>

<ul>
<li>Updated Requirements section </li>
<li>Incorporated expert review comments for state information, notification content and subscribe bodies </li>
<li>Modified the section on examples for subscription and notification body </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.4">Changes from draft-avasarala-dispatch-comm-div-notification-04 </p>

<ul>
<li>Incorporated review comments </li>
<li>Added text for SUBSCRIBE body and NOTIFY body and checking of filter criteria. </li>
<li>Updated Communication Diversion Notification Information document and XML schema to add Diversion and notification count information as optional parameters.</li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.5">Changes from draft-avasarala-dispatch-comm-div-notification-03 </p>

<ul>
<li>Added State information to Notifiers. </li>
<li>Modified diverting-URI definition and element in communication diversion information selection criteria as optional parameter . </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.6">Changes from draft-avasarala-dispatch-comm-div-notification-02 </p>

<ul>
<li>Modified the applicability statement to make it more IMS specific. </li>
<li>Added a definition for IMS Core network. </li>
<li>Updated authors list and Acknowledgement sections. </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.7">Changes from draft-avasarala-dispatch-comm-div-notification-01 </p>

<ul>
<li>Incorporated review comments. </li>
<li>Modified contact details for co author Subir Saha. </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.8">Changes from draft-avasarala-sipping-comm-div-notification-00 </p>

<ul>
<li>Changed contact details of co author Subir Saha. </li>
<li>Moved from SIPPING to DISPATCH WG. </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix A.p.9">Changes from draft-avasarala-dispatch-comm-div-notification-00 </p>

<ul>
<li>Added comm-div-info document structure information and schema for the event package.  </li>
<li>Added more elaborate description for various sections in comm-div-info document </li>
</ul>

<p> </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ranjit Avasarala</span> editor
	  <span class="n hidden">
		<span class="family-name">Avasarala</span>
	  </span>
	</span>
	<span class="org vcardline">Polycom Technology India Pvt Ltd</span>
	<span class="adr">
	  <span>Manyata Embassy Business Park,</span>

	  <span class="vcardline">
		<span class="locality">Bangalore </span>,  
		<span class="region"></span>
		<span class="code">560045 </span>
	  </span>
	  <span class="country-name vcardline">India </span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ranjit.avasarala@polycom.com">ranjit.avasarala@polycom.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">John Luc Bakker</span> 
	  <span class="n hidden">
		<span class="family-name">Bakker</span>
	  </span>
	</span>
	<span class="org vcardline">Research in Motion</span>
	<span class="adr">
	  <span>5000 Riverside Drive, Building 6, Suite 100 </span>

	  <span class="vcardline">
		<span class="locality">Irving, Texas </span>,  
		<span class="region"></span>
		<span class="code">75039 </span>
	  </span>
	  <span class="country-name vcardline">USA </span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jbakker@rim.com">jbakker@rim.com</a></span>

  </address>
</div>

</body>
</html>