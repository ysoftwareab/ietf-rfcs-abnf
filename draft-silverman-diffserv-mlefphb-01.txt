

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
       
       
      Differentiated Services                   S. Silverman 
      Internet Draft                             D. Sullivan 
      Category: Experimental              Houston Associates 
      draft-silverman-diffserv-mlefphb-01.txt      M. Pierce 
        					       Artel 
      Expires: Oct. 2003                            Don Choi                 
         		  Defense Information Systems Agency 
       
       
       
      Multi-Level Expedited Forwarding Per Hop Behavior (MLEF PHB) 
       
       
   Status of this Memo 
       
      This document is an Internet-Draft and is in full conformance 
      with all provisions of Section 10 of RFC2026 [1].  
       
      Internet-Drafts are working documents of the Internet Engineering 
      Task Force (IETF), its areas, and its working groups.  Note that      
      other groups may also distribute working documents as Internet-
      Drafts. 
       
      Internet-Drafts are draft documents valid for a maximum of six 
      months and may be updated, replaced, or obsoleted by other 
      documents at any time.  It is inappropriate to use Internet-
      Drafts as reference material or to cite them other than as "work 
      in progress." 
       
      The list of current Internet-Drafts can be accessed at 
           http://www.ietf.org/ietf/1id-abstracts.txt 
      The list of Internet-Draft Shadow Directories can be accessed at 
           http://www.ietf.org/shadow.html. 
       
      Status of this Memo...............................................1 
      1. INTRODUCTION...................................................2 
      2. Applicability..................................................3 
         2.1 Scope......................................................3 
         2.2 Security Considerations....................................4 
      3. References.....................................................4 
      4. Author's Addresses.............................................4 
      5. Appendix   Examples............................................5 
       
    
    
      Silverman             Expires û Oct. 2003                 [Page 1] 
    

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
       
       
       
   Abstract 
       
      Some networks require certain connections to have greater 
      priority than others.  This draft defines a new PHB (Per Hop 
      Behavior), the Multi-Level Expedited Forwarding (MLEF) PHB.  The 
      standard Expedited Forwarding PHB (RFC3246) defines a PHB for 
      applications requiring low latency.  This document extends that 
      concept and defines a PHB with multiple priority levels for 
      applications requiring low latency.   
       
      Conventions used in this document 
       
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL 
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and 
      "OPTIONAL" in this document are to be interpreted as described in 
      RFC-2119 [2]. 
       
       
      Table of Contents 
       
       
   1. INTRODUCTION 
       
      This draft defines an experimental Per Hop Behavior (PHB) to 
      support the Multi-Level Precedence & Preemption function (MLPP) 
      which is required by the U.S. Department of Defense and various 
      other government organizations in both the US and other 
      countries. This draft is an extension of RFC 3246.  RFC 3246 
      requires that packets be dropped if in excess of the "negotiated 
      rate". This draft extends the EF PHB and describes a dropping 
      algorithm based on multiple Differentiated Services Code Points 
      (DSCPs) values by providing different amounts of buffering for 
      different DSCPs.  
      Background 
      Military networks are often unable to provision all of the 
      bandwidth that their users need. The widespread use of mobile 
      platforms (limiting the use of fiber optic trunks), the need to 
      avoid detection, and the exposure to unexpected loss of resources 
      aggravate this problem.  A partial solution to this problem is 
      the Multi-Level Precedence & Preemption function (MLPP).  This 
      assigns priority to certain users.  If there is congestion in the 
      voice network, higher priority calls get precedence for various 
    
    
      Silverman             Expires û Oct. 2003                 [Page 2] 
    

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
      resources relative to lower priority users. In certain private 
      networks, some users may be preempted by higher priority users. 
      This function is intended for use in those private networks that 
      require this function. THIS DOES NOT INCLUDE PREEMPTION IN THE 
      PUBLIC NETWORK.  In the traditional Circuit-Switched telephone 
      networks, this function has been supported for forty years.   
       
   2. Applicability 
       
      This PHB will be experimental and optional and is expected to be 
      deployed only on certain private networks.   
       
   2.1 Scope 
       
      This draft defines the Per Hop Behavior (PHB) to support multiple 
      priority levels in Expedited Forwarding.  It does not define the 
      signaling required to establish the priority connections, the 
      accounting that might be required, or security issues that should 
      be addressed in conjunction with the use of this PHB. 
       
      Overview 
      Expedited Forwarding [RFC3246] limited the buffer queue of an 
      output port to a size that would not introduce significant delay 
      into a hop by monitoring the queue occupancy and admitting new 
      packets to the queue only if the buffer occupancy was below a 
      configured threshold. This resulted in dropping of packets that 
      were in excess of the configured capacity. MLEF extends this by 
      making the thresholds for dropping packets a function of class, 
      which is based on priority level.  The buffer size, the 
      Differentiated Services Code Points (DSCPs) for each class, and 
      the per class thresholds may be configured for each router 
      supporting this option. 
       
      Draft-pierce-ieprep-pref-treat-examples-00 describes how this  
      Multi-level packet dropping procedure replaces the need for 
      actual preemption. 
       
      Packet Processing 
      A configuration/initialization procedure would calculate the 
      maximum count in the buffer for each traffic class. 
      (MaxClassCnt(i) ).  This is the maximum buffer percentage times 
      the buffer size. 
       
      A maximum packet size should be specified as part of 
      configuration.  
    
    
      Silverman             Expires û Oct. 2003                 [Page 3] 
    

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
      As each packet is received, any packet larger than that maximum 
      should be dropped.  The current Buffer Occupancy Count (BOC), 
      expressed as a number of packets, is then checked against the 
      threshold limit for the Class (MaxClassCnt) and, if the BOC is 
      less than the limit, the packet is enqueued on the MLEF output 
      queue.  If the BOC is greater than or equal to this limit, the 
      packet is discarded.  
       
      All processing for this could be done at the byte level rather 
      than the packet level.  The process has been described dealing 
      with packets because at this time we believe that this will 
      simplify the processing and minimize the calculation load.  If 
      subsequent analysis shows that working with byte counts is more 
      efficient, that approach would be equivalent to the packet 
      approach.  Such an implementation would have no impact on 
      interoperability since this process affects which packets are 
      forwarded but does not change any packets. 
       
   2.2 Security Considerations 
       
      This document addresses a way to provide multiple priority levels 
      to sessions that require Expedited Forwarding.  Since the network 
      can not provide special service to all users, some form of 
      security is required so that only authorized users can invoke 
      these services.   
       
   3. References 
       
      1 Bradner, S., "Key words for use in RFCs to Indicate Requirement 
      Levels", BCP 14, RFC 2119, March 1997. 
      Bradner, S., "The Internet Standards Process -- Revision 3", BCP 
      9, RFC 2026, October 1996. 
      Davie, B., ôAn Expedited Forwarding PHB (Per-Hop Behavior)ö 
      RFC3246 
       
       
   4. Author's Addresses 
       
      Steve Silverman 
      Houston Associates Inc. 
      4601 N. Fairfax Drive, Arlington, VA 22203> 
      Phone: 540 631-0711 
      Email: <steves@shentel.net> 
       
      Dan Sullivan  
    
    
      Silverman             Expires û Oct. 2003                 [Page 4] 
    

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
      Houston Associates Inc. 
      4601 N. Fairfax Drive, Arlington, VA 22203> 
      Phone:703 284-8837 
      Email: dsullivan@hai.com 
       
      Michael Pierce 
      Artel 
      1893 Preston White Drive 
      Reston, VA 20191 
      Phone: +1 410.817.4795 
      Email: pierce1m@ncr.disa.mil 
       
      Don Choi 
      DISA 
      5600 Columbia Pike 
      Falls Church, VA 22041-2717 
      Phone: +1 703.681.2312 
      Email: choid@ncr.disa.mil 
       
       
       
   5. Appendix û Examples 
       
      Sample Procedure 
      The following is one possible way to implement the function 
      described above.  
       
       
      Variables  
       
      N = number of classes in the system.  One DSCP per class 
      i is the index for the traffic classes. It may take the value 
      from 1 to N. 
      MaxPacketSize:    the maximum packet size for a packet using this 
      behavior  
      MaxPacketCnt:  Number of packets buffered in this router for a 
      port for the MLEF PHB.  Output bandwidth rate times .75 (leaving 
      something for router control) * the maximum time that can be 
      added to a packet and still have it useful for voice (50 ms)  / 
      bits/pkt. This assumes several routers are in the call path. 
      BP(i) For each class, the buffer percentage that can be used  
      (range [0 û 1]) 
      MaxClassCnt(i)    For each class, = MaxPacketCnt * BP(i) rounded 
      up to an integer 

    
    
      Silverman             Expires û Oct. 2003                 [Page 5] 
    

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
      BOC   Buffer Occupancy Count  The number of MLEF packets in the 
      buffer.  
       
      Procedures: 
      Initial procedure:   
      Calculate PC(i)  
       
      For each incoming packet: 
      If pkt size > MaxPacketSize either discard packet or move to best 
      effort queue 
      If BOC  >= PC(i) discard packet 
      If BOC  < PC(i) then enqueue packet and increment BOC 
      End 
       
      Outgoing Packet 
      For each packet to be transmitted, dequeue packet, transmit, 
      decrement BOC 
         End 
       
      Sample Configuration for Emergency Services 
       
      This is an example of how this PHB could be used to provide 
      higher priority to emergency calls and even higher priority to  
      Emergency Administration calls.  The 200 byte packet size assumes 
      G.711, and 20 ms samples.  These parameters are initial 
      suggestions but they have not been tested. 
       
      Number            levels         	3                      
      Max Size pkt         	      200                     
      Number pkts         	       40                     
                                               
      DSCP   Name       Buffer
                            %         Rounded    
                                               
                                               
      44     Emer. Admin   1       36     36        
      45     Emergency    0.9      32.4   33        
      46     Routine      0.8      28.8   29        
       
       
      Sample Configuration for MLPP 
       
      This is an example of how the PHB could be used to support the 
      DOD requirement for MLPP.  It defines 5 classes of traffic.  The 

    
    
      Silverman             Expires û Oct. 2003                 [Page 6] 
    

    
   Internet-Draft      Multi-Level Expedited Forwarding      April 2003 
    
      calculation is for a T1, 1.54 Mb/s.  The 200 byte packet size 
      assumes G.711, and 20 ms samples.    
       
       
                        
       
   Number 
        levels                    5 
                                          
   Max Size pkt                   200 
                                          
   Number pkts                    36 
                                          
                                         
   DSCP    Name         Buffer
                            %           Rounded 
    42    Flash O           1        36         36 
    43    Flash             0.85     30.6       31 
    44    Immediate         0.7      25.2       26 
    45    Priority          0.6      21.6       22 
    46    Routine           0.5      18         18 
    
    






















    
    
      Silverman             Expires û Oct. 2003                 [Page 7] 
    


