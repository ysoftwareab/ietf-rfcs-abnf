IETF conneg working group                                 Graham Klyne
Internet draft                                5GM/Content Technologies
Category: Work-in-progress                               29 April 1999
                                                 Expires: October 1999


           MIME content types in media feature expressions
               <draft-ietf-conneg-feature-type-01.txt>


Status of this memo

  This document is an Internet-Draft and is in full conformance with
  all provisions of Section 10 of RFC 2026.

  Internet-Drafts are working documents of the Internet Engineering
  Task Force (IETF), its areas, and its working groups.  Note that
  other groups may also distribute working documents as Internet-
  Drafts.

  Internet-Drafts are draft documents valid for a maximum of six
  months and may be updated, replaced, or obsoleted by other
  documents at any time.  It is inappropriate to use Internet- Drafts
  as reference material or to cite them other than as "work in
  progress."

  The list of current Internet-Drafts can be accessed at
  http://www.ietf.org/ietf/1id-abstracts.txt

  The list of Internet-Draft Shadow Directories can be accessed at
  http://www.ietf.org/shadow.html.


Copyright Notice

  Copyright (C) The Internet Society 1999.  All Rights Reserved.

Abstract

  In "A syntax for describing media feature sets", an expression
  format is presented for describing media feature capabilities using
  simple media feature tags.

  This memo defines a media feature tag whose value is a MIME content
  type.  This allows the construction of feature expressions that
  take account of the MIME content type of the corresponding data.










Klyne                      Work-in-progress                   [Page 1]

Internet draft         MIME content types in media feature expressions
29 April 1999



Table of contents

  1. Introduction ............................................2
     1.1 Terminology and document conventions                 2
     1.2 Discussion of this document                          3
  2. Motivation and goals ....................................3
  3. MIME content type feature tag ...........................4
  4. Examples ................................................5
     4.1 Simple text                                          5
     4.2 Fax image                                            5
     4.3 Voice message                                        5
     4.4 Web browser capabilities                             5
  5. IANA considerations .....................................6
  6. Security considerations .................................6
  7. Full copyright statement ................................6
  8. Acknowledgements ........................................6
  9. References ..............................................7
  10. Author's address .......................................8
  Appendix A: 'Type' feature tag registration ................9
  Appendix B: Revision history ...............................10


1. Introduction

  In "A syntax for describing media feature sets" [1], an expression
  format is presented for describing media feature capabilities as a
  combination of simple media feature tags, registered according to
  "Media Feature Tag Registration Procedure" [2].  This provides a
  format for message handling agents to describe the media feature
  content of messages that they can handle.

  This memo defines a media feature tag whose value is a MIME content
  type.  This allows the construction of feature expressions that
  take account of the MIME content type of the corresponding data.

1.1 Terminology and document conventions

  This section defines a number of terms and other document
  conventions, which are used with specific meaning in this memo.

  media feature
            information that indicates facilities assumed to be
            available for the message content to be properly rendered
            or otherwise presented.  Media features are not intended
            to include information that affects message transmission.






Klyne                      Work-in-progress                   [Page 2]

Internet draft         MIME content types in media feature expressions
29 April 1999


  feature set
            some set of media features described by a media feature
            assertion, as described in "A syntax for describing media
            feature sets" [1].  (See that memo for a more formal
            definition of this term.)

  feature set expression
            a string that describes some feature set, formulated
            according to the rules in "A syntax for describing media
            feature sets" [1] (and possibly extended by other
            specifications).

  This specification uses syntax notation and conventions described
  in RFC 2234 "Augmented BNF for Syntax Specifications: ABNF" [3].

       NOTE:  Comments like this provide additional nonessential
       information about the rationale behind this document.
       Such information is not needed for building a conformant
       implementation, but may help those who wish to understand
       the design in greater depth.

1.2 Discussion of this document

  Discussion of this document should take place on the content
  negotiation and media feature registration mailing list hosted by
  the Internet Mail Consortium (IMC):

  Please send comments regarding this document to:

      ietf-medfree@imc.org

  To subscribe to this list, send a message with the body 'subscribe'
  to "ietf-medfree-request@imc.org".

  To see what has gone on before you subscribed, please see the
  mailing list archive at:

      http://www.imc.org/ietf-medfree/














Klyne                      Work-in-progress                   [Page 3]

Internet draft         MIME content types in media feature expressions
29 April 1999


2. Motivation and goals

  The media feature expression syntax [1] and feature tags [2] were
  designed with a view to providing content media information that
  augments basic MIME content type information.  There are some
  situations where it is useful to be able include that content type
  information in a media feature expression:

  o  Media feature details may depend upon the content type being
     used.  The media feature combining algebra and syntax [1] cannot
     be apply to content type information unless it appears in the
     feature expression.

     For example, in HTTP 1.1 [4] with Transparent Content Negotiation
     (TCN) [5] acceptable content types and other media features are
     indicated in different request headers, with no clear way to
     indicate that they may be acceptable only in certain
     combinations.

  o  It is sometimes useful for all media capability information to be
     included in a single expression.  For example, DSN and MDN
     extensions [6] that allow a recipient to indicate media
     capabilities provide a single field for conveying this
     information.

  o  When media features are used to describe a message content, they
     may refer to inner parts of a MIME composite;  e.g. the component
     parts of a 'multipart', files in a compressed archive, or
     encrypted message data.

3. MIME content type feature tag

  Feature tag name    Legal values
  ----------------    ------------
  type                <string>
                      containing any MIME content type value.

  Reference: this document, appendix A.

  The 'type' feature tag indicates a MIME media content type (i.e.
  that appears in a 'Content-type:' header in the corresponding MIME-
  formatted data).

  The media type should be given without any parameter values.  The
  intention here is that information that is conveyed in MIME content
  type parameters is more usefully handled in a media feature
  expression by separate feature tags.





Klyne                      Work-in-progress                   [Page 4]

Internet draft         MIME content types in media feature expressions
29 April 1999


       NOTE:  content type parameters in a 'type' value are
       strongly discouraged, but not prohibited.  In deciding
       whether or not to include a parameter value, implementers
       should bear in mind the feature set matching rules [1].
       These would cause 'type' values with and without
       parameters to be treated as completely distinct values,
       which may lead to unexpected results.

4. Examples

4.1 Simple text

     (& (type="text/plain") (color=binary) (paper-size=A4) )

4.2 Fax image

     (& (type="image/tiff")
        (color=binary)
        (image-file-structure=TIFF-S)
        (dpi=200)
        (dpi-xyratio=[200/100,200/200])
        (paper-size=A4)
        (image-coding=MH) (MRC-mode=0)
        (ua-media=stationery) )

4.3 Voice message

     (& (type="multipart/voice-message")
        (VPIM-version="3.0")
        (audio-codec=[G726-32,GSM-610])
        (audio-file-structure=[None,WAV])
        (ua-terminal=mobile-handset)
        (audio-channels=1) )

       NOTE:  in this case, some media features apply to MIME
       parts contained within the declared 'multipart/voice-
       message' content type.  The goal here is not so much to
       mirror the MIME structure as to convey useful information
       about the (possible) message content.













Klyne                      Work-in-progress                   [Page 5]

Internet draft         MIME content types in media feature expressions
29 April 1999


4.4 Web browser capabilities

     (& (pix-x<=800) (pix-y<=600)
        (| (& (type="text/html") (color=limited))
           (type="text/plain")
           (& (type="image/gif") (color=mapped))
           (& (type="image/jpeg") (color=full))))

  This example describes an HTML viewer that can deal with a limited
  number of color text tags, a gif viewer that supports mapped color,
  and a jpeg viewer that supports color.

5. IANA considerations

  Appendix A of this document calls for registrations of feature tags
  in the "IETF tree", as defined in section 3.1.1 of "Media Feature
  Tag Registration Procedure" [2] (i.e. these feature tags are
  subject to the "IETF Consensus" policies described in RFC 2434
  [9]).

  ASN.1 identifiers should be assigned for each of these registered
  feature tags and replaced in the body of the registration.

6. Security considerations

  This memo is not believed to introduce any security considerations
  that are not already inherent in the use of media feature tags and
  expressions [1,2].

7. Full copyright statement

  Copyright (C) The Internet Society 1999.  All Rights Reserved.

  This document and translations of it may be copied and furnished to
  others, and derivative works that comment on or otherwise explain
  it or assist in its implementation may be prepared, copied,
  published and distributed, in whole or in part, without restriction
  of any kind, provided that the above copyright notice and this
  paragraph are included on all such copies and derivative works.
  However, this document itself may not be modified in any way, such
  as by removing the copyright notice or references to the Internet
  Society or other Internet organizations, except as needed for the
  purpose of developing Internet standards in which case the
  procedures for copyrights defined in the Internet Standards process
  must be followed, or as required to translate it into languages
  other than English.

  The limited permissions granted above are perpetual and will not be
  revoked by the Internet Society or its successors or assigns.



Klyne                      Work-in-progress                   [Page 6]

Internet draft         MIME content types in media feature expressions
29 April 1999


  This document and the information contained herein is provided on
  an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET
  ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
  THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
  WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

8. Acknowledgements

  This proposal draws from discussions in the IETF 'conneg' working
  group.  The voice message example is based on some ideas by Glen
  Parsons.

  The author would like to thank the following people who offered
  comments that led to significant improvements:  Ted Hardie, Larry
  Masinter.

9. References

[1]  RFC 2253, "A syntax for describing media feature sets"
     Graham Klyne, 5GM/Content Technologies
     March 1999.

[2]  RFC 2506, "Media Feature Tag Registration Procedure"
     Koen Holtman, TUE
     Andrew Mutz, Hewlett-Packard
     Ted Hardie, NASA
     March 1999.

[3]  RFC 2234, "Augmented BNF for Syntax Specifications: ABNF"
     D. Crocker (editor), Internet Mail Consortium
     P. Overell, Demon Internet Ltd.
     November 1997.

[4]  RFC 2068, "Hyptertext Transfer Protocol -- HTTP/1.1"
     R. Fielding, UC Irvine
     J. Gettys,
     J. Mogul, DEC
     H. Frytyk,
     T. Berners-Lee, MIT/LCS
     January 1997.

[5]  RFC 2295, "Transparent Content Negotiation in HTTP"
     Koen Holtman, TUE
     Andrew Mutz, Hewlett Packard
     March 1998.






Klyne                      Work-in-progress                   [Page 7]

Internet draft         MIME content types in media feature expressions
29 April 1999


[6]  RFC 2530, "Indicating Supported Media Features Using Extensions
     to DSN and MDN"
     Dan Wing, Cisco Systems
     March 1999.

[7]  RFC 2045, "Multipurpose Internet Mail Extensions (MIME)
     Part 1: Format of Internet message bodies"
     N. Freed, Innosoft
     N. Borenstein, First Virtual
     November 1996.

[8]  RFC 2046, "Multipurpose Internet Mail Extensions (MIME)
     Part 2: Media types"
     N. Freed, Innosoft
     N. Borenstein, First Virtual
     November 1996.

[9]  RFC 2434, "Guidelines for Writing an IANA Considerations Section
     in RFCs"
     T. Narten, IBM
     H. Alvestrand, Maxware
     October 1998.

10. Author's address

  Graham Klyne
  5th Generation Messaging Ltd.    Content Technologies Ltd.
  5 Watlington Street              Forum 1, Station Road
  Nettlebed                        Theale
  Henley-on-Thames, RG9 5AB        Reading, RG7 4RA
  United Kingdom                   United Kingdom.
  Telephone: +44 1491 641 641      +44 118 930 1300
  Facsimile: +44 1491 641 611      +44 118 930 1301
  E-mail: GK@ACM.ORG


















Klyne                      Work-in-progress                   [Page 8]

Internet draft         MIME content types in media feature expressions
29 April 1999


Appendix A: 'Type' feature tag registration

  -  Media Feature tag name(s):

     Type

  -  ASN.1 identifiers associated with this feature tag:

     [[[New assignments by IANA]]]

  -  Summary of the media features indicated:

     This feature tag indicates a MIME content type that a message
     agent is capable of handling, or contained within some message
     data.

     The content type consists of the MIME media type and subtype,
     presented using all lower case letters and with any whitespace
     characters removed.

     In exceptional cases, content type parameters may be included, in
     which case the parameter name is also presented in lower case
     letters, with all whitespace surrounding the ';' and '=' removed.
     The parameter value should be presented in some canonical form.

  -  Values appropriate for use with this feature tag:

     String

  -  The feature tag is intended primarily for use in the following
     applications, protocols, services, or negotiation mechanisms:

     Any application that wishes to convey MIME content type
     information in a media feature expression.

  -  Examples of typical use:

     (type="text/plain")
     (type="text/plain;charset=iso-8859-1")

     The second example is not a recommended form.  But note that all
     spaces around the 'charset' parameter are removed, and the name
     and value are presented in lower case.

  -  Related standards or documents:

     MIME, RFC 2045 [7]

     MIME, RFC 2046 [8]



Klyne                      Work-in-progress                   [Page 9]

Internet draft         MIME content types in media feature expressions
29 April 1999


  -  Considerations particular to use in individual applications,
     protocols, services, or negotiation mechanisms:

     (N/A)

  -  Interoperability considerations:

     String feature matching is case sensitive, so consistent use of
     case for content type values and parameters is essential if
     content type value matching is to be achieved in a fashion
     consistent with MIME content type matching.

     Similarly, white space must be used consistently.

     This registration specifies a canonical form to be used for
     content type values (lower case letters and remove all
     whitespace).  If content type parameters are introduced, all
     letters and whitespace that are not part of the parameter value
     are treated similarly.  The canonical form for parameter values
     must be appropriate to the equivalence rules for that value.

  -  Related feature tags:

     (N/A)

  -  Intended usage:

     Common

  -  Author/Change controller:

     IETF




















Klyne                      Work-in-progress                  [Page 10]

Internet draft         MIME content types in media feature expressions
29 April 1999



Appendix B: Revision history

  00a  16-Feb-1999  Initial draft.

  01a  16-Feb-1999  Added pointers to mailing list for discussion.

  01b  04-Mar-1999  Various editorial improvements.

  01c  29-Apr-1999  Improved web browser example.

  TODO:

  o  Discuss:  should the feature syntax be extended to allow content
     types to be "unstringed", hence providing more relaxed matching
     rules?




































Klyne                      Work-in-progress                  [Page 11]
