






Internet Engineering Task Force                          C.Y. Lee
INTERNET DRAFT                                           Nortel
                                                         24 March 1998

                     PIM-SM over ATM and Proxy PAR
                     <draft-leecy-pimsm-atm-00.txt>


Status of This Memo

   This document is an Internet Draft, Internet Drafts are working
   documents of the Internet Engineering Task Force (IETF), its Areas,
   and its Working Groups.  Note that other groups may also distribute
   working documents as Internet Drafts.

   Internet Drafts are draft documents valid for a maximum of six
   months.  Internet Drafts may be updated, replaced, or obsoleted by
   other documents at any time.  It is not appropriate to use Internet
   Drafts as reference material, or to cite them other than as a
   ``working draft'' or ``work in progress.''

   Please check the I-D abstract listing contained in each Internet
   Draft directory to learn the current status of this or any other
   Internet Draft.


Abstract

  This document describes how PIM-SM [PIM-SM, PIM] operates in ATM
  networks in the presence of Proxy PAR. [PPAR, OSPF_PPAR]. The
  mechanisms described allow for simpler, more efficient and
  cost-effective network designs.

2. Scope

2.1 Scoping PIM-SM over Proxy PAR

  PIM-SM over Proxy PAR [PPAR] is scoped to prevent information
  from being flooded unnecessarily throughout the ATM network.
  In this document, the PAR advertisement for PIM-SM would be
  limited to PIM-SM scope only (level 60 only as shown in Figure 1).
  These advertisements may be propagated to the BGMP scope (level 40
  in Figure 1) but the purpose and mechanism is beyond the scope of
  this document.

 +-+
 | | PNNI peer group    # PPAR capable  @ PNNI capable  * Router
 +-+                      switch          switch



leecy                  Expires 24 September 1998                [Page 1]





Internet Draft       PIM-SM over ATM and Proxy PAR         22 March 1998


                Level 40 - BGMP
                +---------------------------+
                |                           |
                |                           |
                |      @ ---- @ ---- @      |
                |      |             |      |
                +----- | ----------- | -----+
                       |             |
     Level 60 - PIM-SM |             | Level 60 - PIM-SM
        +------------- | ---+    +-- | --------------+
        |              |    |    |   |               |
   R1* ------#-P1------@    |    |   @---------P3-#------- * R3
        |              |    |    |   |               |
   R2* ------#-P2------+    |    |   +---------P4-#------- * R4
        |                   |    |                   |
        +-------------------+    +-------------------+


Figure 1:  Scoping PIM-SM and BGMP over Proxy PAR (ATM Topology)
(Modified for IP multicasting from [PPAR])

2.2 Model

   This document describes 2 different models for PIM-SM over ATM.

   The first, Model A is the same model described in [INTRALIS].  The
   document [INTRALIS] requires that "each router within a LIS knows IP
   and ATM addresses of all other routers within the LIS" but the
   mechanism to obtain this information is not specified. Section A of
   this document describes how Proxy PAR can be used by PIM-SM routers
   to auto discover their peers in a LIS (Logical IP Subnet) [IPOA].

   The second Model B (FFS now), described in Section B is based on
   [INTRALIS], with the following differences:
   - this section describes multicasting over ATM within a PIM-SM
   routing domain
   - the mechanisms proposed in this section do not require a priori fully
   meshed distribution (point-to-multipoint) VC to exist among the routers
   in a LIS.
   - LIJ (Leaf Initiated Join) [AF-UNI] is used to setup point to
   multipoint VCs.

3. Section A

3.1 Auto Configuring PIM-SM routers

   Each PIM-SM router in a LIS is configured with its own IP address,
   mask, and router priority. This configuration information is



leecy                  Expires 24 September 1998                [Page 2]





Internet Draft       PIM-SM over ATM and Proxy PAR         22 March 1998


   bound to a local ATM end point address and registered by the router
   (Proxy PAR client) to the Proxy Server. Proxy PAR server detection
   is described in [ILMIDET]. The Proxy PAR server then flood the
   registered router information. A router may query the server to get
   information about other routers in the ATM cloud. Once the
   configuration information about each PIM-SM router in the LIS is learned
   via Proxy PAR, the shared distribution VCs described in
   [INTRALIS] may be setup.

   In  PIM-SM a DR router is elected  on a multi-access network using
   the Hello mechanism, the router with the largest network address
   assumes the role of DR. (With Hello extensions [HELLO_EXT], the Router
   with the highest priority will be elected).
   When PIM-SM is run over Proxy PAR the exchange of these Hellos to
   elect a DR may be replaced by Proxy PAR advertisements.

3.2 Service Definition of PIM-SM routers

   Each router register configuration information for each
   NSAP (ATM address) in the UNI Service IG. Within each UNI Service IG,
   a router register its routing protocol service, PIM-SM in this case,
   in the UNI IPv4 Service Definition IG and the PIM-SM specific
   configuration parameters in the UNI PIM-SM IPv4 Service Definition IG
   as shown in the figures below.

   This IG is then registered with the Proxy PAR server at the appropriate
   scope. If any of the parameters in the IG is changed, the client must
   reregister the new parameters with the Proxy PAR server.

   A -  UNI Service IG
   B -  UNI IPv4 Service Definition IG
   C -  UNI PIM-SM IPv4 Service Definition IG


      <---------------------------- A -------------------------------->
                <------- B ---------> ....  <----- B ------->
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         | C |   .....   | C | ....  | C | ....  | C |         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Figure 2: PNNI IG (Information Groups) used by PIM-SM over Proxy PAR

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |            Type=784           |            Length             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |        IP instance            |        Padding                |



leecy                  Expires 24 September 1998                [Page 3]





Internet Draft       PIM-SM over ATM and Proxy PAR         22 March 1998


       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           IP Address                          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                      IP Address Mask                          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |                      Service Mask                             |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Figure 4: UNI IPv4 Service Definition IG
(Note: The UNI IPv4 Service Definition IG is reproduced here from [AF-PPAR]
to illustrate its use)

Type              IG Type
IP Instance       The IP instance PIM-SM is registered for
IP Address        The IP address or IP address prefix PIM-SM is
                  registered for
IP Address Mask   Contiguous mask fo the IP address/prefix.
Service Mask      Bitmask of registered services, Bit 11 = PIM-SM

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |            Type=804           |            Length             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                            Priority                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Figure 5: UNI PIM-SM Service Definition IG

Type          804
Length        Length of IG
Priority      Used for DR election


4. Section B

   Editor's Note:

   This section is FFS.

   If the RP for the group in the multicast routing domain can
   be determined by querying the DNS as proposed in [STATIC_MCAST],
   Proxy PAR may be used to discover the DNS server in the ATM network.
   The only requirement is that a least one DNS server must be located
   within or attached to the ATM network.
   Using DNS to locate the RP reduces the amount of routing control



leecy                  Expires 24 September 1998                [Page 4]





Internet Draft       PIM-SM over ATM and Proxy PAR         22 March 1998


   information (BSR and C-RP advertisements) that must be flooded
   in the WAN and reduces the number of VCs required among routers.

   If a VC to the upstream router does not yet exist :
   A PIM-SM Join to an upstream router is preceeded by a LIJ to
   the upstream router :
   1) if using a group shared point to multipoint VC, (224.0.0.1) is
   specified as the connection idenfifier in the LEAF SETUP MESSAGE.
   2) if requiring a dedicated group specific point to multipoint VC
   [INTRALIS], Group specific Joins can be communicated to the upstream
   router using ATM LIJ, Leaf Initiated Join (specifying the IP
   multicast address as the LIJ connection identifier to the upstream
   router which is the root of the pt-mpt VC.
   In both cases, the ATM address of the upstream router may be obtained
   from Proxy PAR and must be specified in the LEAF SETUP MESSAGE.
   Note that LIJ to (224.0.0.1) is only setup if the LIJ VC does not
   exist.

   The upstream router will then establish a LIJ to the
   (224.0.0.1) to the downstream router. This will allow the PIM-SM Join
   to be sent to the upstream router. The need to establish a VC to the
   downstream router is either implicit in the connection identifier
   and/or additonal signalling information may be defined (eg B-LLI).

   The above procedures do not require a priori fully meshed distribution
   (point-to-multipoint) VC to exist among the routers in a LIS.
   The rules concerning eg. "Switching to a Source-Rooted Tree,
   Adding New Members to a Source-Rooted Tree, Handling the Packet
   Relection Problem" specified in [INTRALIS] still apply here.

   VC management relating to VC establishment and tear-down, VC sharing.
   will be discussed in more detail in the next version of the draft.



5. Acknowledgments

   Comments and contributions from Tony Przygienda and Patrick Droz
   are included in this work. Tony Przygienda suggested the use of LIJ
   to setup point to multipoint VC. The use of Join to setup VC was
   first proposed in [INTRALIS]. Thanks to Ahmed Helmy and Dave Thaler
   for clarifying the details of PIM-SM.


6. Security Consideration

   Security issues are not discussed in this memo.




leecy                  Expires 24 September 1998                [Page 5]





Internet Draft       PIM-SM over ATM and Proxy PAR         22 March 1998


References

   [AF-PPAR]    T. Przygienda and P. Droz. Proxy PAR Specification.
                ATM Forum 97-0495, 97-0705, 97-0882, July 1997.

   [PPAR]       T. Przygienda and P. Droz.
                Proxy PAR, Internet Draft, November 1997

   [OSPF_PPAR]  T. Przygienda and P. Droz.
                OSPF over ATM and Proxy PAR, Internet Draft, October 1997

   [AF-ILMI]    ATM-Forum.  Interim Local Management Interface (ILMI)
                Specification 4.0.  ATM Forum 95-0417R8, June 1996.

   [AF-PNNIV1]  ATM-Forum.  Private Network-Network Interface Specification
                Version 1.0.  ATM Forum af-pnni-0055.000, March 1996.

   [AF-UNI]     ATM-Forum.  Private Network-Network Interface Specification
                Version 4.0.  ATM Forum af-sig-0061.000, July 1996.

   [AF-PNNIV2]  ATM-Forum.  Private Network-Network Interface Specification
                Version 2.0.  ATM Forum LTD-PNNI-02.00 December 1997.

   [PIMSM]      Estrin, Farinacci, Helmy, Thaler, Deering, Handley,
                Jacobson, Liu, Sharma, and Wei.
                Protocol independent multicast-sparse mode (PIM- SM):
                Specification.  Internet Draft, September 1996.

   [INTRALIS]   D. Farinaccci, D. Meyer, Y. Rekhter
                Intra-LIS IP multicast among routers over ATM using
                Sparse Mode, Internet Draft, 1997

   [STATIC_MCAST] M. Ohta, J. Crowcroft Static Multicast,
                Internet Draft, March 1998

   [PAR]        R. Callon and al.  An Overview of PNNI Augmented Routing.
                ATM Forum 96-0354, April 1996.

   [OPAQUE]     R. Coltun and J. Heinanen.  Opaque LSA in OSPF.
                Internet Draft, 1997.

   [AF-MIPAR]   R. Coltun, T. Przygienda, and S. Shew.
                MIPAR: Minimal PNNI Augmented Routing.
                ATM Forum 96-0838, June 1996.

   [ILMI]       M. Davison.  Simple ILMI-Based Server Discovery.
                Internet Draft, 1997.




leecy                  Expires 24 September 1998                [Page 6]





Internet Draft       PIM-SM over ATM and Proxy PAR         22 March 1998


   [IPOA]       M. Laubach.  Classical IP and ARP over ATM,
                RFC 1577.  January 1994.

   [SIG_IPOA]  ATM Signalling Support for IP over ATM,
               RFC 1755, February 1995.

   [OSPF94]    J. Moy. OSPFv2, RFC 1583.  March 1994.

   [DEMAND]    J. Moy.  Extending OSPF to Support Demand Circuits,
               RFC 1793. April 1995.

   [OSPF98]    J. Moy.  OSPFv2, RFC 2178. July 1997.

   [MARS]      G. Armitage.  Support for Multicast over UNI 3.0/3.1
               based ATM Networks, RFC 2022. November 1996.


Authors' Addresses

Cheng-Yin Lee
Nortel
PO Box 3511, Station C
Ottawa, ON K1Y 4H7
Canada
leecy@nortel.ca


























leecy                  Expires 24 September 1998                [Page 7]



