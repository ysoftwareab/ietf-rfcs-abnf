





      
      
     Network Working Group                                        Chris Metz 
     Internet Draft                                             Luca Martini 
     Expires: May 2006                                         Cisco Systems 
                                                                             
                                                                Florin Balus 
                                                               Jeff Sugimoto 
                                                             Nortel Networks  
      
                                                            October 20, 2005 
                                         
      
                                           
                              AII Types for Aggregation 
                           draft-metz-aii-aggregate-01.txt 


         

     Status of this Memo 

        By submitting this Internet-Draft, each author represents that       
        any applicable patent or other IPR claims of which he or she is       
        aware have been or will be disclosed, and any of which he or she       
        becomes aware will be disclosed, in accordance with Section 6 of       
        BCP 79. 

        This document may only be posted in an Internet-Draft. 

        Internet-Drafts are working documents of the Internet Engineering 
        Task Force (IETF), its areas, and its working groups.  Note that 
        other groups may also distribute working documents as Internet-
        Drafts. 

        Internet-Drafts are draft documents valid for a maximum of six months 
        and may be updated, replaced, or obsoleted by other documents at any 
        time.  It is inappropriate to use Internet-Drafts as reference 
        material or to cite them other than as "work in progress." 

        The list of current Internet-Drafts can be accessed at 
             http://www.ietf.org/ietf/1id-abstracts.txt 

        The list of Internet-Draft Shadow Directories can be accessed at 
             http://www.ietf.org/shadow.html 

        This Internet-Draft will expire on April 20, . 

      
      
      
     Metz, et al.               Expires May 2006                    [Page 1] 
      
     Internet-Draft        AII Types for Aggregation          September 2005 
         

     Copyright Notice 

        Copyright (C) The Internet Society (2005).  All Rights Reserved. 

     Abstract 

        [PWE3 Control] defines the signaling mechanisms for establishing 
        point-to-point pseudowires between two provider edge (PE) nodes. The 
        Generalized ID FEC element contained in PWE3 signaling protocols 
        include TLV fields that identify pseudowire endpoints called 
        attachment individual identifiers (AII). This document defines an AII 
        structure in the form of new AII type-length-value fields that 
        supports AII aggregation for improved scalability. It is envisioned 
        that this would be useful in large inter-domain virtual private wire 
        service networks where pseudowires are established between selected 
        local and remote PE nodes based on customer need. 

     Conventions used in this document 

        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
        document are to be interpreted as described in RFC-2119 Error! 
        Reference source not found.. 

     Table of Contents 

         
        1. Introduction...................................................2 
        2. Structure for New AII Types....................................4 
           2.1. PWid AII Type.............................................4 
           2.2. Short Prefix AII Type.....................................5 
           2.3. Long Prefix AII Type......................................7 
        3. IANA Considerations............................................9 
        4. Security Considerations........................................9 
        5. Acknowledgments...............................................10 
        Author's Addresses...............................................11 
        Intellectual Property Statement..................................12 
        Disclaimer of Validity...........................................12 
        Copyright Statement..............................................13 
        Acknowledgment...................................................13 
         
     1. Introduction 

        [PWE3-CONTROL] defines the signaling mechanisms for establishing 
        point-to-point pseudowires (PWs) between two provider edge (PE) 
        nodes. When a PW is set up, the LDP signaling messages include a 
        forwarding equivalence class (FEC) element containing information 
      
      
     Metz, et al.              Expires March 2006                   [Page 2] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        about the PW type and an endpoint identifier used in the selection of 
        the PW forwarder that binds the PW to the attachment circuit at each 
        end. 

        There are two types of FEC elements defined for this purpose: PWid 
        FEC (type 128) and the Generalized ID (GID) FEC (type 129). The PWid 
        FEC element includes a fixed-length 32 bit value called the PWid that 
        serves as an endpoint identifier. The same PWid value must be 
        configured on the local and remote PE prior to PW setup. 

        The GID FEC element includes TLV fields for attachment individual 
        identifiers (AII) that, in conjunction with an attachment group 
        identifier (AGI), serve as PW endpoint identifiers. The endpoint 
        identifier on the local PE (denoted as <AGI, source AII or SAII) is 
        called the source attachment identifier (SAI) and the endpoint 
        identifier on the remote PE (denoted as <AGI, target AII or TAII) is 
        called the target attachment identifier (TAI). The SAI and TAI can be 
        distinct values. This is useful for applications and provisioning 
        models where the local PE (with a particular SAI) does not know and 
        must somehow learn (e.g. via MP-BGP auto-discovery) of remote TAI 
        values prior to launching PW setup messages towards the remote PE. 

        The use of the GID FEC TLV provides the flexibility to structure 
        (source or target) AII values to best fit particular application or 
        provisioning model needs [L2VPN-SIG]. For example an AII structure 
        that summarizes or aggregates a large number of individual AII values 
        could significantly reduce the burden on AII distribution mechanisms 
        (e.g. MP-BGP) and on PE memory needed to store this AII information.  

        An aggregate AII structure and corresponding IP next hop address 
        could form the basis for enabling inter-domain MS-PW routing and 
        signaling in a manner similar to the way that BGP-advertised IP 
        address prefixes and next hops enable inter-domain IP routing. This 
        would be useful in large inter-domain VPWS networks where PWs are 
        established between local and remote PE based on customer need [REQ-
        MH-PW]. Note that this document does not discuss if, how, or where in 
        the network the aggregation of AII values is performed, how AII 
        aggregate reachability is distributed nor does it discuss how PW 
        setup messages are routed through a network based on AII reachability 
        information.  

        An AII that is globally unique would facilitate PW management and 
        security in large inter-AS and inter-provider environments. Providers 
        would not have to worry about AII value overlap during provisioning 
        or the need for AII “NATs” during signaling. Globally unique AII 
        values could aid in troubleshooting and could be subjected to source-
        validity checks during AII distribution and signaling. 
      
      
     Metz, et al.              Expires March 2006                   [Page 3] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        An AII automatically derived from a provider’s existing IP address 
        space can simplify the provisioning process. In addition an AII 
        structure that is backwards compatible with previous endpoint 
        identifier semantics (i.e. PWid) and other L2VPN provisioning models 
        [L2VPN-SIG] would help providers to converge upon a PW provisioning 
        and signaling behavior employing GID FEC TLVs. 

        In summary the purpose of this document is to define an AII structure 
        based on [PWE3-CONTROL] that: 

        o  Enables many discrete attachment individual identifiers to be 
           aggregated into a single AII aggregate. This will enhance 
           scalability by reducing the burden on AII distribution mechanisms 
           and on PE memory. 
            

        o  Ensures global uniqueness if desired by the provider. This will 
           facilitate Internet-wide PW connectivity and provide a means for 
           providers to perform source validation on the AII distribution 
           (e.g. MP-BGP) and signaling (e.g. LDP) channels. 
            

        o  Supports a uniform PW signaling mechanism employing the GID FEC 
           TLV structure for endpoints provisioned with the AII types defined 
           in this document, other L2VPN provisioning techniques and 
           including those previously configured with the older FEC 128 PWid 
           value.  

        This is accomplished by defining three new AII types and associated 
        formats of the value fields. 

     2. Structure for New AII Types 

        [PWE3-CONTROL] defines the format of the GID FEC TLV and the use and 
        semantics of the attachment group identifier (AGI). 

        New AII types and the format of their associated AII value fields are 
        defined next. 

     2.1. PWid AII Type 

        The PWid AAI type provides GID FEC 129 signaling compatibility with 
        those endpoint identifiers provisioned with the 32-bit PWid values. 
        Unlike the FEC 128 encoding, the values of the PWid AII type do not 
        have to match on the local and remote PE nodes. 
         

      
      
     Metz, et al.              Expires March 2006                   [Page 4] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        The PWid AII type can also be used when the provisioning model 
        warrants definition of a fixed-length 32-bit value used to identify 
        a particular attachment circuit [L2VPN-SIG]. The value of the PWid 
        AII type can be globally unique or combined with some other value 
        (e.g. AGI) to provide a globally unique identifier if warranted by 
        the provisioning model. 
         
        The PWid AII type is encoded as the following: 
         
         0                   1                   2                   3 
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        |   AII Type=01 |    Length     |        PWid                   | 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        |           PWid     (contd.)   |                           
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
         
         
        o  AII Type = 0x01 

         
        o  Length = Length of the value field in octets. The length is set to 
           4 for this AII type.    

         
        o  PWid = Fixed-length 32-bit value.   

         
        The provisioning models employing this AII type require that the 
        entire 32-bit value field (fully-qualified) is processed by AII 
        distribution mechanisms. This means it CANNOT be aggregated. 

         

     2.2. Short Prefix AII Type 

        The Short Prefix AII type permits varying levels of AII summarization 
        to take place thus reducing the scaling burden on the aforementioned 
        AII distribution mechanisms and PE memory. In other words it no 
        longer becomes necessary to distribute or configure all individual 
        AII values (which could number in the tens of thousands or more) on 
        local PEs prior to establishing PWs to remote PEs. The details of how 
        and where the aggregation of AII values is performed and then 
        distributed as AII reachability information are not discussed in this 
        document.  


      
      
     Metz, et al.              Expires March 2006                   [Page 5] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        The Short Prefix AII type uses a combination of a provider’s globally 
        unique identifier (Global ID), a 32-bit prefix field and an optional 
        4-octet attachment circuit identifier field to create globally unique 
        AII values. It is termed the Short Prefix AII type because of the 
        shorter 32-bit prefix used here as compared to the longer 256-bit 
        prefix used in the Long Prefix AII type defined in the next section. 

        The encoding of the Short Prefix AII type is shown in figure 1.  

         0                   1                   2                   3 
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        |  AII Type=02  |    Length     |        Global ID              |             
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        |                            Global ID (contd.)                 |            
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        |                            Prefix                             | 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
        |                             AC ID                             | 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
          

                       Figure 1 Short Prefix AII TLV Structure  

         

        o  AII Type = 0x02 
            

        o  Length = length of value field in octets. The length is set to 10 
           if the AC ID is NULL and 14 if the AC ID is non-null. 
















      
      
     Metz, et al.              Expires March 2006                   [Page 6] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        o  Global ID = This is a 6 octet field containing a value that is 
           unique to the provider. The global ID can contain the 2 octet or 4 
           octet value of the provider’s Autonomous System Number, a global 
           unicast IPv6 /48 prefix assigned to the provider or some other 
           globally unique value up to 6 octets in length. It is expected 
           that the global ID will be derived from the globally unique AS 
           number of the autonomous system hosting the PEs containing the 
           actual AIIs. If the PE hosting the AIIs is present in an 
           autonomous system where the provider is not running BGP, chooses 
           not to expose this information or does not wish to use the global 
           ID, then the global ID field MUST be set to zero. If the global ID 
           is derived from a 2-octet AS number, then the high-order 4 octets 
           of this 4 octet field MUST be set to zero. 
            
           Please note that the use of the provider’s AS number as a global 
           ID DOES NOT have anything at all to do with the use of the AS 
           number in protocols such as BGP. 
            

        o  Prefix = The 32-bit prefix is a value assigned by the provider or 
           it can be automatically derived from the PE’s /32 IPv4 loopback 
           address. Note that it is not required that the 32-bit prefix have 
           any association with the IPv4 address space used in the provider’s 
           IGP or BGP for IP reachability. 
            

        o  Attachment Circuit (AC) ID = This is a fixed length four octet 
           field used to further refine identification of an attachment 
           circuit on the PE. The inclusion of the AC ID is used to identify 
           individual attachment circuits that share a common prefix.  
            
           If the AC ID is not present then the AC ID field MUST be null and 
           the AII Length field is set to 10. If the AC ID is present then 
           the length field is set to 14 octets. 

         

     2.3. Long Prefix AII Type 

        The Long Prefix AII type employs a global ID and 256-bit prefix field 
        (versus 32 bits for the Short Prefix AII type) to create AII values. 
        The Long Prefix AII type might be useful to providers with 
        provisioning systems or AII addressing schemes that exceed 32 bits in 
        length. It can also be used to auto-generate AII values based on /128 
        IPv6 and /32 IPv4 PE loopbacks. 

        The encoding of the Long Prefix AII type is shown in figure 2: 
      
      
     Metz, et al.              Expires March 2006                   [Page 7] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

         
         0                   1                   2                   3 
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        | AII Type=03   |    Length     |        Global ID              |             
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
        |                          Global ID (contd.)                   | 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+             
        |                                                               | 
        |                                                               | 
        |                                                               | 
        |                            Prefix                             | 
        |                                                               | 
        |                                                               | 
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
         
                       Figure 2 Long Prefix AII TLV Structure 

         
        o  AII Type = 0x03 
            

        o  Length = length of value field in octets. The length is set to 38 
           for this AII type.  
            

        o  Global ID = This is a 6 octet field containing a value that is 
           unique to the provider. The global ID can contain the 2 octet or 4 
           octet value of the provider’s Autonomous System Number, a global 
           unicast IPv6 /48 prefix assigned to the provider or some other 
           globally unique value up to 6 octets in length. It is expected 
           that the global ID will be derived from the globally unique AS 
           number of the autonomous system hosting the PEs containing the 
           actual AIIs. If the PE hosting the AIIs is present in an 
           autonomous system where the provider is not running BGP, chooses 
           not to expose this information or does not wish to use the global 
           ID, then the global ID field MUST be set to zero. If the global ID 
           is derived from a 2-octet AS number, then the high-order 4 octets 
           of this 4 octet field MUST be set to zero. 
            
           Please note that the use of the provider’s AS number as a global 
           ID DOES NOT have anything at all to do with the use of the AS 
           number used in protocols such as BGP. 
            



      
      
     Metz, et al.              Expires March 2006                   [Page 8] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        o  Prefix = The 256-bit Prefix is a value assigned by the provider or 
           it can be automatically derived from the PE’s local addressing 
           scheme such as IPv6 or IPv4. 
            

        This AII type does not employ an optional AC ID field. This is 
        because there are sufficient bits available in the prefix field to 
        hold a fully qualified target PE value auto-generated from even a 
        long address type such as IPv6 with the remainder available for local 
        attachment circuit identification. 

         

     3. IANA Considerations 

        This document requests that IANA allocate three AII types from the 
        "Attachment Individual Identifier (AII) Type" registry defined in 
        [IANA]. 

        The suggested values for the AAI types are: 

        Value       Description 

        0x01        PWid 

        0x02        Short Prefix 

        0x03        Long Prefix 

         

     4. Security Considerations 

        AII values appear in AII distribution protocols [MP-BGP-AUTO-DISC] 
        and PW signaling protocols [PWE3-CONTROL] and are subject to various 
        authentication schemes (i.e. MD5) if so desired.  
         
        The use of global ID values (e.g. ASN) in the inter-provider case 
        could enable a form of source-validation checking to ensure that the 
        AII value (aggregated or explicit) originated from a legitimate 
        source. 

         




      
      
     Metz, et al.              Expires March 2006                   [Page 9] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

     5. Acknowledgments 

        Thanks to Carlos Pignataro, Scott Brim, Skip Booth, George Swallow 
        and Bruce Davie for their input into this document.











































      
      
     Metz, et al.              Expires March 2006                  [Page 10] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

        References 

        [PWE3-CONTROL], “Pseudowire Setup and Maintenance using LDP”,                 
                  draft-ietf-pwe3-control-protocol-17.txt, June 2005 

         

        [IANA], "IANA Allocations for pseudo Wire Edge to Edge Emulation 
                  (PWE3)" Martini,Townsley, draft-ietf-pwe3-iana-allocation-
                  12.txt, work in progress), September 2005 

         

        [L2VPN-SIG], “Provisioning Models and Endpoint Identifiers in L2VPN 
                  Signaling”, draft-ietf-l2vpn-signaling-06.txt, Sept. 2005 

         

        [REQ-MH-PW], “Requirements for inter domain Pseudo-Wires”,  draft-
                  ietf-pwe3-ms-pw-requirements-00.txt, Internet Draft, June 
                  2005 

         

        [MP-BGP-AUTO-DISC], “Using BGP as an Auto-Discovery Mechanism for 
                  Layer-3 and Layer-2 VPNs”, Ould-Brahim, H. et al, draft-
                  ietf-l3vpn-bgpvpn-auto-06.txt, June 2005 

      

     Author's Addresses 

     Chris Metz 
     Cisco Systems, Inc. 
     3700 Cisco Way 
     San Jose, Ca. 95134 
     Email: chmetz@cisco.com 
      
     Luca Martini 
     Cisco Systems, Inc. 
     9155 East Nichols Avenue, Suite 400 
     Englewood, CO, 80112 
     Email: lmartini@cisco.com 
      
     Florin Balus 
     Nortel  
     3500 Carling Ave. 
      
      
     Metz, et al.              Expires March 2006                  [Page 11] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

     Ottawa, Ontario, CANADA 
     Email: balus@nortel.com 
      
     Jeff Sugimoto 
     Nortel  
     3500 Carling Ave. 
     Ottawa, Ontario, CANADA 
     Email: sugimoto@nortel.com 
      
      
         
         

     Intellectual Property Statement 

        The IETF takes no position regarding the validity or scope of any 
        Intellectual Property Rights or other rights that might be claimed to 
        pertain to the implementation or use of the technology described in 
        this document or the extent to which any license under such rights 
        might or might not be available; nor does it represent that it has 
        made any independent effort to identify any such rights.  Information 
        on the procedures with respect to rights in RFC documents can be 
        found in BCP 78 and BCP 79. 

        Copies of IPR disclosures made to the IETF Secretariat and any 
        assurances of licenses to be made available, or the result of an 
        attempt made to obtain a general license or permission for the use of 
        such proprietary rights by implementers or users of this 
        specification can be obtained from the IETF on-line IPR repository at 
        http://www.ietf.org/ipr. 

        The IETF invites any interested party to bring to its attention any 
        copyrights, patents or patent applications, or other proprietary 
        rights that may cover technology that may be required to implement 
        this standard.  Please address the information to the IETF at 
        ietf-ipr@ietf.org 

     Disclaimer of Validity 

        This document and the information contained herein are provided on an 
        "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
        OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET 
        ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, 
        INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE 
        INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
        WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
      
      
     Metz, et al.              Expires March 2006                  [Page 12] 
         
     Internet-Draft        AII Types for Aggregation          September 2005 
         

     Copyright Statement 

        Copyright (C) The Internet Society (2005). 

        This document is subject to the rights, licenses and restrictions 
        contained in BCP 78, and except as set forth therein, the authors 
        retain all their rights. 

     Acknowledgment 

        Funding for the RFC Editor function is currently provided by the 
        Internet Society. 

         

































      
      
     Metz, et al.              Expires March 2006                  [Page 13] 
         
