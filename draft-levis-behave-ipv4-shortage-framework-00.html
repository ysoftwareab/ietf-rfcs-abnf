<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>IPv4 Shortage Framework</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="IPv4 Shortage Framework">
<meta name="keywords" content="Internet-Draft, IPv4 shortage">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">P. Levis, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">M. Boucadair</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">JL. Grimault</td></tr>
<tr><td class="header">Expires: August 1, 2009</td><td class="header">A. Villefranque</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">France Telecom</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 28, 2009</td></tr>
</table></td></tr></table>
<h1><br />IPv4 Shortage Framework<br />draft-levis-behave-ipv4-shortage-framework-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 1, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document analyses the main issues related to IPv4 Internet
      access in the context of public IPv4 address exhaustion. It would be
      valuable to assess each IPv4 address shortage solution with all these
      issues, to check to what degree they are concerned, how they handle each
      issue, and to what extent they resolve the pending problems.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#Introduction">1.</a>&nbsp;
Introduction<br />
<br />
<a href="#anchor1">2.</a>&nbsp;
Shared IPv4 Addresses<br />
<br />
<a href="#anchor2">3.</a>&nbsp;
Address Space Multiplicative Factor<br />
<br />
<a href="#anchor3">4.</a>&nbsp;
Service Management<br />
<br />
<a href="#anchor4">5.</a>&nbsp;
IPv6 Migration and IPv4-IPv6 Coexistence<br />
<br />
<a href="#anchor5">6.</a>&nbsp;
Solution-Level Issues<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">6.1.</a>&nbsp;
Network Addressing Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">6.2.</a>&nbsp;
Number of Current Sessions per Customer<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">6.3.</a>&nbsp;
Scarcity of Private Addressing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">6.4.</a>&nbsp;
Impact on Information System<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">6.5.</a>&nbsp;
Port Related Entries in the ISP Equipment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">6.6.</a>&nbsp;
Legal Duties<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">6.6.1.</a>&nbsp;
Traceability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">6.6.2.</a>&nbsp;
Interception<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">6.7.</a>&nbsp;
Flow Discrimination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">6.8.</a>&nbsp;
Introduction of Single Point of Failure (Robustness)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">6.9.</a>&nbsp;
Impact on Intra-Domain and Inter-Domain Routing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">6.10.</a>&nbsp;
Fragmentation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">6.11.</a>&nbsp;
Impact on Services<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">6.12.</a>&nbsp;
Impact on CPE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">6.13.</a>&nbsp;
Support of Multicast<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">6.14.</a>&nbsp;
Scalability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">6.15.</a>&nbsp;
Security<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">6.15.1.</a>&nbsp;
Port Randomization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">6.15.2.</a>&nbsp;
Duplicate Effects<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">6.16.</a>&nbsp;
Management Tools<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">6.17.</a>&nbsp;
Solution manageability<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">6.18.</a>&nbsp;
End-Users Facilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">6.19.</a>&nbsp;
Service Access Discrimination<br />
<br />
<a href="#IANA">7.</a>&nbsp;
IANA Considerations<br />
<br />
<a href="#security">8.</a>&nbsp;
Security Considerations<br />
<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="Introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Taking into consideration the IPv4 public address pool currently
      available at the Internet Assigned Numbers Authority (IANA), it is
      expected that the Regional Internet Registries (RIRs) will have no more
      public IPv4 addresses to allocate in the short term. At the time of
      writing, this anticipated date is mid-2012. See the IPv4 Address Report
      website www.potaroo.net/tools/ipv4/index.html for a thorough analysis of
      this issue, and an updated prediction.
</p>
<p>At the exhaustion date, ISPs will wind up with public address pools
      that cannot grow. They will have to make do with what they have
      currently got. They will enter an IPv4 address shortage management
      phase. It will not be possible to provide each customer with a unique
      public IPv4 address. On the other hand, offering only an access to the
      IPv6 Internet won't be satisfactory for the customers because a lot of
      services will remain IPv4-only accessible, and this is for long period
      (a full IPv6 world requires universal agreement which is hard to
      achieve).
</p>
<p>This document analyses the main issues related to IPv4 Internet
      access in the context of public IPv4 address exhaustion. The IPv4
      Internet access from an IPv6 stack, and the IPv6 Internet access
      whatever the means, are out of the scope of this memo.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Shared IPv4 Addresses</h3>

<p>So far, the current practice has been to give a unique IPv4 public
      address to each customer. A customer, then, can possibly share her
      address among several hosts behind her Customer Premises Equipment
      (CPE). In this context, the addresses that can be seen in any IP packets
      always refer to a unique customer. To cope with the IPv4 address
      exhaustion, this kind of practices is no more affordable. Therefore ISPs
      are bound to allocate the same IPv4 public address to several customers
      at the same time.
</p>
<p>All solutions claiming to solve the IPv4 address exhaustion (simply
      referred to as solutions in the remaining part of this memo) are based
      on shared addresses. In this new context, an IPv4 address seen in an IP
      packet can refer to several customers. The port information must be
      considered as well, in order to be able to unambiguously identify the
      customer pointed by that shared address. In particular, the port
      information along with the address information, must eventually be taken
      into account by the routing infrastructure in order to correctly reach
      the intended destination.
</p>
<p>All IPv4 address shortage mechanisms extend the address space in
      adding port information. They differ on the way they manage the port
      value.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Address Space Multiplicative Factor</h3>

<p>The purpose of sharing IPv4 addresses is to potentially increase the
      addressing space. A key parameter is the factor by which ISPs want or
      need to multiply their IPv4 public address space; and the consequence is
      the number of customers sharing the same public IPv4 address.
</p>
<p>The intention is not to replace IPv6. However, we should be very
      careful; whatever the network model deployed, applications and business
      will run on top of it. The fact that the IPv4 shortage mechanisms will
      not postpone IPv6 deployment, heavily relies on voluntarism.
</p>
<p>It is expected that the IPv6 communications will take an increasing
      part during the next years to come, at the expense of the IPv4
      communications. We should reach a safety point in the future, where the
      number of IPv4 public addresses, in use at the same time, begins
      decreasing. From an ISP point of view, the multiplicative factor must be
      enough to survive until this occurs for its own customers. Most likely a
      one digit factor (less than 10) should be sufficient, and it should not
      be relevant to go beyond. Whereas the potential is huge, -if we allow to
      each customer (one IP address, 1000 ports) we multiply by 64 the total
      IPv4 address space- trying to devise solutions that can increase the
      IPv4 space by a significantly bigger factor might be seen as an
      incentive to postpone again and again IPv6 deployment.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Service Management</h3>

<p>At the time of IPv4 address exhaustion in the RIRs, ISPs will have to
      manage public address pools that cannot grow (at least from the RIRs).
      Concretely, they will have to decide to whom they allocate shared
      addresses and to whom they allocate unique addresses, to the extent of
      the availability of addresses. Many policies can be envisaged, taking
      into account parameters such as: old vs. new customers, user profile,
      access type, geographic considerations, unique address as the privileged
      choice, shared address as the privileged choice, etc.
</p>
<p>An important issue is whether shared and unique addresses will
      differently be charged.
</p>
<p>For the sake of safety and flexibility, ISPs should not drop their
      public pool size under a minimum (safety number). They can adjust the
      volume of IPv4 public addresses available playing on the balance between
      shared and unique allocations. </p>
<ul class="text">
<li>To increase the public IPv4 address pool: increase the number of
          customers with shared address; increase the ratio of customers per
          shared address.
</li>
<li>To decrease the public IPv4 address pool: decrease the number of
          customers with shared address; decrease the ratio of customers per
          shared address.
</li>
</ul>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IPv6 Migration and IPv4-IPv6 Coexistence</h3>

<p>Any IPv4 address shortage solution should make use, as much as
      possible, of the IPv6 transport capabilities available, in order to
      increase the IPv6 packets traffic and to move forward from an
      IPv4-enabled ISP network towards an almost only IPv6-enabled ISP
      network. If it is not the case, the risk is to delay IPv6 deployments,
      in staying on a pure dual-stack attitude for ever, similar to the ships
      in the night routing approach, where the protocols independently live
      their own lives.
</p>
<p>The IPv4 in IPv6 tunnels, and/or the translation NAT464 should be
      favored. However, increasing the number of IPv6 packets does not
      automatically mean IPv6 is being generalized, if the main purpose of
      these packets is to carry IPv4 information. This is very similar to what
      occurred with ATM, especially in European countries, where ATM cells
      have heavily been used to convey IPv4 packets in the backhaul networks,
      but have never been used for end-to-end communications.
</p>
<p>If the percentage of end-to-end IPv6 traffic significantly increases,
      so that the volume of IPv4 traffic begins decreasing, then the number of
      IPv4 sessions will be decreasing. The smaller the number of current
      sessions per customer is, the higher the number of customers under the
      same IPv4 public address can be, and consequently, the lower the number
      of IPv4 public addresses is needed. Hence, the pressure on IPv4 address
      shortage would be relaxed, because one IPv4 public address would be able
      to serve more customers. However, this effect will only occur for
      customers who have both an IPv6 access and a shared IPv4 access. This
      would advocate the strategy to systematically bound a shared IPv4 access
      to any IPv6 access. Furthermore, a significant number of public IPv4
      addresses will be needed in the interconnection between IPv4 and IPv6
      realms, for the sake of global reachability.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Solution-Level Issues</h3>

<p>All IPv4 address shortage solutions will be confronted to the
      hereafter listed issues. It is valuable to assess each solution with all
      these issues, to check to what degree they are concerned, how they
      handle each issue, and to what extent they resolve the pending
      problems.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Network Addressing Capability</h3>

<p>The network addressing capability is the level of flexibility the
        network has to configure customers' devices, either with a unique
        address, or with a shared IPv4 address. It can be assessed through the
        following considerations:</p>
<ul class="text">
<li>Is it possible to configure any customer's device with a shared
            address, regardless his location and his history?
</li>
<li>Is it possible to configure any customer's device with a unique
            public address, regardless his location and his history?
</li>
<li>Is it straightforward to switch, for any customer, from a
            shared address to a unique public address, and vice versa?
</li>
</ul><p>What is considered here is not the policy decision to
        allocate a unique or a shared address, but indeed the network
        capability to enforce such address management schemes.
</p>
<p>Any addressing scheme should be backward compatible with the
        current practices. Means to convey IP connectivity (e.g. DHCP, PPP)
        should be the same as the ones implemented by service providers.
        Additional facilities and tools to ease the shared IPv4 address
        management should be promoted.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Number of Current Sessions per Customer</h3>

<p>In any kind of solutions, the number of current sessions per
        customer has, de facto, to be limited in some way. Therefore, the
        number of current sessions per customer is a limit to take into
        account in any architectural dimensioning. The degree of fairness
        -balanced distribution of sessions between customers-, should be
        assessed. Means to prevent against traffic loss (due to the limitation
        in number of sessions) should be evaluated and proposed. The
        importance of this issue may be greatly reduced if the multiplicative
        factor is very small (e.g. 4).
</p>
<p>As for the current usage of ports, several hundreds per customer
        seems current practice, although several thousands may be not unusual
        with some P2P applications (e.g. BitTorrent).
</p>
<p>The impact of the dynamicity of the sessions should also be
        considered, especially as far as performance is concerned.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Scarcity of Private Addressing</h3>

<p>According to <a class='info' href='#RFC1918'>[RFC1918]<span> (</span><span class='info'>Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and E. Lear, &ldquo;Address Allocation for Private Internets,&rdquo; February&nbsp;1996.</span><span>)</span></a>, IPv4 private addresses
        must be chosen in the following ranges: </p>
<ul class="text">
<li>10/8
</li>
<li>172.16/12
</li>
<li>192.168/16
</li>
</ul><p>There is a potential of 2 at the power of (224 + 220 + 216)
        addresses, or 17,891,328 addresses. Actually, private addresses are
        not that abundant when deployments are concerned. Some ISPs already
        use private addresses within their networks for specific usage such as
        walled garden services, in a way they cannot reuse them for another
        usage. As a consequence, the smallness of the IPv4 private address
        pool available for the Internet service could force some ISPs to use
        Virtual Private Networks (VPNs) such as <a class='info' href='#RFC4364'>[RFC4364]<span> (</span><span class='info'>Rosen, E. and Y. Rekhter, &ldquo;BGP/MPLS IP Virtual Private Networks (VPNs),&rdquo; February&nbsp;2006.</span><span>)</span></a>
        to allow reusing the same private addresses several times with no
        routing overlaps. This brings a lot of complexity in network
        configuration and management.
</p>
<p>It has been suggested to make the 240./4 block available for
        private addressing <a class='info' href='#I-D.wilson-class-e'>[I&#8209;D.wilson&#8209;class&#8209;e]<span> (</span><span class='info'>Wilson, P., Michaelson, G., and G. Huston, &ldquo;Redesignation of 240/4 from &quot;Future Use&quot; to &quot;Private Use&quot;,&rdquo; September&nbsp;2008.</span><span>)</span></a>. This
        address block, formerly designated as "Class E", is still noted as
        being reserved in the IANA IPv4 address registry. If it were
        reassigned for private addressing that would yield around 268 millions
        extra private addresses. However, many current implementations of the
        TCP/IP protocol stack do not allow the use of the 240./4 block. This
        is a severe blocking point for a lot of existing devices: CPE, NAT or
        routers. This issue will only be solved when the vendors'
        implementations accept the (240./4) addresses.
</p>
<p>Another suggestion <a class='info' href='#I-D.shirasaki-isp-shared-addr'>[I&#8209;D.shirasaki&#8209;isp&#8209;shared&#8209;addr]<span> (</span><span class='info'>Yamagata, I., Miyakawa, S., Nakagawa, A., Yamaguchi, J., and H. Ashida, &ldquo;ISP Shared Address,&rdquo; March&nbsp;2010.</span><span>)</span></a> is to reserve some
        public blocks (typically three or four /8) only for internal usage. So
        far, there has been no consensus upon this proposal.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Impact on Information System</h3>

<p>The IPv4 address shortage solutions could add port information in
        the Information System (IS) at different levels. For instance, the
        possibility to give either a unique or a shared address, coupled or
        not with an IPv6 address, could yield several types of customers to
        deal with in the IS: IPv4 unique only, IPv4 shared only, IPv4 unique +
        IPv6, IPv4 shared + IPv6, IPv6 only. The impact on the IS platforms
        and IS applications should be evaluated and assessed.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
Port Related Entries in the ISP Equipment</h3>

<p>Additional data related to port information should be stored and
        maintained by the ISP equipment. As an example, a set of entries (e.g.
        session states, binding entries) are to be instantiated and
        maintained. The logic instantiation (behavior and not necessarily
        detailed algorithms) of these entries should be standardized to avoid
        interoperability problems, and ease management tasks. Optimization
        means for instantiating new entries should be investigated and
        deployed if required. In addition, the amount of entries to be
        maintained should not be too big.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6"></a><h3>6.6.&nbsp;
Legal Duties</h3>

<p>ISPs are legally required to give access to information related to
        their users' communications on request of the authorities.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6.1"></a><h3>6.6.1.&nbsp;
Traceability</h3>

<p>Legal obligations require an ISP to provide the identity of a
          customer upon request of the authorities. Because one public IPv4
          address may be shared between several users, the knowledge of the
          port number, along with the IP address, is mandatory to have a
          chance to find the appropriate user. The ISP must be able to provide
          the identity of a customer from the knowledge of the IPv4 public
          address and the port number.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6.2"></a><h3>6.6.2.&nbsp;
Interception</h3>

<p>This process is proactive, a given group of communications is
          replicated in real time towards a law enforcement agency. Typically,
          the point of replication is the first IP hop in the ISP network. The
          mechanism put in place must be completely transparent to the
          customers, so that the targeted customer cannot be aware of the
          interception.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.7"></a><h3>6.7.&nbsp;
Flow Discrimination</h3>

<p>The ISP can offer walled garden services along with Internet
        services. Typically, walled garden services packets are exchanged
        between the customers and a Service Platform or a Service Gateway. The
        ISP may want these flows not to traverse the IPv4 shortage facilities
        put in place (for instance TV flows should bypass a Carrier Grade
        NAT). However, the best practice seems to rapidly migrate these
        services from IPv4 to IPv6.
</p>
<p>The activation of solutions to solve the IPv4 shortage problem
        should not alter mechanisms to enforce QoS or traffic engineering
        within a given domain. Examples of these mechanisms are: DiffServ,
        RSVP, etc.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.8"></a><h3>6.8.&nbsp;
Introduction of Single Point of Failure (Robustness)</h3>

<p>The introduction of new nodes/functions, specifically where the
        port information is managed, can create single points of failure. Any
        IPv4 shortage solution should consider the opportunity to add
        redundancy features in order to alleviate the impact on the robustness
        of the IP connectivity service.
</p>
<p>Additionally, load balancing and load sharing means should be
        evaluated. The ability of the solution to allow hot swapping from a
        machine to another, in minimizing the perturbations, should be
        considered.
</p>
<p>End-to-end performances (e.g. delay) experienced in the context of
        a new addressing solution should be at least similar to the currently
        experienced one. QoS should not be severely altered when new means are
        activated to solve IPv4 address exhaustion.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.9"></a><h3>6.9.&nbsp;
Impact on Intra-Domain and Inter-Domain Routing</h3>

<p>The introduction of port consideration to route packets to their
        final destinations may have an impact on the current routing
        infrastructure: on the architecture, the IGP and EGP configuration,
        and the addressing configuration. The introduction of new nodes that
        cannot be circumvent could also yield non optimized routes, especially
        for communications between customers attached to the same ISP
        realm.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.10"></a><h3>6.10.&nbsp;
Fragmentation</h3>

<p>When a packet is fragmented, the port information (either UDP or
        TCP) will only be present in the first fragment. The other fragments
        will not bear the port information which is necessary to a correct
        treatment up to the destination. Appropriate solutions should be
        investigated if required by service providers.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.11"></a><h3>6.11.&nbsp;
Impact on Services</h3>

<p>There is a potential danger for the following types of
        applications:</p>
<ul class="text">
<li>Applications that establish inbound communications
</li>
<li>Applications that carry address information in their
            payloads
</li>
<li>Applications that do not use any port (e.g. ICMP)
</li>
<li>Applications that assume the uniqueness of customers'
            addresses
</li>
<li>Applications that explicitly prohibit twice the same address to
            access to a resource at the same time
</li>
</ul>

<p>Current applications already implement some mechanisms in order to
        circumvent the presence of NATs (typically CPE NATs):</p>
<ul class="text">
<li>ALGs
</li>
<li>Port Forwarding
</li>
<li>UPnP IGD
</li>
<li>NAT Traversal
</li>
</ul>

<p>It should be considered to what extent these mechanisms can still
        be used with IPv4 shortage mechanisms put in place.
</p>
<p>Impact on existing services:</p>
<ul class="text">
<li>Will this service work as usual?
</li>
<li>Will this service work but with a degradation?
</li>
<li>What level of degradation?
</li>
<li>Will this service not work at all?
</li>
<li>What modifications are needed if any?
</li>
</ul><p>Impact on future services:</p>
<ul class="text">
<li>What new constraints are to be taken into account to devise new
            services?
</li>
</ul>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.12"></a><h3>6.12.&nbsp;
Impact on CPE</h3>

<p>IPv4 shortage mechanisms may require specific features in the CPEs.
        Some CPEs are ISP branded. CPEs are particularly sensible devices by
        their number and by the fact that they are often optimized for a well
        defined set of treatments closely related to the ISP's services. The
        impact on existing CPE devices should be carefully evaluated, taking
        into account: features needed, required modifications,
        availability.
</p>
<p>This requirement is not specific to ISP branded CPEs. CPE behavior
        should be particularly specified by any solution claiming to solve the
        IPv4 address exhaustion problem.
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.13"></a><h3>6.13.&nbsp;
Support of Multicast</h3>

<p>It should be assessed if a customer with a shared address can
        receive multicast packets and source multicast packets.
</p>
<p>Particularly, impact on IGMP should be identified and solutions
        proposed. Because of the presence of several end user devices with the
        same IP address, membership to multicast groups should be evaluated
        and enhancement should be proposed if required. Besides the membership
        issues, building multicast trees may be impacted. This impact should
        be assessed and alternatives proposed.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.14"></a><h3>6.14.&nbsp;
Scalability</h3>

<p>Any claimed solution to solve the IPv4 address shortage should be
        able to deliver the IP connectivity services to a large amount of
        customers, this limit should be evaluated.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.15"></a><h3>6.15.&nbsp;
Security</h3>

<p>
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.15.1"></a><h3>6.15.1.&nbsp;
Port Randomization</h3>

<p>A kind of blind attacks that can be performed against TCP relies
          on the attacker's ability to guess the five-tuple (Protocol, Source
          Address, Destination Address, Source Port, Destination Port) that
          identifies the transport protocol instance to be attacked. Document
          <a class='info' href='#I-D.ietf-tsvwg-port-randomization'>[I&#8209;D.ietf&#8209;tsvwg&#8209;port&#8209;randomization]<span> (</span><span class='info'>Larsen, M. and F. Gont, &ldquo;Transport Protocol Port Randomization Recommendations,&rdquo; April&nbsp;2010.</span><span>)</span></a> describes a
          number of methods for the random selection of the client port
          number, such that the possibility of an attacker guessing the exact
          value is reduced. With shared IPv4 addresses, the port selection
          space is reduced. Intuitively, assuming the port range is known, the
          smaller the port range is, the more predictable the port choice
          is.
</p>
<p>Any solution to solve IPv4 address shortage should specify how
          port randomization is impacted and what alternative means to bypass
          the issue are.
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.15.2"></a><h3>6.15.2.&nbsp;
Duplicate Effects</h3>

<p>Some types of attacks that have an impact on a targeted IPv4
          public address, could see their effects increased by the number of
          customers who share this address. For example, if a given address
          that has, deliberately or not misbehaved, is consequently forbidden
          to access some resources, the whole set of customers who share this
          address will be impacted.
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.16"></a><h3>6.16.&nbsp;
Management Tools</h3>

<p>ISPs deploy a set of tools and applications for the management of
        their infrastructure, especially for supervision purposes. Impact on
        these tools should be evaluated and solutions proposed when required.
        Particularly, means to assign IP connectivity information, means to
        monitor the overall network, to assess the reachability of devices
        should be specified. In this context, impact on ICMP should be
        evaluated.
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.17"></a><h3>6.17.&nbsp;
Solution manageability</h3>

<p>The manageability of any new solution to be activated within
        service providers realms should be evaluated and complexity avoided.
        Particularly, required provisioning operations should be known and not
        complex to enforce. The orchestration of required functions and nodes
        should be specified.
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.18"></a><h3>6.18.&nbsp;
End-Users Facilities</h3>

<p>In the current deployments, end-users are used to configure their
        CPEs in order to control the traffic entering/exiting to their home
        LAN. Examples of these facilities are: port forwarding or firewall
        rules. These facilities should be allowed in the context of IPv4
        address exhaustion solutions. No major degradation compared to the
        current practice should be perceived by end users. Functional richness
        and quality of experience should be at the same level.
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.19"></a><h3>6.19.&nbsp;
Service Access Discrimination</h3>

<p>End-users should not be discriminated based on the assigned IP
        address. The IP connectivity services should be the same for all
        users. Particularly, accessing the added value services should be at
        large extent not based on IP address. Applications developers are
        encouraged to not embed &ldquo;hard&rdquo; IPv4 addresses in their
        software.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>There are no IANA considerations.
</p>
<p>Note to RFC Editor: this section may be removed on publication as an
      RFC.
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>Security considerations are discussed in the Security section
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.&nbsp;References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-tsvwg-port-randomization">[I-D.ietf-tsvwg-port-randomization]</a></td>
<td class="author-text">Larsen, M. and F. Gont, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-port-randomization-07.txt">Transport Protocol Port Randomization Recommendations</a>,&rdquo; draft-ietf-tsvwg-port-randomization-07 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-tsvwg-port-randomization-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.shirasaki-isp-shared-addr">[I-D.shirasaki-isp-shared-addr]</a></td>
<td class="author-text">Yamagata, I., Miyakawa, S., Nakagawa, A., Yamaguchi, J., and H. Ashida, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-shirasaki-isp-shared-addr-04.txt">ISP Shared Address</a>,&rdquo; draft-shirasaki-isp-shared-addr-04 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-shirasaki-isp-shared-addr-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.wilson-class-e">[I-D.wilson-class-e]</a></td>
<td class="author-text">Wilson, P., Michaelson, G., and G. Huston, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-wilson-class-e-02.txt">Redesignation of 240/4 from "Future Use" to "Private Use"</a>,&rdquo; draft-wilson-class-e-02 (work in progress), September&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-wilson-class-e-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1918">[RFC1918]</a></td>
<td class="author-text"><a href="mailto:yakov@cisco.com">Rekhter, Y.</a>, <a href="mailto:rgm3@is.chrysler.com">Moskowitz, R.</a>, <a href="mailto:Daniel.Karrenberg@ripe.net">Karrenberg, D.</a>, <a href="mailto:GeertJan.deGroot@ripe.net">Groot, G.</a>, and <a href="mailto:lear@sgi.com">E. Lear</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1918">Address Allocation for Private Internets</a>,&rdquo; BCP&nbsp;5, RFC&nbsp;1918, February&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1918.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4364">[RFC4364]</a></td>
<td class="author-text">Rosen, E. and Y. Rekhter, &ldquo;<a href="http://tools.ietf.org/html/rfc4364">BGP/MPLS IP Virtual Private Networks (VPNs)</a>,&rdquo; RFC&nbsp;4364, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4364.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pierre Levis (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">42 rue des Coutures</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BP 6243</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Caen Cedex 4  14066</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pierre.levis@orange-ftgroup.com">pierre.levis@orange-ftgroup.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mohamed Boucadair</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mohamed.boucadair@orange-ftgroup.com">mohamed.boucadair@orange-ftgroup.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jean-Luc Grimault</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jeanluc.grimault@orange-ftgroup.com">jeanluc.grimault@orange-ftgroup.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alain Villefranque</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alain.villefranque@orange-ftgroup.com">alain.villefranque@orange-ftgroup.com</a></td></tr>
</table>
</body></html>
