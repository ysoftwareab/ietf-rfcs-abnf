<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Session Initiation Protocol (SIP) extension for Partial Notification of Presence Information</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Session Initiation Protocol (SIP) extension for Partial Notification of Presence Information">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIMPLE WG</td><td class="header">M. Lonnfors</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">J. Costa-Requena</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">E. Leppanen</td></tr>
<tr><td class="header">Expires: July 24, 2008</td><td class="header">Nokia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Khartabil</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 21, 2008</td></tr>
</table></td></tr></table>
<h1><br />Session Initiation Protocol (SIP) extension for Partial Notification of Presence Information<br />draft-ietf-simple-partial-notify-10</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on July 24, 2008.</p>

<h3>Abstract</h3>

<p>
By default, presence delivered using the Presence Event Package for the Session Initiation Protocol (SIP) is represented
in the Presence Information Data Format (PIDF). A PIDF document contains a set of elements, each representing
a different aspect of the presence being reported. When any subset of the elements change, even just a single element, 
a new document containing the full set of elements is delivered. This memo defines an extension allowing delivery of only the presence
data that has actually changed.
			
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#Conventions">2.</a>&nbsp;
Conventions<br />
<a href="#Introduction-partial-notification-mechanism">3.</a>&nbsp;
Introduction to the partial notification mechanism<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Normal-presence-server-operation">3.1.</a>&nbsp;
Basic presence agent operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Operation-partial-notification">3.2.</a>&nbsp;
Operation with partial notification<br />
<a href="#Client-and-server-operations">4.</a>&nbsp;
Client and server operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#content-type-for-partial-notifications">4.1.</a>&nbsp;
Content-type for partial notifications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Watcher-generating-SUBSCRIBE-requests">4.2.</a>&nbsp;
Watcher generation of SUBSCRIBE requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="# Notifier-processing-SUBSCRIBE-requests">4.3.</a>&nbsp;
Presence agent processing of SUBSCRIBE requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Notifier-generating-of-partial-notifications">4.4.</a>&nbsp;
Presence agent generation of partial notifications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Watcher-processing-of-partial-notifications">4.5.</a>&nbsp;
Watcher processing of NOTIFY requests<br />
<a href="#Examples">5.</a>&nbsp;
Examples<br />
<a href="#Security-Considerations">6.</a>&nbsp;
Security Considerations<br />
<a href="#Acknowledgements">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative references<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative references<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
   A presence event package for Session Initiation Protocol (SIP) <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> allow users ('watchers') 
   to subscribe to other users' ('presentities') presence information. 
The presence information is composed of multiple pieces 
   of data that are delivered to the watcher. The size of the presence information document can be large  (i.e. the presence 
   document can contain an arbitrary number of elements called presence tuples that convey data). As specified in RFC2778 
   <a class='info' href='#RFC2778'>[RFC2778]<span> (</span><span class='info'>Day, M., Rosenberg, J., and H. Sugano, &ldquo;A Model for Presence and Instant Messaging,&rdquo; February&nbsp;2000.</span><span>)</span></a> and the presence event package for SIP <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>, a Presence Agent (PA) 
   always delivers in presence notifications all the presence data that has been authorized for a certain watcher. This is done 
   regardless of what presence data has changed compared to last notification. It may not be reasonable to send the complete 
   presence information over low bandwidth and high latency links when only part of the presence information has actually changed. 
   This may end up degrading the presence service and causing bad perception at the watcher side. 
     		
</p>
<p>
   This document defines a partial notification approach where the presence server delivers to the watchers only those parts of the presence 
   information that have changed compared to the presence information sent in the previous notifications. This reduces the amount of
   data that is transported over the network.
   			
</p>
<p>
  This mechanism utilizes the presence event package for SIP <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> and a new MIME type for carrying partial
  Presence Information Data Format documents <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a>.
			
</p>
<a name="Conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions</h3>

<p>
In this document, the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", 
"RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as described in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> and 
indicate requirement levels for compliant implementations.
			
</p>
<p>
This document makes use of the vocabulary defined in RFC2778 <a class='info' href='#RFC2778'>[RFC2778]<span> (</span><span class='info'>Day, M., Rosenberg, J., and H. Sugano, &ldquo;A Model for Presence and Instant Messaging,&rdquo; February&nbsp;2000.</span><span>)</span></a>, RFC3265 <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;SIP-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>, 
the presence event package for SIP <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>, and the PIDF extension for Partial Presence
 <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a>. 			
			
</p>
<a name="Introduction-partial-notification-mechanism"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Introduction to the partial notification mechanism</h3>

<p> 
This chapter briefly introduces the regular functionality of the presence service, and gives an overview of the partial notification 
solution. This section is informational in nature. It does not contain any normative statements.
			
</p>
<a name="Normal-presence-server-operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Basic presence agent operation</h3>

<p>
   The presence service normally operates so that a watcher sends a SIP SUBSCRIBE request targeted to the presentity. The 
   request is routed to the presence agent where the presentity's presence information is stored. The SUBSCRIBE request 
   can include an Accept header field that indicates the supported content types.
				
</p>
<p>
   The presence agent receives the SUBSCRIBE request and if there is no Accept header indicating the supported content types or 
   the Accept header contains the default PIDF content type, the PA will generate presence notifications using the default PIDF 
   format <a class='info' href='#RFC-pidf'>[RFC&#8209;pidf]<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a>. The PIDF document can contain one or multiple XML elements. 
  The PIDF document include a set of elements defined in RFC2778 <a class='info' href='#RFC2778'>[RFC2778]<span> (</span><span class='info'>Day, M., Rosenberg, J., and H. Sugano, &ldquo;A Model for Presence and Instant Messaging,&rdquo; February&nbsp;2000.</span><span>)</span></a> and its extensions for representing 
  the presence information.
  This PIDF document will be carried in the body of a NOTIFY request constructed as per RFC3265 <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;SIP-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>. 
  During basic operation, the presence document always contains the full state corresponding to the presence status of the presentity, 
  as determined by the PA local policy and authorization rules.
				
</p>
<a name="Operation-partial-notification"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Operation with partial notification</h3>

<p>
The partial notification mechanism allows a watcher to request that, whenever possible, notifications contain only presence information that 
has actually changed. A watcher that wants to receive partial notifications according to this document, creates a SIP SUBSCRIBE request 
similar to that of a regular presence subscription. However, the SIP SUBSCRIBE request contains an Accept header field whose value contains the 
"application/pidf-diff+xml" tag as well as the "application/pidf+xml" tag. 
				
</p>
<p>
When the presence agent receives the subscription, it examines the Accept header field value and if the "application/pidf-diff+xml" value is present, 
it can decide to use the partial notifications mechanism specified in this memo. The presence agent builds NOTIFY requests that contain the 
Content-Type header field set to "application/pidf-diff+xml". The first NOTIFY request that contains presence information will contain a full presence 
document. Subsequent NOTIFY requests can contain partial presence documents. This behavior is described in detail in 
<a class='info' href='#Client-and-server-operations'>Section&nbsp;4<span> (</span><span class='info'>Client and server operations</span><span>)</span></a>.	
				
</p>
<a name="Client-and-server-operations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Client and server operations</h3>

<p>
   Unless otherwise specified in this document, the regular watcher and presence agent behavior is applied as defined in the SIP presence event 
   package <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>. 
			
</p>
<a name="content-type-for-partial-notifications"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Content-type for partial notifications</h3>

<p>
   Entities supporting the partial notification extension described in this document MUST support the 'application/pidf-diff+xml' content-type specified in 
   the PIDF extension for partial presence <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a>.
				
</p>
<a name="Watcher-generating-SUBSCRIBE-requests"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Watcher generation of SUBSCRIBE requests</h3>

<p>
   A SUBSCRIBE request can be used to negotiate the preferred content type to be used in the notifications. The Accept header field is used for 
   this purpose as specified in RFC3261 <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. When a watcher wants to allow the presence agent to send partial notifications the watcher 
   MUST include an Accept header field in its SUBSCRIBE request. The value of the Accept header field MUST contain 'application/pidf-diff+xml' (in addition 
   to 'application/pidf+xml' required by the SIP  presence event package <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>). The watcher MAY include a "q" parameter with each Accept
   value to indicate the relative preference of that value.
   				
</p>
<a name=" Notifier-processing-SUBSCRIBE-requests"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Presence agent processing of SUBSCRIBE requests</h3>

<p>
The presence agent receives subscriptions from watchers and generates notifications according to the SIP presence event package <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>. 
If the watcher has indicated the supported content types in the Accept header field of the SUBSCRIBE request, the presence agent compares the values included in the 
Accept header field with the supported ones, and decides which one to use. If the watcher has indicated preferred accept values by means of "q" parameters, the 
presence agent SHOULD base the decision on those preferences, unless otherwise indicated by the presence agent local policy.
			
</p>
<a name="Notifier-generating-of-partial-notifications"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Presence agent generation of partial notifications</h3>

<p>
Once a subscription is accepted and installed, the PA MUST deliver the full state of the presence information in the first partial notification that contains a presence document having &lt;pidf-full> root element. If the presence agent decides to send notifications that include a presence document according to this specification, the presence agent MUST build a presence 
document according to the PIDF extension for Partial Presence <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> and MUST set the Content-Type header field to the value 
'application/pidf-diff+xml'.
				
</p>
<p>
When using the 'application/pidf-diff+xml' MIME type the PA MUST include a "version" attribute and for the first partial notification (within a given subscription) the PA MUST initialize version to value one (1). This version counter is scoped to the subscription, and is incremented by one within each partial notification. The version value  is only reset when the given subscription is terminated. It is not reset when the subscription is refreshed.
				
</p>
<p>	
When the PA generates a partial presence document, the PA SHOULD include only that presence information that has changed compared to the previous 
notifications. It is up to the PA's local policy to determine what is considered as a change to the previous state. 
				
</p>
<p>
   The PA MUST construct the partial presence document according to the following logic: 
   		</p>
<ul class="text">
<li>
The PA MUST construct the presence information according to the PIDF extension for Partial Presence <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a>. 
All the information that have been added to the presence document are listed inside &lt;add> elements. All information that have been removed from 
the presence document are listed inside &lt;remove> elements and all information that have been changed are listed under &lt;replace> elements. 
						
</li>
<li>
The PA MUST include a "version"  attribute in the presence document. The PA MUST increment the version number by one compared to the 
earlier successfully sent presence document in the PIDF extension for Partial Presence <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a> format to the watcher associated with a certain subscription.
						
</li>
</ul><p>
				
</p>
<p>
The PA MUST NOT send a new NOTIFY request that contains a partial notification for the same Request-URI until it has received a final 
response from the watcher for the previous one or the previous NOTIFY request has timed out. 
				
</p>
<p>
When the PA receives a SUBSCRIBE request (refresh or termination) within the associated subscription, it SHOULD send a NOTIFY request containing the full presence document.
				
</p>
<p>
If the PA has used other than the 'application/pidf-diff+xml' content type in notifications within the existing subscription, and changes to deliver partial notifications, the PA MUST deliver the full state of the presence information containing a presence document having &lt;pidf-full> root element as the first partial notification.
				
</p>
<a name="Watcher-processing-of-partial-notifications"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Watcher processing of NOTIFY requests</h3>

<p>
Watcher processes all NOTIFY requests that contain 'application/pidf+xml' content type as specified in RFC3856 <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>. 
				
</p>
<p>
When the watcher receives the first notification containing the 'application/pidf-diff+xml' MIME body the watcher MUST initialize an internal version counter, 
related to this subscription, to the value of the "version" included in the presence document. This version counter is scoped to the subscription. The watcher MUST also store the received full presence presence document as its local copy.
				
</p>
<p>	
When the watcher receives a subsequent 'application/pidf-diff+xml' encoded presence document the watcher MUST compare the received "version" 
attribute with the local version counter. If the watcher receives a presence document with the "version" attribute value equal or lower than the locally stored version number, it is considered a PA failure and the watcher SHOULD discard the document without further processing. Otherwise the watcher MUST modify its locally stored information according to the following logic:

		</p>
<ul class="text">
<li>					
If the root element of the presence document is &lt;pidf-full>, the watcher must replace its local copy of the presence document with the presence document
received in the 'application/pidf-diff+xml' body and set the internal version value to the value of the "version" attribute included in the presence document. 
						
</li>
<li>
If the root element of the presence document is &lt;pidf-diff> and the received version number is incremented by one compared with the local version counter, 
the watcher MUST apply the changes to its local copy of the full presence document indicated in the received 'application/pidf-diff+xml' document as specified in PIDF extension for Partial Presence <a class='info' href='#draft-partial-pidf'>[draft&#8209;partial&#8209;pidf]<span> (</span><span class='info'>Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; November&nbsp;2007.</span><span>)</span></a>. The watcher MUST increment the local version counter by one. 
						
</li>
<li>					
If the root element of the presence document is &lt;pidf-diff> and the received "version" value is higher by more than one compared with the locally stored value the watcher assumes that one or more NOTIFYs were lost. The watcher SHOULD either refresh the subscription in order to receive a full presence document or terminate the subscription. 
						
</li>
</ul><p>
				
</p>
<p>
	 if watcher encounters a processing error while processing received 'application/pidf-diff+xml' encoded presence
	 document, look at Section 5.1 of <a class='info' href='#patch-ops'>[patch&#8209;ops]<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing                   XML Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a>. In this case watcher SHOULD renew the subscription. 
	 Watcher MAY also fall back to normal presence operations by not inserting 'application/pidf-diff+xml' in a new SUBSCRIBE request. 			
	 It is hardly reasonable to signal this error to the
   notifier even if the error exists in the notifier process.
				
</p>
<p>
    If the PA changes the content type used in notifications within the existing subscription the watcher MUST discard all the
    previously received presence information (except local version counter) from that particular presentity and process the new content as specified for that 
    content type. Local version counter MUST NOT be discarded because if PA changes back to 'application/pidf-diff+xml' MIME type version counter will
    continue to increase from the last version value.
	    	     
</p>
<a name="Examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Examples</h3>

<p>
The following message flow shows an example applying the partial notifications mechanism.
			
</p>
<p>
A watcher sends a SUBSCRIBE request declaring support for the default presence format ('application/pidf+xml) and 
for the partial notification format ('application/pidf-diff+xml') in the Accept header field value. The watcher uses the "q" parameter 
to set the preference for receiving partial notifications. The PA accepts the subscription and, based on 
the "q" parameter value, selects to send partial notifications in NOTIFY requests. The first NOTIFY 
request includes the full state of presence information. The following notifications only include information about delta of the presence information from the previous NOTIFY requests.
   
   <br />

				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    Watcher                   Presence Agent                  PUA
         | F1 SUBSCRIBE              |                         |
         |--------------------------&gt;|                         |
         | F2 200 OK                 |                         |
         |&lt;--------------------------|                         |
         | F3 NOTIFY                 |                         |
         |&lt;--------------------------|                         |
         | F4 200 OK                 |                         |
         |--------------------------&gt;|                         |
         |                           |                         |
         |                           |   Update presence       |
         |                           |&lt;----------------------- |
         |                           |                         |
         | F5 NOTIFY                 |                         |
         |&lt;--------------------------|                         |
         | F6 200 OK                 |                         |
         |--------------------------&gt;|                         |


      Message Details

   F1 SUBSCRIBE   watcher-&gt;example.com server

         SUBSCRIBE sip:resource@example.com SIP/2.0
         Via: SIP/2.0/TCP watcherhost.example.com;
           branch=z9hG4bKnashds7
         To: &lt;sip:resource@example.com&gt;
         From: &lt;sip:watcher@example.com&gt; ;tag=xfg9
         Call-ID: 2010@watcherhost.example.com
         CSeq: 17766 SUBSCRIBE
         Max-Forwards: 70
         Event: presence
         Accept: application/pidf+xml;q=0.3,
           application/pidf-diff+xml;q=1
         Contact: &lt;sip:user@watcherhost.example.com&gt;
         Expires: 3600
         Content-Length: 0

   The PA accepts the subscription and generates a 200 OK response
   to the SUBSCRIBE request

      F2 200 OK   example.com server -&gt;watcher

         SIP/2.0 200 OK
         Via: SIP/2.0/TCP watcherhost.example.com;
           branch=z9hG4bKnashds7
           ;received=192.0.2.1
         To: &lt;sip:resource@example.com&gt;;tag=ffd2
         From: &lt;sip:watcher@example.com&gt;;tag=xfg9
         Call-ID: 2010@watcherhost.example.com
         CSeq: 17766 SUBSCRIBE
         Event: presence
         Expires: 3600
         Contact: &lt;sip:server.example.com&gt;
         Content-Length: 0

       The PA, based on the "q" parameter value in the Accept header
       of the SUBSCRIBE request (F1), decides to use partial
       notifications. The PA creates the first NOTIFY request that
       includes the full presence document.

      F3 NOTIFY  example.com server -&gt; watcher

         NOTIFY sip:user@watcherhost.example.com SIP/2.0
         Via: SIP/2.0/TCP server.example.com;
           branch=z9hG4bKna998sk
         To: &lt;sip:watcher@example.com&gt;;tag=xfg9
         From: &lt;sip:resource@example.com&gt;;tag=ffd2
         Call-ID: 2010@watcherhost.example.com
         Event: presence
         Subscription-State: active;expires=3599
         Max-Forwards: 70
         CSeq: 8775 NOTIFY
         Contact: &lt;sip:server.example.com&gt;
         Content-Type: application/pidf-diff+xml
         Content-Length: [replace with real content length]

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;p:pidf-full xmlns="urn:ietf:params:xml:ns:pidf"
          xmlns:p="urn:ietf:params:xml:ns:pidf-diff"
          xmlns:r="urn:ietf:params:xml:ns:pidf:rpid"
          xmlns:c="urn:ietf:params:xml:ns:pidf:caps"
          xmlns:cp="urn:ietf:params:xml:ns:pidf:cipid"
          xmlns:dm="urn:ietf:params:xml:ns:pidf:data-model"
          entity="sip:resource@example.com"
          version="1"&gt;

    &lt;tuple id="sg89ae"&gt;
     &lt;status&gt;
      &lt;basic&gt;open&lt;/basic&gt;
     &lt;/status&gt;
     &lt;c:servcaps&gt;
      &lt;c:audio&gt;true&lt;/c:audio&gt;
      &lt;c:video&gt;false&lt;/c:video&gt;
      &lt;c:message&gt;true&lt;/c:message&gt;
     &lt;/c:servcaps&gt;
      &lt;r:relationship&gt;&lt;r:assistant/&gt;&lt;/r:relationship&gt;
     &lt;contact priority="0.8"&gt;tel:09012345678&lt;/contact&gt;
    &lt;/tuple&gt;

    &lt;tuple id="cg231jcr"&gt;
     &lt;status&gt;
      &lt;basic&gt;open&lt;/basic&gt;
     &lt;/status&gt;
     &lt;contact priority="1.0"&gt;im:res@example.com&lt;/contact&gt;
    &lt;/tuple&gt;

    &lt;tuple id="r1230d"&gt;
     &lt;status&gt;
      &lt;basic&gt;closed&lt;/basic&gt;
     &lt;/status&gt;
     &lt;cp:homepage&gt;http://example.com/~res/&lt;/cp:homepage&gt;
     &lt;cp:icon&gt;http://example.com/~res/icon.gif&lt;/cp:icon&gt;
     &lt;cp:card&gt;http://example.com/~res/card.vcd&lt;/cp:card&gt;
     &lt;contact priority="0.9"&gt;sip:resource@example.com&lt;/contact&gt;
    &lt;/tuple&gt;

    &lt;note xml:lang="en"&gt;Full state presence document&lt;/note&gt;

    &lt;dm:person id="fdkfj"&gt;
      &lt;r:activities&gt;
       &lt;r:on-the-phone/&gt;
       &lt;r:busy/&gt;
      &lt;/r:activities&gt;
    &lt;/dm:person&gt;

    &lt;dm:device id="u00b40c7"&gt;
      &lt;c:devcaps&gt;
       &lt;c:mobility&gt;
        &lt;c:supported&gt;
         &lt;c:mobile/&gt;
        &lt;/c:supported&gt;
       &lt;/c:mobility&gt;
      &lt;/c:devcaps&gt;
      &lt;dm:deviceID&gt;mac:xxx&lt;/dm:deviceID&gt;
    &lt;/dm:device&gt;

   &lt;/p:pidf-full&gt;


      F4 200 OK watcher -&gt; example.com server

         SIP/2.0 200 OK
         Via: SIP/2.0/TCP server.example.com;
           branch=z9hG4bKna998sk
           ;received=192.0.2.2
         To: &lt;sip:watcher@example.com&gt;;tag=xfg9
         From: &lt;sip:resource@example.com&gt;;tag=ffd2
         Call-ID: 2010@watcherhost.example.com
         CSeq: 8775 NOTIFY
         Content-Length: 0

         At a later time, the presentity's presence information
         changes. The PA generates a NOTIFY request
         that includes information about the changes.

   F5 NOTIFY example.com server -&gt; watcher

         NOTIFY sip:user@watcherhost.example.com SIP/2.0
         Via: SIP/2.0/TCP server.example.com;
           branch=z9hG4bKna998sl
         To: &lt;sip:watcher@example.com&gt;;tag=xfg9
         From: &lt;sip:resource@example.com&gt;;tag=ffd2
         Call-ID: 2010@watcherhost.example.com
         CSeq: 8776 NOTIFY
         Event: presence
         Subscription-State: active;expires=3543
         Max-Forwards: 70
         Contact: &lt;sip:server.example.com&gt;
         Content-Type: application/pidf-diff+xml
         Content-Length: [replace with real content length]

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;p:pidf-diff xmlns="urn:ietf:params:xml:ns:pidf"
                xmlns:p="urn:ietf:params:xml:ns:pidf-diff"
                xmlns:r="urn:ietf:params:xml:ns:pidf:rpid"
                xmlns:dm="urn:ietf:params:xml:ns:pidf:data-model"
             entity="sip:resource@example.com"
             version="2"&gt;

    &lt;p:add sel="presence/note" pos="before"&gt;&lt;tuple id="ert4773"&gt;
     &lt;status&gt;
      &lt;basic&gt;open&lt;/basic&gt;
     &lt;/status&gt;
     &lt;contact priority="0.4"&gt;mailto:res@example.com&lt;/contact&gt;
     &lt;note xml:lang="en"&gt;This is a new tuple inserted
           between the last tuple and note element&lt;/note&gt;
    &lt;/tuple&gt;

    &lt;/p:add&gt;

    &lt;p:replace sel="*/tuple[@id='r1230d']/status/basic/text()"
     &gt;open&lt;/p:replace&gt;

    &lt;p:remove sel="*/dm:person/r:activities/r:busy"/&gt;

    &lt;p:replace sel="*/tuple[@id='cg231jcr']/contact/@priority"
     &gt;0.7&lt;/p:replace&gt;

   &lt;/p:pidf-diff&gt;

      F6 200 OK watcher-&gt; example.com server

         SIP/2.0 200 OK
         Via: SIP/2.0/TCP server.example.com;
           branch=z9hG4bKna998sl
          ;received=192.0.2.2
         To: &lt;sip:watcher@example.com&gt;;tag=xfg9
         From: &lt;sip:resource@example.com&gt;;tag=ffd2
         Call-ID: 2010@watcherhost.example.com
         CSeq: 8776 NOTIFY
         Content-Length: 0

</pre></div><p>

			
</p>
<a name="Security-Considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
This specification relies on the presence event package for SIP <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>.
   Partial notifications can reveal information about what has changed
   compared to the previous notification.  This can make it
   easier for eavesdropper to know what kind of changes are happening in the 
   presentity's presence information.  However, the same information can be
   found if the presence event package is used with baseline PIDF <a class='info' href='#RFC-pidf'>[RFC&#8209;pidf]<span> (</span><span class='info'>Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;Presence Information Data Format (PIDF),&rdquo; August&nbsp;2004.</span><span>)</span></a>.	
			
</p>
<p>
   A third party can inject a NOTIFY request with partial state that will cause the watcher
   to think it has missed a partial notification and to request a new full presence
   document. This is no worse than what we have without this extension
   since a party that could perform such action could also send a NOTIFY with
   Subscription-State: terminated and achieve the same effect without
   knowing about the extension.  Partial Notification does not make the situation any worse,
   and the protection mechanisms from the existing system apply to
   preventing this attack against the partial notification mechanism.
			
</p>
<p>
   Presence related security considerations are extensively discussed in
   the presence event package for SIP <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> and all those identified
   security considerations apply to this document as well. Issues
   described in the presence event package for SIP <a class='info' href='#RFC-presence'>[RFC&#8209;presence]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a>, including confidentiality, 
   message integrity and authenticity, outbound authentication, replay prevention, DoS attacks against thirst parties 
   and DoS attacks against servers all apply here without any change.
			
</p>
<p>
It is RECOMMENDED that TLS <a class='info' href='#RFC2246'>[RFC2246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The TLS Protocol Version 1.1,&rdquo; April&nbsp;2006.</span><span>)</span></a> be used between elements to provide hop by hop confidentially 
protection. Furthermore, S/MIME MAY be used for integrity and authenticity of SUBSCRIBE and NOTIFY requests. 
This is described in Section 23 of RFC 3261.
			
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>
The authors would like to thank Jari Urpalainen, Jyrki Aarnos, Jonathan Rosenberg, Dean Willis, Kriztian Kiss, Juha Kalliokulju, 
Miguel Garcia, Anders Kristensen, Yannis Pavlidis, Ben Cambell, Robert Sparks, and Tim Moran for their valuable comments.
   		
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="draft-partial-pidf">[draft-partial-pidf]</a></td>
<td class="author-text">Lonnfors, M., Khartabil, H., Leppanen, E., and J. Urpalainen, &ldquo;Presence Information Data Format (PIDF) Extension for Partial Presence,&rdquo; &nbsp;draft-ietf-simple-partial-pidf-format-10 (work in progress), November&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC-presence">[RFC-presence]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3856">A Presence Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3856, August&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC-pidf">[RFC-pidf]</a></td>
<td class="author-text">Sugano, H., Fujimoto, S., Klyne, G., Bateman, A., Carr, W., and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3863">Presence Information Data Format (PIDF)</a>,&rdquo; RFC&nbsp;3863, August&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">SIP-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2246">[RFC2246]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc4346">The TLS Protocol Version 1.1</a>,&rdquo; RFC&nbsp;4346, April&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="patch-ops">[patch-ops]</a></td>
<td class="author-text">Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing
                  XML Path Language (XPath) Selectors,&rdquo; &nbsp;draft-ietf-simple-xml-patch-ops-04, November&nbsp;2007.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2778">[RFC2778]</a></td>
<td class="author-text">Day, M., Rosenberg, J., and H. Sugano, &ldquo;<a href="http://tools.ietf.org/html/rfc2778">A Model for Presence and Instant Messaging</a>,&rdquo; RFC&nbsp;2778, February&nbsp;2000.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mikko Lonnfors</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 321</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 71 8008000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mikko.lonnfors@nokia.com">mikko.lonnfors@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jose Costa-Requena</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 321</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 71 8008000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jose.costa-requena@nokia.com">jose.costa-requena@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Eva Leppanen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lempaala</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:eva.leppanen@saunalahti.fi">eva.leppanen@saunalahti.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hisham Khartabil</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Melbourne</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Australia</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 416 108 890</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hisham.khartabil@gmail.com">hisham.khartabil@gmail.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
