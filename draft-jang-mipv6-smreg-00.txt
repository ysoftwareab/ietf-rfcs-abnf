


IETF Mobile IPv6 Working Group                                   H. Jang
Internet-Draft                                                  J. Cheon
Expires: March 31, 2004                                         S. Singh
                                                             SAMSUNG AIT
                                                                Oct 2003


        Simultaneous Registration of Multiple Care-of Addresses
                     draft-jang-mipv6-smreg-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on March 31, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This draft proposes a scheme that allows a mobile node to register a
   primary care-of address(CoA) as well as one or more non-primary CoAs
   by sending a single binding update message to the home agent and/or
   correspondent node. This is achieved by using two new mobility
   options defined in this draft. Mobile nodes that perform duplicate
   address detection procedure, such as Advance DAD and Optimistic DAD
   can benefit from this scheme. Proposed scheme does not require to
   exchange CoTI and CoT messages, usually required for the registration
   of each of the non-primary CoA(s). It also does not require to
   maintain binding management key for each of the non-primary CoA(s).
   Thus the proposed scheme reduces the signaling and processing



Jang, et al.             Expires March 31, 2004                 [Page 1]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


   overhead in Mobile IPv6 networks.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Protocol Overview  . . . . . . . . . . . . . . . . . . . . . .  5
   4.  Mobile Node Considerations . . . . . . . . . . . . . . . . . .  6
   5.  Home Agent Considerations  . . . . . . . . . . . . . . . . . .  7
   6.  Correspondent Node Considerations  . . . . . . . . . . . . . .  8
   7.  Message Formats  . . . . . . . . . . . . . . . . . . . . . . .  9
   7.1 Non-primary CoA Binding Request option . . . . . . . . . . . .  9
   7.2 Non-primary CoA Binding Reply option . . . . . . . . . . . . . 10
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 12
       Normative References . . . . . . . . . . . . . . . . . . . . . 13
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 13
       Intellectual Property and Copyright Statements . . . . . . . . 15


































Jang, et al.             Expires March 31, 2004                 [Page 2]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


1. Introduction

   A mobile node may have multiple interfaces to support different
   access technologies and current IPv6 specification allows
   configuration of multiple IPv6 addresses on any interface.

   After MN moves to foreign link, it configures new CoA using either
   stateless[3] or stateful mechanisms[4]. It then registers this
   address, termed as primary CoA, with the HA and/or CN and uses it to
   communicate with the CNs. According to the current Mobile IPv6
   specification[2], only single CoA is used to communicate with CN in
   foreign network. However, it is helpful for MN to utilize multiple
   CoAs for more reliable connectivity, bandwidth management, delay
   reduction, etc. In the following environments MN MAY have one or more
   non-primary CoAs for any or all of the prefixes available on its
   current link:

   o MN has multiple interfaces and receives a Router Advertisement with
   different Prefix options from each interface in foreign network.

   o MN receives Router Advertisements with different prefix options on
   one interface.

   o Both of above situations.

   Multiple CoA Registration[5] and HA Filtering[6] are recently
   proposed protocols designed to utilize multiple CoAs. But some steps
   need to be taken to optimize the registration procedure of multiple
   CoAs. Before using the newly generated address, MN SHOULD perform
   Duplicate Address Detection procedure[3] in order to verify its
   uniqueness. The completion time for different CoAs may vary. So MN
   sends separate BU messages to HA for each of the CoAs. Most of this
   BU message fields are same except CoA related information. This
   results in signaling overhead in bandwidth constrained wireless
   medium. Moreover, since the return routability procedure between the
   MN and CN MUST be done for each of the CoAs, the situation may be
   more aggravated. At this point, we propose the method to register
   multiple CoAs, especially one or more non-primary CoAs with minimal
   overhead. Note that the registration for the primary CoA remains
   unchanged and can be done according to Mobile IPv6[2].











Jang, et al.             Expires March 31, 2004                 [Page 3]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


2. Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119[1].

   Most of terms used in this draft are defined in [2] and the following
   terminology and abbreviations are used in this document.

      Primary Binding

      -  The association of the home address of a mobile node with a
         primary CoA for that mobile node, along with the remaining
         lifetime of that association.

      Non-Primary Binding

      -  The association of the home address of a mobile node with a
         non-primary CoA for that mobile node, along with the remaining
         lifetime of that association.

      Non-primary CoA Binding Request Option

      -  The mobility option to carry the non-primary CoA and its
         related information necessary for the non-primary binding. This
         option is valid only in Binding Update messages.

      Non-primary CoA Binding Reply Option

      -  The mobility option to carry the non-primary CoA and its
         related information necessary for the non-primary binding. This
         option is valid only in Binding Acknowledgement messages.



















Jang, et al.             Expires March 31, 2004                 [Page 4]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


3. Protocol Overview

   The proposed scheme operates on optimized DAD solution, hence enables
   the simultaneous registration for all available multiple CoAs by
   using single BU message. Optimized DAD solutions such as Advance
   DAD[7] and Optimistic DAD[8] are recently discussed in DNA BoF to
   minimize DAD latency and support the prompt address configuration
   after MN's handover. We think that with high probability it will be
   deployed to solve the crucial problem in Mobile IPv6, which is to
   minimize the handover latency. Based on optimized DAD solutions, the
   proposed scheme enables MN to register one or more non-primary CoAs
   by using new mobility options which are included in BU and BA used to
   register a primary CoA. After handover, MN can configure all
   available new CoAs through optimized DAD solution without delay and
   register its primary CoA to the HA and/or CNs. At that time, MN can
   also register additionally its one or more non-primary CoAs by using
   Non-primary CoA Binding Request options which will be introduced in
   Section 7.1. After the HA or CN receives the BU including Non-primary
   CoA Binding Request options, it MUST send BA including Non-primary
   CoA Binding Reply options to let MN know the binding status for each
   Non-primary CoA. The bit 'P' in Binding Cache entry is newly defined
   in this draft to mark if the entry is for the primary binding or
   non-primary binding.

   This scheme enables the registration of non-primary CoAs and avoids
   sending the duplicate information in each separate BU message without
   exchange of CoTI and CoT for each non-primary CoA, hence reducing the
   signaling and processing overheads in MIPv6.























Jang, et al.             Expires March 31, 2004                 [Page 5]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


4. Mobile Node Considerations

   After Layer 3 handover, MN generates its New CoAs using stateless or
   stateful mechanisms. When CoAs are generated using stateless manner
   and an optimized DAD solution, all of them are available at the same
   time right after MN's handover, thereby it is possible for a MN to
   register all available CoAs at the same time. How to choose the
   non-primary CoAs to register among multiple available non-primary
   CoAs is out of scope of this draft. It may be done with help of
   application programs.

   If a MN configures only one new CoA or wants to register only one out
   of several available new CoAs, then it MUST register this as a
   primary CoA with HA according to [2]. Otherwise, it SHOULD send BU
   with the non-primary CoA Binding Request options for all of the
   non-primary CoAs that MN wants to use for the communication with the
   CN. Main fields of the Non-primary CoA Binding Request option,
   defined in section 7.1, are set as below:

   o Lifetime is set to the requested lifetime for the Non-primary CoA.

   o Non-primary CoA is set to the address which a MN wants to register
   to HA or CN as a non-primary CoA. This address is bound to a home
   address contained in Home Address option.

   After sending BU message with Non-primary CoA binding request option,
   MN MUST create new entry in its Binding Update List for each
   non-primary CoA. The key for searching of Binding Update List SHOULD
   be the destination IP address of BU and CoA. Note that all CoAs
   whether its primary CoA or non-primary CoA is bound to the same home
   address.




















Jang, et al.             Expires March 31, 2004                 [Page 6]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


5. Home Agent Considerations

   Whenever HA receives a BU, it MUST validate and authenticate it
   according to the steps described in Section 10.3.1 of [2]. If HA
   decides to accept the BU, then it MUST process the BU as follows.

   o HA MUST search the Binding Cache entry by using HoA in Home Address
   option and primary CoA in Source Address as a key, and creates or
   updates the corresponding Binding Cache entry according to [2]. In
   addition, It SHOULD set the 'P' flag to indicate the primary binding.
   The bit 'P' in the Binding Cache entry is newly defined to
   differentiate the non-primary binding and primary binding.

   o If the BU contains one or more Non-primary CoA Binding Request
   options, additional operation SHOULD be done for each non-primary CoA
   Binding Request option. HA MUST search the Binding Cache by using a
   pair of HoA in Home Address option and non-primary CoA in Non-primary
   CoA field in this option as a key.

   - If such an entry already exists in Binding Cache, HA MUST update
   its existing Binding Cache entry and SHOULD clear the 'P' flag to
   indicate non-primary binding.

   - Otherwise, HA MUST create Binding Cache entry for the non-primary
   CoA and SHOULD clear 'P' flag to indicate non-primary binding.

   HA SHOULD record the lifetime of non-primary CoA retrieved from the
   Non-primary CoA Binding Request option in Binding Cache entry.

   When the HA replies with BA to MN, it MUST include the Non-primary
   CoA Reply Binding option for each Non-primary Request Binding option
   to let MN know the binding status of each non-primary CoA. If HA
   receives packets destined to MN, it MAY forward the packets to the
   specific CoA based on its own predefined filtering policy[6].

   How to choose the forwarding destination IP address among the
   multiple registered CoAs is out of scope of this draft. If there is
   no filtering policy, it SHOULD forward to the primary CoA by default.













Jang, et al.             Expires March 31, 2004                 [Page 7]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


6. Correspondent Node Considerations

   When the MN registers one or more CoAs to CN, the processing
   procedures of the received BU in CN are the same as those in HA.

   The procedure of return routability remains unchanged and follows
   [2].

   Originally, the binding management keys are maintained so as to
   guarantee the integrity and authenticity of the BU, and according to
   [2], a MN MUST perform the return routability procedure before
   sending every BU to CN. However, in this scheme only single BU is
   used to register multiple CoAs and there is no need to perform
   additional return routability or to maintain the binding management
   keys for multiple CoAs. Thus signaling overhead is reduced
   significantly by omitting the exchange of CoTIs and CoTs for
   non-primary CoAs.


































Jang, et al.             Expires March 31, 2004                 [Page 8]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


7. Message Formats

   This section introduces the new mobility options, the Non-primary CoA
   Binding Request option and the Non-primary CoA Binding Reply option,
   to support the registrations for the non-primary CoAs.

7.1 Non-primary CoA Binding Request option

   This is a new mobility option that MUST be included in BU messages to
   carry non-primary CoA, when a MN wants to register them at the same
   time as registering the primary CoA to a HA or CN.

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                   |    Type (8)   |   Length (8)  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Lifetime (16)         |    Seq # (8)  |  Reserved (8) |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                     Non-primary CoA (128)                     +
   |                                                               |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   	Type
   		TBA

   	Length
   		8-bit unsigned integer. length fields in units of
   		8 octets.

   	Lifetime
   		16-bit unsigned integer. The number of time units
   		remaining before the binding for the Non-primary CoA
   		MUST be considered expired. A value of zero indicates
   		that the Binding Cache entry for the non-primary CoA
   		MUST be deleted. One time unit is 4 seconds.

   	Sequence #
   		A 16-bit unsigned integer used to match a Non-primary
   		CoA Binding Request option and a corresponding Non-
   		primary CoA Binding Reply option.




Jang, et al.             Expires March 31, 2004                 [Page 9]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


   	Reserved
   		These fields are unused. They MUST be initialized to
   		zero by the sender and MUST be ignored by the receiver.


7.2 Non-primary CoA Binding Reply option

   This is a new mobility option that MUST be included in BA messages to
   acknowledge binding status for non-primary CoA. This option is sent
   by a HA or CN in response to the receipt of the BU which includes
   Non-primary CoA Binding Request option.

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                   |    Type (8)   |   Length (8)  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Status (8)  |     Seq (8)   |         Lifetime (16)         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   	Type
   		TBA

   	Length
   		8-bit unsigned integer. Length fields in units of 8
   		octets.

   	Lifetime
   		16-bit unsigned integer. The number of time units
   		remaining before the binding for the Non-primary CoA
   		MUST be considered expired. A value of zero indicates
   		that the Binding Cache entry for the non-primary CoA
   		MUST be deleted. One time unit is 4 seconds.

   	Reserved
   		These fields are unused. They MUST be initialized to
   		zero by the sender and MUST be ignored by the receiver.

   	Status
   		8-bit unsigned integer indicating the disposition of
   		Non-primary Binding Request option in BU. Values of
   		the Status field less than 128 indicate that the BU
   		was accepted by the receiving node. Values greater than
   		or equal to 128 indicate that the Non-primary Binding
   		Request option was rejected by the receiving node.
   		The status values are same those defined in Section
   		6.1.8 of [2].



Jang, et al.             Expires March 31, 2004                [Page 10]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


   		Besides, one more status is newly defined in this draft.

   		140 The registration for Non-primary CoA is not
   		supported.

   	Sequence #
   		This is copied from Sequence # field of corresponding
   		Non-primary CoA Binding Request option in the BU and used
   		by the MN to match the Non-primary CoA Binding Request
   		option and the corresponding Non-primary CoA Binding
   		Reply option in the BA.

   	Lifetime
   		The granted lifetime, in time units of 4 seconds, for
   		which the receiving node, HA or CN, SHOULD retain the
   		entry for this MN in its Binding Cache.



































Jang, et al.             Expires March 31, 2004                [Page 11]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


8. Security Considerations

   This draft proposes two new mobility options used for the
   registration of multiple CoAs. These mobility options are included
   within binding update message. Hence, this draft assumes that all the
   security considerations applied to a general Mobile IPv6 node are
   applied to this draft as well.












































Jang, et al.             Expires March 31, 2004                [Page 12]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


Normative References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Johnson, D., Perkins, C. and J. Arkko, "Mobility Support in
        IPv6", draft-ietf-mobileip-ipv6-24 (work in progress), July
        2003.

   [3]  Thomson, S. and T. Narten, "IPv6 Stateless Address
        Autoconfiguration", RFC 2462, December 1998.

   [4]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C. and M.
        Carney, "Dynamic Host Configuration Protocol for IPv6 (DHCPv6)",
        RFC 3315, July 2003.

   [5]  Wakikawa, R., "Multiple Care-of Addresses Registration",
        draft-wakikawa-mobileip-multiplecoa-02 (work in progress),
        September 2003.

   [6]  Montavont, N. and T. Noel, "Home Agent Filtering for Mobile
        IPv6", draft-montavont-mobileip-ha-filtering-v6-00 (work in
        progress), July 2003.

   [7]  Han, Y., "Advance Duplicate Address Detection",
        draft-han-mobileip-adad-01 (work in progress), July 2003.

   [8]  Moore, N., "Optimistic Duplicate Address Detection",
        draft-moore-ipv6-optimistic-dad-03 (work in progress), September
        2003.


Authors' Addresses

   Hee-Jin Jang
   SAMSUNG Advanced Institute of Technology
   i-Networking Laboratory
   San 14-1, Nongseo-ri, Giheung-eup
   Yongin-si, Gyeonggi-do  449-712
   KOREA

   Phone: +82 31 280 9615
   EMail: heejin.jang@samsung.com
   URI:   http://home.postech.ac.kr/~arche







Jang, et al.             Expires March 31, 2004                [Page 13]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


   Jung-Hoon Cheon
   SAMSUNG Advanced Institute of Technology
   i-Networking Laboratory
   San 14-1, Nongseo-ri, Giheung-eup
   Yongin-si, Gyeonggi-do  449-712
   KOREA

   Phone: +82 31 280 9569
   EMail: jh.ch@samsung.com


   Shubhranshu Singh
   SAMSUNG Advanced Institute of Technology
   i-Networking Laboratory
   San 14-1, Nongseo-ri, Giheung-eup
   Yongin-si, Gyeonggi-do  449-712
   KOREA

   Phone: +82 31 280 9552
   EMail: shubhranshu@samsung.com































Jang, et al.             Expires March 31, 2004                [Page 14]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Jang, et al.             Expires March 31, 2004                [Page 15]

Internet-Draft    Simultaneous Registration of Multiple CoAs    Oct 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Thank Y.Han and J.Choi who discussed together and gave the helpful
   advice on this draft.











































Jang, et al.             Expires March 31, 2004                [Page 16]


