



LSR Working Group                                                 Y. Zhu
Internet-Draft                                             China Telecom
Intended status: Standards Track                                 J. Dong
Expires: September 10, 2020                                        Z. Hu
                                                     Huawei Technologies
                                                           March 9, 2020


             Using Flex-Algo for Segment Routing based VTN
                 draft-zhu-lsr-isis-sr-vtn-flexalgo-00

Abstract

   As defined in I-D.ietf-teas-enhanced-vpn, enhanced VPN (VPN+) aims to
   provide enhanced VPN service to support the needs of enhanced
   isolation and stringent performance requirements.  VPN+ requries
   integration between the overlay VPN and the underlay network.  A
   Virtual Transport Network (VTN) is a virtual network which consists
   of a subset of network toplogy and network resources allocated from
   the underlay network.  A VTN could be used as the underlay for one or
   a group of VPN+ services.

   I-D-dong-lsr-sr-enhanced-vpn defines the IGP mechanisms with
   necessary extensions to build a set of Segment Routing (SR) based
   VTNs.  This document describes a simplified mechanism to build the SR
   based VTNs using SR Flex-Algo with minor extensions to IGP L2 bundle.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."




Zhu, et al.            Expires September 10, 2020               [Page 1]

Internet-Draft            Flex-Algo for SR VTN                March 2020


   This Internet-Draft will expire on September 10, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Advertisement of SR VTN Topology Attribute  . . . . . . . . .   3
   3.  Extensions to IGP L2 Bundles  . . . . . . . . . . . . . . . .   4
   4.  Scalability Considerations  . . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   7.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   5
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Enhanced VPN (VPN+) is an enhancement to VPN services to support the
   needs of new applications, particularly including the applications
   that are associated with 5G services.  These applications require
   enhanced isolation and have more stringent performance requirements
   than that can be provided with traditional overlay VPNs.  These
   properties cannot be met with pure overlay networks, as they require
   integration between the underlay and the overlay networks.
   [I-D.ietf-teas-enhanced-vpn] specifies the framework of enhanced VPN
   and describes the candidate component technologies in different
   network planes and layers.  An enhanced VPN may be used for 5G
   transport network slicing, and will also be of use in other generic
   scenarios.

   To meet the requirement of enhanced VPN services, a number of virtual
   transport networks (VTN) need to be created, each with a subset of



Zhu, et al.            Expires September 10, 2020               [Page 2]

Internet-Draft            Flex-Algo for SR VTN                March 2020


   the underlay network topology and a set of network resources
   allocated to meet the requirement of a specific VPN+ service or a
   group of VPN+ services.  Another existing approach is to build a set
   of point-to-point paths, each with a set of network resource reserved
   along the path, such paths are called Virtual Transport Paths (VTPs).
   Although using a set of dedicated VTPs can provide similar
   characteristics, it has some scalability issues in large networks.

   [I-D.dong-spring-sr-for-enhanced-vpn] specifies how segment routing
   (SR) [RFC8402] can be used to build virtual transport networks (VTNs)
   with the required network topology and network resource attributes to
   support enhanced VPN services.  With segment routing based data
   plane, Segment Identifiers (SIDs) can be used to represent the
   topology and the set of network resources allocated by network nodes
   to a virtual network.  The SIDs of each VTN and the associated
   topology and resource attributes need to be distributed using control
   plane.

   [I-D.dong-lsr-sr-enhanced-vpn] defines the IGP mechanisms with
   necessary extensions to build a set of Segment Routing (SR) based
   VTNs.  The VTNs could be used as the underlay of the enhanced VPN
   service.  The mechanism described in [I-D.dong-lsr-sr-enhanced-vpn]
   allows flexible combination of the topology and resource attribute to
   build customized VTNs.  In some network scenarios, it is assumed that
   each VTN has an independent topology and a set of dedicated network
   resources.  This document describes a simplified mechanism to build
   the SR based VTNs in those scenarios.

2.  Advertisement of SR VTN Topology Attribute

   [I-D.ietf-lsr-flex-algo] specifies the mechanism to provide
   distributed constraint-path computation, and the usage of SR-MPLS
   prefix-SIDs and SRv6 locators for steering traffic along the
   constrained paths.

   The Flex-Algo definition provides the topological constraints for
   path computation.  When each VTN has an independent network topology,
   the Flex-Algo Identifier could be used as the identifier of a VTN in
   control plane.  Thus the topology attribute of a VTN could be defined
   using Flex-Algo.

   According to the network nodes' participation of a Flex-Algo, and the
   rules of including or excluding specific Admin Groups (colors) and
   Shared Risk Link Groups (SRLGs), the topology attribute of a VTN can
   be determined using the associated Flex-Algo.

   With the mechanisms defined in[RFC8667] [I-D.ietf-lsr-flex-algo],
   prefix-SID advertisement can be associated with a specific topology



Zhu, et al.            Expires September 10, 2020               [Page 3]

Internet-Draft            Flex-Algo for SR VTN                March 2020


   and a specific algorithm, which can be a Flex-Algo.  This allows the
   nodes to use the prefix-SID to steer traffic along distributed
   computed paths according to the identified Flex-Algo in the
   associated topology.

   [I-D.ietf-lsr-isis-srv6-extensions] specifies the IS-IS extensions to
   support SRv6 data plane, in which the SRv6 locators advertisement can
   be associated with a specific topology and a specific algorithm,
   which can be a Flex-Algo.  This allows the the nodes to used the SRv6
   locator to steer traffic along distributed computed paths according
   to the identified Flex-Algo in the associated topology.  In addition,
   topology/algorithm specific SRv6 End SID and End.X SID can be used to
   enforce traffic over the LFA computed backup path.

3.  Extensions to IGP L2 Bundles

   In order to perform constraint based path computation for each VTN on
   network controller and the ingress nodes, the resource attribute of
   VTN also needs to be advertised.

   [RFC8668] was defined to advertise link attributes of the Layer 2
   bundle member links.  In this section it is extended to advertise the
   network resource attributes associated with different VTNs on one
   Layer 3 interface.

   On a Layer 3 interface, it is assumed that different subset of the
   link resources are allocated to different VTNs it participates in.  A
   subset of the link resource can be seen as a virtual layer-2 member
   link of the Layer 3 interface.  If the Layer 3 interface is a L2 link
   bundle, it is also possible that the subset of link resource for a
   specific VTN is provided by a physical Layer 2 member link.

   A new flag "V" (Virtual) is defined in the flag field of the Parent
   L3 Neighbor Descriptor in the L2 Bundle Member Attributes TLV (25).

                0 1 2 3 4 5 6 7
               +-+-+-+-+-+-+-+-+
               |P|V|           |
               +-+-+-+-+-+-+-+-+

   V flag: When the V flag is set, it indicates the advertised member
   links under the Parent L3 link are virtual member links.  When the V
   flag is clear, it indicates the member links are physical member
   links.

   For each virtual or physical member link, the TE attributes such as
   the Maximum Link Bandwidth and admin-groups can be advertised using
   the mechanism as defined in [RFC8668].



Zhu, et al.            Expires September 10, 2020               [Page 4]

Internet-Draft            Flex-Algo for SR VTN                March 2020


   In order to associate different virtual or physical member links with
   the corresponding VTNs, each member link SHOULD be assigned with a
   dedicated admin-group or extended admin-group (color), which is
   included in the definition of the corresponding Flex-Algo.  Note that
   in this case the admin-group or extended admin-group of the Layer 3
   interface SHOULD be set to the union of all the admin-groups of the
   virtual or physical member links.  This is to ensure that the Layer 3
   link will be included in the constraint-based computation of the
   corresponding Flex-Algo.

4.  Scalability Considerations

   The mechanism described in this document requires that each VTN maps
   to an independent Flex-Algo.  Even if multiple VTNs share the same
   topology constraints.  While this brings the benefits of simplicity,
   it also has some limitations.  For example, it means that even if
   multiple VTNs have the same topology constraints, they would still
   need to be identified using different Flex-Algos in the control
   plane.  Then this requires that for each VTN, independent path
   computation would be executed.  The number of VTNs supported in a
   network may be dependent on the number of Flex-Algos supported, which
   is related to the control plane computation overhead.

   Another aspect which may impact the number of VTNs supported is that
   at most 128 Flex-Algos can be defined in a network.

5.  Security Considerations

   This document introduces no additional security vulnerabilities to
   IS-IS and OSPF.

   The mechanism proposed in this document is subject to the same
   vulnerabilities as any other protocol that relies on IGPs.

6.  IANA Considerations

   This document does not request any IANA actions.

7.  Acknowledgments

   The authors would like to thank Zhenbin Li for the review and
   discussion of this document.

8.  References







Zhu, et al.            Expires September 10, 2020               [Page 5]

Internet-Draft            Flex-Algo for SR VTN                March 2020


8.1.  Normative References

   [I-D.dong-spring-sr-for-enhanced-vpn]
              Dong, J., Bryant, S., Miyasaka, T., Zhu, Y., Qin, F., and
              Z. Li, "Segment Routing for Resource Partitioned Virtual
              Networks", draft-dong-spring-sr-for-enhanced-vpn-06 (work
              in progress), December 2019.

   [I-D.ietf-lsr-flex-algo]
              Psenak, P., Hegde, S., Filsfils, C., Talaulikar, K., and
              A. Gulko, "IGP Flexible Algorithm", draft-ietf-lsr-flex-
              algo-06 (work in progress), February 2020.

   [I-D.ietf-lsr-isis-srv6-extensions]
              Psenak, P., Filsfils, C., Bashandy, A., Decraene, B., and
              Z. Hu, "IS-IS Extension to Support Segment Routing over
              IPv6 Dataplane", draft-ietf-lsr-isis-srv6-extensions-06
              (work in progress), March 2020.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.

   [RFC5305]  Li, T. and H. Smit, "IS-IS Extensions for Traffic
              Engineering", RFC 5305, DOI 10.17487/RFC5305, October
              2008, <https://www.rfc-editor.org/info/rfc5305>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8667]  Previdi, S., Ed., Ginsberg, L., Ed., Filsfils, C.,
              Bashandy, A., Gredler, H., and B. Decraene, "IS-IS
              Extensions for Segment Routing", RFC 8667,
              DOI 10.17487/RFC8667, December 2019,
              <https://www.rfc-editor.org/info/rfc8667>.







Zhu, et al.            Expires September 10, 2020               [Page 6]

Internet-Draft            Flex-Algo for SR VTN                March 2020


   [RFC8668]  Ginsberg, L., Ed., Bashandy, A., Filsfils, C., Nanduri,
              M., and E. Aries, "Advertising Layer 2 Bundle Member Link
              Attributes in IS-IS", RFC 8668, DOI 10.17487/RFC8668,
              December 2019, <https://www.rfc-editor.org/info/rfc8668>.

8.2.  Informative References

   [I-D.dong-lsr-sr-enhanced-vpn]
              Dong, J., Hu, Z., and S. Bryant, "IGP Extensions for
              Segment Routing based Enhanced VPN", draft-dong-lsr-sr-
              enhanced-vpn-02 (work in progress), November 2019.

   [I-D.ietf-spring-srv6-network-programming]
              Filsfils, C., Camarillo, P., Leddy, J., Voyer, D.,
              Matsushima, S., and Z. Li, "SRv6 Network Programming",
              draft-ietf-spring-srv6-network-programming-12 (work in
              progress), March 2020.

   [I-D.ietf-teas-enhanced-vpn]
              Dong, J., Bryant, S., Li, Z., Miyasaka, T., and Y. Lee, "A
              Framework for Enhanced Virtual Private Networks (VPN+)
              Services", draft-ietf-teas-enhanced-vpn-05 (work in
              progress), February 2020.

Authors' Addresses

   Yongqing Zhu
   China Telecom

   Email: zhuyq8@chinatelecom.cn


   Jie Dong
   Huawei Technologies

   Email: jie.dong@huawei.com


   Zhibo Hu
   Huawei Technologies

   Email: huzhibo@huawei.com









Zhu, et al.            Expires September 10, 2020               [Page 7]
