
  INTERNET DRAFT
  Expiration Date:  November 2002

                                                 Ravi Sankar Mantha
                                                 Nagabhushana Ramaswamy
                                                 Chetan Kumar S
                                                 Wipro Technologies

                                                 May 2002



                Resource Class considerations for CRLDP
               
                draft-mantha-resource-class-crldp-00.txt


  Status of this Memo

    This document is an Internet-Draft and is in full conformance with
    all provisions of Section 10 of RFC2026.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as
    Internet-Drafts.

    Internet-Drafts are draft documents valid for a maximum of six
    months and may be updated, replaced, or obsoleted by other
    documents at any time.  It is inappropriate to use Internet-
    Drafts as reference material or to cite them other than as
    "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/1id-abstracts.html

    The list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html

  Abstract

    This draft extends the CRLDP signaling to include the resource
    class affinity vectors of an LSP in the label request message.
    We define resource class attributes for hierarchical LSPs and 
    procedures to admit LSPs into links/tunnels based on the resource
    class constraints. 
    






Mantha et al.              Expires Nov 2002                    [Page 1]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


 1. Conventions Used in this Document

    CRLDP       : Constraint-Based LDP 
    CSPF        : Constrained Shortest Path First
    LSP         : Label Switched Path
    FA-LSP      : Forwarding Adjacency - LSP
    TE          : Traffic Engineering
                                                                        
 2. Introduction

     The traffic engineering requirements for MPLS associates 
     administrative grouping (coloring) for resources (links) and
     resource class affinity information to LSPs. These are the
     additional policy constraints that can be imposed on LSPs to
     restrict the links that this LSP can traverse. In other words,
     these constraints govern the admission of LSPs onto a Link.

     This affinity parameter of the LSP can be represented as an
     explicit inclusion and an explicit exclusion [MPLS-TE] vectors
     in LSP setup procedures. For explicit inclusion, resources that 
     do not belong to any of these resource classes can not be 
     considered to include in the LSP's path. For explicit exclusion,
     resources that belong to any of these resource classes are not
     considered for path selection. In addition, it may be a requirement
     for an LSP to pass through resources that belong to more than one
     administrative groups. For e.g. sometimes it may be required to
     constrain an LSP to take resources satisfying more than one 
     constraints like bandwidth capability, geographical region it 
     belongs to etc. This can be represented by an "include-all" 
     vector [RSVP-TE].

     Current CRLDP signaling [CRLDP] provides a mechanism to signal 
     only the "Explicit inclusion (RsCls of Resource Class Tlv)" 
     vector. Here we propose extensions to the existing CRLDP
     signaling mechanism to signal the other two resource class 
     affinity vectors of an LSP while setting up a constrained path.
 
     MPLS architecture [MPLS-ARCH] allows setting up of hierarchical
     LSPs (tunnels), where the lower level LSPs are admitted into
     higher level LSPs. These tunnels are advertised either as FA-LSPs
     [LSP-HIER] or as TE-Links (with LSP Id as an attribute) 
     [OSPF-LSPID] in MPLS Domain. TE properties advertised for FA-LSPs/
     TE-Links include Resource Class Attributes. Currently there is no
     mechanism to associate resource class attributes to a tunnel.
     This necessitates deriving the administrative grouping for
     tunnels (tunnel coloring). 
 
     In this draft, we propose method to derive the resource attributes
     for tunnels and procedures to admit LSPs into a tunnel based on the
     derived tunnel attributes and LSP's resource class affinity vectors

Mantha et al.              Expires Nov 2002                    [Page 2]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


 3. Applicability

     The procedures defined in this draft enables one to consider 
     tunnels as ERO objects in CR-LSP path computation with additional 
     resource class constraint.

     With appropriate modifications to IGP TE extensions (refer Section
     5.3), an automated path computation algorithm (like CSPF) can be
     provided with the resource class attributes of the tunnels.
    
 4. Extensions to Label Request Message
         
    We propose a new  Resource Class Tlv (see Also IANA considerations,
    section 6) in the Label Request Message of CR-LDP to include 
    "Exclude-All" and "Include-All" vectors along with the existing 
    "Include-Any" vector. 

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|0|         Type = TBO        |      Length = 12              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Include-Any                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Include-All                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Exclude-All                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Type

     A fourteen-bit field carrying the value of the ResCls-TLV
     Type = To Be Obtained.

   Length

     Specifies the length of the value field in bytes = 12.

   Include-Any

     A 32-bit vector representing a set of administrative groups
     associated with an LSP, any of which renders a link acceptable.
     A vector with all bits set to zero (null vector) accepts any link.

   Include-All

     A 32-bit vector representing a set of administrative groups 
     associated with an LSP, all of which must be present for a
     link to be acceptable. A vector with all bits set to zero
     (null vector) accepts any link. 

Mantha et al.              Expires Nov 2002                    [Page 3]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


   Exclude-All

     A 32-bit vector representing a set of administrative groups
     associated with an LSP, any of which renders a link
     unacceptable. A vector with all bits set to zero
     (null vector) accepts any link.

 4.1 Processing of Resource Class Tlv

     The Exclude-All vector of the  Resource Class Tlv MUST not have
     any common color with the Include-All and Include-Any vectors.
     Violation of the above makes the TLV malformed. The handling
     of such a malformed tlv is as described in [CRLDP].

     The commonality of colors between the Include-All and the Include-
     Any vectors does not carry any meaningful information as the 
     Include-All vector overrides the Include-Any vector. However,
     this draft does not preclude such a combination as it will not
     lead to any inconsistencies.

 5. Resource Affinity Procedures

     The resource affinity procedures define the interpretation
     of resource class affinity vectors in the Resource Class 
     Tlv in the context of admitting an LSP onto a Link/Tunnel.

 5.1 Resource Attributes of a Link

     The resource attributes of a link can be represented by a 
     single 32 bit mask. 
           
     Link-attr      A 32-bit vector representing the administrative 
                    groups a link is associated with.
         
 5.2 Resource Attributes of Tunnels 
         
      Unlike links, resource attributes of tunnels are 
      represented by three vectors.         

      Link-Include-Any-Attr  A 32-bit vector represents a set of
                             administrative groups, at least one 
                             of which, the links in the path taken 
                             by the tunnel MUST contain.
          
      Link-Include-All-Attr  A 32-bit vector represents a set of  
                             administrative groups, all of which, 
                             the links in the path taken by the 
                             tunnel contains.



Mantha et al.              Expires Nov 2002                    [Page 4]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


      Link-Exclude-All-Attr  A 32-bit vector represents a set of 
                             administrative groups, any of which,
                             the links in the path taken by the 
                             tunnels MUST not contain.

 5.3 Tunnel Coloring

      The resource class attributes of a tunnel are derived from 
      its resource class affinity vectors as follows.
      
      Initially assign null vectors to the resource class attribute
      vectors of a tunnel.

      a) Copy the Exclude-All vector to Link-Exclude-All-Attr.

      b) Copy the Include-All vector to Link-Include-All-Attr.

      c) If there is a single element in the Include-Any vector 
         copy it to the Link-Include-All-Attr. Otherwise copy
         the Include-Any vector to Link-Include-Any-Attr.

      In order to use the tunnels in path computation procedures, the
      above mentioned attributes of a tunnel MAY be advertised by the
      IGP extensions to TE [OSPF-TE][ISIS-TE].

 5.4 Admission of LSPs into a Link

      In order to consider a link to include in an LSPs path, all
      the below mentioned conditions MUST satisfy.

      a) There should not be any common color (a bit in 32 bit 
         vector) between the Link_attr of the link and the 
         Exclude-Any vector of the LSP.
            
         (Link-attr & Exclude-All) == 0

      b) A null set for the Include-Any vector of a LSP can take
         any link. Otherwise, the Link_attr of the link MUST 
         contain at least one color from the Include-Any vector of 
         the LSP.

         (Include-Any == 0) | ((Link-attr & Include-Any) != 0)

      c) A null set for the Include-All vector of a LSP can take
         any link. Otherwise, the Link_attr of the link MUST contain
         all colors from the Include-All vector of the LSP.

         (Include-All == 0) | ((Link-attr & Include-All) == 
          Include-All) 


Mantha et al.              Expires Nov 2002                    [Page 5]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


      These are similar to that of RSVP-TE procedures [RSVP-TE].
      Here it is given for the sake of completeness.
  
 5.5 Admission of LSPs into a Tunnel

      Procedures to admit an LSP with resource class affinity
      vectors Include-Any, Exclude-All, Include-All into a tunnel
      with Link Attribute vectors, Link-Include-Any-Attr,
      Link-Include-All-Attr, Link-Exclude-Any-Attr are as follows:

      a) A null set for the Include-Any vector of a LSP can be
         admitted onto any tunnel. Otherwise either there should be 
         at least one common color between the Include-Any vector and 
         the Link-Include-All-Attr of the tunnel OR Include-Any vector
         should contain all (see NOTE) the colors present in 
         Link-Include-Any-Attr of the tunnel.

         ((Include-Any == 0) | 
         (Include-Any & Link-Include-All-Attr != 0) |
         (Include-Any & Link-Include-Any-Attr == Link-Include-Any-Attr))

      b)  A null set for the Include-All vector of a LSP can be
          admitted onto any tunnel. Otherwise, all colors in the 
          Include-All vector should be present in the 
          Link-Include-All-Attr of the tunnel.

         (Include-All & Link-Include-All-Attr) == Include-All

      c) A null set for the Exclude-All vector of a LSP can be
         admitted onto any tunnel. Otherwise, all colors in the
         Exclude-All vector should be present in the
         Link-Exclude-All-Attr of the tunnel.
                  
         (Exclude-All & Link-Exclude-All-Attr) == Exclude-All

      To consider a LSP to admit into a tunnel all the above mentioned
      conditions MUST be satisfied.

NOTE : 
     Containing all colors is a MUST, suppose Include-Any vector is A,
     Link-Include-Any-Attr is B, B-A is not NULL. Then, it may happen 
     that the tunnel would traverse at least one link that has Link-attr
     vector as subset of B-A). 

 6. IANA Considerations

     The TLV type value for the proposed resource class TLV is to be
     obtained from IANA. However, if the working group agrees to 
     replace the existing resource class tlv of CR-LDP with the
     proposed Tlv then the same type value can be used.

Mantha et al.              Expires Nov 2002                    [Page 6]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


 7. Security Considerations

     This document raises no new security issues for CR-LDP. The 
     security mechanisms already proposed for CR-LDP continue to
     hold well.                   

 8. Acknowledgments
    
    We thank all our colleagues and friends at WIPRO who have
    contributed and participated in discussions for this work. 

 9. References

     [CRLDP] Jamoussi, et. al., "Constraint-Based LSP Setup using LDP" 
     RFC 3212, January 2002. 
 
     [ISIS-TE] Smit, Li, IS-IS extensions for Traffic Engineering, draft
     -ietf-isis-traffic-04.txt, August 2001.

     [LSP-HIER] Kireeti Kompella, et. al., "LSP Hierarchy with
     Generalized MPLS TE", draft-ietf-mpls-lsp-hierarchy-05.txt,
     October 2002.

     [MPLS-ARCH] E. Rosen, et. al., "Multiprotocol Label Switching
     Architecture" RFC 3031, January 2001.

     [MPLS-TE] Awduche et. al., "Requirements for Traffic Engineering
     Over MPLS", RFC 2702, September 1999.

     [OSPF-LSPID] Chetan et. al., "Signalling LSPID's in OSPF TE",
     draft-chetan-lspid-ospf-00.txt, September 2002.

     [OSPF-TE] Katz, Yeung, Traffic Engineering Extensions to OSPF,
     draft-katz-yeung-ospf-traffic-06.txt, October 2001.

     [RSVP-TE] Awduche et al, "RSVP-TE: Extensions to RSVP for LSP
     Tunnels", RFC 3209, December 2001.

 10. Author's Address

     Ravi Sankar Mantha
     Wipro Technologies
     K-312, 5th Block, Koramangala
     Bangalore-560095
     India
     Phone : 91-80-5538301
     Email : ravi.mantha@wipro.com




Mantha et al.              Expires Nov 2002                    [Page 7]

Internet Draft      draft-mantha-resource-class-crldp-00.txt   May 2002


     Nagabhushana Ramaswamy
     Wipro Technologies
     K-312, 5th Block, Koramangala
     Bangalore-560095
     India
     Phone : 91-80-5538301
     Email : nagabhushana.ramaswamy@wipro.com
 
     Chetan Kumar S
     Wipro Technologies
     K-312, 5th Block, Koramangala
     Bangalore-560095
     India
     Phone : 91-80-5538301
     Email : chetan.kumar@wipro.com		






 11. Full Copyright Statement

     Copyright (C) The Internet Society (date).  All Rights Reserved.

     This document and translations of it may be copied and furnished to
     others, and derivative works that comment on or otherwise explain 
     it or assist in its implementation may be prepared, copied, 
     published and distributed, in whole or in part, without restriction 
     of any kind, provided that the above copyright notice and this 
     paragraph are included on all such copies and derivative works.  
     However, this document itself may not be modified in any way, such 
     as by removing the copyright notice or references to the Internet 
     Society or other Internet organizations, except as needed for the 
     purpose of developing Internet standards in which case the
     procedures for copyrights defined in the Internet Standards process
     must be followed, or as required to translate it into languages 
     other than English.

     The limited permissions granted above are perpetual and will not be
     revoked by the Internet Society or its successors or assigns.
 









Mantha et al.              Expires Nov 2002                    [Page 8]
