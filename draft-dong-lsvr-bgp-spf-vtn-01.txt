



LSVR Working Group                                               J. Dong
Internet-Draft                                                     Z. Li
Intended status: Standards Track                     Huawei Technologies
Expires: April 27, 2022                                 October 24, 2021


              BGP SPF for Virtual Transport Network (VTN)
                     draft-dong-lsvr-bgp-spf-vtn-01

Abstract

   A Virtual Transport Network (VTN) is a virtual underlay network which
   consists of a customized network topology and a set of network
   resource allocated from the physical network.  In a network, multiple
   VTNs can be created to meet different service requirements, and
   services may be mapped to the same or different VTNs.

   In networks where BGP Shortest Path First (SPF) is used to distribute
   the link-state information among network nodes, the information of
   VTNs needs to be distributed along with the basic network
   information.  This document specifies the BGP SPF mechanisms with
   necessary extensions to distribute the VTN information and perform
   VTN-specific path computaton.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 27, 2022.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Dong & Li                Expires April 27, 2022                 [Page 1]

Internet-Draft               BGP SPF for VTN                October 2021


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  Applicability of VTN related BGP-LS Extensions to BGP SPF . .   3
     2.1.  Reuse of BGP-LS TLVs for BGP SPF VTN  . . . . . . . . . .   3
     2.2.  VTN Topology and Resource Distribution  . . . . . . . . .   5
   3.  SPF Calculation for VTNs  . . . . . . . . . . . . . . . . . .   5
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   6
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   The concept of Virtual Transport Network (VTN) is introduced in
   [I-D.ietf-teas-enhanced-vpn].  A VTN is a virtual underlay network
   which has customized network topology and a set of dedicated or
   shared network resources.  In a network, different VTNs may be
   created to meet different service requirements, and services can be
   mapped to the same or different VTNs.

   [I-D.ietf-spring-sr-for-enhanced-vpn] describes the use of resource-
   aware segments [I-D.ietf-spring-resource-aware-segments] to build SR
   based VTNs.  The SIDs of each VTN and the associated topology and
   resource attributes need to be distributed using the control plane.
   [I-D.dong-lsr-sr-enhanced-vpn] specifies the IGP mechanism and
   extensions to build a set of SR based VTNs.
   [I-D.dong-idr-bgpls-sr-enhanced-vpn] further specifies the BGP-LS
   mechanisms and extensions to advertise the VTN information in each
   domain and the VTN information on the inter-domain links to the
   network controller, so that the controller could use the collected
   information to build the inter-domain SR VTNs.

   In networks where BGP SPF is used to distribute the link-state
   information among network nodes, the VTN information needs to be
   distributed along with the basic network link state and TE



Dong & Li                Expires April 27, 2022                 [Page 2]

Internet-Draft               BGP SPF for VTN                October 2021


   information.  And comparing with the Internal Gateway Protocols
   (IGPs), BGP SPF may have some advantage in supporting a relatively
   large number of VTNs.  This document specifies the BGP SPF mechanisms
   with necessary extensions to advertise the information of VTNs.  The
   proposed mechanism is applicable to segment routing with MPLS data
   plane (SR-MPLS), segment routing with IPv6 data plane (SRv6), and
   native IPv6 data plane.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP14 RFC 2119 [RFC2119] RFC 8174 [RFC8174] when, and only when, they
   appear in all capitals, as shown here.

2.  Applicability of VTN related BGP-LS Extensions to BGP SPF

2.1.  Reuse of BGP-LS TLVs for BGP SPF VTN

   As described in [I-D.ietf-lsvr-bgp-spf], the NLRI and TLVs of BGP-LS
   can be reused by BGP SPF, this section describes the TLVs which are
   defined in BGP-LS and can be reused in BGP SPF for the distribution
   of VTN related information.

   According to [I-D.ietf-teas-enhanced-vpn], a virtual transport
   network (VTN) has a customized network topology and a set of
   dedicated or shared network resources.  Thus a VTN can be defined as
   the combination of a set of network attributes, including the
   topology attribute and the network resource attribute.  A VTN is
   associated with a Multi-Topology ID (MT-ID) and/or an Algorithm ID
   which are used to define the VTN topology and path computation
   constraints.  In some cases, each VTN may be associated with a
   separate MT-ID or a Flex-Algo ID.  When the amount of VTNs in a
   network is large, as described in
   [I-D.dong-teas-enhanced-vpn-vtn-scalability], multiple VTNs may be
   associated with the same topology and/or algorithm, so that the
   amount of topology-specific path computation can be shared by a group
   of VTNs, this could help to reduce the computation overhead in the
   control plane.

   [I-D.ietf-lsvr-bgp-spf] does not cover the usage of Multi-Topology or
   Flex-Algo with BGP SPF.  While the mechanism in this document is
   based on Multi-Topology [RFC4915][RFC5120] or Flex-Algo
   [I-D.ietf-lsr-flex-algo] with BGP SPF for topology and/or algorithm
   -specific link-state information distribution and path computation.
   For this purpose, the Multi-topology TLV as defined in
   [I-D.ietf-idr-rfc7752bis], the SR Algorithm TLV as defined [RFC9085],



Dong & Li                Expires April 27, 2022                 [Page 3]

Internet-Draft               BGP SPF for VTN                October 2021


   and the Flex-Algo Definition TLV as defined in
   [I-D.ietf-idr-bgp-ls-flex-algo] are reused for BGP SPF.

   [I-D.ietf-lsvr-bgp-spf] does not explicitly describes the usage with
   Segment Routing data plane.  To build SR based VTN, the SR-MPLS and
   SRv6 TLVs as defined in [RFC9085] and [I-D.ietf-idr-bgpls-srv6-ext]
   are reused for BGP SPF.

   The VTN extensions to BGP-LS as defined in
   [I-D.dong-idr-bgpls-sr-enhanced-vpn] applies to BGP SPF as well.
   This section lists the TLVs which are reused by BGP SPF, the detailed
   format of the TLVs are described in
   [I-D.dong-idr-bgpls-sr-enhanced-vpn].

   The BGP-LS Attribute TLVs which are defined in
   [I-D.dong-idr-bgpls-sr-enhanced-vpn] and reused with BGP-LS-SPF SAFI
   are listed as below:

   o  Virtual Transport Network Definition (VTND) TLV: This is used to
      advertise the association between the VTN and the topology ID and/
      or algorithm ID.  It can be carried in BGP-LS attribute associated
      with a Node NLRI.

   o  VTN ID TLV: This is used to describe the identifiers of one or
      more VTNs a link belongs to.  It can be carried in BGP-LS
      attribute which is associated with a Link NLRI, or it could be
      carried as a sub-TLV in the L2 Bundle Member Attribute TLV.

   o  Link Attribute Flags TLV: This is used to specify the
      characteristics of a link, its functionality is similar to the IS-
      IS Link Attribute sub-TLV defined in [RFC5029].  It can be carried
      in BGP-LS attribute which is associated with a Link NLRI, or it
      could be carried as a sub-TLV in the L2 Bundle Member Attribute
      TLV.

   o  VTN-specific prefix-SID TLV: This is used to advertise the prefix-
      SID and its associated VTN.  It can be carried in BGP-LS attribute
      which is associated with a Prefix NLRI.

   o  VTN-specific Adj-SID TLV: This is used to advertise the adj-SID
      and its associated VTN.  It can be carried in BGP-LS attribute of
      the associated Link NLRI.

   Further BGP-LS TLVs may be defined in
   [I-D.dong-idr-bgpls-sr-enhanced-vpn], their usage with BGP SPF will
   be specified in a future version of this document.





Dong & Li                Expires April 27, 2022                 [Page 4]

Internet-Draft               BGP SPF for VTN                October 2021


2.2.  VTN Topology and Resource Distribution

   In network scenarios where each VTN is associated with a unique MT-
   ID, The BGP-LS mechanisms used to distribute the VTN topology and
   resource information to the network controller are described in
   [I-D.xie-idr-bgpls-sr-vtn-mt].  Such mechanism can be reused for the
   distribution of VTN information with BGP SPF.

   In network scenarios where each VTN is associated with a unique Flex-
   Algo ID, The BGP-LS mechanisms used to distribute the VTN topology
   and resource information to the network controller are described in
   [I-D.zhu-idr-bgpls-sr-vtn-flexalgo].  Such mechanism can be reused
   for the distribution of VTN information with BGP SPF.

   In network scenarios where multiple VTNs are associated with the same
   <topology, algorithm> tuple, while each VTN has different resource
   attributes, the BGP-LS mechanisms which can be used to distribute the
   VTN topology and resource information to the network controller are
   described in [I-D.dong-idr-bgpls-sr-enhanced-vpn].  Such mechanism
   can be reused for the distribution of VTN information with BGP SPF.

   The Sequence Number TLV as defined in [I-D.ietf-lsvr-bgp-spf] MUST be
   carried in the BGP-LS attribute associated with the BGP-LS-SPF NLRI.
   If the Sequence-Number TLV is not received then the corresponding
   Link NLRI is considered as malformed and MUST be handled as 'Treat-
   as- withdraw'.  An implementation MAY log an error for further
   analysis.

3.  SPF Calculation for VTNs

   [I-D.ietf-lsvr-bgp-spf] describes the mechanisms of using the BGP-LS-
   SPF Node, Link, and Prefix NLRI for shortest path computation.  With
   the introduction of VTN, the same mechanism is used for the shortest
   path computation of each VTN.  The path computation for a VTN is
   based on the topology attributes and the constraints specified with
   the MT-ID and/or Algorithm ID associated with the VTN.  When multiple
   VTNs are associated with the same topology, the result of the
   shortest path computation based on that topology could be shared by
   these VTNs.

4.  Security Considerations

   This document introduces no additional security vulnerabilities to
   BGP SPF.

   The mechanism proposed in this document is subject to the same
   vulnerabilities as any other protocol that relies on BGP SPF.




Dong & Li                Expires April 27, 2022                 [Page 5]

Internet-Draft               BGP SPF for VTN                October 2021


5.  IANA Considerations

   This document request no IANA actions.

6.  Acknowledgments

   The authors would like to thank Haibo Wang for the review and
   discussion of this document.

7.  References

7.1.  Normative References

   [I-D.dong-idr-bgpls-sr-enhanced-vpn]
              Dong, J., Hu, Z., Li, Z., Tang, X., and R. Pang, "BGP-LS
              Extensions for Segment Routing based Enhanced VPN", draft-
              dong-idr-bgpls-sr-enhanced-vpn-03 (work in progress),
              February 2021.

   [I-D.ietf-idr-bgp-ls-flex-algo]
              Talaulikar, K., Psenak, P., Zandi, S., and G. Dawra,
              "Flexible Algorithm Definition Advertisement with BGP
              Link-State", draft-ietf-idr-bgp-ls-flex-algo-07 (work in
              progress), June 2021.

   [I-D.ietf-idr-bgpls-srv6-ext]
              Dawra, G., Filsfils, C., Talaulikar, K., Chen, M.,
              Bernier, D., and B. Decraene, "BGP Link State Extensions
              for SRv6", draft-ietf-idr-bgpls-srv6-ext-08 (work in
              progress), June 2021.

   [I-D.ietf-idr-rfc7752bis]
              Talaulikar, K., "Distribution of Link-State and Traffic
              Engineering Information Using BGP", draft-ietf-idr-
              rfc7752bis-08 (work in progress), July 2021.

   [I-D.ietf-lsvr-bgp-spf]
              Patel, K., Lindem, A., Zandi, S., and W. Henderickx, "BGP
              Link-State Shortest Path First (SPF) Routing", draft-ietf-
              lsvr-bgp-spf-15 (work in progress), July 2021.

   [I-D.ietf-spring-resource-aware-segments]
              Dong, J., Bryant, S., Miyasaka, T., Zhu, Y., Qin, F., Li,
              Z., and F. Clad, "Introducing Resource Awareness to SR
              Segments", draft-ietf-spring-resource-aware-segments-03
              (work in progress), July 2021.





Dong & Li                Expires April 27, 2022                 [Page 6]

Internet-Draft               BGP SPF for VTN                October 2021


   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC9085]  Previdi, S., Talaulikar, K., Ed., Filsfils, C., Gredler,
              H., and M. Chen, "Border Gateway Protocol - Link State
              (BGP-LS) Extensions for Segment Routing", RFC 9085,
              DOI 10.17487/RFC9085, August 2021,
              <https://www.rfc-editor.org/info/rfc9085>.

7.2.  Informative References

   [I-D.dong-lsr-sr-enhanced-vpn]
              Dong, J., Hu, Z., Li, Z., Tang, X., Pang, R., JooHeon, L.,
              and S. Bryant, "IGP Extensions for Scalable Segment
              Routing based Enhanced VPN", draft-dong-lsr-sr-enhanced-
              vpn-06 (work in progress), July 2021.

   [I-D.dong-teas-enhanced-vpn-vtn-scalability]
              Dong, J., Li, Z., Gong, L., Yang, G., Guichard, J. N.,
              Mishra, G., and F. Qin, "Scalability Considerations for
              Enhanced VPN (VPN+)", draft-dong-teas-enhanced-vpn-vtn-
              scalability-03 (work in progress), July 2021.

   [I-D.ietf-lsr-flex-algo]
              Psenak, P., Hegde, S., Filsfils, C., Talaulikar, K., and
              A. Gulko, "IGP Flexible Algorithm", draft-ietf-lsr-flex-
              algo-17 (work in progress), July 2021.

   [I-D.ietf-spring-sr-for-enhanced-vpn]
              Dong, J., Bryant, S., Miyasaka, T., Zhu, Y., Qin, F., Li,
              Z., and F. Clad, "Segment Routing based Virtual Transport
              Network (VTN) for Enhanced VPN", draft-ietf-spring-sr-for-
              enhanced-vpn-01 (work in progress), July 2021.

   [I-D.ietf-teas-enhanced-vpn]
              Dong, J., Bryant, S., Li, Z., Miyasaka, T., and Y. Lee, "A
              Framework for Enhanced Virtual Private Network (VPN+)
              Services", draft-ietf-teas-enhanced-vpn-08 (work in
              progress), July 2021.






Dong & Li                Expires April 27, 2022                 [Page 7]

Internet-Draft               BGP SPF for VTN                October 2021


   [I-D.xie-idr-bgpls-sr-vtn-mt]
              Xie, C., Li, C., Dong, J., and Z. Li, "BGP-LS with Multi-
              topology for Segment Routing based Virtual Transport
              Networks", draft-xie-idr-bgpls-sr-vtn-mt-03 (work in
              progress), July 2021.

   [I-D.zhu-idr-bgpls-sr-vtn-flexalgo]
              Zhu, Y., Dong, J., and Z. Hu, "BGP-LS with Flex-Algo for
              Segment Routing based Virtual Transport Networks", draft-
              zhu-idr-bgpls-sr-vtn-flexalgo-01 (work in progress),
              February 2021.

   [RFC4915]  Psenak, P., Mirtorabi, S., Roy, A., Nguyen, L., and P.
              Pillay-Esnault, "Multi-Topology (MT) Routing in OSPF",
              RFC 4915, DOI 10.17487/RFC4915, June 2007,
              <https://www.rfc-editor.org/info/rfc4915>.

   [RFC5029]  Vasseur, JP. and S. Previdi, "Definition of an IS-IS Link
              Attribute Sub-TLV", RFC 5029, DOI 10.17487/RFC5029,
              September 2007, <https://www.rfc-editor.org/info/rfc5029>.

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.

Authors' Addresses

   Jie Dong
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Road
   Beijing  100095
   China

   Email: jie.dong@huawei.com


   Zhenbin Li
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Road
   Beijing  100095
   China

   Email: lizhenbin@huawei.com






Dong & Li                Expires April 27, 2022                 [Page 8]
