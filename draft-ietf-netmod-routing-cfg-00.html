<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>A YANG Data Model for Routing Configuration</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology and Notation">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Glossary of New Terms">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Prefixes in Data Node Names">
<link href="#rfc.section.3" rel="Chapter" title="3 Objectives">
<link href="#rfc.section.4" rel="Chapter" title="4 The Design of the Core Routing Data Model">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Route">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Routing Tables">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Routing Protocol Instances">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Defining New Routing Protocols">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Route Filters">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 RPC Operations">
<link href="#rfc.section.5" rel="Chapter" title="5 Routing YANG Module">
<link href="#rfc.section.6" rel="Chapter" title="6 IPv4 Unicast Routing YANG Module">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Example - Adding a New Routing Protocol">
<link href="#rfc.appendix.Appendix%20A.1" rel="Chapter" title="Appendix A.1 Example YANG Module for Routing Information                     Protocol">
<link href="#rfc.appendix.Appendix%20A.2" rel="Chapter" title="Appendix A.2 Sample Reply to the NETCONF &lt;get&gt; Message">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document contains a specification of two YANG modules that together provide a data model for essential configuration of a routing subsystem. It is expected that this module will serve as a basis for further development of data models for individual routing protocols and other related functions. The present data model defines the building blocks for such configurations - routing processes, routes and routing tables, routing protocol instances and route filters." />
  <meta name="description" content="This document contains a specification of two YANG modules that together provide a data model for essential configuration of a routing subsystem. It is expected that this module will serve as a basis for further development of data models for individual routing protocols and other related functions. The present data model defines the building blocks for such configurations - routing processes, routes and routing tables, routing protocol instances and route filters." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">NETMOD</td>
<td class="right">L. Lhotka</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">CESNET</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">April 27, 2011</td>
</tr>
<tr>
<td class="left">Expires: October 29, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">A YANG Data Model for Routing Configuration<br />
  <span class="filename">draft-ietf-netmod-routing-cfg-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document contains a specification of two YANG modules that together provide a data model for essential configuration of a routing subsystem. It is expected that this module will serve as a basis for further development of data models for individual routing protocols and other related functions. The present data model defines the building blocks for such configurations - routing processes, routes and routing tables, routing protocol instances and route filters.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 29, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology and Notation</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Glossary of New Terms</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Prefixes in Data Node Names</a>
</li>
<li>3.   <a href="#rfc.section.3">Objectives</a>
</li>
<li>4.   <a href="#rfc.section.4">The Design of the Core Routing Data Model</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Route</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Routing Tables</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Routing Protocol Instances</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Defining New Routing Protocols</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Route Filters</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">RPC Operations</a>
</li>
<li>5.   <a href="#rfc.section.5">Routing YANG Module</a>
</li>
<li>6.   <a href="#rfc.section.6">IPv4 Unicast Routing YANG Module</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgments</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Example - Adding a New Routing Protocol</a>
</li>
<li>Appendix A.1.   <a href="#rfc.appendix.Appendix%20A.1">Example YANG Module for Routing Information                     Protocol</a>
</li>
<li>Appendix A.2.   <a href="#rfc.appendix.Appendix%20A.2">Sample Reply to the NETCONF &lt;get&gt; Message</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#sec.introduction" id="sec.introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">This document contains an initial specification of two YANG modules, "ietf-routing" and "ietf-ipv4-unicast-routing", that together define the so-called core routing data model. This data model will serve as a basis for the development of data models for more sophisticated routing configurations. While these two modules can be directly used for simple IPv4-only devices with static routing, their main purpose is to provide basic building blocks for more complicated setups involving other address families such as IPv6, multiple routing protocols, and advanced functions, for example route filtering and policy routing. To this end, it is expected that this module will be augmented by numerous modules developed by other IETF working groups.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#sec.term-not" id="sec.term-not">Terminology and Notation</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<p id="rfc.section.2.p.2">The following terms are defined in <a href="#RFC4741">[RFC4741]</a>: </p>

<ul>
<li>client</li>
<li>message</li>
<li>operation</li>
<li>server</li>
</ul>
<p id="rfc.section.2.p.3">The following terms are defined in <a href="#RFC6020">[RFC6020]</a>: </p>

<ul>
<li>augment</li>
<li>configuration data</li>
<li>container</li>
<li>data model</li>
<li>data node</li>
<li>data type</li>
<li>identity</li>
<li>mandatory node</li>
<li>module</li>
<li>operational state data</li>
<li>prefix</li>
<li>RPC operation</li>
</ul>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#sec.new-terms" id="sec.new-terms">Glossary of New Terms</a>
</h1>
<p></p>

<ul><li>active route: a route which is actually used for packet forwarding. If there are multiple candidate routes with the same destination prefix, then it is up to the routing algorithm to select the active route.</li></ul>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#sec.prefixes" id="sec.prefixes">Prefixes in Data Node Names</a>
</h1>
<p id="rfc.section.2.2.p.1">In this document, names of data nodes are used mostly without a prefix, as long as it is clear from the context in which YANG module each name is defined. Otherwise, names are prefixed with the standard prefixes associated with YANG modules, as shown in <a href="#tab.prefixes">Table 1</a>.</p>
<div id="#rfc.table.1"></div>
<div id="#tab.prefixes"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Prefixes and corresponding YANG modules</caption>
<thead><tr>
<th class="left">Prefix</th>
<th class="left">YANG module</th>
<th class="left">Reference</th>
</tr></thead>
<tbody>
<tr>
<td class="left">eth</td>
<td class="left">ex-ethernet</td>
<td class="left"><a href="#YANG-IF">[YANG-IF]</a></td>
</tr>
<tr>
<td class="left">if</td>
<td class="left">ietf-interfaces</td>
<td class="left"><a href="#YANG-IF">[YANG-IF]</a></td>
</tr>
<tr>
<td class="left">inet</td>
<td class="left">ietf-inet-types</td>
<td class="left"><a href="#RFC6021">[RFC6021]</a></td>
</tr>
<tr>
<td class="left">ip</td>
<td class="left">ex-ip</td>
<td class="left"><a href="#YANG-IF">[YANG-IF]</a></td>
</tr>
<tr>
<td class="left">rip</td>
<td class="left">example-rip</td>
<td class="left"><a href="#app.rip">Appendix Appendix A</a></td>
</tr>
<tr>
<td class="left">rt</td>
<td class="left">ietf-routing</td>
<td class="left"><a href="#sec.mod-rt">Section 5</a></td>
</tr>
<tr>
<td class="left">v4ur</td>
<td class="left">ietf-ipv4-unicast-routing</td>
<td class="left"><a href="#sec.mod-v4ur">Section 6</a></td>
</tr>
<tr>
<td class="left">yang</td>
<td class="left">ietf-yang-types</td>
<td class="left"><a href="#RFC6021">[RFC6021]</a></td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#sec.objectives" id="sec.objectives">Objectives</a>
</h1>
<p id="rfc.section.3.p.1">The initial design of the core routing data model was driven by the following main objectives: </p>

<ul>
<li>The data model should be suitable for the common address families, in particular IPv4 and IPv6, and for unicast and multicast routing as well as Multiprotocol Label Switching (MPLS).</li>
<li>Simple routing setups, such as static routing, should be configurable in a simple way, ideally without any need to develop additional YANG modules.</li>
<li>On the other hand, the core routing framework must allow for complicated setups involving multiple routing tables and multiple routing protocols, as well as controlled redistributions of routing information.</li>
<li>Device vendors will want to map the data models built on this generic framework to their proprietary data models and configuration interfaces. Therefore, the framework should be flexible enough to facilitate such a mapping and accommodate data models with different logic.</li>
</ul>

<p> </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#sec.design" id="sec.design">The Design of the Core Routing Data Model</a>
</h1>
<p id="rfc.section.4.p.1">The core routing data model consists of two YANG modules. The first module, "ietf-routing", is rather minimal and provides only a top-level container ("routing") and a list of routing processes. Each routing process represents an instance of a (virtual) router with a separate forwarding table (FIB, forwarding information base). For a given address family, specified by an Address Family Identifier (AFI) <a href="#IANA-AFI">[IANA-AFI]</a> and Subsequent Address Family Identifier (SAFI) <a href="#IANA-SAFI">[IANA-SAFI]</a>, several independent routing processes may be configured.</p>
<p id="rfc.section.4.p.2">The second YANG module, "ietf-ipv4-unicast-routing", provides a data modeling framework for IPv4 unicast routing with several essential components: routes, routing tables, routing protocol instances, route filters and RPC operations. The following subsections provide further details about these components.</p>
<p id="rfc.section.4.p.3">By combining the components in various ways, and possibly filling them with appropriate contents defined in other modules, a broad range of routing setups can be covered.</p>
<div id="#rfc.figure.1"></div>
<div id="#fig.exsetup"></div>
<pre>
                        +------------+
                        |    FIB     |
                        +------------+
                              ^
                              |
                            +---+
                            | F |
                            +---+
                              ^
+--------+                    |
| direct |    +---+    +--------------+    +---+    +--------------+
| routes |---&gt;| F |---&gt;|              |&lt;---| F |&lt;---|              |
+--------+    +---+    |    main      |    +---+    |  additional  |
                       |   routing    |             |   routing    |
+--------+    +---+    |    table     |    +---+    |    table     |
| static |---&gt;| F |---&gt;|              |---&gt;| F |---&gt;|              |
| routes |    +---+    +--------------+    +---+    +--------------+
+--------+                 ^      |                     ^      |
                           |      v                     |      v
                         +---+  +---+                 +---+  +---+
                         | F |  | F |                 | F |  | F |
                         +---+  +---+                 +---+  +---+
                           ^      |                     ^      |
                           |      v                     |      v
                         +----------+                 +----------+
                         | routing  |                 | routing  |
                         | protocol |                 | protocol |
                         +----------+                 +----------+
</pre>
<p><a href="#fig.exsetup">Figure 1</a> shows an example of a more complicated setup: </p>

<ul>
<li>Along with the main routing table, which must always be present, an additional routing table is defined.</li>
<li>Each routing protocol instance, including the "static" and "direct" pseudo-protocol instances, is connected to exactly one routing table with which it can exchange routes (in both directions, except for the "static" and "direct" pseudo-protocols).</li>
<li>Routing tables may also be connected to each other and exchange routes in one or both directions.</li>
<li>The forwarding information base (FIB) is a special routing table which must always be present. Typically, the FIB receives the active routes from the main routing table and the operating system kernel uses this information for packet forwarding.</li>
<li>Route exchanges along all connections may be controlled by means of route filters, denoted by "F" in the figure.</li>
</ul>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#sec.route" id="sec.route">Route</a>
</h1>
<p id="rfc.section.4.1.p.1">Routes are basic units of information in a routing system. The "ietf-ipv4-unicast-routing" module defines only the following minimal set of route attributes: </p>

<ul>
<li>destination-prefix - IP prefix specifying the set of destination addresses for which the route may be used. This attribute is mandatory.</li>
<li>next-hop - IP address of the adjacent router or host to which packets with destination addresses belonging to destination-prefix should be sent.</li>
<li>outgoing-interface - network interface that should be used for sending packets with destination addresses belonging to destination-prefix.</li>
</ul>

<p> </p>
<p id="rfc.section.4.1.p.2">The above list of route attributes is sufficient for a simple static routing configuration. It is expected that future modules defining routing protocols will add other route attributes such as metrics or preferences.</p>
<p id="rfc.section.4.1.p.3">Routes and their attributes are used in both configuration data, for example as manually configured static routes, as well as in operational state data, for example as entries in routing tables.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#sec.rtables" id="sec.rtables">Routing Tables</a>
</h1>
<p id="rfc.section.4.2.p.1">Routing tables are lists of routes complemented with administrative data, namely: </p>

<ul>
<li>source-protocol - name of the routing protocol from which the route was originally obtained.</li>
<li>last-modified - date and time of last modification, or installation, of the route.</li>
</ul>
<p id="rfc.section.4.2.p.2">In the core routing data model, the list of routes in routing tables is represented as operational state data. Routing protocol operations result in route additions, removals and modifications. This also includes manipulations via the "static" pseudo-protocol.</p>
<p id="rfc.section.4.2.p.3">The "ietf-ipv4-unicast-routing" module requires that at least the following two routing tables MUST be configured for each routing process: </p>

<ul>
<li>The "ipv4-unicast-fib" table is the forwarding information base used by the operating system kernel for forwarding IPv4 unicast datagrams.</li>
<li>The "ipv4-unicast-main" table is the main routing table. By default, all IPv4 unicast routing protocols exchange routes with this table, and active routes from the "ipv4-unicast-main" routing table are installed in the "ipv4-unicast-fib" table and used for packet forwarding.</li>
</ul>

<p> Additional routing tables MAY be configured.</p>
<p id="rfc.section.4.2.p.4">Every routing table MAY serve as a source of routes for other routing tables. To achieve this, one or more recipient routing tables MAY be specified in the configuration of the source routing table. In addition, a route filter may be configured for each recipient routing table, which selects and/or manipulates the routes that are passed on between the source and recipient routing table.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#sec.proto" id="sec.proto">Routing Protocol Instances</a>
</h1>
<p id="rfc.section.4.3.p.1">The "ietf-ipv4-unicast-routing" module provides an open-ended framework for defining multiple routing protocol instances. Each of them is identified by a name, which is unique within a routing process, and MUST be assigned a type from a selection which includes all routing protocol types supported by the server, such as RIP, OSPF or BGP.</p>
<p id="rfc.section.4.3.p.2">Each routing protocol instance is connected to exactly one routing table. By default, every routing protocol instance is connected to the main routing table, but any routing protocol instance can be configured to use a different routing table, provided such an extra table is configured.</p>
<p id="rfc.section.4.3.p.3">Routes learned from the network by a routing protocol instance are passed to the connected routing table and vice versa - routes appearing in a routing table are passed to all routing protocol connected to the table and advertised by that protocol to the network.</p>
<p id="rfc.section.4.3.p.4">Two independent route filters (see <a href="#sec.filters">Section 4.4</a>) may be defined for a routing protocol instance to control the exchange of routes in both directions between the routing protocol instance and the connected routing table: </p>

<ul>
<li>import filter controls which routes are passed from a routing protocol instance to the routing table,</li>
<li>export filter controls which routes the routing protocol instance may receive from the connected routing table.</li>
</ul>

<p> Note that, for historical reasons, the terms import and export are used from the viewpoint of a routing table.</p>
<p id="rfc.section.4.3.p.5">The "ietf-ipv4-unicast-routing" module defines two special routing protocols - "direct" and "static". Both are in fact pseudo-protocols, which means that they are confined to the local device and do not exchange any routing information with neighboring routers. Routes from both "direct" and "static" protocol instances are passed to the connected routing table (subject to route filters, if any), but an exchange in the opposite direction is not allowed.</p>
<p id="rfc.section.4.3.p.6">Every routing process MUST contain exactly one instance of the "direct" pseudo-protocol. It is the source of routes to directly connected networks (so-called direct routes). Such routes are supplied by the operating system kernel based on the detected and configured network interfaces, and they usually appear in the main routing table. However, using the framework defined in this document, the target routing table for direct routes can be changed by connecting the "direct" protocol instance to a non-default routing table, and the direct routes can also be filtered before they appear in the routing table.</p>
<p id="rfc.section.4.3.p.7">The "static" routing pseudo-protocol allows for specifying routes manually. It can be configured in zero or more instances, although typically one instance suffices.</p>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> <a href="#sec.newproto" id="sec.newproto">Defining New Routing Protocols</a>
</h1>
<p id="rfc.section.4.3.1.p.1">It is expected that future YANG modules will create data models for additional routing protocol types. In order to do so, the new module has to define the protocol-specific information and fit it to the core routing framework in the following way: </p>

<ul>
<li>A new identity MUST be defined for the routing protocol and its base identity set to "rt:routing-protocol", or to an identity derived from "rt:routing-protocol".</li>
<li>Additional route attributes MAY be defined. Their definitions have to be inserted as operational state data by augmenting the definition of "v4ur:route" inside "v4ur:routing-table". Naturally, route attributes (including the extra attributes) may be used in configuration data, too, as demonstrated by the "static" pseudo-protocol.</li>
<li>The recommended way of defining configuration data specific to the new protocol is to augment the "routing-protocol-instance" list entry with a container that encapsulates the configuration hierarchy of the new protocol. The "augment" statement SHOULD be made conditional by using a "when" substatement requiring that the new nodes be used only if the "type" leaf node is equal to the new protocol's identity.</li>
</ul>
<p id="rfc.section.4.3.1.p.2">The above steps are implemented by the example YANG module for the RIP routing protocol in <a href="#app.rip">Appendix Appendix A</a>. First, the module defines a new identity for the RIP protocol:</p>
<div id="#rfc.figure.2"></div>
<pre>
identity rip {
  base rt:routing-protocol;
  description "Identity for the RIP routing protocol.";
}</pre>
<p id="rfc.section.4.3.1.p.3">Second, new route attributes specific for the RIP protocol ("metric" and "tag") are added:</p>
<div id="#rfc.figure.3"></div>
<pre>
augment "/rt:routing/rt:routing-process/v4ur:ipv4-unicast-routing/"
      + "v4ur:routing-tables/v4ur:routing-table/"
      + "v4ur:routes/v4ur:route" {
    when "../../../../v4ur:routing-protocol-instances/"
       + "v4ur:routing-protocol-instance[rt:name="
       + "current()/v4ur:source-protocol]/v4ur:type='rip:rip'";
  description
    "RIP-specific route components.";
  leaf metric { ... }
  leaf tag { ... }
}</pre>
<p id="rfc.section.4.3.1.p.4">The "when" statement is used to make sure that the new route attributes are only valid when the source protocol is RIP.</p>
<p id="rfc.section.4.3.1.p.5">Finally, RIP-specific configuration data are integrated into the "v4ur:routing-protocol-instance" node by using the following "augment" statement, which applies only to routing protocol instances whose type is "rip:rip", and which is a part of a routing process whose address family is "ipV4" and subsequent address family identifier is "nlri-unicast":</p>
<div id="#rfc.figure.4"></div>
<pre>
augment "/rt:routing/rt:routing-process/v4ur:ipv4-unicast-routing/"
      + "v4ur:routing-protocol-instances/"
      + "v4ur:routing-protocol-instance" {
  when "v4ur:type = 'rip:rip' and ../../../rt:address-family = 'ipV4'"
     + " and ../../../safi = 'nlri-unicast'";
  container rip-configuration {
    ...
  }
}</pre>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#sec.filters" id="sec.filters">Route Filters</a>
</h1>
<p id="rfc.section.4.4.p.1">The "ietf-ipv4-unicast-routing" module provides a skeleton for defining route filters that can be used to restrict the set of routes being exchanged between a routing protocol instance and a routing table, or between a source and a recipient routing table. Route filters may also manipulate routes, i.e., add, delete, or modify their properties.</p>
<p id="rfc.section.4.4.p.2">By itself, the route filtering framework defined in the "ietf-ipv4-unicast-routing" module allows to establish only the two extreme routing policies in which either all routes are allowed or all routes are denied. It is expected that a real route filtering framework (or several alternative frameworks) will be developed separately.</p>
<p id="rfc.section.4.4.p.3">Each route filter is identified by a name which is unique within a routing process. Its type MUST be specified by the "type" identity reference - this opens the space for multiple route filtering framework implementations. The default value for route filter type is the identity "deny-all-route-filter" defined in the "ietf-routing" module, which represents the "deny all" route filtering policy.</p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> <a href="#sec.rpcs" id="sec.rpcs">RPC Operations</a>
</h1>
<p id="rfc.section.4.5.p.1">The "ietf-ipv4-unicast-routing-module" defines two RPC operations: </p>

<ul>
<li>"delete-route" operations allows the client to immediately delete specific route(s) from a routing table within a routing process. The first input parameter of this operation is the name of the routing process, the second parameter is the routing table to act upon, and the third (optional) parameter is the "route" container with zero or more of the following route attributes: "destination-prefix", "next-hop" and "outgoing-interface". All routes that match these attributes MUST be deleted from the selected routing table. If the "route" container is missing or empty, all routes from the selected routing table MUST be deleted.</li>
<li>"get-route" is used for querying the forwarding information base of a routing process. The first input parameter is the name of a routing process whose FIB is to be queried, and the second parameter is an IPv4 destination address. The server replies with an active route which is used for forwarding datagrams to the destination address within the selected routing process.</li>
</ul>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#sec.mod-rt" id="sec.mod-rt">Routing YANG Module</a>
</h1>
<div id="#rfc.figure.5"></div>
<pre>&lt;CODE BEGINS&gt; file "ietf-routing@2011-04-27.yang"

module ietf-routing {
  namespace "urn:ietf:params:xml:ns:yang:ietf-routing";
  prefix rt;

  organization
    "IETF NETMOD (NETCONF Data Modeling Language) Working Group";
  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netmod/&gt;
     WG List:  &lt;mailto:netmod@ietf.org&gt;
     
     WG Chair: David Kessens
     &lt;mailto:david.kessens@nsn.com&gt;
     
     WG Chair: Juergen Schoenwaelder
     &lt;mailto:j.schoenwaelder@jacobs-university.de&gt;
     
     Editor:   Ladislav Lhotka
     &lt;mailto:lhotka@cesnet.cz&gt;";
  description
    "This module contains YANG definitions for top-level containers
     for the configuration of routing together with several type
     definitions and identities.";

  revision 2011-04-27 {
    description
      "Initial revision.";
    reference
      "RFC XXXX: A YANG Data Model for Routing Configuration";
  }

  /* Identities */

  identity routing-protocol {
    description
      "Base identity from which routing protocol identities are
       derived.";
  }

  identity direct {
    base routing-protocol;
    description
      "Identity for the pseudo-protocol providing routes to directly
       connected networks. An implementation MUST preconfigure
       exactly one instance of this pseudo-protocol for each routing
       process."; }

  identity static {
    base routing-protocol;
    description
      "Identity for static routing pseudo-protocol.";
  }

  identity route-filter {
    description
      "Base identity from which all route filters are
       derived.";
  }

  identity deny-all-route-filter {
    base route-filter;
    description
      "This identity represents a route filter that blocks all
       routes.";
  }

  /* Type definitions */

  typedef address-family {
    type enumeration {
      enum "other" {
        value 0;
        description
          "none of the following";
      }
      enum "ipV4" {
        value 1;
        description
          "IP Version 4";
      }
      enum "ipV6" {
        value 2;
        description
          "IP Version 6";
      }
      enum "nsap" {
        value 3;
        description
          "NSAP";
      }
      enum "hdlc" {
        value 4;
        description
          "(8-bit multidrop)";
      }
      enum "bbn1822" {
        value 5;
        description
          "BBN Report 1822";
      }
      enum "all802" {
        value 6;
        description
          "(includes all 802 media plus Ethernet 'canonical
          format')";
      }
      enum "e163" {
        value 7;
      }
      enum "e164" {
        value 8;
        description
          "(SMDS, FrameRelay, ATM)";
      }
      enum "f69" {
        value 9;
        description
          "(Telex)";
      }
      enum "x121" {
        value 10;
        description
          "(X.25, Frame Relay)";
      }
      enum "ipx" {
        value 11;
        description
          "IPX (Internet Protocol Exchange)";
      }
      enum "appleTalk" {
        value 12;
        description
          "Apple Talk";
      }
      enum "decnetIV" {
        value 13;
        description
          "DEC Net Phase IV";
      }
      enum "banyanVines" {
        value 14;
        description
          "Banyan Vines";
      }
      enum "e164withNsap" {
        value 15;
        description
          "(E.164 with NSAP format subaddress)";
      }
      enum "dns" {
        value 16;
        description
          "(Domain Name System)";
      }
      enum "distinguishedName" {
        value 17;
        description
          "(Distinguished Name, per X.500)";
      }
      enum "asNumber" {
        value 18;
        description
          "(16-bit quantity, per the AS number space)";
      }
      enum "xtpOverIPv4" {
        value 19;
        description
          "XTP over IP version 4";
      }
      enum "xtpOverIpv6" {
        value 20;
        description
          "XTP over IP version 6";
      }
      enum "xtpNativeModeXTP" {
        value 21;
        description
          "XTP native mode XTP";
      }
      enum "fibreChannelWWPN" {
        value 22;
        description
          "Fibre Channel World-Wide Port Name";
      }
      enum "fibreChannelWWNN" {
        value 23;
        description
          "Fibre Channel World-Wide Node Name";
      }
      enum "gwid" {
        value 24;
        description
          "Gateway Identifier";
      }
      enum "afi" {
        value 25;
        description
          "AFI for L2VPN";
      }
    }
    description
      "This typedef is a YANG enumeration of IANA-registered
       address families.";
    reference
      "http://www.iana.org/assignments/ianaaddressfamilynumbers-mib";
  }

  typedef subsequent-address-family {
    type enumeration {
      enum "nlri-unicast" {
        value 1;
        description
          "Network Layer Reachability Information used for
           unicast forwarding";
        reference "RFC4760";
      }
      enum "nlri-multicast" {
        value 2;
        description
          "Network Layer Reachability Information used for
           multicast forwarding";
        reference "RFC4760";
      }
      enum "nlri-mpls" {
        value 4;
        description
          "Network Layer Reachability Information (NLRI) with
           MPLS Labels";
        reference "RFC3107";
      }
      enum "mcast-vpn" {
        value 5;
        description
          "MCAST-VPN";
        reference "draft-ietf-l3vpn-2547bis-mcast-bgp-08";
      }
      enum "nlri-dynamic-ms-pw" {
        value 6;
        status obsolete;
        description
          "Network Layer Reachability Information used for Dynamic
           Placement of Multi-Segment Pseudowires (TEMPORARY -
           Expires 2008-08-23)";
        reference "draft-ietf-pwe3-dynamic-ms-pw-13";
      }
      enum "tunnel-safi" {
        value 64;
        description
          "Tunnel SAFI";
        reference "draft-nalawade-kapoor-tunnel-safi-05";
      }
      enum "vpls" {
        value 65;
        description
          "Virtual Private LAN Service (VPLS)";
        reference "RFC4761, RFC6074";
      }
      enum "bgp-mdt" {
        value 66;
        description
          "BGP MDT SAFI";
        reference "RFC6037";
      }
      enum "bgp-4over6" {
        value 67;
        description
          "BGP 4over6 SAFI";
        reference "RFC5747";
      }
      enum "bgp-6over4" {
        value 68;
        description
          "BGP 6over4 SAFI";
        reference "mailto:cuiyong&amp;tsinghua.edu.cn";
      }
      enum "l1vpn-auto-discovery" {
        value 69;
        description
          "Layer-1 VPN auto-discovery information";
        reference "draft-ietf-l1vpn-bgp-auto-discovery-05";
      }
      enum "mpls-vpn" {
        value 128;
        description
          "MPLS-labeled VPN address";
        reference "RFC4364";
      }
      enum "multicast-bgp-mpls-vpn" {
        value 129;
        description
          "Multicast for BGP/MPLS IP Virtual Private Networks
          (VPNs)";
        reference
          "draft-ietf-l3vpn-2547bis-mcast-10,
           draft-ietf-l3vpn-2547bis-mcast-10";
      }
      enum "route-target-constraints" {
        value 132;
        description
          "Route Target constraints";
        reference "RFC4684";
      }
      enum "ipv4-diss-flow" {
        value 133;
        description
          "IPv4 dissemination of flow specification rules";
        reference "RFC5575";
      }
      enum "vpnv4-diss-flow" {
        value 134;
        description
          "IPv4 dissemination of flow specification rules";
        reference "RFC5575";
      }
      enum "vpn-auto-discovery" {
        value 140;
        description
          "VPN auto-discovery";
        reference "draft-ietf-l3vpn-bgpvpn-auto-09";
      }
    }
    description
      "This typedef is a YANG enumeration of IANA-registered
       subsequent address families.";
    reference "http://www.iana.org/assignments/safi-namespace/"
            + "safi-namespace.xml";
  }

  typedef routing-process-ref {
    type leafref {
      path "/rt:routing/rt:routing-process/rt:name";
    }
    description
      "This type is used for leafs that reference a routing
       process.";
  }

  /* Data nodes */

  container routing {
    description
      "Routing parameters.";
    list routing-process {
      key "name";
      description
        "Each entry is a container for configuration and operational
         state data of a single (virtual) router for a given address
         family and subsequent address family identifier (SAFI). Each
         entry has a unique name.
         
         The definitions of data for a particular address family and
         subsequent address family shall be provided via augmentation
         by other modules.";
      leaf name {
        type string;
        description
          "The unique name of the routing process.";
      }
      leaf address-family {
        type address-family;
        default "ipV4";
        description
          "Address family of the routing process.";
      }
      leaf safi {
        type subsequent-address-family;
        default "nlri-unicast";
        description
          "Subsequent address family identifier of the routing
          process.";
      }
      leaf description {
        type string;
        description
          "Textual description of the routing process.";
      }
      leaf enabled {
        type boolean;
        default "true";
        description
          "Enable or disable the routing process. The default value
           is 'true', which means that the process is enabled.";
      }
    }
  }
}

&lt;CODE ENDS&gt;</pre>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#sec.mod-v4ur" id="sec.mod-v4ur">IPv4 Unicast Routing YANG Module</a>
</h1>
<div id="#rfc.figure.6"></div>
<pre>&lt;CODE BEGINS&gt; file "ietf-ipv4-unicast-routing@2011-04-27.yang"

module ietf-ipv4-unicast-routing {
  namespace "urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing";
  prefix v4ur;

  import ietf-routing {
    prefix rt;
  }
  import ietf-yang-types {
    prefix yang;
  }
  import ietf-inet-types {
    prefix inet;
  }
  import ietf-interfaces {
    prefix if;
  }

  organization
    "IETF NETMOD (NETCONF Data Modeling Language) Working Group";
  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netmod/&gt;
     WG List:  &lt;mailto:netmod@ietf.org&gt;
     
     WG Chair: David Kessens
     &lt;mailto:david.kessens@nsn.com&gt;
     
     WG Chair: Juergen Schoenwaelder
     &lt;mailto:j.schoenwaelder@jacobs-university.de&gt;
     
     Editor:   Ladislav Lhotka
     &lt;mailto:lhotka@cesnet.cz&gt;";
  description
    "This module augments the 'ietf-routing' module with YANG
     definitions for basic configuration of IPv4 unicast routing.
     
     It is immediately usable for a device that needs just a single
     routing table populated with static routes.
     
     On the other hand, the framework is designed to handle
     arbitrarily complex configurations with any number of routing
     tables and various routing protocols (in multiple instances).";

  revision 2011-04-27 {
    description
      "Initial revision.";
    reference
      "RFC XXXX: A YANG Data Model for Routing Configuration";
  }

  /* Groupings */

  grouping routing-process-name {
    leaf routing-process-name {
      type rt:routing-process-ref;
      must "/rt:routing/rt:routing-process[rt:name = current()]"
         + "/rt:address-family = 'ipV4' and "
         + "/rt:routing/rt:routing-process[rt:name = current()]"
         + "/rt:safi = 'nlri-unicast'" {
        description
          "The referred routing process must be IPv4 unicast.";
      }
    description "The name of a routing process.";
    }
    description
      "This grouping defines the first common parameter of both
       RPC operations below.";
  }

  /* RPC operations */

  rpc get-route {
    description
      "Query the forwarding information base of an IPv4 unicast
       routing process whose name is given as the first
       parameter. The second parameter is an IPv4 destination
       address. The server returns the route which is currently used
       for forwarding datagrams to that destination address, or an
       error message, if no such route exists.";
    input {
      uses routing-process-name;
      leaf destination-address {
        type inet:ipv4-address;
        description
          "Second parameter - IPv4 destination address.";
      }
    }
    output {
      container route {
        description
          "Contents of the reply.";
        leaf destination-prefix {
          type inet:ipv4-prefix;
          mandatory true;
          description
            "Destination prefix of the returned route.";
        }
        leaf next-hop {
          type inet:ipv4-address;
          description
            "Next hop address of the returned route.";
        }
        leaf outgoing-interface {
          type if:interface-ref;
          description
            "Outgoing interface of the returned route.";
        }
      }
    }
  }

  rpc delete-route {
    description

      "Delete all routes that match the given attributes from a
       routing table within a routing process.

       Parameters:
       1. routing process name,
       2. routing table name,
       3. Container 'route' with route attributes.

       &lt;ok&gt; is returned by the server upon successful completion.";

    input {
      uses routing-process-name;
      leaf routing-table {
        type leafref {
          path "/rt:routing/rt:routing-process[rt:name=current()/../"
             + "routing-process-name]/ipv4-unicast-routing/"
             + "routing-tables/routing-table/name";
        }
        mandatory true;
        description
          "First parameter.";
      }
      container route {
        description
          "Second parameter. All routes matching the route
           attributes must be deleted from the routing table.

           If this container is empty or missing, all routes
           from the selected routing table are deleted.";
        leaf destination-prefix {
          type inet:ipv4-prefix;
          description
            "Match destination prefix.";
        }
        leaf next-hop {
          type inet:ipv4-address;
          description
            "Match next hop.";
        }
        leaf outgoing-interface {
          type if:interface-ref;
          description
            "Match outgoing interface.";
        }
      }
    }
  }


  /* Data nodes */

  augment "/rt:routing/rt:routing-process" {
    when "afi='ipV4' and safi='nlri-unicast'" {
      description
        "IPv4 unicast.";
    }
    description
      "Definitions of data nodes that augment a routing process
       for IPv4 unicast.";
    container ipv4-unicast-routing {
      description
        "Container for IPv4 unicast routing configuration and
         operational state data.";
      container routing-protocol-instances {
        description
          "Container for the list of configured routing protocol
           instances.";
        list routing-protocol-instance {
          key "name";
          description
            "An instance of a routing protocol.";
          container static-routes {
            when "../type='rt:static'" {
              description
                "These data nodes are only valid for the static
                 pseudo-protocol.";
            }
            description
              "Configuration of a 'static' pseudo-protocol
               instance consists of a list of routes.";
            list static-route {
              key "id";
              ordered-by user;
              description
                "An user-ordered list of static routes.";
              leaf id {
                type string;
                description
                  "An identification string for the route.";
              }
              leaf description {
                type string;
                description
                  "Textual description of the route.";
              }
              leaf destination-prefix {
                type inet:ipv4-prefix;
                mandatory true;
                description
                  "The destination prefix for which the route may
                   be used.";
              }
              leaf next-hop {
                type inet:ipv4-address;
                description
                  "IPv4 address of the host or router to which
                   packets whose address matches 'destination-prefix'
                   are to be forwarded.";
              }
              leaf outgoing-interface {
                type if:interface-ref;
                description
                  "Name of the outgoing interface. This attribute
                   is mainly used in direct routes.";
              }
            }
          }
          leaf name {
            type string;
            description
              "The name of the routing protocol instance.";
          }
          leaf description {
            type string;
            description
              "Textual description of the routing protocol
              instance.";
          }
          leaf type {
            type identityref {
              base rt:routing-protocol;
            }
            mandatory true;
            description
              "Type of the routing protocol - an identity derived
               from the 'rt:routing-protocol' base identity.";
          }
          leaf routing-table {
            type leafref {
              path "../../../routing-tables/routing-table/name";
            }
            default "ipv4-unicast-main";
            description
              "The routing table to which the routing protocol
               instance is connected. By default it is the
               'ipv4-unicast-main' table.";
          }
          leaf import-filter {
            type leafref {
              path "../../../route-filters/route-filter/name";
            }
            description
              "Reference to a route filter that is used for
               filtering routes passed from this routing protocol
               instance to the routing table specified by the
               'routing-table' sibling node. If this leaf is not
               present, the behavior is protocol-specific, but
               typically it means that all routes are accepted.";
          }
          leaf export-filter {
            type leafref {
              path "../../../route-filters/route-filter/name";
            }
            description
              "Reference to a route filter that is used for filtering
               routes passed from the routing table specified by the
               'routing-table' sibling to this routing protocol
               instance. If this leaf is not present, the behavior is
               protocol-specific - typically it means that all routes
               are accepted, except for the 'direct' and 'static'
               pseudo-protocols which accept no routes from any
               routing table.";
          }
        }
      }
      container route-filters {
        description
          "Container for configured route filters.";
        list route-filter {
          key "name";
          description
            "Route filters are used for filtering and/or manipulating
             routes that are passed between a routing protocol and a
             routing table or vice versa, or between two routing
             tables.  It is expected that other modules augment this
             list with contents specific for a particular route
             filter type.";
          leaf name {
            type string;
            description
              "The name of the route filter.";
          }
          leaf description {
            type string;
            description
              "Textual description of the route filter.";
          }
          leaf type {
            type identityref {
              base rt:route-filter;
            }
            default "rt:deny-all-route-filter";
            description
              "Type of the route-filter - an identity derived
               from the 'rt:route-filter' base identity. The default
               value represents an all-blocking filter.";
          }
        }
      }
      container routing-tables {
        must "routing-table/name='ipv4-unicast-fib'" {
          description
            "IPv4 unicast forwarding information base.";
        }
        must "routing-table/name='ipv4-unicast-main'" {
          description
            "The main IPv4 unicast routing table.";
        }
        description
          "Container for configured routing tables.";
        list routing-table {
          key "name";
          description
            "Each entry represents a configured routing table. At
             least two entries with names 'ipv4-unicast-fib' and
             'ipv4-unicast-main' must exist.";
          container routes {
            config false;
            description
              "Current contents of the routing table. Note that
               it is operational state data.";
            list route {
              description
                "A routing table entry.";
              leaf destination-prefix {
                type inet:ipv4-prefix;
                description
                  "Destination prefix.";
              }
              leaf next-hop {
                type inet:ipv4-address;
                description
                  "IPv4 address of the next hop.";
              }
              leaf outgoing-interface {
                type if:interface-ref;
                description
                  "Name of the outgoing interface.";
              }
              leaf source-protocol {
                type leafref {
                  path "../../../../../routing-protocol-instances/"
                     + "routing-protocol-instance/name";
                }
                description
                  "Protocol instance from which the route comes.";
              }
              leaf last-modified {
                type yang:date-and-time;
                description
                  "Time stamp of the last modification of the
                   route. If the route was never modified, it is the
                   time when the route was inserted to the routing
                   table.";
              }
            }
          }
          leaf name {
            type string;
            description
              "The name of the routing table.";
          }
          leaf description {
            type string;
            description
              "Textual description of the routing table.";
          }
          list recipient-routing-tables {
            key "recipient-name";
            description
              "A list of routing tables that receive routes from
               the parent routing table.";
            leaf recipient-name {
              type leafref {
                path "../../../routing-table/name";
              }
              description
                "The name of the recipient routing table.";
            }
            leaf filter {
              type leafref {
                path "../../../../route-filters/route-filter/name";
              }
              description
                "A route filter which is applied to the routes
                 passed on to the recipient routing table.";
            }
          }
        }
      }
    }
  }
}

&lt;CODE ENDS&gt;</pre>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#sec.iana" id="sec.iana">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This document registers the following two namespace URIs in the IETF XML registry <a href="#RFC3688">[RFC3688]</a>:</p>
<div id="#rfc.figure.7"></div>
<pre>
----------------------------------------------------------
URI: urn:ietf:params:xml:ns:yang:ietf-routing

Registrant Contact: The IESG.

XML: N/A, the requested URI is an XML namespace.
----------------------------------------------------------

----------------------------------------------------------
URI: urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing

Registrant Contact: The IESG.

XML: N/A, the requested URI is an XML namespace.
----------------------------------------------------------
      </pre>
<p id="rfc.section.7.p.2">This document registers two YANG modules in the YANG Module Names registry <a href="#RFC6020">[RFC6020]</a>:</p>
<div id="#rfc.figure.8"></div>
<pre>
-------------------------------------------------------------------
name:         ietf-routing
namespace:    urn:ietf:params:xml:ns:yang:ietf-routing
prefix:       rt
reference:    RFC XXXX
-------------------------------------------------------------------

-------------------------------------------------------------------
name:         ietf-ipv4-unicast-routing
namespace:    urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing
prefix:       v4ur
reference:    RFC XXXX
-------------------------------------------------------------------
      </pre>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#sec-cons" id="sec-cons">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">TBD.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#acknowledgments" id="acknowledgments">Acknowledgments</a>
</h1>
<p id="rfc.section.9.p.1">The author wishes to thank Juergen Schoenwaelder and Martin Bjorklund for their helpful comments and suggestions.</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="IANA-AFI">[IANA-AFI]</b></td>
<td class="top">
<a>IANA</a>, "<a>Address Family Numbers.</a>", January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="IANA-SAFI">[IANA-SAFI]</b></td>
<td class="top">
<a>IANA</a>, "<a>Subsequent Address Family Identifiers (SAFI) Parameters.</a>", March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3688">[RFC3688]</b></td>
<td class="top">
<a>Mealling, M.</a>, "<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>", BCP 81, RFC 3688, January 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4741">[RFC4741]</b></td>
<td class="top">
<a>Enns, R.</a>, "<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>", RFC 4741, December 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6020">[RFC6020]</b></td>
<td class="top">
<a title="Tail-f Systems">Bjorklund, M</a>, "<a href="http://tools.ietf.org/html/rfc6020">YANG - A Data Modeling Language for Network Configuration Protocol (NETCONF)</a>", RFC 6020, September 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6021">[RFC6021]</b></td>
<td class="top">
<a>Schoenwaelder, J.</a>, "<a href="http://tools.ietf.org/html/rfc6021">Common YANG Data Types</a>", RFC 6021, September 2010.</td>
</tr>
<tr>
<td class="reference"><b id="YANG-IF">[YANG-IF]</b></td>
<td class="top">
<a>Bjorklund, M</a>, "<a href="http://tools.ietf.org/html/draft-bjorklund-netmod-interfaces-cfg-00">A YANG Data Model for Interface Configuration</a>", Internet-Draft draft-bjorklund-netmod-interfaces-cfg-00, December 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC6087">[RFC6087]</b></td>
<td class="top">
<a>Bierman, A.</a>, "<a href="http://tools.ietf.org/html/rfc6087">Guidelines for Authors and Reviewers of YANG Data Model Documents</a>", RFC 6087, January 2011.</td>
</tr></tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#app.rip" id="app.rip">Example - Adding a New Routing Protocol</a>
</h1>
<p id="rfc.section.Appendix A.p.1">This appendix demonstrates how the core routing data model can be extended to support a new routing protocol. <a href="#app.rip-yang">Appendix Appendix A.1</a> contains a YANG module which is used for this purpose. It is intended only as an illustration and not as a real definition of a data model for the RIP routing protocol. Also, for the sake of brevity, we do not follow all the guidelines specified in <a href="#RFC6087">[RFC6087]</a>.</p>
<p><a href="#app.rip-xml">Appendix Appendix A.2</a> then contains a complete instance XML document - a reply to the NETCONF &lt;get&gt; message from a server that uses the RIP protocol as well as static routing.</p>
<h1 id="rfc.appendix.Appendix A.1">
<a href="#rfc.appendix.Appendix%20A.1">Appendix A.1.</a> <a href="#app.rip-yang" id="app.rip-yang">Example YANG Module for Routing Information                     Protocol</a>
</h1>
<div id="#rfc.figure.9"></div>
<pre>module example-rip {
  namespace "http://example.com/rip";
  prefix rip;

  import ietf-interfaces {
    prefix if;
  }
  import ietf-routing {
    prefix rt;
  }

  identity rip {
    base rt:routing-protocol;
    description
      "Identity for the RIP routing protocol.";
  }

  typedef rip-metric {
    type uint8 {
      range "0..16";
    }
  }

  augment "/rt:routing/rt:routing-protocol-instances/" +
          "rt:routing-protocol-instance" {
    when "rt:type='rip:rip'";
    container rip-configuration {
      container rip-interfaces {
        list rip-interface {
          key "name";
          leaf name {
            type if:interface-ref;
          }
          leaf enabled {
            type boolean;
            default "true";
          }
          leaf metric {
            type rip-metric;
            default "1";
          }
          /* Additional per-interface RIP configuration */
        }
      }
      leaf update-interval {
        type uint8 {
          range "10..60";
        }
        units "seconds";
        default "30";
        description
          "Time interval between periodic updates.";
      }
      /* Additional RIP configuration */
    }
  }
  augment "/rt:routing/rt:routing-tables/rt:routing-table/rt:route" {
      when "../../../rt:routing-protocol-instances/" +
           "rt:routing-protocol-instance[rt:name=" +
           "current()/rt:source-protocol]/rt:type='rip:rip'";
    description
      "RIP-specific route components.";
    leaf metric {
      type rip-metric;
    }
    leaf tag {
      type uint16;
      default "0";
      description
        "This leaf may be used to carry additional info, e.g. AS
         number.";
    }
  }
}
</pre>
<h1 id="rfc.appendix.Appendix A.2">
<a href="#rfc.appendix.Appendix%20A.2">Appendix A.2.</a> <a href="#app.rip-xml" id="app.rip-xml">Sample Reply to the NETCONF &lt;get&gt; Message</a>
</h1>
<p id="rfc.section.Appendix A.2.p.1">This section contains a sample reply to the NETCONF &lt;get&gt; message, which could be sent by a server supporting (and advertizing in &lt;hello&gt;) the following YANG modules: </p>

<ul>
<li>ietf-interfaces <a href="#YANG-IF">[YANG-IF]</a>,</li>
<li>ex-ethernet <a href="#YANG-IF">[YANG-IF]</a>,</li>
<li>ex-ip <a href="#YANG-IF">[YANG-IF]</a>,</li>
<li>ietf-routing (<a href="#sec.mod-rt">Section 5</a>),</li>
<li>ietf-ipv4-unicast-routing (<a href="#sec.mod-v4ur">Section 6</a>),</li>
<li>example-rip (<a href="#app.rip-yang">Appendix Appendix A.1</a>).</li>
</ul>
<p id="rfc.section.Appendix A.2.p.2">We assume a simple network setup as shown in <a href="#fig.exnet">Figure 10</a>: routers "ISP" and "A" use RIP for exchanging routing information whereas static routing is used in the private network. In order to avoid the redistribution of the routes to the private subnetworks 192.168.1.0/24 and 192.168.2.0/24 in RIP, an export filter is used in the RIP protocol configuration preventing the routes from the main routing table from appearing in RIP updates.</p>
<div id="#rfc.figure.10"></div>
<div id="#fig.exnet"></div>
<pre>
                +-----------------+
                |                 |
                |    Router ISP   |
                |                 |
                +--------+--------+
                         |192.0.2.2
                         |         
                         |         
                     eth0|192.0.2.1
                +--------+--------+
                |                 |
                |     Router A    |
                |                 |
                +--------+--------+
                     eth1|192.168.1.1
                         |           
                         |           
                         |192.168.1.254
                +--------+--------+    
                |                 |    
                |     Router B    |    
                |                 |    
                +--------+--------+    
                         |192.168.2.1  
                         |
                         

        </pre>
<p id="rfc.section.Appendix A.2.p.3">Router "A" then could send the following XML document as its reply to the NETCONF &lt;get&gt; message:</p>
<div id="#rfc.figure.11"></div>
<pre>&lt;?xml version="1.0"?&gt;

&lt;nc:rpc-reply
    message-id="101"
    xmlns="urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing"
    xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
    xmlns:if="urn:ietf:params:xml:ns:yang:ietf-interfaces"
    xmlns:eth="http://example.com/ethernet"
    xmlns:ip="http://example.com/ip"
    xmlns:rt="urn:ietf:params:xml:ns:yang:ietf-routing"
    xmlns:rip="http://example.com/rip"&gt;
  &lt;nc:data&gt;
    &lt;if:interfaces&gt;
      &lt;if:interface&gt;
        &lt;if:name&gt;eth0&lt;/if:name&gt;
        &lt;if:type&gt;ethernetCsmacd&lt;/if:type&gt;
        &lt;if:location&gt;05:00.0&lt;/if:location&gt;
        &lt;ip:ip&gt;
          &lt;ip:address&gt;
            &lt;ip:ip&gt;192.0.2.1&lt;/ip:ip&gt;
            &lt;ip:prefix-length&gt;24&lt;/ip:prefix-length&gt;
          &lt;/ip:address&gt;
        &lt;/ip:ip&gt;
      &lt;/if:interface&gt;
      &lt;if:interface&gt;
        &lt;if:name&gt;eth1&lt;/if:name&gt;
        &lt;if:type&gt;ethernetCsmacd&lt;/if:type&gt;
        &lt;if:location&gt;05:00.1&lt;/if:location&gt;
        &lt;ip:ip&gt;
          &lt;ip:address&gt;
            &lt;ip:ip&gt;192.168.1.1&lt;/ip:ip&gt;
            &lt;ip:prefix-length&gt;24&lt;/ip:prefix-length&gt;
          &lt;/ip:address&gt;
        &lt;/ip:ip&gt;
      &lt;/if:interface&gt;
    &lt;/if:interfaces&gt;
    &lt;rt:routing&gt;
      &lt;rt:routing-process&gt;
        &lt;rt:name&gt;inet-0&lt;/rt:name&gt;
        &lt;rt:address-family&gt;ipV4&lt;/rt:address-family&gt;
        &lt;rt:safi&gt;nlri-unicast&lt;/rt:safi&gt;
        &lt;ipv4-unicast-routing&gt;
          &lt;routing-protocol-instances&gt;
            &lt;routing-protocol-instance&gt;
              &lt;name&gt;direct&lt;/name&gt;
              &lt;type&gt;rt:direct&lt;/type&gt;
            &lt;/routing-protocol-instance&gt;
            &lt;routing-protocol-instance&gt;
              &lt;name&gt;st0&lt;/name&gt;
              &lt;description&gt;
                Static routing is used for the internal network.
              &lt;/description&gt;
              &lt;type&gt;rt:static&lt;/type&gt;
              &lt;static-routes&gt;
               &lt;static-route&gt;
                &lt;id&gt;id-6378&lt;/id&gt;
                &lt;destination-prefix&gt;192.168.2.0/24&lt;/destination-prefix&gt;
                &lt;next-hop&gt;192.168.1.254&lt;/next-hop&gt;
               &lt;/static-route&gt;
              &lt;/static-routes&gt;
            &lt;/routing-protocol-instance&gt;
            &lt;routing-protocol-instance&gt;
              &lt;name&gt;rip0&lt;/name&gt;
              &lt;description&gt;
                RIP is used on the uplink.
                Static routes to the internal networks are not
                advertized in RIP.
              &lt;/description&gt;
              &lt;type&gt;rip:rip&lt;/type&gt;
              &lt;export-filter&gt;deny-all&lt;/export-filter&gt;
              &lt;rip:rip-configuration&gt;
                &lt;rip:rip-interfaces&gt;
                  &lt;rip:rip-interface&gt;
                    &lt;rip:name&gt;eth0&lt;/rip:name&gt;
                  &lt;/rip:rip-interface&gt;
                &lt;/rip:rip-interfaces&gt;
              &lt;/rip:rip-configuration&gt;
            &lt;/routing-protocol-instance&gt;
          &lt;/routing-protocol-instances&gt;
          &lt;route-filters&gt;
            &lt;route-filter&gt;
              &lt;name&gt;deny-all&lt;/name&gt;
            &lt;/route-filter&gt;
          &lt;/route-filters&gt;
          &lt;routing-tables&gt;
            &lt;routing-table&gt;
              &lt;name&gt;ipv4-unicast-fib&lt;/name&gt;
              &lt;routes&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;192.0.2.1/24&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;direct&lt;/source-protocol&gt;
                &lt;outgoing-interface&gt;eth0&lt;/outgoing-interface&gt;
                &lt;last-modified&gt;2010-04-01T17:11:27+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;192.168.1.0/24&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;direct&lt;/source-protocol&gt;
                &lt;outgoing-interface&gt;eth1&lt;/outgoing-interface&gt;
                &lt;last-modified&gt;2010-04-01T17:11:27+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;192.168.2.0/24&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;st0&lt;/source-protocol&gt;
                &lt;next-hop&gt;192.168.1.254&lt;/next-hop&gt;
                &lt;last-modified&gt;2010-04-01T17:11:32+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;0.0.0.0/0&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;rip0&lt;/source-protocol&gt;
                &lt;next-hop&gt;192.168.1.254&lt;/next-hop&gt;
                &lt;rip:metric&gt;2&lt;/rip:metric&gt;
                &lt;rip:tag&gt;64500&lt;/rip:tag&gt;
                &lt;last-modified&gt;2010-04-01T18:02:45+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
              &lt;/routes&gt;
            &lt;/routing-table&gt;
            &lt;routing-table&gt;
              &lt;name&gt;ipv4-unicast-main&lt;/name&gt;
              &lt;recipient-routing-tables&gt;
                &lt;recipient-name&gt;ipv4-unicast-fib&lt;/recipient-name&gt;
              &lt;/recipient-routing-tables&gt;
              &lt;routes&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;192.0.2.1/24&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;direct&lt;/source-protocol&gt;
                &lt;outgoing-interface&gt;eth0&lt;/outgoing-interface&gt;
                &lt;last-modified&gt;2010-04-01T17:11:27+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;192.168.1.0/24&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;direct&lt;/source-protocol&gt;
                &lt;outgoing-interface&gt;eth1&lt;/outgoing-interface&gt;
                &lt;last-modified&gt;2010-04-01T17:11:27+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;192.168.2.0/24&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;st0&lt;/source-protocol&gt;
                &lt;next-hop&gt;192.168.1.254&lt;/next-hop&gt;
                &lt;last-modified&gt;2010-04-01T17:11:32+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
               &lt;route&gt;
                &lt;destination-prefix&gt;0.0.0.0/0&lt;/destination-prefix&gt;
                &lt;source-protocol&gt;rip0&lt;/source-protocol&gt;
                &lt;next-hop&gt;192.168.1.254&lt;/next-hop&gt;
                &lt;rip:metric&gt;2&lt;/rip:metric&gt;
                &lt;rip:tag&gt;64500&lt;/rip:tag&gt;
                &lt;last-modified&gt;2010-04-01T18:02:45+01:00&lt;/last-modified&gt;
               &lt;/route&gt;
              &lt;/routes&gt;
            &lt;/routing-table&gt;
          &lt;/routing-tables&gt;
        &lt;/ipv4-unicast-routing&gt;
      &lt;/rt:routing-process&gt;
    &lt;/rt:routing&gt;
  &lt;/nc:data&gt;
&lt;/nc:rpc-reply&gt;
</pre>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ladislav Lhotka</span> 
	  <span class="n hidden">
		<span class="family-name">Lhotka</span>
	  </span>
	</span>
	<span class="org vcardline">CESNET</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:lhotka@cesnet.cz">lhotka@cesnet.cz</a></span>

  </address>
</div>

</body>
</html>