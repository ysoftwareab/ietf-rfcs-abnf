<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Applications Interoperability Test Suite</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Applications Interoperability Test Suite">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">DIME</td><td class="header">V. Fajardo</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Telcordia Technologies</td></tr>
<tr><td class="header">Expires: January 14, 2010</td><td class="header">A. McNamee</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Openet-Telecom</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Bournelle</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">France Telecom R&amp;D</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 13, 2009</td></tr>
</table></td></tr></table>
<h1><br />Diameter Applications Interoperability Test Suite<br />draft-fajardo-dime-misc-app-test-suite-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 14, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
        This document describes a collection of test cases
        to be used for Diameter applications interoperability
        testing.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#sec-app-sip">3.</a>&nbsp;
Diameter SIP Test Suite<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-sip-req">3.1.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-sip-auth">3.1.1.</a>&nbsp;
Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-sip-auth2">3.1.2.</a>&nbsp;
User Profile Update<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-sip-auth3">3.1.3.</a>&nbsp;
Proxy Service Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-sip-ls">3.1.4.</a>&nbsp;
Location Service<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-sip-st">3.1.5.</a>&nbsp;
Soft Termination<br />
<a href="#sec-app-3gpp">4.</a>&nbsp;
3GPP Interface Test Suite<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-cx">4.1.</a>&nbsp;
Diameter Cx<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-cx-req">4.1.1.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-sh">4.2.</a>&nbsp;
Diameter Sh<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-sh-req">4.2.1.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-rf">4.3.</a>&nbsp;
Diameter Rf<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-rf-req">4.3.1.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-3gpp-rf-opt">4.3.2.</a>&nbsp;
Optional<br />
<a href="#sec-app-eap">5.</a>&nbsp;
Diameter EAP Test Suite<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-eap-req">5.1.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">5.1.1.</a>&nbsp;
Non-Roaming case<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">5.1.2.</a>&nbsp;
Roaming scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-eap-optional">5.2.</a>&nbsp;
Optional Authorization/Accounting Tests<br />
<a href="#sec-app-nasreq">6.</a>&nbsp;
Diameter NASREQ Test Suite<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-nasreq-req">6.1.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-nas-req1">6.1.1.</a>&nbsp;
Auth Session<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-nas-req2">6.1.2.</a>&nbsp;
Diameter/RADIUS Gateway<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-nas-req3">6.1.3.</a>&nbsp;
Multi-domain Scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-nasreq-optional">6.2.</a>&nbsp;
Optional<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-nas-opt-auth1">6.2.1.</a>&nbsp;
Auth Session<br />
<a href="#sec-app-mip">7.</a>&nbsp;
Diameter MIP Test Suite<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-req-generic">7.1.</a>&nbsp;
Generic MIP Test Scenarios<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-req">7.2.</a>&nbsp;
Required<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-req-topo1">7.2.1.</a>&nbsp;
Co-located Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-req-topo2">7.2.2.</a>&nbsp;
Intra-Domain Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-req-topo3">7.2.3.</a>&nbsp;
Inter-Domain Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-req-topo4">7.2.4.</a>&nbsp;
Allocation of HA in Foreign Network<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-optional">7.3.</a>&nbsp;
Optional<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-opt-topo1">7.3.1.</a>&nbsp;
Co-located Registration via Redirect Indication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-opt-topo2">7.3.2.</a>&nbsp;
Inter-Domain Registration with Redirect<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-app-mip-opt-topo3">7.3.3.</a>&nbsp;
Inter-Domain Registration with Proxy/Relay<br />
<a href="#section-security-considerations">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor5">9.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">10.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        The document is a companion document to the Diameter Base Protocol
        Interoperability Test Suite. The document is meant to aid in the
        identifying the functional test cases of a Diameter implementation.
        The Diameter interoperability test suites are categorized by different
        applications or extensions. Each category is further subdivided into
        required and optional functionality. The required functionality is
        the baseline capability that an implementation must support to allow
        basic interoperability dor that category. Optional functionality
        covers features that not all implementations support or may wish to
        test. The following is a list of Diameter applications that are 
        currently categorized in this document:
        </p>
<ol class="text">
<li>Diameter SIP
</li>
<li>3GPP Interfaces
</li>
<li>Diameter EAP
</li>
<li>Diameter NASREQ
</li>
<li>Diameter MIP
</li>
</ol><p>
      
</p>
<p>
        Note that some of the test cases can overlap. For example,
        a NASREQ test case would normally encompass base protocol
        routing. In such cases, it is implied that multiple test
        scenario can be covered by some test.
      
</p>
<p>
        The Diameter Credit Control applications is not included
        in this document but is published in a separate document
        (Diameter Credit Control Interoperability Test Suite) to cover
        a wider set of test.
      
</p>
<p>
        At its current state, this document provides only a
        collection of test cases designed for interoperability.
        Test plans may be included in future revisions of this 
        work or maybe provided in some other document.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", 
        "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", 
        "MAY", and "OPTIONAL" in this document are to be 
        interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<p>
        Within this document the terms defined in
        <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> refers to the functionality 
        that have to be provided by an implementation for the 
        usage within this interoperability test event.
      
</p>
<a name="sec-app-sip"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Diameter SIP Test Suite</h3>

<p>
          Implementations that deploy SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> services 
          and use Diameter for authentication, authorization, signaling, profile
          distribution, location services etc must conform to
          <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. For the purpose of 
          Diameter SIP, each test nodes exercises only a specific set of 
          functionality depending on their role in the SIP architecture. Since
          this SIP architecture is synonymous to Diameter Cx 
          <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>, the scenarios enumerated in this section
          applies there as well. Therefore, there can be a multitude of deployment 
          scenarios. The test topology follows the general architecture in Figure 1 
          of <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a> in order to exercise
          the majority of Diameter SIP features. For testing Diameter Cx, the
          mapping of the test entities against this figure is described in 
          <a class='info' href='#sec-app-3gpp-cx'>Section&nbsp;4.1<span> (</span><span class='info'>Diameter Cx</span><span>)</span></a>. Configuration of SIP user agents
          and SIP servers in all test cases are implementation specific and it
          is left to the tester to verify their correctness. 
          <br /><hr class="insert" />
<a name="fig-app-sip-01"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                            +--------+
                UAR/UAA +---&gt;|Diameter|&lt;----+ PPR/PPA
                LIR/LIA |    | server |     | MAR/MAA
                MAR/MAA |    |Vendor B|     | SAR/SAA
                        |    +--------+     | RTR/RTA
                        |                   |
              (realmB)  |                   |  (realmA)
                        v                   v
+------+   SIP     +--------+    SIP   +--------+   SIP     +------+
| SIP  |&lt;---------&gt;|  SIP   |&lt;--------&gt;|  SIP   |&lt;---------&gt;| SIP  |
| UA1  |           |server 1|          |server 2|           | UA2  |
+------+           |Vendor A|          |Vendor D|           +------+
                    +--------+          +--------+
Caller=user1@realmB     ^                   ^     Callee:user2@reamlA
                        |                   |
                UAR/UAA |                   |
                LIR/LIA |                   | MAR/MAA
                        |    +--------+     | SAR/SAA
                        +---&gt;|Diameter|&lt;----+
                            |   SL   |
                            |Vendor C|
                            +--------+

  Legend:
          SIP UA's         - SIP User Agents making/receiving calls
          SIP server 1     - Vendor A acting as SIP proxy for reamlA
          Diameter server  - Vendor B acting as SIP auth server
          Diameter SL      - Vendor C acting as location server
          SIP server 2     - Vendor D acting as SIP proxy for realmB
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Diameter SIP Test Topology&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="sec-app-sip-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Required</h3>

<a name="sec-app-sip-auth"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Authentication</h3>

<p>
              Implementations must conform to Section 6.3 and 6.4 of 
              <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. 
              All test entities should be present to perform these test. The test
              scenarios check proper auth of user1@realmB during SIP registration
              (SIP REGISTER) to SIP server 2. Vendor A should be configured as proxy 
              for UA1 and vendor D will be the assigned SIP server for user1@realmB. 
              Figure 2 and 3 of <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a> can 
              be used as a reference for these test. All test scenario must follow the 
              message flows described in these figures. These test can be integrated
              with <a class='info' href='#sec-app-sip-ls'>Section&nbsp;3.1.4<span> (</span><span class='info'>Location Service</span><span>)</span></a>. For simplicity, it is assumed that
              vendor A has knowledge of vendor B as the Diameter server through static
              configuration or through the location service. 
              </p>
<ul class="text">
<li>
                  Positive test with Diameter server performing authentication.  
                  Assuming proper configuration of all test entities, SIP REGISTER
                  request for user1@realmB should succeed with vendor D as the 
                  allocated SIP server for the registration. The resulting message
                  flows should follow Figure 2 of 
                  <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. For Diameter Cx,
                  Section A.4.1 of <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> describes a similar
                  scenario. UAR/UAA exchanges must indicate to vendor A that D is
                  the preferred SIP server to handle user1@realmB registration. Verify 
                  that DIAMETER_MULTI_ROUND_AUTH is followed by vendor A and D and 
                  that vendor A generates SIP unauthorized response accordingly. 
                  Verify that user1@realmB credentials and challenge response is 
                  validated by vendor B in subsequent MAR/MAA exchanges. 
                
</li>
<li>
                  Positive test with SIP server performing authentication. Assuming
                  proper configuration of all test entities, SIP REGISTER request
                  for user1@realmB should succeed and the resulting message flows
                  should follow Figure 3 of 
                  <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. This test scenarios
                  is identical to the previous scenario except that that nonces must
                  be transferred from vendor B to D (Digest-HA1 avp). All verification
                  procedure in the previous test applies.
                
</li>
<li>
                  Positive test for server assignment. Assuming successful 
                  authentication of user1@realmB, verify that vendor D is properly
                  allocated as the designated SIP server for this user. Verify 
                  that this is a consequence of the previous positive tests and
                  vendor B is notified using SAR/SAA exchanges. Additional 
                  verification of this scenario can be done with subsequent SIP
                  request such as in <a class='info' href='#sec-app-sip-auth3'>Section&nbsp;3.1.3<span> (</span><span class='info'>Proxy Service Authentication</span><span>)</span></a>.
                
</li>
<li>
                  Positive test for different settings of SIP-user-authorization-type.
                  Using the same scheme as previous positive test, verify that 
                  registration can succeed with authorizations types
                  
<ul class="text">
<li>REGISTRATION
</li>
<li>REGISTRATION_AND_CAPABILITIES
</li>
</ul>
                  Additional configuration on vendor B maybe required to perform 
                  the test.
                
</li>
<li>
                  Positive test for registering an already registered user. Verify
                  that user1@realmB can properly re-register with vendor D and that
                  the re-registration triggers a SAR/SAA exchange between D and B
                  to update server assignments. Verify that the MAR/MAA exchanges 
                  are skipped. The message flow should be as follows.
                  <br /><hr class="insert" />
<a name="fig-app-sip-02"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +--------+           +--------+         +--------+
                |  SIP   |           |Diameter|         |  SIP   |
                |server 1|           | server |         |server 2|
                |Vendor A|           |Vendor B|         |Vendor D|
                +--------+           +--------+         +--------+
                    |                   |                   |
1. SIP REGISTER      |                   |                   |
--------------------&gt;|     2. UAR        |                   |
                    |------------------&gt;|                   |
                    |     3. UAA        |                   |
                    |&lt;------------------|                   |
                    |         4. SIP REGISTER               |
                    |--------------------------------------&gt;|
                    |                   |      5. SAR       |
                    |                   |&lt;------------------|
                    |                   |      6. SAA       |
                    |                   |------------------&gt;|
                    |         7. SIP 200 (OK)               |
8. SIP 200 (OK)      |&lt;--------------------------------------|
&lt;--------------------|                   |                   |
                    |                   |                   |

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Message Flow for Registration of Currently Registered User&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                  Note that the message flow is synonymous to Figure A.4.2.1 of
                  <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. Therefore, the test scenario should
                  apply to <a class='info' href='#sec-app-3gpp-cx'>Section&nbsp;4.1<span> (</span><span class='info'>Diameter Cx</span><span>)</span></a> as well.
                
</li>
<li>
                  Positive test for user initiated deregistration. Verify that 
                  user1@realmB can properly de-register with vendor D and that
                  the de-registration triggers a SAR/SAA exchange between D and
                  B to remove server assignments. Must conform with Section 10.2.2
                  of <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. Soft state termination also apply
                  as described in <a class='info' href='#sec-app-sip-st'>Section&nbsp;3.1.5<span> (</span><span class='info'>Soft Termination</span><span>)</span></a>.
                  The message flow should be as follows.
                  <br /><hr class="insert" />
<a name="fig-app-sip-03"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +--------+           +--------+         +--------+
                |  SIP   |           |Diameter|         |  SIP   |
                |server 1|           | server |         |server 2|
                |Vendor A|           |Vendor B|         |Vendor D|
                +--------+           +--------+         +--------+
                    |                   |                   |
1. SIP REGISTER      |                   |                   |
--------------------&gt;|     2. UAR        |                   |
                    |------------------&gt;|                   |
                    |     3. UAA        |                   |
                    |&lt;------------------|                   |
                    |         4. SIP REGISTER               |
                    |--------------------------------------&gt;|
                    |                   |      5. SAR       |
                    |                   |&lt;------------------|
                    |                   |      6. SAA       |
                    |                   |------------------&gt;|
                    |         7. SIP 200 (OK)               |
8. SIP 200 (OK)      |&lt;--------------------------------------|
&lt;--------------------|                   |                   |
                    |                   |                   |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Message Flow for User Initiated De-registration&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                  Note that the message flow is synonymous to Figure A.4.3.1 of
                  <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. Therefore, the test scenario should
                  apply to <a class='info' href='#sec-app-3gpp-cx'>Section&nbsp;4.1<span> (</span><span class='info'>Diameter Cx</span><span>)</span></a> as well.
                
</li>
<li>
                  Positive test for Diameter server initiated de-registration
                  using registration timeout. Verify that the server assignments
                  are remove from vendor D when vendor B decides to end the 
                  registration. De-registration on vendor B can be simulated by
                  configuring a registration timeout for user1@realmB. Verify that
                  SAR/SAA exchanges are triggered by this event. The message flow
                  should be as follows.
                  <br /><hr class="insert" />
<a name="fig-app-sip-04"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    +--------+           +--------+         +--------+
    |  SIP   |           |Diameter|         |  SIP   |
    |server 1|           | server |         |server 2|
    |Vendor A|           |Vendor B|         |Vendor D|
    +--------+           +--------+         +--------+
        |                   |                   |
1. Timer Expires            |           1. Timer Expires
        |                   |                   |
        |                   |      2. SAR       |
        |                   |&lt;------------------|
        |                   |      3. SAA       |
        |                   |------------------&gt;|
        |                   |                   |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Message Flow for Registration Timeouts&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                  Note that the message flow is synonymous to Figure A.4.4.1 of
                  <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. Therefore, the test scenario should
                  apply to <a class='info' href='#sec-app-3gpp-cx'>Section&nbsp;4.1<span> (</span><span class='info'>Diameter Cx</span><span>)</span></a> as well.
                
</li>
<li>
                  Positive test for Diameter server initiated de-registration using
                  administrative means. Verify that the any soft states are removed 
                  from vendor B. Administrative de-registration is implementation 
                  specific and is left up to the tester to simulate. Note that soft 
                  state termination also applies as described in 
                  <a class='info' href='#sec-app-sip-st'>Section&nbsp;3.1.5<span> (</span><span class='info'>Soft Termination</span><span>)</span></a>. The message flow should be as 
                  follows.
                  <br /><hr class="insert" />
<a name="fig-app-sip-05"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +--------+           +--------+         +--------+
                |  SIP   |           |Diameter|         |  SIP   |
                |server 1|           | server |         |server 2|
                |Vendor A|           |Vendor B|         |Vendor D|
                +--------+           +--------+         +--------+
                    |                   |                   |
                    |                   |      1. RTR       |
                    |                   |------------------&gt;|
                    |  2. De-REGISTER   |                   |
                    |&lt;--------------------------------------|
    3. Inform       |                   |                   |
&lt;--------------------|  4. SIP 200 (0K)  |                   |
  5a. SIP 200 (0K)  |--------------------------------------&gt;|
--------------------&gt;|                   |      5. RTA       |
                    |                   |&lt;------------------|
                    |                   |                   |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Message Flow for Administrative De-registration&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                  Note that the message flow is synonymous to Figure A.4.4.2 of
                  <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. Therefore, the test scenario should
                  apply to <a class='info' href='#sec-app-3gpp-cx'>Section&nbsp;4.1<span> (</span><span class='info'>Diameter Cx</span><span>)</span></a> as well.
                
</li>
<li>
                  Negative test for auth when user-name avp is required by the 
                  Diameter server. Verify that vendor A sends a SIP unauthorized
                  response back to UA1 if MAA is set to DIAMETER_USER_NAME_REQUIRED.
                  The result of the authentication/authorization may or may not be
                  successful in this context. Vendor B can be configured to require
                  a user-name in the UAR. This may not be applicable to all
                  implementations.
                
</li>
<li>
                  Negative test for failed authorization. Verify the behavior of
                  vendor A and B when the criteria for the following errors are 
                  meet. Verify that vendor A can terminate the call with UA1.
                  Note that for Diameter Cx, these codes may be present in the 
                  experimental-result-code avp instead.
                  
<ul class="text">
<li>
                      DIAMETER_ERROR_USER_UNKNOWN. Simulation requires users 
                      identity to be removed from vendor B.
                    
</li>
<li>
                      DIAMETER_ERROR_IDENTITIES_DONT_MATCH. Simulation may 
                      require mis-configuration.
                    
</li>
<li>
                      DIAMETER_AUTHORIZATION_REJECTED. Simulate restrictions 
                      to user access in the network.
                    
</li>
<li>
                      DIAMETER_ERROR_AUTH_SCHEME_NOT_SUPPORTED.
                    
</li>
</ul>
                
</li>
</ul><p>              
            
</p>
<a name="sec-app-sip-auth2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
User Profile Update</h3>

<p>
              Implementations must conform to Section 6.8 of 
              <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. These test should
              be performed as a consequence of <a class='info' href='#sec-app-sip-auth'>Section&nbsp;3.1.1<span> (</span><span class='info'>Authentication</span><span>)</span></a>.
              Updating of user profile in the Diameter server is out of scope 
              and it is left to the tester to perform. The test scenario is also
              applicable to Section 6.6 of <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> and synonymous
              to the message flow described in Figure A.4.7.1 of the same document. 
              </p>
<blockquote class="text">
<p>
                  Positive test for updating user profile. Verify that a change
                  in the profile of user1@realmB can trigger a PPR/PPA exchange
                  between vendor B and D.
                
</p>
<p>
                  Negative test for failed authorization. Verify the behavior of
                  vendor B and D when the criteria for the following errors are 
                  meet. 
                  </p>
<ul class="text">
<li>
                      DIAMETER_ERROR_TOO_MUCH_DATA. Simulation may
                      require some mis-configuration.
                    
</li>
<li>
                      DIAMETER_ERROR_NOT_SUPPORTED_USER_DATA.
                    
</li>
<li>
                      DIAMETER_UNABLE_TO_COMPLY.
                    
</li>
</ul>
                

</blockquote><p>
            
</p>
<a name="sec-app-sip-auth3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.3"></a><h3>3.1.3.&nbsp;
Proxy Service Authentication</h3>

<p>
              Implementations must conform to Section 6.5 and 6.6 of 
              <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>.
              The test topology in <a class='info' href='#fig-app-sip-01'>Figure&nbsp;1<span> (</span><span class='info'>Diameter SIP Test Topology</span><span>)</span></a> can be used 
              to perform these test. Vendor A can be configured as the outbound 
              proxy for UA1 and vendor D for UA2. Note that the tests performed 
              on vendor A is symmetrical to vendor D. For simplicity, only vendor 
              A is noted here. These test can also be performed as a consequence
              of positive tests in <a class='info' href='#sec-app-sip-auth'>Section&nbsp;3.1.1<span> (</span><span class='info'>Authentication</span><span>)</span></a>. The test
              scenarios below use a call by user1@realmB to trigger authorization
              of SIP INVITE request.
              </p>
<blockquote class="text">
<p>
                  Positive test for proxy service authorization with nonces 
                  generated by the Diameter server. Verify that at the least, 
                  user1@realmB can make a call to user2@realmA with SIP requests
                  from vendor A authorized by vendor B. Verify that the SIP INVITEs
                  triggers a MAR/MAA exchange between vendor A and B and that 
                  user credentials properly validated by vendor B. Note that 
                  vendor D should route SIP request normally to simplify
                  the test. The message flow should follow Figure 4 of 
                  <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>.                  
                
</p>
<p>
                  Positive test for proxy service authorization with nonces
                  generated by the outbound SIP proxy. Verify that at the least,
                  user1@realmB can make a call to user2@realmA and that the user
                  credentials are validated by vendor B only after the challenge
                  is validated by vendor A. Verify that a valid challenge initiates
                  a MAR/MAA exchange between vendor A and B. Note that vendor D 
                  should route SIP request normally to simplify the test. The 
                  message flow should follow Figure 5 of 
                  <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>.                  
                
</p>
<p>
                  Negative test for authorizing proxy service when user-name avp 
                  is missing. Verify that vendor A sends a SIP unauthorized or SIP
                  authorization required messages back to UA1 if MAA is set to 
                  DIAMETER_USER_NAME_REQUIRED. The result of the authorization 
                  may or may not be successful in this context. Vendor B can be 
                  configured to require a user-name in the UAR. This may not be 
                  applicable to all implementations.
                
</p>
</blockquote><p>
            
</p>
<a name="sec-app-sip-ls"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4"></a><h3>3.1.4.&nbsp;
Location Service</h3>

<p>
              Implementations must conform to Section 6.7 and 6.10 of 
              <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a> and 
              Section 6.1.4 of <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. All test
              entities should be present to perform this test. The 
              message flow being tested is Figure 8. of 
              <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. This is
              also synonymous to Section A.4.5 of 
              <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. The test topology in 
              <a class='info' href='#fig-app-sip-01'>Figure&nbsp;1<span> (</span><span class='info'>Diameter SIP Test Topology</span><span>)</span></a> can be used to perform 
              these test. The location service test can be triggered by
              initiating a call to user2@realmA from UA1. The presence 
              of SIP and/or SIPS URI for user2@realmA in vendor B can 
              be done via SIP registration in
              <a class='info' href='#sec-app-sip-auth'>Section&nbsp;3.1.1<span> (</span><span class='info'>Authentication</span><span>)</span></a> or some other means. 
              The test scenarios below assumes vendor D is the 
              allocated/assigned SIP server for user2@realmA. 
              </p>
<ul class="text">
<li>
                  Positive test for location query using Diameter server. 
                  Vendor B is pre-provision in vendor A as location server.
                  for realmA.  Verify that a call (SIP INVITE) from UA1
                  to user2@realmA triggers vendor A to send an LIR towards
                  vendor B. Verify that vendor B forwards the INVITE to 
                  vendor D upon receipt of LIA.
                
</li>
<li>
                  Positive test for location query using Diameter SL. 
                  Vendor C is pre-provisioned in vendor A as the location 
                  server. Verify that the INVITE from UA1 to user2@realmA
                  triggers vendor A to send an LIR towards vendor C. Verify
                  LIA redirection from vendor C causes an LIR to be forwarded
                  to vendor B.
                
</li>
<li>
                  Negative test for failed authorization. Verify the behavior of
                  vendor B and D when the criteria for the following errors are 
                  meet. 
                  
<ul class="text">
<li>
                      DIAMETER_ERROR_USER_UNKNOWN. Simulation may require
                      mis-configuration.
                    
</li>
<li>
                      DIAMETER_UNABLE_TO_COMPLY. Simulation may require
                      mis-configuration.
                    
</li>
<li>
                      DIAMETER_ERROR_IDENTITY_NOT_REGISTERED. 
                    
</li>
</ul>
                
</li>
</ul><p>
            
</p>
<a name="sec-app-sip-st"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.5"></a><h3>3.1.5.&nbsp;
Soft Termination</h3>

<p>
              Implementations must conform to Section 6.9 of 
              <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a> and 6.5.2.2 of
              <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a>. These test should be performed as a
              consequence of <a class='info' href='#sec-app-sip-auth'>Section&nbsp;3.1.1<span> (</span><span class='info'>Authentication</span><span>)</span></a>.
              In the enumerated test scenarios, vendor A request removal of
              user bindings in vendor B. This maybe a consequence of user1@reamlB
              logging off on UA1 (Section 10.2.2 in <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>) or
              an expiration of usage timer in vendor B. It is left to the 
              implementation to configure such scenario.
              </p>
<ul class="text">
<li>
                  Positive test for soft termination when session is stateless
                  and Diameter client initiates termination. Verify that at the
                  least, vendor D can send a SAR to vendor B when user1@realmB
                  de-registers. Note the appropriate result-codes are enumerated
                  in Section 6.9 of 
                  <a class='info' href='#I-D.ietf-aaa-diameter-sip-app'>[I&#8209;D.ietf&#8209;aaa&#8209;diameter&#8209;sip&#8209;app]<span> (</span><span class='info'>Garcia-Martin, M., &ldquo;Diameter Session Initiation Protocol (SIP) Application,&rdquo; April&nbsp;2006.</span><span>)</span></a>. This scenario
                  is synonymous to <a class='info' href='#fig-app-sip-03'>Figure&nbsp;3<span> (</span><span class='info'>Message Flow for User Initiated De-registration</span><span>)</span></a>.
                
</li>
<li>
                  Positive test for soft termination when session is stateless
                  and Diameter server initiates termination. Verify that at the
                  least, vendor B can send an RTR to vendor D to AOR(s) for
                  user1@realmB. Testers can also simulate multiple AORs for 
                  the user and verify that RTR can selectively remove specific
                  AORs. It is left to the testers to simulate a SIP-deregistration-reason
                  from the Diameter server. This scenario is synonymous to 
                  <a class='info' href='#fig-app-sip-05'>Figure&nbsp;5<span> (</span><span class='info'>Message Flow for Administrative De-registration</span><span>)</span></a>.
                
</li>
<li>
                  Positive test for soft termination when session is stateful
                  and Diameter client initiates termination. Verify that at the 
                  least, vendor D can send an STR to vendor B when user1@realmB
                  de-registers. Verify application id value carried by the STR/STA
                  message is that of the target application.
                
</li>
<li>
                  Positive test for soft termination when session is stateful
                  and Diameter server initiates termination. Verify that at the 
                  least, vendor B can send an ASR to vendor B. Verify application
                  id value carried by the STR/STA message is that of the target
                  application. It is left to the testers to simulate session 
                  termination on the Diameter server, i.e., session-timeout or
                  registration timeout.
                
</li>
</ul><p>
            
</p>
<a name="sec-app-3gpp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
3GPP Interface Test Suite</h3>

<p>
          The test suite in this section only covers the following IMS
          interfaces. Future revisions will attempt to cover the remaining
          interfaces.
          </p>
<ul class="text">
<li>
              Diameter Cx, <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> and <a class='info' href='#TS29.229'>[TS29.229]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>.
            
</li>
<li>
              Diameter Sh, <a class='info' href='#TS29.328'>[TS29.328]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; .</span><span>)</span></a> and <a class='info' href='#TS29.329'>[TS29.329]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>.
            
</li>
<li>
              Diameter Rf, <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>.
            
</li>
</ul><p>
          Because of the complexity in IMS deployment, a lot of assumptions
          have been made in terms of the test topology. Since recreating an 
          IMS network is not realistic, only entities implementing Diameter 
          applications will be involved in these test cases. Peripheral
          entities that instigate a test event should be simulated.
        
</p>
<a name="sec-app-3gpp-cx"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Diameter Cx</h3>

<p>
            Implementations must conform to <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> and
            <a class='info' href='#TS29.229'>[TS29.229]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>. Since Diameter Cx describes the same 
            application as Diameter SIP, the test topology and scenarios in
            <a class='info' href='#sec-app-sip'>Section&nbsp;3<span> (</span><span class='info'>Diameter SIP Test Suite</span><span>)</span></a> is applicable. For brevity, this 
            section will only provide addendums to the existing test suites 
            in <a class='info' href='#sec-app-sip'>Section&nbsp;3<span> (</span><span class='info'>Diameter SIP Test Suite</span><span>)</span></a> as it applies to Diameter Cx.
            Authentication schemes present in the SIP tests may or may not
            be present for Cx testing. The topology in 
            <a class='info' href='#fig-app-sip-01'>Figure&nbsp;1<span> (</span><span class='info'>Diameter SIP Test Topology</span><span>)</span></a> will be used with the following
            mappings.
            <br /><hr class="insert" />
<a name="fig-app-3gpp-cx-01"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    Diameter Cx       Test Topology              Vendor
      Node             Equivalent            Assignments
  ----------------+---------------------+-----------------------

    I-CSCF           SIP Server 1         Vendor A, I-CSCF
                                          on Home Network

    HSS              Diameter Server      Vendor B, HSS
                                          on Home Network

    S-CSCF           SIP Server 2         Vendor D, S-CSCF
                                          on Home Network

    P-CSCF           Optional             Use UA1 to simulate
                                          P-CSCF

    AS               Optional             Implementation specific,
                                          maybe simulated

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: SIP Test Topology Mapping&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            All test entities can share the same realm (Home Network).
            The SIP proxy P-CSCF may or may not be present for testing
            the Cx interface. If it is not available, tests for registration
            and de-registration described in Section A.4.2 and A.4.3 of
            <a class='info' href='#TS29.228'>[TS29.228]<span> (</span><span class='info'>3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; .</span><span>)</span></a> can use UA1 to simulate a P-CSCF. 
            S-CSCF functions that rely on other entities such as AS may
            also be simulated when service initiated test needs to be 
            performed. An AS maybe present to facilitate this though it 
            is left up to the implementation to provide an AS and verify
            its configuration.
            
<a name="sec-app-3gpp-cx-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Required</h3>

<p>
                The following are addendums to <a class='info' href='#sec-app-sip'>Section&nbsp;3<span> (</span><span class='info'>Diameter SIP Test Suite</span><span>)</span></a>
                for testing Diameter Cx.
                </p>
<ul class="text">
<li>
                    Positive test for de-registration initiated by S-CSCF.
                    Verify that a de-registration initiated by S-CSCF (vendor C)
                    triggers the removal of server assignments in vendor B.
                    Verify SAR/SAA exchange occurs. Message flow can be as
                    follows.
                    <br /><hr class="insert" />
<a name="fig-app-3gpp-cx-02"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                          +--------+         +--------+
                          |Diameter|         |  SIP   |
                          | server |         |server 2|
                          |Vendor B|         |Vendor D|
                          +--------+         +--------+
                            |                   |
                            |   1. Simulated Service De-registration
            2. De-register   |                   |
          &lt;--------------------------------------|
                            |                   |
            3. SIP 200 (OK)  |                   |
          -------------------------------------&gt;|
                            |      4. SAR       |
                            |&lt;------------------|
                            |      5. SAA       |
                            |------------------&gt;|
                            |                   |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Message Flow for Service Initiated De-registration&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                  
</li>
<li>
                    Positive test for session initiation to a non-registered user.
                    Verify that a call made by UA1 can initiate a server assignment
                    by vendor B for that call. Verify that the SIP INVITE also
                    triggers a location query (LIR/LIA exchange) with vendor B.
                    Message flow can be as follows.
                    <br /><hr class="insert" />
<a name="fig-app-3gpp-cx-03"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +--------+           +--------+         +--------+
                |  SIP   |           |Diameter|         |  SIP   |
                |server 1|           | server |         |server 2|
                |Vendor A|           |Vendor B|         |Vendor D|
                +--------+           +--------+         +--------+
                    |                   |                   |
1. SIP INVITE        |                   |                   |
--------------------&gt;|     2. LIR        |                   |
                    |------------------&gt;|                   |
                    |     3. LIA        |                   |
                    |&lt;------------------|                   |
                    |                   |                   |
                    |  4. INVITE        |                   |
                    |--------------------------------------&gt;|
                    |                   |      5. SAR       |
                    |                   |&lt;------------------|
                    |                   |      6. SAA       |
                    |                   |------------------&gt;|
                    |                   |                   |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Message Flow for Session Initiation to a Non-registered User&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                    Normally, server selection is performed during this
                    process. Testers can verify if vendor A correctly
                    determine vendor D as the assigned SIP server. 
                    Additional service control functions may also need
                    to be performed by vendor D. Though those would be
                    out of scope of this document.
                  
</li>
</ul><p>
              
</p>
          

<a name="sec-app-3gpp-sh"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Diameter Sh</h3>

<p>
            Implementations must conform to <a class='info' href='#TS29.328'>[TS29.328]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; .</span><span>)</span></a> and
            <a class='info' href='#TS29.329'>[TS29.329]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface based on the Diameter protocol; Protocol details,&rdquo; .</span><span>)</span></a>. The test topology for Diameter Sh
            is <a class='info' href='#fig-app-3gpp-sh-01'>Figure&nbsp;9<span> (</span><span class='info'>Diameter Sh Test Topology</span><span>)</span></a>. Because AS functionality
            is implementation and service specific, it is left to the testers
            to verify configuration of the provided service. UA registration
            with AS services are also left up to the tester to verify. Some
            interaction with the test topology for 
            <a class='info' href='#sec-app-3gpp-cx'>Section&nbsp;4.1<span> (</span><span class='info'>Diameter Cx</span><span>)</span></a> maybe required in certain test
            scenarios. 
            <br /><hr class="insert" />
<a name="fig-app-3gpp-sh-01"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                      Home Network

                        +--------+           +--------+
                        |Diameter|           |   AS   |
  IMS Network &lt;---Cx---&gt;| server |&lt;---------&gt;|Vendor E|
              |        |Vendor B|  UDR/UDA  |        |
              |        +--------+  PUR/PUA  +--------+
              |                    SNR/SNA      |
              |                    PNR/PNA      |
              |                                 |
              -------SIP to S-CSCF and UA1-------

  Legend:
          IMS Network     - Test topology for Diameter SIP.
                            Network details are not shown
                            for brevity.

          Diameter server - Vendor B acting HSS for Home Network.
                            Part of the IMS Network.

          AS              - Vendor E acting as AS
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Diameter Sh Test Topology&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            The test topology shown above is an addendum to
            <a class='info' href='#fig-app-sip-01'>Figure&nbsp;1<span> (</span><span class='info'>Diameter SIP Test Topology</span><span>)</span></a>. The AS uses Diameter Sh
            with the HSS and SIP with S-CSCF and UA1 in the IMS network.
            For Diameter Sh, the message flow being tested is defined in 
            Section B.1 of <a class='info' href='#TS29.328'>[TS29.328]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; .</span><span>)</span></a>. It is left to the
            testers to verify that the AS is properly configured in the
            IMS network.            
            
<a name="sec-app-3gpp-sh-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Required</h3>

<p>
                The following are test scenarios to exercise Diameter
                Sh interface.
                </p>
<ul class="text">
<li>
                    Positive test for data handling. Implementations must conform
                    to Section 6.1.1 and 6.1.2 of <a class='info' href='#TS29.328'>[TS29.328]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; .</span><span>)</span></a>. Verify that 
                    vendor E is capable of storing and retrieving service related
                    data into vendor B via PUR/PUA and UDR/UDA. If user1 in UA1
                    can register for service to the vendor E, verify that
                    vendor E is able to store service related data into 
                    vendor B. If user1 can then register to vendor D in the
                    IMS network and trigger a third-party registration to
                    vendor E, verify that vendor E is able pull service related
                    data from vendor B. Verify correctness of the following
                    identity-set when reading data from vendor B.
                    
<ul class="text">
<li>IMPLICIT_IDENTITIES
</li>
<li>REGISTERED_IDENTITIES
</li>
<li>ALL_IDENTITIES
</li>
</ul>
                  
</li>
<li>
                    Positive test for subscription/notification. Implementations 
                    must conform to Section 6.1.3 and 6.1.4 of <a class='info' href='#TS29.328'>[TS29.328]<span> (</span><span class='info'>3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; .</span><span>)</span></a>. 
                    Verify that vendor E can successfully subscribe to 
                    notification in case of data changes in vendor B. This 
                    test should be performed after the previous positive test.
                    Simulation of data changes in vendor B is implementation
                    specific. Verify that vendor B sends a PNR to E when 
                    simulated changes occur.
                  
</li>
<li>
                    Negative test for data update. Verify behavior of both
                    vendor B and E when the criteria for following experimental
                    result codes are meet.
                    
<ul class="text">
<li>
                        DIAMETER_ERROR_USER_DATA_CANNOT_BE_MODIFIED. Simulate
                        update restrictions for vendor E in vendor B.
                      
</li>
<li>
                        DIAMETER_ERROR_USER_UNKNOWN. 
                      
</li>
<li>
                        DIAMETER_ERROR_OPERATION_NOT_ALLOWED. Simulate 
                        restrictions on vendor B. Configuration of AS permission
                        list maybe necessary.
                      
</li>
<li>
                        DIAMETER_PRIOR_UPDATE_IN_PROGRESS.
                      
</li>
<li>
                        DIAMETER_ERROR_TRANSPARENT_DATA_OUT_OF_SYNC. Simulation
                        may require some invalid configuration.
                      
</li>
<li>
                        DIAMETER_ERROR_TOO_MUCH_DATA. Simulation may
                        require some invalid configuration.
                      
</li>
</ul>
                  
</li>
<li>
                    Negative test for data read and notification subscriptions. 
                    Verify behavior of both vendor B and E when the criteria for
                    following experimental result codes are meet during data pull
                    or subscription.
                    
<ul class="text">
<li>
                        DIAMETER_ERROR_USER_DATA_CANNOT_BE_READ. Simulate
                        read restrictions for vendor E in vendor B.
                      
</li>
<li>
                        DIAMETER_ERROR_USER_UNKNOWN. 
                      
</li>
<li>
                        DIAMETER_ERROR_OPERATION_NOT_ALLOWED. Simulate 
                        restrictions on vendor B. Configuration of AS permission
                        list maybe necessary.
                      
</li>
</ul>
                  
</li>
</ul><p>
              
</p>
          

<a name="sec-app-3gpp-rf"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Diameter Rf</h3>

<p>
            Implementations must conform to <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>.
            The test topology for Diameter Rf is <a class='info' href='#fig-app-3gpp-rf-01'>Figure&nbsp;10<span> (</span><span class='info'>Diameter Rf Test Topology</span><span>)</span></a>.            
            The test cases in this section do not attempt to cover all
            accounting scenarios that are possible in an IMS network. It only 
            exercise accounting functions for test entities listed in 
            <a class='info' href='#fig-app-3gpp-cx-01'>Figure&nbsp;6<span> (</span><span class='info'>SIP Test Topology Mapping</span><span>)</span></a>. Because the test topology 
            only describes a home network, the Rf interface is limited to
            S-CSCF and I-CSCF accounting. Record co-relation with a visited
            network is assumed not to be done. The CDF entity should be
            reachable to the SIP servers in <a class='info' href='#fig-app-sip-01'>Figure&nbsp;1<span> (</span><span class='info'>Diameter SIP Test Topology</span><span>)</span></a> 
            and to the AS in <a class='info' href='#fig-app-3gpp-sh-01'>Figure&nbsp;9<span> (</span><span class='info'>Diameter Sh Test Topology</span><span>)</span></a> if an AS is
            used. The test scenarios also makes a lot of assumptions in testing 
            non-Diameter related Rf requirements such as the CDR formats, operator 
            configuration of the CDF, SIP based signaling or operator based 
            decision on when to use offline-charging etc. Since there can be
            a multitude of configuration options, verification of actual billing
            schemes used and its accuracy is left to the testers.
            <br /><hr class="insert" />
<a name="fig-app-3gpp-rf-01"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  IMS Network
                                          +----------+
                                          |          |
      &lt;----ACR/ACA to SIP Server 1 -----&gt;|   CDF    |
                                          | Vendor F |
      &lt;----ACR/ACA to SIP Server 2 -----&gt;|          |
                                          +----------+

  Legend:
          IMS Network     - Test topology for Diameter SIP and/or
                            Diameter Sh. Network details are not
                            shown for brevity.

          CDF             - Vendor F acting CDF for Home Network.
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: Diameter Rf Test Topology&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

            
<a name="sec-app-3gpp-rf-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Required</h3>

<p>
                The following are test scenarios to exercise Diameter
                Rf interface.
                </p>
<ul class="text">
<li>
                    Positive test for SIP session establishment. Implementations 
                    must conform to Table 5.2.1.1 of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>. 
                    Verify that vendor A or D generates a START_RECORD on positive 
                    acknowledgment of SIP INVITE. The SIP server involved
                    depends on the UA location. The test could be performed
                    as part of 
                    <a class='info' href='#sec-app-sip-auth3'>Section&nbsp;3.1.3<span> (</span><span class='info'>Proxy Service Authentication</span><span>)</span></a>. Note that only the
                    mandatory triggers are recommended to be tested. The 
                    remaining triggers specified in Table 5.2.1.1 of 
                    <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a> is left up to the test pairs.
                  
</li>
<li>
                    Positive test for SIP session updates. Implementations must conform
                    to Table 5.2.1.1 of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>. Verify that
                    vendor A or D generates an INTERIM_RECORD on a SIP re-INVITE
                    or UPDATE for an existing SIP session. The test can be
                    performed in sequence with the previous positive test.
                  
</li>
<li>
                    Positive test for session-unrelated procedures. Implementations 
                    must conform to Section 5.2.2.1.5 of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>. 
                    Verify that vendor A or D generates EVENT_RECORD on a SIP 
                    SUBSCRIBE signal. The test can be performed in sequence with 
                    the previous positive test.
                  
</li>
<li>
                    Positive test for SIP session termination. Implementations 
                    must conform to Table 5.2.1.1 of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>. 
                    Verify that vendor D generates STOP_RECORD on a SIP BYE signal. 
                    The test can be performed in sequence with the previous positive
                    test.
                  
</li>
<li>
                    Negative test for unsuccessful SIP session establishment.
                    Verify that if a SIP session establishment fails, that
                    vendor A or D generates an EVENT_RECORD. The SIP server
                    involved depends on the location of the UA initiating 
                    the session.
                  
</li>
<li>
                    Negative test for error cases. Verify that vendor A and/or
                    D follows Section 5.2.2.2 of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>.
                    The error cases in that text are general and may overlap
                    with error cases in the Diameter Base Protocol Test Suite
                    document.
                  
</li>
</ul><p>
              
</p>
            
<a name="sec-app-3gpp-rf-opt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Optional</h3>

<p>
                The following are optional test scenarios to exercise Diameter
                Rf interface. Note that details of the tests are skipped for
                brevity. 
                </p>
<ul class="text">
<li>
                    Positive test for multi-party call. Assuming a new UA is
                    introduced in the home network and S-CSCF is provided by
                    vendor D, the call flow should follow Section 5.2.2.1.10
                    of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>.                    
                  
</li>
<li>
                    Positive test for AS related procedures. If an AS is used,
                    verify that vendor E can generate EVENT_RECORDs for services
                    rendered to the UA. Such services are implementation specific.
                    However, examples of such service is described in Section 
                    5.2.2.1.11 of <a class='info' href='#TS32.260'>[TS32.260]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; .</span><span>)</span></a>.
                  
</li>
</ul><p>                
              
</p>
          

<a name="sec-app-eap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Diameter EAP Test Suite</h3>

<p>
          Access device and AAA servers that support Diameter EAP Application
          must conform to <a class='info' href='#RFC4072'>[RFC4072]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. A typical test for network
          access authentication using Diameter EAP is  shown in 
          <a class='info' href='#fig-app-eap-01'>Figure&nbsp;11<span> (</span><span class='info'>Diameter EAP</span><span>)</span></a>. The User has an EAP Client to be authenticated
          for network access. The test cases only cover the NAS and Auth. Servers 
          interoperability. To perform these tests, one must choose an EAP method.
          It is recommended to use an authentication method which derive keying
          material to test key transport between Auth. Server and NAS. As an
          example, EAP-TLS <a class='info' href='#RFC2716'>[RFC2716]<span> (</span><span class='info'>Aboba, B. and D. Simon, &ldquo;PPP EAP TLS Authentication Protocol,&rdquo; October&nbsp;1999.</span><span>)</span></a> can be used.
        
</p><br /><hr class="insert" />
<a name="fig-app-eap-01"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+--------+     +--------+     +---------------+
| User   |&lt;---&gt;|  NAS   |&lt;---&gt;| Auth Server 1 |
|        |     |Vendor A|     |  Vendor B     |
+--------+     +--------+     +---------------+
                                    ^
                                    |
                                    |
                                    v
                              +---------------+
                              | Auth Server 2 |
                              | Vendor C      |
                              +---------------+



Legend:
        User
        NAS           - Vendor A Diam EAP client
        Auth Server 1 - Vendor B Diam EAP server
        Auth Server 2 - Vendor C Diam EAP server
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: Diameter EAP&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="sec-app-eap-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Required</h3>

<p>
            Implementation must conform to section 2 of 
            <a class='info' href='#RFC4072'>[RFC4072]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. NAS and Auth. Servers advertises 
            Diameter EAP support in their CER/CEA exchange.
          
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
Non-Roaming case</h3>

<p>
              In this test, User, NAS and Auth. Server 1 belongs to the same
              realm.
            
</p>
<ul class="text">
<li>
                Verify that all Diameter messages for a particular user contains
                the same Session-Id AVP.
              
</li>
<li>
                Positive test for EAP initiation. Verify that the Auth. server
                initiates an EAP session while receiving either a DER containing an
                EAP-Payload AVP Empty (signifying an EAP-Start) or an EAP-Payload
                AVP containing an EAP-Response of Type Identity (cf. section 2.2 of
                <a class='info' href='#RFC4072'>[RFC4072]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>).
              
</li>
<li>
                Positive test for User-Name AVP. Verify that the User-Name AVP
                sent in DER message by the NAS contains the value provided by the
                User in the EAP exchange between User and NAS.
              
</li>
<li>
                Positive test for user registration. Verify that the Auth. server
                1 can authenticate and authorize User given a proper
                configuration (e.g. by using EAP-TLS method between the User and the
                Auth. Server). Verify that the AAA message flows is correct (cf.
                section 2.2 of <a class='info' href='#RFC4072'>[RFC4072]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>).
              
</li>
<li>
                Positive test for Key transport and configuration. If the
                EAP authentication method derives keys, verify that the Auth. Server
                correctly provide keying material to the NAS and that these keys are
                correctly used between User and NAS.
              
</li>
<li>
                Positive test for session termination: User Disconnection. Verify that
                if the User disconnects for the NAS, the NAS sends a STR message to the 
                Auth. Server. Verify that the Auth. Server releases all state concerning
                this User.
              
</li>
<li>
                Positive test for session termination: Auth-lifetime expiration.
                Verify that if the auth-lifetime expires, the NAS send a STR to the
                Auth. server. Verify that the Auth. Server releases all state
                concerning this User.
              
</li>
<li>
                Negative test for authentication. Verify that the Auth. Server
                sends a DEA message containing a DIAMETER_AUTHENTICATION_REJECTED
                result-code to the NAS if the User is not correctly authenticated.
              
</li>
</ul>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
Roaming scenario</h3>

<p>
              In this scenario, User and Auth. Server 2 belongs to realmB while
              NAS and Auth. Server 1 belongs to realm A. All tests described in
              the Non-Roaming scenario must work. As we are in roaming scenario, 
              the following two tests should also be performed.
            
</p>
<ul class="text">
<li>
                Positive test for Diameter EAP Direct Routing. Verify that if
                NAS is properly configured, it can directly send Diameter EAP
                messages to Auth. Server 2. 
              
</li>
<li>
                Positive test for Diameter EAP Proxy Routing. Verify that if
                NAS and Auth. Servers are correctly configured, Diameter
                EAP messages are exchanged between NAS and Auth. Server 2 through
                Auth. Server 1.
              
</li>
</ul>
<a name="sec-app-eap-optional"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Optional Authorization/Accounting Tests</h3>

<ul class="text">
<li>
              Positive test for Authorization AVPs. Verify that if some
              authorizations are requested, the DEA containing the DIAMETER_SUCCESS in the
              Result-Code AVP also contains appropriate Authorization AVPs (cf. section 5
              of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>).
            
</li>
<li>
              Positive test for Accounting. Verify that NAS initiates Accounting
              if authentication is successful and finishes it while terminating
              the session. 
            
</li>
<li>
              Positive test for re-authentication. Verify that the Auth. Server
              can reauthenticate the User via the NAS.
            
</li>
<li>
              Positive test for Redirection. Verify that the Redirect Scenario
              described in section 2.3.2 of <a class='info' href='#RFC4072'>[RFC4072]<span> (</span><span class='info'>Eronen, P., Hiller, T., and G. Zorn, &ldquo;Diameter Extensible Authentication Protocol (EAP) Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> is
              supported.
            
</li>
</ul>
<a name="sec-app-nasreq"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Diameter NASREQ Test Suite</h3>

<p>
          Access device that supports Diameter NASREQ extension must conform
          to <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. Typical test topology for single domain
          authentication shown in <a class='info' href='#fig-app-nasreq-01'>Figure&nbsp;12<span> (</span><span class='info'>Diameter NASREQ Test Topology</span><span>)</span></a>. The User
          entity typically  employs PPP to access the NAS and is normally implementation
          dependent. Since the test cases covers only NAS and Auth Server interoperability, 
          it is left to the tester to verify correctness of the access method between 
          User and NAS and that this method is able to trigger creation of a NASREQ 
          client session in the NAS.          
          <br /><hr class="insert" />
<a name="fig-app-nasreq-01"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    +--------+     +--------+     +-------------+
    | User   |&lt;---&gt;|  NAS   |&lt;---&gt;| Auth Server |
    |        |     |Vendor A|     |  Vendor B   |
    +--------+     +--------+     +-------------+

  Legend:
          User       - Simulated user
          NAS        - Vendor A Diam NASREQ client
          Auth Sever - Vendor B Diam NASREQ server
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12: Diameter NASREQ Test Topology&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

          Another test topology can exist for testing Diameter/RADIUS gateways as
          specified in Section 9 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. This topology is available 
          for vendors implementing a translation gateway. It should simulate a
          common deployment scenario where there is a prevalence of legacy RADIUS
          access devices (<a class='info' href='#RFC2865'>[RFC2865]<span> (</span><span class='info'>Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;Remote Authentication Dial In User Service (RADIUS),&rdquo; June&nbsp;2000.</span><span>)</span></a>). Since the test cases covers
          interoperability scenarios, validation must be done between NAS and
          Gateway. As with <a class='info' href='#fig-app-nasreq-01'>Figure&nbsp;12<span> (</span><span class='info'>Diameter NASREQ Test Topology</span><span>)</span></a>, it is left to the 
          tester to verify correctness of the access method between User and NAS.          
          The test cases involving <a class='info' href='#fig-app-nasreq-01'>Figure&nbsp;12<span> (</span><span class='info'>Diameter NASREQ Test Topology</span><span>)</span></a> is also 
          relevant to validating Gateway and Auth Server and should be used in
          this topology as well.
          <br /><hr class="insert" />
<a name="fig-app-nasreq-02"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    +--------+     +--------+     +---------+     +-------------+
    | User   |&lt;---&gt;|  NAS   |&lt;---&gt;| Gateway |&lt;---&gt;| Auth Server |
    |        |     |        |     |Vendor A |     |  Vendor B   |
    +--------+     +--------+     +---------+     +-------------+

  Legend:
          User       - Simulated user
          NAS        - Simulated or vendor RADIUS client
          Gateway    - Vendor A Diameter/RADIUS gateway
          Auth Sever - Vendor B Diam NASREQ server
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13: Translation Gateway Test Topology&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="sec-app-nasreq-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Required</h3>

<a name="sec-app-nas-req1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Auth Session</h3>

<p>
              Implementations must conform to Section 2 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
              Test topology <a class='info' href='#fig-app-nasreq-01'>Figure&nbsp;12<span> (</span><span class='info'>Diameter NASREQ Test Topology</span><span>)</span></a> can be used for these 
              cases. These tests typically involves a myriad of configuration options. 
              At the least an implementation must be able to grant access to a user 
              with a reasonable level of security given the test cases below. The 
              minimum test that should be performed is PPP CHAP and PPP EAP with 
              MD5 method. These tests are heavily dependent on other parameters 
              that are implementation specific (username, password, medium type, 
              calling-station-id etc). It is left to the tester to verify correctness 
              of this process but it must conform to Section 2.1, 3.1 and 3.2 of 
              <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. This includes conformance to the use of 
              transport level security (TLS or IPsec) for signaling sensitive 
              information, i.e., passwords etc. Verification of test cases can 
              be done manually. 
              </p>
<ul class="text">
<li>
                  Positive test for proper Auth server session establishment with 
                  authorization and authentication. Verify that user can initiate
                  an access-request via vendor A and that vendor B can respond
                  when PPP negotiation begins. Vendor A and B can agree on the 
                  service-type. Verify that at the least B can support 
                  auth-request-type AUTHORIZE_AUTHENTICATE. 
                
</li>
<li>
                  Positive test for proper NAS session establishment with authorization
                  and authentication. Verify that user can initiate an access-request 
                  via vendor A and that vendor B can respond when PPP negotiation begins.
                  Verify that A is able to support DIAMETER_MULTI_ROUND_AUTH result-code. 
                
</li>
<li>
                  Positive test for proper NAS session establishment with PPP. 
                  Verify support for PPP CHAP/EAP in auth request/answer exchanges. 
                  Verify that call and session information are exchanged properly
                  to conform to Section 4.1 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
                
</li>
<li>
                  Positive test for proper session termination. Verify that a NAS
                  can initiate termination upon user disconnection. Verify that
                  the auth server can abort a session. Must conform to Section
                  2.3 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
                
</li>
<li>
                  Positive test for installation of NAS-filter-rules. Filter rule 
                  implementation should at least carry the form IPFilterType as specified 
                  in Section 4.3 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Verify that the rules 
                  sent by the auth server is installed properly in the NAS for 
                  the specific user. Note that implementation extensions done to the 
                  NAS-filter-rule can affect interoperability between peers. If 
                  commonality or agreements among implementations regarding the 
                  definition of NAS-filter-rule can be found and it deviates from the
                  specification, it should be duly noted and used as a basis for 
                  specifying future NAS-filter-rule extensions.
                
</li>
<li>
                  Negative test for session failure when service type is unsupported.
                  Verify that the auth server can terminate the session with 
                  DIAMETER_INVALID_AVP_VALUE for an unsupported service type.
                
</li>
</ul><p>
            
</p>
<a name="sec-app-nas-req2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
Diameter/RADIUS Gateway</h3>

<p>
              Implementations must conform to Section 9 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
              Test topology <a class='info' href='#fig-app-nasreq-02'>Figure&nbsp;13<span> (</span><span class='info'>Translation Gateway Test Topology</span><span>)</span></a> can be used for these 
              cases. Validation of these tests maybe localized to the Gateway (vendor A) 
              but for the purpose of interoperability, end-to-end authentication and/or
              authorization must succeed between User and Auth Server (vendor B).
              </p>
<ul class="text">
<li>
                  Positive test for forwarding RADIUS request as Diameter request.
                  Verify that Section 9.1 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> is followed
                  and that transaction states are maintained by the Gateway on
                  behalf of the RADIUS client. 
                
</li>
<li>
                  Positive test for forwarding RADIUS response from Diameter responses.
                  Verify that Section 9.1 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> is followed
                  and the session generated from the original RADIUS request is
                  maintained. 
                
</li>
<li>
                  Negative test for terminating a Diameter session upon auth
                  failure. Conditions for termination is specified in Section 9.1
                  of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
                
</li>
</ul><p>
            
</p>
<a name="sec-app-nas-req3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.3"></a><h3>6.1.3.&nbsp;
Multi-domain Scenario</h3>

<p>
              Test cases in this section is synonymous to <a class='info' href='#sec-app-nas-req1'>Section&nbsp;6.1.1<span> (</span><span class='info'>Auth Session</span><span>)</span></a>
              and all requirements in that section apply here as well. These scenarios,
              however, uses Figure 1 of Diameter Base Protocol Test Suite Document instead.
              Vendor A1 can acts as the NAS and B1 or B2 can act as the auth server. A2 or B1
              can act as either a proxy/agent or redirect agent for A1. As with the routing
              test in Diameter Base Protocol Test Suite, these tests are symmetric to both vendors. 
              </p>
<ul class="text">
<li>
                  Positive test for multi-domain auth using proxy/relay agent. Verify that
                  A2 acting as a proxy/relay can reliably forward auth-request and answers between 
                  A1 and B2. All test cases enumerated in <a class='info' href='#sec-app-nas-req1'>Section&nbsp;6.1.1<span> (</span><span class='info'>Auth Session</span><span>)</span></a> 
                  must be performed. Note that this test cases overlap with the relay testing
                  done in Diameter Base Protocol Test Suite. It must conform to all requirements 
                  of those test.
                
</li>
<li>
                  Positive test for multi-domain auth using redirect agent. Verify that
                  A2 or B1 acting as a redirect can successfully respond with redirect 
                  information to A1. All test cases enumerated in 
                  <a class='info' href='#sec-app-nas-req1'>Section&nbsp;6.1.1<span> (</span><span class='info'>Auth Session</span><span>)</span></a> must be performed. Note that this test
                  cases overlap with the relay testing done in Diameter Base Protocol Test
                  Suite. It must conform to all requirements of those test.
                
</li>
</ul><p>
            
</p>
<a name="sec-app-nasreq-optional"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Optional</h3>

<p>
            Implementations must conform to Section 2 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
            Test topology uses <a class='info' href='#fig-app-nasreq-01'>Figure&nbsp;12<span> (</span><span class='info'>Diameter NASREQ Test Topology</span><span>)</span></a>. These are optional
            test that implementations can perform.
            
<a name="sec-app-nas-opt-auth1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Auth Session</h3>

<p>
                Implementations must conform to Section 2 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
                These test cases are in support of <a class='info' href='#sec-app-nas-req1'>Section&nbsp;6.1.1<span> (</span><span class='info'>Auth Session</span><span>)</span></a>. 
                </p>
<ul class="text">
<li>
                    Positive test for proper NASREQ accounting. Verify that accounting
                    session is initiated by vendor A if supported by the implementation.
                    Implementations must conform to Section 8 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
                  
</li>
<li>
                    Positive test for session re-authentication if supported. Must conform
                    to Section 2.2 of <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. Behavior maybe dependent
                    on implementation and policy however auth-lifetime and auth-grace-period
                    must be utilized. Must conform to 8.3 of <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.
                  
</li>
</ul><p>
              
</p>
          

<a name="sec-app-mip"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Diameter MIP Test Suite</h3>

<p>
          Vendors that support Diameter Mobile IPv4 extension must conform
          to <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. There are typically several topologies
          that is possible when deploying Diameter MIP. Those which are more
          likely to be deployed are included in this document. The test cases
          are also highly dependent on the topologies themselves hence each test
          case provides its own test topology. Configuration of the mobility 
          agents (Mobile, HA and FA) for all test cases are implementation specific
          and it is left up to the tester to verify their correctness. Testers 
          must also verify that the MIP implementation conforms to Section 4 of
          <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> as it relates to Diameter. Testers must also
          ensure that all positive test resulting in successful authentication
          and/or authorization must generate appropriate session keys and MSAs
          as needed. It should conform to <a class='info' href='#RFC3957'>[RFC3957]<span> (</span><span class='info'>Perkins, C. and P. Calhoun, &ldquo;Authentication, Authorization, and Accounting (AAA) Registration Keys for Mobile IPv4,&rdquo; March&nbsp;2005.</span><span>)</span></a> and
          <a class='info' href='#RFC3012'>[RFC3012]<span> (</span><span class='info'>Perkins, C. and P. Calhoun, &ldquo;Mobile IPv4 Challenge/Response Extensions,&rdquo; November&nbsp;2000.</span><span>)</span></a> as it applies. This is implementation and policy
          dependent but can be as a consequence of positive test cases so it is
          worthwhile to verify.
        
</p>
<a name="sec-app-mip-req-generic"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Generic MIP Test Scenarios</h3>

<p>
            The following are generic test scenarios that can be applied to
            any MIP test topology. It is enumerated here for simplicity since
            it is common to all topology. 
            </p>
<ul class="text">
<li>
                Positive test for mobile registration. Verify that at the 
                least, the HA can authenticate and authorize the Mobile 
                given the proper configuration (MIP authorization extensions. 
                Verify that the AAA message flows for the specific topology is
                followed. Verify that proper key distribution occurs in the process. 
                If accounting is supported, verify that accounting-sub-session-id 
                is used.
              
</li>
<li>
                Positive test for session termination. Verify that the 
                expiration of auth-lifetime causes an STR to be sent from
                the HA and that the message flows are valid. Verify that the
                AAAH releases all session state it keeps if any. The AAAH must 
                conform to Section 4.1.3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
              
</li>
<li>
                Positive test for re-authentication. Verify that the Mobile
                can successfully performs re-authentication if policy allows. 
                Verify that the AMR sent by the FA or Mobile on re-auth and
                carries the original session-id, HA NAI and AAAH NAI as 
                appropriate. Implementations must conform to
                <a class='info' href='#RFC3846'>[RFC3846]<span> (</span><span class='info'>Johansson, F. and T. Johansson, &ldquo;Mobile IPv4 Extension for Carrying Network Access Identifiers,&rdquo; June&nbsp;2004.</span><span>)</span></a>. 
              
</li>
<li>
                Negative test for failed registration or authentication. 
                Verify that a failed authentication or registration causes 
                an STR to be sent from the HA and that DIAMETER_AUTHENTICATION_REJECTED 
                result-code is communicated back to the FA or Mobile in the AMA.
                Verify that the AAAH releases all session state it keeps if any. 
                AAAH must conform to Section 4.1.3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
              
</li>
</ul><p>
          
</p>
<a name="sec-app-mip-req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Required</h3>

<a name="sec-app-mip-req-topo1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1"></a><h3>7.2.1.&nbsp;
Co-located Registration</h3>

<p>
              Implementation must conform to Section 3.3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
              Test topology for co-located mobile node deployment is shown below in
              <a class='info' href='#fig-app-mip-01'>Figure&nbsp;14<span> (</span><span class='info'>Test Topology for Co-located Mobile Node</span><span>)</span></a>.  Both HA and AAAH share the same realm
              which can be a home or foreign realm of the Mobile. Verifying the 
              correctness of the Mobile to HA registration is out of scope for this 
              document is left to the tester. However, it must conform to 
              <a class='info' href='#RFC3344'>[RFC3344]<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> and its successor document. Note also that 
              there is a myriad of configuration options for this test case and it
              is left to the test pairs to agree on which and on how many configuration
              can and should be tested.
              <br /><hr class="insert" />
<a name="fig-app-mip-01"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    +--------+     +--------+     +-------------+
    | Mobile |&lt;---&gt;|  HA    |&lt;---&gt;| AAAH        |
    |        |     |Vendor A|     | Vendor B    |
    +--------+     +--------+     +-------------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          HA         - Vendor A as a MIP Home Agent
          AAAH       - Vendor B as a Home AAA server
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;14: Test Topology for Co-located Mobile Node&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

              </p>
<ul class="text">
<li>
                  All test scenarios in <a class='info' href='#sec-app-mip-req-generic'>Section&nbsp;7.1<span> (</span><span class='info'>Generic MIP Test Scenarios</span><span>)</span></a>
                  must be performed.  
                
</li>
</ul><p>
            
</p>
<a name="sec-app-mip-req-topo2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.2"></a><h3>7.2.2.&nbsp;
Intra-Domain Registration</h3>

<p>
              Implementation must conform to <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. The basic
              test topology for single domain registration is shown below in
              <a class='info' href='#fig-app-mip-02'>Figure&nbsp;15<span> (</span><span class='info'>Test Topology for Intra-Domain MIP</span><span>)</span></a>. All entities share the same realm
              with FA and HA presiding over different networks. The topology can be 
              a combination of different vendor implementations. Testers must verify
              that the AAA message flows in <a class='info' href='#fig-app-mip-02'>Figure&nbsp;15<span> (</span><span class='info'>Test Topology for Intra-Domain MIP</span><span>)</span></a> are 
              followed for the registration process.
              <br /><hr class="insert" />
<a name="fig-app-mip-02"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                  +---------+
                  |  AAAH   |
                  |Vendor B |
                  +---------+
          AMR/AMA /         \ HAR/HAA
                  /           \
      +---------+             +---------+
      |   FA    |             |   HA    |
      |Vendor A |             |Vendor C |
      +---------+             +---------+
            ^
            | Mobile IP
            v
      +---------+
      | Mobile  |
      +---------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          FA         - Vendor A as a MIP Foreign Agent
          AAAH       - Vendor B as a Home AAA server
          HA         - Vendor C as a MIP Home Agent
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;15: Test Topology for Intra-Domain MIP&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

              </p>
<ul class="text">
<li>
                  All test scenarios in <a class='info' href='#sec-app-mip-req-generic'>Section&nbsp;7.1<span> (</span><span class='info'>Generic MIP Test Scenarios</span><span>)</span></a>
                  must be performed. If <a class='info' href='#RFC3846'>[RFC3846]<span> (</span><span class='info'>Johansson, F. and T. Johansson, &ldquo;Mobile IPv4 Extension for Carrying Network Access Identifiers,&rdquo; June&nbsp;2004.</span><span>)</span></a> is supported, 
                  MIP NAIs should be used to route the AMRs towards the AAAH. 
                
</li>
<li>
                  Positive test for handover. Verify that if Mobile performs a
                  handover to HA that de-registration occurs properly and subsequent
                  AMR/AMA exchanges are appropriate. Verify also that the accounting
                  session is maintained if any.
                
</li>
<li>
                  Negative test for failed allocation of home agent. Vendor B
                  can be configured not to provide a home agent for the Mobile.
                  Verify that DIAMETER_ERROR_HA_NOT_AVAILABLE is sent by vendor B
                  to vendor A. Verify that the B releases all session state it
                  keeps if any. Vendor B must conform to Section 4.1.3 of
                  <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
                
</li>
</ul><p>
            
</p>
<a name="sec-app-mip-req-topo3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.3"></a><h3>7.2.3.&nbsp;
Inter-Domain Registration</h3>

<p>
              Implementation must conform to Section 3.1 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
              The basic test topology for inter-domain registration is shown below in
              <a class='info' href='#fig-app-mip-03'>Figure&nbsp;16<span> (</span><span class='info'>Test Topology for Inter-Domain MIP</span><span>)</span></a>. A1 and A2 reside in realmA and B1 and 
              B2 reside in realmB. The entities in the topology can be a combination of 
              different vendor implementations. Verifying the correctness of the Mobile 
              to FA discovery and registration is implementation specific and out 
              of scope of this document. It is left to the tester to validate this 
              process but it must conform to requirements <a class='info' href='#RFC3344'>[RFC3344]<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a> 
              and its successor document. As with previous test cases in Diameter MIP,
              there is a myriad of configuration options for this test case and it is 
              left to the test pairs to agree on which and on how many configuration 
              can and should be tested. However, testers must verify that the AAA 
              message flows in <a class='info' href='#fig-app-mip-03'>Figure&nbsp;16<span> (</span><span class='info'>Test Topology for Inter-Domain MIP</span><span>)</span></a> are followed for the
              registration process regardless of configuration.
              <br /><hr class="insert" />
<a name="fig-app-mip-03"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    realmA (visited)         realmB (home)
      +---------+             +---------+
      |  AAAF   |   AMR/AMA   |  AAAH   |
      |Vendor A2|&lt;-----------&gt;|Vendor B2|
      +---------+             +---------+
            ^                       ^
    AMR/AMA |                       | HAR/HAA
            v                       v
      +---------+             +---------+
      |   FA    |             |   HA    |
      |Vendor A1|             |Vendor B1|
      +---------+             +---------+
            ^
            | Mobile IP
            v
      +---------+
      | Mobile  | mn@realmB.com
      +---------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          FA         - Vendor A1 as a MIP Foreign Agent
          AAAF       - Vendor A2 as a Foreign AAA server
          AAAH       - Vendor B2 as a Home AAA server
          HA         - Vendor B1 as a MIP Home Agent
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;16: Test Topology for Inter-Domain MIP&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

              </p>
<ul class="text">
<li>
                  All test scenarios in <a class='info' href='#sec-app-mip-req-generic'>Section&nbsp;7.1<span> (</span><span class='info'>Generic MIP Test Scenarios</span><span>)</span></a>
                  must be performed. If <a class='info' href='#RFC3846'>[RFC3846]<span> (</span><span class='info'>Johansson, F. and T. Johansson, &ldquo;Mobile IPv4 Extension for Carrying Network Access Identifiers,&rdquo; June&nbsp;2004.</span><span>)</span></a> is supported, 
                  MIP NAIs should be used to route the AMRs towards the AAAH. 
                
</li>
<li>
                  Positive test for handover. Verify that if Mobile performs a
                  handover to B1 that de-registration occurs properly and subsequent
                  AMR/AMA exchanges are appropriate. Verify also that the accounting
                  session is maintained if any. 
                
</li>
<li>
                  Negative test for failed allocation of home agent. B2 can
                  be configured not to provide a home agent for the Mobile.
                  Verify that DIAMETER_ERROR_HA_NOT_AVAILABLE sent by B2
                  is propagated to FA via the AMA. Verify that the B2 releases 
                  all session state it keeps if any. B2 must conform to Section 
                  4.1.3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
                
</li>
</ul><p>
            
</p>
<a name="sec-app-mip-req-topo4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.4"></a><h3>7.2.4.&nbsp;
Allocation of HA in Foreign Network</h3>

<p>
              Implementation must conform to Section 3.2 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
              The basic test topology for dynamically allocated HA is shown below in
              <a class='info' href='#fig-app-mip-04'>Figure&nbsp;17<span> (</span><span class='info'>Test Topology for Allocation of HA in Foreign Network</span><span>)</span></a>. A1, A2 and A3 reside in realmA and B1 
              resides in realmB. The entities in the topology can be a combination of 
              different vendor implementations. Policies in AAAF and AAAH must support
              dynamic allocation of an HA. Testers must verify that the AAA message flows 
              in <a class='info' href='#fig-app-mip-04'>Figure&nbsp;17<span> (</span><span class='info'>Test Topology for Allocation of HA in Foreign Network</span><span>)</span></a> are followed for the registration
              and HA allocation process.
              <br /><hr class="insert" />
<a name="fig-app-mip-04"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
              realmA                           realmB
              +---------+ ------- AMR ------&gt; +---------+
              |  AAAF   | &lt;----- HAR -------- |  AAAH   |
        +---&gt;|Vendor A3| ------- HAA ------&gt; |Vendor B1|
        |    +---------+ &lt;----- AMA -------- +---------+
        |         ^  |
        |         |  |
HAR/HAA |     AMR |  | AMA
        v         |  v
+---------+       +---------+
|   HA    |       |   FA    |
|Vendor A2|       |Vendor A1|
+---------+       +---------+
                          ^
      +--------+  Mobile IP|
      | Mobile |&lt;----------+
      +--------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          FA         - Vendor A1 as a MIP Foreign Agent
          AAAF       - Vendor A3 as a Foreign AAA server
          AAAH       - Vendor B1 as a Home AAA server
          HA         - Vendor A2 as a MIP Home Agent
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;17: Test Topology for Allocation of HA in Foreign Network&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

              </p>
<ul class="text">
<li>
                  All test scenarios in <a class='info' href='#sec-app-mip-req-generic'>Section&nbsp;7.1<span> (</span><span class='info'>Generic MIP Test Scenarios</span><span>)</span></a>
                  must be performed. If <a class='info' href='#RFC3846'>[RFC3846]<span> (</span><span class='info'>Johansson, F. and T. Johansson, &ldquo;Mobile IPv4 Extension for Carrying Network Access Identifiers,&rdquo; June&nbsp;2004.</span><span>)</span></a> is supported, 
                  MIP NAIs should be used to route the AMRs towards the AAAH. 
                  For test scenarios resulting in the termination of the session,
                  verify that the HA allocated in A2 is released if policy permits.
                
</li>
<li>
                  Negative test for failed allocation of home agent. B1 can
                  be configured not to provide a home agent for the Mobile.
                  Verify that DIAMETER_ERROR_HA_NOT_AVAILABLE sent by B1
                  is propagated to A1. Verify that the B1 releases all 
                  session state it keeps if any. B1 must conform to Section 
                  4.1.3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
                
</li>
</ul><p>
            
</p>
<a name="sec-app-mip-optional"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Optional</h3>

<p>
            Vendors that support Diameter Mobile IPv4 extension must conform
            to <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. The following are optional test cases 
            that can be performed for Diameter MIP.
            
<a name="sec-app-mip-opt-topo1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3.1"></a><h3>7.3.1.&nbsp;
Co-located Registration via Redirect Indication</h3>

<p>
                An addendum to the topology shown in <a class='info' href='#fig-app-mip-03'>Figure&nbsp;16<span> (</span><span class='info'>Test Topology for Inter-Domain MIP</span><span>)</span></a> is
                shown in <a class='info' href='#fig-app-mip-10'>Figure&nbsp;18<span> (</span><span class='info'>Test Topology for Co-located Mobile Node with Redirect</span><span>)</span></a>. The redirect agent is introduced
                if additional transport security is required between HA and AAAH in the
                co-located scenario as described in Section 3.3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>.
                Optional IPsec or TLS connectivity can be established between HA and AAAH.
                For simplicity <a class='info' href='#fig-app-mip-10'>Figure&nbsp;18<span> (</span><span class='info'>Test Topology for Co-located Mobile Node with Redirect</span><span>)</span></a> differs from Figure 8 of
                <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a> by not having an AAA proxy but relying on the
                redirect agent directly.
                <br /><hr class="insert" />
<a name="fig-app-mip-10"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                  +----------+
                  | Redirect |
                  | Vendor B1|
                  +----------+
                      |
                      |
    +--------+     +--------+     +-------------+
    | Mobile |&lt;---&gt;|  HA    |&lt;---&gt;| AAAH        |
    |        |     |Vendor A|     | Vendor B2   |
    +--------+     +--------+     +-------------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          HA         - Vendor A as a MIP Home Agent
          Redirect   - Vendor B1 redirect agent
          AAAH       - Vendor B2 as a Home AAA server
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;18: Test Topology for Co-located Mobile Node with Redirect&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                </p>
<ul class="text">
<li>
                    Positive test for mobile registration. Verify that redirection
                    occurs between HA and Redirect agent. Verify that a secure
                    transport is established between HA and AAAH. Verify that at the
                    least, vendor B2 can authenticate and authorized the Mobile 
                    given the proper configuration.
                  
</li>
<li>
                    Verify that the all test cases in <a class='info' href='#sec-app-mip-req-topo1'>Section&nbsp;7.2.1<span> (</span><span class='info'>Co-located Registration</span><span>)</span></a> 
                    is be applied in this test case as well.
                  
</li>
</ul><p>
              
</p>            
            
<a name="sec-app-mip-opt-topo2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3.2"></a><h3>7.3.2.&nbsp;
Inter-Domain Registration with Redirect</h3>

<p>
                An addendum to the topology shown in <a class='info' href='#fig-app-mip-03'>Figure&nbsp;16<span> (</span><span class='info'>Test Topology for Inter-Domain MIP</span><span>)</span></a>
                is shown in <a class='info' href='#fig-app-mip-11'>Figure&nbsp;19<span> (</span><span class='info'>Test Topology for Inter-Domain MIP with Redirect</span><span>)</span></a>. The redirect agent B3 is 
                introduced if additional transport security is required and the use
                of an AAAF can be skipped. In this topology B3 shares the same realm
                a B1 and B2. Optional IPsec or TLS connectivity can be established 
                between A1 and B2 as describe in Figure 3 of <a class='info' href='#RFC4004'>[RFC4004]<span> (</span><span class='info'>Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;Diameter Mobile IPv4 Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>. 
                However, the secure connectivity can be omitted to simplify testing.
                <br /><hr class="insert" />
<a name="fig-app-mip-11"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                  +---------+
                  |Redirect |
                  |Vendor B3|
                  +---------+
                  /
realmA (visited) /           realmB (home)
      +---------+             +---------+
      |  AAAF   |   AMR/AMA   |  AAAH   |
      |Vendor A2|      -------|Vendor B2|
      +---------+     /       +---------+
            ^         /             ^
    AMR/AMA |        /              | HAR/HAA
            v       /               v
      +---------+ /           +---------+
      |   FA    |             |   HA    |
      |Vendor A1|             |Vendor B1|
      +---------+             +---------+
            ^
            | Mobile IP
            v
      +---------+
      | Mobile  | mn@realmB.com
      +---------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          FA         - Vendor A1 as a MIP Foreign Agent
          AAAF       - Vendor A2 as a Foreign AAA server
          AAAH       - Vendor B2 as a Home AAA server
          HA         - Vendor B1 as a MIP Home Agent
          Redirect   - Vendor B3 as a Redirect agent in reamlA
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;19: Test Topology for Inter-Domain MIP with Redirect&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                </p>
<ul class="text">
<li>
                    Positive test for mobile registration. Verify that at the 
                    least, B1 acting as HA can authenticate and authorize
                    the Mobile given the proper configuration. Verify that a 
                    secure transport is established between A1 and B2 if used. If 
                    accounting is supported, verify that accounting-sub-session-id 
                    is used. If <a class='info' href='#RFC3846'>[RFC3846]<span> (</span><span class='info'>Johansson, F. and T. Johansson, &ldquo;Mobile IPv4 Extension for Carrying Network Access Identifiers,&rdquo; June&nbsp;2004.</span><span>)</span></a> is supported, MIP NAIs 
                    should be used to route the message towards the HA.
                  
</li>
<li>
                    Positive test for handover. Verify that if Mobile performs a
                    handover to B1 that de-registration occurs properly and subsequent
                    AMR/AMA exchanges are appropriate. Verify also that the accounting
                    session is maintained if any. 
                  
</li>
<li>
                    Verify that the all test cases in <a class='info' href='#sec-app-mip-req-topo3'>Section&nbsp;7.2.3<span> (</span><span class='info'>Inter-Domain Registration</span><span>)</span></a> 
                    is be applied in this test case as well.
                  
</li>
</ul><p>
              
</p>
            
<a name="sec-app-mip-opt-topo3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3.3"></a><h3>7.3.3.&nbsp;
Inter-Domain Registration with Proxy/Relay</h3>

<p>
                An addendum to the topology shown in <a class='info' href='#fig-app-mip-03'>Figure&nbsp;16<span> (</span><span class='info'>Test Topology for Inter-Domain MIP</span><span>)</span></a>
                is shown in <a class='info' href='#fig-app-mip-12'>Figure&nbsp;20<span> (</span><span class='info'>Test Topology for Inter-Domain MIP with Proxy/Relay</span><span>)</span></a>. The proxy/relay agent B3
                exists between A2 and B2. In this topology B3 shares the same realm as
                B1 and B2.
                <br /><hr class="insert" />
<a name="fig-app-mip-12"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                  +------------+
                  |Proxy/Relay |
                  |Vendor B3   |
                  +------------+
                  / AMR/AMA \
realmA (visited) /           \ realmB (home)
      +---------+             +---------+
      |  AAAF   |             |  AAAH   |
      |Vendor A2|             |Vendor B2|
      +---------+             +---------+
            ^                       ^
    AMR/AMA |                       | HAR/HAA
            v                       v
      +---------+             +---------+
      |   FA    |             |   HA    |
      |Vendor A1|             |Vendor B1|
      +---------+             +---------+
            ^
            | Mobile IP
            v
      +---------+
      | Mobile  | mn@realmB.com
      +---------+

  Legend:
          Mobile     - Mobile is IPv4 mobile node
          FA         - Vendor A1 as a MIP Foreign Agent
          AAAF       - Vendor A2 as a Foreign AAA server
          AAAH       - Vendor B2 as a Home AAA server
          HA         - Vendor B1 as a MIP Home Agent
          Redirect   - Vendor B3 as a Redirect agent in reamlA
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;20: Test Topology for Inter-Domain MIP with Proxy/Relay&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

                </p>
<ul class="text">
<li>
                    Positive test for mobile registration. Verify that at the 
                    least, B1 acting as HA can authenticate and authorize
                    the Mobile given the proper configuration. Verify that B3
                    can reliably relay AMR/AMA exchanges between A1 and A2.
                    If accounting is supported, verify that accounting-sub-session-id 
                    is used. If <a class='info' href='#RFC3846'>[RFC3846]<span> (</span><span class='info'>Johansson, F. and T. Johansson, &ldquo;Mobile IPv4 Extension for Carrying Network Access Identifiers,&rdquo; June&nbsp;2004.</span><span>)</span></a> is supported, MIP NAIs 
                    should be used to route the message towards the HA.
                  
</li>
<li>
                    Verify that the all test cases in <a class='info' href='#sec-app-mip-req-topo3'>Section&nbsp;7.2.3<span> (</span><span class='info'>Inter-Domain Registration</span><span>)</span></a> 
                    is be applied in this test case as well.
                  
</li>
<li>
                    Positive test for handover. Verify that if Mobile performs a
                    handover to B1 that de-registration occurs properly and subsequent
                    AMR/AMA exchanges are appropriate. Verify also that the accounting
                    session is maintained if any. 
                  
</li>
</ul><p>
              
</p>
          

<a name="section-security-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
        This document defines test cases and therefore tests
        various aspects of the Diameter base specification and 
        various Diameter applications.
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
        This document does not require actions by IANA.
      
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-aaa-diameter-sip-app">[I-D.ietf-aaa-diameter-sip-app]</a></td>
<td class="author-text">Garcia-Martin, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-aaa-diameter-sip-app-12.txt">Diameter Session Initiation Protocol (SIP) Application</a>,&rdquo; draft-ietf-aaa-diameter-sip-app-12 (work in progress), April&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-aaa-diameter-sip-app-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2716">[RFC2716]</a></td>
<td class="author-text"><a href="mailto:bernarda@microsoft.com">Aboba, B.</a> and <a href="mailto:dansimon@microsoft.com">D. Simon</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2716">PPP EAP TLS Authentication Protocol</a>,&rdquo; RFC&nbsp;2716, October&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2716.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2865">[RFC2865]</a></td>
<td class="author-text">Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;<a href="http://tools.ietf.org/html/rfc2865">Remote Authentication Dial In User Service (RADIUS)</a>,&rdquo; RFC&nbsp;2865, June&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2865.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3012">[RFC3012]</a></td>
<td class="author-text">Perkins, C. and P. Calhoun, &ldquo;<a href="http://tools.ietf.org/html/rfc3012">Mobile IPv4 Challenge/Response Extensions</a>,&rdquo; RFC&nbsp;3012, November&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc3012.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3344">[RFC3344]</a></td>
<td class="author-text">Perkins, C., &ldquo;<a href="http://tools.ietf.org/html/rfc3344">IP Mobility Support for IPv4</a>,&rdquo; RFC&nbsp;3344, August&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3344.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[RFC3588]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3846">[RFC3846]</a></td>
<td class="author-text">Johansson, F. and T. Johansson, &ldquo;<a href="http://tools.ietf.org/html/rfc3846">Mobile IPv4 Extension for Carrying Network Access Identifiers</a>,&rdquo; RFC&nbsp;3846, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3846.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3957">[RFC3957]</a></td>
<td class="author-text">Perkins, C. and P. Calhoun, &ldquo;<a href="http://tools.ietf.org/html/rfc3957">Authentication, Authorization, and Accounting (AAA) Registration Keys for Mobile IPv4</a>,&rdquo; RFC&nbsp;3957, March&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3957.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4004">[RFC4004]</a></td>
<td class="author-text">Calhoun, P., Johansson, T., Perkins, C., Hiller, T., and P. McCann, &ldquo;<a href="http://tools.ietf.org/html/rfc4004">Diameter Mobile IPv4 Application</a>,&rdquo; RFC&nbsp;4004, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4004.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4005">[RFC4005]</a></td>
<td class="author-text">Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;<a href="http://tools.ietf.org/html/rfc4005">Diameter Network Access Server Application</a>,&rdquo; RFC&nbsp;4005, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4005.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4072">[RFC4072]</a></td>
<td class="author-text">Eronen, P., Hiller, T., and G. Zorn, &ldquo;<a href="http://tools.ietf.org/html/rfc4072">Diameter Extensible Authentication Protocol (EAP) Application</a>,&rdquo; RFC&nbsp;4072, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4072.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.228">[TS29.228]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Cx and Dx interfaces : signalling flows and message contents,&rdquo; 3GPP TS 29.228 Version 7.0.0&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.229">[TS29.229]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Cx and Dx interfaces based on the Diameter protocol; Protocol details,&rdquo; 3GPP TS 29.229 Version 7.0.0&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.328">[TS29.328]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Sh interface : signalling flows and message content,&rdquo; 3GPP TS 29.328 Version 6.8.0&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS29.329">[TS29.329]</a></td>
<td class="author-text">3GPP, &ldquo;IMS Sh interface based on the Diameter protocol; Protocol details,&rdquo; 3GPP TS 29.329 Version 6.6.0&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="TS32.260">[TS32.260]</a></td>
<td class="author-text">3GPP, &ldquo;IP Multimedia Subsystem (IMS) Charging,&rdquo; 3GPP TS 32.260 Version 6.4.0&nbsp;2005.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Victor Fajardo</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telcordia Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1 Telcordia Drive #1S-222</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Piscataway, NJ  08854</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vfajardo@research.telcordia.com">vfajardo@research.telcordia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan McNamee</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Openet Telecom Inc</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">6 Beckett Way, Park West Business Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Clondalkin, Dublin  12</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ireland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+353 1 620 4600</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.mcnamee@openet-telecom.com">alan.mcnamee@openet-telecom.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Julien Bournelle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom R&amp;D</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">38-4O rue du general Leclerc</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Issy-Les-Moulineaux  92794</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:julien.bournelle@orange-ftgroup.com">julien.bournelle@orange-ftgroup.com</a></td></tr>
</table>
</body></html>
