<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Batch Notification Extension for the Session Initiation Protocol (SIP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Batch Notification Extension for the Session Initiation Protocol (SIP)">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING WG</td><td class="header">A. Johnston, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Avaya</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">W. Mertka</td></tr>
<tr><td class="header">Expires: September 3, 2009</td><td class="header">RedSky</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 02, 2009</td></tr>
</table></td></tr></table>
<h1><br />A Batch Notification Extension for the Session Initiation Protocol (SIP)<br />draft-johnston-sipping-batch-notify-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 3, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
This memo specifies the requirements and mechanism for a SIP events extension where bulk SIP event information can be shared between two peers both with the ability and authority to act as notifiers for this information.   An example application use case is the transition of event state information during a backup/recovery sequence between event state servers.  This document is targeted at addressing server overflow conditions that include the possibilities of the size of individual notification messages getting excessive and the processing of state information by both the subscriber and notifier also becoming excessive.

</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Overview<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Requirements<br />
<a href="#anchor4">4.</a>&nbsp;
Use Cases<br />
<a href="#anchor5">5.</a>&nbsp;
Possible Mechanism<br />
<a href="#anchor6">6.</a>&nbsp;
Appendix - Syntax for batch parameter<br />
<a href="#anchor7">7.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">7.1.</a>&nbsp;
Registration of Header Field Parameter<br />
<a href="#anchor9">8.</a>&nbsp;
Security Considerations<br />
<a href="#anchor10">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Overview</h3>

<p>  
The SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> event framework <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>  was developed as a way for SIP UAs to request and exchange various information.  It has proven to be very useful, with many event packages being defined.  Some of these event packages result in notifiers which have large databases of information which is provided to subscribers.  For example, the conferencing event package defines a mechanism for a focus to share state information about a conference.  The registration event package allows a registrar to share information about current registrations.  And presence allows a presence server to store and share presence information.

</p>
<p>
The SIP event framework includes the ability to combine event state from multiple contacts associated with the same AOR and provide this information in a single subscription, through an event state compositor (ESC).  Besides this mechanism, one subscription generally only provides event state information about one AOR.  The resource list and resource list server (RLS) extensions <a class='info' href='#RFC4662'>[RFC4662]<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a>  were developed to allow a single subscription to a RLS to be used to convey event state about all the AORs in a resource list to be delivered over a single subscription.  The mechanism assumes that resource list of URIs is stored on a RLS and represented by a single resource list URI.  When a UA subscribes to the resource list URI, the RLS initiates "back-end" subscriptions, and subscribes to the individual state of each URI, then combines this information into the single subscription.  The Resource List Meta Information (RLMI) data format <a class='info' href='#RFC4662'>[RFC4662]<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a>  was defined as a way to map the event state from these backend subscriptions to the list subscription.

</p>
<p>

The SIP event filter extension <a class='info' href='#RFC4660'>[RFC4660]<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;Functional Description of Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a> provides a mechanism where a UA can control the content of event notifications.  For example, a filter can be created to control what exact types of events will generate notifications or generate notifications only for certain resources.

</p>
<p>

This draft discusses the requirements and mechanism for another SIP events extension where bulk SIP event information can be shared between two peers both with the ability and authority to act as notifiers for this information.  We call requests for this transfer a "batch" subscription, and the notifications generated during this transfer as "batch" notifications where this full state information is transferred for a particular event package in a managed way. An example application use case is the transition of event state information during a backup/recovery sequence between event state servers.  It is desirable that this transfer occurs in a timely way without overloading either server.

</p>
<p>
The way in which these batch notifications are generated and delivered needs to be managed carefully, otherwise:

</p>
<ol class="text">
<li>
The rate of notifications could become excessive.

</li>
<li>
The size of individual notification messages could become excessive.

</li>
<li>
The processing of state information by both the subscriber and notifier could become excessive.

</li>
</ol>
<p>
The first could be solved by <a class='info' href='#I-D.niemi-sipping-event-throttle'>[I&#8209;D.niemi&#8209;sipping&#8209;event&#8209;throttle]<span> (</span><span class='info'>Niemi, A., Kiss, K., and S. Loreto, &ldquo;Session Initiation Protocol (SIP) Event Notification Extension for  Notification Throttling,&rdquo; February&nbsp;2009.</span><span>)</span></a> which provides a throttling mechanism where the subscriber can choose the maximum and average rate of notifications.  The second and third represent the requirements that will be discussed in this draft.  Note that the SIP event filter extension <a class='info' href='#RFC4660'>[RFC4660]<span> (</span><span class='info'>Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;Functional Description of Event Notification Filtering,&rdquo; September&nbsp;2006.</span><span>)</span></a> does not help in this case as it is assumed that all events by all users are of interest for the batch notification.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Requirements</h3>

<p>
This section discusses the requirements for the batch notification mechanism.

</p>
<p>
REQ-1: The mechanism will allow a subscriber to set the maximum number of bodies in a batch notification.

</p>
<p>
REQ-2: The mechanism must work together with other throttling mechanisms and filtering mechanisms.

</p>
<p>
REQ-3: The mechanism will not be event package specific.

</p>
<p>
REQ-4: The mechanism will permit the notifier to indicate to the subscriber that the full event state has been transferred.  

</p>
<p>
REQ-5: The mechanism will minimize the processing of the event state data by both the batch subscriber and batch notifier.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Use Cases</h3>

<p>
This section discusses a number of use cases for the batch notification mechanism. 

</p>
<p>
For example, consider a SIP conferencing service.  A key part is the conference notification service <a class='info' href='#RFC4575'>[RFC4575]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;A Session Initiation Protocol (SIP) Event Package for Conference State,&rdquo; August&nbsp;2006.</span><span>)</span></a>   which provides notifications on conference participants and states.  A single conference service may have multiple concurrent SIP conferences, each identified by a conference URI.  However, all or a set of these URIs may resolve to a single server which has access to the state of multiple conferences and provides the notification service.  If this conference service is being taken out of service and replaced by another instance of the conferencing service, the first step is for the new instance to learn the state of all active conferences.  Once this information is known, the process of using SIP call control techniques to move the focus to the new server can begin.  This could be done by individual subscriptions to each of the active conferences on the server.  However, for a large conferencing system, this is inefficient and slow, and would use up resources on both systems.  A batch notification mechanism would allow the efficient transfer of conference information.

</p>
<p>
Another example is a registrar which implements the registration information event package <a class='info' href='#RFC3680'>[RFC3680]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Session Initiation Protocol (SIP) Event Package for Registrations,&rdquo; March&nbsp;2004.</span><span>)</span></a>.  A new location service or proxy implementing a location service might need to obtain the current registration data for a domain.  While it is possible to do with outside of SIP, there are valid reasons why this might sometimes be done inside SIP such as:

</p>
<p>
</p>
<ul class="text">
<li>
Reuse of authentication, routing, and NAT and firewall traversal

</li>
<li>
Mobility and distribution

</li>
<li>
Simplicity

</li>
</ul>
<p>
A related example is that of a failure case.  While a server may retain previously provisioned and/or computed information within its internal data store, a planned or unplanned outage creates the need to re-synchronize components within a network infrastructure.  The batch mechanism provides the capability for a server to request the list of current registrations from a registrar or other component within the network architecture.

</p>
<p>
Again, the three issues associated with the bulk notification scheme would be critical to the performance of such a system.

</p>
<p>
Presence <a class='info' href='#RFC3856'>[RFC3856]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> is another example where this mechanism could be utilized.  Aggregated presence servers within a domain could use an approach such as this to share presence information between them and to synchronize and transfer event state compositor information.

</p>
<p>
All these use cases would use a call flow similar to Figure 1 below.  The subscription is created by the SUBSCRIBE in F1, which utilizes the mechanism to set the maximum batch size for notifications, meeting REQ-1.  The notifier has a large volume of state information to send, but it is broken up into three batches (F3, F5, and F7) based on the settings in the SUBSCRIBE.  Future notifications of state occur later in the subscription and may or may not be batch NOTIFYs. 

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           Subscriber                 Notifier
                |                        |
                |  SUBSCRIBE (batch) F1  |
                |-----------------------&gt;|
                |     202 Accepted F2    |
                |&lt;-----------------------|
                |    NOTIFY (batch) F3   |
                |&lt;-----------------------|
                |        200 OK F4       |
                |-----------------------&gt;|
                |    NOTIFY (batch) F5   |
                |&lt;-----------------------|
                |        200 OK F6       |
                |-----------------------&gt;|
                |    NOTIFY (batch) F7   |
                |&lt;-----------------------|
                |        200 OK F8       |
                |-----------------------&gt;|
                |                        |
                |                        |
                |  NOTIFY Subscription-State:terminated F9
                |&lt;-----------------------|
                |       200 OK F10       |
                |-----------------------&gt;|
                |                        |
</pre></div>
<p>
Figure 1. Batch Notification Call Flow.

</p>
<p>
If the notifier wants to indicate to the subscriber that the full event state has been transferred, the notifier can terminate the subscription with a NOTIFY with Subscription-State: terminated as shown in F9.  This meets REQ-4.

</p>
<p>
OPEN ISSUE:  What reason parameter should be used in this case?  Perhaps a new one needs to be defined.

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Possible Mechanism</h3>

<p> 
This document proposes a possible mechanism for the batch notification.  The proposed mechanism is similar to that used in <a class='info' href='#I-D.niemi-sipping-event-throttle'>[I&#8209;D.niemi&#8209;sipping&#8209;event&#8209;throttle]<span> (</span><span class='info'>Niemi, A., Kiss, K., and S. Loreto, &ldquo;Session Initiation Protocol (SIP) Event Notification Extension for  Notification Throttling,&rdquo; February&nbsp;2009.</span><span>)</span></a>  where a new Event header field parameter, "batch" is defined and used as in Figure 1. Other filtering and throttling mechanisms could still be used for this subscription, as other header field parameters and bodies could be included in the SUBSCRIBE, meeting REQ-2.  

</p>
<p>
This mechanism could be used with resource lists and RLMI body types.  In this case, the batch count would refer to the number of resource bodies, not RLMI bodies.  However, to better meet REQ-5, this mechanism could be used with an alternative body type.  For applications that meet the following requirements, an optimization could be used.  They are:

</p>
<ol class="text">
<li>
There is no back-end subscription as is the case with a RLS.

</li>
<li>
Each individual body is self-contained and does not need any meta information for processing.

</li>
<li>
Only full state event information is included.

</li>
</ol>
<p>
For example, any of the three use cases mentioned above meet these requirements.  In all of these cases, there is no back-end subscription.  As such, there is no meta information, such as that included in RLMI bodies.  For these cases, the RLMI body can be omitted and each event state body included as multipart/mixed.  For example, 

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   NOTIFY sip:app.example.com SIP/2.0
   Via: SIP/2.0/UDP server19.example.com;branch=z9hG4bKnasaij
   From: sip:joe@example.com;tag=xyzygg
   To: sip:app.example.com;tag=123aa9
   Call-ID: 9987@app.example.com
   CSeq: 1289 NOTIFY
   Contact: sip:server19.example.com
   Event: reg
   Max-Forwards: 70
   Content-Type: multipart/mixed;boundary="boundary1"
   Content-Length: ...

      --boundary1
   Content-Type: application/reginfo+xml

   &lt;?xml version="1.0"?&gt;
   &lt;reginfo xmlns="urn:ietf:params:xml:ns:reginfo"
             version="1" state="partial"&gt;
     &lt;registration aor="sip:joe@example.com" id="a7" state="active"&gt;
       &lt;contact id="1976" state="active" event="registered"
             duration-registered="3210"&gt;
          &lt;uri&gt;sip:joe@pc34.example.com&lt;/uri&gt;
       &lt;/contact&gt;
     &lt;/registration&gt;
   &lt;/reginfo&gt;

   --boundary1
   Content-Type: application/reginfo+xml

   &lt;?xml version="1.0"?&gt;
   &lt;reginfo xmlns="urn:ietf:params:xml:ns:reginfo"
             version="1" state="partial"&gt;
     &lt;registration aor="sip:fred@example.com" id="54a7" state="active"&gt;
       &lt;contact id="7446" state="active" event="registered"
             duration-registered="190"&gt;
          &lt;uri&gt;sip:fred@pc.example.com&lt;/uri&gt;
       &lt;/contact&gt;
     &lt;/registration&gt;
   &lt;/reginfo&gt;

   --boundary1
   Content-Type: application/reginfo+xml

   &lt;?xml version="1.0"?&gt;
   &lt;reginfo xmlns="urn:ietf:params:xml:ns:reginfo"
             version="1" state="partial"&gt;
     &lt;registration aor="sip:bob@example.com" id="4a6437" state="active"&gt;
       &lt;contact id="176" state="active" event="registered"
             duration-registered="282"&gt;
          &lt;uri&gt;sip:bob@lab.example.com&lt;/uri&gt;
       &lt;/contact&gt;
     &lt;/registration&gt;
   &lt;/reginfo&gt;
   --boundary1--

</pre></div>
<p>
The considerations <a class='info' href='#I-D.ietf-sip-body-handling'>[I&#8209;D.ietf&#8209;sip&#8209;body&#8209;handling]<span> (</span><span class='info'>Camarillo, G., &ldquo;Message Body Handling in the Session Initiation Protocol (SIP),&rdquo; March&nbsp;2009.</span><span>)</span></a> apply to this usage.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Appendix - Syntax for batch parameter</h3>

<p>
Editor's Note: Eventually this text will move to a SIP Working Group document to define the new Event header field parameters.

</p>
<p>
This parameter is defined as:

</p>
<p>
event-param =/  batch-param

</p>
<p>
batch-param = "batch" EQUAL 1*DIGIT

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Registration of Header Field Parameter</h3>

<p>

   This document defines a new parameter, "batch", for the Event header field defined in RFC 3265.  

</p>
<p>
   The following rows shall be added to the "Header Field Parameters and
   Parameter Values" section of the SIP parameter registry:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   +------------------+----------------+-------------------+-----------+
   | Header Field     | Parameter Name | Predefined Values | Reference |
   +------------------+----------------+-------------------+-----------+
   | Event            | batch          | No                | [RFCXXXX] |
   +------------------+----------------+-------------------+-----------+
</pre></div>
<p>

   Editor's Note: [RFCXXXX] should be replaced with the designation of
the eventual SIP Working Group document.


</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
The security considerations for the SIP Events framework <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> apply to this extension.  As such, both the subscriber and notifier should use normal SIP methods for authentication and message integrity for subscriptions generated for this extension.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>
Thanks to Brian Schwarz and Dan Romascanu for their contributions.

</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4662">[RFC4662]</a></td>
<td class="author-text">Roach, A., Campbell, B., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4662">A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists</a>,&rdquo; RFC&nbsp;4662, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4662.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4660">[RFC4660]</a></td>
<td class="author-text">Khartabil, H., Leppanen, E., Lonnfors, M., and J. Costa-Requena, &ldquo;<a href="http://tools.ietf.org/html/rfc4660">Functional Description of Event Notification Filtering</a>,&rdquo; RFC&nbsp;4660, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4660.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3680">[RFC3680]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3680">A Session Initiation Protocol (SIP) Event Package for Registrations</a>,&rdquo; RFC&nbsp;3680, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3680.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4575">[RFC4575]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and O. Levin, &ldquo;<a href="http://tools.ietf.org/html/rfc4575">A Session Initiation Protocol (SIP) Event Package for Conference State</a>,&rdquo; RFC&nbsp;4575, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4575.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3856">[RFC3856]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3856">A Presence Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3856, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3856.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.niemi-sipping-event-throttle">[I-D.niemi-sipping-event-throttle]</a></td>
<td class="author-text">Niemi, A., Kiss, K., and S. Loreto, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-niemi-sipping-event-throttle-08.txt">Session Initiation Protocol (SIP) Event Notification Extension for  Notification Throttling</a>,&rdquo; draft-niemi-sipping-event-throttle-08 (work in progress), February&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-niemi-sipping-event-throttle-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-body-handling">[I-D.ietf-sip-body-handling]</a></td>
<td class="author-text">Camarillo, G., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-body-handling-06.txt">Message Body Handling in the Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-body-handling-06 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-body-handling-06.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Johnston (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">St. Louis, MO  63124</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan@sipstation.com">alan@sipstation.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bill Mertka</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">RedSky</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chicago, IL  60622</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:bmertka@redskytech.com">bmertka@redskytech.com</a></td></tr>
</table>
</body></html>
