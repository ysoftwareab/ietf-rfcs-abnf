<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>6TiSCH Minimal Scheduling Function (MSF)</title>
<meta content="Tengfei Chang" name="author">
<meta content="Malisa Vucinic" name="author">
<meta content="Xavier Vilajosana" name="author">
<meta content="Simon Duquennoy" name="author">
<meta content="Diego Dujovne" name="author">
<meta content="
       
                This specification defines the 6TiSCH Minimal Scheduling Function (MSF).
                This Scheduling Function describes both
                the behavior of a node when joining the network, and
                how the communication schedule is managed in a distributed fashion.
                MSF is built upon
                the 6TiSCH Operation Sublayer Protocol (6P) and
                the Minimal Security Framework for 6TiSCH.
       
    " name="description">
<meta content="xml2rfc 2.36.0" name="generator">
<meta content="Draft" name="keyword">
<meta content="draft-ietf-6tisch-msf-09" name="ietf.draft">
<link href="/tmp/draft-ietf-6tisch-msf-09-_Os6RE.xml" type="application/rfc+xml" rel="alternate">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}</style>
<link href="rfc-local.css" type="text/css" rel="stylesheet">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">6TiSCH Minimal Scheduling Function (MSF)</td>
<td class="right">December 2019</td>
</tr></thead>
<tfoot><tr>
<td class="left">Chang, et al.</td>
<td class="center">Expires 14 June 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">6TiSCH</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-6tisch-msf-09</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2019-12-12" class="published">12 December 2019</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-06-14">14 June 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Chang, <span class="editor">Ed.</span>
</div>
<div class="org">Inria</div>
</div>
<div class="author">
      <div class="author-name">M. Vucinic</div>
<div class="org">Inria</div>
</div>
<div class="author">
      <div class="author-name">X. Vilajosana</div>
<div class="org">Universitat Oberta de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">S. Duquennoy</div>
<div class="org">RISE SICS</div>
</div>
<div class="author">
      <div class="author-name">D. Dujovne</div>
<div class="org">Universidad Diego Portales</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">6TiSCH Minimal Scheduling Function (MSF)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
                This specification defines the 6TiSCH Minimal Scheduling Function (MSF).
                This Scheduling Function describes both
                the behavior of a node when joining the network, and
                how the communication schedule is managed in a distributed fashion.
                MSF is built upon
                the 6TiSCH Operation Sublayer Protocol (6P) and
                the Minimal Security Framework for 6TiSCH.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language">
<a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">
                The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 14 June 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-interface-to-the-minimal-6t" class="xref">Interface to the Minimal 6TiSCH Configuration</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-autonomous-cells" class="xref">Autonomous Cells</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-node-behavior-at-boot" class="xref">Node Behavior at Boot</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-start-state" class="xref">Start State</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-step-1-choosing-frequency" class="xref">Step 1 - Choosing Frequency</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-step-2-receiving-ebs" class="xref">Step 2 - Receiving EBs</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-step-3-setting-up-autonomou" class="xref">Step 3 - Setting up Autonomous Cells for the Join Process</a><a href="#section-toc.1-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-step-4-acquiring-a-rpl-rank" class="xref">Step 4 - Acquiring a RPL Rank</a><a href="#section-toc.1-1.4.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="xref">4.6</a>.  <a href="#name-step-5-setting-up-first-tx-" class="xref">Step 5 - Setting up first Tx negotiated Cells</a><a href="#section-toc.1-1.4.2.6.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.7">
                <p id="section-toc.1-1.4.2.7.1"><a href="#section-4.7" class="xref">4.7</a>.  <a href="#name-step-6-send-ebs-and-dios" class="xref">Step 6 - Send EBs and DIOs</a><a href="#section-toc.1-1.4.2.7.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.8">
                <p id="section-toc.1-1.4.2.8.1"><a href="#section-4.8" class="xref">4.8</a>.  <a href="#name-end-state" class="xref">End State</a><a href="#section-toc.1-1.4.2.8.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-rules-for-adding-deleting-c" class="xref">Rules for Adding/Deleting Cells</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-adapting-to-traffic" class="xref">Adapting to Traffic</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-switching-parent" class="xref">Switching Parent</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-handling-schedule-collision" class="xref">Handling Schedule Collisions</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-6p-signal-command" class="xref">6P SIGNAL command</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-scheduling-function-identif" class="xref">Scheduling Function Identifier</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-rules-for-celllist" class="xref">Rules for CellList</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-6p-timeout-value" class="xref">6P Timeout Value</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-rule-for-ordering-cells" class="xref">Rule for Ordering Cells</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-meaning-of-the-metadata-fie" class="xref">Meaning of the Metadata Field</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-6p-error-handling" class="xref">6P Error Handling</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-schedule-inconsistency-hand" class="xref">Schedule Inconsistency Handling</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-msf-constants" class="xref">MSF Constants</a><a href="#section-toc.1-1.14.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="xref">15</a>. <a href="#name-msf-statistics" class="xref">MSF Statistics</a><a href="#section-toc.1-1.15.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="xref">16</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.16.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="xref">17</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.17.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a href="#section-17.1" class="xref">17.1</a>.  <a href="#name-msf-scheduling-function-ide" class="xref">MSF Scheduling Function Identifiers</a><a href="#section-toc.1-1.17.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#section-18" class="xref">18</a>. <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.18.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.18.2.1">
                <p id="section-toc.1-1.18.2.1.1"><a href="#section-18.1" class="xref">18.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.18.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.18.2.2">
                <p id="section-toc.1-1.18.2.2.1"><a href="#section-18.2" class="xref">18.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.18.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-contributors" class="xref">Contributors</a><a href="#section-toc.1-1.19.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-example-of-implementation-o" class="xref">Example of Implementation of SAX hash function</a><a href="#section-toc.1-1.20.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.21.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sec_intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
                The 6TiSCH Minimal Scheduling Function (MSF), defined in this specification, is a 6TiSCH Scheduling Function (SF).
                The role of an SF is entirely defined in <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span>.
                This specification complements <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span> by providing the rules of when to add/delete cells in the communication schedule.
                This specification satisfies all the requirements for an SF listed in Section 4.2 of <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
                MSF builds on top of the following specifications:
                the Minimal IPv6 over the TSCH Mode of IEEE 802.15.4e (6TiSCH) Configuration <span>[<a href="#RFC8180" class="xref">RFC8180</a>]</span>,
                the 6TiSCH Operation Sublayer Protocol (6P) <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span>, and
                the Minimal Security Framework for 6TiSCH <span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
                MSF defines both
                the behavior of a node when joining the network, and
                how the communication schedule is managed in a distributed fashion.
                When a node running MSF boots up, it joins the network by following the 6 steps described in <a href="#sec_boot" class="xref">Section 4</a>.
                The end state of the join process is that the node
                is synchronized to the network,
                has mutually authenticated to the network,
                has identified a routing parent,
                and has scheduled one negotiated Tx cell (defined in <a href="#sec_traffic" class="xref">Section 5.1</a>) to/from its routing parent.
                After the join process, the node can continuously add/delete/relocate cells, as described in <a href="#sec_add_delete" class="xref">Section 5</a>.
                It does so for 3 reasons:
                to match the link-layer resources to the traffic,
                to handle changing parent,
                to handle a schedule collision.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">
                MSF works closely with RPL, specifically the routing parent defined in <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>.
                This specification only describes how MSF works with one routing parent, which is phrased as "selected parent".
                The activity of MSF towards to single routing parent is called as a "MSF session". 
                Though the performance of MSF is evaluated only when the "selected parent" represents node's preferred parent, there should be no restrictions to go multiple MSF sessions, one per parent.
                The distribution of traffic over multiple parents is a routing decision that is out of scope for MSF.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">
                MSF is designed to operate in a wide range of application domains.
                It is optimized for applications with regular upstream traffic (from the nodes to the DODAG root).<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">
                This specification follows the recommended structure of an SF specification, given in Appendix A of <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span>, with the following adaptations:<a href="#section-1-6" class="pilcrow">¶</a></p>
<ul>
<li id="section-1-7.1">
                    We have reordered some sections, in particular to have the section on the node behavior at boot (<a href="#sec_boot" class="xref">Section 4</a>) appear early in this specification.<a href="#section-1-7.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-7.2">
                    We added sections on
                    the interface to the minimal 6TiSCH configuration (<a href="#sec_minimal" class="xref">Section 2</a>),
                    the use of the SIGNAL command (<a href="#sec_signal" class="xref">Section 6</a>),
                    the MSF constants (<a href="#sec_constants" class="xref">Section 14</a>),
                    the MSF statistics (<a href="#sec_stats" class="xref">Section 15</a>).<a href="#section-1-7.2" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sec_minimal">
<section id="section-2">
      <h2 id="name-interface-to-the-minimal-6t">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-interface-to-the-minimal-6t" class="section-name selfRef">Interface to the Minimal 6TiSCH Configuration</a>
      </h2>
<p id="section-2-1">
                In a TSCH network, time is sliced up into time slots.
                The time slots are grouped as one of more slotframes which repeat over time.
                The TSCH schedule instructs a node what to do at each time slots, such as transmit, receive or sleep <span>[<a href="#RFC7554" class="xref">RFC7554</a>]</span>.
                In case of a slot to transmit or receive, a channel is assigned to the time slot.
                The tuple (slot, channel) is indicated as a cell of TSCH schedule.
                MSF is one of the policies defining how to manage the TSCH schedule.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">
                A node implementing MSF SHOULD implement the Minimal 6TiSCH Configuration <span>[<a href="#RFC8180" class="xref">RFC8180</a>]</span>, which defines the "minimal cell", a single shared cell providing minimal connectivity between the nodes in the network.
                The MSF implementation provided in this specification is based on the implementation of the Minimal 6TiSCH Configuration.
                However, an implementor MAY implement MSF based on other specifications as long as the specification defines a way to advertise the EB/DIO among the network.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">
                MSF uses the minimal cell for broadcast frames such as Enhanced Beacons (EBs) <span>[<a href="#IEEE802154-2015" class="xref">IEEE802154-2015</a>]</span> and broadcast DODAG Information Objects (DIOs) <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>.
                Cells scheduled by MSF are meant to be used only for unicast frames.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">
                To ensure there is enough bandwidth available on the minimal cell, a node implementing MSF SHOULD enforce some rules for limiting the traffic of broadcast frames.
                For example, the Trickle operation defined in <span>[<a href="#RFC6206" class="xref">RFC6206</a>]</span> is applied on DIO messages <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>.
                This behavior is out of the scope of MSF.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">
                MSF RECOMMENDS the use of 3 slotframes. 
                MSF schedules autonomous cells at Slotframe 1 (<a href="#sec_autonomous_cells" class="xref">Section 3</a>) and 6P negotiated cells at Slotframe 2 (<a href="#sec_add_delete" class="xref">Section 5</a>) , while Slotframe 0 is used for the bootstrap traffic as defined in the Minimal 6TiSCH Configuration.
                It is RECOMMENDED to use the same slotframe length for Slotframe 0, 1 and 2.
                Thus it is possible to avoid the scheduling collision between the autonomous cells and 6P negotiated cells (<a href="#sec_autonomous_cells" class="xref">Section 3</a>).
                The default slotframe length (SLOTFRAME_LENGTH) is RECOMMENDED for Slotframe 0, 1 and 2, although any value can be advertised in the EBs.<a href="#section-2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_autonomous_cells">
<section id="section-3">
      <h2 id="name-autonomous-cells">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-autonomous-cells" class="section-name selfRef">Autonomous Cells</a>
      </h2>
<p id="section-3-1">
                MSF nodes initialize Slotframe 1 with a set of default cells for unicast communication with their neighbors.
                These cells are called 'autonomous cells', because they are maintained autonomously by each node without negotiation through 6P.
                Cells scheduled by 6P transaction are called 'negotiated cells' which are reserved on Slotframe 2.
                How to schedule negotiated cells is detailed in <a href="#sec_add_delete" class="xref">Section 5</a>.
                There are two types of autonomous cells:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-3-2.1">
                    Autonomous Rx Cell (AutoRxCell), one cell at a [slotOffset,channelOffset] computed as a hash of the EUI64 of the node itself (detailed next).
                    Its cell options bits are assigned as TX=0, RX=1, SHARED=0.<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-3-2.2">
                    Autonomous Tx Cell (AutoTxCell), one cell at a [slotOffset,channelOffset] computed as a hash of the layer 2 EUI64 destination address in the unicast frame to be transmitted (detailed in <a href="#sec_join" class="xref">Section 4.4</a>).
                    Its cell options bits are assigned as TX=1, RX=0, SHARED=1.<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-3">
                To compute a [slotOffset,channelOffset] from an EUI64 address, nodes MUST use the hash function SAX <span>[<a href="#SAX-DASFAA" class="xref">SAX-DASFAA</a>]</span>.
                The coordinates are computed to distribute the cells across all channel offsets, and all but the first slot offset of Slotframe 1.
                The first time offset is skipped to avoid colliding with the minimal cell in Slotframe 0.
                The slot coordinates derived from a given EUI64 address are computed as follows:<a href="#section-3-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-3-4.1">slotOffset(MAC) = 1 + hash(EUI64, length(Slotframe_1) - 1)<a href="#section-3-4.1" class="pilcrow">¶</a>
</li>
        <li id="section-3-4.2">channelOffset(MAC) = hash(EUI64, NUM_CH_OFFSET)<a href="#section-3-4.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-5">
                The second input parameter defines the maximum return value of the hash function.
                Other optional parameters defined in SAX determine the performance of SAX hash function.
                Those parameters could be broadcasted in EB frame or pre-configured.
                For interoperability purposes, an example how the hash function is implemented is detailed in <a href="#sec_hash_function" class="xref">Appendix B</a>.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">
                AutoTxCell is not permanently installed in the schedule but added/deleted on demand when there is a frame to sent.
                Throughout the network lifetime, nodes maintain the autonomous cells as follows:<a href="#section-3-6" class="pilcrow">¶</a></p>
<ul>
<li id="section-3-7.1">
                    Add an AutoTxCell to the layer 2 destination address which is indicated in a frame when there is no 6P negotiated Tx cell in schedule for that frame to transmit.<a href="#section-3-7.1" class="pilcrow">¶</a>
</li>
        <li id="section-3-7.2">
          <p id="section-3-7.2.1">
                        Remove an AutoTxCell when:<a href="#section-3-7.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-3-7.2.2.1">there is no frame to transmit on that cell, or<a href="#section-3-7.2.2.1" class="pilcrow">¶</a>
</li>
            <li id="section-3-7.2.2.2">there is at least one 6P negotiated Tx cell in the schedule for the frames to transmit.<a href="#section-3-7.2.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li id="section-3-7.3">The AutoRxCell MUST always remain scheduled after synchronized.<a href="#section-3-7.3" class="pilcrow">¶</a>
</li>
        <li id="section-3-7.4">6P CLEAR MUST NOT erase any autonomous cells.<a href="#section-3-7.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-8">
                Because of hash collisions, there will be cases that the AutoTxCell and AutoRxCell are scheduled at the same slot offset and/or channel offset.
                In such cases, AutoTxCell always take precedence over AutoRxCell.
                In case of conflicting with a negotiated cell, autonomous cells take precedence over negotiated cell, which is stated in <span>[<a href="#IEEE802154-2015" class="xref">IEEE802154-2015</a>]</span>.
                However, when the Slotframe 0, 1 and 2 use the same length value, it is possible for negotiated cell to avoid the collision with AutoRxCell.<a href="#section-3-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_boot">
<section id="section-4">
      <h2 id="name-node-behavior-at-boot">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-node-behavior-at-boot" class="section-name selfRef">Node Behavior at Boot</a>
      </h2>
<p id="section-4-1">
                This section details the behavior the node SHOULD follow from the moment it is switched on, until it has successfully joined the network.
                Alternative behaviors may involved, for example, when alternative security solution is used for the network. 
                <a href="#sec_start_state" class="xref">Section 4.1</a> details the start state;
                <a href="#sec_end_state" class="xref">Section 4.8</a>   details the end   state.
                The other sections detail the 6 steps of the joining process.
                We use the term "pledge" and "joined node", as defined in <span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="sec_start_state">
<section id="section-4.1">
        <h3 id="name-start-state">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-start-state" class="section-name selfRef">Start State</a>
        </h3>
<p id="section-4.1-1">
                    A node implementing MSF SHOULD implement the Minimal Security Framework for 6TiSCH <span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>.
                    As a corollary, this means that a pledge, before being switched on, may be pre-configured with the Pre-Shared Key (PSK) for joining, as well as any other configuration detailed in (<span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>).
                    This is not necessary if the node implements a security solution not based on PSKs, such as (<span>[<a href="#I-D.ietf-6tisch-dtsecurity-zerotouch-join" class="xref">I-D.ietf-6tisch-dtsecurity-zerotouch-join</a>]</span>).<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_frequency">
<section id="section-4.2">
        <h3 id="name-step-1-choosing-frequency">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-step-1-choosing-frequency" class="section-name selfRef">Step 1 - Choosing Frequency</a>
        </h3>
<p id="section-4.2-1">
                    When switched on, the pledge randomly chooses a frequency among the available frequencies, and starts listening for EBs on that frequency.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_ebs">
<section id="section-4.3">
        <h3 id="name-step-2-receiving-ebs">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-step-2-receiving-ebs" class="section-name selfRef">Step 2 - Receiving EBs</a>
        </h3>
<p id="section-4.3-1">
                    Upon receiving the first EB, the pledge continue listening for additional EBs to learn:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact" id="section-4.3-2">
          <li id="section-4.3-2.1">the number of neighbors N in its vicinity<a href="#section-4.3-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.3-2.2">which neighbor to choose as a Join Proxy (JP) for the joining process<a href="#section-4.3-2.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-4.3-3">
                    While the exact behavior is implementation-specific, it is RECOMMENDED that after having received the first EB, a node keeps listen for at most MAX_EB_DELAY seconds until it has received EBs from NUM_NEIGHBOURS_TO_WAIT distinct neighbors, which is defined in <span>[<a href="#RFC8180" class="xref">RFC8180</a>]</span>.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">
                    During this step, the pledge only gets synchronized when it received enough EB from the network it wishes to join.
                    How to decide whether an EB originates from a node from the network it wishes to join is implementation-specific, but MAY involve filtering EBs by
                    the PAN ID field it contains,
                    the presence and contents of the IE defined in <span>[<a href="#I-D.ietf-6tisch-enrollment-enhanced-beacon" class="xref">I-D.ietf-6tisch-enrollment-enhanced-beacon</a>]</span>, or
                    the key used to authenticate it.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">
                    The decision of which neighbor to use as a JP is implementation-specific, and discussed in <span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_join">
<section id="section-4.4">
        <h3 id="name-step-3-setting-up-autonomou">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-step-3-setting-up-autonomou" class="section-name selfRef">Step 3 - Setting up Autonomous Cells for the Join Process</a>
        </h3>
<p id="section-4.4-1">
                    After selected a JP, a node generates a Join Request and installs an AutoTxCell to the JP.
                    The Join Request is then sent by the pledge to its JP over the AutoTxCell.
                    The AutoTxCell is removed by the pledge when the Join Request is sent out.
                    The JP receives the Join Request through its AutoRxCell.
                    Then it forwards the Join Request to the JRC, possibly over multiple hops, over the 6P negotiated Tx cells.
                    Similarly, the JRC sends the Join Response to the JP, possibly over multiple hops, over AutoTxCells or the 6P negotiated Tx cells.
                    When JP received the Join Response from the JRC, it installs an AutoTxCell to the pledge and sends that Join Response to the pledge over AutoTxCell. 
                    The AutoTxCell is removed by the JP when the Join Response is sent out.
                    The pledge receives the Join Response from its AutoRxCell, thereby learns the keying material used in the network, as well as other configurations, and becomes a "joined node".<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">
                    When 6LoWPAN Neighbor Dicovery (<span>[<a href="#RFC8505" class="xref">RFC8505</a>]</span>) (ND) is implemented, the unicast packets used by ND are sent on the AutoTxCell.
                    The specific process how the ND works during the Join process is detailed in <span>[<a href="#I-D.ietf-6tisch-architecture" class="xref">I-D.ietf-6tisch-architecture</a>]</span>.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_rank">
<section id="section-4.5">
        <h3 id="name-step-4-acquiring-a-rpl-rank">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-step-4-acquiring-a-rpl-rank" class="section-name selfRef">Step 4 - Acquiring a RPL Rank</a>
        </h3>
<p id="section-4.5-1">
                    Per <span>[<a href="#RFC6550" class="xref">RFC6550</a>]</span>, the joined node
                    receives DIOs,
                    computes its own Rank, and
                    selects a routing parent.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_negotiated_cells">
<section id="section-4.6">
        <h3 id="name-step-5-setting-up-first-tx-">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-step-5-setting-up-first-tx-" class="section-name selfRef">Step 5 - Setting up first Tx negotiated Cells</a>
        </h3>
<p id="section-4.6-1">
                    Once it has selected a routing parent, the joined node MUST generate a 6P ADD Request and install an AutoTxCell to that parent.
                    The 6P ADD Request is sent out through the AutoTxCell with the following fields:<a href="#section-4.6-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.6-2.1">CellOptions: set to TX=1,RX=0,SHARED=0<a href="#section-4.6-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.6-2.2">NumCells: set to 1<a href="#section-4.6-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-4.6-2.3">CellList: at least 5 cells, chosen according to <a href="#sec_celllist" class="xref">Section 8</a><a href="#section-4.6-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.6-3">
                    The joined node removes the AutoTxCell to the selected parent when the 6P Request is sent out.
                    That parent receives the 6P ADD Request from its AutoRxCell.
                    Then it generates a 6P ADD Response and installs an AutoTxCell to the joined node.
                    When the parent sends out the 6P ADD Response, it MUST remove that AutoTxCell.
                    The joined node receives the 6P ADD Response from its AutoRxCell and completes the 6P transaction.
                    In case the 6P ADD transaction failed, the node MUST issue another 6P ADD Request and repeat until the Tx cell is installed to the parent.<a href="#section-4.6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_eb_dio">
<section id="section-4.7">
        <h3 id="name-step-6-send-ebs-and-dios">
<a href="#section-4.7" class="section-number selfRef">4.7. </a><a href="#name-step-6-send-ebs-and-dios" class="section-name selfRef">Step 6 - Send EBs and DIOs</a>
        </h3>
<p id="section-4.7-1">
                    The node starts sending EBs and DIOs on the minimal cell, while following the transmit rules for broadcast frames from <a href="#sec_minimal" class="xref">Section 2</a>.<a href="#section-4.7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_end_state">
<section id="section-4.8">
        <h3 id="name-end-state">
<a href="#section-4.8" class="section-number selfRef">4.8. </a><a href="#name-end-state" class="section-name selfRef">End State</a>
        </h3>
<p id="section-4.8-1">
                    For a new node, the end state of the joining process is:<a href="#section-4.8-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.8-2.1">it is synchronized to the network<a href="#section-4.8-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.8-2.2">it is using the link-layer keying material it learned through the secure joining process<a href="#section-4.8-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-4.8-2.3">it has selected one neighbor as its routing parent<a href="#section-4.8-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-4.8-2.4">it has one AutRxCell<a href="#section-4.8-2.4" class="pilcrow">¶</a>
</li>
          <li id="section-4.8-2.5">it has one negotiated Tx cell to the selected parent<a href="#section-4.8-2.5" class="pilcrow">¶</a>
</li>
          <li id="section-4.8-2.6">it starts to send DIOs, potentially serving as a router for other nodes' traffic<a href="#section-4.8-2.6" class="pilcrow">¶</a>
</li>
          <li id="section-4.8-2.7">it starts to send EBs,  potentially serving as a JP for new pledge<a href="#section-4.8-2.7" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sec_add_delete">
<section id="section-5">
      <h2 id="name-rules-for-adding-deleting-c">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-rules-for-adding-deleting-c" class="section-name selfRef">Rules for Adding/Deleting Cells</a>
      </h2>
<p id="section-5-1">
                Once a node has joined the 6TiSCH network, it adds/deletes/relocates cells with the selected parent for three reasons:<a href="#section-5-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-5-2.1">to match the link-layer resources to the traffic between the node and the selected parent (<a href="#sec_traffic" class="xref">Section 5.1</a>)<a href="#section-5-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-5-2.2">to handle switching parent or(<a href="#sec_switching_parent" class="xref">Section 5.2</a>)<a href="#section-5-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-5-2.3">to handle a schedule collision (<a href="#sec_collision" class="xref">Section 5.3</a>)<a href="#section-5-2.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-5-3">
                Those cells are called 'negotiated cells' as they are scheduled through 6P, negotiated with the node's parent.
                Without specific declaring, all cells mentioned in this section are negotiated cells and they are installed at Slotframe 2.<a href="#section-5-3" class="pilcrow">¶</a></p>
<div id="sec_traffic">
<section id="section-5.1">
        <h3 id="name-adapting-to-traffic">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-adapting-to-traffic" class="section-name selfRef">Adapting to Traffic</a>
        </h3>
<p id="section-5.1-1">
                    A node implementing MSF MUST implement the behavior described in this section.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">
                    The goal of MSF is to manage the communication schedule in the 6TiSCH schedule in a distributed manner.
                    For a node, this translates into monitoring the current usage of the cells it has to the selected parent:<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.1-3.1">
                        If the node determines that the number of link-layer frames it is attempting to exchange with the selected parent per unit of time is larger than the capacity offered by the TSCH negotiated cells it has scheduled with it, the node issues a 6P ADD command to that parent to add cells to the TSCH schedule.<a href="#section-5.1-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.1-3.2">
                        If the traffic is lower than the capacity, the node issues a 6P DELETE command to that parent to delete cells from the TSCH schedule.<a href="#section-5.1-3.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.1-4">
                    The node MUST maintain the following counters for the selected parent on both negotiated Tx and Rx cells:<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<dl class="dlParallel dlCompact" id="section-5.1-5">
          <dt id="section-5.1-5.1">NumCellsElapsed :</dt>
          <dd style="margin-left: 2.0em" id="section-5.1-5.2">
                        Counts the number of negotiated cells that have elapsed since the counter was initialized. 
                        This counter is initialized at 0.
                        When the current cell is declared as a negotiated cell to the selected parent, NumCellsElapsed is incremented by exactly 1, regardless of whether the cell is used to transmit/receive a frame.<a href="#section-5.1-5.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.1-5.3">NumCellsUsed:</dt>
          <dd style="margin-left: 2.0em" id="section-5.1-5.4">
            <p id="section-5.1-5.4.1">
                            Counts the number of negotiated cells that have been used. 
                            This counter is initialized at 0.
                            NumCellsUsed is incremented by exactly 1 when, during a negotiated cell to the selected parent, either of the following happens:<a href="#section-5.1-5.4.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.1-5.4.2.1">
                                The node sends a frame to the parent.
                                The counter increments regardless of whether a link-layer acknowledgment was received or not.<a href="#section-5.1-5.4.2.1" class="pilcrow">¶</a>
</li>
              <li id="section-5.1-5.4.2.2">
                                The node receives a valid frame from the parent.
                                The counter increments only when the frame is a valid IEEE802.15.4 frame.<a href="#section-5.1-5.4.2.2" class="pilcrow">¶</a>
</li>
            </ul>
</dd>
</dl>
<p id="section-5.1-6">
                    The cell option of cells listed in CellList in 6P Request frame SHOULD be either Tx=1 only or Rx=1 only.
                    Both NumCellsElapsed and NumCellsUsed counters can be used to both type of negotiated cells.<a href="#section-5.1-6" class="pilcrow">¶</a></p>
<p id="section-5.1-7">
                    As there is no negotiated Rx Cell installed at initial time, the AutoRxCell is taken into account as well for downstream traffic adaptation.
                    In this case:<a href="#section-5.1-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.1-8.1">
                        NumCellsElapsed is incremented by exactly 1 when the current cell is AutoRxCell.<a href="#section-5.1-8.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.1-8.2">
                        NumCellsUsed is incremented by exactly 1 when the node receives a frame from the selected parent on AutoRxCell.<a href="#section-5.1-8.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.1-9">
                    Implementors MAY choose to create the same counters for each neighbor, and add them as additional statistics in the neighbor table.<a href="#section-5.1-9" class="pilcrow">¶</a></p>
<p id="section-5.1-10">
                    The counters are used as follows:<a href="#section-5.1-10" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact" id="section-5.1-11">
          <li id="section-5.1-11.1">
                        Both NumCellsElapsed and NumCellsUsed are initialized to 0 when the node boots.<a href="#section-5.1-11.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.1-11.2">
            <p id="section-5.1-11.2.1">
                            When the value of NumCellsElapsed reaches MAX_NUM_CELLS:<a href="#section-5.1-11.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.1-11.2.2.1">If NumCellsUsed &gt; LIM_NUMCELLSUSED_HIGH, trigger 6P to add    a single cell to the selected parent<a href="#section-5.1-11.2.2.1" class="pilcrow">¶</a>
</li>
              <li id="section-5.1-11.2.2.2">If NumCellsUsed &lt; LIM_NUMCELLSUSED_LOW,  trigger 6P to remove a single cell to the selected parent<a href="#section-5.1-11.2.2.2" class="pilcrow">¶</a>
</li>
              <li id="section-5.1-11.2.2.3">Reset both NumCellsElapsed  and NumCellsUsed to 0 and go to step 2.<a href="#section-5.1-11.2.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</li>
        </ol>
<p id="section-5.1-12">
                    The value of MAX_NUM_CELLS is chosen according to the traffic type of the network.
                    Generally speaking, the larger the value MAX_NUM_CELLS is, the more accurate the cell usage is calculated.
                    The 6P traffic overhead using a larger value of MAX_NUM_CELLS could be reduced as well.
                    Meanwhile, the latency won't increase much by using a larger value of MAX_NUM_CELLS for periodic traffic type.
                    For burst traffic type, larger value of MAX_NUM_CELLS indeed introduces higher latency.
                    The latency caused by slight changes of traffic load can be absolved by the additional scheduled cells. 
                    In this sense, MSF is a scheduling function trading latency with energy by scheduling more cells than needed.
                    It is recommended to set MAX_NUM_CELLS value at least 4x of the maximum number of used cells in a slot frame in recent history.
                    For example, a 2 packets/slotframe traffic load results an average 4 cells scheduled (2 cells are used), using at least the value of double number of scheduled cells (which is 8) as MAX_NUM_CELLS gives a good resolution on cell usage calculation.<a href="#section-5.1-12" class="pilcrow">¶</a></p>
<p id="section-5.1-13">
                    In case that a node booted or disappeared from the network, the cell reserved at the selected parent may be kept in the schedule forever.
                    A clean-up mechanism MUST be provided to resolve this issue.
                    The clean-up mechanism is implementation-specific.
                    It could either be a periodic polling to the neighbors the nodes have negotiated cells with, or monitoring the activities on those cells. 
                    The goal is to confirm those negotiated cells are not used anymore by the associated neighbors and remove them from the schedule.<a href="#section-5.1-13" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_switching_parent">
<section id="section-5.2">
        <h3 id="name-switching-parent">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-switching-parent" class="section-name selfRef">Switching Parent</a>
        </h3>
<p id="section-5.2-1">
                    A node implementing MSF SHOULD implement the behavior described in this section.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">
                    Part of its normal operation, the RPL routing protocol can have a node switch parent.
                    The procedure for switching from the old parent to the new parent is:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact" id="section-5.2-3">
          <li id="section-5.2-3.1">the node counts the number of negotiated cells it has per slotframe to the old parent<a href="#section-5.2-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.2-3.2">the node triggers one or more 6P ADD commands to schedule the same number of negotiated cells with same cell options to the new parent<a href="#section-5.2-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-5.2-3.3">when that successfully completes, the node issues a 6P CLEAR command to its old parent<a href="#section-5.2-3.3" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-5.2-4">
                    For what type of negotiated cell should be installed first, it depends on which traffic has the higher priority, upstream or downstream, which is application-specific and out-of-scope of MSF.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_collision">
<section id="section-5.3">
        <h3 id="name-handling-schedule-collision">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-handling-schedule-collision" class="section-name selfRef">Handling Schedule Collisions</a>
        </h3>
<p id="section-5.3-1">
                    A node implementing MSF SHOULD implement the behavior described in this section.
                    The "MUST" statements in this section hence only apply if the node implements schedule collision handling.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">
                    Since scheduling is entirely distributed, there is a non-zero probability that two pairs of nearby neighbor nodes schedule a negotiated cell at the same [slotOffset,channelOffset] location in the TSCH schedule.
                    In that case, data exchanged by the two pairs may collide on that cell.
                    We call this case a "schedule collision".<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3">
                    The node MUST maintain the following counters for each negotiated Tx cell to the selected parent:<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<dl class="dlParallel dlCompact" id="section-5.3-4">
          <dt id="section-5.3-4.1">NumTx:</dt>
          <dd style="margin-left: 2.0em" id="section-5.3-4.2">
                        Counts the number of transmission attempts on that cell.
                        Each time the node attempts to transmit a frame on that cell, NumTx is incremented by exactly 1.<a href="#section-5.3-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-4.3">NumTxAck:</dt>
          <dd style="margin-left: 2.0em" id="section-5.3-4.4">
                        Counts the number of successful transmission attempts on that cell.
                        Each time the node receives an acknowledgment for a transmission attempt, NumTxAck is incremented by exactly 1.<a href="#section-5.3-4.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.3-5">
                    Since both NumTx and NumTxAck are initialized to 0, we necessarily have NumTxAck &lt;= NumTx.
                    We call Packet Delivery Ratio (PDR) the ratio NumTxAck/NumTx; and represent it as a percentage.
                    A cell with PDR=50% means that half of the frames transmitted are not acknowledged.<a href="#section-5.3-5" class="pilcrow">¶</a></p>
<p id="section-5.3-6">
                    Each time the node switches parent (or during the join process when the node selects a parent for the first time), both NumTx and NumTxAck MUST be reset to 0.
                    They increment over time, as the schedule is executed and the node sends frames to that parent.
                    When NumTx reaches MAX_NUMTX, both NumTx and NumTxAck MUST be divided by 2.
                    For example, when MAX_NUMTX is set to 256, from NumTx=255 and NumTxAck=127, the counters become NumTx=128 and NumTxAck=64 if one frame is sent to the parent with an Acknowledgment received.
                    This operation does not change the value of the PDR, but allows the counters to keep incrementing.
                    The value of MAX_NUMTX is implementation-specific.<a href="#section-5.3-6" class="pilcrow">¶</a></p>
<p id="section-5.3-7">
                    The key for detecting a schedule collision is that, if a node has several cells to the selected parent, all cells should exhibit the same PDR.
                    A cell which exhibits a PDR significantly lower than the others indicates than there are collisions on that cell.<a href="#section-5.3-7" class="pilcrow">¶</a></p>
<p id="section-5.3-8">
                    Every HOUSEKEEPINGCOLLISION_PERIOD, the node executes the following steps:<a href="#section-5.3-8" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact" id="section-5.3-9">
          <li id="section-5.3-9.1">
                        It computes, for each negotiated Tx cell with the parent (not for the autonomous cell), that cell's PDR.<a href="#section-5.3-9.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-9.2">
                        Any cell that hasn't yet had NumTx divided by 2 since it was last reset is skipped in steps 3 and 4.
                        This avoids triggering cell relocation when the values of NumTx and NumTxAck are not statistically significant yet.<a href="#section-5.3-9.2" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-9.3">
                        It identifies the cell with the highest PDR.<a href="#section-5.3-9.3" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-9.4">
                        For any other cell, it compares its PDR against that of the cell with the highest PDR.
                        If the difference is larger than RELOCATE_PDRTHRES, it triggers the relocation of that cell using a 6P RELOCATE command.<a href="#section-5.3-9.4" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-5.3-10">
                    The RELOCATION for negotiated Rx cells is not supported by MSF.<a href="#section-5.3-10" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec_signal">
<section id="section-6">
      <h2 id="name-6p-signal-command">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-6p-signal-command" class="section-name selfRef">6P SIGNAL command</a>
      </h2>
<p id="section-6-1">
                The 6P SIGNAL command is not used by MSF.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_sfid">
<section id="section-7">
      <h2 id="name-scheduling-function-identif">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-scheduling-function-identif" class="section-name selfRef">Scheduling Function Identifier</a>
      </h2>
<p id="section-7-1">
                The Scheduling Function Identifier (SFID) of MSF is IANA_6TISCH_SFID_MSF.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_celllist">
<section id="section-8">
      <h2 id="name-rules-for-celllist">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-rules-for-celllist" class="section-name selfRef">Rules for CellList</a>
      </h2>
<p id="section-8-1">
                MSF uses 2-step 6P Transactions exclusively.
                6P transactions are only initiated by a node towards its parent.
                As a result, the cells to put in the CellList of a 6P ADD command, and in the candidate CellList of a RELOCATE command, are chosen by the node initiating the 6P transaction.
                In both cases, the same rules apply:<a href="#section-8-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-8-2.1">The CellList is RECOMMENDED to have 5 or more cells.<a href="#section-8-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.2">Each cell in the CellList MUST have a different slotOffset value.<a href="#section-8-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.3">For each cell in the CellList, the node MUST NOT have any scheduled cell on the same slotOffset.<a href="#section-8-2.3" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.4">The slotOffset value of any cell in the CellList MUST NOT be the same as the slotOffset of the minimal cell (slotOffset=0).<a href="#section-8-2.4" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.5">The slotOffset    of a cell in the CellList SHOULD be randomly and uniformly chosen among all the slotOffset values that satisfy the restrictions above.<a href="#section-8-2.5" class="pilcrow">¶</a>
</li>
        <li id="section-8-2.6">The channelOffset of a cell in the CellList SHOULD be randomly and uniformly chosen in [0..numFrequencies], where numFrequencies represents the number of frequencies a node can communicate on.<a href="#section-8-2.6" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-8-3">
                As a consequence of randomly cell selection, there is a non-zero chance that nodes in the vicinity installed cells with same slotOffset and channelOffset.
                An implementer MAY implement a strategy to monitor the candidate cells before adding them in CellList to avoid collision.
                For example, a node MAY maintain a candidate cell pool for the CellList.
                The candidate cells in the pool are pre-configured as Rx cells to promiscuously listen to detect transmissions on those cells.
                If IEEE802.15.4 transmissions are observed on one cell over multiple iterations of the schedule, that cell is probably used by a TSCH neighbor.
                It is moved out from the pool and a new cell is selected as a candidate cell.
                The cells in CellList are picked from the candidate pool directly when required.<a href="#section-8-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_timeout">
<section id="section-9">
      <h2 id="name-6p-timeout-value">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-6p-timeout-value" class="section-name selfRef">6P Timeout Value</a>
      </h2>
<p id="section-9-1">
                It is calculated for the worst case that a 6P response is received, which means the 6P response is sent out successfully at the very latest retransmission.
                And for each retransmission, it backs-off with largest value.
                Hence the 6P timeout value is calculated as ((2^MAXBE)-1)*MAXRETRIES*SLOTFRAME_LENGTH, where:<a href="#section-9-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-9-2.1">MAXBE is the maximum backoff exponent used<a href="#section-9-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-9-2.2">MAXRETRIES is the maximum retransmission times<a href="#section-9-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-9-2.3">SLOTFRAME_LENGTH represents the length of slotframe<a href="#section-9-2.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sec_ordering">
<section id="section-10">
      <h2 id="name-rule-for-ordering-cells">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-rule-for-ordering-cells" class="section-name selfRef">Rule for Ordering Cells</a>
      </h2>
<p id="section-10-1">
                Cells are ordered slotOffset first, channelOffset second.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">
                The following sequence is correctly ordered (each element represents the [slottOffset,channelOffset] of a cell in the schedule):<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">
                [1,3],[1,4],[2,0],[5,3],[6,0],[6,3],[7,9]<a href="#section-10-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_metadata">
<section id="section-11">
      <h2 id="name-meaning-of-the-metadata-fie">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-meaning-of-the-metadata-fie" class="section-name selfRef">Meaning of the Metadata Field</a>
      </h2>
<p id="section-11-1">
                The Metadata field is not used by MSF.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_error">
<section id="section-12">
      <h2 id="name-6p-error-handling">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-6p-error-handling" class="section-name selfRef">6P Error Handling</a>
      </h2>
<p id="section-12-1">
                Section 6.2.4 of <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span> lists the 6P Return Codes.
                <a href="#tab_error" class="xref">Figure 1</a> lists the same error codes, and the behavior a node implementing MSF SHOULD follow.<a href="#section-12-1" class="pilcrow">¶</a></p>
<span id="name-recommended-behavior-for-ea"></span><div id="tab_error">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-12-2.1">
<pre>
       +-----------------+----------------------+
       | Code            | RECOMMENDED behavior |
       +-----------------+----------------------+
       | RC_SUCCESS      | nothing              |
       | RC_EOL          | nothing              |
       | RC_ERR          | quarantine           |
       | RC_RESET        | quarantine           |
       | RC_ERR_VERSION  | quarantine           |
       | RC_ERR_SFID     | quarantine           |
       | RC_ERR_SEQNUM   | clear                |
       | RC_ERR_CELLLIST | clear                |
       | RC_ERR_BUSY     | waitretry            |
       | RC_ERR_LOCKED   | waitretry            |
       +-----------------+----------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-recommended-behavior-for-ea" class="selfRef">Recommended behavior for each 6P Error Code.</a>
        </figcaption></figure>
</div>
<p id="section-12-3">
                The meaning of each behavior from <a href="#tab_error" class="xref">Figure 1</a> is:<a href="#section-12-3" class="pilcrow">¶</a></p>
<dl class="dlParallel dlCompact" id="section-12-4">
        <dt id="section-12-4.1">nothing:</dt>
        <dd style="margin-left: 2.0em" id="section-12-4.2">
                    Indicates that this Return Code is not an error.
                    No error handling behavior is triggered.<a href="#section-12-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-12-4.3">clear:</dt>
        <dd style="margin-left: 2.0em" id="section-12-4.4">
                    Abort the 6P Transaction.
                    Issue a 6P CLEAR command to that neighbor (this command may fail at the link layer).
                    Remove all cells scheduled with that neighbor from the local schedule.<a href="#section-12-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-12-4.5">quarantine:</dt>
        <dd style="margin-left: 2.0em" id="section-12-4.6">
                    Same behavior as for "clear".
                    In addition, remove the node from the neighbor and routing tables.
                    Place the node's identifier in a quarantine list for QUARANTINE_DURATION.
                    When in quarantine, drop all frames received from that node.<a href="#section-12-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-12-4.7">waitretry:</dt>
        <dd style="margin-left: 2.0em" id="section-12-4.8">
                    Abort the 6P Transaction.
                    Wait for a duration randomly and uniformly chosen in [WAIT_DURATION_MIN,WAIT_DURATION_MAX].
                    Retry the same transaction.<a href="#section-12-4.8" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="sec_inconsistency">
<section id="section-13">
      <h2 id="name-schedule-inconsistency-hand">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-schedule-inconsistency-hand" class="section-name selfRef">Schedule Inconsistency Handling</a>
      </h2>
<p id="section-13-1">
                The behavior when schedule inconsistency is detected is explained in <a href="#tab_error" class="xref">Figure 1</a>, for 6P Return Code RC_ERR_SEQNUM.<a href="#section-13-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_constants">
<section id="section-14">
      <h2 id="name-msf-constants">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-msf-constants" class="section-name selfRef">MSF Constants</a>
      </h2>
<p id="section-14-1"><a href="#tab_constants" class="xref">Figure 2</a> lists MSF Constants and their RECOMMENDED values.<a href="#section-14-1" class="pilcrow">¶</a></p>
<span id="name-msf-constants-and-their-rec"></span><div id="tab_constants">
<figure id="figure-2">
        <div class="artwork art-text alignLeft" id="section-14-2.1">
<pre>
        +------------------------------+-------------------+
        | Name                         | RECOMMENDED value |
        +------------------------------+-------------------+
        | NUM_CH_OFFSET                |       16          |
        | KA_PERIOD                    |        1 min      |
        | LIM_NUMCELLSUSED_HIGH        |       75          |
        | LIM_NUMCELLSUSED_LOW         |       25          |
        | MAX_NUM_CELLS                |      100          |
        | HOUSEKEEPINGCOLLISION_PERIOD |        1 min      |
        | RELOCATE_PDRTHRES            |       50 %        |
        | SLOTFRAME_LENGTH             |      101 slots    |
        | QUARANTINE_DURATION          |        5 min      |
        | WAIT_DURATION_MIN            |       30 s        |
        | WAIT_DURATION_MAX            |       60 s        |
        +------------------------------+-------------------+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-msf-constants-and-their-rec" class="selfRef">MSF Constants and their RECOMMENDED values.</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="sec_stats">
<section id="section-15">
      <h2 id="name-msf-statistics">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-msf-statistics" class="section-name selfRef">MSF Statistics</a>
      </h2>
<p id="section-15-1"><a href="#tab_stats" class="xref">Figure 3</a> lists MSF Statistics and their RECOMMENDED width.<a href="#section-15-1" class="pilcrow">¶</a></p>
<span id="name-msf-statistics-and-their-re"></span><div id="tab_stats">
<figure id="figure-3">
        <div class="artwork art-text alignLeft" id="section-15-2.1">
<pre>
                +-----------------+-------------------+
                | Name            | RECOMMENDED width |
                +-----------------+-------------------+
                | NumCellsElapsed |      1 byte       |
                | NumCellsUsed    |      1 byte       |
                | NumTx           |      1 byte       |
                | NumTxAck        |      1 byte       |
                +-----------------+-------------------+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-msf-statistics-and-their-re" class="selfRef">MSF Statistics and their RECOMMENDED width.</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="sec_security">
<section id="section-16">
      <h2 id="name-security-considerations">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-16-1">
                MSF defines a series of "rules" for the node to follow.
                It triggers several actions, that are carried out by the protocols defined in the following specifications:
                the Minimal IPv6 over the TSCH Mode of IEEE 802.15.4e (6TiSCH) Configuration <span>[<a href="#RFC8180" class="xref">RFC8180</a>]</span>,
                the 6TiSCH Operation Sublayer Protocol (6P) <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span>, and
                the Minimal Security Framework for 6TiSCH <span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>.
                In particular, MSF does not define a new protocol or packet format.<a href="#section-16-1" class="pilcrow">¶</a></p>
<p id="section-16-2">
                MSF uses autonomous cells for initial bootstrap and the transport of join traffic.
                Autonomous cells are computed as a hash of nodes' EUI64 addresses.
                This makes the coordinates of autonomous cell an easy target for an attacker, as EUI64 addresses are visible on the wire and are not encrypted by the link-layer security mechanism.
                With the coordinates of autonomous cells available, the attacker can launch a selective jamming attack against any nodes' AutoRxCell.
                If the attacker targets a node acting as a JP, it can prevent pledges from using that JP to join the network.
                The pledge detects such a situation through the absence of a link-layer acknowledgment for its Join Request.
                As it is expected that each pledge will have more than one JP available to join the network, one available countermeasure for the pledge is to pseudo-randomly select a new JP when the link to the previous JP appears bad.
                Such strategy alleviates the issue of the attacker randomly jamming to disturb the network but does not help in case the attacker is targeting a particular pledge.
                In that case, the attacker can jam the AutoRxCell of the pledge, in order to prevent it from receiving the join response.
                This situation should be detected through the absence of a particular node from the network and handled by the network administrator through out-of-band means, e.g. by moving the node outside the radio range of the attacker.<a href="#section-16-2" class="pilcrow">¶</a></p>
<p id="section-16-3">
                MSF adapts to traffics containing packets from IP layer. 
                It is possible that the IP packet has a non-zero DSCP (Diffserv Code Point <span>[<a href="#RFC2597" class="xref">RFC2597</a>]</span>) value in its IPv6 header.
                The decision whether to hand over that packet to MAC layer to transmit or to drop that packet belongs to the upper layer and is out of scope of MSF.
                As long as the decision is made to hand over to MAC layer to transmit, MSF will take that packet into account when adapting to traffic.<a href="#section-16-3" class="pilcrow">¶</a></p>
<p id="section-16-4">
                Note that non-zero DSCP value may imply that the traffic is originated at unauthenticated pledges, referring to <span>[<a href="#I-D.ietf-6tisch-minimal-security" class="xref">I-D.ietf-6tisch-minimal-security</a>]</span>.
                The implementation at IPv6 layer SHOULD ensure that this join traffic is rate-limited before it is passed to MSF.
                In case there is no rate limit for join traffic, intermediate nodes in the 6TiSCH network may be prone to a resource exhaustion attack, with the attacker injecting unauthenticated traffic from the network edge.
                The assumption is that the rate limiting function is aware of the available bandwidth in the 6top L3 bundle(s) towards a next hop, not directly from MSF, but from an interaction with the 6top sublayer that manages ultimately the bundles under MSF's guidance.
                How this rate limit is set is out of scope of MSF.<a href="#section-16-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_iana">
<section id="section-17">
      <h2 id="name-iana-considerations">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="sec_iana_sfid">
<section id="section-17.1">
        <h3 id="name-msf-scheduling-function-ide">
<a href="#section-17.1" class="section-number selfRef">17.1. </a><a href="#name-msf-scheduling-function-ide" class="section-name selfRef">MSF Scheduling Function Identifiers</a>
        </h3>
<p id="section-17.1-1">
                    This document adds the following number to the
                    "6P Scheduling Function Identifiers" sub-registry,
                    part of the "IPv6 over the TSCH mode of IEEE 802.15.4e (6TiSCH) parameters" registry,
                    as defined by <span>[<a href="#RFC8480" class="xref">RFC8480</a>]</span>:<a href="#section-17.1-1" class="pilcrow">¶</a></p>
<span id="name-ietf-ie-subtype-6p"></span><div id="fig_iana_sfid">
<figure id="figure-4">
          <div class="artwork art-text alignLeft" id="section-17.1-2.1">
<pre>
+----------------------+-----------------------------+-------------+
|  SFID                | Name                        | Reference   |
+----------------------+-----------------------------+-------------+
| IANA_6TISCH_SFID_MSF | Minimal Scheduling Function | RFC_THIS    |
|                      | (MSF)                       |             |
+----------------------+-----------------------------+-------------+
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-ietf-ie-subtype-6p" class="selfRef">IETF IE Subtype '6P'.</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<section id="section-18">
      <h2 id="name-references">
<a href="#section-18" class="section-number selfRef">18. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-18.1">
        <h3 id="name-normative-references">
<a href="#section-18.1" class="section-number selfRef">18.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC8180">[RFC8180]</dt>
        <dd>
<span class="refAuthor">Vilajosana, X., Ed.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, and T. Watteyne</span>, <span class="refTitle">"Minimal IPv6 over the TSCH Mode of IEEE 802.15.4e (6TiSCH) Configuration"</span>, <span class="seriesInfo">BCP 210</span>, <span class="seriesInfo">RFC 8180</span>, <span class="seriesInfo">DOI 10.17487/RFC8180</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8180">https://www.rfc-editor.org/info/rfc8180</a>&gt;</span>. </dd>
<dt id="RFC8480">[RFC8480]</dt>
        <dd>
<span class="refAuthor">Wang, Q., Ed.</span><span class="refAuthor">, Vilajosana, X.</span><span class="refAuthor">, and T. Watteyne</span>, <span class="refTitle">"6TiSCH Operation Sublayer (6top) Protocol (6P)"</span>, <span class="seriesInfo">RFC 8480</span>, <span class="seriesInfo">DOI 10.17487/RFC8480</span>, <time datetime="2018-11">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8480">https://www.rfc-editor.org/info/rfc8480</a>&gt;</span>. </dd>
<dt id="RFC7554">[RFC7554]</dt>
        <dd>
<span class="refAuthor">Watteyne, T., Ed.</span><span class="refAuthor">, Palattella, M.</span><span class="refAuthor">, and L. Grieco</span>, <span class="refTitle">"Using IEEE 802.15.4e Time-Slotted Channel Hopping (TSCH) in the Internet of Things (IoT): Problem Statement"</span>, <span class="seriesInfo">RFC 7554</span>, <span class="seriesInfo">DOI 10.17487/RFC7554</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7554">https://www.rfc-editor.org/info/rfc7554</a>&gt;</span>. </dd>
<dt id="RFC6550">[RFC6550]</dt>
        <dd>
<span class="refAuthor">Winter, T., Ed.</span><span class="refAuthor">, Thubert, P., Ed.</span><span class="refAuthor">, Brandt, A.</span><span class="refAuthor">, Hui, J.</span><span class="refAuthor">, Kelsey, R.</span><span class="refAuthor">, Levis, P.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, Struik, R.</span><span class="refAuthor">, Vasseur, JP.</span><span class="refAuthor">, and R. Alexander</span>, <span class="refTitle">"RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6550</span>, <span class="seriesInfo">DOI 10.17487/RFC6550</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6550">https://www.rfc-editor.org/info/rfc6550</a>&gt;</span>. </dd>
<dt id="RFC6206">[RFC6206]</dt>
        <dd>
<span class="refAuthor">Levis, P.</span><span class="refAuthor">, Clausen, T.</span><span class="refAuthor">, Hui, J.</span><span class="refAuthor">, Gnawali, O.</span><span class="refAuthor">, and J. Ko</span>, <span class="refTitle">"The Trickle Algorithm"</span>, <span class="seriesInfo">RFC 6206</span>, <span class="seriesInfo">DOI 10.17487/RFC6206</span>, <time datetime="2011-03">March 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6206">https://www.rfc-editor.org/info/rfc6206</a>&gt;</span>. </dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC2597">[RFC2597]</dt>
        <dd>
<span class="refAuthor">Heinanen, J.</span><span class="refAuthor">, Baker, F.</span><span class="refAuthor">, Weiss, W.</span><span class="refAuthor">, and J. Wroclawski</span>, <span class="refTitle">"Assured Forwarding PHB Group"</span>, <span class="seriesInfo">RFC 2597</span>, <span class="seriesInfo">DOI 10.17487/RFC2597</span>, <time datetime="1999-06">June 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2597">https://www.rfc-editor.org/info/rfc2597</a>&gt;</span>. </dd>
<dt id="RFC8505">[RFC8505]</dt>
        <dd>
<span class="refAuthor">Thubert, P., Ed.</span><span class="refAuthor">, Nordmark, E.</span><span class="refAuthor">, Chakrabarti, S.</span><span class="refAuthor">, and C. Perkins</span>, <span class="refTitle">"Registration Extensions for IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery"</span>, <span class="seriesInfo">RFC 8505</span>, <span class="seriesInfo">DOI 10.17487/RFC8505</span>, <time datetime="2018-11">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8505">https://www.rfc-editor.org/info/rfc8505</a>&gt;</span>. </dd>
<dt id="I-D.ietf-6tisch-minimal-security">[I-D.ietf-6tisch-minimal-security]</dt>
        <dd>
<span class="refAuthor">Vucinic, M.</span><span class="refAuthor">, Simon, J.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, and M. Richardson</span>, <span class="refTitle">"Minimal Security Framework for 6TiSCH"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6tisch-minimal-security-13</span>, <time datetime="2019-10-28">28 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6tisch-minimal-security-13">https://tools.ietf.org/html/draft-ietf-6tisch-minimal-security-13</a>&gt;</span>. </dd>
<dt id="I-D.ietf-6tisch-enrollment-enhanced-beacon">[I-D.ietf-6tisch-enrollment-enhanced-beacon]</dt>
        <dd>
<span class="refAuthor">Dujovne, D.</span><span class="refAuthor"> and M. Richardson</span>, <span class="refTitle">"IEEE 802.15.4 Information Element encapsulation of 6TiSCH Join and Enrollment Information"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6tisch-enrollment-enhanced-beacon-06</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6tisch-enrollment-enhanced-beacon-06">https://tools.ietf.org/html/draft-ietf-6tisch-enrollment-enhanced-beacon-06</a>&gt;</span>. </dd>
<dt id="I-D.ietf-6tisch-architecture">[I-D.ietf-6tisch-architecture]</dt>
        <dd>
<span class="refAuthor">Thubert, P.</span>, <span class="refTitle">"An Architecture for IPv6 over the TSCH mode of IEEE 802.15.4"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6tisch-architecture-28</span>, <time datetime="2019-10-29">29 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6tisch-architecture-28">https://tools.ietf.org/html/draft-ietf-6tisch-architecture-28</a>&gt;</span>. </dd>
<dt id="IEEE802154-2015">[IEEE802154-2015]</dt>
      <dd>
<span class="refAuthor">IEEE standard for Information Technology</span>, <span class="refTitle">"IEEE Std 802.15.4-2015 Standard for Low-Rate Wireless Personal Area Networks (WPANs)"</span>, <time datetime="2015-12">December 2015</time>. </dd>
</dl>
</section>
<section id="section-18.2">
        <h3 id="name-informative-references">
<a href="#section-18.2" class="section-number selfRef">18.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-6tisch-dtsecurity-zerotouch-join">[I-D.ietf-6tisch-dtsecurity-zerotouch-join]</dt>
        <dd>
<span class="refAuthor">Richardson, M.</span>, <span class="refTitle">"6tisch Zero-Touch Secure Join protocol"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6tisch-dtsecurity-zerotouch-join-04</span>, <time datetime="2019-07-08">8 July 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6tisch-dtsecurity-zerotouch-join-04">https://tools.ietf.org/html/draft-ietf-6tisch-dtsecurity-zerotouch-join-04</a>&gt;</span>. </dd>
<dt id="SAX-DASFAA">[SAX-DASFAA]</dt>
      <dd>
<span class="refAuthor">Ramakrishna, M.V.</span><span class="refAuthor"> and J. Zobel</span>, <span class="refTitle">"Performance in Practice of String Hashing Functions"</span>, <span class="seriesInfo">DASFAA </span>, <time datetime="1997">1997</time>. </dd>
</dl>
</section>
</section>
<div id="sec_contributors">
<section id="section-appendix.a">
      <h2 id="name-contributors">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-appendix.a-1">
                Beshr Al Nahas (Chalmers University, beshr@chalmers.se)
                Olaf Landsiedel (Chalmers University, olafl@chalmers.se)
                Yasuyuki Tanaka (Inria-Paris, yasuyuki.tanaka@inria.fr)<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_hash_function">
<section id="section-appendix.b">
      <h2 id="name-example-of-implementation-o">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-example-of-implementation-o" class="section-name selfRef">Example of Implementation of SAX hash function</a>
      </h2>
<p id="section-appendix.b-1">
                Considering the interoperability, this section provides an example of implemention SAX hash function <span>[<a href="#SAX-DASFAA" class="xref">SAX-DASFAA</a>]</span>.
                The input parameters of the function are:<a href="#section-appendix.b-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-2.1">T, which is the hashing table length<a href="#section-appendix.b-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-2.2">c, which is the characters of string s, to be hashed<a href="#section-appendix.b-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-appendix.b-3">
                In MSF, the T is replaced by the length slotframe 1.
                String s is replaced by the mote EUI64 address. The characters of the string c0, c1, ..., c7 are the 8 bytes of EUI64 address.<a href="#section-appendix.b-3" class="pilcrow">¶</a></p>
<p id="section-appendix.b-4">
                The SAX hash function requires shift operation which is defined as follow:<a href="#section-appendix.b-4" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-5.1">L_shift(v,b), which refers to left  shift variable v by b bits<a href="#section-appendix.b-5.1" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-5.2">R_shift(v,b), which refers to right shift variable v by b bits<a href="#section-appendix.b-5.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-appendix.b-6">
                The steps to calculate the hash value of SAX hash function are:<a href="#section-appendix.b-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact" id="section-appendix.b-7">
        <li id="section-appendix.b-7.1">initialize variable h to h0 and variable i to 0, where h is the intermediate hash value and i is the index of the bytes of EUI64 address<a href="#section-appendix.b-7.1" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.2">sum the value of L_shift(h,l_bit), R_shift(h,r_bit) and ci<a href="#section-appendix.b-7.2" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.3">calculate the result of exclusive or between the sum value in Step 2 and h<a href="#section-appendix.b-7.3" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.4">modulo the result of Step 3 by T<a href="#section-appendix.b-7.4" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.5">assign the result of Step 4 to h<a href="#section-appendix.b-7.5" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.6">increase i by 1<a href="#section-appendix.b-7.6" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.7">repeat Step2 to Step 6 until i reaches to 8<a href="#section-appendix.b-7.7" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-7.8">assign the result of Step 5 to h<a href="#section-appendix.b-7.8" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-appendix.b-8">
                The value of variable h is the hash value of SAX hash function.<a href="#section-appendix.b-8" class="pilcrow">¶</a></p>
<p id="section-appendix.b-9">
                The values of h0, l_bit and r_bit in Step 1 and 2 are configured as:<a href="#section-appendix.b-9" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-10.1">h0       = 0<a href="#section-appendix.b-10.1" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-10.2">l_bit    = 0<a href="#section-appendix.b-10.2" class="pilcrow">¶</a>
</li>
        <li id="section-appendix.b-10.3">r_bit    = 1<a href="#section-appendix.b-10.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-appendix.b-11">
                The appropriate values of l_bit and r_bit could vary depending on the the set of motes' EUI64 address.
                How to find those values is out of the scope of this specification.<a href="#section-appendix.b-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tengfei Chang (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Inria</span></div>
<div dir="auto" class="left"><span class="street-address">2 rue Simone Iff</span></div>
<div dir="auto" class="left">
<span class="postal-code">75012</span> <span class="locality">Paris</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tengfei.chang@inria.fr" class="email">tengfei.chang@inria.fr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Malisa Vucinic</span></div>
<div dir="auto" class="left"><span class="org">Inria</span></div>
<div dir="auto" class="left"><span class="street-address">2 rue Simone Iff</span></div>
<div dir="auto" class="left">
<span class="postal-code">75012</span> <span class="locality">Paris</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:malisa.vucinic@inria.fr" class="email">malisa.vucinic@inria.fr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Xavier Vilajosana</span></div>
<div dir="auto" class="left"><span class="org">Universitat Oberta de Catalunya</span></div>
<div dir="auto" class="left"><span class="street-address">156 Rambla Poblenou</span></div>
<div dir="auto" class="left">
<span class="postal-code">08018</span> <span class="locality">Barcelona</span> <span class="region">Catalonia</span>
</div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:xvilajosana@uoc.edu" class="email">xvilajosana@uoc.edu</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Simon Duquennoy</span></div>
<div dir="auto" class="left"><span class="org">RISE SICS</span></div>
<div dir="auto" class="left"><span class="street-address">Isafjordsgatan 22</span></div>
<div dir="auto" class="left"><span class="locality">164 29 Kista</span></div>
<div dir="auto" class="left"><span class="country-name">Sweden</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:simon.duquennoy@ri.se" class="email">simon.duquennoy@ri.se</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Diego Dujovne</span></div>
<div dir="auto" class="left"><span class="org">Universidad Diego Portales</span></div>
<div dir="auto" class="left"><span class="street-address">Escuela de Informatica y Telecomunicaciones, Av. Ejercito 441</span></div>
<div dir="auto" class="left"><span class="locality">Santiago</span></div>
<div dir="auto" class="left"><span class="region">Region Metropolitana</span></div>
<div dir="auto" class="left"><span class="country-name">Chile</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+56%20(2)%20676-8121" class="tel">+56 (2) 676-8121</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:diego.dujovne@mail.udp.cl" class="email">diego.dujovne@mail.udp.cl</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>
</body>
</html>
