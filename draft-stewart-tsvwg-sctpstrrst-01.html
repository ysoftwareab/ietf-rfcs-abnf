<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Stream Control Transmission Protocol (SCTP) Stream Reconfiguration</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Stream Control Transmission Protocol (SCTP) Stream Reconfiguration">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">R. Stewart</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Researcher</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">P. Lei</td></tr>
<tr><td class="header">Expires: August 20, 2009</td><td class="header">Cisco Systems, Inc.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Tuexen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Muenster Univ. of Applied Sciences</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 16, 2009</td></tr>
</table></td></tr></table>
<h1><br />Stream Control Transmission Protocol (SCTP) Stream Reconfiguration<br />draft-stewart-tsvwg-sctpstrrst-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 20, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
Many applications that desire to use SCTP  
have requested the ability to "reset" a stream.
The intention of resetting a stream is to start the numbering sequence
of the stream back at 'zero' with a corresponding notification to 
the upper layer that this act as been performed. The applications 
that have requested this feature normally desire it so that they 
can "re-use" streams for different purposes but still utilize 
the stream sequence number for the application to track the 
message flows. Thus, without this feature, a new use on an old stream 
would result in message numbers larger than expected without a 
protocol mechanism to "start the streams back at zero".
This documents presents also a method for resetting the transport
sequence numbers and all stream sequence numbers.

</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Conventions<br />
<a href="#anchor3">3.</a>&nbsp;
Data Formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
STREAM RESET Chunk<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
New Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.2.1.</a>&nbsp;
Outgoing SSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.2.</a>&nbsp;
Incoming SSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.2.3.</a>&nbsp;
SSN/TSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.2.4.</a>&nbsp;
Stream Reset Response Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.2.5.</a>&nbsp;
Add Streams<br />
<a href="#anchor11">4.</a>&nbsp;
Procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.1.</a>&nbsp;
Sender side procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#strrstchunksendproc">4.1.1.</a>&nbsp;
Sender side procedures for the Stream Reset Chunk<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ostrrstreq">4.1.2.</a>&nbsp;
Sender side procedures for the Outgoing SSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#issnrstproc">4.1.3.</a>&nbsp;
Sender side procedures for the Incoming SSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#tsnrstproc">4.1.4.</a>&nbsp;
Sender side procedures for the SSN/TSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#strrstresp">4.1.5.</a>&nbsp;
Sender side procedures for the Stream Reset Response Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#stradd">4.1.6.</a>&nbsp;
Sender side procedures for addition of streams<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.2.</a>&nbsp;
Receiver side procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.2.1.</a>&nbsp;
Receiver side procedures for the Stream Reset Chunk<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.2.2.</a>&nbsp;
Receiver side procedures for the Outgoing SSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.2.3.</a>&nbsp;
Receiver side procedures for the Incoming SSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.2.4.</a>&nbsp;
Receiver side procedures for the SSN/TSN Reset Request Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rcvstradd">4.2.5.</a>&nbsp;
Receiver side procedures for addition of streams<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.2.6.</a>&nbsp;
Receiver side procedures for the Stream Reset Response Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.3.</a>&nbsp;
Various Examples of the Stream Reset procedures<br />
<a href="#anchor20">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor21">6.</a>&nbsp;
Iana Considerations<br />
<a href="#acks">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
Many applications that desire to use <a class='info' href='#RFC4960'>[RFC4960]<span> (</span><span class='info'>Stewart, R., &ldquo;Stream Control Transmission Protocol,&rdquo; September&nbsp;2007.</span><span>)</span></a>  
have requested the ability to "reset" a stream.
The intention of resetting a stream is to start the numbering sequence
of the stream back at 'zero' with a corresponding notification to 
the upper layer that this act as been performed. The applications 
that have requested this feature normally desire it so that they 
can "re-use" streams for different purposes but still utilize 
the stream sequence number for the application to track the 
message flows. Thus, without this feature, a new use of an old stream 
would result in message numbers larger than expected without a 
protocol mechanism to "start the streams back at zero".
This documents presents also a method for resetting the transport
sequence numbers and all stream sequence numbers.

</p>
<p>
[ Editors note: We probably need to add more text here ]

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in
<a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Data Formats</h3>

<p>
This section examines all new data formats defined by
this document. All transported integer numbers are in "network byte
order" a.k.a., Big Endian, unless otherwise noted.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
STREAM RESET Chunk</h3>

<p>This document adds one new chunk type to SCTP. The suggested
value for this chunk is 0x82 hex or 130 decimal. The range 
selected by IANA must have the upper bit (or ignore bit) set and the 
next to highest bit (or the report bit) cleared. The chunk has
the following format:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Type = 0x82   |  Chunk Flags  |      Chunk Length             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                    Stream Reset Parameter                     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                    Stream Reset Parameter (optional)          |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt>Chunk Type: 1 byte (unsigned integer)</dt>
<dd>

This field holds the IANA defined chunk type for the STREAM RESET
chunk.
</dd>
<dt>Chunk Flags: 1 byte (unsigned integer)</dt>
<dd>

This field is set to 0 by the sender and ignored by the receiver.
</dd>
<dt>Chunk Length: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the length of the chunk, including the Chunk Type, 
Chunk Flags and Chunk Length.
</dd>
<dt>Stream Reset Parameter</dt>
<dd>

This field holds a Stream Reset Request Parameter or a 
Stream Reset Response Parameter.
</dd>
</dl></blockquote>

<p>Note each STREAM RESET chunk holds at least one parameter and at most
two parameters.
Only the following combinations are allowed:
</p>
<ol class="text">
<li>Outgoing SSN Reset Request Parameter.
</li>
<li>Incoming SSN Reset Request Parameter.
</li>
<li>Outgoing SSN Reset Request Parameter, Incoming SSN Reset Request Parameter.
</li>
<li>SSN/TSN Reset Request Parameter.
</li>
<li>Stream Reset Response Parameter.
</li>
<li>Stream Reset Response Parameter, Outgoing SSN Reset Request Parameter.
</li>
<li>Stream Reset Response Parameter, Stream Reset Response Parameter.
</li>
</ol>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
New Parameters</h3>

<p>
This section identifies four new parameters, their formats, and
in what chunk type these parameters may appear.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Outgoing SSN Reset Request Parameter</h3>

<p>This parameter is used by the sender to request some outgoing
streams to be reset.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Parameter Type = 0x000d   |      Parameter Length         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |             Stream Reset Request Sequence Number              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |             Stream Reset Response Sequence Number             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                Senders Last Assigned TSN                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Stream Number 1 (optional)   |    Stream Number 2 (optional) |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    /                            ......                             /
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Stream Number N-1 (optional) |    Stream Number N (optional) |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt>Parameter Type: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the IANA defined parameter type for Stream Reset Request
Parameter. The suggested value of this field for IANA is 0x000d.
</dd>
<dt>Parameter Length: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the length of the parameter.
</dd>
<dt>Stream Reset Request Sequence Number: 4 bytes (unsigned integer)</dt>
<dd>

This field is used to identify the request. It is a monotonically
increasing number that is initialized to the same value as the
Initial TSN number. It is increased by 1.
</dd>
<dt>Stream Reset Response Sequence Number: 4 bytes (unsigned integer)</dt>
<dd>

In case that this Outgoing SSN Reset Request Parameter is sent in response
to an Incoming SSN Reset Request Parameter this parameter is also an implicit
response to the incoming request. Then this field holds the
Stream Reset Request Sequence Number of the incoming request. In the other
case it holds the next expected Stream Reset Request Sequence Number - 1.
</dd>
<dt>Senders last assigned TSN: 4 bytes (unsigned integer)</dt>
<dd>

This value holds the next TSN minus 1, in other words the last
TSN that this sender assigned.
</dd>
<dt>Stream Number N: 2 bytes (unsigned integer)</dt>
<dd>

This optional field, if included, is used to
indicates specific streams that are to be reset. If no streams
are listed, then ALL streams are to be reset.
</dd>
</dl></blockquote>

<p>This parameter can appear in a STREAM RESET chunk. This parameter
MUST NOT appear in any other chunk type.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Incoming SSN Reset Request Parameter</h3>

<p>This parameter is used by the sender to request that the
peer requests some of its outgoing streams to be reset.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Parameter Type = 0x000e   |      Parameter Length         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |            Stream Reset Request Sequence Number               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Stream Number 1 (optional)   |    Stream Number 2 (optional) |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    /                            ......                             /
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Stream Number N-1 (optional) |    Stream Number N (optional) |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt>Parameter Type: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the IANA defined parameter type for Stream Reset Request
Parameter. The suggested value of this field for IANA is 0x000e.
</dd>
<dt>Parameter Length: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the length of the parameter.
</dd>
<dt>Stream Reset Request Sequence Number: 4 bytes (unsigned integer)</dt>
<dd>

This field is used to identify the request. It is a monotonically
increasing number that is initialized to the same value as the
Initial TSN number. It is increased by 1.
</dd>
<dt>Stream Number N: 2 bytes (unsigned integer)</dt>
<dd>

This optional field, if included, is used to
indicate specific streams that are to be reset. If no streams
are listed, then ALL streams are to be reset.
</dd>
</dl></blockquote>

<p>This parameter can appear in a STREAM RESET chunk. This parameter
MUST NOT appear in any other chunk type.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
SSN/TSN Reset Request Parameter</h3>

<p>This parameter is used by the sender to request to reset the
TSN and SSN numbering of all streams.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Parameter Type = 0x000f   |      Parameter Length         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Stream Reset Request Sequence Number                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt>Parameter Type: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the IANA defined parameter type for Stream Reset Request
Parameter. The suggested value of this field for IANA is 0x000f.
</dd>
<dt>Parameter Length: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the length of the parameter.
</dd>
<dt>Stream Reset Request Sequence Number: 4 bytes (unsigned integer)</dt>
<dd>

This field is used to identify the request. It is a monotonically
increasing number that is initialized to the same value as the
Initial TSN number. It is increased by 1.
</dd>
</dl></blockquote><p>

</p>
<p>This parameter can appear in a STREAM RESET chunk. This parameter
MUST NOT appear in any other chunk type.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.4"></a><h3>3.2.4.&nbsp;
Stream Reset Response Parameter</h3>

<p>This parameter is used by the receiver of a stream reset request
parameter to respond to the stream reset request.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Parameter Type = 0x0010   |      Parameter Length         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Stream Reset Response Sequence Number               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                            Result                             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                   Sender's next TSN (optional)                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                 Receiver's next TSN   (optional)              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt>Parameter Type: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the IANA defined parameter type for Stream Reset Response
Parameter. The suggested value of this field for IANA is 0x0010.
</dd>
<dt>Parameter Type Length: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the length of the parameter.
</dd>
<dt>Stream Reset Response Sequence Number: 4 bytes (unsigned integer)</dt>
<dd>

This value is copied from the request parameter and is used by the receiver of
the Stream Reset Response Parameter to tie the response to the request.
</dd>
<dt>Result: 4 bytes (unsigned integer)</dt>
<dd>

This value describes the result of the processing of the request.
It is encoded as given by the following table
</dd>
</dl></blockquote>
<br /><hr class="insert" />
<a name="resulttable"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Result</th><th align="left">Description</th></tr>
<tr>
<td align="left">0</td>
<td align="left">Nothing to do</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">Performed</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">Denied</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">Error - Wrong SSN</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">Error - Request already in progress</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">Error - Bad Sequence Number</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<blockquote class="text"><dl>
<dt>Sender's next TSN: 4 bytes (unsigned integer)</dt>
<dd>
This field holds the TSN the sender of the Response will use to
send the next DATA chunk. The field is only applicable in responses
to SSN/TSN reset requests.
</dd>
<dt>Receiver's next TSN: 4 bytes (unsigned integer)</dt>
<dd>
This field holds the TSN the receiver of the response must use to
send the next DATA chunk. The field is only applicable in responses
to SSN/TSN reset requests.
</dd>
</dl></blockquote>

<p>This parameter can appear in a STREAM RESET chunk. This parameter
MUST NOT appear in any other chunk type.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.5"></a><h3>3.2.5.&nbsp;
Add Streams</h3>

<p>
This parameter is used by the sender to request that the peer
add the requested number of streams to the association.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Parameter Type = 0x0011   |      Parameter Length=12      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |            Stream Reset Request Sequence Number               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Number of new streams    |         Reserved              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt>Parameter Type: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the IANA defined parameter type for the Add Streams
Parameter. The suggested value of this field for IANA is 0x0011.
</dd>
<dt>Parameter Length: 2 bytes (unsigned integer)</dt>
<dd>

This field holds the length of the parameter, a fixed value of 12 MUST be
found in this field.

</dd>
<dt>Stream Reset Request Sequence Number: 4 bytes (unsigned integer)</dt>
<dd>

This field is used to identify the request. It is a monotonically
increasing number that is initialized to the same value as the
Initial TSN number. It is increased by 1.

</dd>
<dt>Number of new streams: 2 bytes (unsigned integer)</dt>
<dd>
This value holds the number of additional streams the sender
would like added to the association. Streams are added in
order and are consecutive, e.g. if an association has four
streams (0-3) and a requested is made to add 3 streams then
the new streams will be 4, 5 and 6.

</dd>
<dt>Reserved: 2 bytes (unsigned integer)</dt>
<dd>
This field is reserved. It SHOULD be set to 0 by the sender
and ignored by the receiver.

</dd>
</dl></blockquote><p>

</p>
<p>This parameter can appear in a STREAM RESET chunk. This parameter
MUST NOT appear in any other chunk type.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Procedures</h3>

<p>This section defines the procedures used by both the sender and
receiver of a stream reset. We also give various example stream reset
scenarios.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Sender side procedures</h3>

<p>This section describes the procedures related to the sending of
Stream Reset Chunks. A Stream Reset Chunk is a composition of
a Type Length Value (TLV) parameters.
</p>
<a name="strrstchunksendproc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Sender side procedures for the Stream Reset Chunk</h3>

<p>Note that before sending a Stream Reset Chunk the sender MUST
ensure that the peer advertised support for the stream reset
extension. The indication for support of the extensions MUST
be determined using the Supported Extensions Parameter in either
the INIT or INIT-ACK. This parameter is defined in 
<a class='info' href='#RFC5061'>[RFC5061]<span> (</span><span class='info'>Stewart, R., Xie, Q., Tuexen, M., Maruyama, S., and M. Kozuka, &ldquo;Stream Control Transmission Protocol (SCTP) Dynamic Address Reconfiguration,&rdquo; September&nbsp;2007.</span><span>)</span></a>. 
If the chunk value '0x82' does NOT appear in
the supported extensions list of chunks, then the sender MUST
NOT send any stream reset request to the peer and any request
by the application for such service SHOULD be responded
to with an appropriate error indicating the peer SCTP stack
does not support the stream reset extension. 

</p>
<p>After packaging the Stream Reset Chunk and sending it to the peer
the sender MUST  start a 'Stream Reset Timer' when the STREAM RESET chunk
contains at least one request parameter. If it contains no request parameter,
the Stream Reset Timer MUST NOT be started. This timer MUST use the same
value as SCTP's Data transmission timer (i.e. the RTO timer)
and MUST use exponential backoff doubling the value at every expiration.
If the timer does expire, besides doubling the value, the sender MUST
retransmit the Stream Reset Chunk, increment the appropriate
error counts (both for the association and the destination), and do
threshold management possibly destroying the association if SCTP
retransmission thresholds are surpassed.
</p>
<a name="ostrrstreq"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Sender side procedures for the Outgoing SSN Reset Request Parameter</h3>

<p>When an SCTP sender wants to reset the SSNs of some or all outgoing streams
it can send an Outgoing SSN Reset Request Parameter if the Stream Reset
Timer is not running.
The following steps MUST be followed:
</p>
<blockquote class="text"><dl>
<dt>A1:</dt>
<dd>The sender MUST stop assigning new SSNs to new user data provided by the
upper layer. This is because it is unknown as to if the receiver of the
request will accept or deny it and more so, a lost request might cause an
out-of-sequence error in a stream that the receiver is not yet prepared to
handle.
</dd>
<dt>A2:</dt>
<dd>The sender MUST assign the next stream reset request sequence number and
put it into the Stream Reset Request Sequence Number field of the
Outgoing SSN Reset Request Parameter. After assigning it the next stream reset
request sequence number MUST be incremented by '1'.
</dd>
<dt>A3:</dt>
<dd>If this Outgoing SSN Reset Request Parameter is sent in response
to an Incoming SSN Request Parameter the Stream Reset Request Sequence Number
of the Incoming SSN Request Parameter is copied into the Stream Reset Response
Sequence Number field of the Outgoing SSN Reset Request Parameter.
If the Outgoing SSN Reset Request Parameter is sent on request of the upper
layer the Stream Reset Response Sequence Number is the next expected Stream
Reset Request Sequence Number of the peer - 3.
</dd>
<dt>A4:</dt>
<dd>The sender fills in the TSN it has assigned last.
</dd>
<dt>A5:</dt>
<dd>If this Outgoing SSN Reset Request Parameter is sent in response to an
Incoming SSN Request Parameter the Stream Numbers are copied from the
Incoming SSN Request Parameter to the Outgoing SSN Reset Request Parameter.
If this Outgoing SSN Reset Request Parameter is sent on request of the
upper layer and the sender wants all outgoing streams to be reset no Stream Numbers
MUST be put into the Outgoing SSN Reset Request Parameter. If the sender
wants only some outgoing streams to be reset these Stream Numbers MUST be
filled in the Outgoing SSN Reset Request Parameter.
</dd>
<dt>A6:</dt>
<dd>The Outgoing SSN Reset Request Parameter is put into a STREAM RESET Chunk.
It MAY be put together with an Incoming SSN Reset Request Parameter or
an Stream Reset Response Parameter and MUST NOT be put together with any
other parameter.
</dd>
<dt>A7:</dt>
<dd>The STREAM RESET Chunk is sent following the rules given in
<a class='info' href='#strrstchunksendproc'>Section&nbsp;4.1.1<span> (</span><span class='info'>Sender side procedures for the Stream Reset Chunk</span><span>)</span></a>
</dd>
</dl></blockquote>

<a name="issnrstproc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.3"></a><h3>4.1.3.&nbsp;
Sender side procedures for the Incoming SSN Reset Request Parameter</h3>

<p>When an SCTP sender wants to reset the SSNs of some or all incoming streams
it can send an Incoming SSN Reset Request Parameter if the Stream Reset
Timer is not running.
The following steps MUST be followed:
</p>
<blockquote class="text"><dl>
<dt>B1:</dt>
<dd>The sender MUST assign the next stream reset request sequence number and
put it into the Stream Reset Request Sequence Number field of the
Incoming SSN Reset Request Parameter. After assigning it the next stream reset
request sequence number MUST be incremented by '1'.
</dd>
<dt>B2:</dt>
<dd>If the sender wants all incoming streams to be reset no Stream Numbers
MUST be put into the Incoming SSN Reset Request Parameter. If the sender
wants only some incoming streams to be reset these Stream Numbers MUST be
filled in the Incoming SSN Reset Request Parameter.
</dd>
<dt>B3:</dt>
<dd>The Incoming SSN Reset Request Parameter is put into a STREAM RESET Chunk.
It MAY be put together with an Outgoing SSN Reset Request Parameter and MUST
NOT be put together with any other parameter.
</dd>
<dt>B4:</dt>
<dd>The STREAM RESET Chunk is sent following the rules given in
<a class='info' href='#strrstchunksendproc'>Section&nbsp;4.1.1<span> (</span><span class='info'>Sender side procedures for the Stream Reset Chunk</span><span>)</span></a>
</dd>
</dl></blockquote>

<a name="tsnrstproc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.4"></a><h3>4.1.4.&nbsp;
Sender side procedures for the SSN/TSN Reset Request Parameter</h3>

<p>When an SCTP sender wants to reset the SSNs and TSNs it can send a
SSN/TSN Reset Request Parameter if the Stream Reset Timer is not running.
The following steps MUST be followed:
</p>
<blockquote class="text"><dl>
<dt>C1:</dt>
<dd>The sender MUST assign the next stream reset request sequence number and
put it into the Stream Reset Request Sequence Number field of the
SSN/TSN Reset Request Parameter. After assigning it the next stream reset
request sequence number MUST be incremented by '1'.
</dd>
<dt>C2:</dt>
<dd>The sender MUST queue any user data.
</dd>
<dt>C3:</dt>
<dd>The SSN/TSN Reset Request Parameter is put into a STREAM RESET Chunk. There
MUST NOT be any other parameter in this chunk.
</dd>
<dt>C4:</dt>
<dd>The STREAM RESET Chunk is sent following the rules given in
<a class='info' href='#strrstchunksendproc'>Section&nbsp;4.1.1<span> (</span><span class='info'>Sender side procedures for the Stream Reset Chunk</span><span>)</span></a>
</dd>
</dl></blockquote>

<a name="strrstresp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5"></a><h3>4.1.5.&nbsp;
Sender side procedures for the Stream Reset Response Parameter</h3>

<p>When an implementation receives a request parameter it MUST respond with 
a Stream Reset Response Parameter in the following manner:

</p>
<blockquote class="text"><dl>
<dt>D1</dt>
<dd>The Stream Reset Request Sequence number of the incoming request is copied
to the Stream Reset Response Sequence Number field of the Stream Reset
Response Parameter.
</dd>
<dt>D2</dt>
<dd>The result of the processing of the incoming request is filled in the Result
field of the Stream Reset Response Parameter
</dd>
<dt>D3</dt>
<dd>If the incoming request is a SSN/TSN reset requests, the Sender's next TSN
field is filled with the next TSN the sender of this Stream Reset Response Parameter
will assign. For other requests the Sender's next TSN field is not filled.
</dd>
<dt>D4</dt>
<dd>If the incoming request is a SSN/TSN reset request, the Receiver's next TSN
field is filled with a TSN such that the sender of the Stream Reset
Response Parameter can be sure it can discard received DATA chunks with smaller
TSNs. A good value for this is the highest TSN it has seen plus some delta.
For other requests the Sender's next TSN field is not filled.
</dd>
</dl></blockquote>

<a name="stradd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6"></a><h3>4.1.6.&nbsp;
Sender side procedures for addition of streams</h3>

<p>
When an SCTP sender wants to increase the number of outbound streams it is
able to send to, it may add a Add Streams parameter to the STREAM RESET
chunk. Upon sending the request the sender MUST await a positive acknowledgment
(Success) before using any additional stream added by this request. Note that
new streams are added adjacent to the previous steams with no gaps. This means
that if a request is made to add 2 streams to an association that has
already 5 (0-4) then the new streams, upon successful completion, are streams 5 and
6. Any new stream MUST number its first message to be stream sequence 0.

</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Receiver side procedures</h3>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Receiver side procedures for the Stream Reset Chunk</h3>

<p>Upon reception of a Stream Reset Chunk each parameter within
it should be processed. If some parameters have to be sent back, they
MUST all be put into one STREAM RESET chunk. If the received STREAM RESET
chunk contains at least one request parameter, a SACK chunk MUST be sent
back and MAY be bundled with the STREAM RESET chunk.
If the received STREAM RESET chunk contains at least one request and
based on the analysis of the Stream Reset Request Sequence Numbers this
is the last received STREAM RESET chunk, the same STREAM RESET chunk
has to be sent back in response as earlier.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
Receiver side procedures for the Outgoing SSN Reset Request Parameter</h3>

<p>The decision to deny a stream reset request is an administrative 
decision and may be user configurable even after the association
has formed. If for whatever reason the endpoint does NOT wish to reset
any streams it MUST send a stream reset response as described 
in <a class='info' href='#strrstresp'>Section&nbsp;4.1.5<span> (</span><span class='info'>Sender side procedures for the Stream Reset Response Parameter</span><span>)</span></a> with an appropriate Result field.
</p>
<p>In the case that the endpoint is willing to perform a stream reset
the following steps SHOULD be followed:
</p>
<blockquote class="text"><dl>
<dt>E1</dt>
<dd>
If the Senders Last Assigned TSN number is greater than
the cumulative acknowledgment point, then the endpoint must enter "deferred
reset processing". In this mode, any data arriving with a TSN number larger
than the 'senders last assigned TSN' for the effected stream(s) MUST be 
queued locally and held until the Cumulative Acknowledgment point reaches 
the 'senders last assigned TSN number'. When the Cumulative Acknowledgment point
reaches the last assigned TSN number then proceed to the next step.
Note that the receiver of a stream reset that causes it to entered
deferred reset processing does NOT withhold the stream reset acknowledgment
from the peer. This also means that the receiver will need to queue
up any additional stream reset requests received including the one that
caused the receiver to enter deferred reset processing.

</dd>
<dt>E2</dt>
<dd>
If the Stream Reset Timer is running for the Stream Reset Request Sequence
Number indicated in the Stream Reset Response Sequence Number field, mark
the Stream Reset Request Sequence Number as acknowledged. 
If all Stream Reset Request Sequence Numbers the Stream Reset Timer is running
for are acknowledged, stop the Stream Reset Timer.

</dd>
<dt>E3</dt>
<dd> If no Stream Numbers are listed in the parameter,
then all incoming streams MUST be reset to '0' as the next expected stream
sequence number. If specific Stream Numbers are listed, then only these
specific streams MUST be reset to '0' and all other non-listed stream
sequence numbers remain unchanged.
</dd>
<dt>E4</dt>
<dd>Optionally an Upper Layer Notification SHOULD be
sent to inform the local endpoint that the inbound streams have been reset.
</dd>
<dt>E5</dt>
<dd>Any queued TSN's (queued at step D3) should now be released
and processed normally.
</dd>
<dt>E6</dt>
<dd>A Stream Reset Response Parameter is put into a STREAM RESET chunk indicating
successful processing.
</dd>
<dt>E7</dt>
<dd>The STREAM RESET chunk is sent after the incoming STREAM RESET chunk is
processed completely.
</dd>
</dl></blockquote>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
Receiver side procedures for the Incoming SSN Reset Request Parameter</h3>

<p>The decision to deny a stream reset request is an administrative 
decision and may be user configurable even after the association
has formed. If for whatever reason the endpoint does NOT wish to reset
any streams it MUST send a stream reset response as described 
in <a class='info' href='#strrstresp'>Section&nbsp;4.1.5<span> (</span><span class='info'>Sender side procedures for the Stream Reset Response Parameter</span><span>)</span></a> with an appropriate Result field.
</p>
<p>In the case that the endpoint is willing to perform a stream reset
the following steps SHOULD be followed:
</p>
<blockquote class="text"><dl>
<dt>F1</dt>
<dd>An Outgoing Stream Reset Request Parameter MUST be put into an STREAM RESET
chunk according to <a class='info' href='#ostrrstreq'>Section&nbsp;4.1.2<span> (</span><span class='info'>Sender side procedures for the Outgoing SSN Reset Request Parameter</span><span>)</span></a>.
</dd>
<dt>F2</dt>
<dd>The STREAM RESET chunk is sent after the incoming STREAM RESET chunk is
processed completely.
</dd>
</dl></blockquote>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.4"></a><h3>4.2.4.&nbsp;
Receiver side procedures for the SSN/TSN Reset Request Parameter</h3>

<p>The decision to deny a stream reset request is an administrative 
decision and may be user configurable even after the association
has formed. If for whatever reason the endpoint does NOT wish to reset
any streams it MUST send a stream reset response as described 
in <a class='info' href='#strrstresp'>Section&nbsp;4.1.5<span> (</span><span class='info'>Sender side procedures for the Stream Reset Response Parameter</span><span>)</span></a> with an appropriate Result field.
</p>
<p>In the case that the endpoint is willing to perform a SSN/TSN reset
the following steps SHOULD be followed:
</p>
<blockquote class="text"><dl>
<dt>G1</dt>
<dd>Compute an appropriate value for the Receiver's next TSN, the TSN the peer
should use to send the next DATA chunk. Note that an appropriate value
should be larger than the highest TSN last received plus a delta of at
least 500 additional TSN's.

</dd>
<dt>G2</dt>
<dd>
Compute an appropriate value for the local endpoints next TSN, i.e.
the receiver of the SSN/TSN reset chunks next TSN to be assigned. Note that
an appropriate value should be larger than the endpoints current next
TSN to send by at least one TSN.

</dd>
<dt>G3</dt>
<dd>Do the same processing as if a SACK chunk with no gap report and a
cumulative TSN ACK of Sender's next TSN - 1 was received.
</dd>
<dt>G4</dt>
<dd>Do the same processing as if an FWD-TSN chunk with all streams affected and a
new cumulative TSN ACK of Receiver's next TSN - 1 was received.
</dd>
<dt>G5</dt>
<dd>All incoming and outgoing streams MUST be reset to '0' as the next expected
and outgoing stream sequence numbers, respectively.
</dd>
<dt>G6</dt>
<dd>A Stream Reset Response Parameter is put into a STREAM RESET chunk indicating
successful processing.
</dd>
<dt>G7</dt>
<dd>The STREAM RESET chunk is sent after the incoming STREAM RESET chunk is
processed completely.
</dd>
</dl></blockquote>

<a name="rcvstradd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.5"></a><h3>4.2.5.&nbsp;
Receiver side procedures for addition of streams</h3>

<p>
When an SCTP endpoint receives a stream reset request adding additional streams, it
MUST send a response parameter either acknowledging or rejecting the request. If
the response is successful the receiver MUST add the requested number of 
inbound streams to the association, initializing the next expected 
stream sequence number to be 0.

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.6"></a><h3>4.2.6.&nbsp;
Receiver side procedures for the Stream Reset Response Parameter</h3>

<p>On receipt of a Stream Reset Response Parameter the following MUST be
performed:
</p>
<blockquote class="text"><dl>
<dt>H1</dt>
<dd>If the Stream Reset Timer is running for the Stream Reset Request Sequence
Number indicated in the Stream Reset Response Sequence Number field, mark
the Stream Reset Request Sequence Number as acknowledged. 
If all Stream Reset Request Sequence Numbers the Stream Reset Timer is running
for are acknowledged, stop the Stream Reset Timer.
If the timer was not running for the Stream Reset Request Sequence
Number, the processing of the Stream Reset Response Parameter is complete.
</dd>
<dt>H2</dt>
<dd>If the Result field does not indicate successful processing
an Upper Layer Notification SHOULD be sent to inform the
local endpoint of the failure to reset its outbound streams.
Afterwards processing of this response is complete.
</dd>
<dt>H3</dt>
<dd>If the request was an Outgoing Stream Reset Request the affected streams
should now be reset and all queued data should be processed now and assigning
of stream sequence numbers is allowed again. Optionally an
Upper Layer Notification SHOULD be sent to inform the local endpoint that the
outbound streams have been reset.
</dd>
<dt>H4</dt>
<dd>If the request was a SSN/TSN Reset Request new DATA should be sent from
Receiver's next TSN and beginning with stream sequence number '0' for all
outgoing streams. All incoming streams are also reset to '0' as the next
expected stream sequence number. The peer will
send DATA chunks starting with Sender's next TSN.
</dd>
</dl></blockquote>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Various Examples of the Stream Reset procedures</h3>

<p>
The following example illustrates an Endpoint A resetting all
streams in both directions. 

</p>
<p>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


E-A                                                       E-Z
----------[STR_RESET(IN-REQ:X|OUT-REQ:X+1,Y-3)]-------&gt;
&lt;-[STR_RESET(RESP:Y|OUT-REQ:Y+1,X+1))]---------
-------[STR_RESET(RESP:Y)]-----------------&gt;

</pre></div><p>


</p>
<p>
The following example illustrates an Endpoint A resetting
stream 1 and 2 for just its outgoing streams.

</p>
<p>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


E-A                                                       E-Z
-------[STR_RESET(OUT-REQ:X/1,2]------------------&gt;
&lt;---[STR_RESET(RESP:X/1,2)]------------

</pre></div><p>


</p>
<p>
The following example illustrates an Endpoint A resetting
stream 1 and 2 for just its incoming streams. 

</p>
<p>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

E-A                                               E-Z
------[STR_RESET(IN-REQ:X/1,2]-----------&gt;
&lt;---[STR_RESET(RESP:X/1,2]-------

</pre></div><p>


</p>
<p>
The following example illustrates an Endpoint A requesting
the streams and TSN's be reset. At the completion E-A has
the new sending TSN (selected by the peer) of B and E-Z has
the new sending TSN of A (also selected by the peer).

</p>
<p>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
E-A                                               E-Z
------[STR_RESET(TSN-REQ:X]-----------&gt;
&lt;---[STR_RESET(RESP:X/S-TSN=A, R-TSN=B]-------

</pre></div><p>


</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
Having the ability to reset a stream should not pose
any additional security risk to SCTP. An attacker that
can successfully inject a stream reset would also be
able to inject data or other malicious information into
an association such as an ABORT.

</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Iana Considerations</h3>

<p>
This document defines one new chunk type and four
new parameter types. This document recommends the
values of 0x82 for the chunk type and 0x000d, 0x000e, 0x000f,
0x0010 and 0x0011  for the new parameter types. However IANA
may assign any free chunk or parameter type as long
it is from the same chunk or parameter pool. In the
case of the chunk, it MUST be from the pool of
chunks with the upper two bits set to '10'. In the
case of the parameters, it MUST be from the pool
whose upper bits are set to '00'.

</p>
<a name="acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>The authors wish to thank
Paul Aitken and Irene Ruengeler 
for there invaluable comments.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4960">[RFC4960]</a></td>
<td class="author-text">Stewart, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4960">Stream Control Transmission Protocol</a>,&rdquo; RFC&nbsp;4960, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4960.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5061">[RFC5061]</a></td>
<td class="author-text">Stewart, R., Xie, Q., Tuexen, M., Maruyama, S., and M. Kozuka, &ldquo;<a href="http://tools.ietf.org/html/rfc5061">Stream Control Transmission Protocol (SCTP) Dynamic Address Reconfiguration</a>,&rdquo; RFC&nbsp;5061, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5061.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Randall R. Stewart</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Researcher</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chapin, SC  29036</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:randall@lakerest.net">randall@lakerest.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peter Lei</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">8735 West Higgins Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Suite 300</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chicago, IL  60631</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:peterlei@cisco.com">peterlei@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael Tuexen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Muenster Univ. of Applied Sciences</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stegerwaldstr. 39</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">48565 Steinfurt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tuexen@fh-muenster.de">tuexen@fh-muenster.de</a></td></tr>
</table>
</body></html>
