<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>URI Fragment Identifiers for the text/csv Media Type</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 What is text/csv?">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Why text/csv Fragment Identifiers?">
<link href="#rfc.section.1.2.1" rel="Chapter" title="1.2.1 Motivation">
<link href="#rfc.section.1.2.2" rel="Chapter" title="1.2.2 Use Cases">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Incremental Deployment">
<link href="#rfc.section.1.4" rel="Chapter" title="1.4 Notation Used in this Memo">
<link href="#rfc.section.2" rel="Chapter" title="2 Fragment Identification Methods">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Header">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Row-based selection">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Column-based selection">
<link href="#rfc.section.2.4" rel="Chapter" title="2.4 Slice-based selection">
<link href="#rfc.section.3" rel="Chapter" title="3 Fragment Identification Syntax">
<link href="#rfc.section.4" rel="Chapter" title="4 Fragment Identifier Processing">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Syntax Errors in Fragment Identifiers">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Change Log">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Non-Normative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Acknowledgements">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This memo defines URI fragment identifiers for text/csv MIME entities. These fragment identifiers make it possible to refer to parts of a text/csv MIME entity, identified by cell, row, column, or slice." />
  <meta name="description" content="This memo defines URI fragment identifiers for text/csv MIME entities. These fragment identifiers make it possible to refer to parts of a text/csv MIME entity, identified by cell, row, column, or slice." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">M. Hausenblas</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">DERI, NUI Galway</td>
</tr>
<tr>
<td class="left">Updates: 4180 (if approved)</td>
<td class="right">E. Wilde</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">UC Berkeley</td>
</tr>
<tr>
<td class="left">Expires: October 28, 2011</td>
<td class="right">April 26, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">URI Fragment Identifiers for the text/csv Media Type<br />
  <span class="filename">draft-hausenblas-csv-fragment-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This memo defines URI fragment identifiers for text/csv MIME entities. These fragment identifiers make it possible to refer to parts of a text/csv MIME entity, identified by cell, row, column, or slice.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 28, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">What is text/csv?</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Why text/csv Fragment Identifiers?</a>
</li>
<li>1.2.1.   <a href="#rfc.section.1.2.1">Motivation</a>
</li>
<li>1.2.2.   <a href="#rfc.section.1.2.2">Use Cases</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Incremental Deployment</a>
</li>
<li>1.4.   <a href="#rfc.section.1.4">Notation Used in this Memo</a>
</li>
<li>2.   <a href="#rfc.section.2">Fragment Identification Methods</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Header</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Row-based selection</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Column-based selection</a>
</li>
<li>2.4.   <a href="#rfc.section.2.4">Slice-based selection</a>
</li>
<li>3.   <a href="#rfc.section.3">Fragment Identification Syntax</a>
</li>
<li>4.   <a href="#rfc.section.4">Fragment Identifier Processing</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Syntax Errors in Fragment Identifiers</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Change Log</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Non-Normative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Acknowledgements</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This memo updates the text/csv media type defined in RFC 4180 <a href="#RFC4180">[RFC4180]</a> by defining URI fragment identifiers for text/csv MIME entities.</p>
<p id="rfc.section.1.p.2">This section gives an introduction to the general concepts of text/csv MIME entities and URI fragment identifiers, and discusses the need for fragment identifiers for text/csv and deployment issues. <a href="#methods">Section 2</a> discusses the principles and methods on which this memo is based. <a href="#syntax">Section 3</a> defines the syntax, and <a href="#processing">Section 4</a> discusses processing of text/csv fragment identifiers.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> What is text/csv?</h1>
<p id="rfc.section.1.1.p.1">Internet Media Types (often referred to as "MIME types") as defined in RFC 2045 <a href="#RFC2045">[RFC2045]</a> and RFC 2046 <a href="#RFC2046">[RFC2046]</a> are used to identify different types and sub-types of media. The text/csv media type is defined in RFC 4180 <a href="#RFC4180">[RFC4180]</a>, using US-ASCII <a href="#ASCII">[ASCII]</a> as the default character encoding (other character encodings can be used as well).</p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#why" id="why">Why text/csv Fragment Identifiers?</a>
</h1>
<p id="rfc.section.1.2.p.1">URIs are the identification mechanism for resources on the Web. The URI syntax specified in RFC 3986 <a href="#RFC3986">[RFC3986]</a> optionally includes a so-called "fragment identifier", separated by a number sign ('#'). The fragment identifier consists of additional reference information to be interpreted by the user agent after the retrieval action has been successfully completed.  The semantics of a fragment identifier is a property of the data resulting from a retrieval action, regardless of the type of URI used in the reference.  Therefore, the format and interpretation of fragment identifiers is dependent on the media type of the retrieval result.</p>
<h1 id="rfc.section.1.2.1">
<a href="#rfc.section.1.2.1">1.2.1.</a> Motivation</h1>
<p id="rfc.section.1.2.1.p.1">Similar to the motivation in RFC 5147 <a href="#RFC5147">[RFC5147]</a>, referring to specific parts of a resource can be very useful, because it enables users and applications to create more specific references. Users can create references to the part they really are interested in or want to talk about, rather than always pointing to a complete resource. Even though it is suggested that fragment identification methods are specified in a media type's MIME registration (see <a href="#TypeReg">[TypeReg]</a>), many media types do not have fragment identification methods associated with them.</p>
<p id="rfc.section.1.2.1.p.2">Fragment identifiers are only useful if supported by the client, because they are only interpreted by the client. Therefore, a new fragment identification method will require some time to be adopted by clients, and older clients will not support it. However, because the URI still works even if the fragment identifier is not supported (the resource is retrieved, but the fragment identifier is not interpreted), rapid adoption is not highly critical to ensure the success of a new fragment identification method.</p>
<h1 id="rfc.section.1.2.2">
<a href="#rfc.section.1.2.2">1.2.2.</a> Use Cases</h1>
<p id="rfc.section.1.2.2.p.1">Fragment identifiers for text/csv as defined in this memo make it possible to refer to specific parts of a text/csv MIME entity. Use cases include, but are not limited to, discovery (what column headings or how many rows are available), selecting a part for visual rendering, stream processing, making assertions about a certain value (provenance, confidence, etc.), or data integration.</p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> <a href="#incremental" id="incremental">Incremental Deployment</a>
</h1>
<p id="rfc.section.1.3.p.1">As long as text/csv fragment identifiers are not supported universally, it is important to consider the implications of incremental deployment. Clients (for example, Web browsers) not supporting the text/csv fragment identifier described in this memo will work with URI references to text/csv MIME entities, but they will fail to to understand the identification of the sub-resource specified by the fragment identifier, and thus will behave as if the complete resource was referenced. This is a reasonable fallback behavior, and in general users should take into account the possibility that a program interpreting a given URI will fail to interpret the fragment identifier part. Since fragment identifier evaluation is local to the client (and happens after retrieving the MIME entity), there is no reliable way for a server to determine whether a requesting client is using a URI containing a fragment identifier.</p>
<h1 id="rfc.section.1.4">
<a href="#rfc.section.1.4">1.4.</a> Notation Used in this Memo</h1>
<p id="rfc.section.1.4.p.1">The capitalized key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#methods" id="methods">Fragment Identification Methods</a>
</h1>
<p id="rfc.section.2.p.1">This memo specifies fragment identification using following methods: header, row, column and slice. As of RFC 4180 <a href="#RFC4180">[RFC4180]</a> the header line is optional and hence the application of the method is dependent on the actual format of the text/csv MIME entity.</p>
<p id="rfc.section.2.p.2">Throughout the sections below the following table in CSV is used:</p>
<div id="#rfc.figure.1"></div>
<pre>
date,temperature,place
2011-01-01,1,Galway
2011-01-02,-1,Galway
2011-01-03,0,Galway
2011-01-01,6,Berkeley
2011-01-02,8,Berkeley
2011-01-03,5,Berkeley
            </pre>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#method-header" id="method-header">Header</a>
</h1>
<p id="rfc.section.2.1.p.1">For discovery purposes, the "head" scheme is used, returning the first row. If the "header" parameter per RFC 4180 <a href="#RFC4180">[RFC4180]</a> is available and its value is "present" the client can reliable determine that it is a header.</p>
<div id="#rfc.figure.2"></div>
<pre>
  http://example.com/data.csv#head
               </pre>
<p id="rfc.section.2.1.p.2">Applied to the reference table, the above CSV fragment would select the header row, yielding:</p>
<div id="#rfc.figure.3"></div>
<pre>
date,temperature,place
               </pre>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#method-row" id="method-row">Row-based selection</a>
</h1>
<p id="rfc.section.2.2.p.1">To select a specific record, the "row" scheme followed by a single number is used (the first record has the index 0). If the fragment is given in the form row:*, then no record is selected but the overall number of records is returned.</p>
<div id="#rfc.figure.4"></div>
<pre>
  http://example.com/data.csv#row:2
               </pre>
<p id="rfc.section.2.2.p.2">The above CSV fragment yields: while the following computes the number of records (which equals 6, in the reference table)</p>
<div id="#rfc.figure.5"></div>
<pre>
2011-01-03,0,Galway
               </pre>
<p id="rfc.section.2.2.p.3">The following computes the number of records (which equals 6, in the reference table):</p>
<div id="#rfc.figure.6"></div>
<pre>
  http://example.com/data.csv#row:*
               </pre>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#method-column" id="method-column">Column-based selection</a>
</h1>
<p id="rfc.section.2.3.p.1">To select values from a certain column, the "col" scheme, followed either by a single number or the value of a header field is used.</p>
<div id="#rfc.figure.7"></div>
<pre>
  http://example.com/data.csv#col:temperature
               </pre>
<p id="rfc.section.2.3.p.2">The above CSV fragment addresses a column by name, yielding:</p>
<div id="#rfc.figure.8"></div>
<pre>
1,-1,0,6,8,5
               </pre>
<p id="rfc.section.2.3.p.3">A column can also be addressed by position as shown in the next example:</p>
<div id="#rfc.figure.9"></div>
<pre>
  http://example.com/data.csv#col:2
               </pre>
<p id="rfc.section.2.3.p.4">The above CSV fragment selects the third column:</p>
<div id="#rfc.figure.10"></div>
<pre>
Galway,Galway,Galway,Berkeley,Berkeley,Berkeley
               </pre>
<h1 id="rfc.section.2.4">
<a href="#rfc.section.2.4">2.4.</a> <a href="#method-slice" id="method-slice">Slice-based selection</a>
</h1>
<p id="rfc.section.2.4.p.1">To select a part of table, called a slice in the following, the "where" scheme is used. The allowed values are a comma-separated list of header fields with corresponding field values in the table.</p>
<div id="#rfc.figure.11"></div>
<pre>
  http://example.com/data.csv#where:date=2011-01-01
               </pre>
<p id="rfc.section.2.4.p.2">The above CSV fragment selects a slice, yielding another CSV table as follows:</p>
<div id="#rfc.figure.12"></div>
<pre>
temperature,place
1,Galway
6,Berkeley
               </pre>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#syntax" id="syntax">Fragment Identification Syntax</a>
</h1>
<p id="rfc.section.3.p.1">The syntax for the text/csv fragment identifiers is as follows.</p>
<p id="rfc.section.3.p.2">The following syntax definition uses ABNF as defined in RFC 4234 <a href="#RFC4234">[RFC4234]</a>, including the rules DIGIT and HEXDIG. The mime-charset rule is defined in RFC 2978 <a href="#RFC2978">[RFC2978]</a>.</p>
<p></p>

<dl>
<dt>NOTE:</dt>
<dd style="margin-left: 8">In the descriptions that follow, specified text values MUST be used exactly as given, using exactly the indicated lower-case letters.  In this respect, the ABNF usage differs from <a href="#RFC4234">[RFC4234]</a>.</dd>
</dl>
<div id="#rfc.figure.13"></div>
<pre>
csv-fragment =  headersel / wheresel / colsel / rowsel
headersel = "head"
rowsel   = "row:" rowspec
colsel   = "col:" colspec
wheresel = "where:" kvpairs 
kvpairs = 1*( col "=" val 0*1(",") ) 
col = 1*TEXTDATA
val = 1*TEXTDATA
colspec = column 
rowspec = "*" / rownum
column = 1*TEXTDATA / 1*DIGIT
rownum = 1*DIGIT
TEXTDATA =  %x23-2B / %x2D-3C / %x3E-7E 
DIGIT =  %x30-39 
               </pre>
<p></p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#processing" id="processing">Fragment Identifier Processing</a>
</h1>
<p id="rfc.section.4.p.1">Applications implementing support for the mechanism described in this memo MUST behave as described in the following sections.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#error-handling" id="error-handling">Syntax Errors in Fragment Identifiers</a>
</h1>
<p id="rfc.section.4.1.p.1">If a fragment identifier contains a syntax error (i.e., does not conform to the syntax specified in <a href="#syntax">Section 3</a>), then it MUST be ignored by clients. Clients MUST NOT make any attempt to correct or guess fragment identifiers. Syntax errors MAY be reported by clients.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> IANA Considerations</h1>
<p id="rfc.section.5.p.1">Note to RFC Editor: Please change this section to read as follows after the IANA action has been completed: "IANA has added a reference to this specification in the Text/Plain Media Type registration."</p>
<p id="rfc.section.5.p.2">IANA is requested to update the registration of the MIME Media type text/csv at http://www.iana.org/assignments/media-types/text/ with the fragment identifier defined in this memo by adding a reference to this memo (with the appropriate RFC number once it is known).</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">The fact that software implementing fragment identifiers for plain text and software not implementing them differs in behavior, and the fact that different software may show documents or fragments to users in different ways, can lead to misunderstandings on the part of users. Such misunderstandings might be exploited in a way similar to spoofing or phishing.</p>
<p id="rfc.section.6.p.2">In particular, care has to be taken if fragment identifiers are used together with a mechanism that allows to show only the part of a document identified by a fragment. One scenario may be the use of a fragment identifier to hide small-print legal text.  Another scenario may be the inclusion of site-key-like material, which may give the user the impression of using the real site rather than a fake site.Other scenarios may also be possible. Possible countermeasures may include but are not limited to displaying the included content within clearly visible boundaries and limiting inclusion to material from the same security realm or from realms that give explicit permission to be included in another realm.</p>
<p id="rfc.section.6.p.3">Please note that the above issues all apply to the client side; fragment identifiers are not used when resolving an URI to retrieve the representation of a resource, but are only applied on the client side.</p>
<p id="rfc.section.6.p.4">Implementers and users of fragment identifiers for CSV text should also be aware of the security considerations in RFC 3986 <a href="#RFC3986">[RFC3986]</a> and RFC 3987 <a href="#RFC3987">[RFC3987]</a>.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Change Log</h1>
<p id="rfc.section.7.p.1">Note to RFC Editor: Please remove this section before publication.</p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="1">[1]</b></td>
<td class="top">
<a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com" title="First Virtual Holdings">N. S. Borenstein</a>, "<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>", RFC 2045, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="2">[2]</b></td>
<td class="top">
<a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com" title="First Virtual Holdings">N. Borenstein</a>, "<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>", RFC 2046, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="3">[3]</b></td>
<td class="top">
<a href="mailto:ietf@shaftek.org" title="SolidMatrix Technologies, Inc.">Shafranovich, Y.</a>, "<a href="http://tools.ietf.org/html/rfc4180">Common Format and MIME Type for Comma-Separated Values (CSV) Files</a>", RFC 4180, October 2005.</td>
</tr>
<tr>
<td class="reference"><b id="4">[4]</b></td>
<td class="top">
<a title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="5">[5]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Postel</a>, "<a>IANA Charset Registration Procedures</a>", BCP 19, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="6">[6]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R. T.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", RFC 3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="7">[7]</b></td>
<td class="top">
<a>Duerst, M.</a> and <a>M. Suignard</a>, "<a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRI)</a>", RFC 3987, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="8">[8]</b></td>
<td class="top">
<a title="Brandenburg InternetWorking">Crocker, D. H.</a> and <a title="THUS plc.">P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc4234">Augmented BNF for Syntax Specifications: ABNF</a>", RFC 4234, October 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Non-Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="1">[1]</b></td>
<td class="top">
<a>ANSI X3.4-1986</a>, "<a href="http://tools.ietf.org/html/rfc3629">Coded Character Set - 7-Bit American National Standard Code for Information Interchange</a>", STD 63, RFC 3629, 1992.</td>
</tr>
<tr>
<td class="reference"><b id="2">[2]</b></td>
<td class="top">
<a href="mailto:dret@berkeley.edu" title="UC Berkeley">Wilde, E.</a> and <a href="mailto:mailto:duerst@it.aoyama.ac.jp" title="Aoyama Gakuin University">M. J. Duerst</a>, "<a href="http://tools.ietf.org/html/rfc5147">URI Fragment Identifiers for the text/plain Media Type</a>", RFC 5147, April 2008.</td>
</tr>
<tr>
<td class="reference"><b id="3">[3]</b></td>
<td class="top">
<a title="Sun Microsystems">Freed, N.</a> and <a>J. Klensin</a>, "<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>", RFC 4288, December 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Acknowledgements</h1>
<p id="rfc.section.Appendix A.p.1">Thanks for comments and suggestions provided by ...</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Hausenblas</span> 
	  <span class="n hidden">
		<span class="family-name">Hausenblas</span>
	  </span>
	</span>
	<span class="org vcardline">DERI, NUI Galway</span>
	<span class="adr">
	  <span>IDA Business Park</span>

	  <span class="vcardline">
		<span class="locality">Galway</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Ireland</span>
	</span>
	<span class="vcardline">Phone: +353-91-495730</span>

<span class="vcardline">EMail: <a href="mailto:michael.hausenblas@deri.org">michael.hausenblas@deri.org</a></span>

<span class="vcardline">URI: <a href="http://sw-app.org/about.html">http://sw-app.org/about.html</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Erik Wilde</span> 
	  <span class="n hidden">
		<span class="family-name">Wilde</span>
	  </span>
	</span>
	<span class="org vcardline">UC Berkeley</span>
	<span class="adr">
	  <span>School of Information, 311 South Hall</span>

	  <span class="vcardline">
		<span class="locality">Berkeley, CA 94720-4600</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">U.S.A.</span>
	</span>
	<span class="vcardline">Phone: +1-510-6432253</span>

<span class="vcardline">EMail: <a href="mailto:dret@berkeley.edu">dret@berkeley.edu</a></span>

<span class="vcardline">URI: <a href="http://dret.net/netdret/">http://dret.net/netdret/</a></span>

  </address>
</div>

</body>
</html>