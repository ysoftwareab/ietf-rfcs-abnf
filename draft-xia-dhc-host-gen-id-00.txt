


Network Working Group                                             F. Xia
Internet-Draft                                               B. Sarikaya
Expires: August 18, 2008                                      Huawei USA
                                                       February 15, 2008


        Usage of Host Generating Interface Identifier in DHCPv6
                    draft-xia-dhc-host-gen-id-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 18, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2008).














Xia & Sarikaya           Expires August 18, 2008                [Page 1]

Internet-Draft    Host Generating Interface Identifier     February 2008


Abstract

   This document describes a procedure for configuring a host's IPv6
   address which prefix is allocated from a DHCPv6 server while it's
   interface identifier is independently generated by the host.  The
   method is applicable to Cryptographically Generated Addresses (CGA).


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Address Auto-configuration in SEND . . . . . . . . . . . . . .  4
   4.  DHCPv6 Operation . . . . . . . . . . . . . . . . . . . . . . .  5
   5.  DHCPv6 Options . . . . . . . . . . . . . . . . . . . . . . . .  6
     5.1.  Identity Association for Prefix Assignment Option  . . . .  6
     5.2.  IA_PD Prefix option  . . . . . . . . . . . . . . . . . . .  8
     5.3.  IA Address Validation Option . . . . . . . . . . . . . . .  8
   6.  IANA consideration . . . . . . . . . . . . . . . . . . . . . .  9
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   8.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  9
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  9
     9.1.  Normative References . . . . . . . . . . . . . . . . . . .  9
     9.2.  Informative references . . . . . . . . . . . . . . . . . . 10
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 11
   Intellectual Property and Copyright Statements . . . . . . . . . . 12

























Xia & Sarikaya           Expires August 18, 2008                [Page 2]

Internet-Draft    Host Generating Interface Identifier     February 2008


1.  Introduction

   [RFC3315] describes the operation of address assignment by a DHCP
   server.  A client uses a Solicit message to discover DHCP servers
   configured to assign addresses.  A server sends an Advertise message
   in response to announce the availability of the server to the client.
   The client then uses a Request message to request addresses.  The
   server then returns addresses in a Reply message.  The operation
   assumes that the server is responsible for the assignment of an
   integral address which include prefix and interface identifier parts
   as described in [RFC4291].

   [RFC3633] defines Prefix Delegation options providing a mechanism for
   automated delegation of IPv6 prefixes using the DHCPv6.  This
   mechanism is intended for delegating a long- lived prefix from a
   delegating router to a requesting router.  The practice of separating
   prefix assignment from interface identifier assignment is only used
   for routers not hosts.

   The following are some scenarios in which separation of prefix and
   interface identifier assignment is necessary.

   o  A DHCP server is incapable of generating an interface identifier
      for a host.  [RFC3972] describes a method for binding a public
      signature key to an IPv6 address in the Secure Neighbor Discovery
      (SEND) protocol [RFC3971].  The basic idea is to generate the
      interface identifier (i.e., the rightmost 64 bits) of the IPv6
      address by computing a cryptographic hash of the public key.  That
      is, the host decides it's interface identifier.

   o  A prefix is sufficient to identify a host.  [RFC4968] provides
      different IPv6 link models that are suitable for 802.16 based
      networks and a point-to- point link model is recommended.  Also,
      3GPP and 3GPP2 have earlier adopted the point-to-point link model
      based on the recommendations in [RFC3314].  In this model, one
      prefix can only be assigned to one interface of a host (mobile
      station) and different hosts (mobile stations) can't share a
      prefix.  The unique prefix can be used to identify the host.  It
      is not necessary for a DHCP server to generate an interface
      identifier for the host.

   A usage of DHCPv6 is proposed in the document to facilitate
   separation of prefix and interface identifier assignment.  A host's
   IPv6 address prefix is allocated from a DHCPv6 server while interface
   identifier is independently generated by the host.






Xia & Sarikaya           Expires August 18, 2008                [Page 3]

Internet-Draft    Host Generating Interface Identifier     February 2008


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   The terminology in this document is based on the definitions in
   [RFC3315], in addition to the ones specified in this section


   Derivative Prefix:  A prefix is derived from another prefix.  For
      example, a /64 prefix is derived from a /48 prefix, that is, the
      /64 prefix has the same leftmost 48 bits with the /48 prefix.

   Authorized Prefix:  A specific router is given a specific set of
      subnet prefixes to advertise; other routers have an authorization
      to advertise other subnet prefixes.  In [RFC3971],Certification
      Path Advertisement message is used to convey authorized prefixes.


3.  Address Auto-configuration in SEND

   Router Advertisements in [RFC4861] allow routers to inform hosts how
   to perform Address Auto-configuration.  For example, routers can
   specify whether hosts should use DHCPv6 and/or stateless address
   configuration.  In Router Advertisement message, M and O bits are
   used for indication of address auto-configuration mode.

   Whatever address auto-configuration mode a host uses, the following
   two parts are necessary for the host to formulate it's IPv6 address.
   o  A prefix part.  In [RFC3971], Certification Path Solicitation and
      Certification Path Advertisement messages are designed for
      verifying routers being authorized to act as routers.
      Certification Path Advertisement message can also be used to
      verify that routers are authorized to advertise a certain set of
      subnet prefixes.  In stateless auto-configuration mode, the
      prefixes in Router Advertisement message should be a subset of
      authorized prefixes, or derivative prefixes from authorized
      prefixes.  In the stateful auto-configuration mode, Section 4
      illustrates a procedure for prefix allocation from a DHCPv6
      server.
   o  An interface identifier.  The basic idea of [RFC3972] is to
      generate the interface identifier (i.e., the rightmost 64 bits) of
      the IPv6 address by computing a cryptographic hash of a public key
      of a host.  The host is responsible for interface identifier
      generation.





Xia & Sarikaya           Expires August 18, 2008                [Page 4]

Internet-Draft    Host Generating Interface Identifier     February 2008


4.  DHCPv6 Operation

   Figure 1 shows the operation of separating prefix assignment and
   interface identifier generation using DHCPv6.


        +------------+          +-----------+
        |Host(Client)|          |DHCP Server|
        +------------+          +-----------+
              |                       |
              |                       |
              |                       |
              |  1 Solicit            |
              |---------------------> |
              |                       |
              |  2 Advertise          |
              |<--------------------- |
              |                       |
              |                       |
    3 Combination of Prefix           |
     and Interface Identifier         |
              |                       |
              |                       |
              |  4 Request            |
              |---------------------> |
              |                       |
              |  5 Reply              |
              |<--------------------- |
              |                       |
              |                       |


                        Figure 1: DHCPv6 Operation

   1.  A host uses a Solicit message to discover DHCP servers configured
       to assign prefixes for the host.  Identity Association for Prefix
       Delegation Option (IA_PD) is defined in [RFC3633] for prefix
       delegation between a requesting router and delegating router.
       Referring to the definition, we design Identity Association for
       Prefix Assignment Option (IA-PA) in Section 5.1 for prefix
       assignment from a DHCPv6 server to a host.  The host uses hints
       for prefix assignment preference.  In CGA scenario, the hints are
       authorized prefixes advertised by an authorized router through
       Certification Path Advertisement defined in [RFC3971].
   2.  Based on the hints, the DHCP server assigns one or more prefixes
       to the host.  In CGA scenario, the assigned prefixes SHOULD be a
       subset of the authorized prefixes or derivative prefixes of the
       authorized prefixes.  Identity Association for Prefix Assignment



Xia & Sarikaya           Expires August 18, 2008                [Page 5]

Internet-Draft    Host Generating Interface Identifier     February 2008


       Option in Section 5.1 is used for conveying the assigned
       prefixes.  If there is not a proper prefix available, a status-
       code is returned to the host and the procedure is terminated.
   3.  The host generates an interface identifier and formulates a
       combined IPv6 address by concatenating the assigned prefix and
       the self-generated interface identifier.  There are many ways to
       generate interface identifier.  [RFC3972] defines a method to
       generate the interface identifier by computing a cryptographic
       hash of a public key of the host.  [RFC4941] describes another
       way in which interface identifier is derived from IEEE 802
       addresses.  An interface identifier could even be generated via
       random number generation.
   4.  The host sends a Request message for confirming usage of the
       combined address.  An IA Address Validation option defined in
       Section 5.3 SHOULD be included to convey the combined address.
   5.  The DHCP server SHOULD verify the uniqueness of the combined IP
       address, and send Reply with IA Address Validation option to
       grant the usage of the combined address.  Otherwise, a status
       code is included in the replied IA Address Validation option to
       deny the usage of the combined address.


5.  DHCPv6 Options

   In this section, two new options are defined, Identity Association
   for Prefix Assignment Option and IA Address Validation Option.  At
   the same time, we extend the usage of an existing option, IA_PD
   Prefix option.

5.1.  Identity Association for Prefix Assignment Option

   The IA_PA option is used to carry a prefix assignment identity
   association, the parameters associated with the IA_PA and the
   prefixes associated with it.

   The format of the IA_PA option is:















Xia & Sarikaya           Expires August 18, 2008                [Page 6]

Internet-Draft    Host Generating Interface Identifier     February 2008


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |         OPTION_IA_PA          |         option-length         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                         IAID (4 octets)                       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                              T1                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                              T2                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    .                                                               .
    .                          IA_PA-options                        .
    .                                                               .
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   option-code:      OPTION_IA_PA (TDB by IANA)

   option-length:    12 + length of IA_PA-options field.

   IAID:             The unique identifier for this IA_PA; the IAID must
                     be unique among the identifiers for all of this
                     host's IA_PAs.

   T1:               The time at which the host should
                     contact the DHCPv6 server from which the
                     prefixes in the IA_PA were obtained to extend the
                     lifetimes of the prefixes assigned to the IA_PA;
                     T1 is a time duration relative to the current time
                     expressed in units of seconds.

   T2:               The time at which the host should
                     contact any available DHCPv6 server to extend
                     the lifetimes of the prefixes assigned to the
                     IA_PA; T2 is a time duration relative to the
                     current time expressed in units of seconds.

   IA_PA-options:    Options associated with this IA_PA.



   The details of the fields are similar to the IA_PD option description
   in [RFC3633].  The difference is here a DHCP server and a host
   involved, while a delegating router and requesting router involved in
   [RFC3633].







Xia & Sarikaya           Expires August 18, 2008                [Page 7]

Internet-Draft    Host Generating Interface Identifier     February 2008


5.2.  IA_PD Prefix option

   IA_PD Prefix option in [RFC3633] is reused here.  Originally the
   option is used for conveying prefix information between a delegating
   router and a requesting router.  Here the IA_PD Prefix option is used
   to specify IPv6 address prefixes associated with an IA_PA in
   Section 5.1.  The IA_PD Prefix option must be encapsulated in the
   IA_PA-options field of an IA_PA option.

5.3.  IA Address Validation Option

   The IA Address Validation option must be encapsulated in the Options
   field of an IA_NA or IA_TA option.  IA_NA and IA_TA are described in
   [RFC3315].  A host sends this option to a DHCP server for validating
   the usage of an address in the option.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          OPTION_IAADDR_VAL    |          option-len           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                         IPv6 address                          |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      preferred-lifetime                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        valid-lifetime                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                        IAaddr-options                         .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      option-code   OPTION_IAADDR_VAL(TDB by IANA)

      option-len    24 + length of IAaddr-options field.

      IPv6 address  An IPv6 address.

      preferred-lifetime  The preferred lifetime for the IPv6 address in
                    the option, expressed in units of seconds.

      valid-lifetime  The valid lifetime for the IPv6 address in the
                    option, expressed in units of seconds.




Xia & Sarikaya           Expires August 18, 2008                [Page 8]

Internet-Draft    Host Generating Interface Identifier     February 2008


      IAaddr-options  Options associated with this address.



   The status of any operations involving this IA Address Validation is
   indicated in a Status Code option in the IAaddr-options field.  The
   details of the fields are the same as the description in [RFC3315].


6.  IANA consideration

   The value of OPTION_IA_PA and OPTION_IAADDR_VAL should assigned by
   IANA.

   A status code needs to be assgined by IANA:

   ValdidationFailure: a DHCPv6 server can't grant the usage of an
   address in IA Address Validation Option


7.  Security Considerations

   Security considerations in DHCPv6 are described in [RFC3315].

   To guard against attacks through prefix assignment and address
   confirmation, a host and a DHCPv6 server SHOULD use DHCP
   authentication as described in section "Authentication of DHCP
   messages" of [RFC3315].


8.  Acknowledgements


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              September 2007.

   [RFC3971]  Arkko, J., Kempf, J., Zill, B., and P. Nikander, "SEcure
              Neighbor Discovery (SEND)", RFC 3971, March 2005.

   [RFC3972]  Aura, T., "Cryptographically Generated Addresses (CGA)",



Xia & Sarikaya           Expires August 18, 2008                [Page 9]

Internet-Draft    Host Generating Interface Identifier     February 2008


              RFC 3972, March 2005.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.

   [RFC4291]  Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 4291, February 2006.

   [RFC4941]  Narten, T., Draves, R., and S. Krishnan, "Privacy
              Extensions for Stateless Address Autoconfiguration in
              IPv6", RFC 4941, September 2007.

9.2.  Informative references

   [RFC4968]  Madanapalli, S., "Analysis of IPv6 Link Models for 802.16
              Based Networks", RFC 4968, August 2007.

   [RFC3314]  Wasserman, M., "Recommendations for IPv6 in Third
              Generation Partnership Project (3GPP) Standards",
              RFC 3314, September 2002.


























Xia & Sarikaya           Expires August 18, 2008               [Page 10]

Internet-Draft    Host Generating Interface Identifier     February 2008


Authors' Addresses

   Frank Xia
   Huawei USA
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: xiayangsong@huawei.com


   Behcet Sarikaya
   Huawei USA
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: sarikaya@ieee.org

































Xia & Sarikaya           Expires August 18, 2008               [Page 11]

Internet-Draft    Host Generating Interface Identifier     February 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Xia & Sarikaya           Expires August 18, 2008               [Page 12]


