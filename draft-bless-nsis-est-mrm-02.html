<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>An Explicit Signaling Target Message Routing Method (EST-MRM)
       for the General Internet Signaling Transport (GIST) Protocol</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="An Explicit Signaling Target Message Routing Method (EST-MRM)
       for the General Internet Signaling Transport (GIST) Protocol">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">NSIS Working Group</td><td class="header">R. Bless</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">KIT</td></tr>
<tr><td class="header">Intended status: Experimental</td><td class="header">June 16, 2010</td></tr>
<tr><td class="header">Expires: December 18, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />An Explicit Signaling Target Message Routing Method (EST-MRM)
       for the General Internet Signaling Transport (GIST) Protocol<br />draft-bless-nsis-est-mrm-02</h1>

<h3>Abstract</h3>

<p>
	The standard operation of the General Internet Signaling
        Transport (GIST) Protocol uses a path-coupled message routing
        method (PC-MRM) to find nodes interested in signaling message
        exchanges. This specification proposes an Explicit Signaling
        Target Message Routing Method (EST-MRM) to allow for
        transmission of signaling messages to explicit targets.
	While the PC-MRM implicitly addresses signaling nodes by
        an interception method, the EST-MRM allows to explicitly 
	address signaling nodes.
     
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 18, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec:intro">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Explicit Signaling Target MRM<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MRI-def">2.1.</a>&nbsp;
Explicit Signaling Target MRI<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.2.</a>&nbsp;
Implementation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:MRMreqs">2.3.</a>&nbsp;
MRM Requirements<br />
<a href="#anchor3">3.</a>&nbsp;
Security Considerations<br />
<a href="#anchor4">4.</a>&nbsp;
IANA Considerations<br />
<a href="#sec:acks">5.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">6.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">6.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">6.2.</a>&nbsp;
Informative References<br />
<a href="#anchor7">Appendix&nbsp;A.</a>&nbsp;
Change History<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="sec:intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
The standard operation of the General Internet Signaling Transport
(GIST) Protocol <a class='info' href='#I-D.ietf-nsis-ntlp'>[I&#8209;D.ietf&#8209;nsis&#8209;ntlp]<span> (</span><span class='info'>Schulzrinne, H. and M. Stiemerling, &ldquo;GIST: General Internet Signalling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a> uses a
path-coupled message routing method (PC-MRM) to find nodes interested
in signaling message exchanges. The assumption is that signaling
involves the manipulation of state held in network elements along the
flow's data path. The path-coupled signaling paradigm tries to ensure
the alignment of control functions to the actual data path by letting
intermediate on-path nodes intercept the corresponding signaling messages.

</p>
<p>
For mobility environments seamless handovers are a desirable
objective. If signaling takes place after a handover was performed, it
will take some time until the state update has been completed. Thus,
there exist proposals to start the signaling before the handover takes
place and to use the current point of attachment for completion of the
signaling process. This "anticipated handover" enables a
pre-reservation of resources in a quality-of-service context for
instance, i.e., for QoS NSLP signaling applications <a class='info' href='#I-D.ietf-nsis-qos-nslp'>[I&#8209;D.ietf&#8209;nsis&#8209;qos&#8209;nslp]<span> (</span><span class='info'>Manner, J., Karagiannis, G., and A. McDonald, &ldquo;NSLP for Quality-of-Service Signaling,&rdquo; January&nbsp;2010.</span><span>)</span></a>. Therefore, a resource 
reservation can be used immediately after the handover
was performed.

</p>
<p>
With the path-coupled MRM, however, such kind of optimization
is impossible, since state should be established or manipulated
along a data path that is not used yet, but probably will be 
in the future. Therefore, in order to support anticipated handovers
a signaling message routing is required that is not strictly on path.

</p>
<p>
In <a class='info' href='#fig:anticipated-handover'>Figure&nbsp;1</a> an example for an
anticipated handover scenario is shown. If the mobile node (MN) is a
data sender for flow f_o and has information that it may change its
point of attachment from access A to access B, it starts signaling for
resources along the new path that begins at B. First, the MN sends
signaling messages to A and A will signal to B. B can then use
path-coupled signaling in order to find the correct data path for the
potential new flow f_n towards the CN.  Since signaling messages are
sent to A, but concerning f_n, a PC-MRM cannot be used. Similarly, the
signaling between A and B is not path related and must be done
explicitly.

</p><br /><hr class="insert" />
<a name="fig:anticipated-handover"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     CN
     |
  +-----+
 /   |   \
|    |    |
|    |    | Domain 4
 \   |   /
  +--|--+
     |
  +--|--+
 /   |   \
|    #%   |
|    # %  | Domain 3
 \   #   %
  +--#--+  %
     #       %
  +--#--+      %   +-----+
 /   #   \       %/       \
|    #    |      | %       |
|    #    |      |   %     |
 \   #   /        \   %   /
  +-[A]-+          +-[B]-+
     # Domain 1          Domain 2
     #          data flow f_o ##: MN-&gt;A-&gt;CN
     MN         data flow f_n %%: MN-&gt;B-&gt;CN
                [A]: Access router A
                [B]: Access router B
</pre></div>
<p>A handover scenario
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
<a class='info' href='#fig:anticipated-handover-sig'>Figure&nbsp;2</a> indicates 
the related signaling flows:
</p>
<blockquote class="text"><dl>
<dt>(a):</dt>
<dd>MN signals for flow f_n via its current access router A
</dd>
<dt>(b):</dt>
<dd>Access router A signals towards the candidate access router B
</dd>
<dt>(c):</dt>
<dd>On-path signaling for flow f_n starting from access router B (proxy mode)
</dd>
</dl></blockquote><p>

</p>
<p>
It is out of scope of this specification how the addressing
information about the future flow f_n is obtained by the MN or how A
determines the address of the candidate router B that must be signaled
next. One possibility is to use the CARD protocol <a class='info' href='#RFC4066'>[RFC4066]<span> (</span><span class='info'>Liebsch, M., Singh, A., Chaskar, H., Funato, D., and E. Shim, &ldquo;Candidate Access Router Discovery (CARD),&rdquo; July&nbsp;2005.</span><span>)</span></a> or that some additional addressing information
(such as MAC addresses of access points) is carried in the NSLP. Thus,
it is also allowed to let the source address of f_n being unspecified
if the MN has no knowledge about its actual future address. Since it
can be assumed that B has enough information to determine the required
address, it is then up to B to fill in the missing information for the
flow before continuing with the path-coupled signaling in (c).

</p>
<p>
<br /><hr class="insert" />
<a name="fig:anticipated-handover-sig"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     CN
     |
  +-----+
 /   |   \
|    |    |
|    |    | Domain 4
 \   |   /
  +--|--+
     |
  +--|--+
 /   |   \
|    #    |
|    # \\ | Domain 3
 \   #   \\
  +--#--+  \\
     #       \\
  +--#--+      \\  +-----+
 /   #   \       \\       \
|    #    |      | \\      |
|    #    |      |   (c)   |
 \   #   /        \   ||  /
  +-[A]=====(b)=====&gt;[B]-+
    /$\
     $ Domain 1          Domain 2
     $
    (a)     $$: signaling flow (a)
     $      ==: signaling flow (b)
     $      ||: signaling flow (c)
     MN
</pre></div><p>

<p>Signaling in a handover scenario
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />



<p>
Moreover, the path-coupled MRM uses the router alert option for
interception of signaling messages in intermediate nodes.  This raised
some concerns on the wide applicability of NSIS signaling, since packets with 
router alert options are normally processed by the control processor 
(i.e., in the slow path) of the router. The herein defined Explicit Signaling
Target Message Routing Method (EST-MRM) does not use a
router alert option in Query packets and may be used
for direct signaling to dedicated signaling proxies
or for relaying signaling messages after the signaling
messages have been properly authorized by such dedicated
systems. 

</p>
<p>
The Hypath proposal <a class='info' href='#I-D.cordeiro-nsis-hypath'>[I&#8209;D.cordeiro&#8209;nsis&#8209;hypath]<span> (</span><span class='info'>Cordeiro, L., &ldquo;GIST Extension for Hybrid On-path Off-path Signaling (HyPath),&rdquo; July&nbsp;2007.</span><span>)</span></a>
defined a similar MRM for QoS signaling between off-path resource control
elements like bandwidth brokers. It is for further study, how the EST-MRM
can be unified with the Hypath proposal.

</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Explicit Signaling Target MRM</h3>

<p>
In order to support cases like the ones described in the introduction,
this document proposes the specification of an Explicit Signaling
Target MRM (EST-MRM).

</p>
<p>
The EST-MRM uses a normal encapsulation for Query messages, i.e., UDP
encapsulation with the destination default port for GIST and the
destination IP address set to the next signaling hop. The source IP
address SHOULD be set to the signaling source address of the node who
is sending the message. EST-MRM routed Query messages do not have to be
intercepted but are explicitly routed to their next (or final)
signaling destination. In contrast to the EST-MRM, the path-coupled
MRM requires Query messages to be sent with Q-mode encapsulation
that is using a router alert option. Furthermore, implementations
must be aware, that Query messages may use with a different encapsulation
method than Q-mode encapsulation, i.e., the check for wrong encapsulation
MUST consider the particular MRM that is being used.

</p>
<p>The EST MRM defines an EST Message Routing Information (EST-MRI)
object that contains information about the actual data flow that is
being signaled as well as addressing information for the signaling
message routing and transport itself.

</p>
<p>
A node receiving a GIST message with an EST-MRI must check whether it
has one local address that matches the destination signaling
address. If it is not the case, it should forward the GIST message
basically unchanged towards the signaling destination address, only
with a decremented GIST Hop Count. Thus, even if the message gets
intercepted by accident, it will be forwarded to the final signaling
destination.

</p>
<p>
It is up to the signaling application's logic to determine the next
signaling hop. Usually, it will be related somehow to the given data
flow, e.g., the signaling target will be along a flows data path. In
the particular example of the anticipated handover, signaling targets
are the current access router as well as the candidate access router
that is presumably the next ingress node for the data flow.

</p>
<p>
When transmitting a signaling message with the EST-MRI, the outer IP
destination address SHOULD be set to the destination signaling address
of the EST-MRI.  In principle it is also possible to forward the
signaling message to a node that is not the final destination
signaling node.  In this case, the destination signaling address and
the IP destination address are not the same. This allows to let the
signaling take multiple intermediate hops. This mechanisms is,
however, for further study and its use is currently not recommended.

</p>
<a name="MRI-def"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Explicit Signaling Target MRI</h3>

<p>
The EST-MRI object (<a class='info' href='#fig:est-mri-layout'>Figure&nbsp;3</a>) starts with
the common MRI header (cf. section A.3.1 of
<a class='info' href='#I-D.ietf-nsis-ntlp'>[I&#8209;D.ietf&#8209;nsis&#8209;ntlp]<span> (</span><span class='info'>Schulzrinne, H. and M. Stiemerling, &ldquo;GIST: General Internet Signalling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a>) and carries a data flow address
description that is identical to the one that is defined in the
Path-coupled MRI (PC-MRI). In addition to that it carries at least
information about the origin signaling address and the destination
signaling address, which are usually identical to the IP source and IP
destination address of the UDP encapsulated signaling
message. Furthermore, it may contain an additional IP address of a
network node where the data flow, which is described by the PC-MRI,
enters the network. It is necessary to provide this information in
some cases since the currently deployed routing protocols can only
determine the next hop in direction towards the destination, but not
backwards towards the source. Thus, this information must be provided
to the next hop in most cases.

</p>
<p>The EST-MRI object has the following layout:
<br /><hr class="insert" />
<a name="fig:est-mri-layout"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
EST-MRI= MRI-header
         PC-MRI
         EST-Control
         Origin-Signaling-Address
         Destination-Signaling-Address
         [ Ingress-Node-Address ]
</pre></div><p>

<p>Layout of the Explicit Signaling Target Message Routing Information
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />



<p>The binary representation is shown in <a class='info' href='#fig:EST-MRI-bitlevel'>Figure&nbsp;4</a>.  First, it contains the normal data
flow address descriptor that is required for path-coupled
signaling. The latter is necessary so that a Resource Management Function (RMF) 
can determine the path of the data flow that is being signaled for. If the initiator
cannot predict its future address, it is allowed to set the source IP
address in the PC-MRI to unspecified (either 0.0.0.0 or ::).  After
the PC-MRI, an EST-Control field is provided, that provides further
information on the following fields or their interpretation
respectively. In addition to this description three IP addresses may
be provided. The Origin Signaling Address is the address of the node
who initiated the signaling. The Destination Signaling Address is the
address of the signaling peer that should receive the signaling
message. Both Origin Signaling Address and Destination Signaling
Address are mandatory to specify. They may be both either IPv4 or
IPv6. The actual type is given by the version field (IPVerS) in the high order
EST-Control word. Currently, unicast, anycast, or multicast addresses
are allowed for the Destination Signaling Address, whereas only 
unicast addresses are allowed for the Origin Signaling Address.
The same is true for the IP addresses of the outer UDP packet
that contains the Query message.
Providing the signaling addresses explicitly has
several advantages: it can be detected if the outer addresses are 
rewritten by a NAT or if the path-directed signaling is relayed via 
several hops before arriving at the final peer.

</p>
<p>The Ingress Node Address is optional to specify. When not present,
the version field (IPVerI) of the low order word in the EST-Control
field must be set to 0. Otherwise IPVerI indicates the IP
version of the address. It may have a different type than the Origin
Signaling Address or the Destination Signaling Address, but MUST have
the same type as the address pair in the PC-MRI flow address
descriptor. Mismatching versions must be rejected with an "MRI
ValidationFailure" error message with subcode 1 ("IP Version
Mismatch").  The Ingress Node Address is necessary to specify in some
scenarios, because the RMF cannot determine a flow path in the reverse
direction, except for very simple topologies.

</p><br /><hr class="insert" />
<a name="fig:EST-MRI-bitlevel"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                |IP-Ver |P|T|F|S|A|B|D|Reserved |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                       Source Address                        //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                      Destination Address                    //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Source Prefix |  Dest Prefix  |   Protocol    | DS-field  |Rsv|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:       Reserved        |              Flow Label               :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                              SPI                              :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:          Source Port          :       Destination Port        :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| IPVerS| Reserved              | IPVerI| Reserved              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                   Origin Signaling Address                  //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                Destination Signaling Address                //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                     Ingress Node Address                    //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
The MRI common header carries the N-flag and SHOULD be set to 0 
for this MRM.
A NAT may have to translate at least one of the Origin Signaling
Address, the Destination Signaling Address, or the Ingress Node
Address. Depending on the signaling scenario it may also have to
translate the contained PC-MRI information (for signaling messages
along (a) and (b) in <a class='info' href='#fig:anticipated-handover-sig'>Figure&nbsp;2</a>
this is usually not required).

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Implementation</h3>

<p>
The EST-MRI was implemented and tested successfully in the GIST-ka
implementation <a class='info' href='#gistka'>[gistka]<span> (</span><span class='info'>Bless, R., &ldquo;NSIS-ka - A free C++ implementation of NSIS protocols,&rdquo; June&nbsp;2010.</span><span>)</span></a>. Thanks to the object oriented
design of the protocol itself and also the implementation, the
implementation effort was quite low. It was shown that even MA re-use
works across PC-MRM and EST-MRM flows, i.e., if some flows are
signaled path-coupled and some are signaled explicitly, further
signaling for both types can re-use existing messaging associations.

</p>
<a name="sec:MRMreqs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
MRM Requirements</h3>

<p>
Section 3.3. of <a class='info' href='#I-D.ietf-nsis-ntlp'>[I&#8209;D.ietf&#8209;nsis&#8209;ntlp]<span> (</span><span class='info'>Schulzrinne, H. and M. Stiemerling, &ldquo;GIST: General Internet Signalling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a> mentions requirements
on the content of an MRM definition, that are discussed in this section.

</p>
<p>
   "The format of the information that describes the path that the
   signalling should take, the Message Routing Information (MRI).":

This specification describes the MRI format in <a class='info' href='#MRI-def'>Section&nbsp;2.1<span> (</span><span class='info'>Explicit Signaling Target MRI</span><span>)</span></a>.  
Since this signaling message routing method is using an explicit target 
address for the signaling destination (the Destination Signaling Address), 
as well as the Flow Identifier of the data flow, it contains sufficient 
information to determine the signaling path. The adjacent peer may use
the Flow Identifier information to determine the next explicit 
signaling hop.

</p>
<p>
   "A specification of the IP-level encapsulation of the messages
    which probe the network to discover the adjacent peers.  A
    downstream encapsulation must be defined; an upstream
    encapsulation is optional":

This MRM is using an explicit target address for the signaling
destination, i.e., the adjacent peer. The IP-level encapsulation 
is based on UDP normal encapsulation, i.e., the address of the
adjacent peer is explicitly written in the outer IP header.
There is no such thing as a downstream encapsulation since
the EST MRM may be used to route the signaling data 'sideways'
if compared to the direction of the data flow (cf. forwarding of
signaling messages along (b) in <a class='info' href='#fig:anticipated-handover-sig'>Figure&nbsp;2</a>).

</p>
<p>
     "A specification of what validation checks GIST should apply to the
      probe messages, for example to protect against IP address spoofing
      attacks.  The checks may be dependent on the direction (upstream
      or downstream) of the message.":

      This specification requires that a node receiving a GIST message 
      with an EST-MRI must check whether it has one local address that 
      matches the destination signaling address. Other
      specific validation checks cannot be provided within this specification
      as they depend on the determination algorithm of the next signaling hop.
      Validation checks should be applied if possible, but they are probably 
      only possible within the NSLP.

</p>
<p>
   "The mechanism(s) available for route change detection, i.e. any
    change in the neighbour relationships that the MRM discovers.  The
    default case for any MRM is soft-state refresh, but additional
    supporting techniques may be possible;"

    Basically, this MRM also uses soft-state refresh and 
    the NLI as indicator whether the adjacent peer has changed.
    However, since signaling messages routed with the EST MRM are 
    explicitly addressed to nodes and not intercepted
    there should be no re-routing events as GIST level.
    Re-routing events at IP-level will be transparent unless they
    lead to disconnection of the signaling target.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Security Considerations</h3>

<p>Basically, the security considerations of GIST apply.
The main change is that Query messages are not sent using Q-mode encapsulation
and that they contain a different MRI object. Since normal encapsulation
is already considered by GIST, no new security considerations are necessary.
Even for initial Query messages with an EST-MRI, the usual mechanisms
like authorized peer database checking and late state installation mechanisms
apply.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>According to section 9 of <a class='info' href='#I-D.ietf-nsis-ntlp'>[I&#8209;D.ietf&#8209;nsis&#8209;ntlp]<span> (</span><span class='info'>Schulzrinne, H. and M. Stiemerling, &ldquo;GIST: General Internet Signalling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a> this 
specification requires assignment of a new MRI-ID. Until an assignment
happens by IANA, it is suggested to use MRI-ID 125 for the EST-MRM.

</p>
<a name="sec:acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgments</h3>

<p>Part of this work was funded by Deutsche Telekom Laboratories
and developed in cooperation with T-Systems within the ScaleNet project.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-ntlp">[I-D.ietf-nsis-ntlp]</a></td>
<td class="author-text">Schulzrinne, H. and M. Stiemerling, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">GIST: General Internet Signalling Transport</a>,&rdquo; draft-ietf-nsis-ntlp-20 (work in progress), June&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-ntlp-20.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.cordeiro-nsis-hypath">[I-D.cordeiro-nsis-hypath]</a></td>
<td class="author-text">Cordeiro, L., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-cordeiro-nsis-hypath-04.txt">GIST Extension for Hybrid On-path Off-path Signaling (HyPath)</a>,&rdquo; draft-cordeiro-nsis-hypath-04 (work in progress), July&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-cordeiro-nsis-hypath-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-nsis-qos-nslp">[I-D.ietf-nsis-qos-nslp]</a></td>
<td class="author-text">Manner, J., Karagiannis, G., and A. McDonald, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-qos-nslp-18.txt">NSLP for Quality-of-Service Signaling</a>,&rdquo; draft-ietf-nsis-qos-nslp-18 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-nsis-qos-nslp-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4066">[RFC4066]</a></td>
<td class="author-text">Liebsch, M., Singh, A., Chaskar, H., Funato, D., and E. Shim, &ldquo;<a href="http://tools.ietf.org/html/rfc4066">Candidate Access Router Discovery (CARD)</a>,&rdquo; RFC&nbsp;4066, July&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4066.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="gistka">[gistka]</a></td>
<td class="author-text">Bless, R., &ldquo;<a href="http://nsis-ka.org/">NSIS-ka - A free C++ implementation of NSIS protocols</a>,&rdquo; June&nbsp;2010.</td></tr>
</table>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Change History</h3>

<p>Changes from -00 to -01:
</p>
<ul class="text">
<li>added <a class='info' href='#sec:MRMreqs'>Section&nbsp;2.3<span> (</span><span class='info'>MRM Requirements</span><span>)</span></a>
</li>
<li>added <a class='info' href='#sec:acks'>Section&nbsp;5<span> (</span><span class='info'>Acknowledgments</span><span>)</span></a>
</li>
</ul><p>

</p>
<p>Changes from -01 to -02:
</p>
<ul class="text">
<li>added another motivation in <a class='info' href='#sec:intro'>Section&nbsp;1<span> (</span><span class='info'>Introduction</span><span>)</span></a>
</li>
<li>added text for type of addresses  (unicast, anycast, multicast)
</li>
<li>changed intended status to experimental due to other NSIS documents
</li>
<li>editorial nits
</li>
</ul><p>

</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Roland Bless</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Karlsruhe Institute of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Institute of Telematics</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Zirkel 2, Building 20.20</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Karlsruhe  76131</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 721 608 6413</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:roland.bless@kit.edu">roland.bless@kit.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://tm.kit.edu/~bless">http://tm.kit.edu/~bless</a></td></tr>
</table>
</body></html>
