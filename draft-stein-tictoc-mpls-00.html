<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Transport of Timing Packets over MPLS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Transport of Timing Packets over MPLS">
<meta name="keywords" content="timing, MPLS">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">TICTOC</td><td class="header">Y(J). Stein</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">RAD Data Communications</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">September 19, 2010</td></tr>
<tr><td class="header">Expires: March 23, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Transport of Timing Packets over MPLS<br />draft-stein-tictoc-mpls-00.txt</h1>

<h3>Abstract</h3>

<p> The TICTOC charter specifies that the working group is concerned with 
     highly accurate time and frequency distribution over native IP and 
     MPLS-enabled IP Packet Switched Networks (PSNs). 
     We discuss here issues specific to MPLS PSNs.  
 
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 23, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Motivation<br />
<a href="#anchor2">2.</a>&nbsp;
Encapsulation Options<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Using IP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
Using an Ethernet PW<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.3.</a>&nbsp;
Defining a New MPLS Client or a new PW Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.4.</a>&nbsp;
Using VCCV or the G-ACh<br />
<a href="#anchor7">3.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">4.</a>&nbsp;
References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Motivation</h3>

<p> The TICTOC charter specifies that the working group is concerned with 
     highly accurate time and frequency distribution over native IP and 
	 MPLS-enabled IP Packet Switched Networks (PSNs). 
	 To date, discussions have focused on NTPv4 and 1588-2008 timing distribution
	 using UDP/IP encapsulations. 
	 The present document discusses transport of timing packets over MPLS PSNs,
	 and is based on material presented and discussed in previous TICTOC meetings. 
 
</p>
<p> We first must address the question as to why special treatment is needed at all
     for transport of timing packets over MPLS.
     Timing packets in IP format can certainly be transported over MPLS
	 without the LSRs along the path being aware of them.
	 However, there advantages to being able to recognize, and potentially manipulate, 
	 timing packets.     
 
</p>
<p> For highly accurate timing distribution, timing packets are required
     to travel through the PSN with minimal, symmetric, and quasistationary delay,
	 as well as minimal and uncorrelated packet delay variation.
	 Thus, prioritization and symmetric routing of timing packets are minimal requirements.
	 For the most demanding applications, timing distribution mechanisms avail themselves
	 of "on-path support", such as Transparent Clock (TC) overwriting of header fields.
	 None of these can be selectively applied to timing packets unless they can be
	 recognized by the LSR.
 
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Encapsulation Options</h3>

<p> MPLS as a server layer presently permits three types of clients:
  </p>
<blockquote class="text"><dl>
<dt>1.</dt>
<dd> MPLS (via label stacking) 
</dd>
<dt>2.</dt>
<dd> IP (either IPv4 or IPv6) 
</dd>
<dt>3.</dt>
<dd> pseudowires (PWs) 
</dd>
</dl></blockquote><p> 
  although we can not rule out defining a new client for timing distribution.
  Taking into account the two defined associated channels that carry non-user traffic, 
  namely the VCCV associated channel for PWs <a class='info' href='#RFC5085'>[RFC5085]<span> (</span><span class='info'>Nadeau, T. and C. Pignataro, &ldquo;Pseudowire Virtual Circuit Connectivity Verification (VCCV): A Control Channel for Pseudowires,&rdquo; December&nbsp;2007.</span><span>)</span></a>
  and the GAL G-ACh defined for MPLS-TP <a class='info' href='#RFC5586'>[RFC5586]<span> (</span><span class='info'>Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;MPLS Generic Associated Channel,&rdquo; June&nbsp;2009.</span><span>)</span></a>
  any proposal for carrying timing packets over MPLS will need to
  put the timing information in one of the following six formats: 
  </p>
<blockquote class="text"><dl>
<dt>1.</dt>
<dd> a new MPLS client type 
</dd>
<dt>2.</dt>
<dd> IP 
</dd>
<dt>3.</dt>
<dd> an Ethernet PW 
</dd>
<dt>4.</dt>
<dd> a new "timing" pseudowire type 
</dd>
<dt>5.</dt>
<dd> a new VCCV channel type 
</dd>
<dt>6.</dt>
<dd> a new G-ACh channel type. 
</dd>
</dl></blockquote><p> 
   We will discuss each of these options in turn.   
  
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Using IP</h3>

<p> Since the two main timing distribution protocols have UDP/IP encapsulations, 
      arguably the simplest method of transporting timing packets is in this format.
	  There are several methods for intermediate LSRs to recognize the timing packets :
	  </p>
<ul class="text">
<li> Deep Packet Inspection (i.e., peeking under the MPLS stack and identifying well-known port numbers) 
</li>
<li> using an arbitrary configured or signaled MPLS label 
</li>
<li> using a new reserved MPLS label 
</li>
<li> using a specific MPLS Traffic Class (ex-EXP).  
</li>
</ul><p>
	  It should be noted that there are very few available reserved labels,
	  and that traffic class usage is not standardized.
  
</p>
<p> If an arbitrary label is required to be signaled, 
      then an extension to the signaling protocol will be required.
	  Such an extension will identify the FEC as belonging to a timing flow.
  
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Using an Ethernet PW</h3>

<p>
   The UDP/IP packets of the timing distribution protocols of the previous subsection
   may be contained in Ethernet frames, that can be transported over an MPLS network
   in an Ethernet PW. In addition, IEEE 1588-2008 has a native Ethernet (non-IP) encapsulation.   
  
</p>
<p>
   Methods for identifying timing packets inside an Ethernet PW are similar to those
   of the previous subsection.
  
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Defining a New MPLS Client or a new PW Type</h3>

<p> IEEE 1588-2008 allows for different transport layers to be defined,
      with annexes to the standard defining UDP/IPv4, UDP/IPv6, Ethernet, 
      and several other transport networks.
      It is possible to define a new transport mechanism for MPLS,
      which entails specifying how to encapsulate a PTP PDU in an MPLS packet.
      This can be done in the context of the PWE3 architecture
      (this was proposed in draft-ronc-ptp-mpls-00.txt, now expired)
      or without reference to that architecture.
	  If the PWE3 architecture is used, then PWE3 features, 
	  such as the control word and the control protocol, may be used.
  
</p>
<p> Whether the MPLS encapsulation is a PW or not, 
      the timing packet will be recognized by virtue of its bottom-of-stack label.
	  When additional labels are present, the LSR will need to search for the label
	  with S=1. This technique is technically a violation of the MPLS architecture,
      but is presently performed for other purposes, e.g., ECMP avoidance <a class='info' href='#RFC4928'>[RFC4928]<span> (</span><span class='info'>Swallow, G., Bryant, S., and L. Andersson, &ldquo;Avoiding Equal Cost Multipath Treatment in MPLS Networks,&rdquo; June&nbsp;2007.</span><span>)</span></a>. 
  
</p>
<p> The particular label(s) used to signify timing packets may be distributed by manual configuration
      or a signaling protocol. If the latter is employed, a new FEC type will need to be defined. 
	  If a PW is used, a new  MPLS Pseudowire Type <a class='info' href='#RFC4446'>[RFC4446]<span> (</span><span class='info'>Martini, L., &ldquo;IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3),&rdquo; April&nbsp;2006.</span><span>)</span></a>
	  will be needed for use in the PWE3 control protocol <a class='info' href='#RFC4447'>[RFC4447]<span> (</span><span class='info'>Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP),&rdquo; April&nbsp;2006.</span><span>)</span></a>.
  
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Using VCCV or the G-ACh</h3>

<p> Timing is often distributed in order to enable proper functioning of applications 
      that already define PWs between the end points of the timing flow.
      In this case, the timing information may be placed in the VCCV associated channel
      of the application's PW.
      The associated channel is typically identified by having the same PW (bottom-of-stack) label
      as the application, but a control	word with 0001 in its initial nibble.
	  The timing packets may then be identified by a new channel type,
	  or may use the IP channel type and then would be identified by the well-known port numbers.
	  It is recognized that this requires the LSR to perform relatively deep packet inspection.
  
</p>
<p> If there is no application PW between the timing end points,
      then we may still use the Generic Associated CHannel (G-ACh) defined in <a class='info' href='#RFC5586'>[RFC5586]<span> (</span><span class='info'>Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;MPLS Generic Associated Channel,&rdquo; June&nbsp;2009.</span><span>)</span></a>
	  in a similar manner. The G-ACh is identified by the G-ACh Label (GAL),
	  which is a reserved MPLS label of value 13, at its bottom-of-stack.
	  The format after the GAL is the same as that of VCCV,
	  and thus the considerations of the previous paragraph apply.
  
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
IANA Considerations</h3>

<p> This document requires no IANA actions.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>4.&nbsp;References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC4446">[RFC4446]</a></td>
<td class="author-text">Martini, L., &ldquo;<a href="http://tools.ietf.org/html/rfc4446">IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3)</a>,&rdquo; BCP&nbsp;116, RFC&nbsp;4446, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4446.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4447">[RFC4447]</a></td>
<td class="author-text">Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;<a href="http://tools.ietf.org/html/rfc4447">Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)</a>,&rdquo; RFC&nbsp;4447, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4447.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4928">[RFC4928]</a></td>
<td class="author-text">Swallow, G., Bryant, S., and L. Andersson, &ldquo;<a href="http://tools.ietf.org/html/rfc4928">Avoiding Equal Cost Multipath Treatment in MPLS Networks</a>,&rdquo; BCP&nbsp;128, RFC&nbsp;4928, June&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4928.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5085">[RFC5085]</a></td>
<td class="author-text">Nadeau, T. and C. Pignataro, &ldquo;<a href="http://tools.ietf.org/html/rfc5085">Pseudowire Virtual Circuit Connectivity Verification (VCCV): A Control Channel for Pseudowires</a>,&rdquo; RFC&nbsp;5085, December&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5085.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5586">[RFC5586]</a></td>
<td class="author-text">Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;<a href="http://tools.ietf.org/html/rfc5586">MPLS Generic Associated Channel</a>,&rdquo; RFC&nbsp;5586, June&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5586.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yaakov (Jonathan) Stein</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">RAD Data Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">24 Raoul Wallenberg St., Bldg C</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tel Aviv  69719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ISRAEL</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yaakov_s@rad.com">yaakov_s@rad.com</a></td></tr>
</table>
</body></html>
