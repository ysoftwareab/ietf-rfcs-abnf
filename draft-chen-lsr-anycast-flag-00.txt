



LSR                                                              R. Chen
Internet-Draft                                                   D. Zhao
Intended status: Standards Track                         ZTE Corporation
Expires: 14 March 2022                                         P. Psenak
                                                           Cisco Systems
                                                       10 September 2021


           Updates to Anycast Property advertisement for OSPF
                     draft-chen-lsr-anycast-flag-00

Abstract

   Both SR-MPLS prefixes-SID and IPv4/IPv6 prefix may be configured as
   anycast and as such the same value can be advertised by multiple
   routers.  It is useful for other routers to know that the
   advertisement is for an anycast identifier.

   This document updates [RFC7684] and [RFC8362], by defining a new flag
   in OSPFv2 Extended Prefix Opaque LSA [RFC7684] and Prefix Options
   [RFC8362] to advertise the anycast property, and also updates the
   corresponding interpretation of the Flags field of the Prefix
   Attribute Flags TLV in [RFC9085].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 14 March 2022.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.






Chen, et al.              Expires 14 March 2022                 [Page 1]

Internet-Draft       Anycast Property advertisement       September 2021


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Simplified BSD License text
   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  Updates to Anycast Property advertisement for OSPFv3  . . . .   3
   3.  Updates to Anycast Property advertisement for OSPFv2  . . . .   4
   4.  Updates to Anycast Property advertisement for BGP-LS  . . . .   4
   5.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
     6.1.  OSPFv3 Prefix Options . . . . . . . . . . . . . . . . . .   5
     6.2.  OSPFv2 Extended Prefix TLV  . . . . . . . . . . . . . . .   5
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   Both SR-MPLS prefixes-SID and IPv4/IPv6 prefix may be configured as
   anycast and as such the same value can be advertised by multiple
   routers.  It is useful for other routers to know that the
   advertisement is for an anycast identifier.

   [RFC7684] defines OSPFv2 Opaque LSAs based on Type-Length-Value (TLV)
   tuples that can be used to associate additional attributes with
   prefixes or links.  The OSPFv2 Extended Prefix TLV that is contained
   in the OSPFv2 Extended Prefix Opaque LSA is used to advertise
   additional attributes associated with the prefix, but the definition
   of anycast flag to identify the prefix as anycast has not yet been
   defined.

   [RFC8362] extends the LSA format by encoding the existing OSPFv3 LSA
   information in Type-Length-Value (TLV) tuples and allowing
   advertisement of additional information with additional TLVs.  Each
   prefix is advertised along with an 8-bit field of capabilities,by
   using the Prefix Options, but the definition of anycast capability
   bit to identify the prefix as anycast has not yet been defined.





Chen, et al.              Expires 14 March 2022                 [Page 2]

Internet-Draft       Anycast Property advertisement       September 2021


   [RFC9085] defines the Prefix Attribute Flags TLV carries IPv4/IPv6
   prefix attribute flags information, and the Flags field of this TLV
   is interpreted according to OSPFv2 [RFC7684] and OSPFv3 [RFC8362],
   but the anycast flag isnot included.

   This document updates [RFC7684] and [RFC8362], by defining a new flag
   in OSPFv2 Extended Prefix Opaque LSA [RFC7684] and Prefix Options
   [RFC8362] to advertise the anycast property, and also updates the
   corresponding interpretation of the Flags field of the Prefix
   Attribute Flags TLV in [RFC9085].

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

2.  Updates to Anycast Property advertisement for OSPFv3

   The prefix may be configured as anycast and it is useful for other
   routers to know that the advertisement is for an anycast identifier.

   A new flag in Prefix Options [RFC8362] is defined to advertise the
   anycast property, The figure below shows the position of the A-bit in
   the prefix options.


                          0  1  2  3  4  5  6  7
                         +--+--+--+--+--+--+--+--+
                         |  | A| N|DN| P| x|LA|NU|
                         +--+--+--+--+--+--+--+--+

                                  Figure 1

   When the prefix is configured as anycast, the A-flag SHOULD be set.
   Otherwise, this flag MUST be clear.If both N-flag and A-flag are set,
   the receiving routers MUST ignore the N-flag.

   A-flag MUST be preserved when the prefix is propagated between areas.

   The same prefix can be advertised by multiple routers, and that if at
   least one of them sets the A-Flag in its advertisement, the prefix
   SHOULD be considered as anycast.








Chen, et al.              Expires 14 March 2022                 [Page 3]

Internet-Draft       Anycast Property advertisement       September 2021


3.  Updates to Anycast Property advertisement for OSPFv2

   [RFC7684] defines one-octet field contains flags applicable to the
   prefix, and it only defines two flag (A-Flag (Attach Flag) and N-Flag
   (Node Flag).  This section extends a new flag: An(Anycast Flag).

   An-flag: A new flag in OSPFv2 Extended Prefix Opaque LSA [RFC7684] is
   defined to advertise the anycast property.  When the prefix is
   configured as anycast, the An-flag SHOULD be set.  Otherwise, this
   flag MUST be clear.If both N-flag and An-flag are set, the receiving
   routers MUST ignore the N-flag.

   An-flag MUST be preserved when the prefix is propagated between
   areas.

   The same prefix can be advertised by multiple routers, and that if at
   least one of them sets the An-Flag in its advertisement, the prefix
   SHOULD be considered as anycast.

4.  Updates to Anycast Property advertisement for BGP-LS

   [RFC9085] defines the Prefix Attribute Flags TLV carries IPv4/IPv6
   prefix attribute flags information, and the Flags field of this TLV
   is interpreted according to OSPFv2 [RFC7684]and OSPFv3 [RFC8362].This
   section extends the interpretation of the Flags field of the Prefix
   Attribute Flags TLV.

   Flags:

   *  IS-IS flags refer to Section 2.3.2 of [RFC9085] .

   *  OSPFv2 flags correspond to the Flags field of the OSPFv2 Extended
      Prefix TLV defined in Section 2.1 of [RFC7684] and extended in
      Section 3 of this draft.

   *  OSPFv3 flags map to the Prefix Options field defined in
      Appendix A.4.1.1 of [RFC5340] and extended in Section 3.1 of
      [RFC8362] and Section 4 of this draft.

5.  Acknowledgements

   TBD.

6.  IANA Considerations

   This document requests allocation for the following bits registry.





Chen, et al.              Expires 14 March 2022                 [Page 4]

Internet-Draft       Anycast Property advertisement       September 2021


6.1.  OSPFv3 Prefix Options

   This document adds a new bit in the "OSPFv3 Prefix Options" registry:

   A-flag (Anycast Flag).

6.2.  OSPFv2 Extended Prefix TLV

   This document adds a new bit in the "OSPFv2 Extended Prefix TLV"
   registry:

   An-flag (Anycast Flag).

7.  Security Considerations

   Procedures and protocol extensions defined in this document do not
   affect the OSPFv2 , OSPFv3 and BGP-LS security model.  See the
   "Security Considerations"section of [RFC7684] for a discussion of
   OSPFv2 security, the "Security Considerations"section of [RFC8362]
   for a discussion of OSPFv3 security and the "Security
   Considerations"section of [RFC9085] for a discussion of SR BGP-LS
   security.

8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5340]  Coltun, R., "OSPF for IPv6", RFC 5340,
              DOI 10.17487/RFC5340, July 2008,
              <https://www.rfc-editor.org/info/rfc5340>.

   [RFC7684]  Psenak, P., "Key words for use in RFCs to Indicate
              Requirement Levels", RFC 7684, DOI 10.17487/RFC7684,
              November 2015, <https://www.rfc-editor.org/info/rfc7684>.

   [RFC8362]  Lindem, A., "OSPFv3 Link State Advertisement (LSA)
              Extensibility", RFC 8362, DOI 10.17487/RFC8362, April
              2018, <https://www.rfc-editor.org/info/rfc8362>.

   [RFC9085]  Previdi, S., "Border Gateway Protocol - Link State (BGP-
              LS) Extensions for Segment Routing", RFC 9085,
              DOI 10.17487/RFC9085, August 2021,
              <https://www.rfc-editor.org/info/rfc9085>.



Chen, et al.              Expires 14 March 2022                 [Page 5]

Internet-Draft       Anycast Property advertisement       September 2021


Authors' Addresses

   Ran Chen
   ZTE Corporation
   Nanjing
   China

   Email: chen.ran@zte.com.cn


   Detao Zhao
   ZTE Corporation
   Nanjing
   China

   Email: zhao.detao@zte.com.cn


   Peter Psenak
   Cisco Systems
   Slovakia

   Email: ppsenak@cisco.com




























Chen, et al.              Expires 14 March 2022                 [Page 6]
