<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RTP Payload Format for VP8 Video </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions, Definitions and Acronyms">
<link href="#rfc.section.3" rel="Chapter" title="3 Media Format Background">
<link href="#rfc.section.4" rel="Chapter" title="4 Payload Format">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 VP8 Payload Descriptor">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 VP8 Payload Header">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Aggregated and Fragmented Payloads">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Examples of VP8 RTP Stream">
<link href="#rfc.section.4.4.1" rel="Chapter" title="4.4.1 Key frame in a single RTP packet">
<link href="#rfc.section.4.4.2" rel="Chapter" title="4.4.2 VP8 interframe in a single RTP packet; no PictureID">
<link href="#rfc.section.4.4.3" rel="Chapter" title="4.4.3 VP8 partitions in separate RTP packets">
<link href="#rfc.section.4.4.4" rel="Chapter" title="4.4.4 VP8 frame fragmented across RTP packets">
<link href="#rfc.section.4.4.5" rel="Chapter" title="4.4.5 VP8 frame with long PictureID">
<link href="#rfc.section.5" rel="Chapter" title="5 Using VP8 with RPSI and SLI Feedback">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 RPSI">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 SLI">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Example">
<link href="#rfc.section.6" rel="Chapter" title="6 Payload Format Parameters">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Restrictions on usage">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Media Type Registration">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 SDP Parameters">
<link href="#rfc.section.6.3.1" rel="Chapter" title="6.3.1 Mapping of MIME Parameters to SDP">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Example">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Congestion Control">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This memo describes an RTP payload format for the VP8 video codec. The payload format has wide applicability, as it supports applications from low bit-rate peer-to-peer usage, to high bit-rate video conferences." />
  <meta name="description" content="This memo describes an RTP payload format for the VP8 video codec. The payload format has wide applicability, as it supports applications from low bit-rate peer-to-peer usage, to high bit-rate video conferences." />
  <meta name="keywords" content="RFC, Request for Comments, RTP, VP8, WebM" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Payload Working Group</td>
<td class="right">P. Westin</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">H.F. Lundin</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">M. Glover</td>
</tr>
<tr>
<td class="left">Expires: January 13, 2012</td>
<td class="right">J. Uberti</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">F. Galligan</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Google</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 12, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RTP Payload Format for VP8 Video <br />
  <span class="filename">draft-ietf-payload-vp8-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This memo describes an RTP payload format for the VP8 video codec. The payload format has wide applicability, as it supports applications from low bit-rate peer-to-peer usage, to high bit-rate video conferences.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 13, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions, Definitions and Acronyms</a>
</li>
<li>3.   <a href="#rfc.section.3">Media Format Background</a>
</li>
<li>4.   <a href="#rfc.section.4">Payload Format</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">VP8 Payload Descriptor</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">VP8 Payload Header</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Aggregated and Fragmented Payloads</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Examples of VP8 RTP Stream</a>
</li>
<li>4.4.1.   <a href="#rfc.section.4.4.1">Key frame in a single RTP packet</a>
</li>
<li>4.4.2.   <a href="#rfc.section.4.4.2">VP8 interframe in a single RTP packet; no PictureID</a>
</li>
<li>4.4.3.   <a href="#rfc.section.4.4.3">VP8 partitions in separate RTP packets</a>
</li>
<li>4.4.4.   <a href="#rfc.section.4.4.4">VP8 frame fragmented across RTP packets</a>
</li>
<li>4.4.5.   <a href="#rfc.section.4.4.5">VP8 frame with long PictureID</a>
</li>
<li>5.   <a href="#rfc.section.5">Using VP8 with RPSI and SLI Feedback</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">RPSI</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">SLI</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Example</a>
</li>
<li>6.   <a href="#rfc.section.6">Payload Format Parameters</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Restrictions on usage</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Media Type Registration</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">SDP Parameters</a>
</li>
<li>6.3.1.   <a href="#rfc.section.6.3.1">Mapping of MIME Parameters to SDP</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Example</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Congestion Control</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">This memo describes an RTP payload specification applicable to the transmission of video streams encoded using the VP8 video codec <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>.  The format described in this document can be used both in peer-to-peer and video conferencing applications.  </p>
<p id="rfc.section.1.p.2">The VP8 codec uses three different reference frames for interframe prediction: the previous frame, the golden frame, and the altref frame. The payload specification in this memo has elements that enable advanced use of the reference frames, e.g., for improved loss robustness.  </p>
<p id="rfc.section.1.p.3">One specific use case of the three reference frame types is temporal scalability. By setting up the reference hierarchy in the appropriate way, up to five temporal layers can be encoded.  (How to set up the reference hierarchy for temporal scalability is not within the scope of this memo.) </p>
<p id="rfc.section.1.p.4">Another property of the VP8 codec is that it applies data partitioning to the encoded data.  Thus, an encoded VP8 frame can be divided into two or more partitions, as described in "VP8 Data Format and Decoding Guide" <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>.  The first partition (prediction or mode) contains prediction mode parameters and motion vectors for all macroblocks. The remaining partitions all contain the transform coefficients for the residuals. The first partition is decodable without the remaining residual partitions. The subsequent partitions may be useful even if some part of the frame is lost. This memo allows the partitions to be sent separately or in the same RTP packet. It may be beneficial for decoder error-concealment to send the partitions in different packets, even though it is not mandatory according to this specification.  </p>
<p id="rfc.section.1.p.5">The format specification is described in <a href="#payloadFormat">Section 4</a>. In <a href="#RPSIandSLI">Section 5</a>, a method to acknowledge receipt of reference frames using RTCP techniques is described.  </p>
<p id="rfc.section.1.p.6">The payload partitioning and the acknowledging method both serve as motivation for three of the fields included in the payload format: the "PartID", "1st partition size" and "PictureID" fields. The ability to encode a temporally scalable stream motivates the "TL0PICIDX" and "TID" fields.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#conventions" id="conventions">Conventions, Definitions and Acronyms</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#mediaFormatBackground" id="mediaFormatBackground">Media Format Background</a>
</h1>
<p id="rfc.section.3.p.1">VP8 is based on decomposition of frames into square sub-blocks of pixels, prediction of such sub-blocks using previously constructed blocks, and adjustment of such predictions (as well as synthesis of unpredicted blocks) using a discrete cosine transform (hereafter abbreviated as DCT). In one special case, however, VP8 uses a "Walsh-Hadamard" (hereafter abbreviated as WHT) transform instead of a DCT. An encoded VP8 frame is divided into two or more partitions, as described in <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>. The first partition (prediction or mode) contains prediction mode parameters and motion vectors for all macroblocks. The remaining partitions all contain the quantized DCT/WHT coefficients for the residuals. There can be 1, 2, 4, or 8 DCT/WHT partitions per frame, depending on encoder settings.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#payloadFormat" id="payloadFormat">Payload Format</a>
</h1>
<div id="#rfc.figure.1"></div>
<div id="#figureRTPHeader"></div>
<p>The general RTP payload format for VP8 is depicted below.</p>
<pre>
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |V=2|P|X|  CC   |M|     PT      |       sequence number         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           timestamp                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |           synchronization source (SSRC) identifier            |
  +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
  |            contributing source (CSRC) identifiers             |
  |                             ....                              |
  +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
  |            VP8 payload descriptor (integer #bytes)            |
  :                                                               :
  |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               : VP8 payload header (3 octets) |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  | VP8 pyld hdr  :                                               |
  +-+-+-+-+-+-+-+-+                                               |
  :                   Bytes 4..N of VP8 payload                   :
  |                                                               |
  |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               :    OPTIONAL RTP padding       |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
          </pre>
<p>The VP8 payload descriptor and VP8 payload header will be described in the sequel.  OPTIONAL RTP padding MUST NOT be included unless the P bit is set.  </p>
<p></p>

<dl>
<dt>Marker bit:</dt>
<dd style="margin-left: 8">The marker bit indicates the last packet part of a frame.  This enables a decoder to finish decoding the picture, where it otherwise may need to wait for the next packet to explicitly know that the frame is complete.</dd>
<dt>Timestamp:</dt>
<dd style="margin-left: 8">The RTP timestamp indicates the time when the frame was sampled at a clock rate of 90 kHz.</dd>
<dt>Sequence number:</dt>
<dd style="margin-left: 8">The sequence numbers are monotonically increasing and set as packets are sent.</dd>
<dt></dt>
<dd style="margin-left: 8">The remaining RTP header fields are used as specified in <a href="#RFC3550">[RFC3550]</a>.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#VP8payloadDescriptor" id="VP8payloadDescriptor">VP8 Payload Descriptor</a>
</h1>
<div id="#rfc.figure.2"></div>
<div id="#figureVP8payloadDescriptor"></div>
<p>The first octets after the RTP header are the VP8 payload descriptor, with the following structure.</p>
<pre>
    0 1 2 3 4 5 6 7 
   +-+-+-+-+-+-+-+-+
   |X|R|N|S|PartID | (REQUIRED)
   +-+-+-+-+-+-+-+-+
X: |I|L|T|  RSV-A  | (OPTIONAL)
   +-+-+-+-+-+-+-+-+
I: |   PictureID   | (OPTIONAL)
   +-+-+-+-+-+-+-+-+
L: |   TL0PICIDX   | (OPTIONAL)
   +-+-+-+-+-+-+-+-+
T: | TID |  RSV-B  | (OPTIONAL)
   +-+-+-+-+-+-+-+-+
            </pre>
<p></p>

<dl>
<dt>X:</dt>
<dd style="margin-left: 8">Extended control bits present. When set to one, the extension octet MUST be provided immediately after the mandatory first octet. If the bit is zero, all optional fields MUST be omitted.</dd>
<dt>R:</dt>
<dd style="margin-left: 8">Bit reserved for future use. MUST be set to zero and MUST be ignored by the receiver.</dd>
<dt>N:</dt>
<dd style="margin-left: 8">Non-reference frame. When set to one, the frame can be discarded without affecting any other future or past frames. If the reference status of the frame is unknown, this bit SHOULD be set to zero to avoid discarding frames needed for reference.  <ul class="empty"><li>Informative note: This document does not describe how to determine if an encoded frame is non-reference. The reference status of an encoded frame is preferably provided from the encoder implementation.  </li></ul>
<p> </p>
</dd>
<dt>S:</dt>
<dd style="margin-left: 8">Start of VP8 partition. SHOULD be set to 1 when the first payload octet of the RTP packet is the beginning of a new VP8 partition, and MUST NOT be 1 otherwise.  The S bit MUST be set to 1 for the first packet of each encoded frame.</dd>
<dt>PartID:</dt>
<dd style="margin-left: 8">Partition index. Denotes which VP8 partition the first payload octet of the packet belongs to.  The first VP8 partition (containing modes and motion vectors) MUST be labeled with PartID = 0. PartID SHOULD be incremented for each subsequent partition, but MAY be kept at 0 for all packets. PartID MUST NOT be larger than 8.  If more than one packet in an encoded frame contains the same PartID, the S bit MUST NOT be set for any other packet than the first packet with that PartID.</dd>
</dl>

<p> </p>
<p id="rfc.section.4.1.p.2">When the X bit is set to 1 in the first octet, the OPTIONAL extension bit field MUST be present in the second octet. If the X bit is 0, the extension bit field MUST NOT be present, and all bits below MUST be implicitly interpreted as 0.  </p>

<dl>
<dt>I:</dt>
<dd style="margin-left: 8">PictureID present. When set to one, the OPTIONAL PictureID MUST be present after the extension bit field and specified as below. Otherwise, PictureID MUST NOT be present.</dd>
<dt>L:</dt>
<dd style="margin-left: 8">TL0PICIDX present. When set to one, the OPTIONAL TL0PICIDX MUST be present and specified as below, and the T bit MUST be set to 1. Otherwise, TL0PICIDX MUST NOT be present.</dd>
<dt>T:</dt>
<dd style="margin-left: 8">TID present. When set to one, the OPTIONAL TID field MUST be present and specified as below, and the RSV-B field MUST be present and set to zero. Otherwise, TID and RSV-B MUST NOT be present.  </dd>
<dt>RSV-A:</dt>
<dd style="margin-left: 8">Bits reserved for future use. MUST be set to zero and MUST be ignored by the receiver.</dd>
</dl>

<p> </p>
<p id="rfc.section.4.1.p.3">After the extension bit field follow the extension data fields that are enabled.  </p>

<dl>
<dt>PictureID:</dt>
<dd style="margin-left: 8">8 or 16 bits. This is a running index of the frames. The field MUST be present if the I bit is equal to one. The most significant bit of the first octet is an extension flag. The 7 following bits carry (parts of) the PictureID. If the extension flag is one, the PictureID continues in the next octet forming a 15 bit index, where the 8 bits in the second octet are the least significant bits of the PictureID. If the extension flag is zero, there is no extension, and the PictureID is the 7 remaining bits of the first (and only) octet. The sender may choose 7 or 15 bits index. The PictureID SHOULD start on a random number, and MUST wrap after reaching the maximum ID.  </dd>
<dt>TL0PICIDX:</dt>
<dd style="margin-left: 8">8 bits temporal level zero index. The field MUST be present if the L bit is equal to 1, and MUST NOT be present otherwise.  TL0PICIDX is a running index for the temporal base layer frames, i.e., the frames with TID set to 0. If TID is larger than 0, TL0PICIDX indicates which base layer frame the current image depends on. TL0PICIDX MUST be incremented when TID is 0.  The index SHOULD start on a random number, and MUST restart at 0 after reaching the maximum number 255.  </dd>
<dt>TID:</dt>
<dd style="margin-left: 8">3 bits temporal layer index. The field MUST be present when the T bit is equal to 1, and MUST NOT be present otherwise.  The TID field indicates which temporal layer the packet represents. The lowest layer, i.e., the base layer, MUST have TID set to 0. Higher layers SHOULD increment the TID according to their position in the layer hierarchy.  </dd>
<dt>RSV-B:</dt>
<dd style="margin-left: 8">Bits reserved for future use. MUST be present when the T bit is equal to 1, MUST be set to zero and MUST be ignored by the receiver. If the T bit is equal to 0, the field MUST NOT be present.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#VP8payloadHeader" id="VP8payloadHeader">VP8 Payload Header</a>
</h1>
<p id="rfc.section.4.2.p.1">The first three octets of an encoded VP8 frame are referred to as an "uncompressed data chunk" in <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>, and co-serve as payload header in this RTP format. The codec bitstream format specifies two different variants of the uncompressed data chunk: a 3 octet version for interframes and a 10 octet version for key frames. The first 3 octets are common to both variants. In the case of a key frame the remaining 7 octets are considered to be part of the remaining payload in this RTP format.  Note that the header is present only in packets which have the S bit equal to one and the PartID equal to zero in the payload descriptor. Subsequent packets for the same frame do not carry the payload header.  </p>
<div id="#rfc.figure.3"></div>
<div id="#figureVP8payloadHeader"></div>
<pre>
   0 1 2 3 4 5 6 7
  +-+-+-+-+-+-+-+-+
  |Size0|H| VER |P|
  +-+-+-+-+-+-+-+-+
  |     Size1     |
  +-+-+-+-+-+-+-+-+
  |     Size2     |
  +-+-+-+-+-+-+-+-+
  | Bytes 4..N of |
  | VP8 payload   |
  :               :
  +-+-+-+-+-+-+-+-+
  | OPTIONAL RTP  |
  | padding       |
  :               :
  +-+-+-+-+-+-+-+-+
            </pre>
<p></p>

<dl>
<dt>H:</dt>
<dd style="margin-left: 8">Show frame bit as defined in <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>.</dd>
<dt>VER:</dt>
<dd style="margin-left: 8">A version number as defined in <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>.</dd>
<dt>P:</dt>
<dd style="margin-left: 8">Inverse key frame flag. When set to 0 the current frame is a key frame.  When set to 1 the current frame is an interframe. Defined in <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>
</dd>
<dt>SizeN:</dt>
<dd style="margin-left: 8">The size of the first partition size in bytes is calculated from the 19 bits in Size0, Size1, and Size2 as 1stPartitionSize = Size0 + 8 * Size1 + 2048 * Size2.  <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a>.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Aggregated and Fragmented Payloads</h1>
<p id="rfc.section.4.3.p.1">An encoded VP8 frame can be divided into two or more partitions, as described in <a href="#mediaFormatBackground">Section 3</a>.  One packet can contain a fragment of a partition, a complete partition, or an aggregate of fragments and partitions. In the preferred use case, the S bit and PartID fields described in <a href="#VP8payloadDescriptor">Section 4.1</a> should be used to indicate what the packet contains. The PartID field should indicate which partition the first octet of the payload belongs to, and the S bit indicates that the packet starts on a new partition.  Aggregation of encoded partitions is done without explicit signaling.  Partitions MUST be aggregated in decoding order. Two fragments from different partitions MAY be aggregated into the same packet. An aggregation MUST have exactly one payload descriptor. Aggregated partitions MUST represent parts of one and the same video frame. Consequently, an aggregated packet will have one or no payload header, depending on whether the aggregate contains the beginning of the first partition of a frame or not, respectively. Note that the length of the first partition can always be obtained from the first partition size parameter in the VP8 payload header.  </p>
<p id="rfc.section.4.3.p.2">The VP8 bitstream format <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a> specifies that if multiple DCT/WHT partitions are produced, the location of each partition start is found at the end of the first (prediction/mode) partition. In this RTP payload specification, the location offsets are considered to be part of the first partition.  </p>
<p id="rfc.section.4.3.p.3">It is OPTIONAL for a packetizer implementing this RTP specification to pay attention to the partition boundaries within an encoded frame. If packetization of a frame is done without considering the partition boundaries, the PartID field MAY be set to zero for all packets, and the S bit MUST NOT be set to one for any other packet than the first.  </p>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> Examples of VP8 RTP Stream</h1>
<p id="rfc.section.4.4.p.1">A few examples of how the VP8 RTP payload can be used are included below.</p>
<h1 id="rfc.section.4.4.1">
<a href="#rfc.section.4.4.1">4.4.1.</a> Key frame in a single RTP packet</h1>
<div id="#rfc.figure.4"></div>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 1        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|1|0 0 0 0| X = 1; S = 1; PartID = 0
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  |Size0|1| VER |0| P = 0
  +-+-+-+-+-+-+-+-+
  |     Size1     |
  +-+-+-+-+-+-+-+-+
  |     Size2     |
  +-+-+-+-+-+-+-+-+
  | VP8 payload   |
  +-+-+-+-+-+-+-+-+
              </pre>
<h1 id="rfc.section.4.4.2">
<a href="#rfc.section.4.4.2">4.4.2.</a> VP8 interframe in a single RTP packet; no PictureID</h1>
<div id="#rfc.figure.5"></div>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 1        |
  +-+-+-+-+-+-+-+-+
  |0|0|0|1|0 0 0 0| X = 0; S = 1; PartID = 0
  +-+-+-+-+-+-+-+-+
  |Size0|1| VER |1| P = 1
  +-+-+-+-+-+-+-+-+
  |     Size1     |
  +-+-+-+-+-+-+-+-+
  |     Size2     |
  +-+-+-+-+-+-+-+-+
  | VP8 payload   |
  +-+-+-+-+-+-+-+-+
              </pre>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="rfc.section.4.4.3">
<a href="#rfc.section.4.4.3">4.4.3.</a> VP8 partitions in separate RTP packets</h1>
<div id="#rfc.figure.6"></div>
<p>First RTP packet; complete first partition.  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 0        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|1|0 0 0 0| X = 1; S = 1; PartID = 0
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  |Size0|1| VER |1| P = 1
  +-+-+-+-+-+-+-+-+
  |     Size1     |
  +-+-+-+-+-+-+-+-+
  |     Size2     |
  +-+-+-+-+-+-+-+-+
  | Bytes 4..L of |
  | first VP8     |
  | partition     |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<div id="#rfc.figure.7"></div>
<p>Second RTP packet; complete second partition.  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 1        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|1|0 0 0 1| X = 1; S = 1; PartID = 1
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  | Remaining VP8 |
  | partitions    |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<h1 id="rfc.section.4.4.4">
<a href="#rfc.section.4.4.4">4.4.4.</a> VP8 frame fragmented across RTP packets</h1>
<div id="#rfc.figure.8"></div>
<p>First RTP packet; complete first partition.  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 0        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|1|0 0 0 0| X = 1; S = 1; PartID = 0
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  |Size0|1| VER |1| P = 1
  +-+-+-+-+-+-+-+-+
  |     Size1     |
  +-+-+-+-+-+-+-+-+
  |     Size2     |
  +-+-+-+-+-+-+-+-+
  | Complete      |
  | first         |
  | partition     |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<div id="#rfc.figure.9"></div>
<p>Second RTP packet; first fragment of second partition.  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 0        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|1|0 0 0 1| X = 1; S = 1; PartID = 1
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  | First fragment|
  | of second     |
  | partition     |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<div id="#rfc.figure.10"></div>
<p>Third RTP packet; second fragment of second partition.  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 0        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|0|0 0 0 1| X = 1; S = 0; PartID = 1
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  | Mid fragment  |
  | of second     |
  | partition     |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<div id="#rfc.figure.11"></div>
<p>Fourth RTP packet; last fragment of second partition.  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 1        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|0|0 0 0 1| X = 1; S = 0; PartID = 1
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1
  +-+-+-+-+-+-+-+-+
  |0 0 0 0 1 0 0 1| PictureID = 17
  +-+-+-+-+-+-+-+-+
  | Last fragment |
  | of second     |
  | partition     |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<h1 id="rfc.section.4.4.5">
<a href="#rfc.section.4.4.5">4.4.5.</a> VP8 frame with long PictureID</h1>
<div id="#rfc.figure.12"></div>
<p>PictureID = 4711 = 001001001100111 binary (first 7 bits: 0010010, last 8 bits: 01100111).  </p>
<pre>
   0 1 2 3 4 5 6 7 
  +-+-+-+-+-+-+-+-+
  |  RTP header   |
  |  M = 1        |
  +-+-+-+-+-+-+-+-+
  |1|0|0|1|0 0 0 0| X = 1; S = 1; PartID = 0
  +-+-+-+-+-+-+-+-+
  |1|0|0|0 0 0 0 0| I = 1;
  +-+-+-+-+-+-+-+-+
  |1 0 0 1 0 0 1 0| Long PictureID flag = 1
  |0 1 1 0 0 1 1 1| PictureID = 4711
  +-+-+-+-+-+-+-+-+
  |Size0|1| VER |1|
  +-+-+-+-+-+-+-+-+
  |     Size1     |
  +-+-+-+-+-+-+-+-+
  |     Size2     |
  +-+-+-+-+-+-+-+-+
  | Bytes 4..N of |
  | VP8 payload   |
  :               :
  +-+-+-+-+-+-+-+-+
              </pre>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#RPSIandSLI" id="RPSIandSLI">Using VP8 with RPSI and SLI Feedback</a>
</h1>
<p id="rfc.section.5.p.1">The VP8 payload descriptor defined in <a href="#VP8payloadDescriptor">Section 4.1</a> above contains an optional PictureID parameter. This parameter is included mainly to enable use of reference picture selection index (RPSI) and slice loss indication (SLI), both defined in <a href="#RFC4585">[RFC4585]</a>.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#RPSI" id="RPSI">RPSI</a>
</h1>
<p id="rfc.section.5.1.p.1">The reference picture selection index is a payload-specific feedback message defined within the RTCP-based feedback format. The RPSI message is generated by a receiver and can be used in two ways. Either it can signal a preferred reference picture when a loss has been detected by the decoder -- preferably then a reference that the decoder knows is perfect -- or, it can be used as positive feedback information to acknowledge correct decoding of certain reference pictures. The positive feedback method is useful for VP8 used as unicast. The use of RPSI for VP8 is preferably combined with a special update pattern of the codec's two special reference frames -- the golden frame and the altref frame -- in which they are updated in an alternating leapfrog fashion.  When a receiver has received and correctly decoded a golden or altref frame, and that frame had a PictureID in the payload descriptor, the receiver can acknowledge this simply by sending an RPSI message back to the sender. The message body (i.e., the "native RPSI bit string" in <a href="#RFC4585">[RFC4585]</a>) is simply the PictureID of the received frame.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#SLI" id="SLI">SLI</a>
</h1>
<p id="rfc.section.5.2.p.1">The slice loss indication is another payload-specific feedback message defined within the RTCP-based feedback format. The SLI message is generated by the receiver when a loss or corruption is detected in a frame. The format of the SLI message is as follows <a href="#RFC4585">[RFC4585]</a>:</p>
<div id="#rfc.figure.13"></div>
<div id="#figureSLIHeader"></div>
<pre>
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |         First           |        Number           | PictureID |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            </pre>
<p id="rfc.section.5.2.p.2">Here, First is the macroblock address (in scan order) of the first lost block and Number is the number of lost blocks. PictureID is the six least significant bits of the codec-specific picture identifier in which the loss or corruption has occurred.  For VP8, this codec-specific identifier is naturally the PictureID of the current frame, as read from the payload descriptor. If the payload descriptor of the current frame does not have a PictureID, the receiver MAY send the last received PictureID+1 in the SLI message. The receiver MAY set the First parameter to 0, and the Number parameter to the total number of macroblocks per frame, even though only parts of the frame is corrupted. When the sender receives an SLI message, it can make use of the knowledge from the latest received RPSI message. Knowing that the last golden or altref frame was successfully received, it can encode the next frame with reference to that established reference.  </p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Example</h1>
<p id="rfc.section.5.3.p.1">The use of RPSI and SLI is best illustrated in an example. In this example, the encoder may not update the altref frame until the last sent golden frame has been acknowledged with an RPSI message. If an update is not received within some time, a new golden frame update is sent instead. Once the new golden frame is established and acknowledge, the same rule applies when updating the altref frame.</p>
<div id="#rfc.table.1"></div>
<div id="#table_example_timing"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Exemple signaling between sender and receiver</caption>
<thead><tr>
<th class="left">Event</th>
<th class="left">Sender</th>
<th class="left">Receiver</th>
<th class="left">Established reference</th>
</tr></thead>
<tbody>
<tr>
<td class="left">1000</td>
<td class="left">Send golden frame PictureID = 0</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
<td class="left">Receive and decode golden frame </td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1001</td>
<td class="left"></td>
<td class="left">Send RPSI(0)</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1002</td>
<td class="left">Receive RPSI(0)</td>
<td class="left"></td>
<td class="left">golden</td>
</tr>
<tr>
<td class="left">...</td>
<td class="left">(sending regular frames)</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1100</td>
<td class="left">Send altref frame PictureID = 100</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
<td class="left">Altref corrupted or lost</td>
<td class="left">golden</td>
</tr>
<tr>
<td class="left">1101</td>
<td class="left"></td>
<td class="left">Send SLI(100)</td>
<td class="left">golden</td>
</tr>
<tr>
<td class="left">1102</td>
<td class="left">Receive SLI(100)</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1103</td>
<td class="left">Send frame with reference to golden</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
<td class="left">Receive and decode frame (decoder state restored)</td>
<td class="left">golden</td>
</tr>
<tr>
<td class="left">...</td>
<td class="left">(sending regular frames)</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1200</td>
<td class="left">Send altref frame PictureID = 200</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
<td class="left">Receive and decode altref frame</td>
<td class="left">golden</td>
</tr>
<tr>
<td class="left">1201</td>
<td class="left"></td>
<td class="left">Send RPSI(200)</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1202</td>
<td class="left">Receive RPSI(200)</td>
<td class="left"></td>
<td class="left">altref</td>
</tr>
<tr>
<td class="left">...</td>
<td class="left">(sending regular frames)</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1300</td>
<td class="left">Send golden frame PictureID = 300</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
<td class="left">Receive and decode golden frame</td>
<td class="left">altref</td>
</tr>
<tr>
<td class="left">1301</td>
<td class="left"></td>
<td class="left">Send RPSI(300)</td>
<td class="left">altref</td>
</tr>
<tr>
<td class="left">1302</td>
<td class="left">RPSI lost</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1400</td>
<td class="left">Send golden frame PictureID = 400</td>
<td class="left"></td>
<td class="left"></td>
</tr>
<tr>
<td class="left"></td>
<td class="left"></td>
<td class="left">Receive and decode golden frame</td>
<td class="left">altref</td>
</tr>
<tr>
<td class="left">1401</td>
<td class="left"></td>
<td class="left">Send RPSI(400)</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">1402</td>
<td class="left">Receive RPSI(400)</td>
<td class="left"></td>
<td class="left">golden</td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.3.p.2">Note that the scheme is robust to loss of the feedback messages. If the RPSI is lost, the sender will try to update the golden (or altref) again after a while, without releasing the established reference. Also, if an SLI is lost, the receiver can keep sending SLI messages at any interval, as long as the picture is corrupted.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#payloadFormatParameters" id="payloadFormatParameters">Payload Format Parameters</a>
</h1>
<p id="rfc.section.6.p.1">This section specifies the parameters that MAY be used to select optional features of the payload format and certain features of the bitstream.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#restrictionsOnUsage" id="restrictionsOnUsage">Restrictions on usage</a>
</h1>
<p id="rfc.section.6.1.p.1">This media type depends on RTP framing, and hence is only defined for transfer via RTP [RFC3550] <a href="#RFC3550">[RFC3550]</a>.Transport within other framing protocols is not defined at this time.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#mediaTypeRegistration" id="mediaTypeRegistration">Media Type Registration</a>
</h1>
<p id="rfc.section.6.2.p.1">This registration is done using the template defined in <a href="#RFC4288">[RFC4288]</a> and following <a href="#RFC4855">[RFC4855]</a>.  </p>

<dl>
<dt>Type name:</dt>
<dd style="margin-left: 8">video </dd>
<dt>Subtype name:</dt>
<dd style="margin-left: 8">VP8 </dd>
<dt>Required parameters:</dt>
<dd style="margin-left: 8">none </dd>
<dt>Optional parameters:</dt>
<dd style="margin-left: 8">none </dd>
<dt>Encoding considerations:</dt>
<dd style="margin-left: 8">
<br> This media type is framed and contains binary data; see Section 4.8 of <a href="#RFC4288">[RFC4288]</a>.  </dd>
<dt>Security considerations:</dt>
<dd style="margin-left: 8">See <a href="#securityConsiderations">Section 7</a> of RFC xxxx.  <br> [RFC Editor: Upon publication as an RFC, please replace "XXXX" with the number assigned to this document and remove this note.] </dd>
<dt>Interoperability considerations:</dt>
<dd style="margin-left: 8">None.  </dd>
<dt>Published specification:</dt>
<dd style="margin-left: 8">VP8 bitstream format <a href="#I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</a> and RFC XXXX.  <br> [RFC Editor: Upon publication as an RFC, please replace "XXXX" with the number assigned to this document and remove this note.] <br> </dd>
<dt>Applications which use this media type:</dt>
<dd style="margin-left: 8">
<br> For example: Video over IP, video conferencing.  </dd>
<dt>Additional information:</dt>
<dd style="margin-left: 8">None.  </dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd style="margin-left: 8">
<br> Patrik Westin, patrik.westin@gmail.com </dd>
<dt>Intended usage:</dt>
<dd style="margin-left: 8">COMMON </dd>
<dt>Restrictions on usage:</dt>
<dd style="margin-left: 8">
<br> This media type depends on RTP framing, and hence is only defined for transfer via RTP <a href="#RFC3550">[RFC3550]</a>.  </dd>
<dt>Author:</dt>
<dd style="margin-left: 8">Patrik Westin, patrik.westin@gmail.com </dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">
<br> IETF Payload Working Group delegated from the IESG.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> SDP Parameters</h1>
<p id="rfc.section.6.3.p.1">The receiver MUST ignore any parameter unspecified in this memo.</p>
<h1 id="rfc.section.6.3.1">
<a href="#rfc.section.6.3.1">6.3.1.</a> Mapping of MIME Parameters to SDP</h1>
<p id="rfc.section.6.3.1.p.1">The MIME media type video/VP8 string is mapped to fields in the Session Description Protocol (SDP) <a href="#RFC2327">[RFC2327]</a> as follows: </p>

<ul>
<li>The media name in the "m=" line of SDP MUST be video.</li>
<li>The encoding name in the "a=rtpmap" line of SDP MUST be VP8 (the MIME subtype).  </li>
<li>The clock rate in the "a=rtpmap" line MUST be 90000.</li>
<li>The OPTIONAL parameter "version", if included, MUST be in the a=fmtp SDP field.  This parameter matches the VP8 bitstream version.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Example</h1>
<p id="rfc.section.6.4.p.1">An example of media representation in SDP is as follows:</p>
<p id="rfc.section.6.4.p.2">m=video 49170 RTP/AVPF 98<br> a=rtpmap:98 VP8/90000<br> a=fmtp:98 version=0<br> </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#securityConsiderations" id="securityConsiderations">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">RTP packets using the payload format defined in this specification are subject to the security considerations discussed in the RTP specification <a href="#RFC3550">[RFC3550]</a>, and in any applicable RTP profile.  The main security considerations for the RTP packet carrying the RTP payload format defined within this memo are confidentiality, integrity and source authenticity. Confidentiality is achieved by encryption of the RTP payload.  Integrity of the RTP packets through suitable cryptographic integrity protection mechanism.  Cryptographic system may also allow the authentication of the source of the payload. A suitable security mechanism for this RTP payload format should provide confidentiality, integrity protection and at least source authentication capable of determining if an RTP packet is from a member of the RTP session or not.  Note that the appropriate mechanism to provide security to RTP and payloads following this memo may vary.  It is dependent on the application, the transport, and the signaling protocol employed.  Therefore a single mechanism is not sufficient, although if suitable the usage of SRTP <a href="#RFC3711">[RFC3711]</a> is recommended.  This RTP payload format and its media decoder do not exhibit any significant non-uniformity in the receiver-side computational complexity for packet processing, and thus are unlikely to pose a denial-of-service threat due to the receipt of pathological data.  Nor does the RTP payload format contain any active content.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#congestionControl" id="congestionControl">Congestion Control</a>
</h1>
<p id="rfc.section.8.p.1">Congestion control for RTP SHALL be used in accordance with RFC 3550 <a href="#RFC3550">[RFC3550]</a>, and with any applicable RTP profile; e.g., RFC 3551 <a href="#RFC3551">[RFC3551]</a>. The congestion control mechanism can, in a real-time encoding scenario, adapt the transmission rate by instructing the encoder to encode at a certain target rate.  Media aware network elements MAY use the information in the VP8 payload descriptor in <a href="#VP8payloadDescriptor">Section 4.1</a> to identify non-reference frames and discard them in order to reduce network congestion.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#IANAConsiderations" id="IANAConsiderations">IANA Considerations</a>
</h1>
<p id="rfc.section.9.p.1">The IANA is requested to register the following values:<br> - Media type registration as described in <a href="#mediaTypeRegistration">Section 6.2</a>.</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.bankoski-vp8-bitstream">[I-D.bankoski-vp8-bitstream]</b></td>
<td class="top">
<a>Bankoski, J</a>, <a>Koleszar, J</a>, <a>Quillio, L</a>, <a>Salonen, J</a>, <a>Wilkins, P</a> and <a>Y Xu</a>, "<a href="http://tools.ietf.org/html/draft-bankoski-vp8-bitstream-06">VP8 Data Format and Decoding Guide</a>", Internet-Draft draft-bankoski-vp8-bitstream-06, August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4585">[RFC4585]</b></td>
<td class="top">
<a>Ott, J.</a>, <a>Wenger, S.</a>, <a>Sato, N.</a>, <a>Burmeister, C.</a> and <a>J. Rey</a>, "<a href="http://tools.ietf.org/html/rfc4585">Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF)</a>", RFC 4585, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3711">[RFC3711]</b></td>
<td class="top">
<a>Baugher, M.</a>, <a>McGrew, D.</a>, <a>Naslund, M.</a>, <a>Carrara, E.</a> and <a>K. Norrman</a>, "<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>", RFC 3711, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2327">[RFC2327]</b></td>
<td class="top">
<a href="mailto:mjh@isi.edu" title="Information Sciences Institute ">Handley, M.</a> and <a href="mailto:van@ee.lbl.gov" title="Lawrence Berkeley Laboratory ">V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc2327">SDP: Session Description Protocol</a>", RFC 2327, April 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4288">[RFC4288]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Klensin</a>, "<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 4288, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4855">[RFC4855]</b></td>
<td class="top">
<a>Casner, S.</a>, "<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>", RFC 4855, February 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3551">[RFC3551]</b></td>
<td class="top">
<a>Schulzrinne, H.</a> and <a>S. Casner</a>, "<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>", STD 65, RFC 3551, July 2003.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Patrik Westin</span> 
	  <span class="n hidden">
		<span class="family-name">Westin</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.  </span>
	<span class="adr">
	  <span>Kungsbron 2</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">11122</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:patrik.westin@gmail.com">patrik.westin@gmail.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Henrik F Lundin</span> 
	  <span class="n hidden">
		<span class="family-name">Lundin</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.  </span>
	<span class="adr">
	  <span>Kungsbron 2</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">11122</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:hlundin@google.com">hlundin@google.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Glover</span> 
	  <span class="n hidden">
		<span class="family-name">Glover</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.  </span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	
  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Justin Uberti</span> 
	  <span class="n hidden">
		<span class="family-name">Uberti</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.  </span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	
  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Frank Galligan</span> 
	  <span class="n hidden">
		<span class="family-name">Galligan</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.  </span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	
  </address>
</div>

</body>
</html>