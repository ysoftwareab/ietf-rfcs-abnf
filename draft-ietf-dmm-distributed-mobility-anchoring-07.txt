



DMM                                                         H. Chan, Ed.
Internet-Draft                                                    X. Wei
Intended status: Informational                       Huawei Technologies
Expires: May 16, 2018                                             J. Lee
                                                    Sangmyung University
                                                                 S. Jeon
                                                 Sungkyunkwan University
                                                             A. Petrescu
                                                               CEA, LIST
                                                              F. Templin
                                          Boeing Research and Technology
                                                       November 12, 2017


                     Distributed Mobility Anchoring
            draft-ietf-dmm-distributed-mobility-anchoring-07

Abstract

   This document defines distributed mobility anchoring in terms of the
   different configurations, operations and parameters of mobility
   functions to provide different IP mobility support for the diverse
   mobility needs in 5G Wireless and beyond.  A network may be
   configured with distributed mobility anchoring functions according to
   the needs of mobility support.  In the distributed mobility anchoring
   environment, multiple anchors are available for mid-session switching
   of an IP prefix anchor.  To start a new flow or to handle a flow not
   requiring IP session continuity as a mobile node moves to a new
   network, the flow can be started or re-started using a new IP address
   configured from the new IP prefix which is anchored to the new
   network.  For a flow requiring IP session continuity, the anchoring
   of the prior IP prefix may be moved to the new network.  The mobility
   functions and their operations and parameters are general for
   different configurations.  The mobility signaling may be between
   anchors and nodes in the network in a network-based mobility
   solution.  It may also be between the anchors and the mobile node in
   a host-based solution.  The mobile node may be a host, but may also
   be a router carrying a network requiring network mobility support.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.



Chan, et al.              Expires May 16, 2018                  [Page 1]

Internet-Draft       distributed mobility anchoring        November 2017


   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 16, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Conventions and Terminology . . . . . . . . . . . . . . . . .   5
   3.  Distributed Mobility Anchoring  . . . . . . . . . . . . . . .   6
     3.1.  Configurations for Different Networks . . . . . . . . . .   6
       3.1.1.  Network-based Mobility Support for a Flat Network . .   7
       3.1.2.  Network-based Mobility Support for a Hierarchical
               Network . . . . . . . . . . . . . . . . . . . . . . .   8
       3.1.3.  Host-based Mobility Support . . . . . . . . . . . . .  10
       3.1.4.  NEtwork MObility (NEMO) Basic Support . . . . . . . .  11
     3.2.  Operations and Parameters . . . . . . . . . . . . . . . .  12
       3.2.1.  Location Management . . . . . . . . . . . . . . . . .  12
       3.2.2.  Forwarding Management . . . . . . . . . . . . . . . .  15
   4.  IP Mobility Handling in Distributed Anchoring Environments -
       Mobility Support Only When Needed . . . . . . . . . . . . . .  21
     4.1.  No Need of IP Mobility: Changing to New IP Prefix/Address  22
       4.1.1.  Guidelines for IPv6 Nodes: Changing to New IP
               Prefix/Address  . . . . . . . . . . . . . . . . . . .  23
     4.2.  Need of IP Mobility . . . . . . . . . . . . . . . . . . .  25
       4.2.1.  Guidelines for IPv6 Nodes: Need of IP Mobility  . . .  26
   5.  IP Mobility Handling in Distributed Mobility Anchoring
       Environments - Anchor Switching to the New Network  . . . . .  28
     5.1.  IP Prefix/Address Anchor Switching for Flat Network . . .  28
       5.1.1.  Guidelines for IPv6 Nodes: Switching Anchor for Flat
               Network . . . . . . . . . . . . . . . . . . . . . . .  29



Chan, et al.              Expires May 16, 2018                  [Page 2]

Internet-Draft       distributed mobility anchoring        November 2017


     5.2.  IP Prefix/Address Anchor Switching for Flat Network with
           Centralized Control Plane . . . . . . . . . . . . . . . .  30
       5.2.1.  Additional Guidelines for IPv6 Nodes:  Switching
               Anchor with Centralized CP  . . . . . . . . . . . . .  33
     5.3.  Hierarchical Network  . . . . . . . . . . . . . . . . . .  34
       5.3.1.  Additional Guidelines for IPv6 Nodes:  Hierarchical
               Network with No Anchor Relocation . . . . . . . . . .  35
     5.4.  IP Prefix/Address Anchor Switching for a Hierarchical
           Network . . . . . . . . . . . . . . . . . . . . . . . . .  36
       5.4.1.  Additional Guidelines for IPv6 Nodes:  Switching
               Anchor with Hierarchical Network  . . . . . . . . . .  37
     5.5.  Network Mobility  . . . . . . . . . . . . . . . . . . . .  38
       5.5.1.  Additional Guidelines for IPv6 Nodes:  Network
               mobility  . . . . . . . . . . . . . . . . . . . . . .  40
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  41
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  42
   8.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  42
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  42
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .  42
     9.2.  Informative References  . . . . . . . . . . . . . . . . .  45
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  45

1.  Introduction

   A key requirement in distributed mobility management [RFC7333] is to
   enable traffic to avoid traversing a single mobility anchor far from
   an optimal route.  This draft defines different configurations,
   functional operations and parameters for distributed mobility
   anchoring and explains how to use them to make the route changes to
   avoid unnecessarily long routes.

   Companion distributed mobility management documents are already
   addressing the architecture and deployment
   [I-D.ietf-dmm-deployment-models], source address selection
   [I-D.ietf-dmm-ondemand-mobility], and control-plane data-plane
   signaling [I-D.ietf-dmm-fpc-cpdp].  A number of distributed mobility
   solutions have also been proposed, for example, in
   [I-D.seite-dmm-dma], [I-D.bernardos-dmm-cmip],
   [I-D.bernardos-dmm-pmip], [I-D.sarikaya-dmm-for-wifi],
   [I-D.yhkim-dmm-enhanced-anchoring], and
   [I-D.matsushima-stateless-uplane-vepc].  Yet in 5G Wireless and
   beyond, the mobility requirements are diverse, and IP mobility
   support is no longer by default with a one-size-fit-all solution.  In
   different networks, different kinds of mobility support are possible
   depending on the needs.  In designing mobility solutions, it may not
   always be obvious on how to best configure and use only the needed
   mobility functions to provide the specific mobility support.  This
   document aims at filling such background.



Chan, et al.              Expires May 16, 2018                  [Page 3]

Internet-Draft       distributed mobility anchoring        November 2017


   Distributed mobility anchoring employs multiple anchors in the data
   plane.  In general, control plane functions may be separate from data
   plane functions and be centralized but may also be co-located with
   the data plane functions at the distributed anchors.  Different
   configurations of distributed mobility anchoring are described in
   Section 3.1.  For instance, the configurations for network-based
   mobility support in a flat network, for network-based mobility
   support in a hierarchical network, for host-based mobility support,
   and for network mobility basic support are described respectively in
   Section 3.1.1, Section 3.1.2, Section 3.1.3 and Section 3.1.4.
   Required operations and parameters for distributed mobility anchoring
   are presented in Section 3.2.  For instance, location management is
   described in Section 3.2.1, forwarding management is described in
   Section 3.2.2.

   As an MN attaches to an access router and establishes a link between
   them, a /64 IPv6 prefix anchored to the router may be assigned to the
   link for exclusive use by the MN [RFC6459].  The MN may then
   configure a global IPv6 address from this prefix and use it as the
   source IP address in a flow to communicate with its correspondent
   node (CN).  When there are multiple mobility anchors, an address
   selection for a given flow is first required before the flow is
   initiated.  Using an anchor in an MN's network of attachment has the
   advantage that the packets can simply be forwarded according to the
   forwarding table.  However, after the flow has been initiated, the MN
   may later move to another network, so that the IP address no longer
   belongs to the current network of attachment of the MN.

   Whether the flow needs IP session continuity will determine how to
   ensure that the IP address of the flow will be anchored to the new
   network of attachment.  If the ongoing IP flow can cope with an IP
   prefix/address change, the flow can be reinitiated with a new IP
   address anchored in the new network as shown in Section 4.1.  On the
   other hand, if the ongoing IP flow cannot cope with such change,
   mobility support is needed as shown in Section 4.2.  A network
   supporting a mix of flows both requiring and not requiring IP
   mobility support will need to distinguish these flows.  The
   guidelines for the network to make such a distinction are described
   in Section 4.1.1.  The general guidelines for such network to provide
   IP mobility support are described in Section 4.2.1.

   Specifically, IP mobility support can be provided by relocating the
   anchoring of the IP prefix/address of the flow from the home network
   of the flow to the new network of attachment.  The basic case may be
   with network-based mobility for a flat network configuration
   described in Section 5.1 with the guidelines described in
   Section 5.1.1.  This case is discussed further with a centralized
   control plane in Section 5.2 with additional guidelines described in



Chan, et al.              Expires May 16, 2018                  [Page 4]

Internet-Draft       distributed mobility anchoring        November 2017


   Section 5.2.1.  A level of hierarchy of nodes may then be added to
   the network configuration as described in Section 5.3 with additional
   guidelines described in Section 5.3.1.  Local Mobility in such
   hierarchical network is described in Section 5.4 with additional
   guidelines described in Section 5.4.1.  Network mobiltiy example is
   described in Section 5.5 with additional guidelines described in
   Section 5.5.1.

2.  Conventions and Terminology

   The key words "MUST", "MUST NOT", "GLUIRED", "SHALL","SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   All general mobility-related terms and their acronyms used in this
   document are to be interpreted as defined in the Mobile IPv6 (MIPv6)
   base specification [RFC6275], the Proxy Mobile IPv6 (PMIPv6)
   specification [RFC5213], the "Mobility Related Terminologies"
   [RFC3753], and the DMM current practices and gap analysis [RFC7429].
   These include terms such as mobile node (MN), correspondent node
   (CN), home agent (HA), home address (HoA), care-of-address (CoA),
   local mobility anchor (LMA), and mobile access gateway (MAG).

   In addition, this document uses the following terms:

   Home network of an application session or a home address:  the
      network that has assigned the HoA used as the session identifier
      by the application running in an MN.  The MN may be running
      multiple application sessions, and each of these sessions can have
      a different home network.


   Anchoring (an IP prefix/address):  An IP prefix, i.e., Home Network
      Prefix (HNP), or address, i.e., HoA, assigned for use by an MN is
      topologically anchored to an anchor node when the anchor node is
      able to advertise a connected route into the routing
      infrastructure for the assigned IP prefix.


   Location Management (LM) function:  that keeps and manages the
      network location information of an MN.  The location information
      may be a binding of the advertised IP address/prefix, e.g., HoA or
      HNP, to the IP routing address of the MN or of a node that can
      forward packets destined to the MN.

      When the MN is a mobile router (MR) carrying a mobile network of
      mobile network nodes (MNN), the location information will also
      include the mobile network prefix (MNP), which is the aggregate IP



Chan, et al.              Expires May 16, 2018                  [Page 5]

Internet-Draft       distributed mobility anchoring        November 2017


      prefix delegated to the MR to assign IP prefixes for use by the
      MNNs in the mobile network.

      In a client-server protocol model, location query and update
      messages may be exchanged between a Location Management client
      (LMc) and a Location Management server (LMs), where the location
      information can be updated to or queried from the LMs.
      Optionally, there may be a Location Management proxy (LMp) between
      LMc and LMs.

      With separation of control plane and data plane, the LM function
      is in the control plane.  It may be a logical function at the
      control plane node, control plane anchor, or mobility controller.

      It may be distributed or centralized.


   Forwarding Management (FM) function:  packet interception and
      forwarding to/from the IP address/prefix assigned for use by the
      MN, based on the internetwork location information, either to the
      destination or to some other network element that knows how to
      forward the packets to their destination.

      This function may be used to achieve traffic indirection.  With
      separation of control plane and data plane, the FM function may
      split into a FM function in the data plane (FM-DP) and a FM
      function in the control plane (FM-CP).

      FM-DP may be distributed with distributed mobility management.  It
      may be a function in a data plane anchor or data plane node.

      FM-CP may be distributed or centralized.  It may be a function in
      a control plane node, control plane anchor or mobility controller.



3.  Distributed Mobility Anchoring

3.1.  Configurations for Different Networks

   The mobility functions may be implemented in different configurations
   of distributed mobility anchoring in architectures separating the
   control and data planes.  The separation described in
   [I-D.ietf-dmm-deployment-models] has defined the home control plane
   anchor (Home-CPA), home data plane anchor (Home-DPA), access control
   plane node (Access-CPN), and access data plane node (Access-DPN),
   which are respectively abbreviated as CPA, DPA, CPN, and DPN here.




Chan, et al.              Expires May 16, 2018                  [Page 6]

Internet-Draft       distributed mobility anchoring        November 2017


   Different networks may have different configurations in distributed
   mobility anchoring.

   The configurations also differ depending on the desired mobility
   supports: network-based mobility support for a flat network in
   Section 3.1.1, network-based mobility support for a hierarchical
   network in Section 3.1.2, host-based mobility support in
   Section 3.1.3, and NEtwork MObility (NEMO) based support in
   Section 3.1.4.

3.1.1.  Network-based Mobility Support for a Flat Network

   Figure 1 show the configurations of network-based distributed
   mobility management for a flat network.

   The features in Figure 1 are:

   dmm:1  There are multiple instances of DPA, each with an FM-DP
          function.

   dmm:2  The control plane may either be distributed (not shown) or
          centralized.  The CPA and DPA may co-locate or may be
          separate.  When the CPA, each with an FM-CP function, is co-
          located with the distributed DPA there will be multiple
          instances of the co-located CPA and DPA (not shown).

   dmm:3  An IP prefix/address IP1, which is anchored to the DPA with
          the IP prefix/address IPa1, is assigned for use by an MN.  The
          MN uses IP1 to communicate with a CN not shown in the figure.
          The flow of this communication session is shown as flow(IP1,
          ...), meaning it uses IP1 and other parameters.




















Chan, et al.              Expires May 16, 2018                  [Page 7]

Internet-Draft       distributed mobility anchoring        November 2017


              ____________  Network
          ___/            \___________
         /      +-----+                \___
        (       |LMs  |    Control         \
       /        +-.---+    plane            \
      /  +--------.---+    functions         \
     (   |CPA:    .   |    in the             )
     (   |FM-CP, LMc  |    network            )
     (   +------------+                        \
    /          . .                              \
   (           .     .                           )
   (           .         .                       )
   (           .             .                   \
    \    +------------+ +------------+Distributed )
     (   |DPA(IPa1):  | |DPA(IPa2):  |DPA's       )
     (   |anchors IP1 | |anchors IP2 |          _/
      \  |FM-DP       | |FM-DP       | etc.    /
       \ +------------+ +------------+        /
        \___                Data plane  _____/
            \______         functions  /
                   \__________________/

         +------------+
         |MN(IP1)     | Mobile node attached
         |flow(IP1,..)| to the network
         +------------+

   Figure 1.  Configurations of network-based mobility management for a
   flat network to which MN is attached.  The mobility management
   functions in the network are LMs in the control plane, LMc at CPA,
   and FM-DP at DPA.

   In Figure 1, the LM function is split into a separate server LMs and
   a client LMc at the CPA.  Then, the LMs may be centralized whereas
   the LMc may be distributed or centralized according to whether the
   CPA is distributed (not shown) or centralized.

   In a special case (not shown), LMs and LMc may co-locate.

3.1.2.  Network-based Mobility Support for a Hierarchical Network

   Figure 2 shows the configurations of network-based mobility
   management for a hierarchical network.








Chan, et al.              Expires May 16, 2018                  [Page 8]

Internet-Draft       distributed mobility anchoring        November 2017


       +-----+
       |LMs  |
       +-.---+
+--------.---+
|CPA:    .   |
|FM-CP, LMp  |
+------------+
      .   .
      .             .
      .                       .
      .                                 .
+------------+                        +------------+ Distributed
|DPA(IPa1):  |                        |DPA(IPa2):  | DPA's
|anchors IP1 |                        |anchors IP2 |                etc.
|FM-DP       |                        |FM-DP       |
+------------+                        +------------+

+------------+
|CPN:        |
|FM-CP, LMc  |
+------------+
      . .
      .     .
      .         .
      .             .Distributed DPN's
+------------+ +------------+         +------------+ +------------+
|DPN(IPn11): | |DPN(IPn12): |         |DPN(IPn21): | |DPN(IPn22): |
|FM-DP       | |FM-DP       | etc.    |FM-DP       | |FM-DP       | etc.
+------------+ +------------+         +------------+ +------------+

+------------+Mobile node             +------------+Mobile node
|MN(IP1)     |using IP1               |MN(IP2)     |using IP1
|flow(IP1,..)|anchored to             |flow(IP2,..)|anchored to
+------------+DPA(IPa1)               +------------+DPA(IPa2)

   Figure 2.  Configurations of network-based mobility management for a
   hierarchical network to which MN is attached.  The mobility
   management functions in the network include a separate LMs, FM-CP and
   LMp at CPA, FM-DP at DPA; FM-CP and LMc at CPN, FM-DP at DPN.

   In addition to the dmm feature already described in Figure 1,
   Figure 2 shows that there may be multiple instances of DPN, each with
   an FM-DP function, for each DPA in the hierarchy.  Also when the CPN,
   each with an FM-CP function, is co-located with the distributed DPN
   there will be multiple instances of the co-located CPN and DPN (not
   shown).





Chan, et al.              Expires May 16, 2018                  [Page 9]

Internet-Draft       distributed mobility anchoring        November 2017


   In Figure 2 the LMs is separated out, and a proxy LMp at the CPA is
   added between the separate LMs and LMc at the CPN.  Then, LMs may be
   centralized whereas the LMp may be distributed or centralized
   according to whether the CPA is distributed or centralized.

   In a particular case (not shown), LMs and LMp may co-locate.

3.1.3.  Host-based Mobility Support

   Host-based mobility function configurations as variants from Figure 2
   is shown in Figure 3 where the role to perform mobility functions by
   CPN and DPN are now taken by the MN.  The MN then needs to possess
   the mobility functions FM and LMc.

          +-----+
          |LMs  |
          +-.---+
   +--------.---+
   |CPA:    .   |
   |FM-CP, LMp  |
   +------------+
         . .
         .     .
         .         .
         .             .
   +------------+ +------------+ Distributed
   |DPA(IPa1):  | |DPA(IPa2):  | DPA's
   |anchors IP1 | |anchors IP2 |
   |FM-DP       | |FM-DP       |  etc.
   +------------+ +------------+

   +------------+
   |MN(IP1)     |Mobile node
   |flow(IP1,..)|using IP1
   |FM,    LMc  |anchored to
   +------------+DPA(IPa1)

   Figure 3.  Configuration of host-based mobility management.  The
   mobility management functions in the network include LMs in control
   plane, FM-CP and LMp at CPA, FM-DP at DPA.  The mobility management
   functions FM and LMc are also at the host (MN).

   Figure 3 shows configurations of host-based mobility management with
   multiple instances of DPA for a distributed mobility anchoring
   environment.  Figure 3 can be obtained by simply collapsing CPN, DPN
   and MN from the Figure 2 into the MN in Figure 3 which now possesses
   the mobility functions FM and LMc that were performed previously by
   the CPN and the DPN.



Chan, et al.              Expires May 16, 2018                 [Page 10]

Internet-Draft       distributed mobility anchoring        November 2017


3.1.4.  NEtwork MObility (NEMO) Basic Support

   Figure 4 shows the configurations of NEMO basic support for a mobile
   router.

          +-----+
          |LMs  |
          +-.---+
   +--------.---+
   |CPA:    .   |
   |FM-CP, LMp  |
   +------------+
         .  .
         .       .
         .            .
         .                 .
   +--------------+   +--------------+ Distributed
   |DPA(IPa1):    |   |DPA(IPa2):    | DPA's
   |anchors IP1   |   |anchors IP2   |
   |DHCPv6-PD IPn1|   |DHCPv6-PD IPn2|  etc.
   |FM-DP         |   |FM-DP         |
   +--------------+   +--------------+

   +--------------+Mobile router
   |MR(IP1)       |using IP1
   |delegated IPn1|anchored to
   |FM,    LMc    |DPA(IPa1)
   +--------------+

   +------------+Mobile network node
   |MNN(IPn1)   |using IPn1
   |flow(IPn1,.)|attached to MR(IP1)
   +------------+

   Figure 4.  Configurations of NEMO basic support for an MR which is
   attached to a network.  The mobility management functions in the
   network are a separate LMs, FM-CP and LMp at CPA, FM-DP at DPA.  The
   mobility management functions FM and LMc are also at the MR to which
   MNN is attached.

   Figure 4 shows configurations of host-based mobility management for
   an MR with multiple instances of DPA for a distributed mobility
   anchoring environment.  Figure 4 can be obtained by simply changing
   the MN from the Figure 3 into the MR carrying a mobile network
   consisting of mobile network nodes (MNNs) in Figure 4.

   An IP prefix/address IPn1 delegated to the MR is assigned for use by
   the MNN in the mobile network.  The MNN uses IPn1 to communicate with



Chan, et al.              Expires May 16, 2018                 [Page 11]

Internet-Draft       distributed mobility anchoring        November 2017


   a correspondent node (CN) not shown in the figure.  The flow of this
   communication session is shown as flow(IPn1, ...), meaning it uses
   IPn1 and other parameters.

   To enable the MR to assign the IP prefix IPn1, the DPA delegates the
   prefix using DHCPv6-PD to the MR.

3.2.  Operations and Parameters

   The operations of distributed mobility anchoring are defined in order
   that they might work together to produce a distributed mobility
   solution.  The needed information is passed as mobility message
   parameters, which must be protected in terms of integrity.  Some
   parameters may require a means to support privacy of an MN or MR.

   The mobility needs in 5G Wireless and beyond are diverse.  Therefore
   operations needed to enable different distributed mobility solutions
   in different distributed mobility anchoring configurations are
   extensive as illustrated below.  It is however not necessary for
   every distributed mobility solution to exhibit all the operations
   listed in this section.  A given distributed mobility solution may
   exhibit only those operations needed.

3.2.1.  Location Management

   An example LM design consists of a distributed database with multiple
   LMs servers.  The location information about the prefix/address of an
   MN is primarily at a given LMs.  Peer LMs may exchange the location
   information with each other.  LMc may retrieve a given record or send
   a given record update to LMs.

   Location management configurations:

   LM-cfg: As shown in Section 3.1:

           LMs may be implemented at CPA, may be co-located with LMc at
           CPA, or may be a separate server.

           LMc may be at CPA, CPN, or MN.

           LMp may proxy between LMs and LMc.

           Specifically:

   Location management operations and parameters:






Chan, et al.              Expires May 16, 2018                 [Page 12]

Internet-Draft       distributed mobility anchoring        November 2017


   LM-cfg:1  LMs and LMc may co-locate or may be separate, whereas LMc
             is implemented in CPA in a flat network with network-based
             mobility as shown in Figure 1 in Section 3.1.1.

   LM-cfg:2  Either LMs may be a separate server with LMp implemented at
             CPA, or LMs may be implemented at CPA.  LMc is implemented
             at CPN in a hierarchical network with network-based
             mobility as shown in Figure 2 in Section 3.1.2, at MN for
             host-based mobility as shown in Figure 3 in Section 3.1.3,
             or at MR for network mobility as shown in Figure 4 in
             Section 3.1.4.


   LM-db: LM may manage the location information in a client-server
          database system.

          Example LM database functions are as follows:

   LM-db:1  LMc may query LMs about location information for a prefix of
            MN (pull).
            Parameters:

            - IP prefix of MN: integrity support required and privacy
              support may be required.

   LM-db:2  LMs may reply to LMc query about location information for a
            prefix of MN (pull).
            Parameters:

            - IP prefix of MN: integrity support required and privacy
              support may be required,
            - IP address of FM-DP/DPA/DPN to forward the packets of the
              flow: integrity support required.

   LM-db:3  LMs may inform LMc about location information for a prefix
            of MN (push).
            Parameters:

            - IP prefix of MN: integrity support required and privacy
              support may be required,
            - IP address of FM-DP/DPA/DPN to forward the packets of the
              flow: integrity support required.

            This function in the PMIPv6 protocol is the Update
            Notification (UPN) together with the Update Notification
            Acknowledgment (UPA) as defined in [RFC7077].





Chan, et al.              Expires May 16, 2018                 [Page 13]

Internet-Draft       distributed mobility anchoring        November 2017


   LM-db:4  LMc may inform LMs about update location information for a
            prefix of MN.
            Parameters:

            - IP prefix of MN: integrity support required and privacy
              support may be required,
            - IP address of FM-DP/DPA/DPN to forward the packets of the
              flow: integrity support required.

            This function in the MIPv6 / PMIPv6 protocol is the Binding
            Update (BU) / Proxy Binding Update (PBU) together with the
            Binding Acknowledgment (BA) / Proxy Binding Acknowledgment
            (PBA) as defined in [RFC6275] / [RFC5213] respectively.

   LM-db:5  The MN may be a host or a router.  When the MN is an MR, the
            prefix information may include the IP prefix delegated to
            the MR.
            Additional parameters:

            - IP prefix delegated to MR: integrity support required and
              privacy support may be required,
            - IP prefix/address of the MR to forward the packets of the
              prefix delegated to the MR: integrity support required.


   LM-svr: The LM may be a distributed database with multiple LMs
           servers.

           For example:

   LM-svr:1  A LMs may join a pool of LMs servers.
             Parameters:

             - IP address of the LMs: integrity support required,
             - IP prefixes for which the LMs will host the primary
               location information: integrity support required.

   LM-svr:2  LMs may query a peer LMs about location information for a
             prefix of MN.
             Parameters:

             - IP prefix: integrity support required and privacy support
               may be required.

   LM-svr:3  LMs may reply to a peer LMs about location information for
             a prefix of MN.
             Parameters:




Chan, et al.              Expires May 16, 2018                 [Page 14]

Internet-Draft       distributed mobility anchoring        November 2017


             - IP prefix of MN: integrity support required and privacy
               support may be required,
             - IP address of FM-DP/DPA/DPN to forward the packets of the
               flow: integrity support required.


   The list above only gives the minimal set of the required parameters.
   In a specific mobility protocol, additional parameters should be
   added as needed.  Examples of these additional parameters are those
   passed in the mobility options of the mobility header for MIPv6
   [RFC6275] and for PMIPv6 [RFC5213].

3.2.2.  Forwarding Management

   Forwarding management configurations:

   FM-cfg: As shown in Section 3.1:

           FM-CP may be implemented at CPA, CPN, MN depending on the
           configuration chosen.

           FM-DP may also be implemented at CPA, CPN, MN depending on
           the configuration chosen.

           Specifically:

   FM-cfg:1  FM-CP and FM-DP may be implemented at CPA and DPA
             respectively in a flat network with network-based mobility
             as shown in Figure 1 in Section 3.1.1.

   FM-cfg:2  FM-CP may be implemented at both CPA and CPN and FM-DP is
             implemented at both DPA and DPN in a hierarchical network
             with network-based mobility as shown in Figure 2 in
             Section 3.1.2.

   FM-cfg:3  FM-CP and FM-DP may be implemented at CPA and DPA
             respectively and also both implemented at MN for host-based
             mobility as shown in Figure 3 in Section 3.1.3.

   FM-cfg:4  FM-CP and FM-DP may be implemented at CPA and DPA
             respectively and also both implemented at MR for network
             mobility as shown in Figure 4 in Section 3.1.4.


   Forwarding management operations and parameters:

   FM-find:1  An anchor may discover and be discovered such as through
              an anchor registration system as follows:



Chan, et al.              Expires May 16, 2018                 [Page 15]

Internet-Draft       distributed mobility anchoring        November 2017


   FM-find:2  FM registers and authenticates itself with a centralized
              mobility controller.
              Parameters:

              - IP address of DPA and its CPA: integrity support
                required,
              - IP prefix anchored to the DPA: integrity support
                required.

              Registration reply: acknowledge of registration and echo
              the input parameters.

   FM-find:3  FM discovers the FM of another IP prefix by querying the
              mobility controller based on the IP prefix.
              Parameters:

              - IP prefix of MN: integrity support required and privacy
                support may be required.

   FM-find:4  When making anchor discovery FM expects the answer
              parameters:

              - IP address of DPA to which IP prefix of MN is anchored:
                integrity support required,
              - IP prefix of the corresponding CPA: integrity support
                required.


   FM-flow:1  The FM may be carried out on the packets to/from an MN up
              to the granularity of a flow.

   FM-flow:2  Example matching parameters are in the 5-tuple of a flow.


   FM-path:1  FM may change the forwarding path of a flow upon a change
              of point of attachment of an MN.  Prior to the changes,
              packets coming from the CN to the MN would traverse from
              the CN to the home network anchor of the flow for the MN
              before reaching the MN.  Changes are from this original
              forwarding path or paths to a new forwarding path or paths
              from the CN to the current AR of the MN and then the MN
              itself.

   FM-path:2  As an incoming packet is forwarded from the CN to the MN,
              the far end where forwarding path change begins may in
              general be any node in the original forwarding path from
              the CN to the home network DPA.  The packet is forwarded
              to the MN for host-based mobility and to a node in the



Chan, et al.              Expires May 16, 2018                 [Page 16]

Internet-Draft       distributed mobility anchoring        November 2017


              network which will deliver the packets to the MN for
              network-based mobility.  The near-end is generally a DPN
              with a hierarchical network but may also be another node
              with DPA capability in a flattened network.

   FM-path:3  The mechanisms to accomplish such changes may include
              changes to the forwarding table and indirection such as
              tunneling, rewriting packet header, segment routing
              [I-D.matsushima-spring-dmm-srv6-mobile-uplane], or NAT.

              Note: An emphasis in this document in distributed mobility
              anchoring is to explain the use of multiple anchors to
              avoid unnecessarily long route which may be encountered in
              centralized mobility anchoring.  It is therefore not the
              emphasis of this document on which particular mechanism to
              choose from.


   FM-path-tbl:4  The objective of forwarding table updates is to change
                  the forwarding path so that the packets in the flow
                  will be forwarded from the CN to the new AR instead of
                  the home network anchor or previous AR.  Each of the
                  affected forwarding switches will need appropriate
                  changes to its forwarding table.

                  Specifically, such forwarding table updates may
                  include: (1) addition of forwarding table entries
                  needed to forward the packets destined to the MN to
                  the new AR; (2) deletion of forwarding table entries
                  to forward the packets destined to the MN to the home
                  network anchor or to the previous AR.

   FM-path-tbl:5  With a centralized control plane, forwarding table
                  updates may be achieved through messaging between the
                  centralized control plane and the distributed
                  forwarding switches as described above (FM-cpdp) in
                  this section.

   FM-path-tbl:6  To reduce excessive signaling, the scope of such
                  updates for a given flow may be confined to only those
                  forwarding switches such that only the packets sent
                  from the "CN" to the MN will go to the new AR.  Such
                  confinement may be made when using a centralized
                  control plane possessing a global view of all the
                  forwarding switches.

   FM-path-tbl:7  FM reverts the changes previously made to the
                  forwarding path of a flow when such changes are no



Chan, et al.              Expires May 16, 2018                 [Page 17]

Internet-Draft       distributed mobility anchoring        November 2017


                  longer needed, e.g., when all the ongoing flows using
                  an IP prefix/address requiring IP session continuity
                  have closed.


   FM-path-ind:8  Indirection forwards the incoming packets of the flow
                  from the DPA at the far end to a DPA/DPN at the near
                  end of indirection.  Both ends of the indirection need
                  to know the LM information of the MN for the flow and
                  also need to possess FM capability to perform
                  indirection.

   FM-path-ind:9  The mechanism of changing the forwarding path in MIPv6
                  [RFC6275] and PMIPv6 [RFC5213] is tunneling.  In the
                  control plane, the FM-CP sets up the tunnel by
                  instructing the FM-DP at both ends of the tunnel.  In
                  the data plane, the FM-DP at the start of the tunnel
                  performs packet encapsulation, whereas the FM-DP at
                  the end of the tunnel decapsulates the packet.

                  Note that in principle the ends of the indirection
                  path can be any pair of network elements with the FM-
                  DP function.

   FM-path-ind:10 FM reverts the changes previously made to the
                  forwarding path of a flow when such changes are no
                  longer needed, e.g., when all the ongoing flows using
                  an IP prefix/address requiring IP session continuity
                  have closed.  When tunneling is used, the tunnels will
                  be torn down when they are no longer needed.


   FM-cpdp: With separation of control plane function and data plane
            function, FM-CP and FM-DP communicate with each other.  Such
            communication may be realized by the appropriate messages in
            [I-D.ietf-dmm-fpc-cpdp].

            For example:

   FM-cpdp:1  CPA/FM-CP sends forwarding table updates to DPA/FM-DP.
              Parameters:

              - New forwarding table entries to add: integrity support
                required,
              - Expired forwarding table entries to delete: integrity
                support required.

   FM-cpdp:2  DPA/FM-DP sends to CPA/FM-CP about its status and load.



Chan, et al.              Expires May 16, 2018                 [Page 18]

Internet-Draft       distributed mobility anchoring        November 2017


              Parameters:

              - State of forwarding function being active or not:
                integrity support required,
              - Loading percentage: integrity support required.


   FM-CPA: The CPA possesses FM-CP function to make the changes to the
           forwarding path as described in FM-path, and the changes may
           be implemented through forwarding table changes or through
           indirection as described respectively in FM-path-tbl and FM-
           path-ind above.

           The FM-CP communicates with the FM-DP using the appropriate
           messages in [I-D.ietf-dmm-fpc-cpdp] as described in FM-cpdp
           above so that it may instruct the FM-DP to perform the
           changed forwarding tasks.


   FM-DPA: The DPA possesses FM-DP function to forward packets according
           to the changed forwarding path as described in FM-path, and
           also FM-path-tbl or FM-path-ind depending on whether
           forwarding table changes or indirection is used.

           The FM-DP communicates with the FM-CP using the appropriate
           messages in [I-D.ietf-dmm-fpc-cpdp] as described in FM-cpdp
           above so that it may perform the changed forwarding tasks.

           The operations and their parameters for the DPA to perform
           distributed mobility management are described below:

   FM-DPA:1  The DPAs perform the needed functions such that for the
             incoming packets from the CN, forwarding path change by FM
             is from the DPA at the far end which may be at any
             forwarding switch (or even CN itself) in the original
             forwarding path to the near end DPA/DPN.

   FM-DPA:2  It is necessary that any incoming packet from the CN of the
             flow must traverse the DPA (or at least one of the DPAs,
             e.g., in the case of anycast) at the far end in order for
             the packet to detour to a new forwarding path.  Therefore a
             convenient design is to locate the far end DPA at a unique
             location which is always in the forwarding path.  This is
             the case in a centralized mobility design where the DPA at
             the far end is the home network anchor of the flow.

             Distributed mobility however may place the far end DPA at
             other locations in order to avoid unnecessarily long route.



Chan, et al.              Expires May 16, 2018                 [Page 19]

Internet-Draft       distributed mobility anchoring        November 2017


   FM-DPA:3  With multiple nodes possessing DPA capabilities, the role
             of FM to begin path change for the incoming packets of a
             flow at the home network DPA at the far end may be passed
             to or added to that of another DPA.

             In particular, this DPA role may be moved upstream from the
             home network DPA in the original forwarding path from CN to
             MN.

   FM-DPA:4  Optimization of the new forwarding path may be achieved
             when the path change for the incoming packets begins at a
             DPA where the original path and the direct IPv6 path
             overlap.  Then the new forwarding path will resemble the
             direct IPv6 path from the CN to the MN.


   FM-DPA-ind:5  Another mobility support employs indirection from the
                 far end DPA to the near end DPA.  Both DPAs need to be
                 capable to performing indirection.  For incoming
                 packets from the CN to the MN, the far end DPA needs to
                 start the indirection towards the near end DPA, which
                 will be the receiving end of indirection.  In addition,
                 the near end DPA needs to continue the forwarding of
                 the packet towards the MN, such as through L2
                 forwarding or through another indirection towards the
                 MN.

   FM-DPA-ind:6  With indirection, locating or moving the FM function to
                 begin indirection upstream along the forwarding path
                 from CN to MN again may help to reduce unnecessarily
                 long paths.

   FM-DPA-ind:7  Changes made by FM to establish indirection at the DPA
                 and DPN, which are IPv6 nodes, at the ends of the path
                 change for a flow will be reverted when the mobility
                 support for the flow is no longer needed, e.g., when
                 the flows have terminated.


   FM-buffer: An anchor can buffer packets of a flow in a mobility
              event:

   FM-buffer:1  CPA/FM-CP informs DPA/FM-DP to buffer packets of a flow.
                Trigger:

                - MN leaves DPA in a mobility event.

                Parameters:



Chan, et al.              Expires May 16, 2018                 [Page 20]

Internet-Draft       distributed mobility anchoring        November 2017


                - IP prefix of the flow for which packets need to be
                  buffered: integrity support required

   FM-buffer:2  CPA/FM-CP on behalf of a new DPA/FM-DP informs the CPA/
                FM-CP of the prior DPA/FM-DP that it is ready to receive
                any buffered packets of a flow.
                Parameters:

                - Destination IP prefix of the flow's packets: integrity
                  support required,
                - IP address of the new DPA: integrity support required.


   FM-mr:1  When the MN is a mobile router (MR) the access router
            anchoring the IP prefix of the MR will also own the IP
            prefix or prefixes to be delegated to the MR.  The MNNs in
            the network carried by the MR obtain IP prefixes from the
            MR.


4.  IP Mobility Handling in Distributed Anchoring Environments -
    Mobility Support Only When Needed

   IP mobility support may be provided only when needed instead of being
   provided by default.  The LM and FM functions in the different
   configurations shown in Section 3.1 are then utilized only when
   needed.

   A straightforward choice of mobility anchoring is for a flow to use
   the IP prefix of the network to which the MN is attached when the
   flow is initiated [I-D.seite-dmm-dma].

   The IP prefix/address at the MN's side of a flow may be anchored at
   the access router to which the MN is attached.  For example, when an
   MN attaches to a network (Net1) or moves to a new network (Net2), an
   IP prefix from the attached network is assigned to the MN's
   interface.  In addition to configuring new link-local addresses, the
   MN configures from this prefix an IP address which is typically a
   dynamic IP address.  It then uses this IP address when a flow is
   initiated.  Packets to the MN in this flow are simply forwarded
   according to the forwarding table.

   There may be multiple IP prefixes/addresses that an MN can select
   when initiating a flow.  They may be from the same access network or
   different access networks.  The network may advertise these prefixes
   with cost options [I-D.mccann-dmm-prefixcost] so that the mobile node
   may choose the one with the least cost.  In addition, these IP
   prefixes/addresses may be of different types regarding whether



Chan, et al.              Expires May 16, 2018                 [Page 21]

Internet-Draft       distributed mobility anchoring        November 2017


   mobility support is needed [I-D.ietf-dmm-ondemand-mobility].  A flow
   will need to choose the appropriate one according to whether it needs
   IP mobility support.

4.1.  No Need of IP Mobility: Changing to New IP Prefix/Address

   When IP mobility support is not needed for a flow, the LM and FM
   functions are not utilized so that the configurations in Section 3.1
   are simplified as shown in Figure 5.

Net1                                                   Net2

+---------------+                                      +---------------+
|AR1            |             AR is changed            |AR2            |
+---------------+               ------->               +---------------+
|CPA:           |                                      |CPA:           |
|---------------|                                      |---------------|
|DPA(IPa1):     |                                      |DPA(IPa2):     |
|anchors IP1    |                                      |anchors IP2    |
+---------------+                                      +---------------+

+...............+                                      +---------------+
.MN(IP1)        .               MN moves               |MN(IP2)        |
.flow(IP1,...)  .               =======>               |flow(IP2,...)  |
+...............+                                      +---------------+

   Figure 5.  Changing to the new IP prefix/address.  MN running a flow
   using IP1 in a network Net1 changes to running a flow using IP2 in
   Net2.

   When there is no need to provide IP mobility to a flow, the flow may
   use a new IP address acquired from a new network as the MN moves to
   the new network.

   Regardless of whether IP mobility is needed, if the flow has
   terminated before the MN moves to a new network, the flow may
   subsequently restart using the new IP address assigned from the new
   network.

   When IP session continuity is needed, even if a flow is ongoing as
   the MN moves, it may still be desirable for the flow to change to
   using the new IP prefix configured in the new network.  The flow may
   then close and then restart using a new IP address configured in the
   new network.  Such a change in the IP address of the flow may be
   enabled using a higher layer mobility support which is not in the
   scope of this document.





Chan, et al.              Expires May 16, 2018                 [Page 22]

Internet-Draft       distributed mobility anchoring        November 2017


   In Figure 5, a flow initiated while the MN was using the IP prefix
   IP1 anchored to a previous access router AR1 in network Net1 has
   terminated before the MN moves to a new network Net2.  After moving
   to Net2, the MN uses the new IP prefix IP2 anchored to a new access
   router AR2 in network Net2 to start a new flow.  The packets may then
   be forwarded without requiring IP layer mobility support.

   An example call flow is outlined in Figure 6.

 MN                    AR1           AR2                              CN
  |MN attaches to AR1:  |             |                                |
  |acquire MN-ID and profile          |                                |
  |--RS---------------->|             |                                |
  |                     |             |                                |
  |<----------RA(IP1)---|             |                                |
  |                     |             |                                |
Assigned prefix IP1     |             |                                |
IP1 address configuration             |                                |
  |                     |             |                                |
  |<-Flow(IP1,IPcn,...)-+--------------------------------------------->|
  |                     |             |                                |
  |MN detaches from AR1 |             |                                |
  |MN attaches to AR2   |             |                                |
  |                     |             |                                |
  |--RS------------------------------>|                                |
  |                     |             |                                |
  |<--------------RA(IP2)-------------|                                |
  |                     |             |                                |
Assigned prefix IP2     |             |                                |
IP2 address configuration             |                                |
  |                     |             |                                |
  |<-new Flow(IP2,IPcn,...)-----------+------------------------------->|
  |                     |             |                                |


   Figure 6.  Re-starting a flow to use the IP prefix assigned from the
   network at which the MN is attached.

4.1.1.  Guidelines for IPv6 Nodes: Changing to New IP Prefix/Address

   A network may not need IP mobility support.  For example, a network
   for stationary sensors only will never encounter mobility.

   The standard functions in IPv6 already include dropping the old IPv6
   prefix/address and acquiring new IPv6 prefix/address when the node
   changes its point of attachment to a new network.  Therefore, a
   network not providing IP mobility support at all will not need any of




Chan, et al.              Expires May 16, 2018                 [Page 23]

Internet-Draft       distributed mobility anchoring        November 2017


   the functions with the mobility operations and messages described in
   Section 3.2.

   On the other hand, a network supporting a mix of flows both requiring
   and not requiring IP mobility support will need the mobility
   functions, which it will invoke or not invoke as needed.

   The guidelines for the IPv6 nodes in a network supporting a mix of
   flows both requiring and not requiring IP mobility support include
   the following:

   GL-cfg:1  A network supporting a mix of flows both requiring and not
             requiring mobility support may take any of the
             configurations described in Section 3.1 and need to
             implement at the appropriate IPv6 nodes the mobility
             functions LM and FM as described respectively in LM-cfg and
             FM-cfg in Section 3.2 according to the configuration
             chosen.

   GL-mix:1  These mobility functions perform some of the operations
             with the appropriate messages as described in Section 3.2
             depending on which mobility mechanisms are being used.  Yet
             these mobility functions must not be invoked for a flow
             that does not need IP mobility support so that it is
             necessary to be able to distinguish the needs of a flow.
             The guidelines for the MN and the AR are in the following.

   GL-mix:2  Regardless of whether there are flows requiring IP mobility
             support, when the MN changes its point of attachment to a
             new network, it needs to configure a new global IP address
             for use in the new network in addition to configuring the
             new link-local addresses.

   GL-mix:3  The MN needs to check whether a flow needs IP mobility
             support.  This can be performed when the application is
             initiated.  The specific method is not in the scope of this
             document.

   GL-mix:4  The information of whether a flow needs IP mobility support
             is conveyed to the network such as by choosing an IP
             address to be provided with mobility support as described
             in [I-D.ietf-dmm-ondemand-mobility].  Then as the MN
             attaches to a new network, if the MN was using an IP
             address that is not supposed to be provided with mobility
             support, the access router will not invoke the mobility
             functions described in Section 3.2 for this IP address.
             That is, the IP address from the prior network is simply
             not used in the new network.



Chan, et al.              Expires May 16, 2018                 [Page 24]

Internet-Draft       distributed mobility anchoring        November 2017


   The above guidelines are only to enable distinguishing whether there
   is need of IP mobility support for a flow that does not.  When the
   flow needs IP mobility support, the list of guidelines will continue
   in Section 4.2.1.

4.2.  Need of IP Mobility

   When IP mobility is needed for a flow, the LM and FM functions in
   Section 3.1 are utilized.  The mobility support may be provided by IP
   prefix anchor switching to the new network to be described in
   Section 5 or by using other mobility management methods
   ([Paper-Distributed.Mobility], [Paper-Distributed.Mobility.PMIP] and
   [Paper-Distributed.Mobility.Review]).  Then the flow may continue to
   use the IP prefix from the prior network of attachment.  Yet some
   time later, the user application for the flow may be closed.  If the
   application is started again, the new flow may not need to use the
   prior network's IP address to avoid having to invoke IP mobility
   support.  This may be the case where a dynamic IP prefix/address
   rather than a permanent one is used.  The flow may then use the new
   IP prefix in the network where the flow is being initiated.  Routing
   is again kept simpler without employing IP mobility and will remain
   so as long as the MN which is now in the new network has not moved
   again and left to another new network.

   An example call flow in this case is outlined in Figure 7.


























Chan, et al.              Expires May 16, 2018                 [Page 25]

Internet-Draft       distributed mobility anchoring        November 2017


 MN                    AR1           AR2                              CN
  |MN attaches to AR1:  |             |                                |
  |acquire MN-ID and profile          |                                |
  |--RS---------------->|             |                                |
  |                     |             |                                |
  |<----------RA(IP1)---|             |                                |
  |                     |             |                                |
Assigned prefix IP1     |             |                                |
IP1 address configuration             |                                |
  |                     |             |                                |
  |<-Flow(IP1,IPcn,...)-+--------------------------------------------->|
  |                     |             |                                |
  |MN detach from AR1   |             |                                |
  |MN attach to AR2     |             |                                |
  |                     |             |                                |
  |--RS------------------------------>|                                |
IP mobility support such as that described in next sub-section
  |<--------------RA(IP2,IP1)---------|                                |
  |                     |             |                                |
  |<-Flow(IP1,IPcn,...)---------------+------------------------------->|
  |                     |             |                                |
Assigned prefix IP2     |             |                                |
IP2 address configuration             |                                |
  |                     |             |                                |
Flow(IP1,IPcn) terminates             |                                |
  |                     |             |                                |
  |<-new Flow(IP2,IPcn,...)-----------+------------------------------->|
  |                     |             |                                |


   Figure 7.  A flow continues to use the IP prefix from its home
   network after MN has moved to a new network.

4.2.1.  Guidelines for IPv6 Nodes: Need of IP Mobility

   The configuration guidelines of distributed mobility for the IPv6
   nodes in a network supporting a mix of flows both requiring and not
   requiring distributed mobility support are as follows:

   GL-cfg:2  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring in an appropriate
             configuration such as those described in Figure 1
             (Section 3.1.1) for network-based distributed mobility or
             in Figure 3 (Section 3.1.3) for host-based distributed
             mobility.





Chan, et al.              Expires May 16, 2018                 [Page 26]

Internet-Draft       distributed mobility anchoring        November 2017


             The appropriate IPv6 nodes (CPA, DPA, CPN, DPN) have to
             implement the mobility functions LM and FM as described
             respectively in LM-cfg and FM-cfg in Section 3.2 according
             to the configuration chosen.

   The guidelines of distributed mobility for the IPv6 nodes in a
   network supporting a mix of flows both requiring and not requiring
   distributed mobility support had begun with those given as GL-mix in
   Section 4.1.1 and continue as follows:

   GL-mix:5  The distributed anchors may need to message with each
             other.  When such messaging is needed, the anchors may need
             to discover each other as described in the FM operations
             and mobility message parameters (FM-find) in Section 3.2.2.

   GL-mix:6  The anchors may need to provide mobility support on a per-
             flow basis as described in the FM operations and mobility
             message parameters (FM-flow) in Section 3.2.2.

   GL-mix:7  Then the anchors need to properly forward the packets of
             the flows in the appropriate FM operations and mobility
             message parameters depending on the specific mobility
             mechanism as described in Section 3.2.2.

   GL-mix:8  When using a mechanism of changing forwarding table
             entries, the FM operations and mobility message parameters
             are described in FM-path, FM-path-tbl, and FM-DPA in
             Section 3.2.2.

             The forwarding table updates will take place at AR1, AR2,
             the far end DPA, and other affected switches/routers such
             that the packet from the CN to the MN will traverse from
             the far end DPA towards AR2 instead of towards AR1.

             Therefore new entries to the forwarding table will be added
             at AR2 and the far end DPA as well as other affected
             switches/routers between them so that these packets will
             traverse towards AR2.  Meanwhile, changes to the forwarding
             table entries will also occur at AR1 and the far end DPA as
             well as other affected switches/routers between them so
             that if these packets ever reach any of them, they will not
             traverse towards AR1 but will traverse towards AR2 (see
             Section 3.2.2).

   GL-mix:9  Alternatively when using a mechanism of indirection, the FM
             operations and mobility message parameters are described in
             FM-path, FM-path-ind, FM-DPA, and FM-DPA-ind in
             Section 3.2.2.



Chan, et al.              Expires May 16, 2018                 [Page 27]

Internet-Draft       distributed mobility anchoring        November 2017


   GL-mix:10 If there are in-flight packets toward the old anchor while
             the MN is moving to the new anchor, it may be necessary to
             buffer these packets and then forward to the new anchor
             after the old anchor knows that the new anchor is ready.
             Such procedures are described in the FM operations and
             mobility message parameters (FM-buffer) in Section 3.2.2.


5.  IP Mobility Handling in Distributed Mobility Anchoring Environments
    - Anchor Switching to the New Network

   IP mobility is invoked to enable IP session continuity for an ongoing
   flow as the MN moves to a new network.  Here the anchoring of the IP
   address of the flow is in the home network of the flow, which is not
   in the current network of attachment.  A centralized mobility
   management mechanism may employ indirection from the anchor in the
   home network to the current network of attachment.  Yet it may be
   difficult to avoid unnecessarily long route when the route between
   the MN and the CN via the anchor in the home network is significantly
   longer than the direct route between them.  An alternative is to
   switch the IP prefix/address anchoring to the new network.

5.1.  IP Prefix/Address Anchor Switching for Flat Network

   The IP prefix/address anchoring may move without changing the IP
   prefix/address of the flow.  Here the LM and FM functions in Figure 1
   in Section 3.1 are implemented as shown in Figure 8.
























Chan, et al.              Expires May 16, 2018                 [Page 28]

Internet-Draft       distributed mobility anchoring        November 2017


Net1                                                   Net2

+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|CPA:           |                                      |CPA:           |
|LM:IP1 at IPa1 |                                      |LM:IP1 at IPa2 |
|   changes to  |                                      |               |
|   IP1 at IPa2 |                                      |               |
|---------------|                                      |---------------|
|DPA(IPa1):     | anchoring of IP1 is effectively moved|DPA(IPa2):     |
|anchored IP1   |               =======>               |anchors IP2,IP1|
+---------------+                                      +---------------+

+...............+                                      +---------------+
.MN(IP1)        .               MN moves               |MN(IP2,IP1)    |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 8.  IP prefix/address anchor switching to the new network.  MN
   with flow using IP1 in Net1 continues to run the flow using IP1 as it
   moves to Net2.

   As an MN with an ongoing session moves to a new network, the flow may
   preserve IP session continuity by moving the anchoring of the
   original IP prefix/address of the flow to the new network.  One way
   to accomplish such move is to use a centralized routing protocol to
   be described in Section 5.2 with a centralized control plane.

5.1.1.  Guidelines for IPv6 Nodes: Switching Anchor for Flat Network

   The configuration guideline for a flat network supporting a mix of
   flows both requiring and not requiring IP mobility support is:

   GL-cfg:3  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring according to Figure 1 in
             Section 3.1 for a flat network.

             The appropriate IPv6 nodes (CPA, DPA) have to implement the
             mobility functions LM and FM as described respectively in
             LM-cfg:1 or LM-cfg:2 and FM-cfg:1 in Section 3.2.

   The guidelines (GL-mix) in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network supporting a mix of flows both requiring and
   not requiring IP mobility support apply here.  In addition, the
   following are required.




Chan, et al.              Expires May 16, 2018                 [Page 29]

Internet-Draft       distributed mobility anchoring        November 2017


   GL-switch:1  The location management provides information about which
                IP prefix from an AR in the original network is being
                used by a flow in which AR in a new network.  Such
                information needs to be deleted or updated when such
                flows have closed so that the IP prefix is no longer
                used in a different network.  The LM operations are
                described in Section 3.2.1.

   GL-switch:2  The anchor operations to properly forward the packets
                for a flow are described in the FM operations and
                mobility message parameters in FM-path, FM-path-tbl, FM-
                cpdp, and FM-DPA in Section 3.2.2.  If there are in-
                flight packets toward the old anchor while the MN is
                moving to the new anchor, it may be necessary to buffer
                these packets and then forward to the new anchor after
                the old anchor knows that the new anchor is ready as are
                described in FM-buffer in Section 3.2.2.  The anchors
                may also need to discover each other as described also
                in the FM operations and mobility message parameters
                (FM-find).

   GL-switch:3  The security policy must allow to assign to the anchor
                node at the new network the original IP prefix/address
                used by the mobile node at the previous (original)
                network.  As the assigned original IP prefix/address is
                to be used in the new network, the security policy must
                allow the anchor node in the new network to advertise
                the prefix of the original IP address and also allow the
                mobile node to send and receive data packets with the
                original IP address.

   GL-switch:4  The security policy must allow the mobile node to
                configure the original IP prefix/address used at the
                previous (original) network when the original IP prefix/
                address is assigned by the anchor node in the new
                network.  It must also allow the mobile node to use the
                original IP address for the previous flow in the new
                network.


5.2.  IP Prefix/Address Anchor Switching for Flat Network with
      Centralized Control Plane

   An example of IP prefix anchor switching is in the case where Net1
   and Net2 both belong to the same operator network with separation of
   control and data planes ([I-D.liu-dmm-deployment-scenario] and
   [I-D.matsushima-stateless-uplane-vepc]), where the controller may
   send to the switches/routers the updated information of the



Chan, et al.              Expires May 16, 2018                 [Page 30]

Internet-Draft       distributed mobility anchoring        November 2017


   forwarding tables with the IP address anchoring of the original IP
   prefix/address at AR1 moved to AR2 in the new network.  That is, the
   IP address anchoring in the original network which was advertising
   the prefix will need to move to the new network.  As the anchoring in
   the new network advertises the prefix of the original IP address in
   the new network, the forwarding tables will be updated so that
   packets of the flow will be forwarded according to the updated
   forwarding tables.

   The configurations in Figure 1 in Section 3.1 for which the FM-CP and
   the LM are centralized and the FM-DPs are distributed apply here.
   Figure 9 shows its implementation where the LM is a binding between
   the original IP prefix/address of the flow and the IP address of the
   new DPA, whereas the FM uses appropriate control plane to data plane
   messages.

Net1                                                   Net2
+----------------------------------------------------------------------+
|                            CPA:                                      |
|                            LM:IP1 at IPa2                            |
|                            FM-CP                                     |
+----------------------------------------------------------------------+

+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|DPA(IPa1):     | anchoring of IP1 is effectively moved|DPA(IPa2):     |
|anchored IP1   |               =======>               |anchors IP2,IP1|
+---------------+                                      +---------------+

+...............+                                      +---------------+
.MN(IP1)        .               MN moves               |MN(IP2,IP1)    |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 9.  IP prefix/address anchor switching to the new network with
   the LM and the FM-CP in a centralized control plane whereas the FM-
   DPs are distributed.

   The example call flow in Figure 10 shows that IP1 is assigned to MN
   when the MN attaches to the AR1 A flow running in MN and needing IP
   mobility may continue to use the previous IP prefix by moving the
   anchoring of the IP prefix to the new network.  Yet a new flow to be
   initiated in the new network may simply use a new IP prefix assigned
   from the new network.






Chan, et al.              Expires May 16, 2018                 [Page 31]

Internet-Draft       distributed mobility anchoring        November 2017


 MN                    AR1           AR2                   CPA        CN
  |MN attaches to AR1:  |             |                     |          |
  |acquire MN-ID and profile          |                     |          |
  |--RS---------------->|             |                     |          |
  |<----------RA(IP1)---|             |                     |          |
  |                     |             |              Assign MN:IP1     |
IP addr config          |             |                     |          |
  |                     |             |                     |          |
  |<-Flow(IP1,IPcn,...)-+--------------------------------------------->|
  |                     |             |                     |          |
  |MN detach from AR1   |             |                     |          |
  |MN attach to AR2     |             |                     |          |
  |                     |             |                     |          |
  |--RS------------------------------>|                     |          |
  |                     |             |                     |          |
  |                     |<---------------control messages-->|          |
  |                     |             |                     |          |
  |                     |             |<-control messages-->|          |
  |                     |             |                     |          |
  |                 forwarding table updates <--------------|          |
  |                     |             |                     |          |
  |<--------------RA(IP2,IP1)---------|                     |          |
  |                     |             |              Assign MN:IP2     |
IP addr config          |             |                     |          |
  |                     |             |                     |          |
  |<-Flow(IP1,IPcn,...)---------------+------------------------------->|
  |                     |             |                     |          |
  |  Flow(IP1,IPcn,...) terminates    |                     |          |
  |                     |             |                     |          |
  |                 forwarding table updates <--------------|          |
  |                     |             |                     |          |
  |<-new Flow(IP2,IPcn,...)-----------+------------------------------->|
  |                     |             |                     |          |


   Figure 10.  DMM solution.  MN with flow using IP1 in Net1 continues
   to run the flow using IP1 as it moves to Net2.

   As the MN moves from AR1 to AR2, the AR1 may exchange messages with
   CPA to release the IP1.  It is now necessary for AR2 to learn the IP
   prefix of the MN from the previous network so that it will be
   possible for Net2 to assign both the previous network prefix and the
   new network prefix.  The network may learn the previous prefix in
   different methods.  For example, the MN may provide its previous
   network prefix information by including it to the RS message
   [I-D.jhlee-dmm-dnpp].

   Then forwarding tables updates will take place here.



Chan, et al.              Expires May 16, 2018                 [Page 32]

Internet-Draft       distributed mobility anchoring        November 2017


   In addition, the MN also needs a new IP in the new network.  The AR2
   may now send RA to the MN with prefix information that includes IP1
   and IP2.  The MN may then continue to use IP1.  In addition, the
   prefix IP2 is assigned to the MN which may configure the IP addresses
   of its interface.  Now for flows using IP1, packets destined to IP1
   will be forwarded to the MN via AR2.

   As such flows have terminated, IP1 goes back to Net1.  MN will then
   be left with IP2 only, which it will use when it now starts a new
   flow.

5.2.1.  Additional Guidelines for IPv6 Nodes: Switching Anchor with
        Centralized CP

   The configuration guideline for a flat network with centralized
   control plane and supporting a mix of flows both requiring and not
   requiring IP mobility support is:

   GL-cfg:4  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring according to Figure 1 in
             Section 3.1 with centralized control plane for a flat
             network.

             At the appropriate IPv6 nodes (CPA, DPA) have to implement
             the mobility functions LM and FM as described respectively
             in LM-cfg:1 or LM-cfg:2 and FM-cfg:1 in Section 3.2.

   The guidelines (GL-mix) in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network supporting a mix of flows both requiring and
   not requiring IP mobility support apply here.  The guidelines (GL-
   mix) in Section 5.1.1 for moving anchoring for a flat network also
   apply here.  In addition, the following are required.

   GL-switch:5  It was already mentioned that the anchor operations to
                properly forward the packets for a flow are described in
                the FM operations and mobility message parameters in FM-
                path, FM-path-tbl, FM-cpdp, and FM-DPA in Section 3.2.2
                and such changes are reverted later when the application
                has already closed.  Here however, with separation of
                control and data planes for the anchors and where the
                LMs and the FM-CP are centralized in the same control
                plane, messaging between anchors and the discovery of
                anchors become internal to the control plane.


   GL-switch:6  The centralized FM-CP needs to communicate with the
                distributed FM-DP using the FM operations and mobility



Chan, et al.              Expires May 16, 2018                 [Page 33]

Internet-Draft       distributed mobility anchoring        November 2017


                message parameters as described in FM-cpdp in
                Section 3.2.2.  Such may be realized by the appropriate
                messages in [I-D.ietf-dmm-fpc-cpdp].

   GL-switch:7  It was also already mentioned before that, if there are
                in-flight packets toward the previous anchor while the
                MN is moving to the new anchor, it may be necessary to
                buffer these packets and then forward to the new anchor
                after the old anchor knows that the new anchor is ready.
                Here however, the corresponding FM operations and
                mobility message parameters as described in
                Section 3.2.2 (FM-buffer) can be realized by the
                internal operations in the control plane together with
                signaling between the control plane and distributed data
                plane.  These signaling may be realized by the
                appropriate messages in [I-D.ietf-dmm-fpc-cpdp].


5.3.  Hierarchical Network

   The configuration for a hierarchical network has been shown in
   Figure 2 in Section 3.1.2.  With centralized control plane, CPA and
   CPN, with the associated LM and FM-CP are all co-located.  There are
   multiple DPAs (each with FM-DP) in distributed mobility anchoring.
   In the data plane, there are multiple DPNs (each with FM-DP)
   hierarchically below each DPA.  The DPA at each AR supports
   forwarding to the DPN at each of a number of forwarding switches
   (FWs).  A mobility event in this configuration belonging to
   distributed mobility management will be deferred to Section 5.4.

   In this distributed mobility configuration, a mobility event
   involving change of FW only but not of AR as shown in Figure 11 may
   still belong to centralized mobility management and may be supported
   using PMIPv6.  This configuration of network-based mobility is also
   applicable to host-based mobility with the modification for the MN
   directly taking the role of DPN and CPN, and the corresponding
   centralized mobility event may be supported using MIPv6.

   In Figure 11, the IP prefix assigned to the MN is anchored at the
   access router (AR) supporting indirection to the old FW to which the
   MN was originally attached as well as to the new FW to which the MN
   has moved.

   The realization of LM may be the binding between the IP prefix/
   address of the flow used by the MN and the IP address of the DPN to
   which MN has moved.  The implementation of FM to enable change of FW
   without changing AR may be accomplished using tunneling between the




Chan, et al.              Expires May 16, 2018                 [Page 34]

Internet-Draft       distributed mobility anchoring        November 2017


   AR and the FW as described in [I-D.korhonen-dmm-local-prefix] and in
   [I-D.templin-aerolink] or using some other L2 mobility mechanism.

Net1                                                   Net2
+----------------------------------------------------------------------+
|                    CPA,CPN:  LM:IP1 at IPn2                          |
|                              FM-CP                                   |
+----------------------------------------------------------------------+

                           +---------------+
                           |AR1            |
                           +---------------+
                           |DPA(IPa1):     |
                           |anchors IP1    |
                           |FM-DP          |
                           +---------------+

+---------------+                                      +---------------+
|FW1            |                                      |FW2            |
+---------------+            FW is changed             +---------------+
|DPN(IPn1):     |               ------->               |DPN(IPn2):     |
|FM-DP          |                                      |FM-DP          |
+---------------+                                      +---------------+

+...............+                                      +---------------+
.MN(IP1)        .               MN moves               |MN(IP2)        |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 11.  Mobility without involving change of IP anchoring in a
   network in which the IP prefix assigned to the MN is anchored at an
   AR which is hierarchically above multiple FWs to which the MN may
   connect.

5.3.1.  Additional Guidelines for IPv6 Nodes: Hierarchical Network with
        No Anchor Relocation

   The configuration guideline for a hierarchical network with
   centralized control plane and supporting a mix of flows both
   requiring and not requiring IP mobility support is:

   GL-cfg:5  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring according to Figure 2 in
             Section 3.1.2 with centralized control plane for a
             hierarchical network.





Chan, et al.              Expires May 16, 2018                 [Page 35]

Internet-Draft       distributed mobility anchoring        November 2017


             The appropriate IPv6 nodes (CPA, DPA) have to implement the
             mobility functions LM and FM as described respectively in
             LM-cfg:3 or LM-cfg:4 and FM-cfg:2 in Section 3.2.

   Even when the mobility event does not involve change of anchor, it is
   still necessary to distinguish whether a flow needs IP mobility
   support.

   The GL-mix guidelines in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network supporting a mix of flows both requiring and
   not requiring IP mobility support apply here.  In addition, the
   following are required.

   GL-switch:8  Here, the LM operations and mobility message parameters
                described in Section 3.2.1 provide information of which
                IP prefix from its FW needs to be used by a flow using
                which new FW.  The anchor operations to properly forward
                the packets of a flow described in the FM operations and
                mobility message parameters (FM-path, FM-path-ind, FM-
                cpdp in Section 3.2.2) may be realized with PMIPv6
                protocol [I-D.korhonen-dmm-local-prefix] or with AERO
                protocol [I-D.templin-aerolink] to tunnel between the AR
                and the FW.


5.4.  IP Prefix/Address Anchor Switching for a Hierarchical Network

   The configuration for the hierarchical network has been shown in
   Figure 2 in Section 3.1.2.  Again, with centralized control plane,
   CPA and CPN, with the associated LM and FM-CP are all co-located.
   There are multiple DPAs (each with FM-DP) in distributed mobility
   anchoring.  In the data plane, there are multiple DPNs (each with FM-
   DP) hierarchically below each DPA.  The DPA at each AR supports
   forwarding to the DPN at each of a number of forwarding switches
   (FWs).

   A distributed mobility event in this configuration involves change
   from a previous DPN which is hierarchically under the previous DPA to
   a new DPN which is hierarchically under a new DPA.  Such an event
   involving change of both DPA and DPN is shown in Figure 12.











Chan, et al.              Expires May 16, 2018                 [Page 36]

Internet-Draft       distributed mobility anchoring        November 2017


Net1                                                   Net2
+----------------------------------------------------------------------+
|       CPA,CPN,Aggregate Router: LM:IP1 at IPn2 at IPa2               |
|                                 FM-CP                                |
+----------------------------------------------------------------------+

                           +-----------------+
                           |Aggregate Router |
                           +-----------------+
                           |FM-DP            |
                           +-----------------+

+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|DPA(IPa1):     | anchoring of IP1 is effectively moved|DPA(IPa2):     |
|anchored IP1   |               =======>               |anchors IP2,IP1|
+---------------+                                      +---------------+

+---------------+                                      +---------------+
|FW1            |                                      |FW2            |
+---------------+             FW is changed            +---------------+
|DPN(IPn1):     |               ------->               |DPN(IPn2):     |
|FM-DP          |                                      |FM-DP          |
+---------------+                                      +---------------+

+...............+                                      +---------------+
.MN(IP1)        .               MN moves               |MN(IP2,IP1)    |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 12.  Mobility involving change of IP anchoring in a network
   with hierarchy in which the IP prefix assigned to the MN is anchored
   at an Edge Router supporting multiple access routers to which the MN
   may connect.

   This deployment case involves both a change of anchor from AR1 to AR2
   and a network hierarchy AR-FW.  It can be realized by a combination
   of relocating the IP prefix/address anchoring from AR1 to AR2 with
   the mechanism as described in Section 5.2 and then forwarding the
   packets with network hierarchy AR-FW as described in Section 5.3.

5.4.1.  Additional Guidelines for IPv6 Nodes: Switching Anchor with
        Hierarchical Network

   The configuration guideline (GL-cfg) for a hierarchical network with
   centralized control plane described in Section 5.3.1 applies here.




Chan, et al.              Expires May 16, 2018                 [Page 37]

Internet-Draft       distributed mobility anchoring        November 2017


   The GL-mix guidelines in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network supporting a mix of flows both requiring and
   not requiring IP mobility support apply here.

   The guidelines (GL-switch) in Section 5.1.1 for anchoring relocation
   and in Section 5.2.1 for a centralized control plane also apply here.

   In addition, the guidelines for indirection between the new DPA and
   the new DPN as described in Section 5.3.1 apply as well.

5.5.  Network Mobility

   The configuration for network mobility has been shown in Figure 4 in
   Section 3.1.4.  Again, with centralized control plane, CPA, with the
   associated LM and FM-CP are all co-located.  There are multiple DPAs
   (each with FM-DP) in the data plane in distributed mobility
   anchoring.  The MR possesses the mobility functions FM and LMc.  The
   IP prefix IPn1 is delegated to the MR, to which an MNN is attached
   and has an IP address from IPn1 assigned to its interface.

   Figure 13 shows a distributed mobility event in a hierarchical
   network with a centralized control plane involving a change of
   attachment of the MR from a previous DPA to a new DPA while the MNN
   is attached to the MR and therefore moves with the MR.



























Chan, et al.              Expires May 16, 2018                 [Page 38]

Internet-Draft       distributed mobility anchoring        November 2017


Net1                                                   Net2
+----------------------------------------------------------------------+
|             CPA,Aggregate Router: LM:IP1 at IPa2; IPn1 at IP1        |
|                                   FM-CP,     LM                      |
+----------------------------------------------------------------------+

                           +-----------------+
                           |Aggregate Router |
                           +-----------------+
                           |FM-DP            |
                           +-----------------+

+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|DPA(IPa1):     | anchoring of IP1 is effectively moved|DPA(IPa2):     |
|anchored IP1   |               =======>               |anchors IP2,IP1|
|DHCPv6-PD IPn1 |                                      |               |
|FM-DP          |                                      |FM-DP          |
+---------------+                                      +---------------+

+...............+                                      +---------------+
.MR(IP1)        .               MR moves               |MR(IP2,IP1)    |
+...............+               =======>               +---------------+
.FM,        LMc .                                      |FM,        LMc |
.delegated IPn1 .                                      |delegated IPn1 |
+...............+                                      +---------------+

+...............+                                      +---------------+
.MNN(IPn1)      .           MNN moves with MR          |MNN(IPn1)      |
.flow(IPn1,...) .               =======>               |flow(IPn1,...) |
+...............+                                      +---------------+

   Figure 13.  Mobility involving change of IP anchoring for an MR to
   which an MNN is attached.

   As the MR with source IP prefix IP1 moves from AR1 to AR2, mobility
   support may be provided by moving the anchoring of IP1 from AR1 to
   AR2 using the mechanism described in Section 5.2.

   The forwarding table updates will take place at AR1, AR2, the
   aggregate router, and other affected routers such that the packet
   from the CN to the MNN will traverse from the aggregate router
   towards AR2 instead of towards AR1.







Chan, et al.              Expires May 16, 2018                 [Page 39]

Internet-Draft       distributed mobility anchoring        November 2017


5.5.1.  Additional Guidelines for IPv6 Nodes: Network mobility

   The configuration guideline for a network with centralized control
   plane to provide network mobility is:

   GL-cfg:6  Multiple instances of DPAs (at access routers) which are
             providing IP prefix of the MRs are needed to provide
             distributed mobility anchoring according to Figure 4 in
             Section 3.1.

             The appropriate IPv6 nodes (CPA, DPA) have to implement the
             mobility functions LM and FM as described respectively in
             LM-cfg:3 or LM-cfg:4 and FM-cfg:4 in Section 3.2.

   The GL-mix guidelines in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network supporting a mix of flows both requiring and
   not requiring IP mobility support apply here.

   Here, because the MN is an MR, the following guideline is added:

   GL-mix:11 There are no flows requiring network mobility support when
             there are no MNNs attaching to the MR.  Here there are also
             no MNNs using a prefix delegated to the MR.  Therefore the
             anchor of the MR may change to a new AR.  The new AR may
             delegate new IP prefix to the MR, so that the MR may
             support potential MNNs to attach to it.  On the other hand
             the delegation of IP prefix to the MR from the old AR may
             be deleted.

   The guidelines (GL-switch) in Section 5.1.1 for anchoring relocation
   and in Section 5.2.1 for a centralized control plane also apply here.

   Again because the MN is an MR, the following guidelines are added:

   GL-switch:9  Network mobility may be provided using the FM operations
                and mobility message parameters as described in FM-mr in
                Section 3.2.2.

   GL-switch:10 The following changes to forwarding table entries are
                needed:

                New entries to the forwarding tables are added at AR2
                and the aggregate router as well as other affected
                switches/routers between them so that packets from the
                CN to the MNN destined to IPn1 will traverse towards
                AR2.  Meanwhile, changes to the forwarding table will
                also occur at AR1 and the aggregate router as well as
                other affected switches/routers between them so that in



Chan, et al.              Expires May 16, 2018                 [Page 40]

Internet-Draft       distributed mobility anchoring        November 2017


                case such packets ever reach any of these switches/
                routers, the packets will not traverse towards AR1 but
                will traverse towards AR2.

   GL-switch:11 The security policy must allow the MNN to continue to
                own the IP prefix/address originally delegated to the MR
                and used by the MNN at the prior network.  As this
                original IP prefix/address is to be used in the new
                network, the security policy must allow the anchor node
                to advertise the prefix of the original IP address and
                also allow the MNN to send and receive data packets with
                the original IP address.

   GL-switch:12 The security policy must allow the mobile router to
                configure the original IP prefix/address delegated to
                the MR from the previous (original) network when the
                original IP prefix/address is being delegated to the MR
                in the new network.  The security policy must also
                allows to use the original IP address by the MNN for the
                previous flow in the new network.


6.  Security Considerations

   Security protocols and mechanisms are employed to secure the network
   and to make continuous security improvements, and a DMM solution is
   required to support them [RFC7333].  In a DMM deployment
   [I-D.ietf-dmm-deployment-models] various attacks such as
   impersonation, denial of service, man-in-the-middle attacks need to
   be prevented.  An appropriate security management function as defined
   in Section 2 controls these security protocols and mechanisms to
   provide access control, integrity, authentication, authorization,
   confidentiality, etc.

   Security considerations are described in terms of integrity support,
   privacy support etc.  in describing the mobility functions in
   Section 3.2.  Here the mobility message parameters used in DMM must
   be protected, and some parameters require means to support MN and MR
   privacy.  The security considerations are also described in the
   guidelines for IPv6 nodes in various subsections in Section 4, and
   Section 5.

   The IP address anchoring of an IP prefix is effectively moved from
   one network to another network to support IP mobility Section 5.1.
   As is considered in the guidelines for IPv6 nodes in Section 5.1.1,
   the security policy needs to enable the use in the new network of
   attachment the IP prefix assigned from another network.  Yet it must
   do so without compromising on the needed security to prevent the



Chan, et al.              Expires May 16, 2018                 [Page 41]

Internet-Draft       distributed mobility anchoring        November 2017


   possible misuse of an IP prefix belonging to another network.  A
   viable solution is likely not be a global solution, but is limited in
   scope to within specific regions with the proper trust relationship.

   In network mobility, the MNN using an IP prefix assigned to it from
   the MR when the MR was in a prior network moves with the MR to a new
   network Section 5.5.  As is considered in the guidelines for IPv6
   nodes in Section 5.5.1 to support IP mobility for an ongoing flow,
   the security management function needs to enable the continued use of
   this IP prefix by the MNN with MR in the new network of attachment.
   Yet it must do so without compromising on the needed security to
   prevent the possible misuse of an IP prefix belonging to another
   network.  Again, a viable solution is likely not be a global
   solution, but is limited in scope to within specific regions with the
   proper trust relationship.

7.  IANA Considerations

   This document presents no IANA considerations.

8.  Contributors

   This document has benefited from other work on mobility support in
   SDN network, on providing mobility support only when needed, and on
   mobility support in enterprise network.  These works have been
   referenced.  While some of these authors have taken the work to
   jointly write this document, others have contributed at least
   indirectly by writing these drafts.  The latter include Philippe
   Bertin, Dapeng Liu, Satoru Matushima, Pierrick Seite, Jouni Korhonen,
   and Sri Gundavelli.

   Valuable comments have been received from John Kaippallimalil,
   ChunShan Xiong, and Dapeng Liu.  Dirk von Hugo, Byju Pularikkal,
   Pierrick Seite, Carlos Bernardos have generously provided careful
   review with helpful corrections and suggestions.

9.  References

9.1.  Normative References

   [I-D.bernardos-dmm-cmip]
              Bernardos, C., Oliva, A., and F. Giust, "An IPv6
              Distributed Client Mobility Management approach using
              existing mechanisms", draft-bernardos-dmm-cmip-08 (work in
              progress), September 2017.






Chan, et al.              Expires May 16, 2018                 [Page 42]

Internet-Draft       distributed mobility anchoring        November 2017


   [I-D.bernardos-dmm-pmip]
              Bernardos, C., Oliva, A., and F. Giust, "A PMIPv6-based
              solution for Distributed Mobility Management", draft-
              bernardos-dmm-pmip-09 (work in progress), September 2017.

   [I-D.ietf-dmm-deployment-models]
              Gundavelli, S. and S. Jeon, "DMM Deployment Models and
              Architectural Considerations", draft-ietf-dmm-deployment-
              models-03 (work in progress), November 2017.

   [I-D.ietf-dmm-fpc-cpdp]
              Matsushima, S., Bertz, L., Liebsch, M., Gundavelli, S.,
              Moses, D., and C. Perkins, "Protocol for Forwarding Policy
              Configuration (FPC) in DMM", draft-ietf-dmm-fpc-cpdp-09
              (work in progress), October 2017.

   [I-D.ietf-dmm-ondemand-mobility]
              Yegin, A., Moses, D., Kweon, K., Lee, J., Park, J., and S.
              Jeon, "On Demand Mobility Management", draft-ietf-dmm-
              ondemand-mobility-12 (work in progress), July 2017.

   [I-D.jhlee-dmm-dnpp]
              Lee, J. and Z. Yan, "Deprecated Network Prefix Provision",
              draft-jhlee-dmm-dnpp-01 (work in progress), April 2016.

   [I-D.korhonen-dmm-local-prefix]
              Korhonen, J., Savolainen, T., and S. Gundavelli, "Local
              Prefix Lifetime Management for Proxy Mobile IPv6", draft-
              korhonen-dmm-local-prefix-01 (work in progress), July
              2013.

   [I-D.liu-dmm-deployment-scenario]
              Liu, V., Liu, D., Chan, A., Lingli, D., and X. Wei,
              "Distributed mobility management deployment scenario and
              architecture", draft-liu-dmm-deployment-scenario-05 (work
              in progress), October 2015.

   [I-D.matsushima-spring-dmm-srv6-mobile-uplane]
              Matsushima, S., Filsfils, C., Kohno, M., and d.
              daniel.voyer@bell.ca, "Segment Routing IPv6 for Mobile
              User-Plane", draft-matsushima-spring-dmm-srv6-mobile-
              uplane-03 (work in progress), November 2017.

   [I-D.matsushima-stateless-uplane-vepc]
              Matsushima, S. and R. Wakikawa, "Stateless user-plane
              architecture for virtualized EPC (vEPC)", draft-
              matsushima-stateless-uplane-vepc-06 (work in progress),
              March 2016.



Chan, et al.              Expires May 16, 2018                 [Page 43]

Internet-Draft       distributed mobility anchoring        November 2017


   [I-D.mccann-dmm-prefixcost]
              McCann, P. and J. Kaippallimalil, "Communicating Prefix
              Cost to Mobile Nodes", draft-mccann-dmm-prefixcost-03
              (work in progress), April 2016.

   [I-D.sarikaya-dmm-for-wifi]
              Sarikaya, B. and L. Li, "Distributed Mobility Management
              Protocol for WiFi Users in Fixed Network", draft-sarikaya-
              dmm-for-wifi-05 (work in progress), October 2017.

   [I-D.seite-dmm-dma]
              Seite, P., Bertin, P., and J. Lee, "Distributed Mobility
              Anchoring", draft-seite-dmm-dma-07 (work in progress),
              February 2014.

   [I-D.templin-aerolink]
              Templin, F., "Asymmetric Extended Route Optimization
              (AERO)", draft-templin-aerolink-75 (work in progress), May
              2017.

   [I-D.yhkim-dmm-enhanced-anchoring]
              Kim, Y. and S. Jeon, "Enhanced Mobility Anchoring in
              Distributed Mobility Management", draft-yhkim-dmm-
              enhanced-anchoring-05 (work in progress), July 2016.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3753]  Manner, J., Ed. and M. Kojo, Ed., "Mobility Related
              Terminology", RFC 3753, DOI 10.17487/RFC3753, June 2004,
              <https://www.rfc-editor.org/info/rfc3753>.

   [RFC5213]  Gundavelli, S., Ed., Leung, K., Devarapalli, V.,
              Chowdhury, K., and B. Patil, "Proxy Mobile IPv6",
              RFC 5213, DOI 10.17487/RFC5213, August 2008,
              <https://www.rfc-editor.org/info/rfc5213>.

   [RFC6275]  Perkins, C., Ed., Johnson, D., and J. Arkko, "Mobility
              Support in IPv6", RFC 6275, DOI 10.17487/RFC6275, July
              2011, <https://www.rfc-editor.org/info/rfc6275>.

   [RFC6459]  Korhonen, J., Ed., Soininen, J., Patil, B., Savolainen,
              T., Bajko, G., and K. Iisakkila, "IPv6 in 3rd Generation
              Partnership Project (3GPP) Evolved Packet System (EPS)",
              RFC 6459, DOI 10.17487/RFC6459, January 2012,
              <https://www.rfc-editor.org/info/rfc6459>.



Chan, et al.              Expires May 16, 2018                 [Page 44]

Internet-Draft       distributed mobility anchoring        November 2017


   [RFC7077]  Krishnan, S., Gundavelli, S., Liebsch, M., Yokota, H., and
              J. Korhonen, "Update Notifications for Proxy Mobile IPv6",
              RFC 7077, DOI 10.17487/RFC7077, November 2013,
              <https://www.rfc-editor.org/info/rfc7077>.

   [RFC7333]  Chan, H., Ed., Liu, D., Seite, P., Yokota, H., and J.
              Korhonen, "Requirements for Distributed Mobility
              Management", RFC 7333, DOI 10.17487/RFC7333, August 2014,
              <https://www.rfc-editor.org/info/rfc7333>.

   [RFC7429]  Liu, D., Ed., Zuniga, JC., Ed., Seite, P., Chan, H., and
              CJ. Bernardos, "Distributed Mobility Management: Current
              Practices and Gap Analysis", RFC 7429,
              DOI 10.17487/RFC7429, January 2015,
              <https://www.rfc-editor.org/info/rfc7429>.

9.2.  Informative References

   [Paper-Distributed.Mobility]
              Lee, J., Bonnin, J., Seite, P., and H. Chan, "Distributed
              IP Mobility Management from the Perspective of the IETF:
              Motivations, Requirements, Approaches, Comparison, and
              Challenges",  IEEE Wireless Communications, October 2013.

   [Paper-Distributed.Mobility.PMIP]
              Chan, H., "Proxy Mobile IP with Distributed Mobility
              Anchors",  Proceedings of GlobeCom Workshop on Seamless
              Wireless Mobility, December 2010.

   [Paper-Distributed.Mobility.Review]
              Chan, H., Yokota, H., Xie, J., Seite, P., and D. Liu,
              "Distributed and Dynamic Mobility Management in Mobile
              Internet: Current Approaches and Issues", February 2011.

Authors' Addresses

   H. Anthony Chan (editor)
   Huawei Technologies
   5340 Legacy Dr. Building 3
   Plano, TX 75024
   USA

   Email: h.a.chan@ieee.org








Chan, et al.              Expires May 16, 2018                 [Page 45]

Internet-Draft       distributed mobility anchoring        November 2017


   Xinpeng Wei
   Huawei Technologies
   Xin-Xi Rd. No. 3, Haidian District
   Beijing, 100095
   P. R. China

   Email: weixinpeng@huawei.com


   Jong-Hyouk Lee
   Sangmyung University
   31, Sangmyeongdae-gil, Dongnam-gu
   Cheonan 31066
   Republic of Korea

   Email: jonghyouk@smu.ac.kr


   Seil Jeon
   Sungkyunkwan University
   2066 Seobu-ro, Jangan-gu
   Suwon, Gyeonggi-do
   Republic of Korea

   Email: seiljeon@skku.edu


   Alexandre Petrescu
   CEA, LIST
   CEA Saclay
   Gif-sur-Yvette, Ile-de-France  91190
   France

   Phone: +33169089223
   Email: Alexandre.Petrescu@cea.fr


   Fred L. Templin
   Boeing Research and Technology
   P.O. Box 3707
   Seattle, WA  98124
   USA

   Email: fltemplin@acm.org







Chan, et al.              Expires May 16, 2018                 [Page 46]
