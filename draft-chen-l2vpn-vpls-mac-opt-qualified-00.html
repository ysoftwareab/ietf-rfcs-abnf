<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>LDP Extensions for Optimized MAC Address Withdrawal in VPLS model 3 supporting Qualified learning</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="LDP Extensions for Optimized MAC Address Withdrawal in VPLS model 3 supporting Qualified learning">
<meta name="keywords" content="Request for Comments, RFC, Internet Draft, I-D">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Networking Working Group</td><td class="header">R. Chen</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Y. Wang</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">ZTE Corporation</td></tr>
<tr><td class="header">Expires: April 21, 2011</td><td class="header">L. Guo</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">China Telecom</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 18, 2010</td></tr>
</table></td></tr></table>
<h1><br />LDP Extensions for Optimized MAC Address Withdrawal in VPLS model 3 supporting Qualified learning<br />draft-chen-l2vpn-vpls-mac-opt-qualified-00</h1>

<h3>Abstract</h3>

<p>This draft defines a method for optimized MAC Address Withdrawal in VPLS model 3 [RFC4664] supporting qualified learning [RFC4762]. Based on the MAC Address Withdrawal procedures defined in [RFC4762] and <a class='info' href='#I-D.ietf-l2vpn-vpls-ldp-mac-opt'>[I&#8209;D.ietf&#8209;l2vpn&#8209;vpls&#8209;ldp&#8209;mac&#8209;opt]<span> (</span><span class='info'>Dutta, P., Balus, F., Calvignac, G., and O. Stokes, &ldquo;LDP Extensions for Optimized MAC Address Withdrawal in H-VPLS,&rdquo; July&nbsp;2010.</span><span>)</span></a>, some extensions are made to enable a PE device to remove only the MAC addresses that belong to MAC address space affected by topology change and need to be relearned.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 21, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Conventions used in this document<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Terminology<br />
<a href="#anchor4">3.</a>&nbsp;
Problem Description<br />
<a href="#anchor5">4.</a>&nbsp;
Optimized MAC Flush Mechanism<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.1.</a>&nbsp;
 MAC Address Space TLV<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.2.</a>&nbsp;
MAC Address Space TLV Processing Rules<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.3.</a>&nbsp;
Optimized MAC Flush Procedures<br />
<a href="#anchor9">5.</a>&nbsp;
 IANA Considerations<br />
<a href="#anchor10">6.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
Normative references<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>[RFC4762] defines a basic MAC Address Withdrawal mechanism to remove or unlearn MAC addresses for faster convergence on topology change. It defines MAC List TLV which contains a list of MAC addresses to be flushed in LDP Address Withdraw Message, and when a MAC List TLV contains a large number of MAC addresses, it may be preferable to send a LDP Address Withdraw Message with an empty MAC List.
</p>
<p>As per the processing rules in [RFC4762], a PE device on receiving a MAC Address Withdrawal Message with MAC List TLV removes the association between the MAC address and the AC or PW over which this message is received. For a MAC Address Withdraw message with empty MAC list, a PE removes all MAC addresses associated with the specified VPLS instance (as indicated in the FEC TLV) except the MAC addresses learned over the newly activated PW. The PE device further triggers a MAC Address Withdrawal message to each remote PE devices connected to it in the VPLS full mesh. The problem is that it will flush MAC addresses which are not affected due to topology change, thus leading to unnecessary flooding and relearning.
</p>
<p>Draft <a class='info' href='#I-D.ietf-l2vpn-vpls-ldp-mac-opt'>[I&#8209;D.ietf&#8209;l2vpn&#8209;vpls&#8209;ldp&#8209;mac&#8209;opt]<span> (</span><span class='info'>Dutta, P., Balus, F., Calvignac, G., and O. Stokes, &ldquo;LDP Extensions for Optimized MAC Address Withdrawal in H-VPLS,&rdquo; July&nbsp;2010.</span><span>)</span></a> proposes to extend LDP protocol to support source initiated P2MP signaling, but it involves very few P2MP PW parameter negotiation Mechanism.
</p>
<p>This draft describes the problem and a solution to optimize the MAC flush procedure in [RFC4762] and <a class='info' href='#I-D.ietf-l2vpn-vpls-ldp-mac-opt'>[I&#8209;D.ietf&#8209;l2vpn&#8209;vpls&#8209;ldp&#8209;mac&#8209;opt]<span> (</span><span class='info'>Dutta, P., Balus, F., Calvignac, G., and O. Stokes, &ldquo;LDP Extensions for Optimized MAC Address Withdrawal in H-VPLS,&rdquo; July&nbsp;2010.</span><span>)</span></a> so it flushes only the MAC addresses that belong to MAC address space affected by topology change and need to be relearned in VPLS model 3 supporting Qualified learning.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions used in this document</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC2119.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Terminology</h3>

<p> AC: Attachment Circuit
</p>
<p> CE: Customer Edge device
</p>
<p> LDP: Label Distribution Protocol
</p>
<p> PE: Provider Edge
</p>
<p> PW: Pseudowire
</p>
<p> MTU-s: Multi-Tenant Unit switch
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Problem Description</h3>
<br /><hr class="insert" />
<a name="Figure 1"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

	                                                               VLAN1
                                            VLAN2                      VLAN2
                                            CE-2                       CE-3
	                                   /                           /
                                 PE-1     /                  PE-3     /
                               +--------+/                 +--------+/
                               |        |                  |        |
                               |   --   |      PW2         |   --   |
   VLAN1                       |  /  \  |------------------|  /  \  |
     CE-1               /------|  \ s/  |                  |  \S /  |
       \     primary spoke PW  |   --   |           /------|   --   |
        \             /        +--------+          /       +--------+
         \    (MTU-s)/              |    \ PW3    /          PW6|
          +--------+/               |     \      /              |
          |        |                |      \    /               |
          |   --   |            PW1 |       \  /                |
          |  /  \  |                |      H-VPLS Full Mesh Core|
          |  \S /  |                |       / \                 |
          |   --   |                |      /   \                |
          +--------+\               |  PW4/     \               |
              backup spoke PW       |    /       \              |
                      \        +--------+         \--------+--------+
                       \       |        |                  |        |
                        \------|  --    |     PW5          |  --    |
                               | /  \   |------------------| /  \   |
                               | \s /   |                  | \S /   |
                               |  --    |                  |  --    |
                              /+--------+                  +--------+
                             /   PE-2                         PE-4
                            /
                           CE-4
	                  VLAN1
		          VLAN2

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Dual homed MTU-s in two tier hierarchy H-VPLS&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Figure.1 is an example for the dual-homing access topology in VPLS model 3 supporting qualified learning.
</p>
<p>There are four VLANs in Figure 1, and each customer VLAN has its own broadcast domain and MAC address space. CE-1 and CE-3 belong to VLAN1, CE-2 and CE-4 belong to VLAN2.
</p>
<p>CE-1, CE-2, CE-3 and CE-4 connect with MTU-S, PE-1, PE-4 and PE-2 respectively. The MTU-S is dual-homed to PE-1 and PE-2. Only the primary spoke PW is active at MTU-s, thus PE-1 is acting as the active device to reach the full mesh in the VPLS instance.
</p>
<p>When MTU-s switches to the backup spoke PW and activates it, PE-2 becomes the active device to reach the full mesh core. Traffic entering the H-VPLS from CE-1 is diverted by the MTU-s to the backup spoke PW. For faster convergence MTU-s may desire to unlearn or remove the MAC addresses belonging to VLAN1 and learned from the PW that terminates at PE-1 MUST be removed. Once the backup PW has been made active, MTU-s may send a MAC flush message to PE-2.
</p>
<p>As per the processing rules defined in [RFC4762], PE-2 flushes all of the MAC addresses learned in the VPLS from the PWs terminating at PE-1, PE-3 and PE-4. PE-2 further relays MAC flush messages to PE-1, PE-3 and PE-4. Same processing rule applies at all those PE devices.
</p>
<p>As per the processing rules defined in <a class='info' href='#I-D.ietf-l2vpn-vpls-ldp-mac-opt'>[I&#8209;D.ietf&#8209;l2vpn&#8209;vpls&#8209;ldp&#8209;mac&#8209;opt]<span> (</span><span class='info'>Dutta, P., Balus, F., Calvignac, G., and O. Stokes, &ldquo;LDP Extensions for Optimized MAC Address Withdrawal in H-VPLS,&rdquo; July&nbsp;2010.</span><span>)</span></a>, PE-2 flushes all of the MAC addresses learned in the VPLS from the PWs terminating at PE-1. In fact, PE2 need not flush the MAC addresses belong to VLAN2 and learned over PW1.There are multi-Mac addresses spaces in a single VPLS, and the affected Mac addresses spaces is only VLAN1. PE-2 only need flush and relearn MAC addresses belong to VLAN1 and learned over PW1.
</p>
<p> With the number of PE devices in the full-mesh increases, the number of unaffected MAC addresses flushed in a VPLS instance also increases, thus leading to unnecessary flooding and relearning.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Optimized MAC Flush Mechanism</h3>

<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
 MAC Address Space TLV</h3>

<p>This draft proposes a MAC Address Space TLV to be used with LDP Address Withdraw Message. The MAC Address Space TLV carries a list of MAC addresses Spaces which are affected due to topology change. When a PE receives a LDP Address Withdraw message with a MAC Address Space TLV, then the PE only flushes the suspect MAC addresses belong to the MAC Address Space elements.
</p>
<p> The new MAC Address Space TLV format is as follows:
</p><br /><hr class="insert" />
<a name="Figure 2"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |U|F| MAC Address Space TLV(TBD)|            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      MAC address space #1                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      MAC address space #2                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                              ...                              ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      MAC address space #n                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: MAC Address Space TLV format&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>U bit: Unknown bit. This bit MUST be set to 1. If the MAC address Space format is not understood, then it MUST be ignored.
</p>
<p> F bit: Forward bit. This bit MUST be set to 0. Since the LDP mechanism used here is targeted, the TLV MUST NOT be forwarded.
</p>
<p> Type: Type field. This identifies the TLV type as MAC Address Space TLV.
</p>
<p> Length: Length field. This field specifies the total length in octets of value in MAC Address Space TLV.
</p>
<p>MAC Address Space: This identifies the MAC addresses Space which are affected due to topology change.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
MAC Address Space TLV Processing Rules</h3>

<p>If a PE device receives a MAC Address Withdraw with MAC Address Space TLV and empty MAC list, it SHOULD remove all the MAC addresses associated with the MAC Address Spaces (specified by the MAC Address Space TLV) in a VPLS instance, except the MAC addresses learned over the PW associated with this signaling session over which the message was received.
</p>
<p>If a PE device receives a MAC Address Withdraw with MAC Address Space TLV and MAC list TLV, it SHOULD remove the MAC address (specified by the MAC List TLV) associated with the MAC Address Space (specified by the MAC Address Space TLV) in a VPLS instance.
</p>
<p> If a PE device receives a MAC Address Withdraw with MAC Address Space TLV and PE-ID TLV, from the specified MAC Address Space which is identified by MAC Address Space TLV £¬it SHOULD remove all the MAC addresses learned from the PW ,which terminates at the PE identified by the PE-ID.
</p>
<p>If a PE device that doesn't support MAC Address Space TLV, receives a MAC flush message with this option, it MUST ignore the option and follow the processing rules as per [RFC4762] and <a class='info' href='#I-D.ietf-l2vpn-vpls-ldp-mac-opt'>[I&#8209;D.ietf&#8209;l2vpn&#8209;vpls&#8209;ldp&#8209;mac&#8209;opt]<span> (</span><span class='info'>Dutta, P., Balus, F., Calvignac, G., and O. Stokes, &ldquo;LDP Extensions for Optimized MAC Address Withdrawal in H-VPLS,&rdquo; July&nbsp;2010.</span><span>)</span></a>.
</p>
<p> The scope of a MAC List TLV is the MAC Address Space (specified by the MAC Address Space TLV) in the VPLS (specified by the FEC TLV in the MAC Address Withdraw Message).
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Optimized MAC Flush Procedures</h3>

<p>This section explains the optimized MAC flush procedure in the scenario shown in Figure.1.
</p>
<p> When the backup PW is activated by MTU-s, it may send MAC Address Withdraw message to PE-2 with the FEC TLV and the optional PE-ID TLV and MAC Address Space TLV. The MAC Address Space TLV carries a list of MAC addresses Space which are affected due to topology change. Upon receipt of the MAC Address Withdraw message, PE-2 identifies the VPLS instance that requires MAC Address Withdraw from the FEC element in the FEC TLV. From the PE-ID TLV, PE-2 identifies the PW in the VPLS that terminates in PE-1. From the MAC Address Space TLV, PE-2 identifies MAC addresses Space which are affected due to topology change. PE-2 removes all MAC addresses belong to VLAN1 and learned over PW1.
</p>
<p> PE-2 relays MAC Address Withdraw messages with the received MAC Address Space TLV and PE-ID to all its peer PE devices. When the message is received at PE-3/PE-4, MAC addresses belonging to VLAN1 and learned over the PW that terminates at PE1 MUST be removed.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
 IANA Considerations</h3>

<p>The type field in the MAC List TLV is defined as 0x406 and is subject to IANA approval
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p> This section will be added in a future version.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Normative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-l2vpn-vpls-ldp-mac-opt">[I-D.ietf-l2vpn-vpls-ldp-mac-opt]</a></td>
<td class="author-text">Dutta, P., Balus, F., Calvignac, G., and O. Stokes, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-l2vpn-vpls-ldp-mac-opt-02.txt">LDP Extensions for Optimized MAC Address Withdrawal in H-VPLS</a>,&rdquo; draft-ietf-l2vpn-vpls-ldp-mac-opt-02 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-l2vpn-vpls-ldp-mac-opt-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4447">[RFC4447]</a></td>
<td class="author-text">Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;<a href="http://tools.ietf.org/html/rfc4447">Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)</a>,&rdquo; RFC&nbsp;4447, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4447.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4664">[RFC4664]</a></td>
<td class="author-text">Andersson, L. and E. Rosen, &ldquo;<a href="http://tools.ietf.org/html/rfc4664">Framework for Layer 2 Virtual Private Networks (L2VPNs)</a>,&rdquo; RFC&nbsp;4664, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4664.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4762">[RFC4762]</a></td>
<td class="author-text">Lasserre, M. and V. Kompella, &ldquo;<a href="http://tools.ietf.org/html/rfc4762">Virtual Private LAN Service (VPLS) Using Label Distribution Protocol (LDP) Signaling</a>,&rdquo; RFC&nbsp;4762, January&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4762.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5036">[RFC5036]</a></td>
<td class="author-text">Andersson, L., Minei, I., and B. Thomas, &ldquo;<a href="http://tools.ietf.org/html/rfc5036">LDP Specification</a>,&rdquo; RFC&nbsp;5036, October&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5036.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ran Chen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">4F,RD Building 2,Zijinghua Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yuhuatai District,Nanjing 210012</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86 025 52878135</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chen.ran@zte.com.cn">chen.ran@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yubao Wang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">4F,RD Building 2,Zijinghua Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yuhuatai District,Nanjing 210012</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86 025 52872130</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:wang.yubao2@zte.com.cn">wang.yubao2@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Liang Guo</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">China Telecom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">26/F,109 Zhongshan Ave</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tianhe District,Guangzhou 510630</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.R.China</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+86 020 38639595</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:guoliang@gsta.com">guoliang@gsta.com</a></td></tr>
</table>
</body></html>
