<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Packet Pseudowire Encapsulation over an MPLS
    PSN</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Packet Pseudowire Encapsulation over an MPLS
    PSN">
<meta name="keywords" content="Sample, Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">S. Bryant, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">S. Boutros</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">L. Martini</td></tr>
<tr><td class="header">Expires: January 9, 2010</td><td class="header">S. Sivabalan</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">G. Swallow</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">D . Ward</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Malis</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Verizon Communications</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 08, 2009</td></tr>
</table></td></tr></table>
<h1><br />Packet Pseudowire Encapsulation over an MPLS
    PSN<br />draft-bryant-pwe3-packet-pw-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 9, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document describes a pseudowire that is used to transport a
      packet service over an MPLS PSN is the case where the client LSR and the
      server PE are co-resident in the same equipment. For correct operation
      these clients require a multi-protocol interface with fate sharing
      between the client protocol suite. The packet pseudowire may be used to
      carry all of the required layer 2 and layer 3 protocols between the pair
      of client LSRs.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction <br />
<a href="#anchor2">2.</a>&nbsp;
Network Reference Model<br />
<a href="#anchor3">3.</a>&nbsp;
Forwarding Model<br />
<a href="#anchor4">4.</a>&nbsp;
Encapsulation <br />
<a href="#anchor5">5.</a>&nbsp;
Packet Pseudowire Control Word<br />
<a href="#anchor6">6.</a>&nbsp;
Status Indication<br />
<a href="#anchor7">7.</a>&nbsp;
Setting the load balance label<br />
<a href="#anchor8">8.</a>&nbsp;
Client Network Layer Model<br />
<a href="#anchor9">9.</a>&nbsp;
Congestion Considerations <br />
<a href="#anchor10">10.</a>&nbsp;
Security Considerations<br />
<a href="#anchor11">11.</a>&nbsp;
IANA Considerations <br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction </h3>

<p>There is a need to provide a method of carrying a packet service over
      an MPLS PSN in a way that provides isolation between the two networks.
      The server MPLS network may be an MPLS network or a network conforming
      to the MPLS-TP <a class='info' href='#RFC5317'>[RFC5317]<span> (</span><span class='info'>Bryant, S. and L. Andersson, &ldquo;Joint Working Team (JWT) Report on MPLS Architectural Considerations for a Transport Profile,&rdquo; February&nbsp;2009.</span><span>)</span></a>. The client may also be
      either a MPLS network of a network conforming to the MPLS-TP.
      Considerations as to whether an unrestricted MPLS network can act as a
      server for an MPLS-TP network are outside the scope of this
      document.
</p>
<p>Where the client equipment is connected to the server equipment via
      physical interface, the same data-link type MUST be to attach the
      clients to the PEs, and a pseudowire of the same type as the data-link
      MUST be used <a class='info' href='#RFC3985'>[RFC3985]<span> (</span><span class='info'>Bryant, S. and P. Pate, &ldquo;Pseudo Wire Emulation Edge-to-Edge (PWE3) Architecture,&rdquo; March&nbsp;2005.</span><span>)</span></a>. The reason that
      inter-working between different physical and data-link attachment types
      is specifically disallowed in the pseudowire architecture is because
      this is a complex task and not a simple bit-mapping exercise. The
      inter-working is not limited to the physical and data-link interfaces
      and state-machines it also requires a compatible approach to the
      formation of the adjacencies between attached client network equipment.
      As an example the reader should consider the differences between router
      adjacency formation on a point to point link compared to a multi-point
      to multi-point interface (e.g. Ethernet).
</p>
<p>A further consideration is that two adjacent MPLS LSRs do not simply
      exchange MPLS packets. They exchange IP packets for adjacency formation,
      control, routing, label exchange, management and monitoring purposes. In
      addition they may exchange data-link packets as part of routing (e.g.
      IS-IS hellos and IS-IS LSPs) and for OAM purposes (e.g. Cisco Discovery
      Protocol). Thus the two clients require an attachment mechanism that can
      be used to multiplex a number of protocols. In addition it is essential
      to the correct operation of the network layer that all of these
      protocols fate share.
</p>
<p>Where the client LSRs and server PEs are co-located in the same
      equipment the data-link layer can be simplified to a simple protocol
      identifier (PID) that is used to multiplex the various data-link types
      onto a pseudowire. This is the method that described in this
      document.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Network Reference Model</h3>

<p>The network reference model for the packet pseudowire operating in an
      MPLS network is shown in <a class='info' href='#PKT-PW-NR'>Figure&nbsp;1</a>. This is an
      extension of Figure 3 "Pre-processing within the PWE3 Network Reference
      Model" from <a class='info' href='#RFC3985'>[RFC3985]<span> (</span><span class='info'>Bryant, S. and P. Pate, &ldquo;Pseudo Wire Emulation Edge-to-Edge (PWE3) Architecture,&rdquo; March&nbsp;2005.</span><span>)</span></a>.
</p>
<p><br /><hr class="insert" />
<a name="PKT-PW-NR"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
               PW                            PW
            End Service                   End Service
                |                            |
                |&lt;------- Pseudowire -------&gt;|
                |                            |
                |          Server            |
                |     |&lt;- PSN Tunnel -&gt;|     |
                |     V                V     |
-------   +-----+-----+                +-----+-----+   -------
       )  |     |     |                |     |     |  (
client  ) | MPLS| PE1 |      PW1       | PE2 | MPLS| ( Client
MPLS PSN )+ LSR1+............................+ LSR2+( MPLS PSN
        ) |     |     |                |     |     | (
       )  |     |     |================|     |     |  (
-------   +-----+-----+                +-----+-----+   --------
                ^                            ^
                |                            |
                |                            |
                |&lt;---- Emulated Service-----&gt;|
                |                            |
         Virtual physical             Virtual physical
            termination                  termination

</pre></div>
<p>MPLS Pseudowire Network Reference Model
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>In this model LSRs, LSR1 and LSR2, are part of the client MPLS packet
      switched network (PSN). The PEs, PE1 and PE2 are part of the server PSN,
      that is to be used to provide connectivity between the client LSRs. The
      attachment circuit that is used to connect the MPLS LSRs to the PEs is a
      virtual interface within the equipment. A packet pseudowire is used to
      provide connectivity between these virtual interfaces. This packet
      pseudowire is used to transport all of the required layer 2 and layer 3
      between protocols between LSR1 and LSR2.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Forwarding Model</h3>

<p>The packet PW forwarding model is illustrated in <a class='info' href='#fwd-model'>Figure&nbsp;2</a>. The forwarding operation can be likened to a
      virtual private network (VPN), in which a forwarding decision is first
      taken at the client layer, an encapsulation is applied and then a second
      forwarding decision is taken at the server layer.
</p>
<p><br /><hr class="insert" />
<a name="fwd-model"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>          +-------------------------------------------------+
          |                                                 |
          |  +--------+                         +--------+  |
          |  |        |   Pkt   +-----+         |        |  |
       ------+        +---------+ PW1 +---------+        +------
          |  | Client |    AC   +-----+         | Server |  |
Client    |  | LSR    |                         | LSR    |  |    Server
Network   |  |        |   Pkt   +-----+         |        |  |    Network
       ------+        +---------+ PW2 +---------+        +------
          |  |        |    AC   +-----+         |        |  |
          |  +--------+                         +--------+  |
          |                                                 |
          +-------------------------------------------------+

</pre></div>
<p>Packet PW Forwarding Model
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>A PW PE comprises two components, the PW processor and an LSR. On
      receipt of a packet from the attachment circuit (AC) the PW undertakes
      any header processing, pushes the CW and pushes the PW label. It then
      passes the packet to an LSR which pushes the label needed to reach the
      egress PE. At the egress PE, the packet typically arrives with the PW
      label at top of stack, the packet is thus directed to the correct PW
      instance by the LSR. The PW instance performs any required
      reconstruction using the CW and passes the packet directly to the
      attachment circuit.
</p>
<p>In the packet PW case an LSR belonging to the client layer is
      embedded within the equipment. This determines the next hop in the
      client layer, pushes the label needed by the client next hop, and passes
      the packet to the correct PW instance indicating the packet protocol
      type. The PW instance pushes CW (which included the protocol
      identifier), pushes the PW label and passes the packet to the server LSR
      for forwarding to the egress PW PE. At the egress PE, the packet
      typically arrives with the PW label at the top of stack, the packet is
      thus directed to the correct PW instance by the server LSR. This removes
      the CW and passes the packet to the client LSR indicating the protocol
      type. The client LSR then forwards the packet based on the top label,
      which is a client layer label.
</p>
<p>Note that although the description above is written in terms of the
      behaviour of an MPLS LSR, the processing would model would be the same
      for IP.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Encapsulation </h3>

<p>The Protocol Stack Reference Model for a packet PW is shown in <a class='info' href='#PStack'>Figure&nbsp;3<span> (</span><span class='info'>PWE3 Protocol Stack Reference Model</span><span>)</span></a> below
</p><br /><hr class="insert" />
<a name="PStack"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   +-------------+                                +-------------+
   |  Client     |                                |  Client     |
   |  network    |                                |  network    |
   |  layer      |         Client Service         |  layer      |
   |  service    |&lt;==============================&gt;|  service    |
   +-------------+            Pseudowire          +-------------+
   |Demultiplexer|&lt;==============================&gt;|Demultiplexer|
   +-------------+                                +-------------+
   |   Server    |                                |   Server    |
   |    PSN      |            PSN Tunnel          |    PSN      |
   |   MPLS      |&lt;==============================&gt;|   MPLS      |
   +-------------+                                +-------------+
   |  Physical   |                                |  Physical   |
   +-----+-------+                                +-----+-------+

</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: PWE3 Protocol Stack Reference Model&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<p>The encapsulation of a packet PW is shown in <a class='info' href='#Encap'>Figure&nbsp;4<span> (</span><span class='info'>Encapsulation of a pseudowire with a pseudowire load balancing label</span><span>)</span></a> below
</p><br /><hr class="insert" />
<a name="Encap"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    +-------------------------------+
    |      MPLS Tunnel label(s)     | n*4 octets (four octets per label)
    +-------------------------------+
    |          PW label             |  4 octets
    +-------------------------------+
    |         Control Word          |  6 octets
    +-------------------------------+
    |            Client             |
    |          Network Layer        |
    |            packet             |  n octets
    |                               |
    +-------------------------------+

</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Encapsulation of a pseudowire with a pseudowire load balancing label&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Packet Pseudowire Control Word</h3>

<p>This section describes the encapsulation of a packet pseudowire. The
      packet pseudowire always uses the control word. The control word
      consists of two components: the preferred pseudowire MPLS control word
      <a class='info' href='#RFC4385'>[RFC4385]<span> (</span><span class='info'>Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN,&rdquo; February&nbsp;2006.</span><span>)</span></a>, immediately followed by a PPP data link
      layer (DLL) protocol number <a class='info' href='#RFC1661'>[RFC1661]<span> (</span><span class='info'>Simpson, W., &ldquo;The Point-to-Point Protocol (PPP),&rdquo; July&nbsp;1994.</span><span>)</span></a>. The 16 bit
      format of the PPP DLL protocol number MUST be used.
</p>
<p>The MPLS pseudowire control word is shown in <a class='info' href='#PKT-PW-CW'>Figure&nbsp;5</a>. Definitions of the fragmentation (FRG),
      length and sequence number fields are to be found in <a class='info' href='#RFC4385'>[RFC4385]<span> (</span><span class='info'>Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN,&rdquo; February&nbsp;2006.</span><span>)</span></a>.
</p>
<p><br /><hr class="insert" />
<a name="PKT-PW-CW"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0| Flags |FRG|  Length   | Sequence Number               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       PPP PID                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div>
<p>Packet Pseudowire Control Word
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>Note that the PPP link control protocol is not used.
</p>
<p>Where the packet service being supported is a network layer service
      such as MPLS or IP, only a best effort packet ordering is normally
      required. The sequence number would therefore normally be set to zero
      (no PW sequence number processing). 
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Status Indication</h3>

<p>A pseudowire status indicating a fault can be considered equivalent
      to interface down and SHOULD be passed across the virtual interface to
      the local LSR. This improves scaling in PE with large numbers of
      c-resident LSRs and with LSRs that have large numbers of interfaces
      mapped to pseudowires.
</p>
<p>The mechanism described for the mapping of pseudowire status to the
      virtual interface state that are described in <a class='info' href='#RFC4447'>[RFC4447]<span> (</span><span class='info'>Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP),&rdquo; April&nbsp;2006.</span><span>)</span></a> and in section 10 of <a class='info' href='#I-D.ietf-pwe3-segmented-pw'>[I&#8209;D.ietf&#8209;pwe3&#8209;segmented&#8209;pw]<span> (</span><span class='info'>Martini, L., Nadeau, T., Metz, C., Bocci, M., Aissaoui, M., Balus, F., and M. Duckett, &ldquo;Segmented Pseudowire,&rdquo; April&nbsp;2010.</span><span>)</span></a> apply to the packet
      pseudowire. Pseudowire status messages indicating pseudowire or remote
      virtual interface faults MUST be mapped to a fault indication on the
      local virtual interface.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Setting the load balance label</h3>

<p>The client service may wish the packet PW to take advantage of any
      Equal Cost Multi-Path (ECMP) support in the server layer. In this a load
      balance label as described in <a class='info' href='#I-D.ietf-pwe3-fat-pw'>[I&#8209;D.ietf&#8209;pwe3&#8209;fat&#8209;pw]<span> (</span><span class='info'>Bryant, S., Filsfils, C., Drafz, U., Kompella, V., Regan, J., and S. Amante, &ldquo;Flow Aware Transport of Pseudowires over an MPLS PSN,&rdquo; January&nbsp;2010.</span><span>)</span></a> may be included in the MPLS label
      stack. Where the client service is MPLS it would be appropriate to copy
      the client layer, bottom of stack MPLS label into the load balance
      label. Where the client layer is IP the load balance label would
      typically be calculated by hashing on the source and destination
      addresses, the protocol ID and higher-layer flow-dependent fields such
      as TCP/UDP ports, L2TPv3 Session ID&rsquo;s etc. 
</p>
<p>The exact specification of the method of selecting an appropriate
      load balance label value is outside the scope of this document.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Client Network Layer Model</h3>

<p>The packet PW appears as a single point to point link to the client
      layer. Network Layer adjacency formation and maintenance between the
      client equipments will the follow normal practice needed to support the
      required relationship in the client layer. The assignment of metrics for
      this point to point link is a matter for the client layer. In a hop by
      hop routing network the metrics would normally be assigned by
      appropriate configuration of the embedded client network layer equipment
      (e.g. the embedded client LSR). Where the client was using the packet PW
      as part of a traffic engineered path, it is up to the operator of the
      client network to ensure that the server layer operator provides the
      necessary service layer agreement.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Congestion Considerations </h3>

<p>This pseudowire is being used to carry MPLS and its associated
      support protocols over an MPLS network. There are no congestion
      considerations beyond those that ordinarily apply to an MPLS
      network.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p>The packet pseudowire provides no means of protecting the contents or
      delivery of the pseudowire packets on behalf of the client packet
      service. The packet pseudowire may, however, leverage security
      mechanisms provided by the MPLS Tunnel Layer. A more detailed discussion
      of pseudowire security is given in <a class='info' href='#RFC3985'>[RFC3985]<span> (</span><span class='info'>Bryant, S. and P. Pate, &ldquo;Pseudo Wire Emulation Edge-to-Edge (PWE3) Architecture,&rdquo; March&nbsp;2005.</span><span>)</span></a>, <a class='info' href='#RFC4447'>[RFC4447]<span> (</span><span class='info'>Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP),&rdquo; April&nbsp;2006.</span><span>)</span></a> and <a class='info' href='#RFC3916'>[RFC3916]<span> (</span><span class='info'>Xiao, X., McPherson, D., and P. Pate, &ldquo;Requirements for Pseudo-Wire Emulation Edge-to-Edge (PWE3),&rdquo; September&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
IANA Considerations </h3>

<p>IANA are requested to allocate a new pseudowire type for packet
      pseudowire in the MPLS Pseudowire Types Registry. The next available
      value is requested.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC1661">[RFC1661]</a></td>
<td class="author-text"><a href="mailto:Bill.Simpson@um.cc.umich.edu">Simpson, W.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1661">The Point-to-Point Protocol (PPP)</a>,&rdquo; STD&nbsp;51, RFC&nbsp;1661, July&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1661.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4385">[RFC4385]</a></td>
<td class="author-text">Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;<a href="http://tools.ietf.org/html/rfc4385">Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN</a>,&rdquo; RFC&nbsp;4385, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4385.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4447">[RFC4447]</a></td>
<td class="author-text">Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;<a href="http://tools.ietf.org/html/rfc4447">Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)</a>,&rdquo; RFC&nbsp;4447, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4447.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-pwe3-fat-pw">[I-D.ietf-pwe3-fat-pw]</a></td>
<td class="author-text">Bryant, S., Filsfils, C., Drafz, U., Kompella, V., Regan, J., and S. Amante, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pwe3-fat-pw-03.txt">Flow Aware Transport of Pseudowires over an MPLS PSN</a>,&rdquo; draft-ietf-pwe3-fat-pw-03 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-pwe3-fat-pw-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-pwe3-segmented-pw">[I-D.ietf-pwe3-segmented-pw]</a></td>
<td class="author-text">Martini, L., Nadeau, T., Metz, C., Bocci, M., Aissaoui, M., Balus, F., and M. Duckett, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pwe3-segmented-pw-14.txt">Segmented Pseudowire</a>,&rdquo; draft-ietf-pwe3-segmented-pw-14 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-pwe3-segmented-pw-14.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3916">[RFC3916]</a></td>
<td class="author-text">Xiao, X., McPherson, D., and P. Pate, &ldquo;<a href="http://tools.ietf.org/html/rfc3916">Requirements for Pseudo-Wire Emulation Edge-to-Edge (PWE3)</a>,&rdquo; RFC&nbsp;3916, September&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3916.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3985">[RFC3985]</a></td>
<td class="author-text">Bryant, S. and P. Pate, &ldquo;<a href="http://tools.ietf.org/html/rfc3985">Pseudo Wire Emulation Edge-to-Edge (PWE3) Architecture</a>,&rdquo; RFC&nbsp;3985, March&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3985.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5317">[RFC5317]</a></td>
<td class="author-text">Bryant, S. and L. Andersson, &ldquo;<a href="http://tools.ietf.org/html/rfc5317">Joint Working Team (JWT) Report on MPLS Architectural Considerations for a Transport Profile</a>,&rdquo; RFC&nbsp;5317, February&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5317.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc5317.pdf">PDF</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stewart Bryant (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">250, Longwater, Green Park,</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reading, Berks  RG2 6GB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:stbryant@cisco.com">stbryant@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sami Boutros</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3750 Cisco Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sboutros@cisco.com">sboutros@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Luca Martini</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">9155 East Nichols Avenue, Suite 400</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Englewood, CO  80112</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lmartini@cisco.com">lmartini@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Siva Sivabalan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2000 Innovation Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kanata, Ontario  K2K 3EB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Canada</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:msiva@cisco.com">msiva@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">George Swallow</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1414 Massachusetts Ave</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Boxborough, MA  01719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:swallow@cisco.com">swallow@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">David Ward</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3750 Cisco Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:wardd@cisco.com">wardd@cisco.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andy Malis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Verizon Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">117 West St.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Waltham, MA  02451</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:andrew.g.malis@verizon.com">andrew.g.malis@verizon.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href=""></a></td></tr>
</table>
</body></html>
