<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>MPLS-TE Fast Reroute Resource Classification </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Problem Statement">
<link href="#rfc.section.3" rel="Chapter" title="3 TE FRR Resource Class Overview">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Setting Default Behavior">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Backwards Compatibility with Legacy PLR">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Backwards Compatibility with Legacy Ingress">
<link href="#rfc.section.4" rel="Chapter" title="4 TE FRR Resource Class Protocol Extensions">
<link href="#rfc.section.5" rel="Chapter" title="5 IGP Extensions">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 OSPF Node Reliability sub-TLV">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 OSPF Link Reliability sub-TLV">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 IS-IS Node Reliability TLV">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 IS-IS Link Reliability TLV">
<link href="#rfc.section.5.5" rel="Chapter" title="5.5 Shared Risk Node Group">
<link href="#rfc.section.5.6" rel="Chapter" title="5.6 Extended Shared Risk Link Group">
<link href="#rfc.section.6" rel="Chapter" title="6 RSVP-TE Extensions">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Resource Attribute Bit Mask">
<link href="#rfc.section.7" rel="Chapter" title="7 Protocol Actions">
<link href="#rfc.section.8" rel="Chapter" title="8 To Be Completed">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 OSPF">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 IS-IS">
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 RSVP-TE">
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="12 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document describes simple and backward compatible extensions to Fast-Reroute (FRR) MPLS Traffic Engineering (TE).  The purpose of these extensions include the following. These extensions provide a classification of SRLG to support LSP with differing protection requirements.  These extensions allow highly reliable nodes or links, typically resources with redundancy at a lower layer, to be identified to allow LSP to optionally not consider these resources as potential points of failure." />
  <meta name="description" content="This document describes simple and backward compatible extensions to Fast-Reroute (FRR) MPLS Traffic Engineering (TE).  The purpose of these extensions include the following. These extensions provide a classification of SRLG to support LSP with differing protection requirements.  These extensions allow highly reliable nodes or links, typically resources with redundancy at a lower layer, to be identified to allow LSP to optionally not consider these resources as potential points of failure." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">J. Dong</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">M. Chen</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Huawei Technologies</td>
</tr>
<tr>
<td class="left">Expires: April 27, 2012</td>
<td class="right">C. . Villamizar</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">OCCNC, LLC</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 25, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">MPLS-TE Fast Reroute Resource Classification <br />
  <span class="filename">draft-dong-mpls-frr-resource-class-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes simple and backward compatible extensions to Fast-Reroute (FRR) MPLS Traffic Engineering (TE).  The purpose of these extensions include the following. These extensions provide a classification of SRLG to support LSP with differing protection requirements.  These extensions allow highly reliable nodes or links, typically resources with redundancy at a lower layer, to be identified to allow LSP to optionally not consider these resources as potential points of failure.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 27, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Problem Statement</a>
</li>
<li>3.   <a href="#rfc.section.3">TE FRR Resource Class Overview</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Setting Default Behavior</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Backwards Compatibility with Legacy PLR</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Backwards Compatibility with Legacy Ingress</a>
</li>
<li>4.   <a href="#rfc.section.4">TE FRR Resource Class Protocol Extensions</a>
</li>
<li>5.   <a href="#rfc.section.5">IGP Extensions</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">OSPF Node Reliability sub-TLV</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">OSPF Link Reliability sub-TLV</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">IS-IS Node Reliability TLV</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">IS-IS Link Reliability TLV</a>
</li>
<li>5.5.   <a href="#rfc.section.5.5">Shared Risk Node Group</a>
</li>
<li>5.6.   <a href="#rfc.section.5.6">Extended Shared Risk Link Group</a>
</li>
<li>6.   <a href="#rfc.section.6">RSVP-TE Extensions</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Resource Attribute Bit Mask</a>
</li>
<li>7.   <a href="#rfc.section.7">Protocol Actions</a>
</li>
<li>8.   <a href="#rfc.section.8">To Be Completed</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>9.1.   <a href="#rfc.section.9.1">OSPF</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">IS-IS</a>
</li>
<li>9.3.   <a href="#rfc.section.9.3">RSVP-TE</a>
</li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Acknowledgements</a>
</li>
<li>12.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">MPLS Traffic Engineering (TE) Fast Reroute (FRR) <a href="#RFC4090">[RFC4090]</a> is widely used for protecting MPLS-TE LSPs from local failures. TE FRR implementations today can consistently achieve redirection of traffic from a single resource failure to other local resources in 10s of milliseconds.  TE FRR can therefore provide high availability for service carried on the TE LSP.</p>
<p id="rfc.section.1.p.2">The existing TE FRR defines several protection and switching modes which are designed to apply to a all protected LSP regardless of what kind of availability is required by the service. Protection must accomodate the most strict protection requirements of any service carried, even though protection of low probability failures are not appropriate for other services.  Where this occurs, the result can be greater requirements for network resources and higher network costs.</p>
<p id="rfc.section.1.p.3">This document first describes the flexibility limitations in existing TE FRR that are addressed and then proposes a flexible TE FRR mechanism to address them.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Problem Statement</h1>
<p id="rfc.section.2.p.1">MPLS-TE LSPs may be used to carry services which require different levels of availability. MPLS-TE FRR mechanism defined in [RFC4090] can only provide the same local protection level for LSPs regardless of the availability requirement of the services.</p>
<p id="rfc.section.2.p.2">In some cases network nodes with sufficient internal redundancy mechanisms could be considered sufficiently immune to node failures for most services. Similarly, some links could also be considered sufficiently redundant for most services.  Examples of reliable links are link bundle and multipath links that do not use common media, such as parallel physical links deployed within a provider facility. Thus for most services such nodes and links could be considered sufficiently reliable that they do not need be protected at LSP level.</p>
<p id="rfc.section.2.p.3">A subset of LSP may require extremely high availability.  Commonly cited examples include communications among emergency first responders (police, fire, etc) and application for which loss of connectivity may result in large financial losses (financial services, e-commerce, trading).  These services may require protection against Shared Risk Link Group (SRLG) which would be expected to cause failure in extremely rare circumstances. This same high level of protection is unnecessary for most services.</p>
<p id="rfc.section.2.p.4">In order to provide different levels of local protection for different kinds of services, a more flexible TE FRR mechanism is required.  Resource classes and resource class affinity are proposed to address this.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> TE FRR Resource Class Overview</h1>
<p id="rfc.section.3.p.1">To support different levels of local protection, a classification of node and link reliability is defined.  This information is carried in the TE link state database (TED).  A classification may be associated with a node, a link, or an SRLG.  Extensions are defined for OSPF-TE and ISIS-TE.</p>
<p id="rfc.section.3.p.2">To support a decision at the point of local repair (PLR), an extension is defined for RSVP-TE.  The requirements of a specific LSP is defined in the RSVP-TE PATH message.  The requirements are expressed as changes from a default behavior.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Setting Default Behavior</h1>
<p id="rfc.section.3.1.p.1">Signaling can be reduced by configuring a default behavior at potential PLR.  If the majority of services do not requirement protection from relatively reliable nodes and/or links, setting configured defaults to this behavior allows a small reduction in the size of RSVP-TE PATH messages.</p>
<p id="rfc.section.3.1.p.2">Using a new TLV to define SRLG which are disabled by default can improve backward compatibility with respect to legacy PLR in cases where it is preferred that these legacy PLR ignore these low probability SRLG for all LSP.  Using the SRLG extensions understood by the legacy PLR allows these PLR to consider low probability SRLG for all LSP, with extension affecting only the PLR implementing this specification.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Backwards Compatibility with Legacy PLR</h1>
<p id="rfc.section.3.2.p.1">Legacy PLR will ignore distinctions between relatively reliable nodes or links and low probability SRLG and those which are relatively unreliable.  These PLR may choose protection paths which error on the side of providing more protection for some services than is required.  At worst, this has an impact on network cost, but still would represent a lower cost than if the extensions were unavailable at all nodes.</p>
<p id="rfc.section.3.2.p.2">SRLG can be defined such that legacy PLR either always consider the SRLG or always ignore the SRLG.  Only the PLR implementing this specification will be able to selectively apply classes of SRLG on a per LSP basis.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Backwards Compatibility with Legacy Ingress</h1>
<p id="rfc.section.3.3.p.1">Legacy Ingress will not provide any extensions which allow LSP to be treated differently from the default.  In a brownfield installation the defaults can be set to provide the level of protection that had been available.  Extensions can then be used by LSR implementing this specification to indicate LSP which require some protection, but less than this default, or more protection than this default.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> TE FRR Resource Class Protocol Extensions</h1>
<p id="rfc.section.4.p.1">This document defines the following extensions.  </p>

<ol>
<li>new TLVs in OSPF and IS-IS to provide a means of host or link reliability classification.</li>
<li>new TLVs in OSPF and IS-IS to provide SRLG classification.</li>
<li>a new alternate SRLG TLV for OSPF and IS-IS to allow definition of SRLG that will be ignored by legacy PLR.</li>
<li>an extension to RSVP-TE to allow per LSP deviations from default protection to be specified.</li>
</ol>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> IGP Extensions</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#sect.ospf-nr-tlv" id="sect.ospf-nr-tlv">OSPF Node Reliability sub-TLV</a>
</h1>
<p id="rfc.section.5.1.p.1">The reliability of a node is specified using a Node Reliability sub-TLV of the Node Attribute TLV <a href="#RFC5786">[RFC5786]</a>.  Length of this sub-TLV is variable.  The format is as follows:</p>
<div id="#rfc.figure.1"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              TBD              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Flags      |          Node Classification Bit Map          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Zero or more SRNG                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	    </pre>
<p></p>
<p id="rfc.section.5.1.p.3">The type code is TBA for Node Reliability sub-TLV.</p>
<p id="rfc.section.5.1.p.4">The length field is set to four plus the number of SRNG included time the size of an SRNG.</p>
<p id="rfc.section.5.1.p.5">The Flags field is reserved for future use.</p>
<p id="rfc.section.5.1.p.6">The 3 octet Node Classification Bit Map is a bit map which may be used by operator to specify inclusion of the node in a set of operator defined classifications.</p>
<p id="rfc.section.5.1.p.7">The format of SRNG is common to OSPF and ISIS and is defined in <a href="#sect.SRNG">Section 5.5</a></p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#sect.ospf-lr-tlv" id="sect.ospf-lr-tlv">OSPF Link Reliability sub-TLV</a>
</h1>
<p id="rfc.section.5.2.p.1">The reliability of link is specified using a Link Reliability sub-TLV of the Link TLV <a href="#RFC3630">[RFC3630]</a>. Length of this sub-TLV is variable. The format is as follow:</p>
<div id="#rfc.figure.2"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Flags      |          Link Classification Bit Map          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Zero or more Extended SRLG                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	    </pre>
<p></p>
<p id="rfc.section.5.2.p.3">The Flags field is reserved for future use.</p>
<p id="rfc.section.5.2.p.4">The 3 octet Link Classification Bit Map is a bit map which may be used by operator to specify inclusion of the link in a set of operator defined classifications.</p>
<p id="rfc.section.5.2.p.5">The format of Extended SRLG is common to OSPF and ISIS and is defined in <a href="#sect.SRNG">Section 5.5</a></p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#sect.isis-nr-tlv" id="sect.isis-nr-tlv">IS-IS Node Reliability TLV</a>
</h1>
<p id="rfc.section.5.3.p.1">The reliability of node is specified using a Node Reliability TLV with TLV Type TBA. Length of this TLV is variable. The format is as follows:</p>
<div id="#rfc.figure.3"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              TBD              |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Flags      |          Node Classification Bit Map          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Zero or more SRNG                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	    </pre>
<p></p>
<p id="rfc.section.5.3.p.3">The Flags field is reserved for future use.</p>
<p id="rfc.section.5.3.p.4">The 3 octet Node Classification Bit Map is a bit map which may be used by operator to specify inclusion of the node in a set of operator defined classifications.</p>
<p id="rfc.section.5.3.p.5">The format of SRNG is common to OSPF and ISIS and is defined in <a href="#sect.SRNG">Section 5.5</a></p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> <a href="#sect.isis-lr-tlv" id="sect.isis-lr-tlv">IS-IS Link Reliability TLV</a>
</h1>
<p id="rfc.section.5.4.p.1">The reliability of link is specified using a Link Reliability sub-TLV of the TLV 22 <a href="#RFC5305">[RFC5305]</a>. Length of this sub-TLV is variable. The format is as follow:</p>
<div id="#rfc.figure.4"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Flags      |          Link Classification Bit Map          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Zero or more Extended SRLG                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	    </pre>
<p></p>
<p id="rfc.section.5.4.p.3">The Flags field is reserved for future use.</p>
<p id="rfc.section.5.4.p.4">The 3 octet Link Classification Bit Map is a bit map which may be used by operator to specify inclusion of the link in a set of operator defined classifications.</p>
<p id="rfc.section.5.4.p.5">The format of Extended SRLG is common to OSPF and ISIS and is defined in <a href="#sect.SRNG">Section 5.5</a></p>
<h1 id="rfc.section.5.5">
<a href="#rfc.section.5.5">5.5.</a> <a href="#sect.SRNG" id="sect.SRNG">Shared Risk Node Group</a>
</h1>
<p id="rfc.section.5.5.p.1">The Shared Risk Node Group (SRNG) is carried within either the OSPF Node Reliability sub-TLV (see <a href="#sect.ospf-nr-tlv">Section 5.1</a>) or the IS-IS Node Reliability TLV (see <a href="#sect.isis-nr-tlv">Section 5.3</a>).  The SRNG is 8 bytes. The format is as follow:</p>
<div id="#rfc.figure.5"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               Shared Risk Node Group Number                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Flags      |         SRNG Classification Bit Map           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	    </pre>
<p></p>
<p id="rfc.section.5.5.p.3">The Shared Risk Node Group Number (SRLG) is a 32 bit number used to specify the inclusion of the node within a set of nodes which share a common resource that therefore can be expected to fail simultaneously if that resource becomes unavailable.  The SRLG is a operator assigned number which identified the resource.</p>
<p id="rfc.section.5.5.p.4">The Flags field is reserved for future use.</p>
<p id="rfc.section.5.5.p.5">The 3 octet SRNG Classification Bit Map is a bit map which may be used by operator to specify inclusion of the SRNG in a set of operator defined classifications.</p>
<h1 id="rfc.section.5.6">
<a href="#rfc.section.5.6">5.6.</a> <a href="#sect.SRLG" id="sect.SRLG">Extended Shared Risk Link Group</a>
</h1>
<p id="rfc.section.5.6.p.1">The Extended Shared Risk Link Group (ESRLG) is carried within either the OSPF Link Reliability sub-TLV (see <a href="#sect.ospf-lr-tlv">Section 5.2</a>) or the IS-IS Link Reliability TLV (see <a href="#sect.isis-lr-tlv">Section 5.4</a>).  The ESRLG is 8 bytes. The format is as follow:</p>
<div id="#rfc.figure.6"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Extended Shared Risk Link Group Number              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Flags      |         SRLG Classification Bit Map           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	    </pre>
<p></p>
<p id="rfc.section.5.6.p.3">The Extended Shared Risk Link Group Number (ESRLG) is a 32 bit number used to specify the inclusion of the link within a set of links which share a common resource that therefore can be expected to fail simultaneously if that resource becomes unavailable.  The SRLG is a operator assigned number which identified the resource.</p>
<p id="rfc.section.5.6.p.4">The Flags field is reserved for future use.</p>
<p id="rfc.section.5.6.p.5">The 3 octet SRLG Classification Bit Map is a bit map which may be used by operator to specify inclusion of the SRLG in a set of operator defined classifications.</p>
<p id="rfc.section.5.6.p.6">The Extended Shared Risk Link Group Number (ESRLG) may be given the same number as an advertised SRLG when the desired behavior for legacy PLR is to have the legacy PLR always protect against failure of the ESRLG.  If the desired behavior for legacy PLR is to have the legacy PLR never protect against failure of the ESRLG, then the ESRLG number must not conflict with an SRLG number.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> RSVP-TE Extensions</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Resource Attribute Bit Mask</h1>
<p id="rfc.section.6.1.p.1">The Resource Attribute Bit Mask is defined in LSP_ATRTRIBUTE Object.  The LSP_ATRTRIBUTE is defined in <a href="#RFC3209">[RFC3209]</a> and updated in <a href="#RFC5420">[RFC5420]</a>. The format of the Resource Attribute Bit Mask is as follows:</p>
<div id="#rfc.figure.7"></div>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | OP| Ap| Resv  |         Resource Attribute Bit Mask           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	  </pre>
<p></p>
<p id="rfc.section.6.1.p.3">The 2 bit Operation field (OP) specifies one of the following operations.  The following values are defined for the Operation field.  </p>

<dl>
<dt>00</dt>
<dd style="margin-left: 4">Include if any set</dd>
<dt>01</dt>
<dd style="margin-left: 4">Include if all set</dd>
<dt>10</dt>
<dd style="margin-left: 4">Exclude if any set</dd>
<dt>11</dt>
<dd style="margin-left: 4">Exclude if all set</dd>
</dl>

<p> </p>
<p id="rfc.section.6.1.p.4">The 2 bit Apply field (Ap) is a bit map which indicates which context the bit mask is applied to.  The following values are defined for the Apply field.  </p>

<dl>
<dt>00</dt>
<dd style="margin-left: 4">Applu the mask to Node Reliability values</dd>
<dt>01</dt>
<dd style="margin-left: 4">Applu the mask to Link Reliability values</dd>
<dt>10</dt>
<dd style="margin-left: 4">Applu the mask to SRNG Reliability values</dd>
<dt>11</dt>
<dd style="margin-left: 4">Applu the mask to ESRLG Reliability values</dd>
</dl>

<p> </p>
<p id="rfc.section.6.1.p.5">The 3 octet Resource Attribute Bit Mask is a bit mask applied to the 2 octet resource classifications specified for nodes, links, SRNG, or ESRLG.  The Apply field indicates which type of resource classification to apply the mask to.  The Operation field indicates what action to take as a result of the mask operation.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Protocol Actions</h1>
<p id="rfc.section.7.p.1">The Node Reliability (see ) and Link Reliability (see ) are assigned to nodes and links according to configuration on the LSR advertising the containing TLV.  The Resource Attribute Bit Mask is assigned according to configuration on the ingress LSR for a given LSP.</p>
<p id="rfc.section.7.p.2">The action taken at a PLR for a given LSP are as follows.</p>
<p id="rfc.section.7.p.3">If no protection is required, as indicated by the "protection desired" bit in the RSVP-TE Flags SESSION_ATTRIBUTE <a href="#RFC3209">[RFC3209]</a> not being set, then no protection path is created at a potential PLR.  This behavior is unchanged.</p>
<p id="rfc.section.7.p.4">If link disjoint protection if required, as indicated by the "protection desired" bit set and the "Node protection desired" bit not set <a href="#RFC4090">[RFC4090]</a>, then the protection path must be disjoint with respect to all links and SRLG, except those ESRLG added or links or SRLG removed as a result of applying the Resource Attribute Bit Masks for the LSP.</p>
<p id="rfc.section.7.p.5">If node disjoint protection if required, as indicated by the "protection desired" bit set and the "Node protection desired" bit set, then the protection path must be disjoint with respect to all nodes, links, and SRLG, except SRNG or ESRLG added or nodes, links or SRLG removed as a result of applying the Resource Attribute Bit Masks for the LSP.</p>
<p id="rfc.section.7.p.6">The action taken in the absense of any Resource Attribute Bit Masks in all cases is identical to the action that would be taken by a legacy PLR.  Inclusion of one or more Resource Attribute Bit Mask modifies this behavior.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> To Be Completed</h1>
<p id="rfc.section.8.p.1">An LSP may have many Resource Attribute Bit Masks.  It may be more efficient to define a container for the Resource Attribute Bit Masks and include that container in the LSP_ATTRIBUTES.  Whether to use such a container rather than include multiple Resource Attribute Bit Masks directly in the LSP_ATTRIBUTES is up for discussion.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> OSPF</h1>
<p id="rfc.section.9.1.p.1">The registry for the Node Attribute TLV is defined in <a href="#RFC5786">[RFC5786]</a>. IANA is requested to assign a new sub-TLV codepoint for the Node Reliability sub-TLV carried in the Node Attribute TLV.</p>
<div id="#rfc.figure.8"></div>
<pre>Value     Sub-TLV                    Reference
-----     -------                    ---------
 TBA      Node Reliability sub-TLV   this document</pre>
<p></p>
<p id="rfc.section.9.1.p.3">The registry for the Link TLV is defined in <a href="#RFC3630">[RFC3630]</a>. IANA is requested to assign a new sub-TLV codepoint for the Link Reliability sub-TLV carried in the Link TLV.</p>
<div id="#rfc.figure.9"></div>
<pre>Value     Sub-TLV                    Reference
-----     -------                    ---------
 TBA      Link Reliability sub-TLV   this document</pre>
<p></p>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> IS-IS</h1>
<p id="rfc.section.9.2.p.1">IANA is requested to assign a new TLV codepoint for Node Reliability TLV.</p>
<div id="#rfc.figure.10"></div>
<pre>Type     TLV                         Reference
-----    -------                     ---------
 TBA     Node Reliability sub-TLV    this document</pre>
<p></p>
<p id="rfc.section.9.2.p.3">The registry for TLV 22 is defined in <a href="#RFC5305">[RFC5305]</a>. IANA is requested to assign a new sub-TLV codepoint for the Link Reliability sub-TLV which is carried in TLV 22.</p>
<div id="#rfc.figure.11"></div>
<pre>Value     Sub-TLV                    Reference
-----     -------                    ---------
 TBA      Link Reliability sub-TLV   this document</pre>
<p></p>
<h1 id="rfc.section.9.3">
<a href="#rfc.section.9.3">9.3.</a> RSVP-TE</h1>
<p id="rfc.section.9.3.p.1">IANA is requested to assign a new type codepoint for the "Resource Attribute Bit Mask" TLV in the Attribute TLV Space. It is carried in the LSP_ATTRIBUTES object (class = 197, C-Type = 1).</p>
<div id="#rfc.figure.12"></div>
<pre>    Type:  TBA
    Name:  Resource Attribute Bit Mask
    Allowed on LSP_ATTRIBUTES:  Yes
    Allowed on LSP_REQUIRED_ATTRIBUTES:  No</pre>
<p></p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.10.p.1">The function described in this document does not create any new security issues for the OSPF and IS-IS protocols and does not introduce any new security issues above those identified in [RFC3209] and [RFC4090].</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.11.p.1">TBD</p>
<h1 id="rfc.references">
<a href="#rfc.references">12.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3209">[RFC3209]</b></td>
<td class="top">
<a>Awduche, D.</a>, <a>Berger, L.</a>, <a>Gan, D.</a>, <a>Li, T.</a>, <a>Srinivasan, V.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc3209">RSVP-TE: Extensions to RSVP for LSP Tunnels</a>", RFC 3209, December 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3630">[RFC3630]</b></td>
<td class="top">
<a>Katz, D.</a>, <a>Kompella, K.</a> and <a>D. Yeung</a>, "<a href="http://tools.ietf.org/html/rfc3630">Traffic Engineering (TE) Extensions to OSPF Version 2</a>", RFC 3630, September 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4090">[RFC4090]</b></td>
<td class="top">
<a>Pan, P.</a>, <a>Swallow, G.</a> and <a>A. Atlas</a>, "<a href="http://tools.ietf.org/html/rfc4090">Fast Reroute Extensions to RSVP-TE for LSP Tunnels</a>", RFC 4090, May 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5305">[RFC5305]</b></td>
<td class="top">
<a>Li, T.</a> and <a>H. Smit</a>, "<a href="http://tools.ietf.org/html/rfc5305">IS-IS Extensions for Traffic Engineering</a>", RFC 5305, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5420">[RFC5420]</b></td>
<td class="top">
<a>Farrel, A.</a>, <a>Papadimitriou, D.</a>, <a>Vasseur, JP.</a> and <a>A. Ayyangarps</a>, "<a href="http://tools.ietf.org/html/rfc5420">Encoding of Attributes for MPLS LSP Establishment Using Resource Reservation Protocol Traffic Engineering (RSVP-TE)</a>", RFC 5420, February 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5786">[RFC5786]</b></td>
<td class="top">
<a>Aggarwal, R.</a> and <a>K. Kompella</a>, "<a href="http://tools.ietf.org/html/rfc5786">Advertising a Router's Local Addresses in OSPF Traffic Engineering (TE) Extensions</a>", RFC 5786, March 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jie Dong</span> 
	  <span class="n hidden">
		<span class="family-name">Dong</span>
	  </span>
	</span>
	<span class="org vcardline">Huawei Technologies</span>
	<span class="adr">
	  <span>Huawei Building, No.3 Xinxi Rd</span>

	  <span class="vcardline">
		<span class="locality">Beijing</span>,  
		<span class="region"></span>
		<span class="code">100085</span>
	  </span>
	  <span class="country-name vcardline">China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jie.dong@huawei.com">jie.dong@huawei.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mach Chen</span> 
	  <span class="n hidden">
		<span class="family-name">Chen</span>
	  </span>
	</span>
	<span class="org vcardline">Huawei Technologies</span>
	<span class="adr">
	  <span>Huawei Building, No.3 Xinxi Rd</span>

	  <span class="vcardline">
		<span class="locality">Beijing</span>,  
		<span class="region"></span>
		<span class="code">100085</span>
	  </span>
	  <span class="country-name vcardline">China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mach.chen@huawei.com">mach.chen@huawei.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Curtis Villamizar</span> 
	  <span class="n hidden">
		<span class="family-name">Villamizar</span>
	  </span>
	</span>
	<span class="org vcardline">OCCNC, LLC</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:curtis@occnc.com">curtis@occnc.com</a></span>

  </address>
</div>

</body>
</html>