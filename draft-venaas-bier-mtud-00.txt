



Network Working Group                                          S. Venaas
Internet-Draft                                              M. Sivakumar
Intended status: Experimental                               IJ. Wijnands
Expires: September 6, 2018                                   L. Ginsberg
                                                     Cisco Systems, Inc.
                                                           March 5, 2018


                           BIER MTU Discovery
                       draft-venaas-bier-mtud-00

Abstract

   This document defines an IGP based mechanism for discovering the MTU
   of a BIER sub-domain.  This document defines extensions to OSPF and
   IS-IS, but other protocols could potentially be extended.  MTU
   discovery is usually done for a given path, while this document
   defines it for a sub-domain.  This allows the computed MTU to be
   independent of the set of receivers.  Also, the MTU is independent of
   rerouting events within the sub-domain.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 6, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



Venaas, et al.          Expires September 6, 2018               [Page 1]

Internet-Draft             BIER MTU Discovery                 March 2018


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   3
   3.  IS-IS BIER MTU Sub-sub-TLV  . . . . . . . . . . . . . . . . .   3
   4.  OSPF BIER MTU Sub-TLV . . . . . . . . . . . . . . . . . . . .   4
   5.  IANA considerations . . . . . . . . . . . . . . . . . . . . .   4
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   This document defines an IGP based mechanism for discovering the MTU
   of a BIER sub-domain.  The discovered MTU indicates the largest
   possible BIER payload, such as an IP packet, that can be sent across
   any link in a BIER sub-domain.  This is different from
   [I-D.ietf-bier-path-mtu-discovery] which performs Path MTU Discovery
   (PMTUD) for a set of receivers.  PMTUD is based on probing, and when
   there are routing changes, e.g., a link going down, the actual MTU
   for a path may become less than was previously discovered, and there
   will be some delay until the next probe is performed.  Also, the set
   of receivers for a flow may change at any time, which may cause the
   MTU to change.  This document instead discovers a BIER sub-domain
   MTU, which is independent of paths and receivers within the sub-
   domain.

   For convenience we will refer to an interface on a router as a BIER
   interface if the router has a BIER neighbor on the interface.  That
   is, there is a directly connected router on that interface that is
   announcing a BIER prefix.  We say that it is a BIER interface in a
   given sub-domain if the router itself announces a prefix tagged with
   the sub-domain, and there is BIER neighbor on the interface also
   announcing a prefix tagged with the sub-domain.

   In order to allow MTU discovery in a BIER sub-domain, the procedure
   is as follows.  Every BIER router, for each sub-domain with at least
   one local BIER interface in the sub-domain, per the above definition
   of a BIER interface, determines the largest payload that can be sent
   BIER encapsulated out of any of its BIER interfaces in the sub-
   domain.  That is, for each local BIER interface in the sub-domain, it
   needs to determine the size of the largest BIER encapsulated payload



Venaas, et al.          Expires September 6, 2018               [Page 2]

Internet-Draft             BIER MTU Discovery                 March 2018


   that can be sent out of that interface.  We define the local sub-
   domain MTU of a router to be the minimum of the per BIER interface
   maximum payload size.

   A BIER router announces a BIER prefix in either IS-IS or OSPF as
   specified in [I-D.ietf-bier-isis-extensions] and
   [I-D.ietf-bier-ospf-bier-extensions].  They both define a BIER Sub-
   TLV to be included with the prefix.  There is one BIER Sub-TLV
   included for each sub-domain.  This document defines how a router
   includes its local sub-domain MTU in each of the BIER Sub-TLVs it
   advertizes.

   A router can discover the MTU of a BIER sub-domain by identifying all
   the prefixes that have a BIER Sub-TLV for the sub-domain.  It then
   computes the minimum of the advertised MTU values for that sub-
   domain.  This includes its local sub-domain MTU.  This allows all the
   routers in the sub-domain to discover the same sub-domain wide MTU.

   Note that a router should announce a new local MTU for a sub-domain
   immediately if the value becomes smaller than what it currently
   announces.  This would happen if the MTU of an interface is
   configured to a smaller value, or the first BIER neighbor for a sub-
   domain is detected on an interface, and the MTU of the interface is
   less than all the other local BIER interfaces in the sub-domain.
   However, if BIER neighbors go away, or if an interface goes down, so
   that the local MTU becomes larger, a router SHOULD NOT immediately
   announce the larger value.  A router MAY after some delay announce
   the new larger MTU.  The intention is that dynamic events such as a
   quick link flap should not cause the announced MTU to be increased.

2.  Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  IS-IS BIER MTU Sub-sub-TLV

   A router uses the BIER MTU Sub-sub-TLV to announce the minimum BIER
   MTU of all its BIER enabled interfaces.  The Sub-sub-TLV MUST be
   ignored if it is included multiple times.








Venaas, et al.          Expires September 6, 2018               [Page 3]

Internet-Draft             BIER MTU Discovery                 March 2018


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      Type     |     Length    |             MTU               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Type:   TBD

   Length:   2

   MTU:   MTU in octets

4.  OSPF BIER MTU Sub-TLV

   A router uses the BIER MTU Sub-TLV to annonce the minimum BIER MTU of
   all its BIER enabled interfaces.  It is a Sub-TLV of the BIER Sub-
   TLV, and SHOULD be included exactly once within each of the
   advertised BIER Sub-TLVs.  The Sub-TLV MUST be ignored if it is
   included multiple times.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Type              |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             MTU               |           Reserved            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Type:   TBD2

   Length:   4

   MTU:   MTU in octets

5.  IANA considerations

   An allocation from the "sub-sub-TLVs for BIER Info sub-TLV" registry
   as defined in [I-D.ietf-bier-isis-extensions] is requested for the
   IS-IS BIER MTU Sub-sub-TLV.  Please replace the string TBD in this
   document with the appropriate value.

   An allocation from the "OSPF Extended Prefix sub-TLV" registry as
   defined in [RFC7684] is requested for the OSPF BIER MTU Sub-TLV.
   Please replace the string TBD2 in this document with the appropriate
   value.




Venaas, et al.          Expires September 6, 2018               [Page 4]

Internet-Draft             BIER MTU Discovery                 March 2018


6.  References

6.1.  Normative References

   [I-D.ietf-bier-isis-extensions]
              Ginsberg, L., Przygienda, T., Aldrin, S., and Z. Zhang,
              "BIER support via ISIS", draft-ietf-bier-isis-
              extensions-09 (work in progress), February 2018.

   [I-D.ietf-bier-ospf-bier-extensions]
              Psenak, P., Kumar, N., Wijnands, I., Dolganow, A.,
              Przygienda, T., Zhang, Z., and S. Aldrin, "OSPF Extensions
              for BIER", draft-ietf-bier-ospf-bier-extensions-15 (work
              in progress), February 2018.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7684]  Psenak, P., Gredler, H., Shakir, R., Henderickx, W.,
              Tantsura, J., and A. Lindem, "OSPFv2 Prefix/Link Attribute
              Advertisement", RFC 7684, DOI 10.17487/RFC7684, November
              2015, <https://www.rfc-editor.org/info/rfc7684>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

6.2.  Informative References

   [I-D.ietf-bier-path-mtu-discovery]
              Mirsky, G., Przygienda, T., and A. Dolganow, "Path Maximum
              Transmission Unit Discovery (PMTUD) for Bit Index Explicit
              Replication (BIER) Layer", draft-ietf-bier-path-mtu-
              discovery-03 (work in progress), January 2018.

Authors' Addresses

   Stig Venaas
   Cisco Systems, Inc.
   Tasman Drive
   San Jose  CA 95134
   USA

   Email: stig@cisco.com





Venaas, et al.          Expires September 6, 2018               [Page 5]

Internet-Draft             BIER MTU Discovery                 March 2018


   Mahesh Sivakumar
   Cisco Systems, Inc.
   Tasman Drive
   San Jose  CA 95134
   USA

   Email: masivaku@cisco.com


   IJsbrand Wijnands
   Cisco Systems, Inc.
   De kleetlaan 6a
   Diegem  1831
   Belgium

   Email: ice@cisco.com


   Les Ginsberg
   Cisco Systems, Inc.
   Tasman Drive
   San Jose  CA 95134
   USA

   Email: ginsberg@cisco.com


























Venaas, et al.          Expires September 6, 2018               [Page 6]
