


MMUSIC Working Group                                         C. Holmberg
Internet-Draft                                                  Ericsson
Updates: 3264 (if approved)                                H. Alvestrand
Intended status: Standards Track                                  Google
Expires: March 9, 2015                                       C. Jennings
                                                                   Cisco
                                                       September 5, 2014


 Negotiating Media Multiplexing Using the Session Description Protocol
                                 (SDP)
            draft-ietf-mmusic-sdp-bundle-negotiation-09.txt

Abstract

   This specification defines a new SDP Grouping Framework extension,
   'BUNDLE'.  The BUNDLE extension can be used with the Session
   Description Protocol (SDP) Offer/Answer mechanism to negotiate the
   usage of a single 5-tuple for sending and receiving media, referred
   to as bundled media, associated with multiple SDP media descriptions
   ("m=" lines).  This specification also defines a new SDP attribute,
   'bundle-only', which can be used to request that specific media is
   only used if bundled.

   This specification also updates sections 5.1, 8.1 and 8.2 of RFC
   3264.  The update allows an answerer to assign a non-zero port value
   to an "m=" line in an answer, even if the "m=" line in the associated
   offer contained a zero port value.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 9, 2015.






Holmberg, et al.          Expires March 9, 2015                 [Page 1]

Internet-Draft                Bundled media               September 2014


Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   4
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   5
   3.  Conventions . . . . . . . . . . . . . . . . . . . . . . . . .   6
   4.  Applicability Statement . . . . . . . . . . . . . . . . . . .   6
   5.  SDP Grouping Framework BUNDLE Extension . . . . . . . . . . .   6
     5.1.  General . . . . . . . . . . . . . . . . . . . . . . . . .   6
   6.  SDP 'bundle-only' Attribute . . . . . . . . . . . . . . . . .   7
     6.1.  General . . . . . . . . . . . . . . . . . . . . . . . . .   7
     6.2.  Syntax  . . . . . . . . . . . . . . . . . . . . . . . . .   7
   7.  SDP Information Considerations  . . . . . . . . . . . . . . .   8
     7.1.  General . . . . . . . . . . . . . . . . . . . . . . . . .   8
     7.2.  Connection Data (c=)  . . . . . . . . . . . . . . . . . .   8
     7.3.  Bandwidth (b=)  . . . . . . . . . . . . . . . . . . . . .   8
     7.4.  Attributes (a=) . . . . . . . . . . . . . . . . . . . . .   8
   8.  SDP Offer/Answer Procedures . . . . . . . . . . . . . . . . .   8
     8.1.  General . . . . . . . . . . . . . . . . . . . . . . . . .   8
     8.2.  Generating the Initial SDP Offer  . . . . . . . . . . . .   9
       8.2.1.  General . . . . . . . . . . . . . . . . . . . . . . .   9
       8.2.2.  Request offerer BUNDLE address selection  . . . . . .  10
     8.3.  Generating the SDP Answer . . . . . . . . . . . . . . . .  10
       8.3.1.  General . . . . . . . . . . . . . . . . . . . . . . .  10
       8.3.2.  Answerer Selection of Offerer Bundle Address  . . . .  11
       8.3.3.  Answerer Selection of Answerer BUNDLE Address . . . .  12
       8.3.4.  Moving A Media Description Out Of A BUNDLE Group  . .  12
       8.3.5.  Rejecting A Media Description In A BUNDLE Group . . .  12
     8.4.  Offerer Processing of the SDP Answer  . . . . . . . . . .  13
       8.4.1.  General . . . . . . . . . . . . . . . . . . . . . . .  13
       8.4.2.  Bundle Address Synchronization (BAS)  . . . . . . . .  13
     8.5.  Modifying the Session . . . . . . . . . . . . . . . . . .  14
       8.5.1.  General . . . . . . . . . . . . . . . . . . . . . . .  14
       8.5.2.  Request new offerer BUNDLE address  . . . . . . . . .  15



Holmberg, et al.          Expires March 9, 2015                 [Page 2]

Internet-Draft                Bundled media               September 2014


       8.5.3.  Adding a media description to a BUNDLE group  . . . .  15
       8.5.4.  Moving A Media Description Out Of A BUNDLE Group  . .  16
       8.5.5.  Disabling A Media Description In A BUNDLE Group . . .  16
   9.  Protocol Identification . . . . . . . . . . . . . . . . . . .  16
     9.1.  General . . . . . . . . . . . . . . . . . . . . . . . . .  16
     9.2.  STUN, DTLS, SRTP  . . . . . . . . . . . . . . . . . . . .  17
   10. RTP Considerations  . . . . . . . . . . . . . . . . . . . . .  17
     10.1.  Single RTP Session . . . . . . . . . . . . . . . . . . .  17
       10.1.1.  General  . . . . . . . . . . . . . . . . . . . . . .  17
       10.1.2.  Payload Type (PT) Value Re-usage . . . . . . . . . .  18
     10.2.  Associating RTP/RTCP Packets With Correct SDP Media
            Description  . . . . . . . . . . . . . . . . . . . . . .  18
     10.3.  RTP/RTCP Multiplexing  . . . . . . . . . . . . . . . . .  19
       10.3.1.  General  . . . . . . . . . . . . . . . . . . . . . .  19
       10.3.2.  SDP Offer/Answer Procedures  . . . . . . . . . . . .  19
   11. ICE Considerations  . . . . . . . . . . . . . . . . . . . . .  21
     11.1.  General  . . . . . . . . . . . . . . . . . . . . . . . .  21
     11.2.  SDP Offer/Answer Procedures  . . . . . . . . . . . . . .  21
       11.2.1.  General  . . . . . . . . . . . . . . . . . . . . . .  21
       11.2.2.  Generating the Initial SDP Offer . . . . . . . . . .  22
       11.2.3.  Generating the SDP Answer  . . . . . . . . . . . . .  22
       11.2.4.  Offerer Processing of the SDP Answer . . . . . . . .  22
       11.2.5.  Modifying the Session  . . . . . . . . . . . . . . .  22
   12. Update to RFC 3264  . . . . . . . . . . . . . . . . . . . . .  22
     12.1.  General  . . . . . . . . . . . . . . . . . . . . . . . .  22
     12.2.  Original text of section 5.1 (2nd paragraph) of RFC 3264  22
     12.3.  New text replacing section 5.1 (2nd paragraph) of RFC
            3264 . . . . . . . . . . . . . . . . . . . . . . . . . .  23
     12.4.  Original text of section 8.2 (2nd paragraph) of RFC 3264  23
     12.5.  New text replacing section 8.2 (2nd paragraph) of RFC
            3264 . . . . . . . . . . . . . . . . . . . . . . . . . .  23
     12.6.  Original text of section 8.4 (6th paragraph) of RFC 3264  23
     12.7.  New text replacing section 8.4 (6th paragraph) of RFC
            3264 . . . . . . . . . . . . . . . . . . . . . . . . . .  24
   13. RTP/RTCP extensions for mid value transport . . . . . . . . .  24
     13.1.  General  . . . . . . . . . . . . . . . . . . . . . . . .  24
     13.2.  RTP MID SDES Item  . . . . . . . . . . . . . . . . . . .  25
     13.3.  RTP MID Header Extension . . . . . . . . . . . . . . . .  25
     13.4.  IANA Considerations  . . . . . . . . . . . . . . . . . .  25
   14. Security Considerations . . . . . . . . . . . . . . . . . . .  26
   15. Examples  . . . . . . . . . . . . . . . . . . . . . . . . . .  26
     15.1.  Example: Bundle Address Selection  . . . . . . . . . . .  26
     15.2.  Example: BUNDLE Extension Rejected . . . . . . . . . . .  28
     15.3.  Example: Offerer Adds A Media Description To A BUNDLE
            Group  . . . . . . . . . . . . . . . . . . . . . . . . .  29
     15.4.  Example: Offerer Moves A Media Description Out Of A
            BUNDLE Group . . . . . . . . . . . . . . . . . . . . . .  31
     15.5.  Example: Offerer Disables A Media Description Within A



Holmberg, et al.          Expires March 9, 2015                 [Page 3]

Internet-Draft                Bundled media               September 2014


            BUNDLE Group . . . . . . . . . . . . . . . . . . . . . .  33
   16. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  35
   17. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  35
   18. Change Log  . . . . . . . . . . . . . . . . . . . . . . . . .  35
   19. References  . . . . . . . . . . . . . . . . . . . . . . . . .  38
     19.1.  Normative References . . . . . . . . . . . . . . . . . .  38
     19.2.  Informative References . . . . . . . . . . . . . . . . .  38
   Appendix A.  Design Considerations  . . . . . . . . . . . . . . .  39
     A.1.  General . . . . . . . . . . . . . . . . . . . . . . . . .  39
     A.2.  UA Interoperability . . . . . . . . . . . . . . . . . . .  40
     A.3.  Usage of port number value zero . . . . . . . . . . . . .  41
     A.4.  B2BUA And Proxy Interoperability  . . . . . . . . . . . .  41
       A.4.1.  Traffic Policing  . . . . . . . . . . . . . . . . . .  42
       A.4.2.  Bandwidth Allocation  . . . . . . . . . . . . . . . .  42
     A.5.  Candidate Gathering . . . . . . . . . . . . . . . . . . .  42
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  43

1.  Introduction

   In the IETF RTCWEB WG, a need to use a single 5-tuple for sending and
   receiving media associated with multiple SDP media descriptions ("m="
   lines) has been identified.  This would e.g. allow the usage of a
   single set of Interactive Connectivity Establishment (ICE) [RFC5245]
   candidates for multiple media descriptions.

   This specification defines a new SDP Grouping Framework [RFC5888]
   extension, 'BUNDLE'.  The BUNDLE extension can be used with the
   Session Description Protocol (SDP) Offer/Answer mechanism [RFC3264]
   to negotiate the usage of a single 5-tuple for sending and receiving
   media, referred to as bundled media, associated with multiple SDP
   media descriptions ("m=").  This specification also defines a new SDP
   attribute, 'bundle-only', which can be used to request that specific
   media is only used if bundled.

   The offerer and answerer [RFC3264] use the BUNDLE extension to
   negotiate the 5-tuples (BUNDLE addresses), one for the offerer
   (offerer BUNDLE address) and one for the answerer (answerer BUNDLE
   address) to be used for the bundled media associated with a BUNDLE
   group.

   Once the offerer and the answerer have negotiated a BUNDLE group, and
   the associated BUNDLE addresses, each endpoint can assign its BUNDLE
   address to each "m=" line within, and use the address to send and
   receive all media associated with, the BUNDLE group.

   NOTE: As defined in RFC 4566 [RFC4566], the semantics of assigning
   the same port value to multiple "m=" lines are undefined, and there
   is no grouping defined by such means.  Instead, an explicit grouping



Holmberg, et al.          Expires March 9, 2015                 [Page 4]

Internet-Draft                Bundled media               September 2014


   mechanism needs to be used to express the intended semantics.  This
   specification provides such an extension.

   This specification also updates sections 5.1, 8.1 and 8.2 of RFC 3264
   [RFC3264].  The update allows an answerer to assign a non-zero port
   value to an "m=" line in an answer, even if the "m=" line in the
   associated offer contained a zero port value.

   SDP bodies can contain multiple BUNDLE groups.  A given BUNDLE
   address MUST only be associated with a single BUNDLE group.

   The procedures in this specification apply independently to a given
   BUNDLE group.

   All Real-time Transport Protocol (RTP) [RFC3550] based media flows
   associated with a single BUNDLE group belong to a single RTP session
   [RFC3550].

   The BUNDLE extension is backward compatible.  Endpoints that do not
   support the extension are expected to generate offers and answers
   without an SDP 'group:BUNDLE' attribute, and are expected to assign a
   unique address to each "m=" line within an offer and answer,
   according to the procedures in [RFC4566] and [RFC3264]

2.  Terminology

   5-tuple: A collection of the following values: source address, source
   port, destination address, destination port and protocol.

   Unique address: An IP address and IP port combination that is
   assigned to only one "m=" line in an offer or answer.

   Shared address: An IP address and IP port combination that is
   assigned to multiple "m=" lines within an offer or answer.

   Offerer suggested BUNDLE mid: The first mid value in a given SDP
   'group:BUNDLE' attribute mid list in an offer.

   Answerer selected BUNDLE mid: The first mid value in a given SDP
   'group:BUNDLE' attribute mid list in an answer.

   Offerer BUNDLE address: Within a given BUNDLE group, an IP address
   and IP port combination used by an offerer to receive all media
   associated with each "m=" line within the BUNDLE group.

   Answerer BUNDLE address: Within a given BUNDLE group, an IP address
   and IP port combination used by an answerer to receive all media
   associated with each "m=" line within the BUNDLE group.



Holmberg, et al.          Expires March 9, 2015                 [Page 5]

Internet-Draft                Bundled media               September 2014


   BUNDLE group: A set of "m=" lines, created using an SDP Offer/Answer
   exchange, for which each endpoint use a single 5-tuple is to send and
   receive media.  Each endpoint uses its BUNDLE address, associated
   with the BUNDLE group, to send and receive the media.

   Bundled "m=" line: An "m=" line, which SDP 'mid' attribute value is
   placed in a SDP 'group:BUNDLE' attribute mid value list in an offer
   or answer.

   Bundle-only "m=" line: A bundled "m=" line, to which an SDP 'bundle-
   only' attribute has been assigned.

   Bundled media: All media associated with a given BUNDLE group.

   Initial offer: The first offer, within an SDP session, in which the
   offerer indicates that it wants to create a given BUNDLE group.

   Subsequent offer: An offer which contains a BUNDLE group that has
   been created as part of a previous SDP Offer/Answer exchange.

3.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119
   [RFC2119].

4.  Applicability Statement

   The mechanism in this specification only applies to the Session
   Description Protocol (SDP) [RFC4566], when used together with the SDP
   Offer/Answer mechanism [RFC3264].

5.  SDP Grouping Framework BUNDLE Extension

5.1.  General

   This section defines a new SDP Grouping Framework extension
   [RFC5888], 'BUNDLE'.  The BUNDLE extension can be used with the
   Session Description Protocol (SDP) Offer/Answer mechanism to
   negotiate the usage of a single 5-tuple for sending and receiving
   media, referred to as bundled media, associated with multiple SDP
   media descriptions ("m=" lines).  Within a successfully created
   BUNDLE group, media described with "m=" lines associated with the
   BUNDLE group will be sent and received using a single 5-tuple.

   The BUNDLE extension is indicated using an SDP 'group' attribute with
   a "BUNDLE" semantics value [RFC5888].  An SDP "mid" attribute is



Holmberg, et al.          Expires March 9, 2015                 [Page 6]

Internet-Draft                Bundled media               September 2014


   assigned to each bundled "m=" line, and the "mid" attribute value is
   listed in the 'group:BUNDLE' attribute mid value list.  Each "m="
   line, which mid value is listed in the mid value list, is associated
   with a given BUNDLE group.

   Any given "m=" line MUST NOT be associated with more than one BUNDLE
   group.

   Section 8 defines the detailed SDP Offer/Answer procedures for the
   BUNDLE extension.

6.  SDP 'bundle-only' Attribute

6.1.  General

   This section defines a new SDP media-level attribute [RFC4566],
   'bundle-only'.

   The 'bundle-only' attribute can be assigned to a bundled "m=" line in
   an offer, to request that the answerer only accepts the "m=" line if
   the answerer keeps the "m=" line within the associated BUNDLE group.

   In order to ensure that an answerer that does not supports the BUNDLE
   extension always rejects a 'bundle-only' "m=" line, the offerer can
   assign a zero port value to the "m=" line to which the 'bundle-only'
   attribute has been assigned.  According to [RFC4566] an answerer will
   reject such "m=" line.

   The usage of the 'bundle-only' attribute is only defined for a
   bundled "m=" line within an offer.  Other usage is unspecified.

   Section 8 defines the detailed SDP Offer/Answer procedures for the
   'bundle-only' attribute.

6.2.  Syntax

   This section defines the Augmented Backus-Naur Form (ABNF) [RFC5234]
   for the SDP 'bundle-only' attribute, based on the SDP [RFC4566]
   grammar.


         attribute               =/ bundle-only-attribute

         bundle-only-attribute   = "bundle-only"







Holmberg, et al.          Expires March 9, 2015                 [Page 7]

Internet-Draft                Bundled media               September 2014


7.  SDP Information Considerations

7.1.  General

   This section describes restrictions associated with the usage of SDP
   parameters within a BUNDLE group.  It also describes, when parameter
   and attribute values have been assigned to each bundled "m=" line,
   how to calculate a value for the whole BUNDLE group.

7.2.  Connection Data (c=)

   The "c=" line nettype value [RFC4566] assigned to a bundled "m=" line
   MUST be 'IN'.

   The "c=" line addrtype value [RFC4566] assigned to a bundled "m="
   line MUST be 'IP4' or 'IP6'.  The same value MUST be assigned to each
   "m=" line.

   NOTE: Extensions to this specification can specify usage of the
   BUNDLE mechanism for other nettype and addrtype values than the ones
   listed above.

7.3.  Bandwidth (b=)

   The proposed bandwidth for a bundled "m=" line SHOULD be calculated
   in the same way as for a non-bundled "m=" line.

   The total proposed bandwidth for a BUNDLE group is the sum of the
   proposed bandwidth for each bundled "m=" line.

   The total proposed bandwidth for an offer or answer is the sum of the
   proposed bandwidth for each "m=" line (bundled and non-bundled)
   within the offer or answer.

7.4.  Attributes (a=)

   [I-D.mmusic-sdp-mux-attributes] defines rules and restrictions for
   assigning different types of SDP attributes to a bundled "m=" line.

8.  SDP Offer/Answer Procedures

8.1.  General

   This section describes the SDP Offer/Answer [RFC3264] procedures for:

   o  Negotiating and creating of a BUNDLE group;





Holmberg, et al.          Expires March 9, 2015                 [Page 8]

Internet-Draft                Bundled media               September 2014


   o  Selecting the BUNDLE addresses (offerer BUNDLE address and
      answerer BUNDLE address);

   o  Adding an "m=" line to a BUNDLE group;

   o  Moving an "m=" line out of a BUNDLE group; and

   o  Disabling an "m=" line within a BUNDLE group.

   The generic rules and procedures defined in [RFC3264] and [RFC5888]
   also apply to the BUNDLE extension.  For example, if an offer is
   rejected by the answerer, the previously negotiated SDP parameters
   and characteristics (including those associated with a BUNDLE group)
   apply.  Hence, if an offerer generates an offer in which the offerer
   wants to create a BUNDLE group, and the answerer rejects the offer,
   the BUNDLE group is not created.

   The procedures in this section are independent of the media type or
   transport protocol represented by a bundled "m=" line.  [Section 10]
   defines additional considerations for RTP based media.  [Section 6]
   defines additional considerations for the usage of the SDP 'bundle-
   only' attribute.  [Section 11] defines additional considerations for
   the usage of Interactive Connectivity Establishment (ICE) mechanism
   [RFC5245].

   The offerer and answerer MUST follow the rules and restrictions
   defined in Section 7 when creating offers and answers.

8.2.  Generating the Initial SDP Offer

8.2.1.  General

   When an offerer generates an initial offer, in order to create a
   BUNDLE group, it MUST:

   o  Assign a unique address to each "m=" line within the offer,
      following the procedures in [RFC3264];

   o  Assign an SDP 'group:BUNDLE' attribute to the offer;

   o  Place the SDP 'mid' attribute value [RFC5888] of each bundled "m="
      line to the SDP 'group:BUNDLE' attribute mid value list; and

   o  Indicate which unique address the offerer wants the answerer to
      select as the offerer BUNDLE address Section 8.2.2.






Holmberg, et al.          Expires March 9, 2015                 [Page 9]

Internet-Draft                Bundled media               September 2014


   If the offerer wants to request that the answerer accepts a given
   "m=" line only if the the answerer keeps the "m=" line within the
   BUNDLE group, the offerer MUST:

   o  Assign an SDP 'bundle-only' attribute Section 8.2.2 to the "m="
      line; and

   o  Assign a zero port value to the "m=" line.

   NOTE: If the offerer assigns a zero port value to an "m=" line, but
   does not also assign an SDP 'bundle-only' attribute to the "m=" line,
   it is an indication that the offerer wants to disable the "m=" line
   [Section 8.5.5].

   [Section 15.1] shows an example of an initial offer.

8.2.2.  Request offerer BUNDLE address selection

   In the offer, the address assigned to the "m=" line associated with
   the offerer suggested BUNDLE mid indicates the address that the
   offerer wants the answer to select as the offerer BUNDLE address
   [Section 8.3.2].

8.3.  Generating the SDP Answer

8.3.1.  General

   When an answerer generates an answer, which contains a BUNDLE group,
   the following general SDP grouping framework restrictions, defined in
   [RFC5888], also apply to the BUNDLE group:

   o  The answerer MUST NOT include a BUNDLE group in the answer, unless
      the offerer requested the BUNDLE group to be created in the
      associated offer; and

   o  The answerer MUST NOT include an "m=" line within a BUNDLE group,
      unless the offerer requested to "m=" line to be within a BUNDLE
      group in the associated offer.

   If the answer contains a BUNDLE group, the answerer MUST:

   o  Select an Offerer BUNDLE Address Section 8.3.2; and

   o  Select an Answerer BUNDLE Address Section 8.3.3;

   The answerer is allowed to select a new Answerer BUNDLE address each
   time it generates an answer to an offer.




Holmberg, et al.          Expires March 9, 2015                [Page 10]

Internet-Draft                Bundled media               September 2014


   If the answerer does not want to keep an "m=" line within a BUNDLE
   group, it MUST:

   o  Move the "m=" line out of the BUNDLE group Section 8.3.4; or

   o  Reject the "m=" line Section 8.3.5;

   If a bundled "m=" line in an offer contains an SDP 'bundle-only'
   attribute, and if the answerer keeps the "m=" line within the BUNDLE
   group, the answerer MUST process the "m=" line as any other bundled
   "m=" line in the offer.  The answerer MUST NOT assign a 'bundle-only'
   attribute to any "m=" line in an answer (not even if the "m=" line in
   the associated offer contains a 'bundle-only' attribute).

   NOTE: If a bundled "m=" line in an offer contains a port zero value,
   but the "m=" line does not contain an SDP 'bundle-only' attribute, it
   is an indication that the offerer wants to disable the "m=" line
   [Section 8.5.5].

8.3.2.  Answerer Selection of Offerer Bundle Address

   In an offer, the address (unique or shared) assigned to the bundled
   "m=" line associated with the offerer suggested BUNDLE mid indicates
   the address that the offerer wants the answer to select as the
   offerer BUNDLE address [Section 8.2.2].  The answerer MUST check
   whether the "m=" line fulfills the following criteria:

   o  The answerer will not move the "m=" line out of the BUNDLE group
      [Section 8.3.4];

   o  The answerer will not reject the "m=" line [Section 8.3.5]; and

   o  The "m=" line does not contain a zero port value.

   If all of the criteria above is fulfilled, the answerer MUST select
   the address associated with the "m=" line as the offerer BUNDLE
   address.  In the answer, the answerer selected BUNDLE mid represents
   the "m=" line, and the address associated with the "m=" line in the
   offer becomes the offerer BUNDLE address.

   If all of the criteria is not fulfilled, the answerer MUST select the
   next mid value in the mid list, and perform the same criteria check
   for the "m=" line associated with that mid value.  If there are no
   more mid values in the mid list, the answerer MUST NOT create the
   BUNDLE group.

   [Section 15.1] shows an example of an offerer BUNDLE address
   selection.



Holmberg, et al.          Expires March 9, 2015                [Page 11]

Internet-Draft                Bundled media               September 2014


8.3.3.  Answerer Selection of Answerer BUNDLE Address

   When the answerer selects a BUNDLE address for itself, referred to as
   the answerer BUNDLE address, it MUST assign the address to each
   bundled "m=" line within the created BUNDLE group in the answer.

   The answerer MUST NOT assign the answerer BUNDLE address to an "m="
   line that is not within the BUNDLE group, or to an "m=" line that is
   within another BUNDLE group.

   [Section 15.1] shows an example of an answerer BUNDLE address
   selection.

8.3.4.  Moving A Media Description Out Of A BUNDLE Group

   When an answerer moves a "m=" line out of a BUNDLE group, it assigns
   an address to the "m=" line in the answer based on the following
   rules:

   o  In the associated offer, if the "m=" line contains a shared
      address (e.g. a previously selected offerer BUNDLE address), the
      answerer MUST reject the moved "m=" line [Section 8.3.5];

   o  In the associated offer, if the "m=" line contains a unique
      address, the answerer MUST assign a unique address to the "m="
      line in the answer; or

   o  In the associated offer, if the "m=" line contains an SDP 'bundle-
      only' attribute the answerer MUST reject the "m=" line
      [Section 8.3.5].

   In addition, in either case above, the answerer MUST NOT include a
   mid value, associated with the moved "m=" line, in the SDP
   'group:BUNDLE' attribute mid list associated with the BUNDLE group.

8.3.5.  Rejecting A Media Description In A BUNDLE Group

   When an answerer rejects an "m=" line, it MUST assign an address with
   a zero port value to the "m=" line in the answer, according to the
   procedures in [RFC4566].

   In addition, the answerer MUST NOT include a mid value, associated
   with the rejected "m=" line, in the SDP 'group:BUNDLE' attribute mid
   list associated with the BUNDLE group.







Holmberg, et al.          Expires March 9, 2015                [Page 12]

Internet-Draft                Bundled media               September 2014


8.4.  Offerer Processing of the SDP Answer

8.4.1.  General

   When an offerer receives an answer, if the answer contains a BUNDLE
   group, the offerer MUST check that any bundled "m=" line in the
   answer was indicated as bundled in the associated offer.  If there is
   no mismatch, the offerer MUST apply the offerer BUNDLE address,
   selected by the answerer [Section 8.3.2], to each bundled "m=" line.
   The offerer MUST assign the address to each bundled "m=" line
   (excluding a bundled "m=" line added to a BUNDLE group, to which the
   offerer MAY assign a unique address [Section 8.5.3]) in any
   subsequent offer.

   NOTE: As the answerer might reject one or more bundled "m=" lines, or
   move a bundled "m=" line out of a BUNDLE group, each bundled "m="
   line in the offer might not be indicated as bundled in the answer.

   If the answer does not contain a BUNDLE group, the offerer MUST
   process the answer as a normal answer.

8.4.2.  Bundle Address Synchronization (BAS)

   When an offerer receives an answer, if the answer contains a BUNDLE
   group, the offerer MUST check whether the offerer BUNDLE address,
   selected by the answerer [Section 8.3.2], matches was assigned to
   each bundled "m=" line (excluding any bundled "m=" line that was
   rejected, or moved out of the BUNDLE group, by the answer) in the
   associated offer.  If there is a mismatch, the offerer SHOULD as soon
   as possible generate a subsequent offer, in which it assigns the
   offerer BUNDLE address to each bundled "m=" line.  Such offer is
   referred to as a Bundle Address Synchronization (BAS) offer.

   A BAS offer is typically sent in the following scenarios:

   o  The offerer receives an answer to an initial offer, as the bundled
      "m=" lines in the initial offer always contain unique addresses
      [Section 8.2]; or

   o  The offerer receives an answer to an offer, in which a new bundled
      "m=" line has been added to the BUNDLE group [Section 8.5.3], and
      the offerer assigned a unique address to the bundled "m=" line in
      the offer.

   The offerer is allowed to modify any SDP parameter in the BAS offer.

   NOTE: It is important that the BAS offer gets accepted by the
   answerer.  For that reason the offerer needs to consider the



Holmberg, et al.          Expires March 9, 2015                [Page 13]

Internet-Draft                Bundled media               September 2014


   necessity to modify SDP parameters in the BAS offer, in such a way
   that could trigger the answerer to reject the BAS offer.  Disabling
   "m=" lines, or reducing the number of codecs, in a BAS offer is
   considered to have a low risk of being rejected.

   NOTE: The main purpose of the BAS offer is to ensure that
   intermediaries, that might not support the BUNDLE extension, have
   correct information regarding the address is going to be used to
   transport the bundled media.

   [Section 15.1] shows an example of a BAS offer.

8.5.  Modifying the Session

8.5.1.  General

   When an offerer generates a subsequent offer, it MUST assign the
   previously selected offerer BUNDLE address [Section 8.3.2], to each
   bundled "m=" line (including any bundle-only "m=" line), with the
   following exceptions:

   o  The offerer wants to request the answerer to select a new offerer
      BUNDLE address [Section 8.5.2];

   o  The offerer wants to add a bundled "m=" line to the BUNDLE group
      [Section 8.5.3];

   o  The offerer wants to move a bundled "m=" line out of the BUNDLE
      group [Section 8.5.4]; or

   o  The offerer wants to disable the bundled "m=" line
      [Section 8.5.5].

   In addition, the offerer MUST select an offerer suggested BUNDLE mid
   [Section 8.2.2], even if the offerer does not want the answerer to
   select a new offerer BUNDLE address.

   If the offerer assigns an SDP 'bundle-only' to a bundled "m=" line in
   the subsequent offer, if MUST assign the offerer BUNDLE address to
   the "m=" line.  The offerer MUST NOT assign a unique address, or a
   zero port value, to a bundle-only "m=" line in a subsequent offer.

   NOTE: The offerer can in assign an SDP 'bundle-only' attribute to a
   bundled "m=" line in a subsequent offer, even if the offerer did not
   assign a 'bundle-only' attribute to the "m=" line in a previous
   offer.





Holmberg, et al.          Expires March 9, 2015                [Page 14]

Internet-Draft                Bundled media               September 2014


8.5.2.  Request new offerer BUNDLE address

   When an offerer generates an offer, in which it wants the answerer to
   select a new offerer BUNDLE address Section 8.2.2, the offerer MUST:

   o  Assign a unique address, which the offerer wants the answerer to
      select as the offerer BUNDLE address, to a bundled "m=" line
      (added to the BUNDLE group in a previous offer/answer transaction,
      or requested to be added to the BUNDLE group in the current
      offer); and

   o  Indicate that the offerer wants the answerer to select the unique
      address as the offerer BUNDLE address [Section 8.2.2]

   NOTE: The offerer can assign a unique address to each bundled "m="
   line in the offer, or it can assign the previously negotiated offerer
   BUNDLE address to each "m=" line (except the "m=" line to which it
   assigns the unique address that it wants the answerer to select as
   the new offerer BUNDLE address).

8.5.3.  Adding a media description to a BUNDLE group

   When an offerer generates an offer, in which it wants to add a
   bundled "m=" line to BUNDLE group, the offerer MUST:

   o  Assign a unique address (excluding bundle-only "m=" lines), or the
      offerer BUNDLE address (selected by the answerer in a previous
      offer/answer transaction), to the "m=" line;

   o  Place the SDP 'mid' attribute value associated with the "m=" line
      in the SDP 'group:BUNDLE' attribute mid list associated with the
      BUNDLE group [Section 8.2.2].

   If the offerer wants the answerer to select the address associated
   with the added "m=" line as the new offerer BUNDLE address, the
   offerer suggested BUNDLE mid MUST represent the added "m=" line
   [Section 8.2.2].

   If the offerer assigns an SDP 'bundle-only' attribute to the added
   "m=" line, the offerer MUST assign the offerer BUNDLE address
   (selected by the answerer in a previous offer/answer transaction) to
   the "m=" line.

   [Section 15.3] shows an example where an offerer sends an offer in
   order to add a bundled "m=" line to a BUNDLE group.






Holmberg, et al.          Expires March 9, 2015                [Page 15]

Internet-Draft                Bundled media               September 2014


8.5.4.  Moving A Media Description Out Of A BUNDLE Group

   When an offerer generates an offer, in which it wants to move a
   bundled "m=" line (added to the BUNDLE group in a previous offer/
   answer transaction), the offerer:

   o  MUST assign a unique address to the "m=" line;

   o  MUST NOT place a mid value associated with the "m=" line in the
      SDP 'group:BUNDLE' attribute mid list associated with the BUNDLE
      group; and

   o  MUST NOT assign an SDP 'bundle-only' attribute to the "m=" line.

   [Section 15.4] shows an example of an offer for moving an "m=" line
   out of a BUNDLE group.

8.5.5.  Disabling A Media Description In A BUNDLE Group

   When an offerer generates an offer, in which it wants to disable a
   bundled "m=" line (added to the BUNDLE group in a previous offer/
   answer transaction), the offerer:

   o  MUST assign an address with a zero port value to the "m=" line,
      following the procedures in [RFC4566];

   o  MUST NOT place a mid value associated with the "m=" line in the
      SDP 'group:BUNDLE' attribute mid list associated with the BUNDLE
      group; and

   o  MUST NOT assign an SDP 'bundle-only' attribute to the "m=" line.

   [Section 15.5] shows an example of an offer for disabling an "m="
   line within a BUNDLE group.

9.  Protocol Identification

9.1.  General

   If bundled "m=" lines represent different transport protocols, there
   MUST exist a publically available specification which describes a
   mechanism, for this specific transport protocol combination, how to
   associate a received packet with the correct transport protocol.

   In addition, if a received packet can be associated with more than
   one bundled "m=" line, there MUST exist a publically available
   specification which describes a mechanism how to associated the
   received packet with the correct "m=" line.



Holmberg, et al.          Expires March 9, 2015                [Page 16]

Internet-Draft                Bundled media               September 2014


9.2.  STUN, DTLS, SRTP

   Section 5.1.2 of [RFC5764] describes a mechanism how to identify the
   protocol among the STUN, DTLS and SRTP protocols (in any
   combination).  If an offer or answerer in offers or answers include
   bundled "m=" lines that represent these protocols, the offerer or
   answerer MUST support the mechanism described in [RFC5764], and no
   explicit negotiation is required in order to indicate support and
   usage of the mechanism.

   [RFC5764] does not describe how to identify different protocols
   transported on DTLS, only how to identify the DTLS protocol itself.
   If multiple protocols are transported on DTLS, there MUST exist a
   specification describing a mechanism how to identify each individual
   protocol.  In addition, if a received DTLS packet can be associated
   with more than one "m=" line, there MUST exist a specification which
   describes a mechanism how to associate the received DTLS packet with
   the correct "m=" line.

   [Section 10.2] describes how to associate a received (S)RTP packet
   with the correct "m=" line.

10.  RTP Considerations

10.1.  Single RTP Session

10.1.1.  General

   All RTP-based media within a single BUNDLE group belong to a single
   RTP session [RFC3550].  Disjoint BUNDLE groups will form multiple RTP
   sessions, one per BUNDLE group.

   Since a single RTP session is used for each bundle group, all "m="
   lines representing RTP-based media in a bundle group will share a
   single SSRC numbering space [RFC3550].

   The following rules and restrictions apply for a single RTP session:

   o  A specific payload type value can be used in multiple bundled "m="
      lines if each codec associated with the payload type number shares
      an identical codec configuration [Section 10.1.2].

   o  The "proto" value in each bundled "m=" line MUST be identical
      (e.g.  RTP/AVPF).

   o  A given SSRC SHOULD NOT transmit RTP packets using payload types
      that originates from different bundled "m=" lines.




Holmberg, et al.          Expires March 9, 2015                [Page 17]

Internet-Draft                Bundled media               September 2014


   NOTE: The last bullet above is to avoid sending multiple media types
   from the same SSRC.  If transmission of multiple media types are done
   with time overlap RTP and RTCP fails to function.  Even if done in
   proper sequence this causes RTP Timestamp rate switching issues [ref
   to draft-ietf-avtext-multiple-clock-rates].

10.1.2.  Payload Type (PT) Value Re-usage

   Multiple bundled "m=" lines might represent RTP based media.  As all
   RTP based media associated with a BUNDLE group belong to the same RTP
   session, in order for a given payload type value to used inside more
   than one bundled "m=" line, all codecs associated with the payload
   type numbers MUST share an identical codec configuration.  This means
   that the codecs MUST share the same media type, encoding name, clock
   rate and any parameter that can affect the codec configuration and
   packetization.  [I-D.mmusic-sdp-mux-attributes] lists SDP attributes,
   which attribute values must be identical for all codecs that use the
   same payload type value.

10.2.  Associating RTP/RTCP Packets With Correct SDP Media Description

   In general, there are multiple mechanisms that can be used by an
   endpoint in order to associate received RTP/RTCP packets with the
   bundled "m=" line representing the RTP packets.  Such mechanisms
   include using the local address:port combination on which the RTP
   packets are received, the payload type value carried inside the RTP
   packets, the SSRC values carried inside the RTP packets, and other
   "m=" line specific information carried inside the RTP packets.

   As all RTP/RTCP packets associated with a BUNDLE group are sent and
   received using the same 5-tuple, the local address:port combination
   cannot be used to associate received RTP packets with the correct
   "m=" line.

   As described in [Section 10.1.2], the same payload type value might
   be used inside RTP packets described by multiple "m=" lines.  In such
   cases, the payload type value cannot be used to associate received
   RTP packets with the correct "m=" line.

   An offerer and answerer can in an offer and answer inform each other
   which SSRC values they will use inside sent RTP/RTCP packets by, by
   assigning an SDP 'ssrc' attribute [RFC5576] to each bundled "m=" line
   which contains a payload type value that is also used inside another
   bundled "m=" line.  As the SSRC values will be carried inside the
   RTP/RTCP packets, the offerer and answerer can then use that
   information to associate received RTP packets with the correct "m="
   line.  However, an offerer will not know which SSRC values the
   answerer will use until it has received the answer providing that



Holmberg, et al.          Expires March 9, 2015                [Page 18]

Internet-Draft                Bundled media               September 2014


   information.  Due to this, before the offerer has received the
   answer, the offerer will not be able to associate received RTP/RTCP
   packets with the correct "m=" line using the SSRC values.

   In order for an offerer and answerer to always be able to associate
   received RTP and RTCP packets with the correct "m=" line, an offerer
   and answerer using the BUNDLE extension MUST use the mechanism
   defined in Section 13, where the remote endpoint inserts the SDP
   'mid' attribute value of an "m=" line in RTP and RTCP packets
   associated with that "m=" line.

10.3.  RTP/RTCP Multiplexing

10.3.1.  General

   When a BUNDLE group, which contains RTP based media, is created, the
   offerer and answerer MUST negotiate whether to enable RTP/RTCP
   multiplexing for the RTP based media associated with the BUNDLE group
   [RFC5761].

   If RTP/RTCP multiplexing is not enabled, separate 5-tuples will be
   used for sending and receiving the RTP packets and the RTCP packets.

10.3.2.  SDP Offer/Answer Procedures

10.3.2.1.  General

   This section describes how an offerer and answerer can use the SDP
   'rtcp-mux' attribute [RFC5761] and the SDP 'rtcp' attribute [RFC3605]
   to negotiate usage of RTP/RTCP multiplexing for RTP based associated
   with a BUNDLE group.

10.3.2.2.  Generating the Initial SDP Offer

   When an offerer generates an initial offer, if the offerer wants to
   negotiate usage of RTP/RTCP multiplexing within a BUNDLE group, the
   offerer MUST assign an SDP 'rtcp-mux' attribute [RFC5761] to each
   bundled "m=" line (including any bundle-only "m=" line) in the offer.
   In addition, the offerer MUST assign an SDP 'rtcp' attribute
   [RFC3605] to each bundled "m=" line (including any bundle-only "m="
   line), with an attribute value that is identical to the port value
   assigned to the "m=" line itself, in the offer.

   If the offerer does not want to negotiate usage of RTP/RTCP
   multiplexing, it MUST NOT assign the SDP attributes above to any
   bundled "m=" line.





Holmberg, et al.          Expires March 9, 2015                [Page 19]

Internet-Draft                Bundled media               September 2014


10.3.2.3.  Generating the SDP Answer

   When an answerer generates an answer, if the offerer indicated
   support of RTP/RTCP multiplexing [RFC5761] within a BUNDLE group in
   the associated offer, the answerer MUST either accept or reject the
   usage of RTP/RTCP multiplexing in the answer.

   If the answerer accepts usage of RTP/RTCP multiplexing within the
   BUNDLE group, it MUST assign an SDP 'rtcp-mux' attribute to each
   bundled "m=" line in the answer.  The answerer MUST NOT assign an SDP
   'rtcp' attribute to any bundled "m=" line in the answer.

   If the answerer rejects usage of RTP/RTCP multiplexing within the
   BUNDLE group, it MUST NOT assign an SDP 'rtcp-mux' or SDP 'rtcp'
   attribute to any bundled "m=" line in the answer.

   If the usage of RTP/RTCP multiplexing has been negotiated in a
   previous offer/answer transaction, and the offerer indicates that it
   wants to continue using RTP/RTCP multiplexing in a subsequent offer,
   the answerer MUST assign an SDP 'rtcp-mux' attribute to each bundled
   "m=" line in the answer.  I.e. the answerer MUST NOT disable the
   usage of RTP/RTCP multiplexing.

10.3.2.4.  Offerer Processing of the SDP Answer

   When the offerer receives an answer, if the answerer accepts the
   usage of RTP/RTCP multiplexing, by including an SDP 'rtcp-mux'
   attribute to each bundled "m=" line in the answer Section 10.3.2.3,
   the answerer follows the procedures for RTP/RTCP multiplexing defined
   in [RFC5245].

   If the answerer does not accept the usage of RTP/RTCP multiplexing
   Section 10.3.2.3, the offerer MUST use separate 5-tuples for RTP and
   RTCP.

10.3.2.5.  Modifying the Session

   When an offerer generates a subsequent offer, if it wants to
   negotiate usage of RTP/RTCP multiplexing within a BUNDLE group, or if
   it wants to continue usage of RTP/RTCP multiplexing (negotiated in a
   previous offer/answer transaction), it MUST assign SDP 'rtcp-mux' and
   'rtcp' attributes to each bundled "m=" line (including bundle-only
   "m=" lines, and a bundled "m=" line that the offerer wants to add to
   the BUNDLE group), unless the offerer wants to disable or remove the
   "m=" line from the BUNDLE group.

   If the offerer does not want to negotiate usage of RTP/RTCP
   multiplexing within the BUNDLE group, or if it wants to disable usage



Holmberg, et al.          Expires March 9, 2015                [Page 20]

Internet-Draft                Bundled media               September 2014


   of RTP/RTCP multiplexing (negotiated in a previous offer/answer
   transaction), the offerer MUST NOT assign SDP 'rtcp-mux' and 'rtcp'
   attributes to any bundled "m=" line in the subsequent offer.

   NOTE: It is RECOMMENDED that, once usage of RTP/RTCP multiplexing has
   been negotiated within a BUNDLE group, that the usage is not
   disabled.  Disabling RTP/RTCP multiplexing means that the offerer and
   answerer need to reserve new IP ports, to be used for sending and
   receiving RTCP packets.

11.  ICE Considerations

11.1.  General

   This section describes how to use the BUNDLE grouping extension
   together with the Interactive Connectivity Establishment (ICE)
   mechanism [RFC5245].

   The procedures defined in [RFC5245] also apply to usage of ICE with
   BUNDLE, with the following exception:

   o  When BUNDLE addresses for a BUNDLE group have been selected for
      both endpoints, ICE connectivity checks and keep-alives only need
      to be performed for the whole BUNDLE group, instead of per bundled
      "m=" line.

   Support and usage of ICE mechanism together with the BUNDLE extension
   is OPTIONAL.

11.2.  SDP Offer/Answer Procedures

11.2.1.  General

   When an offerer or answerer assigns a unique address to a bundled
   "m=" line (excluding bundle-only "m=" lines), it MUST also assign
   unique ICE candidates [RFC5245] to the "m=" line.

   When an offerer or answerer assigns a shared address (i.e. a
   previously selected BUNDLE address) to one or more bundled "m=" line
   (including bundle-only "m=" lines), and when it assigns an address
   with a zero port value to one or more bundle-only "m=" lines, it MUST
   assign identical ICE candidates (referred to as shared ICE
   candidates) to each of those "m=" lines.








Holmberg, et al.          Expires March 9, 2015                [Page 21]

Internet-Draft                Bundled media               September 2014


11.2.2.  Generating the Initial SDP Offer

   When an offerer generates an initial offer, it assigns unique or
   shared ICE candidates to the bundled "m=" lines, according to
   Section 11.1.

11.2.3.  Generating the SDP Answer

   When an answerer generates an answer, which contains a BUNDLE group,
   the answerer MUST assign shared ICE candidates to each bundled "m="
   line (including "m=" lines that were indicated as bundle-only in the
   associated offer) in the answer.

11.2.4.  Offerer Processing of the SDP Answer

   When an offerer receives an answer, if the answerer supports and uses
   the ICE mechanism and the BUNDLE extension, the offerer MUST assign
   the ICE candidates, associated with the "m=" line representing the
   offerer BUNDLE address (selected by the answerer) to each bundled
   "m=" line.

11.2.5.  Modifying the Session

   When an offerer generates a subsequent offer, it assigns unique or
   shared ICE candidates to the bundled "m=" lines, according to
   Section 11.1.

12.  Update to RFC 3264

12.1.  General

   This section replaces the text of the following sections of RFC 3264:

   o  Section 5.1 (Unicast Streams).

   o  Section 8.2 (Removing a Media Stream).

   o  Section 8.4 (Putting a Unicast Media Stream on Hold).

12.2.  Original text of section 5.1 (2nd paragraph) of RFC 3264

   For recvonly and sendrecv streams, the port number and address in the
   offer indicate where the offerer would like to receive the media
   stream.  For sendonly RTP streams, the address and port number
   indirectly indicate where the offerer wants to receive RTCP reports.
   Unless there is an explicit indication otherwise, reports are sent to
   the port number one higher than the number indicated.  The IP address
   and port present in the offer indicate nothing about the source IP



Holmberg, et al.          Expires March 9, 2015                [Page 22]

Internet-Draft                Bundled media               September 2014


   address and source port of RTP and RTCP packets that will be sent by
   the offerer.  A port number of zero in the offer indicates that the
   stream is offered but MUST NOT be used.  This has no useful semantics
   in an initial offer, but is allowed for reasons of completeness,
   since the answer can contain a zero port indicating a rejected stream
   (Section 6).  Furthermore, existing streams can be terminated by
   setting the port to zero (Section 8).  In general, a port number of
   zero indicates that the media stream is not wanted.

12.3.  New text replacing section 5.1 (2nd paragraph) of RFC 3264

   For recvonly and sendrecv streams, the port number and address in the
   offer indicate where the offerer would like to receive the media
   stream.  For sendonly RTP streams, the address and port number
   indirectly indicate where the offerer wants to receive RTCP reports.
   Unless there is an explicit indication otherwise, reports are sent to
   the port number one higher than the number indicated.  The IP address
   and port present in the offer indicate nothing about the source IP
   address and source port of RTP and RTCP packets that will be sent by
   the offerer.  A port number of zero in the offer by default indicates
   that the stream is offered but MUST NOT be used, but an extension
   mechanism might specify different semantics for the usage of a zero
   port value.  Furthermore, existing streams can be terminated by
   setting the port to zero (Section 8).  In general, a port number of
   zero by default indicates that the media stream is not wanted.

12.4.  Original text of section 8.2 (2nd paragraph) of RFC 3264

   A stream that is offered with a port of zero MUST be marked with port
   zero in the answer.  Like the offer, the answer MAY omit all
   attributes present previously, and MAY list just a single media
   format from amongst those in the offer.

12.5.  New text replacing section 8.2 (2nd paragraph) of RFC 3264

   A stream that is offered with a port of zero MUST by default be
   marked with port zero in the answer, unless an extension mechanism,
   which specifies semantics for the usage of a non-zero port value, is
   used.

12.6.  Original text of section 8.4 (6th paragraph) of RFC 3264

   RFC 2543 [10] specified that placing a user on hold was accomplished
   by setting the connection address to 0.0.0.0.  Its usage for putting
   a call on hold is no longer recommended, since it doesn't allow for
   RTCP to be used with held streams, doesn't work with IPv6, and breaks
   with connection oriented media.  However, it can be useful in an
   initial offer when the offerer knows it wants to use a particular set



Holmberg, et al.          Expires March 9, 2015                [Page 23]

Internet-Draft                Bundled media               September 2014


   of media streams and formats, but doesn't know the addresses and
   ports at the time of the offer.  Of course, when used, the port
   number MUST NOT be zero, which would specify that the stream has been
   disabled.  An agent MUST be capable of receiving SDP with a
   connection address of 0.0.0.0, in which case it means that neither
   RTP nor RTCP should be sent to the peer.

12.7.  New text replacing section 8.4 (6th paragraph) of RFC 3264

   RFC 2543 [10] specified that placing a user on hold was accomplished
   by setting the connection address to 0.0.0.0.  Its usage for putting
   a call on hold is no longer recommended, since it doesn't allow for
   RTCP to be used with held streams, doesn't work with IPv6, and breaks
   with connection oriented media.  However, it can be useful in an
   initial offer when the offerer knows it wants to use a particular set
   of media streams and formats, but doesn't know the addresses and
   ports at the time of the offer.  Of course, when used, the port
   number MUST NOT be zero, if it would specify that the stream has been
   disabled.  However, an extension mechanism might specify different
   semantics of the zero port number usage.  An agent MUST be capable of
   receiving SDP with a connection address of 0.0.0.0, in which case it
   means that neither RTP nor RTCP should be sent to the peer.

13.  RTP/RTCP extensions for mid value transport

13.1.  General

   SDP Offerers and Answerers [RFC3264] can assign values, mid values,
   to SDP Media Descriptions (m= lines) within SDP Offers and Answers,
   using the procedures in [RFC5888].  Each mid value uniquely
   references an m= line.

   This section defines a new RTP SDES item [RFC3550], 'MID', which is
   used to carry mid values within RTCP SDES packets.  This section also
   defines a new RTP header extension [RFC5285], which can be used to
   carry the mid value in RTP packets.

   The SDES item and RTP header extension makes is possible for a
   receiver to associate received RTCP- and RTP packets with a specific
   m= line, to which the receiver has assigned a mid value, even if
   those m= lines are part of the same RTP session.  The endpoint
   informs the remote endpoint about the mid values using the procedures
   in [RFC5888], and the remote endpoint then inserts the mid values in
   RTCP- and RTP packets sent towards the other endpoint.

   NOTE: This text above defines how the mid value is carried in SDP
   Offers and Answers.  The usage of other signalling protocols for




Holmberg, et al.          Expires March 9, 2015                [Page 24]

Internet-Draft                Bundled media               September 2014


   carrying the mid value is not prevented, but the usage of such
   protocols is outside the scope of this document.

   The RTP MID SDES item SHOULD be sent in the first few RTCP packets
   sent on joining the session, and SHOULD be sent regularly thereafter.
   The exact number of RTCP packets in which this SDES item is sent is
   intentionally not specified here, as it will depend on the expected
   packet loss rate, the RTCP reporting interval, and the allowable
   overhead.

   The RTP MID header extension SHOULD be included in some RTP packets
   at the start of the session and whenever the SSRC changes.  It might
   also be useful to include the header extension in RTP packets that
   comprise random access points in the media (e.g., with video
   I-frames).  The exact number of RTP packets in which this header
   extension is sent is intentionally not specified here, as it will
   depend on expected packet loss rate and loss patterns, the overhead
   the application can tolerate, and the importance of immediate receipt
   of the mid value.

   For robustness purpose, endpoints need to be prepared for situations
   where the mid value is delayed, and SHOULD NOT terminate sessions in
   such cases, as the mid value is likely to arrive soon.

13.2.  RTP MID SDES Item


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      MID=TBD  |     length    | mid value                   ...
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   The mid value payload is UTF-8 encoded, as in SDP.

13.3.  RTP MID Header Extension

   The payload, containing the mid value, of the RTP MID header
   extension element can be encoded using either the one-byte or two-
   byte header [RFC5285].  The mid value payload is UTF-8 encoded, as in
   SDP.

13.4.  IANA Considerations

   [RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this
   document.]




Holmberg, et al.          Expires March 9, 2015                [Page 25]

Internet-Draft                Bundled media               September 2014


   [RFC EDITOR NOTE: Please replace TBD with the assigned SDES
   identifier value.]

   This document adds the MID SDES item to the IANA "RTP SDES item
   types" registry as follows:


       Value:      TBD
       Abbrev.:    MID
       Name:       Media Identification
       Reference:  RFCXXXX


   This document defines a new extension URI in the RTP Compact Header
   Extensions subregistry of the Real-Time Transport Protocol (RTP)
   Parameters registry, according to the following data:


       Extension URI: urn:ietf:params:rtp-hdrext:sdes:mid
       Description:   Media identification
       Contact:       christer.holmberg@ericsson.com
       Reference:     RFCXXXX


14.  Security Considerations

   This specification does not significantly change the security
   considerations of SDP which can be found in Section X of TBD.

   TODO: Think carefully about security analysis of reuse of same SDES
   key on multiple "m=" lines when the far end does not use BUNDLE and
   warn developers of any risks.

15.  Examples

15.1.  Example: Bundle Address Selection

   The example below shows:

   o  1.  An offer, in which the offerer assigns a unique address to
      each bundled "m=" line within the BUNDLE group.

   o  2.  An answer, in which the answerer selects the offerer BUNDLE
      address, and in which selects its own BUNDLE address (the answerer
      BUNDLE address) and assigns it each bundled "m=" line within the
      BUNDLE group.





Holmberg, et al.          Expires March 9, 2015                [Page 26]

Internet-Draft                Bundled media               September 2014


   o  3.  A subsequent offer (BAS offer), which is used to perform a
      Bundle Address Synchronization (BAS).


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10002 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 20000 RTP/AVP 0
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       m=video 20000 RTP/AVP 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:32 MPV/90000


   SDP Offer (3)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=



Holmberg, et al.          Expires March 9, 2015                [Page 27]

Internet-Draft                Bundled media               September 2014


       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000


15.2.  Example: BUNDLE Extension Rejected

   The example below shows:

   o  1.  An offer, in which the offerer assigns a unique address to
      each bundled "m=" line within the BUNDLE group.

   o  2.  An answer, in which the answerer rejects the offered BUNDLE
      group, and assigns a unique addresses to each "m=" line (following
      normal RFC 3264 procedures).

























Holmberg, et al.          Expires March 9, 2015                [Page 28]

Internet-Draft                Bundled media               September 2014


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10002 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       m=audio 20000 RTP/AVP 0
       b=AS:200
       a=rtpmap:0 PCMU/8000
       m=video 30000 RTP/AVP 32
       b=AS:1000
       a=rtpmap:32 MPV/90000



15.3.  Example: Offerer Adds A Media Description To A BUNDLE Group

   The example below shows:

   o  1.  An offer, in which the offerer adds a new "m=" line,
      represented by the "zen" mid value, to a previously negotiated
      BUNDLE group, assigns a unique address to the added "m=" line, and
      assigns the previously selected offerer BUNDLE address to each of
      the other bundled "m=" lines within the BUNDLE group.





Holmberg, et al.          Expires March 9, 2015                [Page 29]

Internet-Draft                Bundled media               September 2014


   o  2.  An answer, in which the answerer assigns the answerer BUNDLE
      address to each bundled "m=" line (including the newly added "m="
      line) within the BUNDLE group.

   o  3.  A subsequent offer (BAS offer), which is used to perform a
      Bundle Address Synchronization (BAS).


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar zen
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       m=video 20000 RTP/AVP 66
       a=mid:zen
       b=AS:1000
       a=rtpmap:66 H261/90000


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar zen
       m=audio 20000 RTP/AVP 0
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       m=video 20000 RTP/AVP 32
       a=mid:bar
       b=AS:1000



Holmberg, et al.          Expires March 9, 2015                [Page 30]

Internet-Draft                Bundled media               September 2014


       a=rtpmap:32 MPV/90000
       m=video 20000 RTP/AVP 66
       a=mid:zen
       b=AS:1000
       a=rtpmap:66 H261/90000


   SDP Offer (3)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar zen
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       m=video 10000 RTP/AVP 66
       a=mid:zen
       b=AS:1000
       a=rtpmap:66 H261/90000



15.4.  Example: Offerer Moves A Media Description Out Of A BUNDLE Group

   The example below shows:

   o  1.  An offer, in which the offerer moves a bundled "m=" line out
      of a BUNDLE group, assigns a unique address to the moved "m="
      line, and assigns the offerer BUNDLE address to each other bundled
      "m=" line within the BUNDLE group.

   o  2.  An answer, in which the answerer moves the "m=" line out of
      the BUNDLE group, assigns unique address to the moved "m=" line,
      and assigns the answerer BUNDLE address to each other bundled "m="
      line within the BUNDLE group.





Holmberg, et al.          Expires March 9, 2015                [Page 31]

Internet-Draft                Bundled media               September 2014


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       m=video 50000 RTP/AVP 66
       b=AS:1000
       a=rtpmap:66 H261/90000


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 20000 RTP/AVP 0
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       m=video 20000 RTP/AVP 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:32 MPV/90000
       m=video 60000 RTP/AVP 66
       b=AS:1000
       a=rtpmap:66 H261/90000








Holmberg, et al.          Expires March 9, 2015                [Page 32]

Internet-Draft                Bundled media               September 2014


15.5.  Example: Offerer Disables A Media Description Within A BUNDLE
       Group

   The example below shows:

   o  1.  An offer, in which the offerer disables a bundled "m=" line
      within BUNDLE group, assigns a zero port number the disabled "m="
      line, and assigns the offerer BUNDLE address to each of the other
      bundled "m=" lines within the BUNDLE group.

   o  2.  An answer, in which the answerer moves the disabled "m=" line
      out of the BUNDLE group, assigns a zero port value to the disabled
      "m=" line, and assigns the answerer BUNDLE address to each of the
      other bundled "m=" lines within the BUNDLE group.





































Holmberg, et al.          Expires March 9, 2015                [Page 33]

Internet-Draft                Bundled media               September 2014


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 31 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       m=video 0 RTP/AVP 66
       a=rtpmap:66 H261/90000


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 20000 RTP/AVP 0
       a=mid:foo
       b=AS:200
       a=rtpmap:0 PCMU/8000
       m=video 20000 RTP/AVP 32
       a=mid:bar
       b=AS:1000
       a=rtpmap:32 MPV/90000
       m=video 0 RTP/AVP 66
       a=rtpmap:66 H261/90000










Holmberg, et al.          Expires March 9, 2015                [Page 34]

Internet-Draft                Bundled media               September 2014


16.  IANA Considerations

   This document requests IANA to register the new SDP Grouping semantic
   extension called BUNDLE.

17.  Acknowledgements

   The usage of the SDP grouping extension for negotiating bundled media
   is based on a similar alternatives proposed by Harald Alvestrand and
   Cullen Jennings.  The BUNDLE extension described in this document is
   based on the different alternative proposals, and text (e.g.  SDP
   examples) have been borrowed (and, in some cases, modified) from
   those alternative proposals.

   The SDP examples are also modified versions from the ones in the
   Alvestrand proposal.

   Thanks to Paul Kyzivat, Martin Thompson and Flemming Andreasen for
   taking the time to read the text along the way, and providing useful
   feedback.

18.  Change Log

   [RFC EDITOR NOTE: Please remove this section when publishing]

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-08

   o  Editorial corrections.

   o  - "of"->"if" (8.3.2.5).

   o  - "optional"->"OPTIONAL" (9.1).

   o  - Syntax/ABNF for 'bundle-only' attribute added.

   o  - SDP Offer/Answer sections merged.

   o  - 'Request new offerer BUNDLE address' section added

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-07

   o  OPEN ISSUE regarding Receiver-ID closed.

   o  - RTP MID SDES Item.

   o  - RTP MID Header Extension.





Holmberg, et al.          Expires March 9, 2015                [Page 35]

Internet-Draft                Bundled media               September 2014


   o  OPEN ISSUE regarding insertion of SDP 'rtcp' attribute in answers
      closed.

   o  - Indicating that, when rtcp-mux is used, the answerer MUST NOT
      include an 'rtcp' attribute in the answer, based on the procedures
      in section 5.1.3 of RFC 5761.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-06

   o  Draft title changed.

   o  Added "SDP" to section names containing "Offer" or "Answer".

   o  Editorial fixes based on comments from Paul Kyzivat
      (http://www.ietf.org/mail-archive/web/mmusic/current/
      msg13314.html).

   o  Editorial fixed based on comments from Colin Perkins
      (http://www.ietf.org/mail-archive/web/mmusic/current/
      msg13318.html).

   o  - Removed text about extending BUNDLE to allow multiple RTP
      sessions within a BUNDLE group.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-05

   o  Major re-structure of SDP Offer/Answer sections, to align with RFC
      3264 structure.

   o  Additional definitions added.

   o  - Shared address.

   o  - Bundled "m=" line.

   o  - Bundle-only "m=" line.

   o  - Offerer suggested BUNDLE mid.

   o  - Answerer selected BUNDLE mid.

   o  Q6 Closed (IETF#88): An Offerer MUST NOT assign a shared address
      to multiple "m=" lines until it has received an SDP Answer
      indicating support of the BUNDLE extension.

   o  Q8 Closed (IETF#88): An Offerer can, before it knows whether the
      Answerer supports the BUNDLE extension, assign a zero port value
      to a 'bundle-only' "m=" line.



Holmberg, et al.          Expires March 9, 2015                [Page 36]

Internet-Draft                Bundled media               September 2014


   o  SDP 'bundle-only' attribute section added.

   o  Connection data nettype/addrtype restrictions added.

   o  RFC 3264 update section added.

   o  Indicating that a specific payload type value can be used in
      multiple "m=" lines, if the value represents the same codec
      configuration in each "m=" line.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-04

   o  Updated Offerer procedures (http://www.ietf.org/mail-
      archive/web/mmusic/current/msg12293.html).

   o  Updated Answerer procedures (http://www.ietf.org/mail-
      archive/web/mmusic/current/msg12333.html).

   o  Usage of SDP 'bundle-only' attribute added.

   o  Reference to Trickle ICE document added.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-02

   o  Mechanism modified, to be based on usage of SDP Offers with both
      different and identical port number values, depending on whether
      it is known if the remote endpoint supports the extension.

   o  Cullen Jennings added as co-author.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-01

   o  No changes.  New version due to expiration.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-00

   o  No changes.  New version due to expiration.

   Changes from draft-holmberg-mmusic-sdp-multiplex-negotiation-00

   o  Draft name changed.

   o  Harald Alvestrand added as co-author.

   o  "Multiplex" terminology changed to "bundle".

   o  Added text about single versus multiple RTP Sessions.




Holmberg, et al.          Expires March 9, 2015                [Page 37]

Internet-Draft                Bundled media               September 2014


   o  Added reference to RFC 3550.

19.  References

19.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3264]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
              with Session Description Protocol (SDP)", RFC 3264, June
              2002.

   [RFC4566]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", RFC 4566, July 2006.

   [RFC5234]  Crocker, D. and P. Overell, "Augmented BNF for Syntax
              Specifications: ABNF", STD 68, RFC 5234, January 2008.

   [RFC5285]  Singer, D. and H. Desineni, "A General Mechanism for RTP
              Header Extensions", RFC 5285, July 2008.

   [RFC5761]  Perkins, C. and M. Westerlund, "Multiplexing RTP Data and
              Control Packets on a Single Port", RFC 5761, April 2010.

   [RFC5888]  Camarillo, G. and H. Schulzrinne, "The Session Description
              Protocol (SDP) Grouping Framework", RFC 5888, June 2010.

   [I-D.mmusic-sdp-mux-attributes]
              Nandakumar, S., "A Framework for SDP Attributes when
              Multiplexing", draft-ietf-mmusic-sdp-mux-attributes-02
              (work in progress), July 2014.

19.2.  Informative References

   [RFC3550]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, RFC 3550, July 2003.

   [RFC3605]  Huitema, C., "Real Time Control Protocol (RTCP) attribute
              in Session Description Protocol (SDP)", RFC 3605, October
              2003.

   [RFC5245]  Rosenberg, J., "Interactive Connectivity Establishment
              (ICE): A Protocol for Network Address Translator (NAT)
              Traversal for Offer/Answer Protocols", RFC 5245, April
              2010.




Holmberg, et al.          Expires March 9, 2015                [Page 38]

Internet-Draft                Bundled media               September 2014


   [RFC5576]  Lennox, J., Ott, J., and T. Schierl, "Source-Specific
              Media Attributes in the Session Description Protocol
              (SDP)", RFC 5576, June 2009.

   [RFC5764]  McGrew, D. and E. Rescorla, "Datagram Transport Layer
              Security (DTLS) Extension to Establish Keys for the Secure
              Real-time Transport Protocol (SRTP)", RFC 5764, May 2010.

   [I-D.ietf-mmusic-trickle-ice]
              Ivov, E., Rescorla, E., and J. Uberti, "Trickle ICE:
              Incremental Provisioning of Candidates for the Interactive
              Connectivity Establishment (ICE) Protocol", draft-ietf-
              mmusic-trickle-ice-01 (work in progress), February 2014.

Appendix A.  Design Considerations

A.1.  General

   One of the main issues regarding the BUNDLE grouping extensions has
   been whether, in SDP Offers and SDP Answers, the same port number
   value should be inserted in "m=" lines associated with a BUNDLE
   group, as the purpose of the extension is to negotiate the usage of a
   single 5-tuple for media associated with the "m=" lines.  Issues with
   both approaches, discussed in the Appendix have been raised.  The
   outcome was to specify a mechanism which uses SDP Offers with both
   different and identical port number values.

   Below are the primary issues that have been considered when defining
   the "BUNDLE" grouping extension:

   o  1) Interoperability with existing UAs.

   o  2) Interoperability with intermediary B2BUA- and proxy entities.

   o  3) Time to gather, and the number of, ICE candidates.

   o  4) Different error scenarios, and when they occur.

   o  5) SDP Offer/Answer impacts, including usage of port number value
      zero.

   NOTE: Before this document is published as an RFC, this
   Appendix might be removed.








Holmberg, et al.          Expires March 9, 2015                [Page 39]

Internet-Draft                Bundled media               September 2014


A.2.  UA Interoperability

   Consider the following SDP Offer/Answer exchange, where Alice sends
   an SDP Offer to Bob:


   SDP Offer

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       m=audio 10000 RTP/AVP 97
       a=rtpmap:97 iLBC/8000
       m=video 10002 RTP/AVP 97
       a=rtpmap:97 H261/90000




   SDP Answer

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       m=audio 20000 RTP/AVP 97
       a=rtpmap:97 iLBC/8000
       m=video 20002 RTP/AVP 97
       a=rtpmap:97 H261/90000


   RFC 4961 specifies a way of doing symmetric RTP but that is an a
   later invention to RTP and Bob can not assume that Alice supports RFC
   4961.  This means that Alice may be sending RTP from a different port
   than 10000 or 10002 - some implementation simply send the RTP from an
   ephemeral port.  When Bob's endpoint receives an RTP packet, the only
   way that Bob know if it should be passed to the video or audio codec
   is by looking at the port it was received on.  This lead some SDP
   implementations to use the fact that each "m=" line had a different
   port number to use that port number as an index to find the correct m
   line in the SDP.  As a result, some implementations that do support
   symmetric RTP and ICE still use a SDP data structure where SDP with
   "m=" lines with the same port such as:





Holmberg, et al.          Expires March 9, 2015                [Page 40]

Internet-Draft                Bundled media               September 2014


   SDP Offer

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       m=audio 10000 RTP/AVP 97
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 98
       a=rtpmap:98 H261/90000



   will result in the second "m=" line being considered an SDP error
   because it has the same port as the first line.

A.3.  Usage of port number value zero

   In an SDP Offer or SDP Answer, the media associated with an "m=" line
   can be disabled/rejected by setting the port number value to zero.
   This is different from e.g. using the SDP direction attributes, where
   RTCP traffic will continue even if the SDP "inactive" attribute is
   indicated for the associated "m=" line.

   If each "m=" line associated with a BUNDLE group would contain
   different port number values, and one of those port would be used for
   the 5-tuple, problems would occur if an endpoint wants to disable/
   reject the "m=" line associated with that port, by setting the port
   number value to zero.  After that, no "m=" line would contain the
   port number value which is used for the 5-tuple.  In addition, it is
   unclear what would happen to the ICE candidates associated with the
   "m=" line, as they are also used for the 5-tuple.

A.4.  B2BUA And Proxy Interoperability

   Some back to back user agents may be configured in a mode where if
   the incoming call leg contains an SDP attribute the B2BUA does not
   understand, the B2BUS still generates that SDP attribute in the Offer
   for the outgoing call leg.  Consider an B2BUA that did not understand
   the SDP "rtcp" attribute, defined in RFC 3605, yet acted this way.
   Further assume that the B2BUA was configured to tear down any call
   where it did not see any RTCP for 5 minutes.  In this cases, if the
   B2BUA received an Offer like:







Holmberg, et al.          Expires March 9, 2015                [Page 41]

Internet-Draft                Bundled media               September 2014


   SDP Offer

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       m=audio 49170 RTP/AVP 0
       a=rtcp:53020



   It would be looking for RTCP on port 49172 but would not see any
   because the RTCP would be on port 53020 and after five minutes, it
   would tear down the call.  Similarly, an SBC that did not understand
   BUNDLE yet put BUNDLE in it's offer may be looking for media on the
   wrong port and tear down the call.  It is worth noting that a B2BUA
   that generated an Offer with capabilities it does not understand is
   not compliant with the specifications.

A.4.1.  Traffic Policing

   Sometimes intermediaries do not act as B2BUA, in the sense that they
   don't modify SDP bodies, nor do they terminate SIP dialogs.  Still,
   however, they may use SDP information (e.g.  IP address and port) in
   order to control traffic gating functions, and to set traffic
   policing rules.  There might be rules which will trigger a session to
   be terminated in case media is not sent or received on the ports
   retrieved from the SDP.  This typically occurs once the session is
   already established and ongoing.

A.4.2.  Bandwidth Allocation

   Sometimes intermediaries do not act as B2BUA, in the sense that they
   don't modify SDP bodies, nor do they terminate SIP dialogs.  Still,
   however, they may use SDP information (e.g. codecs and media types)
   in order to control bandwidth allocation functions.  The bandwidth
   allocation is done per "m=" line, which means that it might not be
   enough if media associated with all "m=" lines try to use that
   bandwidth.  That may either simply lead to bad user experience, or to
   termination of the call.

A.5.  Candidate Gathering

   When using ICE, an candidate needs to be gathered for each port.
   This takes approximately 20 ms extra for each extra "m=" line due to
   the NAT pacing requirements.  All of this gather can be overlapped
   with other things while the page is loading to minimize the impact.



Holmberg, et al.          Expires March 9, 2015                [Page 42]

Internet-Draft                Bundled media               September 2014


   If the client only wants to generate TURN or STUN ICE candidates for
   one of the "m=" lines and then use trickle ICE
   [I-D.ietf-mmusic-trickle-ice] to get the non host ICE candidates for
   the rest of the "m=" lines, it MAY do that and will not need any
   additional gathering time.

   Some people have suggested a TURN extension to get a bunch of TURN
   allocation at once.  This would only provide a single STUN result so
   in cases where the other end did not support BUNDLE, may cause more
   use of the TURN server but would be quick in the cases where both
   sides supported BUNDLE and would fall back to a successful call in
   the other cases.

Authors' Addresses

   Christer Holmberg
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   Email: christer.holmberg@ericsson.com


   Harald Tveit Alvestrand
   Google
   Kungsbron 2
   Stockholm  11122
   Sweden

   Email: harald@alvestrand.no


   Cullen Jennings
   Cisco
   400 3rd Avenue SW, Suite 350
   Calgary, AB  T2P 4H2
   Canada

   Email: fluffy@iii.ca











Holmberg, et al.          Expires March 9, 2015                [Page 43]
