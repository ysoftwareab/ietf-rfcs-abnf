

Network Working Group                                           A. Niemi
Internet-Draft                                                     Nokia
Expires: August 28, 2003                               February 27, 2003


       Requirements for Limiting the Rate of Event Notifications
               draft-niemi-sipping-event-throttle-reqs-01

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 28, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

Abstract

   All event packages are required to specify a maximum rate at which
   event notifications are generated by a single notifier.  Such a limit
   is provided in order to reduce network congestion.  In addition to
   the fixed limits introduced by specific event packages, further
   mechanisms for limiting the rate of event notification are also
   allowed to be defined by event package specifications but none have
   been specified so far.  This memo discusses the requirements for a
   throttle mechanism that allows a subscriber to further limit the rate
   of event notification.






Niemi                   Expires August 28, 2003                 [Page 1]

Internet-Draft        Event Throttle Requirements          February 2003


Table of Contents

   1. Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2. Conventions  . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   3. Event Throttle Model . . . . . . . . . . . . . . . . . . . . . . 3
   4. Example Use Case . . . . . . . . . . . . . . . . . . . . . . . . 4
   5. Requirements . . . . . . . . . . . . . . . . . . . . . . . . . . 4
   6. Security Considerations  . . . . . . . . . . . . . . . . . . . . 5
   7. Open Issues  . . . . . . . . . . . . . . . . . . . . . . . . . . 6
      Normative References . . . . . . . . . . . . . . . . . . . . . . 6
      Informative References . . . . . . . . . . . . . . . . . . . . . 6
      Author's Address . . . . . . . . . . . . . . . . . . . . . . . . 7
   A. Changes to draft-niemi-sipping-event-throttle-reqs-00  . . . . . 7
   B. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . 7
      Intellectual Property and Copyright Statements . . . . . . . . . 8




































Niemi                   Expires August 28, 2003                 [Page 2]

Internet-Draft        Event Throttle Requirements          February 2003


1. Introduction

   The SIP events framework described in RFC 3265 [2] mandates that each
   event package specification defines an absolute maximum on the rate
   at which notifications are allowed to be generated by a single
   notifier.  Such a limit is provided in order to reduce network
   congestion.

   All of the existing event package specifications include a maximum
   notification rate recommendation, ranging from once in every five
   seconds [3], [4], [5] to once per second [6].

   Per the SIP events framework, each event package specification is
   also allowed to define additional throttling mechanisms which allow
   the subscriber to further limit the rate of event notification.  So
   far none of the event package specifications have defined such
   throttling mechanisms.

   This memo discusses the requirements for a generic throttling
   mechanism, which allows the subscriber to limit the rate of event
   notifications.  It is intended that the throttle mechanism is not
   event package specific, but commonly available to be used with all
   event subscriptions.

2. Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 [1].

3. Event Throttle Model

   The model assumed for the event throttle mechanism is similar to the
   one described in [6].  In it, the notifier employs a quarantine for
   outgoing notifications, in which outgoing notifications are kept for
   a certain amount of time before they are actually sent out to the
   subscriber.  In general, the policy by which queueing notifications
   inside the quarantine are treated is not specified.  For example, an
   incoming notification might simply replace an existing notification
   [6], or the quarantine could merge the states of all of the
   quarantined notifications.

   The throttle mechanism is intended to enable the quarantine period to
   be configured by the subscriber.  Further, the quarantine can be
   strict, or can also employ a leaky-bucket style algorithm, in which
   on average the quarantine period might hold, but occasional bursts
   might also be allowed.




Niemi                   Expires August 28, 2003                 [Page 3]

Internet-Draft        Event Throttle Requirements          February 2003


      OPEN ISSUE: Do we want to consider both models for event
      throttles, or is only the strict limit really usable?

   The main implication of this model for event throttles is that they
   are lossy.  Either some state changes are lost, or some level of
   accuracy in notifications is lost.  The former will affect state
   changes that occur more frequent than what the throttled rate
   defines; and the latter will affect notifications of "stateless"
   nature, e.g., location updates within a quarantine period will be
   lost.

4. Example Use Case

   There are many applications that potentially would make use of a
   throttle mechanism.  This chapter only illustrates one possible use
   case, in which a mobile device uses the event throttling mechanism to
   limit the amount of traffic it may receive.

   A mobile application is watching the state of 100 presentities each
   generating notifications at a maximum rate of once per five seconds.
   Assuming that the arrival times of notifications are evenly
   distributed, this will result in a maximum notification frequency of:

        f = 100 * (1 / 5s) = 100 / 5 Hz = 20 Hz

   experienced by the mobile.  The same watcher subscribing using a
   throttle mechanism to limit the maximum rate at which notifications
   are to be generated to once per 20 seconds can expect a maximum
   notification frequency of:

        f = 100 * (1 / 20s) = 100 / 20 Hz = 5 Hz

   thus resulting in 75% reduction in the maximum rate of incoming
   presence notifications.

      Note that the actual rate of notification is the sum of many
      factors, and this example only makes a very broad assumption on
      the absolute maximum rate at which the notifications might be
      generated.


5. Requirements

   REQ1: The subscriber MUST be able to limit using a throttle mechanism
         the maximum rate at which the notifier is allowed to generate
         notifications in a subscription.





Niemi                   Expires August 28, 2003                 [Page 4]

Internet-Draft        Event Throttle Requirements          February 2003


   REQ2: The subscriber MUST be able to indicate that it requires the
         use of a throttle mechanism in the subscription.

   REQ3: The notifier MUST be able to indicate that it does not support
         the use of a throttle mechanism in the subscription.

   REQ4: It MUST be possible to use the throttle mechanism in
         subscriptions to all events.

   REQ5: It MUST be possible to use the throttle mechanism together with
         any event filtering mechanism.

   REQ6: The notifier MUST be allowed to use a maximum rate lower than
         the one given by the subscriber.  For example, local policy
         could dictate an even lower rate of notification than what the
         subscriber requires.

   REQ7: Authentication and integrity protection SHOULD be applied to
         subscriptions that apply the throttle mechanism.

      Note that Section 6 contains further discussion on the security
      implications of the throttle mechanism.


6. Security Considerations

   Naturally all of the security considerations for event subscriptions
   and notifications also apply to subscriptions and notifications that
   use the throttle mechanism.  In addition, using the event throttle
   mechanism introduces some new security issues to consider:

      The throttle mechanism might allow a subscriber to set a very low
      maximum notification rate - one that possibly exceeds the
      subscription expiration.  Such a limit inserted by a malicious
      third party would result in very few if any notifications to be
      generated, which could be perceived as theft of service to the
      subscriber.

      Similarly, the throttle mechanism might allow the subscriber to
      set a very high maximum rate of notification that possibly is
      higher than the default recommended rate of notification.  Such a
      high rate inserted by a malicious third party could result in
      denial of service of the notifier due to performance issues.

      Using the throttle mechanism potentially allows a subscriber to
      increase the number of active subscriptions due to the decrease in
      the maximum rate of notifications generated by a single notifier.
      If a malicious third party is able to remove the throttle from the



Niemi                   Expires August 28, 2003                 [Page 5]

Internet-Draft        Event Throttle Requirements          February 2003


      subscriptions, the subscriber might be flooded with notifications.

   All of the above problems can be avoided by ensuring that the
   integrity and authenticity of subscriptions is protected by applying
   relevant security measures.

7. Open Issues

   This chapter lists the main open issues within this document.

   ISSUE1:  Is the offered model accurate and appropriate?

   ISSUE2:  Within the model, do we have a need to enable both the
            leaky-bucket and the strict rate limiting models at the same
            time, or is only one of them enough?

   ISSUE3:  Is it enough to leave the handling of notifications in the
            qarantine out-of-scope, or are there requirements for that
            as well that should be captured by this document

   ISSUE4:  Are the threats listed in the security section really valid

   ISSUE5:  Is the added value of event throttles enough to merit their
            standardization?

Normative References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

Informative References

   [2]  Roach, A., "Session Initiation Protocol (SIP)-Specific Event
        Notification", RFC 3265, June 2002.

   [3]  Rosenberg, J., "A Presence Event Package for the Session
        Initiation Protocol (SIP)", draft-ietf-simple-presence-10 (work
        in progress), January 2003.

   [4]  Rosenberg, J., "A Session Initiation Protocol (SIP) Event
        Package for Registrations", draft-ietf-sipping-reg-event-00
        (work in progress), October 2002.

   [5]  Rosenberg, J., "A Watcher Information Event Template-Package for
        the Session Initiation  Protocol (SIP)",
        draft-ietf-simple-winfo-package-05 (work in progress), January
        2003.




Niemi                   Expires August 28, 2003                 [Page 6]

Internet-Draft        Event Throttle Requirements          February 2003


   [6]  Mahy, R., "A Message Summary and Message Waiting Indication
        Event Package for the  Session Initiation Protocol (SIP)",
        draft-ietf-sipping-mwi-01 (work in progress), November 2002.


Author's Address

   Aki Niemi
   Nokia
   P.O. Box 321
   NOKIA GROUP, FIN  00045
   Finland

   Phone: +358 50 389 1644
   EMail: aki.niemi@nokia.com

Appendix A. Changes to draft-niemi-sipping-event-throttle-reqs-00

   Changes to this version include:

   o  Added the chapter describing the model for event throttles.

   o  Reworded the requirements to reflect the model discussion

   o  Added acknowledgements, changelog, and open issues sections


Appendix B. Acknowledgements

   The author would like to thank Tim Moran, Jonathan Rosenberg, Hisham
   Khartabil, Juha Kalliokulju, Paul Kyzivat and Henning Schulzrinne for
   their valuable comments.



















Niemi                   Expires August 28, 2003                 [Page 7]

Internet-Draft        Event Throttle Requirements          February 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Niemi                   Expires August 28, 2003                 [Page 8]

Internet-Draft        Event Throttle Requirements          February 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Niemi                   Expires August 28, 2003                 [Page 9]

