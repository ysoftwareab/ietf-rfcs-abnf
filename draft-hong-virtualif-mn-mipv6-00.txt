



Network Working Group                                          Y-G. Hong
Internet-Draft                                                 J-C.  Lee
Expires: April 17, 2006                                        J-S. Park
                                                               H-J.  Kim
                                                                    ETRI
                                                        October 16, 2005


   Virtual network interface for multiple interfaces in a Mobile node
                           using Mobile IPv6
                    draft-hong-virtualif-mn-mipv6-00

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 17, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   The use of Mobile IPv6 in a mobile node and NEMO Basic Support in a
   mobile router with multiple network interfaces may have some
   problems.  This document discusses how to solve the problems of
   multiple interfaces in a mobile node and proposes a virtual network
   interface model which describes the use of Mobile IPv6 to support



Hong, et al.             Expires April 17, 2006                 [Page 1]

Internet-Draft  Virtual network interface model for a MN    October 2005


   multiple network interfaces in a mobile node.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Introduction of a Virtual network interface model  . . . . . .  4
   3.  Motivations of using of a virtual network interface model  . .  5
     3.1.  Mobile IPv6-specific Issues  . . . . . . . . . . . . . . .  5
     3.2.  General network Issues . . . . . . . . . . . . . . . . . .  5
   4.  Mechanism to use a virtual network interface in a mobile
       node . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  7
     4.1.  Architecture of a virtual network interface model in a
           mobile node  . . . . . . . . . . . . . . . . . . . . . . .  7
     4.2.  Operations of Mobile IPv6 in a mobile node with a
           virtual network interface model  . . . . . . . . . . . . .  8
   5.  Conclusions  . . . . . . . . . . . . . . . . . . . . . . . . .  9
   6.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 10
     6.1.  Normative References . . . . . . . . . . . . . . . . . . . 10
     6.2.  Informative References . . . . . . . . . . . . . . . . . . 10
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 11
   Intellectual Property and Copyright Statements . . . . . . . . . . 12





























Hong, et al.             Expires April 17, 2006                 [Page 2]

Internet-Draft  Virtual network interface model for a MN    October 2005


1.  Introduction

   In traditional TCP/IP network environments, a communication entity
   usually has a wire connection with a single network interface and it
   is fixed.  As an introduction of wireless technologies and
   heterogeneous access technologies, a communication entity is able to
   move around between different networks and have multiple network
   interfaces [3].

   Because traditional network applications and TCP/IP stack are
   developed for a communication entity which has a single network
   interface, the adoption of multiple network interfaces into a general
   communication entity makes some problems.  Mobile IPv6[1] and NEMO
   Basic Support[2] are also developed for a mobile node which has a
   single network interface and a mobile router which has a single
   egress network interface and we cannot directly use Mobile IPv6 for a
   mobile node with multiple network interfaces [4,5].

   In order to solve the problems mentioned above, we propose a virtual
   network interface model for a mobile node with multiple network
   interfaces.  We currently use a virtual network interface model to
   provide the duplication of network connections with multiple network
   interface cards on an important network node.  With a virtual network
   interface model, the mobile node with multiple network interfaces can
   operate as it has a single network interface irrespective to the
   number of network interfaces.  We have implemented a mobile node and
   a mobile router with one WLAN interface and one CDMA interface using
   this virtual network interface model and checked that this approach
   can be a good solution to handle multiple network interfaces in a
   mobile node or a mobile router.





















Hong, et al.             Expires April 17, 2006                 [Page 3]

Internet-Draft  Virtual network interface model for a MN    October 2005


2.  Introduction of a Virtual network interface model

   In some Operating Systems such as Linux (or Unix), most network
   interfaces, such as eth0, wlan0, and ppp0, are associated to a
   physical device that is in charge of transmitting and receiving data
   packets.  However, there are exceptions to this rule, and some
   logical network interfaces do not feature any physical packet
   transmission [7].  The virtual network interface model is not a real
   physical device and it is a logical network interface.  It has
   connections with physical devices within a network entity and the
   path between the virtual network interface and real physical devices
   is determined dynamically according to some policy.  The virtual
   network interface is registered to network layer and is regarded as a
   general network interface.  Then real physical interfaces are
   connected to the virtual network interface.  The network layer does
   not know the existence of these physical interfaces.

   The virtual network interface model can be used for the duplication
   of network connections (the duplication of network interface cards)
   for fault tolerance or load sharing.  If an important server has
   multiple physical network interface cards, it can survive even though
   one network interface card is down.  It can keep a communication
   session with other live network interface cards.  In this case, the
   presence of multiple network interface cards can be hidden to network
   layer and network layer regards the virtual network interface as a
   general network interface.  The traditional network applications and
   network modules do not need to be modified to support multiple
   network interfaces.

   We can use this approach in a mobile node which is using Mobile IPv6
   and has multiple network interfaces.  Although the purpose of the
   above case is not the same, using a virtual network interface model
   in a multiple interface mobile node can be sufficiently one of the
   solutions to solve the problems of the multiple interfaces in a
   mobile node using Mobile IPv6.
















Hong, et al.             Expires April 17, 2006                 [Page 4]

Internet-Draft  Virtual network interface model for a MN    October 2005


3.  Motivations of using of a virtual network interface model

   In this section, we describe the motivations of the use of a virtual
   network interface model.  To describe the motivations, we present
   some problems of multiple network interfaces in a mobile node which
   are using Mobile IPv6.  The document [4] lists the issues of Mobile
   IPv6 that prevent the use of multiple interfaces in a mobile node.
   Another document [5] also presents the problematic of having multiple
   interfaces.  The document [6] describes the problems for a mobile
   node which has multiple interfaces when it uses Mobile IPv6 as an
   aspect of a node.

3.1.  Mobile IPv6-specific Issues

   Because a mobile node in Mobile IPv6 knows its movement by comparing
   the prefix information which is included in Router Advertisement
   messages, the receiving of Router Advertisement message is an
   important job to initiate other Mobile IPv6 operations.  To determine
   network movement, a mobile node carefully observes received Router
   Advertisement message through one specific network interface which is
   configured when Mobile IPv6 module starts.  If a mobile node has
   multiple network interfaces, after it moves to another networks and
   not the specific network interface but another network interface is
   used to receive Router Advertisement messages, a mobile node must
   have the capability to observe the two network interfaces
   simultaneously.  But Mobile IPv6 and currently implemented Mobile
   IPv6 code (HUT MIPL)[8] do not support this feature.

   Question) To support this feature, which module (layer) should have
   this capability to observe all Router Advertisement messages through
   multiple network interfaces?

3.2.  General network Issues

   Traditional network applications and TCP/IP stacks do not consider
   about the change of network addresses and the change of network
   interfaces.  The change of network address can be solved by the use
   of Mobile IPv6.  But the change of network interfaces is not fully
   studied.

   The problem of multiple network interfaces in a mobile node is the
   relation between a destination address and a network interface.  When
   a network application sends packets to another node, firstly looks up
   the routing table and finds a appropriate network interface according
   to the destination address.  When a mobile node moves to another
   network, even though it gets a new Care of Address through another
   network interface, the destination address is not changed.  The
   destination address is continually mapped to the previous network



Hong, et al.             Expires April 17, 2006                 [Page 5]

Internet-Draft  Virtual network interface model for a MN    October 2005


   interface.  If this situation happens, the communication sessions
   will be terminated.  When a network interface is newly selected to
   send/receive packets, a mobile node should update the relation
   between a destination address and a network interface.

   Question) To update the information for the relation between a
   destination address and a network interface, which module (layer)
   should do that job?  (In Linux, making a network interface up and
   down (e.g. ifconfig eth0 down, ifconfig eth1 up) automatically
   updates the relation between a destination address and a network
   interface.  But, we think that this approach is not reasonable.)








































Hong, et al.             Expires April 17, 2006                 [Page 6]

Internet-Draft  Virtual network interface model for a MN    October 2005


4.  Mechanism to use a virtual network interface in a mobile node

   To answer the questions in the previous section, we think that there
   are many answers.  To choose the best answer, there are also many
   considerations (The considerations are out of the scope of this
   document).

   To answer the questions, we propose a virtual network interface
   model.  In this section, we describe a mechanism to use a virtual
   network interface in a mobile node which uses Mobile IPv6.  The
   virtual network interface model can be used for a mobile router which
   has multiple egress interfaces in NEMO Basic Support.

4.1.  Architecture of a virtual network interface model in a mobile node

   In the following figure, network interfaces I1, I2 are real network
   interfaces.  The network interface VI is a virtual network interface.
   The virtual network interface is connected to the real network
   interfaces and it is shown to the network layer.  In this model, the
   IP layer including Mobile IPv6 module use the virtual network
   interface VI instead of real network interfaces I1, I2.  To handle
   the virtual network interface, a mobile node needs a specific module
   (IFS: Interface Switching Module) to manage the virtual network
   interface and selects the path between the virtual network interface
   and real network interfaces.


                      +-------------------------------+
                      |        Applications           |
                      |-------------------------------|
                      |        TCP/UDP/SCTP           |
                      |-------------------------------|
                      |    IPv6 / Mobile IPv6         |
                      |-------------------------------|
                      |      +------------------+   +--------+
                      |      | Virtual Interface|   |   IFS  |
                      |      |       (VI)       |   +--------+
                      |      +------------------+     |
                      |           /        \          |
                      |          /          \         |
                      | +------------+ +------------+ |
                      | | Interface 1| | Interface 2| |
                      | |   (I1)     | |   (I2)     | |
                      | +------------+ +------------+ |
                      +-------------------------------+






Hong, et al.             Expires April 17, 2006                 [Page 7]

Internet-Draft  Virtual network interface model for a MN    October 2005


   Figure 1.  Architecture of a virtual network interface model in a
            mobile nodeA mobile node with two interfaces

4.2.  Operations of Mobile IPv6 in a mobile node with a virtual network
      interface model

   When a Mobile IPv6 or NEMO Basic Support module starts, the virtual
   network interface module is configured to send and receive packets.
   In the above figure, if the mobile node uses a network interface I1,
   the path between the virtual network interface VI and the real
   network interface I1 is made.  When sending packets to another node,
   packets are delivered to VI and these packets are also flowed into I1
   according to the path configuration.  When receiving packets from
   another node, packets are delivered to I1 and these packets are also
   flowed into VI according to the path configuration.  The packets
   which are delivered to VI are processed by Mobile IPv6 module.  If a
   mobile node moves into another network and it chooses network
   interface I2, the path between the virtual network interface VI and
   the real network interface I2 is made.  The IFS module updates the
   relation between a destination address and a network interface.  When
   the mobile node is sending packets to another node, packets are
   delivered to VI and these packets are flowed into I2 according to the
   path configuration.  When the mobile node is receiving packets from
   another node, packets are delivered to I2 and these packets are also
   flowed into VI according to the path configuration.


























Hong, et al.             Expires April 17, 2006                 [Page 8]

Internet-Draft  Virtual network interface model for a MN    October 2005


5.  Conclusions

   Mobile IPv6 and NEMO Basic Support are developed for a mobile node
   with s single network interface.  In traditional TCP/IP network
   environments, a communication entity does not consider the change of
   network interfaces.  To support multiple network interfaces in a
   mobile node used at traditional TCP/IP network environments, we
   propose a virtual network interface model.  The proposed mechanism
   can solve the problems of multiple interfaces in a mobile node.










































Hong, et al.             Expires April 17, 2006                 [Page 9]

Internet-Draft  Virtual network interface model for a MN    October 2005


6.  References

6.1.  Normative References

   [1]   Johnson, D., Perkins, C. and J. Arkko, "Mobility Support in
         IPv6", RFC 3775, June 2004.

   [2]   Devarapalli, V., Wakikawa, R., Petrescu, A. and Thubert, P.,
         "Network Mobility (NEMO) Basic Support Protocol", RFC 3963,
         January 2005.              

6.2.  Informative References

   [3]   Ernst, T., Montavont, N., Wakikawa, R., Paik, E., and K.
         Kuladinithi, "Goals and Benefits of Multihoming",
         draft-ernst-generic-goals-and-benefits-01 (work in 
         progress), February 2005.
           
   [4]   Montavont, N., Wakikawa, R., Ernst, T., Ng, C-W., and K.
         Kuladinithi, "Analysis of Multihoming in Mobile IPv6",
         draft-montavont-mobileip-multihoming-pb-statement-04 (work in
         progress), June 2005.

   [5]   Montavont, N., Noel, T. and Kassi-Lahlou, M., "Mobile IPv6
         for multiple interfaces (MMI)", draft-montavont-mip6-mmi-02.
         txt (work in progress), July 2005.

   [6]   Y-G Hong, J-C Lee, J-S Park and H-J Kim, "Analysis of
         multiple interfaces in a Mobile Node", draft-hong-multipleif
         -mn-pb-statement-00.txt (work in progress), October 2005.

   [7]   Alessandro Rubini, Linux Virtual Network Interfaces,
         http://www.linux-mag.com/2000-04/gear_01.html
           
   [8]   MIPL Mobile IPv6 for Linux, http://www.mobile-ipv6.org           
















Hong, et al.             Expires April 17, 2006                [Page 10]

Internet-Draft  Virtual network interface model for a MN    October 2005


Authors' Addresses

   Yong-Geun Hong
   ETRI
   161 Gajeong-dong Yuseong-gu
   Daejeon, 305-350
   Korea

   Phone: +82 42 860 6557
   Email: yghong@etri.re.kr


   Joo-Chul Lee
   ETRI
   161 Gajeong-dong Yuseong-gu
   Daejeon, 305-350
   Korea

   Phone: +82 42 860 1021
   Email: rune@etri.re.kr


   Jung-Soo Park
   ETRI
   161 Gajeong-dong Yuseong-gu
   Daejeon, 305-350
   Korea

   Phone: +82 42 860 6514
   Email: pjs@etri.re.kr


   Hyoung-Jun Kim
   ETRI
   161 Gajeong-dong Yuseong-gu
   Daejeon, 305-350
   Korea

   Phone: +82 42 860 6576
   Email: khj@etri.re.kr











Hong, et al.             Expires April 17, 2006                [Page 11]

Internet-Draft  Virtual network interface model for a MN    October 2005


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2005).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Hong, et al.             Expires April 17, 2006                [Page 12]


