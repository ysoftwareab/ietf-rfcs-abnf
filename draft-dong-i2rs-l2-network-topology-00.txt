



Network Working Group                                            J. Dong
Internet-Draft                                                    X. Wei
Intended status: Experimental                        Huawei Technologies
Expires: April 24, 2015                                 October 21, 2014


            A YANG Data Model for Layer-2 Network Topologies
                 draft-dong-i2rs-l2-network-topology-00

Abstract

   This document defines a YANG data model for layer-2 network
   topologies.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 24, 2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Dong & Wei               Expires April 24, 2015                 [Page 1]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Layer-2 Topology Model  . . . . . . . . . . . . . . . . . . .   2
   3.  Layer-2 Topology Yang Module  . . . . . . . . . . . . . . . .   5
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  11
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  11
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  11
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .  11
     6.2.  Informative References  . . . . . . . . . . . . . . . . .  12
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  12

1.  Introduction

   [I-D.medved-i2rs-topology-im] specifies the generic network topology
   information model, and approaches to extend the generic network
   topology information model to specific type of network topologies.
   It also provides the extensions made for Layer-3 unicast IGP, IS-IS
   and OSPF topologies.  [I-D.clemm-i2rs-yang-network-topo] defines the
   Yang [RFC6020] [RFC6021] data models for generic network topology, L3
   unicast IGP, IS-IS, OSPF and TED which are derived from the
   information model defined in [I-D.medved-i2rs-topology-im].

   Besides the information collected through "live" layer-3 IGP,
   [I-D.amante-i2rs-topology-use-cases] also specifies the collection of
   network information which is not visible within the Layer 3 IGP's
   LSDB.  Such information can be links, nodes, or properties of those
   links or nodes in lower layers of the network.  The requirements on
   the topology data model in [I-D.medved-i2rs-topology-requirements]
   also include the physical properties associated with the ports/
   interfaces, and information associated with the network element's
   immediately adjacent neighbors.

   This document defines the Yang data model for layer-2 network
   topologies by extending the generic network topology data model
   defined in [I-D.clemm-i2rs-yang-network-topo].

2.  Layer-2 Topology Model

   In order to represent a layer-2 network topology, the generic network
   topology model needs to be extended to contain layer-2 specific
   information.  Module "l2-topology" applies the generic network
   topology model to layer-2 network topologies, and augments the




Dong & Wei               Expires April 24, 2015                 [Page 2]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


   generic network topology with information specific to layer-2
   networks.

   The relationship between the l2-topology model and the generic
   network topology model is shown in the figure below:

                          +---------------------+
                          |   network-topology  |
                          +----------+----------+
                                     ^
                                     |
                                     |
                          +----------^----------+
                          |    l2-topology      |
                          +---------------------+
            Figure 1. L2-topology and generic network-topology

   For layer-2 network topology, there are some layer-2 specific data
   and attributes to be added to the generic network topology model,
   such as properties of layer-2 links or nodes, descriptions, layer-2
   addresses, etc.  Information collected through LLDP and LLDP-MED
   could be included in the layer-2 network topology.

   The structure of "L2-topology" data model is depicted in the
   following diagram.  Brackets enclose list keys, "rw" means
   configuration data, "ro" means operational state data, "?" designates
   optional nodes, "*" designates nodes that can have multiple
   instances.  Parantheses enclose choice and case nodes.























Dong & Wei               Expires April 24, 2015                 [Page 3]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


  module: l2-topology
  augment /nt:network-topology/nt:topology/nt:topology-types:
     +--rw l2-topology!
  augment /nt:network-topology/nt:topology:
     +--rw l2-topology-attributes
        +--rw name?   string
        +--rw flag*   flag-type
  augment /nt:network-topology/nt:topology/nt:node:
     +--rw l2-node-attributes
        +--rw name?                   string
        +--rw description?            string
        +--rw chassis-id?             yang:mac-address
        +--rw management-address*     inet:ip-prefix
        +--rw management-vid?         vlan
        +--rw capabilities-support?   bits
        +--rw capabilities-enable?    bits
        +--rw flag*                   flag-type
  augment /nt:network-topology/nt:topology/nt:link:
     +--rw l2-link-attributes
        +--rw name?   string
        +--rw rate?   decimal64
        +--rw flag*   flag-type
  augment /nt:network-topology/nt:topology/nt:node/nt:termination-point:
     +--rw l2-termination-point-attributes
        +--rw description?          string
        +--rw mac-address?          yang:mac-address
        +--rw port-vlan-id?         vlan
        +--rw ppvid
        |  +--rw ppvid?         vlan
        |  +--rw ppvid-flags?   bits
        +--rw vlan-name* [vlan-id]
        |  +--rw vlan-id      vlan
        |  +--rw vlan-name?   string
        +--rw auto-negotiation?     bits
        +--rw link-aggregation
        |  +--rw aggregation-status?   bits
        |  +--rw aggregated-port-id?   string
        +--rw oper-mau?             bits
        +--rw maximum-frame-size?   uint32

   The L2-topology module augments the generic network-topology module
   as follows:

   o  A new topology type "l2-topology-type" is introduced.  This is
      represented by a container object, and is inserted under the
      "topology-types" container of the generic network-topology module
      in [I-D.clemm-i2rs-yang-network-topo].




Dong & Wei               Expires April 24, 2015                 [Page 4]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


   o  Additional topology attributes are introduced in a grouping "l2-
      topology-attributes", which augments the "topology" list of the
      network topology module in [I-D.clemm-i2rs-yang-network-topo].
      The attributes include an Layer-2 topology name and a set of
      flags.  Each type of flag is represented by a separate identity.

   o  Additional data objects for nodes are introduced by augmenting the
      "node" list of the generic network-topology module.  New objects
      include a series of node properties and parameters, as well as a
      set of flags.

   o  Additional data objects for termination points are introduced by
      augmenting the "termination-point" list of the generic network-
      topology module.  New objects include a series of port properties
      and parameters.

   o  Links are augmented as well with a set of parameters, allowing to
      associate a link with an L2 name, the link rate and another set of
      flags.

3.  Layer-2 Topology Yang Module

<CODE BEGINS>
file "l2-topology@2014-10-21.yang"

module l2-topology {
    yang-version 1;
    namespace "urn:TBD:params:xml:ns:yang:nt:l2-topology";
    // replace with IANA namespace when assigned
    prefix "l2t";
    import network-topology {
        prefix "nt";
    }

    import ietf-inet-types {
        prefix "inet";
    }

    import ietf-yang-types {
        prefix "yang";
    }

    organization "TBD";
    contact "TBD";

    revision "2014-10-21" {
        description "Initial revision";
        reference "TBD";



Dong & Wei               Expires April 24, 2015                 [Page 5]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


    }

    typedef vlan {
        description "VLAN ID";
        type uint32 {
            range "1..4095";
        }
    }

    identity flag-identity {
        description "Base type for flags";
    }

    typedef flag-type {
        type identityref {
            base "flag-identity";
        }
    }

    grouping l2-topology-type {
        container l2-topology {
            presence "indicates L2 Topology";
        }
    }

    grouping l2-topology-attributes {
        container l2-topology-attributes {
            leaf name {
                description "Name of the topology";
                type string;
            }
            leaf-list flag {
                description "Topology flags";
                type flag-type;
            }
        }
    }

    grouping l2-node-attributes {
        container l2-node-attributes {
            leaf name {
                description "Node name";
                type string;
            }
            leaf description {
                description "Node description";
                type string;
            }



Dong & Wei               Expires April 24, 2015                 [Page 6]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


            leaf chassis-id {
                description "System MAC address";
                type yang:mac-address;
            }
            leaf-list management-address {
                description "System management address";
                type inet:ip-prefix;
            }
            leaf management-vid {
                description "System management VID";
                type vlan;
            }
            leaf capabilities-support {
                description "System capabilities";
                type bits {
                    bit other {
                        position 1;
                    }
                    bit mac-bridge {
                        position 2;
                    }
                    bit router {
                        position 3;
                    }
                }
            }
            leaf capabilities-enable {
                description "System enabled capabilities";
                type bits {
                    bit other {
                        position 1;
                    }
                    bit mac-bridge {
                        position 2;
                    }
                    bit router {
                        position 3;
                    }
                }
            }
            leaf-list flag {
                description "Node operational flags";
                type flag-type;
            }
        }
    }

    grouping l2-link-attributes {



Dong & Wei               Expires April 24, 2015                 [Page 7]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


        container l2-link-attributes {
            leaf name {
                description "Link Name";
                type string;
            }
            leaf rate {
                description "Link rate";
                type decimal64 {
                 fraction-digits 2;
                }
            }
            leaf-list flag {
                description "Link flags";
                type flag-type;
            }
        }
    } // grouping l2-link-attributes

    grouping l2-termination-point-attributes {
        container l2-termination-point-attributes {
             leaf description {
                description "Port description";
                type string;
             }
             leaf mac-address {
                 description "Interface MAC address";
                 type yang:mac-address;
             }
             leaf port-vlan-id {
                  description "Port VLAN ID";
                 type vlan;
             }
             container ppvid {
                  description "Port and protocol VLAN ID";
                  leaf ppvid {
                      type vlan;
                  }
                  leaf ppvid-flags {
                      type bits {
                          bit port-protocol-vlan-supported {
                               position 1;
                          }
                          bit port-protocol-vlan-enabled {
                              position 2;
                          }
                      }
                  }
             }



Dong & Wei               Expires April 24, 2015                 [Page 8]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


             list vlan-name {
                 key "vlan-id";
                 description "Interface configured VLANs";
                 leaf vlan-id {
                     type vlan;
                 }
                 leaf vlan-name {
                     type string;
                 }
             }
             leaf auto-negotiation {
                 type bits {
                     bit auto-negotiation-support {
                         position 0;
                     }
                     bit auto-negotiation-enable {
                         position 1;
                     }
                 }
             }
             container link-aggregation {
                 leaf aggregation-status {
                     description "Link aggregation capabilities and status";
                     type bits {
                         bit aggregation-capability {
                             position 0;
                         }
                         bit aggregation-status {
                             position 1;
                         }
                     }
                 }
                 leaf aggregated-port-id {
                     type string;
                 }
             }
             leaf oper-mau {
                 type bits {
                     bit bother {
                         position 0;
                     }
                     bit b10base-t {
                         position 1;
                     }
                     bit b10base-tfd {
                         position 2;
                     }
                     bit b100base-t4 {



Dong & Wei               Expires April 24, 2015                 [Page 9]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


                         position 3;
                     }
                     bit b100base-tx {
                         position 4;
                     }
                     bit b100base-txfd {
                         position 5;
                     }
                     bit b100base-t2 {
                         position 6;
                     }
                     bit b100base-t2fd {
                         position 7;
                     }
                     bit bfdx-pause {
                         position 8;
                     }
                     bit bfdx-apause {
                         position 9;
                     }
                     bit bfdx-spause {
                         position 10;
                     }
                     bit bfdx-bpause {
                         position 11;
                     }
                     bit b1000base-X {
                         position 12;
                     }
                     bit b1000base-xfd {
                         position 13;
                     }
                     bit b1000base-t {
                         position 14;
                     }
                     bit b1000base-tfd {
                         position 15;
                     }
                 }
             }
             leaf maximum-frame-size {
                description "interface maximum frame size";
                type uint32;
             }
        }
    } // grouping l2-termination-point-attributes





Dong & Wei               Expires April 24, 2015                [Page 10]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


    augment "/nt:network-topology/nt:topology/nt:topology-types" {
        uses l2-topology-type;
    }

    augment "/nt:network-topology/nt:topology" {
        when "nt:topology-types/l2-topology";
        uses l2-topology-attributes;
    }

    augment "/nt:network-topology/nt:topology/nt:node" {
        when "../nt:topology-types/l2-topology";
        uses l2-node-attributes;
    }
    augment "/nt:network-topology/nt:topology/nt:link" {
        when "../nt:topology-types/l2-topology";
        uses l2-link-attributes;
    }
    augment "/nt:network-topology/nt:topology/nt:node/nt:termination-point" {
        when "../../nt:topology-types/l2-topology";
        uses l2-termination-point-attributes;
    }
}

4.  IANA Considerations

   This document makes no request of IANA.

   Note to RFC Editor: this section may be removed on publication as an
   RFC.

5.  Security Considerations

   The transport protocol used for sending the topology data MUST
   support authentication and SHOULD support encryption.  The data-model
   by itself does not create any security implications.

6.  References

6.1.  Normative References

   [I-D.clemm-i2rs-yang-network-topo]
              Clemm, A., Medved, J., Tkacik, T., Varga, R., Bahadur, N.,
              and H. Ananthakrishnan, "A YANG Data Model for Network
              Topologies", draft-clemm-i2rs-yang-network-topo-01 (work
              in progress), October 2014.






Dong & Wei               Expires April 24, 2015                [Page 11]

Internet-Draft     Layer-2 Network Topology Data Model      October 2014


   [I-D.medved-i2rs-topology-im]
              Medved, J., Bahadur, N., Clemm, A., and H.
              Ananthakrishnan, "An Information Model for Network
              Topologies", draft-medved-i2rs-topology-im-01 (work in
              progress), October 2013.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC6020]  Bjorklund, M., "YANG - A Data Modeling Language for the
              Network Configuration Protocol (NETCONF)", RFC 6020,
              October 2010.

   [RFC6021]  Schoenwaelder, J., "Common YANG Data Types", RFC 6021,
              October 2010.

6.2.  Informative References

   [I-D.amante-i2rs-topology-use-cases]
              Medved, J., Previdi, S., Lopez, V., and S. Amante,
              "Topology API Use Cases", draft-amante-i2rs-topology-use-
              cases-01 (work in progress), October 2013.

   [I-D.medved-i2rs-topology-requirements]
              Medved, J., Previdi, S., Gredler, H., Nadeau, T., and S.
              Amante, "Topology API Requirements", draft-medved-i2rs-
              topology-requirements-00 (work in progress), February
              2013.

Authors' Addresses

   Jie Dong
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: jie.dong@huawei.com


   Xiugang Wei
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Rd.
   Beijing  100095
   China

   Email: weixiugang@huawei.com




Dong & Wei               Expires April 24, 2015                [Page 12]
