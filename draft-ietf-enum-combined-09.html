<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Combined User and Infrastructure ENUM in the e164.arpa tree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Combined User and Infrastructure ENUM in the e164.arpa tree">
<meta name="keywords" content="ENUM, carrier, infrastucture, operator, E.164">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">ENUM -- Telephone Number Mapping</td><td class="header">M. Haberler</td></tr>
<tr><td class="header">Working Group</td><td class="header">IPA</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">O. Lendl</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">enum.at</td></tr>
<tr><td class="header">Expires: September 6, 2009</td><td class="header">R. Stastny</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Oefeg</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 05, 2009</td></tr>
</table></td></tr></table>
<h1><br />Combined User and Infrastructure ENUM in the e164.arpa tree<br />draft-ietf-enum-combined-09</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 6, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This memo defines an interim solution for Infrastructure ENUM
	to allow a combined User and Infrastructure ENUM implementation in
	e164.arpa as a national choice. 
	This interim solution will be deprecated after approval and implementation 
	of the long-term solution.
	
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<br />
<a href="#Terminology">2.</a>&nbsp;
Terminology<br />
<br />
<a href="#Interim">3.</a>&nbsp;
Interim Solution<br />
<br />
<a href="#alg">4.</a>&nbsp;
The Algorithm<br />
<br />
<a href="#pos">5.</a>&nbsp;
Determing the Position of the Branch<br />
<br />
<a href="#transition">6.</a>&nbsp;
Transition to the long-term Solution<br />
<br />
<a href="#examples">7.</a>&nbsp;
Examples<br />
<br />
<a href="#security">8.</a>&nbsp;
Security considerations<br />
<br />
<a href="#IANA">9.</a>&nbsp;
IANA considerations<br />
<br />
<a href="#acknowledgments">10.</a>&nbsp;
Acknowledgments<br />
<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>ENUM (E.164 Number Mapping, <a class='info' href='#RFC3761'>RFC 3761<span> (</span><span class='info'>Faltstrom, P. and M. Mealling, &ldquo;The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM),&rdquo; April&nbsp;2004.</span><span>)</span></a> [RFC3761]) 
	 is a system that 
	 transforms <a class='info' href='#refs.E164'>E.164 numbers<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a> [refs.E164] into domain names and 
	 then queries the <a class='info' href='#RFC1034'>DNS (Domain Name Service)<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names - concepts and facilities,&rdquo; November&nbsp;1987.</span><span>)</span></a> [RFC1034] 
	 for <a class='info' href='#RFC3401'>NAPTR (Naming Authority Pointer) records<span> (</span><span class='info'>Mealling, M., &ldquo;Dynamic Delegation Discovery System (DDDS) Part One: The Comprehensive DDDS,&rdquo; October&nbsp;2002.</span><span>)</span></a> [RFC3401] 
	 to look up which services are available for a specific domain name.
	 
</p>
<p>ENUM as defined in RFC 3761 (User-ENUM) is not well suited for the
	 purpose of interconnection by carriers and voice service providers, 
         as can be seen by the use of
	 various private tree arrangements based on ENUM mechanisms.
</p>
<p>Infrastructure ENUM is defined as the use of the technology in
	 <a class='info' href='#RFC3761'>RFC 3761<span> (</span><span class='info'>Faltstrom, P. and M. Mealling, &ldquo;The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM),&rdquo; April&nbsp;2004.</span><span>)</span></a> [RFC3761] 
	 by the <a class='info' href='#RFC5067'>carrier-of-record<span> (</span><span class='info'>Lind, S. and P. Pfautz, &ldquo;Infrastructure ENUM Requirements,&rdquo; November&nbsp;2007.</span><span>)</span></a> [RFC5067] (voice service
	 provider) for a specific <a class='info' href='#refs.E164'>E.164 number<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a> [refs.E164] to
	 publish a mapping of this telephone number to 
	 one or more <a class='info' href='#RFC3986'>Uniform Resource Identifiers (URIs)<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> [RFC3986].
	
</p>
<p>
	Other voice service providers can query the DNS for this mapping and use the
	resulting URIs as input into their call routing algorithm. 

 

	 These URIs are separate from any URIs that the end-user who    
	 registers his E.164 number in ENUM may wish to associate with that     
	 E.164 number.                                                          
	 
</p>
<p>The requirements, terms and definitions for Infrastructure
	 ENUM are defined in 
	 <a class='info' href='#RFC5067'>[RFC5067]<span> (</span><span class='info'>Lind, S. and P. Pfautz, &ldquo;Infrastructure ENUM Requirements,&rdquo; November&nbsp;2007.</span><span>)</span></a>.
	 
</p>
<p>Using the same E.164 number to domain mapping techniques for
	 other applications under a different, internationally agreed
	 apex (instead of e164.arpa) is
	 straightforward on the technical side.  
	 
	 This process of defining the Dynamic Delegation Discovery 
         System <a class='info' href='#RFC3401'>(DDDS)<span> (</span><span class='info'>Mealling, M., &ldquo;Dynamic Delegation Discovery System (DDDS) Part One: The Comprehensive DDDS,&rdquo; October&nbsp;2002.</span><span>)</span></a> [RFC3401] application  for 
         Infrastructure ENUM is work in progress
	 <a class='info' href='#I-D.ietf-enum-infrastructure'>[I&#8209;D.ietf&#8209;enum&#8209;infrastructure]<span> (</span><span class='info'>Livingood, J., &ldquo;The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery  System (DDDS) Application for Infrastructure ENUM,&rdquo; December&nbsp;2007.</span><span>)</span></a>. This is called the
	 long term solution.
</p>
<p>
	This document presents an interim solution for Infrastructure ENUM 
	and a mechanism for transitioning to a long-term solution. The    
	interim solution is based on establishing a branch in the e164.arpa tree, 
	which resolvers may locate by following the algorithm      
	described in <a class='info' href='#alg'>Section&nbsp;4<span> (</span><span class='info'>The Algorithm</span><span>)</span></a>.
	The location of the branch is dependent upon country code length, 
	and thus resolvers must determine the position of the branch based on the 
	method described in <a class='info' href='#pos'>Section&nbsp;5<span> (</span><span class='info'>Determing the Position of the Branch</span><span>)</span></a>.
	Finally, <a class='info' href='#transition'>Section&nbsp;6<span> (</span><span class='info'>Transition to the long-term Solution</span><span>)</span></a> provides a way that implementations following  
	the procedures of <a class='info' href='#alg'>Section&nbsp;4<span> (</span><span class='info'>The Algorithm</span><span>)</span></a> and 5 may be seamlessly redirected to 
	the long-term solution, when it becomes available.
	
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
	 "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
	 document are to be interpreted as described in BCP 14,
	 <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="Interim"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Interim Solution</h3>

<p>The agreements to establish the long-term solution may take
	 some time. It was therefore decided to develop an Interim Solution that
	 can be used by individual countries to implement an interoperable Infrastructure
	 ENUM tree immediately. The Interim Solution will be deprecated 
	 when the long-term solution becomes available.  
	 It is therefore also required that the  
         Interim Solution includes a smooth migration path to the long-term solution.
	 
</p>
<p>It is also required that existing ENUM clients querying User ENUM as
         defined in <a class='info' href='#RFC3761'>RFC 3761<span> (</span><span class='info'>Faltstrom, P. and M. Mealling, &ldquo;The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM),&rdquo; April&nbsp;2004.</span><span>)</span></a> [RFC3761] continue to work without any
         modification.
</p>
<p>Because of various reasons (e.g. potentially different delegation points, 
	 different reliability requirements, use of DNS wildcards), sharing a single 
	 domain name between the user itself and the respective carrier for a number is not possible. 
         Hence, a different domain name must be used to store infrastructure ENUM 
         information.
</p>
<p>
         In order to avoid the delays associated with the long term solution, the 
         existing delegations and agreements around e164.arpa need to be
         leveraged.
</p>
<p>The method most easily fulfilling the requirements
	  is to branch off the e164.arpa tree into a subdomain at the country
	  code delegation level below e164.arpa, and deploy an Infrastructure
	  ENUM subtree underneath without touching User ENUM semantics at all.
	 
</p>
<p>This allows countries using a dedicated country code to introduce the Interim Solution
	 as a national matter by the concerned National Regulation Authority (NRA).
	 The governing body of a shared country code and the owner of a global
	 network code can also chose to implement this solution within their
	 area of responsibility.
	 
</p>
<p>Under this approach, ITU-T (International Telecommunication Union / 
	 Telecommunication Standardization Sector) and IETF
	 (IAB) involvement is only lightweight, e.g. to recommend the
	 proper algorithm defined here to enable international
	 interoperability.
	 
</p>
<a name="alg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
The Algorithm</h3>

<p>
        RFC 3761 defines ENUM as a Dynamic Delegation Discovery System (DDDS)
        application according to <a class='info' href='#RFC3401'>RFC 3401<span> (</span><span class='info'>Mealling, M., &ldquo;Dynamic Delegation Discovery System (DDDS) Part One: The Comprehensive DDDS,&rdquo; October&nbsp;2002.</span><span>)</span></a> [RFC3401].
        As such, ENUM defines the following components of the DDDS algorithm:
        
</p><br />
<br />

<ol class="text">
<li>Application Unique String
</li>
<li>First Well Known Rule
</li>
<li>Expected Output
</li>
<li>Valid Databases
</li>
</ol>
<p>
	The "Valid Databases" part contains the transformation of a E.164
	telephone number into a domain name.
        Section 2.4 of RFC 3761 uses the following four step algorithm for this:
	
</p><br />
<br />

<ol class="text">
<li>Remove all characters with the exception of the digits.
</li>
<li>Put dots (".") between each digit.
</li>
<li>Reverse the order of the digits.
</li>
<li>Append the string ".e164.arpa" to the end.
</li>
</ol>
<p>
	The Interim Solution for Infrastructure ENUM uses a modified version
	of this algorithm:
	
</p>
<ol class="text"><br />
<br />

<li>
		Determine the proper POSITION parameter for this E.164 number
		according to the algorithm in <a class='info' href='#pos'>Section&nbsp;5<span> (</span><span class='info'>Determing the Position of the Branch</span><span>)</span></a>.
                
</li><br />
<br />

<li>Build an ordered list of single-digit strings from all digits appearing 
		in the telephone number.
                   All non-digit characters are ignored.
                
</li><br />
<br />

<li>Insert a string consisting of "i" after POSITION strings
                   into this list. If the list of strings was shorter than POSITION
                   elements, then report an error.
                
</li><br />
<br />

<li>Reverse the order of the list.
</li><br />
<br />

<li>Append the string "e164.arpa" to the end of the list.
</li><br />
<br />

<li>Create a single domain-name by joining the list together with dots
                (".") between each string.
</li>
</ol>
<p>
	This is the only point where the interim Infrastructure ENUM
	solution differs from straight RFC 3761 ENUM. 
	All other parts of User-ENUM, including the 
	enumservices registrations, apply to I-ENUM as well.
	
</p>
<a name="pos"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Determing the Position of the Branch</h3>

<p>
	In order to allow for the deployment of this Interim Solution
	independently of IAB/ITU-T/RIPE-NCC negotiations the branching label
	"i" cannot be inserted in the Tier-0 zone 
	(i.e. the e164.arpa zone itself) 
	managed currently by RIPE NCC.
	This condition acts as a lower bound on the choice of the
	POSITION parameter.
	
</p>
<p>
	For international E.164-numbers for geographic areas 
	(<a class='info' href='#refs.E164'>[refs.E164]<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a> 6.2.1) and for 
	international E.164-numbers for global services 
	(<a class='info' href='#refs.E164'>[refs.E164]<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a> 6.2.2)
	the most sensible choice for POSITION is number of digits
	in the country code of the number in question. This
	places the branch directly under the country code level
	within the e164.arpa ENUM tree. 
	
</p>
<p>
	For international E.164-number for networks
	(<a class='info' href='#refs.E164'>[refs.E164]<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a> 6.2.3) the appropriate choice
	for POSITION is the combined length of the CC (Country Code)
	and IC (Identification Code) fields.
	
</p>
<p>
	For international E.164-number for groups of countries
	(<a class='info' href='#refs.E164'>[refs.E164]<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a> 6.2.4) the value 
	for POSITION is 4. 
	
</p>
<p>
     The authoritative source for up-to-date country code and network
     Identity Code allocations is a published by ITU-T as a complement 
     to the recommendation E.164
     <a class='info' href='#refs.E164'>[refs.E164]<span> (</span><span class='info'>ITU-T, &ldquo;The International Public Telecommunication Number Plan,&rdquo; February&nbsp;2005.</span><span>)</span></a>. The current version of this complement is available from 
     ITU website under "ITU-T / Service Publications".
     
</p>
<p>
	Please note that country code 1 of the
	North American Numbering Plan (NANP) does not fall under
	the ITU classification of "groups of countries", but is
	a "shared country code" for a geographic area. The POSITION parameter
	for the NANP is thus 1.
	
</p>
<p>
     As of 2007, the POSITION value for a specific E.164 number can be determined with the
     following algorithm:
     
</p><br /><hr class="insert" />
<a name="ccalg"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
</pre></div>
<ul class="text">
<li>If the number starts with 1 or 7 then POSITION is 1
</li>
<li>If the number is in one of the following 2-digit country codes: 20, 27,
30-34, 36, 39, 40, 41, 43-49, 51-58, 60-66,
81, 82, 84, 86, 90-95, or 98, then POSITION is 2.
</li>
<li>If the number starts with 388 or 881, then POSITION is 4
</li>
<li>If the number starts with 878 or 882, then POSITION is 5
</li>
<li>If the number starts with 883 and the next digit is < 5, then POSITION is 6
</li>
<li>If the number starts with 883 and the next digit is >= 5, then POSITION is 7
</li>
<li>In all other cases, POSITION is 3.
</li>
</ul><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Given the fact that the ITU-T recently allocated only 3-digit
	country codes, there are no more spare 1- and 2-digit country
	codes and existing 1- and 2-digit country codes are extremely
	unlikely to be recovered, the above list of 
	existing 1- and 2-digit country codes can be considered very
	stable. The only problem may be a country split as happened
	recently e.g. to Yugoslavia. 
	
</p>
<p>
	 Regarding network codes, the ITU-T has up to 2007 only allocated one
	 and two digit ICs. Assignments of three and four digit ICs started in
	 May 2007 in the +883 country code. A further change in the ITU-T policy in
	 this respect will need to be reflected in the above algorithm.
	
</p>
<a name="transition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Transition to the long-term Solution</h3>

<p>
	The proposed long-term solution for Infrastructure ENUM 
	<a class='info' href='#I-D.ietf-enum-infrastructure'>[I&#8209;D.ietf&#8209;enum&#8209;infrastructure]<span> (</span><span class='info'>Livingood, J., &ldquo;The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery  System (DDDS) Application for Infrastructure ENUM,&rdquo; December&nbsp;2007.</span><span>)</span></a> is the
	establishment of a new zone apex for that tree. This apex
	will play the same role as "e164.arpa" does for User-ENUM.
	
</p>
<p>
	It is unrealistic to assume that all countries and all 
	ENUM clients will manage to migrate from the 
	Interim Solution to the long-term solution at single point in time.
	It is thus necessary to plan for an incremental transition.
	
</p>
<p>
	In order to achieve this, clients using the interim solution
	need to be redirected to the long-term I-ENUM tree for
	all country codes which have already switched to the long-term
	solution. This SHOULD be done by placing 
	<a class='info' href='#RFC2672'>DNAME<span> (</span><span class='info'>Crawford, M., &ldquo;Non-Terminal DNS Name Redirection,&rdquo; August&nbsp;1999.</span><span>)</span></a> [RFC2672]
	records at the
	branch (the "i") label pointing to the appropriate domain name
	in the long-term I-ENUM tree.  All descendants at that branch 
	label location where the DNAME
	record is inserted MUST be removed as required by Section 3 of 
	RFC 2672.
	
</p>
<p>
	Therefore ALL entities involved in making or answering DNS queries for
	I-ENUM MUST fully support the DNAME record type and its semantics. In
	particular, entities involved in I-ENUM lookups MUST correctly handle
	responses containing synthesized CNAMEs that may be generated as a
	consequence of DNAME processing by any other element in resolution,
	typically an iterative mode resolving name server.  These entities
	MUST also apply adequate measures to detect loops and prevent
	non-terminating resolutions because of improperly configured DNAME
	records or combinations of DNAME and CNAME records.
	
</p>
<p>
   Note: Some caching name server implementations are known to          
   handle DNAMEs incorrectly. In the worst case, such bugs could        
   stay undetected until some country transitions to the long-term      
   solution. Therefore, ensuring full DNAME support from the start (and 
   carefully testing that it actually works) is important.              
	
</p>
<p>
	The domain name for the branch location and its DNAME record SHOULD be
	removed once the transition to the long-term solution is completed and
	all entities involved in I-ENUM have migrated to the new zone apex for
	I-ENUM.
	
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Examples</h3>

<p>
	These are two examples of how E.164 numbers translate to to
	Infrastructure ENUM domains according to the Interim Solution.

	  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
+1 21255501234          4.3.2.1.0.5.5.5.2.1.2.i.1.e164.arpa
+44 2079460123          3.2.1.0.6.4.9.7.0.2.i.4.4.e164.arpa
</pre></div><p>

	  
</p>
<p>Here is the list of the intermediate steps for the second example to visualize how the 
	  algorithm as defined in <a class='info' href='#alg'>Section&nbsp;4<span> (</span><span class='info'>The Algorithm</span><span>)</span></a> operates on "+44 2079460123":
	  
</p>
<ol class="text"><br />
<br />

<li>
		"+44 2079460123" is within a 2-digit country code, thus
		POSITION is 2.
		
</li><br />
<br />

<li>The list of strings is ("4","4","2","0","7","9","4","6","0","1","2","3").
		
</li><br />
<br />

<li>POSITION is 2, thus "i" is
		   inserted between the second and the third string, yielding:
		   ("4","4","i","2","0","7","9","4","6","0","1","2","3")
		
</li><br />
<br />

<li>Reversing the list gives:
		   ("3","2","1","0","6","4","9","7","0","2","i","4","4")
		
</li><br />
<br />

<li>Appending "e164.arpa" yields:
		   ("3","2","1","0","6","4","9","7","0","2","i","4","4","e164.arpa")
		
</li><br />
<br />

<li>Concatenation with dots: "3.2.1.0.6.4.9.7.0.2.i.4.4.e164.arpa"
		
</li>
</ol>
<p>
	  After the introduction of the long term Infrastructure ENUM solution
	  using for example "ienum.example.net" as the new apex for I-ENUM, the 
	  administrators of +44 can implement a smooth transition 
	  by putting the following DNAME record in their zone:
	  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
i.4.4.e164.arpa.    IN DNAME 4.4.ienum.example.net.
</pre></div><p>


	  This way, clients using the interim I-ENUM solution end up querying
	  the same tree as clients implementing the long-term solution.
	  
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security considerations</h3>

<p>Privacy issues have been raised regarding unwarranted
	disclosure of user information by publishing Infrastructure ENUM
	information in the public DNS, for instance the use for
	harvesting of numbers in service, or unlisted numbers.
	
</p>
<p>Given that number range allocation is public information,
	we believe the easiest way to cope with such concerns is to
	fully unroll allocated number ranges in the Infrastructure ENUM
	subtree, wherever such privacy concerns exist. Whether a
	number is served or not would be exposed by the carrier of
	record when an attempt is made to contact the corresponding
	URI. We assume this to be an authenticated operation, which
	would not leak information to unauthorized parties.
	
</p>
<p>Entering all numbers in an allocated number range, whether
	serviced or not, or listed or unlisted, will prevent mining
	attempts for such number attributes.
	
</p>
<p>The result would be that the information in the public DNS
	would mirror number range allocation information, but not
	more. Infrastructure ENUM will not tell you more than you can get by
	just dialing numbers.
	
</p>
<p>The URI pointing to the destination network of the Carrier
	of Record should also not disclose any privacy information
	about the identity of end-user. It is therefore recommended to
	use either anonymized UserIDs
	or the E.164 number itself in the user-part of the URI, such as in
	sip:+441632960084@example.com .
	
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA considerations</h3>

<p>None.
</p>
<a name="acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgments</h3>

<p>We gratefully acknowledge suggestions and improvements by
	 Jason Livingood and Tom Creighton of Comcast, Penn Pfautz of
	 ATT,  Lawrence Conroy of Roke Manor Research, Jim Reid, and Alexander
	 Mayrhofer of enum.at.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3761">[RFC3761]</a></td>
<td class="author-text">Faltstrom, P. and M. Mealling, &ldquo;<a href="http://tools.ietf.org/html/rfc3761">The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM)</a>,&rdquo; RFC&nbsp;3761, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3761.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="refs.E164">[refs.E164]</a></td>
<td class="author-text"><a href="mailto:">ITU-T</a>, &ldquo;The International Public Telecommunication Number Plan,&rdquo; Recommendation&nbsp;E.164, February&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1034">[RFC1034]</a></td>
<td class="author-text">Mockapetris, P., &ldquo;<a href="http://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>,&rdquo; STD&nbsp;13, RFC&nbsp;1034, November&nbsp;1987 (<a href="http://www.rfc-editor.org/rfc/rfc1034.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3401">[RFC3401]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3401">Dynamic Delegation Discovery System (DDDS) Part One: The Comprehensive DDDS</a>,&rdquo; RFC&nbsp;3401, October&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3401.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2672">[RFC2672]</a></td>
<td class="author-text"><a href="mailto:crawdad@fnal.gov">Crawford, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2672">Non-Terminal DNS Name Redirection</a>,&rdquo; RFC&nbsp;2672, August&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2672.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC5067">[RFC5067]</a></td>
<td class="author-text">Lind, S. and P. Pfautz, &ldquo;<a href="http://tools.ietf.org/html/rfc5067">Infrastructure ENUM Requirements</a>,&rdquo; RFC&nbsp;5067, November&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5067.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-enum-infrastructure">[I-D.ietf-enum-infrastructure]</a></td>
<td class="author-text">Livingood, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-enum-infrastructure-07.txt">The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery  System (DDDS) Application for Infrastructure ENUM</a>,&rdquo; draft-ietf-enum-infrastructure-07 (work in progress), December&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-enum-infrastructure-07.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael Haberler</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Internet Foundation Austria</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Karlsplatz 1/2/9</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wien  1010</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Austria</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+43 664 4213465</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mah@inode.at">mah@inode.at</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.nic.at/ipa/">http://www.nic.at/ipa/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otmar Lendl</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">enum.at GmbH</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Karlsplatz 1/2/9</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wien  A-1010</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Austria</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+43 1 5056416 33</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:otmar.lendl@enum.at">otmar.lendl@enum.at</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.enum.at/">http://www.enum.at/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richard Stastny</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oefeg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Postbox 147</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vienna  A-1030</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Austria</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+43 664 420 4100</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:richard.stastny@oefeg.at">richard.stastny@oefeg.at</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.oefeg.at">http://www.oefeg.at</a></td></tr>
</table>
</body></html>
