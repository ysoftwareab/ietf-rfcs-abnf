<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Updating TCP to support Variable-Rate Traffic</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Reviewing experience with TCP-CWV">
<link href="#rfc.section.3" rel="Chapter" title="3 Terminology">
<link href="#rfc.section.4" rel="Chapter" title="4 An updated TCP response to idle and application-limited periods  ">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 A method for preserving cwnd in idle and application-limited periods.">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 The nonvalidated phase">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 TCP congestion control during the nonvalidated phase">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Adjustment at the end of the nonvalidated phase  ">
<link href="#rfc.section.4.3.2" rel="Chapter" title="4.3.2 Response to congestion in the nonvalidated phase">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Determining a safe period to preserve cwnd">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document addresses issues that arise when TCP is used to support variable-rate traffic that includes periods where the transmission rate is limited by the application. It evaluates TCP Congestion Window Validation (TCP-CWV), an IETF experimental specification defined in RFC 2861, and concludes that TCP-CWV sought to address important issues, but failed to deliver a widely used solution." />
  <meta name="description" content="This document addresses issues that arise when TCP is used to support variable-rate traffic that includes periods where the transmission rate is limited by the application. It evaluates TCP Congestion Window Validation (TCP-CWV), an IETF experimental specification defined in RFC 2861, and concludes that TCP-CWV sought to address important issues, but failed to deliver a widely used solution." />
  <meta name="keywords" content="CWV, TCP" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">TCPM Working Group</td>
<td class="right">G. Fairhurst</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">I. Biswas</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">University of Aberdeen</td>
</tr>
<tr>
<td class="left">Expires: September 11, 2011</td>
<td class="right">March 10, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Updating TCP to support Variable-Rate Traffic<br />
  <span class="filename">draft-fairhurst-tcpm-newcwv-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document addresses issues that arise when TCP is used to support variable-rate traffic that includes periods where the transmission rate is limited by the application. It evaluates TCP Congestion Window Validation (TCP-CWV), an IETF experimental specification defined in RFC 2861, and concludes that TCP-CWV sought to address important issues, but failed to deliver a widely used solution.</p>
<p>The document recommends that the IETF should consider moving RFC 2861 from Experimental to Historic status, and replacing this with the current specification, which updates TCP to allow a TCP sender to restart quickly following either an idle or data-limited period. The method is expected to benefit variable-rate TCP applications, while also providing an appropriate response if congestion is experienced.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 11, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Reviewing experience with TCP-CWV</a>
</li>
<li>3.   <a href="#rfc.section.3">Terminology</a>
</li>
<li>4.   <a href="#rfc.section.4">An updated TCP response to idle and application-limited periods  </a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">A method for preserving cwnd in idle and application-limited periods.</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">The nonvalidated phase</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">TCP congestion control during the nonvalidated phase</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Adjustment at the end of the nonvalidated phase  </a>
</li>
<li>4.3.2.   <a href="#rfc.section.4.3.2">Response to congestion in the nonvalidated phase</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Determining a safe period to preserve cwnd</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgments</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The TCP congestion window (cwnd) controls the number of packets a TCP flow may have in the network at any time. A bulk application that always sends as fast as possible, will continue to grow the cwnd, and increase its transmission rate until it reaches the maximum permitted by the receiver and congestion windows. In contrast, a variable-rate application may experience long periods when the sender is either idle or application-limited. The focus of this document is on the operation of TCP with such an idle or application-limited case.</p>
<p id="rfc.section.1.p.2">Standard TCP [RFC5681] requires the cwnd to be reset to the restart window (RW) when an application becomes idle. RFC 2861 noted that this behaviour was not always observed in current implementations. Recent experiments [Bis08] confirm this to still be the case. Standard TCP does not control growth of the cwnd when the TCP sender application-limited.  A application-limited sender may therefore grow a cwnd that does not reflect any current information about the state of the network. Use of an invalid cwnd may result in reduced application performance or could significantly contribute to network congestion. These issues were noted in [RFC2861].</p>
<p id="rfc.section.1.p.3">CWV proposed a solution to help reduce the cases where TCP experienced an invalid cwnd. The use and drawbacks of CWV are discussed in Section 2.</p>
<p id="rfc.section.1.p.4">Section 4 discusses an alternative to CWV that seeks to address the same issues, but does so in a way that is expected to mitigate the impact on an application that varies its transmission rate. The method described applies to both an application-limited and an idle condition.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Reviewing experience with TCP-CWV</h1>
<p id="rfc.section.2.p.1">RFC 2861 described a simple modification to the TCP congestion control algorithm that decayed the cwnd after the transition from a &#8220;sufficiently-long&#8221; application-limited period, while using the slow-start threshold (ssthresh) to save information about the previous value of the congestion window. This approach relaxed the standard TCP behaviour [RFC5681] for an idle session, intended to improve application performance. CWV did not modify the behaviour for an application-limited session where a sender continues to transmit at a rate less than allowed by cwnd.</p>
<p id="rfc.section.2.p.2">RFC 2861 has been implemented in some mainstream operating systems as the default behaviour [Bis08]. Analysis (e.g. [Bis10]) has shown that CWV is able to use the available capacity after an idle period over a shared path and that this can have benefit, especially over long delay paths, when compared to slow-start restart specified by standard TCP, but this behaviour can be too conservative to be attractive to many common variable-rate applications. Experience from using applications with CWV suggests that this mechanism does not therefore offer the desirable increase in application performance for variable rate applications and it is unclear that applications actually use the mechanism.</p>
<p id="rfc.section.2.p.3">CWV offers a benefit, compared to standard TCP, for an application that exhibits regular idleness. However, CWV would only benefit the application if the idle period were less than several RTOs, since the behaviour would otherwise be the same as for standard TCP, which reset cwnd to the RW. Although CWV benefits the network in an application-limited scenario, the conservative approach of CWV does not provide an incentive to application to use it. It is therefore suggested that CWV is often a poor solution for many variable rate applications.  In summary, CWV has the correct motivation, but has the wrong approach to solving this problem.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Terminology</h1>
<p id="rfc.section.3.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<p id="rfc.section.3.p.2">The document also assumes familiarity with the terminology of TCP congestion control [RFC5681].</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> An updated TCP response to idle and application-limited periods  </h1>
<p id="rfc.section.4.p.1">This section proposes an update to the TCP congestion control behaviour during an idle or application-limited period. The new method allows a TCP sender to preserve the cwnd when an application becomes idle for a period of time (set in this specification to 6 minutes). This period where actual usage is less than allowed by cwnd is named the nonvalidation phase. This allows an application to resume transmission at a previous rate without incurring the delay of slow-start. However, if the TCP sender experiences congestion using the preserved cwnd, it is required to immediately reset the cwnd to an appropriate value. If a sender does not take advantage of the preserved cwnd within 6 minutes, the value of cwnd is updated, ensuring the value then reflects the capacity that was recently used.</p>
<p id="rfc.section.4.p.2">The new method does not differentiate between times when the sender has become idle or application-limited. It recognises that applications can result in variable-rate transmission. This therefore reduces the incentive for an application to send data, simply to keep transport congestion state. The method requires SACK to be enabled. This allows a sender to select a cwnd following a congestion event that is based on the measured path capacity path, better reflecting the fair-share. A similar approach was proposed by TCP Jump Start [Liu07], as a congestion response after more rapid opening of a TCP connection.</p>
<p id="rfc.section.4.p.3">It is expected that the proposed TCP update will satisfy the requirements of many variable-rate applications and at the same time provide an appropriate method for use in the Internet. This change may also encourage applications to use standards-based congestion control methods.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> A method for preserving cwnd in idle and application-limited periods.</h1>
<p id="rfc.section.4.1.p.1">The method described in this document updates RFC 5681. Use of the method REQUIRES a TCP sender and the corresponding receiver to enable the SACK option [RFC3517].</p>
<p id="rfc.section.4.1.p.2">RFC 5681 defines a variable FlightSize, that indicates the amount of outstanding data in the network. In RFC 5681 this is used during loss recovery, whereas in this method it is also used during normal data transfer. A sender is not required to continuously track this value, but SHOULD measure the volume of data in the network with a sampling period of not less than one RTT period.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> The nonvalidated phase</h1>
<p id="rfc.section.4.2.p.1">The updated method creates a new TCP phase that captures whether the cwnd reflects a valid or nonvalidated value. The phases are defined as:</p>
<p></p>

<ul>
<li>Valid phase: FlightSize &gt;=(2/3)*cwnd. This is the normal phase, where cwnd is an approximate indication of available capacity currently available along the network path, and standard mechanisms are used [RFC5861].</li>
<li>Nonvalidated phase: FlightSize &lt;(2/3)*cwnd. This is the nonvalidated phase, where the cwnd was based on a previous approximation of the available capacity, and the usage of this capacity has not been validated in the previous RTT. That is, the transmission rate is not being constrained by the cwnd. The methods to be used in this phase are specified in the following sections.</li>
</ul>

<p> </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> TCP congestion control during the nonvalidated phase</h1>
<p id="rfc.section.4.3.p.1">A TCP sender that enters the non-validated phase MUST preserve the cwnd (i.e., this neither grows nor reduces while the sender remains in this phase). The phase is concluded after a fixed period of time (6 minutes, as explained in section 4.4) or when the sender transmits using the full cwnd (i.e. it is no longer application-limited).</p>
<p id="rfc.section.4.3.p.2">The behaviour in the non-validated phase is specified as:</p>
<p></p>

<ul>
<li>If the sender consumes all the available space within the cwnd (i.e., the remaining unused cwnd is less than one SMSS), then the sender MUST exit the nonvalidated phase. </li>
<li>If the Retransmission Time Out (RTO) expires during the nonvalidated phase, the sender MUST exit the nonvalidated phase.  It then resumes using the Standard TCP RTO mechanism [RFC 5861].  (The resulting reduction of cwnd is appropriate, since any accumulatd path history is considered unreliable).</li>
</ul>

<p>The threshold value of cwnd required to enter the nonvalidated phase is intentionally different to that required to leave the phase. This introduces hysteresis to avoid rapid oscillation between the phases. Note that the change between phases does not significantly impact an application-limited sender.</p>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> Adjustment at the end of the nonvalidated phase  </h1>
<p id="rfc.section.4.3.1.p.1">During the non-validated phase, an application may produce bursts of data at up to the cwnd in size. This is no different to normal TCP, however it is desirable to control the maximum burst size, e.g.  by setting a burst size limit, using a pacing algorithm, or some other method.</p>
<p id="rfc.section.4.3.1.p.2">An application that remains in the nonvalidated phase for a period greater than six minutes is required to adjust its congestion control state.</p>
<p id="rfc.section.4.3.1.p.3">At the end of the nonvalidated phase, the sender MUST update cwnd:</p>
<div id="#rfc.figure.1"></div>
<pre>        cwnd = max(FlightSize*2, IW).

</pre>
<p id="rfc.section.4.3.1.p.4">Where IW is the TCP initial window [RFC5681].</p>
<p id="rfc.section.4.3.1.p.5">(The value for cwnd was chosen to allow an application to continue to send at the currently utilised rate, and not incur delay should it increase to twice the utilised rate.)</p>
<p id="rfc.section.4.3.1.p.6">The sender also MUST reset the ssthresh:</p>
<div id="#rfc.figure.2"></div>
<pre>        ssthresh = max(ssthresh, 3*cwnd/4).</pre>
<p></p>
<p id="rfc.section.4.3.1.p.8">This adjustment of ssthresh ensures that the sender records that it has safely sustained the present rate. The change is beneficial to applications-limited flows that encounter occasional congestion, and could otherwise suffer an unwanted additional delay in recovering the transmission rate.</p>
<p id="rfc.section.4.3.1.p.9">The sender MAY re-enter the nonvalidated phase, if required (see section 4.2).</p>
<h1 id="rfc.section.4.3.2">
<a href="#rfc.section.4.3.2">4.3.2.</a> Response to congestion in the nonvalidated phase</h1>
<p id="rfc.section.4.3.2.p.1">Reception of congestion feedback while in the nonvalidated phase, i.e., it detects a packet-drop or receives an Explicit Congestion Notification (ECN), indicates that it was inappropriate for the sender to use the preserved cwnd. The sender is therefore required to quickly reduce the rate to avoid further congestion. since cwnd does not reflect a validated value, a new cwnd value must be selected based on the utilised rate.</p>
<p id="rfc.section.4.3.2.p.2">When congestion is detected, the sender MUST calculate a safe cwnd:</p>
<div id="#rfc.figure.3"></div>
<pre>        cwnd = FlightSize? R.</pre>
<p></p>
<p id="rfc.section.4.3.2.p.4">Where, R is the volume of data that was reported as unacknowledged by the SACK information. This follows the method proposed for Jump Start [Liu07].</p>
<p id="rfc.section.4.3.2.p.5">At the end of the recovery phase, the TCP sender MUST reset the cwnd:</p>
<div id="#rfc.figure.4"></div>
<pre>        cwnd = (FlightSize/2).</pre>
<p></p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> Determining a safe period to preserve cwnd</h1>
<p id="rfc.section.4.4.p.1">Setting a limit to the period that cwnd is preserved avoids the undesirable side effects that would result if the cwnd were to be preserved for an arbitrary long period, which was a part of the problem that CWV originally attempted to address. The period a sender may safely preserve the cwnd, is a function of the period that a network path is expected to sustain capacity reflected by cwnd. There is no perfect choice for this time. The period of 6 minutes was chosen as a compromise that was larger than the idle intervals of common applications, but not sufficiently larger than the period for which an Internet path may commonly be regarded as stable.</p>
<p id="rfc.section.4.4.p.2">The capacity of wired networks is usually relatively stable for periods of several minutes and that load stability increases with the capacity. This suggests that cwnd may be preserved for at least a few minutes.</p>
<p id="rfc.section.4.4.p.3">There are cases where the TCP throughput exhibits significant variability over a time less than 6 minutes. Examples could include many wireless topologies, where TCP rate variations may fluctuate on the order of a few seconds as a consequence of medium access protocol instabilities. Mobility changes may also impact TCP performance over short time scales. Senders that observe such rapid changes in the path characteristic may also experience increased congestion with the new method, however such variation would likely also impact TCP&#8217;s behaviour when supporting interactive and bulk applications.</p>
<p id="rfc.section.4.4.p.4">Routing algorithms may modify the network path, disrupting the RTT measurement and changing the capacity available to a TCP connection, however such changes do not often occur within a time frame of a few minutes.</p>
<p id="rfc.section.4.4.p.5">The value of 6 minutes is expected to be sufficient for most current applications. Simulation studies also suggest that for most practical applications, the performance using this value will not be significantly different to that observed using a non-standard method that does not reset cwnd after idle.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Security Considerations</h1>
<p id="rfc.section.5.p.1">General security considerations concerning TCP congestion control are discussed in RFC 5681. This document describes a algorithm that updates one aspect of those congestion control procedures, and so the considerations described in RFC 5681 apply to this algorithm also.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> IANA Considerations</h1>
<p id="rfc.section.6.p.1">None.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Acknowledgments</h1>
<p id="rfc.section.7.p.1">The authors acknowledge the contributions of Dr A Sathiaseelan and Dr R Secchi in supporting the evaluation of CWV and for their help in developing the protocol proposed in this draft.</p>
<p></p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2861">[RFC2861]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Padhye, J.</a> and <a>S. Floyd</a>, "<a href="http://tools.ietf.org/html/rfc2861">TCP Congestion Window Validation</a>", RFC 2861, June 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3517">[RFC3517]</b></td>
<td class="top">
<a>Blanton, E.</a>, <a>Allman, M.</a>, <a>Fall, K.</a> and <a>L. Wang</a>, "<a href="http://tools.ietf.org/html/rfc3517">A Conservative Selective Acknowledgment (SACK)-based Loss Recovery Algorithm for TCP</a>", RFC 3517, April 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5681">[RFC5681]</b></td>
<td class="top">
<a>Allman, M.</a>, <a>Paxson, V.</a> and <a>E. Blanton</a>, "<a href="http://tools.ietf.org/html/rfc5681">TCP Congestion Control</a>", RFC 5681, September 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Bis08">[Bis08]</b></td>
<td class="top">
<a>Biswas, </a> and <a> Fairhurst</a>, "<a>A Practical Evaluation of Congestion Window Validation Behaviour, 9th Annual Postgraduate Symposium in the Convergence of Telecommunications, Networking and Broadcasting (PGNet), Liverpool, UK, Jun. 2008.</a>", .</td>
</tr>
<tr>
<td class="reference"><b id="Liu07">[Liu07]</b></td>
<td class="top">
<a>Liu, </a>, <a>Allman, </a>, <a>Jiny, </a> and <a> Wang</a>, "<a>Congestion Control without a Startup Phase, 5th International Workshop on Protocols for Fast Long-Distance Networks (PFLDnet), Los Angeles, California, USA, Feb. 2007.</a>", .</td>
</tr>
<tr>
<td class="reference"><b id="Bis10">[Bis10]</b></td>
<td class="top">
<a>Biswas, </a>, <a>Sathiaseelan, </a>, <a>Secchi, </a> and <a> Fairhurst</a>, "<a>Analysing TCP for Bursty Traffic, Int'l J. of Communications, Network and System Sciences, 7(3), July 2010.</a>", .</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Godred Fairhurst</span> 
	  <span class="n hidden">
		<span class="family-name">Fairhurst</span>
	  </span>
	</span>
	<span class="org vcardline">University of Aberdeen</span>
	<span class="adr">
	  <span>School of Engineering</span>
<span>Fraser Noble Building</span>

	  <span class="vcardline">
		<span class="locality">Aberdeen</span>,  
		<span class="region">Scotland</span> 
		<span class="code">AB24 3UE</span>
	  </span>
	  <span class="country-name vcardline">UK</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:gorry@erg.abdn.ac.uk">gorry@erg.abdn.ac.uk</a></span>

<span class="vcardline">URI: <a href="http://www.erg.abdn.ac.uk">http://www.erg.abdn.ac.uk</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Israfil Biswas</span> 
	  <span class="n hidden">
		<span class="family-name">Biswas</span>
	  </span>
	</span>
	<span class="org vcardline">University of Aberdeen</span>
	<span class="adr">
	  <span>School of Engineering</span>
<span>Fraser Noble Building</span>

	  <span class="vcardline">
		<span class="locality">Aberdeen</span>,  
		<span class="region">Scotland</span> 
		<span class="code">AB24 3UE</span>
	  </span>
	  <span class="country-name vcardline">UK</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:israfil@erg.abdn.ac.uk">israfil@erg.abdn.ac.uk</a></span>

<span class="vcardline">URI: <a href="http://www.erg.abdn.ac.uk">http://www.erg.abdn.ac.uk</a></span>

  </address>
</div>

</body>
</html>